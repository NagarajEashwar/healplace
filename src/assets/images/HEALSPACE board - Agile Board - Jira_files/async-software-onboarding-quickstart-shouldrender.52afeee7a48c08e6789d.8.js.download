try{window.performance.mark("async-software-onboarding-quickstart-shouldrender.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-software-onboarding-quickstart-shouldrender"],{"./src/packages/platform/services/nav-item-service/src/services/create-project-permisson/index.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return b}));var s=r("./node_modules/react-sweet-state/lib/esm/store/create.js"),c=r("./node_modules/react-sweet-state/lib/esm/components/container.js"),n=r("./node_modules/react-sweet-state/lib/esm/components/hook.js"),a=r("./src/packages/platform/utils/fetch/src/utils/as-json.js");function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{}
;t%2?o(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=e=>async({setState:t,getState:r})=>{const{isFetching:s}=r();if(!s)try{t(i(i({},await(async e=>{const t=`${e}/rest/internal/2/projectpermissions`;return await Object(a.a)(t)})(e)),{},{isFetching:!1,fetchError:null,hasFetchedOnce:!0,hasSuccessOnce:!0}))}catch(c){t({canCreateProject:!1,canCreateClassicProject:!1,canCreateNextGenProject:!1,hasElevatedCreateClassicBusinessProject:!1,isFetching:!1,fetchError:c,hasFetchedOnce:!0})}},l={fetchCreateProjectPermission:e=>async({setState:t,dispatch:r})=>{t({isFetching:!0,promise:r(d(e))})}},p=Object(s.a)({name:"create-project-permissions",initialState:{
canCreateProject:!1,canCreateClassicProject:!1,canCreateNextGenProject:!1,hasElevatedCreateClassicBusinessProject:!1,isFetching:!1,fetchError:null,promise:null,hasFetchedOnce:!1,hasSuccessOnce:!1},actions:l}),j=(Object(c.a)(p),Object(n.a)(p)),b=Object(n.a)(p,{selector:null})},"./src/packages/platform/services/providers-container-context/src/common/utils/index.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));const s=e=>{const{product:{links:t,selectedScope:r}}=e;if(r&&r.isAgilityBoard)return"simple";const s=/-(kanban|scrum)/,c=(t&&t[0]&&t[0].links||[]).find((e=>s.test(e.id)));return c&&c.id.includes("kanban")?"kanban":"scrum"},c=e=>{const t={},{product:{avatar:r,selectedScope:c,location:n},sidebarContext:a}=e;var o;(c&&(t.scope={id:c.id,type:s(e),name:c.name}),r&&n&&"user"===n.type)&&(t.user={id:n.id,name:r.name,avatarUrl:r.url,profileUrl:n.url,accountId:null!==(o=n.accountId)&&void 0!==o?o:""},t.contextType="user");return n&&r&&a&&!t.contextType&&(t.project={
key:a.projectKey,type:a.projectType,id:n.id,name:r.name,isSimplified:Boolean(a&&a.isSimplified||c&&c.isAgilityBoard),avatarUrl:r.url,style:a.style},t.contextType="project"),t.contextType?t:null}},"./src/packages/platform/services/providers-container-context/src/index.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return o})),r.d(t,"a",(function(){return i}));var s=r("./node_modules/react/index.js"),c=r("./node_modules/react-resource-router/build/esm/index.js"),n=r("./src/packages/routes/src/common/ui/resources/navigation-sidebar-project/index.js"),a=r("./src/packages/platform/services/providers-container-context/src/common/utils/index.js");const o=()=>{const{data:e,error:t,loading:r,refresh:o}=Object(c.o)(n.b);return[{data:Object(s.useMemo)((()=>null!=e&&e.response?Object(a.a)(e.response):null),[e]),error:t,loading:r},{fetch:o,refetch:o}]},i=e=>{const[t,r]=o();return e.children(t,r)};i.displayName="ContainerContextSubscriber"},
"./src/packages/platform/services/providers-project-context/src/index.js":function(e,t,r){"use strict";r.d(t,"b",(function(){return a}));var s=r("./node_modules/react/index.js"),c=r("./node_modules/react-resource-router/build/esm/index.js"),n=r("./src/packages/routes/src/common/ui/resources/project-context/index.js");const a=()=>{const{data:e,error:t,loading:r,update:a}=Object(c.o)(n.b);return{data:e,error:t,loading:r,updateCache:Object(s.useCallback)((e=>a((()=>e))),[a])}};t.a=({children:e})=>e(a())},"./src/packages/software/onboarding-quickstart/src/services/actions/should-show-experience/index.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return v}));var s={};r.r(s),r.d(s,"getRemoteOnboardingState",(function(){return O})),r.d(s,"fetchQuickstartStatus",(function(){return h}))
;var c=r("./node_modules/react/index.js"),n=r("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),a=r("./src/packages/platform/services/nav-item-service/src/services/create-project-permisson/index.js"),o=r("./src/packages/platform/services/providers-container-context/src/index.js"),i=r("./src/packages/platform/controllers/spa-state/src/components/page-ready-state/index.js"),u=r("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),d=r("./src/packages/software/onboarding-quickstart/src/common/constants.js"),l=r("./src/packages/software/onboarding-quickstart/src/feature-flags.js"),p=r("./node_modules/lodash/get.js"),j=r.n(p),b=r("./node_modules/react-sweet-state/lib/esm/store/create.js"),f=r("./node_modules/react-sweet-state/lib/esm/components/hook.js"),m=r("./src/packages/common-legacy-do-not-add-anything-new/src/rest/api/latest/user-properties/index.js"),g=r("./src/packages/software/onboarding-quickstart/src/utils/analytics/index.js")
;const O=async({baseUrl:e,atlassianAccountId:t})=>{if(!t)return d.m.NONE;try{var r;const s=await Object(m.a)(e,t,"growth-nux");return null!=s&&null!==(r=s.enrolledExperiences)&&void 0!==r&&r.CHECKLIST?s.enrolledExperiences.CHECKLIST:d.m.NONE}catch(s){if(404===(null==s?void 0:s.statusCode))return d.m.NOT_STARTED;if(401===(null==s?void 0:s.statusCode))return d.m.NONE;Object(g.a)(s,"getUserProperty")}return null},h=({baseUrl:e,atlassianAccountId:t})=>async({getState:r,setState:s})=>{const{isFetching:c,wasFetched:n,fetchedOnce:a}=r();if(c)return;if(n)return;s({isFetching:!0});const o=await O({baseUrl:e,atlassianAccountId:t});s(o?{remoteStatus:o,isFetching:!1,wasFetched:!0,fetchedOnce:!0}:{isFetching:!1,wasFetched:a,fetchedOnce:!0})},k=Object(b.a)({initialState:{isFetching:!1,wasFetched:!1,fetchedOnce:!1},actions:s,name:"jsw-onboarding-quickstart-experience-status"}),y=Object(f.a)(k),v=e=>{const[{data:t}]=Object(o.b)(),r=Object(u.c)(),[{isReady:s}]=Object(i.c)(),p=(()=>{
const[e,t]=Object(c.useState)(),{baseUrl:r,atlassianAccountId:s}=Object(u.c)();return Object(c.useEffect)((()=>{Object(l.i)()||(async()=>{if(s)try{const e=await Object(m.a)(r,s,"growth-nux"),c=j()(e,"enrolledExperiences.CHECKLIST");t(c)}catch(e){e&&404===e.statusCode?t(d.m.NOT_STARTED):Object(g.a)(e,"getUserProperty")}})()}),[s,r]),e})(),[{canCreateProject:b,isFetching:f,hasFetchedOnce:O},{fetchCreateProjectPermission:h}]=Object(a.a)(),[{remoteStatus:k,isFetching:v,wasFetched:x},{fetchQuickstartStatus:w}]=y();if(Object(c.useEffect)((()=>{if(!Object(l.i)())return;const{baseUrl:e,atlassianAccountId:t}=r;!s||v||x||w({baseUrl:e,atlassianAccountId:t})}),[w,v,s,r,x]),Object(c.useEffect)((()=>{!s||f||O||h(r.baseUrl)}),[s,f,O,h,r]),"software"!==(null==e?void 0:e.projectType)&&"business"!==(null==e?void 0:e.projectType))return!1;if(Object(n.e)())return!1
;const S=t&&t.scope&&t.scope.type,P=Object(l.d)()&&"project"===(null==t?void 0:t.contextType)&&"business"===(null==e?void 0:e.projectType),E=Object(l.i)()?k:p;return P||b&&Boolean(S)&&(E===d.m.NOT_STARTED||E===d.m.STARTED)}},"./src/packages/software/onboarding-quickstart/src/services/model/constants.js":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));const s={END_USER:"end-user",SITE_ADMIN:"site-admin",JIRA_ADMIN:"jira-admin"}},"./src/packages/software/onboarding-quickstart/src/ui/render-controller/index.js":function(e,t,r){"use strict";r.r(t),r.d(t,"QuickstartShouldRender",(function(){return k}))
;var s=r("./node_modules/react/index.js"),c=r.n(s),n=r("./node_modules/react-resource-router/build/esm/index.js"),a=r("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),o=r("./src/packages/platform/ui/error-boundary/src/main.js"),i=r("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),u=r("./src/packages/platform/utils/router/src/index.js"),d=r("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),l=r("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),p=r("./src/packages/platform/services/providers-container-context/src/index.js"),j=r("./src/packages/platform/services/providers-project-context/src/index.js"),b=r("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),f=r("./src/packages/software/onboarding-quickstart/src/services/index.js"),m=r("./src/packages/software/onboarding-quickstart/src/feature-flags.js"),g=r("./src/packages/software/onboarding-quickstart/src/services/actions/should-show-experience/index.js")
;var O=r("./src/packages/software/onboarding-quickstart/src/services/model/constants.js");function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}const k=e=>{const[{match:t,route:r}]=Object(n.p)(),c=Object(b.c)(),{isProjectSettingsPage:a=!1}=e,{projectContext:o}=e,[{data:i}]=Object(p.b)(),u=o&&o.data,j=((e,t)=>e?O.a.SITE_ADMIN:t?O.a.JIRA_ADMIN:O.a.END_USER)(c.isSiteAdmin,c.isAdmin),{canShowExperience:h,isEnrolledForProjectSettings:k}=((e,t,r)=>{const[,{setShouldRenderComponent:c,forceHideNudge:n}]=Object(f.o)(),a=Object(g.a)(e),o=Object(f.c)(e),i=Object(f.d)(e),[{isQuickstartLoaded:u,shouldRenderComponent:d},l]=Object(f.j)(),p=Object(f.e)(e),j=t&&a&&o,b=Object(s.useRef)(!1);return Object(s.useEffect)((()=>{e&&l.setProjectState({canInvitePeopleToProject:o,canRenderVideoCard:i,canRenderPremiumOnboardingCard:p,projectKey:e.projectKey,
projectId:e.projectId,projectName:e.projectName,isNextGen:e.simplified,projectType:e.projectType,isProjectSettingsPage:t,isProjectAdmin:Boolean(e.isProjectAdmin),userRole:r})}),[l,e,o,t,i,p,r]),Object(s.useEffect)((()=>{if(Object(m.e)())return!a||t&&!o?void 0:u||b.current?void(!d&&u&&c(!0)):(b.current=!0,void l.refreshAppState())}),[l,o,a,j,t,u,e,c,d]),Object(s.useEffect)((()=>(Object(m.e)()||c(t?j:a),()=>{n(),c(!1)})),[c,t,j,a,n,e]),{canShowExperience:a,isEnrolledForProjectSettings:j}})(u,a,j),{createAnalyticsEvent:y}=Object(d.a)();return Object(s.useEffect)((()=>{if(h){const e=((e,t)=>{const r={};return e&&e.match&&e.route&&e.route.navigation&&(r.path=e.match.path,r.routeName=e.route.name,r.navPath=e.route.path,r.menuItem=e.route.navigation.menuId),t&&t.project&&t.scope&&(r.scopeType=t.scope.type,r.projectStyle=t.project.style,r.type=t.project.type,r.isSimplified=t.project.isSimplified),r})({match:t,route:r},i),s=y({});Object(l.f)(s,"nuxOnboardingQuickstart shouldRender",e),
k&&Object(l.f)(s,"invitePeopleToProject shouldRender",{isNextGen:Boolean(u&&u.simplified)})}}),[h,i,y,k,t,u,r]),null},y=e=>{const t=Object(b.c)(),r=Object(u.a)();return c.a.createElement(o.a,{id:"QuickStartShouldRender",packageName:"jiraSoftwareOnboardingQuickstart"},c.a.createElement(i.a,{id:"internalQuickStartShouldRender",packageName:"jiraSoftwareOnboardingQuickstart",sendToPrivacyUnsafeSplunk:!0,attributes:{isIE11:Object(a.e)()}},c.a.createElement(f.a,{baseUrl:t.baseUrl,accountId:t.atlassianAccountId,route:r,isGlobal:!0},c.a.createElement(j.a,null,(t=>c.a.createElement(k,h({},e,{projectContext:t})))))))};y.displayName="QuickstartShouldRenderWithProjectContext";t.default=y},"./src/packages/software/onboarding-quickstart/src/utils/analytics/index.js":function(e,t,r){"use strict";r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return j})),r.d(t,"e",(function(){return b})),r.d(t,"f",(function(){return f})),r.d(t,"b",(function(){return m})),r.d(t,"a",(function(){return g}))
;var s=r("./node_modules/lodash/isEmpty.js"),c=r.n(s),n=r("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),a=r("./src/packages/platform/utils/fetch/src/utils/errors.js"),o=r("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),i=r("./src/packages/software/onboarding-quickstart/src/common/utils.js"),u=r("./src/packages/software/onboarding-quickstart/src/feature-flags.js");function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const p=(e,t)=>{Object(o.h)(e,"button closed","nuxOnboardingQuickstart",t)},j=(e,t)=>{const r=e({});Object(o.h)(r,"button dismissed","nuxOnboardingQuickstart",t)},b=(e,t)=>{const r=e({})
;Object(o.f)(r,"experience completed","nuxOnboardingQuickstart",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t))},f=(e,t,r)=>{const{currentTask:s,prevTask:n,renderTaskList:a,projectState:d}=r,l=Object(i.a)(s),p=Object(i.a)(n),j=Object.keys(a);if(t)c()(n)||Object(o.h)(t,"checklistItem closed",p,{taskPosition:Object(i.i)(j,n),taskId:n,isNextGen:Boolean(null==d?void 0:d.isNextGen)}),c()(s)||Object(o.h)(t,"checklistItem opened",l,{taskPosition:Object(i.i)(j,s),taskId:s,isNextGen:Boolean(null==d?void 0:d.isNextGen)});else if(Object(u.c)()){const t=e({});Object(o.b)(t,"checklistItem autoOpened",l,{taskPosition:Object(i.i)(j,s),taskId:s})}},m=(e,t)=>{const r=e({})
;Object(o.f)(r,"checklistItem completed",Object(i.a)(t),{taskId:t})},g=(e,t,r=[401])=>{Object(u.g)()?Object(n.b)({id:"quickstartApiError",packageName:"jiraSoftwareOnboardingQuickstart",error:e,attributes:{endpointSource:t},logToSentry:!(Object(a.f)(e)||Object(a.c)(e)||e instanceof a.b&&r.includes(e.statusCode))}):Object(n.a)({error:e,meta:{id:"quickstartApiError",packageName:"jiraSoftwareOnboardingQuickstart",teamName:"agile-makkuro"},attributes:{error:e.message,endpointSource:t}})}}}]);try{window.__jsEvalStop("async-software-onboarding-quickstart-shouldrender.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-software-onboarding-quickstart-shouldrender.d282a0ee51e3cb43f55b.8.js.map