;try{window.performance.mark('gh-rapid-lwf-board-deferred_batch_file_eval:start');} catch(e){};;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Projects&&(JIRA.Projects={}),"undefined"==typeof JIRA.Projects.Sidebar&&(JIRA.Projects.Sidebar={}),"undefined"==typeof JIRA.Projects.Sidebar.ScopeFilter&&(JIRA.Projects.Sidebar.ScopeFilter={}),"undefined"==typeof JIRA.Projects.Sidebar.ScopeFilter.Templates&&(JIRA.Projects.Sidebar.ScopeFilter.Templates={}),JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer=function(e,l){return'<div class="aui-sidebar-group aui-sidebar-group-actions collapsed-scope-filter-container"></div>'},JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList=function(e,l){e=e||{};var t="";if(e.selectableScopes||e.createActions){if(t+='<div class="aui-nav-heading" title="'+soy.$$escapeHtml("Boards in this project")+'"><strong class="collapsed-scope-header">'+soy.$$escapeHtml("Boards in this project")+'</strong></div><ul class="aui-nav collapsed-scope-list" title="'+soy.$$escapeHtml("Select a board")+'">',e.selectedScope){t+='<li class="scope-filter selected-scope-filter" title="'+soy.$$escapeHtml(e.selectedScope.label)+'">'+soy.$$escapeHtml(e.selectedScope.label)+"</li>";for(var s=e.selectableScopes,a=s.length,c=0;c<a;c++){var o=s[c];t+=JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass:"scope-filter",anchorClass:o.styleClass,label:o.label,link:o.link})}}if(e.createActions)for(var i=e.createActions,r=i.length,p=0;p<r;p++){var n=i[p];t+=JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem({itemClass:"create-scope-action",anchorClass:n.styleClass,label:n.label,link:n.link})}t+="</ul>"}return t},JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedSelectableItem=function(e,l){return'<li class="'+soy.$$escapeHtml(e.itemClass)+'"><a href="'+soy.$$escapeHtml(e.link)+'" title="'+soy.$$escapeHtml(e.label)+'"'+(e.anchorClass?' class="'+soy.$$escapeHtml(e.anchorClass)+'"':"")+">"+soy.$$escapeHtml(e.label)+"</a></li>"};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/model.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.Model=function(e){this.selectedScope=e.selectedScope,this.createScopeActions=e.createScopeActions,this.selectedScope?this.selectableScopes=_.reject(e.scopes,function(e){return e.label===this.selectedScope.label&&e.link===this.selectedScope.link},this):this.selectableScopes=e.scopes;var t=this.createScopeActions.length>0,c=this.selectableScopes.length>0;this.displayWhenSidebarIsCollapsed=t||c},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectedScope=function(){return this.selectedScope},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getSelectableScopes=function(){return this.selectableScopes},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.getCreateScopeActions=function(){return this.createScopeActions},JIRA.Projects.Sidebar.ScopeFilter.Model.prototype.shouldDisplayWhenSidebarIsCollapsed=function(){return this.displayWhenSidebarIsCollapsed}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/collapsed-view.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedScopeList,serializeData:function(){return{selectedScope:this.model.getSelectedScope(),selectableScopes:this.model.getSelectableScopes(),createActions:this.model.getCreateScopeActions()}},onRender:function(){this.unwrapTemplate()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/collapsed-controller.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedController=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(e){this.scopeFilter=e.scopeFilter;var t=JIRA.Projects.Libs.Marionette.Region.extend({attachHtml:function(e){this.$el.empty().append(e.$el)}});this.collapsedScopeFilterContainer=new t({el:e.collapsedScopeFilterContainer})},render:function(){var e=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedView({model:this.scopeFilter});this.collapsedScopeFilterContainer.show(e)},remove:function(){this.collapsedScopeFilterContainer.empty(),this.collapsedScopeFilterContainer.$el.empty()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/collapsed-initializer.js' */
!function(){"use strict";function e(e){var i=AJS.$(JIRA.Projects.Sidebar.ScopeFilter.Templates.collapsedContainer());return e.prepend(i),i}function i(e,i){e.on("collapse-start",function(){i.render(),JIRA.trace("sidebar.scopefilter.collapsed")}),e.on("expand-end",function(){i.remove()})}AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter"),JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer=JIRA.Projects.Libs.Marionette.Controller.extend({initialize:function(e){this.sidebarAPI=e.sidebarAPI,this.scopeFilterData=e.scopeFilterData,this.$sidebarContentContainer=e.$sidebarContentContainer},run:function(){if(this.sidebarAPI.isProjectSidebar()){var t=new JIRA.Projects.Sidebar.ScopeFilter.Model(this.scopeFilterData);if(t.shouldDisplayWhenSidebarIsCollapsed()){var r=e(this.$sidebarContentContainer),o=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedController({scopeFilter:t,collapsedScopeFilterContainer:r});i(this.sidebarAPI,o),this.sidebarAPI.isCollapsed()&&o.render()}}}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/scope-filter-analytics.js' */
!function(){"use strict";function e(){var e=!0;AJS.$("body").on("click.expanded-filter-list","#sidebar-scope-filter-list a",function(e){n(AJS.$(e.target))}),AJS.$("body").on("aui-dropdown2-show","#sidebar-scope-filter-list",function(){o(e)}),AJS.$("body").on("aui-dropdown2-hide","#sidebar-scope-filter-list",function(){a(e)})}function i(){var e=!1;AJS.$("body").on("click.collapsed-filter-list","aui-inline-dialog#sidebar-submenu1 a",function(e){t(AJS.$(e.target))}),AJS.$("body").on("aui-show","aui-inline-dialog#sidebar-submenu1",function(){o(e)}),AJS.$("body").on("aui-hide","aui-inline-dialog#sidebar-submenu1",function(){a(e)})}function n(e){if(1===e.parent().parent().parent().index())c(!0);else{var i=e.parent().index(),n=e.data("scope-filter-id");r(!0,n,i)}}function t(e){if(e.parent().hasClass("create-scope-action"))c(!1);else{var i=e.parent().index(),n=JIRA.Projects.Sidebar.ScopeFilter.Analytics.scopes[i].id,t=i-1;r(!1,n,t)}}function o(e){s("","open",{expanded:e})}function a(e){s("","close",{expanded:e})}function c(e){s("create","click",{expanded:e})}function r(e,i,n){s("scope","click",{expanded:e,scopeId:i,scopePosition:n})}function s(e,i,n){var t="sidebar.scopeFilter"+(e?"."+e:"");d.trackEvent(t,i,n)}var d=require("jira/components/analytics-tracker/tracker");AJS.namespace("JIRA.Projects.Sidebar.ScopeFilter.Analytics"),JIRA.Projects.Sidebar.ScopeFilter.Analytics={initScopeFilterAnalytics:function(n){this.scopes=n,e(),i()}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:collapsed-scope-filter', location = 'jira-projects-module/sidebar/scopefilter/collapsed-init.js' */
!function(){"use strict";JIRA.API.getSidebar().done(function(e){var t=WRM.data.claim("scope-filter-data");if(t){var i=new JIRA.Projects.Sidebar.ScopeFilter.CollapsedInitializer({sidebarAPI:e,scopeFilterData:t,$sidebarContentContainer:e.getContentContainer()});i.run(),JIRA.Projects.Sidebar.ScopeFilter.Analytics.initScopeFilterAnalytics(t.scopes)}})}();;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/dialog/CreateBranchFormDialog.js' */
"use strict";define("jira/devstatus/create-branch-form-dialog",["backbone","jquery","require","jira/dialog/form-dialog","jira-development-status/util/WRM"],function(e,t,i,a,r){return e.View.extend({initialize:function(e){AJS.namespace("JIRA.DevStatus.CtaDialog"),this.parentContainerSelector=e.parentContainerSelector,this.panelSelector=e.panelSelector,this.linkSelector=e.linkSelector,this.dialogId="devstatus-cta-dialog",JIRA.DevStatus.CtaDialogAnalytics.initialize(this.parentContainerSelector,this.linkSelector,this.dialogId),this._initFormDialog()},_initFormDialog:function(){var e=this,n=JIRA.DevStatus.CtaDialog.dialog=new a({id:this.dialogId,width:560,content:function(a){var o=this;r.requireDetailDialogResources(function(){var r=i("jira/devstatus/instance-picker-view");o.pickerView=new r({el:o.$popup,activeTrigger:o.$activeTrigger,cta:e._getCta(o.$activeTrigger)}),o.pickerView.render().always(function(e){a(e),t(n.$popup).find(".target").eq(0).focus(),JIRA.DevStatus.CtaDialogAnalytics.fireCreateBranchEvent("dialog.open")})})},trigger:this.linkSelector,autoClose:!0})},_getCta:function(e){var t=e.data("cta");if(t)return t;var i=e.attr("href"),a=i&&/\#([a-zA-Z\.]+)/.exec(i);return a&&a[1]}})}),Backbone.define("JIRA.DevStatus.CreateBranchFormDialog",require("jira/devstatus/create-branch-form-dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusModule.js' */
"use strict";define("jira/devstatus/dev-status-module",["backbone","jquery","require","underscore","jira/util/data/meta"],function(t,e,i,a,s){return t.Model.extend({initialize:function(t){a.defaults(this,t),this._listeners=new JIRA.DevStatus.Util.Listeners;var e=i("jira/devstatus/create-branch-form-dialog");this.createBranchFormDialog=new e(t),this.devSummaryJson=null,this.triggerHelpTipShown=!1,this.aitHelptip=null,this._initFocusHandler()},initializePanel:function(t){return this._listeners.stopListening(),this._renderedData=null,this._getContainers(t),this._createCreateBranchView(t),this.devSummaryJson=this.devStatusContainer.find(".dev-summary.json-blob").data("json"),this._createDevStatusData(t),this._createAnalyticsModel(t),this._createSummaryViews(t),this._setupDataEventHandlers(),this.devStatusPanelVisibilityToggler=t.devStatusPanelVisibilityToggler,this._startDevStatus(),this},_createCreateBranchView:function(t){var e=i("jira/devstatus/create-branch-view");this.createBranchView=new e({el:this.createBranchContainer,showTooltip:t.showTooltip})},_createDevStatusData:function(t){this.devStatusData=new JIRA.DevStatus.DevStatusData({issueId:this.devStatusContainer.data("issue-id"),issueKey:this.devStatusContainer.data("issue-key")})},_createSummaryViews:function(t){var i=this,s=this.devStatusContainer.data();this._summaryModules=a.clone(this.statusPanelContainer.find(".status-panel").map(function(){var t=e(this);return new(JIRA.DevStatus[t.data("module")])({dataAttrs:s,el:t,analyticsModel:i.analyticsModel})})),this._errorModule=new JIRA.DevStatus.SummaryErrorModule({el:this.messagePanelContainer,dataAttrs:s})},_createAnalyticsModel:function(t){this.analyticsModel=new JIRA.DevStatus.AnalyticsModel({devStatusContainer:this.devStatusContainer,devStatusData:this.devStatusData})},_getContainers:function(t){this.devStatusContainer=t.container,this.parentContainer=t.container.closest(this.parentContainerSelector),this.createBranchContainer=t.container.find(this.linkSelector),this.statusPanelContainer=t.container.find(this.statusPanelSelector),this.headerContainer=this.parentContainer.find(t.headerSelector),this.messagePanelContainer=t.container.find(".message-panel")},_onLoadingStarted:function(){this._startLoadingModuleData()},_onLoadingSuccess:function(t,e,i){var a=this.devStatusData.get("aggregatedData");this._renderModules({success:!0,renderData:a}),this._postRender(!e,i,a)},_onLoadingFailure:function(){this._renderModules({success:!1}),this._postRender(!1,!0)},_setupDataEventHandlers:function(){this._listeners.startListening(this.devStatusData,"beforeRequest",this._onLoadingStarted,this),this._listeners.startListening(this.devStatusData,"requestSuccess",this._onLoadingSuccess,this),this._listeners.startListening(this.devStatusData,"requestFail",this._onLoadingFailure,this)},_startDevStatus:function(){var t=!this.devSummaryJson||this.devSummaryJson.isStale===!0;this.devSummaryJson&&this.devStatusData.setAggregateData(this.devSummaryJson.cachedValue,!0,!t),t&&(this._startLoadingModuleData(),this.devStatusData.retrieveAggregateData())},_initFocusHandler:function(){var t=JIRA.DevStatus.DevStatusModule.MAX_REFRESH_WINDOW;e(window).on("focus",a.throttle(a.bind(this.refreshSummaryData,this),t,{trailing:!1}))},refreshSummaryData:function(){this.devStatusData&&this.devStatusData.retrieveAggregateData()},_postRender:function(t,e,i){function s(){e&&(u.addClass("js-animation-completed"),r._attachAutomaticTransitionsHelpTip(i))}var n=this._isAnySummaryViewVisibleOnPanel()||this._isAnyErrorViewVisible(),r=this;if(n){var o=this.analyticsModel.getIssue();JIRA.DevStatus.SummaryAnalytics.fireSummaryShownEvent({isAssignee:o.isAssignee,eventProperties:a.extend({},o,this.analyticsModel.getSummary(),this.analyticsModel.getInstanceType())}),this._openDetailDialogUrlLink()}this._togglePanelEmptyStatus(!this._isAnySummaryViewVisibleOnPanel());var u=this.parentContainer,l=n||this.createBranchContainer.size()>0;this.devStatusPanelVisibilityToggler&&u.is(":visible")!==l?(this.devStatusPanelVisibilityToggler(this.parentContainer,l,t,s),!l&&this.aitHelptip&&this.aitHelptip.isVisible()&&this.aitHelptip.hide()):s()},_attachAutomaticTransitionsHelpTip:function(t){var i=this.parentContainer.is(":visible"),s=this._shouldRenderAITTooltip(t);!s&&this.aitHelptip&&this.aitHelptip.isVisible()?this.aitHelptip.hide():s&&!this.triggerHelpTipShown&&JIRA.DevStatus.showAITTooltip&&i&&(a.defer(a.bind(function(){this.aitHelptip=new AJS.HelpTip({id:"automaticTransitionDevSummaryTooltip",title:"Automate your status updates",bodyHtml:JIRA.Templates.DevStatus.Tooltip.automaticTransitions({aitHelpLinkUrl:this.devStatusContainer.data("ait-help-url-json")}),anchor:"#viewissue-devstatus-panel_heading .toggle-title",isSequence:!0,callbacks:{init:function(){e("#trigger-docs-link").on("click",function(){AJS.trigger("analyticsEvent",{name:"devstatus.automatic.transitions.learn.more.clicked",data:{}})})}},inlineDialogOpts:{width:400}}),AJS.HelpTip.Manager.showSequences()},this)),this.triggerHelpTipShown=!0)},_shouldRenderAITTooltip:function(t){return!!t&&(t.summary.branch.overall.count>0||t.summary.repository.overall.count>0||t.summary.pullrequest.overall.count>0||t.summary.review.overall.count>0)},_getModuleByType:function(t){return a.find(this._summaryModules,function(e){return e.data&&e.data.getType&&a.isEqual(e.data.getType(),t)})},_openDetailDialogUrlLink:function(){var t=s.get("fusion-open-detail-dialog");if(t){var e;if(JIRA.DevStatus.URL.isCreateReviewDetailDialogLink(t)?e=this._getModuleByType("repository"):(e=this._getModuleByType(t),e&&s.set("fusion-open-detail-dialog",void 0)),e){var i=e.view;i&&i.isVisible()&&(s.set("fusion-analytics-new-context-link",!0),i.getSummaryLink().click())}}},_togglePanelEmptyStatus:function(t){this.statusPanelContainer&&this.statusPanelContainer.toggleClass("empty-status",t)},_isAnySummaryViewVisibleOnPanel:function(){return!!a.find(this._summaryModules,function(t){return t.isViewVisible()})},_isAnyErrorViewVisible:function(){return this._errorModule.isViewVisible()},_renderModules:function(t){var e=this._renderedData=t.renderData||this._renderedData;a.each(this._summaryModules,function(t){t.render(e)}),this._errorModule.render(t.success?e:void 0)},_startLoadingModuleData:function(){a.each(this._summaryModules,function(t){t.startLoading()})}},{MAX_REFRESH_WINDOW:3e4})}),Backbone.define("JIRA.DevStatus.DevStatusModule",require("jira/devstatus/dev-status-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusData.js' */
"use strict";define("jira/devstatus/dev-status-data",["backbone","jquery","underscore"],function(e,t,s){return e.Model.extend({properties:["aggregatedData"],namedEvents:["beforeRequest","requestFail","requestSuccess"],initialize:function(e){this.issueId=e.issueId,this.issueKey=e.issueKey},retrieveAggregateData:function(){var e=AJS.contextPath()+"/rest/dev-status/1.0/issue/summary?issueId="+this.issueId;return this.trigger("beforeRequest"),t.ajax(e).done(s.bind(this.setAggregateData,this)).fail(s.bind(this.setAggregateDataError,this)).promise()},setAggregateData:function(e,t,s){this.set("aggregatedData",e),this.trigger("requestSuccess",this,t===!0,!!s)},setAggregateDataError:function(e,t){this.set("aggregatedData",void 0),this.trigger("requestFail",this,e)}})}),Backbone.define("JIRA.DevStatus.DevStatusData",require("jira/devstatus/dev-status-data"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/CreateBranchView.js' */
"use strict";define("jira/devstatus/create-branch-view",["backbone","underscore","jira/util/data/meta"],function(t,e,i){return t.View.extend({initialize:function(t){this.tooltipShown=!t.showTooltip,this.linkTextSelector=".devstatus-cta-link-text",this.issueContainer=".issue-container",this._processLinkForNavigableURL(),this._initTooltip(),e.defer(e.bind(this._openCreateBranchDialog,this))},getCreateBranchLink:function(){return this.$el},_processLinkForNavigableURL:function(){this.getCreateBranchLink().data("cta",this._getCta(this.$el)),this.getCreateBranchLink().attr("href",JIRA.DevStatus.URL.getUrlWithDetailDialogParam("create-branch"))},_openCreateBranchDialog:function(){var t=i.get("fusion-open-detail-dialog");"create-branch"===t&&(i.set("fusion-open-detail-dialog",void 0),i.set("fusion-analytics-new-context-link",!0),this.getCreateBranchLink().click())},_initTooltip:function(){!this.tooltipShown&&this.$el.length>0&&e.defer(e.bind(function(){var t=this.$el.data("cta");t&&(new AJS.HelpTip({id:t+".tooltip",title:"Start development",bodyHtml:JIRA.Templates.DevStatus.Tooltip.createBranch(),anchor:this.$el.find(this.linkTextSelector),isSequence:!0,inlineDialogOpts:{container:this.issueContainer,width:400}}),this.tooltipShown=!0,AJS.HelpTip.Manager.showSequences())},this))},_getCta:function(t){var e=t.attr("href"),i=e&&/\#([a-zA-Z\.]+)/.exec(e);return i&&i[1]}})}),Backbone.define("JIRA.DevStatus.CreateBranchView",require("jira/devstatus/create-branch-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BasePanelModule.js' */
"use strict";define("jira/devstatus/base-panel-module",["backbone","underscore"],function(e,t){return e.Model.extend({initialize:function(e){this.options=t.defaults({},e),this.data=this.createModel()},render:function(e){this.startViews(),this.data.updateData(e),this.view.render()},startLoading:function(){this.data.startLoadingData&&this.data.startLoadingData()},startViews:function(){this.view||(this.view=this.createView())},stopViews:function(){this.view&&(this.view.undelegateEvents(),this.view.$el.empty(),this.view.hide(),this.view=null)},isViewVisible:function(){return this.view&&this.view.isVisible()},createView:function(){},createModel:function(){}})}),Backbone.define("JIRA.DevStatus.BasePanelModule",require("jira/devstatus/base-panel-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryView.js' */
"use strict";define("jira/devstatus/base-summary-view",["backbone","jquery","underscore"],function(t,e,i){return t.View.extend({template:void 0,events:{"simpleClick .summary":"_onSummaryLinkClick"},initialize:function(t){this.options=i.clone(t),this.model.on("change:hasData",this._addOrRemoveHasDataClass,this),this.model.on("change:dataLoading",this._addOrRemoveDataLoadingClass,this),this.transitionView=new JIRA.DevStatus.SummaryTransitionView({model:this.model,el:this.$el})},render:function(){var t=this.isVisible();if(t){var s=e(this.template(i.extend({issueKey:this.options.dataAttrs.issueKey},this.model.getOverall())));this._shouldAnimateDataTransition()?this.transitionView.renderVisible(s):(this.$el.html(s),JIRA.DevStatus.Date.addTooltip(s)),this._renderNavigableSummaryLink(),this.show()}else this._isHidden()||(this._shouldAnimateDataTransition()?this.transitionView.renderHidden(i.bind(this.hide,this)):this.hide());this._addOrRemoveDataLoadingClass(),this._addOrRemoveHasDataClass()},getDefaultDetailDialogParameters:function(){return{issueKey:this.options.dataAttrs.issueKey,issueId:this.options.dataAttrs.issueId,tabs:this.model.get("byInstanceType"),dataType:this.model.getType(),showContactAdminForm:this.options.dataAttrs&&this.options.dataAttrs.showContactAdminForm}},getSummaryLink:function(){return this.$el.find("a.summary")},isVisible:function(){return this.model.getOverall().count>0},_addOrRemoveHasDataClass:function(){var t=this.model.get("hasData");this.$el.toggleClass("js-has-data",t)},_renderNavigableSummaryLink:function(){this.getSummaryLink().attr("href",JIRA.DevStatus.URL.getUrlWithDetailDialogParam(this.model.getType()))},_addOrRemoveDataLoadingClass:function(){var t=this.model.get("dataLoading");this.$el.toggleClass("data-loading",t)},_onSummaryLinkClick:function(t){t.preventDefault(),console.log("Summary view not supported: ",this)},_shouldAnimateDataTransition:function(){return!!this.model.getPreviousOverall()},_isHidden:function(){return this.$el.hasClass("hidden")},show:function(){this.$el.removeClass("hidden")},hide:function(){this.$el.addClass("hidden")}})}),Backbone.define("JIRA.DevStatus.BaseSummaryView",require("jira/devstatus/base-summary-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryTransitionView.js' */
"use strict";define("jira/devstatus/summary-transition-view",["backbone","jquery","underscore","jira/dev-status/util/date"],function(i,t,n,s){return i.View.extend({slideTransitionTime:500,initialize:function(){},renderVisible:function(i){var e=!t.contains(document,this.$el[0]);this._hasPreviousData()?this._hasDataChanged()&&(this._prepareContentsForTransition(i,this.$el),this.$el.addClass("roll-transition")):(this._preStartSlideTransition(),this.$el.addClass("slide-down-transition"),e=!0),this.$el.html(i),s.addTooltip(i),e?n.defer(n.bind(this._initiateTransition,this)):this._initiateTransition()},renderHidden:function(i){var t=this;this.$el.slideUp(this.slideTransitionTime,function(){t.$el.css("display",""),i()})},_initiateTransition:function(){if(this.$el.hasClass("slide-down-transition"))this._postStartSlideTransition(),this.$el.removeClass("slide-down-transition"),this._startSlideDownTransition(this.$el,0);else{this.$el.hasClass("roll-transition")&&(this.$el.removeClass("roll-transition"),this._startRollTransition());var i=this.$el.find(".sliding-container");if(i.length>0){var n=this;i.each(function(i,s){var e=t(s),a=e.data("prevHeight");n._startSlideDownTransition(e,a)})}}},_startSlideDownTransition:function(i,t){var n=i.height();t!==n&&i.height(t).animate({height:n},this.slideTransitionTime,function(){i.css("height","auto"),i.find(".rolling-content").removeClass("transit")})},_startRollTransition:function(){this.$el.find(".rolling-container").each(n.bind(function(i,n){var s=t(n),e=s.find(".rolling-content"),a=e.find(":not(.old-content)"),r=a.height();s.height(r),e.addClass("transit"),a.css("margin-top","-"+r+"px").animate({"margin-top":"0"},this.slideTransitionTime,function(){s.css("height","auto"),s.find(".old-content").remove(),e.removeClass("transit"),a.css("margin-top","")})},this))},_prepareContentsForTransition:function(i,n){i=t("<div></div>").append(i);var s=i.find(".sliding-container"),e=n.find(".sliding-container");s.each(function(i,n){var s=e.get(i);if(s){var a=t(s);t(n).data("prevHeight",a.height())}});var a=i.find(".rolling-container"),r=n.find(".rolling-container");a.each(function(i,n){var s=t(n).find(".rolling-content"),e=r.get(i);if(e){var a=t(e).find(".rolling-content").children();a.addClass("old-content"),s.append(a)}})},_hasPreviousData:function(){var i=this.model.getPreviousOverall();return i&&i.count>0},_hasDataChanged:function(){return!n.isEqual(this.model.getOverall(),this.model.getPreviousOverall())},_preStartSlideTransition:function(){this.$el.css("height","0"),this.$el.css("opacity","0")},_postStartSlideTransition:function(){this.$el.css("height",""),this.$el.css("opacity","")}})}),Backbone.define("JIRA.DevStatus.SummaryTransitionView",require("jira/devstatus/summary-transition-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryModule.js' */
"use strict";define("jira/devstatus/base-summary-module",["underscore","jira/devstatus/base-panel-module"],function(e,t){return t.extend({model:void 0,viewType:void 0,createModel:function(){return new this.model({})},createView:function(){return new this.viewType(e.extend(e.clone(this.options),{model:this.data}))}})}),Backbone.define("JIRA.DevStatus.BaseSummaryModule",require("jira/devstatus/base-summary-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/BaseSummaryModel.js' */
"use strict";define("jira/devstatus/base-summary-model",["backbone"],function(e){return e.Model.extend({typeId:void 0,properties:["byInstanceType","overall","previousOverall","hasData","dataLoading"],startLoadingData:function(){this.set("dataLoading",!0)},updateData:function(e){if(this.set("hasData",void 0!==e),this.set("dataLoading",!1),this.set("previousOverall",this.getOverall()),e&&e.summary&&e.summary[this.typeId]){var t=e.summary[this.typeId];this.set("byInstanceType",t.byInstanceType),this.set("overall",t.overall)}else this.set("byInstanceType",{}),this.set("overall",{count:0})},getType:function(){return this.typeId},getOverall:function(){return this.get("overall")},getPreviousOverall:function(){return this.get("previousOverall")}})}),Backbone.define("JIRA.DevStatus.BaseSummaryModel",require("jira/devstatus/base-summary-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorModule.js' */
"use strict";define("jira/devstatus/summary-error-module",["jira/devstatus/base-panel-module"],function(t){return t.extend({createModel:function(){return new JIRA.DevStatus.SummaryErrorModel({})},createView:function(){var t=this.options.dataAttrs&&this.options.dataAttrs.showContactAdminForm;return new JIRA.DevStatus.SummaryErrorView({model:this.data,el:this.options.el,showContactAdminForm:t})}})}),Backbone.define("JIRA.DevStatus.SummaryErrorModule",require("jira/devstatus/summary-error-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorModel.js' */
"use strict";define("jira/devstatus/summary-error-model",["backbone","underscore"],function(r,e){return r.Model.extend({properties:["hasErrors","errorInstances","configInstances"],defaults:function(){return{hasErrors:!1,errorInstances:[],configInstances:[]}},updateData:function(r){var t=this._extractErrors(r&&r.errors),s=this._extractErrors(r&&r.configErrors);this.set("hasErrors",!r||!e.isEmpty(t)||!e.isEmpty(s)),this.set("errorInstances",t),this.set("configInstances",s)},_extractErrors:function(r){return r?e.map(e.filter(r,function(r){return r.error}),function(r){return r.instance}):[]}})}),Backbone.define("JIRA.DevStatus.SummaryErrorModel",require("jira/devstatus/summary-error-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/summary/SummaryErrorView.js' */
"use strict";define("jira/devstatus/summary-error-view",["jira/devstatus/base-summary-view","underscore"],function(e,r){return e.extend({initialize:function(e){this.showContactAdminForm=e.showContactAdminForm},render:function(){return this.isVisible()?(this.$el.html(JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon({instances:this.hasForceGenericErrorMessage()?null:this.model.get("errorInstances"),notConfiguredInstances:this.model.get("configInstances"),showContactAdminForm:this.showContactAdminForm})),this.show()):this.hide(),this},hasForceGenericErrorMessage:function(){return r.some(this.model.get("errorInstances"),function(e){return!!e.forceGenericErrorMessage})},isVisible:function(){return this.model.get("hasErrors")}})}),Backbone.define("JIRA.DevStatus.SummaryErrorView",require("jira/devstatus/summary-error-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-panel-and-dialog-resources', location = 'js/viewissue/DevStatusInit.js' */
"use strict";!function(){JIRA.DevStatus.setDetailDialogParam=function(){AJS.Meta.set("fusion-open-detail-dialog",JIRA.DevStatus.URL.getDetailDialogParam())},JIRA.DevStatus.setDetailDialogParam()}(),AJS.$(function(){function e(e){return e.find("body").hasClass("page-type-dashboard")}function t(e){return e.find("body").hasClass("ghx-agile")}function a(e){return e.find("body").hasClass("ka ajax-issue-search-and-view")}function n(){return AJS.Meta.get("is-servicedesk-rendered")}function i(e,t,a){JIRA.DevStatus.devStatusModule.initializePanel({container:e,showTooltip:JIRA.DevStatus.showTooltip,headerSelector:t,devStatusPanelVisibilityToggler:a})}function s(e,t,a,n){_.defer(function(){var i=a?1e3:0,s={duration:i,complete:n};t?e.slideDown(s):e.slideUp(s)})}JIRA.DevStatus.showTooltip=!0,JIRA.DevStatus.showAITTooltip=!0;var o={devStatusContainer:"#devstatus-container",parentContainer:"[id$='devstatus-panel']",link:"a.devstatus-cta-link",statusPanel:".status-panels",viewIssueHeader:".mod-header",agileHeader:".ghx-header",agileNavMenuLink:'a[href="#ghx-tab-com-atlassian-jira-plugins-jira-development-integration-plugin-greenhopper-devstatus-panel"]'};JIRA.DevStatus.documentReadyInit=function(u){if(JIRA.DevStatus.devStatusModule=new JIRA.DevStatus.DevStatusModule({parentContainerSelector:o.parentContainer,linkSelector:o.link,panelSelector:o.devStatusContainer,statusPanelSelector:o.statusPanel}),e(u)||t(u))u.find("body").on("click.rapidboardSpa",o.agileNavMenuLink,JIRA.DevStatus.Analytics.fireAgileDevStatusLinkClicked),JIRA.DevStatus.showTooltip=!1,JIRA.DevStatus.showAITTooltip=!1;else if(a(u)&&JIRA.Issues.Api.isFullScreenIssueVisible()){var l=AJS.$(o.devStatusContainer);l.length>0&&i(l,o.viewIssueHeader,s)}n()&&(JIRA.DevStatus.showTooltip=!1,JIRA.DevStatus.showAITTooltip=!1),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,t){return!!t.not(document).is(o.parentContainer)&&(i(t.find(o.devStatusContainer),o.viewIssueHeader,s),JIRA.DevStatus.showTooltip=!1,!0)}),JIRA.bind("GH.DetailView.updated",function(e,t){var a=AJS.$(o.devStatusContainer);a.length&&i(a,o.agileHeader)}),require(["jira-development-status/util/WRM"],function(e){e.requireDetailDialogResources()})},AJS.$(function(){JIRA.DevStatus.documentReadyInit(AJS.$(document))})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitModel.js' */
"use strict";define("jira/devstatus/commit-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"repository"})}),Backbone.define("JIRA.DevStatus.CommitModel",require("jira/devstatus/commit-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'templates/viewissue/commit/devstatus-panel-commit.soy' */
// This file was automatically generated from devstatus-panel-commit.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Commit.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Commit == 'undefined') { JIRA.Templates.DevStatus.Commit = {}; }


JIRA.Templates.DevStatus.Commit.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Commits related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.commits(opt_data) + '</a></div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Latest', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Commit.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Commit.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitView.js' */
"use strict";define("jira/devstatus/commit-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,i){return t.extend({template:JIRA.Templates.DevStatus.Commit.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;i.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-commit-view");a.detailDialogCommitView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-commit-detail-dialog",count:a.model.getOverall().count})),JIRA.DevStatus.CommitsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogCommitView.show()})}})}),Backbone.define("JIRA.DevStatus.CommitView",require("jira/devstatus/commit-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-commit-panel-resources', location = 'js/viewissue/summary/commit/CommitModule.js' */
"use strict";define("jira/devstatus/commit-module",["jira/devstatus/base-summary-module","jira/devstatus/commit-model","jira/devstatus/commit-view"],function(e,t,i){return e.extend({model:t,viewType:i})}),Backbone.define("JIRA.DevStatus.CommitModule",require("jira/devstatus/commit-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestModel.js' */
"use strict";define("jira/devstatus/pull-request-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"pullrequest"})}),Backbone.define("JIRA.DevStatus.PullRequestModel",require("jira/devstatus/pull-request-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'templates/viewissue/pullrequest/devstatus-panel-pullrequest.soy' */
// This file was automatically generated from devstatus-panel-pullrequest.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.PullRequest.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.PullRequest == 'undefined') { JIRA.Templates.DevStatus.PullRequest = {}; }


JIRA.Templates.DevStatus.PullRequest.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Pull requests related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.pullRequestsText(opt_data) + '</a> ' + JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue(opt_data) + '</div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Updated', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.PullRequest.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.PullRequest.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestView.js' */
"use strict";define("jira/devstatus/pull-request-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,u){return t.extend({template:JIRA.Templates.DevStatus.PullRequest.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;u.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-pull-request-view");a.detailDialogPullRequestView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-pullrequest-detail-dialog",count:a.model.getOverall().count,reviewersThreshold:2})),JIRA.DevStatus.PullRequestsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogPullRequestView.show()})}})}),Backbone.define("JIRA.DevStatus.PullRequestView",require("jira/devstatus/pull-request-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-pullrequest-panel-resources', location = 'js/viewissue/summary/pullrequest/PullRequestModule.js' */
"use strict";define("jira/devstatus/pull-request-module",["jira/devstatus/base-summary-module","jira/devstatus/pull-request-model","jira/devstatus/pull-request-view"],function(e,u,t){return e.extend({model:u,viewType:t})}),Backbone.define("JIRA.DevStatus.PullRequestModule",require("jira/devstatus/pull-request-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewModel.js' */
"use strict";define("jira/devstatus/review-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"review"})}),Backbone.define("JIRA.DevStatus.ReviewModel",require("jira/devstatus/review-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'templates/viewissue/review/devstatus-panel-review.soy' */
// This file was automatically generated from devstatus-panel-review.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Review.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Review == 'undefined') { JIRA.Templates.DevStatus.Review = {}; }


JIRA.Templates.DevStatus.Review.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Reviews related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.reviewsText(opt_data) + '</a> ' + JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue(opt_data) + '</div>'}) + '</dt>' + JIRA.Templates.DevStatus.Review.reviewDate(soy.$$augmentMap(opt_data, {showUpdatedText: true})) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Review.summaryPanel';
}


JIRA.Templates.DevStatus.Review.reviewDate = function(opt_data, opt_ignored) {
  return '' + ((opt_data.dueDate && ! opt_data.completed) ? JIRA.Templates.DevStatus.lastUpdated({text: 'Due', lastUpdated: opt_data.dueDate, extraClass: opt_data.overDue ? 'overdue' : undefined, datetimeFormat: 'fullAge'}) : (opt_data.lastUpdated) ? JIRA.Templates.DevStatus.lastUpdated({text: opt_data.showUpdatedText ? 'Updated' : '', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.reviewDate.soyTemplateName = 'JIRA.Templates.DevStatus.Review.reviewDate';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewView.js' */
"use strict";define("jira/devstatus/review-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,i){return t.extend({template:JIRA.Templates.DevStatus.Review.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var a=this;i.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-review-view");a.detailDialogReviewView=new t(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-review-detail-dialog",count:a.model.getOverall().count,reviewersThreshold:2,completed:a.model.getOverall().completed})),JIRA.DevStatus.ReviewsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogReviewView.show()})}})}),Backbone.define("JIRA.DevStatus.ReviewView",require("jira/devstatus/review-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-review-panel-resources', location = 'js/viewissue/summary/review/ReviewModule.js' */
"use strict";define("jira/devstatus/review-module",["jira/devstatus/base-summary-module","jira/devstatus/review-model","jira/devstatus/review-view"],function(e,i,t){return e.extend({model:i,viewType:t})}),Backbone.define("JIRA.DevStatus.ReviewModule",require("jira/devstatus/review-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchModel.js' */
"use strict";define("jira/devstatus/branch-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"branch"})}),Backbone.define("JIRA.DevStatus.BranchModel",require("jira/devstatus/branch-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'templates/viewissue/branch/devstatus-panel-branch.soy' */
// This file was automatically generated from devstatus-panel-branch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Branches.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Branches == 'undefined') { JIRA.Templates.DevStatus.Branches = {}; }


JIRA.Templates.DevStatus.Branches.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Branches related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.branches(opt_data) + '</a></div>'}) + '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Updated', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Branches.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Branches.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchView.js' */
"use strict";define("jira/devstatus/branch-view",["require","underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,a,t,i){return t.extend({template:JIRA.Templates.DevStatus.Branches.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var r=this;i.requireDetailDialogResources(function(){var t=e("jira/devstatus/detail-dialog-branch-view");r.detailDialogBranchView=new t(a.extend(r.getDefaultDetailDialogParameters(),{id:"devstatus-branch-detail-dialog",count:r.model.getOverall().count,analyticIssueData:r.options.analyticsModel.getIssue()})),JIRA.DevStatus.BranchesAnalytics.fireSummaryClickedEvent(r.options.analyticsModel.getSummary()),r.detailDialogBranchView.show()})}})}),Backbone.define("JIRA.DevStatus.BranchView",require("jira/devstatus/branch-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-branch-panel-resources', location = 'js/viewissue/summary/branch/BranchModule.js' */
"use strict";define("jira/devstatus/branch-module",["jira/devstatus/base-summary-module","jira/devstatus/branch-model","jira/devstatus/branch-view"],function(e,a,t){return e.extend({model:a,viewType:t})}),Backbone.define("JIRA.DevStatus.BranchModule",require("jira/devstatus/branch-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildModel.js' */
"use strict";define("jira/devstatus/build-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"build"})}),Backbone.define("JIRA.DevStatus.BuildModel",require("jira/devstatus/build-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'templates/viewissue/build/devstatus-panel-build.soy' */
// This file was automatically generated from devstatus-panel-build.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Build.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Build == 'undefined') { JIRA.Templates.DevStatus.Build = {}; }


JIRA.Templates.DevStatus.Build.summaryPanel = function(opt_data, opt_ignored) {
  var output = '<dl><dt>';
  var param4 = '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Builds related to {0}',opt_data.issueKey)) + '">';
  var countText__soy8 = '' + JIRA.Templates.FusionWidget.Common.buildsText(opt_data);
  param4 += soy.$$filterNoAutoescape(countText__soy8) + '</a> ' + JIRA.Templates.DevStatus.Build.statusIcon(opt_data) + '</div>';
  output += JIRA.Templates.DevStatus.transitionContainer({content: param4});
  output += '</dt>' + JIRA.Templates.DevStatus.lastUpdated({text: 'Latest', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) + '</dl>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Build.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Build.summaryPanel';
}


JIRA.Templates.DevStatus.Build.statusIcon = function(opt_data, opt_ignored) {
  var output = '';
  var iconClass__soy27 = '' + JIRA.Templates.FusionWidget.Common.buildsIconClass(opt_data);
  output += '<span class="aui-icon aui-icon-small ' + soy.$$escapeHtml(iconClass__soy27) + '">' + soy.$$escapeHtml(opt_data.iconText) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Build.statusIcon.soyTemplateName = 'JIRA.Templates.DevStatus.Build.statusIcon';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildView.js' */
"use strict";define("jira/devstatus/build-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,i,t){return i.extend({template:JIRA.Templates.DevStatus.Build.summaryPanel,_onSummaryLinkClick:function(i){i.preventDefault();var a=this;t.requireDetailDialogResources(function(){var i=require("jira/devstatus/detail-dialog-build-view");a.detailDialogBuildView=new i(e.extend(a.getDefaultDetailDialogParameters(),{id:"devstatus-build-detail-dialog",count:a.model.getOverall().count})),JIRA.DevStatus.BuildsAnalytics.fireSummaryClickedEvent(a.options.analyticsModel.getSummary()),a.detailDialogBuildView.show()})}})}),Backbone.define("JIRA.DevStatus.BuildView",require("jira/devstatus/build-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-build-panel-resources', location = 'js/viewissue/summary/build/BuildModule.js' */
"use strict";define("jira/devstatus/build-module",["jira/devstatus/base-summary-module","jira/devstatus/build-model","jira/devstatus/build-view"],function(e,u,d){return e.extend({model:u,viewType:d})}),Backbone.define("JIRA.DevStatus.BuildModule",require("jira/devstatus/build-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentModel.js' */
"use strict";define("jira/devstatus/deployment-model",["jira/devstatus/base-summary-model"],function(e){return e.extend({typeId:"deployment-environment"})}),Backbone.define("JIRA.DevStatus.DeploymentModel",require("jira/devstatus/deployment-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'templates/viewissue/deployment/devstatus-panel-deployment.soy' */
// This file was automatically generated from devstatus-panel-deployment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Deployment.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Deployment == 'undefined') { JIRA.Templates.DevStatus.Deployment = {}; }


JIRA.Templates.DevStatus.Deployment.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dd>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content" title="' + soy.$$escapeHtml(AJS.format('Deployments related to {0}',opt_data.issueKey)) + '">' + ((opt_data.topEnvironments.length) ? JIRA.Templates.FusionWidget.Common.deployments({anchorStart: '<a class="summary">', anchorEnd: '</a>', showProjects: opt_data.showProjects, successfulCount: opt_data.successfulCount, topEnvironments: opt_data.topEnvironments}) : soy.$$escapeHtml('No deployments contain latest commits')) + '</div>'}) + '</dd></dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Deployment.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Deployment.summaryPanel';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentView.js' */
"use strict";define("jira/devstatus/deployment-view",["underscore","jira/devstatus/base-summary-view","jira-development-status/util/WRM"],function(e,t,a){return t.extend({template:JIRA.Templates.DevStatus.Deployment.summaryPanel,_onSummaryLinkClick:function(t){t.preventDefault();var i=this;a.requireDetailDialogResources(function(){var t=require("jira/devstatus/detail-dialog-deployment-view");i.detailDialogDeploymentView=new t(e.extend(i.getDefaultDetailDialogParameters(),{id:"devstatus-deployment-detail-dialog",count:i.model.getOverall().count})),JIRA.DevStatus.DeploymentsAnalytics.fireSummaryClickedEvent(i.options.analyticsModel.getSummary()),i.detailDialogDeploymentView.show()})}})}),Backbone.define("JIRA.DevStatus.DeploymentView",require("jira/devstatus/deployment-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-deployment-panel-resources', location = 'js/viewissue/summary/deployment/DeploymentModule.js' */
"use strict";define("jira/devstatus/deployment-module",["jira/devstatus/base-summary-module","jira/devstatus/deployment-model","jira/devstatus/deployment-view"],function(e,t,d){return e.extend({model:t,viewType:d})}),Backbone.define("JIRA.DevStatus.DeploymentModule",require("jira/devstatus/deployment-module"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-cta-tooltip-resources', location = 'templates/viewissue/devstatus-cta-tooltips.soy' */
// This file was automatically generated from devstatus-cta-tooltips.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Tooltip.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Tooltip == 'undefined') { JIRA.Templates.DevStatus.Tooltip = {}; }


JIRA.Templates.DevStatus.Tooltip.createBranch = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.DevStatus.Tooltip.tooltipLayout({extraClasses: 'create-branch', content: '<span class="branch-illustration"></span><div class="branch-text"><p>' + soy.$$escapeHtml('Create a branch for this issue in your source repository') + '.<br /> <a class="cta-learn-more-link" href="https://www.atlassian.com/git/workflows" target="_blank">' + soy.$$escapeHtml('Learn more about branching strategies') + '.</a></p></div>'});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.createBranch.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.createBranch';
}


JIRA.Templates.DevStatus.Tooltip.automaticTransitions = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.DevStatus.Tooltip.tooltipLayout({extraClasses: 'dev-summary-automatic-transitions', content: '<p>' + soy.$$escapeHtml('Now JIRA can automatically update your issue status when pull requests and other actions occur.') + '</p><p><a href="' + soy.$$escapeHtml(opt_data.aitHelpLinkUrl.url) + '" id="trigger-docs-link" target="_blank" title="' + soy.$$escapeHtml('Learn about automating your workflow') + '">' + soy.$$escapeHtml('Learn about automating your workflow') + '</a></p>'});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.automaticTransitions.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.automaticTransitions';
}


JIRA.Templates.DevStatus.Tooltip.tooltipLayout = function(opt_data, opt_ignored) {
  return '<div class="cta-tooltip' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Tooltip.tooltipLayout.soyTemplateName = 'JIRA.Templates.DevStatus.Tooltip.tooltipLayout';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3', location = 'js/repository-shortcuts/views/RepositoryShortcutsSidebarGroup.js' */
"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,o=Array(t.length);e<t.length;e++)o[e]=t[e];return o}return Array.from(t)}define("repository-shortcuts/views/repository-shortcut-sidebar-group",["underscore","jira/dev-status/util/es6","repository-shortcuts/views/connection-modal","repository-shortcuts/dialogs/edit","repository-shortcuts/utils/repository-shortcut-utils"],function(t,e,o,n,r){var i="com.atlassian.jira.jira-projects-plugin:source.code.link.",c="sidebar-project-shortcuts";return JIRA.Projects.Libs.Marionette.CompositeView.extend({initialize:function(){var t=this;JIRA.API.getSidebar().done(function(e){t._updateAllRepoShortcutItems(e),t._initialiseSyncRepoDialog(e),t._initialiseEditRepoDialog(e),t.collection.on("change",function(o){return t._updateRepoShortcutItem(o,e)},!0).on("add",function(o){return t._addNewShortcutToSidebar(o,e)},!0).on("remove",function(o){return t._removeShortcutFromSidebar(o.id,e)},!0).on("edit:start",function(e){t._showEditShortcutDialog(e,"integrationDialog")},!0)})},_updateAllRepoShortcutItems:function(t){var o=this;if(!this.collection.isEmpty()){var n=t.getGroup(c,!0).links.slice(0),a=n.filter(function(t){return e.stringStartsWith(t.id,i)});if(0!==a.length){var s=a[0].canEdit,u=this.collection.map(function(t){return{id:""+i+t.id,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),canEdit:s,showSync:r.shouldShowSync(t,o.collection.canUserManageDVCSAccounts)}}),d=e.findIndex(n,function(t){return t.id===a[0].id});n.splice.apply(n,[d,a.length].concat(_toConsumableArray(u)));var l=t.getGroup(c,!0);t.replaceGroup(c,t.createGroup({id:c,name:l.getName(),links:n,section:!0},!0),!0)}}},_updateRepoShortcutItem:function(t,e){e.replaceItem(""+i+t.id,{id:""+i+t.id,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),canEdit:!0,showSync:r.shouldShowSync(t,this.collection.canUserManageDVCSAccounts)},!0)},_initialiseSyncRepoDialog:function(t){var e=this;t.on(t.events.SYNC,function(t){var n=e._getRepoShortcutId(t.target.getId(!0));if(n){var r=e.collection.models.find(function(t){return t.get("id")===n}),i=new o({repoShortcutModel:r,canUserManageDVCSAccounts:e.collection.canUserManageDVCSAccounts});i.render()}},!0)},_initialiseEditRepoDialog:function(t){var e=this;t.on(t.events.EDIT,function(t){e._showEditShortcutDialog(e._getRepoShortcutId(t.target.getId(!0)),"sidebar")},!0)},_showEditShortcutDialog:function(t,e){if(t){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.sidebar.connect-repo.edit",data:{projectId:JIRA.API.Projects.getCurrentProjectId(),shortcutId:t,referrer:e}});var o=this.collection.models.find(function(e){return e.get("id")===t});new n({repoShortcutModel:o,canUserManageDVCSAccounts:this.collection.canUserManageDVCSAccounts})}},_getRepoShortcutId:function(t){return e.stringStartsWith(t,i)?t.substr(i.length):null},_addNewShortcutToSidebar:function(t,o){var n=""+i+t.id,a={id:n,name:t.get("name"),url:t.get("url"),icon:r.mapDvcsTypeToIcon(t.get("dvcsType")),showSync:r.shouldShowSync(t,this.collection.canUserManageDVCSAccounts),canEdit:!0},s=o.getGroup(c,!0).links,u=e.findIndex(s,function(t){return e.stringStartsWith(t.id,"com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link")});u=u>=0?u:void 0,o.addItem(c,a,u,!0)},_removeShortcutFromSidebar:function(t,e){var o=""+i+t;e.deleteItem(o,!0)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3', location = 'js/repository-shortcuts/init.js' */
"use strict";require(["jquery","underscore","bluebird/Promise","repository-shortcuts/models/repository-shortcuts","repository-shortcuts/services/dvcs-account-matcher","repository-shortcuts/dialogs/add-modal","repository-shortcuts/views/repository-shortcut-sidebar-group","aui/flag"],function(t,e,r,o,n,c,s){function a(c,a){var i=AJS.contextPath()+"/rest/projects/1.0/project/"+encodeURIComponent(c)+"/shortcut";t.ajax(i+"?shortcutType=source.code.link").done(function(t){var i=t.map(function(t){return n.matchUrlAgainstNetwork(t.url)});r.all(i).then(function(r){var n=t.map(function(t,o){return e.extend({},t,r[o])}),i=new o(n,{projectKey:c,canUserManageDVCSAccounts:a});new s({collection:i}),u(i)})["catch"](function(t){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.shortcut-data-retrieve-fail",errorMessage:t&&t.message})})})}function i(t){var e=JIRA.API.Projects.getCurrentProjectId(),r=new c({projectKey:t.projectKey,projectId:e,collection:t});r.show()}function u(t){JIRA.API.getSidebar().done(function(e){e.on(e.events.JIRA_SUMMON_ADD_SHORTCUT_DIALOG,function(e,r){r.shortcutTypeId===d&&i(t)},!0),e.on(e.events.BEFORE_NAVIGATE,function(e,r){e.target.getId(!0)===p&&i(t)},!0)})}var p="com.pyxis.greenhopper.jira:project-sidebar-simple-add-repo",d="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcut-type",l="com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-adg3.repository-shortcuts-data";JIRA.API.getSidebar().done(function(){var t=WRM.data.claim(l),e=JIRA.API.Projects.getCurrentProjectKey();a(e,t.canManageDVCS)})});;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-notification', location = 'node_modules/@atlassian/aui/src/js/aui/form-notification.js' */
("undefined"===typeof window?global:window).__9803410207c491fb00e8f693e987aa8e=function(){function l(a){return a&&a.__esModule?a:{"default":a}}function m(a){var b=n(a),a=b?a.attr(b):"",c;if(""===a)c=a;else{try{c=JSON.parse(a)}catch(d){c=[a]}c=1===c.length?c[0]:"<ul><li>"+c.join("</li><li>")+"</li></ul>"}return c}function n(a){var b;s.some(function(c){if(a.is("["+c+"]"))return b=c,!0});return b}function h(a){return a.is(":aui-focusable")}function t(a){f(a).tipsy("show");if(h(a))i(a).on("keydown",function(b){var c=
o(i(a).find(":aui-tabbable").last()),d=o(i(a).find(":aui-tabbable").first());b.keyCode===p.default.TAB&&(!b.shiftKey&&!b.altKey)&&c&&c&&a.focus();b.keyCode===p.default.TAB&&b.shiftKey&&d&&d&&(a.focus(),b.preventDefault())})}function j(a){f(a).tipsy("hide")}function i(a){a=f(a);if(a.data("tipsy"))return a.data("tipsy").$tip}function z(a){var a=a.data(A)||"side",b={side:"w",top:"se",bottom:"ne"}[a];b||(b="w",q.warn('Invalid notification position: "'+a+'". Valid options are "side", "bottom, "top"'));
return b}function f(a){return a.next("."+u)}function o(a){return(a=a instanceof d.default?a[0]:a)&&a===document.activeElement}function v(a){a=(0,d.default)(a);if(a.hasClass(r)){var b=n(a);b===w?f(a).addClass("aui-icon-wait"):f(a).removeClass("aui-icon-wait");b?(b=m(a),(d.default.contains(a[0],document.activeElement)||o(a)||!h(a))&&b?t(a):j(a)):j(a)}}"use strict";var d=l(__307d3e18fd611f85395c67cddeb1fe24);__f673a5150978887490995d88aeec0c8d;var q;var e=__cf890abdf040e0993fb71f2f839bc972;if(e&&e.__esModule)q=
e;else{var g={};if(null!=e)for(var k in e)Object.prototype.hasOwnProperty.call(e,k)&&(g[k]=e[k]);g.default=e;q=g}var e=l(__574ac67f906effeb9d8ec2753b23cf28),p=l(__509557c937caa8763def39004fcf3193),g=l(__c1ce1f1e3e613f564fc234ff043570f1),r="_aui-form-notification-initialised",u="aui-icon-notification",w="data-aui-notification-wait",A="aui-form-notification-position",s=["data-aui-notification-error","data-aui-notification-success",w,"data-aui-notification-info"],x=[],B=["text","url","email","tel","password"];
document.addEventListener("focus",function(a){x.forEach(function(b){var b=(0,d.default)(b),c=i(b);if(h(b)){var e=c&&d.default.contains(c[0],a.target),f=b.is(a.target),g=0<(0,d.default)(a.target).closest(b).length;f||g?t(b):c&&!e&&j(b)}})},!0);document.addEventListener("mousedown",function(a){if(!(0,d.default)(a.target).is("a"))if(!(0<(0,d.default)(a.target).closest(".aui-form-notification-tooltip").length))(0,d.default)("[data-aui-notification-field]").each(function(){var b=(0,d.default)(this),c=
b.is(a.target),e=0<(0,d.default)(a.target).closest(b).length;!c&&!e&&j(b);h(b)&&j(b)})});k=(0,g.default);var y={};s.forEach(function(a){y[a]=v});k("data-aui-notification-field",{attached:function(a){var b=(0,d.default)(a);if(!b.hasClass(r)){b.addClass(r);a=(0,d.default)('<span class="aui-icon aui-icon-small '+u+'"/>');b.after(a);f(b).tipsy({gravity:z(b),title:function(){return m(b)},trigger:"manual",offset:-1!==B.indexOf(b.attr("type"))?9:3,opacity:1,className:function(){var a=n(b);return"aui-form-notification-tooltip "+
("data-aui-notification-error"===a?"aui-form-notification-tooltip-error":"data-aui-notification-info"===a?"aui-form-notification-tooltip-info":void 0)},html:!0});if(h(b))b.on("keydown",function(a){if(a.keyCode===p.default.TAB&&(!a.shiftKey&&!a.altKey)&&""!==m(b)){var d=i(b).find(":aui-tabbable").first();d.length&&(d.focus(),a.preventDefault())}});v(b)}x.push(b)},attributes:y,type:g.default.type.ATTRIBUTE});(0,e.default)("aui/form-notification");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation-validator-register', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation/validator-register.js' */
("undefined"===typeof window?global:window).__94a6aae68277f018287e916fc78c8f6f=function(){var d={};"use strict";Object.defineProperty(d,"__esModule",{value:!0});var a=__307d3e18fd611f85395c67cddeb1fe24,h=a&&a.__esModule?a:{"default":a},e;if((a=__cf890abdf040e0993fb71f2f839bc972)&&a.__esModule)e=a;else{var f={};if(null!=a)for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(f[b]=a[b]);f.default=a;e=f}b=(b=__574ac67f906effeb9d8ec2753b23cf28)&&b.__esModule?b:{"default":b};var i=["displayfield",
"watchfield","when","novalidate","state"],g=[],a={register:function(a,b){var c;if("string"===typeof a)c=a;else{var d=!1;a.some(function(a){var b=-1!==h.default.inArray(a,i);b&&(d=a);return b});if(c=d)return e.warn('Validators cannot be registered with the argument "'+c+'", as it is a reserved argument.'),!1;c="[data-aui-validation-"+a.join("],[data-aui-validation-")+"]"}c={validatorFunction:b,validatorTrigger:c};g.push(c);return c},validators:function(){return g}};(0,b.default)("aui/form-validation/validator-register",
a);d.default=a;return d=d["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation-basic-validators', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation/basic-validators.js' */
("undefined"===typeof window?global:window).__77ff03c875a3139933c9425d867b4b55=function(){function h(a){return a&&a.__esModule?a:{"default":a}}function i(a){var b=a.el.value.length,d=0===b,c=parseInt(a.args("minlength"),10),e=parseInt(a.args("maxlength"),10);c&&e&&c===e&&!d&&b!==c?(b=f("exactlength",a.args,[c]),a.invalidate(b)):c&&b<c&&!d?(b=f("minlength",a.args),a.invalidate(b)):e&&b>e?(b=f("maxlength",a.args),a.invalidate(b)):a.validate()}function j(a,b){var d=a.match(b);return!d?!1:a===d[0]}function k(a){var b=
f("pattern",a.args);j(a.el.value,RegExp(a.args("pattern")))?a.validate():a.invalidate(b)}function l(a){var b=f("required",a.args);a.el.value?a.validate():a.invalidate(b)}function m(a){var b=f("validnumber",a.args),d=parseInt(a.el.value,10);if(isNaN(d))a.invalidate(b);else{var b=a.args("min"),c=a.args("max");b&&d<parseInt(b,10)?a.invalidate(f("min",a.args)):c&&d>parseInt(c,10)?a.invalidate(f("max",a.args)):a.validate()}}function f(a,b,d){var c;c=void 0!==AJS.I18n.keys?AJS.I18n.keys["aui.validation.message."+
a]:n[a];var e=d;d||(e=[b(a)]);c=(a=b(a+"-msg"))?[a].concat(e):[c].concat(e);return AJS.format.apply(null,c)}"use strict";var o=h(__307d3e18fd611f85395c67cddeb1fe24),p=h(__574ac67f906effeb9d8ec2753b23cf28);h(__57111a90131a66c211cf7209c7270167);h(__d74c881c8f23921c15438d0f30c99f80);var g=h(__94a6aae68277f018287e916fc78c8f6f);g.default.register(["maxlength","minlength"],i);g.default.register("[maxlength],[minlength]",i);g.default.register(["matchingfield"],function(a){var b=a.el.value,d=document.getElementById(a.args("matchingfield")),
c=d.value,e=f("matchingfield",a.args,[b,c]);if("password"===a.el.getAttribute("type")||"password"===d.getAttribute("type"))e=f("matchingfield-novalue",a.args);!b||!c?a.validate():c!==b?a.invalidate(e):a.validate()});g.default.register(["doesnotcontain"],function(a){var b=f("doesnotcontain",a.args);-1===a.el.value.indexOf(a.args("doesnotcontain"))?a.validate():a.invalidate(b)});g.default.register(["pattern"],k);g.default.register("[pattern]",k);g.default.register(["required"],l);g.default.register("[required]",
l);g.default.register(["min","max"],m);g.default.register("[min],[max]",m);g.default.register(["dateformat"],function(a){var b=a.args("dateformat"),d=f("dateformat",a.args),c={Y:"[0-9]{4}",y:"[0-9]{2}",m:"(0?[1-9]|10|11|12)",M:"[Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec]",D:"[Mon|Tue|Wed|Thu|Fri|Sat|Sun]",d:"([0-2]?[1-9]|10|20|30|31)"},e="";b.split("").forEach(function(a){e=c.hasOwnProperty(a)?e+c[a]:e+a});j(a.el.value,RegExp(e+"$","i"))?a.validate():a.invalidate(d)});g.default.register(["minchecked",
"maxchecked"],function(a){var b=(0,o.default)(a.el).find(":checked").length,d=!a.args("minchecked")||b>=a.args("minchecked"),b=!a.args("maxchecked")||b<=a.args("maxchecked"),c=f("minchecked",a.args),e=f("maxchecked",a.args);d&&b?a.validate():d?b||a.invalidate(e):a.invalidate(c)});var n={minlength:"Must be greater than or equal to {0} characters",maxlength:"Must be fewer than or equal to {0} characters",exactlength:"Must be exactly {0} characters",matchingfield:"{0} and {1} do not match.",
"matchingfield-novalue":"These fields do not match.",doesnotcontain:"Do not include the phrase {0} in this field",pattern:"This field does not match the required format",required:"This is a required field",validnumber:"Please enter a valid number",min:"Enter a value greater than {0}",max:"Enter a value less than {0}",dateformat:"Enter a valid date",
minchecked:"Tick at least {0}.",maxchecked:"Tick at most {0}."};(0,p.default)("aui/form-validation/basic-validators");return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-form-validation', location = 'node_modules/@atlassian/aui/src/js/aui/form-validation.js' */
("undefined"===typeof window?global:window).__78dc5665b5e74967a85beca962aed6d5=function(){function k(a){return a&&a.__esModule?a:{"default":a}}function v(a){if(o(a,"novalidate"))l(a,m);else{r(s(a),"none");var b=[];t.default.validators().forEach(function(c,d){a.is(c.validatorTrigger)&&b.push(d)});l(a,f);var c=[];b.forEach(function(b){var b=t.default.validators()[b].validatorFunction,d=new e.default.Deferred,f={validate:function(){d.resolve()},invalidate:function(b){l(a,g,b);d.reject()},args:function(b){return a.attr("data-"+
w+b)||a.attr(b)},el:a[0],$el:a};AJS.deprecate.prop(f,"$el",{sinceVersion:"5.9.0",removeInVersion:"5.10.0",alternativeName:"el",extraInfo:"See https://ecosystem.atlassian.net/browse/AUI-3263."});b(f);c.push(d)});var d=e.default.when.apply(e.default,c);d.done(function(){l(a,m)});return d}}function o(a,b){var c={when:"change"},d=a.attr("data-"+w+b);d||(d=c[b]);return d}function l(a,b,c){a.attr("data-"+n,b);if(b!==i){a.trigger(e.default.Event(x));var d=s(a),h={};h[f]="wait";h[g]="error";h[m]="success";
h=h[b];b===f?setTimeout(function(){a.attr("data-"+n)===f&&r(a,"wait")},500):r(d,h,c)}}function r(a,b,c){var d=a.is("["+j+"wait]");a.removeAttr(j+"wait");a.removeAttr(j+"success");if("success"!==b||d)"none"===b?a.removeAttr(j+"error"):(d=a.attr(j+b)||"[]",c?(c=JSON.parse(d).concat([c]),c=JSON.stringify(c)):c="",a.attr(j+b,c))}function s(a){var b=o(a,"displayfield");return void 0===b?a:(0,e.default)("#"+b)}function y(a,b){b.preventDefault();a.one(x,function(){a.trigger("submit")})}var p={};"use strict";
Object.defineProperty(p,"__esModule",{value:!0});var e=k(__307d3e18fd611f85395c67cddeb1fe24);__9803410207c491fb00e8f693e987aa8e;__77ff03c875a3139933c9425d867b4b55;var z=k(__574ac67f906effeb9d8ec2753b23cf28),A=k(__4d02fe17b8e885a34493e34af3d145dd),u=k(__c1ce1f1e3e613f564fc234ff043570f1),t=k(__94a6aae68277f018287e916fc78c8f6f),w="aui-validation-",j="data-aui-notification-",n="aui-validation-state",g="invalid",m="valid",f="validating",i="unvalidated",x="_aui-internal-field-state-changed";(0,e.default)(document).on("submit",
function(a){var b=a.target,b=(0,e.default)(b),c;c=b.find("._aui-form-validation-initialised");var d=e.default.map(c,function(a){return(0,e.default)(a).attr("data-"+n)});c=-1!==d.indexOf(g);var h=-1!==d.indexOf(i),d=-1!==d.indexOf(f);c=c?g:h?i:d?f:m;c===i?(y(b,a),b.find("[data-"+n+"="+i+"]").each(function(a,b){q.validate((0,e.default)(b))})):c===f?y(b,a):c===g?(a.preventDefault(),b.find("[data-"+n+"="+g+"]").first().focus()):c===m&&(c=e.default.Event("aui-valid-submit"),b.trigger(c),c.isDefaultPrevented()&&
a.preventDefault())});var q={register:t.default.register,validate:function(a){a=(0,e.default)(a);v(a)}};(0,u.default)("data-aui-validation-field",{attached:function(a){a.form&&a.form.setAttribute("novalidate","novalidate");var b=(0,e.default)(a);if(!b.hasClass("_aui-form-validation-initialised")){s(b).attr("data-aui-notification-field","");b.addClass("_aui-form-validation-initialised");var c,d=function(){b.trigger("aui-stop-typing")};b.on("keyup",function(){clearTimeout(c);c=setTimeout(d,1500)});
var f=o(b,"when"),g=o(b,"watchfield");(g?b.add("#"+g):b).on(f,function(){v(b)});l(b,i)}u.default.init(a)},type:u.default.type.ATTRIBUTE});(0,z.default)("aui/form-validation",q);(0,A.default)("formValidation",q);p.default=q;return p=p["default"]}.call(this);;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'jira-agile-module/includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogView.soy' */
// This file was automatically generated from SplitIssueDialogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.plan.contextmenu.splitissue.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.plan == 'undefined') { GH.tpl.plan = {}; }
if (typeof GH.tpl.plan.contextmenu == 'undefined') { GH.tpl.plan.contextmenu = {}; }
if (typeof GH.tpl.plan.contextmenu.splitissue == 'undefined') { GH.tpl.plan.contextmenu.splitissue = {}; }


GH.tpl.plan.contextmenu.splitissue.dialogView = function(opt_data, opt_ignored) {
  var output = '';
  var issue__soy3 = opt_data.model.issue;
  var issueDestinations__soy4 = opt_data.model.issueDestinations;
  output += '<section role="dialog" class="ghx-split-issue-dialog aui-layer aui-dialog2 ' + ((issueDestinations__soy4.length > 0) ? 'aui-dialog2-large' : 'aui-dialog2-medium') + '" aria-hidden="true" data-aui-remove-on-hide="true"><header class="aui-dialog2-header"><h2 class="aui-dialog2-header-main">' + soy.$$escapeHtml(AJS.format('Split issue: {0}',issue__soy3.key)) + '</h2></header><div class="aui-dialog2-content"><form class="aui" id="split-issue-form"><table class="aui"><thead><tr><th class="no-width"></th><th>' + soy.$$escapeHtml('Summary') + '</th>' + ((issue__soy3.estimateFieldId) ? '<th class="no-width one-liner">' + soy.$$escapeHtml('Estimate') + '</th>' : '') + ((issueDestinations__soy4.length > 0) ? '<th class="no-width">' + soy.$$escapeHtml('Send to') + '</th>' : '') + '<th class="no-width"></th></tr></thead><tbody id="ghx-split-issues-rows">' + GH.tpl.plan.contextmenu.splitissue.issueRow({model: opt_data.model, isNewIssueRow: false}) + GH.tpl.plan.contextmenu.splitissue.issueRow({model: opt_data.model, isNewIssueRow: true}) + '</tbody></table><button class="ghx-split-issues-add-row aui-button aui-button-subtle" type="button"><span class="aui-icon aui-icon-small aui-iconfont-add"></span>' + soy.$$escapeHtml('Add another') + '</button></form></div><footer class="aui-dialog2-footer"><div class="aui-dialog2-footer-actions"><div class="spinner"></div><div class="button-container"><button id="split-issue-dialog-submit-button" title="' + soy.$$escapeHtml('You need at least one new issue with a non-empty summary') + '" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Split') + '</button><button id="split-issue-dialog-close-button" class="aui-button aui-button-link">' + soy.$$escapeHtml('Cancel') + '</button></div></div></footer></section>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.plan.contextmenu.splitissue.dialogView.soyTemplateName = 'GH.tpl.plan.contextmenu.splitissue.dialogView';
}


GH.tpl.plan.contextmenu.splitissue.issueRow = function(opt_data, opt_ignored) {
  var output = '';
  var issue__soy43 = opt_data.model.issue;
  var issueDestinations__soy44 = opt_data.model.issueDestinations;
  var rowClass__soy45 = opt_data.isNewIssueRow ? 'ghx-split-new-issue' : 'ghx-split-original-issue';
  output += '<tr class="' + soy.$$escapeHtml(rowClass__soy45) + '"><td class="ghx-type"><img src="' + soy.$$escapeHtml(issue__soy43.typeUrl) + '" width="16" height="16"></td><td class="one-liner"><input class="ghx-split-summary text long-field" type="text" data-aui-validation-field data-aui-validation-nonempty data-aui-validation-when="change validate_input"' + ((! opt_data.isNewIssueRow) ? 'value="' + soy.$$escapeHtml(issue__soy43.summary) + '"' : '') + '></td>' + ((issue__soy43.estimateFieldId) ? '<td class="one-liner"><input class="ghx-split-estimate text short-field" data-aui-validation-field data-aui-validation-when="change validate_input"' + ((issue__soy43.estimateStatisticRequired) ? 'data-aui-validation-nonempty' : '') + ((! opt_data.isNewIssueRow) ? ' value="' + soy.$$escapeHtml(issue__soy43.estimate) + '" ' : '') + '></td>' : '');
  if (issueDestinations__soy44.length > 0) {
    var selectedItem__soy71 = opt_data.isNewIssueRow ? opt_data.model.defaultDestinationForNewIssue : issue__soy43.containingSprint;
    output += '<td>' + GH.tpl.component.sprintselect.renderSelectElement({items: issueDestinations__soy44, selectedItem: selectedItem__soy71, cssClass: 'select destination-single-select'}) + '</td><td class="destination-warning"><span title="' + soy.$$escapeHtml('Sprint scope will be affected by this action.') + '" class="icon aui-icon aui-icon-small aui-iconfont-warning destination-warning-hidden"></span></td>';
  }
  output += '<td>' + ((opt_data.isNewIssueRow) ? '<button class="ghx-split-issues-delete-row aui-button aui-button-subtle" tabindex="-1" type="button"><span class="aui-icon aui-icon-small aui-iconfont-delete"></span></button>' : '') + '</td></tr>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.plan.contextmenu.splitissue.issueRow.soyTemplateName = 'GH.tpl.plan.contextmenu.splitissue.issueRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'jira-agile-module/includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogView.js' */
define("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-view",["require"],function(i){"use strict";var e=i("backbone"),t=i("jira/ajs/select/single-select"),s=i("jira-agile/browser-metrics/browser-metrics-util");return AJS.formValidation.register(["nonempty"],function(i){var e=i.el.value;e&&e.trim()?i.validate():i.invalidate("This is a required field")}),e.View.extend({el:"body",initialize:function(i){this.model=i,this.issue=i.issue},events:{"click #split-issue-dialog-close-button":"hide","click #split-issue-dialog-submit-button":"onSubmit","click .ghx-split-issues-add-row":"addRow","click .ghx-split-issues-delete-row":"deleteRow","change .ghx-split-original-issue .ghx-split-estimate":"evaluateScopeChange","change .destination-single-select":"evaluateScopeChange","focus .ghx-split-issues-add-row":"addRow","keyup .ghx-split-summary":"onKeyPress","keyup .ghx-split-estimate":"onKeyPress"},render:function(){var i=this;this.$el.append(GH.tpl.plan.contextmenu.splitissue.dialogView({model:this.model})),AJS.dialog2(".ghx-split-issue-dialog").show(),AJS.dialog2(".ghx-split-issue-dialog").on("hide",this.undelegateEvents.bind(this)),this.$(".ghx-split-issue-dialog .select").each(function(){new t({element:this,itemAttrDisplayed:"label"})}),this.$("#split-issue-form").on("submit",function(e){return e.preventDefault(),i.onSubmit(),!1})},hide:function(){AJS.dialog2(".ghx-split-issue-dialog").hide()},processValidationErrors:function(i){var e=this.getFields();for(var t in i)if({}.hasOwnProperty.call(i,t)){var s=i[t];s.errorMessageForSummary&&(e[s.index].summary[0].dataAuiNotificationError=s.errorMessageForSummary),s.errorMessageForEstimate&&(e[s.index].estimate[0].dataAuiNotificationError=s.errorMessageForEstimate)}this.setWaitModeEnabled(!1)},onKeyPress:function(i){13==i.keyCode&&this.onSubmit()},isInputValid:function(){var i=function(i,e){var t=function(i){return!i||!i.trim()};if(t(i(e.issue)))return!0;var s=e.getSubmitModel();for(var n in s.newIssues)if(s.newIssues.hasOwnProperty(n)){var a=s.newIssues[n];if(t(i(a)))return!0}return!1};return!(i(function(i){return i.summary},this)||this.model.estimateStatisticRequired&&i(function(i){return i.estimate},this))},setWaitModeEnabled:function(i){i?(this.$(".spinner").spin(),this.$("#split-issue-dialog-submit-button").prop("disabled","disabled")):(this.$(".spinner").spinStop(),this.$("#split-issue-dialog-submit-button").removeProp("disabled"))},onSubmit:function(){s.triggerBefore("before:splitIssueSubmit","splitIssue"),this.isInputValid()?(this.setWaitModeEnabled(!0),this.trigger("submit",this.getSubmitModel())):this.getFields().forEach(function(i){i.summary.trigger("validate_input"),i.estimate&&i.estimate.trigger("validate_input")})},addRow:function(){var i=this.$("#ghx-split-issues-rows");i.append(GH.tpl.plan.contextmenu.splitissue.issueRow({model:this.model,isNewIssueRow:!0})),new t({element:i.find(".ghx-split-new-issue .select").last(),itemAttrDisplayed:"label"}),this.$(".ghx-split-summary").last().focus()},deleteRow:function(i){this.$(i.target).closest(".ghx-split-new-issue").remove()},evaluateScopeChange:function(i){var e,t=this.$(i.target).closest("tr"),s=t.hasClass("ghx-split-new-issue"),n=t.find(".destination-single-select"),a=parseInt(n.val()[0]);if(s){var r=this.model.issueDestinations.find(function(i){return i.id===a});e=r&&"ACTIVE"===r.state}else{var o=t.find(".ghx-split-estimate"),l=o.val().trim();e=l!==this.model.issue.estimate||a!==this.model.issue.containingSprint.id}e?this.showWarning(t):this.hideWarning(t)},showWarning:function(i){i.find(".destination-warning span").removeClass("destination-warning-hidden")},hideWarning:function(i){i.find(".destination-warning span").addClass("destination-warning-hidden")},getSubmitModel:function(){var i=this.getFields(),e=this.extractNewIssues(this.issue.estimateFieldId);return{originalIssue:{summary:i[0].summary.val(),estimate:i[0].estimate.val(),estimateFieldId:this.issue.estimateFieldId,destinationId:i[0].destination.val()?i[0].destination.val()[0]:void 0},newIssues:e}},extractNewIssues:function(i){return this.getFields().slice(1).map(function(e){return{summary:e.summary.val(),estimate:e.estimate.val(),estimateFieldId:i,destinationId:e.destination.val()?e.destination.val()[0]:void 0}})},getFields:function(){for(var i=function(i){return{summary:i.find(".ghx-split-summary"),estimate:i.find(".ghx-split-estimate"),destination:i.find(".select")}},e=[i(this.$(".ghx-split-original-issue"))],t=this.$(".ghx-split-new-issue"),s=0;s<t.length;s++)e.push(i(this.$(t[s])));return e}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'jira-agile-module/includes/js/rapid/ui/plan/contextmenu/SplitIssueDialogController.js' */
define("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-controller",["jira-agile/browser-metrics/browser-metrics-util"],function(i){"use strict";function s(i,s){this.issue=i,this.backlogController=s}function t(i,s){return GH.Ajax.put({url:"/issue/"+i+"/split",data:s})}return s.prototype.bind=function(i){this.view=i,this.view.on("submit",this.onSubmit,this)},s.prototype.onSubmit=function(s){t(this.issue.id,s).always(function(){i.performanceMark("split-issue-browser-metric-backend-response-received")}).done(function(i){i.success.errors?this.view.processValidationErrors(i.success.errors):(this.view.hide(),this.backlogController.loadData())}.bind(this)).fail(function(){this.view.hide()}.bind(this)),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.split.submit",data:{newIssueCount:s.newIssues.length}})},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:split-issue-context-menu-action', location = 'jira-agile-module/includes/js/rapid/ui/plan/contextmenu/SplitIssueAction.js' */
define("jira-agile/rapid/ui/plan/contextmenu/split-issue-action",["require"],function(i){"use strict";function e(i){return i.singleIssue&&!i.containsSubtasks&&GH.RapidBoard.State.isPlanMode()}function t(i){var e=!1;if(GH.RapidBoard.State.isScrumBoard())if(GH.RapidBoard.State.isPlanMode()){var t=l.getActiveSprintModels().find(function(e){return e.issueList.getIssueIdForKey(i.key)});e="undefined"!=typeof t}else e=!0;return e}function n(i,e){var t=c.Deferred();return p.get({url:"/issue/"+i.id+"/split",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),getIssueDestinations:e}}).done(function(i){i.userHasPermissionToSplit?(GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.COMMON.ISSUE_SPLIT),t.resolve(i)):(GH.Notification.showError("We can\'t split this issue","Please ensure you have permissions to create, edit, link, and schedule issues",!0),t.reject())}),t}function a(i){var e,t="";return i.estimateStatistic&&"issueCount"!==i.estimateStatistic.statFieldId&&(e=i.estimateStatistic.statFieldId,t=i.estimateStatistic.statFieldValue.text||""),{issue:{key:i.key,id:i.id,summary:i.summary,estimateFieldId:e,estimate:t,estimateStatisticRequired:i.estimateStatisticRequired,typeUrl:i.typeUrl}}}function s(i){var e=[i.containingSprint].concat(i.issueDestinations);e.forEach(function(i){if(i.state){var e="ACTIVE"===i.state?"Active sprint":"Future sprint";i.name+=" ("+e+")"}})}function r(i){var e=t(i),r=n(i,e),o=a(i);o.displaysIssueDestinationSelector=e;var u=c.Deferred();return r.done(function(i){e&&s(i),o.issueDestinations=i.issueDestinations,o.defaultDestinationForNewIssue=i.issueDestinations.find(function(i){return i.id===-1}),o.issue.containingSprint=i.containingSprint,u.resolve(o)}),r.fail(function(){return u.reject()}),u}function o(i){S.triggerBefore("before:splitIssuePopup");var e=r(i);e.done(function(e){var t=new g(e),n=new m(i,d);n.bind(t),t.render(),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.split"})})}function u(i){return{id:"ghx-issue-ctx-action-split-issue",name:"split-issue",label:"Split issue",actionFn:function(){var e=i.selectedIssuesData[0];o(e)}}}var d,l,c=i("jquery"),p=i("jira-agile/rapid/ajax"),f=i("jira-agile/rapid/global-events"),g=i("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-view"),m=i("jira-agile/rapid/ui/plan/contextmenu/split-issue-dialog-controller");f.on("pre-initialization",function(){d=i("jira-agile/rapid/ui/plan/backlog-controller"),l=i("jira-agile/rapid/ui/plan/backlog-model")});var S=i("jira-agile/browser-metrics/browser-metrics-util"),I=(i("jira/featureflags/feature-manager"),{});return I.appendItem=function(i,t){e(i)&&!GH.RapidBoard.State.isAgilityBoard()&&t.push(u(i))},I});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogView.js' */
define("jira-agile/rapid/ui/plan/BacklogView",["require"],function(e){"use strict";var a=e("underscore"),n=e("jquery"),r=e("jira-agile/rapid/global-events"),i=e("jira-agile/rapid/ui/plan/backlog-model2"),o=e("jira-agile/rapid/ui/plan/sprint-view"),l=e("jira-agile/rapid/ui/plan/sprint-backlog-view"),s=e("jira-agile/rapid/ui/plan/sprint-model"),t=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),d=e("jira-agile/rapid/ui/plan/plan-drag-and-drop"),c=e("jira-agile/browser-metrics/browser-metrics-util"),g=e("jira/featureflags/feature-manager"),u=void 0;r.on("pre-initialization",function(){u=e("jira-agile/rapid/ui/plan/backlog-controller")});var p={};return p.containerSelector="#ghx-backlog",p.getContainer=function(){return p.container||(p.container=n(p.containerSelector)),p.container},p.draw=function(){p.container=void 0;var e=n(p.containerSelector);e.html(GH.tpl.backlogview.renderBacklogView({}));var r=u.calculateIssueRenderData();o.renderAllSprints(r),GH.RapidBoard.State.isCollapsibleBacklogEnabled()||l.renderBacklog(r),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||(GH.planOnboarding.renderOnboarding(),a.delay(function(){d.enableDragAndDrop(),p.registerClickHandlers(),o.registerTwixies(),GH.sprintActions.createDropdown(),n("#ghx-backlog").attr("data-rendered",(new Date).getTime())}))},p._enableDragAndDropOnHover=function(){d.enableDragAndDrop(),n(p.containerSelector).trigger("backlog.enable.drag.drop.hover.off")},p.registerEventHandlers=function(){p.registerHoverHandlers(),p.registerClickHandlers()},p.registerHoverHandlers=function(){var e=n(p.containerSelector);e.on("mouseover",p._enableDragAndDropOnHover),e.on("backlog.enable.drag.drop.hover.off",function(){e.off("mouseover",p._enableDragAndDropOnHover)})},p.registerClickHandlers=function(){n(p.containerSelector).delegate(".js-clear-all-filters","click",function(e){u.clearFilters()})},p.redrawChangedModel=function(e){p.redrawChangedModels([e])},p.redrawChangedModels=function(e){function n(){GH.RapidBoard.State.isCollapsibleBacklogEnabled()?a.each(e,function(e){o.updateSprintViewForModel(e)}):a.each(e,function(e){s.isSprintModel(e)?o.updateSprintViewForModel(e):i.isBacklogModel(e)&&l.updateBacklog()}),GH.planOnboarding.renderOnboarding(),d.enableDragAndDrop(),GH.sprintActions.createDropdown()}g.isFeatureEnabled("jsw.classic.backlog.drag-and-drop.remove-spinner")?(n(),c.performanceMark("after:backlogRankIssueUI")):(GH.PlanView.showLoadingBacklog(),setTimeout(function(){n(),GH.PlanView.hideLoadingBacklog(),c.performanceMark("after:backlogRankIssueUI")}))},p.updateSprintsAfterAddRemove=function(){var e=u.calculateIssueRenderData();o.renderAllSprints(e),GH.planOnboarding.renderOnboarding(),d.enableDragAndDrop(),GH.sprintActions.createDropdown()},p.updateIssueSelectionState=function(e){var a=!1,r=null,i=t.getSelectedIssueKey();a=i,n(p.containerSelector).find(".js-issue").removeClass("ghx-selected ghx-selected-primary").each(function(e,o){var l=n(o),s=l.data("issue-key");t.isInSelection(s)&&(l.addClass("ghx-selected"),i==s&&l.addClass("ghx-selected-primary")),null!=a&&s===a&&(r=l)}),r&&e&&p._scrollToView(r)},p.updateHiddenIssues=function(){var e=u.calculateIssueRenderData(),r=n("#ghx-backlog");p._hideBacklogView();var i=r.find(".js-issue-list");a.each(i,function(a){var r=n(a);if(!r.closest(".ghx-backlog-group").length&&!r.is(".js-empty-list")){var i=p._updateIssuesVisibilityInIssueList(r,e);i?r.removeClass("ghx-has-issues").addClass("ghx-no-issues"):r.removeClass("ghx-no-issues").addClass("ghx-has-issues")}}),o.updateSprintStatistics(),GH.RapidBoard.State.isCollapsibleBacklogEnabled()||l.updateBacklogHeader(),GH.PlanView.showLoadingBacklog(),setTimeout(function(){l.updateBacklog(),GH.planOnboarding.renderOnboarding(),p._showBacklogView(),GH.PlanView.hideLoadingBacklog()})},p._hideBacklogView=function(){var e=n("#ghx-backlog");e.css({display:"none"})},p._showBacklogView=function(){var e=n("#ghx-backlog");e.css({display:""})},p._updateIssuesVisibilityInIssueList=function(e,r){var i=e.find(".js-issue"),o=!0;a.each(i,function(e){var a=n(e),i=a.attr("data-issue-key");if(r.hiddenIssues[i]){if(a.addClass("ghx-filtered"),!a.hasClass("ghx-issue-subtask")){var l=a.parents(".ghx-parent-group");l.addClass("js-fake-parent")}}else{if(a.removeClass("ghx-filtered"),!a.hasClass("ghx-issue-subtask")){var l=a.parents(".ghx-parent-group");l.removeClass("js-fake-parent")}o=!1}});var l=e.find(".js-fake-parent");return l.each(function(e,a){a=n(a),0===a.find(".js-issue:not(.ghx-filtered)").length?a.addClass("ghx-parent-group-filtered"):a.removeClass("ghx-parent-group-filtered")}),o},p.checkBacklogWidth=function(){var e=p.getContainer().width();e<600?n("body").addClass("ghx-plan-band-1").removeClass("ghx-plan-band-2"):n("body").addClass("ghx-plan-band-2").removeClass("ghx-plan-band-1"),GH.planOnboarding.refresh()},p._scrollToView=function(e){var a=n("#ghx-backlog"),r=a[0].getBoundingClientRect(),i=e[0].getBoundingClientRect();GH.ScrollUtils.scrollElementToViewPort(a,r,i)},p});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogView.soy' */
// This file was automatically generated from BacklogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.backlogview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.backlogview == 'undefined') { GH.tpl.backlogview = {}; }


GH.tpl.backlogview.renderBacklogView = function(opt_data, opt_ignored) {
  return '<div id="ghx-content-group"><div class="ghx-sprint-group"></div><div class="ghx-backlog-group"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.backlogview.renderBacklogView.soyTemplateName = 'GH.tpl.backlogview.renderBacklogView';
}


GH.tpl.backlogview.renderDragOverlay = function(opt_data, opt_ignored) {
  return '<div class="ghx-drag-overlay"></div>';
};
if (goog.DEBUG) {
  GH.tpl.backlogview.renderDragOverlay.soyTemplateName = 'GH.tpl.backlogview.renderDragOverlay';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanView.js' */
define("jira-agile/rapid/ui/plan/plan-view",["require","jquery","jira-agile/rapid/global-events","jira-agile/rapid/ui/plan/plan-controls","jira-agile/tooltip","jira-agile/rapid/const/PageMode","jira-agile/rapid/ui/bento/bento-features","jira/analytics","jira-agile/rapid/wrm-spa-utils","jira/featureflags/feature-manager","jira-agile/rapid/deferred-resources-loader"],function(e,i,a,n,l,o,s,t,r,d,g){"use strict";var c,p,h=void 0;a.on("pre-initialization",function(){p=e("jira-agile/rapid/ui/plan/plan-controller"),c=e("jira-agile/rapid/ui/plan/BacklogView"),h=e("jira-agile/rapid/ui/plan/plan-drag-and-drop")});var u=function(){return d.isFeatureEnabled("cbb.heritage")},w={},V=!1;w.init=function(){var e=i(document);e.on("click",".js-view-action-toggle-releases-column, .js-release-toggle",p.toggleVersionsColumn),e.on("click",".js-view-action-toggle-epics-column, .js-epic-toggle",p.toggleEpicsColumn),e.on("click",".js-view-actions-plan .js-view-action-toggle-epics-lozenge",p.toggleEpicsShowOnBacklog),V=GH.RapidBoard.State.isAgilityBoard()},w.show=function(){w.detailViewPositioned=!1,i("body").addClass("ghx-mode-planning");var a=GH.tpl.plancontroller.renderSkeleton({shouldShowEpic:!V&&GH.RapidBoard.State.showEpicAsPanel(),shouldHidePanels:V,isbacklogDataV2Enabled:GH.EpicView.isbacklogDataV2Enabled()});i("#ghx-plan").empty().append(a);var n=i(".js-release-toggle");l.tipsify({selector:n,gravity:"w",html:!0,className:"ghx-tipsy-alt"});var t=i(".js-epic-toggle");l.tipsify({selector:t,gravity:"w",html:!0,className:"ghx-tipsy-alt"});var r=GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.isSimpleBoard;if(g.handleDeferredResourceImport(u()&&!GH.DetailsView,function(){GH.DetailsView.setContainerSelector("#ghx-detail-view"),GH.DetailsView.setOptions({canClose:!0,showActionsCog:!0,showSubtaskTab:!0,showLogWorkTrigger:!1,updateSizeHandler:w.updateDetailViewSize,closeHandler:p.closeDetailsView,wantsBentoInBacklog:function(){return r||s.isBentoInBacklogEnabled()}}),AJS.$("#ghx-issue-fragment").on("hide-backlog-issue",function(){p.closeDetailsView()})}),w.applyBacklogWillChangePerfHandlers(),GH.RapidBoard.State.isKanbanBoard()){var h=void 0,x=d.isFeatureEnabled("jsw.classic.keto");g.handleDeferredResourceImport(x&&GH.RapidBoard.State.getMode()===o.PLAN&&!h,function(){h=e("jira-agile/rapid/ui/kanplan/kanplan-acknowledge"),h.show()})}delete c.container},w.updateDetailViewState=function(){var e=p.isDetailsViewOpened();e?(i("#ghx-plan-group").addClass("ghx-has-detail"),i("#ghx-detail-view").css({display:""})):(i("#ghx-plan-group").removeClass("ghx-has-detail"),i("#ghx-detail-view").css({display:"none"})),GH.ViewActions.setDetailViewVisible(e)},w.updateVersionColumnState=function(){var e=i("#ghx-version-column"),a=i("#ghx-plan-group"),n=i(".js-release-toggle"),o=p.isVersionsColumnVisible();GH.EpicView.isbacklogDataV2Enabled()&&(e.toggleClass("ghx-hidden",!o),a.toggleClass("ghx-version-expanded",o),n.toggleClass("ghx-active",o)),o?(GH.EpicView.isbacklogDataV2Enabled()||(e.css({display:""}),a.addClass("ghx-version-expanded"),n.addClass("ghx-active")),GH.EpicView.isbacklogDataV2Enabled()&&x(e)&&(GH.VersionView.show(),v(),GH.BacklogController.updateVersionData().always(w.hideLoadingVersions)),l.disable(n)):(GH.EpicView.isbacklogDataV2Enabled()?n.attr("data-tooltip",GH.tpl.plancontroller.renderVersionPanelTipsyExpand()):(e.css({display:"none"}),a.removeClass("ghx-version-expanded"),n.attr("data-tooltip",GH.tpl.plancontroller.renderVersionPanelTipsyExpand()).removeClass("ghx-active")),l.enable(n)),GH.ViewActions.setVersionsPanelVisible(o)};var x=function(e){return e.is(":empty")||e.find(".ghx-classification-scrollview").is(":empty")};w.updateEpicsColumnState=function(){var e=i("#ghx-epic-column"),a=i("#ghx-plan-group"),n=i(".js-epic-toggle"),l=p.isEpicsColumnVisible()&&GH.RapidBoard.State.showEpicAsPanel();GH.EpicView.isbacklogDataV2Enabled()&&(e.toggleClass("ghx-hidden",!l),a.toggleClass("ghx-epic-expanded",l),n.toggleClass("ghx-active",l)),l?(GH.EpicView.isbacklogDataV2Enabled()||(e.css({display:""}),a.addClass("ghx-epic-expanded"),n.addClass("ghx-active")),GH.EpicView.isbacklogDataV2Enabled()&&b(e)&&(GH.EpicView.show(),w.showLoadingEpics(),GH.BacklogController.updateEpicData().always(w.hideLoadingEpics))):GH.EpicView.isbacklogDataV2Enabled()?n.attr("data-tooltip",GH.tpl.plancontroller.renderEpicPanelTipsyExpand()):(e.css({display:"none"}),a.removeClass("ghx-epic-expanded"),n.attr("data-tooltip",GH.tpl.plancontroller.renderEpicPanelTipsyExpand()).removeClass("ghx-active")),GH.ViewActions.setEpicsPanelVisible(l)};var b=function(e){return e.is(":empty")||e.find(".ghx-classification-scrollview").is(":empty")};w.updateViewActions=function(){GH.ViewActions.setDetailViewVisible(p.isDetailsViewOpened()),GH.ViewActions.setEpicsPanelVisible(p.isEpicsColumnVisible()),GH.ViewActions.setVersionsPanelVisible(p.isVersionsColumnVisible());var e=d.isFeatureEnabled("jsw.classic.keto");g.handleDeferredResourceImport(e&&!GH.GridDataController,function(){GH.GridDataController.getModel()&&GH.ViewActions.setSwimlanes(GH.GridDataController.getModel().hasSwimlanes())})},w.updateHorizontalPositioning=function(){g.handleDeferredResourceImport(u()&&!GH.DetailsView,function(){GH.DetailsView.updateSize()})},w.applyBacklogWillChangePerfHandlers=function(){var e=function(e){return function(a){h.isAnyIssueBeingDragged()||i(a.currentTarget).toggleClass("will-change",e)}};i("#ghx-backlog").hover(e(!0),e(!1))},w.toggleWillChangeDisable=function(e){AJS.$("#ghx-backlog").toggleClass("will-change-disable",e)},w.updateDetailViewSize=function(){var e=i("#ghx-detail-issue");if(e.length>0){var a=e.outerHeight(),n=i("#ghx-detail-head"),l=n.outerHeight(),o=i("#js-detail-nav-content");o.css({height:a-l-13})}},w.doUpdateDetailsView=function(){w.detailViewPositioned||(w.detailViewPositioned=!0,w.updateFixedElementPositioning())},w.hide=function(){i("body").removeClass("ghx-mode-planning"),i("#ghx-plan").empty()},w.hideLoadingFilter=function(){i("body").removeClass("ghx-loading-quickfilter")},w.showLoadingBacklog=function(){i("body").addClass("ghx-loading-backlog"),i(".adg-throbber").show(),r.sendSpinnerShowEvent("plan")},w.hideLoadingBacklog=function(){i("body").removeClass("ghx-loading-backlog"),i(".adg-throbber").hide(),r.sendSpinnerHideEvent("plan")},w.updateFixedElementPositioning=function(){p.isVisible&&(n.resizeQuickFilters({mode:o.PLAN}),w.updateHorizontalPositioning())};var v=function(){i("body").addClass("ghx-loading-versions"),i("#ghx-version-column .ghx-progress-indicator.ghx-initial").spin("large")};return w.hideLoadingVersions=function(){i("body").removeClass("ghx-loading-versions"),i("#ghx-version-column .ghx-progress-indicator.ghx-initial").spinStop()},w.showLoadingEpics=function(){i("body").addClass("ghx-loading-epics"),i("#ghx-epic-column .ghx-progress-indicator.ghx-initial").spin("large")},w.hideLoadingEpics=function(){i("body").removeClass("ghx-loading-epics"),i("#ghx-epic-column .ghx-progress-indicator.ghx-initial").spinStop()},w});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogController.js' */
define("jira-agile/rapid/ui/plan/backlog-controller",["require"],function(e){"use strict";function i(e){var i=n.getIssueData(e);i&&i.parentKey&&n.isParentAndCollapsed(i.parentKey)&&I.toggleExpandState(i.parentKey)}function a(e){if(GH.RapidBoard.State.isKanbanBoard()){var i=r.map(e.issues,function(e){return e.issueKey});return n.hasAnyIssueInvisible(i)}return!0}function t(e,i,a){var t=[];return r.each(i,function(i){a[i]||t.push(e[i])}),t}var r=e("underscore"),s=e("jquery"),n=e("jira-agile/rapid/ui/plan/backlog-model"),o=e("jira-agile/rapid/ui/plan/BacklogView"),l=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),d=(e("jira-agile/rapid/global-events"),e("jira-agile/rapid/ui/plan/sprint-backlog-controller")),u=e("jira-agile/rapid/ui/plan/sprint-view"),c=e("jira-agile/rapid/ui/plan/sprint-backlog-view"),p=e("jira-agile/rapid/ui/plan/sprint-config"),g=e("jira-agile/rapid/ui/plan/plan-controls"),f=e("jira-agile/rapid/ui/plan/plan-view"),I=e("jira-agile/rapid/ui/plan/plan-issue-list-view"),v=e("jira-agile/rapid/ui/plan/plan-controller"),E=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),b=e("jira-agile/rapid/ui/plan/sprint-controller"),S=e("jira-agile/rapid/const/PageMode"),C=e("jira-agile/rapid/configuration/ConfigContextLoader"),V=e("jira-agile/rapid/board-data-loader"),H=e("jira-agile/rapid/work/quick-filters-bridge"),w=e("jira-agile/rapid/ui/bento/bento-features"),G=e("jira/featureflags/feature-manager"),D=e("jira-agile/browser-metrics/browser-metrics-util"),k=e("jira-agile/rapid/deferred-resources-loader"),h=function(){return G.isFeatureEnabled("cbb.heritage")},m="backlog-data-request-normalisation-shipit-179",y={};y.analyticsSource="backlog",y.application="jira-software";var B=null;k.handleDeferredResourceImport(h()&&!GH.DetailsView,function(){B=e("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason")});var F=new GH.Events;F.visible=!1,F.rapidViewData=void 0,F.rapidViewConfig=void 0,F.firstIssueView=!0,F.isBacklogV3Enabled=function(){return G.isFeatureEnabled(m)},F.lastExecutedSearchFilter=void 0,F.issueCreatedCallbacks={},F.init=function(){l.init(),d.init(),b.init();var i=G.isFeatureEnabled("jsw.classic.keto");k.handleDeferredResourceImport(i&&GH.RapidBoard.State.getMode()===S.PLAN,function(){var i=e("jira-agile/rapid/ui/plan/plan-rank-controller");i.init()});var a=s(GH);a.bind("issueUpdated",F.handleIssueUpdated),AJS.$("#ghx-issue-fragment").on("issue-updated",function(e,i){GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.ISSUE_UPDATE_BENTO);var a={type:"issueUpdated"},t={issueKey:i.issueKey,fieldId:i.fieldId,source:"detailView"};F.handleIssueUpdated(a,t)}),a.bind("issueCreated",F.handleIssueCreated),a.bind("issuesRemovedFromSprint",F.handleIssuesRemovedFromSprint),k.handleDeferredResourceImport(i&&GH.RapidBoard.State.getMode()===S.PLAN,function(){a.bind(GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED,F.handleSprintStarted)}),s(g.quickfilters).bind("quickFilterChange",function(){F.visible&&F.loadData()})},F.setRapidView=function(e){F.rapidViewData=e},F.setRapidViewConfig=function(e){F.rapidViewConfig=e},F.show=function(e){return!!F.rapidViewData&&(F.visible=!0,void F.loadData(!1).done(e))},F.hide=function(){GH.EpicView.hide(),F.visible=!1},F.loadData=function(e){f.showLoadingBacklog();var i=V.loadData(S.PLAN,function(){var e=G.isFeatureEnabled("jsw.classic.board.api-calls.modern-frontend");return e&&GH.RapidBoard.loadData&&(GH.RapidBoard.State.isFirstLoad()||GH.RapidBoard.State.isLoadDataClaimed())?A():R()});return F.processGetDataResponse(e,i)};var A=function(){var e=AJS.$.Deferred(),i=!GH.RapidBoard.State.isFirstLoad()&&!GH.RapidBoard.State.isLoadDataClaimed();return GH.RapidBoard.loadData({isRefresh:i,deferred:e,mode:S.PLAN}),e.always(function(){GH.RapidBoard.State.setLoadDataClaimed(!1)}),e.promise()},R=function(){var e=F.rapidViewData.id,i={rapidViewId:e,activeQuickFilters:g.quickfilters.getActiveQuickFilters(),selectedProjectKey:GH.RapidBoard.projectKey,normalizeEpics:F.isBacklogV3Enabled(),normalizeStatuses:F.isBacklogV3Enabled()};r.isEmpty(i.activeQuickFilters)&&delete i.activeQuickFilters,GH.planOnboarding.refresh();var a=GH.EpicView.isbacklogDataV2Enabled()?"/xboard/plan/v2/backlog/data.json":"/xboard/plan/backlog/data.json",t=AJS.$.extend({},i);t.forceConsistency=GH.ECX.shouldForceConsistency();var s={url:a,data:t,deferErrorHandling:!0};return GH.Ajax.get(s,"backlogDataModel")};F.processGetDataResponse=function(e,i){var a=this,t=F.rapidViewData.id,r=AJS.$.Deferred(),s=i.done(function(i){F.processData(e,i),r.resolve()});return s.fail(function(e,i){if(f.hideLoadingBacklog(),v.hide(),v.sla.latestErrorStatusCode=i&&i.status,GH.RapidBoard.State.isKanbanBoard()){var s=a._getMessageFromErrorResponse(e);s==="Kanban backlog is not enabled for this board"&&(GH.RapidBoard.ViewController.sidebarController.removePlanMenuItem(t),AJS.flag({type:"info",body:s}),GH.RapidBoard.ViewController.setMode(S.WORK))}r.resolve()}),r.promise()},F._getMessageFromErrorResponse=function(e){return e.error&&e.error.errors&&e.error.errors[0]&&e.error.errors[0].message},F.processData=function(e,i){if(F.visible){var a=void 0;a=F.isBacklogV3Enabled()?n.normalizeData(i):i,F.lastExecutedSearchFilter=void 0,n.setRankCustomFieldId(a.rankCustomFieldId),n.setEstimationStatistic(F.rapidViewConfig.estimationStatistic),n.setTrackingStatistic(F.rapidViewConfig.trackingStatistic),GH.VersionController.setProjects(a.projects),GH.VersionController.setVersions(a.versionData),GH.EpicView.isbacklogDataV2Enabled()||GH.EpicController.setEpicData(a.epicData),n.setData(a),n.setCanManageSprints(a.canManageSprints),n.setComplexQuery(a.complexQuery),n.setCanCreateIssue(a.canCreateIssue),n.setSupportsPages(a.supportsPages),l.validateCurrentSelection(),GH.EpicView.isbacklogDataV2Enabled()||(GH.VersionController.validateSelectedVersion(),GH.EpicController.validateSelectedEpic()),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||(GH.VersionView.show(),GH.EpicView.show()),F.updateVersionFiltering(!0),F.updateEpicFiltering(!0),o.draw(),GH.EpicView.isbacklogDataV2Enabled()||(GH.VersionController.registerVersionsCount(),GH.EpicController.registerEpicsCount(a.epicData)),GH.EpicView.isbacklogDataV2Enabled()&&(GH.PlanView.updateEpicsColumnState(),GH.PlanView.updateVersionColumnState()),F.updateBoardState(a),g.searchFilter.clearLastSearch(),g.searchFilter.searchQuery(),f.hideLoadingBacklog(),D.triggerAfter("after:splitIssueSubmit","splitIssue"),D.triggerAfter("after:addFlagSubmit","addFlag"),D.triggerAfter("after:removeFlagSubmit","removeFlag"),G.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&D.triggerAfter("after:backlogQuickFilter","backlogQuickFilter"),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||GH.RapidBoard.ViewController.updateContentContainer(),v.updateDetailsView(l.getSelectedIssueKey(),null,e),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||o.updateIssueSelectionState(!0),w.isBentoInBacklogEnabled()&&k.handleDeferredResourceImport(h()&&!GH.DetailsView,function(){GH.RapidBoard.State.isPlanMode()&&GH.RapidBoard.State.isDetailsViewPlanOpened()&&(AJS.$("#ghx-issue-fragment").trigger("detail-view-ready",GH.DetailsView.getSelectedIssueKey(),F.firstIssueView),F.firstIssueView=!1)}),C.prefetch(),JIRA.trace("gh.rapid.view.rendered"),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()&&v.trigger("after:show")}},F.updateBoardState=function(e){if(e&&e.versionData&&e.versionData.versionsPerProject&&e.issues&&e.projects&&(G.isFeatureEnabled("jsw.classic.plan.bm.fix.issueNo")||e.epicData&&e.epicData.epics)){var i=Object.getOwnPropertyNames(e.versionData.versionsPerProject).map(function(i){return e.versionData.versionsPerProject[i].length}).reduce(function(e,i){return e+i},0),a=e.issues.length;if(GH.RapidBoard.State.numberOfIssues.set(a),GH.RapidBoard.State.numberOfProjects.set(e.projects.length),GH.RapidBoard.State.numberOfVersions.set(i),G.isFeatureEnabled("jsw.classic.plan.bm.fix.issueNo")||GH.RapidBoard.State.numberOfEpics.set(e.epicData.epics.length),G.isFeatureEnabled("jsw.backlog.browser-metrics.backlog.issue.count.browser.metrics")){var t=e.sprints.reduce(function(e,i){return e+(i.issuesIds?i.issuesIds.length:0)},0);GH.RapidBoard.State.numberOfBacklogIssues.set(a-t)}}},F.updateUIAfterSelectionChange=function(e){o.updateIssueSelectionState(e.doScroll),v.updateDetailsView(l.getSelectedIssueKey(),e.openDetailsView)},F.updateEpicData=function(){if(!GH.EpicView.isbacklogDataV2Enabled()&&!F.visible)return s.Deferred().resolve();var e={rapidViewId:F.rapidViewData.id};return GH.EpicView.isbacklogDataV2Enabled()?GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:e},"epics").done(j).fail(function(e,i){GH.EpicView.renderError(),!i||x(i.status)?T("epicsViewed",i.status):M("epicsViewed")}):GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:e},"epics").done(function(e){F.visible&&F.setEpicData(e)})};var j=function(e){F.visible&&(F.setEpicData(e),GH.EpicController.registerEpicsCount(e),GH.PlanDragAndDrop.initializeClassificationDnD(),M("epicsViewed"))};F.setEpicData=function(e){GH.EpicController.setEpicData(e),GH.EpicView.updateEpics()},F.updateVersionData=function(){if(!GH.EpicView.isbacklogDataV2Enabled()&&!F.visible)return s.Deferred().resolve();var e={rapidViewId:F.rapidViewData.id,activeQuickFilters:g.quickfilters.getActiveQuickFilters()};return GH.EpicView.isbacklogDataV2Enabled()?GH.Ajax.get({url:"/xboard/plan/backlog/versions.json",data:e},"versions").done(K).fail(function(e,i){GH.VersionView.renderError(),!i||x(i.status)?T("versionsViewed",i.status):M("versionsViewed")}).always(function(){D.triggerAfter("after:createVersion","versionCreate")}):GH.Ajax.get({url:"/xboard/plan/backlog/versions.json",data:e},"versions").done(function(e){F.visible&&F.setVersionData(e.versionData)}).always(function(){D.triggerAfter("after:createVersion","versionCreate")})};var K=function(e){if(F.visible){var i=GH.VersionController.getVersionModel().canCreateVersion!==e.versionData.canCreateVersion;i&&GH.VersionView.draw(),F.setVersionData(e.versionData),GH.VersionController.registerVersionsCount(),GH.PlanDragAndDrop.initializeClassificationDnD(),M("versionsViewed")}};F.setVersionData=function(e){GH.VersionController.setVersions(e),GH.VersionController.validateSelectedVersion(),GH.VersionView.updateView()},F.moveIssues=function(e,i,a,t){var r=n.moveIssuesNew(e,i,a,t);return o.redrawChangedModels(r),!n.isRankable()||n.hasAnySubtasks(e)},F.reorderIssuesInSprint=function(e,i){var a=n.reorderIssuesInModel(e,i);o.redrawChangedModels(a)},F.revertStatistics=function(){u.updateSprintStatistics(),GH.RapidBoard.State.isCollapsibleBacklogEnabled()||c.updateBacklogHeader()},F.handleSprintStarted=function(){l.clearSelection(),GH.RapidBoard.State.isAgilityBoard()?GH.Navigation.gotoDefaultRapidBoardPageAfterSprintStarted(F.rapidViewData.id):(GH.RapidBoard.ViewController.setMode(S.WORK),GH.RapidBoard.State.pushState()),D.triggerAfter("after:startSprintSubmit")},F.handleIssueForEpicCreated=function(e,i){if(F.visible)return r.isUndefined(F.handleIssueForEpicCreated.deferred)&&(F.handleIssueForEpicCreated.deferred=new s.Deferred,setTimeout(function(){F.loadData().then(function(){F.handleIssueForEpicCreated.deferred.resolve(),F.handleIssueForEpicCreated.deferred=void 0},function(){F.handleIssueForEpicCreated.deferred.reject()})},0)),F.handleIssueForEpicCreated.deferred},F.registerIssueCreatedCallback=function(e,i){F.issueCreatedCallbacks[e]=i},F.unregisterIssueCreatedCallback=function(e){delete F.issueCreatedCallbacks[e]},F.handleIssueCreated=function(e,i){if(F.visible){GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BACKLOG.ISSUE_CREATE_DIALOG),F.trigger("before:rankCreatedIssue");var a=r.clone(F.issueCreatedCallbacks);setTimeout(function(){F.handleIssueCreatedImpl(i,a).always(function(){F.trigger("after:rankCreatedIssue")})},0)}},F.handleIssueCreatedImpl=function(e,i){function a(e){var i=r.map(e,function(e){return{issueKey:e.key,issueId:e.id,issueType:e.fields.issuetype.id}}),a=GH.EpicConfig.getEpicIssueTypeId();return r.reduce(i,function(e,i){return i.issueType===a?e.epics.push(i):e.issues.push(i),e},{issues:[],epics:[]})}if(e.isSubtask)return void F.subtasksCreated(e);var t=s.Deferred();return F.getIssueDetails(e.issues,"issuetype").then(function(e){var r=a(e.issues);F.issuesAndEpicsCreated(r.issues,r.epics,i).always(function(){t.resolve()})}),t.promise()},F.getIssueDetails=function(e,i){var a=r.pluck(e,"issueKey");return F.getIssueDetailsByKeys(a,i)},F.getIssueDetailsByKeys=function(e,i){var a=e.join(","),t="issueKey in ("+a+")";return GH.Ajax.get({bareUrl:GH.Ajax.buildBareRestUrl("/rest/api/2/search"),data:{jql:t,fields:i}},"getissues")},F.issuesAndEpicsCreated=function(e,i,a){if(!r.isEmpty(e)||!r.isEmpty(i)){if(GH.RapidBoard.State.showEpicAsPanel()&&r.isEmpty(e))return F.reloadAndShowCreatedEpics(i);var t=r.map(a,function(a){return!!r.isFunction(a)&&a(e,i)}),n=r.filter(t,function(e){return e&&(e instanceof s.Deferred||r.isFunction(e.promise))}),o=r.map(n,function(e){var i=s.Deferred();return e.always?e.always(i.resolve):e.then(i.resolve,i.resolve),i});return s.when.apply(s,o).then(function(){F.reloadAndSelectCreatedIssues(e)})}},F.subtasksCreated=function(e){var t=w.isBentoEnabled()&&e.isSubtask;t||(GH.DetailsViewScrollTracker.setSelectedTab(GH.DetailsView.TAB_SUBTASKS),F.loadData(B.SUBTASKS_CHANGED).done(function(){e&&e.issues&&e.issues.length>0&&i(e.issues[0].issueKey),a(e)&&GH.RapidBoard.QuickCreate.showSubtaskCreatedMessage(e)}))},F.reloadAndSelectCreatedIssues=function(e){return F.loadData().done(function(){var i=r.last(e),a=n.isIssueVisible(i.issueKey);a?l.selectIssue(i.issueKey):GH.RapidBoard.QuickCreate.showCreatedIssuesMessage({issues:e})})},F.reloadAndShowCreatedEpics=function(e){F.updateEpicData().done(function(){F._showCreatedEpicsMessage(e),GH.EpicView.renderNewEpics(e)})},F._showCreatedEpicsMessage=function(e){var i=r.last(e),a=GH.EpicController.getEpicModel().getEpicList(),t=a.isIssueVisible(i.issueKey);GH.RapidBoard.QuickCreate.showCreatedEpicsMessage({issues:e},t),t&&GH.EpicView.scrollToBottom()},F._getIssueId=function(e){var i=n.findModelWithIssue(e);return i?i.getIssueList().getIssueIdForKey(e):null},F.handleIssueUpdated=function(e,i){if(F.visible){var a=i.issueKey?F._getIssueId(i.issueKey):parseInt(i.issueId,10),t=n.findModelWithIssue(a),r=!t,s=!1,o=!1,l=!1,d=!1;if("quickEdit"===i.source?(s=!0,o=!0,l=!0,!t&&n.trackingStatistic.isEnabled&&(d=!0)):(o="epic"===i.fieldId||i.fieldId===F.rapidViewConfig.estimationStatistic.fieldId||i.fieldId===GH.EpicConfig.getEpicLinkFieldId(),l="fixVersions"===i.fieldId||"versions"===i.fieldId||i.fieldId===F.rapidViewConfig.estimationStatistic.fieldId),GH.DetailsView.opts.wantsBentoInBacklog())"sprint"!==i.fieldId&&i.fieldId!==p.getSprintFieldId()||(d=!0);else if(i.fieldChanges){var u=i.fieldChanges[p.getSprintFieldId()];u&&u.original!==u.updated&&(d=!0)}null==a&&(d=!0),d?r?F.loadData(B.SUBTASKS_CHANGED):F.loadData():(l?F.updateVersionData().then(F.reloadSingleIssue.bind(null,a)):F.reloadSingleIssue(a),s&&(r?v.reloadDetailView(B.SUBTASKS_CHANGED):v.reloadDetailView()),o&&F.updateEpicData())}},F.handleIssuesRemovedFromSprint=function(e,i){F.visible&&(1===i.issueKeys.length&&(l.selectIssue(i.issueKeys[0]),l.selectionManager._addSelectedIssueKeys(i.issueKeys)),F.loadData())},F.reloadSingleIssue=function(e){var i={rapidViewId:F.rapidViewData.id,issueId:e},a=GH.BacklogModel.getIssueDataForId(e),t=null;a&&a.parentId&&(t=a.epic),GH.Ajax.get({url:"/xboard/plan/backlog/issue.json",data:i},"updateSingleIssue."+e).done(function(e){t&&(e.epic=t),F.updateIssues(e),JIRA.trace("gh.backlog.issue.updated."+e.key)})},F.updateIssues=function(e){r.isArray(e)||(e=[e]);var i=[],a=!1;r.each(e,function(e){var t=n.findModelWithIssue(e.key);t&&(GH.RapidBoard.State.showEpicAsPanel()&&e.typeId===GH.EpicConfig.getEpicIssueTypeId()?(t.getIssueList().removeIssues(e.key),a=!0):t.getIssueList().updateIssue(e),i.push(t))});var t=e.map(function(e){return n.isSubtask(e.key)?e.parentKey:e.key});if(n.assignSubtasksToSameEpicAsParent(t),n.updateFiltering(),a){F.updateEpicData(),l.validateCurrentSelection();var s=l.getSelectedIssueKey();GH.DetailsView.setSelectedIssueKey(s),v.reloadDetailView()}o.redrawChangedModels(i)},F.removeIssues=function(e,i){e.getIssueList().removeIssues(i),o.redrawChangedModel(e)},F.isFiltersActive=function(){return!r.isEmpty(g.quickfilters.getActiveQuickFilters())},F.executeSearch=function(e){if(r.isNull(e))F.lastExecutedSearchFilter=null;else{var i=" ";F.lastExecutedSearchText=e,F.lastExecutedSearchFilter=function(a){return a=a||{},e.test(a.key+i+a.summary+i+a.typeName+i+a.assigneeName)}}E.setInstantFilter(F.lastExecutedSearchFilter);var a=n.updateFiltering();return a&&o.updateHiddenIssues(),GH.RapidBoard.State.replaceState(),!1};var P=function(e,i,a){var t=void 0;t=i.length?function(e){return i.some(function(i){return a(e,i)})}:function(){return!0},E.setFilter(e,t);var r=n.updateFiltering();r&&o.updateHiddenIssues()};F.filterByAssignees=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return P("assignees",e,function(e,i){return!e.assigneeAccountId&&!i||e.assigneeAccountId===i})},F.filterByLabels=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return P("labels",e,function(e,i){return e.labels&&e.labels.includes(i)})},F.clearFilters=function(){var e=g.quickfilters.clearFilters();if(H.isReactFiltersEnabled().then(function(e){e&&GH.bridge.FilterBridge.clearFilters()}),GH.VersionController.setFilteredVersionId(null),GH.EpicController.setFilteredEpicKey(null),GH.EpicController.clearVersionFiltering(),e){try{GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BACKLOG.QUICK_FILTERS_CHANGE,!G.isFeatureEnabled("moonwalk.eventually-consistent.backlog.quick-filters"))}catch(i){AJS.trigger("analyticsEvent",{name:"jira.agile.board.PlanController.quickFilters.MarkUserInteractionError",data:{errorMsg:i.toString()}})}E.clearAllFilters(),F.loadData().done(function(){GH.RapidBoard.State.pushState()})}else{var a=E.clearAllFilters();if(a){GH.EpicView.deselectAllEpics(),GH.VersionView.deselectAllVersions();var t=n.updateFiltering();t&&o.updateHiddenIssues(),GH.RapidBoard.State.pushState()}}},F.updateEpicFiltering=function(e){var i=GH.EpicController.getFilteredEpicKey();E.setEpicFilter(i);var a=n.updateFiltering();a&&!e&&o.updateHiddenIssues()},F.updateVersionFiltering=function(e){var i=GH.VersionController.getFilteredVersionId();E.setVersionFilter(i);var a=n.updateFiltering();a&&!e&&o.updateHiddenIssues(),GH.EpicController.applyVersionFiltering()},F.calculateIssueRenderData=function(){var e=l.getSelectedIssueKeys(),i={};r.each(e,function(e){i[e]=!0});var a=l.getSelectedIssueKey(),t=n.getHiddenBySearchIssues();return{selectedIssueKeys:i,mainSelectedIssue:a,hiddenIssues:t}},F.extractPrintableIssuesFromAllSprints=function(){var e=[];return r.each(n.getSprintModels(),function(i){var a=i.getSprintData(),s=t(i.getIssueList().getAllIssues(),i.getIssueList().getVisibleRankables(),n.getHiddenBySearchIssues());r.isEmpty(s)||e.push({sprintId:a.id,sprintName:a.name,issues:s})}),e},F.getPrintableIssuesFromPlanBacklog=function(){var e=n.getBacklogModel2().getIssueList();return t(e.getAllIssues(),e.getVisibleRankables(),n.getHiddenBySearchIssues())},F.getEpicMap=function(){if(GH.EpicView.isbacklogDataV2Enabled()){var e=GH.EpicController.getEpicModel().getEpicList();return e?e.getAllIssues():null}return GH.EpicController.getEpicModel().getEpicList().getAllIssues()};var T=function(e,i){L("taskFail",e,i)},M=function(e){L("taskSuccess",e,null)},x=function(e){return void 0===e||null===e||429===e||e>=500},L=function(i,a,t){var r=GH.RapidViewConfig.currentData.data,s=e("jira/analytics/web-client");s.sendOperationalEvent({source:"ui",actionSubject:"ui",action:i,attributes:{task:a,analyticsSource:y.analyticsSource,application:y.application,edition:GH.Util.getEdition(y.application),taskId:r.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),isClassic:!0,statusCode:t}})};return F});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogStatistics.js' */
define("jira-agile/rapid/ui/plan/backlog-statistics",["require"],function(t){"use strict";var e=t("underscore"),a=t("jira-agile/rapid/global-events"),i=(t("jira/featureflags/feature-manager"),void 0);a.on("pre-initialization",function(){i=t("jira-agile/rapid/ui/plan/backlog-model")});var s={EXCLUDE_SUBTASKS_COLUMN_CONSTRAINT:"issueCountExclSubs"};return s.ignoredStatisticTypes={issueCount:!0,none:!0},s.getIssueListEstimateStatistics=function(t){var e=s._calculateSprintModelStatistics(t),a=i.estimationStatistic,n={};n.shown=a&&a.isEnabled&&!s.ignoredStatisticTypes[a.typeId]||!1,n.shown&&(n.name=a?a.name:"",n.total={raw:e.estimate.total,formatted:s.formatStatisticForRendering(a,e.estimate.total)},n.visible={raw:e.estimate.visible,formatted:s.formatStatisticForRendering(a,e.estimate.visible)});var r=i.trackingStatistic,l={};return l.shown=r&&r.isEnabled&&!s.ignoredStatisticTypes[a.typeId]&&(e.estimate.total!=e.tracking.total||e.estimate.visible!=e.tracking.visible)||!1,l.shown&&(l.name=r?r.name:"",l.total={raw:e.tracking.total,formatted:s.formatStatisticForRendering(r,e.tracking.total)},l.visible={raw:e.tracking.visible,formatted:s.formatStatisticForRendering(r,e.tracking.visible)}),{estimate:n,tracking:l}},s._calculateSprintModelStatistics=function(t){var a,i=t.getAllIssues(),s=0,n=0,r=0,l=0,o=0,u=0;return e.each(i,function(i){var c=t.isIssueVisible(i.key);e.isUndefined(i.estimateStatistic)||e.isUndefined(i.estimateStatistic.statFieldValue.value)||(a=i.estimateStatistic.statFieldValue.value,s+=a,c&&(n+=a)),e.isUndefined(i.trackingStatistic)||e.isUndefined(i.trackingStatistic.statFieldValue.value)||(a=i.trackingStatistic.statFieldValue.value,r+=a,c&&(l+=a)),o++,c&&u++}),{estimate:{total:s,visible:n},tracking:{total:r,visible:l},issueCount:{total:o,visible:u}}},s.formatStatisticForRendering=function(t,e){return"duration"==t.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e):GH.NumberFormat.format(e)},s.getAllIssuesBeforeIndex=function(t,e,a,i){var n=[];i=i||function(t){return!s._isRankableId(e[t])};for(var r=a-1;r>=0&&i(r);r--)n=[e[r]].concat(n);return s._mapIssueKeysToIssues(t,n)},s._isRankableId=function(t){return e.isNumber(t)},s._mapIssueKeysToIssues=function(t,a){var i=e.map(a,function(e){return t[e]});return e.filter(i,function(t){return!e.isUndefined(t)})},s.getIssueListStats=function(t,a,i){var n,r=t.getAllIssues(),l=e.keys(r).length,o=t.getNumVisibleIssues(),u=l>0;return n=a?i?s.getActiveSprintEmptyMessage(!u):s.getFutureSprintEmptyMessage(!u):s.getBacklogEmptyMessage(!u),{totalCount:l,visibleCount:o,allVisible:l===o,noneVisible:0===o,hasIssues:u,empty:!u,emptyMessage:n}},s.getBacklogEmptyMessage=function(t){return t?"Your backlog is empty.":"There are no issues that match your current filter."},s.getFutureSprintEmptyMessage=function(t){return t?GH.RapidBoard.State.isScrumBoard()?"Plan a sprint by dragging the sprint footer down below some issues, or by dragging issues here.":"There are no issues on the board.":GH.RapidBoard.State.isScrumBoard()?"There are no issues that match your current filter.":"There are no issues that match your current filter."},s.getActiveSprintEmptyMessage=function(t){return t?"There are no issues in this sprint.":"There are no issues that match your current filter."},s.calculateSprintProgress=function(t,a,i){var n=s._getTodoInProgressDoneMapping(a),r=[{nameKey:"gh.boards.notstarted",name:"Not Started",title:"",total:{value:0,text:"0"}},{nameKey:"gh.boards.inprog",name:"In Progress",title:"",total:{value:0,text:"0"}},{nameKey:"gh.boards.done",name:"Done",title:"",total:{value:0,text:"0"}}];e.each(t.getAllIssues(),function(t){var a=n[t.statusId];e.isUndefined(a)||t.hidden||t.estimateStatistic&&t.estimateStatistic.statFieldValue&&t.estimateStatistic.statFieldValue.value&&(r[a].total.value+=t.estimateStatistic.statFieldValue.value)});var l=e.reduce(r,function(t,e){return t+e.total.value},0);if(!l)return e.each(r,function(t){t.total.text=""}),r;var o=s.formatStatisticForRendering(i,l);return e.each(r,function(t){t.total.text=s.formatStatisticForRendering(i,t.total.value),t.title=GH.tpl.sprintview.renderProgressIndicatorTitle({indicator:t,allIndicatorsTotalText:o,statLabel:i.name})}),r},s._getTodoInProgressDoneMapping=function(t){for(var a={},i=function(t){a[t]=n},s=0;s<t.length;s++){var n,r=t[s],l=r.statusIds;n=0===s?0:s===t.length-1?2:1,e.each(l,i)}return a},s.splitIssuesIntoNotDoneAndDone=function(t,a){var i=s._getTodoInProgressDoneMapping(a),n=[],r=[];return e.each(t,function(t){var e=i[t.statusId];2==e?r.push(t):n.push(t)}),{notDone:n,done:r}},s.getAssignedWorkStats=function(t){function a(t,e){return{assignee:t,assigneeName:e,totalEstimate:0,totalTrackingEstimate:0,issues:[]}}function n(t){t.totalEstimateText=s.formatStatisticForRendering(i.estimationStatistic,t.totalEstimate),i.trackingStatistic.isEnabled&&(t.totalTrackingEstimateText=s.formatStatisticForRendering(i.trackingStatistic,t.totalTrackingEstimate))}var r=t.getVisibleIssues(),l=e.reduce(r,function(t,e){var i,s=e.assignee;s?(t.assignees[s]||(t.assignees[s]=a(s,e.assigneeName)),i=t.assignees[s]):i=t.unassigned,i.issues.push(e),t.all.issues.push(e);var n=e.estimateStatistic&&e.estimateStatistic.statFieldValue&&e.estimateStatistic.statFieldValue.value;n&&(i.totalEstimate+=n,t.all.totalEstimate+=n);var r=e.trackingStatistic&&e.trackingStatistic.statFieldValue&&e.trackingStatistic.statFieldValue.value;return r&&(i.totalTrackingEstimate+=r,t.all.totalTrackingEstimate+=r),t},{unassigned:a(null,null),assignees:{},all:a(null,null)}),o=e.toArray(l.assignees).sort(function(t,e){return e.totalEstimate-t.totalEstimate||t.assigneeName.localeCompare(e.assigneeName)}),u=i.estimationStatistic;return s.ignoredStatisticTypes[u.typeId]||(e.each(o,n),n(l.unassigned),n(l.all)),{unassigned:l.unassigned,assigned:o,all:l.all}},s.calculateStatisticsFieldValue=function(t,e){return e.typeId===s.EXCLUDE_SUBTASKS_COLUMN_CONSTRAINT?t.getIssuesExcludingSubtasks().length:t.getIssueCount()},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintBacklogController.js' */
define("jira-agile/rapid/ui/plan/sprint-backlog-controller",["require"],function(i){"use strict";var r=i("jira-agile/rapid/ui/plan/sprint-backlog-view"),n={};return n.init=function(){r.init()},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanModeUtil.js' */
function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,s){for(var t=0;t<s.length;t++){var a=s[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(s,t,a){return t&&e(s.prototype,t),a&&e(s,a),s}}();define("jira-agile/rapid/ui/plan/plan-mode-util",["underscore"],function(e){var s=function(){function s(e){_classCallCheck(this,s),this.issueList=[],this.capacity=e,this.numIssues=0}return _createClass(s,[{key:"getSubtaskCount",value:function(e){return e.subTasks?e.subTasks.length:0}},{key:"getParentLength",value:function(e){return e.fakeParent?0:1}},{key:"getIssueSize",value:function(e){return this.getParentLength(e)+this.getSubtaskCount(e)}},{key:"hasCapacity",value:function(){return this.numIssues<this.capacity}},{key:"willExceedCapacity",value:function(e){return!this.hasCapacity()||this.numIssues+this.getIssueSize(e)>this.capacity}},{key:"sliceIssue",value:function(s){var t=e.extend({},s);return t.subTasks&&(t.subTasks=e.extend([],t.subTasks),t.subTasks=t.subTasks.slice(0,this.capacity-(this.numIssues+this.getParentLength(t)))),t}},{key:"reverseSliceIssue",value:function(s){var t=e.extend({},s);return t.subTasks&&(t.subTasks=e.extend([],t.subTasks),t.subTasks=t.subTasks.slice(t.subTasks.length-(this.capacity-this.numIssues))),t.fakeParent=!0,t}},{key:"add",value:function(e){this.willExceedCapacity(e)||(this.issueList.push(e),this.numIssues+=this.getIssueSize(e))}},{key:"issues",get:function(){return this.issueList}}]),s}(),t={};return t.getIssuesListHead=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new s(t),n=0;e[n]&&!a.willExceedCapacity(e[n]);)a.add(e[n]),n++;if(e[n]&&a.hasCapacity()){var u=a.sliceIssue(e[n]);a.add(u)}return a.issues},t.getIssuesListTail=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=new s(t),n=e.length-1;e[n]&&!a.willExceedCapacity(e[n]);)a.add(e[n]),n--;if(e[n]&&a.hasCapacity()){var u=a.reverseSliceIssue(e[n]);a.add(u)}return a.issues.reverse()},t.getVisibleIssues=function(e,s){return e.map(function(e){var t=e.subTasks&&e.subTasks.length,a=s[e.key],n=a&&t,u=e.fakeParent&&!t;return t&&(e.subTasks=e.subTasks.filter(function(e){return!s[e.key]})),n?(e.fakeParent=!0,e):a||u?null:e}).filter(function(e){return!!e})},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintBacklogView.js' */
define("jira-agile/rapid/ui/plan/sprint-backlog-view",["require","jquery","underscore","jira-agile/rapid/global-events","jira-agile/rapid/ui/plan/sprint-controller","jira-agile/rapid/ui/plan/backlog-model","jira-agile/rapid/ui/plan/backlog-statistics","jira-agile/rapid/ui/plan/plan-controller","jira-agile/rapid/ui/plan/plan-mode-util","jira-agile/rapid/ui/plan/plan-view","jira-agile/rapid/ui/plan/plan-drag-and-drop","jira-agile/browser-metrics/browser-metrics-util","jira/analytics/web-client"],function(e,i,t,a,n,l,s,o,r,c,u,d,g){"use strict";function p(e,i,t,a,n,l){var s=e.excludeSubtasks,c=e.statisticsFieldVisible,u=e.visibleCount,d=s?c:u;l=l||o.getBacklogIssuesLimitConfig();var g=r.getVisibleIssues(i,a);if(S(g,n,d,l),f.VS_SHOW_ALL_CLICKED||!w(d,l))return g;var p=r.getIssuesListHead(g,l-o.VS_BACKLOG_TAIL_LENGTH),h=r.getIssuesListTail(g,o.VS_BACKLOG_TAIL_LENGTH),k={showMore:!0,issuesNotShown:d-l};return p.concat(k).concat(h)}function S(e,i,t,a){if(i&&w(t,a)&&!I&&C){f.setFirstView(!1);var n=e.findIndex(function(e){return e.key===i});n>a-o.VS_BACKLOG_TAIL_LENGTH&&n<t-o.VS_BACKLOG_TAIL_LENGTH&&f.setShowAllClicked(!0)}}function h(){i(".js-add-sprint").tooltip({html:!0,title:"data-tooltip"})}var k;a.on("pre-initialization",function(){k=e("jira-agile/rapid/ui/plan/backlog-controller")});var f={},I=!1,C=!0;f.containerSelector=".ghx-backlog-group",f.init=function(){f.setShowAllClicked(!1),i(document).on("click",".js-add-sprint",n.addSprint)},f.renderBacklog=function(e,t){var a=L(e,t),n=i(".ghx-backlog-group");n.html(i(a)),h(),f.onAttached()},f.updateBacklog=function(e){var i=k.calculateIssueRenderData();f.renderBacklog(i,e)},f.updateBacklogHeader=function(){i(".js-marker-backlog-header").replaceWith(b()),h()},f.onAttached=function(){f.attachVerticalSplitEventHandlers()},f.attachVerticalSplitEventHandlers=function(){var e=i(".js-show-all-link");e.off("click",f.onInlineVerticalSplitShowAllClicked),e.on("click",f.onInlineVerticalSplitShowAllClicked);var t=i("aui-section#gh-show-more-config-dropdown-section");t.off("change",f.onVerticalSplitConfigChanged),t.on("change",f.onVerticalSplitConfigChanged)},f.onInlineVerticalSplitShowAllClicked=function(e){e.preventDefault(),f.handleVerticalSplitShowAllClick()},f.onVerticalSplitConfigChanged=function(e){if(e.preventDefault(),e.target.hasAttribute("checked")){var t=i(e.target).data("issues");t!==o.getBacklogIssuesLimitConfig()&&f.handleVerticalSplitConfigChange(t)}},f.handleVerticalSplitShowAllClick=function(){f.sendInlineVerticalSplitClickEvent(),f.showIssues(o.VS_SHOW_ALL_ISSUES,!0)},f.handleVerticalSplitConfigChange=function(e){f.setIssueLimit(e),f.sendVerticalSplitConfigurationChangeEvent(e),f.setShowAllClicked(!1),f.showIssues(e)},f.setIssueLimit=function(e){o.setBacklogIssuesLimitConfig(e),GH.RapidBoard.State.pushState()},f.showIssues=function(e,i){i&&d.triggerBefore("before:vsShowAllClicked","vsShowAllClicked"),c.showLoadingBacklog(),setTimeout(function(){f.updateBacklog(e),i&&f.setShowAllClicked(!0),u.enableDragAndDrop(),c.hideLoadingBacklog(),i&&d.triggerAfter("after:vsShowAllClicked","vsShowAllClicked")})},f.sendInlineVerticalSplitClickEvent=function(){g.sendUIEvent({source:"backlogScreen",actionSubject:"verticalSplit",actionSubjectId:"verticalSplitShow."+o.VS_SHOW_ALL_ISSUES+".inline",action:"click"})},f.sendVerticalSplitConfigurationChangeEvent=function(e){g.sendUIEvent({source:"backlogScreen",actionSubject:"verticalSplit",actionSubjectId:"verticalSplitShow."+e,action:"click"})},f.setShowAllClicked=function(e){f.VS_SHOW_ALL_CLICKED=e},f.setFirstView=function(e){C=e};var L=function(e,i){var t=l.getBacklogModel2(),a=t.getIssueList(),n=s.getIssueListStats(a,!1),r=a.getVisibleRankables(),c=a.getAllIssues(),u=GH.IssueListUtil.issueListToTree(r.map(function(e){return c[e]}));GH.IssueListUtil.applyExpandedState(u,GH.RapidBoard.State.getExpandedIssueKeys());var d={issueKeys:r,issues:u,issueListStats:n,epics:GH.EpicView.isbacklogDataV2Enabled()?k.getEpicMap():GH.EpicController.getEpicModel().getEpicList().getAllIssues(),issueRenderData:e,statLabel:l.estimationStatistic.name,estimationEnabled:l.estimationStatistic.isEnabled,isRankable:l.isRankable(),canManageSprints:l.canManageSprints(),complexQuery:l.complexQuery(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),shouldDisplayCreateSprintButton:GH.RapidBoard.State.isScrumBoard(),extraClasses:GH.RapidBoard.State.isKanbanBoard()?"ghx-kanban-backlog":void 0,isAgility:GH.RapidBoard.State.isAgilityBoard(),shouldDisplayShowMoreConfigButton:!0,showMoreOptions:o.getShowMoreOptionItems(),isbacklogDataV2Enabled:GH.EpicView.isbacklogDataV2Enabled()};return i=i||o.getBacklogIssuesLimitConfig(),o.isValidIssueLimit(i)||(i=o.VS_DEFAULT_ISSUE_LIMIT,f.setIssueLimit(i)),d.issues=p(n,u,r,e.hiddenIssues,e.mainSelectedIssue,i),GH.tpl.sprintbacklogview.renderBacklogIssues(d)},w=function(e,i){return i!==o.VS_SHOW_ALL_ISSUES&&i<e},b=function(){var e=l.getBacklogModel2(),i=e.getIssueList(),t=s.getIssueListStats(i,!1),a={issueListStats:t,canManageSprints:l.canManageSprints(),complexQuery:l.complexQuery(),shouldDisplayCreateSprintButton:GH.RapidBoard.State.isScrumBoard(),showMoreOptions:o.getShowMoreOptionItems(),shouldDisplayShowMoreConfigButton:!0};return GH.tpl.sprintbacklogview.renderBacklogHeader(a)};return f});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintBacklogView.soy' */
// This file was automatically generated from SprintBacklogView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintbacklogview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintbacklogview == 'undefined') { GH.tpl.sprintbacklogview = {}; }


GH.tpl.sprintbacklogview.renderBacklogIssues = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-error-group" ></div><div class="ghx-onboarding-fillyourbacklog-group"></div><div class="ghx-backlog-container ghx-open ghx-everything-else' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + GH.tpl.sprintbacklogview.renderBacklogHeader(opt_data) + '<div class="js-issue-list ghx-issues' + ((opt_data.issueListStats.noneVisible) ? ' ghx-no-issues' + ((opt_data.issueListStats.empty) ? ' js-empty-list' : '') : ' ghx-has-issues') + '"><div class="ghx-plan-dropzone"></div>' + GH.tpl.planissuelist.renderIssueList(opt_data) + '<div class="ghx-helper"><div class="ghx-description">' + soy.$$escapeHtml(opt_data.issueListStats.emptyMessage) + '</div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderBacklogIssues.soyTemplateName = 'GH.tpl.sprintbacklogview.renderBacklogIssues';
}


GH.tpl.sprintbacklogview.renderBacklogHeader = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-backlog-header js-marker-backlog-header"><div class="header-left"><div class="ghx-expander"></div><div class="ghx-name">' + soy.$$escapeHtml('Backlog') + '</div>' + GH.tpl.planissuelist.renderIssueCount(opt_data) + '</div><div class="header-right"><div class="ghx-controls aui-group"><div class="aui-item">' + ((opt_data.shouldDisplayCreateSprintButton) ? '<button class="js-add-sprint aui-button ' + ((! opt_data.canManageSprints) ? ' disabled' : '') + '"' + ((! opt_data.canManageSprints) ? ((opt_data.complexQuery) ? 'data-tooltip="' + soy.$$escapeHtml('Only a Jira administrator can update this sprint. Try selecting a project in your current board filter.') + '"' : 'data-tooltip="' + soy.$$escapeHtml('You need the Manage sprints permission for all projects in the origin board to create a sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e') + '"') + 'aria-disabled="true"' : 'data-tooltip=""') + '>' + soy.$$escapeHtml('Create sprint') + '</button>' : '');
  if (opt_data.shouldDisplayShowMoreConfigButton) {
    output += '<button class="aui-button aui-dropdown2-trigger aui-dropdown2-trigger-arrowless" aria-controls="gh-show-more-config-dropdown"><span class="aui-icon ghx-iconfont aui-icon-small aui-iconfont-more white-text-on-hover"></span></button><aui-dropdown-menu id="gh-show-more-config-dropdown"><aui-section id="gh-show-more-config-dropdown-section" label="' + soy.$$escapeHtml('Always show') + '">';
    var optionList67 = opt_data.showMoreOptions;
    var optionListLen67 = optionList67.length;
    for (var optionIndex67 = 0; optionIndex67 < optionListLen67; optionIndex67++) {
      var optionData67 = optionList67[optionIndex67];
      output += '<aui-item-radio ' + soy.$$escapeHtml(optionData67.checked ? 'checked' : '') + ' data-issues="' + soy.$$escapeHtml(optionData67.value) + '">' + soy.$$escapeHtml(optionData67.label) + '</aui-item-radio>';
    }
    output += '</aui-section></aui-dropdown-menu>';
  }
  output += '</div></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderBacklogHeader.soyTemplateName = 'GH.tpl.sprintbacklogview.renderBacklogHeader';
}


GH.tpl.sprintbacklogview.renderShowAllContainer = function(opt_data, opt_ignored) {
  return '<div class="ghx-issue-show-all-container"><div class="ghx-row"><div class="ghx-center"><div class="ghx-show-all">' + GH.tpl.sprintbacklogview.renderShowAllContent(opt_data) + '</div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderShowAllContainer.soyTemplateName = 'GH.tpl.sprintbacklogview.renderShowAllContainer';
}


GH.tpl.sprintbacklogview.renderShowAllContent = function(opt_data, opt_ignored) {
  return '<a href="#" title="' + soy.$$escapeHtml('Show all') + '" data-issues-not-shown="' + soy.$$escapeHtml(opt_data.issuesNotShown) + '" class="js-show-all-link">' + soy.$$escapeHtml(AJS.format('Show all issues ({0})',opt_data.issuesNotShown)) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.sprintbacklogview.renderShowAllContent.soyTemplateName = 'GH.tpl.sprintbacklogview.renderShowAllContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanIssueListView.js' */
define("jira-agile/rapid/ui/plan/plan-issue-list-view",["require"],function(e){"use strict";function t(){return Array.prototype.join.call(arguments,", ")}var n=e("jquery"),s=e("jira-agile/rapid/ui/plan/backlog-model"),a="issue-key",r="fake-parent-issue-key",i=".js-issue",l=".ghx-marker",u=".ghx-parent-group",d="ghx-subtask",o={};return o.findPreviousVisibleIssueElementInList=function(e){var t=e.prevAll().filter(i).not(":hidden");return t.length?t:null},o.findPrevRankableElement=function(e){var n=e.prevAll().filter(t(l,i,u)).not(":hidden");return n.length&&this.getRankableId(e)===this.getRankableId(n)&&(n=n.prev()),n},o.findNextRankableElement=function(e){var n=e.nextAll().filter(t(l,i,u)).not(":hidden");return n.length&&this.getRankableId(e)===this.getRankableId(n)&&(n=n.next()),n},o.getIssueKey=function(e){return o.getClosestIssueElement(e).data(a)},o.getIssueId=function(e){return o.getClosestIssueElement(e).data(a)},o.isSubtask=function(e){return o.getClosestIssueElement(e).hasClass(d)},o.getRankableId=function(e){if(!e)return!1;var t=e.data(r)||e.data(a);if(!t){var n=o.getClosestIssueElement(e);if(n.length>0)return n.data(a)}return t},o.getIssueByKey=function(e){return n(".js-issue[data-issue-key="+e+"]")},o.toggleExpandState=function(e){_.isString(e)&&(e=o.getIssueByKey(e));var t="ghx-subtasks-expanded",n=e.parents(u),s=o.getIssueKey(e);n.toggleClass(t);var a=n.hasClass(t);return a?GH.RapidBoard.State.addIssueKeyToExpanded(s):GH.RapidBoard.State.removeIssueKeyFromExpanded(s),a},o.expandAllAfterTransition=function(e){e.forEach(function(e){if(s.isParentAndCollapsed(e))o.toggleExpandState(e);else if(s.isSubtask(e)){var t=s.getIssueData(e).parentKey;s.isParentAndCollapsed(t)&&o.toggleExpandState(t)}})},o.getClosestIssueElement=function(e){return e.closest(i)},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanIssueListFiltering.js' */
define("jira-agile/rapid/ui/plan/plan-issue-list-filtering",["require"],function(e){"use strict";var i=e("underscore"),n={};return n.EPIC_FILTER_KEY_NONE="none",n.VERSION_FILTER_ID_NONE="none",n.allFilters={},n.isNoneEpicFilterKey=function(e){return e===n.EPIC_FILTER_KEY_NONE},n.isNoneVersionFilterId=function(e){return e===n.VERSION_FILTER_ID_NONE},n.setFilter=function(e,i){i?n.allFilters[e]=i:delete n.allFilters[e]},n.clearAllFilters=function(){var e=!i.isEmpty(i.keys(n.allFilters));return n.allFilters={},e},n._getCompoundFilter=function(){return function(e){var t=i.any(n.allFilters,function(i){return!i(e)});return!t}},n.setEpicFilter=function(e){var t=null;return n.isNoneEpicFilterKey(e)?t=function(e){return i.isEmpty(e.epic)}:(!GH.EpicView.isbacklogDataV2Enabled()&&n.isEpicIssueSelectable(e)||GH.EpicView.isbacklogDataV2Enabled()&&e)&&(t=function(i){return i.epic===e}),n.setFilter("epics",t)},n.isEpicIssueSelectable=function(e){var i=GH.EpicController.getEpicModel().getEpicList();return i.isIssueValid(e)&&i.isIssueVisible(e)},n.setVersionFilter=function(e){var t=null;return n.isNoneVersionFilterId(e)?t=function(e){return i.isEmpty(e.fixVersions)}:n.isVersionSelectable(e)&&(t=function(n){return i.some(n.fixVersions,function(i){return i===parseInt(e,10)})}),n.setFilter("versions",t)},n.isVersionSelectable=function(e){return null!=e},n.setInstantFilter=function(e){n.setFilter("instant",e)},n.applyToIssueLists=function(e){var t=n._getCompoundFilter(),r=!1;return i.each(e,function(e){var i=e.applySearchFilter(t);r=r||i}),r},n.applyToIssueList=function(e){n.applyToIssueLists([e])},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/version/VersionView.js' */
!function(){"use strict";var e=require("jira/ajs/dropdown/dropdown"),i=(GH.TimeFormat,require("jira/featureflags/feature-manager")),t=require("jira-agile/browser-metrics/browser-metrics-util"),n=require("jira-agile/rapid/deferred-resources-loader"),r=function(){return i.isFeatureEnabled("jsw.classic.keto")};GH.VersionView={},GH.VersionView.dropdowns=[],GH.VersionView.init=function(){GH.VersionView.initializeInlineEdits()},GH.VersionView.shouldHidePanels=function(){return GH.RapidBoard.State.isAgilityBoard()},GH.VersionView.getContainer=function(e){return(e||_.isUndefined(GH.VersionView.container))&&(GH.VersionView.container=AJS.$("#ghx-version-column")),GH.VersionView.container},GH.VersionView.show=function(){if(!GH.VersionView.shouldHidePanels()){var e=GH.VersionController.getVersionModel(),i=GH.VersionView.getContainer(!0);i.html(GH.tpl.versionview.renderSkeleton({canCreateVersion:e.canUserCreateVersion()}));var t=i.find(".ghx-classification-scrollview");t.delegate(".ghx-classification-item","click",function(e){AJS.$(e.target).closest(".js-version-details-link, .js-version-actions, .js-editable-field, .js-editing-field, .aui-iconfont-calendar, input.text").not(".js-edit-versionName-trigger").length>0||GH.VersionView.toggleFiltering(AJS.$(this))}),t.delegate(".js-version-details-toggle","click",function(e){return GH.VersionView.toggleVersionDisplay(AJS.$(this)),!1}),t.delegate(".js-version-name","click",function(e){e.preventDefault()}),t.delegate(".js-try-again","click",function(e){GH.BacklogController.updateVersionData()}),GH.EpicView.isbacklogDataV2Enabled()||GH.VersionView.renderVersions(),GH.VersionController.registerCreateVersionDialog(),n.handleDeferredResourceImport(r()&&!GH.VersionQuickCreate,function(){GH.VersionQuickCreate.setAccessibleProjects(e.projects)})}},GH.VersionView.renderError=function(){var e=GH.VersionController.getFilteredVersionId();GH.VersionView.getContainer().find(".ghx-classification-scrollview").html(GH.tpl.versionview.renderError({isNoneSelected:GH.PlanIssueListFiltering.isNoneVersionFilterId(e),isAllSelected:!e}))},GH.VersionView.updateView=function(){GH.VersionView.renderVersions(),GH.PlanDragAndDrop.initializeClassificationDnD()},GH.VersionView.renderVersions=function(){var i=GH.VersionController.getVersionModel();if(!_.isUndefined(i)&&i.isValid()){var t={},n=GH.VersionController.getFilteredVersionId(),r=i.getUnreleasedVersionList();_.each(r,function(e){t[e.id]="open"==GH.VersionView.getTwixieState(e.id),e.versionStats.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.versionStats.doneEstimate),e.versionStats.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.versionStats.totalEstimate),e.versionStats.isIssueCountStatistic="issueCount"===GH.BacklogModel.estimationStatistic.typeId,e.versionStats.estimateStatisticName=GH.BacklogModel.estimationStatistic.name}),GH.VersionView.getContainer().find(".ghx-classification-scrollview").html(GH.tpl.versionview.renderVersions({versions:r,isNoneSelected:GH.PlanIssueListFiltering.isNoneVersionFilterId(n),isAllSelected:!n,selectedVersionId:n,isVersionExpandedById:t,canEditVersions:i.canUserCreateVersion(),showProjects:i.hasMultiProjects(),showEstimates:GH.RapidBoard.State.isScrumBoard()})),AJS.$(".js-version-actions").each(function(){var i=this,t="#"+AJS.$(i).attr("id").replace(/^dd-trigger-/,"dd-content-"),n=AJS.$(t),r=e.create({trigger:i,content:n,alignment:AJS.LEFT});AJS.$(r).bind("showLayer",function(){GH.RapidBoard.Util.InlineEditable.submitActiveEdits()}),GH.VersionView.dropdowns.push(r[0])})}},GH.VersionView.toggleFiltering=function(e){i.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&t.triggerBefore("before:backlogVersionFilter","backlogVersionFilter"),GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),GH.VersionView.deselectAllVersions();var n,r=e.attr("data-version-id");GH.VersionController.getFilteredVersionId()===r?n=null:(n=r,AJS.$("#ghx-version-column").find(".ghx-classification-all").removeClass("ghx-selected"),e.addClass("ghx-selected")),GH.VersionController.setFilteredVersionId(n),GH.RapidBoard.State.pushState(),GH.BacklogController.updateVersionFiltering(!1),i.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&t.triggerAfter("after:backlogVersionFilter","backlogVersionFilter")},GH.VersionView.deselectAllVersions=function(){var e=AJS.$("#ghx-version-column"),i=e.find(".ghx-classification-item");i.removeClass("ghx-selected"),e.find(".ghx-classification-all").addClass("ghx-selected")},GH.VersionView.setTwixieState=function(e,i){var t="versionTwix-"+e;GH.BoardState.setPerViewValue(t,i)},GH.VersionView.getTwixieState=function(e){var i="versionTwix-"+e;return GH.BoardState.getPerViewValue(i,"closed")},GH.VersionView.toggleVersionDisplay=function(e){var i=e.parents(".ghx-classification-item");GH.VersionView.toggleVersionDisplayByElementWithAnimation(i)},GH.VersionView.toggleVersionDisplayByElement=function(e){var i=e.attr("data-version-id");e.hasClass("ghx-open")?(e.removeClass("ghx-open").addClass("ghx-closed"),GH.VersionView.setTwixieState(i,"closed")):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.VersionView.setTwixieState(i,"open"))},GH.VersionView.toggleVersionDisplayByElementWithAnimation=function(e){var i=e.attr("data-version-id"),t=e.find(".ghx-expanded");e.hasClass("ghx-open")?GH.RapidBoard.Animation.animateHeight(t,195,0).done(function(){e.removeClass("ghx-open").addClass("ghx-closed"),GH.VersionView.setTwixieState(i,"closed")}):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.RapidBoard.Animation.animateHeight(t,0,195).done(function(){GH.VersionView.setTwixieState(i,"open")}))},GH.VersionView.hideDropdown=function(){_.each(GH.VersionView.dropdowns,function(e){e.hide()})},GH.VersionView.initializeInlineEdits=function(){GH.RapidBoard.Util.InlineEditable.register(".js-edit-version-name",{renderView:GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView,preEdit:GH.RapidBoard.Util.InlineEditable.cancelActiveEdits,getViewElement:function(e){var i=AJS.$(this).parents(".js-version-actions-list").attr("data-version-id");return AJS.$('.ghx-classification-item[data-version-id="'+i+'"]').find(".js-edit-versionName-trigger")},getData:function(e){var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return i.versionId=e.parents(".ghx-classification-item").attr("data-version-id"),GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),AJS.$(e).closest(".ghx-header").addClass("ghx-editing-name"),i.maxLength=30,i},validate:function(e){var i=e.editElement.val();return!!GH.Validation.notBlank(e.editElement,"Version Name is required")&&(e.newValue=i,!0)},save:function(e){GH.VersionView.updateVersion(e.versionId,{name:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})},postEdit:function(e){i.isFeatureEnabled("jsw.classic.backlog.drag-and-drop-version-edit")&&require("jira-agile/rapid/ui/plan/plan-drag-and-drop").enableDragAndDrop(),AJS.$(e.viewElement).closest(".ghx-header").removeClass("ghx-editing-name")}});var e={getData:function(e){GH.RapidBoard.Util.InlineEditable.cancelActiveEdits();var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return i.versionId=e.parents(".ghx-classification-item").attr("data-version-id"),i}};GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-description-trigger",_.extend({},e,{save:function(e){GH.VersionView.updateVersion(e.versionId,{description:e.newValue}),GH.RapidBoard.Util.InlineEditable.updateView(e)}}));var t=_.extend({},e,{renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:function(e){GH.RapidBoard.Util.InlineEditable.datePickerActivate(e,{ifFormat:GH.TimeFormat.dateFormat,showsTime:!1})},validate:function(e){return e.newValue=e.editElement.find("input").val(),!0},postEdit:function(e){AJS.$(e.viewElement).closest(".js-version-date").siblings(".ghx-error").remove()}});GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-startDateFormatted-trigger",_.extend({},t,{save:function(e){GH.VersionView.updateVersion(e.versionId,{startDateFormatted:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})}})),GH.RapidBoard.Util.InlineEditable.register("#ghx-version-column .js-edit-releaseDateFormatted-trigger",_.extend({},t,{save:function(e){GH.VersionView.updateVersion(e.versionId,{releaseDateFormatted:e.newValue}).done(function(){GH.RapidBoard.Util.InlineEditable.updateView(e)})}}))},GH.VersionView.updateVersion=function(e,i){var t='.ghx-classification-item[data-version-id="'+e+'"]';return GH.VersionController.updateVersion(e,i,{name:t+" .js-version-name",description:t+" .js-version-description",startDate:t+" .js-version-start-date",releaseDate:t+" .js-version-release-date"},function(){AJS.$(t+" .ghx-error").empty()})},GH.VersionView.renderNewVersions=function(e){var i=AJS.$("#ghx-version-column");_.each(e,function(e){var t=i.find('.ghx-classification-item[data-version-id="'+e.id+'"]');t.hasClass("ghx-open")||GH.VersionView.toggleVersionDisplayByElement(t),GH.RapidBoard.Animation.animateHeight(t,0,251,GH.RapidBoard.Animation.LONG_DURATION)})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/version/VersionView.soy' */
// This file was automatically generated from VersionView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.versionview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.versionview == 'undefined') { GH.tpl.versionview = {}; }


GH.tpl.versionview.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-group"><div class="ghx-classification-header"><div class="ghx-actions">' + ((opt_data.canCreateVersion) ? aui.buttons.button({extraClasses: ['aui-button-link', 'js-create-version'], text: 'Create version'}) + '<span class="ghx-divider">|</span>' : '') + '<div class="ghx-close js-release-toggle" title="' + soy.$$escapeHtml('Hide versions panel') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove-label"></span></div></div><h2>' + soy.$$escapeHtml('Versions') + '</h2></div><div class="ghx-progress-indicator ghx-initial"></div><div class="ghx-classification-scrollview"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderSkeleton.soyTemplateName = 'GH.tpl.versionview.renderSkeleton';
}


GH.tpl.versionview.renderVersions = function(opt_data, opt_ignored) {
  var output = GH.tpl.versionview.renderAllVersions(opt_data) + '<div class="ghx-classification-cards">';
  var versionList19 = opt_data.versions;
  var versionListLen19 = versionList19.length;
  for (var versionIndex19 = 0; versionIndex19 < versionListLen19; versionIndex19++) {
    var versionData19 = versionList19[versionIndex19];
    output += GH.tpl.versionview.renderVersion({version: versionData19, isSelected: opt_data.selectedVersionId == versionData19.id, isVersionExpanded: opt_data.isVersionExpandedById[versionData19.id], canEditVersions: opt_data.canEditVersions, showProjects: opt_data.showProjects, showEstimates: opt_data.showEstimates});
  }
  output += '</div>' + ((opt_data.versions.length > 0) ? GH.tpl.versionview.renderVersionPending(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersions.soyTemplateName = 'GH.tpl.versionview.renderVersions';
}


GH.tpl.versionview.renderVersion = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item' + ((opt_data.isVersionExpanded) ? ' ghx-open' : ' ghx-closed') + ((! opt_data.canEditVersions) ? ' ghx-read-only' : '') + ((opt_data.isSelected) ? ' ghx-selected' : '') + '" data-version-id="' + soy.$$escapeHtml(opt_data.version.id) + '"><div class="ghx-inner"><div class="ghx-expander js-version-details-toggle" title="' + soy.$$escapeHtml('Hide/show version information') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName: 'versionName', fieldValue: opt_data.version.name, displayValue: opt_data.version.name}) + '</span>' + ((opt_data.version.project && opt_data.showProjects) ? '<span class="ghx-project-key" title="' + soy.$$escapeHtml(opt_data.version.project.name) + '">' + soy.$$escapeHtml(opt_data.version.project.key) + '</span>' : '') + ((opt_data.canEditVersions) ? '<span id="dd-trigger-' + soy.$$escapeHtml(opt_data.version.id) + '" class="ghx-swatch js-version-actions"></span>' : '') + '</h3><div id="dd-content-' + soy.$$escapeHtml(opt_data.version.id) + '" class="aui-list ghx-href-fix-list js-version-actions-list" data-version-id="' + soy.$$escapeHtml(opt_data.version.id) + '"><ul class="aui-list-section aui-last">' + ((opt_data.canEditVersions) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-edit-version-name">' + soy.$$escapeHtml('Edit name') + '</a></li>' : '') + '</ul></div></div><div class="ghx-expanded"><div class="ghx-summary js-version-description">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'description', fieldValue: opt_data.version.description, displayValue: opt_data.version.description, maxDisplayLength: 200, defaultValue: 'No description'}) + '</div>' + ((opt_data.version.project) ? '<div><a class="js-version-details-link" href="' + soy.$$escapeHtml("") + '/browse/' + soy.$$escapeHtml(opt_data.version.project.key) + '/fixforversion/' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml('Details') + '</a></div><hr />' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Start Date') + '</div><div class="aui-item ghx-version-date js-version-date js-version-start-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'startDateFormatted', fieldValue: opt_data.version.startDateFormatted, displayValue: opt_data.version.startDateFormatted, defaultValue: 'None'}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Release date') + '</div><div class="aui-item ghx-version-date js-version-date js-version-release-date">' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canEditVersions, fieldName: 'releaseDateFormatted', fieldValue: opt_data.version.releaseDateFormatted, displayValue: opt_data.version.releaseDateFormatted, defaultValue: 'None'}) + '</div></div><div class="aui-group js-version-issues-count"><div class="aui-item">' + soy.$$escapeHtml('Issues') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.totalIssueCount}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Completed') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.done}) + '</div></div>' + ((opt_data.showEstimates) ? ((! opt_data.version.versionStats.isIssueCountStatistic) ? '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Unestimated') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.version.versionStats.notEstimated}) + '</div></div>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Estimate') + '</div><div class="aui-item">' + aui.badges.badge({extraAttributes: {title: opt_data.version.versionStats.estimateStatisticName}, text: opt_data.version.versionStats.estimateTotal}) + '</div></div>' : '') + '</div><div class="ghx-subheader"><ul class="ghx-classification-progress" title="' + soy.$$escapeHtml(AJS.format('{0} ({1} {2} {3} {4})',AJS.format('{0}% of {1} done',opt_data.version.versionStats.percentageCompleted,opt_data.version.versionStats.isIssueCountStatistic ? 'issues' : 'estimated work'),opt_data.version.versionStats.estimateDone,'of',opt_data.version.versionStats.estimateTotal,opt_data.version.versionStats.isIssueCountStatistic ? '' : opt_data.version.versionStats.estimateStatisticName)) + '" ><li class="ghx-implemented" style="width:' + soy.$$escapeHtml(opt_data.version.versionStats.percentageCompleted) + '%;"></li></ul></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersion.soyTemplateName = 'GH.tpl.versionview.renderVersion';
}


GH.tpl.versionview.renderAllVersions = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-all' + ((opt_data.isAllSelected) ? ' ghx-selected' : '') + '"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + soy.$$escapeHtml('All issues') + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderAllVersions.soyTemplateName = 'GH.tpl.versionview.renderAllVersions';
}


GH.tpl.versionview.renderVersionPending = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-pending' + ((opt_data.isNoneSelected) ? ' ghx-selected' : '') + '" data-version-id="none"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-version-name" role="button">' + soy.$$escapeHtml('Issues without versions') + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderVersionPending.soyTemplateName = 'GH.tpl.versionview.renderVersionPending';
}


GH.tpl.versionview.renderDontAskAgain = function(opt_data, opt_ignored) {
  return '<div class="ghx-dialog-tip"><input id="ghx-dont-ask-for-confirmation" type="checkbox" name="dontask"><label for="ghx-dont-ask-for-confirmation" type="checkbox" checked=false><span class="checkbox-label">Don\u2019t show again</span></label></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderDontAskAgain.soyTemplateName = 'GH.tpl.versionview.renderDontAskAgain';
}


GH.tpl.versionview.renderQuickCreateView = function(opt_data, opt_ignored) {
  var output = '<form class="aui"><fieldset><div class="field-group"><label for="projects">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required"></span></label><select id="ghx-version-project" class="hidden">';
  var projectList171 = opt_data.projects;
  var projectListLen171 = projectList171.length;
  for (var projectIndex171 = 0; projectIndex171 < projectListLen171; projectIndex171++) {
    var projectData171 = projectList171[projectIndex171];
    output += '<option value="' + soy.$$escapeHtml(projectData171.id) + '">' + soy.$$escapeHtml(projectData171.name) + '</option>';
  }
  output += '</select><div class="ghx-error"></div></div><div class="field-group"><label for="ghx-version-name">' + soy.$$escapeHtml('Name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-version-name"><div class="ghx-error"></div></div><div class="field-group"><label for="ghx-version-description">' + soy.$$escapeHtml('Description') + '</label><input class="text" type="text" maxlength="130" id="ghx-version-description"></div><div class="field-group"><label for="ghx-version-start-date">' + soy.$$escapeHtml('Start Date') + '</label><input id="ghx-version-start-date" class="text medium-field" type="text"><span id="ghx-version-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit Start Date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-version-start-date-error"></span></div><div class="field-group"><label for="ghx-version-release-date">' + soy.$$escapeHtml('Release date') + '</label><input id="ghx-version-release-date" class="text medium-field" type="text"><span id="ghx-version-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit Release Date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-version-release-date-error"></span></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderQuickCreateView.soyTemplateName = 'GH.tpl.versionview.renderQuickCreateView';
}


GH.tpl.versionview.renderError = function(opt_data, opt_ignored) {
  return '' + GH.tpl.versionview.renderAllVersions(opt_data) + GH.tpl.plancontroller.renderErrorBlock({errorText: 'We\x27re having trouble retrieving your versions'}) + GH.tpl.versionview.renderVersionPending(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.versionview.renderError.soyTemplateName = 'GH.tpl.versionview.renderError';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanDragAndDrop.js' */
define("jira-agile/rapid/ui/plan/plan-drag-and-drop",["require"],function(e){"use strict";function r(e){return{revert:0,zIndex:3e3,appendTo:"body",helper:"clone",scroll:!0,additionalScrollParents:function(){return o("#ghx-backlog, .ghx-classification-scrollview")},ignoreOriginalScroll:!0,update:function(r,a){y.skipNextRank?e.agileSortable("cancel"):y.updateHandler.apply(this,[r,a])},start:function(r,a){y.skipNextRank=!1,e.addClass("ghx-drag-in-progress");var t=o(a.item.context).hasClass("ghx-marker");t&&e.addClass("ghx-sprint-divider-drag-in-progress"),y.dragStartHandler.apply(this,[r,a])},stop:function(r,a){e.removeClass("ghx-drag-in-progress ghx-sprint-divider-drag-in-progress"),y.dragStopHandler.apply(this,[r,a])}}}function a(e,r){n(o("#ghx-version-column"),"version-id",e,r)}function t(e,r){n(o("#ghx-epic-column"),"epic-id",e,r)}function n(e,r,a,t){var n=function(e){return e.addClass("ghx-target-hover-rejected").attr(y.REJECTION_REASON_ATTRIBUTE,a)},i=e.find(".ghx-classification-cards .ghx-classification-item"),s=void 0;if(l.isFunction(t)){var d=function(e,a){var n=o(a).data(r);return t(parseInt(n,10))};s=i.filter(d)}n(s||i),l.isFunction(t)&&!t(null)||n(e.find(".ghx-classification-pending"))}function i(r,a,t,n){C.isFeatureEnabled("jsw.backlog.browser-metrics.drag.n.drop.ui")&&x.trigger("after:dragAndDropIssue");var i=p.calculateIssueMoveModel(r,a),d=p.confirmMove(i);return d.fail(function(){h.reload()}),d.done(function(i){y.trigger("before:sprintRankIssue",{selectedIssueNo:r.length}),x.performanceMark("before:backlogRankIssueUI");var d=[],g=[],f=(e("jira/featureflags/feature-manager"),p.isMoveBetweenActiveSprints(i)||p.isOnlyRankOperation(i));if(f)d=r;else{var v=i.changes[0];d=v.issueKeys,g=v.doneIssueKeys}var k=!1;if(l.isEmpty(d)||(k=R.moveIssues(d,a,t,n)),!l.isEmpty(g)){var m=c.findModelWithIssue(g[0]);R.removeIssues(m,g)}var S=[];l.isEmpty(d)?S.push(o.Deferred().resolve(null)):S.push(GH.RankController.sprintRankIssues(c.getRankCustomFieldId(),d,a,n,t,null,k)),l.isEmpty(g)?S.push(o.Deferred().resolve(null)):S.push(GH.RankController.sprintRankIssues(c.getRankCustomFieldId(),g,null,null,null)),o.when.apply(null,S).done(function(e,r){GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BACKLOG.ISSUE_RANK),I.triggerAnalytics(i);var t=e&&GH.RankController.getErrorRankResultFromResponse(e[0]);t||(t=r&&GH.RankController.getErrorRankResultFromResponse(r[0])),t?(GH.Notification.showWarning(t.errors[0]),h.reload(function(){y.trigger("after:sprintRankIssue")})):(y.refreshDetailsView(i),u.showSprintRankSuccessMessage(i),e[0].success.newIssuesOrder&&R.reorderIssuesInSprint(e[0].success.newIssuesOrder,a),s(i),y.trigger("after:sprintRankIssue"))}).fail(function(e){GH.RapidBoard.ViewController.showErrorPanelDragAndDrop(r,e),h.reload(function(){y.trigger("after:sprintRankIssue")})})}),d.done(function(){JIRA.trace("gh.plan.ranking.complete")}),d}function s(e){var r=e.changes[0],a=[],t=null,n=null;r.currentSprint&&(t=r.currentSprint.id),r.targetSprint&&(n=r.targetSprint.id),t!==n?a.push({name:"sprint",oldValId:t,newValId:n}):a.push({name:"customfield_"+GH.BacklogModel.getRankCustomFieldId()}),r.issueKeys.forEach(function(e){GH.RapidBoard.sendIssueUpdatedTrackEvent(GH.BacklogModel.getIssueData(e),a)})}var o=e("jquery"),l=e("underscore"),d=e("jira-agile/rapid/global-events"),g=e("jira-agile/rapid/analytics-tracker"),c=e("jira-agile/rapid/ui/plan/backlog-model"),u=e("jira-agile/rapid/ui/plan/issue-actions"),p=e("jira-agile/rapid/ui/plan/issue-move-controller"),h=e("jira-agile/rapid/ui/plan/plan-controller"),f=e("jira-agile/rapid/ui/plan/plan-controls"),v=e("jira-agile/rapid/ui/plan/kanban-transition-and-rank"),k=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),m=e("jira-agile/rapid/ui/plan/sprint-view"),I=e("jira-agile/rapid/ui/plan/sprint-controller"),S=e("jira-agile/rapid/events"),x=e("jira-agile/browser-metrics/browser-metrics-util"),C=e("jira/featureflags/feature-manager"),b=C.isFeatureEnabled("jsw.classic.backlog.faster-drag-and-drop"),R=void 0,E=void 0,H=void 0,D=void 0;d.on("pre-initialization",function(){R=e("jira-agile/rapid/ui/plan/backlog-controller"),E=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),H=e("jira-agile/rapid/ui/plan/BacklogView"),D=e("jira-agile/rapid/ui/plan/plan-issue-list-view")});var y=new S;y.currentDragElement=void 0,y.currentSprintId=null,y.REJECTION_REASON_ATTRIBUTE="data-target-rejected-reason";var j={VERSION_PROJECT_MISMATCH:"versionProjectMismatch",SUBTASKS_IN_EPIC:"subtasksInEpic"};y.analytics={},y.analytics.sprints=new g("gh.sprint.issues"),y.analytics.ranking=new g("gh.rapidboard.rankissues"),y.cancel=!1,y.skipNextRank=!1,y.getCancelSelector=function(){var e=":input,button,.js-fake-parent,.ghx-subtask-group, .ghx-not-rankable",r=c.canManageSprints();return r||(e+=",.ghx-marker"),e};var w=function(e){var a=this,t=Object.assign(r(e),{revert:!0,revertDuration:0,start:function(r,t){y.skipNextRank=!1,e.addClass("ghx-drag-in-progress"),y.dragStartHandler.apply(a,[r,t]);var n=o(t.helper.context);n.addClass("ghx-draggable-fake-placeholder"),o(t.helper).width(n.width())},stop:function(r,t){e.removeClass("ghx-drag-in-progress"),y.dragStopHandler.apply(a,[r,t]);var n=o(t.helper.context);n.removeClass("ghx-draggable-fake-placeholder"),y.skipNextRank===!1&&y.showNotRankableWarning()}});e.on("mousedown",function(){document.activeElement&&document.activeElement.blur()}).find(".js-issue").draggable(t)},A=function(e){var a=y.getCancelSelector(),t=e.find(".js-issue").first();b&&o(".ghx-backlog").addClass("backlog-fast-drag-and-drop"),e.on("mousedown",function(){document.activeElement&&document.activeElement.blur()}).agileSortable(Object.assign(r(e),{forceHelperSize:!0,helperProportions:{width:t.width(),height:t.height()},initializeTopAndLeft:!0,containment:function(){if(!this.helper.hasClass("ghx-marker"))return!1;var e=this.currentItem.parent(),r=e.find(".js-issue-list"),a=r.offset();return[0,a.top,1e4,1e4]},intersectionOverride:function(e){var r=o.ui.isOverAxis(this.positionAbs.top+this.helperProportions.height/2,e.top,e.height),a=o.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),t=r&&a,n=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return!!t&&(this.floating?i&&"right"==i||"down"==n?2:1:n&&("down"==n?2:1))},helperAdjusted:function(){y.markerMove&&y.adjustMarkerDragOverlayHeight.apply(this)},axisAdjusted:function(){var e="y";this.currentItem.is(".js-issue")&&(e="both"),this.options.axis=e},items:".js-parent-drag:not(.ghx-filtered)",cancel:a,change:y.changeHandler}))};return y.enableDragAndDrop=function(){function e(e){return e.find(".ghx-dropzone-active").length||!e.hasClass("ghx-open")||e.find(".ghx-no-issues").length}var a=o("#ghx-content-group");y.skipNextRank=!1;var t=function(){document.activeElement&&"ghx-backlog-search-input"===document.activeElement.id&&o("#ghx-backlog-search-input").blur()};a.mousedown(function(e){o(e.target).is(".js-editing-field")||(t(),GH.RapidBoard.Util.InlineEditable.submitActiveEdits()&&e.stopPropagation())}),c.isRankable()?A(a):w(a),o(".ghx-backlog-container").agileDroppable({accept:".js-sortable.js-issue",hoverClass:"ghx-target-hover",tolerance:"pointer",drop:function(r,a){var t=o(a.helper),n=o(this);if(e(n)&&!y.cancel){var i=E.getSelectedIssueKeys(),s=null,d=null,g=o(this).data("sprint-id");GH.RapidBoard.State.isCollapsibleBacklogEnabled()?(d=g===c.BACKLOG_ID?g:parseInt(g,10),s=c.getSprintModel(d)):(d=parseInt(g,10)||null,s=c.getSprintModel(d),s||(s=c.getBacklogModel2())),y.analytics.sprints.trigger("addbydragndrop","selectedIssuesCount",i.length);var u=null;D.isSubtask(t)||(u=l.last(s.getIssueList().getOrder())),y.skipNextRank=!0,setTimeout(function(){y.rankIssues(i,d,u,null)})}}}),a.find(".ghx-subtask-group").agileSortable(Object.assign({items:".ghx-subtask"},r(a))),y.initializeClassificationDnD()},y.initializeClassificationDnD=function(){var e=y.getCancelSelector(),r=o(".ghx-classification-cards"),a=o("#ghx-epic-column").find(".ghx-classification-cards");a.agileSortable({helper:"clone",axis:"y",revert:0,zIndex:3e3,containment:"parent",start:function(e,r){y.dragStartHandler.apply(this,[e,r])},stop:y.dragStopHandler,tolerance:"pointer",items:".js-parent-drag, .js-sortable",cancel:e,update:function(e,r){y.updateHandler.apply(this,[e,r])}});var t=r.find(".ghx-classification-item").add(o(".ghx-classification-pending")),n=0;t.agileDroppable({accept:".js-sortable.js-issue",hoverClass:"ghx-target-hover",tolerance:"pointer",over:function(e,r){o(this).hasClass("ghx-target-hover-rejected")&&(n++,n>0&&r.helper.css("cursor","not-allowed"))},out:function(e,r){o(this).hasClass("ghx-target-hover-rejected")&&(n--,n<=0&&r.helper.css("cursor",""))},drop:function(){n=0;var e=o(this),r=e.attr("data-epic-key"),a=e.attr("data-version-id");if(!y.cancel){var t=E.getSelectedIssueKeys();if(e.hasClass("ghx-target-hover-rejected")){var i=e.attr(y.REJECTION_REASON_ATTRIBUTE),s=void 0;switch(i){case j.VERSION_PROJECT_MISMATCH:s=AJS.format("Issues can only be added to a version that belongs to the same project as the {0,choice,0#issues|1#issue|2#issues}",t.length);break;case j.SUBTASKS_IN_EPIC:s="You can\'t add sub-tasks to epics. Sub-tasks are automatically associated with the same epic as their parent issues."}s&&GH.Notification.showWarnings(s,{autoHide:!0,preRendered:!0})}else if(l.isEmpty(r)){if(!l.isEmpty(a)){var d=[];l.each(t,function(e){var r=c.getIssueData(e);r&&d.push(r)});var g=l.some(d,function(e){return e.fixVersions.length>1}),u=function(){k.isNoneVersionFilterId(a)?GH.VersionController.clearIssuesVersion(d):GH.VersionController.setIssuesVersion(parseInt(a,10),d)};if(g&&!GH.storage.get("gh.dialog.versionChangeConfirm.dontAsk",!1)){var p;if(k.isNoneVersionFilterId(a))p=AJS.format("This action will remove any versions from the {0,choice,0#issues|1#issue|2#issues}",d.length);else{var h=GH.VersionController.getVersionModel().getVersion(parseInt(a,10));p=AJS.format("Adding the selected {1,choice,0#issues|1#issue|2#issues} to version {0} will remove the {1,choice,0#issues|1#issue|2#issues} from any other versions","<b>"+AJS.escapeHTML(String(h.name))+"</b>",d.length)}var f="ghx-version-change-confirm-dialog";GH.ConfirmDialog.create(f,{content:p,contentEscaping:!1,onConfirmFn:function(){u()}}).show(),o("#"+f).find(".dialog-button-panel").prepend(GH.tpl.versionview.renderDontAskAgain());var v=o("#ghx-dont-ask-for-confirmation");v.change(function(){GH.storage.put("gh.dialog.versionChangeConfirm.dontAsk",v.is(":checked"),!1)})}else setTimeout(u)}}else k.isNoneEpicFilterKey(r)?GH.EpicController.removeIssuesFromAssociatedEpics(t):GH.EpicController.addIssuesToEpic(r,t);y.skipNextRank=!0}}})},y.dragStartHandler=function(e,r){C.isFeatureEnabled("jsw.backlog.browser-metrics.drag.n.drop.ui")&&x.trigger("before:dragAndDropIssue"),y.cancel=!1;var a=o(r.item?r.item:r.helper[0]),t=o(this),n=a.hasClass("ghx-marker")||a.hasClass("js-parent-drag");setTimeout(function(){f.stopEdits()},0),GH.EpicView.hideDropdown(),GH.VersionView.hideDropdown(),GH.PlanContextMenuController.hideContextMenu(),o(document).bind("keydown.planDragAndDrop",function(e){27==e.keyCode&&(y.cancel=!0,t.agileSortable("cancel"),n&&R.revertStatistics())}),a.hasClass("js-issue")?(y.markerMove=!1,y.issueDragStartHandler.apply(this,[e,r])):n&&(y.markerMove=!0,y.markerDragStartHandler.apply(this,[e,r])),GH.LinkedPagesController.hideCurrentDialog()},y.dragStopHandler=function(e,r){var a=o(r.item?r.item:r.helper[0]);y.hideDropZones(),o(document).unbind("keydown.planDragAndDrop"),a.hasClass("js-issue")?y.issueDragStopHandler.apply(this,[e,r]):(a.hasClass("ghx-marker")||a.hasClass("js-parent-drag"))&&y.markerDragStopHandler.apply(this,[e,r])},y.updateHandler=function(e,r){var a=o(r.item);y.cancel||(a.hasClass("js-issue")?y.issueUpdateHandler(e,r):a.hasClass("ghx-marker")||a.hasClass("js-parent-drag")?y.markerUpdateHandler(e,r):a.hasClass("ghx-classification-item")&&y.epicUpdateHandler(e,r))},y.changeHandler=function(e,r){var a=o(r.item),t=a.hasClass("js-issue"),n=r.placeholder,i=n.parent(),s=i.hasClass("js-issue-list");if(t){if(!s){var l=n.prevAll(".js-issue-list");l.length&&l.append(n)}}else{var d=m.getSprintIdForMarker(o(r.item)),g=m.getSprintIdForElement(n),c=d===g;if(c){if(s){var u=!n.next(".js-issue").length;u&&i.after(n)}}else if(!s){var l=n.prevAll(".js-issue-list");l.length&&l.append(n)}}a.hasClass("js-issue")||(a.hasClass("ghx-marker")||a.hasClass("js-parent-drag"))&&y.markerChangeHandler(e,r)},y.issueDragStartHandler=function(e,r){var n=o(r.helper);!D.isSubtask(n)&&c.isRankable()||y.setupDropZones(D.getIssueId(n)),y.currentDragElement=n,y.currentSprintId=m.getSprintIdForElement(o(r.item));var i=D.getIssueKey(n);E.ensureIssueSelected(e,i);var s=E.getSelectedIssueKeys(),d=E.getCollapsedSubTasksToSelection(s);d.length>0&&E.addSelectedIssueKeys(d),s.length>1&&(n.hasClass("ghx-parent-group")?n.children(".js-issue").addClass("ghx-move-main").find(".ghx-move-count > b").text(s.length):n.addClass("ghx-move-main").find(".ghx-move-count > b").text(s.length));var g=l.chain(s).map(function(e){return c.getIssueData(e).projectId}).uniq().value();g.length>1?a(j.VERSION_PROJECT_MISMATCH,l.isNumber):a(j.VERSION_PROJECT_MISMATCH,function(e){var r=GH.VersionController.getVersionModel().getVersion(e);return r&&r.project&&l.first(g)!==r.project.id});var u=s.some(c.isSubtask);u&&t(j.SUBTASKS_IN_EPIC)},y.issueDragStopHandler=function(e,r){var a=o(r.item?r.item:r.helper[0]);a.css("cursor",""),a.hasClass("ghx-parent-group")?a.children(".js-issue").removeClass("ghx-move-main"):a.removeClass("ghx-move-main"),y.currentDragElement=null,o(".ghx-classification-cards").find(".ghx-target-hover-rejected").removeClass("ghx-target-hover-rejected").removeAttr(y.REJECTION_REASON_ATTRIBUTE);var t=D.getIssueByKey(a.data("issue-key")),n=m.getSprintIdForElement(t),i=y.currentSprintId!==n,s=E.getSelectedIssuesInOrder();i&&D.expandAllAfterTransition(s)},y.isIssueBeingDragged=function(e){var r=y.currentDragElement;if(r){var a=AJS.$(r).data("issue-key");return e===a}},y.isAnyIssueBeingDragged=function(){return!!y.currentDragElement},y.isIssueInListBeingDragged=function(e){return l.find(e,function(e){return y.isIssueBeingDragged(e)})},y.issueUpdateHandler=function(e,r){var a=o(r.item),t=E.getSelectedIssuesInOrder();y.analytics.ranking.trigger("dragAndDrop",t.length);var n=D.findPrevRankableElement(a),i=D.getRankableId(n),s=D.findNextRankableElement(a),l=D.getRankableId(s),d=m.getSprintIdForElement(a),g=!!i,c=!!l;g&&c&&(l=!1),y.rankIssues(t,d,i,l)},y.epicUpdateHandler=function(e,r){function a(e){return{key:e.attr("data-epic-key"),id:e.attr("data-epic-id")}}var t=o(r.item),n=a(t),i=t.prev(),s=i.length>0&&a(i),l=t.next(),d=l.length>0&&a(l),g=[n.key];GH.EpicController.reorderEpics(g,s.key,d.key);var u=function(){h.reload()},p=function(e){var r=GH.RankController.getErrorRankResultFromResponse(e);r&&(GH.Notification.showWarning(r.errors[0]),h.reload())};GH.RankController.rankEpics(c.getRankCustomFieldId(),n.id,d.id,s.id).fail(u).done(p)},y.setupDropZones=function(e){var r=c.findModelWithIssue(e),a=l.filter(o(".ghx-backlog-container"),function(e){var a=o(e).data("sprint-id")||"backlog";return a!==r.getId()});y.showDropZones(a)},y.showDropZones=function(e){l.each(e,function(e){o(e).find(".js-issue-list").addClass("ghx-dropzone-active")})},y.hideDropZones=function(){o(".js-issue-list").removeClass("ghx-dropzone-active")},y.rankIssues=function(e,r,a,t){return GH.RapidBoard.State.isIssueListBacklog()?(y.trigger("before:kanbanRankIssue",{selectedIssueNo:e.length}),x.performanceMark("before:backlogRankIssueUI"),v.assignToListAndRank(e,r,a,t).always(function(){y.trigger("after:kanbanRankIssue")}),o.Deferred().resolve()):GH.RapidBoard.State.isKanbanBoard()?(y.trigger("before:kanbanRankIssue",{selectedIssueNo:e.length}),x.performanceMark("before:backlogRankIssueUI"),v.transitionAndRankIssues(e,r,a,t).always(function(){y.trigger("after:kanbanRankIssue")}),o.Deferred().resolve()):i(e,r,a,t)},y.refreshDetailsView=function(r){if(h.isDetailsViewOpened()&&!p.isOnlyRankOperation(r)){var a=GH.DetailsView.selectedIssueKey,t=p.getAllIssueKeys(r);if(l.contains(t,a)){var n=e("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");GH.DetailsView.reload(n.DETAILS_FIELD_CHANGED)}}},y.markerDragStartHandler=function(e,r){var a=o(r.item),t=a.parent(),n=t.offset(),i=t.children(".js-issue-list"),s=i.offset(),l=a.height(),d=o(GH.tpl.backlogview.renderDragOverlay({})),g=o("#ghx-backlog").offset().top,c=function(e){var r=e.top;return r<g?g:r},u=function(e){return r.helper.offset().top-e+l},p=c(s),h=u(p);d.css({top:p,left:n.left+1,height:h,width:t.outerWidth()-2}).appendTo("body"),y.adjustMarkerDragOverlayHeight=function(){this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");var e=i.offset(),r=c(e),a=u(r);d[0].style.top=r+"px",d[0].style.height=a+"px"};var f=o(r.helper);a.closest(".ghx-sprint-planned").addClass("ghx-active-drag"),y.currentDragElement=f},y.markerChangeHandler=function(e,r){var a=o(r.placeholder),t=m.getSprintIdForMarker(r.item);if(t){var n=m.getSprintIdForElement(a),i=D.findPreviousVisibleIssueElementInList(a),s=D.getRankableId(i);y.updateTemporarySprintStatistics(t,n,s)}},y.markerDragStopHandler=function(){var e=o(".ghx-backlog-container");e.removeClass("ghx-active-drag ghx-overtaken"),o(".ghx-drag-overlay").remove(),y.currentDragElement=null},y.markerUpdateHandler=function(e,r){y.analytics.sprints.trigger("footerdrag");var a=o(r.item),t=m.getSprintIdForMarker(a);if(t){var n=m.getSprintIdForElement(a),i=D.findPreviousVisibleIssueElementInList(a),s=D.getRankableId(i);y.handleMarkerDragRanking(t,n,s)}},y.handleMarkerDragRanking=function(e,r,a){var t=c.calculateRankingDataForSprintMarkerMove(e,r,a);if(t){var n=y.rankIssues(t.issueKeys,t.sprintId,t.prevRankableId,t.nextRankableId);n.done(function(){var e=E.validateCurrentSelection();e&&H.updateIssueSelectionState(!1)})}if(e!=r&&!a){var i=[];r?i.push(c.getSprintModel(r)):i.push(c.getBacklogModel2()),t||i.push(c.getSprintModel(e)),H.redrawChangedModels(i)}},y.updateTemporarySprintStatistics=function(e,r,a){var t=c.getSprintModel(e);if(t){var n=c.calculateTemporaryDataForSprintWithMarker(e,r,a);m.markAsOvertaken(n.modelsData.otherAffectedModels),m.updateSprintStatisticForDraggedSprint(t,n.issueList)}},y._findShownElementByClass=function(e){return function(r){var a=o(r);return a.hasClass(e)&&!a.is(":hidden")}},y._findShownElement=function(e){var r=o(e);return!r.is(":hidden")},y.showNotRankableWarning=function(){var e=GH.RapidBoard.getRapidViewConfigurationUrl(R.rapidViewData.id,"filter"),r='<a href="'+e+'">',a="</a>",t=AJS.format("Ranking is disabled, as the Filter Query for this board is not ordered by ascending Rank. Please check your {0}filter configuration{1}.",r,a);GH.Notification.showWarning(t)},y});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanController.js' */
function _toConsumableArray(e){if(Array.isArray(e)){for(var i=0,t=Array(e.length);i<e.length;i++)t[i]=e[i];return t}return Array.from(e)}var _extends=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};define("jira-agile/rapid/ui/plan/plan-controller",["require"],function(e){"use strict";function i(){GH.bridge.FilterBridge.reset(),t(),GH.RapidBoard.updateMultilineQuickFilterToggledState(),N.unsubscribeQuickFilterUpdate&&N.unsubscribeQuickFilterUpdate(),N.unsubscribeQuickFilterUpdate=GH.bridge.FilterBridge.on("update",function(e){e.searchText&&v.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&L.triggerBefore("before:backlogSearchFilter","backlogSearchFilter");var i=H.getActiveQuickFilterIds();if(N.activeFilters=Object.assign({},e,{searchText:e.searchText.trim()}),i.length!==e.quickFilterList.length)try{GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BACKLOG.QUICK_FILTERS_CHANGE,!v.isFeatureEnabled("moonwalk.eventually-consistent.backlog.quick-filters"))}catch(t){AJS.trigger("analyticsEvent",{name:"jira.agile.board.PlanController.quickFilters.MarkUserInteractionError",data:{errorMsg:t.toString()}})}H.setActiveQuickFilterIds(e.quickFilterList),GH.RapidBoard.State.pushState(),i.length!==e.quickFilterList.length&&(v.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&L.triggerBefore("before:backlogQuickFilter","backlogQuickFilter"),GH.PlanController.reload(function(){d()})),g.executeSearch(new RegExp(N.activeFilters.searchText||"","i")),v.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&L.triggerAfter("after:backlogSearchFilter","backlogSearchFilter"),g.filterByAssignees(e.assigneeList&&e.assigneeList.map(function(e){return e===G?null:e})),g.filterByLabels(e.labelList),a()}),N.unsubscribeQuickFilterClearAllFilters&&N.unsubscribeQuickFilterClearAllFilters(),N.unsubscribeQuickFilterClearAllFilters=GH.bridge.FilterBridge.on("clearAllFilters",function(){g.clearFilters()})}function t(){var e=H.getQuickFilters().map(function(e){return _extends({},e,{id:parseInt(e.id,10)})});GH.bridge.FilterBridge.loadQuickFilterList(e),d(),n(),s()}function a(){var e=GH.RapidViewConfig.currentData.data,i=H.getQuickFilters().filter(function(e){return e.isActive}).map(function(e){return e.query});i.length>0&&V.sendTrackEvent({containerType:e.locationType,containerId:JIRA.API&&JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectId(),objectType:"backlog",objectId:e.id,source:"backlogScreen",actionSubject:"quickFilter",actionSubjectId:"applyQuickfilter",action:"applied",attributes:{boardId:e.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),quickFiltersAppliedCount:i.length,onlyMyIssuesQuickFilterApplied:i.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY)>-1,recentlyUpdatedQuickFilterApplied:i.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY)>-1,customQuickFilterApplied:i.some(function(e){return e!==GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY&&e!==GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY})}})}function r(){var e=A.getUserConfig();if(e)return{id:e.accountId,name:e.displayName,avatarUrl:e.avatarUrl}}function n(){var e=r();e&&GH.bridge.FilterBridge.loadCurrentUser&&GH.bridge.FilterBridge.loadCurrentUser(e)}function s(){var e=N.activeFilters,i=e.searchText||"";i&&g.executeSearch(new RegExp(i||"","i")),GH.bridge.FilterBridge.loadSearchText(i)}function l(e,i){var t=r();t&&!e[t.id]&&(t.isActive=!!i.assigneeList&&i.assigneeList.indexOf(t.id)>-1,e[t.id]=t),e[G]||(e[G]={id:G,name:"Unassigned",isActive:!!i.assigneeList&&i.assigneeList.indexOf(G)>-1})}function o(){var e=N.activeFilters,i={};return GH.BacklogModel.map(function(i){var t=i.assigneeAccountId||G;return{id:t,name:i.assigneeName||"Unassigned",avatarUrl:i.avatarUrl,isActive:!!e.assigneeList&&e.assigneeList.indexOf(t)>-1}}).forEach(function(e){i[e.id]=e}),l(i,e),Object.values(i)}function u(){var e=o().map(function(e){var i=e.id;return i}),i=N.activeFilters.assigneeList,t=i.filter(function(i){return e.includes(i)});return t.length===i.length?{isValid:!0,assigneeList:t}:{isValid:!1,assigneeList:t}}function d(){var e=u(),i=e.isValid,t=e.assigneeList;i||(N.activeFilters.assigneeList=t,GH.RapidBoard.State.replaceState()),GH.bridge.FilterBridge.loadAssigneeList(o()),GH.bridge.FilterBridge.loadLabelList&&GH.bridge.FilterBridge.loadLabelList(c())}function c(){var e=new Set,i=GH.BacklogModel.map(function(e){return e.labels||[]});return i.forEach(function(i){return i.forEach(function(i){return e.add(i)})}),[].concat(_toConsumableArray(e))}var p,g,f,b=e("jquery"),w=e("underscore"),S=e("jira-agile/rapid/global-events"),V=e("jira/analytics/web-client"),h=e("jira-agile/rapid/analytics-tracker"),H=e("jira-agile/rapid/ui/plan/plan-controls"),E=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),I=e("jira-agile/rapid/ui/plan/plan-view"),k=e("jira-agile/rapid/const/PageMode"),m=e("jira-agile/rapid/events"),C=e("jira-agile/rapid/work/quick-filters-bridge"),G="UNASSIGNED_USER_ID",v=e("jira/featureflags/feature-manager"),F=(e("jira-agile/features/feature-flags"),e("jira-agile/rapid/ui/plan/sprint-view")),A=e("jira-agile/rapid/user-data"),D=e("jira-agile/rapid/ui/bento/bento-features"),L=e("jira-agile/browser-metrics/browser-metrics-util"),R=e("jira-agile/rapid/trace-utils"),B=e("jira-agile/rapid/deferred-resources-loader"),T=function(){return v.isFeatureEnabled("cbb.heritage")},y=v.isFeatureEnabled("jsw.classic.common.sla.utils"),P=v.isFeatureEnabled("jsw.classic.common.sla.utils.legacy"),_=25,j=e("jira-agile/rapid/ui/sla/global-errors"),U="backlog-critical-data-failed-unknown-reason",O="backlog-critical-data-failed-with-frontend-error",M="backlog-critical-data-failed-with-status-code",Q=void 0,x=void 0;S.on("pre-initialization",function(){p=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),g=e("jira-agile/rapid/ui/plan/backlog-controller"),Q=e("jira-agile/rapid/ui/plan/BacklogView"),x=e("jira-agile/rapid/ui/plan/plan-drag-and-drop"),f=e("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-controller")});var N=new m;N.isVisible=!1,N.viewData=void 0,N.currentViewConfig={},N.activeFilters={assigneeList:[]},N.unsubscribeQuickFilterUpdate=null,N.unsubscribeQuickFilterClearAllFilters=null,N.analytics=function(e){return new h("gh.planningboard."+e)},N.VS_ISSUE_LIMIT_100=100,N.VS_ISSUE_LIMIT_500=500,N.VS_DEFAULT_ISSUE_LIMIT=N.VS_ISSUE_LIMIT_100,N.VS_BACKLOG_TAIL_LENGTH=10,N.VS_SHOW_ALL_ISSUES=-1,N.sla={},N.sla.latestErrorStatusCode=null,N.sla.task="viewBacklog",N.sla.analyticsSource="backlog",N.sla.application="jira-software",N.sla.globalErrors=null,N.init=w.once(function(){R.startSpan("plan-view-controls-init"),I.init(),H.init(),R.endSpan("plan-view-controls-init"),R.startSpan("version-controller-init"),GH.VersionController.init(),R.endSpan("version-controller-init"),R.startSpan("epic-controller-init"),GH.EpicController.init(),R.endSpan("epic-controller-init"),R.startSpan("backlog-controller-init"),g.init(),R.endSpan("backlog-controller-init"),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()&&N.on("after:show",function(){w.delay(function(){R.startSpan("backlog-improvements-init"),GH.EpicView.isbacklogDataV2Enabled()||(N.isVersionsColumnVisible()&&GH.VersionView.show(),N.isEpicsColumnVisible()&&GH.EpicView.show()),GH.RapidBoard.ViewController.updateContentContainer(),Q.updateIssueSelectionState(!0),GH.planOnboarding.renderOnboarding(),v.isFeatureEnabled("jsw.classic.backlog.enable-drag-and-drop-on-issue-hover")?Q.registerEventHandlers():(x.enableDragAndDrop(),Q.registerClickHandlers()),F.registerTwixies(),GH.sprintActions.createDropdown(),b("#ghx-backlog").attr("data-rendered",(new Date).getTime());try{J()}catch(e){}R.endSpan("backlog-improvements-init")})})}),N.isActive=function(){return N.isVisible},N.setRapidView=function(e){N.rapidViewData=e,g.setRapidView(e)};var Y=function(){C.isReactFiltersEnabled().then(function(e){e&&i(),GH.RapidBoard.State.isIssueListBacklog()&&f.showDialog(N.rapidViewData.id)})};N.show=function(){if(N.rapidViewData)return N.isVisible=!0,I.show(),N.configureUI(),N.attachControlFHandler(),N.loadRapidViewConfig().then(function(){Y()})["finally"](function(){X()})};var J=function(){K(),window.addEventListener("error",function(e){try{k&&GH.RapidBoard.State.getMode()===k.PLAN&&GH.PlanController.sla.globalErrors.recordError(e)}catch(i){}return!1})},q=function(){return K()},K=function(){N.sla.globalErrors=new j(_)},z=function(e){try{var i=GH.PlanController.sla.globalErrors?GH.PlanController.sla.globalErrors.getAllErrors()||[]:[];return{origin:"PlanController",statusCode:e?e:"unknown",userAgent:navigator?navigator.userAgent:"unknown",isTransition:GH.RapidBoard.State?GH.RapidBoard.State.isFirstLoad():"unknown",issueNumBackend:GH.RapidBoard.State.numberOfIssues.get(),setPoolDataNewFlow:GH.PlanController.sla.setPoolDataNewFlow,windowErrors:i,tracerLogs:R.getTrace(),href:window.location.href,referrer:document.referrer}}catch(t){return{}}},W=function(e){var i=te(),t=null;if(GH.spa&&(t=GH.spa.slaUtil(i,k.PLAN)),null!==t&&"success"===t.state)404!==i&&$();else if(void 0===i||null===i){var a=U,r=N.activeFilters,n=r&&(r.assigneeList&&r.assigneeList.length>0||r.issueTypeList&&r.issueTypeList.length>0||r.searchText&&r.searchText.length>0);GH.PlanController.sla.globalErrors.hasNonScriptError()&&(a=O),R.startSpan("plan-fire-sla-undefined-status"),Z({reason:a,numIssues:e.length,haveFiltersApplied:n,statusCode:i,debugAttributes:z(i)}),R.endSpan("plan-fire-sla-undefined-status")}else i>=500&&(R.startSpan("plan-fire-sla-500-status"),Z({reason:M,statusCode:i,debugAttributes:z(i)}),R.endSpan("plan-fire-sla-500-status"));ie()},X=function(){if(!GH.RapidBoard.ViewController.hasTransitionedToAnotherRoute(window.location)){if(!N.isActive()&&GH.RapidBoard.ViewController.getMode()!==k.PLAN)return void ie();if(y&&P)return void W(i);var e=AJS.$("#ghx-backlog"),i=e.find(".ghx-backlog-card"),t=e.find(".ghx-onboarding-fillyourbacklog-group"),a=e.find(".ghx-backlog-header.js-marker-backlog-header"),r=N.activeFilters,n=r&&(r.assigneeList&&r.assigneeList.length>0||r.issueTypeList&&r.issueTypeList.length>0||r.searchText&&r.searchText.length>0);if(i.length>0||1===t.length||0===i.length&&a&&a.length>=1)$();else{var s=te();if(void 0===s||null===s){var l=U;GH.PlanController.sla.globalErrors.hasNonScriptError()&&(l=O),R.startSpan("plan-fire-sla-undefined-status"),Z({reason:l,numIssues:i.length,haveFiltersApplied:n,statusCode:s,debugAttributes:z(s)}),R.endSpan("plan-fire-sla-undefined-status")}else 400===s||401===s||403===s?$():404===s||(s>400&&s<500?$():s>=500&&(R.startSpan("plan-fire-sla-500-status"),Z({reason:M,statusCode:s,debugAttributes:z(s)}),R.endSpan("plan-fire-sla-500-status")))}ie()}},$=function(){ee("taskSuccess",{})},Z=function(e){ee("taskFail",e)},ee=function(e,i){var t=GH.RapidViewConfig.currentData.data;V.sendOperationalEvent({source:"ui",actionSubject:"ui",action:e,attributes:_extends({task:N.sla.task,analyticsSource:N.sla.analyticsSource,application:N.sla.application,edition:GH.Util.getEdition(N.sla.application),taskId:t.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),isClassic:!0},i)})},ie=function(){try{R.startSpan("plan-clear-sla-data"),N.sla.latestErrorStatusCode=null,R.endSpan("plan-clear-sla-data")}finally{R.flushTrace(),q()}},te=function(){return N.sla.latestErrorStatusCode};N.configureUI=function(){B.handleDeferredResourceImport(T()&&!GH.DetailsView,function(){var e=p.getSelectedIssueKey();GH.DetailsView.setRapidViewId(N.rapidViewData.id),e&&GH.DetailsView.setSelectedIssueKey(e),I.updateDetailViewState(),GH.EpicView.isbacklogDataV2Enabled()||(I.updateVersionColumnState(),I.updateEpicsColumnState())})},N.lastPushUpdate=0,N.pushTimeoutHandler=void 0,N.updateDetailsView=function(e,i,t,a){var r=300,n=(new Date).getTime();return N.lastPushUpdate<n-r?(N.doUpdateDetailsView(e,i,t,a),void(N.lastPushUpdate=n+r)):(N.pushTimeoutHandler&&window.clearTimeout(N.pushTimeoutHandler),void(N.pushTimeoutHandler=window.setTimeout(function(){N.doUpdateDetailsView(e,i,t),N.lastPushUpdate=(new Date).getTime()},r)))},N.doUpdateDetailsView=function(e,i,t,a){(GH.RapidBoard.State.isDetailsViewPlanOpened()||i)&&B.handleDeferredResourceImport(T()&&!GH.DetailsView,function(){GH.DetailsView.setSelectedIssueKey(e),null==p.getSelectedIssueKey()?(N.setDetailViewOpenedState(!1),GH.DetailsView.hide()):(N.setDetailViewOpenedState(!0),GH.DetailsView.show(t,a)),N.trigger("before:openDetailView"),e&&setTimeout(function(){GH.RapidBoard.State.pushState()},0),I.doUpdateDetailsView()})},N.reloadDetailView=function(e){N.isDetailsViewOpened()&&(N.setDetailViewOpenedState(!0),GH.DetailsView.show(e))},N.reload=function(e){N.isVisible&&g.show(e)},N.hide=function(){N.isVisible=!1,g.hide(),B.handleDeferredResourceImport(T()&&!GH.DetailsView,function(){GH.DetailsView.hide()}),N.detachControlFHandler(),I.hide(),GH.planOnboarding.refresh(),N.unsubscribeQuickFilterUpdate&&N.unsubscribeQuickFilterUpdate(),N.unsubscribeQuickFilterClearAllFilters&&N.unsubscribeQuickFilterClearAllFilters()},N.loadRapidViewConfig=function(){return new Promise(function(e,i){GH.RapidViewConfig.fetchConfiguration(N.rapidViewData.id).done(function(t){N.currentViewConfig=t,GH.RapidBoard.State.isPlanModeAvailable()&&N.initializePlanMode().then(e,i)}).fail(i)})},N.initializePlanMode=function(){return new Promise(function(e){N.isVisible&&(H.setRapidViewConfig(N.currentViewConfig),g.setRapidViewConfig(N.currentViewConfig),B.handleDeferredResourceImport(T()&&!GH.DetailsView,function(){GH.DetailsView.setRapidViewConfig(N.currentViewConfig)}),H.renderControls(),GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),I.hideLoadingFilter(),E.setInstantFilter(null),g.show(function(){ae(),re(),e(!0)}),N.configureUI(),B.handleDeferredResourceImport(T()&&!GH.DetailsView,function(){N.isDetailsViewOpened()&&GH.DetailsView.preloadData()}),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||GH.RapidBoard.ViewController.updateContentContainer())})};var ae=function(){var e=w.reduce(GH.BacklogModel.getAllIssueListsNew(),function(e,i){return e+i.getIssueCount()},0),i={boardtype:GH.RapidBoard.State.isScrumBoard()?"scrum":"kanban",backlogissuecount:GH.BacklogModel.getBacklogModel2().getIssueList().getIssueCount(),totalissuecount:e};if(GH.RapidBoard.State.isKanbanBoard()){var t=w.first(GH.BacklogModel.getSprintModels());if(w.isUndefined(t))return;i.selectedfordevelopmentissuecount=t.getIssueList().getIssueCount()}AJS.trigger("analyticsEvent",{name:"jira-software.plan.view",data:i})},re=function(){var e=GH.RapidBoard.State.getBoardTypeForAnalytics(),i=GH.RapidViewConfig.currentData.data,t={objectType:"board",objectId:N.rapidViewData.id,containerType:i.locationType,attributes:_extends({boardId:N.rapidViewData.id,boardType:e,numEpics:GH.RapidBoard.State.numberOfEpics.get(),numVersions:GH.RapidBoard.State.numberOfVersions.get(),numIssues:GH.RapidBoard.State.numberOfIssues.get()},ne(),{is_SIMPLE_ROADMAP_enabled:i.isRoadmapEnabled,is_SIMPLE_ROADMAP_crossProject:i.isRoadmapCrossProject}),action:"viewed",actionSubject:"backlog",actionSubjectId:N.rapidViewData.id,source:"backlogScreen"};if("project"===t.containerType&&JIRA.API&&JIRA.API.Projects&&(t.containerId=JIRA.API.Projects.getCurrentProjectId()),GH.RapidBoard.State.isAgilityBoard()){var a=GH.BacklogModel.getSprintModels(),r=a.length;1===r&&a[0].sprintData.id===-1&&(r=0),t.attributes.numSprints=r}V.sendScreenEvent("backlogScreen",null,{boardType:e,isIssueDetailVisible:GH.RapidBoard.State.isDetailsViewPlanOpened(),isNewIssueView:D.isBentoEnabled()}),V.sendTrackEvent(t)},ne=function(){var e=GH.RapidViewConfig.currentData.data,i=H.getQuickFilters().map(function(e){return e.query}),t=H.getQuickFilters().filter(function(e){return e.isActive}).map(function(e){return e.query}),a=GH.BacklogModel.getAllModels().map(function(e){return e.getIssueList().data.issueByKey}).flatMap(function(e){return Object.values(e)}),r=[].concat(_toConsumableArray(new Set(a.map(function(e){return e.projectId}))));return{numProjects:r.length,issueResultProjectIds:r,quickFiltersAppliedCount:t.length,onlyMyIssuesQuickFilterApplied:t.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY)>-1,recentlyUpdatedQuickFilterApplied:t.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY)>-1,quickFiltersConfiguredCount:i.length,onlyMyIssuesQuickFilterConfigured:i.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY)>-1,recentlyUpdatedQuickFilterConfigured:i.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY)>-1,planModeCardLayoutCount:e.planModeExtraFieldIds.length,workModeCardLayoutCount:e.workModeExtraFieldIds.length}};return N.isDetailsViewOpened=function(){return!!GH.RapidBoard.State.isDetailsViewPlanOpened()&&!!GH.DetailsView.getSelectedIssueKey()},N.setDetailViewOpenedState=function(e){e=e||!1,GH.RapidBoard.State.setPlanViewDetailsViewOpened(e),I.updateDetailViewState()},N.closeDetailsView=function(){GH.DetailsView.hasCurrentError()||N.isDetailsViewOpened()&&(N.setDetailViewOpenedState(!1),GH.RapidBoard.State.pushState(),GH.DetailsView.hide(),I.updateHorizontalPositioning())},N.toggleDetailsView=function(e){if(N.isDetailsViewOpened())N.closeDetailsView();else{var i=p.getSelectedIssueKey();N.updateDetailsView(i,!0,null,e)}},N.getBacklogIssuesLimitConfig=function(){return GH.BoardState.getPerViewValue("issueLimit",N.VS_DEFAULT_ISSUE_LIMIT)},N.setBacklogIssuesLimitConfig=function(e){return GH.BoardState.setPerViewValue("issueLimit",e)},N.toggleEpicsShowOnBacklog=function(){GH.ViewActions.toggleEpicsShowOnRapidBoard(),N.reload(),AJS.trigger("analyticsEvent",{name:"jira-software.plan.boardmenu.click."+(GH.RapidBoard.State.getEpicShownOnRapidBoard()?"show":"hide")+"-epic-lables"})},N.isVersionsColumnVisible=function(){return GH.BoardState.getPerViewValue("planVersionsVisible",!1)},N.isEpicsColumnVisible=function(){return GH.BoardState.getPerViewValue("planEpicsVisible",!1)},N.isVersionsColumnVisiblePersisted=function(){return GH.BoardState.getPerViewValue("planVersionsVisible",!1)},N.isEpicsColumnVisiblePersisted=function(){return GH.BoardState.getPerViewValue("planEpicsVisible",!1)},N.setVersionsColumnVisible=function(e){GH.BoardState.setPerViewValue("planVersionsVisible",!!e)},N.setEpicsColumnVisible=function(e){GH.BoardState.setPerViewValue("planEpicsVisible",!!e)},N.toggleVersionsColumn=function(){var e=N.isVersionsColumnVisible();e=!e,N.setVersionsColumnVisible(e),GH.EpicView.isbacklogDataV2Enabled()||(e&&L.triggerBefore("before:versionListToggledOpen"),GH.VersionView.show(),GH.PlanDragAndDrop.initializeClassificationDnD()),GH.RapidBoard.State.pushState(),I.updateVersionColumnState(),I.updateHorizontalPositioning(),e&&L.triggerAfter("after:versionListToggledOpen"),AJS.trigger("analyticsEvent",{name:"jira-software.plan.boardmenu.click."+(e?"show":"hide")+"-versions-panel"})},N.toggleEpicsColumn=function(){var e=N.isEpicsColumnVisible();e=!e,N.setEpicsColumnVisible(e),GH.EpicView.isbacklogDataV2Enabled()||(e&&L.triggerBefore("before:epicListToggledOpen"),GH.EpicView.show(),GH.PlanDragAndDrop.initializeClassificationDnD()),GH.RapidBoard.State.pushState(),I.updateEpicsColumnState(),I.updateHorizontalPositioning(),e&&L.triggerAfter("after:epicListToggledOpen"),AJS.trigger("analyticsEvent",{name:"jira-software.plan.boardmenu.click."+(e?"show":"hide")+"-epics-panel"})},N.attachControlFHandler=function(){b(document).bind("keydown",N.controlFHandler)},N.detachControlFHandler=function(){b(document).unbind("keydown",N.controlFHandler)},N.controlFHandler=function(e){e.ctrlKey&&"f"===String.fromCharCode(e.which).toLowerCase()&&N.analytics("shortcuts").trigger("controlf")},N.collectPrintableIssues=function(){return GH.RapidBoard.State.isCollapsibleBacklogEnabled()?{sprintIssues:g.extractPrintableIssuesFromAllSprints(),epics:g.getEpicMap(),viewMode:k.PLAN,boardType:GH.RapidBoard.State.getBoardType()}:{sprintIssues:g.extractPrintableIssuesFromAllSprints(),backlogIssues:g.getPrintableIssuesFromPlanBacklog(),epics:g.getEpicMap(),viewMode:k.PLAN,boardType:GH.RapidBoard.State.getBoardType()}},N.getShowMoreOptionItems=function(){return N.getShowMoreOptions().map(function(e){return w.extend(e,{checked:e.value===N.getBacklogIssuesLimitConfig()})})},N.getShowMoreOptions=function(){var e=[N.VS_DEFAULT_ISSUE_LIMIT,N.VS_ISSUE_LIMIT_500].map(function(e){return{value:e,label:AJS.format("{0} issues",e)}});return e.push({value:N.VS_SHOW_ALL_ISSUES,label:AJS.format("{0} issues","All")}),e},N.shouldValidateIssueLimit=function(){return!0},N.isValidIssueLimit=function(e){if(!N.shouldValidateIssueLimit())return!0;var i=N.getShowMoreOptionItems().map(function(e){return e.value});return i.indexOf(e)!==-1},N});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanController.soy' */
// This file was automatically generated from PlanController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.plancontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.plancontroller == 'undefined') { GH.tpl.plancontroller = {}; }


GH.tpl.plancontroller.renderSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-plan-group" class="ghx-plan-group' + ((! opt_data.shouldShowEpic) ? ' ghx-no-epic-panel' : '') + '"><div id="ghx-classification-menu-column" class="' + ((opt_data.shouldHidePanels) ? 'agility-backlog-panel-hidden' : '') + '"><ul id="ghx-classification-menu" class="ghx-ide-menu ghx-classification-menu"><li role="button" class="js-release-toggle ghx-release-toggle"><span class="ghx-inner">' + soy.$$escapeHtml('Versions') + '</span></li>' + ((opt_data.shouldShowEpic) ? '<li role="button" class="js-epic-toggle ghx-epic-toggle"><span class="ghx-inner">' + soy.$$escapeHtml('Epics') + '</span></li>' : '') + '</ul></div><div id="ghx-version-column" class="ghx-version-column ghx-classification-column ' + ((opt_data.isbacklogDataV2Enabled) ? ' ghx-hidden ' : '') + ' ' + ((opt_data.shouldHidePanels) ? ' agility-backlog-panel-hidden' : '') + '"></div><div id="ghx-epic-column" class="ghx-epic-column ghx-classification-column ' + ((opt_data.isbacklogDataV2Enabled) ? ' ghx-hidden ' : '') + ' ' + ((opt_data.shouldHidePanels) ? ' agility-backlog-panel-hidden' : '') + '" ></div><div id="ghx-backlog-column" class="ghx-backlog-column"><div id="ghx-backlog" class="ghx-backlog' + ((opt_data.shouldHidePanels) ? ' agility-backlog' : '') + '"></div></div><div id="ghx-detail-view" class="ghx-detail-view ghx-detail-view-with-voter"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderSkeleton.soyTemplateName = 'GH.tpl.plancontroller.renderSkeleton';
}


GH.tpl.plancontroller.renderEpicPanelTipsyExpand = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml('Show epics panel') + '<b>' + soy.$$escapeHtml('Use epics to plan features across multiple sprints.') + '</b>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderEpicPanelTipsyExpand.soyTemplateName = 'GH.tpl.plancontroller.renderEpicPanelTipsyExpand';
}


GH.tpl.plancontroller.renderVersionPanelTipsyExpand = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml('Show versions panel') + '<b>' + soy.$$escapeHtml('Use versions to keep track of code releases.') + '</b>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderVersionPanelTipsyExpand.soyTemplateName = 'GH.tpl.plancontroller.renderVersionPanelTipsyExpand';
}


GH.tpl.plancontroller.renderErrorBlock = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item"><div class="ghx-classification-error"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="error">' + soy.$$escapeHtml(opt_data.errorText) + '</span></h3><span class="aui-button aui-button-compact js-try-again" role="button">' + soy.$$escapeHtml('Try again') + '</span></div></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.plancontroller.renderErrorBlock.soyTemplateName = 'GH.tpl.plancontroller.renderErrorBlock';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/KanbanTransitionAndRank.js' */
define("jira-agile/rapid/ui/plan/kanban-transition-and-rank",["require"],function(e){"use strict";function a(e){return GH.Ajax.put({url:"/xboard/transitionAndRank",data:e}).fail(function(a){GH.RapidBoard.ViewController.showErrorPanelDragAndDrop(e.issueKeys,a),f.reload()})}function n(e){return GH.Ajax.put({url:"/xboard/assignToListAndRank",data:e}).fail(function(a){GH.RapidBoard.ViewController.showErrorPanelDragAndDrop(e.issueKeys,a),f.reload()})}function s(e,a,n,s){return h.fireTransitionAnalytics("jira-software.plan.issuecard.drop.success",e),y.refreshDetailsView(s),e.calculateNewIssuesOrder&&m.reorderIssuesInSprint(a.newIssuesOrder,n),JIRA.trace("gh.plan.ranking.complete"),h.triggerIssuesUpdateEvent(e.issueKeys),AJS.$.Deferred().resolve().promise()}function r(e,a){h.fireTransitionAnalytics("jira-software.plan.issuecard.drop.success",e);var n=g.getIssueIdForKey(e.issueKeys[0]);return GH.WorkDragAndDrop.executeWorkflowTransition(n,a.id,a.targetStatus),i(e)}function i(e){return GH.RankController.rankIssues(e.rankCustomFieldId,e.issueKeys,e.rankBeforeIssueIdOrKey,e.rankAfterIssueIdOrKey).fail(function(a){t(!1,e.issueKeys.length),GH.RapidBoard.ViewController.showErrorPanelDragAndDrop(e.issueKeys,a),f.reload()}).done(function(a){var n=GH.RankController.getErrorRankResultFromResponse(a);n?(t(!1,e.issueKeys.length,n.errors[0]),GH.Notification.showWarning(n.errors[0]),f.reload()):(t(!0,e.issueKeys.length),a.success.rankableChanges.forEach(function(e){if(e.wasChanged){var a=[{name:"customfield_"+GH.BacklogModel.getRankCustomFieldId()}];GH.RapidBoard.sendIssueUpdatedTrackEvent(GH.BacklogModel.getIssueData(e.issueKey),a)}}),JIRA.trace("gh.plan.ranking.complete"))})}function t(e,a,n){var s={name:"jira-software.plan.issuecard.drag-rank."+(e?"success":"error"),data:{boardtype:"kanban",issuecount:a}};n&&(s.data.cause=n),AJS.trigger("analyticsEvent",s)}function o(n,i,t,o){var d=void 0,l=w.isFeatureEnabled("jsw.classic.keto"),c=e("jira-agile/rapid/const/PageMode");return k.handleDeferredResourceImport(l&&GH.RapidBoard.State.getMode()===c.PLAN,function(){var l=e("jira-agile/rapid/ui/kanplan/kan-plan-dialog-utils");d=l.createTransitionStatusDialog(i.possibleTransitions,n.issueKeys),d.on("submit",function(e){h.trigger("before:submitMultipleTransitionsDialog",{selectedIssueNo:n.issueKeys.length}),h.fireViewAnalytics("jira-software.plan.transition-menu.view.confirm",n,i);var d=u.find(i.possibleTransitions,function(a){return a.id===parseInt(e)}),l=void 0;d.hasTransitionView?l=r(n,d):(n.selectedTransitionId=d.id,l=a(n).then(function(e){return h.showTransitionSuccessMessage(n.issueKeys),e.isSuccess()&&h.sendIssueTransitionedTrackEvent(n,i),s(n,e.success,t,o)})),l.always(function(){h.trigger("after:submitMultipleTransitionsDialog")})},d),d.on("cancel",function(){h.fireTransitionAnalytics("jira-software.plan.issuecard.transition.selection.dialog.cancelled",n),h.fireViewAnalytics("jira-software.plan.transition-menu.view.cancel",n,i),f.reload()},d),d.show()}),AJS.$.Deferred().resolve().promise()}var d=e("jquery"),u=e("underscore"),l=e("jira/dialog/dialog-register"),c=e("jira-agile/rapid/global-events"),g=e("jira-agile/rapid/ui/plan/backlog-model"),f=e("jira-agile/rapid/ui/plan/plan-controller"),p=e("jira-agile/rapid/ui/plan/issue-move-controller"),v=e("jira/util/events"),I=e("jira-agile/rapid/events"),k=e("jira-agile/rapid/deferred-resources-loader"),w=e("jira/featureflags/feature-manager"),y=void 0,m=void 0,T=void 0;c.on("pre-initialization",function(){m=e("jira-agile/rapid/ui/plan/backlog-controller"),T=e("jira-agile/rapid/ui/plan/BacklogView"),y=e("jira-agile/rapid/ui/plan/plan-drag-and-drop")}),v.bind("Dialog.hide",function(e,a,n,s){if(GH.RapidBoard.State.isPlanMode()&&GH.RapidBoard.State.isKanbanBoard()&&s&&s.match(/^workflow-transition-(\d+)-dialog$/)&&l[s].cancelled){f.reload();var r=g.sprintModels[0].sprintData.column.statusIds,i=GH.WorkDragAndDrop.transitionTargetStatus;AJS.trigger("analyticsEvent",{name:"jira-software.plan.issuecard.transition.view.dialog.cancelled",data:{boardtype:"kanban",toselectedfordevelopment:r.indexOf(i.toString())!==-1,issuecount:1}})}});var h=new I;h.transitionAndRankIssues=function(e,n,t,u){if(0===e.length)return d.Deferred().resolve();var l=p.calculateIssueMoveModel(e,n),c=m.moveIssues(e,n,t,u),f={rapidViewId:GH.RapidBoard.State.getRapidViewId(),issueKeys:e,targetColumn:b(l),rankCustomFieldId:g.getRankCustomFieldId(),calculateNewIssuesOrder:c,rankBeforeIssueIdOrKey:u||void 0,rankAfterIssueIdOrKey:t||void 0,mode:GH.RapidBoard.State.getMode()};if(p.isOnlyRankOperation(l))return i(f);var v=function(e){var a=e.success;return 0===a.possibleTransitions.length?(h.sendIssueTransitionedTrackEvent(f,a),s(f,a,n,l)):a.possibleTransitions.length>1?o(f,a,n,l):r(f,a.possibleTransitions[0])};return a(f).then(v,function(){return d.Deferred().resolve()})},h.assignToListAndRank=function(e,a,r,t){if(0===e.length)return d.Deferred().resolve();var o=p.calculateIssueMoveModel(e,a),u=m.moveIssues(e,a,r,t),l={rapidViewId:GH.RapidBoard.State.getRapidViewId(),issueKeys:e,rankCustomFieldId:g.getRankCustomFieldId(),target:p.isMoveToBacklog(o)?"BACKLOG":"BOARD",calculateNewIssuesOrder:u,rankBeforeIssueIdOrKey:t,rankAfterIssueIdOrKey:r};if(p.isOnlyRankOperation(o))return i(l);var c=function(e){var n=e.success;return h.sendIssueRankedTrackEvent(l),s(l,n,a,o)};return n(l).then(c,function(){return d.Deferred().resolve()})},h.getObservable=function(){return AJS.$(GH)},h.triggerIssuesUpdateEvent=function(e){var a=this;e.forEach(function(e){var n=g.getIssueData(e);a.getObservable().trigger("issueUpdated",{issueId:n.id,source:"issueRank"})})},h.fireTransitionAnalytics=function(e,a){AJS.trigger("analyticsEvent",{name:e,data:{boardtype:"kanban",toselectedfordevelopment:!a.addToBacklog,issuecount:a.issueKeys.length}})},h.fireViewAnalytics=function(e,a,n){AJS.trigger("analyticsEvent",{name:e,data:{boardType:"kanban",issueCount:a.issueKeys.length,optionCount:n.possibleTransitions.length}})},h.showTransitionSuccessMessage=function(e){1===e.length?GH.Notification.showSuccess(AJS.format("Issue {0} successfully transitioned.",e)):GH.Notification.showSuccess(AJS.format("Issues {0} successfully transitioned.",e.join(", ")))};var b=function(e){var a=p.isMoveToBacklog(e),n=a?g.getBacklogModel2():g.getSprintModels()[0],s=n.getColumn();return s.id};return h.sendIssueTransitionedTrackEvent=function(e,a){var n=null;if(e.selectedTransitionId)n=a.possibleTransitions.find(function(a){return a.id===e.selectedTransitionId}).targetStatus;else{var s=m.rapidViewConfig.columns.find(function(a){return a.id==e.targetColumn});n=s.statusIds[0]}e.issueKeys.forEach(function(e){var a=GH.BacklogModel.getIssueData(e),s=a.status?a.status.id:null;if(s!==n){var r=[{name:"status",oldValId:s,newValId:n}];GH.RapidBoard.sendIssueUpdatedTrackEvent(a,r)}})},h.sendIssueRankedTrackEvent=function(e){"BOARD"!==e.target&&"BACKLOG"!==e.target||e.issueKeys.forEach(function(e){var a=GH.BacklogModel.getIssueData(e),n=[{name:"customfield_"+GH.BacklogModel.getRankCustomFieldId()}];GH.RapidBoard.sendIssueUpdatedTrackEvent(a,n)})},h});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanControls.js' */
define("jira-agile/rapid/ui/plan/plan-controls",["require"],function(i){var e=i("jquery"),t=i("underscore"),r=i("jira-agile/rapid/const/PageMode"),n=i("jira-agile/rapid/work/quick-filters-bridge"),c={};return c.rapidViewConfig={},c.quickfilters=void 0,c.searchFilter=void 0,c.setRapidViewConfig=function(i){c.rapidViewConfig=i,c.quickfilters.setRapidViewConfig(i)},c.init=function(){c.quickfilters=new GH.Components.QuickFilters("planQuickFilters"),c.searchFilter=new GH.Components.SearchFilter(t.debounce(GH.BacklogController.executeSearch),500)},c.setActiveQuickFilterIds=function(i){c.quickfilters.setActiveQuickFilters(i)},c.getActiveQuickFilterIds=function(){return c.quickfilters.getActiveQuickFilters()},c.renderControls=function(){var i=document.getElementById("ghx-quick-filters");n.isReactFiltersEnabled().then(function(e){e&&i&&(GH.bridge.FilterBridge.unmount(i),GH.bridge.FilterBridge.render(i))}),GH.ViewActions.setMode(r.PLAN)},c.stopEdits=function(){c.searchFilter.stopEdit(e("#ghx-controls-plan"))},c.resizeQuickFilters=function(){c.quickfilters.quickExpanderLayout({mode:r.PLAN})},c.getQuickFilters=function(){return c.quickfilters.getQuickFilters()},c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanUrlState.js' */
define("jira-agile/rapid/ui/plan/plan-url-state",["require"],function(e){"use strict";var i=e("underscore"),r=e("jira-agile/rapid/ui/plan/plan-controller"),s=e("jira-agile/rapid/ui/plan/plan-controls"),l=e("jira-agile/rapid/const/PageMode"),t=e("jira/featureflags/feature-manager"),a=e("jira-agile/rapid/deferred-resources-loader"),n=function(){return t.isFeatureEnabled("jsw.classic.keto")},o={};return o.self="PlanUrlState",o.isApplicable=function(e){return e.mode===l.PLAN},o.getNormalizedFromUrl=function(e,i){i["plan.selectedIssue"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedIssue,null),i.quickFilter=GH.RapidBoard.UrlState.normalizeNumberArrayParam(e.quickFilter),i.versions="visible"===GH.RapidBoard.UrlState.normalizeStringParam(e.versions,""),i.epics="visible"===GH.RapidBoard.UrlState.normalizeStringParam(e.epics,""),i.issueLimit=GH.RapidBoard.UrlState.normalizeNumberParam(e.issueLimit),i["plan.selectedEpic"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedEpic,null),i["plan.selectedVersion"]=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedVersion,null),i.search=GH.RapidBoard.UrlState.normalizeStringParam(e.search,""),i.assignee=GH.RapidBoard.UrlState.normalizeStringArrayParam(e.assignee,[]).map(function(e){return"_unassigned_"===e?"UNASSIGNED_USER_ID":e})},o.toUrl=function(e,r){i.isNull(e["plan.selectedIssue"])||(r.selectedIssue=e["plan.selectedIssue"]),e.quickFilter.length>0&&(r.quickFilter=e.quickFilter),e.versions&&(r.versions="visible"),e.epics&&(r.epics="visible"),i.isNull(e.issueLimit)||(r.issueLimit=e.issueLimit),i.isNull(e["plan.selectedEpic"])||(r.selectedEpic=e["plan.selectedEpic"]),i.isNull(e["plan.selectedVersion"])||(r.selectedVersion=e["plan.selectedVersion"]),e.search&&(r.search=encodeURIComponent(e.search)),e.assignee&&(r.assignee=e.assignee.map(function(e){return"UNASSIGNED_USER_ID"===e?"_unassigned_":encodeURIComponent(e)}))},o.getNormalizedFromInternal=function(e){r.init(),e["plan.selectedIssue"]=GH.BacklogSelectionController.getSelectedIssueKey(),e.quickFilter=s.quickfilters.getActiveQuickFilters(),e.versions=r.isVersionsColumnVisiblePersisted(),e.epics=r.isEpicsColumnVisiblePersisted(),e.issueLimit=r.getBacklogIssuesLimitConfig(),e["plan.selectedEpic"]=GH.EpicController.getFilteredEpicKey(),e["plan.selectedVersion"]=GH.VersionController.getFilteredVersionId(),e.search=GH.PlanController.activeFilters.searchText||"",e.assignee=GH.PlanController.activeFilters.assigneeList},o.updateInternalFromNormalized=function(e){r.init(),GH.BacklogSelectionController.setIssueFromUrlState(e["plan.selectedIssue"]),s.quickfilters.setActiveQuickFilters(e.quickFilter),r.setVersionsColumnVisible(e.versions),r.setEpicsColumnVisible(e.epics),r.setBacklogIssuesLimitConfig(e.issueLimit),GH.EpicController.setFilteredEpicKey(e["plan.selectedEpic"]),GH.VersionController.setFilteredVersionId(e["plan.selectedVersion"]),GH.PlanController.activeFilters.searchText=e.search,e.assignee&&a.handleDeferredResourceImport(n()&&!GH.WorkController,function(){GH.WorkController.activeFilters.assigneeList=e.assignee.map(function(e){return"_unassigned_"===e?"UNASSIGNED_USER_ID":e})})},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanRankController.js' */
define("jira-agile/rapid/ui/plan/plan-rank-controller",["require"],function(e){"use strict";var r=e("underscore"),a=e("jquery"),i=e("jira-agile/rapid/global-events"),s=void 0,n=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),t=e("jira-agile/rapid/ui/plan/backlog-model"),l=e("jira-agile/rapid/ui/plan/backlog-model2"),u=e("jira-agile/rapid/events");i.on("pre-initialization",function(){s=e("jira-agile/rapid/ui/plan/backlog-controller")});var o=new u;return o.init=function(){s=e("jira-agile/rapid/ui/plan/backlog-controller"),s.registerIssueCreatedCallback("rankIssues",o.rankCreatedIssues)},o.rankCreatedIssues=function(e){var r=n.getSelectedIssuesInOrder();return r&&r.length>0?o.rankCreatedIssuesBySelection(e,r):o.rankCreatedIssuesByVisibility(e)},o.rankCreatedIssuesBySelection=function(e,a){var i,s,n=r.last(a),u=t.findModelWithIssue(r.first(a));if(u&&l.isBacklogModel(u)?(i=n,s=!1):(i=t.getBacklogModel2().getIssueList().getFirstRankableIssueKeyInColumn(),s=!0),i)return o.rankCreatedIssuesAgainstIssue(e,i,s)},o.rankCreatedIssuesByVisibility=function(e){function r(e){var r=e.offset().top;return r>l&&r<t+l}var i,s=a(".ghx-backlog-group"),n=a(".js-issue",s),t=a(document).height(),l=a(document).scrollTop(),u=n.filter(function(){var e=a(this);return r(e)});if(i=u.length>0?u.first():n.first(),i&&1===i.length){var d=i.attr("data-issue-key");return o.rankCreatedIssuesAgainstIssue(e,d,!0)}},o.rankCreatedIssuesAgainstIssue=function(e,a,i){var s=r.pluck(e,"issueKey"),n=s.reverse();return GH.RankController.rankIssues(t.getRankCustomFieldId(),n,i?a:null,i?null:a,{deferErrorHandling:!0})},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogModel.js' */
var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e};define("jira-agile/rapid/ui/plan/backlog-model2",["require"],function(e){var t=function(t,s,n){var i=e("jira-agile/rapid/ui/plan/issue-list-model");this.column=s,this.issueList=new i("backlog",t,GH.VersionController.getVersionModel()),this.isIssueLimitExceeded=n||!1};return t.isBacklogModel=function(e){return"backlog"===e.getType()},t.prototype.getIssueList=function(){return this.issueList},t.prototype.getId=function(){return"backlog"},t.prototype.getType=function(){return"backlog"},t.prototype.getColumn=function(){return this.column},t}),define("jira-agile/rapid/ui/plan/backlog-model",["require"],function(e){"use strict";function t(t){var s=e("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper"),n=t.issues,r=t.sprints,u={};i.each(r,function(e){i.each(e.issuesIds,function(t){u[t]=e.id})});var l={};i.each(r,function(e){l[e.id]=[]});var d=[];i.each(n,function(e){s.prepareExtraFields(e.extraFields);var t=u[e.id];t?l[t].push(e):d.push(e)});var c=[];i.each(r,function(e){var t=new a(e,l[e.id]);c.push(t)});var g=new GH.BacklogModel2(d,(void 0),t.isIssueLimitExceeded);o.sprintModels=c,o.backlogModel2=g,o.addFakeBacklogModel(d)}function s(t){var s=e("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper"),n=t.backlogColumn.statusIds,r=t.selectedForDevelopmentColumn.statusIds,u=[],l=[];i.each(t.issues,function(e){s.prepareExtraFields(e.extraFields),n.indexOf(e.statusId)!==-1?u.push(e):r.indexOf(e.statusId)!==-1&&l.push(e)}),o.backlogModel2=new GH.BacklogModel2(u,t.backlogColumn,t.isIssueLimitExceeded),o.sprintModels=[new a({id:-1,name:t.selectedForDevelopmentColumn.name,state:"FUTURE",column:t.selectedForDevelopmentColumn},l)],o.addFakeBacklogModel(u,t.backlogColumn)}function n(t){var s=e("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper"),n=t.boardIssueIds,r=[],u=[];i.each(t.issues,function(e){s.prepareExtraFields(e.extraFields),n.indexOf(e.id)!==-1?u.push(e):r.push(e)}),o.backlogModel2=new GH.BacklogModel2(r,{},t.isIssueLimitExceeded),o.sprintModels=[new a({id:-1,name:"On the Board",state:"FUTURE",column:{}},u)],o.addFakeBacklogModel(r)}var i=e("underscore"),r=e("jira-agile/rapid/global-events"),a=e("jira-agile/rapid/ui/plan/sprint-model"),u=e("jira-agile/rapid/ui/plan/plan-issue-list-filtering"),l=null;r.on("pre-initialization",function(){l=e("jira-agile/rapid/ui/plan/sprint-controller")});var o={};o.rankCustomFieldId=void 0,o.estimationStatistic={},o.trackingStatistic={},o.sprintModels=[],o.backlogModel2=null,o.setData=function(e){o.calculateIssueLists(e),o.hasBulkChangePermission=e.hasBulkChangePermission,o.isIssueLimitExceeded=e.isIssueLimitExceeded},o.BACKLOG_ID="backlog";var d=function(e,t){var s=t.availableEpics||t.availableStatuses;return s?_extends({},e,e.epic&&t.availableEpics&&t.availableEpics[e.epic]?{epicField:t.availableEpics[e.epic]}:void 0,e.statusId&&t.availableStatuses&&t.availableStatuses[e.statusId]?{status:t.availableStatuses[e.statusId]}:void 0):e};return o.normalizeData=function(e){return _extends({},e,{issues:e.issues.map(function(t){return d(t,e)})})},o.calculateIssueLists=function(e){GH.RapidBoard.State.isScrumBoard()?t(e):GH.RapidBoard.State.isIssueListBacklog()?n(e):s(e)},o.addFakeBacklogModel=function(e,t){if(t=t?t:{},GH.RapidBoard.State.isCollapsibleBacklogEnabled()){var s=new a({id:o.BACKLOG_ID,name:"Backlog",state:"FUTURE",column:t},e);o.sprintModels.push(s)}},o.addNewSprint=function(e){var t=new a(e,[]);GH.RapidBoard.State.isCollapsibleBacklogEnabled()?o.sprintModels.splice(o.sprintModels.length-1,0,t):o.sprintModels.push(t)},o.removeSprintAndMoveIssues=function(e){for(var t,s,n=o.getAllModels(),r=0;r<n.length;r++){var u=n[r];if(a.isSprintModel(u)&&u.getSprintId()===e){t=u,s=n[r+1];break}}var l=!1;if(t){var d=t.getIssueList().getIssuesInOrder();if(!i.isEmpty(d)){var c=s.getIssueList();c.prependIssues(d),l=GH.BacklogModel2.isBacklogModel(s)}o.sprintModels=i.reject(o.sprintModels,function(t){return t.getSprintId()===e})}return l},o.updateDataForSprint=function(e,t){var s=o.getSprintModel(e);return s&&s.setSprintData(t),s},o.moveSprintUp=function(e){return o._swapSprint(e,-1)},o.moveSprintDown=function(e){return o._swapSprint(e,1)},o._swapSprint=function(e,t){var s=GH.Util.indexOf(o.sprintModels,function(t){if(t.getSprintId()===e)return t});if(GH.Util.swapArrayItems(o.sprintModels,s,s+t)){var n=o.sprintModels[s];return n.getSprintId()}return null},o.getSprintModels=function(){return o.sprintModels},o.getActiveSprintModels=function(){return i.filter(o.sprintModels,function(e){return"ACTIVE"===e.getSprintData().state})},o.getFutureSprintModels=function(){return i.filter(o.sprintModels,function(e){return"FUTURE"===e.getSprintData().state&&e.getSprintId()!==o.BACKLOG_ID})},o.getSprintModel=function(e){return i.find(o.sprintModels,function(t){return e===t.getSprintId()})},o.getBacklogModel2=function(){return GH.RapidBoard.State.isCollapsibleBacklogEnabled()?i.last(o.sprintModels):o.backlogModel2},o.getAllModels=function(){if(GH.RapidBoard.State.isCollapsibleBacklogEnabled())return o.getSprintModels();var e=o.getSprintModels(),t=o.getBacklogModel2();return i.flatten([e,t],!0)},o.getAllIssueListsNew=function(){var e=[];return GH.RapidBoard.State.isCollapsibleBacklogEnabled()?i.each(o.getSprintModels(),function(t){e.push(t.getIssueList())}):(i.each(o.getSprintModels(),function(t){e.push(t.getIssueList())}),o.getBacklogModel2()&&e.push(o.getBacklogModel2().getIssueList())),e},o.findModelWithIssue=function(e){var t=null;return i.any(o.getAllModels(),function(s){return!!s.getIssueList().isIssueValid(e)&&(t=s,!0)}),t},o.getNextModel=function(e){for(var t=o.getAllModels(),s=0;s<t.length;s++)if(e.getId()===t[s].getId()){if(s+1<t.length)return t[s+1];break}return null},o.calculateRankingDataForSprintMarkerMove=function(e,t,s){var n=o._calculateIncludedModelsData(e,t);if(e===t){var r=[];if(r=s?n.draggedSprintModel.getIssueList().getVisibleIssuesDataAfterKey(s):n.draggedSprintModel.getIssueList().getAllVisibleIssuesData(),!i.isEmpty(r)){var u=o.getNextModel(n.draggedSprintModel);if(u){var l=a.isSprintModel(u)?u.getSprintId():null,d=i.first(u.getIssueList().getIssuesInOrder()),c=d?d.key:null,g=i.map(r,function(e){return e.key});if(!i.isEmpty(g))return{sprintId:l,nextRankableId:c,issueKeys:g}}}}else{var p=o.getIssueDataForVisisbleIssuesInModelsUpToIssueKey(n.otherAffectedModels,t,s),l=e,I=i.last(n.draggedSprintModel.getIssueList().getIssuesInOrder()),f=I?I.key:null,g=i.map(p,function(e){return e.key});if(!i.isEmpty(g))return{sprintId:l,prevRankableId:f,issueKeys:g}}return null},o.calculateTemporaryDataForSprintWithMarker=function(t,s,n){var r=o._calculateIncludedModelsData(t,s),a=r.draggedSprintModel.getIssueList().getAllInvisibleIssuesData(),u=o.getIssueDataForVisisbleIssuesInModelsUpToIssueKey(r.models,s,n),l=i.flatten([a,u],!0),d=i.map(a,function(e){return e.key}),c=e("jira-agile/rapid/ui/plan/issue-list-model"),g=new c("fakesprint-"+t,l,GH.VersionController.getVersionModel());return g.setHiddenBySearchIssues(d),{issueList:g,modelsData:r}},o._calculateIncludedModelsData=function(e,t){for(var s=o.getSprintModels(),n=!1,i={draggedSprintModel:null,otherAffectedModels:[],models:[]},r=0;r<s.length;r++){var a=s[r],u=a.getSprintId();if(u==e?(i.draggedSprintModel=a,i.models.push(a),n=!0):n&&l.isTwixieOpen(u)&&(i.otherAffectedModels.push(a),i.models.push(a)),u==t)break}return t||(i.otherAffectedModels.push(o.getBacklogModel2()),i.models.push(o.getBacklogModel2())),i},o.getIssueDataForVisisbleIssuesInModelsUpToIssueKey=function(e,t,s){for(var n=[],r=0;r<e.length;r++){var u=e[r],l=u.getIssueList(),o=a.isSprintModel(u);o&&u.getSprintId()===t||!o&&!t?s&&n.push(l.getVisibleIssuesDataBeforeIncludingKey(s)):n.push(l.getAllVisibleIssuesData())}return n=i.flatten(n,!0)},o.reorderIssuesInModel=function(e,t){var s=t||"backlog",n=o.getAllModels().find(function(e){return e.getId()===s});if(n){var i=n.getIssueList(),r=i.getAllIssues();return i.setOrder(e.filter(function(e){return r[e]})),[n]}return[]},o.moveIssuesNew=function(e,t,s,n){if(0!==e.length){var r=[],a=[],u=t||"backlog",l=null;if(i.each(o.getAllModels(),function(t){if(t.getId()==u)l=t;else{var s=t.getIssueList(),n=s.removeIssues(e);i.isEmpty(n)||(a.push(t),r.push(n))}}),r=i.flatten(r,!0),l){var d=l.getIssueList();d.addIssues(r),d.reorderIssues(e,s,n),a.push(l)}return a}},o.hasAnySubtasks=function(e){var t=this;if(!e)throw"Selection of issueKeys as an {array} must be provided.";return e.some(function(e){return t.getIssueData(e).parentId})},o.assignSubtasksToSameEpicAsParent=function(e){e.forEach(function(e){var t=o.getIssueData(e);t&&i.each(o.getSubtasks(e),function(e){e.epic=t.epic})})},o.isIssueSelectable=function(e){var t=o.getAllIssueListsNew();return i.any(t,function(t){return t.isIssueValid(e)&&t.isIssueVisible(e)})},o.getIssueIndex=function(e){var t=-1,s=o.getAllIssueListsNew();return i.any(s,function(s){return!!s.isIssueValid(e)&&(t=s.getIssueIndex(e),!0)}),t},o.canAddToSelection=function(e,t){var s=o.getAllIssueListsNew();return i.any(s,function(s){return s.isIssueValid(t)&&s.canAddToSelection(e,t)})},o.getIssueRange=function(e,t){var s=[],n=o.getAllIssueListsNew();return i.any(n,function(n){return!(!n.isIssueValid(e)||!n.isIssueValid(t))&&(s=n.getIssueRange(e,t),!0)}),s},o.getNextIssueKey=function(e){for(var t=o.getAllModels(),s=0;s<t.length;s++){var n=t[s];if(n.getIssueList().isIssueValid(e)){var i=!1,r=a.isSprintModel(n),u=l.isTwixieOpen(n.getId());if((r&&u||!r)&&(i=n.getIssueList().getNextIssueKey(e)))return i;for(var d=s+1;d<t.length;d++){var c=t[d];if(r=a.isSprintModel(c),u=l.isTwixieOpen(c.getId()),(!r||u)&&(i=c.getIssueList().getFirstVisibleIssueKey()))break}return i}}},o.getPreviousIssueKey=function(e){for(var t=o.getAllModels(),s=0;s<t.length;s++){var n=t[s];if(n.getIssueList().isIssueValid(e)){var i=!1,r=a.isSprintModel(n),u=l.isTwixieOpen(n.getId());if((r&&u||!r)&&(i=n.getIssueList().getPreviousIssueKey(e)))return i;for(var d=s-1;d>=0;d--){var c=t[d];if(r=a.isSprintModel(c),u=l.isTwixieOpen(c.getId()),(!r||u)&&(i=c.getIssueList().getLastVisibleIssueKey()))break}return i}}},o.getFirstRankableIssueKeyInColumn=function(e){var t=null!=e,s=t?[e]:[],n=!1,r=o.getAllIssueListsNew();return i.any(r,function(i){return!(t&&!i.isIssueValid(e))&&(n=i.getFirstRankableIssueKeyInColumn(s),!0)}),n},o.getLastRankableIssueKeyInColumn=function(e){var t=null!=e,s=t?[e]:[],n=!1,r=o.getAllIssueListsNew();return i.any(r,function(i){return!(t&&!i.isIssueValid(e))&&(n=i.getLastRankableIssueKeyInColumn(s),!0)}),n},o.getBestFitSelectionAfterRank=function(e){var t=o.findModelWithIssue(i.first(e));return t?t.getIssueList().getBestFitSelectionAfterRank(e):null},o.setRankCustomFieldId=function(e){o.rankCustomFieldId=e},o.setEstimationStatistic=function(e){o.estimationStatistic={isEnabled:e.isEnabled,typeId:e.typeId,name:e.name,renderer:e.renderer}},o.setTrackingStatistic=function(e){o.trackingStatistic={isEnabled:e.isEnabled,typeId:e.typeId,name:e.name,renderer:e.renderer}},o.isRankable=function(){return!i.isUndefined(o.rankCustomFieldId)},o.getRankCustomFieldId=function(){return o.rankCustomFieldId},o.getHiddenBySearchIssues=function(){var e={};return i.each(o.getAllIssueListsNew(),function(t){var s=t.getHiddenBySearchIssues();e=i.extend(e,s)}),e},o.isSubtask=function(e){return o._anyIssueList(e,function(t){return t.isSubtask(e)})},o.getSubtasks=function(e){var t=[];return i.each(o.getAllIssueListsNew(),function(s){t=t.concat(s.getSubtasks(e))}),t},o.getIssueData=function(e){return o._anyIssueList(e,function(t){return t.getIssueData(e)})},o.getIssueDataForId=function(e){return o._anyIssueList(e,function(t){return t.getIssueDataForId(e)})},o.getIssueIdForKey=function(e){return o._anyIssueList(e,function(t){return t.getIssueIdForKey(e)})},o.isParentAndCollapsed=function(e){return o._anyIssueList(e,function(t){return t.isCollapsed(e)&&t.hasSubTasks(e)})},o.map=function(e){return o.getAllIssueListsNew().reduce(function(t,s){var n=s.getAllIssues();return t.concat(Object.keys(n).map(function(t){return e(n[t])}))},[])},o._anyIssueList=function(e,t){var s=null;return i.any(o.getAllIssueListsNew(),function(n){return!!n.isIssueValid(e)&&(s=t(n),!0)}),s},o.isIssueVisible=function(e){var t=o.findModelWithIssue(e);if(t){var s=t.getIssueList();return s.isIssueValid(e)&&s.isIssueVisible(e)}return!1},o.hasAnyIssueInvisible=function(e){return e.some(function(e){return!o.isIssueVisible(e)})},o.canManageSprints=function(){return o._canManageSprints},o.setCanManageSprints=function(e){o._canManageSprints=e},o.complexQuery=function(){return Boolean(o._complexQuery)},o.setComplexQuery=function(e){o._complexQuery=e},o.canCreateIssue=function(){return o._canCreateIssue},o.setCanCreateIssue=function(e){o._canCreateIssue=e},o.supportsPages=function(){return o._supportsPages},o.setSupportsPages=function(e){o._supportsPages=e},o.updateFiltering=function(){var e=o.getAllIssueListsNew();return u.applyToIssueLists(e)},o.getEpicsFilteredForVersion=function(e){var t=!1;i.isString(e)&&(u.isNoneVersionFilterId(e)?t=!0:e=parseInt(e,10));var s=GH.EpicController.getEpicModel().getEpicList();if(!s||0===s.getIssueCount())return[];var n=s.getOrder(),r=[];return i.each(o.getAllIssueListsNew(),function(s){if(n.length>0){var a=s.getAllIssues();i.each(a,function(s){if(s.epic&&i.contains(n,s.epic)){var a=!1;if(t&&i.isEmpty(s.fixVersions)?a=!0:!t&&i.contains(s.fixVersions,e)&&(a=!0),a&&(r.push(s.epic),n=i.without(n,s.epic),0===n.length))return!1}})}}),{filtered:n,unfiltered:r}},o.removeEpicFromIssues=function(e){var t=[];return i.each(e,function(e){var s=o.getIssueData(e);s&&s.epic&&(delete s.epic,t.push(s))}),t},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintController.js' */
define("jira-agile/rapid/ui/plan/sprint-controller",["require"],function(e){"use strict";var t,i,r=e("jquery"),a=e("jira-agile/rapid/global-events"),n=e("jira-agile/rapid/analytics-tracker"),o=e("jira-agile/rapid/ui/plan/sprint-view"),d=e("jira-agile/rapid/ui/plan/backlog-model"),p=e("jira-agile/rapid/const/PageMode"),s=e("jira/featureflags/feature-manager"),l=e("jira-agile/rapid/deferred-resources-loader"),g=e("jira-agile/browser-metrics/browser-metrics-util"),u=function(){return s.isFeatureEnabled("jsw.classic.keto")},c=function(e,t){return f.analytics.trigger("deletesprint"),g.triggerBefore("before:deleteSprintSubmit","backlogDelete"),GH.Ajax.del({url:"/sprint/"+t+"?rapidViewId="+e})};a.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/plan/backlog-controller"),i=e("jira-agile/rapid/ui/plan/BacklogView")});var f={};return f.analytics=new n("gh.rapidboard.sprint.controller"),f.init=function(){o.init(),l.handleDeferredResourceImport(u()&&GH.RapidBoard.State.getMode()===p.PLAN,function(){r(GH).bind(GH.Components.EVENT_SPRINT_UPDATED,f.handleSprintUpdated)})},f.handleSprintUpdated=function(e,t){var r=d.updateDataForSprint(t.id,t);r&&i.redrawChangedModel(r),g.triggerAfter("after:editSprintSubmit")},f.addSprint=function(){var e=r(this);GH.Util.UI.isDisabled(e)||(g.triggerBefore("before:createSprint"),GH.Util.UI.ariaDisable(e),GH.Ajax.post({url:"/sprint/"+t.rapidViewData.id}).done(function(e){f.analytics.trigger("addsprint");var t=e.success;d.addNewSprint(t),i.updateSprintsAfterAddRemove()}).always(function(){GH.Util.UI.ariaEnable(e),g.triggerAfter("after:createSprint")}))},f.openSprintDateDialog=function(t){var i=GH.RapidBoard.State.getRapidViewId(),r=d.getSprintModel(t);g.triggerBefore("before:sprintDatePopup"),l.handleDeferredResourceImport(u()&&GH.RapidBoard.State.getMode()===p.PLAN,function(){var t=e("jira-agile/rapid/ui/dialog/edit-sprint-dialog");t.show(i,r),AJS.trigger("analyticsEvent",{name:"jira-software.plan.sprint.date-dialog.view",data:{sprintState:r.sprintData.state}})})},f.openStartSprintDialog=function(e){g.triggerBefore("before:sprintStartPopup");var t=GH.RapidBoard.State.getRapidViewId(),i=d.getSprintModel(e),r=i.getIssueList();if(!(r.getAllIssues().length<1)){var a=r.getNumVisibleIssues();u()&&!GH.Dialogs.StartSprintDialog&&GH.Dialog.dim(),l.triggerOnDemandResourceLoadWithCondition(u()&&!GH.Dialogs.StartSprintDialog,["wrc!gh-rapid-lwf-board-deferred"],"backlog",function(){GH.Dialogs.StartSprintDialog.showDialog(t,e,a)},function(){GH.Dialog.undim()})}},f.deleteSprintFromBacklog=function(e){var t=GH.RapidBoard.State.getRapidViewId(),i=d.getSprintModel(e).sprintData;f.deleteSprint(t,i,f.onDialogueConfirm)},f.onDialogueConfirm=function(e){var t=d.removeSprintAndMoveIssues(e);t?i.draw():i.updateSprintsAfterAddRemove(),g.triggerAfter("after:deleteSprintSubmit","backlogDelete")},f.deleteSprint=function(e,t,i){l.handleDeferredResourceImport(u()&&GH.RapidBoard.State.getMode()===p.PLAN,function(){GH.ConfirmDialog.create("ghx-remove-planned-sprint-confirm-dialog",{contentEscaping:!1,content:AJS.format("Are you sure you want to delete sprint {0}{1}{2}?","<b>",AJS.escapeHTML(String(t.name)),"</b>"),header:"Delete sprint",onConfirmFn:function(){return c(e,t.id).done(function(){return i(t.id)})},analyticsPageName:"deleteSprintModal"}).show()})},f.isTwixieOpen=function(e){return"open"===f._getTwixieState(e)},f.toggleTwixie=function(e){var t=f.isTwixieOpen(e);f.setTwixieOpen(e,!t)},f.setTwixieOpen=function(e,t){var i=t?"open":"closed";f._setTwixieState(e,i),o.updateTwixieState(e),e===d.BACKLOG_ID&&AJS.trigger("analyticsEvent",{name:"jira-software.boards.backlog.collapse",data:{state:i}})},f._setTwixieState=function(e,t){var i="sprintTwix-"+e;GH.BoardState.setPerViewValue(i,t)},f._getTwixieState=function(e){var t="sprintTwix-"+e;return GH.BoardState.getPerViewValue(t,"open")},f.moveSprintUp=function(e){f._moveSprint(e,d.moveSprintUp)},f.moveSprintDown=function(e){f._moveSprint(e,d.moveSprintDown)},f._moveSprint=function(e,t){var r=t(e);null!=r&&(i.updateSprintsAfterAddRemove(),GH.Ajax.put({url:"/sprint/"+e+"/swap",data:{otherSprintId:r}}).done(function(){f.analytics.trigger("movesprint")}).fail(function(){t(r),i.updateSprintsAfterAddRemove()}))},f.editSprint=function(t){var i=GH.RapidBoard.State.getRapidViewId(),r=d.getSprintModel(t);g.triggerBefore("before:sprintEditPopup"),l.handleDeferredResourceImport(u()&&GH.RapidBoard.State.getMode()===p.PLAN,function(){var t=e("jira-agile/rapid/ui/dialog/edit-sprint-dialog");t.show(i,r),AJS.trigger("analyticsEvent",{name:"jira-software.plan.sprint.edit-dialog.view",data:{sprintState:r.sprintData.state}}),AJS.trigger("analyticsEvent",{name:"jsw.agility.backlog.sprint.edit"})})},f.triggerAnalytics=function(e){if(1===e.changes.length){var t,i=e.changes[0],r=i.currentSprint,a=i.targetSprint;r&&a&&"FUTURE"===r.state&&"FUTURE"===a.state&&(t="movebetweenfuturesprints"),r&&a&&"ACTIVE"===r.state&&"ACTIVE"===a.state&&(t="movebetweenactivesprints"),r&&a&&"FUTURE"===r.state&&"ACTIVE"===a.state&&(t="movefromfuturetoactivesprint"),r&&a&&"ACTIVE"===r.state&&"FUTURE"===a.state&&(t="movefromactivetofuturesprint"),!r&&a&&"ACTIVE"===a.state&&(t="addtoactivesprint"),!r&&a&&"FUTURE"===a.state&&(t="addtofuturesprint"),r&&!a&&"FUTURE"===r.state&&(t="removefromfuturesprint"),r&&!a&&"ACTIVE"===r.state&&(t="removefromactivesprint"),t&&f.analytics.trigger(t)}},f});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintModel.js' */
define("jira-agile/rapid/ui/plan/sprint-model",["require"],function(t){"use strict";var i=t("underscore"),n=t("jira-agile/rapid/global-events"),r=null;n.on("pre-initialization",function(){r=t("jira-agile/rapid/ui/plan/backlog-model")});var e=function(i,n){var r=t("jira-agile/rapid/ui/plan/issue-list-model");this.sprintData=i,this.issueList=new r("sprint-"+i.id,n,GH.VersionController.getVersionModel())};return e.isSprintModel=function(t){return!!GH.RapidBoard.State.isCollapsibleBacklogEnabled()||"sprint"===t.getType()},e.prototype.getSprintData=function(){return this.sprintData},e.prototype.setSprintData=function(t){this.sprintData=t},e.prototype.getIssueList=function(){return this.issueList},e.prototype.getId=function(){return this.sprintData.id},e.prototype.getType=function(){return"sprint"},e.prototype.getName=function(){return this.sprintData.name},e.prototype.getSprintId=function(){return this.sprintData.id},e.prototype.isFutureSprint=function(){return"FUTURE"===this.sprintData.state},e.prototype.isActiveSprint=function(){return"ACTIVE"===this.sprintData.state},e.prototype.isBacklog=function(){return this.sprintData.id===r.BACKLOG_ID},e.prototype.getColumn=function(){return this.sprintData.column},e.prototype.getLinkedPagesCount=function(){var t=this.sprintData.linkedPagesCount,n=GH.PageIssueLinksModel.list(this.sprintData.id).length,r=t;return(!i.isNumber(t)||t<n)&&(r=n),r},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintView.js' */
define("jira-agile/rapid/ui/plan/sprint-view",["require","underscore","jira-agile/rapid/global-events","jira-agile/rapid/analytics-tracker","jira-agile/rapid/ui/plan/sprint-model","jira-agile/rapid/ui/plan/backlog-model","jira-agile/rapid/ui/plan/backlog-statistics","jira-agile/tooltip","jira-agile/rapid/const/PageMode"],function(t,e,i,a,n,r,s,o,l){"use strict";var d,p,g=t("jira-agile/rapid/ui/plan/xflow-plan-sprint-bridge"),c=t("jira/featureflags/feature-manager"),S=t("jira-agile/rapid/deferred-resources-loader");i.on("pre-initialization",function(){d=t("jira-agile/rapid/ui/plan/sprint-controller"),p=t("jira-agile/rapid/ui/plan/backlog-controller")});var u={};u.init=function(){var t=AJS.$(document);t.on("click",".js-sprint-start",u.handleStartSprintClick),t.on("click",".js-sprint-container .js-view-entity-pages",u.handleViewSprintLinkedPages),t.on("click",".js-assigned-work-dialog-trigger",u.handleViewAllAssignedWork),t.on("click keypress",".ghx-set-sprint-date",u.handleSprintDateClick)},u.handleStartSprintClick=function(t){if(!AJS.$(t.target).hasClass("disabled")){var e=u.getSprintIdForElement(t.target);d.openStartSprintDialog(e)}},u.handleSprintDateClick=function(t){if("keypress"!==t.type||13===t.keyCode){var e=u.getSprintIdForElement(t.target);d.openSprintDateDialog(e)}},u.showSprintLinkedPagesDialog=function(t,e){var i=AJS.$(t),a=u.getSprintIdForElement(i);GH.LinkedPagesController.showDialogForSprint(l.PLAN,a,i,e)},u.handleViewSprintLinkedPages=function(t){u.showSprintLinkedPagesDialog(t.target)},u.handleDeleteSprintClick=function(t){if(!AJS.$(t.target).hasClass("disabled")){var e=u.getSprintIdForElement(t.target);d.deleteSprintFromBacklog(e)}},u.handleViewAllAssignedWork=function(e){e.preventDefault();var i=u.getSprintIdForElement(e.target),n=r.getSprintModel(i),d=c.isFeatureEnabled("jsw.classic.keto");S.handleDeferredResourceImport(d&&GH.RapidBoard.State.getMode()===l.PLAN,function(){var e=t("jira-agile/rapid/ui/plan/assigned-work-dialog"),i=new e({id:"assigned-work-dialog",assignedWorkStats:s.getAssignedWorkStats(n.getIssueList()),sprintName:n.getName(),estimateStatisticName:r.estimationStatistic.name,trackingStatisticName:r.trackingStatistic.name});i.show()}),o.hide(".js-assigned-work-dialog-trigger"),new a("gh.assignedWork.dialog").trigger("show")},u._renderXflowPlanSprint=function(t,e){var i=GH.RapidBoard.State.isScrumBoard();if(i){var a=r.supportsPages(),n=t.find(".xflow-plan-sprint");n.length&&g.render(n[0],a,e.getLinkedPagesCount())}},u.registerTwixies=function(){AJS.$("#ghx-backlog").undelegate(".ghx-backlog-container .ghx-expander","click.sprintTwix"),AJS.$("#ghx-backlog").delegate(".ghx-backlog-container .ghx-expander","click.sprintTwix",u.handleTwixieClick)},u.handleTwixieClick=function(t){var e=AJS.$(this).closest(".ghx-backlog-container"),i=e.attr("data-sprint-id");d.toggleTwixie(i)},u.updateTwixieState=function(t){var e=d.isTwixieOpen(t),i=AJS.$('.js-sprint-container[data-sprint-id="'+t+'"]');e?i.removeClass("ghx-closed").addClass("ghx-open"):i.removeClass("ghx-open").addClass("ghx-closed")},u.updateSprintViewForModel=function(t){u._updateSprint(t)},u.renderAllSprints=function(t){var i=r.getSprintModels(),a=AJS.$("#ghx-backlog").find(".ghx-sprint-group").empty();GH.RapidBoard.State.isScrumBoard()&&g.tentativelyHideOriginalLinkedPages(),e.each(i,function(e){var i=AJS.$(GH.tpl.sprintview.renderSprintContainer({sprintData:e.getSprintData(),isMetaExpanded:d.isTwixieOpen(e.getSprintId()),isKanbanColumn:GH.RapidBoard.State.isKanbanBoard()&&!e.isBacklog()})),n=u._renderSprintContent(e,t);u._renderXflowPlanSprint(n,e),i.filter(".ghx-backlog-container").append(n),a.append(i)}),u.enableTooltips(),c.isFeatureEnabled("jsw.lightbulb.backlog.classic.insights-button-enabled")&&GH.RapidBoard.ViewController.insightsOpen&&AJS.$("#ghx-issue-fragment").trigger("backlog-refreshInsightsPanel")},u._updateSprint=function(t){var e=AJS.$('.js-sprint-container[data-sprint-id="'+t.getSprintId()+'"]');if(0!==e.length){var i=p.calculateIssueRenderData(),a=u._renderSprintContent(t,i);u._renderXflowPlanSprint(a,t),e.empty().append(a),u.enableTooltips(),c.isFeatureEnabled("jsw.lightbulb.backlog.classic.insights-button-enabled")&&GH.RapidBoard.ViewController.insightsOpen&&AJS.$("#ghx-issue-fragment").trigger("backlog-refreshInsightsPanel")}},u._renderSprintContent=function(t,e){var i=u.calculateSprintIssueListStats(t,t.getIssueList()),a=t.getSprintData(),n=u._getManageSprintData(a),s=GH.RapidBoard.State.isKanbanBoard()?a.column.min:void 0,o=GH.RapidBoard.State.isKanbanBoard()?a.column.max:void 0,l=t.getIssueList().getVisibleRankables(),d=t.getIssueList().getAllIssues(),g=GH.IssueListUtil.issueListToTree(l.map(function(t){return d[t]}));GH.IssueListUtil.applyExpandedState(g,GH.RapidBoard.State.getExpandedIssueKeys());var S=GH.RapidBoard.State.isScrumBoard(),k=r.supportsPages()&&S&&!t.isBacklog(),h=c.isFeatureEnabled("jsw.roadmap.add-future-sprint-dates"),f={sprintData:a,manageSprintData:n,isRankable:r.isRankable(),showLinkedPages:k,linkedPagesCount:t.getLinkedPagesCount(),issues:g,issueListStats:i,epics:GH.EpicView.isbacklogDataV2Enabled()?p.getEpicMap():GH.EpicController.getEpicModel().getEpicList().getAllIssues(),issueRenderData:e,statLabel:r.estimationStatistic.name,trackLabel:r.trackingStatistic.name,estimationEnabled:r.estimationStatistic.isEnabled,showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),showAssignedWorkStats:GH.RapidBoard.State.isScrumBoard(),showSprintActions:GH.RapidBoard.State.isScrumBoard(),showSprintFooter:!GH.RapidBoard.State.isAgilityBoard()&&GH.RapidBoard.State.isScrumBoard(),minIssueCount:s,maxIssueCount:o,showXflowPlanSprint:S,isAgility:GH.RapidBoard.State.isAgilityBoard(),shouldDisplayCreateSprintButton:t.isBacklog(),isLoadEpicPageLinksOnDemandEnabled:c.isFeatureEnabled("jsw.load.epic.page.links.on.demand"),isbacklogDataV2Enabled:GH.EpicView.isbacklogDataV2Enabled(),isFutureSprintDatesEnabled:h&&GH.RapidBoard.State.isScrumBoard()};return AJS.$(GH.tpl.sprintview.renderSprintContent(f))},u.updateSprintStatistics=function(){var t=r.getSprintModels();e.each(t,function(t){var e=u.calculateSprintIssueListStats(t,t.getIssueList());u._updateSprintStatisticsDom(t,e,!1)})},u.updateSprintStatisticForDraggedSprint=function(t,e){var i=u.calculateSprintIssueListStats(t,e);u._updateSprintStatisticsDom(t,i,!0)},u.markAsOvertaken=function(t){var i=!1,a=[];e.each(t,function(t){n.isSprintModel(t)?a.push(t.getSprintId()):i=!0}),AJS.$(".js-sprint-container").each(function(){var t=AJS.$(this);e.contains(a,u.getSprintIdForElement(t))?t.addClass("ghx-overtaken"):t.removeClass("ghx-overtaken")}),AJS.$(".ghx-everything-else").each(function(){var t=AJS.$(this);i?t.addClass("ghx-overtaken"):t.removeClass("ghx-overtaken")})},u._updateSprintStatisticsDom=function(t,e,i){var a=AJS.$('.js-sprint-container[data-sprint-id="'+t.getSprintId()+'"]'),n=u._renderSprintIssueCount(e);if(a.find(".ghx-issue-count").replaceWith(n),GH.RapidBoard.State.isScrumBoard()&&a.find(".ghx-assigned-work-stats").replaceWith(GH.tpl.sprintview.renderAssignedWork({assignedWork:e.assignedWorkStats.assigned,estimateStatisticName:r.estimationStatistic.name,trackingStatisticName:r.trackingStatistic.name})),t.isFutureSprint()){var s=u._renderFutureSprintFooterContent(e);a.find(".gh-sprint-footer-stats").empty().append(s),i&&AJS.$('.gh-sprint-footer-stats[data-sprint-id="'+t.getSprintId()+'"]').empty().append(s)}u.enableTooltips()},u._renderSprintMetaInfos=function(t){return GH.tpl.sprintview.renderSprintMetaInfos({sprintData:t.getSprintData()})},u._renderSprintIssueCount=function(t){return GH.tpl.planissuelist.renderIssueCount({issueListStats:t})},u._renderFutureSprintFooterContent=function(t){return GH.RapidBoard.State.isScrumBoard()?GH.tpl.sprintview.renderFutureSprintFooterContent({issueListStats:t}):""},u._getManageSprintData=function(t){var e=r.getActiveSprintModels(),i=r.getFutureSprintModels(),a=e.length>0,n=GH.RapidBoard.parallelSprints,s=i.length>0?i[0].getSprintData().id:null,o=(n||!a)&&t.canUpdateSprint,l=r.canManageSprints(),d=r.complexQuery();return{canStartSprint:o,canUpdateSprint:t.canUpdateSprint,canManageSprints:l,complexQuery:d,hasOpenSprints:a,parallelSprints:n,firstFutureSprintId:s}},u.calculateSprintIssueListStats=function(t,i){var a=!0;GH.RapidBoard.State.isCollapsibleBacklogEnabled()&&(a=!t.isBacklog());var n=s.getIssueListStats(i,a,t.isActiveSprint());if(t.isFutureSprint()){var o=s.getIssueListEstimateStatistics(i);e.extend(n,o)}else n.progressIndicators=s.calculateSprintProgress(i,p.rapidViewConfig.columns,r.estimationStatistic);return n.assignedWorkStats=s.getAssignedWorkStats(i),GH.RapidBoard.State.isKanbanBoard()&&(n.statisticsFieldValue=s.calculateStatisticsFieldValue(i,p.rapidViewConfig.statisticConfig)),n},u.getSprintIdForElement=function(t){var e=AJS.$(t).closest(".js-sprint-container");return e.length?k(e):null},u.getSprintIdForMarker=function(t){var e=AJS.$(t).closest(".js-marker");return e.length?k(e):null};var k=function(t){return GH.RapidBoard.State.isCollapsibleBacklogEnabled()?parseInt(t.data("sprint-id"),10)||r.BACKLOG_ID:parseInt(t.data("sprint-id"),10)};return u.enableTooltips=function(){AJS.$(".js-sprint-start").tooltip({html:!0,title:"data-tooltip"}),o.tipsify({selector:".js-assigned-work-dialog-trigger"})},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintView.soy' */
// This file was automatically generated from SprintView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintview == 'undefined') { GH.tpl.sprintview = {}; }


GH.tpl.sprintview.renderSprintContainer = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-error-group"></div><div class="ghx-onboarding-fillyourbacklog-group"></div><div data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '" class="ghx-backlog-container ' + soy.$$escapeHtml(opt_data.sprintData.state == 'FUTURE' ? 'ghx-sprint-planned' : 'ghx-sprint-active') + ' js-sprint-container ' + soy.$$escapeHtml(opt_data.isMetaExpanded ? 'ghx-open' : 'ghx-closed') + ((opt_data.isKanbanColumn) ? ' ghx-kanban-column' : '') + '" ></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintContainer.soyTemplateName = 'GH.tpl.sprintview.renderSprintContainer';
}


GH.tpl.sprintview.renderSprintContent = function(opt_data, opt_ignored) {
  var output = GH.tpl.sprintview.renderSprintHeader(opt_data) + '<div class="ghx-meta' + ((! opt_data.manageSprintData.canManageSprints) ? ' ghx-disabled' : '') + '" >' + ((opt_data.showAssignedWorkStats && ! opt_data.isAgility) ? GH.tpl.sprintview.renderAssignedWork({assignedWork: opt_data.issueListStats.assignedWorkStats.assigned, estimateStatisticName: opt_data.statLabel, trackingStatisticName: opt_data.trackLabel}) : '') + '<div class="ghx-issues js-issue-list' + ((opt_data.issueListStats.noneVisible) ? ' ghx-no-issues' + ((opt_data.issueListStats.empty) ? ' js-empty-list' : '') : ' ghx-has-issues') + '"><div class="ghx-plan-dropzone"></div>' + GH.tpl.planissuelist.renderIssueList(opt_data) + '<div class="ghx-helper"><div class="ghx-description">' + soy.$$escapeHtml(opt_data.issueListStats.emptyMessage) + '</div></div></div>';
  var isMarkerDraggable__soy53 = opt_data.isRankable && opt_data.sprintData.id != 'backlog';
  output += ((opt_data.sprintData.state == 'FUTURE') ? '<div class="ghx-marker js-parent-drag js-marker ' + ((! isMarkerDraggable__soy53) ? 'ghx-not-rankable' : '') + '" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '"><div class="gh-sprint-divider"><div class="gh-grabber-left-container"><div class="gh-grabber-left"></div></div><div class="gh-grabber"></div><div class="gh-grabber-right-container"><div class="gh-grabber-right"></div>' + GH.tpl.sprintview.renderFutureSprintFooter(opt_data) + '</div></div></div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintContent.soyTemplateName = 'GH.tpl.sprintview.renderSprintContent';
}


GH.tpl.sprintview.renderSprintHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-backlog-header js-sprint-header" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '"><div class="header-left"><div class="ghx-expander"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-name">' + soy.$$escapeHtml(opt_data.sprintData.name) + '</div>' + ((opt_data.minIssueCount) ? '<div class="ghx-kanban-column-min"><span class="aui-lozenge' + ((opt_data.issueListStats.statisticsFieldValue < opt_data.minIssueCount) ? ' aui-lozenge-current' : '') + '">' + soy.$$escapeHtml('Min') + ' ' + soy.$$escapeHtml(opt_data.minIssueCount) + '</span></div>' : '') + ((opt_data.maxIssueCount) ? '<div class="ghx-kanban-column-max"><span class="aui-lozenge' + ((opt_data.issueListStats.statisticsFieldValue > opt_data.maxIssueCount) ? ' aui-lozenge-error' : '') + '">' + soy.$$escapeHtml('Max') + ' ' + soy.$$escapeHtml(opt_data.maxIssueCount) + '</span></div>' : '') + GH.tpl.planissuelist.renderIssueCount(opt_data) + '</div><div class="header-right">' + ((opt_data.showSprintActions && opt_data.shouldDisplayCreateSprintButton) ? '<div class="aui-item"><button class="js-add-sprint aui-button ' + ((! opt_data.manageSprintData.canManageSprints) ? ' disabled' : '') + '"' + ((! opt_data.manageSprintData.canManageSprints) ? ((opt_data.manageSprintData.complexQuery) ? 'data-tooltip="' + soy.$$escapeHtml('Only a Jira administrator can update this sprint. Try selecting a project in your current board filter.') + '"' : 'data-tooltip="' + soy.$$escapeHtml('You need the Manage sprints permission for all projects in the origin board to create a sprint. \x3ca class\x3d\x22manage-sprint-permission-help\x22 href\x3d\x22#\x22\x3eLearn more\x3c/a\x3e') + '"') + 'aria-disabled="true"' : 'data-tooltip=""') + '>' + soy.$$escapeHtml('Create sprint') + '</button></div>' : (opt_data.sprintData.state == 'FUTURE') ? (opt_data.showSprintActions) ? GH.tpl.sprintview.renderFutureSprintControls(opt_data) : '' : GH.tpl.sprintview.renderSprintProgress(opt_data) + ((opt_data.showSprintActions) ? '<div class="ghx-controls aui-group">' + ((opt_data.showXflowPlanSprint) ? GH.tpl.sprintview.renderXflowPlanSprint(null) : '') + GH.tpl.sprintview.renderSprintActions(opt_data) + '</div>' : '')) + '</div>' + ((opt_data.sprintData.goal) ? '<div class="aui-group ghx-sprint-goal-group">' + GH.tpl.board.x.renderSprintGoal({goal: opt_data.sprintData.goal}) + '</div>' : '') + ((opt_data.sprintData.state != 'FUTURE' || opt_data.showLinkedPages || opt_data.isFutureSprintDatesEnabled) ? '<div class="ghx-sprint-info aui-group aui-group-split"><div class="ghx-dates aui-item">' + ((opt_data.sprintData.state != 'FUTURE' || opt_data.isFutureSprintDatesEnabled) ? (opt_data.sprintData.startDate != 'None' && opt_data.sprintData.startDate) ? GH.tpl.sprintview.renderSprintMetaInfos(opt_data) : (opt_data.isFutureSprintDatesEnabled) ? GH.tpl.sprintview.renderAddDatesLabel(null) : '' : '') + '</div>' + ((opt_data.showLinkedPages) ? GH.tpl.sprintview.renderSprintMetaLinkedTrigger(opt_data) : '') + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintHeader.soyTemplateName = 'GH.tpl.sprintview.renderSprintHeader';
}


GH.tpl.sprintview.renderAddDatesLabel = function(opt_data, opt_ignored) {
  return '<div><span class="ghx-set-sprint-date ghx-clickable" tabindex="0"><span class="aui-icon aui-icon-small aui-iconfont-edit">' + soy.$$escapeHtml('Add dates') + '</span>&nbsp;' + soy.$$escapeHtml('Add dates') + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderAddDatesLabel.soyTemplateName = 'GH.tpl.sprintview.renderAddDatesLabel';
}


GH.tpl.sprintview.renderFutureSprintControls = function(opt_data, opt_ignored) {
  return '<div class="ghx-controls aui-group">' + GH.tpl.sprintview.renderStartSprintItem(opt_data) + ((opt_data.showXflowPlanSprint) ? GH.tpl.sprintview.renderXflowPlanSprint(null) : '') + GH.tpl.sprintview.renderSprintActions(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintControls.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintControls';
}


GH.tpl.sprintview.renderSprintMetaInfos = function(opt_data, opt_ignored) {
  return '<div class="ghx-date">' + soy.$$escapeHtml(opt_data.sprintData.startDate) + '</div><div class="ghx-divider">&bull;</div><div class="ghx-date">' + soy.$$escapeHtml(opt_data.sprintData.endDate) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintMetaInfos.soyTemplateName = 'GH.tpl.sprintview.renderSprintMetaInfos';
}


GH.tpl.sprintview.renderSprintMetaLinkedTrigger = function(opt_data, opt_ignored) {
  return '<div class="ghx-linked aui-item">' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.linkedPagesCount, title: 'Create and view pages linked to this sprint', isLoadEpicPageLinksOnDemandEnabled: opt_data.isLoadEpicPageLinksOnDemandEnabled}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintMetaLinkedTrigger.soyTemplateName = 'GH.tpl.sprintview.renderSprintMetaLinkedTrigger';
}


GH.tpl.sprintview.renderSprintProgress = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issueListStats.progressIndicators) {
    output += '<div class="ghx-badge-group">';
    var indicatorList206 = opt_data.issueListStats.progressIndicators;
    var indicatorListLen206 = indicatorList206.length;
    for (var indicatorIndex206 = 0; indicatorIndex206 < indicatorListLen206; indicatorIndex206++) {
      var indicatorData206 = indicatorList206[indicatorIndex206];
      var state__soy207 = '' + ((indicatorIndex206 == 0) ? ' ghx-not-started' : (indicatorIndex206 == indicatorListLen206 - 1) ? ' ghx-done' : ' ghx-in-progress');
      var text__soy215 = '' + ((indicatorData206.total.text) ? soy.$$escapeHtml(indicatorData206.total.text) : ' ');
      output += aui.badges.badge({text: text__soy215, extraAttributes: {title: indicatorData206.title}, extraClasses: [state__soy207]});
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintProgress.soyTemplateName = 'GH.tpl.sprintview.renderSprintProgress';
}


GH.tpl.sprintview.renderProgressIndicatorTitle = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(opt_data.indicator.name) + ': ' + soy.$$escapeHtml(opt_data.indicator.total.text) + ' ' + soy.$$escapeHtml('of') + ' ' + soy.$$escapeHtml(opt_data.allIndicatorsTotalText) + ' (' + soy.$$escapeHtml(opt_data.statLabel) + ')';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderProgressIndicatorTitle.soyTemplateName = 'GH.tpl.sprintview.renderProgressIndicatorTitle';
}


GH.tpl.sprintview.renderStartSprintItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.manageSprintData.firstFutureSprintId == opt_data.sprintData.id || opt_data.manageSprintData.parallelSprints) ? '<div class="aui-item">' + ((opt_data.manageSprintData.canStartSprint && opt_data.issueListStats.hasIssues) ? '<button class="js-sprint-start aui-button" data-tooltip="">' + soy.$$escapeHtml('Start sprint') + '</button>' : '<button class="js-sprint-start aui-button disabled" aria-disabled="true"' + ((! opt_data.issueListStats.hasIssues) ? 'data-tooltip="' + soy.$$escapeHtml('Sprint cannot be started because it contains no issues') + '"' : (opt_data.manageSprintData.hasOpenSprints && ! opt_data.manageSprintData.parallelSprints) ? 'data-tooltip="' + soy.$$escapeHtml('Can be planned but not started until the completion of above active sprint') + '"' : (! opt_data.manageSprintData.canStartSprint) ? (opt_data.manageSprintData.complexQuery) ? 'data-tooltip="' + soy.$$escapeHtml('Only a Jira administrator can start or complete this sprint. Try selecting a project in your current board filter.') + '"' : 'data-tooltip="' + soy.$$escapeHtml(AJS.format('You need the {0}Manage sprints permission{1} to start or complete this sprint','<a class="manage-sprint-permission-help" href="#">','</a>')) + '"' : '') + '>' + soy.$$escapeHtml('Start sprint') + '</button>') + '</div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderStartSprintItem.soyTemplateName = 'GH.tpl.sprintview.renderStartSprintItem';
}


GH.tpl.sprintview.renderSprintActions = function(opt_data, opt_ignored) {
  var output = '<div class="aui-item">';
  var url__soy274 = soy.$$escapeHtml("") + '/rest/greenhopper/1.0/xboard/plan/sprints/actions?sprintId=' + soy.$$escapeHtml(opt_data.sprintData.id);
  output += aui.buttons.button({extraClasses: ['aui-button', 'js-sprint-actions-trigger'], tagName: 'a', text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconType: 'aui', extraAttributes: {href: url__soy274, 'data-sprint-id': opt_data.sprintData.id}}) + '</a></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderSprintActions.soyTemplateName = 'GH.tpl.sprintview.renderSprintActions';
}


GH.tpl.sprintview.renderXflowPlanSprint = function(opt_data, opt_ignored) {
  return '<div class="aui-item xflow-plan-sprint hidden"><div class="xflow-plan-sprint-app"></div><div class="xflow-plan-sprint-app-linked-pages-trigger"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderXflowPlanSprint.soyTemplateName = 'GH.tpl.sprintview.renderXflowPlanSprint';
}


GH.tpl.sprintview.renderAssignedWork = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-assigned-work-stats">';
  var assignedWorkEntryList290 = opt_data.assignedWork;
  var assignedWorkEntryListLen290 = assignedWorkEntryList290.length;
  for (var assignedWorkEntryIndex290 = 0; assignedWorkEntryIndex290 < assignedWorkEntryListLen290; assignedWorkEntryIndex290++) {
    var assignedWorkEntryData290 = assignedWorkEntryList290[assignedWorkEntryIndex290];
    output += GH.tpl.avatar.renderIssueAvatar({issue: assignedWorkEntryData290.issues[0], tooltipHtml: soy.$$escapeHtml(assignedWorkEntryData290.assigneeName) + '<table>' + ((assignedWorkEntryData290.totalEstimateText) ? '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData290.totalEstimateText) + '</td><td>' + soy.$$escapeHtml(opt_data.estimateStatisticName) + '</td></tr>' : '') + ((assignedWorkEntryData290.totalTrackingEstimateText) ? '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData290.totalTrackingEstimateText) + '</td><td>' + soy.$$escapeHtml(opt_data.trackingStatisticName) + '</td></tr>' : '') + '<tr><td>' + soy.$$escapeHtml(assignedWorkEntryData290.issues.length) + '</td><td>' + soy.$$escapeHtml('Issues') + '</td></tr></table>'});
  }
  if (opt_data.assignedWork.length) {
    var tooltip__soy318 = '' + soy.$$escapeHtml('View summary of assigned work');
    output += aui.buttons.button({extraAttributes: {'data-tooltip': tooltip__soy318}, extraClasses: ['js-assigned-work-dialog-trigger', 'aui-button-subtle', 'aui-button-compact'], text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconType: 'aui', iconText: tooltip__soy318});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderAssignedWork.soyTemplateName = 'GH.tpl.sprintview.renderAssignedWork';
}


GH.tpl.sprintview.renderFutureSprintFooter = function(opt_data, opt_ignored) {
  return '<div class="gh-sprint-footer-stats js-marker" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprintData.id) + '">' + ((opt_data.showSprintFooter && ! opt_data.isAgility) ? GH.tpl.sprintview.renderFutureSprintFooterContent(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintFooter.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintFooter';
}


GH.tpl.sprintview.renderFutureSprintFooterContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-stats ' + ((! opt_data.issueListStats.allVisible) ? 'ghx-is-filtered' : '') + '"><div class="ghx-stat-total"><span class="ghx-label">' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.issueListStats.totalCount)) : soy.$$escapeHtml(AJS.format('{1} of {0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues} visible',opt_data.issueListStats.totalCount,opt_data.issueListStats.visibleCount))) + '</span>';
  if (opt_data.issueListStats.tracking.shown) {
    output += '<span class="ghx-label">' + soy.$$escapeHtml('Remaining') + '</span>';
    var label__soy354 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted) + ' ' + soy.$$escapeHtml(opt_data.issueListStats.tracking.name) : soy.$$escapeHtml(AJS.format('{0} of {1} {2} visible',opt_data.issueListStats.tracking.visible.formatted,opt_data.issueListStats.tracking.total.formatted,opt_data.issueListStats.tracking.name)));
    var badgetext__soy362 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted) : soy.$$escapeHtml(opt_data.issueListStats.tracking.visible.formatted) + '/' + soy.$$escapeHtml(opt_data.issueListStats.tracking.total.formatted));
    output += aui.badges.badge({extraClasses: ['ghx-estimate-badge'], text: badgetext__soy362, extraAttributes: {title: label__soy354}});
  }
  if (opt_data.issueListStats.estimate.shown) {
    output += '<span class="ghx-label">' + soy.$$escapeHtml('Estimate') + '</span>';
    var label__soy379 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted) + ' ' + soy.$$escapeHtml(opt_data.issueListStats.estimate.name) : soy.$$escapeHtml(AJS.format('{0} of {1} {2} visible',opt_data.issueListStats.estimate.visible.formatted,opt_data.issueListStats.estimate.total.formatted,opt_data.issueListStats.estimate.name)));
    var badgetext__soy387 = '' + ((opt_data.issueListStats.allVisible) ? soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted) : soy.$$escapeHtml(opt_data.issueListStats.estimate.visible.formatted) + '/' + soy.$$escapeHtml(opt_data.issueListStats.estimate.total.formatted));
    output += aui.badges.badge({text: badgetext__soy387, extraAttributes: {title: label__soy379}});
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.sprintview.renderFutureSprintFooterContent.soyTemplateName = 'GH.tpl.sprintview.renderFutureSprintFooterContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/sprintactions/SprintActions.js' */
define("jira-agile/rapid/ui/component/sprintactions/sprint-actions",["require"],function(n){"use strict";var t=n("jquery"),i=n("underscore"),r=n("jira-agile/rapid/ui/plan/backlog-model"),e=n("jira-agile/rapid/ui/plan/sprint-controller"),o=AJS.Dropdown,a=function(){};return a.CORE_SPRINT_ACTIONS={"gh-sprint-move-up":e.moveSprintUp,"gh-sprint-move-down":e.moveSprintDown,"gh-sprint-delete":e.deleteSprintFromBacklog,"gh-sprint-delete-disabled":t.noop,"gh-sprint-edit":e.editSprint},a.prototype={getDropDownTrigger:function(){return t(".js-sprint-actions-trigger")},createDropdown:function(){var n=this,i=o.create({trigger:this.getDropDownTrigger(),ajaxOptions:{dataType:"json",cache:!1,formatSuccess:function(i){var r=i.id,e=n.getSprintData(r);return i.sections=n.filterActions(i.sections,e),t(GH.tpl.component.sprintactions.sprintActionsDropdown(i))}}});return t(document).off("click",".js-sprint-action"),t(document).on("click",".js-sprint-action",function(t){n.clickSprintAction(t)}),i},getSprintData:function(n){var t=!1,e=!1,o=r.getFutureSprintModels(),a=r.getSprintModel(n);return o.length>1&&a.isFutureSprint()&&(t=i.first(o).getSprintId()!==n,e=i.last(o).getSprintId()!==n),{canMoveUp:t,canMoveDown:e,canManageSprints:r.canManageSprints()}},filterActions:function(n,t){return i.each(n,function(n){n.actions=i.reject(n.actions,function(n){return"gh-sprint-move-up"===n.id&&!(t.canMoveUp&&t.canManageSprints)||"gh-sprint-move-down"===n.id&&!(t.canMoveDown&&t.canManageSprints)}),i.each(n.actions,function(n){n.disabled=n.styleClass&&n.styleClass.indexOf("disabled")>=0})}),i.filter(n,function(n){return n.actions.length>0})},clickSprintAction:function(n){var i=t(n.currentTarget),r=i.data("sprint-id"),e=i.attr("id"),o=a.CORE_SPRINT_ACTIONS[e];o&&(n.preventDefault(),o(r))}},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/sprintactions/SprintActions.soy' */
// This file was automatically generated from SprintActions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintactions.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintactions == 'undefined') { GH.tpl.component.sprintactions = {}; }


GH.tpl.component.sprintactions.sprintActionsDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list js-sprint-actions-list">';
  if (opt_data.sections && opt_data.sections.length > 0) {
    var sectionList6 = opt_data.sections;
    var sectionListLen6 = sectionList6.length;
    for (var sectionIndex6 = 0; sectionIndex6 < sectionListLen6; sectionIndex6++) {
      var sectionData6 = sectionList6[sectionIndex6];
      output += '<ul class=" aui-list-section' + ((sectionIndex6 == sectionListLen6 - 1) ? ' aui-last' : '') + '">';
      var actionList12 = sectionData6.actions;
      var actionListLen12 = actionList12.length;
      for (var actionIndex12 = 0; actionIndex12 < actionListLen12; actionIndex12++) {
        var actionData12 = actionList12[actionIndex12];
        output += '<li class="aui-list-item' + ((actionData12.disabled) ? ' disabled' : '') + '"><a href="' + soy.$$escapeHtml(actionData12.url) + '" class="aui-list-item-link js-sprint-action' + ((actionData12.styleClass) ? ' ' + soy.$$escapeHtml(actionData12.styleClass) : '') + '" data-sprint-id="' + soy.$$escapeHtml(opt_data.id) + '" id="' + soy.$$escapeHtml(actionData12.id) + '"' + ((actionData12.desc) ? 'title="' + soy.$$escapeHtml(actionData12.desc) + '"' : '') + '>' + soy.$$escapeHtml(actionData12.name) + '</a></li>';
      }
      output += '</ul>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintactions.sprintActionsDropdown.soyTemplateName = 'GH.tpl.component.sprintactions.sprintActionsDropdown';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanKBShortcuts.js' */
define("jira-agile/rapid/ui/plan/plan-kb-shortcuts",["require"],function(e){"use strict";var i=e("jira-agile/rapid/analytics-tracker"),t=e("jira-agile/rapid/ui/plan/backlog-model"),a=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),n=e("jira-agile/rapid/ui/plan/plan-controller"),s=e("jira-agile/rapid/ui/plan/plan-drag-and-drop"),r=e("jira-agile/rapid/ui/plan/sprint-model"),l={};return l.analytics=new i("gh.rapidboard.rankissues"),l.sendToTop=function(e){if(t.isRankable()){var i=a.getSelectedIssueKey();if(i){var o=t.getFirstRankableIssueKeyInColumn(i),u=a.getSelectedIssuesInOrder();l.analytics.trigger("sendToTop"+(e?e:""),u.length);var d=t.getBestFitSelectionAfterRank(u);if(d&&a.selectIssue(d),o){var c=t.findModelWithIssue(i),g=r.isSprintModel(c),p=g?c.getSprintId():null;s.rankIssues(u,p,null,o).done(function(e){GH.Notification.showSuccess("Issue has been re-ranked to the top of its column.")}).fail(function(){n.reload()})}}}},l.sendToBottom=function(e){if(t.isRankable()){var i=a.getSelectedIssueKey();if(i){var o=t.getLastRankableIssueKeyInColumn(i),u=a.getSelectedIssuesInOrder();l.analytics.trigger("sendToBottom"+(e?e:""),u.length);var d=t.getBestFitSelectionAfterRank(u);if(o){d&&a.selectIssue(d);var c=t.findModelWithIssue(i),g=r.isSprintModel(c),p=g?c.getSprintId():null;s.rankIssues(u,p,o,null).done(function(e){GH.Notification.showSuccess("Issue has been re-ranked to the bottom of its column.")}).fail(function(){n.reload()})}}}},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanInlineDialog.js' */
function _classCallCheck(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,e){for(var i=0;i<e.length;i++){var t=e[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(e,i,t){return i&&n(e.prototype,i),t&&n(e,t),e}}();define("jira-agile/rapid/ui/kanplan/KanPlanInlineDialog",["jquery","jira-agile/rapid/events","require"],function(n,e){"use strict";var i=function(){function i(){_classCallCheck(this,i),new e(this)}return _createClass(i,[{key:"getInlineDialogAnchor",value:function(){return this.inlineDialogContainer}},{key:"setInlineDialogAnchor",value:function(n){this.inlineDialogContainer=n}},{key:"getInlineDialog",value:function(){return this.dialog}},{key:"render",value:function(){var e=this;this.isRendered||(this.dialog=new AJS.HelpTip({title:"Kanban backlog",bodyHtml:"This column is getting full. Want an easier way to manage it?",anchor:n(document.body),showCloseButton:!0,closeButtonText:"Not now",showNextButton:!0,nextButtonText:"Tell me more",callbacks:{init:function(){e.trigger("dialog:init"),e.initEvents()}}}),this.dialog.show=function(){this.view.show()},this.isRendered=!0)}},{key:"getInlineDialogDomElement",value:function(){return this.getInlineDialog().view.$el}},{key:"initEvents",value:function(){var n=this,e=this.getInlineDialogDomElement(),i=function(){n.trigger("moreButton:click")};e.find(".helptip-next").off("click",i).on("click",i);var t=function(){n.trigger("closeButton:click")};e.find(".helptip-close").off("click",t).on("click",t),e.addClass("js-kanplan-enable-inline-dialog")}},{key:"show",value:function(){this.render();var n=this.getInlineDialogAnchor();this.getInlineDialog().view.changeAnchor(n),this.getInlineDialog().show()}},{key:"hide",value:function(){var n=require("jira/featureflags/feature-manager");if(this.getInlineDialog()&&(this.getInlineDialog().hide(),n.isFeatureEnabled("jsw.classic.bugfix.kanban.board.transition"))){var e=document.getElementsByClassName("js-kanplan-enable-inline-dialog");for(var i in Object.keys(e))e[i].innerHTML.includes("This column is getting full. Want an easier way to manage it?")&&(e[i].style.display="none")}}}]),i}();return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanInlineDialogController.js' */
function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var i=0;i<n.length;i++){var a=n[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,i,a){return i&&e(n.prototype,i),a&&e(n,a),n}}();define("jira-agile/rapid/ui/kanplan/KanPlanInlineDialogController",["jira-agile/rapid/ui/kanplan/KanPlanInlineDialog","jira-agile/rapid/events","jira-agile/rapid/analytics-tracker","require"],function(e,n,i){"use strict";function a(e){t.trigger(e,"issueCount",r)}var r,t=new i("jira-software.kanplan.enable-prompt"),l=new e,o="ghx.kanplan.inlineDialog.dismissed",s=20,u=3,c=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"init",value:function(){l.on("moreButton:click",function(){e.trigger(e.CONTINUE_EVENT),a("tellmemore")}),l.on("closeButton:click",function(){e.markAsDismissed(),a("notnow")})}},{key:"changeVisibility",value:function(n){l.setInlineDialogAnchor(GH.WorkView.getFirstColumnHeader().find("h2")),e.isVisible(n)&&(l.show(),a("show"))}},{key:"hide",value:function(){l.hide()}},{key:"isVisible",value:function(e){var n=require("jira/featureflags/feature-manager");return!(!GH.RapidBoard.State.isKanbanBoard()||GH.RapidViewConfig.kanPlanEnabled)&&(!(!GH.UserData.userConfig.isGlobalAdmin&&!GH.RapidViewConfig.isBoardAdmin)&&(!(n.isFeatureEnabled("jsw.classic.bugfix.kanban.board.transition")&&l.getInlineDialogAnchor().length<1)&&(!GH.BoardState.getPerViewValue(o)&&(!(e.getColumns().length<u)&&(r=e.getColumnIssueCount(e.getFirstColumn().id),!(r<s))))))}},{key:"markAsDismissed",value:function(){GH.BoardState.setPerViewValue(o,!0)}}]),e}();return c.CONTINUE_EVENT="kanplan.inlineDialog.continue.event",new n(c)});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanOnboardingController.js' */
function _classCallCheck(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,a){for(var i=0;i<a.length;i++){var e=a[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}return function(a,i,e){return i&&n(a.prototype,i),e&&n(a,e),a}}();define("jira-agile/rapid/ui/kanplan/KanPlanOnboardingController",["require","jira-agile/rapid/events","jira-agile/rapid/analytics-tracker","jira-agile/rapid/ui/kanplan/KanPlanInlineDialogController"],function(n,a,i,e){var r=void 0,t=void 0,l=function(){function a(){_classCallCheck(this,a)}return _createClass(a,null,[{key:"init",value:function(){var a=n("jira-agile/rapid/ui/kanplan/KanPlanConvertDialog");t=GH.RapidBoard.State.getRapidViewId(),e.init(),e.on(e.CONTINUE_EVENT,function(){r.show()},this),r=new a,r.on(a.CONVERT_SUCCESS,function(){e.markAsDismissed(),AJS.reloadViaWindowLocation()},this)}},{key:"update",value:function(n){r&&(r.setRapidViewId(t),r.setColumnName(n.getFirstColumn().name),e.changeVisibility(n))}},{key:"hide",value:function(){e.hide()}}]),a}();return l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/BacklogSelectionController.js' */
define("jira-agile/rapid/ui/plan/backlog-selection-controller",["require"],function(e){"use strict";var t,n,s=e("jquery"),a=e("jira-agile/rapid/global-events"),l=e("jira-agile/rapid/ui/plan/backlog-model"),i=e("jira-agile/rapid/ui/plan/plan-issue-list-view"),o=e("jira-agile/rapid/ui/plan/plan-context-menu-controller");a.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/plan/backlog-controller"),n=e("jira-agile/rapid/ui/plan/BacklogView")});var u={};return u.selectionDataModel={},u.selectionManager=void 0,u.init=function(){u.selectionDataModel={isIssueValid:l.isIssueSelectable,getIssueIndex:l.getIssueIndex,canAddToSelection:l.canAddToSelection,getIssueRange:l.getIssueRange},u.selectionManager=new GH.IssueSelectionManager(u.selectionDataModel,"backlog.selectedIssues"),s(document).on("click",n.containerSelector+" .js-issue",u.handleIssueClick),s(document).on("contextmenu",n.containerSelector+" .js-issue",u.handleIssueContextMenu),s(document).on("click",n.containerSelector+" .js-issue .ghx-card-expander",u.handleIssueToggleClick)},u.handleIssueContextMenu=function(e){var t=i.getIssueKey(s(this)),n=u.isInSelection(t);n||(u.selectionManager.handleIssueClick(GH.MouseUtils.getMetaKeys(e),t),u.updateUIAndState({openDetailsView:!1,doScroll:!0})),o.showContextMenuAt(e)},u.handleIssueClick=function(e){var t=i.getIssueKey(s(this)),n=s(e.target).hasClass("js-key-link"),a=!GH.MouseUtils.openInSameTab(e);return!(!n||!a)||(e.preventDefault(),void u.handleIssueSelectionEvent(e,t,!0))},u.validateCurrentSelection=function(){var e=u.selectionManager.validateCurrentSelection();return e&&(GH.RapidBoard.State.replaceState(),u.deferredPushState()),e},u.handleIssueSelectionEvent=function(e,t,n){var s=GH.MouseUtils.getMetaKeys(e),a=u.selectionManager.handleIssueClick(s,t),l=GH.IssueSelectionManager.getMultiSelectType(s);l&&(n=!1),a&&u.updateUIAndState({openDetailsView:n,doScroll:!1})},u.handleIssueToggleClick=function(e){e.stopPropagation();var t=i.getClosestIssueElement(s(this)),n=i.getIssueKey(s(this)),a=i.toggleExpandState(t);a||u.selectIssue(n)},u.selectIssue=function(e){u.selectionManager.selectIssue(e),u.updateUIAndState({openDetailsView:!1,doScroll:!0})},u.clearSelection=function(){u.selectIssue(null)},u.selectNextIssue=function(){var e=null,t=u.getSelectedIssueKey();e=t?l.getNextIssueKey(t):l.getFirstRankableIssueKeyInColumn(null),e||(e=t),u.selectIssue(e)},u.selectPreviousIssue=function(){var e=null,t=u.getSelectedIssueKey();e=t?l.getPreviousIssueKey(t):l.getLastRankableIssueKeyInColumn(null),e||(e=t),u.selectIssue(e)},u.updateUIAndState=function(e){t.updateUIAfterSelectionChange(e),GH.RapidBoard.UrlState.replaceState()},u.pushTimeoutHandler=void 0,u.deferredPushState=function(){var e=1e3,t=new Date;GH.RapidBoard.UrlState.pushTimeoutHandler&&window.clearTimeout(GH.RapidBoard.UrlState.pushTimeoutHandler),GH.RapidBoard.UrlState.pushTimeoutHandler=window.setTimeout(function(){GH.RapidBoard.UrlState.deferredPushState(t)},e)},u.ensureIssueSelected=function(e,t){if(!u.selectionManager.isInSelection(t))if(l.canAddToSelection(u.selectionManager.getSelectedIssueKeys(),t))u.handleIssueSelectionEvent(e,t);else{u.selectionManager.selectIssue(t);var n=!0;GH.RapidBoard.State.isDetailsViewPlanOpened()||(n=!1),u.updateUIAndState({openDetailsView:n,doScroll:!0})}},u.getSelectedIssueKeys=function(){return u.selectionManager.getSelectedIssueKeys()},u.getSelectedIssueKey=function(){return u.selectionManager.getSelectedIssueKey()},u.isInSelection=function(e){return u.selectionManager.isInSelection(e)},u.setIssueFromUrlState=function(e){u.selectionManager.selectIssue(e)},u.addSelectedIssueKeys=function(e){u.selectionManager._addSelectedIssueKeys(e)},u.getCollapsedSubTasksToSelection=function(e){var t=[];return e.forEach(function(e){l.isParentAndCollapsed(e)&&(t=t.concat(l.getSubtasks(e).map(function(e){return e.key})))}),t},u.getSelectedIssuesInOrder=function(){return u.selectionManager.getSelectedIssuesInOrder()},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/IssueListModel.js' */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira-agile/rapid/ui/plan/issue-list-model",["require"],function(e){"use strict";var t=e("underscore"),s=function(e,t,s){this.fixVersions=s;var r=this.data={};r.id=e,r.issueByKey={},r.order=[],r.visibleIssueKeys=new GH.Collection.OrderedSet,r.hiddenIssueKeys={},r.fakeParentKeys={},this.addIssues(t)};return s.prototype.addIssues=function(e){var s=this.data.issueByKey,r=this.data.order;t.each(e,function(e){this.fixVersions&&this.processFixVersion(e);var t=e.key;s[t]=e,r.push(t)},this),this.buildCache()},s.prototype.prependIssues=function(e){var s=this.data.issueByKey,r=this.data.order;t.each(e,function(e){this.fixVersions&&this.processFixVersion(e);var t=e.key;s[t]=e},this);var i=t.map(e,function(e){return e.key});this.data.order=t.flatten([i,r],!0),this.buildCache()},s.getOrderKeyForMarkerId=function(e){return"%%-"+e},s.prototype.getIssuesInOrder=function(){var e=[],s=this.data.order,r=this.data.issueByKey;return t.forEach(s,function(t,s){e.push(r[t])},this),e},s.prototype.getId=function(){return this.data.id},s.prototype.buildCache=function(){var e=this.data.visibleIssueKeys.clear(),r=this.data.orderByKey={};t.forEach(this.data.order,function(t,i){if(this._isMarkerId(t))r[s.getOrderKeyForMarkerId(t)]=i;else{r[t]=i;var n=this.data.issueByKey[t];n&&!n.hidden&&e.push(t)}},this)},s.prototype._isMarkerId=function(e){return t.isNumber(e)},s.prototype.indexOfRankable=function(e){this._isMarkerId(e)&&(e=s.getOrderKeyForMarkerId(e));var r=this.data.orderByKey[e];return t.isUndefined(r)?-1:r},s.prototype.containsRankable=function(e){return this.indexOfRankable(e)!==-1},s.prototype.insertMarker=function(e,r){var i=0,n=this.data.order;this.containsRankable(e)&&(n=t.without(n,e)),r&&(i=t.indexOf(n,r),i<0?i=0:i++),0===i?n.unshift(e):n=t.flatten([n.slice(0,i),e,n.slice(i)]);var a={};t.forEach(n,function(e,t){this._isMarkerId(e)&&(e=s.getOrderKeyForMarkerId(e)),a[e]=t},this),this.data.order=n,this.data.orderByKey=a},s.prototype.removeMarker=function(e){if(this.containsRankable(e)){var r=t.without(this.data.order,e),i={};t.forEach(r,function(e,t){this._isMarkerId(e)&&(e=s.getOrderKeyForMarkerId(e)),i[e]=t},this),this.data.order=r,this.data.orderByKey=i}},s.prototype.isSubtask=function(e){var t=this.getIssueData(e);return Boolean(t&&t.parentKey)},s.prototype.reorderIssues=function(e,s,r){var i=this,n=this.data.order,a=void 0,o=s||r,u=this.isSubtask(o);if(s){var d=this.getRealAfterKey(s);a=n.indexOf(d)+1}else{var y=this.getRealBeforeKey(r);a=n.indexOf(y)}if(u){var h=this.getIssueData(o).parentKey;e=e.filter(function(e){var t=i.getIssueData(e);return t&&t.parentKey===h})}else{var f=[];e.forEach(function(e){if(i.isIssueValid(e)&&!i.isSubtask(e)){var t=Object.values(i.data.issueByKey).filter(function(t){return t.parentKey===e}).map(function(e){return e.key});f.push(e),t.forEach(function(e){return f.push(e)})}}),e=f}var p=n.slice(0,a),c=n.slice(a);p=this.withoutArray(p,e),c=this.withoutArray(c,e);var l=t.flatten([p,e,c]);this.setOrder(l)},s.prototype.getRealAfterKey=function(e){if(this.isSubtask(e))return e;var t=Array.from(this.data.order).reverse(),s=this.findFirstSubtaskOfParentInList(t,e);return s?s:e},s.prototype.getRealBeforeKey=function(e){return this.isSubtask(e)||this.data.order.includes(e)?e:this.findFirstSubtaskOfParentInList(this.data.order,e)},s.prototype.findFirstSubtaskOfParentInList=function(e,t){var s=this;return e.find(function(e){var r=s.getIssueData(e);return r&&r.parentKey===t})},s.prototype.getRankableBeforeId=function(e){var t=this.indexOfRankable(e);return t>0&&this.data.order[t-1]},s.prototype.isIssueHiddenBySearchByKey=function(e){return this.data.hiddenIssueKeys[e]||!1},s.prototype.isIssueHiddenBySearchByKeyOrCollapsedSubTask=function(e){if(this.isSubtask(e)){var t=this.getIssueData(e).parentKey;if(!this.isFakeParent(t)&&this.isCollapsed(t))return!0}return this.isIssueHiddenBySearchByKey()},s.prototype.updateIssue=function(s){var r=e("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper");return r.prepareExtraFields(s.extraFields),this.processFixVersion(s),!t.isUndefined(this.data.issueByKey[s.key])&&(this.data.issueByKey[s.key]=s,this.buildCache(),!0)},s.prototype.processFixVersion=function(e){this.fixVersions&&(e.fixVersionsUI=this.fixVersions.getVersionsForIds(e.fixVersions))},s.prototype.getNumVisibleIssues=function(){return this.getNumVisibleIssuesBeforeRankable(!1)},s.prototype.getNumVisibleIssuesBeforeRankable=function(e){var s,r=this;if(e!==!1){var i=this.indexOfRankable(e);if(i<0)return!1;s=r._first(r.data.order,i)}else s=r.data.order;var n=t.filter(s,function(e){return r.isIssueVisible(e)});return n.length},s.prototype.getAllIssues=function(){return this.data.issueByKey},s.prototype.getVisibleIssues=function(){var e={};return t.each(this.data.issueByKey,function(t,s){this.isIssueVisible(s)&&(e[s]=t)},this),e},s.prototype.getVisibleRankables=function(){var e=this;return this.data.order.filter(function(t){return!!e.isIssueValid(t)&&(!!e._isMarkerId(t)||e.getIssueIndex(t)!==-1)})},s.prototype.getVisibleIssueKeys=function(){return this.data.visibleIssueKeys},s.prototype.getHiddenBySearchIssues=function(){return this.data.hiddenIssueKeys},s.prototype.setHiddenBySearchIssues=function(e){this.data.hiddenIssueKeys=e},s.prototype.getIssueKeyAtIndex=function(e){var t=this.data.visibleIssueKeys;return t.length>e?t.get(e):t.last()},s.prototype.getFirstVisibleIssueKey=function(){for(var e=this.data.visibleIssueKeys,t=0;t<e.length;t++){var s=e.get(t);if(!this.isIssueHiddenBySearchByKey(s))return s}return!1},s.prototype.getLastVisibleIssueKey=function(){for(var e=this.data.visibleIssueKeys,t=e.length-1;t>0;t--){var s=e.get(t);if(!this.isIssueHiddenBySearchByKey(s))return s}return!1},s.prototype.getIssueIndex=function(e){return this.data.visibleIssueKeys.indexOf(e)},s.prototype.getIssueData=function(e){return this.data.issueByKey[e]},s.prototype.getIssueDataForId=function(e){return t.find(this.data.issueByKey,function(t){return t.id===e})||void 0},s.prototype.getIssueIdForKey=function(e){var t=this.getIssueData(e);if(t)return t.id},s.prototype.isIssueVisible=function(e){return this.getIssueIndex(e)!==-1&&!this.isIssueHiddenBySearchByKey(e)},s.prototype.isIssueValid=function(e){return t.isString(e)?!t.isUndefined(this.data.issueByKey[e]):t.any(this.data.issueByKey,function(t){return e==t.id})},s.prototype.areIssuesValid=function(e){if(0===e.length)return!1;var s=this;return t.all(e,function(e){return s.isIssueValid(e)})},s.prototype.getFirstRankableIssueKeyInColumn=function(e){var s;s=t.isArray(e)?e:t.isString(e)?[e]:[];for(var r=this.data.visibleIssueKeys,i=0,n=r.length;i<n;i++)if(t.indexOf(s,r.get(i))===-1)return r.get(i);return!1},s.prototype.getLastRankableIssueKeyInColumn=function(e){var s;s=t.isArray(e)?e:t.isString(e)?[e]:[];for(var r=this.data.visibleIssueKeys,i=r.length-1;i>=0;i--)if(t.indexOf(s,r.get(i))===-1)return r.get(i);return!1},s.prototype.getBestFitSelectionAfterRank=function(e){var t=this.getNextIssueKeyAfterRank(e);return t||(t=this.getPreviousIssueKeyAfterRank(e)),t},s.prototype.getNextIssueKeyAfterRank=function(e){var s=t.last(e);return this.getNextIssueKey(s)},s.prototype.getNextIssueKey=function(e){for(var t=this.getIssueIndex(e),s=this.data.visibleIssueKeys;++t<s.length;){var r=s.get(t);if(!this.isIssueHiddenBySearchByKeyOrCollapsedSubTask(r))return r}return!1},s.prototype.getPreviousIssueKeyAfterRank=function(e){var s=t.first(e);return this.getPreviousIssueKey(s)},s.prototype.getPreviousIssueKey=function(e){for(var t=this.getIssueIndex(e),s=this.data.visibleIssueKeys;--t>=0;){var r=s.get(t);if(!this.isIssueHiddenBySearchByKeyOrCollapsedSubTask(r))return r}return!1},s.prototype.getLastParentSubTask=function(e){var t=this.getSubtasks(e);return t[t.length-1]},s.prototype.getIssueRange=function(e,s){var r,i,n=[],a=this.data.visibleIssueKeys,o=this.getIssueIndex(e),u=this.getIssueIndex(s);if(t.isUndefined(o)||t.isUndefined(u))return n;if(o<u)for(r=o;r<=u;r++)i=a.get(r),this.isIssueHiddenBySearchByKey(i)||n.push(i);else for(r=o;u<=r;r--)i=a.get(r),this.isIssueHiddenBySearchByKey(i)||n.push(i);return n},s.prototype.canAddToSelection=function(e,s){var r=t.filter(e,function(e){return this.getIssueIndex(e)!==-1},this);return!(e.length>0&&r.length!=e.length)&&this.isIssueVisible(s)},s.prototype.removeIssues=function(e){var s=this;e="object"===("undefined"==typeof e?"undefined":_typeof(e))?e:[e];var r=[];return t.each(e,function(e){var i=s.data.issueByKey[e];i&&(r.push(i),delete s.data.issueByKey[e],s.data.order=t.without(s.data.order,e))}),this.buildCache(),r},s.prototype.getLastVisibleKeyBefore=function(e){if(void 0!==e){for(var t,s=0;s<this.data.order.length;s++){var r=this.data.order[s];if(!this._isMarkerId(r)&&this.isIssueVisible(r)&&(t=r),r===e)break}return t}},s.prototype.getOrder=function(){return this.data.order},s.prototype.setOrder=function(e){this.data.order=e,this.buildCache()},s.prototype.applySearchFilter=function(e){var t=this,s=!1;return t.data.visibleIssueKeys.forEach(function(r){var i=t.data.issueByKey[r],n=t.data.hiddenIssueKeys[r]||!1,a=!e(i);s=s||n!==a,a?t.data.hiddenIssueKeys[r]=!0:delete t.data.hiddenIssueKeys[r]}),s},s.prototype.areIssuesBetweenMarkers=function(e,s,r){var i=this.getIssuesBetweenMarkers(s,r),n=!0;return t.forEach(e,function(e){t.contains(i,e)||(n=!1)}),n},s.prototype.getIssuesBetweenMarkers=function(e,t){var s=this.indexOfRankable(e),r=this.indexOfRankable(t);if(s>r){var i=r;r=s,s=i}return this.getOrder().slice(s+1,r)},s.prototype.getMarkerIdBeforeId=function(e){this._isMarkerId(e)&&(e=s.getOrderKeyForMarkerId(e));var r=this.data.orderByKey[e];if(t.isUndefined(r))return!1;for(var i=r-1;i>=0;i--)if(this._isMarkerId(this.data.order[i]))return this.data.order[i];return!1},s.prototype.getLastMarkerId=function(){for(var e=!1,t=this.data.order,s=t.length,r=s-1;r>=0;r--){var i=t[r];if(this._isMarkerId(i)){e=i;break}}return e},s.prototype.getMarkerIds=function(){var e=[];return t.each(this.data.order,function(t){this._isMarkerId(t)&&e.push(t)},this),e},s.prototype.withoutArray=function(e,s){var r=e;return t.each(s,function(e){r=t.without(r,e)}),r},s.prototype._first=function(e,s){return s=parseInt(s,10),0===s?[]:t.first(e,s)},s.prototype.getIssueCount=function(){var e=0;return t.each(this.data.issueByKey,function(t){e++}),e},s.prototype.getAllInvisibleIssuesData=function(){var e=this.data.order;return this._getInvisibleIssuesDataForKeys(e)},s.prototype.getAllVisibleIssuesData=function(){var e=this.data.order;return this._getVisibleIssuesDataForKeys(e)},s.prototype.getVisibleIssuesDataBeforeIncludingKey=function(e){var t=this.indexOfRankable(e);if(t<0)return[];var s=this.data.order.slice(0,t+1);return this._getVisibleIssuesDataForKeys(s)},s.prototype.getVisibleIssuesDataAfterKey=function(e){var t=this.indexOfRankable(e);if(t<0)return[];var s=this.data.order.slice(t+1);return this._getVisibleIssuesDataForKeys(s)},s.prototype.getSubtasks=function(e){return t.filter(this.data.issueByKey,function(t){return t.parentId===e||t.parentKey===e})},s.prototype.hasSubTasks=function(e){return this.getSubtasks(e).length>0},s.prototype.getIssuesExcludingSubtasks=function(){return t.filter(this.data.issueByKey,function(e){return t.isUndefined(e.parentId)})},s.prototype._getVisibleIssuesDataForKeys=function(e){var s=[];return t.each(e,function(e){if(this.isIssueVisible(e)){var t=this.getIssueData(e);s.push(t)}},this),s},s.prototype._getInvisibleIssuesDataForKeys=function(e){var s=[];return t.each(e,function(e){var t=this.getIssueData(e);(t.hidden||this.isIssueHiddenBySearchByKey(e))&&s.push(t)},this),s},s.prototype.isCollapsed=function(e){return!this.getExpandedIssueKeys().includes(e)},s.prototype.isFakeParent=function(e){return!this.data.issueByKey[e]},s.prototype.getExpandedIssueKeys=function(){var e=this;return GH.RapidBoard.State.getExpandedIssueKeys().filter(function(t){return e.data.issueByKey[t]})},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/IssueMoveController.js' */
define("jira-agile/rapid/ui/plan/issue-move-controller",["require"],function(t){"use strict";var r=t("underscore"),e=t("jquery"),n=t("jira-agile/rapid/global-events"),i=t("jira-agile/rapid/ui/plan/backlog-model"),a=t("jira-agile/rapid/ui/plan/backlog-statistics"),s=t("jira-agile/rapid/ui/plan/sprint-model"),o=t("jira/featureflags/feature-manager"),u=t("jira-agile/rapid/deferred-resources-loader"),c=void 0,p=function(){return o.isFeatureEnabled("jsw.classic.keto")};n.on("pre-initialization",function(){c=t("jira-agile/rapid/ui/plan/backlog-controller")});var l={};return l.confirmMove=function(t){var r=e.Deferred(),n=l.isMoveFromActiveSprints(t),i=l.isAddToActiveSprint(t);return n?GH.RemoveIssuesFromSprintDialog.constructDialog(t,r):i?l.showAddIssuesToActiveSprintDialog(t,r):r.resolve(t),r},l.calculateIssueMoveModel=function(t,e){var n=null,o=null,u=!1,p=!1;r.each(i.getAllModels(),function(r){var i=s.isSprintModel(r);r.getIssueList().areIssuesValid(t)&&(n=r,u=i),e&&i&&r.getSprintId()===e?(o=r,p=!0):e||i||(o=r,p=!1)});var l=u&&!n.isFutureSprint()&&(!p||o.isFutureSprint()),g=[],d=[];if(l){var S=[],v=n.getIssueList();r.each(t,function(t){var r=v.getIssueData(t);r&&S.push(r)});var f=c.rapidViewConfig.columns,A=a.splitIssuesIntoNotDoneAndDone(S,f);g=r.map(A.notDone,function(t){return t.key}),d=r.map(A.done,function(t){return t.key})}else g=t;return{changes:[{currentSprint:u?n.getSprintData():null,targetSprint:p?o.getSprintData():null,issueKeys:g,doneIssueKeys:d}]}},l.isMoveBetweenActiveSprints=function(t){return r.some(t.changes,function(t){var r=t.currentSprint&&"FUTURE"!=t.currentSprint.state,e=t.targetSprint&&"FUTURE"!=t.targetSprint.state;return r&&e})},l.isMoveFromActiveSprints=function(t){return r.some(t.changes,function(t){var r=t.currentSprint&&"FUTURE"!=t.currentSprint.state,e=t.currentSprint&&t.targetSprint&&t.currentSprint.id===t.targetSprint.id;return r&&!e})},l.isOnlyRankOperation=function(t){return r.some(t.changes,function(t){var r=t.currentSprint&&t.targetSprint&&t.currentSprint.id===t.targetSprint.id,e=!t.currentSprint&&!t.targetSprint;return r||e})},l.isRankBetweenFutureAndBacklog=function(t){return r.some(t.changes,function(t){var r=!t.currentSprint||"FUTURE"===t.currentSprint.state,e=!t.targetSprint||"FUTURE"===t.targetSprint.state;return r&&e})},l.isMoveToBacklog=function(t){return r.some(t.changes,function(t){var r=!!t.currentSprint&&t.currentSprint.id!==i.BACKLOG_ID,e=!t.targetSprint||t.targetSprint.id===i.BACKLOG_ID;return r&&e})},l.isAddToActiveSprint=function(t){return r.some(t.changes,function(t){var r=t.targetSprint&&"FUTURE"!==t.targetSprint.state,e=!t.currentSprint||!t.targetSprint||t.currentSprint.id!==t.targetSprint.id;return e&&r})},l.getAllIssueKeys=function(t){var e=[];return r.each(t.changes,function(t){e.push(t.issueKeys),e.push(t.doneIssueKeys)}),r.flatten(e,!0)},l.showAddIssuesToActiveSprintDialog=function(t,r){p()&&!GH.AddIssuesToActiveSprintDialog&&GH.Dialog.dim(),u.triggerOnDemandResourceLoadWithCondition(p()&&!GH.AddIssuesToActiveSprintDialog,["wrc!gh-rapid-lwf-board-deferred"],"IssueMoveController.showAddIssuesToActiveSprintDialog",function(){GH.AddIssuesToActiveSprintDialog.showDialog(t,r)},function(){GH.Dialog.undim()})},l});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogController.js' */
define("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-controller",["require"],function(e){"use strict";var a=e("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-dialog"),i=e("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-service"),o=e("jira-agile/rapid/ui/plan/plan-controller"),r={},s="jira-software.agility.backlog-issue-move.";return r.showDialog=function(e){i.shouldShow(e).done(function(i){i.value&&i.value.ask&&(a.render(e,r.handleConfirmMoveIssues,r.handleDoNotMoveIssues),AJS.trigger("analyticsEvent",{name:s+"show"}))})},r.handleConfirmMoveIssues=function(e){AJS.trigger("analyticsEvent",{name:s+"execute"}),a.hide(),i.moveIssues(e).done(function(){AJS.trigger("analyticsEvent",{name:s+"execute.success"}),i.setBoardEntityPropertyAsHasAlreadyPromptedUser(e),o.reload(),console.error("should have reloaded plan mode")}).fail(function(){AJS.trigger("analyticsEvent",{name:s+"execute.failure"})})},r.handleDoNotMoveIssues=function(e){AJS.trigger("analyticsEvent",{name:s+"cancel"}),a.hide(),i.setBoardEntityPropertyAsHasAlreadyPromptedUser(e)},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogService.js' */
define("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-service",["require"],function(r){"use strict";var t={};return t.shouldShow=function(r){return GH.Ajax.get({bareUrl:GH.Ajax.buildBareRestUrl(AJS.format("{0}/board/{1}/properties/jsw-spb-first-column-migration",GH.Ajax.PUBLIC_REST_URL_BASE,r.toString())),deferErrorHandling:!0},"jswSpbFirstColumnMigration")},t.moveIssues=function(r){return GH.Ajax.put({url:"/xboard/migrateFirstColumnToBacklog",data:{rapidViewId:r}})},t.setBoardEntityPropertyAsHasAlreadyPromptedUser=function(r){return GH.Ajax.del({bareUrl:GH.Ajax.buildBareRestUrl(AJS.format("{0}/board/{1}/properties/jsw-spb-first-column-migration",GH.Ajax.PUBLIC_REST_URL_BASE,r.toString()))})},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogDialog.js' */
define("jira-agile/rapid/ui/dialog/move-issues-to-agility-backlog-dialog",["require"],function(i){"use strict";var e=i("jquery"),o="move-issues-to-agility-backlog-dialog",n=void 0,a={addActiveClass:!1,fadeTime:0,noBind:!0,cacheContent:!0,persistent:!0},t={};return t.render=function(i,t,l){var s=e(".agility-backlog .js-sprint-container .ghx-name")[0];n=GH.SideInlineDialog.create(o,s,function(e,o,n){e.html(GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent()).addClass("ghx-inline-dialog"),e.find("#agility-backlog-dialog-moveissues-button-confirm").click(function(){t(i)}),e.find("#agility-backlog-dialog-moveissues-button-cancel").click(function(){l(i)}),n()},a),n.show()},t.hide=function(){n&&n.hide()},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/dialog/MoveIssuesToAgilityBacklogDialog.soy' */
// This file was automatically generated from MoveIssuesToAgilityBacklogDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog == 'undefined') { GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog = {}; }


GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container" id="ghx-agility-move-issues-to-backlog-dialog"><h5>' + soy.$$escapeHtml('Fill your backlog with to-do\x27s') + '</h5><p>' + soy.$$escapeHtml('Want to move all issues in your board\x27s first column to the backlog?') + '</p><div class="ghx-agility-move-issues-to-backlog-dialog-buttons">' + aui.buttons.button({id: 'agility-backlog-dialog-moveissues-button-confirm', text: 'Move', type: 'primary'}) + aui.buttons.button({id: 'agility-backlog-dialog-moveissues-button-cancel', text: 'No thanks', type: 'subtle'}) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent.soyTemplateName = 'GH.tpl.dialogs.moveIssuesToAgilityBacklogDialog.renderDialogContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/LinkedPagesController.js' */
GH.LinkedPagesController={},GH.LinkedPagesController.EPIC="epic",GH.LinkedPagesController.VERSION="version",GH.LinkedPagesController.SPRINT="sprint",GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION="/plugins/createcontent/init-dialog.action",GH.LinkedPagesController._dialog=null,GH.LinkedPagesController._authenticated=!1,function(){var e=require("jira-agile/rapid/analytics-tracker"),n=require("jira/analytics/web-client"),i=require("jira/featureflags/feature-manager");GH.LinkedPagesController.isLinkedPagesAnalyticsEnabled=function(){return i.isFeatureEnabled("jira.linked-pages-controller-show-dialog.enabled")},GH.LinkedPagesController.fireLinkedPagesAnalytics=function(e,i){n.sendUIEvent({source:"sprintView",actionSubject:"button",action:"clicked",actionSubjectId:"viewLinkedPages",attributes:{entityType:e,agileMode:i}})},GH.LinkedPagesController.analytics={show:new e("gh.linkedPages.dialog.show"),count:new e("gh.linkedPages.dialog.count"),action:new e("gh.linkedPages.dialog.action")}}(),GH.LinkedPagesController._pollingConversations=!1,GH.LinkedPagesController._dialogByLinkCreationToken={},GH.LinkedPagesController.initDialogTrigger=function(e,n,i,r){r.on("click",GH.Util.wrapPreventDefault(function(){GH.LinkedPagesController._showDialog(e,n,i,r)}))},GH.LinkedPagesController._showDialog=function(e,n,i,r,o){var a=require("jira/featureflags/feature-manager"),t=require("jira-agile/rapid/deferred-resources-loader"),l=function(){return a.isFeatureEnabled("jsw.classic.keto")};t.handleDeferredResourceImport(l()&&!GH.LinkedPagesInlineDialog,function(){var a=new GH.LinkedPagesInlineDialog({entityType:e,agileMode:n,entityId:i,trigger:r});a.dialogOptions=_.extend({},a.dialogOptions,o),a.show(),GH.LinkedPagesController.isLinkedPagesAnalyticsEnabled()&&GH.LinkedPagesController.fireLinkedPagesAnalytics(e,n),GH.LinkedPagesController.analytics.show.trigger([n,e].join(".")),GH.LinkedPagesController._dialog=a,GH.LinkedPagesController._authenticated||(AJS.$(document).bind("applinks.auth.completion",GH.LinkedPagesController._handleAuthenticationCompleted),GH.LinkedPagesController._authenticated=!0)})},GH.LinkedPagesController.showDialogForEpic=_.partial(GH.LinkedPagesController._showDialog,GH.LinkedPagesController.EPIC),GH.LinkedPagesController.showDialogForSprint=_.partial(GH.LinkedPagesController._showDialog,GH.LinkedPagesController.SPRINT),GH.LinkedPagesController.hideCurrentDialog=function(){GH.LinkedPagesController._dialog&&GH.LinkedPagesController._dialog.hide()},GH.LinkedPagesController.getLinkedPagesForEntity=function(e,n){switch(e){case GH.LinkedPagesController.EPIC:return GH.LinkedPagesController._getLinkedPagesForEpic(n);case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:return GH.LinkedPagesController._getLinkedPagesForSprint(n)}},GH.LinkedPagesController._getLinkedPagesForEpic=function(e){return GH.Ajax.get({url:"/epics/"+e+"/pages"},"getEpicLinkedPages").done(function(n){GH.PageIssueLinksModel.set(e,n.pages),GH.LinkedPagesController.analytics.count.trigger("epic","pages",n.pages.length)})},GH.LinkedPagesController._getLinkedPagesForSprint=function(e){return GH.Ajax.get({url:"/sprint/"+e+"/pages"},"getSprintLinkedPages").done(function(n){GH.PageIssueLinksModel.set(e,n.pages),GH.LinkedPagesController.analytics.count.trigger("sprint","pages",n.pages.length)})},GH.LinkedPagesController.startRemoteLinkCreationConversation=function(e){return GH.LinkedPagesController._ensurePolling(),GH.LinkedPagesService.initiateRemoteLinkConversation().done(function(n){GH.LinkedPagesController._dialogByLinkCreationToken[n]=e})},GH.LinkedPagesController.removeLinkedPage=function(e,n,i){var r;switch(e){case GH.LinkedPagesController.EPIC:r=GH.Ajax.del({url:"/issuelink/"+i});break;case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:r=GH.Ajax.del({url:"/api/sprints/"+n+"/remotelink/"+i})}return r.done(function(){GH.PageIssueLinksModel.removeLink(n,i),GH.LinkedPagesController.analytics.action.trigger([e,"removeLink"].join("."))}),r},GH.LinkedPagesController.searchPages=function(e,n,i){return GH.PageSearchRequestService.search(n,i).andThen(function(e){var i=GH.PageIssueLinksModel.list(n);return e.pages=_.reject(e.pages,function(e){return _.findWhere(i,{pageId:e.id})}),GH.PagesSearchModel.set(n,e.pages),e})},GH.LinkedPagesController.addLink=function(e,n,i,r){switch(e){case GH.LinkedPagesController.EPIC:return GH.LinkedPagesController._addLinkForEpic(n,i);case GH.LinkedPagesController.VERSION:break;case GH.LinkedPagesController.SPRINT:return GH.LinkedPagesController._addLinkForSprint(n,i,r)}},GH.LinkedPagesController._addLinkForEpic=function(e,n){return GH.Ajax.post({url:"/epics/"+e+"/pages",data:{pageId:n}},"addConfluencePageToEpic").andThen(function(i){var r=i.success;return GH.PageIssueLinksModel.addLink(e,r),GH.PagesSearchModel.removePage(e,n),GH.LinkedPagesController.analytics.action.trigger("epic.addLink"),r})},GH.LinkedPagesController._addLinkForSprint=function(e,n,i){return GH.Ajax.post({url:"/sprint/"+e+"/pages",data:{pageId:n,pageTitle:i}},"addConfluencePageToSprint").andThen(function(i){var r=i.success;return GH.PageIssueLinksModel.addLink(e,r),GH.PagesSearchModel.removePage(e,n),GH.LinkedPagesController.analytics.action.trigger("sprint.addLink"),r})},GH.LinkedPagesController._handleAuthenticationCompleted=function(e,n,i,r,o){var a=GH.LinkedPagesController._dialog;i&&a?a.isSearchMode()?(a.showSearch(a.getSearchQuery()),a.refresh()):a.show():GH.Notification.showWarning("Authentication with Confluence failed. Please check your credentials or Application Links configuration in Confluence.")},GH.LinkedPagesController._ensurePolling=function(){GH.LinkedPagesController._pollingConversations||(GH.Poller.addPoller("linkedPagePoller",function(){GH.Ajax.get({url:"/remoteLinkConversation/statuses",traditional:!0,data:{token:_.keys(GH.LinkedPagesController._dialogByLinkCreationToken)}},"remoteLinksConversationStatuses").done(function(e){var n=_.pluck(_.where(e,{status:"REDEEMED"}),"token"),i=_.pick(GH.LinkedPagesController._dialogByLinkCreationToken,n);_.each(i,function(e,n){var i=GH.LinkedPagesController._dialog;i===e&&i.isVisible()&&i.show(),delete GH.LinkedPagesController._dialogByLinkCreationToken[n]})})}),GH.LinkedPagesController._pollingConversations=!0)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/PageIssueLinksModel.js' */
GH.PageIssueLinksModel={},GH.PageIssueLinksModel.model={},GH.PageIssueLinksModel.set=function(e,s){GH.PageIssueLinksModel.model[e]=s},GH.PageIssueLinksModel.get=function(e,s){return _.find(GH.PageIssueLinksModel.model[e],function(e){return e.id===s})},GH.PageIssueLinksModel.list=function(e){return GH.PageIssueLinksModel.model[e]||[]},GH.PageIssueLinksModel.removeLink=function(e,s){s=parseInt(s,10),GH.PageIssueLinksModel.model[e]=_.reject(GH.PageIssueLinksModel.model[e],function(e){return e.id===s})},GH.PageIssueLinksModel.addLink=function(e,s){_.isArray(GH.PageIssueLinksModel.model[e])||(GH.PageIssueLinksModel.model[e]=[]),GH.PageIssueLinksModel.model[e].push(s)},GH.PageIssueLinksModel.clear=function(e){delete GH.PageIssueLinksModel.model[e]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/LinkedPagesCommon.soy' */
// This file was automatically generated from LinkedPagesCommon.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.linkedpages.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.linkedpages == 'undefined') { GH.tpl.component.linkedpages = {}; }


GH.tpl.component.linkedpages.createPageInputs = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="' + soy.$$escapeHtml(opt_data.entityTypeParam) + '" value="' + soy.$$escapeHtml(opt_data.entityId) + '"><input type="hidden" name="applinkId" value="' + soy.$$escapeHtml(opt_data.applinkId) + '"><input type="hidden" name="agileMode" value="' + soy.$$escapeHtml(opt_data.agileMode) + '">' + ((opt_data.fallbackUrl) ? '<input type="hidden" name="fallbackUrl" value="' + soy.$$escapeHtml(opt_data.fallbackUrl) + '">' : '');
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.createPageInputs.soyTemplateName = 'GH.tpl.component.linkedpages.createPageInputs';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/LinkedPagesInlineDialog.soy' */
// This file was automatically generated from LinkedPagesInlineDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.linkedpages.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.linkedpages == 'undefined') { GH.tpl.component.linkedpages = {}; }


GH.tpl.component.linkedpages.renderDialogHeader = function(opt_data, opt_ignored) {
  return '<h2>' + aui.buttons.button({extraClasses: ['js-search-panel-hide', 'ghx-search-return', 'aui-button-link'], text: 'Back'}) + '<span class="js-pages-header">' + soy.$$escapeHtml('Linked pages') + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderDialogHeader.soyTemplateName = 'GH.tpl.component.linkedpages.renderDialogHeader';
}


GH.tpl.component.linkedpages.renderEmptyDialog = function(opt_data, opt_ignored) {
  return '<div class="ghx-linked-pages-inline-dialog-panel ghx-inline-dialog-content js-entity-view-pages-content" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '">' + GH.tpl.component.linkedpages.renderDialogHeader(null) + '<div class="ghx-progress-indicator ghx-initial"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderEmptyDialog.soyTemplateName = 'GH.tpl.component.linkedpages.renderEmptyDialog';
}


GH.tpl.component.linkedpages.renderDialog = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-linked-pages-inline-dialog-panel ghx-inline-dialog-content js-entity-view-pages-content" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '">' + GH.tpl.component.linkedpages.renderDialogHeader(null) + '<div class="ghx-inline-dialog-container ghx-full-width js-linked-pages-panel">';
  if (opt_data.serverUnavailable) {
    output += '<p class="ghx-embedded">' + soy.$$escapeHtml('The Confluence server is currently unreachable.') + '</p>';
  } else if (! opt_data.appLink) {
    output += '<p class="ghx-embedded">' + soy.$$escapeHtml('No Confluence server is configured. Please check your Application Links configuration.') + '</p>';
  } else {
    output += ((opt_data.needAuthenticationApplications.length > 0) ? GH.tpl.component.linkedpages.renderAuthenticationRequest(opt_data) : '') + '<div class="ghx-embedded js-no-linked-pages ' + ((opt_data.linkedPages.length > 0) ? 'hidden' : '') + '">' + ((opt_data.canEdit) ? '<p>' + soy.$$escapeHtml('No linked pages yet.') + ' ' + ((opt_data.entityType == 'sprint') ? soy.$$filterNoAutoescape(AJS.format('Try linking meeting notes or {0}create a new page{1}.','<a class="js-create-page-link">','</a>')) : soy.$$filterNoAutoescape(AJS.format('Try linking requirements pages or {0}create a new page{1}.','<a class="js-create-page-link">','</a>'))) + '</p>' : '<p>' + soy.$$escapeHtml('No linked pages yet.') + ' ' + soy.$$escapeHtml('Edit Issue permissions are required to add pages.') + '</p>') + '</div><ul class="ghx-doco-list js-linked-pages-list">';
    var pageList61 = opt_data.linkedPages;
    var pageListLen61 = pageList61.length;
    for (var pageIndex61 = 0; pageIndex61 < pageListLen61; pageIndex61++) {
      var pageData61 = pageList61[pageIndex61];
      output += GH.tpl.component.linkedpages.renderLinkedPageListItem({page: pageData61, entityId: opt_data.entityId, canEdit: opt_data.canEdit, hidden: pageIndex61 > opt_data.initiallyShownCount - 1});
    }
    output += '</ul>';
    if (opt_data.linkedPages.length > opt_data.initiallyShownCount) {
      output += '<div class="ghx-doco-list-view-more">';
      var viewMoreText__soy72 = '' + soy.$$escapeHtml(AJS.format('{0} more\u2026',opt_data.linkedPages.length - opt_data.initiallyShownCount));
      output += aui.buttons.button({extraClasses: ['js-wiki-view-more-pages-link', 'aui-button-link'], text: viewMoreText__soy72}) + '</div>';
    }
  }
  output += '</div>' + ((opt_data.canEdit && ! opt_data.serverUnavailable && opt_data.appLink) ? GH.tpl.component.linkedpages.renderPagesActions(null) : '') + ((opt_data.canEdit && ! opt_data.serverUnavailable && opt_data.appLink) ? GH.tpl.component.linkedpages.renderSearchPagesPanel(null) : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderDialog.soyTemplateName = 'GH.tpl.component.linkedpages.renderDialog';
}


GH.tpl.component.linkedpages.renderAuthenticationRequest = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-embedded"><span class="applinks-auth-request"><span class="applinks-request-description">' + soy.$$escapeHtml('Please authenticate to view more:') + '<ul>';
  var appList90 = opt_data.needAuthenticationApplications;
  var appListLen90 = appList90.length;
  for (var appIndex90 = 0; appIndex90 < appListLen90; appIndex90++) {
    var appData90 = appList90[appIndex90];
    var authenticateLink__soy91 = '<a href="' + soy.$$escapeHtml(appData90.authenticateUrl) + '" class="applink-authenticate">';
    var serverLink__soy95 = '<a href="' + soy.$$escapeHtml(appData90.applicationLink.url) + '" target="_blank">' + soy.$$escapeHtml(appData90.applicationLink.name) + '</a>';
    output += '<li>' + soy.$$filterNoAutoescape(AJS.format('{0}Authenticate{1} with {2}',authenticateLink__soy91,'</a>',serverLink__soy95)) + '</li>';
  }
  output += '</ul></span></span></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderAuthenticationRequest.soyTemplateName = 'GH.tpl.component.linkedpages.renderAuthenticationRequest';
}


GH.tpl.component.linkedpages.renderPagesActions = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container ghx-divided js-linked-pages-actions" >' + aui.buttons.button({extraClasses: ['js-link-pages-link'], text: 'Link page'}) + aui.buttons.button({extraClasses: ['js-create-page-link'], text: 'Create page'}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderPagesActions.soyTemplateName = 'GH.tpl.component.linkedpages.renderPagesActions';
}


GH.tpl.component.linkedpages.renderSearchPagesPanel = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container ghx-full-width ghx-final-container js-link-page-panel"><div class="js-page-search"><form class="aui ghx-page-search-form"><input class="ghx-search aui-field check-list-field text js-search-existing-pages-input" type="text" placeholder="' + soy.$$escapeHtml('Search') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-search-small js-search-page-icon js-search-trigger ghx-clickable"></span></form></div><div class="js-entity-view-pages-search-result"></div><div class="js-entity-view-pages-searching hidden"><div class="ghx-progress-indicator ghx-initial"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderSearchPagesPanel.soyTemplateName = 'GH.tpl.component.linkedpages.renderSearchPagesPanel';
}


GH.tpl.component.linkedpages.renderPageResults = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-search-pages-result-panel"><div class="ghx-list-suggestions js-entity-view-pages-search-no-matches ' + ((opt_data.pages.length > 0) ? 'hidden' : '') + '">' + soy.$$escapeHtml('No matches') + '</div><ul class="ghx-doco-list">';
  var pageList128 = opt_data.pages;
  var pageListLen128 = pageList128.length;
  for (var pageIndex128 = 0; pageIndex128 < pageListLen128; pageIndex128++) {
    var pageData128 = pageList128[pageIndex128];
    output += '<li class="ghx-doco-list-item ghx-doco-list-result" data-page-id="' + soy.$$escapeHtml(pageData128.id) + '"><div class="ghx-doco-list-item-text"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml('Wiki page') + '"></span><span class="ghx-name" title="' + soy.$$escapeHtml(pageData128.title) + '">' + soy.$$filterNoAutoescape(pageData128.title) + '</span><span class="ghx-sub">' + soy.$$escapeHtml(pageData128.space) + '</span></div></li>';
  }
  output += ((! opt_data.isComplete) ? '<li class="ghx-list-suggestions">' + soy.$$escapeHtml('Continue typing to refine further') + '</li>' : '') + '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderPageResults.soyTemplateName = 'GH.tpl.component.linkedpages.renderPageResults';
}


GH.tpl.component.linkedpages.renderLinkedPageListItem = function(opt_data, opt_ignored) {
  return '<li class="ghx-doco-list-item ' + ((opt_data.hidden) ? ' ghx-hidden' : '') + '">' + ((opt_data.canEdit) ? '<div class="js-wiki-remove ghx-remove"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml('Remove link to this wiki page') + '" data-page-id="' + soy.$$escapeHtml(opt_data.page.id) + '" data-entity-id="' + soy.$$escapeHtml(opt_data.entityId) + '"></span></div><div class="js-wiki-spin ghx-remove-spin ghx-hidden"><span class="ghx-spinner"></span></div>' : '') + '<div class="ghx-doco-list-item-text">' + ((opt_data.page.permissionDenied || opt_data.page.authenticationRequired) ? '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml('Restricted wiki page') + '"></span>' : '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml('Wiki page') + '"></span>') + ((! opt_data.page.appLinkExists || opt_data.page.pageDeleted || opt_data.page.serverUnavailable) ? '<span class="ghx-name">' + soy.$$escapeHtml('Wiki page failed to load') + '</span>' : '<span class="ghx-name" title="' + soy.$$escapeHtml(opt_data.page.title) + '"><a target="_blank" href="' + soy.$$escapeHtml(opt_data.page.url) + '">' + soy.$$escapeHtml(opt_data.page.title) + '</a></span>') + '</div></li>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderLinkedPageListItem.soyTemplateName = 'GH.tpl.component.linkedpages.renderLinkedPageListItem';
}


GH.tpl.component.linkedpages.renderStubLinkedPageListItem = function(opt_data, opt_ignored) {
  return '<li class="ghx-doco-list-item"><div class="js-wiki-spin ghx-remove-spin"><span class="ghx-spinner"></span></div><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-doc" title="' + soy.$$escapeHtml('Wiki page') + '"></span><span class="ghx-name"><a href="#">' + soy.$$escapeHtml(opt_data.pageTitle) + '</a></span></li>';
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderStubLinkedPageListItem.soyTemplateName = 'GH.tpl.component.linkedpages.renderStubLinkedPageListItem';
}


GH.tpl.component.linkedpages.renderTrigger = function(opt_data, opt_ignored) {
  var output = '';
  var buttonText__soy194 = opt_data.isLoadEpicPageLinksOnDemandEnabled ? 'View linked pages' : AJS.format('{0}{0,choice,0# Linked|1# linked|1\x3c linked} {0,choice,0# pages|1# page|1\x3c pages}',opt_data.linkedPagesCount ? opt_data.linkedPagesCount : '');
  output += aui.buttons.button({extraAttributes: {title: opt_data.title}, extraClasses: ['aui-button-link', 'js-view-entity-pages', 'ghx-linked-pages-trigger'], text: buttonText__soy194});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderTrigger.soyTemplateName = 'GH.tpl.component.linkedpages.renderTrigger';
}


GH.tpl.component.linkedpages.renderSearchAuthenticationRequest = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-embedded"><span class="applinks-auth-request"><span class="applinks-request-description">';
  var authenticateLink__soy201 = '<a href="' + soy.$$escapeHtml(opt_data.authenticationUrl) + '" class="applink-authenticate">';
  var serverLink__soy205 = '<a href="' + soy.$$escapeHtml(opt_data.authenticationLinkUrl) + '" target="_blank">' + soy.$$escapeHtml(opt_data.authenticationLinkName) + '</a>';
  output += soy.$$filterNoAutoescape(AJS.format('Please {0}Authenticate{1} with {2} to perform search',authenticateLink__soy201,'</a>',serverLink__soy205)) + '</span></span></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.linkedpages.renderSearchAuthenticationRequest.soyTemplateName = 'GH.tpl.component.linkedpages.renderSearchAuthenticationRequest';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/epic/EpicController.js' */
GH.EpicController={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.EpicController.analytics=new e("gh.rapidboard.epics"),GH.EpicController.analytics2=new e("gh.rapidboard.epics","epicCount","")}(),GH.EpicController.model=void 0,GH.EpicController.init=function(){GH.EpicController.model=new GH.EpicModel,GH.EpicView.init()},GH.EpicController.getFilteredEpicKey=function(){return GH.BoardState.getPerViewValue("planSelectedEpic",null)},GH.EpicController.setFilteredEpicKey=function(e){GH.BoardState.setPerViewValue("planSelectedEpic",e)},GH.EpicController.getEpicModel=function(){return GH.EpicController.model},GH.EpicController.setEpicData=function(e){GH.EpicController.model.setData(e)},GH.EpicController.validateSelectedEpic=function(){var e=GH.EpicController.getEpicModel().getEpicList(),i=GH.EpicController.getFilteredEpicKey(),r=GH.PlanIssueListFiltering.isNoneEpicFilterKey(i)&&e.getNumVisibleIssues()>0||e.isIssueValid(i);r||(GH.EpicController.setFilteredEpicKey(void 0),GH.RapidBoard.UrlState.replaceState())},GH.EpicController.registerEpicsCount=function(e){AJS.trigger("analytics",{name:"jira-software.board.number.of.epics",data:{boardId:GH.RapidBoard.State.getRapidViewId(),epicsOnBoard:e.epics.length}})},GH.EpicController.reorderEpics=function(e,i,r){GH.EpicController.model.getEpicList().reorderIssues(e,i,r)},GH.EpicController.addIssuesToEpic=function(e,i){var r=[];_.each(i,function(i){var t=GH.BacklogModel.getIssueData(i);t&&t.typeId!==GH.EpicConfig.getEpicIssueTypeId()&&(t.epic=e,r.push(t))}),GH.EpicController.addIssuesToEpicOnServer(e,i).done(function(e){GH.Notification.showSuccess("Selection successfully added to the epic"),_.each(r,function(e){AJS.$(GH).trigger("issueUpdated",{issueId:e.id,source:"detailView"}),GH.RapidBoard.sendIssueUpdatedTrackEvent(e,[{name:GH.EpicConfig.getEpicLinkFieldId()}])}),GH.PlanController.isActive()&&(GH.BacklogController.updateEpicData(),GH.EpicController._reloadDetailsView(GH.PlanController)),GH.BacklogModel.assignSubtasksToSameEpicAsParent(i),GH.EpicController.analytics.trigger("addIssues","issueCount",i.length)}).fail(function(){GH.BacklogController.loadData()})},GH.EpicController.addIssuesToEpicOnServer=function(e,i){var r={ignoreEpics:!0,issueKeys:i};return GH.Ajax.put({url:"/epics/"+e+"/add",data:r})},GH.EpicController.removeIssuesFromAssociatedEpics=function(e){var i=[];if(GH.PlanController.isActive()){if(i=GH.BacklogModel.removeEpicFromIssues(e),0===i.length)return}else if(GH.WorkController.isActive()&&(i=GH.GridDataController.getModel().removeEpicFromIssues(e),0===i.length))return;var r={issueKeys:e};GH.Ajax.put({url:"/epics/remove",data:r}).done(function(r){GH.Notification.showSuccess("Selection successfully removed from the epic"),_.isEmpty(i)||_.each(i,function(e){AJS.$(GH).trigger("issueUpdated",{issueId:e.id,source:"detailView"})}),GH.PlanController.isActive()?(GH.BacklogController.updateEpicData(),GH.EpicController._reloadDetailsView(GH.PlanController)):GH.WorkController.isActive()&&(GH.EpicController._reloadDetailsView(GH.WorkController),"epic"==GH.GridDataController.getModel().getSwimlaneStrategy()&&GH.WorkController.reload()),GH.EpicController.analytics.trigger("removeIssues","issueCount",e.length)})},GH.EpicController.updateEpicAsDone=function(e){var i=GH.EpicController.updateEpicField(e,GH.EpicConfig.getEpicStatusFieldId(),GH.EpicConfig.getEpicStatusDoneValueId());i.done(function(){GH.EpicController.analytics.trigger("markEpicAsDone"),GH.EpicView.showEpicMarkedAsDoneMessage(),GH.EpicController.getFilteredEpicKey()===e&&(GH.EpicController.setFilteredEpicKey(null),GH.BacklogController.updateEpicFiltering(!1),GH.RapidBoard.State.replaceState()),GH.BacklogController.updateEpicData()})},GH.EpicController.updateEpicField=function(e,i,r,t,o){return GH.Ajax.put({url:"/xboard/issue/update-field.json",data:{issueIdOrKey:e,fieldId:i,newValue:r}}).done(t).fail(o)},GH.EpicController.applyVersionFiltering=function(){if(GH.VersionController.hasFilteredVersion()){var e=GH.BacklogModel.getEpicsFilteredForVersion(GH.VersionController.getFilteredVersionId()),i=GH.EpicController.getFilteredEpicKey();_.contains(e.filtered,i)&&(GH.EpicView.deselectAllEpics(),GH.EpicController.setFilteredEpicKey(null),GH.BacklogController.updateEpicFiltering(!1),GH.RapidBoard.State.pushState()),GH.EpicView.setFilteredStyle(e.filtered)}else GH.EpicController.clearVersionFiltering()},GH.EpicController.clearVersionFiltering=function(){GH.EpicView.clearFilteredStyle()},GH.EpicController._reloadDetailsView=function(e){var i=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");e.reloadDetailView(i.VERSION_PANEL_CHANGED)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/epic/EpicModel.js' */
GH.EpicModel=function(){this.epicsList=void 0,this.canEditEpics=!1,this.supportsPages=!1},GH.EpicModel.prototype.setData=function(i){if(i){this.canEditEpics=!!i.canEditEpics,this.supportsPages=!!i.supportsPages;var e=i.epics||[];_.each(e,GH.EpicModel.prototype._epicPreprocessFn),this.epicsList=new GH.IssueListModel("epics",e,GH.VersionController.getVersionModel())}},GH.EpicModel.prototype._epicPreprocessFn=function(i){i.originalEpicLabel=i.epicLabel||"",i.epicLabel=GH.EpicConfig.getEpicNameString(i.epicLabel,i.key)},GH.EpicModel.prototype.getEpicList=function(){return this.epicsList},GH.EpicModel.prototype.canUserEditEpics=function(){return this.canEditEpics};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/epic/EpicView.js' */
!function(){"use strict";var e=require("jira/ajs/dropdown/dropdown"),i=require("jira-agile/rapid/const/PageMode"),t=require("jira/featureflags/feature-manager"),a=require("jira-agile/browser-metrics/browser-metrics-util"),c="jsw.move.epics.and.versions.out.backlog.load";GH.EpicView={},GH.EpicView.init=function(){GH.EpicView.initializeInlineEdits(),AJS.$(document).delegate(".js-change-epic-color","click",GH.EpicView.changeEpicColor),AJS.$(document).delegate(".js-mark-epic-done","click",GH.EpicView.handleMarkEpicAsDone),t.isFeatureEnabled("jsw.classic.use.spa.transition.epic.link.backlog")&&AJS.$(document).on("click",".js-epic-key-link",GH.EpicView.triggerSPAForEpicLink)},GH.EpicView.colors=["ghx-label-13","ghx-label-5","ghx-label-4","ghx-label-8","ghx-label-14","ghx-label-2","ghx-label-1","ghx-label-6","ghx-label-11","ghx-label-10","ghx-label-7","ghx-label-9","ghx-label-3","ghx-label-12"],GH.EpicView.opts={canClose:!0},GH.EpicView.dropdowns=[],GH.EpicView.shouldHidePanels=function(){return GH.RapidBoard.State.isAgilityBoard()},GH.EpicView.isbacklogDataV2Enabled=function(){return t.isFeatureEnabled(c)},GH.EpicView.show=function(){if(!GH.EpicView.shouldHidePanels()){var e=AJS.$("#ghx-epic-column");e.html(GH.tpl.epic.renderShell({isEpicPanelExpanded:GH.PlanController.isEpicsColumnVisible(),canCreateIssue:GH.UserData.userConfig.canCreateIssue})),GH.EpicView.isbacklogDataV2Enabled()||GH.EpicView.renderEpics(),GH.EpicQuickCreate.registerCreateEpicDialog()}},GH.EpicView.hide=function(){AJS.$("#ghx-epic-column").empty()},GH.EpicView.updateEpics=function(){GH.EpicView.renderEpics(),GH.PlanDragAndDrop.initializeClassificationDnD()},GH.EpicView.renderEpics=function(){var a=GH.EpicController.getEpicModel(),c=AJS.$("#ghx-epic-column"),n=c.find(".ghx-classification-scrollview"),s={},l=a.getEpicList(),o=GH.EpicController.getFilteredEpicKey();_.each(l.getAllIssues(),function(e){s[e.key]="open"===GH.EpicView.getTwixieState(e.key),e.epicStats.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.epicStats.doneEstimate),e.epicStats.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.BacklogModel.estimationStatistic,e.epicStats.totalEstimate),e.epicStats.isIssueCountStatistic="issueCount"===GH.BacklogModel.estimationStatistic.typeId,e.epicStats.estimateStatisticName=GH.BacklogModel.estimationStatistic.name});var r={epicKeys:l.getVisibleRankables(),epics:l.getAllIssues(),isEpicExpandedByKey:s,selectedEpicKey:o,isNoneSelected:GH.PlanIssueListFiltering.isNoneEpicFilterKey(o),isAllSelected:!o,canEditEpics:a.canUserEditEpics(),canMarkAsDone:GH.EpicConfig.canMarkEpicAsDone(),canCreateIssue:GH.UserData.userConfig.canCreateIssue,colors:GH.EpicView.colors,showPages:GH.BacklogModel.supportsPages(),showEstimates:GH.RapidBoard.State.isScrumBoard(),isLoadEpicPageLinksOnDemandEnabled:t.isFeatureEnabled("jsw.load.epic.page.links.on.demand"),isTriggerSPAForEpicLink:t.isFeatureEnabled("jsw.classic.use.spa.transition.epic.link.backlog")};n.html(GH.tpl.epic.renderEpics(r)),GH.PlanView.updateFixedElementPositioning(),c.find(".ghx-classification-item").click(function(e){AJS.$(e.target).closest(".js-epic-actions, .js-create-epic-issue, .js-editing-field, .js-epic-details-toggle, .js-epic-key-link, .js-view-entity-pages").length||GH.EpicView.toggleFiltering(AJS.$(this))}),c.find(".js-epic-details-toggle").click(GH.EpicView.toggleEpicDisplay),c.find(".js-epic-name").click(function(e){e.preventDefault()});var d=AJS.$(".js-epic-actions");_.each(d,function(i){var t="#"+AJS.$(i).attr("id").replace(/^dd-trigger-/,"dd-content-"),a=AJS.$(t),c=e.create({trigger:i,content:a,alignment:AJS.LEFT});AJS.$(c).bind("showLayer",function(){GH.RapidBoard.Util.InlineEditable.submitActiveEdits()}),GH.EpicView.dropdowns.push(c)}),c.find(".js-create-epic-issue").click(GH.EpicView.showCreateIssueAssociatedWithEpicDialog),c.find(".js-view-entity-pages").each(function(){var e=AJS.$(this),t=e.closest(".ghx-classification-item").attr("data-epic-key");GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.EPIC,i.PLAN,t,e)}),GH.EpicView.dropdowns=_.flatten(GH.EpicView.dropdowns),GH.EpicController.applyVersionFiltering()},GH.EpicView.showCreateIssueAssociatedWithEpicDialog=function(e){e.preventDefault();var i=AJS.$(this).parents(".ghx-classification-item").attr("data-epic-key"),t=AJS.$(this).parents(".ghx-classification-item").find("[data-fieldname='epicLabel']").text();GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var a=GH.EpicQuickCreate.createCreateStoryForm();a.bind("contentRefreshed",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT),AJS.$(document).unbind("QuickCreateIssue.validationError"),AJS.$(document).bind(JIRA.EpicPicker.READY_EVENT,function(e,a){a.setSelection(new AJS.ItemDescriptor({value:"key:"+i,label:t})),setTimeout(function(){a.disable()},0),AJS.$(document).bind("QuickCreateIssue.validationError",function(e){a.disable()})})});var c=function(e){return GH.EpicController.addIssuesToEpicOnServer(i,_.pluck(e,"issueKey"))},n="addToEpicCallback";GH.BacklogController.registerIssueCreatedCallback(n,c);var s=a.asDialog({windowTitle:AJS.format("Create {0}",GH.EpicConfig.getStoryIssueTypeId()),id:"create-story-dialog"});s.bind("Dialog.hide",function(){AJS.$(document).unbind(JIRA.EpicPicker.READY_EVENT),AJS.$(document).unbind("QuickCreateIssue.validationError"),GH.BacklogController.unregisterIssueCreatedCallback(n)}),s.show()},GH.EpicView.renderError=function(){var e=AJS.$("#ghx-epic-column"),i=e.find(".ghx-classification-scrollview"),t=GH.EpicController.getFilteredEpicKey(),a={isAllSelected:!t,isNoneSelected:GH.PlanIssueListFiltering.isNoneEpicFilterKey(t)};i.html(GH.tpl.epic.renderEpicsError(a)),e.find(".ghx-classification-item:not(.ghx-classification-error)").click(function(){GH.EpicView.toggleFiltering(AJS.$(this))}),e.find(".ghx-classification-item .js-try-again").click(function(){GH.BacklogController.updateEpicData()})},GH.EpicView.hideDropdown=function(){_.each(GH.EpicView.dropdowns,function(e){e.hide()})},GH.EpicView.toggleFiltering=function(e){t.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&a.triggerBefore("before:backlogEpicFilter","backlogEpicFilter"),GH.RapidBoard.Util.InlineEditable.submitActiveEdits(),GH.EpicView.deselectAllEpics();var i,c=e.attr("data-epic-key");GH.EpicController.getFilteredEpicKey()===c?i=null:(i=c,AJS.$("#ghx-epic-column").find(".ghx-classification-all").removeClass("ghx-selected"),e.addClass("ghx-selected")),GH.EpicController.setFilteredEpicKey(i),GH.BacklogController.updateEpicFiltering(!1),t.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&a.triggerAfter("after:backlogEpicFilter","backlogEpicFilter"),GH.RapidBoard.State.pushState()},GH.EpicView.deselectAllEpics=function(){var e=AJS.$("#ghx-epic-column"),i=e.find(".ghx-classification-item");i.removeClass("ghx-selected"),e.find(".ghx-classification-all").addClass("ghx-selected")},GH.EpicView.updateEpicStats=function(){var e=AJS.$("#ghx-epic-column");AJS.$.each(e.find(".ghx-classification-item"),function(e,i){var t=AJS.$(i);t.attr("data-epic-key")})},GH.EpicView.setTwixieState=function(e,i){var t="epicTwix-"+e;GH.BoardState.setPerViewValue(t,i)},GH.EpicView.getTwixieState=function(e){var i="epicTwix-"+e;return GH.BoardState.getPerViewValue(i,"closed")},GH.EpicView.toggleEpicDisplay=function(e){var i=AJS.$(this),t=i.parents(".ghx-classification-item");GH.EpicView.toggleEpicDisplayByElementWithAnimation(t)},GH.EpicView.toggleEpicDisplayByElement=function(e){var i=e.attr("data-epic-key");e.hasClass("ghx-open")?(e.removeClass("ghx-open").addClass("ghx-closed"),GH.EpicView.setTwixieState(i,"closed")):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.EpicView.setTwixieState(i,"open"))},GH.EpicView.toggleEpicDisplayByElementWithAnimation=function(e){var i=e.attr("data-epic-key"),t=e.find(".ghx-expanded");e.hasClass("ghx-open")?GH.RapidBoard.Animation.animateHeight(t,160,0).done(function(){e.removeClass("ghx-open").addClass("ghx-closed"),GH.EpicView.setTwixieState(i,"closed")}):e.hasClass("ghx-closed")&&(e.removeClass("ghx-closed").addClass("ghx-open"),GH.RapidBoard.Animation.animateHeight(t,0,160).done(function(){GH.EpicView.setTwixieState(i,"open")}))},GH.EpicView.initializeInlineEdits=function(){var e=function(e){var i=e.editElement.val();return!!GH.Validation.notBlank(e.editElement,"Epic Name is required")&&(e.newValue=i,!0)},i=function(e){GH.EpicView.updateEpicLabel(e.epicKey,e.newValue),GH.RapidBoard.Util.InlineEditable.updateView(e)},t=function(e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var i=GH.RapidBoard.Util.InlineEditable.defaultFieldData(e);return"epicLabel"===i.fieldName&&(i.maxLength=30),AJS.$(e).closest(".ghx-header").addClass("ghx-editing-name"),i.epicKey=e.parents(".ghx-classification-item").attr("data-epic-key"),i},a=function(e){var i=AJS.$(this).parents(".js-epic-actions-list").attr("data-epic-key");return AJS.$('.ghx-classification-item[data-epic-key="'+i+'"]').find(".js-edit-epicLabel-trigger")},c=function(e){AJS.$(e.viewElement).closest(".ghx-header").removeClass("ghx-editing-name")};GH.RapidBoard.Util.InlineEditable.register(".js-edit-epic-label",{getViewElement:a,getData:t,validate:e,save:i,renderView:GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView,preEdit:GH.RapidBoard.Util.InlineEditable.cancelActiveEdits,postEdit:c})},GH.EpicView.updateEpicLabel=function(e,i){var a=GH.EpicConfig.getEpicLabelFieldId(),c=GH.EpicController.getEpicModel().getEpicList(),n=c.getIssueData(e),s=n.epicLabel,l=n.originalEpicLabel;n.epicLabel=i,n.originalEpicLabel=i,c.updateIssue(n),GH.BacklogView.draw(),t.isFeatureEnabled("jswcloud.17347.trigger.update.to.fix.dnd")&&GH.PlanController.trigger("after:show");var o=function(){GH.EpicView._reloadDetailsView(GH.PlanController)},r=function(){n.epicLabel=s,n.originalEpicLabel=l,c.updateIssue(n),GH.EpicView.renderEpics(),GH.BacklogView.draw(),t.isFeatureEnabled("jswcloud.17347.trigger.update.to.fix.dnd")&&GH.PlanController.trigger("after:show")};GH.EpicController.updateEpicField(e,a,i,o,r)},GH.EpicView.changeEpicColor=function(e){var i=AJS.$(this),t=i.attr("data-color-id"),a=i.parents(".js-epic-actions-list").attr("data-epic-key");t&&a&&GH.EpicView.updateEpicColor(a,t)},GH.EpicView.updateEpicColor=function(e,i){var a=GH.EpicConfig.getEpicColorFieldId(),c=GH.EpicController.getEpicModel().getEpicList(),n=c.getIssueData(e),s=n.epicColor;n.epicColor=i,c.updateIssue(n),GH.EpicView.renderEpics(),GH.BacklogView.draw(),t.isFeatureEnabled("jswcloud.17347.trigger.update.to.fix.dnd")&&GH.PlanController.trigger("after:show");var l=function(){GH.EpicView._reloadDetailsView(GH.PlanController)},o=function(){n.epicColor=s,c.updateIssue(n),GH.EpicView.renderEpics(),GH.BacklogView.draw(),t.isFeatureEnabled("jswcloud.17347.trigger.update.to.fix.dnd")&&GH.PlanController.trigger("after:show")};GH.EpicController.updateEpicField(e,a,i,l,o)},GH.EpicView.scrollToBottom=function(){var e=AJS.$(".ghx-epic-column .ghx-classification-scrollview");e.scrollTop(e[0].scrollHeight)},GH.EpicView.handleMarkEpicAsDone=function(e){if(GH.EpicConfig.canMarkEpicAsDone()){GH.RapidBoard.Util.InlineEditable.cancelActiveEdits();var i=AJS.$(this),t=i.parents(".js-epic-actions-list").attr("data-epic-key"),a=GH.EpicController.getEpicModel().getEpicList(),c=a.getIssueData(t),n=c.epicLabel,s=c.epicStats.notDone,l=function(){GH.EpicController.updateEpicAsDone(t)},o="Mark as Done",r=GH.tpl.epic.renderMarkEpicAsDoneDialog({epicName:AJS.escapeHTML(String(n)),epicKey:t,numIncompleteIssues:s,rapidView:GH.RapidBoard.State.getRapidViewId()}),d=GH.ConfirmDialog.create("ghx-mark-epic-done-dialog",{width:450,header:o,content:r,contentEscaping:!1,onConfirmFn:l});d.show(),d.updateHeight()}},GH.EpicView.showEpicMarkedAsDoneMessage=function(){GH.Notification.showSuccess("Epic has been marked as Done")},GH.EpicView.setFilteredStyle=function(e){var i=AJS.$("#ghx-epic-column"),t=i.find(".ghx-classification-item").removeClass("ghx-filtered");t.each(function(i,t){var a=AJS.$(t);_.contains(e,a.attr("data-epic-key"))&&a.addClass("ghx-filtered")})},GH.EpicView.clearFilteredStyle=function(){var e=AJS.$("#ghx-epic-column");e.find(".ghx-classification-item").removeClass("ghx-filtered")},GH.EpicView.showEpicPagesUpdatedMessage=function(e,i,t){JIRA.IssueNavigator.setIssueUpdatedMsg({issueMsg:t.options.issueMsg,issueId:e,issueKey:i})},GH.EpicView.renderNewEpics=function(e){var i=AJS.$("#ghx-epic-column");_.each(e,function(e){var t=i.find('.ghx-classification-item[data-epic-key="'+e.issueKey+'"]');t.hasClass("ghx-open")||GH.EpicView.toggleEpicDisplayByElement(t),GH.RapidBoard.Animation.animateHeight(t,0,200,GH.RapidBoard.Animation.LONG_DURATION)})},GH.EpicView._reloadDetailsView=function(e){var i=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");e.reloadDetailView(i.VERSION_PANEL_CHANGED)},GH.EpicView.triggerSPAForEpicLink=function(e){var i=e.metaKey||e.altKey||e.ctrlKey||e.shiftKey;if(!i){e.preventDefault();var t=AJS.$(this).text(),a=GH.Ajax.CONTEXT_PATH+"/browse/"+t;GH.spa&&GH.spa.history.push(a)}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/epic/EpicQuickCreate.js' */
!function(){"use strict";var e=require("jquery"),r=require("jira-agile/features/feature-flags"),i=require("jira/featureflags/feature-manager"),t=!1,a=require("jira-agile/browser-metrics/browser-metrics-util");GH.EpicQuickCreate={},GH.EpicQuickCreate.quickCreateReset=!0,GH.EpicQuickCreate.createModel=function(){GH.EpicQuickCreate.Model=JIRA.Forms.CreateIssueModel.extend({getActiveFieldIds:function(){var r=this,i=e.Deferred(),a=[],c=[];t?c.push(GH.EpicConfig.getEpicLabelFieldId()):(c.push("summary"),c.push(GH.EpicConfig.getEpicLabelFieldId())),e.each(c,function(e,r){a.push(r)});var u=["issuetype","summary"];return r.getRequiredFields().done(function(r){e.each(r,function(r,i){e.inArray(i.id,a)!==-1||t&&e.inArray(i.id,u)!==-1||a.push(i.id)}),i.resolve(a)}),i.promise()},getIssueSetupFields:function(){if(t){var r=this,i=jQuery.Deferred(),a=[];return r.getFields().done(function(r){e.each(r,function(e,r){"project"===r.id&&a.push(r)}),i.resolve(a)}),i.promise()}return this._super()},getUseConfigurableForm:function(){var r=e.Deferred();return r.resolve(!0),r.promise()},setUseConfigurableForm:function(){}})},GH.EpicQuickCreate.ConfigurableForm=JIRA.Forms.ConfigurableCreateIssueForm.extend({serialize:function(){var r=this._super(),i=AJS.parseUri("?"+r),t=i.queryKey;return t.summary=t[GH.EpicConfig.getEpicLabelFieldId()],t.issuetype=GH.EpicConfig.getEpicIssueTypeId(),Object.keys(t).forEach(function(e){t[e]=decodeURIComponent(t[e])}),e.param(t)},getFieldById:function(e){var r=this,i=jQuery.Deferred();return"summary"!==e?this._super(e):(i.rejectWith(r,[]),i.promise())}}),GH.EpicQuickCreate.resetQuickCreate=function(){GH.EpicQuickCreate.quickCreateReset||(GH.EpicQuickCreate.quickCreateReset=!0,GH.EpicQuickCreate.storeQuickCreateDefaults(GH.EpicQuickCreate.createFormPreferences))},GH.EpicQuickCreate.rememberQuickCreateDefaults=function(){if(a.triggerBefore("before:epicCreatePopup"),GH.EpicQuickCreate.quickCreateReset){GH.EpicQuickCreate.quickCreateReset=!1;var e=function(e){GH.EpicQuickCreate.createFormPreferences=e};GH.EpicQuickCreate.loadQuickCreateDefaults().done(e).always(function(){a.performanceMark("api_call_done_epic_create")})}},GH.EpicQuickCreate.storeQuickCreateDefaults=function(e){return GH.Ajax.put({url:"/userData/quickEditDefaults",data:e})},GH.EpicQuickCreate.loadQuickCreateDefaults=function(){return GH.Ajax.get({url:"/userData/quickEditDefaults"},"quickEditDefaults")},GH.EpicQuickCreate.createCreateEpicForm=function(e){return e=e||{},new JIRA.Forms.Container(function(){e.globalEventNamespaces=e.globalEventNamespaces||["QuickCreateEpic"];var r,i=AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),a=new GH.EpicQuickCreate.Model({projectId:e.pid,issueType:e.issueType}),c=new JIRA.Forms.UnconfigurableCreateIssueForm({model:a,title:i,globalEventNamespaces:e.globalEventNamespaces});return r=t?new GH.EpicQuickCreate.ConfigurableForm({model:a,title:i,globalEventNamespaces:e.globalEventNamespaces}):new JIRA.Forms.ConfigurableCreateIssueForm({model:a,title:i,globalEventNamespaces:e.globalEventNamespaces}),{globalEventNamespaces:e.globalEventNamespaces,model:a,errorHandler:new JIRA.Forms.CreateIssueError,configurableForm:r,unconfigurableForm:c}})},AJS.$(GH).bind("issueCreated",function(e,r){var i=function(e){GH.UserData.quickCreateDefaultIssueTypeId=e.issueTypeId};GH.EpicQuickCreate.loadQuickCreateDefaults().done(i)}),GH.EpicQuickCreate.createCreateStoryForm=function(){var e=GH.UserData.quickCreateDefaultIssueTypeId;return e===GH.EpicConfig.getEpicIssueTypeId()&&(e=GH.EpicConfig.getStoryIssueTypeId()),JIRA.Forms.createCreateIssueForm({issueType:e})},GH.EpicQuickCreate.registerCreateEpicDialog=function(){if(JIRA&&JIRA.Forms&&JIRA.Forms.CreateIssueModel){t=i.isFeatureEnabled(r.EPIC_CREATE_IMPROVEMENT),GH.EpicQuickCreate.createModel();var e=AJS.$("#ghx-epic-column");e.find(".js-create-epic").each(function(){var e=GH.EpicQuickCreate.createCreateEpicForm({issueType:GH.EpicConfig.getEpicIssueTypeId()}),r=e.asDialog({windowTitle:AJS.format("Create {0}",GH.EpicConfig.getEpicIssueTypeName()),trigger:this,id:"create-epic-issue-dialog"});r.bind("Dialog.show",GH.EpicQuickCreate.rememberQuickCreateDefaults),r.bind("Dialog.hide",GH.EpicQuickCreate.resetQuickCreate)})}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/IssueActions.js' */
define("jira-agile/rapid/ui/plan/issue-actions",["require"],function(e){"use strict";var s,r,n,i=e("underscore"),a=e("jquery"),t=e("jira-agile/rapid/global-events"),o=e("jira-agile/rapid/analytics-tracker"),u=e("jira-agile/rapid/ui/plan/issue-move-controller"),c=e("jira/container-api"),l=e("jira-agile/browser-metrics/browser-metrics-util");e("jira/featureflags/feature-manager");t.on("pre-initialization",function(){s=e("jira-agile/rapid/ui/plan/backlog-selection-controller"),r=e("jira-agile/rapid/ui/plan/backlog-controller"),n=e("jira-agile/rapid/ui/plan/plan-drag-and-drop")});var g={};return g.Analytics={},g.Analytics.removeFromSprint=new o("gh.sprint.issue.remove"),g.removeIssuesFromSprint=function(e,s){i.isArray(s)||(s=[s]),GH.Ajax.get({url:"/sprint/rank/"+e+"/remove",data:{issues:s}},"removeIssuesFromActiveSprintsCheck").done(function(e){var s=u.confirmMove(e);s.done(g.removeIssuesFromCurrentSprints)})},g.removeIssuesFromCurrentSprints=function(e){var s=u.getAllIssueKeys(e);return GH.Ajax.put({url:"/sprint/rank/"+e.rapidViewId+"/remove",data:{rapidViewId:r.rapidViewData.id,idOrKeys:s}}).done(function(e){var s=e.success,r=u.getAllIssueKeys(s);g.showSprintRankSuccessMessage(s),a(GH).trigger("issuesRemovedFromSprint",{issueKeys:r}),g.Analytics.removeFromSprint.trigger("remove","removedIssuesCount",r.length)})},g.showSprintRankSuccessMessage=function(e){u.isOnlyRankOperation(e)||u.isRankBetweenFutureAndBacklog(e)||GH.Notification.showSuccess("Selection successfully moved.")},g._createIssueKeysLinkHtml=function(e){i.isArray(e)||(e=[e]);var s=i.map(e,function(e){return'<a href="'+GH.Ajax.CONTEXT_PATH+"/browse/"+e+'">'+AJS.escapeHTML(String(e))+"</a>"});return s.join(", ")},g.sendIssuesToBottomOfSprint=function(e,s){var r=i.last(s.getIssueList().getOrder());return n.rankIssues(e,s.getId(),r,null)},g.sendIssuesToSprint=function(e,s){return n.rankIssues(e,s.getId(),null,null)},g.sendIssuesToTopOfBacklog=function(e,s){var r=i.first(s.getIssueList().getOrder());n.rankIssues(e,s.getId(),null,r)},g.sendIssuesToBottomOfBacklog=function(e,s){var r=i.last(s.getIssueList().getOrder());n.rankIssues(e,s.getId(),r,null)},g.sendIssuesToBacklog=function(e){n.rankIssues(e,null,null,null)},g.flag=function(e,s,r,n){return i.isArray(e)||(e=[e]),GH.Ajax.post({url:"/xboard/issue/flag/flag.json",data:{issueKeys:e,flag:s,comment:r,commentVisibility:n}}).done(function(e){l.performanceMark("flag-browser-metric-backend-response-received"),GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.COMMON.ISSUE_FLAG),i.has(e.success,"errorMessages")&&GH.Notification.showWarnings(i.map(e.success.errorMessages,function(e){return{autoHideDelay:1e4,message:e,noAutoescape:!0}}),{showTitle:!0})})},g.viewInIssueNavigator=function(e){var s=GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+encodeURIComponent(e.join(","));c.navigate(s,function(){location.href=s})},g.gotoLink=function(e){c.navigate(e,function(){location.href=e})},g.bulkChange=function(e){var s=GH.Ajax.CONTEXT_PATH+"/secure/GHBulkChange.jspa?issueKeys="+encodeURIComponent(e.join(","));c.navigate(s,function(){location.href=s})},g});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanContextMenuController.js' */
define("jira-agile/rapid/ui/plan/plan-context-menu-controller",["require"],function(e){"use strict";function t(e){return GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+encodeURIComponent(e.join(","))}function n(e){var t=[];return i.each(e,function(e){var n=r.getIssueData(e);n&&t.push(n)}),{issues:t,epics:s.getEpicMap(),viewMode:p.PLAN,boardType:GH.RapidBoard.State.getBoardType()}}var s,a,i=e("underscore"),o=e("jquery"),l=e("jira-agile/rapid/global-events"),c=e("jira-agile/rapid/analytics-tracker"),r=e("jira-agile/rapid/ui/plan/backlog-model"),u=e("jira-agile/rapid/ui/plan/issue-actions"),g=e("jira-agile/rapid/ui/print/card-printing-controller"),d=e("jira-agile/rapid/ui/plan/contextmenu/split-issue-action"),p=e("jira-agile/rapid/const/PageMode"),h=e("jira-agile/rapid/ui/plan/plan-issue-list-view"),I=e("jira-agile/browser-metrics/browser-metrics-util"),x=e("jira/analytics/web-client");l.on("pre-initialization",function(){s=e("jira-agile/rapid/ui/plan/backlog-controller"),a=e("jira-agile/rapid/ui/plan/backlog-selection-controller")});var f={};return f.ctxMenu=null,f.Analytics={},f.Analytics.show=new c("gh.issue.ctx.menu.show"),f.Analytics.action=new c("gh.issue.ctx.menu.action"),f.resolveContext=function(){var e=a.getSelectedIssuesInOrder(),t=r.findModelWithIssue(i.first(e));if(t){var n=r.getSprintModels(),s=r.getBacklogModel2(),o=r.hasBulkChangePermission,l=i.chain(t.getIssueList().getAllIssues()).pick(e).values().value(),c=e.some(r.isSubtask);return{containsSubtasks:c,singleIssue:1===e.length,selectedIssues:e,selectedIssuesData:l,sprintModels:n,backlogModel2:s,currentModel:t,flaggedIssuesCount:i.where(l,{flagged:!0}).length,hasBulkChangePermission:o}}},f.showContextMenuAt=function(e){if(f.hideContextMenu(),!(o(e.target).closest("a").length>0)){var t=f.resolveContext(),n={actionGroups:f.resolveActionsForContext(t)};f.ctxMenu=new GH.ContextMenu(n),f.ctxMenu.showAt(e),e.preventDefault(),o(GH.ContextMenu.menuSelector).focus(),f.Analytics.show.trigger(t.type,"selectedIssuesCount",t.selectedIssues.length)}},f.resolveActionsForContext=function(e){var s=GH.RapidBoard.State.isAgilityBoard(),o=[],l=[],c=[],p=e.selectedIssues.concat(a.getCollapsedSubTasksToSelection(e.selectedIssues));if(0===e.selectedIssues.length)return o;if(i.each(e.sprintModels,function(t){if(!(t.getId()===e.currentModel.getId()||GH.RapidBoard.State.isCollapsibleBacklogEnabled()&&t.isBacklog())){var n=t.isActiveSprint()?"send to active sprint":"send to future sprint";l.push({id:"ghx-issue-ctx-action-send-to-sprint-"+t.getSprintId(),name:n,label:t.getSprintData().name,actionFn:function(){var s=e.containsSubtasks?u.sendIssuesToSprint:u.sendIssuesToBottomOfSprint;s(p,t).done(function(){h.expandAllAfterTransition(p),f.Analytics.action.trigger(n,"selectedIssuesCount",p.length)})}})}}),e.containsSubtasks||!r.isRankable()){var b=!1;b=GH.RapidBoard.State.isCollapsibleBacklogEnabled()?e.currentModel.isBacklog():e.backlogModel2.getId()===e.currentModel.getId(),b||l.push({id:"ghx-issue-ctx-action-send-backlog",name:"send to backlog",label:"Backlog",actionFn:function(){u.sendIssuesToBacklog(p),h.expandAllAfterTransition(p),f.Analytics.action.trigger(this.name,"selectedIssuesCount",p.length)}})}else l.push({id:"ghx-issue-ctx-action-send-top-backlog",name:"send to top of backlog",label:"Top of Backlog",actionFn:function(){u.sendIssuesToTopOfBacklog(p,e.backlogModel2),h.expandAllAfterTransition(p),f.Analytics.action.trigger(this.name,"selectedIssuesCount",p.length)}}),l.push({id:"ghx-issue-ctx-action-send-bottom-backlog",name:"send to bottom of backlog",label:"Bottom of Backlog",actionFn:function(){u.sendIssuesToBottomOfBacklog(p,e.backlogModel2),h.expandAllAfterTransition(p),f.Analytics.action.trigger(this.name,"selectedIssuesCount",p.length)}});o.push({label:"Send to",actions:l});var m=t(e.selectedIssues),k={id:"ghx-issue-ctx-action-view-in-navigator",name:"view in navigator",label:"View in Issue Navigator",href:m,actionFn:function(){u.gotoLink(m),f.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}},A={id:"ghx-issue-ctx-action-bulk-change",name:"bulk change",label:"Bulk Change",actionFn:function(){u.bulkChange(e.selectedIssues),f.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}};if(e.singleIssue){var S={id:"ghx-issue-ctx-action-copy-issue-link",name:"copy issue link",label:"Copy issue link",actionFn:function(){GH.IssueOperationShortcuts.copyIssueLink(),GH.Notification.showSuccess("Issue link copied!"),x.sendUIEvent({source:"backlogScreen",actionSubject:"dropdownItem",action:"clicked",actionSubjectId:"copyIssueLink",attributes:{nextGenProject:!1}})}};c.push(S);var v={id:"ghx-issue-ctx-action-delete",name:"delete",label:"Delete",actionFn:function(){GH.IssueOperationShortcuts.deleteSelectedIssue(),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.delete"})}};c.push(v)}var C=void 0;if(C=e.flaggedIssuesCount!==e.selectedIssues.length?{id:"ghx-issue-ctx-action-flag-and-comment",name:"flag-and-comment",label:"Add flag",actionFn:function(){I.triggerBefore("before:addFlagPopup"),GH.IssueFlagAndCommentAction.execute(e.selectedIssues,!0,GH.BacklogController.loadData),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag",data:{selectedIssueCount:e.selectedIssues.length}})}}:{id:"ghx-issue-ctx-action-unflag-and-comment",name:"unflag-and-comment",label:"Remove flag",actionFn:function(){I.triggerBefore("before:removeFlagPopup"),GH.IssueFlagAndCommentAction.execute(e.selectedIssues,!1,GH.BacklogController.loadData),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag",data:{selectedIssueCount:e.selectedIssues.length}})}},c.push(C),d.appendItem(e,c),e.singleIssue||s||c.push(k),!e.hasBulkChangePermission||e.singleIssue||s||c.push(A),e.selectedIssues.length>0&&!s){var T={id:"ghx-issue-ctx-action-print-cards",name:"print cards",label:AJS.format("Print selected {0,choice,1# card|1\u003c cards}",e.selectedIssues.length),actionFn:function(){g.printSelectedIssues(n(e.selectedIssues))}};c.push(T)}return c.length>0&&o.push({label:"Other actions",actions:c}),o},f.hideContextMenu=function(){null!=f.ctxMenu&&(f.ctxMenu.hide(),f.ctxMenu=null)},f});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/ops/RankController.js' */
!function(){GH.RankController={},GH.RankController.rankIssues=function(r,e,a,n,i){i=i||{};var t,s={issueKeys:e,customFieldId:r};if(n)t="after",_.isNumber(n)?s.rankAfterRankable={type:"sprintmarker",id:n}:s.rankAfterKey=n;else if(t="before",_.isNumber(a))s.rankBeforeRankable={type:"sprintmarker",id:a};else{if(!a)return AJS.$.Deferred().resolve().promise();s.rankBeforeKey=a}var o=_.extend(i,{url:"/api/rank/"+t,data:s});return GH.Ajax.put(o).promise()},GH.RankController.rankEpics=function(r,e,a,n,i){if(!n&&!a)return AJS.$.Deferred().resolve().promise();var t={rankCustomFieldId:r};n?t.rankAfterEpic=n:t.rankBeforeEpic=a;var s=_.extend(i||{},{bareUrl:GH.Ajax.buildPublicRestUrl("epic/"+e+"/rank"),data:t});return GH.Ajax.put(s).promise()},GH.RankController.sprintRankIssues=function(r,e,a,n,i,t,s){var o=require("jira-agile/rapid/ui/plan/backlog-model");t=t||{};var l={idOrKeys:e,customFieldId:r,rapidViewId:GH.RapidBoard.State.getRapidViewId(),calculateNewIssuesOrder:s};a&&a!==o.BACKLOG_ID?(l.sprintId=a,l.addToBacklog=!1):(l.sprintId=null,l.addToBacklog=!0),n&&(l.idOrKeyBefore=n),i&&(l.idOrKeyAfter=i);var d=_.extend(t,{url:"/sprint/rank",data:l});return GH.Ajax.put(d).promise()},GH.RankController.getErrorRankResultFromResponse=function(r){return r.isSuccess()&&_.find(r.success.rankableChanges,function(r){return r.errors&&r.errors.length>0})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files', location = 'jira-agile-module/includes/js/rapid/LegacyPlanNamespaces.js' */
AJS.namespace("GH.BacklogController",null,require("jira-agile/rapid/ui/plan/backlog-controller")),AJS.namespace("GH.BacklogModel",null,require("jira-agile/rapid/ui/plan/backlog-model")),AJS.namespace("GH.BacklogModel2",null,require("jira-agile/rapid/ui/plan/backlog-model2")),AJS.namespace("GH.BacklogSelectionController",null,require("jira-agile/rapid/ui/plan/backlog-selection-controller")),AJS.namespace("GH.BacklogStatistics",null,require("jira-agile/rapid/ui/plan/backlog-statistics")),AJS.namespace("GH.BacklogView",null,require("jira-agile/rapid/ui/plan/BacklogView")),AJS.namespace("GH.IssueActions",null,require("jira-agile/rapid/ui/plan/issue-actions")),AJS.namespace("GH.IssueListModel",null,require("jira-agile/rapid/ui/plan/issue-list-model")),AJS.namespace("GH.IssueMoveController",null,require("jira-agile/rapid/ui/plan/issue-move-controller")),AJS.namespace("GH.PlanContextMenuController",null,require("jira-agile/rapid/ui/plan/plan-context-menu-controller")),AJS.namespace("GH.PlanController",null,require("jira-agile/rapid/ui/plan/plan-controller")),AJS.namespace("GH.PlanControls",null,require("jira-agile/rapid/ui/plan/plan-controls")),AJS.namespace("GH.PlanDragAndDrop",null,require("jira-agile/rapid/ui/plan/plan-drag-and-drop")),AJS.namespace("GH.PlanIssueListFiltering",null,require("jira-agile/rapid/ui/plan/plan-issue-list-filtering")),AJS.namespace("GH.PlanIssueListView",null,require("jira-agile/rapid/ui/plan/plan-issue-list-view")),AJS.namespace("GH.PlanKBShortcuts",null,require("jira-agile/rapid/ui/plan/plan-kb-shortcuts")),AJS.namespace("GH.PlanRankController",null,require("jira-agile/rapid/ui/plan/plan-rank-controller")),AJS.namespace("GH.PlanUrlState",null,require("jira-agile/rapid/ui/plan/plan-url-state")),AJS.namespace("GH.PlanView",null,require("jira-agile/rapid/ui/plan/plan-view")),AJS.namespace("GH.SprintBacklogController",null,require("jira-agile/rapid/ui/plan/sprint-backlog-controller")),AJS.namespace("GH.SprintBacklogView",null,require("jira-agile/rapid/ui/plan/sprint-backlog-view")),AJS.namespace("GH.SprintController",null,require("jira-agile/rapid/ui/plan/sprint-controller")),AJS.namespace("GH.SprintModel",null,require("jira-agile/rapid/ui/plan/sprint-model")),AJS.namespace("GH.SprintView",null,require("jira-agile/rapid/ui/plan/sprint-view")),AJS.namespace("GH.SprintActions",null,require("jira-agile/rapid/ui/component/sprintactions/sprint-actions")),GH.sprintActions=new GH.SprintActions;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/configuration/DeleteRapidViewDialog.js' */
GH.RapidBoard.DeleteDialog={},GH.RapidBoard.DeleteDialog.showDeleteDialog=function(e,a,i,t,d){GH.RapidBoard.DeleteDialog.AnalyticsClient=require("jira/analytics/web-client");var r=GH.Dialog.create({width:500,height:150,id:"ghx-rapidview-delete"}),l="true"===t?"Agility":"true"===i?"Scrum":"Kanban";r.addPanel("","panel"),r.addButton("Delete",function(){r.disableControls(),r.dispose(),GH.RapidBoard.DeleteDialog["delete"](e,a,l,d)},"aui-button aui-button-primary"),GH.Dialog.addCancelButton(r);var n="Delete board",o=GH.tpl.deleterapidviewdialog.renderDefault(),p="Cannot delete board";"true"===i?(r.show(),GH.RapidBoard.DeleteDialog.showSpinner(r),GH.RapidBoard.DeleteDialog.getAllSprints(e).done(function(a){var i=a.values.filter(function(e){return"active"===e.state});if(i.length>0){var t=GH.tpl.deleterapidviewdialog.renderActiveSprints({activeSprints:i,rapidViewId:e});GH.RapidBoard.DeleteDialog.render(r,p,t,!0)}else GH.RapidBoard.DeleteDialog.render(r,n,o,!1)}).fail(function(){GH.RapidBoard.DeleteDialog.hideSpinner(r),GH.RapidBoard.DeleteDialog.render(r,p,null,!0)})):(GH.RapidBoard.DeleteDialog.render(r,n,o,!1),r.show()),AJS.$("#"+r.id).find(".dialog-button-panel .button-panel-cancel-link").focus(),GH.RapidBoard.DeleteDialog.AnalyticsClient.sendScreenEvent("deleteBoardModal",null,{boardType:l})},GH.RapidBoard.DeleteDialog["delete"]=function(e,a,i,t){GH.Ajax.del({url:"/rapidview/"+e}).done(function(d){GH.RapidBoard.DeleteDialog.handleSuccess(e,a,i,t)})},GH.RapidBoard.DeleteDialog.handleSuccess=function(e,a,i,t){AJS.$(GH).trigger("ghx.rapidview.deleted",{rapidViewId:e,rapidViewName:a,message:AJS.format("Successfully deleted board \u003cstrong\u003e{0}\u003c/strong\u003e",AJS.escapeHTML(String(a)))});var d={objectType:"board",objectId:e,attributes:{boardId:e,boardType:i},action:"deleted",actionSubject:"board",actionSubjectId:e,source:"deleteBoardModal"};t&&(d.containerType=t),GH.RapidBoard.DeleteDialog.AnalyticsClient.sendTrackEvent(d)},GH.RapidBoard.DeleteDialog.getAllSprints=function(e){return GH.Ajax.get({bareUrl:GH.Ajax.buildPublicRestUrl("/board/"+e+"/sprint")},"getAllSprintsForBoard")},GH.RapidBoard.DeleteDialog.showSpinner=function(e){e.getCurrentPanel().html(GH.tpl.deleterapidviewdialog.renderSpinner())},GH.RapidBoard.DeleteDialog.hideSpinner=function(e){e.getCurrentPanel().body.find(".ghx-spinner").hide()},GH.RapidBoard.DeleteDialog.render=function(e,a,i,t){e.addHeader(a),i&&(e.getCurrentPanel().html(i),e.updateHeight()),t&&e.disableControls()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/configuration/DeleteRapidViewDialog.soy' */
// This file was automatically generated from DeleteRapidViewDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.deleterapidviewdialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.deleterapidviewdialog == 'undefined') { GH.tpl.deleterapidviewdialog = {}; }


GH.tpl.deleterapidviewdialog.renderDefault = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Are you sure you want to delete this board? You\x27ll have to recreate it if you change your mind.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.deleterapidviewdialog.renderDefault.soyTemplateName = 'GH.tpl.deleterapidviewdialog.renderDefault';
}


GH.tpl.deleterapidviewdialog.renderActiveSprints = function(opt_data, opt_ignored) {
  var output = '<p>' + soy.$$escapeHtml(AJS.format('This board contains {0,choice,1#an|1\x3c} active {0,choice,1#sprint|1\x3csprints}:',opt_data.activeSprints.length)) + '</p><ul class="delete-rapid-view-active-sprints">';
  var sprintList10 = opt_data.activeSprints;
  var sprintListLen10 = sprintList10.length;
  for (var sprintIndex10 = 0; sprintIndex10 < sprintListLen10; sprintIndex10++) {
    var sprintData10 = sprintList10[sprintIndex10];
    output += '<li><a href="' + soy.$$escapeHtml("") + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&sprint=' + soy.$$escapeHtml(sprintData10.id) + '" target="_blank">' + soy.$$escapeHtml(sprintData10.name) + '</a></li>';
  }
  output += '</ul><p>' + soy.$$escapeHtml(AJS.format('Close or delete the {0,choice,1#sprint|1\x3csprints} first, so you don\x27\x27t lose any work.',opt_data.activeSprints.length)) + '</p><p><em>' + soy.$$escapeHtml('Need guidance? See') + ' <a href="https://confluence.atlassian.com/jirasoftwarecloud/running-sprints-in-a-scrum-project-764478111.html">Running sprints in a scrum project</a>.</em></p>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.deleterapidviewdialog.renderActiveSprints.soyTemplateName = 'GH.tpl.deleterapidviewdialog.renderActiveSprints';
}


GH.tpl.deleterapidviewdialog.renderSpinner = function(opt_data, opt_ignored) {
  return '<div id="ghx-spinner-wrapper"><div class="ghx-spinner"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.deleterapidviewdialog.renderSpinner.soyTemplateName = 'GH.tpl.deleterapidviewdialog.renderSpinner';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/QuickEdit.js' */
GH.RapidBoard.QuickEdit={},GH.RapidBoard.QuickEdit.fieldChanges={},GH.RapidBoard.QuickEdit.init=function(){AJS.$(AJS).unbind("QuickEdit.sessionComplete"),AJS.$(AJS).bind("QuickEdit.sessionComplete",function(){JIRA&&JIRA.IssueNavigator&&JIRA.IssueNavigator.setIssueUpdatedMsg&&JIRA.IssueNavigator.setIssueUpdatedMsg(),GH.Notification.showIssueMessage(),GH.RapidBoard.State.isDetailsViewPlanOpened()&&AJS.$("#ghx-issue-fragment").trigger("refresh-backlog-issue",{issueKey:GH.DetailsView.getSelectedIssueKey()}),AJS.$(GH).trigger("issueUpdated",{issueId:GH.IssueOperationShortcuts.getSelectedIssueId(),source:"quickEdit",fieldChanges:GH.RapidBoard.QuickEdit.fieldChanges}),GH.RapidBoard.QuickEdit.fieldChanges={},GH.IssueOperationShortcuts.clearOverrideSelectedIssue()}),JIRA.bind("Dialog.hide",function(e,i,s){"edit-issue-dialog"!==i.attr("id")||s!==JIRA.Dialog.HIDE_REASON.cancel&&s!==JIRA.Dialog.HIDE_REASON.escape||(GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),GH.RapidBoard.QuickEdit.fieldChanges={})}),AJS.$(GH).bind("QuickEdit.fieldChange",function(e,i){GH.RapidBoard.QuickEdit.fieldChanges[i.fieldId]=i.fieldChangeData}),JIRA&&JIRA.Dialog&&JIRA.Dialog.shouldShowIssueKeyInTitle&&(JIRA.Dialog.shouldShowIssueKeyInTitle=function(){return!0})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/QuickCreate.js' */
GH.RapidBoard.QuickCreate={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.QuickCreate.analytics=new e("gh.quickcreate")}(),GH.RapidBoard.QuickCreate.init=function(){function e(e){return function(i,s){AJS.$(GH).trigger("issueCreated",{issues:s,isSubtask:e});var t=_.pluck(s,"issueKey");GH.RapidBoard.QuickCreate.analytics.trigger("create",t)}}function i(i){i.unbind("QuickCreateIssue.sessionComplete"),i.bind("QuickCreateIssue.sessionComplete",e(!1)),i.unbind("QuickCreateSubtask.sessionComplete"),i.bind("QuickCreateSubtask.sessionComplete",e(!0)),i.unbind("QuickCreateEpic.sessionComplete"),i.bind("QuickCreateEpic.sessionComplete",e(!1))}var s=require("jira/container-api"),t=require("jira/util/top-same-origin-window");[window.JIRA,s.getIsIframe()&&t(window).JIRA].filter(Boolean).forEach(i)},GH.RapidBoard.QuickCreate.showCreatedIssuesMessage=function(e,i){var s=GH.EpicConfig.getEpicIssueTypeId(),t=GH.SprintConfig.getSprintFieldId(),a={issues:e.issues,isSubtask:!!e.isSubtask,isRankable:GH.BacklogModel.isRankable()||GH.RankingModel.isRankable()};if(i){var r=_.filter(e.issues,function(e){return e.createdIssueDetails&&e.createdIssueDetails.fields.issuetype.id!==s}),u=!_.find(e.issues,function(e){return!(!e.createdIssueDetails||!e.createdIssueDetails.fields[t])&&e.createdIssueDetails.fields[t].length>0});a=_.extend(a,{isWorkMode:!0,issuesExcludingEpics:r,shouldShowAddToSprints:u},i)}GH.Notification.showSuccess(GH.tpl.quickcreate.renderFilteredIssuesSuccess(a),{timeout:1e4})},GH.RapidBoard.QuickCreate._getPath=function(){return window.location.pathname},GH.RapidBoard.QuickCreate.showSubtaskCreatedMessage=function(e){GH.Notification.showSuccess(GH.tpl.quickcreate.renderSubtasksAddedMessage({issues:e.issues}),{timeout:1e4})},GH.RapidBoard.QuickCreate.showCreatedEpicsMessage=function(e,i){GH.Notification.showSuccess(GH.tpl.quickcreate.renderEpicsAddedMessage({isVisible:i,epics:e.issues}),{timeout:1e4})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/QuickCreate.soy' */
// This file was automatically generated from QuickCreate.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.quickcreate.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.quickcreate == 'undefined') { GH.tpl.quickcreate = {}; }


GH.tpl.quickcreate.renderFilteredIssuesSuccess = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy3 = '' + GH.tpl.quickcreate.issueLinksHtml(opt_data);
  var sprintHtml__soy6 = '' + ((opt_data.issuesMatch && opt_data.canManageSprints && opt_data.issuesExcludingEpics.length > 0 && opt_data.isRankable) ? GH.tpl.quickcreate.sprintHtml({sprints: opt_data.sprints, issues: opt_data.issuesExcludingEpics}) : '');
  output += (opt_data.isSubtask) ? soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#sub-task {1} has|1\x3csub-tasks {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy3)) : (opt_data.isWorkMode) ? soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#issue {1} has|1\x3cissues {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy3)) + ((opt_data.shouldShowAddToSprints) ? ' ' + soy.$$filterNoAutoescape(sprintHtml__soy6) : '') : soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#issue {1} has|1\x3cissues {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy3));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderFilteredIssuesSuccess.soyTemplateName = 'GH.tpl.quickcreate.renderFilteredIssuesSuccess';
}


GH.tpl.quickcreate.issueLinksHtml = function(opt_data, opt_ignored) {
  var output = '';
  var issueList28 = opt_data.issues;
  var issueListLen28 = issueList28.length;
  for (var issueIndex28 = 0; issueIndex28 < issueListLen28; issueIndex28++) {
    var issueData28 = issueList28[issueIndex28];
    output += '<a class="js-issue-link" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData28.issueKey) + '">' + soy.$$escapeHtml(issueData28.issueKey) + '</a>' + ((! (issueIndex28 == issueListLen28 - 1)) ? ', ' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.issueLinksHtml.soyTemplateName = 'GH.tpl.quickcreate.issueLinksHtml';
}


GH.tpl.quickcreate.issueKeysAttribute = function(opt_data, opt_ignored) {
  var output = '';
  var issueList41 = opt_data.issues;
  var issueListLen41 = issueList41.length;
  for (var issueIndex41 = 0; issueIndex41 < issueListLen41; issueIndex41++) {
    var issueData41 = issueList41[issueIndex41];
    output += soy.$$escapeHtml(issueData41.issueKey) + ((! (issueIndex41 == issueListLen41 - 1)) ? ',' : '');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.issueKeysAttribute.soyTemplateName = 'GH.tpl.quickcreate.issueKeysAttribute';
}


GH.tpl.quickcreate.sprintHtml = function(opt_data, opt_ignored) {
  var output = '';
  var issueKeys__soy48 = '' + GH.tpl.quickcreate.issueKeysAttribute(opt_data);
  if (issueKeys__soy48.length > 0) {
    var sprintList53 = opt_data.sprints;
    var sprintListLen53 = sprintList53.length;
    for (var sprintIndex53 = 0; sprintIndex53 < sprintListLen53; sprintIndex53++) {
      var sprintData53 = sprintList53[sprintIndex53];
      output += '<a class="js-add-new-issue-to-sprint" data-issue-keys="' + soy.$$escapeHtml(issueKeys__soy48) + '" data-sprint-id="' + soy.$$escapeHtml(sprintData53.id) + '">' + soy.$$escapeHtml(AJS.format('Add {0,choice,1# |1\x3call} to {1}',opt_data.issues.length,sprintData53.name)) + '</a> ' + ((! (sprintIndex53 == sprintListLen53 - 1)) ? '| ' : '');
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.sprintHtml.soyTemplateName = 'GH.tpl.quickcreate.sprintHtml';
}


GH.tpl.quickcreate.renderSubtasksAddedMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy66 = '' + GH.tpl.quickcreate.issueLinksHtml(opt_data);
  output += soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#sub-task {1} has|1\x3csub-tasks {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.issues.length,issueLinksHtml__soy66));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderSubtasksAddedMessage.soyTemplateName = 'GH.tpl.quickcreate.renderSubtasksAddedMessage';
}


GH.tpl.quickcreate.renderEpicsAddedMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issueLinksHtml__soy72 = '' + GH.tpl.quickcreate.issueLinksHtml({issues: opt_data.epics});
  output += (opt_data.isVisible) ? soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#epic {1} has|1\x3cepics {1} have} been created.',opt_data.epics.length,issueLinksHtml__soy72)) : soy.$$filterNoAutoescape(AJS.format('Your {0,choice,1#epic {1} has|1\x3cepics {1} have} been created but {0,choice,1#is|1\x3cone or more are} not currently visible.',opt_data.epics.length,issueLinksHtml__soy72));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.quickcreate.renderEpicsAddedMessage.soyTemplateName = 'GH.tpl.quickcreate.renderEpicsAddedMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanConvertDialog.js' */
function _classCallCheck(n,a){if(!(n instanceof a))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function n(n,a){for(var e=0;e<a.length;e++){var t=a[e];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}return function(a,e,t){return e&&n(a.prototype,e),t&&n(a,t),a}}();define("jira-agile/rapid/ui/kanplan/KanPlanConvertDialog",["jira-agile/rapid/ui/kanplan/kan-plan-feature-service","jira-agile/rapid/events","jira-agile/rapid/analytics-tracker","jira-agile/rapid/ui/SPConfigController"],function(n,a,e,t){function i(n){var a=GH.Dialog.create({width:600,height:360,id:"ghx-kanplan-convert",onCancelFn:n.cancelCallback});return a.startAction=function(n){this.disableControls(),this.showSpinner(),_.isFunction(n)&&n()},a.stopAction=function(){this.enableControls(),this.hideSpinner()},a.addHeader("Kanban backlog"),a.addPanel("","panel"),a.getCurrentPanel().html(GH.tpl.kanplan.convertDialog({columnName:n.columnName})),a.addButton("Let me choose",a.startAction.bind(a,n.secondaryCallback),"aui-button"),a.addButton("Yes, use this column",a.startAction.bind(a,n.callback),"aui-button aui-button-primary"),a.addCancel("Cancel",function(){return a.cancel(a)}),a}var r=function(){function e(){_classCallCheck(this,e),new a(this)}return _createClass(e,[{key:"setRapidViewId",value:function(n){this.rapidViewId=n}},{key:"setColumnName",value:function(n){this.columnName=n}},{key:"show",value:function(){var a=this,r=function(){n.autoConvertKanPlan(a.rapidViewId).done(function(){a.trigger(e.CONVERT_SUCCESS)}).fail(l.stopAction.bind(l)),e.Analytics.confirm()},o=e.Analytics.cancel,c=function(){e.Analytics.configure(),t.openConfig("columns"),l.remove()},l=i({callback:r,secondaryCallback:c,cancelCallback:o,columnName:this.columnName});l.show()}}]),e}();r.CONVERT_SUCCESS="kanplan.convert.success";var o=new e("jira-software.kanplan.onboarding.convert");return r.Analytics={confirm:function(){return o.trigger("confirm")},configure:function(){return o.trigger("configure")},cancel:function(){return o.trigger("cancel")}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanConvertDialog.soy' */
// This file was automatically generated from KanPlanConvertDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }


GH.tpl.kanplan.convertDialog = function(opt_data, opt_ignored) {
  return '<div><div class="ghx-kanban-convert-image"></div><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('The Kanban backlog gives you a bigger space to plan work for your team. To enable, we\x27\x27ll move your \x3cstrong\x3e{0}\x3c/strong\x3e column to the new view. Is this the right column?',typeof (opt_data.columnName) === 'number' ? opt_data.columnName : soy.$$escapeHtml(opt_data.columnName)))) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.kanplan.convertDialog.soyTemplateName = 'GH.tpl.kanplan.convertDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanAcknowledge.js' */
define("jira-agile/rapid/ui/kanplan/kanplan-acknowledge",["require"],function(){"use strict";var e=require("underscore"),n=require("jquery"),a=require("jira-agile/rapid/const/PageMode"),o={},r=require("jira-agile/rapid/ui/kanplan/kan-plan-feature-service"),i={},l="kanplan.acknowledge.display",d=null;o.init=function(){d=t()};var t=function(){i=GH.storage.get(l);var a=null;if(e.isNull(i)){var o=function(e){i=e,GH.storage.put(l,e)};a=GH.Ajax.get({url:"/xboard/plan/kanban/acknowledgeDisplay"}),a.done(o)}else a=n.Deferred().resolve();return a};return o.show=function(){o.hide(),d&&d.done(function(){if(o.canShowAcknowledge()){var e=void 0;GH.RapidBoard.State.isWorkMode()?(e=n(GH.tpl.kanplan.kanplanacknowledge.renderWorkMode()),e.find(".aui-button-primary").on("click",function(){o.close().always(function(){GH.RapidBoard.ViewController.setMode(a.PLAN)})})):e=n(GH.tpl.kanplan.kanplanacknowledge.renderPlanMode({learnMoreURL:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+your+Kanban+backlog","isLocal":false}.url})),e.find(".ghx-ack-close").on("click",o.close),n("#gh").prepend(e)}})},o.canShowAcknowledge=function(){return!!r.shouldShowKanbanBacklog()&&(GH.RapidBoard.State.isWorkMode()?!i.isClosedOnWorkMode:!i.isClosedOnPlanMode)},o.hide=function(){n("#gh").find(".ghx-kanplan-ack").remove(),GH.RapidBoard.ViewController.handleResizeEvent()},o.close=function(){var e=GH.Ajax.post({url:"/xboard/plan/kanban/closeAcknowledge?mode="+GH.RapidBoard.State.data.mode});return e.done(function(){GH.RapidBoard.State.isWorkMode()?i.isClosedOnWorkMode=!0:i.isClosedOnPlanMode=!0,GH.storage.put(l,i),o.hide()}),e},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanAcknowledge.soy' */
// This file was automatically generated from KanPlanAcknowledge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.kanplanacknowledge.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }
if (typeof GH.tpl.kanplan.kanplanacknowledge == 'undefined') { GH.tpl.kanplan.kanplanacknowledge = {}; }


GH.tpl.kanplan.kanplanacknowledge.renderWorkMode = function(opt_data, opt_ignored) {
  return '<div class="ghx-kanplan-ack"><div class="ghx-kanplan-ack-container ghx-kanplan-ack-workmode"><div class="ghx-ack-close-button ghx-ack-close"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close acknowledge') + '</span></div><h2>' + soy.$$escapeHtml('Your Kanban board simplified') + '</h2><p>' + soy.$$filterNoAutoescape(AJS.format('You now have a Kanban backlog, where you get more space to plan your team\x27\x27s work. With this, your Kanban board is now a distraction-free zone for your work-in-progress.','<b>','</b>','<b>','</b>')) + '</p><div class="ghx-button-container"><button class="aui-button aui-button-primary">' + soy.$$escapeHtml('Take me there') + '</button><a href="#" class="ghx-ack-close">' + soy.$$escapeHtml('Not now') + '</a></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.kanplan.kanplanacknowledge.renderWorkMode.soyTemplateName = 'GH.tpl.kanplan.kanplanacknowledge.renderWorkMode';
}


GH.tpl.kanplan.kanplanacknowledge.renderPlanMode = function(opt_data, opt_ignored) {
  return '<div class="ghx-kanplan-ack"><div class="ghx-kanplan-ack-container ghx-kanplan-ack-planmode"><div class="ghx-ack-close-button ghx-ack-close"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close acknowledge') + '</span></div><h2>' + soy.$$escapeHtml('Your bigger and better Backlog') + '</h2><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('You now have a dedicated backlog to create, prioritize, and select work for development. Meanwhile, your Kanban board is now a distraction-free zone for your work-in-progress.')) + '</p><div class="ghx-button-container"><button class="aui-button aui-button-primary ghx-ack-close">' + soy.$$escapeHtml('OK, got it') + '</button><a target="_blank" href="' + soy.$$escapeHtml(opt_data.learnMoreURL) + '">' + soy.$$escapeHtml('Learn more') + '</a></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.kanplan.kanplanacknowledge.renderPlanMode.soyTemplateName = 'GH.tpl.kanplan.kanplanacknowledge.renderPlanMode';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/version/VersionQuickCreate.js' */
!function(){"use strict";var e=require("jira/ajs/select/single-select"),r=GH.TimeFormat,i=require("jira-agile/browser-metrics/browser-metrics-util");GH.VersionQuickCreate={},GH.VersionQuickCreate.EVENT_VERSION_CREATED="versionCreated",GH.VersionQuickCreate.accessibleProjects=[],GH.VersionQuickCreate.setAccessibleProjects=function(e){GH.VersionQuickCreate.accessibleProjects=e},GH.VersionQuickCreate.showDialog=function(){GH.Dialog.dim(),GH.VersionQuickCreate.renderDialog()},GH.VersionQuickCreate.renderDialog=function(){var e=GH.Dialog.create({width:450,height:350,id:"ghx-dialog-create-version"});e.addHeader("Create Version"),e.addPanel("","panel"),e.getCurrentPanel().html(GH.tpl.versionview.renderQuickCreateView({projects:GH.VersionQuickCreate.accessibleProjects})),e.addButton("Create",function(){e.disableControls(),GH.VersionQuickCreate.submit(e)},"aui-button"),GH.Dialog.addCancelButton(e),GH.VersionQuickCreate.registerProjectControls(),GH.VersionQuickCreate.registerCalendarControls(),AJS.$(".aui-dialog").addClass("ghx-dialog"),e.show(),e.updateHeight(),GH.Dialog.Spinner.hide(),AJS.$("#ghx-version-name").focus()},GH.VersionQuickCreate.submit=function(e){GH.Validation.clearContextualErrors(AJS.$("#ghx-dialog-create-version"));var r=GH.VersionQuickCreate._extractModel();i.triggerBefore("before:createVersion","versionCreate"),GH.Ajax.post({url:"/versions",data:r,errorContextMap:{projectId:"#ghx-version-project",name:"#ghx-version-name",startDate:"#ghx-version-start-date-error",releaseDate:"#ghx-version-release-date-error"}}).done(function(r){var i=r.success;e.dispose(),GH.Dialog.triggerHideEvent(),GH.Notification.showSuccess(AJS.format("Version \'\'{0}\'\' was successfully created.","<strong>"+AJS.escapeHTML(String(i.name))+"</strong>")),AJS.$(GH).trigger(GH.VersionQuickCreate.EVENT_VERSION_CREATED,[{createdVersion:i}])}).fail(e.enableControls).always(function(){i.performanceMark("api_call_done_versions")})},GH.VersionQuickCreate.registerCalendarControls=function(){new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-version-release-date",button:"ghx-version-release-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!1,timeFormat:12,positionStyle:"fixed",ifFormat:r.dateFormat,useISO8601WeekNumbers:r.useISO8601WeekNumbers}),Calendar.setup({firstDay:0,inputField:"ghx-version-start-date",button:"ghx-version-start-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!1,timeFormat:12,positionStyle:"fixed",ifFormat:r.dateFormat,useISO8601WeekNumbers:r.useISO8601WeekNumbers})},GH.VersionQuickCreate.registerProjectControls=function(){return new e({element:AJS.$("#ghx-version-project"),revertOnInvalid:!0,width:250})},GH.VersionQuickCreate.registerCreateVersionDialog=function(){var e=AJS.$("#ghx-version-column");e.find(".js-create-version").click(function(){GH.VersionQuickCreate.showDialog()})},GH.VersionQuickCreate._extractModel=function(){var e=AJS.$("#ghx-dialog-create-version");return{projectId:e.find("#ghx-version-project :selected").val(),name:e.find("#ghx-version-name").val(),description:e.find("#ghx-version-description").val(),releaseDate:e.find("#ghx-version-release-date").val(),startDate:e.find("#ghx-version-start-date").val()}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/StartSprintDialog.js' */
!function(){GH.Dialogs.StartSprintDialog={},GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED="sprintStarted";var t=require("jira/featureflags/feature-manager"),a=t.isFeatureEnabled("jsw.roadmap.add-future-sprint-dates");!function(){var t=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.StartSprintDialog.analytics=new t("gh.start.sprint.dialog.change")}(),GH.Dialogs.StartSprintDialog.analyticsMetaData=function(t){AJS.trigger("analyticsEvent",{name:"gh.sprint.start",data:t})};var e=require("jira-agile/browser-metrics/browser-metrics-util");GH.Dialogs.StartSprintDialog.showDialog=function(a,i,r){GH.Dialog.dim(),GH.Ajax.get({url:"/sprint/"+i+"/start",data:{rapidViewId:a,sprintId:i}},"showStartSprintDialog").always(function(){e.performanceMark("api_call_sprint_popup_create_done")}).done(function(a){t.isFeatureEnabled("jsw.agility.always.issue.count")&&GH.RapidBoard.State.isAgilityBoard()&&(a.countNotEstimatedIssues=0,a.issuesNotEstimated=[]),GH.Dialogs.StartSprintDialog.renderDialog(a,r<a.numIssues)}).fail(GH.Dialog.undim),GH.Dialogs.StartSprintDialog.analytics.trigger("start")},GH.Dialogs.StartSprintDialog.renderDialog=function(t,e){var i=function(){GH.Dialog.triggerHideEvent(),GH.Dialogs.StartSprintDialog.analytics.trigger("cancel")},r=GH.Dialog.create({width:575,height:500+(e?70:0)+(t.countNotEstimatedIssues>0?90:0)+(t.noTrackingEstimateIssueCount>0?90:0),id:"ghx-dialog-start-sprint",onCancelFn:i,analyticsPageName:"startSprintModal"});r.addHeader("Start sprint"),r.addPanel("","panel");var n=[{value:7,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",1)},{value:14,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",2)},{value:21,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",3)},{value:28,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",4)},{value:"custom",text:"Custom"}],s=moment().zone(GH.TimeFormat.userTimeZoneLabel).format("YYYY-MM-DD hh:mm a"),o=new Date(s).print(GH.TimeFormat.dateTimePickerFormat);r.getCurrentPanel().html(GH.tpl.dialogs.startsprint.renderStartSprintDialog({numIssues:t.numIssues,defaultName:t.defaultName,defaultStartDate:a?o:t.defaultStartDate,defaultEndDate:t.defaultEndDate,showFilteredIssuesWarning:e,numNotEstimatedIssues:t.countNotEstimatedIssues,numExtraNotEstimatedIssues:t.countNotEstimatedIssues-t.issuesNotEstimated.length,snapshotIssuesNotEstimated:_.flatten([_.first(t.issuesNotEstimated,t.issuesNotEstimated.length-1)]).join(", "),lastIssueNotEstimated:_.last(t.issuesNotEstimated),numNoTrackingEstimateIssues:t.noTrackingEstimateIssueCount,numExtraNoTrackingEstimateIssues:t.noTrackingEstimateIssueCount-t.noTrackingEstimateIssues.length,snapshotIssuesNoTrackingEstimate:_.flatten([_.first(t.noTrackingEstimateIssues,t.noTrackingEstimateIssues.length-1)]).join(", "),lastIssueNoTrackingEstimate:_.last(t.noTrackingEstimateIssues),listOfSprintDurations:n,hasNoSubtaskDoneStatus:t.hasNoSubtaskDoneStatus,endSprintHelpUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Ending+a+Sprint","isLocal":false}.url,sprintGoal:t.sprintGoal,plannedSprintDate:a?t.startDate:null})),r.addButton("Start",function(){r.disableControls(),GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.COMMON.START_SPRINT_DIALOG),GH.Dialogs.StartSprintDialog.submit(r,t)},"aui-button"),GH.Dialog.addCancelButton(r),GH.Dialogs.StartSprintDialog.registerCalendarControls(),GH.Dialogs.StartSprintDialog.registerDurationDropdown(AJS.$(document.body),n),AJS.$(".aui-dialog").addClass("ghx-dialog"),r.show(),GH.Dialog.Spinner.hide(),AJS.$("#ghx-sprint-name").focus(),GH.Dialogs.StartSprintDialog.registerWorkdayCounter(t.rapidViewId,r)},GH.Dialogs.StartSprintDialog.submit=function(t,i){e.triggerBefore("before:startSprintSubmit");var r=AJS.$("#ghx-dialog-start-sprint"),n={rapidViewId:i.rapidViewId,sprintId:i.sprintId,name:r.find("#ghx-sprint-name").val(),startDate:r.find("#ghx-sprint-start-date").val(),endDate:r.find("#ghx-sprint-end-date").val(),goal:r.find("#ghx-sprint-goal-input").val()};GH.Validation.clearContextualErrors(r),GH.Ajax.put({url:"/sprint/"+i.sprintId+"/start",data:n,errorContextMap:{name:"#ghx-sprint-name",startDate:"#ghx-sprint-start-date-error",endDate:"#ghx-sprint-end-date-error",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError}}).done(function(e){var r=i.numIssues,s=GH.Dialogs.StartSprintDialog.calculateSprintDuration(n.startDate,n.endDate),o=(i.totalStatistic,{sprintId:i.sprintId,numIssues:r,sprintDuration:s,totalStatistic:i.totalStatistic});if(a){var l=Date.parseDate(n.startDate,GH.TimeFormat.dateTimePickerFormat).valueOf(),g=Date.parseDate(n.endDate,GH.TimeFormat.dateTimePickerFormat).valueOf();o.plannedStartDate=i.isoStartDate?new Date(i.isoStartDate).valueOf():"",o.committedStartDate=l,o.plannedEndDate=i.defaultIsoEndDate?new Date(i.defaultIsoEndDate).valueOf():"",o.committedEndDate=g}GH.Dialogs.StartSprintDialog.analytics.trigger("complete"),GH.Dialogs.StartSprintDialog.analyticsMetaData(o),t.dispose(),GH.Dialog.triggerHideEvent(),GH.RapidBoard.State.isAgilityBoard()||GH.Notification.showSuccess(AJS.format("Sprint \'\'{0}\'\' has successfully been started.",AJS.escapeHTML(String(e.success.name)))),AJS.$(GH).trigger(GH.Dialogs.StartSprintDialog.EVENT_SPRINT_STARTED)}).always(function(){e.performanceMark("api_call_done_start_sprint")}).fail(t.enableControls)},GH.Dialogs.StartSprintDialog.registerCalendarControls=function(){new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-sprint-start-date",button:"ghx-sprint-start-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),Calendar.setup({firstDay:0,inputField:"ghx-sprint-end-date",button:"ghx-sprint-end-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers})},GH.Dialogs.StartSprintDialog.calculateWorkDaysRemaining=function(t,a,e,i){var r=Date.parseDate(t,GH.TimeFormat.dateTimePickerFormat).getTime(),n=Date.parseDate(a,GH.TimeFormat.dateTimePickerFormat).getTime();GH.Ajax.get({url:"/rapidviewconfig/workingdays/period",data:{rapidViewId:e,startDate:r,endDate:n}},"workingdaysperiod").done(function(t){AJS.$("#ghx-sprint-work-days-remaining").remove(),i.getCurrentPanel().body.append(GH.tpl.dialogs.startsprint.renderWorkDaysInSprint({numWorkDaysInSprint:t.days,helpLinkUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Configuring+Working+Days","isLocal":false}.url})),AJS.$("#ghx-sprint-work-days-loading").hide()}).fail(function(){AJS.$("#ghx-sprint-work-days-remaining").remove()})},GH.Dialogs.StartSprintDialog.calculateSprintDuration=function(t,a){return Math.ceil(GH.Dialogs.StartSprintDialog.calculateSprintDurationExact(t,a)).toString()},GH.Dialogs.StartSprintDialog.calculateSprintDurationExact=function(t,a){var e=moment(Date.parseDate(t,GH.TimeFormat.dateTimePickerFormat)),i=moment(Date.parseDate(a,GH.TimeFormat.dateTimePickerFormat)),r=i.diff(e,"days",!0);return r},GH.Dialogs.StartSprintDialog.registerDurationDropdown=function(t,a){var e=t.find("#ghx-sprint-duration"),i=t.find("#ghx-sprint-start-date"),r=t.find("#ghx-sprint-end-date"),n=t.find("#ghx-sprint-end-date_trigger_c"),s=function(){if("custom"!==e.val()&&i.val()){var t=moment(Date.parseDate(i.val(),GH.TimeFormat.dateTimePickerFormat));t.add(parseInt(e.val()),"days"),r.val(t.toDate().print(GH.TimeFormat.dateTimePickerFormat))}};e.change(function(){var t="custom"!==e.val();r.prop("disabled",t),s()}),i.change(s);var o=function(t){var a=GH.Dialogs.StartSprintDialog.calculateSprintDurationExact(i.val()||"",r.val()||""),e=_.find(t,function(t){return a===t.value});return e?e.value:"custom"},l=function(){e.val(o(a)).trigger("change")};l(),n.click(function(){r.prop("disabled")&&(e.val("custom").trigger("change"),r.prop("disabled",!1).focus(),n.trigger("click"))}),i.focusout(l),r.focusout(l)},GH.Dialogs.StartSprintDialog.registerWorkdayCounter=function(t,a){var e=AJS.$("#ghx-sprint-start-date"),i=AJS.$("#ghx-sprint-end-date"),r=AJS.$("#ghx-sprint-duration"),n=function(){GH.Dialogs.StartSprintDialog.calculateWorkDaysRemaining(e.val(),i.val(),t,a)};n(),e.change(n),i.change(n),r.change(function(){"custom"!==r.val()&&n()})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/StartSprintDialog.soy' */
// This file was automatically generated from StartSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.startsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.startsprint == 'undefined') { GH.tpl.dialogs.startsprint = {}; }


GH.tpl.dialogs.startsprint.renderStartSprintDialog = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.numNotEstimatedIssues > 0) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml(AJS.format('{0,choice,0#Issue|1#Issue|2#Issues} {0,choice,0#{2}|1#{3}|2#{2} and {3}|5#{2}, {3}} {1,choice,0# |1#and {1} other|2#and {1} others} {0,choice,0#does|1#does|2#do} not have a value for the \x27\x27Estimate\x27\x27 field. Values entered after the start of the sprint will be treated as scope change.',opt_data.numNotEstimatedIssues,opt_data.numExtraNotEstimatedIssues,opt_data.snapshotIssuesNotEstimated,opt_data.lastIssueNotEstimated)) + '</p></div>' : '') + ((opt_data.numNoTrackingEstimateIssues > 0) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml(AJS.format('{0,choice,0#Issue|1#Issue|2#Issues} {0,choice,0#{2}|1#{3}|2#{2} and {3}|5#{2}, {3}} {1,choice,0# |1#and {1} other|2#and {1} others} {0,choice,0#does|1#does|2#do} not have a value for the \x27\x27Remaining\x27\x27 field. Values entered after the start of the sprint will be treated as scope change.',opt_data.numNoTrackingEstimateIssues,opt_data.numExtraNoTrackingEstimateIssues,opt_data.snapshotIssuesNoTrackingEstimate,opt_data.lastIssueNoTrackingEstimate)) + '</p></div>' : '') + ((opt_data.showFilteredIssuesWarning) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('Includes issue(s) currently hidden by a Quick Filter or the Instant Filter.') + '</p></div>' : '') + ((opt_data.hasNoSubtaskDoneStatus) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('You will not be able to complete this sprint, as it includes sub-tasks that cannot be transitioned to the \x22Done\x22 column.') + ' <a href="' + soy.$$escapeHtml(opt_data.endSprintHelpUrl) + '" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a></p></div>' : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format('{1,choice,0#{0} issues|1#{0} issue|2#{0} issues} will be included in this sprint.','<strong>' + opt_data.numIssues + '</strong>',opt_data.numIssues)) + '</p><form class="aui"><fieldset><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml('Sprint name') + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-sprint-name" value="' + soy.$$escapeHtml(opt_data.defaultName) + '"></div><div class="field-group"><label for="ghx-sprint-duration">' + soy.$$escapeHtml('Duration') + ':<span class="aui-icon icon-required"></span></label><select class="select" id="ghx-sprint-duration" name="ghx-sprint-duration">';
  var durationList37 = opt_data.listOfSprintDurations;
  var durationListLen37 = durationList37.length;
  for (var durationIndex37 = 0; durationIndex37 < durationListLen37; durationIndex37++) {
    var durationData37 = durationList37[durationIndex37];
    output += '<option value="' + soy.$$escapeHtml(durationData37.value) + '">' + soy.$$escapeHtml(durationData37.text) + '</option>';
  }
  output += '</select></div><div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml('Start date') + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-start-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.defaultStartDate) + '"><span id="ghx-sprint-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit start date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-start-date-error"></span>' + ((opt_data.plannedSprintDate) ? '<div id="ghx-sprint-planned-start-date">' + soy.$$escapeHtml('Planned sprint date') + ': <strong>' + soy.$$escapeHtml(opt_data.plannedSprintDate) + '</strong><br/>' + soy.$$escapeHtml('This start date impacts sprint velocity and scope in reports.') + '&nbsp;<a target="_blank" href="https://support.atlassian.com/jira-software-cloud/docs/plan-a-sprint/#The-planned-start-date-automatically-updates-when-you-start-a-sprint">' + soy.$$escapeHtml('Learn more') + '</a></div>' : '') + '</div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml('End date') + ':<span class="aui-icon icon-required"></span></label><input id="ghx-sprint-end-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.defaultEndDate) + '"><span id="ghx-sprint-end-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit end date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-end-date-error"></span></div><div class="field-group"><label for="ghx-sprint-goal-input">' + soy.$$escapeHtml('Sprint goal:') + '</label><textarea class="textarea full-width-field" name="goal" id="ghx-sprint-goal-input">' + ((opt_data.sprintGoal) ? soy.$$escapeHtml(opt_data.sprintGoal) : '') + '</textarea></div></fieldset></form><span id="ghx-sprint-work-days-loading" class="aui-icon aui-icon-wait">' + soy.$$escapeHtml('Loading...') + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.startsprint.renderStartSprintDialog.soyTemplateName = 'GH.tpl.dialogs.startsprint.renderStartSprintDialog';
}


GH.tpl.dialogs.startsprint.renderWorkDaysInSprint = function(opt_data, opt_ignored) {
  return '<p id="ghx-sprint-work-days-remaining" class="ghx-sprint-dialog-working-days">' + soy.$$filterNoAutoescape(AJS.format('There {1,choice,0#are|1#is|1\x3care} {0}{1} working {1,choice,0#days|1#day|1\x3cdays}{2} in this sprint','<strong>',opt_data.numWorkDaysInSprint,'</strong>')) + '<span id=\'ghx-sprint-work-days-help\'><span class="aui-icon aui-icon-small aui-iconfont-help ghx-sprint-help-icon"></span><a href=' + soy.$$escapeHtml(opt_data.helpLinkUrl) + ' target="_blank">' + soy.$$escapeHtml('More about working days') + '</a></span></p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.startsprint.renderWorkDaysInSprint.soyTemplateName = 'GH.tpl.dialogs.startsprint.renderWorkDaysInSprint';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/AddIssuesToActiveSprintDialog.soy' */
// This file was automatically generated from AddIssuesToActiveSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.addissuestoactivesprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.addissuestoactivesprint == 'undefined') { GH.tpl.dialogs.addissuestoactivesprint = {}; }


GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('Sprint scope will be affected by this action.') + '</p></div>';
  var changeList6 = opt_data.changes;
  var changeListLen6 = changeList6.length;
  for (var changeIndex6 = 0; changeIndex6 < changeListLen6; changeIndex6++) {
    var changeData6 = changeList6[changeIndex6];
    output += GH.tpl.dialogs.issuemovedialog.renderChange({change: changeData6});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog.soyTemplateName = 'GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/AddIssuesToActiveSprintDialog.js' */
GH.AddIssuesToActiveSprintDialog={},GH.AddIssuesToActiveSprintDialog.Analytics={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.AddIssuesToActiveSprintDialog.Analytics.add=new e("gh.activesprint.issue.add")}(),GH.AddIssuesToActiveSprintDialog.showDialog=function(e,t){var i=GH.IssueMoveController.getAllIssueKeys(e),a=GH.Dialog.create({width:600,height:250,id:"ghx-add-issues-to-active-sprint",onCancelFn:function(e){t.reject(i)}});a.addHeader(AJS.format("Move {0,choice,1# issue|2\u003c issues}",i.length)),a.addPanel("","panel");var n=GH.tpl.dialogs.addissuestoactivesprint.renderAddIssuesToActiveSprintDialog(e);a.getCurrentPanel().html(n);var s="Confirm";a.addButton(s,function(){a.disableControls(),a.dispose(),t.resolve(e)},"aui-button"),GH.Dialog.addCancelButton(a),a.show(),a.updateHeight(),AJS.$("#"+a.id).find(".dialog-button-panel .button-panel-cancel-link").focus()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanFeatureService.js' */
define("jira-agile/rapid/ui/kanplan/kan-plan-feature-service",["require","jira-agile/rapid/ajax"],function(a,n){"use strict";var r={};return r.shouldShowKanbanBacklog=function(){return GH.RapidViewConfig.kanPlanEnabled},r.autoConvertKanPlan=function(a){return n.post({url:"/xboard/plan/kanban/"+a+"/autoConvert"})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanDialogUtils.js' */
define("jira-agile/rapid/ui/kanplan/kan-plan-dialog-utils",["jquery","underscore","jira-agile/rapid/events"],function(n,t,a){"use strict";function e(e){var i=GH.Dialog.create({width:e.width,height:e.height,id:e.id,onCancelFn:function(){return i.trigger("cancel")}});new a(i);var r=n("#"+i.id);return r.addClass("ghx-dialog"),i.addHeader(e.header),i.addPanel("","panel"),i.getCurrentPanel().html(e.message),i.addButton(e.submitButton,function(){var n={};t.isFunction(e.getSubmitModel)&&(n=e.getSubmitModel()),i.disableControls(),i.dispose(),i.trigger("submit",n)},"aui-button aui-button-primary"),t.isUndefined(e.cancelLink)===!1&&i.addCancel(e.cancelLink,function(){i.cancel(i)}),i}var i={};return i.createTransitionStatusDialog=function(n,t){return AJS.trigger("analyticsEvent",{name:"jira-software.plan.transition-menu.view",data:{boardType:"kanban",issueCount:t.length,optionCount:n.length}}),e({width:500,height:300,id:"ghx-kanplan-transition-status",header:"Choose a transition",message:GH.tpl.kanplan.dialogutils.transitionStatusContent({transitions:n,issueKeys:t.join(", "),numIssues:t.length}),submitButton:"Choose",cancelLink:"Cancel",getSubmitModel:function(){var n=AJS.$("#ghx-kanplan-transition-status input[name=status]:checked");return n.attr("id")}})},i.createAutoOffShowEpicAsPanelDialog=function(){var n=e({width:400,height:200,header:"Disable Kanban backlog",message:"By disabling the Kanban backlog, any epics in the Epics panel will now be displayed as cards on your board.",submitButton:"Confirm",cancelLink:"Cancel"});return n},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/kanplan/KanPlanDialogUtils.soy' */
// This file was automatically generated from KanPlanDialogUtils.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.kanplan.dialogutils.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.kanplan == 'undefined') { GH.tpl.kanplan = {}; }
if (typeof GH.tpl.kanplan.dialogutils == 'undefined') { GH.tpl.kanplan.dialogutils = {}; }


GH.tpl.kanplan.dialogutils.transitionStatusContent = function(opt_data, opt_ignored) {
  var output = '<p>' + ((opt_data.numIssues == 1) ? soy.$$escapeHtml(AJS.format('Choose one of {0} available transitions for issue {1}',opt_data.transitions.length,opt_data.issueKeys)) : soy.$$escapeHtml(AJS.format('Choose one of {0} available transitions for issues {1}',opt_data.transitions.length,opt_data.issueKeys))) + '</p><form>';
  var transitionList10 = opt_data.transitions;
  var transitionListLen10 = transitionList10.length;
  for (var transitionIndex10 = 0; transitionIndex10 < transitionListLen10; transitionIndex10++) {
    var transitionData10 = transitionList10[transitionIndex10];
    output += '<div class="kanplan-transition-status-option"><input id="' + soy.$$escapeHtml(transitionData10.id) + '" type="radio" name="status" value="' + soy.$$escapeHtml(transitionData10.targetStatus) + '" ' + ((transitionIndex10 == 0) ? ' checked ' : '') + '><label for="' + soy.$$escapeHtml(transitionData10.id) + '">' + soy.$$escapeHtml(transitionData10.name) + '</label></div>';
  }
  output += '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.kanplan.dialogutils.transitionStatusContent.soyTemplateName = 'GH.tpl.kanplan.dialogutils.transitionStatusContent';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/EditSprintDialog.soy' */
// This file was automatically generated from EditSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.editsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.editsprint == 'undefined') { GH.tpl.dialogs.editsprint = {}; }


GH.tpl.dialogs.editsprint.renderEditSprintDialog = function(opt_data, opt_ignored) {
  var output = '<form class="aui"><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml('Sprint name') + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-sprint-name" value="' + soy.$$escapeHtml(opt_data.sprint.name) + '"></div>';
  if (opt_data.isFutureSprintDatesEnabled || ! (opt_data.sprint.state == 'FUTURE')) {
    if (opt_data.isFutureSprintDatesEnabled && opt_data.sprint.state == 'FUTURE') {
      output += '<div class="field-group"><label for="ghx-sprint-duration">' + soy.$$escapeHtml('Duration') + ':</label><select class="select" id="ghx-sprint-duration" name="ghx-sprint-duration">';
      var durationList15 = opt_data.listOfSprintDurations;
      var durationListLen15 = durationList15.length;
      for (var durationIndex15 = 0; durationIndex15 < durationListLen15; durationIndex15++) {
        var durationData15 = durationList15[durationIndex15];
        output += '<option value="' + soy.$$escapeHtml(durationData15.value) + '">' + soy.$$escapeHtml(durationData15.text) + '</option>';
      }
      output += '</select></div>';
    }
    output += '<div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml('Start date') + ':' + ((! (opt_data.sprint.state == 'FUTURE')) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><input id="ghx-sprint-start-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.sprint.startDate) + '"><span id="ghx-sprint-start-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit start date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-start-date-error"></span></div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml('End date') + ':' + ((! (opt_data.sprint.state == 'FUTURE')) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><input id="ghx-sprint-end-date" class="text medium-field" type="text" value="' + soy.$$escapeHtml(opt_data.sprint.endDate) + '"><span id="ghx-sprint-end-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit end date') + '">' + soy.$$escapeHtml('Edit') + '</span><span id="ghx-sprint-end-date-error"></span></div>';
  }
  output += '<div class="field-group"><label for="ghx-sprint-goal-input">' + soy.$$escapeHtml('Sprint goal:') + '</label><textarea class="textarea full-width-field" name="goal" id="ghx-sprint-goal-input">' + ((opt_data.sprint.goal) ? soy.$$escapeHtml(opt_data.sprint.goal) : '') + '</textarea></div></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.editsprint.renderEditSprintDialog.soyTemplateName = 'GH.tpl.dialogs.editsprint.renderEditSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/EditSprintDialog.js' */
define("jira-agile/rapid/ui/dialog/edit-sprint-dialog",["require"],function(t){"use strict";function e(){new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-sprint-start-date",button:"ghx-sprint-start-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),Calendar.setup({firstDay:0,inputField:"ghx-sprint-end-date",button:"ghx-sprint-end-date_trigger_c",align:"Tl",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers})}function a(t){GH.Validation.clearContextualErrors(n("#"+t.dialog.id));var e=n("#ghx-sprint-name").val(),a=n("#ghx-sprint-start-date").val(),i=n("#ghx-sprint-end-date").val(),r=n("#ghx-sprint-goal-input").val();if(l){var s=0===a.length,d=0===i.length;if(s^d)return GH.Validation.notBlank("#ghx-sprint-start-date",AJS.format("Specify the sprint {0} date or leave both date fields empty.","start"),"#ghx-sprint-start-date-error"),void GH.Validation.notBlank("#ghx-sprint-end-date",AJS.format("Specify the sprint {0} date or leave both date fields empty.","end"),"#ghx-sprint-end-date-error")}t.dialog.disableControls(),o.triggerBefore("before:editSprintSubmit"),GH.Ajax.put({url:"/sprint/"+t.sprint.id,data:{name:e,startDate:a||"None",endDate:i||"None",goal:r,rapidViewId:t.rapidViewId},errorContextMap:{name:"#ghx-sprint-name",startDate:"#ghx-sprint-start-date-error",endDate:"#ghx-sprint-end-date-error",dateFormatMismatch:GH.Notification.handleDateFormatMismatchError}}).done(function(e){t.dialog.dispose(),AJS.$(GH).trigger(GH.Components.EVENT_SPRINT_UPDATED,e.success)}).fail(function(){t.dialog.enableControls(),AJS.$(GH).trigger("analyticsEvent",{name:"jira-software.plan.sprint.edit-dialog.update.fail"})}).always(function(){o.performanceMark("sprint_edit_api_call_done")});var p={sprintState:t.sprint.state,sprintNameUpdated:e!==t.sprint.name,sprintGoalUpdated:"undefined"==typeof t.sprint.goal?r&&0!==r.trim().length:r!==t.sprint.goal};("ACTIVE"===t.sprint.state||l)&&(p.sprintStartDateUpdated=a!==t.sprint.startDate,p.sprintEndDateUpdated=i!==t.sprint.endDate),AJS.trigger("analyticsEvent",{name:"jira-software.plan.sprint.edit-dialog.update.click",data:p})}function i(t){return function(){AJS.trigger("analyticsEvent",{name:"jira-software.plan.sprint.edit-dialog.cancel.click",data:{sprintState:t.sprintData.state}})}}function r(t){return"FUTURE"===t.sprintData.state?l?500:310:l?438:390}var n=t("jquery"),s={},d=t("jira/featureflags/feature-manager"),o=t("jira-agile/browser-metrics/browser-metrics-util"),l=d.isFeatureEnabled("jsw.roadmap.add-future-sprint-dates");return s.onEdit=a,s.show=function(t,s){var d=GH.Dialog.create({id:"ghx-dialog-edit-sprint",width:575,height:r(s),onCancelFn:i(s),analyticsPageName:"editSprintModal"}),o=[{value:7,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",1)},{value:14,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",2)},{value:21,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",3)},{value:28,text:AJS.format("{0,choice,0#0 weeks|1#1 week|1\u003c{0,number} weeks} {1}",4)},{value:"custom",text:"Custom"}];d.addHeader(AJS.format("Edit sprint: {0}",s.getName())),d.addPanel("","panel"),"None"!==s.sprintData.startDate&&s.sprintData.startDate||(s.sprintData.startDate="",s.sprintData.endDate=""),d.getCurrentPanel().html(GH.tpl.dialogs.editsprint.renderEditSprintDialog({sprint:s.sprintData,listOfSprintDurations:o,isFutureSprintDatesEnabled:l})),d.addButton("Update",function(){a({rapidViewId:t,sprint:s.sprintData,dialog:d})}),GH.Dialog.addCancelButton(d),e(),l&&GH.Dialogs.StartSprintDialog.registerDurationDropdown(AJS.$(document.body),o),d.show(),n("#ghx-dialog-edit-sprint .dialog-page-body form").on("submit",function(t){t.preventDefault()})},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/plan/AssignedWorkDialog.js' */
define("jira-agile/rapid/ui/plan/assigned-work-dialog",["require"],function(t){"use strict";var i=t("underscore"),e=t("jira/dialog/form-dialog"),a=e.extend({_getDefaultOptions:function(){return i.extend(this._super(),{content:function(t){var i=GH.tpl.assignedWorkDialog.renderDialogContents({assignedWorkStats:this.options.assignedWorkStats,sprintName:this.options.sprintName,estimateStatisticName:this.options.estimateStatisticName,trackingStatisticName:this.options.trackingStatisticName});t(i)}})}});return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/plan/AssignedWorkDialog.soy' */
// This file was automatically generated from AssignedWorkDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.assignedWorkDialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.assignedWorkDialog == 'undefined') { GH.tpl.assignedWorkDialog = {}; }


GH.tpl.assignedWorkDialog.renderDialogContents = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Workload by assignee') + ' - ' + soy.$$escapeHtml(opt_data.sprintName) + '</h2><div class="form-body ghx-assigned-work-table"><table class="aui"><thead><tr><th>' + soy.$$escapeHtml('Assignee') + '</th><th class="ghx-right">' + soy.$$escapeHtml('Issues') + '</th>' + ((opt_data.assignedWorkStats.all.totalEstimateText != null) ? '<th class="ghx-right">' + soy.$$escapeHtml(opt_data.estimateStatisticName) + '</th>' : '') + ((opt_data.assignedWorkStats.all.totalTrackingEstimateText != null) ? '<th class="ghx-right">' + soy.$$escapeHtml(opt_data.trackingStatisticName) + '</th>' : '') + '</tr></thead><tbody>' + GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: opt_data.assignedWorkStats.unassigned, noAssigneeText: '' + soy.$$escapeHtml('Unassigned')});
  var assignedWorkEntryList27 = opt_data.assignedWorkStats.assigned;
  var assignedWorkEntryListLen27 = assignedWorkEntryList27.length;
  for (var assignedWorkEntryIndex27 = 0; assignedWorkEntryIndex27 < assignedWorkEntryListLen27; assignedWorkEntryIndex27++) {
    var assignedWorkEntryData27 = assignedWorkEntryList27[assignedWorkEntryIndex27];
    output += GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: assignedWorkEntryData27});
  }
  output += '</tbody><tfoot>' + GH.tpl.assignedWorkDialog.renderTableRow({assignedWorkEntry: opt_data.assignedWorkStats.all, noAssigneeText: '' + soy.$$escapeHtml('Total')}) + '</tfoot></table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.assignedWorkDialog.renderDialogContents.soyTemplateName = 'GH.tpl.assignedWorkDialog.renderDialogContents';
}


GH.tpl.assignedWorkDialog.renderTableRow = function(opt_data, opt_ignored) {
  return '<tr><td>' + ((opt_data.noAssigneeText) ? '<span class="ghx-no-avatar">' + soy.$$escapeHtml(opt_data.noAssigneeText) + '</span>' : GH.tpl.avatar.renderIssueAvatar({issue: opt_data.assignedWorkEntry.issues[0]}) + soy.$$escapeHtml(opt_data.assignedWorkEntry.assigneeName)) + '</td><td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.issues.length) + '</td>' + ((opt_data.assignedWorkEntry.totalEstimateText != null) ? '<td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.totalEstimateText) + '</td>' : '') + ((opt_data.assignedWorkEntry.totalTrackingEstimateText != null) ? '<td class="ghx-right">' + soy.$$escapeHtml(opt_data.assignedWorkEntry.totalTrackingEstimateText) + '</td>' : '') + '</tr>';
};
if (goog.DEBUG) {
  GH.tpl.assignedWorkDialog.renderTableRow.soyTemplateName = 'GH.tpl.assignedWorkDialog.renderTableRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/LinkedPagesService.js' */
GH.LinkedPagesService=function(){return{initiateRemoteLinkConversation:function(){return GH.Ajax.get({url:"/remoteLinkConversation",dataType:"text"},"remoteLinkConversation")}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/PageSearchRequestService.js' */
GH.PageSearchRequestService={},GH.PageSearchRequestService.delay=400,GH.PageSearchRequestService.timeoutId=null,GH.PageSearchRequestService.search=function(e,c){GH.PageSearchRequestService.cancel();var t=AJS.$.Deferred();return GH.PageSearchRequestService.timeoutId=setTimeout(function(){GH.PageSearchRequestService._execute(t,e,c)},GH.PageSearchRequestService.delay),t.promise()},GH.PageSearchRequestService.cancel=function(){null!=GH.PageSearchRequestService.timeoutId&&(clearTimeout(GH.PageSearchRequestService.timeoutId),GH.PageSearchRequestService.timeoutId=null)},GH.PageSearchRequestService._scheduleRequest=function(e,c){GH.PageSearchRequestService.timeoutId=setTimeout(function(){GH.PageSearchRequestService._execute(e,c)},GH.PageSearchRequestService.delay)},GH.PageSearchRequestService._execute=function(e,c,t){var r=GH.PageSearchRequestService.timeoutId,a=GH.Ajax.get({url:"/integration/confluence/pages/search",data:{searchQuery:t},deferErrorHandling:!0},"searchConfluencePagesForEpic");a.done(function(c){r===GH.PageSearchRequestService.timeoutId&&(GH.PageSearchRequestService._replaceHighlightTokensWithHtml(c.pages),e.resolveWith(e,arguments))}),a.fail(function(c){r===GH.PageSearchRequestService.timeoutId&&e.rejectWith(e,arguments)})},GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START="@@@hl@@@",GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END="@@@endhl@@@",GH.PageSearchRequestService._replaceHighlightTokensWithHtml=function(e){var c=function(e){return e.replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START,"g"),"<strong>").replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END,"g"),"</strong>")},t=function(e){return e.replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_START,"g"),"").replace(new RegExp(GH.PageSearchRequestService.HIGHLIGHT_TOKEN_END,"g"),"")};return _.each(e,function(e){e.title&&(e.titleHtml=c(e.title),e.title=t(e.title)),e.space&&(e.spaceHtml=c(e.space),e.space=t(e.space))}),e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/PagesSearchModel.js' */
GH.PagesSearchModel={},GH.PagesSearchModel.model={},GH.PagesSearchModel.set=function(e,a){GH.PagesSearchModel.model[e]=a},GH.PagesSearchModel.list=function(e){return GH.PagesSearchModel.model[e]},GH.PagesSearchModel.get=function(e,a){return a=parseInt(a,10),_.find(GH.PagesSearchModel.model[e],function(e){return e.id===a})},GH.PagesSearchModel.removePage=function(e,a){a=parseInt(a,10),GH.PagesSearchModel.model[e]=_.reject(GH.PagesSearchModel.model[e],function(e){return e.id===a})},GH.PagesSearchModel.clear=function(e){delete GH.PagesSearchModel.model[e]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/linkedpages/LinkedPagesInlineDialog.js' */
!function(){"use strict";var e=require("jira/featureflags/feature-manager");GH.LinkedPagesInlineDialog=function(e){if(this.entityType=e.entityType,"sprint"==this.entityType)this.entityTypeParam="sprintId";else{if("epic"!=this.entityType)throw new Error("Did not understand entity type: "+this.entityType);this.entityTypeParam="issueKey"}this.entityId=e.entityId,this.agileMode=e.agileMode,this.$trigger=e.trigger,this.$content=null,this.dialog=null,this.dialogOptions=_.extend({},GH.LinkedPagesInlineDialog.DIALOG_OPTIONS)},GH.LinkedPagesInlineDialog.INITIAL_SHOWN_PAGES_COUNT=3,GH.LinkedPagesInlineDialog.DIALOG_OPTIONS={fadeTime:0,noBind:!0,width:300,cacheContent:!1,hideDelay:6e4},GH.LinkedPagesInlineDialog.prototype.isVisible=function(){return AJS.$("#inline-dialog-viewPagesDialog").is(":visible")},GH.LinkedPagesInlineDialog.prototype.show=function(){return this.showDeferred=AJS.$.Deferred(),this.dialog=GH.SideInlineDialog.create("viewPagesDialog",this.$trigger,_.bind(this._render,this),this.dialogOptions),this.dialog.show(),this.showDeferred.promise()},GH.LinkedPagesInlineDialog.prototype.hide=function(){this.dialog.hide()},GH.LinkedPagesInlineDialog.prototype.refresh=function(){this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._render=function(e,i,n){this.$content=e,this.showDeferred.notify("EmptyBegin"),e.html(GH.tpl.component.linkedpages.renderEmptyDialog({entityId:this.entityId})),this.showDeferred.notify("EmptyRender"),e.click(function(e){e.stopPropagation()}),e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.find(".ghx-progress-indicator.ghx-initial").spin("medium"),_.isFunction(n)&&n(),this.showDeferred.notify("EmptyDone"),this.showDeferred.notify("AjaxCall");var t=GH.LinkedPagesController.getLinkedPagesForEntity(this.entityType,this.entityId);return t.done(_.bind(function(i){this.showDeferred.notify("AjaxDone");var t=_.findWhere(i.applicationLinks,{primary:!0}),a=!!t&&t.url+GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION;e.find(".ghx-progress-indicator.ghx-initial").spin("medium");var s=i.pages;this.canModify=i.canModifyPages,this.applicationLinks=i.applicationLinks;var o=s.length>0&&i.applicationLinks.length<=1&&_.all(s,function(e){return e.serverUnavailable}),l=_.where(s,{authenticationRequired:!0}),r=_.groupBy(l,"applicationLinkId"),d=_.keys(r),h=_.map(d,function(e){var n=r[e][0].authenticationUrl,t=_.findWhere(i.applicationLinks,{id:e});return{applicationLink:t,authenticateUrl:n}}),c=s.length,g=GH.LinkedPagesInlineDialog.INITIAL_SHOWN_PAGES_COUNT;g+1==c&&g++,this.showDeferred.notify("ContentRender"),e.html(GH.tpl.component.linkedpages.renderDialog({entityId:this.entityId,entityType:this.entityType,linkedPages:s,initiallyShownCount:g,canEdit:this.canModify,appLink:t,serverUnavailable:o,needAuthenticationApplications:h})),this._updateViewLinkedPagesText(s.length),e.find("a.applink-authenticate").click(function(e){window.open(this.href,"com_atlassian_applinks_authentication"),e.preventDefault()}),e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),this._initCreateAndLink({createPageAction:a,entityId:this.entityId,entityType:this.entityType,entityTypeParam:this.entityTypeParam,agileMode:this.agileMode,jiraApplicationId:i.jiraApplicationId,jiraUrl:i.jiraBaseUrl}),e.find(".js-wiki-remove").click(_.bind(this._handleRemovePageClick,this)),e.find(".js-wiki-view-more-pages-link").click(_.bind(this._handleShowMoreClick,this));var p=e.find(".js-page-search");p.click(function(e){return e.preventDefault(),!1}),p.keydown(_.bind(this._handleSelectNextItem,this)),p.keydown(_.bind(this._handleSelectPreviousItem,this)),p.keydown(_.bind(this._handleAddSelectedItem,this)),p.keyup(_.bind(this._handlePageSearchQueryChanged,this)),e.find(".js-search-panel-hide").on("click",_.bind(this._handleCloseSearchPanelClick,this)),e.find(".js-search-page-icon").click(_.bind(this._handleClearSearchIconClick,this)),this._showLinkedPagesPanel(),_.isFunction(n)&&n(),this.showDeferred.notify("ContentDone"),this.dialog.refresh(),this.showDeferred.resolve()},this)),!1},GH.LinkedPagesInlineDialog.prototype._renderPageSearchResults=function(e){this._hideSearchingSpinner();var i=this.$content.find(".js-entity-view-pages-search-result");if(e.authenticationRequired){var n=_.findWhere(this.applicationLinks,{id:e.applicationLinkId})||{};i.html(GH.tpl.component.linkedpages.renderSearchAuthenticationRequest({authenticationUrl:e.authenticationUrl,authenticationLinkUrl:n.url,authenticationLinkName:n.name})),i.find("a.applink-authenticate").click(function(e){window.open(this.href,"com_atlassian_applinks_authentication"),e.preventDefault()})}else i.html(GH.tpl.component.linkedpages.renderPageResults({pages:e.pages,isComplete:e.isComplete})),e.pages.length&&this._reselectItem("first",_.identity),i.find(".ghx-doco-list-item").click(_.bind(this._handlePageSearchResultClick,this))},GH.LinkedPagesInlineDialog.prototype._renderPageSearchFailed=function(e){this._hideSearchingSpinner();var i=e.getGlobalErrors();AJS.messages.warning(AJS.$(".js-link-page-panel"),{title:AJS.format("Error while searching",""),body:i&&i[0].message})},GH.LinkedPagesInlineDialog.prototype._handleCloseSearchPanelClick=GH.Util.wrapPreventDefault(function(e){this._showLinkedPagesPanel()}),GH.LinkedPagesInlineDialog.prototype._handleClearSearchIconClick=function(e){return GH.PageSearchRequestService.cancel(),this._emptySearchResults(),this._hideSearchingSpinner(),this.$content.find(".js-search-existing-pages-input").val(""),e.preventDefault(),!1},GH.LinkedPagesInlineDialog.prototype._handleRemovePageClick=function(e){var i=AJS.$(e.target),n=i.attr("data-page-id");i.hide().closest("li").find(".js-wiki-spin").removeClass("ghx-hidden").find(".ghx-progress-indicator.ghx-small").spin("small");var t=GH.LinkedPagesController.removeLinkedPage(this.entityType,this.entityId,n);return t.done(_.bind(function(){i.closest("li").remove();var e=GH.PageIssueLinksModel.list(this.entityId);0===e.length&&this.$content.find(".js-no-linked-pages").removeClass("hidden"),this._updateViewLinkedPagesText(e.length)},this)),this._showMoreLinkedPages(),e.preventDefault(),!1},GH.LinkedPagesInlineDialog.prototype._handleShowMoreClick=function(e){return e.preventDefault(),e.stopPropagation(),this._showMoreLinkedPages(),!1},GH.LinkedPagesInlineDialog.prototype._handlePageSearchQueryChanged=function(e){if(13!=e.keyCode&&38!=e.keyCode&&40!=e.keyCode){var i=AJS.$(e.target).val();this._performSearch(i)}},GH.LinkedPagesInlineDialog.prototype._performSearch=function(e){this._emptySearchResults(),e.length>0?(GH.LinkedPagesController.searchPages(this.entityType,this.entityId,e).done(_.bind(this._renderPageSearchResults,this)).fail(_.bind(this._renderPageSearchFailed,this)),this._showSearchingSpinner(),this._showClearSearchIcon()):this._hideClearSearchIcon()},GH.LinkedPagesInlineDialog.prototype._handleSelectNextItem=function(e){if(40==e.keyCode)return e.preventDefault(),this._reselectItem("first",function(e){return e+1})},GH.LinkedPagesInlineDialog.prototype._handleSelectPreviousItem=function(e){if(38==e.keyCode)return e.preventDefault(),this._reselectItem("last",function(e){return e-1})},GH.LinkedPagesInlineDialog.prototype._reselectItem=function(e,i){var n=AJS.$(".ghx-doco-list-result");if(0!==n.length){var t=n.filter(".ghx-doco-list-selected"),a=null;if(0===t.length)a=n[e]();else{var s=n.index(t);t.removeClass("ghx-doco-list-selected");var o=i(s);a=o<0||o>n.length-1?n[e]():AJS.$(n[o])}if(a){a.addClass("ghx-doco-list-selected");var l=a.parent(),r=l.position().top,d=r+l.height(),h=a.position().top,c=a.height();(h<r||d<h+c)&&a.get(0).scrollIntoView()}}},GH.LinkedPagesInlineDialog.prototype._handleAddSelectedItem=function(e){if(13==e.keyCode){e.preventDefault();var i=AJS.$(".ghx-doco-list-result"),n=i.filter(".ghx-doco-list-selected");0!==n.length&&this._addSearchResult(n)}},GH.LinkedPagesInlineDialog.prototype._handlePageSearchResultClick=function(e){e.preventDefault();var i=AJS.$(e.target).closest("[data-page-id]");this._addSearchResult(i)},GH.LinkedPagesInlineDialog.prototype._addSearchResult=function(e){var i=e.attr("data-page-id"),n=GH.PagesSearchModel.get(this.entityId,i),t=this.$content.find(".js-linked-pages-list"),a=n.title;this._showMoreLinkedPages();var s=AJS.$(GH.tpl.component.linkedpages.renderStubLinkedPageListItem({pageTitle:a}));t.append(s);var o=GH.LinkedPagesController.addLink(this.entityType,this.entityId,i,a);o.done(_.bind(function(e){var i=AJS.$(GH.tpl.component.linkedpages.renderLinkedPageListItem({page:e,entityId:this.entityId,canEdit:this.canModify,hidden:!1}));s.replaceWith(i),i.find(".js-wiki-remove").click(_.bind(this._handleRemovePageClick,this)),i.hide().fadeIn(200),this._updateViewLinkedPagesText(GH.PageIssueLinksModel.list(this.entityId).length)},this)),e.parent().fadeOut(200,function(){e.parent().remove()}),this.$content.find(".js-no-linked-pages").addClass("hidden"),this._showLinkedPagesPanel()},GH.LinkedPagesInlineDialog.prototype._emptySearchResults=function(){this.$content.find(".js-entity-view-pages-search-result").empty(),this._hideClearSearchIcon(),this.$content.find(".js-link-page-panel").find(".aui-message").remove()},GH.LinkedPagesInlineDialog.prototype._showClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-search-small ghx-iconfont-inactive").addClass("aui-iconfont-remove")},GH.LinkedPagesInlineDialog.prototype._hideClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-remove").addClass("ghx-iconfont-inactive aui-iconfont-search-small")},GH.LinkedPagesInlineDialog.prototype._initCreateAndLink=function(e){this.$content.find(".js-create-page-link").click(_.bind(function(){var i=window.open("","_blank");return GH.LinkedPagesController.startRemoteLinkCreationConversation(this).done(function(n){GH.LinkedPagesController.analytics.action.trigger([e.entityType,"createPage"].join("."));var t={applinkId:e.jiraApplicationId,agileMode:e.agileMode,fallbackUrl:e.jiraUrl,creationToken:n};t[e.entityTypeParam]=e.entityId,i.location=e.createPageAction+"?"+AJS.$.param(t)}),!1},this)),this.$content.find(".js-link-pages-link").click(_.bind(function(){return this._showLinkPagePanel(),!1},this))},GH.LinkedPagesInlineDialog.prototype._updateViewLinkedPagesText=function(i){if(!e.isFeatureEnabled("jsw.load.epic.page.links.on.demand")){var n=i>0?AJS.format("{0}{0,choice,0# Linked|1# linked|1\u003c linked} {0,choice,0# pages|1# page|1\u003c pages}",i):AJS.format("{0}{0,choice,0# Linked|1# linked|1\u003c linked} {0,choice,0# pages|1# page|1\u003c pages}","");this.$trigger.text(n)}var t=i>0?AJS.format("{0} linked {0,choice,0# pages|1# page|1\u003c pages}",i):"Linked pages";this.$content.find(".js-entity-pages-header").text(t)},GH.LinkedPagesInlineDialog.prototype._showLinkPagePanel=function(){this.$content.find(".js-link-page-panel").show(),this.$content.find(".js-search-panel-hide").show(),this.$content.find(".js-linked-pages-actions").hide(),this.$content.find(".js-linked-pages-panel").hide(),this.$content.find(".js-search-existing-pages-input").focus(),this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._showLinkedPagesPanel=function(){this.$content.find(".js-linked-pages-panel").show(),this.$content.find(".js-search-panel-hide").hide(),this.$content.find(".js-linked-pages-actions").show(),this.$content.find(".js-link-page-panel").hide(),this.$content.find(".js-entity-view-pages-search-result").empty(),this.$content.find(".js-search-existing-pages-input").val(""),this._hideClearSearchIcon(),this.dialog.refresh()},GH.LinkedPagesInlineDialog.prototype._showMoreLinkedPages=function(){this.$content.find(".ghx-doco-list-item").show(),this.$content.find(".ghx-doco-list-view-more").hide()},GH.LinkedPagesInlineDialog.prototype._showSearchingSpinner=function(){var e=this.$content.find(".js-entity-view-pages-searching");e.hasClass("hidden")&&e.removeClass("hidden").spin("medium")},GH.LinkedPagesInlineDialog.prototype._hideSearchingSpinner=function(){this.$content.find(".js-entity-view-pages-searching").addClass("hidden")},GH.LinkedPagesInlineDialog.prototype._hideClearSearchIcon=function(){this.$content.find(".js-search-page-icon").removeClass("aui-iconfont-remove").addClass("ghx-iconfont-inactive").addClass("aui-iconfont-search-small")},GH.LinkedPagesInlineDialog.prototype.isSearchMode=function(){return this.$content.find(".js-link-page-panel").is(":visible")},GH.LinkedPagesInlineDialog.prototype.getSearchQuery=function(){return this.$content.find(".js-search-existing-pages-input").val()},GH.LinkedPagesInlineDialog.prototype.showSearch=function(e){this._showLinkPagePanel(),this.$content.find(".js-search-existing-pages-input").val(e).focus(),this._performSearch(e)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/FlagAndAddCommentDialog.soy' */
// This file was automatically generated from FlagAndAddCommentDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialog.flagandcomment.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialog == 'undefined') { GH.tpl.dialog = {}; }
if (typeof GH.tpl.dialog.flagandcomment == 'undefined') { GH.tpl.dialog.flagandcomment = {}; }


GH.tpl.dialog.flagandcomment.dialogHeader = function(opt_data, opt_ignored) {
  return '<div class="flag-and-add-comment-header"><div class="flag-and-add-comment-summary"><span class="ghx-flag-icon"></span>' + ((opt_data.isAdd) ? soy.$$escapeHtml(AJS.format('Add flag to {0}',opt_data.issueKeys)) : soy.$$escapeHtml(AJS.format('Remove flag from {0}',opt_data.issueKeys))) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialog.flagandcomment.dialogHeader.soyTemplateName = 'GH.tpl.dialog.flagandcomment.dialogHeader';
}


GH.tpl.dialog.flagandcomment.comment = function(opt_data, opt_ignored) {
  return ((opt_data.isAdd) ? '(flag) ' + soy.$$escapeHtml('Flag added') : '(flagoff) ' + soy.$$escapeHtml('Flag removed')) + '\n\n' + soy.$$escapeHtml(opt_data.content);
};
if (goog.DEBUG) {
  GH.tpl.dialog.flagandcomment.comment.soyTemplateName = 'GH.tpl.dialog.flagandcomment.comment';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/ui/plan/IssueFlagAndCommentAction.js' */
define("jira-agile/rapid/ui/plan/issue-flag-and-comment-action",["jira/dialog/form-dialog","jira/dialog/dialog-util","jquery","underscore","jira-agile/browser-metrics/browser-metrics-util"],function(e,a,n,t,i){function o(e,a,t){return function(o){a?i.triggerBefore("before:addFlagSubmit","addFlag"):i.triggerBefore("before:removeFlagSubmit","removeFlag"),o.preventDefault();var r=this,d=n("#flag-and-add-comment-dialog").find(".jira-dialog-content form .comment-input"),l=d.find("textarea").val().trim(),g=l?GH.tpl.dialog.flagandcomment.comment({isAdd:a,content:l}):"",m=d.find(".security-level select option:selected").val(),u=m?m:"";GH.IssueActions.flag(e,a,g,u).always(function(){r.hide()}).done(t)}}function r(e,a){return a?AJS.format("Add flag and comment: {0} {0,choice,1#issue|1\u003cissues}",e.length):AJS.format("Remove flag and add comment: {0} {0,choice,1#issue|1\u003cissues}",e.length)}function d(e,a){return function(){var t=n("#flag-and-add-comment-dialog");t.find(".jira-dialog-heading > h2").html(r(e,a)).removeAttr("title");var i=t.find(".jira-dialog-content");i.prepend(GH.tpl.dialog.flagandcomment.dialogHeader({isAdd:a,issueKeys:e.join(", ")}));var o=i.find("form");o.addClass("ajs-dirty-warning-exempt");var d=t.find(".form-footer");d.find("p").remove(),d.find('.aui-button[type="submit"]').addClass("aui-button-primary flag-and-comment-form-popup-submit")}}function l(n,t,i){var r=new e({id:"flag-and-add-comment-dialog",url:AJS.contextPath()+"/secure/GHBulkCommentDialog.jspa?issueKeys="+encodeURIComponent(n.join(",")),submitHandler:o(n,t,i),handleRedirect:!0,ajaxOptions:a.getDefaultAjaxOptions,isIssueDialog:!0,widthClass:"large"});return r.onContentReady(d(n,t)),r}var g={};return g.execute=function(e,a,n){t.isArray(e)||(e=[e]),l(e,a,n).show()},g}),AJS.namespace("GH.IssueFlagAndCommentAction.execute",null,require("jira-agile/rapid/ui/plan/issue-flag-and-comment-action").execute);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-plan-files-deferred', location = 'jira-agile-module/includes/js/rapid/LegacyPlanDeferredNamespaces.js' */
AJS.namespace("GH.AssignedWorkDialog",null,require("jira-agile/rapid/ui/plan/assigned-work-dialog"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/d3-3.3.8.js' */
d3=function(){function n(n){return null!=n&&!isNaN(n)}function t(n){return n.length}function e(n){for(var t=1;n*t%1;)t*=10;return t}function r(n,t){try{for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}catch(r){n.prototype=t}}function i(){}function u(){}function o(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function a(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.substring(1);for(var e=0,r=ao.length;e<r;++e){var i=ao[e]+t;if(i in n)return i}}function c(){}function l(){}function f(n){function t(){for(var t,r=e,i=-1,u=r.length;++i<u;)(t=r[i].on)&&t.apply(this,arguments);return n}var e=[],r=new i;return t.on=function(t,i){var u,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,u=e.indexOf(o)).concat(e.slice(u+1)),r.remove(t)),i&&e.push(r.set(t,{on:i})),n)},t}function s(){Zu.event.preventDefault()}function h(){for(var n,t=Zu.event;n=t.sourceEvent;)t=n;return t}function p(n){for(var t=new l,e=0,r=arguments.length;++e<r;)t[arguments[e]]=f(t);return t.of=function(e,r){return function(i){try{var u=i.sourceEvent=Zu.event;i.target=n,Zu.event=i,t[i.type].apply(e,r)}finally{Zu.event=u}}},t}function g(n){return lo(n,go),n}function v(n){return"function"==typeof n?n:function(){return fo(n,this)}}function d(n){return"function"==typeof n?n:function(){return so(n,this)}}function y(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function i(){this.setAttribute(n,t)}function u(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=Zu.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?u:i}function m(n){return n.trim().replace(/\s+/g," ")}function x(n){return new RegExp("(?:^|\\s+)"+Zu.requote(n)+"(?:\\s+|$)","g")}function M(n,t){function e(){for(var e=-1;++e<i;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<i;)n[e](this,r)}n=n.trim().split(/\s+/).map(_);var i=n.length;return"function"==typeof t?r:e}function _(n){var t=x(n);return function(e,r){if(i=e.classList)return r?i.add(n):i.remove(n);var i=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||e.setAttribute("class",m(i+" "+n))):e.setAttribute("class",m(i.replace(t," ")))}}function b(n,t,e){function r(){this.style.removeProperty(n)}function i(){this.style.setProperty(n,t,e)}function u(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?u:i}function w(n,t){function e(){delete this[n]}function r(){this[n]=t}function i(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?i:r}function S(n){return"function"==typeof n?n:(n=Zu.ns.qualify(n)).local?function(){return this.ownerDocument.createElementNS(n.space,n.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,n)}}function k(n){return{__data__:n}}function N(n){return function(){return po(this,n)}}function E(n){return arguments.length||(n=Zu.ascending),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function A(n,t){for(var e=0,r=n.length;e<r;e++)for(var i,u=n[e],o=0,a=u.length;o<a;o++)(i=u[o])&&t(i,o,e);return n}function C(n){return lo(n,yo),n}function L(n){var t,e;return function(r,i,u){var o,a=n[u].update,c=a.length;for(u!=e&&(e=u,t=0),i>=t&&(t=i+1);!(o=a[t])&&++t<c;);return o}}function T(){var n=this.__transition__;n&&++n.active}function q(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function i(){var i=l(t,Xu(arguments));r.call(this),this.addEventListener(n,this[o]=i,i.$=e),i._=t}function u(){var t,e=new RegExp("^__on([^.]+)"+Zu.requote(n)+"$");for(var r in this)if(t=r.match(e)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),l=z;a>0&&(n=n.substring(0,a));var f=xo.get(n);return f&&(n=f,l=R),a?t?i:r:t?c:u}function z(n,t){return function(e){var r=Zu.event;Zu.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{Zu.event=r}}}function R(n,t){var e=z(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function D(){var n=".dragsuppress-"+ ++_o,t="touchmove"+n,e="selectstart"+n,r="dragstart"+n,i="click"+n,u=Zu.select(Wu).on(t,s).on(e,s).on(r,s),o=Bu.style,a=o[Mo];return o[Mo]="none",function(t){function e(){u.on(i,null)}u.on(n,null),o[Mo]=a,t&&(u.on(i,function(){s(),e()},!0),setTimeout(e,0))}}function P(n,t){t.changedTouches&&(t=t.changedTouches[0]);var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();if(bo<0&&(Wu.scrollX||Wu.scrollY)){e=Zu.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=e[0][0].getScreenCTM();bo=!(i.f||i.e),e.remove()}return bo?(r.x=t.pageX,r.y=t.pageY):(r.x=t.clientX,r.y=t.clientY),r=r.matrixTransform(n.getScreenCTM().inverse()),[r.x,r.y]}var u=n.getBoundingClientRect();return[t.clientX-u.left-n.clientLeft,t.clientY-u.top-n.clientTop]}function U(n){return n>0?1:n<0?-1:0}function j(n){return n>1?0:n<-1?wo:Math.acos(n)}function H(n){return n>1?ko:n<-1?-ko:Math.asin(n)}function F(n){return((n=Math.exp(n))-1/n)/2}function O(n){return((n=Math.exp(n))+1/n)/2}function Y(n){return((n=Math.exp(2*n))-1)/(n+1)}function I(n){return(n=Math.sin(n/2))*n}function Z(){}function V(n,t,e){return new X(n,t,e)}function X(n,t,e){this.h=n,this.s=t,this.l=e}function $(n,t,e){function r(n){return n>360?n-=360:n<0&&(n+=360),n<60?u+(o-u)*n/60:n<180?o:n<240?u+(o-u)*(240-n)/60:u}function i(n){return Math.round(255*r(n))}var u,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:t<0?0:t>1?1:t,e=e<0?0:e>1?1:e,o=e<=.5?e*(1+t):e+t-e*t,u=2*e-o,an(i(n+120),i(n),i(n-120))}function B(n,t,e){return new W(n,t,e)}function W(n,t,e){this.h=n,this.c=t,this.l=e}function J(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),G(e,Math.cos(n*=Ao)*t,Math.sin(n)*t)}function G(n,t,e){return new K(n,t,e)}function K(n,t,e){this.l=n,this.a=t,this.b=e}function Q(n,t,e){var r=(n+16)/116,i=r+t/500,u=r-e/200;return i=tn(i)*Ho,r=tn(r)*Fo,u=tn(u)*Oo,an(rn(3.2404542*i-1.5371385*r-.4985314*u),rn(-.969266*i+1.8760108*r+.041556*u),rn(.0556434*i-.2040259*r+1.0572252*u))}function nn(n,t,e){return n>0?B(Math.atan2(e,t)*Co,Math.sqrt(t*t+e*e),n):B(NaN,NaN,n)}function tn(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function en(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function rn(n){return Math.round(255*(n<=.00304?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function un(n){return an(n>>16,n>>8&255,255&n)}function on(n){return un(n)+""}function an(n,t,e){return new cn(n,t,e)}function cn(n,t,e){this.r=n,this.g=t,this.b=e}function ln(n){return n<16?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function fn(n,t,e){var r,i,u,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/i.exec(n))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(gn(i[0]),gn(i[1]),gn(i[2]))}return(u=Zo.get(n))?t(u.r,u.g,u.b):(null!=n&&"#"===n.charAt(0)&&(4===n.length?(o=n.charAt(1),o+=o,a=n.charAt(2),a+=a,c=n.charAt(3),c+=c):7===n.length&&(o=n.substring(1,3),a=n.substring(3,5),c=n.substring(5,7)),o=parseInt(o,16),a=parseInt(a,16),c=parseInt(c,16)),t(o,a,c))}function sn(n,t,e){var r,i,u=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-u,c=(o+u)/2;return a?(i=c<.5?a/(o+u):a/(2-o-u),r=n==o?(t-e)/a+(t<e?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=NaN,i=c>0&&c<1?0:r),V(r,i,c)}function hn(n,t,e){n=pn(n),t=pn(t),e=pn(e);var r=en((.4124564*n+.3575761*t+.1804375*e)/Ho),i=en((.2126729*n+.7151522*t+.072175*e)/Fo),u=en((.0193339*n+.119192*t+.9503041*e)/Oo);return G(116*i-16,500*(r-i),200*(i-u))}function pn(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function gn(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function vn(n){return"function"==typeof n?n:function(){return n}}function dn(n){return n}function yn(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),mn(t,e,n,r)}}function mn(n,t,e,r){function i(){var n,t=c.status;if(!t&&c.responseText||t>=200&&t<300||304===t){try{n=e.call(u,c)}catch(r){return void o.error.call(u,r)}o.load.call(u,n)}else o.error.call(u,c)}var u={},o=Zu.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,l=null;return!Wu.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=i:c.onreadystatechange=function(){c.readyState>3&&i()},c.onprogress=function(n){var t=Zu.event;Zu.event=n;try{o.progress.call(u,c)}finally{Zu.event=t}},u.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",u)},u.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",u):t},u.responseType=function(n){return arguments.length?(l=n,u):l},u.response=function(n){return e=n,u},["get","post"].forEach(function(n){u[n]=function(){return u.send.apply(u,[n].concat(Xu(arguments)))}}),u.send=function(e,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var f in a)c.setRequestHeader(f,a[f]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=i&&u.on("error",i).on("load",function(n){i(null,n)}),o.beforesend.call(u,c),c.send(null==r?null:r),u},u.abort=function(){return c.abort(),u},Zu.rebind(u,o,"on"),null==r?u:u.get(xn(r))}function xn(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function Mn(){var n=_n(),t=bn()-n;t>24?(isFinite(t)&&(clearTimeout(Bo),Bo=setTimeout(Mn,t)),$o=0):($o=1,Jo(Mn))}function _n(){var n=Date.now();for(Wo=Vo;Wo;)n>=Wo.t&&(Wo.f=Wo.c(n-Wo.t)),Wo=Wo.n;return n}function bn(){for(var n,t=Vo,e=1/0;t;)t.f?t=n?n.n=t.n:Vo=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Xo=n,e}function wn(n,t){var e=Math.pow(10,3*io(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Sn(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function kn(n){return n+""}function Nn(){}function En(n,t,e){var r=e.s=n+t,i=r-n,u=r-i;e.t=n-u+(t-i)}function An(n,t){n&&ca.hasOwnProperty(n.type)&&ca[n.type](n,t)}function Cn(n,t,e){var r,i=-1,u=n.length-e;for(t.lineStart();++i<u;)r=n[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Ln(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)Cn(n[e],t,1);t.polygonEnd()}function Tn(){function n(n,t){n*=Ao,t=t*Ao/2+wo/4;var e=n-r,o=Math.cos(t),a=Math.sin(t),c=u*a,l=i*o+c*Math.cos(e),f=c*Math.sin(e);fa.add(Math.atan2(f,l)),r=n,i=o,u=a}var t,e,r,i,u;sa.point=function(o,a){sa.point=n,r=(t=o)*Ao,i=Math.cos(a=(e=a)*Ao/2+wo/4),u=Math.sin(a)},sa.lineEnd=function(){n(t,e)}}function qn(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function zn(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function Rn(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function Dn(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function Pn(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Un(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function jn(n){return[Math.atan2(n[1],n[0]),H(n[2])]}function Hn(n,t){return io(n[0]-t[0])<No&&io(n[1]-t[1])<No}function Fn(n,t){n*=Ao;var e=Math.cos(t*=Ao);On(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function On(n,t,e){++ha,ga+=(n-ga)/ha,va+=(t-va)/ha,da+=(e-da)/ha}function Yn(){function n(n,i){n*=Ao;var u=Math.cos(i*=Ao),o=u*Math.cos(n),a=u*Math.sin(n),c=Math.sin(i),l=Math.atan2(Math.sqrt((l=e*c-r*a)*l+(l=r*o-t*c)*l+(l=t*a-e*o)*l),t*o+e*a+r*c);pa+=l,ya+=l*(t+(t=o)),ma+=l*(e+(e=a)),xa+=l*(r+(r=c)),On(t,e,r)}var t,e,r;wa.point=function(i,u){i*=Ao;var o=Math.cos(u*=Ao);t=o*Math.cos(i),e=o*Math.sin(i),r=Math.sin(u),wa.point=n,On(t,e,r)}}function In(){wa.point=Fn}function Zn(){function n(n,t){n*=Ao;var e=Math.cos(t*=Ao),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),l=i*c-u*a,f=u*o-r*c,s=r*a-i*o,h=Math.sqrt(l*l+f*f+s*s),p=r*o+i*a+u*c,g=h&&-j(p)/h,v=Math.atan2(h,p);Ma+=g*l,_a+=g*f,ba+=g*s,pa+=v,ya+=v*(r+(r=o)),ma+=v*(i+(i=a)),xa+=v*(u+(u=c)),On(r,i,u)}var t,e,r,i,u;wa.point=function(o,a){t=o,e=a,wa.point=n,o*=Ao;var c=Math.cos(a*=Ao);r=c*Math.cos(o),i=c*Math.sin(o),u=Math.sin(a),On(r,i,u)},wa.lineEnd=function(){n(t,e),wa.lineEnd=In,wa.point=Fn}}function Vn(){return!0}function Xn(n,t,e,r,i){var u=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(Hn(e,r)){i.lineStart();for(var a=0;a<t;++a)i.point((e=n[a])[0],e[1]);return void i.lineEnd()}var c=new Bn(e,n,null,(!0)),l=new Bn(e,null,c,(!1));c.o=l,u.push(c),o.push(l),c=new Bn(r,n,null,(!1)),l=new Bn(r,null,c,(!0)),c.o=l,u.push(c),o.push(l)}}),o.sort(t),$n(u),$n(o),u.length){for(var a=0,c=e,l=o.length;a<l;++a)o[a].e=c=!c;for(var f,s,h=u[0];;){for(var p=h,g=!0;p.v;)if((p=p.n)===h)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(var a=0,l=f.length;a<l;++a)i.point((s=f[a])[0],s[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g){f=p.p.z;for(var a=f.length-1;a>=0;--a)i.point((s=f[a])[0],s[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,g=!g}while(!p.v);i.lineEnd()}}}function $n(n){if(t=n.length){for(var t,e,r=0,i=n[0];++r<t;)i.n=e=n[r],e.p=i,i=e;i.n=e=n[0],e.p=i}}function Bn(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Wn(n,t,e,r){return function(i,u){function o(t,e){var r=i(t,e);n(t=r[0],e=r[1])&&u.point(t,e)}function a(n,t){var e=i(n,t);d.point(e[0],e[1])}function c(){m.point=a,d.lineStart()}function l(){m.point=o,d.lineEnd()}function f(n,t){v.push([n,t]);var e=i(n,t);M.point(e[0],e[1])}function s(){M.lineStart(),v=[]}function h(){f(v[0][0],v[0][1]),M.lineEnd();var n,t=M.clean(),e=x.buffer(),r=e.length;if(v.pop(),g.push(v),v=null,r){if(1&t){n=e[0];var i,r=n.length-1,o=-1;for(u.lineStart();++o<r;)u.point((i=n[o])[0],i[1]);return void u.lineEnd()}r>1&&2&t&&e.push(e.pop().concat(e.shift())),p.push(e.filter(Jn))}}var p,g,v,d=t(u),y=i.invert(r[0],r[1]),m={point:o,lineStart:c,lineEnd:l,polygonStart:function(){m.point=f,m.lineStart=s,m.lineEnd=h,p=[],g=[],u.polygonStart()},polygonEnd:function(){m.point=o,m.lineStart=c,m.lineEnd=l,p=Zu.merge(p);var n=Qn(y,g);p.length?Xn(p,Kn,n,e,u):n&&(u.lineStart(),e(null,null,1,u),u.lineEnd()),u.polygonEnd(),p=g=null},sphere:function(){u.polygonStart(),u.lineStart(),e(null,null,1,u),u.lineEnd(),u.polygonEnd()}},x=Gn(),M=t(x);return m}}function Jn(n){return n.length>1}function Gn(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:c,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Kn(n,t){return((n=n.x)[0]<0?n[1]-ko-No:ko-n[1])-((t=t.x)[0]<0?t[1]-ko-No:ko-t[1])}function Qn(n,t){var e=n[0],r=n[1],i=[Math.sin(e),-Math.cos(e),0],u=0,o=0;fa.reset();for(var a=0,c=t.length;a<c;++a){var l=t[a],f=l.length;if(f)for(var s=l[0],h=s[0],p=s[1]/2+wo/4,g=Math.sin(p),v=Math.cos(p),d=1;;){d===f&&(d=0),n=l[d];var y=n[0],m=n[1]/2+wo/4,x=Math.sin(m),M=Math.cos(m),_=y-h,b=io(_)>wo,w=g*x;if(fa.add(Math.atan2(w*Math.sin(_),v*M+w*Math.cos(_))),u+=b?_+(_>=0?So:-So):_,b^h>=e^y>=e){var S=Rn(qn(s),qn(n));Un(S);var k=Rn(i,S);Un(k);var N=(b^_>=0?-1:1)*H(k[2]);(r>N||r===N&&(S[0]||S[1]))&&(o+=b^_>=0?1:-1)}if(!d++)break;h=y,g=x,v=M,s=n}}return(u<-No||u<No&&fa<0)^1&o}function nt(n){var t,e=NaN,r=NaN,i=NaN;return{lineStart:function(){n.lineStart(),t=1},point:function(u,o){var a=u>0?wo:-wo,c=io(u-e);io(c-wo)<No?(n.point(e,r=(r+o)/2>0?ko:-ko),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(u,r),t=0):i!==a&&c>=wo&&(io(e-i)<No&&(e-=i*No),io(u-a)<No&&(u-=a*No),r=tt(e,r,u,o),n.point(i,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=u,r=o),i=a},lineEnd:function(){n.lineEnd(),e=r=NaN},clean:function(){return 2-t}}}function tt(n,t,e,r){var i,u,o=Math.sin(n-e);return io(o)>No?Math.atan((Math.sin(t)*(u=Math.cos(r))*Math.sin(e)-Math.sin(r)*(i=Math.cos(t))*Math.sin(n))/(i*u*o)):(t+r)/2}function et(n,t,e,r){var i;if(null==n)i=e*ko,r.point(-wo,i),r.point(0,i),r.point(wo,i),r.point(wo,0),r.point(wo,-i),r.point(0,-i),r.point(-wo,-i),r.point(-wo,0),r.point(-wo,i);else if(io(n[0]-t[0])>No){var u=n[0]<t[0]?wo:-wo;i=e*u/2,r.point(-u,i),r.point(0,i),r.point(u,i)}else r.point(t[0],t[1])}function rt(n){function t(n,t){return Math.cos(n)*Math.cos(t)>u}function e(n){var e,u,c,l,f;return{lineStart:function(){l=c=!1,f=1},point:function(s,h){var p,g=[s,h],v=t(s,h),d=o?v?0:i(s,h):v?i(s+(s<0?wo:-wo),h):0;if(!e&&(l=c=v)&&n.lineStart(),v!==c&&(p=r(e,g),(Hn(e,p)||Hn(g,p))&&(g[0]+=No,g[1]+=No,v=t(g[0],g[1]))),v!==c)f=0,v?(n.lineStart(),p=r(g,e),n.point(p[0],p[1])):(p=r(e,g),n.point(p[0],p[1]),n.lineEnd()),e=p;else if(a&&e&&o^v){var y;d&u||!(y=r(g,e,!0))||(f=0,o?(n.lineStart(),n.point(y[0][0],y[0][1]),n.point(y[1][0],y[1][1]),n.lineEnd()):(n.point(y[1][0],y[1][1]),n.lineEnd(),n.lineStart(),n.point(y[0][0],y[0][1])))}!v||e&&Hn(e,g)||n.point(g[0],g[1]),e=g,c=v,u=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return f|(l&&c)<<1}}}function r(n,t,e){var r=qn(n),i=qn(t),o=[1,0,0],a=Rn(r,i),c=zn(a,a),l=a[0],f=c-l*l;if(!f)return!e&&n;var s=u*c/f,h=-u*l/f,p=Rn(o,a),g=Pn(o,s),v=Pn(a,h);Dn(g,v);var d=p,y=zn(g,d),m=zn(d,d),x=y*y-m*(zn(g,g)-1);if(!(x<0)){var M=Math.sqrt(x),_=Pn(d,(-y-M)/m);if(Dn(_,g),_=jn(_),!e)return _;var b,w=n[0],S=t[0],k=n[1],N=t[1];S<w&&(b=w,w=S,S=b);var E=S-w,A=io(E-wo)<No,C=A||E<No;if(!A&&N<k&&(b=k,k=N,N=b),C?A?k+N>0^_[1]<(io(_[0]-w)<No?k:N):k<=_[1]&&_[1]<=N:E>wo^(w<=_[0]&&_[0]<=S)){var L=Pn(d,(-y+M)/m);return Dn(L,g),[_,jn(L)]}}}function i(t,e){var r=o?n:wo-n,i=0;return t<-r?i|=1:t>r&&(i|=2),e<-r?i|=4:e>r&&(i|=8),i}var u=Math.cos(n),o=u>0,a=io(u)>No,c=Lt(n,6*Ao);return Wn(t,e,c,o?[0,-n]:[-wo,n-wo])}function it(n,t,e,r){return function(i){var u,o=i.a,a=i.b,c=o.x,l=o.y,f=a.x,s=a.y,h=0,p=1,g=f-c,v=s-l;if(u=n-c,g||!(u>0)){if(u/=g,g<0){if(u<h)return;u<p&&(p=u)}else if(g>0){if(u>p)return;u>h&&(h=u)}if(u=e-c,g||!(u<0)){if(u/=g,g<0){if(u>p)return;u>h&&(h=u)}else if(g>0){if(u<h)return;u<p&&(p=u)}if(u=t-l,v||!(u>0)){if(u/=v,v<0){if(u<h)return;u<p&&(p=u)}else if(v>0){if(u>p)return;u>h&&(h=u)}if(u=r-l,v||!(u<0)){if(u/=v,v<0){if(u>p)return;u>h&&(h=u)}else if(v>0){if(u<h)return;u<p&&(p=u)}return h>0&&(i.a={x:c+h*g,y:l+h*v}),p<1&&(i.b={x:c+p*g,y:l+p*v}),i}}}}}}function ut(n,t,e,r){function i(r,i){return io(r[0]-n)<No?i>0?0:3:io(r[0]-e)<No?i>0?2:1:io(r[1]-t)<No?i>0?1:0:i>0?3:2}function u(n,t){return o(n.x,t.x)}function o(n,t){var e=i(n,1),r=i(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=y.length,r=n[1],i=0;i<e;++i)for(var u,o=1,a=y[i],c=a.length,f=a[0];o<c;++o)u=a[o],f[1]<=r?u[1]>r&&l(f,u,n)>0&&++t:u[1]<=r&&l(f,u,n)<0&&--t,f=u;return 0!==t}function l(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(e[0]-n[0])*(t[1]-n[1])}function f(u,a,c,l){var f=0,s=0;if(null==u||(f=i(u,c))!==(s=i(a,c))||o(u,a)<0^c>0){do l.point(0===f||3===f?n:e,f>1?r:t);while((f=(f+c+4)%4)!==s)}else l.point(a[0],a[1])}function s(i,u){return n<=i&&i<=e&&t<=u&&u<=r}function h(n,t){s(n,t)&&a.point(n,t)}function p(){L.point=v,y&&y.push(m=[]),k=!0,S=!1,b=w=NaN}function g(){d&&(v(x,M),_&&S&&A.rejoin(),d.push(A.buffer())),L.point=h,S&&a.lineEnd()}function v(n,t){n=Math.max(-ka,Math.min(ka,n)),t=Math.max(-ka,Math.min(ka,t));var e=s(n,t);if(y&&m.push([n,t]),k)x=n,M=t,_=e,k=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&S)a.point(n,t);else{var r={a:{x:b,y:w},b:{x:n,y:t}};C(r)?(S||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),N=!1):e&&(a.lineStart(),a.point(n,t),N=!1)}b=n,w=t,S=e}var d,y,m,x,M,_,b,w,S,k,N,E=a,A=Gn(),C=it(n,t,e,r),L={point:h,lineStart:p,lineEnd:g,polygonStart:function(){a=A,d=[],y=[],N=!0},polygonEnd:function(){a=E,d=Zu.merge(d);var t=c([n,r]),e=N&&t,i=d.length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),f(null,null,1,a),a.lineEnd()),i&&Xn(d,u,t,f,a),a.polygonEnd()),d=y=m=null}};return L}}function ot(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function at(n){var t=0,e=wo/3,r=bt(n),i=r(t,e);return i.parallels=function(n){return arguments.length?r(t=n[0]*wo/180,e=n[1]*wo/180):[t/wo*180,e/wo*180]},i}function ct(n,t){function e(n,t){var e=Math.sqrt(u-2*i*Math.sin(t))/i;return[e*Math.sin(n*=i),o-e*Math.cos(n)]}var r=Math.sin(n),i=(r+Math.sin(t))/2,u=1+r*(2*i-r),o=Math.sqrt(u)/i;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/i,H((u-(n*n+e*e)*i*i)/(2*i))]},e}function lt(){function n(n,t){Ea+=i*n-r*t,r=n,i=t}var t,e,r,i;qa.point=function(u,o){qa.point=n,t=r=u,e=i=o},qa.lineEnd=function(){n(t,e)}}function ft(n,t){n<Aa&&(Aa=n),n>La&&(La=n),t<Ca&&(Ca=t),t>Ta&&(Ta=t)}function st(){function n(n,t){o.push("M",n,",",t,u)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function i(){o.push("Z")}var u=ht(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return u=ht(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function ht(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function pt(n,t){ga+=n,va+=t,++da}function gt(){function n(n,r){var i=n-t,u=r-e,o=Math.sqrt(i*i+u*u);ya+=o*(t+n)/2,ma+=o*(e+r)/2,xa+=o,pt(t=n,e=r)}var t,e;Ra.point=function(r,i){Ra.point=n,pt(t=r,e=i)}}function vt(){Ra.point=pt}function dt(){function n(n,t){var e=n-r,u=t-i,o=Math.sqrt(e*e+u*u);ya+=o*(r+n)/2,ma+=o*(i+t)/2,xa+=o,o=i*n-r*t,Ma+=o*(r+n),_a+=o*(i+t),ba+=3*o,pt(r=n,i=t)}var t,e,r,i;Ra.point=function(u,o){Ra.point=n,pt(t=r=u,e=i=o)},Ra.lineEnd=function(){n(t,e)}}function yt(n){function t(t,e){n.moveTo(t,e),n.arc(t,e,o,0,So)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function i(){a.point=t}function u(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:i,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=i,a.point=t},pointRadius:function(n){return o=n,a},result:c};return a}function mt(n){function t(t){function r(e,r){e=n(e,r),t.point(e[0],e[1])}function i(){x=NaN,S.point=o,t.lineStart()}function o(r,i){var o=qn([r,i]),a=n(r,i);e(x,M,m,_,b,w,x=a[0],M=a[1],m=r,_=o[0],b=o[1],w=o[2],u,t),t.point(x,M)}function a(){S.point=r,t.lineEnd()}function c(){i(),S.point=l,S.lineEnd=f}function l(n,t){o(s=n,h=t),p=x,g=M,v=_,d=b,y=w,S.point=o}function f(){e(x,M,m,_,b,w,p,g,s,v,d,y,u,t),S.lineEnd=a,a()}var s,h,p,g,v,d,y,m,x,M,_,b,w,S={point:r,lineStart:i,lineEnd:a,polygonStart:function(){t.polygonStart(),S.lineStart=c},polygonEnd:function(){t.polygonEnd(),S.lineStart=i}};return S}function e(t,u,o,a,c,l,f,s,h,p,g,v,d,y){var m=f-t,x=s-u,M=m*m+x*x;if(M>4*r&&d--){var _=a+p,b=c+g,w=l+v,S=Math.sqrt(_*_+b*b+w*w),k=Math.asin(w/=S),N=io(io(w)-1)<No?(o+h)/2:Math.atan2(b,_),E=n(N,k),A=E[0],C=E[1],L=A-t,T=C-u,q=x*L-m*T;(q*q/M>r||io((m*L+x*T)/M-.5)>.3||a*p+c*g+l*v<i)&&(e(t,u,o,a,c,l,A,C,N,_/=S,b/=S,w,d,y),y.point(A,C),e(A,C,N,_,b,w,f,s,h,p,g,v,d,y))}}var r=.5,i=Math.cos(30*Ao),u=16;return t.precision=function(n){return arguments.length?(u=(r=n*n)>0&&16,t):Math.sqrt(r)},t}function xt(n){this.stream=n}function Mt(n){var t=mt(function(t,e){return n([t*Co,e*Co])});return function(n){var e=new xt(n=t(n));return e.point=function(t,e){n.point(t*Ao,e*Ao)},e}}function _t(n){return bt(function(){return n})()}function bt(n){function t(n){return n=a(n[0]*Ao,n[1]*Ao),[n[0]*h+c,l-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(l-n[1])/h),n&&[n[0]*Co,n[1]*Co]}function r(){a=ot(o=Nt(y,m,x),u);var n=u(v,d);return c=p-n[0]*h,l=g+n[1]*h,i()}function i(){return f&&(f.valid=!1,f=null),t}var u,o,a,c,l,f,s=mt(function(n,t){return n=u(n,t),[n[0]*h+c,l-n[1]*h]}),h=150,p=480,g=250,v=0,d=0,y=0,m=0,x=0,M=Sa,_=dn,b=null,w=null;return t.stream=function(n){return f&&(f.valid=!1),f=wt(M(o,s(_(n)))),f.valid=!0,f},t.clipAngle=function(n){return arguments.length?(M=null==n?(b=n,Sa):rt((b=+n)*Ao),i()):b},t.clipExtent=function(n){return arguments.length?(w=n,_=n?ut(n[0][0],n[0][1],n[1][0],n[1][1]):dn,i()):w},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(p=+n[0],g=+n[1],r()):[p,g]},t.center=function(n){return arguments.length?(v=n[0]%360*Ao,d=n[1]%360*Ao,r()):[v*Co,d*Co]},t.rotate=function(n){return arguments.length?(y=n[0]%360*Ao,m=n[1]%360*Ao,x=n.length>2?n[2]%360*Ao:0,r()):[y*Co,m*Co,x*Co]},Zu.rebind(t,s,"precision"),function(){return u=n.apply(this,arguments),t.invert=u.invert&&e,r()}}function wt(n){var t=new xt(n);return t.point=function(t,e){n.point(t*Ao,e*Ao)},t}function St(n,t){return[n,t]}function kt(n,t){return[n>wo?n-So:n<-wo?n+So:n,t]}function Nt(n,t,e){return n?t||e?ot(At(n),Ct(t,e)):At(n):t||e?Ct(t,e):kt}function Et(n){return function(t,e){return t+=n,[t>wo?t-So:t<-wo?t+So:t,e]}}function At(n){var t=Et(n);return t.invert=Et(-n),t}function Ct(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),f=l*r+a*i;return[Math.atan2(c*u-f*o,a*r-l*i),H(f*u+c*o)]}var r=Math.cos(n),i=Math.sin(n),u=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),f=l*u-c*o;return[Math.atan2(c*u+l*o,a*r+f*i),H(f*r-a*i)]},e}function Lt(n,t){var e=Math.cos(n),r=Math.sin(n);return function(i,u,o,a){var c=o*t;null!=i?(i=Tt(e,i),u=Tt(e,u),(o>0?i<u:i>u)&&(i+=o*So)):(i=n+o*So,u=n-.5*c);for(var l,f=i;o>0?f>u:f<u;f-=c)a.point((l=jn([e,-r*Math.cos(f),-r*Math.sin(f)]))[0],l[1])}}function Tt(n,t){var e=qn(t);e[0]-=n,Un(e);var r=j(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-No)%(2*Math.PI)}function qt(n,t,e){var r=Zu.range(n,t-No,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function zt(n,t,e){var r=Zu.range(n,t-No,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function Rt(n){return n.source}function Dt(n){return n.target}function Pt(n,t,e,r){var i=Math.cos(t),u=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=i*Math.cos(n),l=i*Math.sin(n),f=o*Math.cos(e),s=o*Math.sin(e),h=2*Math.asin(Math.sqrt(I(r-t)+i*o*I(e-n))),p=1/Math.sin(h),g=h?function(n){var t=Math.sin(n*=h)*p,e=Math.sin(h-n)*p,r=e*c+t*f,i=e*l+t*s,o=e*u+t*a;return[Math.atan2(i,r)*Co,Math.atan2(o,Math.sqrt(r*r+i*i))*Co]}:function(){return[n*Co,t*Co]};return g.distance=h,g}function Ut(){function n(n,i){var u=Math.sin(i*=Ao),o=Math.cos(i),a=io((n*=Ao)-t),c=Math.cos(a);Da+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*u-e*o*c)*a),e*u+r*o*c),t=n,e=u,r=o}var t,e,r;Pa.point=function(i,u){t=i*Ao,e=Math.sin(u*=Ao),r=Math.cos(u),Pa.point=n},Pa.lineEnd=function(){Pa.point=Pa.lineEnd=c}}function jt(n,t){function e(t,e){var r=Math.cos(t),i=Math.cos(e),u=n(r*i);return[u*i*Math.sin(t),u*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),i=t(r),u=Math.sin(i),o=Math.cos(i);return[Math.atan2(n*u,r*o),Math.asin(r&&e*u/r)]},e}function Ht(n,t){function e(n,t){var e=io(io(t)-ko)<No?0:o/Math.pow(i(t),u);return[e*Math.sin(u*n),o-e*Math.cos(u*n)]}var r=Math.cos(n),i=function(n){return Math.tan(wo/4+n/2)},u=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(i(t)/i(n)),o=r*Math.pow(i(n),u)/u;return u?(e.invert=function(n,t){var e=o-t,r=U(u)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/u,2*Math.atan(Math.pow(o/r,1/u))-ko]},e):Ot}function Ft(n,t){function e(n,t){var e=u-t;return[e*Math.sin(i*n),u-e*Math.cos(i*n)]}var r=Math.cos(n),i=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),u=r/i+n;return io(i)<No?St:(e.invert=function(n,t){var e=u-t;return[Math.atan2(n,e)/i,u-U(i)*Math.sqrt(n*n+e*e)]},e)}function Ot(n,t){return[n,Math.log(Math.tan(wo/4+t/2))]}function Yt(n){var t,e=_t(n),r=e.scale,i=e.translate,u=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=i.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=u.apply(e,arguments);if(o===e){if(t=null==n){var a=wo*r(),c=i();u([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function It(n,t){var e=Math.cos(t)*Math.sin(n);return[Math.log((1+e)/(1-e))/2,Math.atan2(Math.tan(t),Math.cos(n))]}function Zt(n){return n[0]}function Vt(n){return n[1]}function Xt(n,t,e,r){var i,u,o,a,c,l,f;return i=r[n],u=i[0],o=i[1],i=r[t],a=i[0],c=i[1],i=r[e],l=i[0],f=i[1],(f-o)*(a-u)-(c-o)*(l-u)>0}function $t(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Bt(n,t,e,r){var i=n[0],u=e[0],o=t[0]-i,a=r[0]-u,c=n[1],l=e[1],f=t[1]-c,s=r[1]-l,h=(a*(c-l)-s*(i-u))/(s*o-a*f);return[i+h*o,c+h*f]}function Wt(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Jt(){ye(this),this.edge=this.site=this.circle=null}function Gt(n){var t=Ba.pop()||new Jt;return t.site=n,t}function Kt(n){ce(n),Va.remove(n),Ba.push(n),ye(n)}function Qt(n){var t=n.circle,e=t.x,r=t.cy,i={x:e,y:r},u=n.P,o=n.N,a=[n];Kt(n);for(var c=u;c.circle&&io(e-c.circle.x)<No&&io(r-c.circle.cy)<No;)u=c.P,a.unshift(c),Kt(c),c=u;a.unshift(c),ce(c);for(var l=o;l.circle&&io(e-l.circle.x)<No&&io(r-l.circle.cy)<No;)o=l.N,a.push(l),Kt(l),l=o;a.push(l),ce(l);var f,s=a.length;for(f=1;f<s;++f)l=a[f],c=a[f-1],ge(l.edge,c.site,l.site,i);c=a[0],l=a[s-1],l.edge=he(c.site,l.site,null,i),ae(c),ae(l)}function ne(n){for(var t,e,r,i,u=n.x,o=n.y,a=Va._;a;)if(r=te(a,o)-u,r>No)a=a.L;else{if(i=u-ee(a,o),!(i>No)){r>-No?(t=a.P,e=a):i>-No?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Gt(n);if(Va.insert(t,c),t||e){if(t===e)return ce(t),e=Gt(t.site),Va.insert(c,e),c.edge=e.edge=he(t.site,c.site),ae(t),void ae(e);if(!e)return void(c.edge=he(t.site,c.site));ce(t),ce(e);var l=t.site,f=l.x,s=l.y,h=n.x-f,p=n.y-s,g=e.site,v=g.x-f,d=g.y-s,y=2*(h*d-p*v),m=h*h+p*p,x=v*v+d*d,M={x:(d*m-p*x)/y+f,y:(h*x-v*m)/y+s};ge(e.edge,l,g,M),c.edge=he(l,n,null,M),e.edge=he(n,g,null,M),ae(t),ae(e)}}function te(n,t){var e=n.site,r=e.x,i=e.y,u=i-t;if(!u)return r;var o=n.P;if(!o)return-(1/0);e=o.site;var a=e.x,c=e.y,l=c-t;if(!l)return a;var f=a-r,s=1/u-1/l,h=f/l;return s?(-h+Math.sqrt(h*h-2*s*(f*f/(-2*l)-c+l/2+i-u/2)))/s+r:(r+a)/2}function ee(n,t){var e=n.N;if(e)return te(e,t);var r=n.site;return r.y===t?r.x:1/0}function re(n){this.site=n,this.edges=[]}function ie(n){for(var t,e,r,i,u,o,a,c,l,f,s=n[0][0],h=n[1][0],p=n[0][1],g=n[1][1],v=Za,d=v.length;d--;)if(u=v[d],u&&u.prepare())for(a=u.edges,c=a.length,o=0;o<c;)f=a[o].end(),r=f.x,i=f.y,l=a[++o%c].start(),t=l.x,e=l.y,(io(r-t)>No||io(i-e)>No)&&(a.splice(o,0,new ve(pe(u.site,f,io(r-s)<No&&g-i>No?{x:s,y:io(t-s)<No?e:g}:io(i-g)<No&&h-r>No?{x:io(e-g)<No?t:h,y:g}:io(r-h)<No&&i-p>No?{x:h,y:io(t-h)<No?e:p}:io(i-p)<No&&r-s>No?{x:io(e-p)<No?t:s,y:p}:null),u.site,null)),++c)}function ue(n,t){return t.angle-n.angle}function oe(){ye(this),this.x=this.y=this.arc=this.site=this.cy=null}function ae(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,i=n.site,u=e.site;if(r!==u){var o=i.x,a=i.y,c=r.x-o,l=r.y-a,f=u.x-o,s=u.y-a,h=2*(c*s-l*f);if(!(h>=-Eo)){var p=c*c+l*l,g=f*f+s*s,v=(s*p-l*g)/h,d=(c*g-f*p)/h,s=d+a,y=Wa.pop()||new oe;y.arc=n,y.site=i,y.x=v+o,y.y=s+Math.sqrt(v*v+d*d),y.cy=s,n.circle=y;for(var m=null,x=$a._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}$a.insert(m,y),m||(Xa=y)}}}}function ce(n){var t=n.circle;t&&(t.P||(Xa=t.N),$a.remove(t),Wa.push(t),ye(t),n.circle=null)}function le(n){for(var t,e=Ia,r=it(n[0][0],n[0][1],n[1][0],n[1][1]),i=e.length;i--;)t=e[i],(!fe(t,n)||!r(t)||io(t.a.x-t.b.x)<No&&io(t.a.y-t.b.y)<No)&&(t.a=t.b=null,e.splice(i,1))}function fe(n,t){var e=n.b;if(e)return!0;var r,i,u=n.a,o=t[0][0],a=t[1][0],c=t[0][1],l=t[1][1],f=n.l,s=n.r,h=f.x,p=f.y,g=s.x,v=s.y,d=(h+g)/2,y=(p+v)/2;if(v===p){if(d<o||d>=a)return;if(h>g){if(u){if(u.y>=l)return}else u={x:d,y:c};e={x:d,y:l}}else{if(u){if(u.y<c)return}else u={x:d,y:l};e={x:d,y:c}}}else if(r=(h-g)/(v-p),i=y-r*d,
r<-1||r>1)if(h>g){if(u){if(u.y>=l)return}else u={x:(c-i)/r,y:c};e={x:(l-i)/r,y:l}}else{if(u){if(u.y<c)return}else u={x:(l-i)/r,y:l};e={x:(c-i)/r,y:c}}else if(p<v){if(u){if(u.x>=a)return}else u={x:o,y:r*o+i};e={x:a,y:r*a+i}}else{if(u){if(u.x<o)return}else u={x:a,y:r*a+i};e={x:o,y:r*o+i}}return n.a=u,n.b=e,!0}function se(n,t){this.l=n,this.r=t,this.a=this.b=null}function he(n,t,e,r){var i=new se(n,t);return Ia.push(i),e&&ge(i,n,t,e),r&&ge(i,t,n,r),Za[n.i].edges.push(new ve(i,n,t)),Za[t.i].edges.push(new ve(i,t,n)),i}function pe(n,t,e){var r=new se(n,null);return r.a=t,r.b=e,Ia.push(r),r}function ge(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function ve(n,t,e){var r=n.a,i=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function de(){this._=null}function ye(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function me(n,t){var e=t,r=t.R,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function xe(n,t){var e=t,r=t.L,i=e.U;i?i.L===e?i.L=r:i.R=r:n._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function Me(n){for(;n.L;)n=n.L;return n}function _e(n,t){var e,r,i,u=n.sort(be).pop();for(Ia=[],Za=new Array(n.length),Va=new de,$a=new de;;)if(i=Xa,u&&(!i||u.y<i.y||u.y===i.y&&u.x<i.x))u.x===e&&u.y===r||(Za[u.i]=new re(u),ne(u),e=u.x,r=u.y),u=n.pop();else{if(!i)break;Qt(i.arc)}t&&(le(t),ie(t));var o={cells:Za,edges:Ia};return Va=$a=Ia=Za=null,o}function be(n,t){return t.y-n.y||t.x-n.x}function we(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function Se(n){return n.x}function ke(n){return n.y}function Ne(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ee(n,t,e,r,i,u){if(!n(t,e,r,i,u)){var o=.5*(e+i),a=.5*(r+u),c=t.nodes;c[0]&&Ee(n,c[0],e,r,o,a),c[1]&&Ee(n,c[1],o,r,i,a),c[2]&&Ee(n,c[2],e,a,o,u),c[3]&&Ee(n,c[3],o,a,i,u)}}function Ae(n,t){n=Zu.rgb(n),t=Zu.rgb(t);var e=n.r,r=n.g,i=n.b,u=t.r-e,o=t.g-r,a=t.b-i;return function(n){return"#"+ln(Math.round(e+u*n))+ln(Math.round(r+o*n))+ln(Math.round(i+a*n))}}function Ce(n,t){var e,r={},i={};for(e in n)e in t?r[e]=qe(n[e],t[e]):i[e]=n[e];for(e in t)e in n||(i[e]=t[e]);return function(n){for(e in r)i[e]=r[e](n);return i}}function Le(n,t){return t-=n=+n,function(e){return n+t*e}}function Te(n,t){var e,r,i,u,o,a=0,c=0,l=[],f=[];for(n+="",t+="",Ga.lastIndex=0,r=0;e=Ga.exec(t);++r)e.index&&l.push(t.substring(a,c=e.index)),f.push({i:l.length,x:e[0]}),l.push(null),a=Ga.lastIndex;for(a<t.length&&l.push(t.substring(a)),r=0,u=f.length;(e=Ga.exec(n))&&r<u;++r)if(o=f[r],o.x==e[0]){if(o.i)if(null==l[o.i+1])for(l[o.i-1]+=o.x,l.splice(o.i,1),i=r+1;i<u;++i)f[i].i--;else for(l[o.i-1]+=o.x+l[o.i+1],l.splice(o.i,2),i=r+1;i<u;++i)f[i].i-=2;else if(null==l[o.i+1])l[o.i]=o.x;else for(l[o.i]=o.x+l[o.i+1],l.splice(o.i+1,1),i=r+1;i<u;++i)f[i].i--;f.splice(r,1),u--,r--}else o.x=Le(parseFloat(e[0]),parseFloat(o.x));for(;r<u;)o=f.pop(),null==l[o.i+1]?l[o.i]=o.x:(l[o.i]=o.x+l[o.i+1],l.splice(o.i+1,1)),u--;return 1===l.length?null==l[0]?(o=f[0].x,function(n){return o(n)+""}):function(){return t}:function(n){for(r=0;r<u;++r)l[(o=f[r]).i]=o.x(n);return l.join("")}}function qe(n,t){for(var e,r=Zu.interpolators.length;--r>=0&&!(e=Zu.interpolators[r](n,t)););return e}function ze(n,t){var e,r=[],i=[],u=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;e<a;++e)r.push(qe(n[e],t[e]));for(;e<u;++e)i[e]=n[e];for(;e<o;++e)i[e]=t[e];return function(n){for(e=0;e<a;++e)i[e]=r[e](n);return i}}function Re(n){return function(t){return t<=0?0:t>=1?1:n(t)}}function De(n){return function(t){return 1-n(1-t)}}function Pe(n){return function(t){return.5*(t<.5?n(2*t):2-n(2-2*t))}}function Ue(n){return n*n}function je(n){return n*n*n}function He(n){if(n<=0)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(n<.5?e:3*(n-t)+e-.75)}function Fe(n){return function(t){return Math.pow(t,n)}}function Oe(n){return 1-Math.cos(n*ko)}function Ye(n){return Math.pow(2,10*(n-1))}function Ie(n){return 1-Math.sqrt(1-n*n)}function Ze(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/So*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*So/t)}}function Ve(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function Xe(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function $e(n,t){n=Zu.hcl(n),t=Zu.hcl(t);var e=n.h,r=n.c,i=n.l,u=t.h-e,o=t.c-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:u<-180&&(u+=360),function(n){return J(e+u*n,r+o*n,i+a*n)+""}}function Be(n,t){n=Zu.hsl(n),t=Zu.hsl(t);var e=n.h,r=n.s,i=n.l,u=t.h-e,o=t.s-r,a=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(u)?(u=0,e=isNaN(e)?t.h:e):u>180?u-=360:u<-180&&(u+=360),function(n){return $(e+u*n,r+o*n,i+a*n)+""}}function We(n,t){n=Zu.lab(n),t=Zu.lab(t);var e=n.l,r=n.a,i=n.b,u=t.l-e,o=t.a-r,a=t.b-i;return function(n){return Q(e+u*n,r+o*n,i+a*n)+""}}function Je(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Ge(n){var t=[n.a,n.b],e=[n.c,n.d],r=Qe(t),i=Ke(t,e),u=Qe(nr(e,t,-i))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Co,this.translate=[n.e,n.f],this.scale=[r,u],this.skew=u?Math.atan2(i,u)*Co:0}function Ke(n,t){return n[0]*t[0]+n[1]*t[1]}function Qe(n){var t=Math.sqrt(Ke(n,n));return t&&(n[0]/=t,n[1]/=t),t}function nr(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function tr(n,t){var e,r=[],i=[],u=Zu.transform(n),o=Zu.transform(t),a=u.translate,c=o.translate,l=u.rotate,f=o.rotate,s=u.skew,h=o.skew,p=u.scale,g=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:Le(a[0],c[0])},{i:3,x:Le(a[1],c[1])})):c[0]||c[1]?r.push("translate("+c+")"):r.push(""),l!=f?(l-f>180?f+=360:f-l>180&&(l+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:Le(l,f)})):f&&r.push(r.pop()+"rotate("+f+")"),s!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:Le(s,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=g[0]||p[1]!=g[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:e-4,x:Le(p[0],g[0])},{i:e-2,x:Le(p[1],g[1])})):1==g[0]&&1==g[1]||r.push(r.pop()+"scale("+g+")"),e=i.length,function(n){for(var t,u=-1;++u<e;)r[(t=i[u]).i]=t.x(n);return r.join("")}}function er(n,t){return t=t-(n=+n)?1/(t-n):0,function(e){return(e-n)*t}}function rr(n,t){return t=t-(n=+n)?1/(t-n):0,function(e){return Math.max(0,Math.min(1,(e-n)*t))}}function ir(n){for(var t=n.source,e=n.target,r=or(t,e),i=[t];t!==r;)t=t.parent,i.push(t);for(var u=i.length;e!==r;)i.splice(u,0,e),e=e.parent;return i}function ur(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function or(n,t){if(n===t)return n;for(var e=ur(n),r=ur(t),i=e.pop(),u=r.pop(),o=null;i===u;)o=i,i=e.pop(),u=r.pop();return o}function ar(n){n.fixed|=2}function cr(n){n.fixed&=-7}function lr(n){n.fixed|=4,n.px=n.x,n.py=n.y}function fr(n){n.fixed&=-5}function sr(n,t,e){var r=0,i=0;if(n.charge=0,!n.leaf)for(var u,o=n.nodes,a=o.length,c=-1;++c<a;)u=o[c],null!=u&&(sr(u,t,e),n.charge+=u.charge,r+=u.charge*u.cx,i+=u.charge*u.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,i+=l*n.point.y}n.cx=r/n.charge,n.cy=i/n.charge}function hr(n,t){return Zu.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=dr,n}function pr(n){return n.children}function gr(n){return n.value}function vr(n,t){return t.value-n.value}function dr(n){return Zu.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function yr(n){return n.x}function mr(n){return n.y}function xr(n,t,e){n.y0=t,n.y=e}function Mr(n){return Zu.range(n.length)}function _r(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function br(n){for(var t,e=1,r=0,i=n[0][1],u=n.length;e<u;++e)(t=n[e][1])>i&&(r=e,i=t);return r}function wr(n){return n.reduce(Sr,0)}function Sr(n,t){return n+t[1]}function kr(n,t){return Nr(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function Nr(n,t){for(var e=-1,r=+n[0],i=(n[1]-r)/t,u=[];++e<=t;)u[e]=i*e+r;return u}function Er(n){return[Zu.min(n),Zu.max(n)]}function Ar(n,t){return n.parent==t.parent?1:2}function Cr(n){var t=n.children;return t&&t.length?t[0]:n._tree.thread}function Lr(n){var t,e=n.children;return e&&(t=e.length)?e[t-1]:n._tree.thread}function Tr(n,t){var e=n.children;if(e&&(i=e.length))for(var r,i,u=-1;++u<i;)t(r=Tr(e[u],t),n)>0&&(n=r);return n}function qr(n,t){return n.x-t.x}function zr(n,t){return t.x-n.x}function Rr(n,t){return n.depth-t.depth}function Dr(n,t){function e(n,r){var i=n.children;if(i&&(o=i.length))for(var u,o,a=null,c=-1;++c<o;)u=i[c],e(u,a),a=u;t(n,r)}e(n,null)}function Pr(n){for(var t,e=0,r=0,i=n.children,u=i.length;--u>=0;)t=i[u]._tree,t.prelim+=e,t.mod+=e,e+=t.shift+(r+=t.change)}function Ur(n,t,e){n=n._tree,t=t._tree;var r=e/(t.number-n.number);n.change+=r,t.change-=r,t.shift+=e,t.prelim+=e,t.mod+=e}function jr(n,t,e){return n._tree.ancestor.parent==t.parent?n._tree.ancestor:e}function Hr(n,t){return n.value-t.value}function Fr(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function Or(n,t){n._pack_next=t,t._pack_prev=n}function Yr(n,t){var e=t.x-n.x,r=t.y-n.y,i=n.r+t.r;return.999*i*i>e*e+r*r}function Ir(n){function t(n){f=Math.min(n.x-n.r,f),s=Math.max(n.x+n.r,s),h=Math.min(n.y-n.r,h),p=Math.max(n.y+n.r,p)}if((e=n.children)&&(l=e.length)){var e,r,i,u,o,a,c,l,f=1/0,s=-(1/0),h=1/0,p=-(1/0);if(e.forEach(Zr),r=e[0],r.x=-r.r,r.y=0,t(r),l>1&&(i=e[1],i.x=i.r,i.y=0,t(i),l>2))for(u=e[2],$r(r,i,u),t(u),Fr(r,u),r._pack_prev=u,Fr(u,i),i=r._pack_next,o=3;o<l;o++){$r(r,i,u=e[o]);var g=0,v=1,d=1;for(a=i._pack_next;a!==i;a=a._pack_next,v++)if(Yr(a,u)){g=1;break}if(1==g)for(c=r._pack_prev;c!==a._pack_prev&&!Yr(c,u);c=c._pack_prev,d++);g?(v<d||v==d&&i.r<r.r?Or(r,i=a):Or(r=c,i),o--):(Fr(r,u),i=u,t(u))}var y=(f+s)/2,m=(h+p)/2,x=0;for(o=0;o<l;o++)u=e[o],u.x-=y,u.y-=m,x=Math.max(x,u.r+Math.sqrt(u.x*u.x+u.y*u.y));n.r=x,e.forEach(Vr)}}function Zr(n){n._pack_next=n._pack_prev=n}function Vr(n){delete n._pack_next,delete n._pack_prev}function Xr(n,t,e,r){var i=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,i)for(var u=-1,o=i.length;++u<o;)Xr(i[u],t,e,r)}function $r(n,t,e){var r=n.r+e.r,i=t.x-n.x,u=t.y-n.y;if(r&&(i||u)){var o=t.r+e.r,a=i*i+u*u;o*=o,r*=r;var c=.5+(r-o)/(2*a),l=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*i+l*u,e.y=n.y+c*u-l*i}else e.x=n.x+r,e.y=n.y}function Br(n){return 1+Zu.max(n,function(n){return n.y})}function Wr(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Jr(n){var t=n.children;return t&&t.length?Jr(t[0]):n}function Gr(n){var t,e=n.children;return e&&(t=e.length)?Gr(e[t-1]):n}function Kr(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Qr(n,t){var e=n.x+t[3],r=n.y+t[0],i=n.dx-t[1]-t[3],u=n.dy-t[0]-t[2];return i<0&&(e+=i/2,i=0),u<0&&(r+=u/2,u=0),{x:e,y:r,dx:i,dy:u}}function ni(n){var t=n[0],e=n[n.length-1];return t<e?[t,e]:[e,t]}function ti(n){return n.rangeExtent?n.rangeExtent():ni(n.range())}function ei(n,t,e,r){var i=e(n[0],n[1]),u=r(t[0],t[1]);return function(n){return u(i(n))}}function ri(n,t){var e,r=0,i=n.length-1,u=n[r],o=n[i];return o<u&&(e=r,r=i,i=e,e=u,u=o,o=e),n[r]=t.floor(u),n[i]=t.ceil(o),n}function ii(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:ac}function ui(n,t,e,r){var i=[],u=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)i.push(e(n[o-1],n[o])),u.push(r(t[o-1],t[o]));return function(t){var e=Zu.bisect(n,t,1,a)-1;return u[e](i[e](t))}}function oi(n,t,e,r){function i(){var i=Math.min(n.length,t.length)>2?ui:ei,c=r?rr:er;return o=i(n,t,c,e),a=i(t,n,c,qe),u}function u(n){return o(n)}var o,a;return u.invert=function(n){return a(n)},u.domain=function(t){return arguments.length?(n=t.map(Number),i()):n},u.range=function(n){return arguments.length?(t=n,i()):t},u.rangeRound=function(n){return u.range(n).interpolate(Je)},u.clamp=function(n){return arguments.length?(r=n,i()):r},u.interpolate=function(n){return arguments.length?(e=n,i()):e},u.ticks=function(t){return fi(n,t)},u.tickFormat=function(t,e){return si(n,t,e)},u.nice=function(t){return ci(n,t),i()},u.copy=function(){return oi(n,t,e,r)},i()}function ai(n,t){return Zu.rebind(n,t,"range","rangeRound","interpolate","clamp")}function ci(n,t){return ri(n,ii(li(n,t)[2]))}function li(n,t){null==t&&(t=10);var e=ni(n),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),u=t/r*i;return u<=.15?i*=10:u<=.35?i*=5:u<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function fi(n,t){return Zu.range.apply(Zu,li(n,t))}function si(n,t,e){var r=-Math.floor(Math.log(li(n,t)[2])/Math.LN10+.01);return Zu.format(e?e.replace(ea,function(n,t,e,i,u,o,a,c,l,f){return[t,e,i,u,o,a,c,l||"."+(r-2*("%"===f)),f].join("")}):",."+r+"f")}function hi(n,t,e,r){function i(n){return(e?Math.log(n<0?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function u(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(i(t))}return o.invert=function(t){return u(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(i)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(i)),o):t},o.nice=function(){var t=ri(r.map(i),e?Math:lc);return n.domain(t),r=t.map(u),o},o.ticks=function(){var n=ni(r),o=[],a=n[0],c=n[1],l=Math.floor(i(a)),f=Math.ceil(i(c)),s=t%1?2:t;if(isFinite(f-l)){if(e){for(;l<f;l++)for(var h=1;h<s;h++)o.push(u(l)*h);o.push(u(l))}else for(o.push(u(l));l++<f;)for(var h=s-1;h>0;h--)o.push(u(l)*h);for(l=0;o[l]<a;l++);for(f=o.length;o[f-1]>c;f--);o=o.slice(l,f)}return o},o.tickFormat=function(n,t){if(!arguments.length)return cc;arguments.length<2?t=cc:"function"!=typeof t&&(t=Zu.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/u(c(i(n)+r))<=a?t(n):""}},o.copy=function(){return hi(n.copy(),t,e,r)},ai(o,n)}function pi(n,t,e){function r(t){return n(i(t))}var i=gi(t),u=gi(1/t);return r.invert=function(t){return u(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(i)),r):e},r.ticks=function(n){return fi(e,n)},r.tickFormat=function(n,t){return si(e,n,t)},r.nice=function(n){return r.domain(ci(e,n))},r.exponent=function(o){return arguments.length?(i=gi(t=o),u=gi(1/t),n.domain(e.map(i)),r):t},r.copy=function(){return pi(n.copy(),t,e)},ai(r,n)}function gi(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function vi(n,t){function e(e){return o[((u.get(e)||"range"===t.t&&u.set(e,n.push(e)))-1)%o.length]}function r(t,e){return Zu.range(n.length).map(function(n){return t+e*n})}var u,o,a;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new i;for(var o,a=-1,c=r.length;++a<c;)u.has(o=r[a])||u.set(o,n.push(o));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(o=n,a=0,t={t:"range",a:arguments},e):o},e.rangePoints=function(i,u){arguments.length<2&&(u=0);var c=i[0],l=i[1],f=(l-c)/(Math.max(1,n.length-1)+u);return o=r(n.length<2?(c+l)/2:c+f*u/2,f),a=0,t={t:"rangePoints",a:arguments},e},e.rangeBands=function(i,u,c){arguments.length<2&&(u=0),arguments.length<3&&(c=u);var l=i[1]<i[0],f=i[l-0],s=i[1-l],h=(s-f)/(n.length-u+2*c);return o=r(f+h*c,h),l&&o.reverse(),a=h*(1-u),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(i,u,c){arguments.length<2&&(u=0),arguments.length<3&&(c=u);var l=i[1]<i[0],f=i[l-0],s=i[1-l],h=Math.floor((s-f)/(n.length-u+2*c)),p=s-f-(n.length-u)*h;return o=r(f+Math.round(p/2),h),l&&o.reverse(),a=Math.round(h*(1-u)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return a},e.rangeExtent=function(){return ni(t.a[0])},e.copy=function(){return vi(n,t)},e.domain(n)}function di(n,t){function e(){var e=0,u=t.length;for(i=[];++e<u;)i[e-1]=Zu.quantile(n,e/u);return r}function r(n){if(!isNaN(n=+n))return t[Zu.bisect(i,n)]}var i;return r.domain=function(t){return arguments.length?(n=t.filter(function(n){return!isNaN(n)}).sort(Zu.ascending),e()):n},r.range=function(n){return arguments.length?(t=n,e()):t},r.quantiles=function(){return i},r.invertExtent=function(e){return e=t.indexOf(e),e<0?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},r.copy=function(){return di(n,t)},e()}function yi(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(u*(t-n))))]}function i(){return u=e.length/(t-n),o=e.length-1,r}var u,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],i()):[n,t]},r.range=function(n){return arguments.length?(e=n,i()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=t<0?NaN:t/u+n,[t,t+1/u]},r.copy=function(){return yi(n,t,e)},i()}function mi(n,t){function e(e){if(e<=e)return t[Zu.bisect(n,e)]}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return mi(n,t)},e}function xi(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return fi(n,t)},t.tickFormat=function(t,e){return si(n,t,e)},t.copy=function(){return xi(n)},t}function Mi(n){return n.innerRadius}function _i(n){return n.outerRadius}function bi(n){return n.startAngle}function wi(n){return n.endAngle}function Si(n){function t(t){function o(){l.push("M",u(n(f),a))}for(var c,l=[],f=[],s=-1,h=t.length,p=vn(e),g=vn(r);++s<h;)i.call(this,c=t[s],s)?f.push([+p.call(this,c,s),+g.call(this,c,s)]):f.length&&(o(),f=[]);return f.length&&o(),l.length?l.join(""):null}var e=Zt,r=Vt,i=Vn,u=ki,o=u.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(i=n,t):i},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?u=n:(u=dc.get(n)||ki).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function ki(n){return n.join("L")}function Ni(n){return ki(n)+"Z"}function Ei(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&i.push("H",r[0]),i.join("")}function Ai(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("V",(r=n[t])[1],"H",r[0]);return i.join("")}function Ci(n){for(var t=0,e=n.length,r=n[0],i=[r[0],",",r[1]];++t<e;)i.push("H",(r=n[t])[0],"V",r[1]);return i.join("")}function Li(n,t){return n.length<4?ki(n):n[1]+zi(n.slice(1,n.length-1),Ri(n,t))}function Ti(n,t){return n.length<3?ki(n):n[0]+zi((n.push(n[0]),n),Ri([n[n.length-2]].concat(n,[n[1]]),t))}function qi(n,t){return n.length<3?ki(n):n[0]+zi(n,Ri(n,t))}function zi(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return ki(n);var e=n.length!=t.length,r="",i=n[0],u=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(u[0]-2*o[0]/3)+","+(u[1]-2*o[1]/3)+","+u[0]+","+u[1],i=n[1],c=2),t.length>1){a=t[1],u=n[c],c++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1];for(var l=2;l<t.length;l++,c++)u=n[c],a=t[l],r+="S"+(u[0]-a[0])+","+(u[1]-a[1])+","+u[0]+","+u[1]}if(e){var f=n[c];r+="Q"+(u[0]+2*a[0]/3)+","+(u[1]+2*a[1]/3)+","+f[0]+","+f[1]}return r}function Ri(n,t){for(var e,r=[],i=(1-t)/2,u=n[0],o=n[1],a=1,c=n.length;++a<c;)e=u,u=o,o=n[a],r.push([i*(o[0]-e[0]),i*(o[1]-e[1])]);return r}function Di(n){if(n.length<3)return ki(n);var t=1,e=n.length,r=n[0],i=r[0],u=r[1],o=[i,i,i,(r=n[1])[0]],a=[u,u,u,r[1]],c=[i,",",u,"L",Hi(xc,o),",",Hi(xc,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Fi(c,o,a);return n.pop(),c.push("L",r),c.join("")}function Pi(n){if(n.length<4)return ki(n);for(var t,e=[],r=-1,i=n.length,u=[0],o=[0];++r<3;)t=n[r],u.push(t[0]),o.push(t[1]);for(e.push(Hi(xc,u)+","+Hi(xc,o)),--r;++r<i;)t=n[r],u.shift(),u.push(t[0]),o.shift(),o.push(t[1]),Fi(e,u,o);return e.join("")}function Ui(n){for(var t,e,r=-1,i=n.length,u=i+4,o=[],a=[];++r<4;)e=n[r%i],o.push(e[0]),a.push(e[1]);for(t=[Hi(xc,o),",",Hi(xc,a)],--r;++r<u;)e=n[r%i],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Fi(t,o,a);return t.join("")}function ji(n,t){var e=n.length-1;if(e)for(var r,i,u=n[0][0],o=n[0][1],a=n[e][0]-u,c=n[e][1]-o,l=-1;++l<=e;)r=n[l],i=l/e,r[0]=t*r[0]+(1-t)*(u+i*a),r[1]=t*r[1]+(1-t)*(o+i*c);return Di(n)}function Hi(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Fi(n,t,e){n.push("C",Hi(yc,t),",",Hi(yc,e),",",Hi(mc,t),",",Hi(mc,e),",",Hi(xc,t),",",Hi(xc,e))}function Oi(n,t){return(t[1]-n[1])/(t[0]-n[0])}function Yi(n){for(var t=0,e=n.length-1,r=[],i=n[0],u=n[1],o=r[0]=Oi(i,u);++t<e;)r[t]=(o+(o=Oi(i=u,u=n[t+1])))/2;return r[t]=o,r}function Ii(n){for(var t,e,r,i,u=[],o=Yi(n),a=-1,c=n.length-1;++a<c;)t=Oi(n[a],n[a+1]),io(t)<No?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,i=e*e+r*r,i>9&&(i=3*t/Math.sqrt(i),o[a]=i*e,o[a+1]=i*r));for(a=-1;++a<=c;)i=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),u.push([i||0,o[a]*i||0]);return u}function Zi(n){return n.length<3?ki(n):n[0]+zi(n,Ii(n))}function Vi(n){for(var t,e,r,i=-1,u=n.length;++i<u;)t=n[i],e=t[0],r=t[1]+gc,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Xi(n){function t(t){function c(){v.push("M",a(n(y),s),f,l(n(d.reverse()),s),"Z")}for(var h,p,g,v=[],d=[],y=[],m=-1,x=t.length,M=vn(e),_=vn(i),b=e===r?function(){return p}:vn(r),w=i===u?function(){return g}:vn(u);++m<x;)o.call(this,h=t[m],m)?(d.push([p=+M.call(this,h,m),g=+_.call(this,h,m)]),y.push([+b.call(this,h,m),+w.call(this,h,m)])):d.length&&(c(),d=[],y=[]);return d.length&&c(),v.length?v.join(""):null}var e=Zt,r=Zt,i=0,u=Vt,o=Vn,a=ki,c=a.key,l=a,f="L",s=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r},t.y=function(n){return arguments.length?(i=u=n,t):u},t.y0=function(n){return arguments.length?(i=n,t):i},t.y1=function(n){return arguments.length?(u=n,t):u},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=dc.get(n)||ki).key,l=a.reverse||a,f=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(s=n,t):s},t}function $i(n){return n.radius}function Bi(n){return[n.x,n.y]}function Wi(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]+gc;return[e*Math.cos(r),e*Math.sin(r)]}}function Ji(){return 64}function Gi(){return"circle"}function Ki(n){var t=Math.sqrt(n/wo);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Qi(n,t){return lo(n,kc),n.id=t,n}function nu(n,t,e,r){var i=n.id;return A(n,"function"==typeof e?function(n,u,o){n.__transition__[i].tween.set(t,r(e.call(n,n.__data__,u,o)))}:(e=r(e),function(n){n.__transition__[i].tween.set(t,e)}))}function tu(n){return null==n&&(n=""),function(){this.textContent=n}}function eu(n,t,e,r){var u=n.__transition__||(n.__transition__={active:0,count:0}),o=u[e];if(!o){var a=r.time;o=u[e]={tween:new i,time:a,ease:r.ease,delay:r.delay,duration:r.duration},++u.count,Zu.timer(function(r){function i(r){return u.active>e?l():(u.active=e,o.event&&o.event.start.call(n,f,t),o.tween.forEach(function(e,r){(r=r.call(n,f,t))&&v.push(r)}),void Zu.timer(function(){return g.c=c(r||1)?Vn:c,1},0,a))}function c(r){if(u.active!==e)return l();for(var i=r/p,a=s(i),c=v.length;c>0;)v[--c].call(n,a);return i>=1?(o.event&&o.event.end.call(n,f,t),l()):void 0}function l(){return--u.count?delete u[e]:delete n.__transition__,1}var f=n.__data__,s=o.ease,h=o.delay,p=o.duration,g=Wo,v=[];return g.t=h+a,h<=r?i(r-h):void(g.c=i)},0,a)}}function ru(n,t){n.attr("transform",function(n){return"translate("+t(n)+",0)"})}function iu(n,t){n.attr("transform",function(n){return"translate(0,"+t(n)+")"})}function uu(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function ou(n,t,e){function r(t){var e=n(t),r=u(e,1);return t-e<r-t?e:r}function i(e){return t(e=n(new qc(e-1)),1),e}function u(n,e){return t(n=new qc((+n)),e),n}function o(n,r,u){var o=i(n),a=[];if(u>1)for(;o<r;)e(o)%u||a.push(new Date((+o))),t(o,1);else for(;o<r;)a.push(new Date((+o))),t(o,1);return a}function a(n,t,e){try{qc=uu;var r=new uu;return r._=n,o(r,t,e)}finally{qc=Date}}n.floor=n,n.round=r,n.ceil=i,n.offset=u,n.range=o;var c=n.utc=au(n);return c.floor=c,c.round=au(r),c.ceil=au(i),c.offset=au(u),c.range=a,n}function au(n){return function(t,e){try{qc=uu;var r=new uu;return r._=t,n(r,e)._}finally{qc=Date}}}function cu(n){function t(t){for(var r,i,u,o=[],a=-1,c=0;++a<e;)37===n.charCodeAt(a)&&(o.push(n.substring(c,a)),null!=(i=Gc[r=n.charAt(++a)])&&(r=n.charAt(++a)),(u=Kc[r])&&(r=u(t,null==i?"e"===r?" ":"0":i)),o.push(r),c=a+1);return o.push(n.substring(c,a)),o.join("")}var e=n.length;return t.parse=function(t){var e={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},r=lu(e,n,t,0);if(r!=t.length)return null;"p"in e&&(e.H=e.H%12+12*e.p);var i=null!=e.Z&&qc!==uu,u=new(i?uu:qc);return"j"in e?u.setFullYear(e.y,0,e.j):"w"in e&&("W"in e||"U"in e)?(u.setFullYear(e.y,0,1),u.setFullYear(e.y,0,"W"in e?(e.w+6)%7+7*e.W-(u.getDay()+5)%7:e.w+7*e.U-(u.getDay()+6)%7)):u.setFullYear(e.y,e.m,e.d),u.setHours(e.H+Math.floor(e.Z/100),e.M+e.Z%100,e.S,e.L),i?u._:u},t.toString=function(){return n},t}function lu(n,t,e,r){for(var i,u,o,a=0,c=t.length,l=e.length;a<c;){if(r>=l)return-1;if(i=t.charCodeAt(a++),37===i){if(o=t.charAt(a++),u=Qc[o in Gc?t.charAt(a++):o],!u||(r=u(n,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}function fu(n){return new RegExp("^(?:"+n.map(Zu.requote).join("|")+")","i")}function su(n){for(var t=new i,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function hu(n,t,e){var r=n<0?"-":"",i=(r?-n:n)+"",u=i.length;return r+(u<e?new Array(e-u+1).join(t)+i:i)}function pu(n,t,e){Zc.lastIndex=0;var r=Zc.exec(t.substring(e));return r?(n.w=Vc.get(r[0].toLowerCase()),e+r[0].length):-1}function gu(n,t,e){Yc.lastIndex=0;var r=Yc.exec(t.substring(e));return r?(n.w=Ic.get(r[0].toLowerCase()),e+r[0].length):-1}function vu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function du(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e));return r?(n.U=+r[0],e+r[0].length):-1}function yu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e));return r?(n.W=+r[0],e+r[0].length):-1}function mu(n,t,e){Bc.lastIndex=0;var r=Bc.exec(t.substring(e));return r?(n.m=Wc.get(r[0].toLowerCase()),e+r[0].length):-1}function xu(n,t,e){Xc.lastIndex=0;var r=Xc.exec(t.substring(e));return r?(n.m=$c.get(r[0].toLowerCase()),e+r[0].length):-1}function Mu(n,t,e){return lu(n,Kc.c.toString(),t,e)}function _u(n,t,e){return lu(n,Kc.x.toString(),t,e)}function bu(n,t,e){return lu(n,Kc.X.toString(),t,e)}function wu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Su(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.y=Nu(+r[0]),e+r[0].length):-1}function ku(n,t,e){return/^[+-]\d{4}$/.test(t=t.substring(e,e+5))?(n.Z=+t,e+5):-1}function Nu(n){return n+(n>68?1900:2e3)}function Eu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Au(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function Cu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function Lu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function Tu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function qu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function zu(n,t,e){nl.lastIndex=0;var r=nl.exec(t.substring(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function Ru(n,t,e){var r=tl.get(t.substring(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}function Du(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=~~(io(t)/60),i=io(t)%60;return e+hu(r,"0",2)+hu(i,"0",2)}function Pu(n,t,e){Jc.lastIndex=0;var r=Jc.exec(t.substring(e,e+1));return r?e+r[0].length:-1}function Uu(n){function t(n){try{qc=uu;var t=new qc;return t._=n,e(t)}finally{qc=Date}}var e=cu(n);return t.parse=function(n){try{qc=uu;var t=e.parse(n);return t&&t._}finally{qc=Date}},t.toString=e.toString,t}function ju(n){return n.toISOString()}function Hu(n,t,e){function r(t){return n(t)}function i(n,e){var r=n[1]-n[0],i=r/e,u=Zu.bisect(rl,i);return u==rl.length?[t.year,li(n.map(function(n){return n/31536e6}),e)[2]]:u?t[i/rl[u-1]<rl[u]/i?u-1:u]:[al,li(n,e)[2]]}return r.invert=function(t){return Fu(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Fu)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Fu(+e+1),t).length}var u=r.domain(),o=ni(u),a=null==n?i(o,10):"number"==typeof n&&i(o,n);return a&&(n=a[0],t=a[1]),r.domain(ri(u,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Fu(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Fu(+t+1);return t}}:n))},r.ticks=function(n,t){var e=ni(r.domain()),u=null==n?i(e,10):"number"==typeof n?i(e,n):!n.range&&[{range:n},t];return u&&(n=u[0],t=u[1]),n.range(e[0],Fu(+e[1]+1),t<1?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Hu(n.copy(),t,e)},ai(r,n)}function Fu(n){return new Date(n)}function Ou(n){return function(t){for(var e=n.length-1,r=n[e];!r[1](t);)r=n[--e];return r[0](t)}}function Yu(n){return JSON.parse(n.responseText)}function Iu(n){var t=$u.createRange();return t.selectNode($u.body),t.createContextualFragment(n.responseText)}var Zu={version:"3.3.8"};Date.now||(Date.now=function(){return+new Date});var Vu=[].slice,Xu=function(n){return Vu.call(n)},$u=document,Bu=$u.documentElement,Wu=window;try{Xu(Bu.childNodes)[0].nodeType}catch(Ju){Xu=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}try{$u.createElement("div").style.setProperty("opacity",0,"")}catch(Gu){var Ku=Wu.Element.prototype,Qu=Ku.setAttribute,no=Ku.setAttributeNS,to=Wu.CSSStyleDeclaration.prototype,eo=to.setProperty;Ku.setAttribute=function(n,t){Qu.call(this,n,t+"")},Ku.setAttributeNS=function(n,t,e){no.call(this,n,t,e+"")},to.setProperty=function(n,t,e){eo.call(this,n,t+"",e)}}Zu.ascending=function(n,t){return n<t?-1:n>t?1:n>=t?0:NaN},Zu.descending=function(n,t){return t<n?-1:t>n?1:t>=n?0:NaN},Zu.min=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u&&!(null!=(e=n[i])&&e<=e);)e=void 0;for(;++i<u;)null!=(r=n[i])&&e>r&&(e=r)}else{for(;++i<u&&!(null!=(e=t.call(n,n[i],i))&&e<=e);)e=void 0;for(;++i<u;)null!=(r=t.call(n,n[i],i))&&e>r&&(e=r)}return e},Zu.max=function(n,t){var e,r,i=-1,u=n.length;if(1===arguments.length){for(;++i<u&&!(null!=(e=n[i])&&e<=e);)e=void 0;for(;++i<u;)null!=(r=n[i])&&r>e&&(e=r)}else{for(;++i<u&&!(null!=(e=t.call(n,n[i],i))&&e<=e);)e=void 0;for(;++i<u;)null!=(r=t.call(n,n[i],i))&&r>e&&(e=r)}return e},Zu.extent=function(n,t){var e,r,i,u=-1,o=n.length;if(1===arguments.length){for(;++u<o&&!(null!=(e=i=n[u])&&e<=e);)e=i=void 0;for(;++u<o;)null!=(r=n[u])&&(e>r&&(e=r),i<r&&(i=r))}else{for(;++u<o&&!(null!=(e=i=t.call(n,n[u],u))&&e<=e);)e=void 0;for(;++u<o;)null!=(r=t.call(n,n[u],u))&&(e>r&&(e=r),i<r&&(i=r))}return[e,i]},Zu.sum=function(n,t){var e,r=0,i=n.length,u=-1;if(1===arguments.length)for(;++u<i;)isNaN(e=+n[u])||(r+=e);else for(;++u<i;)isNaN(e=+t.call(n,n[u],u))||(r+=e);return r},Zu.mean=function(t,e){var r,i=t.length,u=0,o=-1,a=0;if(1===arguments.length)for(;++o<i;)n(r=t[o])&&(u+=(r-u)/++a);else for(;++o<i;)n(r=e.call(t,t[o],o))&&(u+=(r-u)/++a);return a?u:void 0},Zu.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),i=+n[r-1],u=e-r;return u?i+u*(n[r]-i):i},Zu.median=function(t,e){return arguments.length>1&&(t=t.map(e)),t=t.filter(n),t.length?Zu.quantile(t.sort(Zu.ascending),.5):void 0},Zu.bisector=function(n){return{left:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){
var u=r+i>>>1;n.call(t,t[u],u)<e?r=u+1:i=u}return r},right:function(t,e,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var u=r+i>>>1;e<n.call(t,t[u],u)?i=u:r=u+1}return r}}};var ro=Zu.bisector(function(n){return n});Zu.bisectLeft=ro.left,Zu.bisect=Zu.bisectRight=ro.right,Zu.shuffle=function(n){for(var t,e,r=n.length;r;)e=Math.random()*r--|0,t=n[r],n[r]=n[e],n[e]=t;return n},Zu.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},Zu.pairs=function(n){for(var t,e=0,r=n.length-1,i=n[0],u=new Array(r<0?0:r);e<r;)u[e]=[t=i,i=n[++e]];return u},Zu.zip=function(){if(!(i=arguments.length))return[];for(var n=-1,e=Zu.min(arguments,t),r=new Array(e);++n<e;)for(var i,u=-1,o=r[n]=new Array(i);++u<i;)o[u]=arguments[u][n];return r},Zu.transpose=function(n){return Zu.zip.apply(Zu,n)},Zu.keys=function(n){var t=[];for(var e in n)t.push(e);return t},Zu.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},Zu.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},Zu.merge=function(n){for(var t,e,r,i=n.length,u=-1,o=0;++u<i;)o+=n[u].length;for(e=new Array(o);--i>=0;)for(r=n[i],t=r.length;--t>=0;)e[--o]=r[t];return e};var io=Math.abs;Zu.range=function(n,t,r){if(arguments.length<3&&(r=1,arguments.length<2&&(t=n,n=0)),(t-n)/r===1/0)throw new Error("infinite range");var i,u=[],o=e(io(r)),a=-1;if(n*=o,t*=o,r*=o,r<0)for(;(i=n+r*++a)>t;)u.push(i/o);else for(;(i=n+r*++a)<t;)u.push(i/o);return u},Zu.map=function(n){var t=new i;if(n instanceof i)n.forEach(function(n,e){t.set(n,e)});else for(var e in n)t.set(e,n[e]);return t},r(i,{has:function(n){return uo+n in this},get:function(n){return this[uo+n]},set:function(n,t){return this[uo+n]=t},remove:function(n){return n=uo+n,n in this&&delete this[n]},keys:function(){var n=[];return this.forEach(function(t){n.push(t)}),n},values:function(){var n=[];return this.forEach(function(t,e){n.push(e)}),n},entries:function(){var n=[];return this.forEach(function(t,e){n.push({key:t,value:e})}),n},forEach:function(n){for(var t in this)t.charCodeAt(0)===oo&&n.call(this,t.substring(1),this[t])}});var uo="\0",oo=uo.charCodeAt(0);Zu.nest=function(){function n(t,a,c){if(c>=o.length)return r?r.call(u,a):e?a.sort(e):a;for(var l,f,s,h,p=-1,g=a.length,v=o[c++],d=new i;++p<g;)(h=d.get(l=v(f=a[p])))?h.push(f):d.set(l,[f]);return t?(f=t(),s=function(e,r){f.set(e,n(t,r,c))}):(f={},s=function(e,r){f[e]=n(t,r,c)}),d.forEach(s),f}function t(n,e){if(e>=o.length)return n;var r=[],i=a[e++];return n.forEach(function(n,i){r.push({key:n,values:t(i,e)})}),i?r.sort(function(n,t){return i(n.key,t.key)}):r}var e,r,u={},o=[],a=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(Zu.map,e,0),0)},u.key=function(n){return o.push(n),u},u.sortKeys=function(n){return a[o.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},Zu.set=function(n){var t=new u;if(n)for(var e=0,r=n.length;e<r;++e)t.add(n[e]);return t},r(u,{has:function(n){return uo+n in this},add:function(n){return this[uo+n]=!0,n},remove:function(n){return n=uo+n,n in this&&delete this[n]},values:function(){var n=[];return this.forEach(function(t){n.push(t)}),n},forEach:function(n){for(var t in this)t.charCodeAt(0)===oo&&n.call(this,t.substring(1))}}),Zu.behavior={},Zu.rebind=function(n,t){for(var e,r=1,i=arguments.length;++r<i;)n[e=arguments[r]]=o(n,t,t[e]);return n};var ao=["webkit","ms","moz","Moz","o","O"];Zu.dispatch=function(){for(var n=new l,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=f(n);return n},l.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.substring(e+1),n=n.substring(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},Zu.event=null,Zu.requote=function(n){return n.replace(co,"\\$&")};var co=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,lo={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},fo=function(n,t){return t.querySelector(n)},so=function(n,t){return t.querySelectorAll(n)},ho=Bu[a(Bu,"matchesSelector")],po=function(n,t){return ho.call(n,t)};"function"==typeof Sizzle&&(fo=function(n,t){return Sizzle(n,t)[0]||null},so=function(n,t){return Sizzle.uniqueSort(Sizzle(n,t))},po=Sizzle.matchesSelector),Zu.selection=function(){return mo};var go=Zu.selection.prototype=[];go.select=function(n){var t,e,r,i,u=[];n=v(n);for(var o=-1,a=this.length;++o<a;){u.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(i=r[c])?(t.push(e=n.call(i,i.__data__,c,o)),e&&"__data__"in i&&(e.__data__=i.__data__)):t.push(null)}return g(u)},go.selectAll=function(n){var t,e,r=[];n=d(n);for(var i=-1,u=this.length;++i<u;)for(var o=this[i],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=Xu(n.call(e,e.__data__,a,i))),t.parentNode=e);return g(r)};var vo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};Zu.ns={prefix:vo,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.substring(0,t),n=n.substring(t+1)),vo.hasOwnProperty(e)?{space:vo[e],local:n}:n}},go.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=Zu.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(y(t,n[t]));return this}return this.each(y(n,t))},go.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=n.trim().split(/^|\s+/g)).length,i=-1;if(t=e.classList){for(;++i<r;)if(!t.contains(n[i]))return!1}else for(t=e.getAttribute("class");++i<r;)if(!x(n[i]).test(t))return!1;return!0}for(t in n)this.each(M(t,n[t]));return this}return this.each(M(n,t))},go.style=function(n,t,e){var r=arguments.length;if(r<3){if("string"!=typeof n){r<2&&(t="");for(e in n)this.each(b(e,n[e],t));return this}if(r<2)return Wu.getComputedStyle(this.node(),null).getPropertyValue(n);e=""}return this.each(b(n,t,e))},go.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(w(t,n[t]));return this}return this.each(w(n,t))},go.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},go.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},go.append=function(n){return n=S(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},go.insert=function(n,t){return n=S(n),t=v(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},go.remove=function(){return this.each(function(){var n=this.parentNode;n&&n.removeChild(this)})},go.data=function(n,t){function e(n,e){var r,u,o,a=n.length,s=e.length,h=Math.min(a,s),p=new Array(s),g=new Array(s),v=new Array(a);if(t){var d,y=new i,m=new i,x=[];for(r=-1;++r<a;)d=t.call(u=n[r],u.__data__,r),y.has(d)?v[r]=u:y.set(d,u),x.push(d);for(r=-1;++r<s;)d=t.call(e,o=e[r],r),(u=y.get(d))?(p[r]=u,u.__data__=o):m.has(d)||(g[r]=k(o)),m.set(d,o),y.remove(d);for(r=-1;++r<a;)y.has(x[r])&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],o=e[r],u?(u.__data__=o,p[r]=u):g[r]=k(o);for(;r<s;++r)g[r]=k(e[r]);for(;r<a;++r)v[r]=n[r]}g.update=p,g.parentNode=p.parentNode=v.parentNode=n.parentNode,c.push(g),l.push(p),f.push(v)}var r,u,o=-1,a=this.length;if(!arguments.length){for(n=new Array(a=(r=this[0]).length);++o<a;)(u=r[o])&&(n[o]=u.__data__);return n}var c=C([]),l=g([]),f=g([]);if("function"==typeof n)for(;++o<a;)e(r=this[o],n.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],n);return l.enter=function(){return c},l.exit=function(){return f},l},go.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},go.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=N(n));for(var u=0,o=this.length;u<o;u++){i.push(t=[]),t.parentNode=(e=this[u]).parentNode;for(var a=0,c=e.length;a<c;a++)(r=e[a])&&n.call(r,r.__data__,a)&&t.push(r)}return g(i)},go.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],i=r.length-1,u=r[i];--i>=0;)(e=r[i])&&(u&&u!==e.nextSibling&&u.parentNode.insertBefore(e,u),u=e);return this},go.sort=function(n){n=E.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},go.each=function(n){return A(this,function(t,e,r){n.call(t,t.__data__,e,r)})},go.call=function(n){var t=Xu(arguments);return n.apply(t[0]=this,t),this},go.empty=function(){return!this.node()},go.node=function(){for(var n=0,t=this.length;n<t;n++)for(var e=this[n],r=0,i=e.length;r<i;r++){var u=e[r];if(u)return u}return null},go.size=function(){var n=0;return this.each(function(){++n}),n};var yo=[];Zu.selection.enter=C,Zu.selection.enter.prototype=yo,yo.append=go.append,yo.empty=go.empty,yo.node=go.node,yo.call=go.call,yo.size=go.size,yo.select=function(n){for(var t,e,r,i,u,o=[],a=-1,c=this.length;++a<c;){r=(i=this[a]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var l=-1,f=i.length;++l<f;)(u=i[l])?(t.push(r[l]=e=n.call(i.parentNode,u.__data__,l,a)),e.__data__=u.__data__):t.push(null)}return g(o)},yo.insert=function(n,t){return arguments.length<2&&(t=L(this)),go.insert.call(this,n,t)},go.transition=function(){for(var n,t,e=_c||++Nc,r=[],i=bc||{time:Date.now(),ease:He,delay:0,duration:250},u=-1,o=this.length;++u<o;){r.push(n=[]);for(var a=this[u],c=-1,l=a.length;++c<l;)(t=a[c])&&eu(t,c,e,i),n.push(t)}return Qi(r,e)},go.interrupt=function(){return this.each(T)},Zu.select=function(n){var t=["string"==typeof n?fo(n,$u):n];return t.parentNode=Bu,g([t])},Zu.selectAll=function(n){var t=Xu("string"==typeof n?so(n,$u):n);return t.parentNode=Bu,g([t])};var mo=Zu.select(Bu);go.on=function(n,t,e){var r=arguments.length;if(r<3){if("string"!=typeof n){r<2&&(t=!1);for(e in n)this.each(q(e,n[e],t));return this}if(r<2)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(q(n,t,e))};var xo=Zu.map({mouseenter:"mouseover",mouseleave:"mouseout"});xo.forEach(function(n){"on"+n in $u&&xo.remove(n)});var Mo=a(Bu.style,"userSelect"),_o=0;Zu.mouse=function(n){return P(n,h())};var bo=/WebKit/.test(Wu.navigator.userAgent)?-1:0;Zu.touches=function(n,t){return arguments.length<2&&(t=h().touches),t?Xu(t).map(function(t){var e=P(n,t);return e.identifier=t.identifier,e}):[]},Zu.behavior.drag=function(){function n(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function t(){return Zu.event.changedTouches[0].identifier}function e(n,t){return Zu.touches(n).filter(function(n){return n.identifier===t})[0]}function r(n,t,e,r){return function(){function o(){var n=t(f,p),e=n[0]-v[0],r=n[1]-v[1];d|=e|r,v=n,s({type:"drag",x:n[0]+c[0],y:n[1]+c[1],dx:e,dy:r})}function a(){y.on(e+"."+g,null).on(r+"."+g,null),m(d&&Zu.event.target===h),s({type:"dragend"})}var c,l=this,f=l.parentNode,s=i.of(l,arguments),h=Zu.event.target,p=n(),g=null==p?"drag":"drag-"+p,v=t(f,p),d=0,y=Zu.select(Wu).on(e+"."+g,o).on(r+"."+g,a),m=D();u?(c=u.apply(l,arguments),c=[c.x-v[0],c.y-v[1]]):c=[0,0],s({type:"dragstart"})}}var i=p(n,"drag","dragstart","dragend"),u=null,o=r(c,Zu.mouse,"mousemove","mouseup"),a=r(t,e,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},Zu.rebind(n,i,"on")};var wo=Math.PI,So=2*wo,ko=wo/2,No=1e-6,Eo=No*No,Ao=wo/180,Co=180/wo,Lo=Math.SQRT2,To=2,qo=4;Zu.interpolateZoom=function(n,t){function e(n){var t=n*m;if(y){var e=O(v),o=u/(To*h)*(e*Y(Lo*t+v)-F(v));return[r+o*l,i+o*f,u*e/O(Lo*t+v)]}return[r+n*l,i+n*f,u*Math.exp(Lo*t)]}var r=n[0],i=n[1],u=n[2],o=t[0],a=t[1],c=t[2],l=o-r,f=a-i,s=l*l+f*f,h=Math.sqrt(s),p=(c*c-u*u+qo*s)/(2*u*To*h),g=(c*c-u*u-qo*s)/(2*c*To*h),v=Math.log(Math.sqrt(p*p+1)-p),d=Math.log(Math.sqrt(g*g+1)-g),y=d-v,m=(y||Math.log(c/u))/Lo;return e.duration=1e3*m,e},Zu.behavior.zoom=function(){function n(n){n.on(E,l).on(Do+".zoom",h).on(A,g).on("dblclick.zoom",v).on(L,f)}function t(n){return[(n[0]-S.x)/S.k,(n[1]-S.y)/S.k]}function e(n){return[n[0]*S.k+S.x,n[1]*S.k+S.y]}function r(n){S.k=Math.max(N[0],Math.min(N[1],n))}function i(n,t){t=e(t),S.x+=n[0]-t[0],S.y+=n[1]-t[1]}function u(){_&&_.domain(M.range().map(function(n){return(n-S.x)/S.k}).map(M.invert)),w&&w.domain(b.range().map(function(n){return(n-S.y)/S.k}).map(b.invert))}function o(n){n({type:"zoomstart"})}function a(n){u(),n({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(n){n({type:"zoomend"})}function l(){function n(){f=1,i(Zu.mouse(r),h),a(u)}function e(){s.on(A,Wu===r?g:null).on(C,null),p(f&&Zu.event.target===l),c(u)}var r=this,u=q.of(r,arguments),l=Zu.event.target,f=0,s=Zu.select(Wu).on(A,n).on(C,e),h=t(Zu.mouse(r)),p=D();T.call(r),o(u)}function f(){function n(){var n=Zu.touches(g);return p=S.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=t(n))}),n}function e(){for(var t=Zu.event.changedTouches,e=0,u=t.length;e<u;++e)d[t[e].identifier]=null;var o=n(),c=Date.now();if(1===o.length){if(c-x<500){var l=o[0],f=d[l.identifier];r(2*S.k),i(l,f),s(),a(v)}x=c}else if(o.length>1){var l=o[0],h=o[1],p=l[0]-h[0],g=l[1]-h[1];y=p*p+g*g}}function u(){for(var n,t,e,u,o=Zu.touches(g),c=0,l=o.length;c<l;++c,u=null)if(e=o[c],u=d[e.identifier]){if(t)break;n=e,t=u}if(u){var f=(f=e[0]-n[0])*f+(f=e[1]-n[1])*f,s=y&&Math.sqrt(f/y);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+u[0])/2,(t[1]+u[1])/2],r(s*p)}x=null,i(n,t),a(v)}function h(){if(Zu.event.touches.length){for(var t=Zu.event.changedTouches,e=0,r=t.length;e<r;++e)delete d[t[e].identifier];for(var i in d)return void n()}b.on(M,null).on(_,null),w.on(E,l).on(L,f),k(),c(v)}var p,g=this,v=q.of(g,arguments),d={},y=0,m=Zu.event.changedTouches[0].identifier,M="touchmove.zoom-"+m,_="touchend.zoom-"+m,b=Zu.select(Wu).on(M,u).on(_,h),w=Zu.select(g).on(E,null).on(L,e),k=D();T.call(g),e(),o(v)}function h(){var n=q.of(this,arguments);m?clearTimeout(m):(T.call(this),o(n)),m=setTimeout(function(){m=null,c(n)},50),s();var e=y||Zu.mouse(this);d||(d=t(e)),r(Math.pow(2,.002*zo())*S.k),i(e,d),a(n)}function g(){d=null}function v(){var n=q.of(this,arguments),e=Zu.mouse(this),u=t(e),l=Math.log(S.k)/Math.LN2;o(n),r(Math.pow(2,Zu.event.shiftKey?Math.ceil(l)-1:Math.floor(l)+1)),i(e,u),a(n),c(n)}var d,y,m,x,M,_,b,w,S={x:0,y:0,k:1},k=[960,500],N=Ro,E="mousedown.zoom",A="mousemove.zoom",C="mouseup.zoom",L="touchstart.zoom",q=p(n,"zoomstart","zoom","zoomend");return n.event=function(n){n.each(function(){var n=q.of(this,arguments),t=S;_c?Zu.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},o(n)}).tween("zoom:zoom",function(){var e=k[0],r=k[1],i=e/2,u=r/2,o=Zu.interpolateZoom([(i-S.x)/S.k,(u-S.y)/S.k,e/S.k],[(i-t.x)/t.k,(u-t.y)/t.k,e/t.k]);return function(t){var r=o(t),c=e/r[2];this.__chart__=S={x:i-r[0]*c,y:u-r[1]*c,k:c},a(n)}}).each("end.zoom",function(){c(n)}):(this.__chart__=S,o(n),a(n),c(n))})},n.translate=function(t){return arguments.length?(S={x:+t[0],y:+t[1],k:S.k},u(),n):[S.x,S.y]},n.scale=function(t){return arguments.length?(S={x:S.x,y:S.y,k:+t},u(),n):S.k},n.scaleExtent=function(t){return arguments.length?(N=null==t?Ro:[+t[0],+t[1]],n):N},n.center=function(t){return arguments.length?(y=t&&[+t[0],+t[1]],n):y},n.size=function(t){return arguments.length?(k=t&&[+t[0],+t[1]],n):k},n.x=function(t){return arguments.length?(_=t,M=t.copy(),S={x:0,y:0,k:1},n):_},n.y=function(t){return arguments.length?(w=t,b=t.copy(),S={x:0,y:0,k:1},n):w},Zu.rebind(n,q,"on")};var zo,Ro=[0,1/0],Do="onwheel"in $u?(zo=function(){return-Zu.event.deltaY*(Zu.event.deltaMode?120:1)},"wheel"):"onmousewheel"in $u?(zo=function(){return Zu.event.wheelDelta},"mousewheel"):(zo=function(){return-Zu.event.detail},"MozMousePixelScroll");Z.prototype.toString=function(){return this.rgb()+""},Zu.hsl=function(n,t,e){return 1===arguments.length?n instanceof X?V(n.h,n.s,n.l):fn(""+n,sn,V):V(+n,+t,+e)};var Po=X.prototype=new Z;Po.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),V(this.h,this.s,this.l/n)},Po.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),V(this.h,this.s,n*this.l)},Po.rgb=function(){return $(this.h,this.s,this.l)},Zu.hcl=function(n,t,e){return 1===arguments.length?n instanceof W?B(n.h,n.c,n.l):n instanceof K?nn(n.l,n.a,n.b):nn((n=hn((n=Zu.rgb(n)).r,n.g,n.b)).l,n.a,n.b):B(+n,+t,+e)};var Uo=W.prototype=new Z;Uo.brighter=function(n){return B(this.h,this.c,Math.min(100,this.l+jo*(arguments.length?n:1)))},Uo.darker=function(n){return B(this.h,this.c,Math.max(0,this.l-jo*(arguments.length?n:1)))},Uo.rgb=function(){return J(this.h,this.c,this.l).rgb()},Zu.lab=function(n,t,e){return 1===arguments.length?n instanceof K?G(n.l,n.a,n.b):n instanceof W?J(n.l,n.c,n.h):hn((n=Zu.rgb(n)).r,n.g,n.b):G(+n,+t,+e)};var jo=18,Ho=.95047,Fo=1,Oo=1.08883,Yo=K.prototype=new Z;Yo.brighter=function(n){return G(Math.min(100,this.l+jo*(arguments.length?n:1)),this.a,this.b)},Yo.darker=function(n){return G(Math.max(0,this.l-jo*(arguments.length?n:1)),this.a,this.b)},Yo.rgb=function(){return Q(this.l,this.a,this.b)},Zu.rgb=function(n,t,e){return 1===arguments.length?n instanceof cn?an(n.r,n.g,n.b):fn(""+n,an,$):an(~~n,~~t,~~e)};var Io=cn.prototype=new Z;Io.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,i=30;return t||e||r?(t&&t<i&&(t=i),e&&e<i&&(e=i),r&&r<i&&(r=i),an(Math.min(255,~~(t/n)),Math.min(255,~~(e/n)),Math.min(255,~~(r/n)))):an(i,i,i)},Io.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),an(~~(n*this.r),~~(n*this.g),~~(n*this.b))},Io.hsl=function(){return sn(this.r,this.g,this.b)},Io.toString=function(){return"#"+ln(this.r)+ln(this.g)+ln(this.b)};var Zo=Zu.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Zo.forEach(function(n,t){Zo.set(n,un(t))}),Zu.functor=vn,Zu.xhr=yn(dn),Zu.dsv=function(n,t){function e(n,e,u){arguments.length<3&&(u=e,e=null);var o=Zu.xhr(n,t,u);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:i(n)):e},o.row(e)}function r(n){return e.parse(n.responseText)}function i(n){return function(t){return e.parse(t.responseText,n)}}function o(t){return t.map(a).join(n)}function a(n){return c.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var c=new RegExp('["'+n+"\n]"),l=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var i=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(i(n),e)}:i})},e.parseRows=function(n,t){function e(){if(f>=c)return o;if(i)return i=!1,u;var t=f;if(34===n.charCodeAt(t)){for(var e=t;e++<c;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}f=e+2;var r=n.charCodeAt(e+1);return 13===r?(i=!0,10===n.charCodeAt(e+2)&&++f):10===r&&(i=!0),n.substring(t+1,e).replace(/""/g,'"')}for(;f<c;){var r=n.charCodeAt(f++),a=1;if(10===r)i=!0;else if(13===r)i=!0,10===n.charCodeAt(f)&&(++f,++a);else if(r!==l)continue;return n.substring(t,f-a)}return n.substring(t)}for(var r,i,u={},o={},a=[],c=n.length,f=0,s=0;(r=e())!==o;){for(var h=[];r!==u&&r!==o;)h.push(r),r=e();t&&!(h=t(h,s++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new u,i=[];return t.forEach(function(n){for(var t in n)r.has(t)||i.push(r.add(t))}),[i.map(a).join(n)].concat(t.map(function(t){return i.map(function(n){return a(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(o).join("\n")},e},Zu.csv=Zu.dsv(",","text/csv"),Zu.tsv=Zu.dsv(" ","text/tab-separated-values");var Vo,Xo,$o,Bo,Wo,Jo=Wu[a(Wu,"requestAnimationFrame")]||function(n){setTimeout(n,17)};Zu.timer=function(n,t,e){var r=arguments.length;r<2&&(t=0),r<3&&(e=Date.now());var i=e+t,u={c:n,t:i,f:!1,n:null};Xo?Xo.n=u:Vo=u,Xo=u,$o||(Bo=clearTimeout(Bo),$o=1,Jo(Mn))},Zu.timer.flush=function(){_n(),bn()};var Go=".",Ko=",",Qo=[3,3],na="$",ta=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(wn);Zu.formatPrefix=function(n,t){var e=0;return n&&(n<0&&(n*=-1),t&&(n=Zu.round(n,Sn(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e<=0?e+1:e-1)/3)))),ta[8+e/3]},Zu.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)},Zu.format=function(n){var t=ea.exec(n),e=t[1]||" ",r=t[2]||">",i=t[3]||"",u=t[4]||"",o=t[5],a=+t[6],c=t[7],l=t[8],f=t[9],s=1,h="",p=!1;switch(l&&(l=+l.substring(1)),(o||"0"===e&&"="===r)&&(o=e="0",r="=",c&&(a-=Math.floor((a-1)/4))),f){case"n":c=!0,f="g";break;case"%":s=100,h="%",f="f";break;case"p":s=100,h="%",f="r";break;case"b":case"o":case"x":case"X":"#"===u&&(u="0"+f.toLowerCase());case"c":case"d":p=!0,l=0;break;case"s":s=-1,f="r"}"#"===u?u="":"$"===u&&(u=na),"r"!=f||l||(f="g"),null!=l&&("g"==f?l=Math.max(1,Math.min(21,l)):"e"!=f&&"f"!=f||(l=Math.max(0,Math.min(20,l)))),f=ra.get(f)||kn;var g=o&&c;return function(n){if(p&&n%1)return"";var t=n<0||0===n&&1/n<0?(n=-n,"-"):i;if(s<0){var v=Zu.formatPrefix(n,l);n=v.scale(n),h=v.symbol}else n*=s;n=f(n,l);var d=n.lastIndexOf("."),y=d<0?n:n.substring(0,d),m=d<0?"":Go+n.substring(d+1);!o&&c&&(y=ia(y));var x=u.length+y.length+m.length+(g?0:t.length),M=x<a?new Array(x=a-x+1).join(e):"";return g&&(y=ia(M+y)),t+=u,n=y+m,("<"===r?t+n+M:">"===r?M+t+n:"^"===r?M.substring(0,x>>=1)+t+n+M.substring(x):t+(g?n:M+n))+h}};var ea=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ra=Zu.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=Zu.round(n,Sn(n,t))).toFixed(Math.max(0,Math.min(20,Sn(n*(1+1e-15),t))))}}),ia=dn;if(Qo){var ua=Qo.length;ia=function(n){for(var t=n.length,e=[],r=0,i=Qo[0];t>0&&i>0;)e.push(n.substring(t-=i,t+i)),i=Qo[r=(r+1)%ua];return e.reverse().join(Ko)}}Zu.geo={},Nn.prototype={s:0,t:0,add:function(n){En(n,this.t,oa),En(oa.s,this.s,this),this.s?this.t+=oa.t:this.s=oa.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var oa=new Nn;Zu.geo.stream=function(n,t){n&&aa.hasOwnProperty(n.type)?aa[n.type](n,t):An(n,t)};var aa={Feature:function(n,t){An(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,i=e.length;++r<i;)An(e[r].geometry,t)}},ca={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){Cn(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Cn(e[r],t,0)},Polygon:function(n,t){Ln(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,i=e.length;++r<i;)Ln(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,i=e.length;++r<i;)An(e[r],t)}};Zu.geo.area=function(n){return la=0,Zu.geo.stream(n,sa),la};var la,fa=new Nn,sa={sphere:function(){la+=4*wo},point:c,lineStart:c,lineEnd:c,polygonStart:function(){fa.reset(),sa.lineStart=Tn},polygonEnd:function(){var n=2*fa;la+=n<0?4*wo+n:n,sa.lineStart=sa.lineEnd=sa.point=c}};Zu.geo.bounds=function(){function n(n,t){x.push(M=[f=n,h=n]),t<s&&(s=t),t>p&&(p=t)}function t(t,e){var r=qn([t*Ao,e*Ao]);if(y){var i=Rn(y,r),u=[i[1],-i[0],0],o=Rn(u,i);Un(o),o=jn(o);var c=t-g,l=c>0?1:-1,v=o[0]*Co*l,d=io(c)>180;if(d^(l*g<v&&v<l*t)){var m=o[1]*Co;m>p&&(p=m)}else if(v=(v+360)%360-180,d^(l*g<v&&v<l*t)){var m=-o[1]*Co;m<s&&(s=m)}else e<s&&(s=e),e>p&&(p=e);d?t<g?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t):h>=f?(t<f&&(f=t),t>h&&(h=t)):t>g?a(f,t)>a(f,h)&&(h=t):a(t,h)>a(f,h)&&(f=t)}else n(t,e);y=r,g=t}function e(){_.point=t}function r(){M[0]=f,M[1]=h,_.point=n,y=null}function i(n,e){if(y){var r=n-g;m+=io(r)>180?r+(r>0?360:-360):r}else v=n,d=e;sa.point(n,e),t(n,e)}function u(){sa.lineStart()}function o(){i(v,d),sa.lineEnd(),io(m)>No&&(f=-(h=180)),M[0]=f,M[1]=h,y=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var f,s,h,p,g,v,d,y,m,x,M,_={point:n,lineStart:e,lineEnd:r,polygonStart:function(){_.point=i,_.lineStart=u,_.lineEnd=o,m=0,sa.polygonStart()},polygonEnd:function(){sa.polygonEnd(),_.point=n,_.lineStart=e,_.lineEnd=r,fa<0?(f=-(h=180),s=-(p=90)):m>No?p=90:m<-No&&(s=-90),M[0]=f,M[1]=h}};return function(n){p=h=-(f=s=1/0),x=[],Zu.geo.stream(n,_);var t=x.length;if(t){x.sort(c);for(var e,r=1,i=x[0],u=[i];r<t;++r)e=x[r],l(e[0],i)||l(e[1],i)?(a(i[0],e[1])>a(i[0],i[1])&&(i[1]=e[1]),a(e[0],i[1])>a(i[0],i[1])&&(i[0]=e[0])):u.push(i=e);for(var o,e,g=-(1/0),t=u.length-1,r=0,i=u[t];r<=t;i=e,++r)e=u[r],(o=a(i[1],e[0]))>g&&(g=o,f=e[0],h=i[1])}return x=M=null,f===1/0||s===1/0?[[NaN,NaN],[NaN,NaN]]:[[f,s],[h,p]]}}(),Zu.geo.centroid=function(n){ha=pa=ga=va=da=ya=ma=xa=Ma=_a=ba=0,Zu.geo.stream(n,wa);var t=Ma,e=_a,r=ba,i=t*t+e*e+r*r;return i<Eo&&(t=ya,e=ma,r=xa,pa<No&&(t=ga,e=va,r=da),i=t*t+e*e+r*r,i<Eo)?[NaN,NaN]:[Math.atan2(e,t)*Co,H(r/Math.sqrt(i))*Co]};var ha,pa,ga,va,da,ya,ma,xa,Ma,_a,ba,wa={sphere:c,point:Fn,lineStart:Yn,lineEnd:In,polygonStart:function(){wa.lineStart=Zn},polygonEnd:function(){wa.lineStart=Yn}},Sa=Wn(Vn,nt,et,[-wo,-wo/2]),ka=1e9;Zu.geo.clipExtent=function(){var n,t,e,r,i,u,o={stream:function(n){return i&&(i.valid=!1),i=u(n),i.valid=!0,i},extent:function(a){return arguments.length?(u=ut(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),i&&(i.valid=!1,i=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(Zu.geo.conicEqualArea=function(){return at(ct)}).raw=ct,Zu.geo.albers=function(){return Zu.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},Zu.geo.albersUsa=function(){function n(n){var u=n[0],o=n[1];return t=null,e(u,o),t||(r(u,o),t)||i(u,o),t}var t,e,r,i,u=Zu.geo.albers(),o=Zu.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=Zu.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=u.scale(),e=u.translate(),r=(n[0]-e[0])/t,i=(n[1]-e[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?a:u).invert(n)},n.stream=function(n){var t=u.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,i){t.point(n,i),e.point(n,i),r.point(n,i)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(u.precision(t),o.precision(t),a.precision(t),n):u.precision()},n.scale=function(t){return arguments.length?(u.scale(t),o.scale(.35*t),a.scale(t),n.translate(u.translate())):u.scale()},n.translate=function(t){if(!arguments.length)return u.translate();var l=u.scale(),f=+t[0],s=+t[1];return e=u.translate(t).clipExtent([[f-.455*l,s-.238*l],[f+.455*l,s+.238*l]]).stream(c).point,r=o.translate([f-.307*l,s+.201*l]).clipExtent([[f-.425*l+No,s+.12*l+No],[f-.214*l-No,s+.234*l-No]]).stream(c).point,i=a.translate([f-.205*l,s+.212*l]).clipExtent([[f-.214*l+No,s+.166*l+No],[f-.115*l-No,s+.234*l-No]]).stream(c).point,n},n.scale(1070)};var Na,Ea,Aa,Ca,La,Ta,qa={point:c,lineStart:c,lineEnd:c,polygonStart:function(){Ea=0,qa.lineStart=lt},polygonEnd:function(){qa.lineStart=qa.lineEnd=qa.point=c,Na+=io(Ea/2)}},za={point:ft,lineStart:c,lineEnd:c,polygonStart:c,polygonEnd:c},Ra={point:pt,lineStart:gt,lineEnd:vt,polygonStart:function(){Ra.lineStart=dt},polygonEnd:function(){Ra.point=pt,Ra.lineStart=gt,Ra.lineEnd=vt}};Zu.geo.transform=function(n){return{stream:function(t){var e=new xt(t);for(var r in n)e[r]=n[r];return e}}},xt.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},Zu.geo.path=function(){function n(n){return n&&("function"==typeof a&&u.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=i(u)),Zu.geo.stream(n,o)),u.result()}function t(){return o=null,n}var e,r,i,u,o,a=4.5;return n.area=function(n){return Na=0,Zu.geo.stream(n,i(qa)),Na},n.centroid=function(n){return ga=va=da=ya=ma=xa=Ma=_a=ba=0,Zu.geo.stream(n,i(Ra)),ba?[Ma/ba,_a/ba]:xa?[ya/xa,ma/xa]:da?[ga/da,va/da]:[NaN,NaN]},n.bounds=function(n){return La=Ta=-(Aa=Ca=1/0),Zu.geo.stream(n,i(za)),[[Aa,Ca],[La,Ta]]},n.projection=function(n){return arguments.length?(i=(e=n)?n.stream||Mt(n):dn,t()):e},n.context=function(n){return arguments.length?(u=null==(r=n)?new st:new yt(n),"function"!=typeof a&&u.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(u.pointRadius(+t),+t),n):a},n.projection(Zu.geo.albersUsa()).context(null)},Zu.geo.projection=_t,Zu.geo.projectionMutator=bt,(Zu.geo.equirectangular=function(){return _t(St)}).raw=St.invert=St,Zu.geo.rotation=function(n){
function t(t){return t=n(t[0]*Ao,t[1]*Ao),t[0]*=Co,t[1]*=Co,t}return n=Nt(n[0]%360*Ao,n[1]*Ao,n.length>2?n[2]*Ao:0),t.invert=function(t){return t=n.invert(t[0]*Ao,t[1]*Ao),t[0]*=Co,t[1]*=Co,t},t},kt.invert=St,Zu.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=Nt(-n[0]*Ao,-n[1]*Ao,0).invert,i=[];return e(null,null,1,{point:function(n,e){i.push(n=t(n,e)),n[0]*=Co,n[1]*=Co}}),{type:"Polygon",coordinates:[i]}}var t,e,r=[0,0],i=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=Lt((t=+r)*Ao,i*Ao),n):t},n.precision=function(r){return arguments.length?(e=Lt(t*Ao,(i=+r)*Ao),n):i},n.angle(90)},Zu.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Ao,i=n[1]*Ao,u=t[1]*Ao,o=Math.sin(r),a=Math.cos(r),c=Math.sin(i),l=Math.cos(i),f=Math.sin(u),s=Math.cos(u);return Math.atan2(Math.sqrt((e=s*o)*e+(e=l*f-c*s*a)*e),c*f+l*s*a)},Zu.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return Zu.range(Math.ceil(u/d)*d,i,d).map(h).concat(Zu.range(Math.ceil(l/y)*y,c,y).map(p)).concat(Zu.range(Math.ceil(r/g)*g,e,g).filter(function(n){return io(n%d)>No}).map(f)).concat(Zu.range(Math.ceil(a/v)*v,o,v).filter(function(n){return io(n%y)>No}).map(s))}var e,r,i,u,o,a,c,l,f,s,h,p,g=10,v=g,d=90,y=360,m=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(u).concat(p(c).slice(1),h(i).reverse().slice(1),p(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(u=+t[0][0],i=+t[1][0],l=+t[0][1],c=+t[1][1],u>i&&(t=u,u=i,i=t),l>c&&(t=l,l=c,c=t),n.precision(m)):[[u,l],[i,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(m)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],y=+t[1],n):[d,y]},n.minorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],n):[g,v]},n.precision=function(t){return arguments.length?(m=+t,f=qt(a,o,90),s=zt(r,e,m),h=qt(l,c,90),p=zt(u,i,m),n):m},n.majorExtent([[-180,-90+No],[180,90-No]]).minorExtent([[-180,-80-No],[180,80+No]])},Zu.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||i.apply(this,arguments)]}}var t,e,r=Rt,i=Dt;return n.distance=function(){return Zu.geo.distance(t||r.apply(this,arguments),e||i.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(i=t,e="function"==typeof t?null:t,n):i},n.precision=function(){return arguments.length?n:0},n},Zu.geo.interpolate=function(n,t){return Pt(n[0]*Ao,n[1]*Ao,t[0]*Ao,t[1]*Ao)},Zu.geo.length=function(n){return Da=0,Zu.geo.stream(n,Pa),Da};var Da,Pa={sphere:c,point:c,lineStart:Ut,lineEnd:c,polygonStart:c,polygonEnd:c},Ua=jt(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(Zu.geo.azimuthalEqualArea=function(){return _t(Ua)}).raw=Ua;var ja=jt(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},dn);(Zu.geo.azimuthalEquidistant=function(){return _t(ja)}).raw=ja,(Zu.geo.conicConformal=function(){return at(Ht)}).raw=Ht,(Zu.geo.conicEquidistant=function(){return at(Ft)}).raw=Ft;var Ha=jt(function(n){return 1/n},Math.atan);(Zu.geo.gnomonic=function(){return _t(Ha)}).raw=Ha,Ot.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-ko]},(Zu.geo.mercator=function(){return Yt(Ot)}).raw=Ot;var Fa=jt(function(){return 1},Math.asin);(Zu.geo.orthographic=function(){return _t(Fa)}).raw=Fa;var Oa=jt(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(Zu.geo.stereographic=function(){return _t(Oa)}).raw=Oa,It.invert=function(n,t){return[Math.atan2(F(n),Math.cos(t)),H(Math.sin(t)/O(n))]},(Zu.geo.transverseMercator=function(){return Yt(It)}).raw=It,Zu.geom={},Zu.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,i,u,o,a,c,l,f,s,h,p,g,v=vn(e),d=vn(r),y=n.length,m=y-1,x=[],M=[],_=0;if(v===Zt&&r===Vt)t=n;else for(u=0,t=[];u<y;++u)t.push([+v.call(this,i=n[u],u),+d.call(this,i,u)]);for(u=1;u<y;++u)(t[u][1]<t[_][1]||t[u][1]==t[_][1]&&t[u][0]<t[_][0])&&(_=u);for(u=0;u<y;++u)u!==_&&(c=t[u][1]-t[_][1],a=t[u][0]-t[_][0],x.push({angle:Math.atan2(c,a),index:u}));for(x.sort(function(n,t){return n.angle-t.angle}),p=x[0].angle,h=x[0].index,s=0,u=1;u<m;++u){if(o=x[u].index,p==x[u].angle){if(a=t[h][0]-t[_][0],c=t[h][1]-t[_][1],l=t[o][0]-t[_][0],f=t[o][1]-t[_][1],a*a+c*c>=l*l+f*f){x[u].index=-1;continue}x[s].index=-1}p=x[u].angle,s=u,h=o}for(M.push(_),u=0,o=0;u<2;++o)x[o].index>-1&&(M.push(x[o].index),u++);for(g=M.length;o<m;++o)if(!(x[o].index<0)){for(;!Xt(M[g-2],M[g-1],x[o].index,t);)--g;M[g++]=x[o].index}var b=[];for(u=g-1;u>=0;--u)b.push(n[M[u]]);return b}var e=Zt,r=Vt;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},Zu.geom.polygon=function(n){return lo(n,Ya),n};var Ya=Zu.geom.polygon.prototype=[];Ya.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],i=0;++t<e;)n=r,r=this[t],i+=n[1]*r[0]-n[0]*r[1];return.5*i},Ya.centroid=function(n){var t,e,r=-1,i=this.length,u=0,o=0,a=this[i-1];for(arguments.length||(n=-1/(6*this.area()));++r<i;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],u+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[u*n,o*n]},Ya.clip=function(n){for(var t,e,r,i,u,o,a=Wt(n),c=-1,l=this.length-Wt(this),f=this[l-1];++c<l;){for(t=n.slice(),n.length=0,i=this[c],u=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],$t(o,f,i)?($t(u,f,i)||n.push(Bt(u,o,f,i)),n.push(o)):$t(u,f,i)&&n.push(Bt(u,o,f,i)),u=o;a&&n.push(n[0]),f=i}return n};var Ia,Za,Va,Xa,$a,Ba=[],Wa=[];re.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(ue),t.length},ve.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},de.prototype={insert:function(n,t){var e,r,i;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=Me(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(i=r.R,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.R&&(me(this,e),n=e,e=n.U),e.C=!1,r.C=!0,xe(this,r))):(i=r.L,i&&i.C?(e.C=i.C=!1,r.C=!0,n=r):(n===e.L&&(xe(this,e),n=e,e=n.U),e.C=!1,r.C=!0,me(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,i=n.U,u=n.L,o=n.R;if(e=u?o?Me(o):u:o,i?i.L===n?i.L=e:i.R=e:this._=e,u&&o?(r=e.C,e.C=n.C,e.L=u,u.U=e,e!==o?(i=e.U,e.U=n.U,n=e.R,i.L=n,e.R=o,o.U=e):(e.U=i,i=e,n=e.R)):(r=n.C,n=e),n&&(n.U=i),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,me(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,xe(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,me(this,i),n=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,xe(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,me(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,xe(this,i),n=this._;break}t.C=!0,n=i,i=i.U}while(!n.C);n&&(n.C=!1)}}},Zu.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],i=a[0][1],u=a[1][0],o=a[1][1];return _e(e(n),a).cells.forEach(function(e,a){var c=e.edges,l=e.site,f=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=u&&l.y>=i&&l.y<=o?[[r,o],[u,o],[u,i],[r,i]]:[];f.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(u(n,t)/No)*No,y:Math.round(o(n,t)/No)*No,i:t}})}var r=Zt,i=Vt,u=r,o=i,a=Ja;return n?t(n):(t.links=function(n){return _e(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return _e(e(n)).cells.forEach(function(e,r){for(var i,u,o=e.site,a=e.edges.sort(ue),c=-1,l=a.length,f=a[l-1].edge,s=f.l===o?f.r:f.l;++c<l;)i=f,u=s,f=a[c].edge,s=f.l===o?f.r:f.l,r<u.i&&r<s.i&&we(o,u,s)<0&&t.push([n[r],n[u.i],n[s.i]])}),t},t.x=function(n){return arguments.length?(u=vn(r=n),t):r},t.y=function(n){return arguments.length?(o=vn(i=n),t):i},t.clipExtent=function(n){return arguments.length?(a=null==n?Ja:n,t):a===Ja?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===Ja?null:a&&a[1]},t)};var Ja=[[-1e6,-1e6],[1e6,1e6]];Zu.geom.delaunay=function(n){return Zu.geom.voronoi().triangles(n)},Zu.geom.quadtree=function(n,t,e,r,i){function u(n){function u(n,t,e,r,i,u,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,f=n.y;if(null!=c)if(io(c-e)+io(f-r)<.01)l(n,t,e,r,i,u,o,a);else{var s=n.point;n.x=n.y=n.point=null,l(n,s,c,f,i,u,o,a),l(n,t,e,r,i,u,o,a)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,i,u,o,a)}function l(n,t,e,r,i,o,a,c){var l=.5*(i+a),f=.5*(o+c),s=e>=l,h=r>=f,p=(h<<1)+s;n.leaf=!1,n=n.nodes[p]||(n.nodes[p]=Ne()),s?i=l:a=l,h?o=f:c=f,u(n,t,e,r,i,o,a,c)}var f,s,h,p,g,v,d,y,m,x=vn(a),M=vn(c);if(null!=t)v=t,d=e,y=r,m=i;else if(y=m=-(v=d=1/0),s=[],h=[],g=n.length,o)for(p=0;p<g;++p)f=n[p],f.x<v&&(v=f.x),f.y<d&&(d=f.y),f.x>y&&(y=f.x),f.y>m&&(m=f.y),s.push(f.x),h.push(f.y);else for(p=0;p<g;++p){var _=+x(f=n[p],p),b=+M(f,p);_<v&&(v=_),b<d&&(d=b),_>y&&(y=_),b>m&&(m=b),s.push(_),h.push(b)}var w=y-v,S=m-d;w>S?m=d+w:y=v+S;var k=Ne();if(k.add=function(n){u(k,n,+x(n,++p),+M(n,p),v,d,y,m)},k.visit=function(n){Ee(n,k,v,d,y,m)},p=-1,null==t){for(;++p<g;)u(k,n[p],s[p],h[p],v,d,y,m);--p}else n.forEach(k.add);return s=h=n=f=null,k}var o,a=Zt,c=Vt;return(o=arguments.length)?(a=Se,c=ke,3===o&&(i=e,r=t,e=t=0),u(n)):(u.x=function(n){return arguments.length?(a=n,u):a},u.y=function(n){return arguments.length?(c=n,u):c},u.extent=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],i=+n[1][1]),u):null==t?null:[[t,e],[r,i]]},u.size=function(n){return arguments.length?(null==n?t=e=r=i=null:(t=e=0,r=+n[0],i=+n[1]),u):null==t?null:[r-t,i-e]},u)},Zu.interpolateRgb=Ae,Zu.interpolateObject=Ce,Zu.interpolateNumber=Le,Zu.interpolateString=Te;var Ga=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;Zu.interpolate=qe,Zu.interpolators=[function(n,t){var e=typeof t;return("string"===e?Zo.has(t)||/^(#|rgb\(|hsl\()/.test(t)?Ae:Te:t instanceof Z?Ae:"object"===e?Array.isArray(t)?ze:Ce:Le)(n,t)}],Zu.interpolateArray=ze;var Ka=function(){return dn},Qa=Zu.map({linear:Ka,poly:Fe,quad:function(){return Ue},cubic:function(){return je},sin:function(){return Oe},exp:function(){return Ye},circle:function(){return Ie},elastic:Ze,back:Ve,bounce:function(){return Xe}}),nc=Zu.map({"in":dn,out:De,"in-out":Pe,"out-in":function(n){return Pe(De(n))}});Zu.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.substring(0,t):n,r=t>=0?n.substring(t+1):"in";return e=Qa.get(e)||Ka,r=nc.get(r)||dn,Re(r(e.apply(null,Vu.call(arguments,1))))},Zu.interpolateHcl=$e,Zu.interpolateHsl=Be,Zu.interpolateLab=We,Zu.interpolateRound=Je,Zu.transform=function(n){var t=$u.createElementNS(Zu.ns.prefix.svg,"g");return(Zu.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Ge(e?e.matrix:tc)})(n)},Ge.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var tc={a:1,b:0,c:0,d:1,e:0,f:0};Zu.interpolateTransform=tr,Zu.layout={},Zu.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(ir(n[e]));return t}},Zu.layout.chord=function(){function n(){var n,l,s,h,p,g={},v=[],d=Zu.range(u),y=[];for(e=[],r=[],n=0,h=-1;++h<u;){for(l=0,p=-1;++p<u;)l+=i[h][p];v.push(l),y.push(Zu.range(u)),n+=l}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&y.forEach(function(n,t){n.sort(function(n,e){return a(i[t][n],i[t][e])})}),n=(So-f*u)/n,l=0,h=-1;++h<u;){for(s=l,p=-1;++p<u;){var m=d[h],x=y[m][p],M=i[m][x],_=l,b=l+=M*n;g[m+"-"+x]={index:m,subindex:x,startAngle:_,endAngle:b,value:M}}r[m]={index:m,startAngle:s,endAngle:l,value:(l-s)/n},l+=f}for(h=-1;++h<u;)for(p=h-1;++p<u;){var w=g[h+"-"+p],S=g[p+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,i,u,o,a,c,l={},f=0;return l.matrix=function(n){return arguments.length?(u=(i=n)&&i.length,e=r=null,l):i},l.padding=function(n){return arguments.length?(f=n,e=r=null,l):f},l.sortGroups=function(n){return arguments.length?(o=n,e=r=null,l):o},l.sortSubgroups=function(n){return arguments.length?(a=n,e=null,l):a},l.sortChords=function(n){return arguments.length?(c=n,e&&t(),l):c},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},Zu.layout.force=function(){function n(n){return function(t,e,r,i){if(t.point!==n){var u=t.cx-n.x,o=t.cy-n.y,a=1/Math.sqrt(u*u+o*o);if((i-e)*a<v){var c=t.charge*a*a;return n.px-=u*c,n.py-=o*c,!0}if(t.point&&isFinite(a)){var c=t.pointCharge*a*a;n.px-=u*c,n.py-=o*c}}return!t.charge}}function t(n){n.px=Zu.event.x,n.py=Zu.event.y,a.resume()}var e,r,i,u,o,a={},c=Zu.dispatch("start","tick","end"),l=[1,1],f=.9,s=ec,h=rc,p=-30,g=.1,v=.8,d=[],y=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,s,h,v,m,x,M,_=d.length,b=y.length;for(e=0;e<b;++e)a=y[e],s=a.source,h=a.target,x=h.x-s.x,M=h.y-s.y,(v=x*x+M*M)&&(v=r*u[e]*((v=Math.sqrt(v))-i[e])/v,x*=v,M*=v,h.x-=x*(m=s.weight/(h.weight+s.weight)),h.y-=M*m,s.x+=x*(m=1-m),s.y+=M*m);if((m=r*g)&&(x=l[0]/2,M=l[1]/2,e=-1,m))for(;++e<_;)a=d[e],a.x+=(x-a.x)*m,a.y+=(M-a.y)*m;if(p)for(sr(t=Zu.geom.quadtree(d),r,o),e=-1;++e<_;)(a=d[e]).fixed||t.visit(n(a));for(e=-1;++e<_;)a=d[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*f,a.y-=(a.py-(a.py=a.y))*f);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(d=n,a):d},a.links=function(n){return arguments.length?(y=n,a):y},a.size=function(n){return arguments.length?(l=n,a):l},a.linkDistance=function(n){return arguments.length?(s="function"==typeof n?n:+n,a):s},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(f=+n,a):f},a.charge=function(n){return arguments.length?(p="function"==typeof n?n:+n,a):p},a.gravity=function(n){return arguments.length?(g=+n,a):g},a.theta=function(n){return arguments.length?(v=+n,a):v},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),Zu.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;a<c;++a)e[a]=[];for(a=0;a<l;++a){var i=y[a];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var u,o=e[t],a=-1,l=o.length;++a<l;)if(!isNaN(u=o[a][n]))return u;return Math.random()*r}var t,e,r,c=d.length,f=y.length,g=l[0],v=l[1];for(t=0;t<c;++t)(r=d[t]).index=t,r.weight=0;for(t=0;t<f;++t)r=y[t],"number"==typeof r.source&&(r.source=d[r.source]),"number"==typeof r.target&&(r.target=d[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<c;++t)r=d[t],isNaN(r.x)&&(r.x=n("x",g)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof s)for(t=0;t<f;++t)i[t]=+s.call(this,y[t],t);else for(t=0;t<f;++t)i[t]=s;if(u=[],"function"==typeof h)for(t=0;t<f;++t)u[t]=+h.call(this,y[t],t);else for(t=0;t<f;++t)u[t]=h;if(o=[],"function"==typeof p)for(t=0;t<c;++t)o[t]=+p.call(this,d[t],t);else for(t=0;t<c;++t)o[t]=p;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=Zu.behavior.drag().origin(dn).on("dragstart.force",ar).on("drag.force",t).on("dragend.force",cr)),arguments.length?void this.on("mouseover.force",lr).on("mouseout.force",fr).call(e):e},Zu.rebind(a,c,"on")};var ec=20,rc=1;Zu.layout.hierarchy=function(){function n(t,o,a){var c=i.call(e,t,o);if(t.depth=o,a.push(t),c&&(l=c.length)){for(var l,f,s=-1,h=t.children=new Array(l),p=0,g=o+1;++s<l;)f=h[s]=n(c[s],g,a),f.parent=t,p+=f.value;r&&h.sort(r),u&&(t.value=p)}else delete t.children,u&&(t.value=+u.call(e,t,o)||0);return t}function t(n,r){var i=n.children,o=0;if(i&&(a=i.length))for(var a,c=-1,l=r+1;++c<a;)o+=t(i[c],l);else u&&(o=+u.call(e,n,r)||0);return u&&(n.value=o),o}function e(t){var e=[];return n(t,0,e),e}var r=vr,i=pr,u=gr;return e.sort=function(n){return arguments.length?(r=n,e):r},e.children=function(n){return arguments.length?(i=n,e):i},e.value=function(n){return arguments.length?(u=n,e):u},e.revalue=function(n){return t(n,0),n},e},Zu.layout.partition=function(){function n(t,e,r,i){var u=t.children;if(t.x=e,t.y=t.depth*i,t.dx=r,t.dy=i,u&&(o=u.length)){var o,a,c,l=-1;for(r=t.value?r/t.value:0;++l<o;)n(a=u[l],e,c=a.value*r,i),e+=c}}function t(n){var e=n.children,r=0;if(e&&(i=e.length))for(var i,u=-1;++u<i;)r=Math.max(r,t(e[u]));return 1+r}function e(e,u){var o=r.call(this,e,u);return n(o[0],0,i[0],i[1]/t(o[0])),o}var r=Zu.layout.hierarchy(),i=[1,1];return e.size=function(n){return arguments.length?(i=n,e):i},hr(e,r)},Zu.layout.pie=function(){function n(u){var o=u.map(function(e,r){return+t.call(n,e,r)}),a=+("function"==typeof r?r.apply(this,arguments):r),c=(("function"==typeof i?i.apply(this,arguments):i)-a)/Zu.sum(o),l=Zu.range(u.length);null!=e&&l.sort(e===ic?function(n,t){return o[t]-o[n]}:function(n,t){return e(u[n],u[t])});var f=[];return l.forEach(function(n){var t;f[n]={data:u[n],value:t=o[n],startAngle:a,endAngle:a+=t*c}}),f}var t=Number,e=ic,r=0,i=So;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(i=t,n):i},n};var ic={};Zu.layout.stack=function(){function n(a,c){var l=a.map(function(e,r){return t.call(n,e,r)}),f=l.map(function(t){return t.map(function(t,e){return[u.call(n,t,e),o.call(n,t,e)]})}),s=e.call(n,f,c);l=Zu.permute(l,s),f=Zu.permute(f,s);var h,p,g,v=r.call(n,f,c),d=l.length,y=l[0].length;for(p=0;p<y;++p)for(i.call(n,l[0][p],g=v[p],f[0][p][1]),h=1;h<d;++h)i.call(n,l[h][p],g+=f[h-1][p][1],f[h][p][1]);return a}var t=dn,e=Mr,r=_r,i=xr,u=yr,o=mr;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:uc.get(t)||Mr,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:oc.get(t)||_r,n):r},n.x=function(t){return arguments.length?(u=t,n):u},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(i=t,n):i},n};var uc=Zu.map({"inside-out":function(n){var t,e,r=n.length,i=n.map(br),u=n.map(wr),o=Zu.range(r).sort(function(n,t){return i[n]-i[t]}),a=0,c=0,l=[],f=[];for(t=0;t<r;++t)e=o[t],a<c?(a+=u[e],l.push(e)):(c+=u[e],f.push(e));return f.reverse().concat(l)},reverse:function(n){return Zu.range(n.length).reverse()},"default":Mr}),oc=Zu.map({silhouette:function(n){var t,e,r,i=n.length,u=n[0].length,o=[],a=0,c=[];for(e=0;e<u;++e){for(t=0,r=0;t<i;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;e<u;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,i,u,o,a,c,l,f=n.length,s=n[0],h=s.length,p=[];for(p[0]=c=l=0,e=1;e<h;++e){for(t=0,i=0;t<f;++t)i+=n[t][e][1];for(t=0,u=0,a=s[e][0]-s[e-1][0];t<f;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);r<t;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;u+=o*n[t][e][1]}p[e]=c-=i?u/i*a:0,c<l&&(l=c)}for(e=0;e<h;++e)p[e]-=l;return p},expand:function(n){var t,e,r,i=n.length,u=n[0].length,o=1/i,a=[];for(e=0;e<u;++e){for(t=0,r=0;t<i;t++)r+=n[t][e][1];if(r)for(t=0;t<i;t++)n[t][e][1]/=r;else for(t=0;t<i;t++)n[t][e][1]=o}for(e=0;e<u;++e)a[e]=0;return a},zero:_r});Zu.layout.histogram=function(){function n(n,u){for(var o,a,c=[],l=n.map(e,this),f=r.call(this,l,u),s=i.call(this,f,l,u),u=-1,h=l.length,p=s.length-1,g=t?1:1/h;++u<p;)o=c[u]=[],o.dx=s[u+1]-(o.x=s[u]),o.y=0;if(p>0)for(u=-1;++u<h;)a=l[u],a>=f[0]&&a<=f[1]&&(o=c[Zu.bisect(s,a,1,p)-1],o.y+=g,o.push(n[u]));return c}var t=!0,e=Number,r=Er,i=kr;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=vn(t),n):r},n.bins=function(t){return arguments.length?(i="number"==typeof t?function(n){return Nr(n,t)}:vn(t),n):i},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},Zu.layout.tree=function(){function n(n,u){function o(n,t){var r=n.children,i=n._tree;if(r&&(u=r.length)){for(var u,a,l,f=r[0],s=f,h=-1;++h<u;)l=r[h],o(l,a),s=c(l,a,s),a=l;Pr(n);var p=.5*(f._tree.prelim+l._tree.prelim);t?(i.prelim=t._tree.prelim+e(n,t),i.mod=i.prelim-p):i.prelim=p}else t&&(i.prelim=t._tree.prelim+e(n,t))}function a(n,t){n.x=n._tree.prelim+t;var e=n.children;if(e&&(r=e.length)){var r,i=-1;for(t+=n._tree.mod;++i<r;)a(e[i],t)}}function c(n,t,r){if(t){for(var i,u=n,o=n,a=t,c=n.parent.children[0],l=u._tree.mod,f=o._tree.mod,s=a._tree.mod,h=c._tree.mod;a=Lr(a),u=Cr(u),a&&u;)c=Cr(c),o=Lr(o),o._tree.ancestor=n,i=a._tree.prelim+s-u._tree.prelim-l+e(a,u),i>0&&(Ur(jr(a,n,r),n,i),l+=i,f+=i),s+=a._tree.mod,l+=u._tree.mod,h+=c._tree.mod,f+=o._tree.mod;a&&!Lr(o)&&(o._tree.thread=a,o._tree.mod+=s-f),u&&!Cr(c)&&(c._tree.thread=u,c._tree.mod+=l-h,r=n)}return r}var l=t.call(this,n,u),f=l[0];Dr(f,function(n,t){n._tree={ancestor:n,prelim:0,mod:0,change:0,shift:0,number:t?t._tree.number+1:0}}),o(f),a(f,-f._tree.prelim);var s=Tr(f,zr),h=Tr(f,qr),p=Tr(f,Rr),g=s.x-e(s,h)/2,v=h.x+e(h,s)/2,d=p.depth||1;return Dr(f,i?function(n){n.x*=r[0],n.y=n.depth*r[1],delete n._tree}:function(n){n.x=(n.x-g)/(v-g)*r[0],n.y=n.depth/d*r[1],delete n._tree}),l}var t=Zu.layout.hierarchy().sort(null).value(null),e=Ar,r=[1,1],i=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(i=null==(r=t),n):i?null:r},n.nodeSize=function(t){return arguments.length?(i=null!=(r=t),n):i?r:null},hr(n,t)},Zu.layout.pack=function(){function n(n,u){var o=e.call(this,n,u),a=o[0],c=i[0],l=i[1],f=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,Dr(a,function(n){n.r=+f(n.value)}),Dr(a,Ir),r){var s=r*(t?1:Math.max(2*a.r/c,2*a.r/l))/2;Dr(a,function(n){n.r+=s}),Dr(a,Ir),Dr(a,function(n){n.r-=s})}return Xr(a,c/2,l/2,t?1:1/Math.max(2*a.r/c,2*a.r/l)),o}var t,e=Zu.layout.hierarchy().sort(Hr),r=0,i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},hr(n,e)},Zu.layout.cluster=function(){function n(n,u){var o,a=t.call(this,n,u),c=a[0],l=0;Dr(c,function(n){var t=n.children;t&&t.length?(n.x=Wr(t),n.y=Br(t)):(n.x=o?l+=e(n,o):0,n.y=0,o=n)});var f=Jr(c),s=Gr(c),h=f.x-e(f,s)/2,p=s.x+e(s,f)/2;return Dr(c,i?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(p-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=Zu.layout.hierarchy().sort(null).value(null),e=Ar,r=[1,1],i=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(i=null==(r=t),n):i?null:r},n.nodeSize=function(t){return arguments.length?(i=null!=(r=t),n):i?r:null},hr(n,t)},Zu.layout.treemap=function(){function n(n,t){for(var e,r,i=-1,u=n.length;++i<u;)r=(e=n[i]).value*(t<0?0:t),e.area=isNaN(r)||r<=0?0:r}function t(e){var u=e.children;if(u&&u.length){var o,a,c,l=s(e),f=[],h=u.slice(),g=1/0,v="slice"===p?l.dx:"dice"===p?l.dy:"slice-dice"===p?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(h,l.dx*l.dy/e.value),f.area=0;(c=h.length)>0;)f.push(o=h[c-1]),f.area+=o.area,"squarify"!==p||(a=r(f,v))<=g?(h.pop(),g=a):(f.area-=f.pop().area,i(f,v,l,!1),v=Math.min(l.dx,l.dy),f.length=f.area=0,g=1/0);f.length&&(i(f,v,l,!0),f.length=f.area=0),u.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var u,o=s(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;u=a.pop();)c.push(u),c.area+=u.area,null!=u.z&&(i(c,u.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,i=0,u=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(e<u&&(u=e),e>i&&(i=e));return r*=r,t*=t,r?Math.max(t*i*g/r,r/(t*u*g)):1/0}function i(n,t,e,r){var i,u=-1,o=n.length,a=e.x,l=e.y,f=t?c(n.area/t):0;if(t==e.dx){for((r||f>e.dy)&&(f=e.dy);++u<o;)i=n[u],i.x=a,i.y=l,i.dy=f,a+=i.dx=Math.min(e.x+e.dx-a,f?c(i.area/f):0);i.z=!0,i.dx+=e.x+e.dx-a,e.y+=f,e.dy-=f}else{for((r||f>e.dx)&&(f=e.dx);++u<o;)i=n[u],i.x=a,i.y=l,i.dx=f,l+=i.dy=Math.min(e.y+e.dy-l,f?c(i.area/f):0);i.z=!1,i.dy+=e.y+e.dy-l,e.x+=f,e.dx-=f}}function u(r){var i=o||a(r),u=i[0];return u.x=0,u.y=0,u.dx=l[0],u.dy=l[1],o&&a.revalue(u),n([u],u.dx*u.dy/u.value),(o?e:t)(u),h&&(o=i),i}var o,a=Zu.layout.hierarchy(),c=Math.round,l=[1,1],f=null,s=Kr,h=!1,p="squarify",g=.5*(1+Math.sqrt(5));return u.size=function(n){return arguments.length?(l=n,u):l},u.padding=function(n){function t(t){var e=n.call(u,t,t.depth);return null==e?Kr(t):Qr(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Qr(t,n)}if(!arguments.length)return f;var r;return s=null==(f=n)?Kr:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,u},u.round=function(n){return arguments.length?(c=n?Math.round:Number,u):c!=Number},u.sticky=function(n){return arguments.length?(h=n,o=null,u):h},u.ratio=function(n){return arguments.length?(g=n,u):g},u.mode=function(n){return arguments.length?(p=n+"",u):p},hr(u,a)},Zu.random={normal:function(n,t){var e=arguments.length;return e<2&&(t=1),e<1&&(n=0),function(){var e,r,i;do e=2*Math.random()-1,r=2*Math.random()-1,i=e*e+r*r;while(!i||i>1);return n+t*e*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var n=Zu.random.normal.apply(Zu,arguments);return function(){return Math.exp(n())}},irwinHall:function(n){return function(){for(var t=0,e=0;e<n;e++)t+=Math.random();return t/n}}},Zu.scale={};var ac={floor:dn,ceil:dn};Zu.scale.linear=function(){return oi([0,1],[0,1],qe,!1)},Zu.scale.log=function(){return hi(Zu.scale.linear().domain([0,1]),10,!0,[1,10])};var cc=Zu.format(".0e"),lc={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};Zu.scale.pow=function(){return pi(Zu.scale.linear(),1,[0,1])},Zu.scale.sqrt=function(){return Zu.scale.pow().exponent(.5)},Zu.scale.ordinal=function(){return vi([],{t:"range",a:[[]]})},Zu.scale.category10=function(){return Zu.scale.ordinal().range(fc)},Zu.scale.category20=function(){return Zu.scale.ordinal().range(sc)},Zu.scale.category20b=function(){return Zu.scale.ordinal().range(hc)},Zu.scale.category20c=function(){return Zu.scale.ordinal().range(pc)};var fc=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(on),sc=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(on),hc=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(on),pc=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(on);Zu.scale.quantile=function(){return di([],[])},Zu.scale.quantize=function(){return yi(0,1,[0,1])},Zu.scale.threshold=function(){return mi([.5],[0,1])},Zu.scale.identity=function(){return xi([0,1])},Zu.svg={},Zu.svg.arc=function(){function n(){var n=t.apply(this,arguments),u=e.apply(this,arguments),o=r.apply(this,arguments)+gc,a=i.apply(this,arguments)+gc,c=(a<o&&(c=o,o=a,a=c),a-o),l=c<wo?"0":"1",f=Math.cos(o),s=Math.sin(o),h=Math.cos(a),p=Math.sin(a);return c>=vc?n?"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+-u+"A"+u+","+u+" 0 1,1 0,"+u+"M0,"+n+"A"+n+","+n+" 0 1,0 0,"+-n+"A"+n+","+n+" 0 1,0 0,"+n+"Z":"M0,"+u+"A"+u+","+u+" 0 1,1 0,"+-u+"A"+u+","+u+" 0 1,1 0,"+u+"Z":n?"M"+u*f+","+u*s+"A"+u+","+u+" 0 "+l+",1 "+u*h+","+u*p+"L"+n*h+","+n*p+"A"+n+","+n+" 0 "+l+",0 "+n*f+","+n*s+"Z":"M"+u*f+","+u*s+"A"+u+","+u+" 0 "+l+",1 "+u*h+","+u*p+"L0,0Z"}var t=Mi,e=_i,r=bi,i=wi;return n.innerRadius=function(e){return arguments.length?(t=vn(e),n):t},n.outerRadius=function(t){return arguments.length?(e=vn(t),n):e},n.startAngle=function(t){return arguments.length?(r=vn(t),n):r},n.endAngle=function(t){return arguments.length?(i=vn(t),n):i},n.centroid=function(){var n=(t.apply(this,arguments)+e.apply(this,arguments))/2,u=(r.apply(this,arguments)+i.apply(this,arguments))/2+gc;return[Math.cos(u)*n,Math.sin(u)*n]},n};var gc=-ko,vc=So-No;Zu.svg.line=function(){return Si(dn)};var dc=Zu.map({linear:ki,"linear-closed":Ni,step:Ei,"step-before":Ai,"step-after":Ci,basis:Di,"basis-open":Pi,"basis-closed":Ui,bundle:ji,cardinal:qi,"cardinal-open":Li,"cardinal-closed":Ti,monotone:Zi});dc.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var yc=[0,2/3,1/3,0],mc=[0,1/3,2/3,0],xc=[0,1/6,2/3,1/6];Zu.svg.line.radial=function(){var n=Si(Vi);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},Ai.reverse=Ci,Ci.reverse=Ai,Zu.svg.area=function(){return Xi(dn)},Zu.svg.area.radial=function(){var n=Xi(Vi);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},Zu.svg.chord=function(){function n(n,a){var c=t(this,u,n,a),l=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,l)?i(c.r,c.p1,c.r,c.p0):i(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+i(l.r,l.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var i=t.call(n,e,r),u=a.call(n,i,r),o=c.call(n,i,r)+gc,f=l.call(n,i,r)+gc;return{r:u,a0:o,a1:f,p0:[u*Math.cos(o),u*Math.sin(o)],p1:[u*Math.cos(f),u*Math.sin(f)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>wo)+",1 "+t}function i(n,t,e,r){return"Q 0,0 "+r}var u=Rt,o=Dt,a=$i,c=bi,l=wi;return n.radius=function(t){return arguments.length?(a=vn(t),n):a},n.source=function(t){return arguments.length?(u=vn(t),n):u},n.target=function(t){return arguments.length?(o=vn(t),n):o},n.startAngle=function(t){return arguments.length?(c=vn(t),n):c},n.endAngle=function(t){return arguments.length?(l=vn(t),n):l},n},Zu.svg.diagonal=function(){function n(n,i){var u=t.call(this,n,i),o=e.call(this,n,i),a=(u.y+o.y)/2,c=[u,{x:u.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=Rt,e=Dt,r=Bi;return n.source=function(e){return arguments.length?(t=vn(e),n):t},n.target=function(t){return arguments.length?(e=vn(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},Zu.svg.diagonal.radial=function(){var n=Zu.svg.diagonal(),t=Bi,e=n.projection;return n.projection=function(n){return arguments.length?e(Wi(t=n)):t},n},Zu.svg.symbol=function(){function n(n,r){return(Mc.get(t.call(this,n,r))||Ki)(e.call(this,n,r))}var t=Gi,e=Ji;return n.type=function(e){return arguments.length?(t=vn(e),n):t},n.size=function(t){return arguments.length?(e=vn(t),n):e},n};var Mc=Zu.map({circle:Ki,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Sc)),e=t*Sc;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/wc),e=t*wc/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/wc),e=t*wc/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});Zu.svg.symbolTypes=Mc.keys();var _c,bc,wc=Math.sqrt(3),Sc=Math.tan(30*Ao),kc=[],Nc=0;kc.call=go.call,kc.empty=go.empty,kc.node=go.node,kc.size=go.size,Zu.transition=function(n){return arguments.length?_c?n.transition():n:mo.transition()},Zu.transition.prototype=kc,kc.select=function(n){var t,e,r,i=this.id,u=[];n=v(n);for(var o=-1,a=this.length;++o<a;){u.push(t=[]);for(var c=this[o],l=-1,f=c.length;++l<f;)(r=c[l])&&(e=n.call(r,r.__data__,l,o))?("__data__"in r&&(e.__data__=r.__data__),
eu(e,l,i,r.__transition__[i]),t.push(e)):t.push(null)}return Qi(u,i)},kc.selectAll=function(n){var t,e,r,i,u,o=this.id,a=[];n=d(n);for(var c=-1,l=this.length;++c<l;)for(var f=this[c],s=-1,h=f.length;++s<h;)if(r=f[s]){u=r.__transition__[o],e=n.call(r,r.__data__,s,c),a.push(t=[]);for(var p=-1,g=e.length;++p<g;)(i=e[p])&&eu(i,p,o,u),t.push(i)}return Qi(a,o)},kc.filter=function(n){var t,e,r,i=[];"function"!=typeof n&&(n=N(n));for(var u=0,o=this.length;u<o;u++){i.push(t=[]);for(var e=this[u],a=0,c=e.length;a<c;a++)(r=e[a])&&n.call(r,r.__data__,a)&&t.push(r)}return Qi(i,this.id)},kc.tween=function(n,t){var e=this.id;return arguments.length<2?this.node().__transition__[e].tween.get(n):A(this,null==t?function(t){t.__transition__[e].tween.remove(n)}:function(r){r.__transition__[e].tween.set(n,t)})},kc.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function i(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function u(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?tr:qe,a=Zu.ns.qualify(n);return nu(this,"attr."+n,t,a.local?u:i)},kc.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(i));return r&&function(n){this.setAttribute(i,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(i.space,i.local));return r&&function(n){this.setAttributeNS(i.space,i.local,r(n))}}var i=Zu.ns.qualify(n);return this.tween("attr."+n,i.local?r:e)},kc.style=function(n,t,e){function r(){this.style.removeProperty(n)}function i(t){return null==t?r:(t+="",function(){var r,i=Wu.getComputedStyle(this,null).getPropertyValue(n);return i!==t&&(r=qe(i,t),function(t){this.style.setProperty(n,r(t),e)})})}var u=arguments.length;if(u<3){if("string"!=typeof n){u<2&&(t="");for(e in n)this.style(e,n[e],t);return this}e=""}return nu(this,"style."+n,t,i)},kc.styleTween=function(n,t,e){function r(r,i){var u=t.call(this,r,i,Wu.getComputedStyle(this,null).getPropertyValue(n));return u&&function(t){this.style.setProperty(n,u(t),e)}}return arguments.length<3&&(e=""),this.tween("style."+n,r)},kc.text=function(n){return nu(this,"text",n,tu)},kc.remove=function(){return this.each("end.transition",function(){var n;this.__transition__.count<2&&(n=this.parentNode)&&n.removeChild(this)})},kc.ease=function(n){var t=this.id;return arguments.length<1?this.node().__transition__[t].ease:("function"!=typeof n&&(n=Zu.ease.apply(Zu,arguments)),A(this,function(e){e.__transition__[t].ease=n}))},kc.delay=function(n){var t=this.id;return A(this,"function"==typeof n?function(e,r,i){e.__transition__[t].delay=+n.call(e,e.__data__,r,i)}:(n=+n,function(e){e.__transition__[t].delay=n}))},kc.duration=function(n){var t=this.id;return A(this,"function"==typeof n?function(e,r,i){e.__transition__[t].duration=Math.max(1,n.call(e,e.__data__,r,i))}:(n=Math.max(1,n),function(e){e.__transition__[t].duration=n}))},kc.each=function(n,t){var e=this.id;if(arguments.length<2){var r=bc,i=_c;_c=e,A(this,function(t,r,i){bc=t.__transition__[e],n.call(t,t.__data__,r,i)}),bc=r,_c=i}else A(this,function(r){var i=r.__transition__[e];(i.event||(i.event=Zu.dispatch("start","end"))).on(n,t)});return this},kc.transition=function(){for(var n,t,e,r,i=this.id,u=++Nc,o=[],a=0,c=this.length;a<c;a++){o.push(n=[]);for(var t=this[a],l=0,f=t.length;l<f;l++)(e=t[l])&&(r=Object.create(e.__transition__[i]),r.delay+=r.duration,eu(e,l,u,r)),n.push(e)}return Qi(o,u)},Zu.svg.axis=function(){function n(n){n.each(function(){var n,l=Zu.select(this),f=this.__chart__||e,s=this.__chart__=e.copy(),h=null==c?s.ticks?s.ticks.apply(s,a):s.domain():c,p=null==t?s.tickFormat?s.tickFormat.apply(s,a):dn:t,g=l.selectAll(".tick").data(h,s),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",No),d=Zu.transition(g.exit()).style("opacity",No).remove(),y=Zu.transition(g).style("opacity",1),m=ti(s),x=l.selectAll(".domain").data([0]),M=(x.enter().append("path").attr("class","domain"),Zu.transition(x));v.append("line"),v.append("text");var _=v.select("line"),b=y.select("line"),w=g.select("text").text(p),S=v.select("text"),k=y.select("text");switch(r){case"bottom":n=ru,_.attr("y2",i),S.attr("y",Math.max(i,0)+o),b.attr("x2",0).attr("y2",i),k.attr("x",0).attr("y",Math.max(i,0)+o),w.attr("dy",".71em").style("text-anchor","middle"),M.attr("d","M"+m[0]+","+u+"V0H"+m[1]+"V"+u);break;case"top":n=ru,_.attr("y2",-i),S.attr("y",-(Math.max(i,0)+o)),b.attr("x2",0).attr("y2",-i),k.attr("x",0).attr("y",-(Math.max(i,0)+o)),w.attr("dy","0em").style("text-anchor","middle"),M.attr("d","M"+m[0]+","+-u+"V0H"+m[1]+"V"+-u);break;case"left":n=iu,_.attr("x2",-i),S.attr("x",-(Math.max(i,0)+o)),b.attr("x2",-i).attr("y2",0),k.attr("x",-(Math.max(i,0)+o)).attr("y",0),w.attr("dy",".32em").style("text-anchor","end"),M.attr("d","M"+-u+","+m[0]+"H0V"+m[1]+"H"+-u);break;case"right":n=iu,_.attr("x2",i),S.attr("x",Math.max(i,0)+o),b.attr("x2",i).attr("y2",0),k.attr("x",Math.max(i,0)+o).attr("y",0),w.attr("dy",".32em").style("text-anchor","start"),M.attr("d","M"+u+","+m[0]+"H0V"+m[1]+"H"+u)}if(s.rangeBand){var N=s.rangeBand()/2,E=function(n){return s(n)+N};v.call(n,E),y.call(n,E)}else v.call(n,f),y.call(n,s),d.call(n,s)})}var t,e=Zu.scale.linear(),r=Ec,i=6,u=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Ac?t+"":Ec,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(i=+t,u=+arguments[e-1],n):i},n.innerTickSize=function(t){return arguments.length?(i=+t,n):i},n.outerTickSize=function(t){return arguments.length?(u=+t,n):u},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var Ec="bottom",Ac={top:1,right:1,bottom:1,left:1};Zu.svg.brush=function(){function n(u){u.each(function(){var u=Zu.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=u.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),u.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=u.selectAll(".resize").data(d,dn);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Cc[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var f,s=Zu.transition(u),h=Zu.transition(o);c&&(f=ti(c),h.attr("x",f[0]).attr("width",f[1]-f[0]),e(s)),l&&(f=ti(l),h.attr("y",f[0]).attr("height",f[1]-f[0]),r(s)),t(s)})}function t(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function e(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function r(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==Zu.event.keyCode&&(A||(x=null,L[0]-=f[1],L[1]-=h[1],A=2),s())}function p(){32==Zu.event.keyCode&&2==A&&(L[0]+=f[1],L[1]+=h[1],A=0,s())}function d(){var n=Zu.mouse(_),i=!1;M&&(n[0]+=M[0],n[1]+=M[1]),A||(Zu.event.altKey?(x||(x=[(f[0]+f[1])/2,(h[0]+h[1])/2]),L[0]=f[+(n[0]<x[0])],L[1]=h[+(n[1]<x[1])]):x=null),N&&y(n,c,0)&&(e(S),i=!0),E&&y(n,l,1)&&(r(S),i=!0),i&&(t(S),w({type:"brush",mode:A?"move":"resize"}))}function y(n,t,e){var r,i,a=ti(t),c=a[0],l=a[1],s=L[e],p=e?h:f,d=p[1]-p[0];if(A&&(c-=s,l-=d+s),r=(e?v:g)?Math.max(c,Math.min(l,n[e])):n[e],A?i=(r+=s)+d:(x&&(s=Math.max(c,Math.min(l,2*x[e]-r))),s<r?(i=r,r=s):i=s),p[0]!=r||p[1]!=i)return e?o=null:u=null,p[0]=r,p[1]=i,!0}function m(){d(),S.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),Zu.select("body").style("cursor",null),T.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),w({type:"brushend"})}var x,M,_=this,b=Zu.select(Zu.event.target),w=a.of(_,arguments),S=Zu.select(_),k=b.datum(),N=!/^(n|s)$/.test(k)&&c,E=!/^(e|w)$/.test(k)&&l,A=b.classed("extent"),C=D(),L=Zu.mouse(_),T=Zu.select(Wu).on("keydown.brush",i).on("keyup.brush",p);if(Zu.event.changedTouches?T.on("touchmove.brush",d).on("touchend.brush",m):T.on("mousemove.brush",d).on("mouseup.brush",m),S.interrupt().selectAll("*").interrupt(),A)L[0]=f[0]-L[0],L[1]=h[0]-L[1];else if(k){var q=+/w$/.test(k),z=+/^n/.test(k);M=[f[1-q]-L[0],h[1-z]-L[1]],L[0]=f[q],L[1]=h[z]}else Zu.event.altKey&&(x=L.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),Zu.select("body").style("cursor",b.style("cursor")),w({type:"brushstart"}),d()}var u,o,a=p(n,"brushstart","brush","brushend"),c=null,l=null,f=[0,0],h=[0,0],g=!0,v=!0,d=Lc[0];return n.event=function(n){n.each(function(){var n=a.of(this,arguments),t={x:f,y:h,i:u,j:o},e=this.__chart__||t;this.__chart__=t,_c?Zu.select(this).transition().each("start.brush",function(){u=e.i,o=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=ze(f,t.x),r=ze(h,t.y);return u=o=null,function(i){f=t.x=e(i),h=t.y=r(i),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){u=t.i,o=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(c=t,d=Lc[!c<<1|!l],n):c},n.y=function(t){return arguments.length?(l=t,d=Lc[!c<<1|!l],n):l},n.clamp=function(t){return arguments.length?(c&&l?(g=!!t[0],v=!!t[1]):c?g=!!t:l&&(v=!!t),n):c&&l?[g,v]:c?g:l?v:null},n.extent=function(t){var e,r,i,a,s;return arguments.length?(c&&(e=t[0],r=t[1],l&&(e=e[0],r=r[0]),u=[e,r],c.invert&&(e=c(e),r=c(r)),r<e&&(s=e,e=r,r=s),e==f[0]&&r==f[1]||(f=[e,r])),l&&(i=t[0],a=t[1],c&&(i=i[1],a=a[1]),o=[i,a],l.invert&&(i=l(i),a=l(a)),a<i&&(s=i,i=a,a=s),i==h[0]&&a==h[1]||(h=[i,a])),n):(c&&(u?(e=u[0],r=u[1]):(e=f[0],r=f[1],c.invert&&(e=c.invert(e),r=c.invert(r)),r<e&&(s=e,e=r,r=s))),l&&(o?(i=o[0],a=o[1]):(i=h[0],a=h[1],l.invert&&(i=l.invert(i),a=l.invert(a)),a<i&&(s=i,i=a,a=s))),c&&l?[[e,i],[r,a]]:c?[e,r]:l&&[i,a])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],u=o=null),n},n.empty=function(){return!!c&&f[0]==f[1]||!!l&&h[0]==h[1]},Zu.rebind(n,a,"on")};var Cc={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Lc=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Tc=Zu.time={},qc=Date,zc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];uu.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Rc.setUTCDate.apply(this._,arguments)},setDay:function(){Rc.setUTCDay.apply(this._,arguments)},setFullYear:function(){Rc.setUTCFullYear.apply(this._,arguments)},setHours:function(){Rc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Rc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Rc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Rc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Rc.setUTCSeconds.apply(this._,arguments)},setTime:function(){Rc.setTime.apply(this._,arguments)}};var Rc=Date.prototype,Dc="%a %b %e %X %Y",Pc="%m/%d/%Y",Uc="%H:%M:%S",jc=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Hc=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Fc=["January","February","March","April","May","June","July","August","September","October","November","December"],Oc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Tc.year=ou(function(n){return n=Tc.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),Tc.years=Tc.year.range,Tc.years.utc=Tc.year.utc.range,Tc.day=ou(function(n){var t=new qc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),Tc.days=Tc.day.range,Tc.days.utc=Tc.day.utc.range,Tc.dayOfYear=function(n){var t=Tc.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},zc.forEach(function(n,t){n=n.toLowerCase(),t=7-t;var e=Tc[n]=ou(function(n){return(n=Tc.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=Tc.year(n).getDay();return Math.floor((Tc.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});Tc[n+"s"]=e.range,Tc[n+"s"].utc=e.utc.range,Tc[n+"OfYear"]=function(n){var e=Tc.year(n).getDay();return Math.floor((Tc.dayOfYear(n)+(e+t)%7)/7)}}),Tc.week=Tc.sunday,Tc.weeks=Tc.sunday.range,Tc.weeks.utc=Tc.sunday.utc.range,Tc.weekOfYear=Tc.sundayOfYear,Tc.format=cu;var Yc=fu(jc),Ic=su(jc),Zc=fu(Hc),Vc=su(Hc),Xc=fu(Fc),$c=su(Fc),Bc=fu(Oc),Wc=su(Oc),Jc=/^%/,Gc={"-":"",_:" ",0:"0"},Kc={a:function(n){return Hc[n.getDay()]},A:function(n){return jc[n.getDay()]},b:function(n){return Oc[n.getMonth()]},B:function(n){return Fc[n.getMonth()]},c:cu(Dc),d:function(n,t){return hu(n.getDate(),t,2)},e:function(n,t){return hu(n.getDate(),t,2)},H:function(n,t){return hu(n.getHours(),t,2)},I:function(n,t){return hu(n.getHours()%12||12,t,2)},j:function(n,t){return hu(1+Tc.dayOfYear(n),t,3)},L:function(n,t){return hu(n.getMilliseconds(),t,3)},m:function(n,t){return hu(n.getMonth()+1,t,2)},M:function(n,t){return hu(n.getMinutes(),t,2)},p:function(n){return n.getHours()>=12?"PM":"AM"},S:function(n,t){return hu(n.getSeconds(),t,2)},U:function(n,t){return hu(Tc.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return hu(Tc.mondayOfYear(n),t,2)},x:cu(Pc),X:cu(Uc),y:function(n,t){return hu(n.getFullYear()%100,t,2)},Y:function(n,t){return hu(n.getFullYear()%1e4,t,4)},Z:Du,"%":function(){return"%"}},Qc={a:pu,A:gu,b:mu,B:xu,c:Mu,d:Au,e:Au,H:Lu,I:Lu,j:Cu,L:zu,m:Eu,M:Tu,p:Ru,S:qu,U:du,w:vu,W:yu,x:_u,X:bu,y:Su,Y:wu,Z:ku,"%":Pu},nl=/^\s*\d+/,tl=Zu.map({am:0,pm:1});cu.utc=Uu;var el=Uu("%Y-%m-%dT%H:%M:%S.%LZ");cu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ju:el,ju.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},ju.toString=el.toString,Tc.second=ou(function(n){return new qc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),Tc.seconds=Tc.second.range,Tc.seconds.utc=Tc.second.utc.range,Tc.minute=ou(function(n){return new qc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),Tc.minutes=Tc.minute.range,Tc.minutes.utc=Tc.minute.utc.range,Tc.hour=ou(function(n){var t=n.getTimezoneOffset()/60;return new qc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),Tc.hours=Tc.hour.range,Tc.hours.utc=Tc.hour.utc.range,Tc.month=ou(function(n){return n=Tc.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),Tc.months=Tc.month.range,Tc.months.utc=Tc.month.utc.range;var rl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],il=[[Tc.second,1],[Tc.second,5],[Tc.second,15],[Tc.second,30],[Tc.minute,1],[Tc.minute,5],[Tc.minute,15],[Tc.minute,30],[Tc.hour,1],[Tc.hour,3],[Tc.hour,6],[Tc.hour,12],[Tc.day,1],[Tc.day,2],[Tc.week,1],[Tc.month,1],[Tc.month,3],[Tc.year,1]],ul=[[cu("%Y"),Vn],[cu("%B"),function(n){return n.getMonth()}],[cu("%b %d"),function(n){return 1!=n.getDate()}],[cu("%a %d"),function(n){return n.getDay()&&1!=n.getDate()}],[cu("%I %p"),function(n){return n.getHours()}],[cu("%I:%M"),function(n){return n.getMinutes()}],[cu(":%S"),function(n){return n.getSeconds()}],[cu(".%L"),function(n){return n.getMilliseconds()}]],ol=Ou(ul);il.year=Tc.year,Tc.scale=function(){return Hu(Zu.scale.linear(),il,ol)};var al={range:function(n,t,e){return Zu.range(+n,+t,e).map(Fu)}},cl=il.map(function(n){return[n[0].utc,n[1]]}),ll=[[Uu("%Y"),Vn],[Uu("%B"),function(n){return n.getUTCMonth()}],[Uu("%b %d"),function(n){return 1!=n.getUTCDate()}],[Uu("%a %d"),function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],[Uu("%I %p"),function(n){return n.getUTCHours()}],[Uu("%I:%M"),function(n){return n.getUTCMinutes()}],[Uu(":%S"),function(n){return n.getUTCSeconds()}],[Uu(".%L"),function(n){return n.getUTCMilliseconds()}]],fl=Ou(ll);return cl.year=Tc.year.utc,Tc.scale.utc=function(){return Hu(Zu.scale.linear(),cl,fl)},Zu.text=yn(function(n){return n.responseText}),Zu.json=function(n,t){return mn(n,"application/json",Yu,t)},Zu.html=function(n,t){return mn(n,"text/html",Iu,t)},Zu.xml=yn(function(n){return n.responseXML}),Zu}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/d3-amd.js' */
define("jira-agile/d3",d3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/figue.js' */
var figue=function(){function r(r,t){for(var n=r.length,e=0,a=0;a<n;a++)e+=Math.pow(r[a]-t[a],2);return e=Math.sqrt(e)}function t(r,t){for(var n=r.length,e=0,a=0;a<n;a++)e+=Math.abs(r[a]-t[a]);return e}function n(r,t){for(var n=r.length,e=0,a=0;a<n;a++)e=Math.max(e,Math.abs(r[a]-t[a]));return e}function e(r,t){for(var n=r.length,e=new Array(n),a=0;a<n;a++)e[a]=r[a]+t[a];return e}function a(r,t){for(var n=t.length,e=new Array(n),a=0;a<n;a++)e[a]=r*t[a];return e}function i(r,t){for(var n="",e=0;e<t;e++)n+=r;return n}function h(r,t,n,e){for(var a=new Array(t.length),i=r+n,h=0;h<t.length;h++)a[h]=(r*t[h]+n*e[h])/i;return a}function o(r,t){var n=t-r.length;if(!(n<0)){var e=Math.floor(n/2);return i(" ",e)+r+i(" ",n-e)}}function f(r,t,n){var e=t-r.length;if(!(e<0))return i(" ",n)+r+i(" ",t-(r.length+n))}function l(r){for(var t=new Array(r.length),n=Math.pow(10,figue.PRINT_VECTOR_VALUE_PRECISION),e=0;e<r.length;e++)t[e]=Math.round(r[e]*n)/n;return t.join(",")}function u(r){var t=Math.pow(10,figue.PRINT_VECTOR_VALUE_PRECISION);return String(Math.round(r*t)/t)}function g(r,t,n,e,a,h){var s=new Array,A=l(r.centroid);if(r.isLeaf()){var v=String(r.label),E=1;a&&(E=Math.max(A.length,E)),e&&(E=Math.max(v.length,E)),s.push(o("|",E)),a&&s.push(o(A,E)),e&&s.push(o(v,E))}else{var M=u(r.dist),N=g(r.left,t,n,e,a,h),c=g(r.right,t,n,e,a,h),I=N[0].indexOf("|"),d=c[0].indexOf("|"),E=t+c[0].length+N[0].length;a&&(E=Math.max(A.length,E)),h&&(E=Math.max(M.length,E));var _=I+Math.floor((N[0].length-I+t+(1+d))/2);s.push(f("|",E,_)),a&&s.push(f(A,E,_-Math.floor(A.length/2))),h&&s.push(f(M,E,_-Math.floor(M.length/2)));var p=t+(N[0].length-I)+d+1,w=i("_",p);if(s.push(f(w,E,I)),n&&N.length!=c.length){var T,m;N.length>c.length?(m=N,T=c):(m=c,T=N),header=T[0];for(var y=m.length-T.length,L=0;L<y;L++)T.splice(0,0,header)}for(var L=0;L<Math.max(N.length,c.length);L++){var S="";S=L<N.length?N[L]:i(" ",N[0].length);var x="";x=L<c.length?c[L]:i(" ",c[0].length),s.push(S+i(" ",t)+x);S+i(" ",t)+x}}return s}function s(e,a,i,o){var f,l,u,g,s,A,v,M,N,c,I=a.length,d=new Array(I),_=new Array(I),p=new figue.Matrix(I,I),w=p.mtx,T=new Array(I);for(i==figue.EUCLIDIAN_DISTANCE?i=r:i==figue.MANHATTAN_DISTANCE?i=t:i==figue.MAX_DISTANCE&&(i=n),A=0;A<I;A++)for(d[A]=0,v=0;v<I;v++)A==v?w[A][v]=1/0:w[A][v]=i(a[A],a[v]),w[A][d[A]]>w[A][v]&&(d[A]=v);for(A=0;A<I;A++)T[A]=[],T[A][0]=new E(e[A],null,null,0,a[A]),_[A]=1;for(M=0;M<I-1;M++){for(l=0,A=0;A<I;A++)w[A][d[A]]<w[l][d[l]]&&(l=A);for(u=d[l],g=T[l][0],s=T[u][0],c=h(g.size,g.centroid,s.size,s.centroid),f=new E((-1),g,s,w[l][u],c),T[l].splice(0,0,f),_[l]+=_[u],v=0;v<I;v++)if(o==figue.SINGLE_LINKAGE)w[l][v]>w[u][v]&&(w[v][l]=w[l][v]=w[u][v]);else if(o==figue.COMPLETE_LINKAGE)w[l][v]<w[u][v]&&(w[v][l]=w[l][v]=w[u][v]);else if(o==figue.AVERAGE_LINKAGE){var m=(_[l]*w[l][v]+_[u]*w[u][v])/(_[l]+_[v]);w[v][l]=w[l][v]=m}for(w[l][l]=1/0,A=0;A<I;A++)w[A][u]=w[u][A]=1/0;for(v=0;v<I;v++)d[v]==u&&(d[v]=l),w[l][v]<w[l][d[l]]&&(d[l]=v);N=f}return N}function A(t,n){var i=n.length;if(t>=i)return null;for(var h=new Array(t),o=new Object,f=0;f<t;){var l=Math.floor(Math.random()*i);l in o||(o[l]=1,h[f]=n[l],f++)}for(var u=new Array(i),g=new Array(t),s=!0,A=0;s;){for(var v=0;v<t;v++)g[v]=0;for(var E=0;E<i;E++){for(var N,c=n[E],I=Number.MAX_VALUE,v=0;v<t;v++)dist=r(h[v],c),dist<I&&(I=dist,N=v);g[N]++,u[E]=N}for(var d=new Array(t),v=0;v<t;v++)d[v]=null;for(var E=0;E<i;E++)f=u[E],null==d[f]?d[f]=n[E]:d[f]=e(d[f],n[E]);for(var v=0;v<t;v++)d[v]=a(1/g[v],d[v]);s=!1;for(var v=0;v<t;v++)if(!M.call(d[v],h[v])){s=!0;break}h=d,A++,A>figue.KMEANS_MAX_ITERATIONS&&(s=!1)}return{centroids:h,assignments:u}}function v(r,t){this.rows=r,this.cols=t,this.mtx=new Array(r);for(var n=0;n<r;n++){for(var e=new Array(t),a=0;a<t;a++)e[a]=0;this.mtx[n]=e}}function E(r,t,n,e,a){this.label=r,this.left=t,this.right=n,this.dist=e,this.centroid=a,null==t&&null==n?(this.size=1,this.depth=0):(this.size=t.size+n.size,this.depth=1+Math.max(t.depth,n.depth))}function M(r){if(this.length!=r.length)return!1;for(var t=0;t<r.length;t++){if(this[t]instanceof Array&&!M.call(this[t],r[t]))return!1;if(this[t]!==r[t])return!1}return!0}return{SINGLE_LINKAGE:0,COMPLETE_LINKAGE:1,AVERAGE_LINKAGE:2,EUCLIDIAN_DISTANCE:0,MANHATTAN_DISTANCE:1,MAX_DISTANCE:2,PRINT_VECTOR_VALUE_PRECISION:2,KMEANS_MAX_ITERATIONS:10,Matrix:v,Node:E,generateDendogram:g,agglomerate:s,kmeans:A}}();figue.Matrix.prototype.toString=function(){for(var r=[],t=0;t<this.rows;t++)r.push(this.mtx[t].join("\t"));return r.join("\n")},figue.Node.prototype.isLeaf=function(){return null==this.left&&null==this.right},figue.Node.prototype.buildDendogram=function(r,t,n,e,a){var i=figue.generateDendogram(this,r,t,n,e,a);return i.join("\n")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/cluster.js' */
var clusterVectors=function(e,t,i,n,r){function s(e,t){e&&(e.dist&&e.dist>i?(s(e.left,t),s(e.right,t)):e.left||e.right?t.push({issues:u(e),point:[n.invert(e.centroid[0]),r.invert(e.centroid[1])],size:e.size,distance:e.dist,cluster:!0}):t.push({issue:e.label,point:[n.invert(e.centroid[0]),r.invert(e.centroid[1])],size:e.size,distance:e.dist,cluster:!1}))}function u(e){return e?1===e.size&&e.label?[e.label]:u(e.left).concat(u(e.right)):[]}var c=_.map(e,function(e){return[n(e[0]),r(e[1])]});if(0===e.length)return[];if(1===e.length)return[{issue:t[0],point:e[0],size:1,distance:0,cluster:!1}];var l=figue.agglomerate(t,c,figue.MAX_DISTANCE,figue.COMPLETE_LINKAGE),o=[];return s(l,o),o};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/core.js' */
var c3={};c3.defaults={x:function(n){return n[0]},y:function(n){return n[1]}},c3.checkIsNumber=function(n){if("number"!=typeof n)throw new Error("Expected a number, but received: "+n);return n},c3.isEmpty=function(n){return!n||!n.length},c3.prop=function(n){function t(n){return 0===arguments.length?e.call(this,r):(r=u.call(this,n,r),this)}var r=n,e=function(n){return n},u=function(n,t){return n};return t.get=function(n){return e=n,this},t.set=function(n){return u=n,this},t},c3.inherit=function(n,t){var r,e=c3.prop().get(function(e){if(null!=e)return e;for(var u=this.parent();u;u=u.parent())if("function"==typeof u[n]&&(e=u[n](),null!=e))return e;return r?r.call(this):t});return e.onDefault=function(n){return r=n,this},e},c3.event=function(n){function t(n,t){u.push({handler:n,context:t})}function r(t){var r=this;t=t||{},_.each(u,function(n){n.handler.call(n.context||r,t)}),n&&n.call(this,t)}function e(){return"function"==typeof arguments[0]?t.apply(this,arguments):r.apply(this,arguments),this}var u=[];return e.off=function(n,t){return u=_.reject(u,function(r){var e=null==n||r.handler==n,u=null==t||r.context==t;return e&&u}),this},e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/areaPlot.js' */
c3.areaPlot=function(){return c3.component("areaPlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("area").dataFilter(function(t){return[t]}).extend({areaConstructor:c3.prop(d3.svg.area)}).update(function(t){var e=this.areaConstructor()().x(this.x());this.cartesian()?e.y0(this.height()).y1(this.y()):e.y0(this.y()).y1(0),t.selection.attr("d",e(this.data()))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/axis.js' */
c3.axis=function(){return c3.component("axis").extend(c3.plottable()).extend(function(){this.selection().call(this.axis())}).extend({axisConstructor:c3.inherit("axisConstructor",d3.svg.axis),orient:c3.prop("bottom"),horizontal:function(){var t=this.orient();return"bottom"===t||"top"===t},axis:function(){var t=this.horizontal();return this.axisConstructor().call(this).scale(t?this.xScale():this.yScale()).orient(this.orient())}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/borderLayout.js' */
c3.borderLayout=function(){var t=function(){return c3.prop().set(function(t){return t.parent(this)})},e=c3.drawable().extend({data:function(){return h.occupiedRegions()}}).dataKey(function(t){return t.name}).update(function(t){var e=h.positions();t.selection.each(function(t){var h=d3.select(this),n=e[t.name];h.attr("transform","translate("+n.left+","+n.top+")"),t.component.width(n.width).height(n.height),t.component(h)})}),h=c3.component("borderLayout").extend(c3.plottable()).extend(function(){e(this.selection())}).extend({center:t(),north:t(),south:t(),west:t(),east:t(),xRange:function(){return[0,this.centerWidth()]},yRange:function(){return[this.centerHeight(),0]},centerWidth:function(){return this.positions().center.width},centerHeight:function(){return this.positions().center.height},occupiedRegions:function(){var t=this;return _.compact(_.map(["north","south","west","east","center"],function(e){var h=t[e]();return h?{name:e,component:t[e]()}:null}))},positions:function(){var t={top:c3.checkIsNumber(this.north()?this.north().height():0),bottom:c3.checkIsNumber(this.south()?this.south().height():0),left:c3.checkIsNumber(this.west()?this.west().width():0),right:c3.checkIsNumber(this.east()?this.east().width():0)},e=c3.checkIsNumber(this.width()),h=c3.checkIsNumber(this.height()),n={},i=n.center={left:t.left,top:t.top,width:e-t.left-t.right,height:h-t.top-t.bottom};return this.north()&&(n.north={top:t.top,left:t.left,height:t.top,width:i.width}),this.south()&&(n.south={top:h-t.bottom,left:t.left,height:t.bottom,width:i.width}),this.west()&&(n.west={top:t.top,left:t.left,height:i.height,width:t.left}),this.east()&&(n.east={top:t.top,left:e-t.right,height:i.height,width:t.right}),n}});return h};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/circlePlot.js' */
c3.circlePlot=function(){return c3.component("circlePlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("circle").update(function(t){t.selection.attr("cx",this.x()).attr("cy",this.y()).attr("r",this.radiusAccessor())}).extend({radiusAccessor:c3.prop(function(){return 4})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/clippable.js' */
c3.clippable=function(){var t=0;return function(){return c3.component("clippable").extend({clipped:c3.prop(!1)}).extend(function(){if(this.clipped()){var e=this,i=c3.singular().elementTag("clipPath").enter(function(i){var n="c3clip"+t;t++,e.selection().attr("clip-path","url(#"+n+")"),i.selection.attr("id",n).append("rect").attr("x","0").attr("y","0").attr("fill","none")}).update(function(t){t.selection.select("rect").attr("width",e.width()).attr("height",e.height())});i(this.selection())}})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/component.js' */
c3.component=function(n){function t(){var n=function(t){return n.applyTo(n,t)};return n}function e(n,t,e){for(var r in t)e&&r in e||(n[r]=t[r]);return n}var r=[],o=t(),p={displayName:n,selection:c3.prop(null),parent:c3.prop(null),applyTo:function(n,t){return o.selection(t),_.each(r,function(e){e.applyTo?e.applyTo(n,t):e.call(n,t)}),o},extend:function(n){return"function"==typeof n&&(n.parent&&n.parent(o),r.push(n)),e(o,n,p)}};return _.extend(o,p)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/deviationPlot.js' */
c3.deviationPlot=function(){return c3.component("deviationPlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("area").dataFilter(function(t){return[t]}).update(function(t){var e=this.yAccessor(),n=this.deviationAccessor(),a=this.yScale(),i=d3.svg.area().x(this.x()).y0(function(t){return a(e(t)+n(t))}).y1(function(t){return a(Math.max(e(t)-n(t),0))});t.selection.attr("d",i(this.data()))}).extend({deviationAccessor:c3.prop(function(t){return t[2]})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/drawable.js' */
c3.drawable=function(){return c3.component("drawable").extend(c3.withData()).extend(c3.withElements()).extend(function(){var t=this.dataBinding();this.enter({selection:this.drawEnter(t.enter())}),this.exit({selection:this.drawExit(t.exit())}),this.update({selection:t})}).extend({enter:c3.event(),exit:c3.event(),update:c3.event(),dataFilter:c3.prop(_.identity),dataBinding:function(){var t=this.dataFilter().call(this,this.data());return this.elements().data(t,this.dataKey())},drawEnter:function(t){var e=t.append(this.elementTag()),n=this.elementClass();return n&&e.classed(n,!0),e},drawExit:function(t){return t.remove()}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/fitToParent.js' */
c3.fitToParent=function(){return c3.component("fitToParent").extend({width:c3.prop(),height:c3.prop()}).extend(function(){var e=this.selection().node().domNode.parentElement;this.height(c3.checkIsNumber(e.clientHeight)),this.width(c3.checkIsNumber(e.clientWidth))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/gridLines.js' */
c3.gridLines=function(){return c3.component("gridLines").extend(c3.axis()).axisConstructor(function(){var t;switch(this.orient()){case"left":t=-this.width();break;case"right":t=this.width();break;case"top":t=-this.height();break;case"bottom":t=this.height()}return d3.svg.axis().tickSize(t).tickFormat("")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/label.js' */
c3.label=function(){return c3.component("label").extend(c3.singular()).extend({text:c3.prop(""),orient:c3.prop("bottom")}).elementTag("text").elementClass("label").enter(function(t){t.selection.attr("text-anchor","middle")}).update(function(t){t.selection.text(this.text());var e=0,i=0,h=0,n=t.selection.node().getBBox();switch(this.orient()){case"left":h=270,e=-1*this.width()+n.height,i=this.height()/2;break;case"right":h=90,e=this.width()-n.height,i=this.height()/2;break;case"top":h=0,e=this.width()/2,i=-1*this.height()+n.height;break;default:h=0,e=this.width()/2,i=this.height()-n.height/2}t.selection.attr("transform","translate("+e+", "+i+") rotate("+h+", 0, 0)")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/labelledAxis.js' */
c3.labelledAxis=function(){return c3.component("labelledAxis").extend(c3.axis()).extend(c3.label()).elementClass("axis-label")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/layerable.js' */
c3.layerable=function(){var e=c3.drawable().elementClass("layer").update(function(e){e.selection.each(function(e,n){e.component(d3.select(this).classed(e.name,!0))})});return c3.component("layerable").extend(function(){e(this.selection())}).extend(c3.plottable()).extend({layers:function(){return e.data()},getLayer:function(e){var n=_.findWhere(this.layers(),{name:e});return n?n.component:void 0},addLayer:function(e,n){return this.getLayer(e)||this.layers().push({name:e,component:n.parent(this)}),this},removeLayer:function(e){var n=this.layers(),t=_.reject(n,function(n){return n.name===e});return t.length!==n.length&&this.layers(t),this}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/linePlot.js' */
c3.linePlot=function(){return c3.component("linePlot").extend(c3.drawable()).extend(c3.plottable()).elementTag("path").elementClass("line").dataFilter(function(t){return[t]}).extend({lineConstructor:c3.prop(d3.svg.line)}).update(function(t){var e=this.lineConstructor()().x(this.x()).y(this.y());t.selection.attr("d",e(this.data())).attr("stroke","black").attr("fill","none")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/plottable.js' */
c3.plottable=function(){return c3.component("plottable").extend(c3.withData()).extend(c3.withDimensions()).extend(c3.clippable()).extend({x:function(){var t=this.xScale(),c=this.xAccessor();return function(e,n){return t(c(e,n))}},y:function(){var t=this.yScale(),c=this.yAccessor();return function(e,n){return t(c(e,n))}},xAccessor:c3.inherit("xAccessor",c3.defaults.x),yAccessor:c3.inherit("yAccessor",c3.defaults.y),xScaleConstructor:c3.inherit("xScaleConstructor",d3.scale.linear),yScaleConstructor:c3.inherit("yScaleConstructor",d3.scale.linear),xDomain:c3.inherit("xDomain").onDefault(function(){if(c3.isEmpty(this.data()))return[0,1];var t=c3.checkIsNumber(d3.min(this.data(),this.xAccessor())),c=c3.checkIsNumber(d3.max(this.data(),this.xAccessor()));return[t,c]}),yDomain:c3.inherit("yDomain").onDefault(function(){if(c3.isEmpty(this.data()))return[0,1];var t=c3.checkIsNumber(d3.min(this.data(),this.yAccessor())),c=c3.checkIsNumber(d3.max(this.data(),this.yAccessor()));return[t,c]}),xRange:c3.inherit("xRange").onDefault(function(){var t=c3.checkIsNumber(this.width());return[0,t]}),yRange:c3.inherit("yRange").onDefault(function(){var t=c3.checkIsNumber(this.height());return this.cartesian()?[t,0]:[0,t]}),xScale:function(){return this.xScaleConstructor().call(this).domain(this.xDomain()).range(this.xRange())},yScale:function(){return this.yScaleConstructor().call(this).domain(this.yDomain()).range(this.yRange())},cartesian:c3.prop(!0)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/singular.js' */
c3.singular=function(){return c3.component("singular").extend(c3.withElements()).extend({enter:c3.event(),update:c3.event(),exit:c3.event(),showCondition:c3.prop(function(){return!0})}).extend(function(){var e=this.elements();this.showCondition().call(this)?(e.node()||(e=this.selection().append(this.elementTag()),this.elementClass()&&e.classed(this.elementClass(),!0),this.enter({selection:e})),this.update({selection:e})):e.node()&&this.exit({selection:e.remove()})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/utils.js' */
c3.utils={wrapText:function(t,e,n){t.each(function(){for(var t,i=d3.select(this),o=i.text().split(/\s+/).reverse(),a=[o.pop()],h=[a];t=o.pop();)a.push(t),i.text(a.join(" ")),i.node().getComputedTextLength()>e&&(a.pop(),a=[t],h.push(a));i.text(null);var c=1.1,d=i.attr("y")||0,p=parseFloat(i.attr("dy"))||0;h.forEach(function(t,o){n&&(o-=h.length-1),i.append("tspan").attr({x:e/2,y:d,dy:o*c+p+"em"}).text(t.join(" "))})})},containText:function(t,e,n){t.each(function(){var t=this.__data__,i=d3.select(this),o={width:0,height:0},a=4;try{o=i.node().getBBox()}catch(h){}o.height+a>n(t)?i.text(""):o.width+a>e(t)&&i.text("…")})},defaultViewBox:function(t){var e=t.node().parentNode.getBoundingClientRect();t.attr("viewBox","0 0 "+e.width+" "+e.height)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/withData.js' */
c3.withData=function(){return c3.component("withData").extend({data:c3.inherit("data",[]),dataKey:c3.inherit("dataKey")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/fillWithRect.js' */
c3.fillWithRect=function(){return c3.singular().elementTag("rect").elementClass("fill-rect").enter(function(t){t.selection.attr("x",0).attr("y",0).attr("fill","none").attr("width","100%").attr("height","100%").style("pointer-events","all")})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/withDimensions.js' */
c3.withDimensions=function(){return c3.component("withDimensions").extend({width:c3.inherit("width").onDefault(function(){return parseInt(this.selection().style("width"),10)||0}),height:c3.inherit("height").onDefault(function(){return parseInt(this.selection().style("height"),10)||0})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/withElements.js' */
c3.withElements=function(){return c3.component("withElements").extend({elementTag:c3.prop("g"),elementClass:c3.prop(""),elementSelector:function(){return this.elementClass()?this.elementTag()+"."+this.elementClass():this.elementTag()},elements:function(){var e=this.selection().node();return this.selection().selectAll(this.elementSelector()).filter(function(){return this.parentNode===e})}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/interactive.js' */
c3.interactive=function(){function o(o){var n=e(o),t=n[0],u=n[1];return c.mouseCoordinates([t,u]),t>0&&u>0&&t<=c.width()&&u<=c.height()}function e(o){s();var e=o.pageX-r.left,n=o.pageY-r.top;return[e,n]}function n(){AJS.$(c.selection().node()).on("dragstart",function(o){o.preventDefault()})}function t(){c.domContext().on("mousemove",function(e){var n=o(e);!n&&i?(i=!1,c.mouseout(e)):n&&!i&&(i=!0,c.mouseover(e))}).on("mouseout",function(o){i&&(i=!1,c.mouseout(o))}),n()}function u(e){return function(n,t){return c.domContext().on(e+".c3."+n,function(e){o(e)&&(d3.event=e,t.call(this,e))}),this}}var r,c=c3.component(),i=!1,s=_.throttle(function(){r=AJS.$(c.region().selection().node()).offset()},200);return c.extend(c3.withDimensions()).extend(_.once(t)).extend({mouseCoordinates:c3.prop(),domContext:c3.prop(),region:c3.prop(),mousedown:u("mousedown"),mouseup:u("mouseup"),mousemove:u("mousemove"),mouseover:c3.event(),mouseout:c3.event()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/scrubber.js' */
c3.scrubber=function(){function e(){var e=r.parent().mouseCoordinates();r.elements().attr("x1",e[0]).attr("x2",e[0]),r.shouldHideScrubber()()||r.elements().style("visibility","")}function t(){r.elements().style("visibility","hidden")}function n(e){e.style("pointer-events","none")}function i(i){n(i.selection),this.interactiveLayer().mousemove("scrubber",function(){e()}).mouseout(function(){t()})}var r=c3.singular();return r.elementTag("line").enter(i).extend(c3.withDimensions()).extend({interactiveLayer:c3.prop(),shouldHideScrubber:c3.prop(function(){}),hideScrubber:t}).update(function(e){e.selection.attr("y1",0).attr("y2",this.height())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/barChart.js' */
c3.barChart=function(){return c3.component("barChart").extend(c3.drawable()).extend(c3.plottable()).elementTag("rect").xAccessor(function(t,e){return e}).yAccessor(function(t){return t}).extend({baselineAccessor:c3.prop(function(){return 0}),barWidth:function(){return this.xScale().rangeBand()},barHeight:function(){var t=this.baselineAccessor(),e=this.yAccessor(),r=this.yScale();return function(n){return r(t(n))-r(e(n))}},maxBarWidth:c3.prop(0),padding:c3.prop(.25).set(function(t){if(t>=0&&t<=1)return t;throw new Error("Expected padding to be between 0 and 1 inclusive, but received "+t)}),outerPadding:c3.prop(.25).set(function(t){if(t>=0&&t<=1)return t;throw new Error("Expected outerPadding to be between 0 and 1 inclusive, but received "+t)}),showLabels:c3.prop(!1),rotateLabels:c3.prop(!1),labelAccessor:function(){return this.xAccessor()},xRange:function(){var t=this.width(),e=t;return this.maxBarWidth()>0&&(e=Math.floor(this.maxBarWidth()/(1-this.padding())*(this.xDomain().length-this.padding()+2*this.outerPadding()))),[0,Math.min(e,t)]},xScale:function(){return d3.scale.ordinal().domain(this.xDomain()).rangeRoundBands(this.xRange(),this.padding(),this.outerPadding())},xDomain:c3.inherit("xDomain").onDefault(function(){return c3.isEmpty(this.data())?[0,1]:d3.range(this.data().length)}),yDomain:c3.inherit("yDomain").onDefault(function(){if(c3.isEmpty(this.data()))return[0,1];var t=c3.checkIsNumber(d3.min(this.data(),this.baselineAccessor())),e=c3.checkIsNumber(d3.max(this.data(),this.yAccessor()));return[t,e]})}).enter(function(t){"g"===this.elementTag()&&this.showLabels()&&t.selection.append("text").classed("bar-label",!0)}).update(function(t){var e=this.x(),r=this.y(),n=this.barWidth(),a=this.barHeight(),i=t.selection.select("text.bar-label");t.selection.attr("transform",function(t,n){return"translate("+e(t,n)+","+r(t,n)+")"}).attr("height",a).attr("width",n),this.showLabels()&&(i.attr("x",n/2).attr("y",a).text(this.labelAccessor()),this.rotateLabels()?i.attr("transform",function(t,e){return"rotate(90 "+n/2+","+a(t)+")"}).attr("text-anchor","start").attr("dx",".5em").attr("dy",".25em"):i.attr("transform",null).attr("text-anchor","middle").attr("dx",null).attr("dy","1.25em").call(c3.utils.wrapText,n))})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/floatingBarChart.js' */
c3.floatingBarChart=function(){return c3.component("floatingBarChart").extend(c3.barChart()).yAccessor(function(n){return n[0]+n[1]}).baselineAccessor(function(n){return n[0]})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/stack.js' */
c3.stack=function(){return c3.component("stack").extend(c3.floatingBarChart()).elementTag("g").xAccessor(function(){return 0}).extend({classPrefix:c3.prop(),labelAccessor:function(){return this.yAccessor()},labelFormatter:function(){return d3.format(",d")}}).enter(function(t){var e=this.classPrefix();t.selection.insert("rect",":first-child").attr("class",function(t,r){return e+"-series-"+r})}).update(function(t){var e=this.classPrefix(),r=this.barHeight(),s=this.barWidth();t.selection.select("rect").attr("height",r).attr("width",s),this.showLabels()&&t.selection.select("text").attr("dy","0.45em").attr("y",function(t){return r(t)/2}).attr("class",function(t,r){return e+"-series-label-"+r}).classed("bar-label",!0).text(this.labelAccessor()).call(c3.utils.containText,function(){return s},r)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-chart-dependencies', location = 'jira-agile-module/includes/js/lib/c3/brush.js' */
c3.brush=function(){function t(t){i=t,a=!0,r(),s.elements().attr("x",t).attr("y",0).attr("width","1"),s.onDrag(t)}function n(t){if(a){var n=s.elements(),e=parseInt(t-i,10);e<0?n.attr("x",t):n.attr("x",i),n.attr("width",Math.abs(e));var r=_.sortBy([i,t],_.identity);s.onUpdate(r),s.currentRange(r)}}function e(t){a&&(a=!1,o(),s.onEndDrag(_.sortBy([i,t],_.identity)))}function r(){s.elements().style("display","")}function o(){s.elements().style("display","none")}var i=0,a=!1,s=c3.singular();return s.elementTag("rect").extend(c3.withDimensions()).enter(function(r){o(),r.selection.attr("height",this.height()).style("pointer-events","none");var i=this.interactiveLayer();i.mousedown("brush",function(){t(i.mouseCoordinates()[0])}).mousemove("brush",function(){n(i.mouseCoordinates()[0])}).mouseup("brush",function(){e(i.mouseCoordinates()[0])})}).extend({interactiveLayer:c3.prop(),onDrag:c3.event(),onUpdate:c3.event(),onEndDrag:c3.event(),currentRange:c3.prop(),cancelDrag:function(){a=!1,o()},isDragging:function(){return a}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ReportController.js' */
define("jira-agile/rapid/ui/chart/report-controller",["require"],function(t){var e=t("jquery"),r=t("underscore"),i=t("jira-agile/rapid/analytics-tracker"),n=t("jira-agile/rapid/ui/chart/burndown-chart-controller"),a=t("jira-agile/rapid/ui/chart/cfd-controller"),o=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller"),p=t("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller"),l=t("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller"),c=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller"),d=t("jira-agile/rapid/ui/chart/version-report-controller"),h=t("jira-agile/rapid/ui/plan/sprint-controller"),s=t("jira-agile/tooltip"),g=t("jira-agile/rapid/const/PageMode"),u=(t("jira/featureflags/feature-manager"),t("jira-agile/rapid/configuration/ConfigContextLoader")),S=t("jira/analytics/web-client"),w={};return w.charts=[],w.rapidViewData={},w.visible=!1,w.rapidViewConfig={},w.analytics=new i("gh.report"),w.ANALYTICS_TIME_SPENT_MILESTONES=[1e4,3e4,6e4,12e4,24e4,48e4],w.init=r.once(function(){w.initCharts(),r.each(w.getCharts(),function(t){t.controller.setRapidView(w.rapidViewData)}),GH.ChartTimeFrames.init(),GH.ChartFilters.init(),e(GH).bind("issueCreated",w.handleIssueCreated),e(GH).bind(GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED,w.handleSprintReopened)}),w.initCharts=function(){w.charts=[{id:n.id,name:"Burndown Chart",description:"Track the total work remaining and project the likelihood of achieving the sprint goal. This helps your team manage its progress and respond accordingly.",tooltip:"Track the total work remaining and project the likelihood of achieving the sprint goal",preview:"burndown",controller:n},{id:GH.SprintRetrospectiveController.id,name:"Sprint Report",description:"Understand the work completed or pushed back to the backlog in each sprint. This helps you determine if your team is overcommitting or if there is excessive scope creep.",tooltip:"Understand the work completed or pushed back to the backlog in each sprint",preview:"sprint-retrospective",controller:GH.SprintRetrospectiveController},{id:GH.VelocityChartController.id,name:"Velocity Chart",description:"Track the amount of work completed from sprint to sprint. This helps you determine your team\'s velocity and estimate the work your team can realistically achieve in future sprints.",tooltip:"Track the amount of work completed from sprint to sprint. This helps to predict future performance",preview:"velocity",controller:GH.VelocityChartController},{id:a.id,name:"Cumulative Flow Diagram",description:"Shows the statuses of issues over time. This helps you identify potential bottlenecks that need to be investigated.",tooltip:"Identify the number of issues in each status over time. An increase in the number of issues in a particular status means there could be a bottleneck to be investigated",preview:"cumulative-flow-diagram",controller:a},{id:d.id,name:"Version Report",description:"Track the projected release date for a version. This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the likelihood of releasing it on time",preview:"version-report",controller:d},{id:GH.EpicReportController.id,name:"Epic Report",description:"Understand the progress towards completing an epic over time. This helps you manage your team\'s progress by tracking the remaining incomplete/unestimated work.",tooltip:"Understand the progress towards completing an epic over time",preview:"epic-report",controller:GH.EpicReportController},{id:o.id,name:"Control Chart",description:"Shows the cycle time for your product, version or sprint. This helps you identify whether data from the current process can be used to determine future performance.",tooltip:"Identify whether data from the current process can be used to determine future performance. Analyze the cycle time of issues to determine patterns in your process",preview:"control-chart",howTos:[{title:"Visibility",description:"See outliers and investigate their cause to reduce them in the future."},{title:"Efficiency",description:"Decreasing rolling average indicates process improvements and increased throughput."},{title:"Predictability",description:"Narrow standard deviation through process improvements to improve predictability of cycle time."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Control+Chart","isLocal":false}.url,controller:o},{id:p.id,name:"Epic Burndown",description:"Track the projected number of sprints required to complete the epic (optimized for Scrum). This helps you monitor whether the epic will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing an epic and the effort remaining for it to be released",howTos:[{title:"View progress",description:"See sprint by sprint progress for an epic."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict completion",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Epic+Burndown","isLocal":false}.url,controller:new p},{id:l.id,name:"Release Burndown",description:"Track the projected release date for a version (optimized for Scrum). This helps you monitor whether the version will release on time, so you can take action if work is falling behind.",tooltip:"Understand the progress towards completing a version and the effort remaining for it to be released",howTos:[{title:"View progress",description:"See sprint by sprint progress for a version."},{title:"View scope change",description:"Track scope added and removed, indicated by the bottom of the bars."},{title:"Predict release",description:"Use past performance to predict the number of sprints needed until completion."}],documentation:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Release+Burndown","isLocal":false}.url,controller:new l}];var t=GH.RapidBoard.State.isAgilityBoard();w.getCharts().unshift({id:"burnupChart",name:t?"Burnup report":"Burnup Chart",description:t?"The Burnup report provides a visual representation of a sprint\'s completed work compared with its total scope. Track your team\'s progress towards sprint completion and identify problems related to scope creep.":"The Burnup Chart provides a visual representation of a sprint\'s completed work compared with its total scope. Track your team\'s progress towards sprint completion and identify problems related to scope creep.",tooltip:"The Burnup Chart provides a visual representation of a sprint\'s completed work compared with its total scope. Track your team\'s progress towards sprint completion and identify problems related to scope creep.",documentation:{"url":"https://confluence.atlassian.com/jirasoftwarecloud/burnup-chart-945124716.html","isLocal":false}.url,controller:new c}),r.each(w.getCharts(),function(t){t.controller.init&&t.controller.init()})},w.getCharts=function(){return w.charts},w.getApplicableCharts=function(t){return r.filter(w.getCharts(),function(e){return e.controller.isApplicable(t||w.rapidViewConfig)})},w.isApplicableChart=function(t,e){var i=!1;return r.each(w.getApplicableCharts(e),function(e){e.id===t&&(i=!0)}),i},w.getChart=function(t){return r.findWhere(w.charts,{id:t})},w.getSelectedChart=function(){return GH.RapidBoard.State.getChartType()},w.renderReportView=function(){var t=!GH.RapidBoard.ViewController.shouldShowSubnavigator();e("#ghx-report").html(GH.tpl.reportcontroller.renderReportView({shouldShowNavigation:t}))},w.renderSprintActions=function(t,e,r,i,n){var a=this.showSprintReopenButton(r,i.state),o=this.showSprintDeleteButton();t.empty(),t.append(GH.tpl.reportcontroller.renderSprintActions({showReopen:a,showDelete:o,sprintStatus:i.state,canManageSprints:GH.RapidViewConfig.canManageSprints,noParallelSprintsAndSprintActive:this.hasNoParallelSprintAndSprintActive(r),allJql:n})),a&&t.find("#ghx-reopen-sprint").on("click",function(t){t.preventDefault(),GH.Dialogs.ReopenSprintDialog.showDialog(e,i.id)}),o&&t.find("#ghx-delete-sprint").on("click",function(t){t.preventDefault(),h.deleteSprint(e,i,w.show)}),t.find("[title]").tooltip({gravity:"e"})},w.showSprintReopenButton=function(t,e){var r=this.hasNoParallelSprintAndSprintActive(t);return GH.RapidViewConfig.canManageSprints&&"CLOSED"===e&&!r},w.hasNoParallelSprintAndSprintActive=function(t){var e=GH.RapidBoard.parallelSprints,i=r.any(t,function(t){return"ACTIVE"===t.state});return!e&&i},w.showSprintDeleteButton=function(){return GH.RapidViewConfig.canManageSprints},w.setRapidView=function(t){w.rapidViewData=t||{},r.each(w.getCharts(),function(t){t.controller.setRapidView(w.rapidViewData)})},w.show=function(){w.rapidViewData.id&&(w.visible=!0,GH.ChartTimeFrameService.setRapidViewId(w.rapidViewData.id),w.renderReportView(),w.loadRapidViewConfig())},w.loadRapidViewConfig=function(){var t=function(t){w.visible&&(w.rapidViewConfig=t,w.configureContent())};e.when(GH.RapidViewConfig.fetchConfiguration(w.rapidViewData.id),JIRA.API.getSidebar()).done(t)},w.configureContent=function(){GH.ViewActions.setMode(g.REPORT);var t=GH.RapidBoard.State.getChartType();if(w.isApplicableChart(t)||(t=!1),!t){var e=w.getApplicableCharts();GH.RapidBoard.State.setChartType(r.first(e).id)}GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),GH.RapidBoard.ViewController.updateContentContainer(),w.showChart(),u.prefetch()},w.hide=function(){w.visible&&(w.hideCharts(),w.visible=!1,e("#ghx-report").empty(),w.analyticsTimer&&w.analyticsTimer.destroy())},w.hideCharts=function(t){r.each(w.getCharts(),function(e){e.id!==t&&e.controller.hide()})},w.selectChart=function(t){GH.SprintRetrospectiveView.clearDialog();var e=GH.RapidBoard.State.getChartType();t!==e&&(GH.RapidBoard.State.setChartType(t),w.showChart())},w.getCurrentChart=function(){var t=GH.RapidBoard.State.getChartType(),e=GH.RapidBoard.UrlState.getCurrentUrlState().chart;if(e!==t&&w.selectChart(e||t),t)return w.getChart(t)},w.showChart=function(){var t=w.getCurrentChart();t&&(w.updateChartMenu(t.id),w.updateChartHeader(t),w.hideCharts(),t.controller.show(),S.sendScreenEvent(t.id+"Screen",null,{boardType:GH.RapidBoard.State.getBoardTypeForAnalytics()}),w.handleIntroState(),w.analyticsTimer&&w.analyticsTimer.destroy(),w.analyticsTimer=new GH.DurationsTimer(w.ANALYTICS_TIME_SPENT_MILESTONES).on("tick",function(e){var r=t.id+(t.inLabs?".new":"")+".view."+(w.rapidViewConfig.sprintSupportEnabled?"scrum":"kanban");w.analytics.trigger(r,"duration",e/1e3)}))},w.updateChartMenu=function(t){var r=e("#ghx-chart-nav");r.html(e(GH.tpl.reportcontroller.renderChartMenu({activeChart:t,availableCharts:w.getApplicableCharts(),board:w.rapidViewConfig})));var i=r.find("li");i.bind("simpleClick",GH.Util.wrapPreventDefault(function(t){w.handleChartSelection(t,e(this))})),e(".tipsy").remove(),s.tipsify({selector:i,gravity:"w",className:"ghx-tipsy-left"})},w.updateChartHeader=function(t){var r=e("#ghx-chart-message");r.empty(),e("#ghx-chart-header .ghx-linked-pages-trigger").remove(),e("#ghx-chart-selector").empty(),e("#ghx-chart-snapshot").empty(),e(".ghx-chart-legend").hide(),e("#ghx-chart-sprint-actions").empty(),e("#ghx-chart-intro").html(GH.tpl.reportcontroller.renderChartIntro({marginClass:"ghx-margin-right-spa",activeChart:t})),e("#ghx-chart-help").html(GH.tpl.reportcontroller.renderChartDescriptionClosed()),e("#ghx-chart-panel-content").find(".js-chart-intro-toggle").on("click",function(t){w.toggleIntroState(t)})},w.handleChartSelection=function(t,e){var r=e.find("a").attr("data-chart");w.selectChart(r)},w.handleIssueCreated=function(t,e){w.visible&&GH.RapidBoard.QuickCreate.showCreatedIssuesMessage(e)},w.handleSprintReopened=function(t,r){GH.RapidBoard.ViewController.setMode(g.WORK),GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_RENDERED,"afterSprintReopened",function(){GH.WorkControls.sprintfilters.setActiveSprintFilters([r]),e(GH.WorkControls.sprintfilters).trigger("sprintFilterChange"),GH.RapidBoard.State.pushState()}),GH.RapidBoard.ViewController.sidebarController.updateSidebar()},w.handleIntroState=function(){GH.RapidBoard.State.getStoredChartIntroState()===!1&&w.closeIntro()},w.toggleIntroState=function(){var t=e(".ghx-intro-content"),r=e("#ghx-chart-help");t.hasClass("ghx-closed")?(t.removeClass("ghx-closed"),GH.RapidBoard.Animation.animateHeightToAuto(t),r.addClass("ghx-closed"),GH.RapidBoard.State.setChartIntroState(!0)):(GH.RapidBoard.Animation.animateHeightToZero(t).done(function(){t.addClass("ghx-closed"),r.removeClass("ghx-closed")}),GH.RapidBoard.State.setChartIntroState(!1))},w.closeIntro=function(){e(".ghx-intro-content").height(0).addClass("ghx-closed"),e("#ghx-chart-help").removeClass("ghx-closed")},w});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ReportController.soy' */
// This file was automatically generated from ReportController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reportcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reportcontroller == 'undefined') { GH.tpl.reportcontroller = {}; }


GH.tpl.reportcontroller.renderReportView = function(opt_data, opt_ignored) {
  return '<div id="ghx-report-scrollarea"><div class="aui-page-panel"><div class="aui-page-panel-inner">' + ((opt_data.shouldShowNavigation) ? '<div class="aui-page-panel-nav js-reports-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml('Reports') + '</strong></div><ul id="ghx-chart-nav" class="aui-nav"></ul></div></nav></div>' : '') + '<section id="ghx-chart-panel-content" class="aui-page-panel-content"><div id="ghx-chart-message"></div><div id="ghx-chart-intro"></div><div id="ghx-chart-header" class="aui-group aui-group-split ghx-fluid"><div id="ghx-chart-header-primary" class="aui-item"><div id="ghx-chart-title"></div><div id="ghx-chart-selector"></div><div id="ghx-chart-controls"></div><div id="ghx-chart-help" class="ghx-closed"></div><div id="ghx-chart-snapshot"></div></div><div id="ghx-chart-header-secondary" class="aui-item"><div id="sprint-retro-btn"></div><div id="ghx-chart-sprint-actions"></div><div class="ghx-chart-legend"></div></div></div><div id="ghx-chart-content"></div></section></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderReportView.soyTemplateName = 'GH.tpl.reportcontroller.renderReportView';
}


GH.tpl.reportcontroller.renderSprintActions = function(opt_data, opt_ignored) {
  return '' + ((opt_data.allJql || opt_data.canManageSprints) ? aui.buttons.button({text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-more', iconText: 'Sprint actions', id: 'ghx-sprint-actions-button', extraClasses: 'aui-dropdown2-trigger aui-dropdown2-trigger-arrowless', extraAttributes: {'aria-owns': 'ghx-sprint-actions-content', 'aria-haspopup': true}}) + '<div id="ghx-sprint-actions-content" class="aui-style-default aui-dropdown2"><ul class="aui-list-section aui-first">' + ((opt_data.canManageSprints) ? ((opt_data.sprintStatus == 'CLOSED') ? '<li class="aui-list-item"><a id="ghx-reopen-sprint" role="button" href="#" class="aui-list-item-link ' + ((! opt_data.showReopen) ? ' disabled' : '') + '" title="' + soy.$$escapeHtml(opt_data.noParallelSprintsAndSprintActive ? 'This sprint cant be reopened at the moment! Complete your currently active sprint, or enable Parallel Sprints to work on multiple sprints concurrently.' : '') + '" >' + soy.$$escapeHtml('Reopen sprint') + '</a></li>' : '') + '<li class="aui-list-item"><a id="ghx-delete-sprint" role="button" href="#" class="aui-list-item-link ' + ((! opt_data.showDelete) ? ' disabled' : '') + '">' + soy.$$escapeHtml('Delete sprint') + '</a></li>' : '') + ((opt_data.allJql) ? '<li class="aui-list-item"><a role="button" href="' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.allJql}) + '" class="aui-list-item-link">' + soy.$$escapeHtml('View sprint in Issue Navigator') + '</a></li>' : '') + '</ul></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderSprintActions.soyTemplateName = 'GH.tpl.reportcontroller.renderSprintActions';
}


GH.tpl.reportcontroller.renderChartMenu = function(opt_data, opt_ignored) {
  var output = '';
  var chartList52 = opt_data.availableCharts;
  var chartListLen52 = chartList52.length;
  for (var chartIndex52 = 0; chartIndex52 < chartListLen52; chartIndex52++) {
    var chartData52 = chartList52[chartIndex52];
    output += '<li ' + ((opt_data.activeChart == chartData52.id) ? 'class="aui-nav-selected"' : '') + ' data-tooltip="' + soy.$$escapeHtml(chartData52.tooltip) + '"><a data-chart="' + soy.$$escapeHtml(chartData52.id) + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.board.id) + '&amp;view=reporting&amp;chart=' + soy.$$escapeHtml(chartData52.id) + '">' + soy.$$escapeHtml(chartData52.name) + ((chartData52.inLabs) ? ' <span class="aui-lozenge aui-lozenge-subtle aui-lozenge-success">' + soy.$$escapeHtml('New') + '</span>' : '') + '</a></li>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartMenu.soyTemplateName = 'GH.tpl.reportcontroller.renderChartMenu';
}


GH.tpl.reportcontroller.renderChartTitle = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.activeChart.name) + '</h2>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartTitle.soyTemplateName = 'GH.tpl.reportcontroller.renderChartTitle';
}


GH.tpl.reportcontroller.renderChartIntro = function(opt_data, opt_ignored) {
  return '<div class="ghx-intro-content ghx-open"><div class="aui-group ghx-content-open">' + GH.tpl.reportcontroller.renderChartDescription(opt_data) + ((opt_data.activeChart.howTos) ? '<div class="aui-item ghx-item-how"><div class="aui-group ghx-group-how">' + GH.tpl.reportcontroller.renderChartHow(opt_data) + '</div></div>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartIntro.soyTemplateName = 'GH.tpl.reportcontroller.renderChartIntro';
}


GH.tpl.reportcontroller.renderChartDescription = function(opt_data, opt_ignored) {
  return '<div class="aui-item"><h4 class="ghx-margin-none"><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-help ghx-margin-right ' + soy.$$escapeHtml(opt_data.marginClass) + '"></span>' + soy.$$escapeHtml('How to read this chart') + '</h4><p>' + soy.$$escapeHtml(opt_data.activeChart.description) + '</p><p>' + ((opt_data.activeChart.documentation) ? aui.buttons.button({extraAttributes: {href: opt_data.activeChart.documentation, target: '_blank'}, text: 'Learn more', tagName: 'a'}) : '') + aui.buttons.button({extraClasses: ['aui-button-link', 'js-chart-intro-toggle'], text: 'Hide this information'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartDescription.soyTemplateName = 'GH.tpl.reportcontroller.renderChartDescription';
}


GH.tpl.reportcontroller.renderChartDescriptionClosed = function(opt_data, opt_ignored) {
  return '<div class="ghx-howto-trigger ghx-closed"><span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-help"></span> ' + aui.buttons.button({extraClasses: ['aui-button-link', 'js-chart-intro-toggle'], text: 'How to read this chart', tagName: 'a'}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartDescriptionClosed.soyTemplateName = 'GH.tpl.reportcontroller.renderChartDescriptionClosed';
}


GH.tpl.reportcontroller.renderChartHow = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.activeChart.howTos) {
    var howToList120 = opt_data.activeChart.howTos;
    var howToListLen120 = howToList120.length;
    for (var howToIndex120 = 0; howToIndex120 < howToListLen120; howToIndex120++) {
      var howToData120 = howToList120[howToIndex120];
      output += GH.tpl.reportcontroller.renderChartHowItem({howTitle: howToData120.title, howDescription: howToData120.description});
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartHow.soyTemplateName = 'GH.tpl.reportcontroller.renderChartHow';
}


GH.tpl.reportcontroller.renderChartHowItem = function(opt_data, opt_ignored) {
  return '<div class="aui-item"><svg class="ghx-svg-chart"></svg><strong class="ghx-how-title">' + soy.$$escapeHtml(opt_data.howTitle) + '</strong><div class="ghx-how-description">' + soy.$$escapeHtml(opt_data.howDescription) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reportcontroller.renderChartHowItem.soyTemplateName = 'GH.tpl.reportcontroller.renderChartHowItem';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ReportUrlState.js' */
!function(){"use strict";var r=require("jira-agile/rapid/const/PageMode");GH.ReportUrlState={},GH.ReportUrlState.self="ReportUrlState",GH.ReportUrlState.isApplicable=function(t){return t.mode===r.REPORT},GH.ReportUrlState.getNormalizedFromUrl=function(r,t){GH.ReportController.init();var e=t.chart=GH.RapidBoard.UrlState.normalizeStringParam(r.chart,""),o=GH.ReportController.getChart(e);o&&_.defaults(t,o.controller.getNormalizedFromUrl(r))},GH.ReportUrlState.toUrl=function(r,t){var e=t.chart=r.chart,o=GH.ReportController.getChart(e);o&&_.defaults(t,o.controller.toUrl(r))},GH.ReportUrlState.getNormalizedFromInternal=function(r){GH.ReportController.init();var t=GH.ReportController.getCurrentChart();if(r.chart=GH.RapidBoard.State.getChartType(),!GH.ReportController.isApplicableChart(r.chart,r)){var e=GH.ReportController.getApplicableCharts(r);e&&(t=e[0],r.chart=t.id)}t&&_.defaults(r,t.controller.getNormalizedFromInternal())},GH.ReportUrlState.updateInternalFromNormalized=function(r){GH.ReportController.init(),GH.RapidBoard.State.setChartType(r.chart);var t=GH.ReportController.getChart(r.chart);t&&t.controller.updateInternalFromNormalized(r)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/Chart.js' */
define("jira-agile/rapid/ui/chart/chart",["require"],function(r){"use strict";var e=r("jquery"),i=GH.Layout,n={};return n.EVENT_RESIZE_REDRAW="gh.chart.resize_redraw",n.defaultOptions={colors:["#9eb6d4","#afd8f8","#cb4b4b","#4da74d","#9440ed"],grid:{backgroundColor:"#fff",borderColor:"#bbb",borderWidth:1,internalLineWidth:0,labelMargin:2,minBorderMargin:1},legend:{container:"#ghx-chart-legend",noColumns:1},shadowSize:0,xaxis:{tickLength:4},yaxis:{tickLength:4}},n.draw=function(r,i,t,d){i=e(i);var a=e.extend(!0,{},n.defaultOptions);d&&e.extend(!0,a,d);var o=e.plot(i,t,a);return n.bindToWindowSize(r,o),o},n.bindToWindowSize=function(r,t){e(GH).bind(i.EVENT_DELAYED_RESIZE+"."+r,function(){e(GH).trigger(n.EVENT_RESIZE_REDRAW,{id:r,chart:t});try{t.resize(),t.setupGrid(),t.draw()}catch(i){}})},n.destroy=function(r){e(GH).unbind(i.EVENT_DELAYED_RESIZE+"."+r)},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartUtils.js' */
!function(){"use strict";var t=require("aui/inline-dialog");GH.ChartUtils={},GH.ChartUtils.oneMinuteInMillis=6e4,GH.ChartUtils.oneHourInMillis=60*GH.ChartUtils.oneMinuteInMillis,GH.ChartUtils.oneDayInMillis=24*GH.ChartUtils.oneHourInMillis,GH.ChartUtils.fixButtons=function(t){var r,a,e,i,n,o=AJS.$(t).find(".aui-buttons");o.each(function(){a=AJS.$(this).position(),e=a.left,r=AJS.$(this).find(".aui-button"),r.each(function(){i=AJS.$(this).position(),n=i.left,n===e&&(AJS.$(this).addClass("first"),AJS.$(this).prev(".aui-button").addClass("last"))})})},GH.ChartUtils.registerInlineDialogHacks=function(r){AJS.$(document).bind("showLayer",function(a,e,i){"inlineDialog"===e&&AJS&&t&&t.current&&t.current.id===r&&(i._validateClickToClose=function(r){return!(AJS.$(r.target).parents(".calendar").length>0)&&!(AJS.$(r.target).parents("#inline-dialog-"+t.current.id).length>0)},AJS.$("body").unbind("click."+t.current.id+".inline-dialog-check"),setTimeout(function(){t.current&&t.current.id&&GH.ChartUtils.fixButtons("#inline-dialog-"+t.current.id)},0))})},GH.ChartUtils.createIssueJql=function(t){var r=_.pluck(t,"key");return"issueKey in ("+r.join(",")+")"},GH.ChartUtils.createEpicJql=function(t){return'"'+GH.EpicConfig.getEpicLinkFieldName()+'" = "'+t.key+'"'},GH.ChartUtils.createVersionJql=function(t){return"fixVersion="+encodeURIComponent(t.jqlEncodedName)+" AND project="+t.projectKey},GH.ChartUtils.createStatusJql=function(t){var r=_.pluck(t,"name");return'Status IN ("'+r.join('","')+'")'},GH.ChartUtils.getStatisticConsumer=function(t){var r=require("jira-agile/rapid/ui/chart/burndown-timeline-producer");return t?r.TimeTrackingStatisticConsumer:r.EstimateStatisticConsumer},GH.ChartUtils.renderStatisticText=function(t,r,a){r=!_.isUndefined(r)&&r;var e=r?Math.abs(t):t;if("duration"===a){var i=!r&&t<0?"-":"";return e=Math.abs(e),i+GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e)}return GH.NumberFormat.format(e)},GH.ChartUtils.renderUTCMillisAsDate=function(t){return GH.ChartUtils.renderUTCMillisInFormat(t,GH.ChartTimeFrames.momentTimeFormat)},GH.ChartUtils.renderUTCMillisAsDateWithoutTime=function(t){return GH.ChartUtils.renderUTCMillisInFormat(t,GH.ChartTimeFrames.momentDateFormat)},GH.ChartUtils.renderUTCMillisInFormat=function(t,r){var a=moment.utc(t).format(r);return a},GH.ChartUtils.getTimeFrameReportUrlParams=function(t){var r={days:GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.days",7),swimlane:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.swimlanes",[]),column:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.columns."+t,[]),quickFilter:GH.RapidBoard.State.getBoardSetting(null,"chart.filters.quickFilters",[])};return r.days===-1?(r.from=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.from"),r.to=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.to")):(r.from=0,r.to=0),r},GH.ChartUtils.timeFrameReportParamsToUrl=function(t){var r={};return t.swimlane&&t.swimlane.length>0&&(r.swimlane=t.swimlane),t.column&&t.column.length>0&&(r.column=t.column),t.quickFilter&&t.quickFilter.length>0&&(r.quickFilter=t.quickFilter),t.days===-1?(r.from=new Date(t.from).print(GH.RapidBoard.UrlState.dateFormat),r.to=new Date(t.to).print(GH.RapidBoard.UrlState.dateFormat)):t.days>0&&(r.days=t.days),r},GH.ChartUtils.getNormalizedFromUrlForTimeFrameReport=function(t){var r={swimlane:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.swimlane),column:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.column),quickFilter:GH.RapidBoard.UrlState.normalizeNumberArrayParam(t.quickFilter)},a=GH.RapidBoard.UrlState.normalizeNumberParam(t.days,0),e=GH.RapidBoard.UrlState.normalizeDateParam(t.from,null),i=GH.RapidBoard.UrlState.normalizeDateParam(t.to,null);return null!==e&&null!==i?(r.days=-1,r.from=e.getTime(),r.to=i.getTime()):(r.days=a,r.from=0,r.to=0),r},GH.ChartUtils.getChartOptions=function(t){var r=require("jira-agile/rapid/ui/chart/chart-controller");return{xaxis:{mode:"time",min:t.getXAxisStart(),max:t.getXAxisEnd()},yaxes:t.getYAxes(),legend:{container:AJS.$("#ghx-chart-legend"),backgroundOpacity:.5,position:"se"},grid:{markings:r.getNonWorkingBlocks,hoverable:!0,clickable:!1,autoHighlight:!1},mouseEnterExitEvents:!0}},GH.ChartUtils.updateFromNormalizedStateDateTimeParams=function(t){GH.RapidBoard.State.setBoardSetting("chart.timeframe.days",t.days),GH.RapidBoard.State.setBoardSetting("chart.timeframe.from",t.from),GH.RapidBoard.State.setBoardSetting("chart.timeframe.to",t.to),GH.RapidBoard.State.setBoardSetting("chart.filters.swimlanes",t.swimlane),GH.RapidBoard.State.setBoardSetting("chart.filters.columns."+t.chart,t.column),GH.RapidBoard.State.setBoardSetting("chart.filters.quickFilters",t.quickFilter)},GH.ChartUtils.calculateYProjection=function(t,r,a){function e(t){return _.isArray(t)?{x:t[0],y:t[1]}:t}t=e(t),r=e(r),a=e(a);var i=r.x-t.x,n=a.x-t.x,o=r.y-t.y,l=o*n/i;return l+t.y}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartColors.js' */
define("jira-agile/rapid/ui/chart/chart-colors",function(){"use strict";var e={estimate:"#89c495",trend:"#3b73af",scope:"#cccccc",completed:"#3b7fc4",issueCount:"#205081",unestimated:"#815b3a",unestimatedPercent:"#d04437",timeSpent:"#14892c",nonWorkingDays:"#f2f2f2",nonWorkingDaysWallboard:"#333",dashedMarking:"#000",releaseDate:"#999",wallboard:{backgroundColor:"#000",borderColor:"#999",textColor:"#999",tickColor:"#999"}};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/FlotChartUtils.js' */
GH.FlotChartUtils={},GH.FlotChartUtils.handlePlotClick=function(t,r,i){},GH.FlotChartUtils.deferredRenderPoints=function(t,r){r.save(),r.translate(t.getPlotOffset().left,t.getPlotOffset().top),r.strokeStyle="rgb(100, 100, 100)",r.fillStyle="rgba(255, 255, 255, 0.5)",_.each(t.realPointsPerSeries,function(t){_.each(t,function(t){GH.FlotChartUtils.drawPoint(r,t)})}),r.restore()},GH.FlotChartUtils.drawPoint=function(t,r){t.beginPath(),t.arc(r.x,r.y,3,0,2*Math.PI,!1),t.fill(),t.closePath(),t.stroke()},GH.FlotChartUtils.handleMouseOverStateChange=function(t,r){r.realPointsPerSeries={},r.draw()},GH.FlotChartUtils.setAndAlignAxisLabels=function(t,r,i){AJS.$("#ghx-axis-x").text(t),AJS.$("#ghx-axis-y").find(".ghx-inner").text(r),i&&AJS.$("#ghx-axis-y-right").find(".ghx-inner").text(i)},GH.FlotChartUtils.calculateYAxis=function(t,r){return"duration"===r.renderer?GH.FlotChartUtils.createYAxisForDuration(t):"issueCount"===r.typeId?GH.FlotChartUtils.createYAxisForIssueCount(t):{tickFormatter:GH.FlotChartUtils.numberFormatter}},GH.FlotChartUtils.issueCountFormatter=function(t,r){return t.toFixed(0)},GH.FlotChartUtils.durationFormatter=function(t,r){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(t,{timeFormat:GH.TimeFormatDisplays.HOURS,durationUnit:GH.TimeFormatDurationUnits.SECONDS})},GH.FlotChartUtils.numberFormatter=function(t,r){return GH.NumberFormat.format(t)},GH.FlotChartUtils.createYAxisForIssueCount=function(t){var r={tickFormatter:GH.FlotChartUtils.issueCountFormatter};return t<15?r.minTickSize=1:(numTicks=8,minTickSize=Math.ceil(t/numTicks),r.tickSize=minTickSize),r},GH.FlotChartUtils.createYAxisForDuration=function(t){var r=8,i=parseInt(t/r,10);0===t&&(i=3600);var e=i%3600;return 0!==e&&(i+=3600-e),{tickSize:i,tickFormatter:GH.FlotChartUtils.durationFormatter}},GH.FlotChartUtils.gatherPoints=function(t,r){for(var i=t.datapoints,e=i.points,a=i.pointsize,o=t.xaxis,n=t.yaxis,s=[],l=0;l<e.length;l+=a){var u=Math.ceil(l/a),c=r[u];if(!_.isEmpty(c)){var h=e[l],F=e[l+1];if(!(null==h||h<o.min||h>o.max||F<n.min||F>n.max)){var m=o.p2c(h),f=n.p2c(F);s.push({x:m,y:f,time:h,statValue:F})}}}return s};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/ChartPicker.js' */
define("jira-agile/rapid/ui/component/chart-picker",["require"],function(e){var t,i=e("jquery"),r=e("underscore"),n=e("jira-agile/rapid/global-events"),s=e("jira/ajs/select/single-select"),o=e("jira-agile/rapid/ui/chart/report-sla-tracker"),c=GH.tpl;n.on("pre-initialization",function(){t=GH.BoardState});var d=function(e,t){this.selectedItemStateKey=e,this.items=[],this.defaultItem=void 0,this.emptyItemsMsg=t||"There are no available sprints for this board."};d.prototype.setItems=function(e){this.items=e||[]},d.prototype.getItems=function(){return this.items},d.prototype.hasItems=function(){return!r.isEmpty(this.items)},d.prototype.getDefaultItem=function(){return this.defaultItem},d.prototype.getDefaultItemId=function(){return!!this.defaultItem&&this.defaultItem.id},d.prototype.setDefaultItem=function(e){this.defaultItem=e||void 0},d.prototype.getItemById=function(e){var t=r.find(this.items,function(t){return t.id.toString()===e.toString()});return!r.isUndefined(t)&&t},d.prototype.getSelectedItem=function(){var e,t=this.getStoredSelectedItemId();if(t&&(e=this.getItemById(t)),e||(this.getDefaultItem()?e=this.getDefaultItem():this.hasItems()&&(e=r.last(this.getItems()))),e){var i=this.getDefaultItemId()===e.id?-1:e.id;this.storeSelectedItemId(i)}return e||!1},d.prototype.setSelectedItem=function(e,t){this.previousSelectedItem=this.getSelectedItem();var r=this.getItemById(e);if(r){var n=this.getDefaultItemId()===r.id?-1:r.id;this.storeSelectedItemId(n)}else this.storeSelectedItemId(!1);t||i(this).trigger("selectedItemChanged",{item:r})},d.prototype.removeSelectedItemAndRevert=function(e){if(this.previousSelectedItem){var t=this.getSelectedItem().id;this.items=r.reject(this.items,function(e){return e.id===t}),this.setSelectedItem(this.previousSelectedItem.id),this.render(e)}},d.prototype.getStoredSelectedItemId=function(){return t.getPerViewValue(this.selectedItemStateKey,!1)},d.prototype.storeSelectedItemId=function(e){t.setPerViewValue(this.selectedItemStateKey,e||!1)},d.prototype.render=function(e){var t=this.items.length>1,r=this.getSelectedItem(),n=this,s=function(e,t){n.setSelectedItem(t.value())},d=function(t){n.showDropdown(t,function(){n.render(e)},s)};t?(e.html(c.component.chartpicker.renderSingleSelect({items:this.items,selectedItem:r})),i("#ghx-items-trigger").click(d)):r?e.html(c.component.chartpicker.renderSingleItem({selectedItemId:r.id,selectedItemName:r.name||""})):(i("#ghx-chart-content").html(c.component.chartpicker.renderEmpty({emptyItemsMsg:this.emptyItemsMsg})),o.checkReportAndFireSlaEvent(m(this.selectedItemStateKey))),i("#ghx-chart-picker-form").submit(function(){return!1})};var m=function(e){switch(e){case"burndown.selectedSprintId":return o.reportNames.burndown;case"sprintRetrospective.selectedSprintId":return o.reportNames.sprintReport;default:return o.reportNames.unknown}};return d.prototype.showDropdown=function(e,t,r){i(e.target).hide();var n=i("#ghx-chart-picker"),o=(new s({element:n,width:250,errorMessage:"",setMaxHeightToWindow:!0}),i("#ghx-chart-picker-field"));n.bind("selected",function(e,t){t.value()&&r(e,t),o.blur()}),o.blur(t),o.focus().select(),setTimeout(function(){i("#ghx-chart-picker-field").trigger("click")},20)},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/ChartPicker.soy' */
// This file was automatically generated from ChartPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.chartpicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.chartpicker == 'undefined') { GH.tpl.component.chartpicker = {}; }


GH.tpl.component.chartpicker.renderSingleItem = function(opt_data, opt_ignored) {
  return '<div class="ghx-selector-single" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItemId) + '">' + soy.$$escapeHtml(opt_data.selectedItemName) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderSingleItem.soyTemplateName = 'GH.tpl.component.chartpicker.renderSingleItem';
}


GH.tpl.component.chartpicker.renderEmpty = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(opt_data.emptyItemsMsg) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderEmpty.soyTemplateName = 'GH.tpl.component.chartpicker.renderEmpty';
}


GH.tpl.component.chartpicker.renderDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list" id="js-ghx-items-dropdown"><ul class="aui-list-section aui-first aui-last">';
  var itemList14 = opt_data.items;
  var itemListLen14 = itemList14.length;
  for (var itemIndex14 = 0; itemIndex14 < itemListLen14; itemIndex14++) {
    var itemData14 = itemList14[itemIndex14];
    output += (itemData14.id != opt_data.itemId) ? '<li class="aui-list-item" data-value="' + soy.$$escapeHtml(itemData14.id) + '"><a class="aui-list-item-link">' + soy.$$escapeHtml(itemData14.name) + '</a></li>' : '';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderDropdown.soyTemplateName = 'GH.tpl.component.chartpicker.renderDropdown';
}


GH.tpl.component.chartpicker.renderSingleSelect = function(opt_data, opt_ignored) {
  var output = '<form id="ghx-chart-picker-form" class="aui ghx-chart-picker">' + aui.buttons.button({id: 'ghx-items-trigger', tagName: 'a', extraClasses: ['js-nav-items', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: opt_data.selectedItem.name, extraAttributes: {'data-item-id': opt_data.selectedItem.id}}) + '<select id="ghx-chart-picker" class="hidden"><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList37 = opt_data.items;
  var itemListLen37 = itemList37.length;
  for (var itemIndex37 = 0; itemIndex37 < itemListLen37; itemIndex37++) {
    var itemData37 = itemList37[itemIndex37];
    output += (itemData37.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData37.id) + '">' + soy.$$escapeHtml(itemData37.name) + '</option>' : '';
  }
  output += '</select></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.chartpicker.renderSingleSelect.soyTemplateName = 'GH.tpl.component.chartpicker.renderSingleSelect';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/EstimatePicker.js' */
define("jira-agile/rapid/ui/component/estimate-picker",["require"],function(t){var e=t("jquery"),i=t("underscore"),r=t("jira-agile/rapid/ui/chart/chart-view"),s=t("jira/ajs/select/single-select"),n=t("jira-agile/rapid/ajax"),a=GH.BoardState,o=GH.RapidBoard.State,c=GH.tpl,d=function(t,e){this.selectedItemStateKey=t,this.items=[],this.defaultItem=void 0,this.supportTimeTracking=e};return d.prototype.setItems=function(t){this.items=t||[]},d.prototype.getItems=function(){return this.items},d.prototype.hasItems=function(){return!i.isEmpty(this.items)},d.prototype.getDefaultItem=function(){return this.defaultItem},d.prototype.getDefaultItemId=function(){return!!this.defaultItem&&this.defaultItem.id},d.prototype.setDefaultItem=function(t){this.defaultItem=t||void 0},d.prototype.getItemById=function(t){var e=i.find(this.items,function(e){return e.id===t});return e},d.prototype.getSelectedItem=function(){var t=this.getStoredSelectedItemId(),e=t?this.getItemById(t):null;return e||(this.getDefaultItem()?e=this.getDefaultItem():this.hasItems()&&(e=i.last(this.getItems())),this.storeSelectedItemId(),o.pushState()),e||!1},d.prototype.setSelectedItem=function(t,i){this.previousSelectedItem=this.getSelectedItem();var r=this.getItemById(t);r?this.storeSelectedItemId(t):this.storeSelectedItemId(),i||e(this).trigger("selectedItemChanged",{item:r})},d.prototype.getStoredSelectedItemId=function(){return a.getPerViewValue(this.selectedItemStateKey,null)},d.prototype.storeSelectedItemId=function(t){a.setPerViewValue(this.selectedItemStateKey,t)},d.prototype.render=function(t){var i=this.items.length>1,r=this.getSelectedItem(),s=this,n=function(t,e){s.setSelectedItem(e.value())},a=function(e){s.showDropdown(e,function(){s.render(t)},n)};i?(t.html(c.component.estimatePicker.renderSingleSelect({items:this.items,selectedItem:r})),e("#ghx-estimate-picker-trigger").click(a)):r&&t.html(c.component.estimatePicker.renderSingleItem({selectedItemId:r.id,selectedItemName:r.name||""})),e("#ghx-estimate-picker-form").submit(function(){return!1})},d.prototype.showDropdown=function(t,i,r){e(t.target).hide();var n=e("#ghx-estimate-picker"),a=(new s({element:n,width:250,errorMessage:"",setMaxHeightToWindow:!0}),e("#ghx-estimate-picker-field"));n.bind("selected",function(t,e){e.value()&&r(t,e),a.blur()}),a.blur(i),a.focus().select(),setTimeout(function(){e("#ghx-estimate-picker-field").trigger("click")},20)},d.prototype.load=function(t,i){var s=this;return n.get({url:"/rapidviewconfig/estimation.json",data:{rapidViewId:t}},"rapidBoardEstimateStatistics").done(function(t){if(t.availableEstimationStatistics){var n=t.availableEstimationStatistics,a=t.currentEstimationStatistic;s.supportTimeTracking&&t.currentTrackingStatistic.isEnabled&&(n.push(t.currentTrackingStatistic),a=t.currentTrackingStatistic),s.setItems(n),s.setDefaultItem(a);var o=function(){var t=s.getSelectedItem().id;i(t)};e(s).bind("selectedItemChanged",o),s.render(r.getChartControls(!0)),r.showChartControls()}})},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/EstimatePicker.soy' */
// This file was automatically generated from EstimatePicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.estimatePicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.estimatePicker == 'undefined') { GH.tpl.component.estimatePicker = {}; }


GH.tpl.component.estimatePicker.renderSingleItem = function(opt_data, opt_ignored) {
  return '<div class="ghx-selector-single" data-item-id="' + soy.$$escapeHtml(opt_data.selectedItemId) + '">' + soy.$$escapeHtml(opt_data.selectedItemName) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderSingleItem.soyTemplateName = 'GH.tpl.component.estimatePicker.renderSingleItem';
}


GH.tpl.component.estimatePicker.renderEmpty = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml(opt_data.emptyItemsMsg) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderEmpty.soyTemplateName = 'GH.tpl.component.estimatePicker.renderEmpty';
}


GH.tpl.component.estimatePicker.renderDropdown = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list" id="js-ghx-estimate-items-dropdown"><ul class="aui-list-section aui-first aui-last">';
  var itemList14 = opt_data.items;
  var itemListLen14 = itemList14.length;
  for (var itemIndex14 = 0; itemIndex14 < itemListLen14; itemIndex14++) {
    var itemData14 = itemList14[itemIndex14];
    output += (itemData14.id != opt_data.itemId) ? '<li class="aui-list-item" data-value="' + soy.$$escapeHtml(itemData14.id) + '"><a class="aui-list-item-link">' + soy.$$escapeHtml(itemData14.name) + '</a></li>' : '';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderDropdown.soyTemplateName = 'GH.tpl.component.estimatePicker.renderDropdown';
}


GH.tpl.component.estimatePicker.renderSingleSelect = function(opt_data, opt_ignored) {
  var output = '<form id="ghx-estimate-picker-form" class="aui ghx-estimate-picker">' + aui.buttons.button({id: 'ghx-estimate-picker-trigger', tagName: 'a', extraClasses: ['js-nav-items', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: opt_data.selectedItem.name, extraAttributes: {'data-item-id': opt_data.selectedItem.id}}) + '<select id="ghx-estimate-picker" class="hidden"><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList37 = opt_data.items;
  var itemListLen37 = itemList37.length;
  for (var itemIndex37 = 0; itemIndex37 < itemListLen37; itemIndex37++) {
    var itemData37 = itemList37[itemIndex37];
    output += (itemData37.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData37.id) + '">' + soy.$$escapeHtml(itemData37.name) + '</option>' : '';
  }
  output += '</select></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.estimatePicker.renderSingleSelect.soyTemplateName = 'GH.tpl.component.estimatePicker.renderSingleSelect';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartTooltip.js' */
GH.ChartTooltip=function(t,e,a){this.item=t,this.data=e,this.type=a},GH.ChartTooltip.prototype.render=function(){var t,e=require("jira-agile/rapid/ui/chart/change-event");t=this.type===e.releaseDate?AJS.$(GH.tpl.charttooltip.renderReleaseDatePredictionTooltip({data:this.data})):this.type===e.startDate?AJS.$(GH.tpl.charttooltip.renderStartDateTooltip({data:this.data})):this.type===e.uncertainty?AJS.$(GH.tpl.charttooltip.renderUncertainty({tooltipData:this.data})):AJS.$(GH.tpl.charttooltip.renderTooltip({tooltipData:this.data}));var a=this.item.pageX,i=this.item.pageY,o=this.item.series;t.css({position:"absolute",display:"none",top:i+5,"border-left-color":o.color}),t.appendTo("body");var r=t.width(),s=AJS.$("#ghx-chart-view canvas.base");a+r>s.offset().left+s.width()?t.css({left:a-(30+r)}):t.css({left:a+15}),t.fadeIn(200)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartTooltip.soy' */
// This file was automatically generated from ChartTooltip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.charttooltip.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.charttooltip == 'undefined') { GH.tpl.charttooltip = {}; }


GH.tpl.charttooltip.renderTooltip = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip">';
  if (opt_data.tooltipData.initial || opt_data.tooltipData.complete) {
    output += '<strong>' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.tooltipData.issueCount)) + '</strong><br/>' + soy.$$escapeHtml(opt_data.tooltipData.event.type) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.statisticName) + ': ' + soy.$$escapeHtml(opt_data.tooltipData.statisticValue) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.dateText);
  } else {
    var changeList17 = opt_data.tooltipData.changes;
    var changeListLen17 = changeList17.length;
    for (var changeIndex17 = 0; changeIndex17 < changeListLen17; changeIndex17++) {
      var changeData17 = changeList17[changeIndex17];
      output += '<strong>' + soy.$$escapeHtml(changeData17.key) + '</strong><br/>' + ((changeData17.event.typeAsHtml) ? soy.$$filterNoAutoescape(changeData17.event.type) : soy.$$escapeHtml(changeData17.event.type)) + '<br/>' + soy.$$escapeHtml(changeData17.event.detail) + '<br/>&#x394; ' + soy.$$escapeHtml(changeData17.statisticName) + ': ' + soy.$$escapeHtml(changeData17.statisticDelta) + '<br />';
    }
    output += soy.$$escapeHtml(opt_data.tooltipData.dateText);
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderTooltip';
}


GH.tpl.charttooltip.renderReleaseDatePredictionTooltip = function(opt_data, opt_ignored) {
  return '<div id="ghx-tooltip"><strong>' + soy.$$escapeHtml(opt_data.data.description) + '</strong><br />' + soy.$$escapeHtml(opt_data.data.predictedReleaseDate) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderReleaseDatePredictionTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderReleaseDatePredictionTooltip';
}


GH.tpl.charttooltip.renderStartDateTooltip = function(opt_data, opt_ignored) {
  return '<div id="ghx-tooltip"><strong>' + soy.$$escapeHtml(opt_data.data.description) + '</strong><br />' + soy.$$escapeHtml(opt_data.data.dateText) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderStartDateTooltip.soyTemplateName = 'GH.tpl.charttooltip.renderStartDateTooltip';
}


GH.tpl.charttooltip.renderUncertainty = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip">';
  var changeList51 = opt_data.tooltipData.changes;
  var changeListLen51 = changeList51.length;
  for (var changeIndex51 = 0; changeIndex51 < changeListLen51; changeIndex51++) {
    var changeData51 = changeList51[changeIndex51];
    output += '<strong>' + soy.$$escapeHtml(changeData51.key) + '</strong><br/>' + soy.$$escapeHtml(changeData51.event.detail) + '<br/>';
  }
  output += soy.$$filterNoAutoescape(AJS.format('{0}% Unestimated Issues',opt_data.tooltipData.unestimated)) + '<br />' + soy.$$escapeHtml(opt_data.tooltipData.dateText) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttooltip.renderUncertainty.soyTemplateName = 'GH.tpl.charttooltip.renderUncertainty';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartController.js' */
define("jira-agile/rapid/ui/chart/chart-controller",["require"],function(i){"use strict";var r=i("underscore"),a=i("jira-agile/rapid/ui/chart/burndown-rate"),n=i("jira-agile/rapid/ui/chart/chart-colors"),o=GH.RapidViewConfig,e={};return e.loadRapidViewConfig=function(i,r){var a=function(a){i.displayed&&(i.rapidViewConfig=a,r(a))};o.fetchConfiguration(i.rapidViewData.id).done(a)},e.getNonWorkingBlocks=function(){var i=a.getNonWorkingDays(),o=r.map(i,function(i){return{xaxis:{from:i.start,to:i.end},color:n.nonWorkingDays}});return o},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartView.js' */
define("jira-agile/rapid/ui/chart/chart-view",["require","jira-agile/rapid/wrm-spa-utils"],function(t,r){"use strict";var e=t("jquery"),n={};return n.getChartContentElem=function(t){return n.chartContentElem&&!t||(n.chartContentElem=e("#ghx-chart-content")),n.chartContentElem},n.getChartGroup=function(t){return n.chartGroup&&!t||(n.chartGroup=e("#ghx-chart-group")),n.chartGroup},n.getChartStatus=function(t){return n.chartStatus&&!t||(n.chartStatus=e("#ghx-chart-status")),n.chartStatus},n.getChartView=function(t){return n.chartView&&!t||(n.chartView=e("#ghx-chart-view")),n.chartView},n.getChartControls=function(t){return n.chartControls&&!t||(n.chartControls=e("#ghx-chart-controls")),n.chartControls},n.getChartAllControlsElem=function(t){return n.chartAllControlsElem&&!t||(n.chartAllControlsElem=e("#ghx-chart-options")),n.chartAllControlsElem},n.getChartTimeControlsElem=function(t){return n.chartTimeControlsElem&&!t||(n.chartTimeControlsElem=e("#ghx-chart-options-time")),n.chartTimeControlsElem},n.getChartSelector=function(t){return n.chartSelector&&!t||(n.chartSelector=e("#ghx-chart-selector")),n.chartSelector},n.getChartLegend=function(t){return n.chartLegend&&!t||(n.chartLegend=e("#ghx-chart-legend")),n.chartLegend},n.getChartLegendD3=function(t){return n.chartLegendD3&&!t||(n.chartLegendD3=e(".ghx-chart-legend")),n.chartLegendD3},n.getChartSnapshot=function(t){return n.chartSnapshot&&!t||(n.chartSnapshot=e("#ghx-chart-snapshot")),n.chartSnapshot},n.getSprintActions=function(t){return n.sprintActions&&!t||(n.sprintActions=e("#ghx-chart-sprint-actions")),n.sprintActions},n.showChartGroup=function(){n.getChartGroup().show()},n.hideChartGroup=function(){n.getChartGroup().hide()},n.showChartStatus=function(){n.getChartStatus().show()},n.hideChartStatus=function(){n.getChartStatus().hide()},n.hideChartControls=function(){n.getChartControls().hide()},n.showChartControls=function(){n.getChartControls().show()},n.showSpinner=function(){var t=n.getChartGroup(!0);0===t.find(".ghx-chart-blanket.js-blanket-spinner").length&&(e('<div>    <div class="adg-throbber">       <span class="adg-throbber-container">           <span class="adg-throbber-spinner" size="48">               <svg                   class="adg-throbber-svg"                   focusable="false"                   height="48"                   size="48"                   viewBox="0 0 48 48"                   width="48"                   xmlns="http://www.w3.org/2000/svg"               >                   <circle cx="24" cy="24" r="21.5"></circle>               </svg>           </span>       </span>   </div></div>').addClass("ghx-chart-blanket js-blanket-spinner").appendTo(t),e(".ghx-chart-blanket .adg-throbber").show()),r.sendSpinnerShowEvent("report")},n.hideSpinner=function(){var t=n.getChartGroup(!0);t.find(".ghx-chart-blanket.js-blanket-spinner").remove(),r.sendSpinnerHideEvent("report")},n.showBlankStateMessage=function(t){var r=n.getChartGroup(!0),a=r.find(".ghx-chart-blanket.ghx-blank-state").empty();0===a.length&&(a=e("<div></div>").addClass("ghx-chart-blanket ghx-blank-state").appendTo(r)),a.append(t)},n.hideBlankStateMessage=function(){n.getChartGroup(!0).find(".ghx-chart-blanket.ghx-blank-state").remove()},n.showIE8SupportMessage=function(t){var r=n.getChartContentElem(),a=r.find(".ghx-chart-blanket.ghx-no-ie8").empty();0===a.length&&(a=e("<div></div>").addClass("ghx-chart-blanket ghx-blank-state").appendTo(r)),a.append(t)},n.hideIE8SupportMessage=function(){n.getChartContentElem(!0).find(".ghx-chart-blanket.ghx-no-ie8").remove()},n.showToast=function(){function t(t){var r=e("#ghx-report-scrollarea"),n=r.offset().top-t.offset().top;return Math.max(n,0)+o}var r=1e3,a=500,h=1e3,o=20,s=null;return function(c){var i=n.getChartGroup(!0),l=i.find(".ghx-chart-toast");0===l.length&&(l=e("<div></div>").addClass("ghx-chart-toast").appendTo(i)),l.stop().text(c).css({opacity:0,top:t(i),right:o}).animate({opacity:.9},a),null!==s&&clearTimeout(s),s=setTimeout(function(){l.closest("html").length&&l.fadeOut(h,function(){l.remove()})},r)}}(),n.showChartUpdatedToast=function(){n.showToast("Chart updated")},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartView.soy' */
// This file was automatically generated from ChartView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.chartview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.chartview == 'undefined') { GH.tpl.chartview = {}; }


GH.tpl.chartview.renderChartControls = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-timeframe">' + GH.tpl.charttimeframes.renderChartTimeFrame(null) + '</div><div id="ghx-chart-filter">' + GH.tpl.chartfilters.renderChartFilter(null) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderChartControls.soyTemplateName = 'GH.tpl.chartview.renderChartControls';
}


GH.tpl.chartview.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-overview-group"><h4></h4><p class="ghx-description"></p><div id="ghx-chart-overview"></div></div><div id="ghx-chart-legend"></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderChartBody.soyTemplateName = 'GH.tpl.chartview.renderChartBody';
}


GH.tpl.chartview.renderDataExceeded = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning closeable"><p><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('Maximum number of viewable issues exceeded for this chart.') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderDataExceeded.soyTemplateName = 'GH.tpl.chartview.renderDataExceeded';
}


GH.tpl.chartview.renderCfdTooltip = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-tooltip"' + ((opt_data.changes.length > 8) ? 'class="ghx-alt"' : '') + '>';
  if (opt_data.changes.length > 8) {
    var changeList22 = opt_data.changes;
    var changeListLen22 = changeList22.length;
    for (var changeIndex22 = 0; changeIndex22 < changeListLen22; changeIndex22++) {
      var changeData22 = changeList22[changeIndex22];
      output += ((! (changeIndex22 == 0)) ? ', ' : '') + '<strong>' + soy.$$escapeHtml(changeData22.key) + '</strong>: ' + ((changeData22.columnFrom) ? soy.$$escapeHtml(changeData22.columnFrom) + ' >> ' : '') + ((changeData22.columnTo) ? soy.$$escapeHtml(changeData22.columnTo) : '');
    }
  } else {
    var changeList38 = opt_data.changes;
    var changeListLen38 = changeList38.length;
    for (var changeIndex38 = 0; changeIndex38 < changeListLen38; changeIndex38++) {
      var changeData38 = changeList38[changeIndex38];
      output += ((! (changeIndex38 == 0)) ? '<br/>' : '') + '<strong>' + soy.$$escapeHtml(changeData38.key) + '</strong><br/>' + ((changeData38.columnFrom) ? soy.$$escapeHtml(changeData38.columnFrom) + ' >> ' : '') + ((changeData38.columnTo) ? soy.$$escapeHtml(changeData38.columnTo) : '');
    }
  }
  output += '<br/>' + soy.$$escapeHtml(opt_data.time) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartview.renderCfdTooltip.soyTemplateName = 'GH.tpl.chartview.renderCfdTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartFilters.js' */
!function(){"use strict";var t=require("aui/inline-dialog");GH.ChartFilters={},GH.ChartFilters.rapidViewConfig={},GH.ChartFilters.columns=[],GH.ChartFilters.quickFilters=[],GH.ChartFilters.swimlanes=[],GH.ChartFilters.chartType=null,GH.ChartFilters.defaultColumns=[],GH.ChartFilters.init=function(){GH.ChartUtils.registerInlineDialogHacks("chartFiltersInlineDialog")},GH.ChartFilters.update=function(t,i,e){GH.ChartFilters.chartType=t,GH.ChartFilters.rapidViewConfig=i,GH.ChartFilters.defaultColumns=e.defaultColumns,GH.ChartFilters.initializeColumns(t),GH.ChartFilters.initializeQuickFilters(t),GH.ChartFilters.initializeSwimlanes(t);var r=GH.ChartFilters.getDefaultColumnIds(),a=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.columns."+t,r);a.length<1&&(a=r),GH.ChartFilters.setActiveColumnIds(a);var l=GH.ChartFilters.getDefaultQuickFilterIds(),s=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.quickFilters",l);GH.ChartFilters.setActiveQuickFilterIds(s);var n=GH.ChartFilters.getDefaultSwimlaneIds(),u=GH.RapidBoard.State.getNumberArrayBoardSetting(null,"chart.filters.swimlanes",n);u.length<1&&(u=n),GH.ChartFilters.setActiveSwimlaneIds(u),GH.ChartFilters.updateFilterInfo()},GH.ChartFilters.updateFilterInfo=function(){var t=GH.ChartFilters.isDefaultColumns()&&GH.ChartFilters.isDefaultQuickFilters()&&GH.ChartFilters.isDefaultSwimlanes(),i=AJS.$("#js-chart-filter"),e=AJS.$(i).find(".aui-icon"),r=AJS.$(e).text();t?(i.addClass("ghx-icon-hide"),e.removeAttr("title")):(i.removeClass("ghx-icon-hide"),e.attr("title",r))},GH.ChartFilters.addRequestParams=function(t){var i=[];_.each(GH.ChartFilters.swimlanes,function(t,e){t.active&&i.push(t.id)}),i.length>0&&(t.swimlaneId=i);var e=[];_.each(GH.ChartFilters.quickFilters,function(t,i){t.active&&e.push(t.id)}),e.length>0&&(t.quickFilterId=e);var r=[];_.each(GH.ChartFilters.columns,function(t){t.active&&r.push(t.id)}),r.length>0&&(t.columnId=r)},GH.ChartFilters.initializeColumns=function(t){for(var i=GH.ChartFilters.rapidViewConfig.columns,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.columns=e},GH.ChartFilters.getColumns=function(){return GH.ChartFilters.columns},GH.ChartFilters.isDefaultColumns=function(){for(var t=GH.ChartFilters.getDefaultColumns(),i=0;i<GH.ChartFilters.columns.length;i++)if(GH.ChartFilters.columns[i].active!=t[i])return!1;return!0},GH.ChartFilters.getDefaultColumnIds=function(){for(var t=GH.ChartFilters.getDefaultColumns(),i=[],e=0;e<GH.ChartFilters.columns.length;e++)t[e]&&i.push(GH.ChartFilters.columns[e].id);return i},GH.ChartFilters.getActiveColumns=function(){return _.filter(GH.ChartFilters.columns,function(t){return t.active})},GH.ChartFilters.getActiveColumnIds=function(){for(var t=[],i=0;i<GH.ChartFilters.columns.length;i++)GH.ChartFilters.columns[i].active&&t.push(GH.ChartFilters.columns[i].id);return t},GH.ChartFilters.setActiveColumnIds=function(t){_.each(GH.ChartFilters.columns,function(i){i.active=!1,_.each(t,function(t){t==i.id&&(i.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.columns."+GH.ChartFilters.chartType,t)},GH.ChartFilters.getDefaultColumns=function(){return GH.ChartFilters.defaultColumns},GH.ChartFilters.isColumnActive=function(t){var i=GH.ChartFilters.getColumn(t);return!!i&&i.active},GH.ChartFilters.getColumn=function(t){for(var i=0;i<GH.ChartFilters.columns.length;i++){var e=GH.ChartFilters.columns[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeQuickFilters=function(t){for(var i=GH.ChartFilters.rapidViewConfig.quickFilters,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.quickFilters=e},GH.ChartFilters.isDefaultQuickFilters=function(){return 0===GH.ChartFilters.getActiveQuickFilterIds().length},GH.ChartFilters.getDefaultQuickFilterIds=function(){return[]},GH.ChartFilters.getActiveQuickFilterIds=function(){var t=[];return _.each(GH.ChartFilters.quickFilters,function(i){i.active&&t.push(i.id)}),t},GH.ChartFilters.setActiveQuickFilterIds=function(t){_.each(GH.ChartFilters.quickFilters,function(i){i.active=!1,_.each(t,function(t){t==i.id&&(i.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.quickFilters",t)},GH.ChartFilters.getQuickFilters=function(){return GH.ChartFilters.quickFilters},GH.ChartFilters.isQuickFilterActive=function(t){var i=GH.ChartFilters.getQuickFilter(t);return!!i&&i.active},GH.ChartFilters.getQuickFilter=function(t){for(var i=0;i<GH.ChartFilters.quickFilters.length;i++){var e=GH.ChartFilters.quickFilters[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeSwimlanes=function(t){for(var i=GH.ChartFilters.rapidViewConfig.swimlanes,e=[],r=0;r<i.length;r++){var a=i[r];e.push({id:a.id,name:a.name,active:!1})}GH.ChartFilters.swimlanes=e},GH.ChartFilters.isDefaultSwimlanes=function(){return GH.ChartFilters.getDefaultSwimlaneIds().length==GH.ChartFilters.getActiveSwimlaneIds().length},GH.ChartFilters.getDefaultSwimlaneIds=function(){var t=[];return _.each(GH.ChartFilters.swimlanes,function(i){t.push(i.id)}),t},GH.ChartFilters.getActiveSwimlaneIds=function(){var t=[];return _.each(GH.ChartFilters.swimlanes,function(i){i.active&&t.push(i.id)}),t},GH.ChartFilters.setActiveSwimlaneIds=function(t){var i=_.filter(t,function(t){return _.find(GH.ChartFilters.swimlanes,function(i){return t==i.id})});0===i.length&&(i=_.pluck(GH.ChartFilters.swimlanes,"id")),_.each(GH.ChartFilters.swimlanes,function(t){t.active=!1,_.each(i,function(i){i==t.id&&(t.active=!0)})}),GH.RapidBoard.State.setNumberArrayBoardSetting("chart.filters.swimlanes",i)},GH.ChartFilters.getSwimlanes=function(){return GH.ChartFilters.swimlanes},GH.ChartFilters.isSwimlaneActive=function(t){var i=GH.ChartFilters.getSwimlane(t);return!!i&&i.active},GH.ChartFilters.getSwimlane=function(t){for(var i=0;i<GH.ChartFilters.swimlanes.length;i++){var e=GH.ChartFilters.swimlanes[i];if(e.id==t)return e}return!1},GH.ChartFilters.initializeDialog=function(){AJS.$("#inline-dialog-chartFiltersInlineDialog").remove(),t.current&&t.current.hide();var i={width:500,cacheContent:!1,hideDelay:6e4};t("#js-chart-filter","chartFiltersInlineDialog",GH.ChartFilters.renderChartFiltersDialog,i)},GH.ChartFilters.renderChartFiltersDialog=function(i,e,r){var a=GH.ChartFilters.getColumns(),l=GH.ChartFilters.getSwimlanes(),s=GH.ChartFilters.getQuickFilters();i.html(GH.tpl.chartfilters.renderChartFilters({columns:a,swimlanes:l,quickFilters:s})),i.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),i.find(".js-toggle").click(function(t){t.preventDefault();var e=AJS.$(this),r=e.hasClass("active"),a=!r;a?e.addClass("active"):e.removeClass("active"),GH.ChartFilters.checkFilterValidity(i)}),i.find(".js-save-button").click(function(t){t.preventDefault(),GH.ChartFilters.handleDialogSave(i)}),i.find(".js-cancel-button").click(function(i){t.current.hide()}),r()},GH.ChartFilters.checkFilterValidity=function(t){t.find(".ghx-error").remove();var i=!0;return t.find(".js-column-options .js-toggle.active").length<1&&(i=!1,t.find(".js-column-options").after('<div class="ghx-error">'+"At least one column must be selected"+"</div>")),t.find(".js-swimlane-options .js-toggle.active").length<1&&(i=!1,t.find(".js-swimlane-options").after('<div class="ghx-error">'+"At least one swimlane must be selected"+"</div>")),i},GH.ChartFilters.handleDialogSave=function(i){if(GH.ChartFilters.checkFilterValidity(i)){var e=[];i.find(".js-column-options .js-toggle").each(function(t,i){var r=AJS.$(i),a=r.attr("data-column-id"),l=r.hasClass("active");l&&e.push(parseInt(a,10))});var r=[];i.find(".js-swimlane-options .js-toggle").each(function(t,i){var e=AJS.$(i),a=e.attr("data-swimlane-id"),l=e.hasClass("active");l&&r.push(parseInt(a,10))});var a=[];i.find(".js-quickfilter-options .js-toggle").each(function(t,i){var e=AJS.$(i),r=e.attr("data-quickfilter-id"),l=e.hasClass("active");l&&a.push(parseInt(r,10))});var l=!_.isEqual(r,GH.ChartFilters.getActiveSwimlaneIds()),s=!_.isEqual(a,GH.ChartFilters.getActiveQuickFilterIds()),n=!_.isEqual(e,GH.ChartFilters.getActiveColumnIds());GH.ChartFilters.setActiveColumnIds(e),GH.ChartFilters.setActiveSwimlaneIds(r),GH.ChartFilters.setActiveQuickFilterIds(a),GH.RapidBoard.State.pushState(),AJS.$(GH).trigger("chartFiltersChanged",{swimlanesChanged:l,quickFiltersChanged:s,columnsChanged:n}),GH.ChartFilters.updateFilterInfo(),t.current.hide()}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartFilters.soy' */
// This file was automatically generated from ChartFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.chartfilters.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.chartfilters == 'undefined') { GH.tpl.chartfilters = {}; }


GH.tpl.chartfilters.renderChartFilter = function(opt_data, opt_ignored) {
  var output = '';
  var tooltip__soy3 = ' ' + soy.$$escapeHtml('Chart is using non-default settings');
  var buttonText__soy6 = ' ' + soy.$$escapeHtml('Refine report');
  output += aui.buttons.button({id: ['js-chart-filter'], extraClasses: ['aui-button-icon', 'aui-button-subtle', 'ghx-dropdown-trigger'], text: buttonText__soy6, iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-info', iconText: tooltip__soy3, iconType: 'aui'});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartfilters.renderChartFilter.soyTemplateName = 'GH.tpl.chartfilters.renderChartFilter';
}


GH.tpl.chartfilters.renderChartFilters = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-chart-filters ghx-inline-dialog-content"><h2>' + soy.$$escapeHtml('Report Filters') + '</h2><form class="aui gh-aui"><fieldset><h3>' + soy.$$escapeHtml('Columns') + '</h3><div class="ghx-group aui-buttons js-column-options">';
  var columnList22 = opt_data.columns;
  var columnListLen22 = columnList22.length;
  for (var columnIndex22 = 0; columnIndex22 < columnListLen22; columnIndex22++) {
    var columnData22 = columnList22[columnIndex22];
    if (columnData22.active) {
      var buttonText__soy25 = '' + soy.$$escapeHtml(columnData22.name);
      var buttonClass__soy27 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-column-id': columnData22.id}, extraClasses: [buttonClass__soy27], text: buttonText__soy25});
    } else {
      var buttonText__soy34 = '' + soy.$$escapeHtml(columnData22.name);
      var buttonClass__soy36 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-column-id': columnData22.id}, extraClasses: [buttonClass__soy36], text: buttonText__soy34});
    }
  }
  output += '</div><h3>' + soy.$$escapeHtml('Swimlanes') + '</h3><div class="ghx-group aui-buttons js-swimlane-options">';
  var swimlaneList46 = opt_data.swimlanes;
  var swimlaneListLen46 = swimlaneList46.length;
  for (var swimlaneIndex46 = 0; swimlaneIndex46 < swimlaneListLen46; swimlaneIndex46++) {
    var swimlaneData46 = swimlaneList46[swimlaneIndex46];
    if (swimlaneData46.active) {
      var buttonText__soy49 = '' + soy.$$escapeHtml(swimlaneData46.name);
      var buttonClass__soy51 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-swimlane-id': swimlaneData46.id}, extraClasses: [buttonClass__soy51], text: buttonText__soy49});
    } else {
      var buttonText__soy58 = '' + soy.$$escapeHtml(swimlaneData46.name);
      var buttonClass__soy60 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-swimlane-id': swimlaneData46.id}, extraClasses: [buttonClass__soy60], text: buttonText__soy58});
    }
  }
  output += '</div><h3>' + soy.$$escapeHtml('Quick Filters') + '</h3><div class="ghx-group aui-buttons js-quickfilter-options">';
  var quickFilterList70 = opt_data.quickFilters;
  var quickFilterListLen70 = quickFilterList70.length;
  for (var quickFilterIndex70 = 0; quickFilterIndex70 < quickFilterListLen70; quickFilterIndex70++) {
    var quickFilterData70 = quickFilterList70[quickFilterIndex70];
    if (quickFilterData70.active) {
      var buttonText__soy73 = '' + soy.$$escapeHtml(quickFilterData70.name);
      var buttonClass__soy75 = 'js-toggle active';
      output += aui.buttons.button({extraAttributes: {'data-quickfilter-id': quickFilterData70.id}, extraClasses: [buttonClass__soy75], text: buttonText__soy73});
    } else {
      var buttonText__soy82 = '' + soy.$$escapeHtml(quickFilterData70.name);
      var buttonClass__soy84 = 'js-toggle';
      output += aui.buttons.button({extraAttributes: {'data-quickfilter-id': quickFilterData70.id}, extraClasses: [buttonClass__soy84], text: buttonText__soy82});
    }
  }
  output += '</div></fieldset><div class="buttons-container"><div class="buttons"><button class="aui-button js-save-button">' + soy.$$escapeHtml('Apply') + '</button><a class="js-cancel-button"><span>' + soy.$$escapeHtml('Cancel') + '</span></a></div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.chartfilters.renderChartFilters.soyTemplateName = 'GH.tpl.chartfilters.renderChartFilters';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartTimeFrames.js' */
!function(){"use strict";var e=require("aui/inline-dialog");GH.ChartTimeFrames={},GH.ChartTimeFrames.day=864e5,GH.ChartTimeFrames.momentDateFormat="LL",GH.ChartTimeFrames.momentTimeFormat="LLL",GH.ChartTimeFrames.from=null,GH.ChartTimeFrames.to=null,GH.ChartTimeFrames.days=7,GH.ChartTimeFrames.now=(new Date).getTime(),GH.ChartTimeFrames.isRelative=!0,GH.ChartTimeFrames.minXValue=null,GH.ChartTimeFrames.chartId=null,GH.ChartTimeFrames.init=function(){GH.ChartUtils.registerInlineDialogHacks("chartTimeFramesInlineDialog")},GH.ChartTimeFrames.isValidDate=function(e){var a=function(e){return 0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&0===e.getMilliseconds()};return a(Date.parseDate(e,GH.TimeFormat.dateFormat))&&a(Date.parseDate(e,GH.TimeFormat.dateFormat))},GH.ChartTimeFrames.getDateAsText=function(e){return new Date(e).print(GH.TimeFormat.dateFormat)},GH.ChartTimeFrames.roundMillisToNextDay=function(e){var a,t=GH.ChartTimeFrames.roundMillisToBeginOfDay(e);return a=t<e?t+GH.ChartTimeFrames.day:t},GH.ChartTimeFrames.roundMillisToBeginOfDay=function(e){var a=Math.floor(e/GH.ChartTimeFrames.day);return a*GH.ChartTimeFrames.day},GH.ChartTimeFrames.millisToDays=function(e){return e?e/GH.ChartTimeFrames.day:e},GH.ChartTimeFrames.daysToMillis=function(e){return e?e*GH.ChartTimeFrames.day:e},GH.ChartTimeFrames.timeFrames=[{relative:!0,days:7,name:"Past Week"},{relative:!0,days:14,name:"Past 2 Weeks"},{relative:!0,days:30,name:"Past Month"},{relative:!0,days:90,name:"Past 3 Months"},{relative:!0,days:180,name:"Past 6 Months"},{relative:!0,days:0,name:"All Time"},{relative:!1,days:-1,name:"Custom"}],GH.ChartTimeFrames.getSelectedTimeFrame=function(){for(var e=0;e<GH.ChartTimeFrames.timeFrames.length;e++){if(!GH.ChartTimeFrames.isRelative&&!GH.ChartTimeFrames.timeFrames[e].relative)return GH.ChartTimeFrames.timeFrames[e];if(GH.ChartTimeFrames.timeFrames[e].days==GH.ChartTimeFrames.days)return GH.ChartTimeFrames.timeFrames[e]}return!1},GH.ChartTimeFrames.getChartStartDate=function(){var e=GH.ChartTimeFrames.day;if(GH.ChartTimeFrames.isRelative){if(0==GH.ChartTimeFrames.days){var a=GH.ChartTimeFrames.minXValue,t=GH.ChartTimeFrames.now-1*e;return(!a||a>t)&&(a=t),a}return GH.ChartTimeFrames.now-GH.ChartTimeFrames.days*e}return GH.ChartTimeFrames.from},GH.ChartTimeFrames.getChartEndDate=function(){GH.ChartTimeFrames.day;return GH.ChartTimeFrames.isRelative?GH.ChartTimeFrames.now:GH.ChartTimeFrames.to},GH.ChartTimeFrames.update=function(){var e=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.days",7),a=(new Date).getTime();a=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.from",a);var t=(new Date).getTime()-7*GH.ChartTimeFrames.day;t=GH.RapidBoard.State.getBoardSetting(null,"chart.timeframe.to",t),GH.ChartTimeFrames.setNewChartLimits(e,a,t,!0)},GH.ChartTimeFrames.setBoundaries=function(e,a){GH.ChartTimeFrames.now=a,GH.ChartTimeFrames.minXValue=e||a-7*GH.ChartTimeFrames.day,GH.ChartTimeFrames.updateDatesInfo()},GH.ChartTimeFrames.updateDialogFromAndToDates=function(e){var a=e.find(".js-timeframe-button.active"),t=a.attr("data-timeframe-id");if(t!=-1){var r,i=GH.ChartTimeFrames.now;r=t>0?i-t*GH.ChartTimeFrames.day:GH.ChartTimeFrames.minXValue;var m=new Date(r).print(GH.TimeFormat.dateFormat),s=new Date(i).print(GH.TimeFormat.dateFormat);e.find("#ghx-field-from").val(m),e.find("#ghx-field-to").val(s)}},GH.ChartTimeFrames.updateDatesInfo=function(){var e=GH.ChartTimeFrames.getSelectedTimeFrame();e.relative&&(GH.ChartTimeFrames.to=GH.ChartTimeFrames.now,e.days>0?GH.ChartTimeFrames.from=GH.ChartTimeFrames.to-e.days*GH.ChartTimeFrames.day:GH.ChartTimeFrames.from=GH.ChartTimeFrames.minXValue);var a=new Date(GH.ChartTimeFrames.from).print(GH.TimeFormat.dateFormat),t=new Date(GH.ChartTimeFrames.to).print(GH.TimeFormat.dateFormat),r=AJS.format("{0} to {1} ({2})",a,t,e.name);AJS.$(".js-timeframe-info").text(r)},GH.ChartTimeFrames.setNewChartLimits=function(e,a,t,r){e<0?(GH.ChartTimeFrames.from=a,GH.ChartTimeFrames.to=t,GH.ChartTimeFrames.isRelative=!1,GH.ChartTimeFrames.days=-1):(GH.ChartTimeFrames.isRelative=!0,GH.ChartTimeFrames.days=e),GH.RapidBoard.State.setBoardSetting("chart.timeframe.days",GH.ChartTimeFrames.days),GH.RapidBoard.State.setBoardSetting("chart.timeframe.from",a),GH.RapidBoard.State.setBoardSetting("chart.timeframe.to",t),GH.ChartTimeFrames.updateDatesInfo(),r||AJS.$(GH).trigger("chartTimeFramesChanged")},GH.ChartTimeFrames.initializeDialog=function(a){AJS.$("#inline-dialog-chartTimeFramesInlineDialog").remove(),GH.ChartTimeFrames.chartId=a;var t={width:710,cacheContent:!1,hideDelay:6e4};e("#js-chart-timeframe","chartTimeFramesInlineDialog",GH.ChartTimeFrames.renderChartTimeFramesDialog,t)},GH.ChartTimeFrames.renderChartTimeFramesDialog=function(a,t,r){var i=GH.ChartTimeFrames.from?new Date(GH.ChartTimeFrames.from).print(GH.TimeFormat.dateFormat):"",m=GH.ChartTimeFrames.to?new Date(GH.ChartTimeFrames.to).print(GH.TimeFormat.dateFormat):"",s=!1;GH.ChartTimeFrames.chartId==GH.CFDController.id?s="Alternatively, click and drag cursor across chart to select date range (double-click overview to reset).":GH.ChartTimeFrames.chartId==GH.Reports.ControlChartController.id&&(s="Alternatively, click and drag cursor across chart to select date range (double-click to reset)."),a.html(GH.tpl.charttimeframes.renderChartTimeFrames({timeFrames:GH.ChartTimeFrames.timeFrames,relative:GH.ChartTimeFrames.isRelative,days:GH.ChartTimeFrames.days,from:i,to:m,desc:s})),a.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),GH.ChartTimeFrames.updateDialogFromAndToDates(a);var n=function(e){e.hasClass("disabled")||(a.find(".js-timeframe-button").removeClass("active"),e.addClass("active"),GH.ChartTimeFrames.updateDialogFromAndToDates(a))};a.find(".js-timeframe-button").click(function(e){e.preventDefault(),n(AJS.$(this))}),Calendar.setup({firstDay:0,inputField:"ghx-field-from",button:"ghx-field-from-button",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers,showsTime:!1,onUpdate:function(){n(a.find('.js-timeframe-button[data-timeframe-id="-1"]'))}}),Calendar.setup({firstDay:0,inputField:"ghx-field-to",button:"ghx-field-to-button",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers,showsTime:!1,onUpdate:function(){n(a.find('.js-timeframe-button[data-timeframe-id="-1"]'))}}),a.find(".js-save-button").click(function(e){e.preventDefault(),GH.ChartTimeFrames.handleDialogSave(a)}),a.find(".js-cancel-button").click(function(a){e.current.hide()}),r()},GH.ChartTimeFrames.handleDialogSave=function(a){var t=a.find(".js-timeframe-button.active"),r=parseInt(t.attr("data-timeframe-id"),10),i=null,m=null;if(a.find(".ghx-error").remove(),r<0){var s=a.find("#ghx-field-from").val();if(!s||!GH.ChartTimeFrames.isValidDate(s))return void a.find("#ghx-field-from").closest(".field-group").append('<div class="ghx-error">'+"From-date required"+"</div>");s=Date.parseDate(s,GH.TimeFormat.dateFormat);var n=a.find("#ghx-field-to").val();if(!n||!GH.ChartTimeFrames.isValidDate(n))return void a.find("#ghx-field-to").closest(".field-group").append('<div class="ghx-error">'+"To-date required"+"</div>");if(n=Date.parseDate(n,GH.TimeFormat.dateFormat),s.getTime()>n.getTime())return void a.find("#ghx-field-to").closest(".field-group").append('<div class="ghx-error">'+"From-date must be before to-date"+"</div>");i=s.getTime(),m=n.getTime()}GH.ChartTimeFrames.setNewChartLimits(r,i,m),GH.RapidBoard.State.pushState(),e.current&&e.current.hide()}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChartTimeFrames.soy' */
// This file was automatically generated from ChartTimeFrames.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.charttimeframes.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.charttimeframes == 'undefined') { GH.tpl.charttimeframes = {}; }


GH.tpl.charttimeframes.renderChartTimeFrame = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: ['js-chart-timeframe'], extraClasses: ['aui-button-subtle', 'ghx-dropdown-trigger', 'js-timeframe-info', 'ghx-pull-left'], text: ''});
};
if (goog.DEBUG) {
  GH.tpl.charttimeframes.renderChartTimeFrame.soyTemplateName = 'GH.tpl.charttimeframes.renderChartTimeFrame';
}


GH.tpl.charttimeframes.renderChartTimeFrames = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-chart-filters ghx-inline-dialog-content"><h2>' + soy.$$escapeHtml('Report Timeframe') + '</h2><form class="aui gh-aui"><fieldset><h3>' + soy.$$escapeHtml('Timeframe') + '</h3><div class="ghx-group aui-buttons js-timeframe-options">';
  var timeFrameList13 = opt_data.timeFrames;
  var timeFrameListLen13 = timeFrameList13.length;
  for (var timeFrameIndex13 = 0; timeFrameIndex13 < timeFrameListLen13; timeFrameIndex13++) {
    var timeFrameData13 = timeFrameList13[timeFrameIndex13];
    if (timeFrameData13.days == opt_data.days) {
      var buttonText__soy16 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy18 = 'js-timeframe-button active';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy18], text: buttonText__soy16});
    } else if (timeFrameData13.disabled) {
      var buttonText__soy25 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy27 = 'js-timeframe-button disabled';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy27], text: buttonText__soy25});
    } else {
      var buttonText__soy34 = '' + soy.$$escapeHtml(timeFrameData13.name);
      var buttonClass__soy36 = 'js-timeframe-button';
      output += aui.buttons.button({extraAttributes: {'data-timeframe-id': timeFrameData13.days}, extraClasses: [buttonClass__soy36], text: buttonText__soy34});
    }
  }
  output += '</div><div class="field-group"><label for="ghx-field-from">' + soy.$$escapeHtml('From') + '</label><input class="text medium-field" type="text" id="ghx-field-from" value="' + soy.$$escapeHtml(opt_data.from) + '"><span id="ghx-field-from-button" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span></div><div class="field-group"><label for="ghx-field-to">' + soy.$$escapeHtml('To') + '</label><input class="text medium-field" type="text" id="ghx-field-to" value="' + soy.$$escapeHtml(opt_data.to) + '"><span id="ghx-field-to-button" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span></div>' + ((opt_data.desc) ? '<div class="field-group"><div class="description">' + soy.$$escapeHtml(opt_data.desc) + '</div></div>' : '') + '</fieldset><div class="buttons-container"><div class="buttons"><button class="aui-button js-save-button">' + soy.$$escapeHtml('Apply') + '</button><a class="js-cancel-button"><span>' + soy.$$escapeHtml('Cancel') + '</span></a></div></div></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.charttimeframes.renderChartTimeFrames.soyTemplateName = 'GH.tpl.charttimeframes.renderChartTimeFrames';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/CFDController.js' */
define("jira-agile/rapid/ui/chart/cfd-controller",["require"],function(e){"use strict";var i=e("jquery"),t=e("jira/analytics/web-client"),a=e("jira-agile/rapid/analytics-tracker"),r=e("jira-agile/rapid/ui/chart/cfd-data"),n=e("jira-agile/rapid/ui/chart/cfd-view"),o=e("jira-agile/rapid/ui/chart/chart-controller"),d=e("jira-agile/rapid/ui/chart/chart-view"),l=e("jira-agile/rapid/ajax"),c=e("jira-agile/rapid/ui/chart/report-sla-tracker"),u=GH.ChartFilters,s=GH.ChartTimeFrames,p=GH.ChartUtils,h=GH.RapidBoard.State,C=GH.tpl,g={};g.id="cumulativeFlowDiagram",g.displayed=!1,g.rapidViewData={},g.rapidViewConfig={},g.analytics=new a("gh.report.cumulativeFlowDiagram"),g.setRapidView=function(e){g.rapidViewData=e||{}},g.isApplicable=function(){return!h.isAgilityBoard()},g.getNormalizedFromInternal=function(){return p.getTimeFrameReportUrlParams(g.id)},g.toUrl=function(e){return p.timeFrameReportParamsToUrl(e)},g.updateInternalFromNormalized=function(e){p.updateFromNormalizedStateDateTimeParams(e)},g.getNormalizedFromUrl=function(e){return p.getNormalizedFromUrlForTimeFrameReport(e)},g.show=function(){if(g.displayed=!0,g.rapidViewData){i(GH).unbind("."+g.id).bind("chartTimeFramesChanged."+g.id,g.handleChartTimeFramesChangedEvent).bind("chartFiltersChanged."+g.id,g.handleChartFiltersChangedEvent),n.show(),g.renderChartView();var e="show."+(g.rapidViewConfig.sprintSupportEnabled?"scrum":"kanban");g.analytics.trigger(e)}},g.hide=function(){g.displayed=!1,n.hide(),i("#ghx-chart-controls").hide(),i(GH).unbind("."+g.id)},g.renderChartView=function(){g.initializeControls(),d.getChartContentElem(!0).html(C.chartview.renderChartBody()),d.showSpinner(),o.loadRapidViewConfig(g,g.loadChartData)},g.initializeControls=function(){d.hideChartControls(),d.getChartControls(!0).html(C.chartview.renderChartControls()),u.initializeDialog(),s.initializeDialog(g.id)};var m=function(e,i){c.checkReportAndFireSlaEvent(c.reportNames.cfd,i)};return g.loadChartData=function(){g.updateTools(),d.showChartControls();var e={rapidViewId:h.getRapidViewId()};u.addRequestParams(e),l.get({url:"/rapid/charts/cumulativeflowdiagram.json",data:e},"rapidChartData").done(g.processChartData).fail(m).always(function(){d.hideSpinner()})},g.updateTools=function(){s.update();var e=g.rapidViewConfig,i=g.buildChartFilterConfig(e);u.update(g.id,e,i),h.pushState()},g.buildChartFilterConfig=function(e){var i={};i.defaultColumns=[];for(var t=0;t<e.columns.length;t++)i.defaultColumns.push(!0);return i},g.processChartData=function(e){g.displayed&&(r.setRawData(e),s.setBoundaries(e.firstChangeTime,e.now),n.renderChart(e),c.checkReportAndFireSlaEvent(c.reportNames.cfd),t.sendTrackEvent({source:"cumulativeFlowScreen",action:"viewed",actionSubject:"report",actionSubjectId:"cumulativeFlow",attributes:{boardId:g.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile",appliedColumns:u.getActiveColumns().length,totalColumns:u.getColumns().length,quickfiltersAppliedCount:u.getActiveQuickFilterIds().length,swimlanesAppliedCount:u.getActiveSwimlaneIds().length}}))},g.handleChartFiltersChangedEvent=function(e,i){g.displayed&&(g.loadChartData(),g.fireQuickFilterToggledEvent())},g.handleChartTimeFramesChangedEvent=function(e){if(g.displayed){var i=r.getRawData();n.renderChart(i)}},g.fireQuickFilterToggledEvent=function(){var e=u.getActiveQuickFilterIds(),i=GH.ChartFilters.rapidViewConfig.quickFilters.filter(function(i){return e.indexOf(i.id)>-1}).map(function(e){return e.query});i.length>0&&t.sendTrackEvent({source:"cumulativeFlowScreen",actionSubject:"quickFilter",actionSubjectId:"applyQuickfilter",action:"applied",attributes:{boardId:g.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),quickFiltersAppliedCount:i.length,onlyMyIssuesQuickFilterApplied:i.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY)>-1,recentlyUpdatedQuickFilterApplied:i.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY)>-1,customQuickFilterApplied:i.some(function(e){return e!==GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY&&e!==GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY})}})},g});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/CFDData.js' */
define("jira-agile/rapid/ui/chart/cfd-data",["require"],function(n){"use strict";var u=n("jquery"),a=n("underscore"),e=AJS.escapeHtml,o={};return o.raw={},o.getRawData=function(){return o.raw},o.setRawData=function(n){o.raw=n},o.computeSeries=function(n,u){var o=[],t=n.columnChanges,r=n.columns;a.each(r,function(n){n.issueCount=0,n.data=[]}),a.each(t,function(n,u){u=parseInt(u,10),a.each(n,function(n){a.each(r,function(a,e){n.columnFrom==e&&a.issueCount--,n.columnTo==e&&a.issueCount++,a.data.push([u,a.issueCount])})})});for(var c=r.length-1;c>=0;c--){var i=r[c],s=i.data;s.length>0&&s[s.length-1][0]<u&&s.push([u,s[s.length-1][1]]),o.push({data:s,label:e(String(i.name)),columnIndex:c})}return o},o.getChangeDetails=function(n){var e=o.raw,t=[];return a.each(e.columnChanges[n],function(n){n=u.extend(!0,{},n),void 0!=n.columnFrom&&(n.columnFrom=e.columns[n.columnFrom].name),void 0!=n.columnTo&&(n.columnTo=e.columns[n.columnTo].name),t.push(n)}),t},o.isRealDatapoint=function(n,u){var e=o.raw,t=e.columnChanges[n];return a.any(t,function(n){return u==n.columnTo})},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/CFDView.js' */
define("jira-agile/rapid/ui/chart/cfd-view",["require"],function(e){"use strict";var t,i,n=e("jquery"),o=e("underscore"),a=e("jira-agile/rapid/ui/chart/chart"),r=e("jira-agile/rapid/ui/chart/chart-view"),s=e("jira-agile/rapid/global-events");s.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/cfd-controller"),i=e("jira-agile/rapid/ui/chart/cfd-data")});var l=GH.ChartFilters,d=GH.ChartTimeFrames,c=GH.TimeFormat,h=GH.FlotChartUtils,u=GH.tpl,v={};return v.COLUMN_COLORS=["#FF800D","#23819C","#9669FE","#59955C","#B9264F","#B05F3C","#2966B8","#9A03FE","#FF2626","#FF5353","#C8B400","#79FC4E","#8C8CFF","#C48484","#4FBDDD","#FFBE28","#99C7FF","#AE70ED","#FFA8A8","#DAAF85"],v.context={},v.previousPlotHoverPoint=null,v.init=function(){},v.show=function(){n(GH).unbind(a.EVENT_RESIZE_REDRAW+"."+t.id),n(GH).bind(a.EVENT_RESIZE_REDRAW+"."+t.id,function(e,i){i.id===t.id&&(v.resetRealPoints(),v._reverseLegendTable())})},v.hide=function(){n(GH).unbind(a.EVENT_RESIZE_REDRAW+"."+t.id),a.destroy(t.id+"Overview"),a.destroy(t.id)},v.renderChart=function(e){a.destroy(t.id+"Overview"),a.destroy(t.id);var o=d.getChartStartDate(),s=d.getChartEndDate(),c=i.computeSeries(e,e.now),u=v.getColors(l.getColumns(),l.getActiveColumns()),p={colors:u,xaxis:{mode:"time",min:o,max:s},yaxis:{tickDecimals:0,minTickSize:1,min:0,tickLength:"full"},series:{stack:!0,lines:{show:!0,fill:1,lineWidth:1}},grid:{hoverable:!0,clickable:!0,autoHighlight:!1},mouseEnterExitEvents:!0,selection:{mode:"x"},legend:{container:null,backgroundOpacity:.5,position:"nw"}},g={colors:u,xaxis:{mode:"time"},yaxis:{show:!1},series:{stack:!0,lines:{show:!0,fill:1,lineWidth:1}},selection:{mode:"x"},legend:{show:!1}};r.hideChartStatus(),r.showChartGroup(),h.setAndAlignAxisLabels("Time","Number of Issues");var f=r.getChartView(!0),x=n("#ghx-chart-overview-group"),C=n("#ghx-chart-overview"),m=n(x).find("h4"),w=n(x).find(".ghx-description");n(m).text("Overview"),n(w).text("Click and drag cursor across chart or chart overview to select date range (double-click overview to reset)."),m.show(),w.show(),f.show(),x.show();var P=v.context={chartContainer:f,series:c,options:p,realPoints:[],showPoints:!1};f.unbind("plothover plotselected"),f.bind("plotselected",v.handleSelection),f.bind("plothover",v.handlePlotHover),P.mainChart=a.draw(t.id,f,c,p),f.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter",v.handleMouseEnter).bind("flotMouseLeave",v.handleMouseLeave),P.mainChart.hooks.drawSeries.push(v.gatherPoints),P.mainChart.hooks.draw.push(v.deferredRenderPoints),v._reverseLegendTable(),C.unbind("plotselected dblclick"),C.bind("plotselected",v.handleSelection),C.bind("dblclick",v.resetSelection),P.overviewChart=a.draw(t.id+"Overview",C,c,g),P.overviewChart.setSelection({xaxis:{from:o,to:s}},!0)},v.getColors=function(e,t){var i=[];return o.each(e,function(e,n){var a=o.any(t,function(t){return t.id==e.id});a&&i.push(v.COLUMN_COLORS.slice(n))}),i.reverse()},v._reverseLegendTable=function(){var e=r.getChartView().find(".legend").find("tbody");e.children().each(function(){e.prepend(n(this))})},v.updateTimeFrameSelection=function(){var e=d.getChartStartDate(),i=d.getChartEndDate(),n=v.context;n.options.xaxis.min=e,n.options.xaxis.max=i;var o=d.getSelectedTimeFrame();0!=o.days&&n.overviewChart.setSelection({xaxis:{from:e,to:i}},!0),n.mainChart=a.draw(t.id,n.chartContainer,n.series,n.options),v._reverseLegendTable()},v.handleSelection=function(e,t){var i=t.xaxis.from,n=t.xaxis.to;d.setNewChartLimits(-1,i,n)},v.resetSelection=function(e){var t=v.context.overviewChart.getXAxes()[0];d.setNewChartLimits(-1,t.min,t.max)},v.handlePlotHover=function(e,t,i){i?i.dataIndex!=v.previousPlotHoverPoint&&v.isRealPoint(i)&&(n("#ghx-tooltip").remove(),v.previousPlotHoverPoint=i.dataIndex,v.renderTooltip(i.datapoint[0],i.pageX,i.pageY)):(n("#ghx-tooltip").remove(),v.previousPlotHoverPoint=null)},v.isRealPoint=function(e){var t=e.series.xaxis,i=e.series.yaxis,n=t.p2c(e.datapoint[0]),a=i.p2c(e.datapoint[1]);return o.any(v.context.realPoints,function(e){var o=t.p2c(e.time),r=i.p2c(e.issueCount);return Math.abs(n-o)<1&&Math.abs(a-r)<1})},v.handleMouseEnter=function(e){var t=v.context;t.showPoints||(t.showPoints=!0,t.realPoints=[],t.mainChart.draw())},v.handleMouseLeave=function(e){var t=v.context;t.showPoints&&(t.showPoints=!1,t.mainChart.draw())},v.renderTooltip=function(e,t,o){var a=new Date(e),r=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds()),s=i.getChangeDetails(e),l=n(u.chartview.renderCfdTooltip({changes:s,time:r.print(c.dateTimePickerFormat)})).css({position:"absolute",display:"none",top:o+5});l.appendTo("body");var d=l.width(),h=n("#ghx-chart-view canvas.base");t+d>h.offset().left+h.width()?l.css({left:t-(30+d)}):l.css({left:t+15}),l.fadeIn(200)},v.resetRealPoints=function(e,t){v.context.realPoints=[]},v.gatherPoints=function(e,n,o){if(t.displayed&&v.context.showPoints)for(var a=o.datapoints,r=a.points,s=a.pointsize,l=o.xaxis,d=o.yaxis,c=0;c<r.length;c+=s){var h=r[c],u=r[c+1];if(i.isRealDatapoint(h,o.columnIndex)&&!(null==h||h<l.min||h>l.max||u<d.min||u>d.max)){var p=l.p2c(h),g=d.p2c(u);v.context.realPoints.push({x:p,y:g,time:h,issueCount:u})}}},v.deferredRenderPoints=function(e,i){t.displayed&&v.context.showPoints&&(i.save(),i.translate(e.getPlotOffset().left,e.getPlotOffset().top),i.strokeStyle="rgb(100, 100, 100)",i.fillStyle="rgba(255, 255, 255, 0.5)",o.each(v.context.realPoints,function(e){h.drawPoint(i,e)}),i.restore())},n(v.init),v});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownChartController.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-controller",["require"],function(e){"use strict";var t=e("jquery"),i=e("underscore"),r=e("jira-agile/rapid/analytics-tracker"),n=e("jira-agile/rapid/ui/chart/burndown-chart-view"),a=e("jira-agile/rapid/ui/chart/burndown-report-chart-controller"),d=e("jira-agile/rapid/ui/chart/chart"),s=e("jira-agile/rapid/ui/component/chart-picker"),o=e("jira-agile/rapid/ui/chart/chart-view"),l=e("jira-agile/rapid/ui/component/estimate-picker"),c=e("jira-agile/rapid/ajax"),p=GH.RapidBoard.State,u=GH.RapidBoard.UrlState,m={};return m.id="burndownChart",m.displayed=!1,m.rapidViewId=void 0,m.analytics=new r("gh.report.burndownChart"),m.setRapidView=function(e){m.rapidViewId=e.id,a.setRapidView(e.id)},m.getNormalizedFromInternal=function(){return{sprint:m.getSprintIdForUrl()||null,estimate:m.getEstimateIdForUrl()||null}},m.getSprintIdForUrl=function(){var e=m.sprintPicker.getSelectedItem();if(e)return e.id;var t=m.sprintPicker.getStoredSelectedItemId();return t!==-1?t:null},m.getEstimateIdForUrl=function(){var e=m.estimatePicker.getStoredSelectedItemId();return e!==-1?e:null},m.toUrl=function(e){var t={};return null!==e.sprint&&(t.sprint=e.sprint),null!==e.estimate&&(t.estimate=e.estimate),t},m.updateInternalFromNormalized=function(e){m.setSelectedSprintFromUrlState(e.sprint),m.setSelectedEstimateFromUrlState(e.estimate)},m.setSelectedSprintFromUrlState=function(e){e&&m.sprintPicker.storeSelectedItemId(e)},m.setSelectedEstimateFromUrlState=function(e){e&&m.estimatePicker.storeSelectedItemId(e)},m.getNormalizedFromUrl=function(e){return{sprint:u.normalizeNumberParam(e.sprint,null),estimate:u.normalizeStringParam(e.estimate,null)}},m.isApplicable=function(e){return e.sprintSupportEnabled&&!p.isAgilityBoard()},m.init=function(){m.sprintPicker=new s("burndown.selectedSprintId"),m.estimatePicker=new l("burndown.selectedEstimate",(!0))},m.show=function(){if(m.displayed=!0,a.show(),m.rapidViewId){var e="."+m.id;t(GH).unbind(e),t(GH).bind(d.EVENT_RESIZE_REDRAW+e,m.handleResizeEvent),m.loadChart(),m.analytics.trigger("show")}},m.hide=function(){a.hide(),m.displayed=!1,t(GH).unbind("."+m.id),d.destroy(n.id),t(GH).unbind("."+m.id)},m.loadChart=function(){n.renderChartLoading(),t(m.sprintPicker).bind("selectedItemChanged",m.handleSprintChanged),a.setNonWorkingDaysShown(p.getNonWorkingDaysShown("burndown"));var e=m.rapidViewId;m.loadSprintOptions(e).done(function(e){m.processSprintsData(e),e.sprints&&e.sprints.length>0&&m.estimatePicker.load(m.rapidViewId,m.handleEstimateChanged).done(function(){var e=m.sprintPicker.getSelectedItem(),t=m.estimatePicker.getSelectedItem();e?(a.setSprint(e),a.setEstimationStatistic(t.id),a.loadChartData()):o.hideSpinner()})})},m.loadSprintOptions=function(e){return c.get({url:"/sprintquery/"+e,data:{includeFutureSprints:!1}},"sprintOptions")},m.processSprintsData=function(e){m.displayed&&(e.sprints.reverse(),m.sprintPicker.setItems(e.sprints),m.sprintPicker.setDefaultItem(m.getDefaultSprintForPicker(e.sprints)),n.renderAndShowSprintPicker(),e.sprints&&0!==e.sprints.length||(m.estimatePicker.shouldRender=!1),p.replaceState())},m.handleSprintChanged=function(){m.displayed&&(p.pushState(),a.setSprint(m.sprintPicker.getSelectedItem()),a.loadChartData())},m.getDefaultSprintForPicker=function(e){var t=i.filter(e,function(e){return!e.closed});return t.length>0?i.first(t):i.first(e)},m.handleEstimateChanged=function(e){m.displayed&&(p.pushState(),a.setEstimationStatistic(e),a.loadChartData())},m.handleResizeEvent=function(e,t){t.id===m.id&&(t.chart.realPointsPerSeries={},setTimeout(n.addNonWorkingDaysToLegend,0))},m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownReportChartController.js' */
define("jira-agile/rapid/ui/chart/burndown-report-chart-controller",["require"],function(i){"use strict";var t=i("jira-agile/rapid/ui/chart/burndown-chart-model"),a=i("jira-agile/rapid/ui/chart/burndown-chart-view"),r=i("jira-agile/rapid/ui/chart/chart-view"),n=i("jira-agile/rapid/ajax"),e=i("jira-agile/rapid/ui/chart/report-sla-tracker"),o={};o.displayed=!1,o.rapidViewId=void 0,o.sprint=void 0,o.estimationStatisticId=void 0,o.nonWorkingDaysShown=void 0,o.setRapidView=function(i){o.rapidViewId=i},o.setSprint=function(i){o.sprint=i},o.setEstimationStatistic=function(i){o.estimationStatisticId=i},o.show=function(){o.displayed=!0},o.hide=function(){o.displayed=!1},o.setNonWorkingDaysShown=function(i){o.nonWorkingDaysShown=i},o.loadChartData=function(){if(o.sprint){var i={rapidViewId:o.rapidViewId,sprintId:o.sprint.id,statisticFieldId:o.estimationStatisticId},t=(new Date).getTime(),a=null;return n.get({url:"/rapid/charts/scopechangeburndownchart.json",data:i},"rapidChartData").done(function(i){a=(new Date).getTime();try{o.processChartData(i)}catch(r){d(r,null,a-t)}}).fail(function(i,r){return null==a&&(a=(new Date).getTime()),d(i,r,a-t)})}};var d=function(i,t,a){e.checkReportAndFireSlaEvent(e.reportNames.burndown,t,{requestTime:a,rapidViewId:o.rapidViewId,sprintId:o.sprint.id,statisticFieldId:o.estimationStatisticId}),r.hideSpinner()};return o.processChartData=function(i){o.displayed&&(t.setRawData(i),a.setNonWorkingDaysShown(o.nonWorkingDaysShown),a.gadgetMode||a.wallboardMode||(r.getChartGroup().find(".ghx-sprint-goal").remove(),r.getChartGroup().prepend(GH.tpl.board.x.renderSprintGoal({goal:o.sprint.goal}))),a.showChart(),e.checkReportAndFireSlaEvent(e.reportNames.burndown))},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownChartModel.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-model",["require"],function(e){"use strict";var t,a,i=e("underscore"),n=e("jira-agile/rapid/ui/chart/burndown-chart-view"),r=e("jira-agile/rapid/ui/chart/burndown-rate"),s=e("jira-agile/rapid/ui/chart/chart-colors"),l=e("jira-agile/rapid/global-events"),u=GH.ChartUtils,c=GH.FlotChartUtils;l.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/burndown-table-producer"),a=e("jira-agile/rapid/ui/chart/burndown-timeline-producer")});var o={};return o.rawData={},o.tableHandler={},o.timelineData={},o.series=[],o.seriesData={},o.yAxisData={},o.dataTable={},o.setRawData=function(e){o.rawData=e,r.setRateData(e.workRateData),o.prepareData()},o.getStatistic=function(){return o.rawData.statisticField},o.isTimeTracking=function(){return"timeestimate"===o.getStatistic().fieldId},o.getParentIssueKey=function(e){return!i.isUndefined(o.rawData.issueToParentKeys)&&(o.rawData.issueToParentKeys[e]||!1)},o.prepareData=function(){var e=o.isTimeTracking();e?o.tableHandler=t.TimeTrackingTableHandler:o.tableHandler=t.EstimateStatisticTableHandler;var i=u.getStatisticConsumer(e);o.timelineData=a.calculateTimelineData(o.rawData,i),o.calculateSeries();var n=o.rawData.lastUserWhoClosedHtml,r=t.getDataTable(o.timelineData,o.tableHandler,i,n);o.renderDataTableValues(r),o.dataTable=r},o.getChartStartTime=function(){var e=o.timelineData;return e.startTime},o.calculateGuidelineSeries=function(e){var t=e.startValue,a=r.getRateDefinitions(),n=r.limitToTimeRange(a,e.startTime,e.endTime),s=o.calculateTimePerUnit(n,t),l=[[e.startTime,e.startValue]].concat(i.map(n,function(a){if(a.rate===r.WORKING_DAY){var n=a.start-a.end,l=n/s;t-=l}return[i.min([a.end,e.endTime]),i.max([t,0])]}));return l=i.reject(l,function(e){return 0===e.length}),{id:"guideline",data:l,color:"#999",label:"Guideline"}},o.calculateTimePerUnit=function(e,t){var a=r.limitToWorkingDays(e),n=i.reduce(a,function(e,t){return e+(t.start-t.end)},0);return n/t},o.calculateSeries=function(){var e=o.timelineData,t=e.timeline;if(!i.isEmpty(t)){var a=t[0],r=[];r.push(o.calculateGuidelineSeries({startTime:e.startTime,startValue:a.values.estimate,endTime:e.endTime}));var l=["estimate"];o.isTimeTracking()&&l.push("timeSpent");var u={},c={};if(i.each(l,function(e){u[e]=[],c[e]=[]}),i.each(t,function(e){e.openCloseEntries||i.each(l,function(t){e.deltas&&i.isNumber(e.deltas[t])&&0!==e.deltas[t]&&(u[t].push([e.time,e.values[t]-e.deltas[t]]),c[t].push({})),u[t].push([e.time,e.values[t]]),c[t].push(e)})}),!e.completeTime){var d=i.last(t);i.each(l,function(t){u[t].push([Math.max(e.startTime,e.now),d.values[t]])})}o.isTimeTracking()&&r.push({id:"timeSpent",data:u.timeSpent,color:"#14892c",label:"Time Spent"}),r.push({id:"estimate",data:u.estimate,color:"#d04437",label:"Remaining Values"});var g;g=n.wallboardMode?s.nonWorkingDaysWallboard:s.nonWorkingDays,r.push({id:"markings",color:g,data:[],label:"Non-Working Days"});var m=0;i.each(l,function(t){m=Math.max(m,e.maxValues[t]||0)}),o.calculateYAxis(m),o.series=r,o.seriesData=c}},o.calculateYAxis=function(e){o.yAxisData=c.calculateYAxis(e,o.getStatistic())},o.getDataTable=function(){return o.dataTable},o.getSeries=function(){return o.series},o.getYAxis=function(){return o.yAxisData},o.getDataBySeries=function(e){return o.seriesData[e]},o.getDataBySeriesAtIndex=function(e,t){if(o.seriesData[e])return o.seriesData[e][t]},o.getStatisticDefinitionForSeries=function(e){var t=o.getStatisticDefinitions(),a=i.find(t,function(t){return e===t.valueId});return a},o.getStatisticDefinitions=function(){return o.dataTable.statistics},o.getWarning=function(){return o.rawData.warningMessage},o.isEmpty=function(){return 0===Object.keys(o.rawData.changes).length},o.renderDataTableValues=function(e){var t="";i.each(e.rows,function(e){var a,n=u.renderUTCMillisAsDate(e.time);e.recordedTime&&(a=u.renderUTCMillisAsDate(e.recordedTime)),(n!==t||a)&&(e.dateString=n,e.recordedDateString=a,t=n),e.valuesText={},i.each(i.keys(e.values),function(t){e.valuesText[t]=o.renderStatisticText(e.values[t])}),e.initial||e.complete?(i.each(e.issues,function(e){e.valuesText={},i.each(i.keys(e.values),function(t){e.valuesText[t]=o.renderStatisticText(e.values[t])}),e.parentKey=o.getParentIssueKey(e.key)}),e.issues=i.sortBy(e.issues,function(e){return e.parentKey||e.key})):e.openClose||(e.deltasType={},e.deltasText={},i.each(i.keys(e.deltas),function(t){e.deltasText[t]=o.renderStatisticText(e.deltas[t],!0),e.deltasType[t]=e.deltas[t]<0?"dec":"inc"}),e.parentKey=o.getParentIssueKey(e.key))})},o.renderStatisticText=function(e,t){return u.renderStatisticText(e,t,o.getStatistic().renderer)},o.getTooltipData=function(e,a){var n=a,r={},s=o.getStatisticDefinitionForSeries(e);return r.statistic=s,n.initial||n.complete?(n.initial?(r.initial=!0,r.event=t.getSprintStartChangeEvent()):(r.complete=!0,r.event=t.getSprintCompleteChangeEvent()),r.issueCount=i.size(n.issues),r.statisticName=s.name,r.statisticValue=o.renderStatisticText(n.values[s.valueId])):(r.changes=[],i.each(n.issues,function(e){var t={};t.key=e.key,t.statisticName=s.name,t.statisticDelta=o.renderStatisticText(e.deltas[s.valueId]),t.event=o.tableHandler.getChangeEvent(e),r.changes.push(t)})),r.dateText=u.renderUTCMillisAsDate(n.time),r},o.hasAnyWorkingDays=function(){return r.getWorkingDays().length>0},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownRate.js' */
define("jira-agile/rapid/ui/chart/burndown-rate",["require"],function(t){"use strict";var n=t("underscore"),r={};return r.WORKING_DAY=1,r.NON_WORKING_DAY=0,r.setRateData=function(t){r.rateData=t},r.getRateDefinitions=function(){return r.rateData.rates},r.getNonWorkingDays=function(){var t=r.getRateDefinitions();return r.limitToNonWorkingDays(t)},r.getWorkingDays=function(){var t=r.getRateDefinitions();return r.limitToWorkingDays(t)},r.limitToWorkingDays=function(t){return n.filter(t,function(t){return t.rate===r.WORKING_DAY})},r.limitToNonWorkingDays=function(t){return n.filter(t,function(t){return t.rate===r.NON_WORKING_DAY})},r.limitToTimeRange=function(t,r,e){var i=n.reject(t,function(t){return e<t.start||t.end<r});return n.map(i,function(t){return{start:Math.max(r,t.start),rate:t.rate,end:Math.min(e,t.end)}})},r.isDateInNonWorkingBlock=function(t){for(var n=!1,e=r.getNonWorkingDays(),i=0;i<e.length;i++){var a=e[i];if(a.start<=t&&a.end>t){n=!0;break}}return n},r.getAdjustedNonWorkingDays=function(t){var e=r.getNonWorkingDays(),i=n.filter(e,function(n){return n.end>t});return n.map(i,function(n){return{moveTo:n.start===t?n.end:n.start,start:n.start,end:n.end}})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownTableProducer.js' */
define("jira-agile/rapid/ui/chart/burndown-table-producer",["require"],function(e){"use strict";var t=e("underscore"),n=e("jira-agile/rapid/ui/chart/burndown-chart-model"),a=e("jira-agile/rapid/ui/chart/burndown-timeline-producer"),i=GH.ChartUtils,r=GH.tpl,d={};return d.getDataTable=function(e,n,i,r){var s={rows:[],pastChangeRows:{},currentValues:[]};t.each(e.timeline,function(e){if(e.initial){var o={initial:!0,time:e.time,event:d.getSprintStartChangeEvent(),values:e.values,issues:e.issues};s.rows.push(o),s.currentValues=t.clone(e.values)}else if(e.complete){var g={complete:!0,time:e.time,event:d.getSprintCompleteChangeEvent(r),values:e.values,issues:e.issues};s.rows.push(g)}else e.openCloseInstances?t.each(e.openCloseInstances,function(t){s.rows.push({time:e.time,event:d.getSprintStateChangeEvent(t),openClose:!0,values:{}})}):t.each(e.issues,function(r){a.addStatisticValueDeltas(r.deltas,s.currentValues,1,i);var d={time:e.time,key:r.key,deltas:r.deltas,values:t.clone(s.currentValues)};d.event=n.getChangeEvent(r),n.addAdditionalRowInformation(s,e,r,d),s.rows.push(d)})});var o={statistics:n.getStatisticDefinitions(),rows:s.rows};return o},d.getSprintStartChangeEvent=function(){return{type:"Sprint start",detail:""}},d.getSprintCompleteChangeEvent=function(e){return{type:r.burndownchart.renderSprintCompleteEventType({closingUserHtml:e}),typeAsHtml:!0,detail:""}},d.getSprintReopenChangeEvent=function(e){return{type:GH.tpl.burndownchart.renderSprintReopenEventType({reopenUserHtml:e}),typeAsHtml:!0,detail:""}},d.getSprintStateChangeEvent=function(e){return"CLOSE"===e.operation?d.getSprintCompleteChangeEvent(e.user||e.userDisplayNameHtml):d.getSprintReopenChangeEvent(e.user||e.userDisplayNameHtml)},d.getSprintOrColumnChangeEvent=function(e,t){return e.scopeChange?e.inScope?{type:"Scope change",detail:"Issue added to sprint"}:{type:"Scope change",detail:"Issue removed from sprint"}:d.getColumnChangeEvent(e,t)},d.getColumnChangeEvent=function(e,t){return!!e.columnChange&&("notDone"===e.column?e.oldColumn?{type:t,detail:"Issue reopened"}:{type:"Scope change",detail:"Open issue moved into board (from an unmapped status)"}:"done"===e.column?e.oldColumn?{type:t,detail:"Issue completed"}:{type:"Scope change",detail:"Done issue moved into board (from an unmapped status)"}:"notDone"===e.oldColumn?{type:"Scope change",detail:"Open issue moved out of board (into an unmapped status)"}:{type:"Scope change",detail:"Done issue moved out of board (into an unmapped status)"})},d.TimeTrackingTableHandler={getStatisticDefinitions:function(){var e=[{id:"timeSpent",name:"Time Spent",isSum:!0},n.getStatistic()];return e[0].valueId="timeSpent",e[1].valueId="estimate",e},addAdditionalRowInformation:function(e,n,r,d){if(r.change&&r.change.timeC&&r.change.timeC.changeDate){var s=r.change.timeC.changeDate;n.time-n.time%6e4!==s-s%6e4&&(d.recordedTime=s),e.pastChangeRows[r.key+"-"+s]=d}var o=a.TimeTrackingStatisticConsumer.getAffectingEstimateChanges(r,r.change);t.each(o,function(t){var n=e.pastChangeRows[t.issueKey+"-"+t.date];if(n){if(n.event.loggedNoteAdded)return;n.event.loggedNoteAdded=!0,n.event.notes||(n.event.notes=[]),n.event.notes.push(AJS.format("Backdated event, recorded at {0}",i.renderUTCMillisAsDate(t.date)))}})},getChangeEvent:function(e){var r="Issue state change",s=d.getSprintOrColumnChangeEvent(e,r);if(s)return s;if(e.estimateChange||e.timeChange){var o=0,g=!1,c=0,u=!1,h=0,p=!1;e.timeChange&&(o=e.deltas.timeSpent,g=!0),e.estimateChange&&(h=e.values.estimate,c=e.values.estimate-e.deltas.estimate||0,u=!t.isUndefined(c),p=!t.isUndefined(h));var l={};if(g)l.type="Work logged";else{var v="Remaining Time Estimate",m="RTE",S='<acronym title="'+v+'">'+m+"</acronym>";l.type=AJS.format("{0} change",S),l.typeAsHtml=!0}var w="",T=[];if(g&&(w+=AJS.format("{0} logged",n.renderStatisticText(o))),u||p){var C=u?n.renderStatisticText(c):"no value",f=p?n.renderStatisticText(h):"no value";w+=w.length>0?", ":"",w+=AJS.format("{0} changed from {1} to {2}",n.getStatistic().name,C,f);var A=a.TimeTrackingStatisticConsumer.getAffectingEstimateChanges(e,e.change);t.each(A,function(e){T.push(AJS.format("Includes {0} backdated to {1}, recorded at {2}",i.renderStatisticText(e.delta),i.renderUTCMillisAsDate(e.worklogDate),i.renderUTCMillisAsDate(e.date)))})}return l.detail=w,l.notes=T,l}return{type:"unknown",detail:["unknown change"]}}},d.EstimateStatisticTableHandler={getStatisticDefinitions:function(){var e=[n.getStatistic()];return e[0].valueId="estimate",e},addAdditionalRowInformation:function(e,t,n,a){},getChangeEvent:function(e){var a="Burndown",i=d.getSprintOrColumnChangeEvent(e,a);if(i)return i;if(e.estimateChange){var r=e.values.oldEstimateFieldValue,s=e.values.estimateFieldValue,o=!t.isUndefined(r),g=!t.isUndefined(s);return o&&g?{type:"Scope change",detail:AJS.format("Estimate changed from {0} to {1}",n.renderStatisticText(r),n.renderStatisticText(s))}:o?{type:"Scope change",detail:AJS.format("Estimate of {0} has been removed",n.renderStatisticText(r))}:{type:"Scope change",detail:AJS.format("Estimate of {0} has been added",n.renderStatisticText(s))}}return{type:"unknown",detail:"unknown change"}}},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownTimelineProducer.js' */
define("jira-agile/rapid/ui/chart/burndown-timeline-producer",["require"],function(e){"use strict";var t=e("underscore"),a={};return a.calculateTimelineData=function(e,s){var i={timeline:[]};if(e.startTime===e.endTime)return i;var n=!t.isUndefined(e.completeTime)&&e.completeTime,u=a.calculateTimeline(e.startTime,n,e.changes,e.openCloseChanges,s,e.estimatableIssueKeys);return i.timeline=u.timeline,i.now=e.now,i.startTime=e.startTime,i.endTime=e.endTime,i.completeTime=n,i.maxValues=u.maxValues,i.statisticField=e.statisticField,i.finalIssueStates=u.issueState,i},a.calculateTimeline=function(e,s,i,n,u,r){var l={issueState:{},timeline:[],currentValues:{},maxValues:{},pastSprintStart:!1,statisticConsumer:u,estimatableIssueKeys:r};a.addStatisticValueDeltas({},l.currentValues,1,u);for(var o=t.keys(i),m=n?t.keys(n):[],c=0,d=0;d<o.length;d++){var C=o[d],S=parseInt(C,10);if(!l.pastSprintStart&&e<=S&&(a.addSprintStartTimelineEntry(l,e),l.pastSprintStart=!0),s&&s<S)break;var h=i[C],p=a.processTimeChanges(l,h,S);if(l.pastSprintStart&&p){if(m.length>0)for(var f=m[c];f<C;){var v=parseInt(f,10),g=n[f];a.addSprintStateChangeTimelineEntry(l,v,g),c++,f=m[c]}a.addChangeTimelineEntry(l,S,p.issues,p.deltas)}}return l.pastSprintStart||(a.addSprintStartTimelineEntry(l,e),l.pastSprintStart=!0),s&&a.addSprintCompleteTimelineEntry(l,s),l},a.processTimeChanges=function(e,s,i){var n={},u=[];return t.each(s,function(s){var r={},l=e.issueState[s.key];l||(l={key:s.key,isInChart:!1,burned:!1,values:{},estimatable:t.contains(e.estimatableIssueKeys,s.key)},e.issueState[s.key]=l),a.removeStatisticValues(l,r,e.statisticConsumer),a.removeStatisticValues(l,n,e.statisticConsumer),e.statisticConsumer.beforeProcessChange(l,i,s);var o=l.isInChart||!1;if(a.processInChartChanges(l,s),e.statisticConsumer.processChange(l,s),a.addStatisticValues(l,r,e.statisticConsumer),a.addStatisticValues(l,n,e.statisticConsumer),o||l.isInChart){var m=a.getCurrentState(e,l,r);m.change=s,u.push(m)}e.statisticConsumer.afterProcessChange(l,i,s)}),!t.isEmpty(u)&&(a.addStatisticValueDeltas(n,e.currentValues,1,e.statisticConsumer),{issues:u,deltas:n})},a.processInChartChanges=function(e,a){t.isUndefined(a.added)?e.scopeChange=!1:(e.inScope=a.added,e.scopeChange=!0),a.column?(a.column.done===!1&&(a.column.notDone=!0),a.column.notDone===!1&&(a.column.done=!0),a.column.notDone?(e.column="notDone",t.isBoolean(a.column.done)?e.oldColumn="done":e.oldColumn=void 0):a.column.done?(e.column="done",t.isBoolean(a.column.notDone)?e.oldColumn="notDone":e.oldColumn=void 0):(e.column=void 0,t.isBoolean(a.column.notDone)?e.oldColumn="notDone":e.oldColumn="done"),e.columnChange=!0):e.columnChange=!1,e.isInChart=!(!e.column||!e.inScope),e.burned="done"===e.column},a.addStatisticValues=function(e,t,s){e.isInChart&&a.addStatisticValueDeltas(e.values,t,1,s)},a.removeStatisticValues=function(e,t,s){e.isInChart&&a.addStatisticValueDeltas(e.values,t,-1,s)},a.addStatisticValueDeltas=function(e,a,s,i){s||(s=1),t.each(i.dataFields,function(t){a[t]=(a[t]||0)+(e[t]||0)*s})},a.getMaxStatisticValues=function(e,a,s){var i={};return t.each(s.dataFields,function(t){i[t]=e[t]>a[t]?e[t]:a[t]}),i},a.addChangeTimelineEntry=function(e,s,i,n){var u={time:s,issues:i,values:t.clone(e.currentValues),deltas:n};e.timeline.push(u),e.maxValues=a.getMaxStatisticValues(e.maxValues,e.currentValues,e.statisticConsumer)},a.addSprintStateChangeTimelineEntry=function(e,t,a){var s={time:t,issues:{},values:{},deltas:{},openCloseInstances:a};e.timeline.push(s)},a.addSprintStartTimelineEntry=function(e,s){e.statisticConsumer.beforeSprintStart(e);var i=a.getTimelineEntryForCurrentState(e,s);i.initial=!0,e.timeline.push(i),e.maxValues=t.clone(e.currentValues)},a.addSprintCompleteTimelineEntry=function(e,t){var s=a.getTimelineEntryForCurrentState(e,t);s.complete=!0,e.timeline.push(s)},a.getTimelineEntryForCurrentState=function(e,s){var i=[];t.each(e.issueState,function(t){t.isInChart&&i.push(a.getCurrentState(e,t))});var n={time:s,issues:i,values:t.clone(e.currentValues)};return n},a.getCurrentState=function(e,a,s){var i=t.clone(a);return i.values=t.clone(a.values),s&&(i.deltas=s,e.statisticConsumer.copyToCurrentState(i,a)),i},a.TimeTrackingStatisticConsumer={dataFields:["estimate","timeSpent"],processChange:function(e,a){a.timeC&&(t.isUndefined(a.timeC.timeSpent)?e.timeChange=!1:e.isInChart&&(e.values.timeSpent=(e.values.timeSpent||0)+(a.timeC.timeSpent||0),e.timeChange=!0),t.isUndefined(a.timeC.newEstimate)?e.estimateChange=!1:(e.values.estimate=(e.values.estimate||0)+((a.timeC.newEstimate||0)-(a.timeC.oldEstimate||0)),e.estimateChange=!0))},beforeProcessChange:function(e,t,s){a.TimeTrackingStatisticConsumer.removeExpiredEstimateChanges(e,t)},afterProcessChange:function(e,t,s){a.TimeTrackingStatisticConsumer.addEstimateChange(e,t,s)},beforeSprintStart:function(e){t.each(e.issueState,function(e){t.isUndefined(e.values.timeSpent)||(e.values.timeSpent=0)}),e.maxValues.timeSpent=0,e.currentValues.timeSpent=0},copyToCurrentState:function(e,a){e.estimateDeltas=t.clone(a.estimateDeltas)},removeExpiredEstimateChanges:function(e,a){e.estimateDeltas||(e.estimateDeltas=[]),e.estimateDeltas=t.reject(e.estimateDeltas,function(e){return e.date<=a})},addEstimateChange:function(e,t,a){if(e.estimateDeltas||(e.estimateDeltas=[]),a.timeC&&a.timeC.changeDate){var s=a.timeC.changeDate,i=(a.timeC.newEstimate||0)-(a.timeC.oldEstimate||0);e.estimateDeltas.push({worklogDate:t,date:s,issueKey:a.key,delta:i,change:a})}},getAffectingEstimateChanges:function(e,a){return a.timeC&&a.timeC.changeDate?t.filter(e.estimateDeltas,function(e){return a.timeC.changeDate<e.date}):[]}},a.EstimateStatisticConsumer={dataFields:["realValue","estimate"],processChange:function(e,t){t.statC?(e.values.oldEstimateFieldValue=t.statC.oldValue,e.values.estimateFieldValue=t.statC.newValue,e.estimateChange=!0):e.estimateChange=!1,e.isInChart&&!e.burned?e.values.estimate=e.values.estimateFieldValue:e.values.estimate=e.values.estimateFieldValue?0:e.values.estimateFieldValue},beforeProcessChange:function(e,t,a){},afterProcessChange:function(e,t,a){},beforeSprintStart:function(e){},copyToCurrentState:function(e,t){}},a.ProgressConsumer={dataFields:["issueCount","unestimatedIssueCount","totalEstimate","completedEstimate"],processChange:function(e,a){if(a.statC?(e.values.oldEstimateFieldValue=a.statC.oldValue,e.values.estimateFieldValue=a.statC.newValue,e.estimateChange=!0):e.estimateChange=!1,e.isInChart){e.values.issueCount=1,e.values.unestimatedIssueCount=e.estimatable&&t.isUndefined(e.values.estimateFieldValue)&&!e.burned?1:0;var s=e.values.estimateFieldValue||0;e.values.totalEstimate=s,e.values.completedEstimate=e.burned?s:0}else e.values.issueCount=0,e.values.unestimatedIssueCount=0,e.values.totalEstimate=0,e.values.completedEstimate=0;e.isInChart&&!e.burned?e.values.estimate=e.values.estimateFieldValue:e.values.estimate=e.values.estimateFieldValue?0:e.values.estimateFieldValue},beforeProcessChange:function(e,t,a){},afterProcessChange:function(e,t,a){},beforeSprintStart:function(e){},copyToCurrentState:function(e,t){}},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownChartView.js' */
define("jira-agile/rapid/ui/chart/burndown-chart-view",["require"],function(r){"use strict";var e,n,t,o=r("jquery"),a=r("underscore"),i=r("jira-agile/rapid/ui/chart/chart"),d=r("jira-agile/rapid/ui/chart/chart-colors"),s=r("jira-agile/rapid/ui/chart/chart-controller"),l=r("jira-agile/rapid/ui/chart/chart-view"),h=r("jira-agile/rapid/global-events"),g=r("jira-agile/rapid/ui/chart/non-working-days-util"),c=r("jira-agile/rapid/ui/SPConfigController"),u=r("jira/analytics/web-client"),p=(r("jira/featureflags/feature-manager"),GH.ChartTimeFrames),w=GH.ChartTooltip,f=GH.FlotChartUtils,k=GH.RapidBoard,b=GH.tpl;h.on("pre-initialization",function(){e=r("jira-agile/rapid/ui/chart/burndown-chart-controller"),n=r("jira-agile/rapid/ui/chart/burndown-chart-model"),t=r("jira-agile/rapid/ui/chart/report-controller")});var C={};return C.gadgetMode=!1,C.wallboardMode=!1,C.nonWorkingDaysShown=void 0,C.renderStats=!0,C.renderNonWorkingDayControls=!0,C.renderDataPoints=!0,C.setNonWorkingDaysShown=function(r){C.nonWorkingDaysShown=r},C.setGadgetMode=function(r){C.gadgetMode=r,C.renderStats=!r,C.renderNonWorkingDayControls=!r,C.renderDataPoints=!r},C.setWallboardMode=function(r){C.wallboardMode=r},C.renderChartLoading=function(){l.hideChartControls(),l.getChartContentElem(!0).html(b.burndownchart.renderChartBody()),l.showSpinner()},C.showWarning=function(r){var e=AJS.$(b.burndownchart.renderWarningMessage({message:r}));e.prependTo("#ghx-chart-content"),l.hideSpinner()},C.showChart=function(){l.hideSpinner(),n.getWarning()&&C.showWarning(n.getWarning()),n.isEmpty()||(C.renderUI(),C.gadgetMode||C.sprintActions())},C.sprintActions=function(){t.renderSprintActions(l.getSprintActions(!0),k.State.getRapidViewId(),e.sprintPicker.getItems(),e.sprintPicker.getSelectedItem())},C.renderUI=function(){l.showChartGroup(),C.renderChart(),C.renderStats&&C.renderChartStats()},C.renderChartStats=function(){var r=n.getDataTable(),e=o(b.burndownchart.renderBurndownChartTable({statistics:r.statistics,rows:r.rows}));o("#ghx-chart-data").empty().append(e)},C.renderChart=function(){if(!n.hasAnyWorkingDays()){o("#ghx-chart-wrap").hide();var r=o("#ghx-chart-empty").html(b.burndownchart.renderNoWorkingDaysMessage({}));return r.find("a").click(function(r){r.preventDefault(),c.openConfig("time")}),void r.show()}o("#ghx-chart-empty").hide(),o("#ghx-chart-wrap").show(),C.nonWorkingDaysShown?C.renderChartWithNonWorkingDays():C.renderChartWithoutNonWorkingDays();var e={attributes:{boardId:k.State.getRapidViewId(),boardType:"scrum",reportType:"agile",simplified:k.State.isAgilityBoard()},action:"viewed",actionSubject:"report",actionSubjectId:"burndownChart",source:"burndownChartScreen"};u.sendTrackEvent(e)},C.renderChartWithoutNonWorkingDays=function(){var r=n.getChartStartTime(),e=g.transformSeriesExcludingNonWorkingDays(n.getSeries(),r);C.showNotificationIfEmpty(e);var t=function(r,e){var t=g.transformDateIfInNonWorkingDays(r,n.getChartStartTime()),a="%b %d";return"hour"===e.tickSize[1]&&(a+=" %h:%M"),o.plot.formatDate(t,a)},a=C.getDefaultPlotOptions();a.xaxis.tickFormatter=t,C.renderBurndownChart(e,a)},C.renderChartWithNonWorkingDays=function(){var r=n.getSeries();C.showNotificationIfEmpty(r);var e=C.getDefaultPlotOptions();e.grid.markings||(e.grid.markings=s.getNonWorkingBlocks),C.renderBurndownChart(r,e),C.renderNonWorkingDayControls&&C.addNonWorkingDaysToLegend()},C.renderBurndownChart=function(r,n){f.setAndAlignAxisLabels("Time",C.getYAxisLabel());var t=l.getChartView(!0),o=i.draw(e.id,t,r,n);C.renderDataPoints&&(o.hooks.drawSeries.push(C.gatherPoints),o.hooks.draw.push(f.deferredRenderPoints),C.bindEvents(t)),C.renderNonWorkingDayControls&&C.addNonWorkingDaysToLegend()},C.addNonWorkingDaysToLegend=function(){var r=l.getChartView().find(".legend").find("tbody"),e=r.find("#ghx-chart-show-non-working-days");if(0===e.length){var n=o(b.burndownchart.renderShowNonWorkingDaysOption({checked:C.nonWorkingDaysShown}));r.append(n),r.find("#ghx-chart-show-non-working-days").click(C.toggleNonWorkingDays)}},C.toggleNonWorkingDays=function(){C.nonWorkingDaysShown=o("#ghx-chart-show-non-working-days").is(":checked"),k.State.setNonWorkingDaysShown("burndown",C.nonWorkingDaysShown),C.renderChart()},C.showNotificationIfEmpty=function(r){if(a.isEmpty(r)){var e=o(b.burndownchart.renderBurndownNoSprint()).css({"margin-top":"0px"});e.prependTo("#ghx-chart-content")}},C.renderAndShowSprintPicker=function(){e.sprintPicker.render(l.getChartSelector(!0)),l.showChartGroup()},C.getDefaultPlotOptions=function(){var r={xaxis:{mode:"time"},yaxis:n.getYAxis(),series:{points:{show:!1,radius:3,symbol:"circle"},lines:{show:!0}},grid:{hoverable:!0,clickable:!1,autoHighlight:!1},mouseEnterExitEvents:!0,legend:{container:null,backgroundOpacity:.5,position:"ne"}};return(C.gadgetMode||C.wallboardMode)&&(r.series={lines:{show:!0,lineWidth:C.wallboardMode?4:2},points:{show:!1},shadowSize:0},C.wallboardMode?r.grid={backgroundColor:d.wallboard.backgroundColor,borderWidth:1,borderColor:d.wallboard.borderColor,color:d.wallboard.textColor,noGridBottomOffsetDelta:0,tickColor:d.wallboard.tickColor,markings:C.getMarkingsForGadget}:r.grid={color:"#333",borderWidth:1,borderColor:"#999",tickColor:"#eee"}),r},C.getMarkingsForGadget=function(){var r=d.nonWorkingDaysWallboard,e=s.getNonWorkingBlocks();return a.map(e,function(e){return e.color=r,e})},C.bindEvents=function(r){r.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",f.handleMouseOverStateChange),r.unbind("plothover plotclick plotselected dblclick"),r.bind("plothover",C.handlePlotHover),r.bind("plotclick",f.handlePlotClick),r.bind("plotselected",C.handleRangeSelection),r.bind("dblclick",C.resetRangeSelection)},C.handlePlotHover=function(r,e,t){var i=o("#ghx-tooltip");if(t){var d=t.series.id,s=t.dataIndex,h=n.getDataBySeriesAtIndex(d,s);if(!a.isEmpty(h))return void(C.previousPlotHoverPoint!==t.dataIndex&&(C.previousPlotHoverPoint=t.dataIndex,i.remove(),C.showChartTooltip(t,d,h,t.datapoint[0]),i.hasClass("ghx-has-warnings")||l.getChartView().addClass("ghx-clickable")))}i.remove(),C.previousPlotHoverPoint=null,l.getChartView().removeClass("ghx-clickable")},C.previousPlotHoverPoint=void 0,C.roundDuration=function(r){return 0!==r?Math.round(10*r)/10:0},C.showChartTooltip=function(r,e,t){if(t){var o=n.getTooltipData(e,t),a=new w(r,o);a.render()}},C.gatherPoints=function(r,e,t){if(r.mouseEntered){var o=t.id,a=n.getDataBySeries(o);if(a){var i=f.gatherPoints(t,a);r.realPointsPerSeries[o]=i}}},C.getYAxisLabel=function(){return n.getStatistic().name},C.handleRangeSelection=function(r,e){var n=e.xaxis.from,t=e.xaxis.to;p.setNewChartLimits(-1,n,t)},C.resetRangeSelection=function(r){p.setNewChartLimits(0,0,0)},C});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/BurndownChart.soy' */
// This file was automatically generated from BurndownChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.burndownchart.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.burndownchart == 'undefined') { GH.tpl.burndownchart = {}; }


GH.tpl.burndownchart.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-empty"></div><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-overview-group"><h4></h4><p class="ghx-description"></p><div id="ghx-chart-overview"></div></div><div id="ghx-chart-legend"></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderChartBody.soyTemplateName = 'GH.tpl.burndownchart.renderChartBody';
}


GH.tpl.burndownchart.renderBurndownNoSprint = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml('There are no sprints currently in progress.') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderBurndownNoSprint.soyTemplateName = 'GH.tpl.burndownchart.renderBurndownNoSprint';
}


GH.tpl.burndownchart.renderBurndownChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-hover-highlight ghx-vertical-lines"><thead><tr><th></th><th></th><th></th><th></th>';
  var statisticList10 = opt_data.statistics;
  var statisticListLen10 = statisticList10.length;
  for (var statisticIndex10 = 0; statisticIndex10 < statisticListLen10; statisticIndex10++) {
    var statisticData10 = statisticList10[statisticIndex10];
    output += '<th colspan="3" id="series-' + soy.$$escapeHtml(statisticData10.id) + '" class="ghx-center">' + soy.$$escapeHtml(statisticData10.name) + '</th>';
  }
  output += '</tr><tr><th id="series-date">' + soy.$$escapeHtml('Date') + '</th><th id="series-issue">' + soy.$$escapeHtml('Issue') + '</th><th id="series-event-type">' + soy.$$escapeHtml('Event Type') + '</th><th id="series-event-detail">' + soy.$$escapeHtml('Event Detail') + '</th>';
  var statisticList26 = opt_data.statistics;
  var statisticListLen26 = statisticList26.length;
  for (var statisticIndex26 = 0; statisticIndex26 < statisticListLen26; statisticIndex26++) {
    var statisticData26 = statisticList26[statisticIndex26];
    output += '<th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-inc" class="ghx-center ghx-minimal"><abbr title="' + soy.$$escapeHtml('Increase') + '">' + soy.$$escapeHtml('Inc.') + '</abbr></th><th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-dec" class="ghx-center ghx-minimal"><abbr title="' + soy.$$escapeHtml('Decrease') + '">' + soy.$$escapeHtml('Dec.') + '</abbr></th><th id="series-' + soy.$$escapeHtml(statisticData26.id) + '-value" class="ghx-right ghx-minimal">' + ((statisticData26.isSum) ? 'Sum' : soy.$$escapeHtml('Remaining')) + '</th>';
  }
  output += '</tr></thead><tbody>';
  var rowList50 = opt_data.rows;
  var rowListLen50 = rowList50.length;
  for (var rowIndex50 = 0; rowIndex50 < rowListLen50; rowIndex50++) {
    var rowData50 = rowList50[rowIndex50];
    output += '<tr><td headers="series-date">' + ((rowData50.dateString) ? (rowData50.recordedDateString) ? '<span class="ghx-backdated-event" title="' + soy.$$escapeHtml(AJS.format('Recorded at {0}',rowData50.recordedDateString)) + '">' + soy.$$escapeHtml(rowData50.dateString) + '</span>' : soy.$$escapeHtml(rowData50.dateString) : '') + '</td><td headers="series-issue">';
    if (rowData50.initial || rowData50.complete) {
      var issueList66 = rowData50.issues;
      var issueListLen66 = issueList66.length;
      for (var issueIndex66 = 0; issueIndex66 < issueListLen66; issueIndex66++) {
        var issueData66 = issueList66[issueIndex66];
        output += ((issueData66.parentKey) ? GH.tpl.burndownchart.renderIssueKeyLink({key: issueData66.parentKey}) + ' / ' : '') + GH.tpl.burndownchart.renderIssueKeyLink({key: issueData66.key}) + '<br />';
      }
    } else if (! rowData50.openClose) {
      output += ((rowData50.parentKey) ? GH.tpl.burndownchart.renderIssueKeyLink({key: rowData50.parentKey}) + ' / ' : '') + GH.tpl.burndownchart.renderIssueKeyLink({key: rowData50.key});
    }
    output += '</td><td headers="series-event-type">' + ((rowData50.event.typeAsHtml) ? soy.$$filterNoAutoescape(rowData50.event.type) : soy.$$escapeHtml(rowData50.event.type)) + '</td><td headers="series-event-detail">' + soy.$$escapeHtml(rowData50.event.detail);
    if (rowData50.event.notes) {
      output += '<div class="description">';
      var noteList96 = rowData50.event.notes;
      var noteListLen96 = noteList96.length;
      for (var noteIndex96 = 0; noteIndex96 < noteListLen96; noteIndex96++) {
        var noteData96 = noteList96[noteIndex96];
        output += ((! (noteIndex96 == 0)) ? '<br />' : '') + soy.$$escapeHtml(noteData96);
      }
      output += '</div>';
    }
    output += '</td>';
    var statisticList104 = opt_data.statistics;
    var statisticListLen104 = statisticList104.length;
    for (var statisticIndex104 = 0; statisticIndex104 < statisticListLen104; statisticIndex104++) {
      var statisticData104 = statisticList104[statisticIndex104];
      if (rowData50.initial) {
        output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc" class="ghx-right">';
        var issueList110 = rowData50.issues;
        var issueListLen110 = issueList110.length;
        for (var issueIndex110 = 0; issueIndex110 < issueListLen110; issueIndex110++) {
          var issueData110 = issueList110[issueIndex110];
          output += '<div class="ghx-nowrap">' + ((issueData110.valuesText[statisticData104.valueId]) ? soy.$$escapeHtml(issueData110.valuesText[statisticData104.valueId]) : '-') + '</div>';
        }
        output += '</td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>';
      } else if (rowData50.complete || rowData50.openClose) {
        output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc"></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>';
      } else {
        output += (rowData50.deltasType[statisticData104.valueId] == 'inc') ? '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc" class="ghx-right"><div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.deltasText[statisticData104.valueId]) + '</div></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec"></td>' : '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-inc"></td><td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-dec" class="ghx-right"><div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.deltasText[statisticData104.valueId]) + '</div></td>';
      }
      output += '<td headers="series-' + soy.$$escapeHtml(statisticData104.id) + '-value" class="ghx-right">';
      if (rowData50.initial) {
        var issueList151 = rowData50.issues;
        var issueListLen151 = issueList151.length;
        for (var issueIndex151 = 0; issueIndex151 < issueListLen151; issueIndex151++) {
          var issueData151 = issueList151[issueIndex151];
          output += '<br />';
        }
      } else if (rowData50.complete) {
        var issueList155 = rowData50.issues;
        var issueListLen155 = issueList155.length;
        for (var issueIndex155 = 0; issueIndex155 < issueListLen155; issueIndex155++) {
          var issueData155 = issueList155[issueIndex155];
          output += '<div class="ghx-nowrap">' + ((issueData155.valuesText[statisticData104.valueId]) ? soy.$$escapeHtml(issueData155.valuesText[statisticData104.valueId]) : '-') + '</div>';
        }
      }
      output += ((! rowData50.openClose) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData50.valuesText[statisticData104.valueId]) + '</div>' : '') + '</td>';
    }
    output += '</tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderBurndownChartTable.soyTemplateName = 'GH.tpl.burndownchart.renderBurndownChartTable';
}


GH.tpl.burndownchart.renderIssueKeyLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderIssueKeyLink.soyTemplateName = 'GH.tpl.burndownchart.renderIssueKeyLink';
}


GH.tpl.burndownchart.renderShowNonWorkingDaysOption = function(opt_data, opt_ignored) {
  return '<tr><td></td><td><input type="checkbox" id="ghx-chart-show-non-working-days" ' + ((opt_data.checked) ? ' checked="checked"' : '') + '/> <label for="ghx-chart-show-non-working-days"><span class="ghx-description">' + soy.$$escapeHtml('Show Non-Working Days') + '</span></label></td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderShowNonWorkingDaysOption.soyTemplateName = 'GH.tpl.burndownchart.renderShowNonWorkingDaysOption';
}


GH.tpl.burndownchart.renderNoWorkingDaysMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span><strong>' + soy.$$escapeHtml('Chart cannot be displayed') + '</strong></p><p>' + soy.$$filterNoAutoescape(AJS.format('All of the days within this sprint are {0}configured as non-working days{1}. To display a Burndown Chart some days need to be working days.','<a href="' + GH.Ajax.CONTEXT_PATH + '/secure/RapidView.jspa?tab=time&rapidView=' + GH.RapidViewConfig.currentData.data.id + '">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderNoWorkingDaysMessage.soyTemplateName = 'GH.tpl.burndownchart.renderNoWorkingDaysMessage';
}


GH.tpl.burndownchart.renderSprintCompleteEventType = function(opt_data, opt_ignored) {
  return '' + ((opt_data.closingUserHtml) ? soy.$$filterNoAutoescape(AJS.format('Sprint ended by {0}',opt_data.closingUserHtml)) : soy.$$escapeHtml('Sprint ended'));
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderSprintCompleteEventType.soyTemplateName = 'GH.tpl.burndownchart.renderSprintCompleteEventType';
}


GH.tpl.burndownchart.renderSprintReopenEventType = function(opt_data, opt_ignored) {
  return '' + ((opt_data.reopenUserHtml) ? soy.$$filterNoAutoescape(AJS.format('Sprint reopened by {0}',opt_data.reopenUserHtml)) : soy.$$escapeHtml('Sprint reopened'));
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderSprintReopenEventType.soyTemplateName = 'GH.tpl.burndownchart.renderSprintReopenEventType';
}


GH.tpl.burndownchart.renderWarningMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({closeable: 'false', content: '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>'});
};
if (goog.DEBUG) {
  GH.tpl.burndownchart.renderWarningMessage.soyTemplateName = 'GH.tpl.burndownchart.renderWarningMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ReportSLATracker.js' */
var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t};define("jira-agile/rapid/ui/chart/report-sla-tracker",["require"],function(t){"use strict";var e=t("jira/analytics/web-client"),r=t("jira/ajs/ajax/smart-ajax"),a=t("jquery"),n=t("jira/util/unsafe-logger"),i={},o="jira-software",s="report-critical-data-failed-unknown-reason",u="report-critical-data-failed-with-status-code",c="report-failed-elements-missing",p="report-failed-unknown-report";i.reportNames={burndown:"sprintBurndown",burnup:"burnup",sprintReport:"sprintReport",cfd:"cumulativeFlowDiagram",velocity:"velocity",unknown:"unknown"},i.checkReportAndFireSlaEvent=function(t,e,r,a,n){if(e)return void b(t,e,r);switch(t){case i.reportNames.burndown:return void f();case i.reportNames.burnup:return void m();case i.reportNames.sprintReport:return void v();case i.reportNames.cfd:return void d();case i.reportNames.velocity:return void l(a,n);default:return void N({reason:p,reportName:i.reportNames.unknown})}};var l=function(t,e){var r=a("#ghx-chart-view").length,n=a("#ghx-chart-content .info").length,o=a("#content").html();h(i.reportNames.velocity,r,n,o,t,e)},d=function(){var t=a("#ghx-chart-view").length;g(t,!1,i.reportNames.cfd)},v=function(){var t=a("#ghx-report-content").length,e=a("#ghx-chart-content .info").length;g(t,e,i.reportNames.sprintReport)},f=function(){var t=a("#ghx-chart-view").length,e=a("#ghx-chart-content .info").length;g(t,e,i.reportNames.burndown)},m=function(){var t=a("#ghx-sprint-burnup-report svg").length,e=a(".ghx-blank-state").length;g(t,e,i.reportNames.burnup)},g=function(t,e,r){t||e?x({reportName:r,attributes:{isChart:!!t,isBlankExperience:!!e}}):N({reason:c,reportName:r})},h=function(t,e,r,a,i,o){e||r?x({reportName:t,attributes:{isChart:!!e,isBlankExperience:!!r}}):(N({reason:c,reportName:t}),n.unsafeError(t,"Missing elements on the "+t+" report page",{dom:a,requestSuccess:i,ajaxErrors:o&&o.error?JSON.stringify(o.error):""}))},b=function(t,e,a){var n=e&&e.status;if(n)400===n||401===n||403===n?x({reportName:t,attributes:a||{}}):404===n||(n>400&&n<500?x({reportName:t,attributes:a||{}}):N({reason:u,reportName:t,statusCode:n.toString(),attributes:a||{}}));else{var i=(e&&e.statusText)===r.SmartAjaxResult.TIMEOUT,o=0===(e&&e.readyState),c=(e&&e.aborted)===!0;if(i||o||c)return void w({reportName:t,attributes:{isClientTimeout:i,readyStateWasUnopened:o,isAborted:c}});N({reason:s,reportName:t,attributes:a||{}})}},N=function(t){var r=t.reason,a=t.reportName,n=t.statusCode,i=t.attributes;e.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskFail",attributes:_extends({task:j(a),analyticsSource:a,application:o,edition:GH.Util.getEdition(o),isClassic:!0,failureReason:r,statusCode:n},i)})},w=function(t){var r=t.reportName,a=t.attributes;e.sendOperationalEvent({source:"ui",actionSubject:"reports",action:"networkFail",attributes:_extends({task:j(r),analyticsSource:r,application:o,edition:GH.Util.getEdition(o),isClassic:!0},a)})},x=function(t){var r=t.reportName,a=t.attributes;e.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskSuccess",attributes:_extends({task:j(r),analyticsSource:r,application:o,edition:GH.Util.getEdition(o),isClassic:!0},a)})},j=function(t){return"view"+(t[0].toUpperCase()+t.substring(1))};return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/SprintReportGrowthUtils.js' */
GH.SprintReportGrowthUtils={};var AnalyticsClient=require("jira/analytics/web-client"),FeatureFlagService=require("jira/featureflags/feature-manager"),ProjectPropertyService=require("jira/service/project-property-service"),HaveISeenItService=require("jira/featureflags/have-i-seen-it"),SPRINT_REPORT_V2_HAVEISEENIT_KEY="jsw.og.sprint.report.v2",DISPLAY_OPSGENIE_SPRINTREPORT_PROPERTY="sprintreport.is-opsgenie-integration-enabled",JSW_CLASSIC_SPRINT_REPORT_RETRO_KEY="jsw.classic.sprint.report.retros";GH.SprintReportGrowthUtils.hasOpsgenie=function(){var e=!1;try{var r=JSON.parse(AJS.Meta.get("licensed-products"));e=!!r.opsgenie||!!r["jira-servicedesk"]}catch(t){}return e},GH.SprintReportGrowthUtils.isInSprintReportRetroExperiment=function(){var e=FeatureFlagService.getFlagValue(JSW_CLASSIC_SPRINT_REPORT_RETRO_KEY);return"experiment"===e},GH.SprintReportGrowthUtils.isEligibleForOpsgenieExperiment=function(){var e=AJS.Meta.getBoolean("xflow-product-suggestions-enabled");return e&&!GH.SprintReportGrowthUtils.hasOpsgenie()},GH.SprintReportGrowthUtils.deferredHasSprintReportV1BeenDismissed=function(){var e="sprint-report-banner",r=AJS.$.Deferred(),t="jsw.og.sprint.report.learning.experiment";return HaveISeenItService.haveISeenIt("growth",t,e).done(function(e){r.resolve(e)}).fail(function(e){r.resolve(!1)}),r},GH.SprintReportGrowthUtils.deferredHasAdminUserDismissed=function(){var e=AJS.$.Deferred(),r=$("meta[name=ghx-project-id]").attr("content");return ProjectPropertyService.getProperty(r,DISPLAY_OPSGENIE_SPRINTREPORT_PROPERTY,!0).done(function(r){e.resolve(!r)}).fail(function(r){e.resolve(!1)}),e},GH.SprintReportGrowthUtils.deferredHasBasicUserDismissed=function(){var e=AJS.$.Deferred();return window.JIRA.isSiteadmin()?e.resolve(!1):HaveISeenItService.haveISeenIt("growth",SPRINT_REPORT_V2_HAVEISEENIT_KEY,DISPLAY_OPSGENIE_SPRINTREPORT_PROPERTY).done(function(r){e.resolve(r)}).fail(function(r){e.resolve(!1)}),e},GH.SprintReportGrowthUtils.deferredIsEnabledSprintReportV2=function(){var e=AJS.$.Deferred();return AJS.$.when(GH.SprintReportGrowthUtils.deferredHasAdminUserDismissed(),GH.SprintReportGrowthUtils.deferredHasBasicUserDismissed()).done(function(r,t){var i=!r&&!t;e.resolve(i)}),e},GH.SprintReportGrowthUtils.isEnabledSprintReportV2PostExpanding=function(){var e=AJS.$.Deferred();return AJS.$.when(GH.SprintReportGrowthUtils.deferredHasAdminUserDismissed()).done(function(r){e.resolve(!r)}),e.promise()},GH.SprintReportGrowthUtils.deferredIsInSprintReportV2PreExperiment=function(){var e=AJS.$.Deferred();return GH.SprintReportGrowthUtils.isEligibleForOpsgenieExperiment()?GH.SprintReportGrowthUtils.deferredHasSprintReportV1BeenDismissed().done(function(r){e.resolve(!r)}):e.resolve(!1),e},GH.SprintReportGrowthUtils.isInSprintReportV2PreExperiment=function(){return GH.SprintReportGrowthUtils.deferredIsInSprintReportV2PreExperiment().promise()},GH.SprintReportGrowthUtils.shouldSeeSprintReportV2PreExpanding=function(){var e=AJS.$.Deferred(),r=e.promise();return AJS.$.when(GH.SprintReportGrowthUtils.deferredIsInSprintReportV2PreExperiment(),GH.SprintReportGrowthUtils.deferredIsEnabledSprintReportV2()).done(function(r,t){var i=r&&t;e.resolve(i)}),r},GH.SprintReportGrowthUtils.shouldSeeSprintReportV2PostExpanding=function(){var e=AJS.$.Deferred(),r=e.promise();return GH.SprintReportGrowthUtils.hasOpsgenie()?GH.SprintReportGrowthUtils.isEnabledSprintReportV2PostExpanding():(e.resolve(!1),r)},GH.SprintReportGrowthUtils.fireOperationalEvent=function(e,r){var t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();AnalyticsClient.sendOperationalEvent({source:"sprintReportScreen",actionSubject:e,action:r,attributes:{boardId:GH.SprintRetrospectiveController.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile",sprintId:t.id}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/SprintReportController.js' */
var AnalyticsClient=require("jira/analytics/web-client"),ReportSLATracker=require("jira-agile/rapid/ui/chart/report-sla-tracker"),moment=require("jira/moment");GH.SprintRetrospectiveController=new GH.Events,GH.SprintRetrospectiveController.id="sprintRetrospective",GH.SprintRetrospectiveController.displayed=!1,GH.SprintRetrospectiveController.supportsPages=!1,GH.SprintRetrospectiveController.rapidViewData={},GH.SprintRetrospectiveController.rapidViewConfig={},GH.SprintRetrospectiveController.referredBySprintCompleteDialog=!1,function(){var t=require("jira-agile/rapid/analytics-tracker");GH.SprintRetrospectiveController.loadAlertChart=require("jira-agile/rapid/ui/alert-chart/api"),GH.SprintRetrospectiveController.analytics=new t("gh.report.sprintRetrospective"),GH.SprintRetrospectiveController.linkPagesAnalytics={action:new t("gh.linkedPages.discovery.action"),show:new t("gh.linkedPages.discovery.show")}}(),GH.SprintRetrospectiveController.setRapidView=function(t){GH.SprintRetrospectiveController.rapidViewData=t||{}},GH.SprintRetrospectiveController.isApplicable=function(t){return t.sprintSupportEnabled&&!GH.RapidBoard.State.isAgilityBoard()},GH.SprintRetrospectiveController.getNormalizedFromInternal=function(){return{sprint:GH.SprintRetrospectiveController.getSelectedSprintId()||null}},GH.SprintRetrospectiveController.toUrl=function(t){return _.isNull(t.sprint)?{}:{sprint:t.sprint}},GH.SprintRetrospectiveController.updateInternalFromNormalized=function(t){GH.SprintRetrospectiveController.setSelectedSprintFromUrlState(t.sprint)},GH.SprintRetrospectiveController.getNormalizedFromUrl=function(t){return{sprint:GH.RapidBoard.UrlState.normalizeNumberParam(t.sprint,null)}},GH.SprintRetrospectiveController.init=function(){GH.SprintRetrospectiveController.trigger("before:renderChart");var t=require("jira-agile/rapid/ui/component/chart-picker");GH.SprintRetrospectiveController.sprintPicker=new t("sprintRetrospective.selectedSprintId")},GH.SprintRetrospectiveController.show=function(){GH.SprintRetrospectiveController.displayed=!0,GH.SprintRetrospectiveController.rapidViewData&&(GH.SprintRetrospectiveController.renderChartView(),GH.SprintRetrospectiveController.analytics.trigger("show"))},GH.SprintRetrospectiveController.hide=function(){GH.SprintRetrospectiveController.displayed=!1,GH.SprintRetrospectiveView.hide(),AJS.$(GH).unbind("."+GH.SprintRetrospectiveController.id)},GH.SprintRetrospectiveController.renderChartView=function(){GH.SprintRetrospectiveController.initializeControls(),GH.ChartView.getChartContentElem(!0).html(GH.tpl.sprintretrospective.renderReportBody()),GH.ChartView.showSpinner(),GH.SprintRetrospectiveController.loadRapidViewConfig()},GH.SprintRetrospectiveController.initializeControls=function(){AJS.$("#ghx-chart-controls").hide(),AJS.$(GH.SprintRetrospectiveController.sprintPicker).bind("selectedItemChanged",GH.SprintRetrospectiveController.handleSprintChanged)},GH.SprintRetrospectiveController.loadRapidViewConfig=function(){var t=function(t){GH.SprintRetrospectiveController.displayed&&(GH.SprintRetrospectiveController.rapidViewConfig=t,GH.SprintRetrospectiveController.loadSprintOptions())};GH.RapidViewConfig.fetchConfiguration(GH.SprintRetrospectiveController.rapidViewData.id).done(t)},GH.SprintRetrospectiveController.loadSprintOptions=function(){var t=GH.RapidBoard.State.getRapidViewId();GH.Ajax.get({url:"/sprintquery/"+t,data:{includeFutureSprints:!1}},"rapidChartData").done(GH.SprintRetrospectiveController.processSprintsData)},GH.SprintRetrospectiveController.processSprintsData=function(t){if(GH.SprintRetrospectiveController.displayed){t.sprints.reverse(),GH.SprintRetrospectiveController.sprintPicker.setItems(t.sprints),GH.SprintRetrospectiveController.sprintPicker.setDefaultItem(GH.SprintRetrospectiveController.getDefaultSprintForPicker(t.sprints));var e=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();GH.SprintRetrospectiveController.sprintPicker.render(AJS.$("#ghx-chart-selector")),GH.ChartView.showChartGroup(),GH.RapidBoard.State.pushState(),e?(GH.SprintRetrospectiveController.loadReportData(),GH.SprintRetrospectiveController.fireTrackEvent()):GH.ChartView.hideSpinner()}},GH.SprintRetrospectiveController.loadReportData=function(){var t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();GH.Ajax.get({url:"rapid/charts/sprintreport",data:{rapidViewId:GH.SprintRetrospectiveController.rapidViewConfig.id,sprintId:t.id}},"rapidChartData").done(function(e){GH.SprintRetrospectiveController.displayed&&GH.SprintRetrospectiveController.processReportData(t,e)}).fail(GH.ChartView.hideSpinner),GH.Ajax.get({url:"/rapid/charts/scopechangeburndownchart.json",data:{rapidViewId:GH.SprintRetrospectiveController.rapidViewConfig.id,sprintId:t.id}},"rapidChartData.burndown").done(function(t){GH.SprintRetrospectiveController.displayed&&GH.SprintRetrospectiveView.showMiniBurndown(t)}).fail(handleFail)};var handleFail=function(t,e){ReportSLATracker.checkReportAndFireSlaEvent(ReportSLATracker.reportNames.sprintReport,e),GH.ChartView.hideSpinner()};GH.SprintRetrospectiveController.processReportData=function(t,e){GH.SprintRetrospectiveController.supportsPages=e.supportsPages,GH.SprintRetrospectiveView.show();var r;r="duration"===GH.SprintRetrospectiveController.rapidViewConfig.estimationStatistic.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration:GH.NumberFormat.format;var n=function(t){return null==t?"-":r(t)};e.contents.completedIssuesEstimateSum.text=n(e.contents.completedIssuesEstimateSum.value),e.contents.completedIssuesInitialEstimateSum.text=n(e.contents.completedIssuesInitialEstimateSum.value),e.contents.issuesNotCompletedEstimateSum.text=n(e.contents.issuesNotCompletedEstimateSum.value),e.contents.issuesNotCompletedInitialEstimateSum.text=n(e.contents.issuesNotCompletedInitialEstimateSum.value),e.contents.issuesCompletedInAnotherSprintEstimateSum.text=n(e.contents.issuesCompletedInAnotherSprintEstimateSum.value),e.contents.issuesCompletedInAnotherSprintInitialEstimateSum.text=n(e.contents.issuesCompletedInAnotherSprintInitialEstimateSum.value),e.contents.puntedIssuesEstimateSum.text=n(e.contents.puntedIssuesEstimateSum.value),e.contents.puntedIssuesInitialEstimateSum.text=n(e.contents.puntedIssuesInitialEstimateSum.value),e.contents.allIssuesEstimateSum.text=n(e.contents.allIssuesEstimateSum.value);var i=function(t){GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash(t,"estimateStatistic",r),GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash(t,"currentEstimateStatistic",r)};_.each(e.contents.completedIssues,i),_.each(e.contents.issuesNotCompletedInCurrentSprint,i),_.each(e.contents.issuesCompletedInAnotherSprint,i),_.each(e.contents.puntedIssues,i);var o=GH.ChartUtils.createIssueJql(e.contents.completedIssues.concat(e.contents.issuesNotCompletedInCurrentSprint).concat(e.contents.puntedIssues)),p=GH.ChartUtils.createIssueJql(e.contents.completedIssues),s=GH.ChartUtils.createIssueJql(e.contents.issuesNotCompletedInCurrentSprint),a=GH.ChartUtils.createIssueJql(e.contents.issuesCompletedInAnotherSprint),l=GH.ChartUtils.createIssueJql(e.contents.puntedIssues),c=!0;GH.SprintRetrospectiveView.showSprintReport(t,e,GH.SprintRetrospectiveController.rapidViewConfig.estimationStatistic,encodeURIComponent(o),encodeURIComponent(p),encodeURIComponent(s),encodeURIComponent(a),encodeURIComponent(l),c),GH.SprintRetrospectiveController.postProcessReportData(t),GH.SprintReportGrowthUtils.shouldSeeSprintReportV2PreExpanding().done(function(t){t?GH.SprintRetrospectiveController.showOpsgenieSprintReportBanner(e):GH.SprintRetrospectiveController.hideOpsgenieSprintReportBanner()}),GH.SprintReportGrowthUtils.shouldSeeSprintReportV2PostExpanding().done(function(t){t&&GH.SprintRetrospectiveController.initAlertChart(e)}),GH.SprintRetrospectiveController.showConfluenceSprintRetrosButton(t)},GH.SprintRetrospectiveController.fireTrackEvent=function(){var t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();AnalyticsClient.sendTrackEvent({source:"sprintReportScreen",action:"viewed",actionSubject:"report",actionSubjectId:"sprint",attributes:{boardId:GH.SprintRetrospectiveController.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile",sprintId:t.id}})},GH.SprintRetrospectiveController.handleSprintChanged=function(t){GH.SprintRetrospectiveView.clearDialog(),GH.SprintRetrospectiveController.displayed&&(GH.RapidBoard.State.pushState(),GH.SprintRetrospectiveController.loadReportData())},GH.SprintRetrospectiveController.getDefaultSprintForPicker=function(t){var e=_.filter(t,function(t){return"CLOSED"===t.state});return e.length>0?_.first(e):_.first(t)},GH.SprintRetrospectiveController.getSelectedSprintId=function(){var t=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();if(t)return t.id;var e=GH.SprintRetrospectiveController.sprintPicker.getStoredSelectedItemId();return e!==-1?e:null},GH.SprintRetrospectiveController.setSelectedSprintFromUrlState=function(t){GH.SprintRetrospectiveController.sprintPicker.storeSelectedItemId(t)},GH.SprintRetrospectiveController.postProcessReportData=function(t){GH.SprintRetrospectiveController.trigger("after:renderChart"),GH.SprintRetrospectiveController.supportsPages&&GH.SprintRetrospectiveController.shouldShowCreateRetroDialog(t.id)&&GH.SprintRetrospectiveView.showCreateRetrospectiveDialog(t)},GH.SprintRetrospectiveController.shouldShowCreateRetroDialog=function(t){return!GH.SprintReportGrowthUtils.isInSprintReportRetroExperiment()&&!!_.find(GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog(),function(e){return e.sprintId===t&&!e.dismissed})},GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog=function(){return GH.storage.get("gh.markedSprintsForRetroDialog")||[]},GH.SprintRetrospectiveController.markSprintAsDismissed=function(t){var e=GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog();_.each(e,function(e){e.sprintId===t&&(e.dismissed=!0)}),GH.storage.put("gh.markedSprintsForRetroDialog",e)},GH.SprintRetrospectiveController.tryMarkSprintForRetroDialog=function(t){function e(e){return e.sprintId===t}var r=GH.SprintRetrospectiveController.getSprintsMarkedForRetroDialog();!_.find(r,e)&&r.length<5&&r.push({dismissed:!1,sprintId:t}),GH.storage.put("gh.markedSprintsForRetroDialog",r)},GH.SprintRetrospectiveController.getAppLinkData=function(){function t(t){var e=_.findWhere(t,{primary:!0});return e?e.url+GH.LinkedPagesController.CONFLUENCE_CREATE_PAGE_ACTION:null}var e=GH.SprintRetrospectiveController.sprintPicker.getSelectedItem();return GH.LinkedPagesController.getLinkedPagesForEntity(GH.LinkedPagesController.SPRINT,e.id).andThen(function(r){var n={jiraApplicationId:r.jiraApplicationId,appLinkUrl:t(r.applicationLinks),entityId:e.id,jiraUrl:r.jiraBaseUrl};return n})},GH.SprintRetrospectiveController._setStatsValueToRenderValueOrDash=function(t,e,r){_.isUndefined(t[e])||_.isUndefined(t[e].statFieldValue.value)?t[e]={statFieldValue:{text:"-"}}:t[e].statFieldValue.text=r(t[e].statFieldValue.value)},GH.SprintRetrospectiveController.showConfluenceSprintRetrosButton=function(t){require("jira-agile/rapid/ui/confluence-sprint-report-retros-button/api").then(function(e){var r=AJS.$("#sprint-retro-btn");r.length>0&&e.render(r[0],{sprintId:t.id})})["catch"](function(t){AnalyticsClient.sendTrackEvent({source:GH.SprintRetrospectiveController.id,actionSubject:"component",action:"failed",actionSubjectId:"confluenceSprintReportRetrosButton",attributes:{error:t.message}})})},GH.SprintRetrospectiveController.showOpsgenieSprintReportBanner=function(t){require("jira-agile/rapid/ui/opsgenie-sprint-report-banner/api").then(function(t){var e=AJS.$("#opsgenie-sprint-report-banner");e.length>0&&(t.render(e[0]),e.removeClass("hidden"))})["catch"](function(t){AnalyticsClient.sendTrackEvent({source:GH.SprintRetrospectiveController.id,actionSubject:"component",action:"failed",actionSubjectId:"opsgenieSprintReportBannerComponent"})})},GH.SprintRetrospectiveController.hideOpsgenieSprintReportBanner=function(){var t=AJS.$("#opsgenie-sprint-report-banner");t.addClass("hidden")},GH.SprintRetrospectiveController.updateAlertChart=function(t,e){var r=document.querySelector("#ghx-report-content .ghx-alerts-chart");AJS.$(r).removeClass("hidden");var n=require("jira-agile/rapid/ui/chart/chart-controller"),i=[e.sprint.isoStartDate,e.sprint.isoEndDate],o=e.sprint.isoEndDate;e.sprint.isoCompleteDate&&moment(e.sprint.isoCompleteDate).isValid()&&(i.push(e.sprint.isoCompleteDate),o=e.sprint.isoEndDate>e.sprint.isoCompleteDate?e.sprint.isoEndDate:e.sprint.isoCompleteDate),i=i.sort();var p=$("meta[name=ghx-project-id]").attr("content");r&&GH.SprintRetrospectiveController.loadAlertChart.then(function(s){"unmount"===t&&s.unmount(r),"render"===t&&(s.render(r,{sourceComponent:"jira-board-sprint-report",startDate:moment(e.sprint.isoStartDate).toISOString(),endDate:moment(o).toISOString(),height:150,nonWorkingBlocks:n.getNonWorkingBlocks(),ticks:i,projectId:p,projectKey:GH.RapidBoard.projectKey,isProjectAdmin:GH.ViewActions.canEdit}),GH.SprintReportGrowthUtils.fireOperationalEvent("loadAlertChart","success"))})["catch"](function(t){GH.SprintReportGrowthUtils.fireOperationalEvent("loadAlertChart","failed")})},GH.SprintRetrospectiveController.initAlertChart=function(t){GH.SprintRetrospectiveController.updateAlertChart("render",t)},GH.SprintRetrospectiveController.unmountAlertChart=function(){GH.SprintRetrospectiveController.updateAlertChart("unmount")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/SprintReportView.js' */
!function(){"use strict";var e=require("jira-agile/rapid/const/PageMode"),t=require("jira/featureflags/feature-manager"),r=require("jira-agile/rapid/ui/chart/report-sla-tracker");GH.SprintRetrospectiveView={};var i=GH.FlotChartUtils;GH.SprintRetrospectiveView.createRetroDialog=null,GH.SprintRetrospectiveView.retroApplinkData=null,GH.SprintRetrospectiveView.showSprintReport=function(r,i,n,o,a,s,p,l){var c=!0;AJS.$("#ghx-report-content .ghx-sprint-report").empty().append(GH.tpl.sprintretrospective.renderSprintReport({sprint:i,estimationStatistic:n,completedIssuesJql:a,incompletedIssuesJql:s,puntedIssuesJql:l,issuescompletedInAnotherSprintJql:p,hasIssuesAddedAfterSprintStart:_.keys(i.contents.issueKeysAddedDuringSprint).length})).show(),AJS.$("#ghx-sprint-report-meta").empty().append(GH.tpl.sprintretrospective.renderSprintReportHeader({sprint:i.sprint,showPages:c,linkedPagesCount:i.sprint.remoteLinks.length,endedByHtml:i.lastUserToClose,isLoadEpicPageLinksOnDemandEnabled:t.isFeatureEnabled("jsw.load.epic.page.links.on.demand")})).append(GH.tpl.board.x.renderSprintGoal({goal:r.goal})).show(),GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.SPRINT,e.REPORT,i.sprint.id,AJS.$("#ghx-sprint-report-meta .js-view-entity-pages")),GH.ReportController.renderSprintActions(AJS.$("#ghx-chart-sprint-actions"),GH.RapidBoard.State.getRapidViewId(),GH.SprintRetrospectiveController.sprintPicker.getItems(),r,o)},GH.SprintRetrospectiveView.doesEndDateNeedExtraRoom=function(e,t){var r;return 3===e.length?(r=.1*(e[2]-e[0]),e[1]-e[0]<r||e[2]-e[1]<r):e[1]<t&&(r=.1*(t-e[0]),e[1]-e[0]<r)},GH.SprintRetrospectiveView.clearDialog=function(){GH.SprintRetrospectiveView.createRetroDialog&&GH.SprintRetrospectiveView.createRetroDialog._hide()},GH.SprintRetrospectiveView.showMiniBurndown=function(e){var t=require("jira-agile/rapid/ui/chart/burndown-chart-controller"),n=require("jira-agile/rapid/ui/chart/burndown-chart-model"),o=require("jira-agile/rapid/ui/chart/chart"),a=require("jira-agile/rapid/ui/chart/chart-controller");if(n.setRawData(e),e.warningMessage)return void AJS.$("#ghx-report-content").prepend(GH.tpl.sprintretrospective.renderWarningMessage({message:e.warningMessage}));var s=[e.startTime,e.endTime];_.isNumber(e.completeTime)&&s.push(e.completeTime),s=s.sort(),GH.SprintRetrospectiveView.doesEndDateNeedExtraRoom(s,e.now)&&(AJS.$(".ghx-sprint-report-burndown").addClass("ghx-close-ticklabels"),AJS.$(".ghx-sprint-report-burndown-full-width").addClass("ghx-close-ticklabels"));var p={xaxis:{mode:"time",ticks:s,reserveSpace:!0,labelWidth:60},yaxis:n.getYAxis(),series:{points:{show:!1,radius:3,symbol:"circle"},lines:{show:!0}},grid:{markings:a.getNonWorkingBlocks}},l=AJS.$("#ghx-report-content .ghx-sprint-report-burndown");0===l.length&&(l=AJS.$("#ghx-report-content .ghx-sprint-report-burndown-full-width"),p.legend={container:null,backgroundOpacity:.5,position:"ne"},i.setAndAlignAxisLabels("Time",n.getStatistic().name));o.draw(t.id,l,n.getSeries(),p);r.checkReportAndFireSlaEvent(r.reportNames.sprintReport)},GH.SprintRetrospectiveView.show=function(){GH.ChartView.hideSpinner()},GH.SprintRetrospectiveView.hide=function(){},GH.SprintRetrospectiveView.showCreateRetrospectiveDialog=function(t){var r={noBind:!0,width:320,addActiveClass:!1,persistent:!0,container:"#ghx-report-controls-group",calculatePositions:function(e,t){var r=t.target.offset(),i=AJS.$("#ghx-report-controls-group").offset();return{popupCss:{top:r.top-i.top+40,left:r.left-i.left},arrowCss:{left:40},displayAbove:!1}}};GH.SprintRetrospectiveView.createRetroDialog=GH.InlineDialog.create("retroDialog",AJS.$("#ghx-sprint-report-meta .js-view-entity-pages"),GH.SprintRetrospectiveView.renderCreateRetroDialog,r),GH.SprintRetrospectiveView.createRetroDialog.show(),GH.SprintRetrospectiveView.disableRetroDialogDismissalOnBlur(),GH.SprintRetrospectiveController.linkPagesAnalytics.show.trigger("sprint.retroDialog"),AJS.$(".js-retro-dialog-dismiss, #ghx-sprint-report-meta .js-view-entity-pages").live("click",function(e){GH.SprintRetrospectiveView.createRetroDialog._hide(),GH.SprintRetrospectiveController.markSprintAsDismissed(t.id),GH.SprintRetrospectiveController.linkPagesAnalytics.action.trigger("sprint.retroDialog.createPage")}),AJS.$(document).on("submit","#js-create-page-form",function(t){var r=window.open("","_blank");GH.LinkedPagesService.initiateRemoteLinkConversation().done(function(t){var i={applinkId:GH.SprintRetrospectiveView.retroApplinkData.jiraApplicationId,agileMode:e.REPORT,fallbackUrl:GH.SprintRetrospectiveView.retroApplinkData.jiraUrl,creationToken:t};i.sprintId=GH.SprintRetrospectiveView.retroApplinkData.entityId,r.location=GH.SprintRetrospectiveView.retroApplinkData.appLinkUrl+"?"+AJS.$.param(i)}),t.preventDefault()})},GH.SprintRetrospectiveView.renderCreateRetroDialog=function(e,t,r){GH.SprintRetrospectiveController.getAppLinkData().done(function(t){t.appLinkUrl&&(GH.SprintRetrospectiveView.retroApplinkData=t,e.html(GH.tpl.sprintretrospective.renderCreateRetroDialog(t)).addClass("ghx-inline-dialog"),r())})},GH.SprintRetrospectiveView.disableRetroDialogDismissalOnBlur=function(){GH.SprintRetrospectiveView.createRetroDialog._hide=GH.SprintRetrospectiveView.createRetroDialog.hide,AJS.$(document).bind("showLayer",function(e,t,r){"inlineDialog"===t&&"retroDialog"===r.id&&(AJS.$(document.body).unbind("click.retroDialog.inline-dialog-check"),r.hide=function(){return!1})})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/SprintReport.soy' */
// This file was automatically generated from SprintReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.sprintretrospective.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.sprintretrospective == 'undefined') { GH.tpl.sprintretrospective = {}; }


GH.tpl.sprintretrospective.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-report-controls-group"><div id="ghx-report-controls"></div><div id="ghx-sprint-report-meta"></div></div><div id="ghx-report-content"><div id="ghx-chart-wrap" class="ghx-sprint-report-scroll-fix"><div class="ghx-sprint-report-burndown-full-width"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="opsgenie-sprint-report-banner" class="hidden"></div><div class="ghx-alerts-chart hidden"></div><div class="ghx-sprint-report"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderReportBody.soyTemplateName = 'GH.tpl.sprintretrospective.renderReportBody';
}


GH.tpl.sprintretrospective.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.issueNavLink.soyTemplateName = 'GH.tpl.sprintretrospective.issueNavLink';
}


GH.tpl.sprintretrospective.renderSprintReportHeader = function(opt_data, opt_ignored) {
  return '<span class="ghx-sprint-status">' + ((opt_data.sprint.state == 'CLOSED') ? (opt_data.endedByHtml) ? soy.$$filterNoAutoescape(AJS.format('Closed sprint, ended by {0}',opt_data.endedByHtml)) : soy.$$escapeHtml('Closed sprint') : '<em>' + soy.$$escapeHtml('Active sprint') + '</em>') + '</span><span title="' + soy.$$escapeHtml('Start Date') + '">' + soy.$$escapeHtml(opt_data.sprint.startDate) + '</span> - ' + ((opt_data.sprint.state == 'CLOSED') ? '<span title="' + soy.$$escapeHtml('Completion Date') + '">' + soy.$$escapeHtml(opt_data.sprint.completeDate) + '</span>' : '<span class="ghx-projected" title="' + soy.$$escapeHtml('Projected End Date') + '">' + soy.$$escapeHtml(opt_data.sprint.endDate) + '</span>') + ((opt_data.showPages) ? GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.linkedPagesCount, title: 'Create and view pages linked to this sprint', isLoadEpicPageLinksOnDemandEnabled: opt_data.isLoadEpicPageLinksOnDemandEnabled}) : '');
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderSprintReportHeader.soyTemplateName = 'GH.tpl.sprintretrospective.renderSprintReportHeader';
}


GH.tpl.sprintretrospective.renderSprintReport = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item"><h3>' + soy.$$escapeHtml('Status Report') + '</h3></div>' + ((opt_data.hasIssuesAddedAfterSprintStart) ? '<div class="ghx-added-legend aui-item">* ' + soy.$$escapeHtml('Issue added to sprint after start time') + '</div>' : '') + '</div><div class="ghx-sprint-report-table ghx-report-issue-list" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.sprint ? opt_data.sprint.sprint.id : '') + '">' + ((opt_data.sprint.contents.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Completed Issues'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.completedIssuesJql}), issues: opt_data.sprint.contents.completedIssues, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.completedIssuesInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.completedIssuesEstimateSum.text}) : '') + ((opt_data.sprint.contents.issuesNotCompletedInCurrentSprint.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Issues Not Completed'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.incompletedIssuesJql}), issues: opt_data.sprint.contents.issuesNotCompletedInCurrentSprint, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.issuesNotCompletedInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.issuesNotCompletedEstimateSum.text}) : '') + ((opt_data.sprint.contents.issuesCompletedInAnotherSprint.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Issues completed outside of this sprint'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.issuescompletedInAnotherSprintJql}), issues: opt_data.sprint.contents.issuesCompletedInAnotherSprint, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.issuesCompletedInAnotherSprintInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.issuesCompletedInAnotherSprintEstimateSum.text}) : '') + ((opt_data.sprint.contents.puntedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Issues Removed From Sprint'), issueNavLink: '' + GH.tpl.sprintretrospective.issueNavLink({jql: opt_data.puntedIssuesJql}), issues: opt_data.sprint.contents.puntedIssues, addedIssues: opt_data.sprint.contents.issueKeysAddedDuringSprint, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.sprint.contents.puntedIssuesInitialEstimateSum.text, currentEstimationValue: opt_data.sprint.contents.puntedIssuesEstimateSum.text}) : '') + '</table>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderSprintReport.soyTemplateName = 'GH.tpl.sprintretrospective.renderSprintReport';
}


GH.tpl.sprintretrospective.renderCreateRetroDialog = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><h2>' + soy.$$escapeHtml('Retrospective time!') + '</h2><p>' + soy.$$escapeHtml('Create a retrospective page to review \x26 improve your iterations!') + '</p><form id="js-create-page-form" class="aui" target="_blank" action="' + soy.$$escapeHtml(opt_data.appLinkUrl) + '" method="post"><div class="buttons-container">' + aui.buttons.button({extraClasses: ['js-retro-dialog-dismiss'], text: 'Create'}) + aui.buttons.button({extraClasses: ['js-retro-dialog-dismiss'], tagName: 'a', text: 'Close', type: 'link'}) + '</div>' + GH.tpl.component.linkedpages.createPageInputs({entityTypeParam: 'sprintId', entityId: opt_data.entityId, applinkId: opt_data.jiraApplicationId, agileMode: 'report', fallbackUrl: opt_data.jiraUrl}) + '</form></div>';
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderCreateRetroDialog.soyTemplateName = 'GH.tpl.sprintretrospective.renderCreateRetroDialog';
}


GH.tpl.sprintretrospective.renderWarningMessage = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({closeable: 'false', content: '<p>' + soy.$$escapeHtml(opt_data.message) + '</p>'});
};
if (goog.DEBUG) {
  GH.tpl.sprintretrospective.renderWarningMessage.soyTemplateName = 'GH.tpl.sprintretrospective.renderWarningMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VelocityChartController.js' */
GH.VelocityChartController={},GH.VelocityChartController.id="velocityChart",GH.VelocityChartController.displayed=!1,GH.VelocityChartController.rapidViewData={},GH.VelocityChartController.rapidViewConfig={},function(){var t=require("jira-agile/rapid/analytics-tracker");GH.VelocityChartController.analytics=new t("gh.report.velocityChart")}(),GH.VelocityChartController.setRapidView=function(t){GH.VelocityChartController.rapidViewData=t||{}},GH.VelocityChartController.isApplicable=function(t){return t.sprintSupportEnabled&&!GH.RapidBoard.State.isAgilityBoard()},GH.VelocityChartController.getNormalizedFromInternal=function(){return{}},GH.VelocityChartController.toUrl=function(){return{}},GH.VelocityChartController.updateInternalFromNormalized=function(t){},GH.VelocityChartController.getNormalizedFromUrl=function(t){return{}},GH.VelocityChartController.init=function(){},GH.VelocityChartController.show=function(){GH.VelocityChartController.displayed=!0,GH.VelocityChartController.rapidViewData&&(GH.RapidBoard.State.pushState(),GH.VelocityChartController.renderChartView(),GH.VelocityChartController.analytics.trigger("show"))},GH.VelocityChartController.hide=function(){GH.VelocityChartController.displayed=!1,GH.SprintRetrospectiveView.hide(),AJS.$(GH).unbind("."+GH.VelocityChartController.id)},GH.VelocityChartController.renderChartView=function(){GH.VelocityChartController.initializeControls(),GH.ChartView.getChartContentElem(!0).html(GH.tpl.velocity.renderReportBody()),GH.ChartView.showSpinner(),GH.VelocityChartController.loadRapidViewConfig()},GH.VelocityChartController.initializeControls=function(){AJS.$("#ghx-chart-controls").hide()},GH.VelocityChartController.loadRapidViewConfig=function(){var t=function(t){GH.VelocityChartController.displayed&&(GH.VelocityChartController.rapidViewConfig=t,GH.VelocityChartController.loadReportData())};GH.RapidViewConfig.fetchConfiguration(GH.VelocityChartController.rapidViewData.id).done(t)},function(){var t=require("jira-agile/rapid/ui/chart/report-sla-tracker"),r=require("jira/util/unsafe-logger"),e=function(t){t&&t.error&&r.unsafeError("velocity","Uncaught error on the Velocity report",t.error)},o=function(){window.addEventListener("error",e)},i=function(){window.removeEventListener("error",e)},l=function(r,e){t.checkReportAndFireSlaEvent(t.reportNames.velocity,e,null,!1,r),GH.ChartView.hideSpinner(),i()};GH.VelocityChartController.loadReportData=function(){o(),GH.Ajax.get({url:"/rapid/charts/velocity.json",data:{rapidViewId:GH.VelocityChartController.rapidViewConfig.id}},"rapidChartData.velocity").done(GH.VelocityChartController.processChartData).fail(l)},GH.VelocityChartController.processChartData=function(r){if(GH.VelocityChartController.displayed){var e;e="duration"===GH.VelocityChartController.rapidViewConfig.estimationStatistic.renderer?GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration:GH.NumberFormat.format,_.each(r.velocityStatEntries,function(t){t.estimated.text=e(t.estimated.value),t.completed.text=e(t.completed.value)}),GH.VelocityChartView.showVelocityChart(r),t.checkReportAndFireSlaEvent(t.reportNames.velocity,null,null,!0,null),i()}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VelocityChartView.js' */
GH.VelocityChartView={},GH.VelocityChartView.showVelocityChart=function(t){var e=require("jira-agile/rapid/ui/chart/burndown-chart-controller"),i=require("jira-agile/rapid/ui/chart/chart");if(0===t.sprints.length)return AJS.$("#ghx-chart-content").html(GH.tpl.velocity.renderNoSprintsMessage({})),void GH.ChartView.hideSpinner();var a=[],r=[],l=[],n=[],o=t.sprints.reverse(),d=0;_.each(o,function(e,i){var o=t.velocityStatEntries[e.id],c=o.estimated.value,s=o.completed.value;d=Math.max(d,c,s),a[i]=[i,c],r[i]=[i,s];var h=GH.tpl.velocity.formatSprintName({sprintName:e.name});l[i]=[i,h],n[i]={sprint:{name:e.name,id:e.id},estimated:o.estimated.text,completed:o.completed.text}});var c=[{label:"Commitment",data:a},{label:"Completed",data:r}];GH.ChartView.hideSpinner();var s=GH.VelocityChartController.rapidViewConfig.estimationStatistic,h=(i.draw(e.id,GH.ChartView.getChartView(!0),c,{series:{bars:{show:!0,barWidth:.2,align:"center",lineWidth:0,fillColor:{colors:[{opacity:1},{opacity:1}]}}},colors:["#ccc","#14892c"],xaxis:{ticks:l,min:-.5,max:6.5},yaxis:GH.FlotChartUtils.calculateYAxis(d,s),legend:{container:null,position:"ne"},multiplebars:!0}),AJS.$(GH.tpl.velocity.renderVelocityChartTable({rows:n,rapidBoardId:GH.RapidViewConfig.currentData.id})));GH.FlotChartUtils.setAndAlignAxisLabels(void 0,s.name);var p=h.find("tbody").find("tr").find(":first").find("a");p.mousedown(function(t){if(1===t.which){var e=parseInt(AJS.$(this).attr("data-value"),10);GH.BoardState.setPerViewValue("sprintRetrospective.selectedSprintId",e),GH.ReportController.selectChart(GH.SprintRetrospectiveController.id)}}),AJS.$("#ghx-chart-data").empty().append(h),GH.ChartView.hideSpinner()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VelocityChart.soy' */
// This file was automatically generated from VelocityChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.velocity.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.velocity == 'undefined') { GH.tpl.velocity = {}; }


GH.tpl.velocity.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-report-controls-group"><div id="ghx-report-controls"></div></div><div id="ghx-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div></div><div id="ghx-chart-data"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderReportBody.soyTemplateName = 'GH.tpl.velocity.renderReportBody';
}


GH.tpl.velocity.renderNoSprintsMessage = function(opt_data, opt_ignored) {
  return '<div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('There are no available sprints for this board.') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderNoSprintsMessage.soyTemplateName = 'GH.tpl.velocity.renderNoSprintsMessage';
}


GH.tpl.velocity.renderVelocityChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-auto"><thead><tr><th>' + soy.$$escapeHtml('Sprint') + '</th><th class="ghx-right">' + soy.$$escapeHtml('Commitment') + '</th><th class="ghx-right">' + soy.$$escapeHtml('Completed') + '</th></tr></thead><tbody>';
  var rowList16 = opt_data.rows;
  var rowListLen16 = rowList16.length;
  for (var rowIndex16 = 0; rowIndex16 < rowListLen16; rowIndex16++) {
    var rowData16 = rowList16[rowIndex16];
    output += '<tr><td><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidBoard.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidBoardId) + '&view=reporting&chart=sprintRetrospective&sprint=' + soy.$$escapeHtml(rowData16.sprint.id) + '" data-value=' + soy.$$escapeHtml(rowData16.sprint.id) + '>' + soy.$$escapeHtml(rowData16.sprint.name) + '</a></td><td class="ghx-right">' + soy.$$escapeHtml(rowData16.estimated) + '</td><td class="ghx-right">' + soy.$$escapeHtml(rowData16.completed) + '</td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.velocity.renderVelocityChartTable.soyTemplateName = 'GH.tpl.velocity.renderVelocityChartTable';
}


GH.tpl.velocity.formatSprintName = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.sprintName);
};
if (goog.DEBUG) {
  GH.tpl.velocity.formatSprintName.soyTemplateName = 'GH.tpl.velocity.formatSprintName';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChangesReportModel.js' */
define("jira-agile/rapid/ui/chart/changes-report-model",["require"],function(t){"use strict";var e=t("underscore"),i=t("jira-agile/rapid/ui/chart/burndown-rate"),s=t("jira-agile/rapid/ui/chart/burndown-table-producer"),a=t("jira-agile/rapid/ui/chart/burndown-timeline-producer"),r=t("jira-agile/rapid/ui/chart/chart-colors"),n=GH.FlotChartUtils,o=GH.ChartUtils,u=GH.TimeFormat,c=GH.NumberFormat,d=function(){};return d.prototype.setParams=function(t){this.statistic=t.statistic,this.issueAddedText=t.issueAddedText,this.issueRemovedText=t.issueRemovedText,this.startText=t.startText},d.prototype.setRawData=function(t){this.data=t,this.processData()},d.prototype.processData=function(){this.ensureIssuesHaveEstimateText(),this.makeStatisticsValuesRenderable()},d.prototype.setRawChartData=function(t){this.chartData=t,this.processChartData()},d.prototype.getStartTime=function(){return this.chartData.startTime},d.prototype.processChartData=function(){this.chartData.endTime||(this.chartData.endTime=this.chartData.now),i.setRateData(this.chartData.workRateData);var t=a.ProgressConsumer;this.timelineData=a.calculateTimelineData(this.chartData,t),this.calculateSeries()},d.prototype.hasIssues=function(){var t=this.getReportContent();return t?t.completedIssues.length>0||t.incompleteEstimatedIssues.length>0||t.incompleteUnestimatedIssues.length>0:!!this.chartData&&!e.isEmpty(this.chartData.changes)},d.prototype.getReportContent=function(){if(this.data)return this.data.contents},d.prototype.getRenderer=function(){return this.statistic.renderer},d.prototype.isIssueCountStatistic=function(){return"issueCount"===this.statistic.typeId},d.prototype.isTimeTracking=function(){return"timeSpent"===this.statistic.fieldId},d.prototype.shouldAddToSeries=function(t,i){var s=!1;return e.each(i,function(e){s=s||e.deltas&&0!==e.deltas[t.id]}),s},d.prototype.getAllSeriesDefinitions=function(){var t=AJS.escapeHtml(this.statistic.name||"");return{totalEstimate:{id:"totalEstimate",label:AJS.format("Total {0}",t),renderer:this.getRenderer(),statisticName:t},completedEstimate:{id:"completedEstimate",label:AJS.format("Completed {0}",t),renderer:this.getRenderer(),statisticName:t},issueCount:{id:"issueCount",label:"Number of issues",renderer:"number",statisticName:"Issue Count"},unestimatedIssueCount:{id:"unestimatedIssueCount",label:"Number of unestimated issues",renderer:"number",statisticName:"Issue Count"}}},d.prototype.calculateSeries=function(){var t=[],i=this.getAllSeriesDefinitions();this.isIssueCountStatistic()?(t.push(e.defaults({color:r.scope,yaxis:1,fill:.3,lineWidth:1},i.totalEstimate)),t.push(e.defaults({color:r.completed,yaxis:1,fill:.2,lineWidth:1},i.completedEstimate))):(t.push(e.defaults({color:r.scope,yaxis:1,fill:.3,lineWidth:1},i.totalEstimate)),t.push(e.defaults({color:r.completed,yaxis:1,fill:.2,lineWidth:1},i.completedEstimate)),t.push(e.defaults({color:r.issueCount,yaxis:2,lineWidth:1},i.issueCount)),t.push(e.defaults({color:r.unestimated,yaxis:2,lineWidth:1},i.unestimatedIssueCount))),this.calculateSeriesFromIds(t)},d.prototype.calculateSeriesFromIds=function(t){var i=this.timelineData,s=i?i.timeline:void 0,a=this.series=[];if(!e.isEmpty(s)){var o={},u={};e.each(t,function(t){o[t.id]=[],u[t.id]=[]}),e.each(s,function(i){e.each(t,function(t){this.shouldAddToSeries(t,i.issues)&&(i.deltas&&e.isNumber(i.deltas[t.id])&&0!=i.deltas[t.id]&&(o[t.id].push([i.time,i.values[t.id]-i.deltas[t.id]]),u[t.id].push({})),o[t.id].push([i.time,i.values[t.id]]),u[t.id].push(i))},this)},this);var c=e.last(s);!i.completeTime||i.completeTime>i.now?e.each(t,function(t){o[t.id].push([Math.max(i.startTime,i.now),c.values[t.id]])}):e.each(t,function(t){o[t.id].push([i.completeTime,c.values[t.id]])}),this.isTimeTracking()&&a.push({id:"timeSpent",data:o.timeSpent,color:r.timeSpent,label:"Time Spent"}),e.each(t,function(t){a.push({id:t.id,data:o[t.id],color:t.color,label:t.label,yaxis:t.yaxis,lines:{fill:t.fill,lineWidth:t.lineWidth,show:!0}})}),a.push({id:"markings",color:r.nonWorkingDays,data:[],label:"Non-Working Days"});var d=i.maxValues.totalEstimate;this.yAxisData=n.calculateYAxis(d,this.statistic),this.yAxisData.min=0,this.yAxisData.max=d,this.series=a,this.seriesData=u}},d.prototype.getXAxisStart=function(){var t=.02;return this.chartData.startTime-(this.chartData.endTime-this.chartData.startTime)*t},d.prototype.getYAxes=function(){var t=[];if(t.push(this.yAxisData),!this.isIssueCountStatistic()){var e=this.timelineData.maxValues.issueCount,i=1;e>15&&(i=Math.ceil(e/8)),t.push({position:"right",min:0,tickFormatter:function(t,e){return t.toFixed(0)},tickSize:i})}return t},d.prototype.getDataBySeries=function(t){return this.seriesData&&this.seriesData[t]},d.prototype.getTooltipData=function(t,i){var s={};return i.initial?(i.initial&&(s.initial=!0,s.event=this.getEpicStartChangeEvent()),s.issueCount=e.size(i.issues),s.statisticName=this.getSeriesStatisticName(t),s.statisticValue=o.renderStatisticText(i.values[t],!1,this.getSeriesRenderer(t))):(s.changes=[],e.each(i.issues,function(e){var i={};i.key=e.key,i.statisticName=this.getSeriesStatisticName(t),i.statisticDelta=o.renderStatisticText(e.deltas[t],!1,this.getSeriesRenderer(t)),i.event=this.getChangeEvent(e),s.changes.push(i)},this)),s.dateText=o.renderUTCMillisAsDate(i.time),s},d.prototype.getSeriesRenderer=function(t){var e=this.getAllSeriesDefinitions();return e[t].renderer},d.prototype.getSeriesStatisticName=function(t){var e=this.getAllSeriesDefinitions();return e[t].statisticName},d.prototype.getDataBySeriesAtIndex=function(t,e){var i=this.getDataBySeries(t);if(i)return i[e]},d.prototype.getChangeEvent=function(t){var i="Burnup",s=this.getScopeOrColumnChangeEvent(t,i);if(s)return s;if(t.estimateChange){var a=t.values.oldEstimateFieldValue,r=t.values.estimateFieldValue,n=!e.isUndefined(a),o=!e.isUndefined(r);return n&&o?{type:"Scope change",detail:AJS.format("Estimate changed from {0} to {1}",this.renderStatisticText(a),this.renderStatisticText(r))}:n?{type:"Scope change",detail:AJS.format("Estimate of {0} has been removed",this.renderStatisticText(a))}:{type:"Scope change",detail:AJS.format("Estimate of {0} has been added",this.renderStatisticText(r))}}return{type:"unknown",detail:"unknown change"}},d.prototype.getScopeOrColumnChangeEvent=function(t,e){return t.scopeChange?t.inScope?{type:"Scope change",detail:this.issueAddedText}:{type:"Scope change",detail:this.issueRemovedText}:s.getColumnChangeEvent(t,e)},d.prototype.getStartChangeEvent=function(){return{type:this.startText,detail:""}},d.prototype.getSeries=function(){return this.series},d.prototype.getXAxisEnd=function(){},d.prototype.ensureIssuesHaveEstimateText=function(){function t(t){return e.isUndefined(t.estimateStatistic)||e.isUndefined(t.estimateStatistic.statFieldValue.value)?t.estimateStatistic={statFieldValue:{text:"-"}}:t.estimateStatistic.statFieldValue.text=s(t.estimateStatistic.statFieldValue.value),t}var i=this.getReportContent(),s=this._getValueRenderer();i.completedIssues=e.map(this.data.contents.completedIssues,t),i.incompleteUnestimatedIssues=e.map(this.data.contents.incompleteUnestimatedIssues,t),i.incompleteEstimatedIssues=e.map(this.data.contents.incompleteEstimatedIssues,t)},d.prototype._getValueRenderer=function(){var t;return t="duration"===this.getStatistic().renderer?u.formatShortDurationForTimeTrackingConfiguration:c.format},d.prototype.makeStatisticsValuesRenderable=function(){var t=this.getReportContent(),e=this._getValueRenderer();t.completedIssuesEstimateSum.text=e(t.completedIssuesEstimateSum.value),t.incompletedIssuesEstimateSum.text=e(t.incompletedIssuesEstimateSum.value)},d.prototype.getJql=function(){return this.jql},d.prototype.getDoneStatuses=function(){return this.data.doneStatuses},d.prototype.getNotDoneStatuses=function(){return this.data.notDoneStatuses},d.prototype.renderStatisticText=function(t,e){return o.renderStatisticText(t,e,this.getStatistic().renderer)},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/NonWorkingDaysUtils.js' */
define("jira-agile/rapid/ui/chart/non-working-days-util",["require"],function(n){"use strict";var r=n("underscore"),e=n("jira-agile/rapid/ui/chart/burndown-rate"),t={};return t.transformSeriesExcludingNonWorkingDays=function(n,t,a){r.isUndefined(a)&&(a=r.pluck(n,"id"));var u=function(n,r){if(n.xValue>=r.start){if(!(r.start<=t&&r.end>=t))return n.xValue<r.end?n.xValue-r.moveTo:r.end-r.moveTo;if(n.xValue>=r.end)return r.end-t}return 0},i=r.map(n,function(n){var e=r.clone(n);return e.data=r.map(n.data,function(n){return{xValue:n[0],yValue:n[1],xTransform:0}}),e}),o=e.getAdjustedNonWorkingDays(t);return r.each(o,function(n){r.each(i,function(e){e.data=r.map(e.data,function(r){return{xValue:r.xValue,yValue:r.yValue,xTransform:r.xTransform+u(r,n)}})})}),r.map(i,function(n){var e=r.clone(n);return r.indexOf(a,n.id)>-1?e.data=r.map(n.data,function(n){return[n.xValue-n.xTransform,n.yValue]}):e.data=r.map(n.data,function(n){return[n.xValue,n.yValue]}),e})},t.transformDateIfInNonWorkingDays=function(n,t){if(n<t)return new Date(n);var a=e.getAdjustedNonWorkingDays(t),u=n;return r.each(a,function(n){u>=n.start&&(u+=n.end-n.moveTo)}),new Date(u)},t.deductNonWorkingDays=function(n,t){var a=e.getAdjustedNonWorkingDays(t),u=r.filter(a,function(n){return t>=n.start&&t<n.end}),i=r.filter(a,function(r){return n>=r.start&&n<r.end}),o=n;i.length>0&&(o=i[0].start);var d=t;u.length>0&&(d=u[0].end,o-=d-t);var f=r.filter(a,function(n){return n.end>d&&n.start<o});return r.each(f,function(n){o-=n.end-n.start}),o},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/EpicReportController.js' */
GH.EpicReportController={},GH.EpicReportController.id="epicReport",function(){var e=require("jira-agile/rapid/analytics-tracker");GH.EpicReportController.analytics=new e("gh.report.epicReport")}(),GH.EpicReportController.init=function(){var e=require("jira-agile/rapid/ui/component/chart-picker");GH.EpicReportController.epicPicker=new e("epicReport.selectedEpicId","There are currently no epics on this board"),AJS.$(GH.EpicReportController.epicPicker).bind("selectedItemChanged",GH.EpicReportController.handleEpicChanged)},GH.EpicReportController.setRapidView=function(e){GH.EpicReportController.rapidViewData=e||{}},GH.EpicReportController.isApplicable=function(e){return e.sprintSupportEnabled&&!GH.RapidBoard.State.isAgilityBoard()},GH.EpicReportController.getNormalizedFromInternal=function(){return{epic:GH.EpicReportController.getSelectedEpicKey()||null}},GH.EpicReportController.toUrl=function(e){return _.isNull(e.epic)?{}:{epic:e.epic}},GH.EpicReportController.updateInternalFromNormalized=function(e){GH.EpicReportController.setSelectedEpicFromUrlState(e.epic)},GH.EpicReportController.getNormalizedFromUrl=function(e){return{epic:GH.RapidBoard.UrlState.normalizeStringParam(e.epic,null)}},GH.EpicReportController.hide=function(){GH.EpicReportController.displayed=!1},GH.EpicReportController.show=function(){var e=require("jira-agile/rapid/ui/chart/chart-controller");GH.EpicReportController.displayed=!0,GH.EpicReportController.rapidViewData&&(GH.EpicReportView.renderChartLoading(),e.loadRapidViewConfig(GH.EpicReportController,GH.EpicReportController.loadEpicsList),GH.EpicReportController.analytics.trigger("show"))},GH.EpicReportController.loadEpicsList=function(){var e={rapidViewId:GH.EpicReportController.rapidViewData.id};GH.Ajax.get({url:"/xboard/plan/backlog/epics.json",data:e},"epicListForEpicReport").done(GH.EpicReportController.processEpicData).fail(GH.ChartView.hideSpinner)},GH.EpicReportController.processEpicData=function(e){if(GH.EpicReportController.displayed){GH.EpicReportController.epicsData=e;var r=_.map(e.epics,function(e){return{id:e.key,name:GH.EpicConfig.getEpicNameString(e.epicLabel,e.key)}});GH.EpicReportController.epicPicker.setItems(r),GH.EpicReportController.epicPicker.setDefaultItem(_.first(r)),GH.EpicReportView.renderEpicPicker(),GH.EpicReportView.setUserTimeZoneLabel(GH.TimeFormat.userTimeZoneLabel),GH.EpicReportController.epicPicker.getSelectedItem()?GH.EpicReportController.loadReportData():GH.ChartView.hideSpinner(),GH.RapidBoard.State.replaceState()}},GH.EpicReportController.loadReportData=function(){GH.EpicReport.createModel();var e=GH.EpicReportController.epicPicker.getSelectedItem().id,r={rapidViewId:GH.EpicReportController.rapidViewData.id,epicKey:e},t=GH.Ajax.get({url:"/rapid/charts/epicreport",data:r},"epicReportData"+e).done(GH.EpicReportController.processReportData),o=GH.Ajax.get({url:"/rapid/charts/epicprogresschart",data:r},"epicprogresschart"+e).done(GH.EpicReportController.processChartData);AJS.$.when(t,o).then(GH.EpicReportController.performDataConsistencyCheck,GH.EpicReportController.failedToLoad)},GH.EpicReportController.failedToLoad=function(){GH.ChartView.hideSpinner(),GH.EpicReportController.epicPicker.removeSelectedItemAndRevert(GH.ChartView.getChartSelector(!0))},GH.EpicReportController.processReportData=function(e){if(GH.EpicReportController.displayed){var r=_.findWhere(GH.EpicReportController.epicsData.epics,{id:e.epic.id});r&&(e.epic.linkedPagesCount=r.linkedPagesCount,_.extend(e,_.pick(GH.EpicReportController.epicsData,"canEditEpics","supportsPages"))),GH.EpicReport.model.setRawData(e),GH.EpicReportView.renderReport()}},GH.EpicReportController.processChartData=function(e){GH.EpicReportController.displayed&&(GH.EpicReport.model.setRawEpicChartData(e),GH.EpicReportView.renderChart())},GH.EpicReportController.performDataConsistencyCheck=function(){if(GH.EpicReportController.displayed){var e=GH.EpicReport.model.getIssuesWithStatisticFieldMismatch();_.isEmpty(e)||GH.EpicReportView.renderStatisticMismatchWarning(e)}},GH.EpicReportController.handleEpicChanged=function(){GH.EpicReportController.displayed&&(GH.RapidBoard.State.pushState(),GH.EpicReportController.loadReportData())},GH.EpicReportController.getSelectedEpicKey=function(){var e=GH.EpicReportController.epicPicker.getSelectedItem();if(e)return e.id},GH.EpicReportController.setSelectedEpicFromUrlState=function(e){GH.EpicReportController.epicPicker.storeSelectedItemId(e)},GH.EpicReportController.setPointsForChart=function(e,r){var t=r.id,o=GH.EpicReport.model.getDataBySeries(t);if(o){var i=GH.FlotChartUtils.gatherPoints(r,o);e.realPointsPerSeries[t]=i}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/EpicReportView.js' */
!function(){"use strict";var e=require("jira-agile/rapid/const/PageMode"),t=require("jira/featureflags/feature-manager");GH.EpicReportView={},GH.EpicReportView.setUserTimeZoneLabel=function(e){GH.EpicReportView.userTimeZoneLabel=e},GH.EpicReportView.renderChartLoading=function(){GH.ChartView.getChartContentElem(!0).html(GH.tpl.epicreport.renderReportBody()),GH.ChartView.showSpinner()},GH.EpicReportView.toggleChartVisibility=function(){GH.ChartView.hideSpinner(),AJS.$("#ghx-chart-mismatch").empty(),GH.EpicReport.model.hasIssues()?(AJS.$("#ghx-epic-report-no-issues").hide(),AJS.$("#ghx-report-content").show()):(AJS.$("#ghx-report-content").hide(),AJS.$("#ghx-epic-report-no-issues").show())},GH.EpicReportView.renderReport=function(){GH.EpicReportView.toggleChartVisibility(),GH.EpicReportView.renderMeta(),GH.EpicReport.model.hasIssues()&&(GH.EpicReportView.renderIssuesReport(),GH.EpicReportView.renderSummary())},GH.EpicReportView.renderEpicPicker=function(){GH.EpicReportController.epicPicker.render(GH.ChartView.getChartSelector(!0))},GH.EpicReportView.renderIssuesReport=function(){var e=GH.EpicReport.model.getReportContent(),t=GH.EpicReport.model.hasIssues(),i=AJS.$("#ghx-report-content .ghx-epic-report");i.empty().html(GH.tpl.epicreport.renderEpicReport({content:e,jql:GH.EpicReport.model.getJql(),estimationStatistic:GH.EpicReportController.rapidViewConfig.estimationStatistic,hasIssues:t})),i.find(".issue-table-title-tooltip").tooltip()},GH.EpicReportView.renderSummary=function(){AJS.$("#ghx-report-content .ghx-epic-summary").empty().html(GH.tpl.epicreport.renderEpicSummary({epic:GH.EpicReport.model.getEpicSummary(),issuesJql:GH.EpicReport.model.getJql().allIssues}))},GH.EpicReportView.renderMeta=function(){var i=GH.EpicReport.model.getEpic();AJS.$("#ghx-epic-meta").empty().append(GH.tpl.epicreport.renderEpicReportHeader({epic:i,showPages:GH.EpicReport.model.supportsPages(),isLoadEpicPageLinksOnDemandEnabled:t.isFeatureEnabled("jsw.load.epic.page.links.on.demand")})).show(),GH.LinkedPagesController.initDialogTrigger(GH.LinkedPagesController.EPIC,e.REPORT,i.id,AJS.$("#ghx-epic-meta .js-view-entity-pages"))},GH.EpicReportView.renderStatisticMismatchWarning=function(e){var t=_.pluck(e,"key"),i=GH.tpl.epicreport.renderStatisticValueMismatchMessage({statisticName:GH.EpicReport.model.getStatistic().name,keys:t.join(", ")});AJS.messages.warning("#ghx-chart-mismatch",{body:i,closeable:!0,shadowed:!1})},GH.EpicReportView.renderChart=function(){var e=require("jira-agile/rapid/ui/chart/chart");if(GH.EpicReportView.toggleChartVisibility(),GH.EpicReport.model.hasIssues()){var t=GH.ChartView.getChartView(!0),i=GH.EpicReport.model.getSeries(),r=e.draw(GH.EpicReportController.id,t,i,GH.ChartUtils.getChartOptions(GH.EpicReport.model)),o=!1;GH.EpicReport.model.getYAxes().length>1&&(o="Issue Count"),GH.FlotChartUtils.setAndAlignAxisLabels(AJS.format("Time ({0})",GH.EpicReportView.userTimeZoneLabel),GH.EpicReport.model.getStatistic().name,o),r.hooks.drawSeries.push(GH.EpicReportView.gatherPoints),r.hooks.draw.push(GH.FlotChartUtils.deferredRenderPoints),GH.EpicReportView.bindEvents(t)}},GH.EpicReportView.handlePlotHover=function(e,t,i){if(i){var r=i.series.id,o=i.dataIndex,p=GH.EpicReport.model.getDataBySeriesAtIndex(r,o);if(!_.isEmpty(p))return void(GH.EpicReportView.previousPlotHoverPoint!=i.dataIndex&&(GH.EpicReportView.previousPlotHoverPoint=i.dataIndex,AJS.$("#ghx-tooltip").remove(),GH.EpicReportView.showChartTooltip(i,r,p,i.datapoint[0]),AJS.$("#ghx-tooltip").hasClass("ghx-has-warnings")||GH.ChartView.getChartView().addClass("ghx-clickable")))}AJS.$("#ghx-tooltip").remove(),GH.EpicReportView.previousPlotHoverPoint=null,GH.ChartView.getChartView().removeClass("ghx-clickable")},GH.EpicReportView.showChartTooltip=function(e,t,i){if(i){var r=GH.EpicReport.model.getTooltipData(t,i),o=new GH.ChartTooltip(e,r);o.render()}},GH.EpicReportView.previousPlotHoverPoint=void 0,GH.EpicReportView.gatherPoints=function(e,t,i){e.mouseEntered&&GH.EpicReportController.setPointsForChart(e,i)},GH.EpicReportView.bindEvents=function(e){e.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",GH.FlotChartUtils.handleMouseOverStateChange),e.unbind("plothover plotclick"),e.bind("plothover",GH.EpicReportView.handlePlotHover),e.bind("plotclick",GH.FlotChartUtils.handlePlotClick)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/EpicReportModel.js' */
GH.EpicReport={},GH.EpicReport.createModel=function(){GH.EpicReport.model=new GH.EpicReportModel,GH.EpicReport.model.setParams({statistic:GH.EpicReportController.rapidViewConfig.estimationStatistic,issueAddedText:"Issue added to epic",issueRemovedText:"Issue removed from epic",startText:"Epic Created"})},GH.EpicReportModel=function(){},function(){var t=require("jira-agile/rapid/ui/chart/changes-report-model");GH.EpicReportModel.prototype=new t}(),GH.EpicReportModel.prototype.setRawEpicChartData=function(t){t.startTime=t.epicCreationTime,this.setRawChartData(t)},GH.EpicReportModel.prototype.setRawData=function(t){this.data=t,this.processData(),this.generateJql(),this.generateSummary()},GH.EpicReportModel.prototype.generateSummary=function(){function t(t){return _.reduce(t,function(t,e){var i=e.estimateStatistic.statFieldValue.value;return _.isUndefined(i)&&(i=0),t+i},0)}var e={},i={},s=this.getReportContent();i.done=s.completedIssues.length,i.notEstimated=s.incompleteUnestimatedIssues.length,i.totalIssueCount=i.done+i.notEstimated+s.incompleteEstimatedIssues.length,e.epicStats=i,e.estimateDone=t(s.completedIssues),e.estimateTotal=e.estimateDone+t(s.incompleteEstimatedIssues),e.estimateStatisticName=this.getStatistic().name,e.isIssueCountStatistic=this.isIssueCountStatistic(),e.estimateDone=GH.BacklogStatistics.formatStatisticForRendering(GH.EpicReportController.rapidViewConfig.estimationStatistic,e.estimateDone),e.estimateTotal=GH.BacklogStatistics.formatStatisticForRendering(GH.EpicReportController.rapidViewConfig.estimationStatistic,e.estimateTotal);var a=this.getEpic();e.epicName=GH.EpicConfig.getEpicNameString(a.label,a.key),this.data.epicSummary=e},GH.EpicReportModel.prototype.generateJql=function(){var t=this.getStatistic();this.jql={};var e=GH.ChartUtils.createEpicJql(this.data.epic),i=e+" AND "+GH.ChartUtils.createStatusJql(this.getNotDoneStatuses());if(this.isIssueCountStatistic())this.jql.incompleteEstimatedIssues=i;else{var s=t.fieldId,a=/^customfield_(\d+)/.exec(s),o=a&&a.length>0;o&&(s="cf["+a[1]+"]"),this.jql.incompleteUnestimatedIssues=i+" AND "+s+" IS EMPTY",o?this.data.contents.incompleteEstimatedIssues.length>0&&(this.jql.incompleteEstimatedIssues=GH.ChartUtils.createIssueJql(this.data.contents.incompleteEstimatedIssues)):this.jql.incompleteEstimatedIssues=i+" AND "+s+" IS NOT EMPTY"}this.jql.completedIssues=e+" AND "+GH.ChartUtils.createStatusJql(this.getDoneStatuses()),this.jql.allIssues=e},GH.EpicReportModel.prototype.getEpic=function(){return this.data.epic},GH.EpicReportModel.prototype.getEpicSummary=function(){return this.data.epicSummary},GH.EpicReportModel.prototype.getStatistic=function(){return GH.EpicReportController.rapidViewConfig.estimationStatistic},GH.EpicReportModel.prototype.canUserEditEpics=function(){return!!this.data.canEditEpics},GH.EpicReportModel.prototype.supportsPages=function(){return!!this.data.supportsPages},GH.EpicReportModel.prototype.getIssuesWithStatisticFieldMismatch=function(){if(this.isIssueCountStatistic())return[];var t=this.timelineData.finalIssueStates,e=this.data.contents,i=_.flatten([e.completedIssues,e.incompleteEstimatedIssues,e.incompleteUnestimatedIssues]),s=[];return _.each(i,function(e){var i=t[e.key];i&&e.estimateStatistic&&e.estimateStatistic.statFieldValue&&e.estimateStatistic.statFieldValue.value!=i.values.estimateFieldValue&&s.push({key:i.key,reportValue:e.estimateStatistic.statFieldValue.value,chartValue:i.values.estimateFieldValue,reportIssue:e,chartIssue:i})}),s};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/EpicReport.soy' */
// This file was automatically generated from EpicReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.epicreport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.epicreport == 'undefined') { GH.tpl.epicreport = {}; }


GH.tpl.epicreport.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-controls-group"><div id="ghx-chart-controls"></div><div id="ghx-epic-meta" class="ghx-epic-meta"></div><div id="ghx-epic-report-no-issues" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('This epic does not contain any issues.') + '</p></div></div></div><div id="ghx-report-content"><div id="ghx-chart-mismatch"></div><div class="ghx-epic-summary-wrap"><div id="ghx-chart-legend" class="ghx-epic-chart-legend"></div><div class="ghx-epic-summary"></div></div><div id="ghx-chart-wrap" class="ghx-epic-chart-wrap"><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div><div id="ghx-axis-y-right" class="ghx-axis ghx-axis-y-right"><span class="ghx-inner"></span></div></div><div class="ghx-epic-report ghx-margin-top"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderReportBody.soyTemplateName = 'GH.tpl.epicreport.renderReportBody';
}


GH.tpl.epicreport.renderStatisticValueMismatchMessage = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(AJS.format('Some issues have {0} even though their current configuration does not allow a value to be set.',opt_data.statisticName)) + ' ' + soy.$$escapeHtml('As a result the numbers in the chart will be different to the summary and status report.') + '<br>' + soy.$$escapeHtml(AJS.format('Affected issues are: {0}',opt_data.keys));
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderStatisticValueMismatchMessage.soyTemplateName = 'GH.tpl.epicreport.renderStatisticValueMismatchMessage';
}


GH.tpl.epicreport.renderEpicReport = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml('Status Report') + '</h3><div class="ghx-epic-report-table ghx-report-issue-list">' + ((opt_data.content.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Completed Issues'), issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.completedIssues}), issues: opt_data.content.completedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.completedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteEstimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Incomplete Issues'), issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.incompleteEstimatedIssues}), issues: opt_data.content.incompleteEstimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.incompletedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteUnestimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: 'Incomplete Unestimated Issues', titleTooltip: '\x22Unestimated issues\x22 also includes issues that cannot be estimated due to their configuration, e.g. no Story Points field.', issueNavLink: '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.jql.incompleteUnestimatedIssues}), issues: opt_data.content.incompleteUnestimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: 0}) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicReport.soyTemplateName = 'GH.tpl.epicreport.renderEpicReport';
}


GH.tpl.epicreport.renderEpicSummary = function(opt_data, opt_ignored) {
  var output = '<h4>' + soy.$$escapeHtml('Summary') + '</h4><h5>' + soy.$$escapeHtml('Issues') + '</h5><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Total') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.totalIssueCount) + '</div></div><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Completed') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.done) + '</div></div>' + ((! opt_data.epic.isIssueCountStatistic) ? '<div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Unestimated') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.epicStats.notEstimated) + '</div></div><h5 id="ghx-stat-name">' + soy.$$escapeHtml(opt_data.epic.estimateStatisticName) + '</h5><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Total') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.estimateTotal) + '</div></div><div class="aui-group ghx-inline-blocks"><div class="aui-item">' + soy.$$escapeHtml('Done') + ':</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.epic.estimateDone) + '</div></div>' : '') + '<div class="ghx-margin-top">';
  var issueNavLink__soy82 = '' + GH.tpl.epicreport.issueNavLink({jql: opt_data.issuesJql});
  output += '<a href="' + soy.$$escapeHtml(issueNavLink__soy82) + '">' + soy.$$escapeHtml(AJS.format('View {0} in Issue Navigator',opt_data.epic.epicName)) + '</a></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicSummary.soyTemplateName = 'GH.tpl.epicreport.renderEpicSummary';
}


GH.tpl.epicreport.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.epicreport.issueNavLink.soyTemplateName = 'GH.tpl.epicreport.issueNavLink';
}


GH.tpl.epicreport.renderEpicReportHeader = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-inline-blocks"><div class="aui-item"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.epic.key) + '">' + soy.$$escapeHtml(opt_data.epic.key) + '</a> ' + soy.$$escapeHtml(opt_data.epic.summary) + '</div>' + ((opt_data.showPages) ? '<div class="aui-item">' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.epic.linkedPagesCount, title: 'Create and view pages linked to this epic', isLoadEpicPageLinksOnDemandEnabled: opt_data.isLoadEpicPageLinksOnDemandEnabled}) + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.epicreport.renderEpicReportHeader.soyTemplateName = 'GH.tpl.epicreport.renderEpicReportHeader';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VersionReportController.js' */
define("jira-agile/rapid/ui/chart/version-report-controller",["require"],function(e){"use strict";var r=e("jquery"),t=e("underscore"),a=e("jira/analytics/web-client"),i=e("jira-agile/rapid/analytics-tracker"),n=e("jira-agile/rapid/ui/chart/burndown-rate"),o=e("jira-agile/rapid/ui/chart/chart-controller"),s=e("jira-agile/rapid/ui/component/chart-picker"),d=e("jira-agile/rapid/ui/chart/chart-view"),l=e("jira-agile/rapid/ui/chart/version-report"),c=e("jira-agile/rapid/ui/chart/version-report-view"),p=e("jira-agile/rapid/ajax"),u=(e("jira/featureflags/feature-manager"),e("jira-agile/features/feature-flags"),GH.ChartUtils),g=GH.FlotChartUtils,v=GH.RapidBoard.State,h=GH.RapidBoard.UrlState,f=GH.TimeFormat,m=GH.VersionsModel,D={};return D.nonWorkingDaysShown=!0,D.id="versionReport",D.analytics=new i("gh.report.versionReport"),D.init=function(){D.versionPicker=new s("versionReport.selectedVersionId","There are currently no versions on this board.")},D.isApplicable=function(e){return e.sprintSupportEnabled},D.setRapidView=function(e){D.rapidViewData=e||{}},D.getRapidView=function(){return D.rapidViewData},D.getNormalizedFromInternal=function(){return{version:D.getSelectedVersionId()||null}},D.toUrl=function(e){return t.isNull(e.version)?{}:{version:e.version}},D.updateInternalFromNormalized=function(e){D.setSelectedVersionFromState(e.version)},D.getNormalizedFromUrl=function(e){return{version:h.normalizeNumberParam(e.version,null)}},D.getSelectedVersionId=function(){var e=D.versionPicker.getSelectedItem();if(e)return e.id;var r=D.versionPicker.getStoredSelectedItemId();return r!=-1?r:null},D.show=function(){D.displayed=!0,D.rapidViewData&&(c.renderChartLoading(),r(D.versionPicker).on("selectedItemChanged",D.handleVersionChanged),o.loadRapidViewConfig(D,D.loadVersionsList),D.analytics.trigger("show"))},D.hide=function(){r(D.versionPicker).off("selectedItemChanged",D.handleVersionChanged),D.displayed=!1},D.loadVersionsList=function(){var e={rapidViewId:D.rapidViewData.id};p.get({url:"/xboard/plan/backlog/versions.json",data:e},"versionsListForReport").done(D.processVersionData).fail(d.hideSpinner)},D.processVersionData=function(e){if(D.displayed){var r=D.versionModel=new m(e.projects);r.updateRawData(e.versionData);var a=t.map(r.getAllVersions(),function(e){return{id:e.id,name:e.project?e.project.key+": "+e.name:e.name}});a.reverse(),D.versionPicker.setItems(a),D.versionPicker.setDefaultItem(t.first(a)),c.setUserTimeZoneLabel(f.userTimeZoneLabel),c.renderVersionPicker(),D.versionPicker.getSelectedItem()?D.loadReportData():d.hideSpinner(),D.nonWorkingDaysShown=v.getNonWorkingDaysShown("version"),v.replaceState()}},D.loadReportData=function(){l.createModel(D.rapidViewConfig.estimationStatistic);var e={rapidViewId:D.getRapidView().id,versionId:D.getSelectedVersionId()},t=p.get({url:"/rapid/charts/versionprogresschart",data:e},"versionChartData").done(D.processChartData),a=p.get({url:"/rapid/charts/versionreport",data:e},"versionReportData").done(D.processReportData);r.when(t,a).then(D.calculatePredictions,D.failedToLoad)},D.failedToLoad=function(){d.hideSpinner(),D.versionPicker.removeSelectedItemAndRevert(d.getChartSelector(!0))},D.processChartData=function(e){D.displayed&&l.model.setRawVersionChartData(e)},D.calculatePredictions=function(){var e=l.model.getFurthestDateForNonWorkingDaysData();if(e<1/0&&e>l.model.getVersionStartDate()){var r=e,t=(new Date).valueOf()+90*u.oneDayInMillis;e<=t&&(r=t),p.get({url:"/rapidviewconfig/workingdays/rates",data:{rapidViewId:D.rapidViewData.id,startDate:l.model.getVersionStartDate()-3*u.oneDayInMillis,endDate:r}},"workingdaysrates").done(function(e){n.setRateData(e),D.renderChart()})}else D.renderChart()},D.renderChart=function(){D.displayed&&(c.renderChart(),c.renderIssuesLink(),c.renderMeta(),a.sendTrackEvent({source:"versionReportScreen",action:"viewed",actionSubject:"report",actionSubjectId:"version",attributes:{boardId:D.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),versionId:D.getSelectedVersionId(),projectId:JIRA.API.Projects.getCurrentProjectId(),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile"}}))},D.setSelectedVersionFromState=function(e){D.versionPicker.storeSelectedItemId(e)},D.setPointsForChart=function(e,r){var t=r.id,a=l.model.getDataBySeries(t);if(a){var i=g.gatherPoints(r,a);e.realPointsPerSeries[t]=i}},D.handleVersionChanged=function(e){D.displayed&&(v.pushState(),D.loadReportData())},D.processReportData=function(e){D.displayed&&(l.model.setRawData(e),c.renderReport())},D});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VersionReportView.js' */
define("jira-agile/rapid/ui/chart/version-report-view",["require"],function(e){"use strict";var t,r=e("jquery"),i=e("underscore"),o=e("jira-agile/rapid/ui/chart/change-event"),a=e("jira-agile/rapid/ui/chart/chart"),n=e("jira-agile/rapid/ui/chart/chart-colors"),s=e("jira-agile/rapid/ui/chart/chart-controller"),d=e("jira-agile/rapid/ui/chart/chart-view"),l=e("jira-agile/rapid/global-events"),h=e("jira-agile/rapid/ui/chart/non-working-days-util"),g=e("jira-agile/rapid/ui/chart/version-report"),p=GH.ChartTooltip,c=GH.ChartUtils,m=GH.FlotChartUtils,u=GH.tpl;l.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/version-report-controller")});var f={};return f.unmodifiedSeries=void 0,f.series=void 0,f.setUserTimeZoneLabel=function(e){f.userTimeZoneLabel=e},f.renderChartLoading=function(){d.getChartContentElem(!0).html(u.versionreport.renderReportBody()),d.showSpinner()},f.renderVersionPicker=function(){t.versionPicker.render(d.getChartSelector(!0))},f.renderChart=function(){if(f.toggleChartVisibility(!0),g.model.hasIssues()&&!g.model.notStarted()){var e=d.getChartView(!0),o=g.model.getVersionSeries();if(f.wallboardMode){var s=i.findWhere(o,{id:"markings"});s.color=n.nonWorkingDaysWallboard}var l=f.getChartOptions();if(f.unmodifiedSeries=o,f.series=o,!t.nonWorkingDaysShown){var p=g.model.getXAxisStart();if(o=h.transformSeriesExcludingNonWorkingDays(o,p),f.series=o,i.findWhere(o,{id:"prediction"})){var u=i.findWhere(o,{id:"pessimistic"}),v=i.findWhere(o,{id:"prediction"}),x=i.first(u.data),S=i.last(u.data),k=i.last(v.data),D=c.calculateYProjection(x,S,k);i.findWhere(o,{id:"pessimisticFillerBottom"}).data[0][1]=D}if(i.findWhere(o,{id:"scope"})){var w=i.last(i.findWhere(o,{id:"scope"}).data);w[0]=l.xaxis.max}l.xaxis.tickFormatter=function(e,t){var i=h.transformDateIfInNonWorkingDays(e,p),o="%b %d";return"hour"===t.tickSize[1]?o+=" %h:%M":"minute"===t.tickSize[1]?o=" %h:%M":"second"===t.tickSize[1]&&(o=" %h:%M:%S"),r.plot.formatDate(i,o)}}var y=a.draw(t.id,e,o,l),C=!1;g.model.getYAxes().length>1&&(C="Percent"),f.renderLabelsForNowAndRelease(y),f.setLegendOpacity(),m.setAndAlignAxisLabels(AJS.format("Time ({0})",f.userTimeZoneLabel),g.model.getStatistic().name,C),y.hooks.drawSeries.push(f.gatherPoints),y.hooks.draw.push(m.deferredRenderPoints),y.hooks.draw.push(f.renderLabelsForNowAndRelease),y.hooks.draw.push(f.setLegendOpacity),f.bindEvents(e)}},f.getChartOptions=function(){var e=g.model,o=c.getChartOptions(e);return t.nonWorkingDaysShown||(o.xaxis.max=h.deductNonWorkingDays(o.xaxis.max,o.xaxis.min)),f.gadgetMode&&(o.legend.position="nw",o.legend.container=null,o.legend.backgroundOpacity=.5,o.legend.margin=[6,12],r("#ghx-chart-legend").hide()),f.wallboardMode?o.grid={backgroundColor:n.wallboard.backgroundColor,borderWidth:1,borderColor:n.wallboard.borderColor,color:n.wallboard.textColor,noGridBottomOffsetDelta:0,tickColor:n.wallboard.tickColor,markings:f.getMarkingsForGadget}:o.grid.markings=function(r){var a=s.getNonWorkingBlocks(),d=e.getNow(),l=[],g=[];if(!e.getVersion().released&&r.xmax>d){t.nonWorkingDaysShown||(d=h.deductNonWorkingDays(d,o.xaxis.min));var p=r.ymax/198,c=4*p;l=f.drawDashedMarkings(d,c,p,70);var m=e.getVersion().releaseDate;t.nonWorkingDaysShown||(m=h.deductNonWorkingDays(m,o.xaxis.min)),i.isUndefined(m)||(c=2*c,p=2*p,g=f.drawDashedMarkings(m,c,p,20,n.releaseDate))}return t.nonWorkingDaysShown?a.concat(l,g):l.concat(g)},o},f.getMarkingsForGadget=function(){var e=n.nonWorkingDaysWallboard,t=s.getNonWorkingBlocks();return i.map(t,function(t){return t.color=e,t})},f.drawDashedMarkings=function(e,t,r,i,o){for(var a=[],s=0;s<i;s++){var d=s*(t+r);a.push({color:o||n.dashedMarking,lineWidth:1,xaxis:{from:e,to:e},yaxis:{from:d,to:d+t}})}return a},f.setLegendOpacity=function(){var e=r("#ghx-chart-legend").find(".legendColorBox");r(e[0]).find("div").find("div").css("opacity",.3),r(e[1]).find("div").find("div").css("opacity",.8)},f.renderIssuesLink=function(){var e=g.model.getVersion(),t=e.name,i=!0;t.length>60&&(i=!1),r("#ghx-report-controls").empty().append(u.versionreport.renderViewIssuesLink({projectKey:g.model.getProjectKey(),version:e,nameUse:i})).show()},f.renderLabelsForNowAndRelease=function(e){var o=e.getXAxes()[0],a=e.getYAxes()[0];if(g.model.chartData){var n=g.model.getNow();t.nonWorkingDaysShown||(n=h.deductNonWorkingDays(n,g.model.getXAxisStart()));var s=g.model.getVersion(),d=s.releaseDate;t.nonWorkingDaysShown||(d=h.deductNonWorkingDays(d,g.model.getXAxisStart()));var l,p=r("#ghx-axis-x-top");if(p.empty(),n<o.max&&(l=r(u.versionreport.renderXaxisTopLabel({text:"Today",left:e.pointOffset({x:n,y:a.max}).left})),p.append(l)),!i.isUndefined(d)&&!s.released&&d>o.min&&d<o.max){var m=e.pointOffset({x:d,y:a.max}).left,v=r(u.versionreport.renderXaxisTopLabel({text:"Release Date",date:c.renderUTCMillisAsDateWithoutTime(g.model.getVersion().releaseDate),left:m}));p.append(v),i.isUndefined(l)||f.labelsAreOverlapping(l,v)&&v.addClass("ghx-raised")}}},f.labelsAreOverlapping=function(e,t){var r=e.position().left,i=r+e.width(),o=t.position().left,a=o+t.width();return o>r&&o<i||a>r&&a<i||o<r&&a>i},f.toggleChartVisibility=function(e){r("#ghx-chart-mismatch").empty(),e&&g.model.notStarted()?(r("#ghx-version-report-no-issues").hide(),r("#ghx-report-content").hide(),r("#ghx-version-report-not-started").show(),d.hideSpinner()):g.model.hasIssues()?(r("#ghx-version-report-no-issues").hide(),r("#ghx-version-report-not-started").hide(),r("#ghx-report-content").show()):(r("#ghx-report-content").hide(),r("#ghx-version-report-not-started").hide(),r("#ghx-version-report-no-issues").show(),d.hideSpinner())},f.gatherPoints=function(e,r,i){e.mouseEntered&&t.setPointsForChart(e,i)},f.bindEvents=function(e){e.unbind("flotMouseEnter flotMouseLeave").bind("flotMouseEnter flotMouseLeave",m.handleMouseOverStateChange),e.unbind("plothover plotclick"),e.bind("plothover",f.handlePlotHover),e.bind("plotclick",m.handlePlotClick)},f.handlePlotHover=function(e,t,o){if(o){var a=o.series.id,n=o.dataIndex,s=g.model.getDataBySeriesAtIndex(a,n);if(!i.isEmpty(s))return void(f.isDataPointSameAsPrevious(o)||(f.previousPlotHoverPoint={dataIndex:o.dataIndex,seriesIndex:o.seriesIndex},r("#ghx-tooltip").remove(),f.showChartTooltip(o,a,s,o.datapoint[0]),r("#ghx-tooltip").hasClass("ghx-has-warnings")||d.getChartView().addClass("ghx-clickable")))}r("#ghx-tooltip").remove(),f.previousPlotHoverPoint=null,d.getChartView().removeClass("ghx-clickable")},f.isDataPointSameAsPrevious=function(e){return!i.isUndefined(f.previousPlotHoverPoint)&&!i.isNull(f.previousPlotHoverPoint)&&(e.dataIndex==f.previousPlotHoverPoint.dataIndex&&e.seriesIndex==f.previousPlotHoverPoint.seriesIndex)},f.showChartTooltip=function(e,t,r){if(r){var a,n;if(g.model.isReleaseDatePredictionSeriesId(t)){var s="Predicted Completion Date",d=i.findWhere(f.unmodifiedSeries,{id:"prediction"}).data[1][0];"optimistic"===t?(s="Predicted Completion Date"+" ("+"Optimistic"+")",d=i.findWhere(f.unmodifiedSeries,{id:"optimistic"}).data[1][0]):"pessimisticFillerBottom"===t&&(s="Predicted Completion Date"+" ("+"Pessimistic"+")",d=i.findWhere(f.unmodifiedSeries,{id:"pessimisticFillerBottom"}).data[1][0]),n={predictedReleaseDate:c.renderUTCMillisAsDateWithoutTime(d),description:s},a=new p(e,n,o.releaseDate)}else"trendline"===t?(n={description:"Start Date",dateText:c.renderUTCMillisAsDateWithoutTime(e.datapoint[0])},a=new p(e,n,o.startDate)):"unestimatedPercent"===t?(n={unestimated:(r.values.unestimatedIssueCount/r.values.issueCount*100).toFixed(2),dateText:c.renderUTCMillisAsDate(r.time)},n.changes=i.map(r.issues,function(e){return{key:e.key,event:this.getChangeEvent(e)}},g.model),a=new p(e,n,o.uncertainty)):(n=g.model.getTooltipData(t,r),a=new p(e,n));a.render()}},f.renderMeta=function(){if(g.model.hasIssues()&&!g.model.notStarted()){var e=g.model.getVersion(),t=i.findWhere(f.unmodifiedSeries,{id:"prediction"}),r=i.findWhere(f.unmodifiedSeries,{id:"optimistic"}),o=i.findWhere(f.unmodifiedSeries,{id:"pessimisticFillerBottom"}),a=e.released?"Released":"Unreleased",n={prediction:t?c.renderUTCMillisAsDateWithoutTime(t.data[1][0]):null,optimistic:r?c.renderUTCMillisAsDateWithoutTime(r.data[1][0]):null,pessimisticFillerBottom:o?c.renderUTCMillisAsDateWithoutTime(o.data[1][0]):null};f.gadgetMode?(AJS.$("#ghx-gadget-version-meta").empty().append(u.versionreport.renderVersionReportGadgetHeader({version:e,formattedReleaseDate:e.formattedReleaseDate,formattedStartDate:e.formattedStartDate,startTimezone:e.startTimeOffset,releaseTimezone:e.releaseTimeOffset,completionDate:n})).show(),AJS.$("#ghx-chart-header .ghx-version-report-version-status").text(" ("+a+")")):(AJS.$("#ghx-version-meta").empty().append(GH.tpl.versionreport.renderVersionReportHeader({version:e,formattedReleaseDate:e.formattedReleaseDate,formattedStartDate:e.formattedStartDate,startTimezone:e.startTimeOffset,releaseTimezone:e.releaseTimeOffset})).show(),e.released||AJS.$("#ghx-report-content .ghx-version-report-completion-date-estimates").empty().append(GH.tpl.versionreport.renderNonGadgetCompletionDates({completionDate:n})).show())}},f.renderReport=function(){f.toggleChartVisibility(),g.model.hasIssues()&&f.renderIssuesReport()},f.renderIssuesReport=function(){var e=g.model.getReportContent(),t=g.model.hasIssues();r("#ghx-report-content .ghx-version-report").empty().html(u.versionreport.renderVersionReport({content:e,jql:g.model.getJql(),estimationStatistic:g.model.getStatistic(),hasIssues:t})),d.hideSpinner()},f.setGadgetMode=function(e){f.gadgetMode=e},f.setWallboardMode=function(e){f.wallboardMode=e},f});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VersionReportModel.js' */
define("jira-agile/rapid/ui/chart/version-report-model",["require"],function(t){"use strict";var e=t("underscore"),i=t("jira-agile/rapid/ui/chart/changes-report-model"),s=t("jira-agile/rapid/ui/chart/chart-colors"),r=t("jira-agile/rapid/ui/chart/chart-controller"),a=t("jira-agile/rapid/ui/chart/release-date-predictor"),n=GH.ChartUtils,o=function(t){this.estimationStatistic=t};return o.prototype=new i,o.prototype.getStatistic=function(){return this.estimationStatistic},o.prototype.getProjectKey=function(){return this.chartData.projectKey},o.prototype.getVersionName=function(){return this.chartData.version.name},o.prototype.getNow=function(){return this.chartData.now},o.prototype.getVersion=function(){return this.data&&this.data.version?this.data.version:this.chartData&&this.chartData.version?this.chartData.version:{}},o.prototype.setRawVersionChartData=function(t){t.version.released&&(t.endTime=t.version.releaseDate,t.completeTime=t.endTime),this.setRawChartData(t)},o.prototype.getXAxisEnd=function(){return e.isUndefined(this.xAxisEndDate)?this.chartData.endTime:this.xAxisEndDate},o.prototype.getYAxes=function(){var t=[];return t.push(this.yAxisData),this.isIssueCountStatistic()||t.push({position:"right",min:0,max:100,tickFormatter:function(t,e){return t.toFixed(0)},tickSize:10}),t},o.prototype.setRawData=function(t){this.data=t,this.processData(),this.generateJql()},o.prototype.generateJql=function(){var t=this.getStatistic();this.jql={};var e=n.createVersionJql(this.getVersion()),i=e+" AND "+n.createStatusJql(this.getNotDoneStatuses());if(this.isIssueCountStatistic())this.jql.incompleteEstimatedIssues=i;else{var s=t.fieldId,r=/^customfield_(\d+)/.exec(s),a=r&&r.length>0;a&&(s="cf["+r[1]+"]"),this.jql.incompleteUnestimatedIssues=i+" AND "+s+" IS EMPTY",a?this.data.contents.incompleteEstimatedIssues.length>0&&(this.jql.incompleteEstimatedIssues=n.createIssueJql(this.data.contents.incompleteEstimatedIssues)):this.jql.incompleteEstimatedIssues=i+" AND "+s+" IS NOT EMPTY"}this.jql.completedIssues=e+" AND "+n.createStatusJql(this.getDoneStatuses()),this.jql.allIssues=e},o.prototype.getDataBySeries=function(t){var s=i.prototype.getDataBySeries.call(this,t);if(s)return s;if(this.isReleaseDatePredictionSeriesId(t)&&(s=e.findWhere(this.series,{id:t}),s&&s.data.length>0)){var r=new Array(s.data.length-1);return r.push(e.last(s.data)),r}return"trendline"===t&&(s=e.findWhere(this.series,{id:t}))?[e.first(s.data)]:"unestimatedPercent"===t&&(s=e.findWhere(this.series,{id:t}),s&&s.data.length>0)?e.map(s.data,function(t,i,s){var r=s[i+1];if(e.isUndefined(r)||t[0]!==r[0])return t}):void 0},o.prototype.getDataBySeriesAtIndex=function(t,s){var r=this.getDataBySeries(t);if(r){if("unestimatedPercent"!==t)return r[s];var a=r[s];if(a){var n=i.prototype.getDataBySeries.call(this,"issueCount"),o=e.findWhere(n,{time:a[0]});if(!e.isUndefined(o))return o;var d=i.prototype.getDataBySeries.call(this,"unestimatedIssueCount"),c=e.findWhere(d,{time:a[0]});return c}}},o.prototype.getVersionSeries=function(t){var i=this.getVersion();if(!this.attemptedTrendlinePrediction&&e.isUndefined(e.findWhere(this.series,{id:"trendline"}))&&(this.series=this.series.concat(this.getTrendlineSeries()),this.attemptedTrendlinePrediction=!0),!this.isIssueCountStatistic()&&e.isUndefined(e.findWhere(this.series,{id:"unestimatedPercent"}))&&(this.series=this.series.concat(this.getUnestimatedSeries()),this.series=e.reject(this.series,function(t){return"issueCount"===t.id||"unestimatedIssueCount"===t.id})),i.released)return this.series;if(e.isUndefined(e.findWhere(this.series,{id:"prediction"}))){this.series=this.series.concat(this.getPredictedSeries());var s=e.findWhere(this.series,{id:"trendline"});e.isUndefined(s)||(s.label="Predicted Completion Date")}return this.series},o.prototype.getPredictedSeries=function(){var t=this.getPredictionData();t.xAxisEndDate&&(this.xAxisEndDate=t.xAxisEndDate);var i=e.last(t.optimistic),r=e.last(t.standard),a=e.last(t.pessimistic);if(e.isUndefined(r))return[];var o={lineWidth:0},d={lineWidth:0,fill:.3},c={lineWidth:3},h={color:s.trend,data:t.standard,id:"prediction",lines:c},l={color:s.trend,data:t.optimistic,id:"optimistic",lines:d,fillBetween:"prediction"},u={color:s.trend,data:[i,r],id:"optimisticFiller",lines:d,fillBetween:"prediction",hoverable:!1},p={color:s.trend,data:t.pessimistic,id:"pessimistic",lines:d,fillBetween:"prediction",hoverable:!1},f={color:s.trend,data:[r,a],id:"pessimisticFillerTop",lines:o,hoverable:!1},m=e.first(t.pessimistic),g=n.calculateYProjection(m,a,r),D={color:s.trend,data:[[r[0],g],a],id:"pessimisticFillerBottom",lines:d,fillBetween:"pessimisticFillerTop"},v={color:s.scope,data:t.scope,id:"scope",lines:{lineWidth:1,fill:.3}};return[v,h,l,u,p,D,f]},o.prototype.getPredictionData=function(){var t=e.last(e.findWhere(this.series,{id:"totalEstimate"}).data),i=e.last(e.findWhere(this.series,{id:"completedEstimate"}).data),s=this.getPredictedCompletedEstimatePerDay();return a.calculateSeries({startDate:this.getNow(),totalScope:t[1],totalCompleted:i[1],estimatePerDay:s})},o.prototype.getPredictedCompletedEstimatePerDay=function(){var t=this.getVersionStartDate(),i=this.chartData.now+n.oneDayInMillis,s=e.findWhere(this.series,{id:"completedEstimate"}).data;return a.getPredictedCompletedEstimatePerDay(s,t,i,this.seriesData.completedEstimate)},o.prototype.getFurthestDateForNonWorkingDaysData=function(){if(e.isUndefined(this.series)||0==this.series.length)return 1/0;var t=e.last(e.findWhere(this.series,{id:"totalEstimate"}).data),i=e.last(e.findWhere(this.series,{id:"completedEstimate"}).data),s=t[1]-i[1];if(0===s)return this.getXAxisEnd();var r=this.getPredictedCompletedEstimatePerDay();return r.pessimistic>0?a.calculatePredictionDate(i[0],r.pessimistic/5,s):r.standard>0?a.calculatePredictionDate(i[0],r.standard/5,s):a.calculatePredictionDate(i[0],r.optimistic/5,s)},o.prototype.getTrendlineSeries=function(){var t;t=this.isIssueCountStatistic()?e.findWhere(this.series,{id:"totalEstimate"}).data:e.findWhere(this.series,{id:"issueCount"}).data;var i=e.first(t),r=e.findWhere(this.series,{id:"completedEstimate"}).data,a=e.last(r),n=this.getVersionStartDate(),o=[n,0],d=a;if(n>i[0]){var c=e.chain(r).filter(function(t){return t[0]<n}).last().value();e.isUndefined(c)&&(c=e.first(r)),o=[n,c[1]]}return 0===d[1]||d[1]<=o[1]?[]:[{id:"trendline",color:s.trend,data:[o,d],lines:{lineWidth:3},label:"Trend"}]},o.prototype.getUnestimatedSeries=function(){function t(t,i){return e.reduce(t,function(t,s){var r={time:s[0]};r[i]=s[1];var a=e.last(t);return e.isUndefined(a)||a.time!==r.time?t.push(r):a[i]=r[i],t},[])}var i=e.findWhere(this.series,{id:"issueCount"}).data,r=e.findWhere(this.series,{id:"unestimatedIssueCount"}).data,a=e.first(i)[1],n=e.first(r)[1],o=t(i,"total"),d=t(r,"unestimated"),c=e.sortBy(e.flatten([o,d],!0),"time"),h=e.reduce(c,function(t,i){var s=e.last(t);return e.isUndefined(s)||s.time!=i.time?t.push(i):e.defaults(s,i),t},[]),l=e.flatten(e.map(h,function(t,i,s){if(i<s.length-1){var r=s[i+1];return[t,e.defaults({time:r.time},t)]}return[t]}),!0);l.unshift({time:l[0].time,total:a,unestimated:n}),e.each(l,function(t,i,s){if(!(i<1)){var r=s[i-1];e.isUndefined(t.total)&&(t.total=r.total),e.isUndefined(t.unestimated)&&(t.unestimated=r.unestimated)}});var u=e.map(l,function(t){return[t.time,0===t.total?0:t.unestimated/t.total*100]});return{id:"unestimatedPercent",label:"Percent Unestimated Issues",color:s.unestimatedPercent,data:u,yaxis:2,lines:{lineWidth:1}}},o.prototype.getChartOptions=function(){var t=n.getChartOptions(this);return t.grid.markings=this.getMarkings(),t},o.prototype.getMarkings=function(){var t=this;return function(i){var a=r.getNonWorkingBlocks(),n=t.getNow();if(i.xmax>n&&(!t.getVersion().released||t.getVersion().releaseDate<=i.xmax)){var o=i.ymax/198,d=4*o;t.drawDashedMarkings(a,n,d,o,70);var c=t.getVersion().releaseDate;e.isUndefined(c)||(d=2*d,o=2*o,t.drawDashedMarkings(a,c,d,o,20,s.releaseDate))}return a}},o.prototype.drawDashedMarkings=function(t,e,i,r,a,n){for(var o=0;o<a;o++){var d=o*(i+r);t.push({color:n||s.dashedMarking,lineWidth:1,xaxis:{from:e,to:e},yaxis:{from:d,to:d+i}})}},o.prototype.isReleaseDatePredictionSeriesId=function(t){switch(t){case"prediction":case"optimistic":case"pessimisticFillerBottom":return!0}return!1},o.prototype.getStartTime=function(){return this.chartData.startTime?this.chartData.startTime:this.getNow()},o.prototype.getVersionStartDate=function(){return this.getVersion().startDate?this.getVersion().startDate:this.getStartTime()},o.prototype.notStarted=function(){return this.getVersionStartDate()>this.getNow()},o.prototype.getXAxisStart=function(){var t=.02,e=this.chartData.startTime;return this.getVersion().startDate&&(e=this.getVersion().startDate),e-(this.chartData.endTime-e)*t},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VersionReport.js' */
define("jira-agile/rapid/ui/chart/version-report",["require"],function(e){"use strict";var t=e("jira-agile/rapid/ui/chart/version-report-model"),r={};return r.createModel=function(e){r.model=new t(e),r.model.setParams({statistic:e,issueAddedText:"Issue added to version",issueRemovedText:"Issue removed from version",startText:"Version start date"})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/VersionReport.soy' */
// This file was automatically generated from VersionReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.versionreport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.versionreport == 'undefined') { GH.tpl.versionreport = {}; }


GH.tpl.versionreport.renderReportBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-status"></div><div id="ghx-chart-group"><div id="ghx-chart-controls-group"><div id="ghx-report-controls"></div><div id="ghx-version-meta" class="ghx-version-meta"></div><div id="ghx-version-report-no-issues" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('This version does not contain any issues.') + '</p></div></div><div id="ghx-version-report-not-started" style="display:none"><div class="aui-message info"><p class="title"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('The chart cannot be generated because the version has a start date in the future.') + '</p></div></div></div><div id="ghx-report-content"><div id="ghx-chart-mismatch"></div><div class="ghx-version-summary-wrap"><div id="ghx-chart-legend" class="ghx-release-chart-legend"></div><div class="ghx-release-summary"></div></div><div id="ghx-chart-wrap" class="ghx-version-chart-wrap"><div id="ghx-axis-x-top"></div><div id="ghx-chart-view"></div><div id="ghx-axis-x" class="ghx-axis"></div><div id="ghx-axis-y" class="ghx-axis ghx-axis-y"><span class="ghx-inner"></span></div><div id="ghx-axis-y-right" class="ghx-axis ghx-axis-y-right"><span class="ghx-inner"></span></div></div><div class="ghx-version-report-completion-date-estimates ghx-margin-top"></div><div class="ghx-version-report ghx-margin-top"></div></div><div id="ghx-gadget-version-meta" class="ghx-version-meta"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderReportBody.soyTemplateName = 'GH.tpl.versionreport.renderReportBody';
}


GH.tpl.versionreport.renderViewIssuesLink = function(opt_data, opt_ignored) {
  return '<div class="ghx-controls"><a href="' + GH.tpl.versionreport.issueNavLink({jql: 'fixVersion=' + soy.$$escapeUri(opt_data.version.jqlEncodedName) + ' AND project=' + soy.$$escapeHtml(opt_data.projectKey)}) + '">' + ((opt_data.nameUse == true) ? soy.$$escapeHtml(AJS.format('View {0} in Issue Navigator',opt_data.version.name)) : soy.$$escapeHtml('View in Issue Navigator')) + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderViewIssuesLink.soyTemplateName = 'GH.tpl.versionreport.renderViewIssuesLink';
}


GH.tpl.versionreport.renderVersionReportHeader = function(opt_data, opt_ignored) {
  return '<p>' + ((opt_data.version.startDate) ? soy.$$escapeHtml('Start Date:') + ' ' + soy.$$escapeHtml(opt_data.formattedStartDate) + '<br />' : '') + ((opt_data.version.released && opt_data.version.releaseDate) ? soy.$$escapeHtml(AJS.format('Released on {0}',opt_data.formattedReleaseDate)) : (opt_data.version.released) ? soy.$$escapeHtml('Released') : (opt_data.version.releaseDate) ? soy.$$escapeHtml(AJS.format('Scheduled Release Date: {0}',opt_data.formattedReleaseDate)) : soy.$$escapeHtml('Unreleased')) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReportHeader.soyTemplateName = 'GH.tpl.versionreport.renderVersionReportHeader';
}


GH.tpl.versionreport.renderVersionReportGadgetHeader = function(opt_data, opt_ignored) {
  return '<div class="ghx-version-report-completion-date-body">' + ((opt_data.version.startDate) ? '<p><span class="ghx-date-title">' + soy.$$escapeHtml('Start date') + ':</span><span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.formattedStartDate) + '</span></p>' : '') + ((opt_data.version.released && opt_data.version.releaseDate) ? '<p><span class="ghx-date-title">' + soy.$$escapeHtml('Released') + ':</span><span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.formattedReleaseDate) + '</span></p>' : '') + ((! opt_data.version.released) ? GH.tpl.versionreport.renderCompletionDates(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReportGadgetHeader.soyTemplateName = 'GH.tpl.versionreport.renderVersionReportGadgetHeader';
}


GH.tpl.versionreport.renderNonGadgetCompletionDates = function(opt_data, opt_ignored) {
  return '<div class="ghx-version-report-completion-date-body">' + GH.tpl.versionreport.renderCompletionDates(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderNonGadgetCompletionDates.soyTemplateName = 'GH.tpl.versionreport.renderNonGadgetCompletionDates';
}


GH.tpl.versionreport.renderCompletionDates = function(opt_data, opt_ignored) {
  return '' + ((opt_data.completionDate.prediction) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml('Predicted'), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.prediction), showTitle: 'true'}) + '<br>' : '') + ((opt_data.completionDate.optimistic) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml('Optimistic'), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.optimistic), showTitle: 'false'}) + '<br>' : '') + ((opt_data.completionDate.pessimisticFillerBottom) ? GH.tpl.versionreport.renderCompletionDate({dateTitle: '' + soy.$$escapeHtml('Pessimistic'), dateValue: '' + soy.$$escapeHtml(opt_data.completionDate.pessimisticFillerBottom), showTitle: 'false'}) + '<br>' : '');
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderCompletionDates.soyTemplateName = 'GH.tpl.versionreport.renderCompletionDates';
}


GH.tpl.versionreport.renderCompletionDate = function(opt_data, opt_ignored) {
  return ((opt_data.showTitle) ? '<span class="ghx-date-title">' + soy.$$escapeHtml(opt_data.dateTitle) + ' ' + soy.$$escapeHtml('completion date') + ':</span>' : '') + '<span class="ghx-date-value"> ' + soy.$$escapeHtml(opt_data.dateValue) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderCompletionDate.soyTemplateName = 'GH.tpl.versionreport.renderCompletionDate';
}


GH.tpl.versionreport.renderVersionReport = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml('Status Report') + '</h3><div class="ghx-version-report-table ghx-report-issue-list">' + ((opt_data.content.completedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Completed Issues'), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.completedIssues}), issues: opt_data.content.completedIssues, showEpicColumn: true, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.completedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteEstimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Incomplete Issues'), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.incompleteEstimatedIssues}), issues: opt_data.content.incompleteEstimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.content.incompletedIssuesEstimateSum.text}) : '') + ((opt_data.content.incompleteUnestimatedIssues.length != 0) ? GH.tpl.reports.issueTable.renderIssueTable({listName: '' + soy.$$escapeHtml('Incomplete Unestimated Issues'), issueNavLink: '' + GH.tpl.versionreport.issueNavLink({jql: opt_data.jql.incompleteUnestimatedIssues}), issues: opt_data.content.incompleteUnestimatedIssues, estimationStatistic: opt_data.estimationStatistic, estimationValue: 0}) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderVersionReport.soyTemplateName = 'GH.tpl.versionreport.renderVersionReport';
}


GH.tpl.versionreport.issueNavLink = function(opt_data, opt_ignored) {
  return soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/issues/?jql=' + soy.$$filterNoAutoescape(opt_data.jql);
};
if (goog.DEBUG) {
  GH.tpl.versionreport.issueNavLink.soyTemplateName = 'GH.tpl.versionreport.issueNavLink';
}


GH.tpl.versionreport.renderXaxisTopLabel = function(opt_data, opt_ignored) {
  return '<div style="left:' + soy.$$escapeHtml(opt_data.left) + 'px" class="ghx-axis-x-top-label">' + soy.$$escapeHtml(opt_data.text) + ((opt_data.date) ? ': ' + soy.$$escapeHtml(opt_data.date) : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.versionreport.renderXaxisTopLabel.soyTemplateName = 'GH.tpl.versionreport.renderXaxisTopLabel';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ReleaseDatePredictor.js' */
define("jira-agile/rapid/ui/chart/release-date-predictor",["require"],function(e){"use strict";var t=e("underscore"),a=e("jira-agile/rapid/ui/chart/burndown-rate"),r=e("jira-agile/rapid/ui/chart/change-event"),i=GH.ChartUtils,n={};return n.calculateSeries=function(e){var a={standard:[],optimistic:[],pessimistic:[],scope:[]};if(e.totalCompleted/e.totalScope<.1||e.totalCompleted===e.totalScope)return a;var r=n.createDataSeries(t.defaults({estimatePerDay:e.estimatePerDay.standard},e)),i=1/0;if(r.length>0&&(i=t.last(r)[0]),i==1/0)return a;var s=n.createDataSeries(t.defaults({estimatePerDay:e.estimatePerDay.optimistic},e)),o=n.createDataSeries(t.defaults({estimatePerDay:e.estimatePerDay.pessimistic},e)),l=n.calculateXAxisEndDate(o,i),c=[];return c.push([e.startDate,e.totalScope]),c.push([l,e.totalScope]),{standard:r,optimistic:s,pessimistic:o,scope:c,xAxisEndDate:l}},n.calculateXAxisEndDate=function(e,a){var r=1/0;return e.length>0&&(r=t.last(e)[0]+i.oneDayInMillis),r===1/0&&(r=a+i.oneDayInMillis),r},n.createDataSeries=function(e){var r=[],n=e.estimatePerDay;if(r.push([e.startDate,e.totalCompleted]),n<=0)return r.push([1/0,e.totalCompleted]),r;var s=a.getWorkingDays();if(0===s.length)return[];for(var o=e.totalScope-e.totalCompleted,l=e.totalCompleted,c=0;c<s.length;c++){var u=s[c];if(u.end>e.startDate){var d=u.start;u.start>e.startDate?r.push([u.start,l]):d=e.startDate;var p=(u.end-d)/i.oneDayInMillis,m=o/n;if(m<=p){var D=new Date(d+m*i.oneDayInMillis);r.push([D.valueOf(),e.totalScope]);break}var f=p*n;l+=f,o-=f,r.push([u.end,l])}}return[t.first(r),t.last(r)]},n.getCompletedEstimatePerDay=function(e,n,s,o){function l(e){var t=r.getChangeEvent(e);t!=r.burndown&&t!=r.completeScopeAdded||m.push(e.key)}function c(e,a){if(t.contains(m,a.key)){var i=r.getChangeEvent(a);if(i===r.completeScopeAdded||i===r.scopeAdded)return e-a.completedEstimate}return e}for(var u=[],d=0,p=0,m=[],D=0,f=n;f<=s;f+=i.oneDayInMillis){a.isDateInNonWorkingBlock(f)||D++;for(var v,h=0,g=p;g<e.length;g++){var y=e[g][0];if(!(y<=f)){d=e[g][1],p=g;break}if(y>n){var C=e[g][1];v=o[g]?o[g].issues:[],v&&(C=t.reduce(v,c,C),t.each(v,l)),C>d&&(h+=C-d),d=e[g][1]}else v=o[g]?o[g].issues:[],v&&t.each(v,l),d=e[g][1]}u.push({time:f,estimate:h})}return{completedData:u,workingDays:D}},n.calculateAverageEstimateCompletedPerDay=function(e){var a=e.workingDays;if(0===a)return 0;var r=t.reduce(e.completedData,function(e,t){return e+t.estimate},0);return r/a},n.calculateDeviation=function(e){return.1*e},n.getPredictedCompletedEstimatePerDay=function(e,t,a,r){var i=n.getCompletedEstimatePerDay(e,t,a,r),s=n.calculateAverageEstimateCompletedPerDay(i),o=n.calculateDeviation(s),l=s+o,c=Math.max(s-o,0);return{standard:s,optimistic:l,pessimistic:c}},n.calculatePredictionDate=function(e,t,a){if(t<=0)return 1/0;var r=a/t,n=e+i.oneDayInMillis*r,s=(new Date).getTime()+365*i.oneDayInMillis*19;return n=Math.min(n,s),new Date(n).valueOf()},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/ChangeEvent.js' */
define("jira-agile/rapid/ui/chart/change-event",["require"],function(e){"use strict";var n=e("underscore"),t={scopeAdded:"scopeAdded",scopeRemoved:"scopeRemoved",reopened:"reopened",burndown:"burndown",completeScopeAdded:"completeScopeAdded",estimateChanged:"estimateChanged",estimateAdded:"estimateAdded",estimateRemoved:"estimateRemoved",releaseDate:"releaseDate",uncertainty:"uncertainty",unknown:"unknown",startDate:"startDate"};return t.getScopeOrColumnChangeEvent=function(e,n){return e.scopeChange?e.inScope?t.scopeAdded:t.scopeRemoved:!!e.columnChange&&("notDone"===e.column?e.oldColumn?t.reopened:t.scopeAdded:"done"===e.column?e.oldColumn?t.burndown:t.completeScopeAdded:"notDone"===e.oldColumn?t.scopeRemoved:t.scopeRemoved)},t.getChangeEvent=function(e){var d="Burnup",o=t.getScopeOrColumnChangeEvent(e,d);if(o)return o;if(e.estimateChange){var a=e.values.oldEstimateFieldValue,r=e.values.estimateFieldValue,s=!n.isUndefined(a),i=!n.isUndefined(r);return s&&i?t.estimateChanged:s?t.estimateRemoved:t.estimateAdded}return t.unknown},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/MultipleCharts.js' */
GH.Reports=GH.Reports||{},GH.Reports.multipleCharts=function(){return c3.component("multipleCharts").extend({charts:c3.prop([]),chartSelector:c3.prop(".ghx-svg-chart")}).extend(function(){this.selection().selectAll(this.chartSelector()).data(this.charts()).each(function(t){t&&t(d3.select(this))})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ChartConfigService.js' */
!function(){function t(t,a){var o=GH.RapidBoard.State.getBoardSetting(t,"chart.config."+a,{});return o}function a(){}a.prototype={mapOldConfigToNewConfig:function(a,o){var n=t(a,o),i=GH.RapidBoard.State.getCycleTimeCalculationType();n.includeNonWorkingDays="total"===i,GH.RapidBoard.State.setBoardSetting("chart.config."+o,n)},mapNewConfigToOldConfig:function(a,o){var n=t(a,o),i=n.includeNonWorkingDays?"total":"workingDays";GH.RapidBoard.State.setCycleTimeCalculationType(i)}},GH.ChartNWDConfigService=a,GH.chartNWDConfigService=new a}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ChartTimeFrameModel.js' */
!function(t,e,i){function r(e,i){if(!t.isDate(e))throw i+" must be a Date object";return e}function a(t){return h.floor(h.offset(t,1))}function s(t){return new Date(a(t)-1)}function m(){}var n="%Y-%m-%d",o=90,u="custom",h=e.time.day;m.prototype={timeFrame:null,fromDate:null,toDate:null,setSimpleDates:function(t,e){return this.timeFrame=u,this.fromDate=h.floor(r(t,"fromDate")),this.toDate=s(r(e,"toDate")),this},setExactDates:function(t,e){return this.timeFrame=u,this.fromDate=r(t),this.toDate=r(e),this},setDays:function(t){return this.timeFrame=t,this},setAllTime:function(){return this.timeFrame=0,this},resetToDefault:function(){return this.timeFrame=o,this},isDefault:function(){return this.timeFrame===o},setBounds:function(t,e){return this.earliestDate=r(t,"earliestDate"),this.currentDate=r(e,"currentDate"),this},getTimeFrame:function(){return t.findWhere(i,{days:this.timeFrame})?this.timeFrame:u},getTimeFrameDates:function(){if(!this.earliestDate||!this.currentDate)throw"Cannot calculate time frame dates without earliestDate and currentDate";var t,e;return this.timeFrame>0?(t=h.offset(a(this.currentDate),-1*this.timeFrame),e=s(this.currentDate)):this.timeFrame<=0?(t=h.floor(this.earliestDate),e=s(this.currentDate)):this.timeFrame===u&&(t=this.fromDate,e=this.toDate),{fromDate:t,toDate:e}},getTimeFrameDuration:function(){var t=this.getTimeFrameDates();return t.toDate-t.fromDate+1},fromNormalized:function(t){if(null==t.days)this.resetToDefault();else if(t.days>0)this.setDays(Number(t.days));else if(t.days===u)try{this.setSimpleDates(Date.parseDate(t.from,n),Date.parseDate(t.to,n))}catch(e){this.resetToDefault()}else this.setAllTime();return this},toNormalized:function(){var e={};return t.isNumber(this.timeFrame)&&this.timeFrame!==o?e.days=this.timeFrame:this.timeFrame===u&&(e.days=this.timeFrame,e.from=this.fromDate.print(n),e.to=this.toDate.print(n)),e},clone:function(){return(new m).fromNormalized(this.toNormalized())}},GH.Reports.ChartTimeFrameModel=m}(_,d3,GH.ChartTimeFrames.timeFrames);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ChartTimeFrameService.js' */
GH.ChartTimeFrameService={},GH.ChartTimeFrameService.rapidViewId=null,GH.ChartTimeFrameService.normalizedDateFormat="%Y-%m-%d",GH.ChartTimeFrameService.setRapidViewId=function(e){GH.ChartTimeFrameService.rapidViewId=e},GH.ChartTimeFrameService.getTimeFramesConfigForChart=function(e){var r=GH.RapidBoard.State.getBoardSetting(GH.ChartTimeFrameService.rapidViewId,"chart.config."+e,{});return r},GH.ChartTimeFrameService.saveTimeFrameConfigForChart=function(e,r){var t={view:"reporting"};GH.RapidBoard.State.setBoardSetting("chart.config."+e,_.defaults(r,t))},GH.ChartTimeFrameService._getFormattedDate=function(e){return e=_.isNumber(e)?new Date(e):e,_.isDate(e)?e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate():e},GH.ChartTimeFrameService._convertDateFormattedStringToDate=function(e){return _.isString(e)&&e.length>0?new Date(Date.parse(e)):null},GH.ChartTimeFrameService.mapOldConfigToNewConfig=function(e){var r=GH.ChartTimeFrameService.rapidViewId,t=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.days",GH.ChartTimeFrames.days),a=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.from",""),i=GH.RapidBoard.State.getBoardSetting(r,"chart.timeframe.to","");a=GH.ChartTimeFrameService._getFormattedDate(a),i=GH.ChartTimeFrameService._getFormattedDate(i);var m=GH.ChartTimeFrameService.getTimeFramesConfigForChart(e);m.days=t>=0?t:"custom",m.from=a,m.to=i,GH.ChartTimeFrameService.saveTimeFrameConfigForChart(e,m)},GH.ChartTimeFrameService.mapNewConfigToOldConfig=function(e){var r=GH.ChartTimeFrameService.getTimeFramesConfigForChart(e),t=r.days,a=null,i=null;if(t<0||"custom"===t){t=-1;try{a=GH.ChartTimeFrameService._convertDateFormattedStringToDate(r.from).getTime(),i=GH.ChartTimeFrameService._convertDateFormattedStringToDate(r.to).getTime()}catch(m){t=0}}else _.isUndefined(t)&&(t=0);GH.ChartTimeFrames.setNewChartLimits(t,a,i,!1)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintTransformer.js' */
!function(e,t,n,r,i,s,a,o,u,d){"use strict";function m(t){function n(e,t){var n={time:+r,key:i.key};n[e]=t,a.push(n)}var r,i,s=t.changes,a=[];for(r in s)for(var o=0;o<s[r].length;o++)i=s[r][o],i.column&&n("done",!i.column.notDone),i.statC&&n("estimate",i.statC.newValue),"added"in i&&n("added",i.added);return e.sortBy(a,"time")}function c(t){function n(t){i=e.reject(i,function(e){return e.key===t&&(e.wasDone&&(e.wasDone=!1),"done"in e)}),s[t].done=!1}function r(n){var r=e.where(t,{key:n,done:!0});return e.last(r).time}var i=[],s={};return e.each(t,function(t){if(!("estimate"in t)){var a=t.key;s[a]||(s[a]={});var o=s[a];"added"in t?o.added!==t.added&&(o.done&&(t=e.extend({wasDone:!0},t),t.added&&(t.time=r(t.key),i=e.reject(i,function(e){return e.key===a&&"done"in e}),i.push({key:t.key,done:!0,time:t.time}))),i.push(t),o.added=t.added):"done"in t&&(t.done?o.done||o.added===!1||i.push(t):n(a),o.done=t.done)}}),i=e.sortBy(i,"time"),{changes:i,issueStates:s}}function l(t){var n={};return e.each(t,function(e){"added"in e&&(e.added?n[e.key]=!0:delete n[e.key])}),e.keys(n)}function f(t,n){var r={},i=e.groupBy(n);return e.each(t,function(t){"estimate"in t&&e.has(i,t.key)&&(e.isNumber(t.estimate)?r[t.key]=t.estimate:delete r[t.key])}),r}function p(t,n){var r=e.find(t,function(e){return!(null!=n&&e.time<n)&&"done"in e});return r?r.time:-1}function v(t,n){if(!t.length||t[0].startTime>n)return"original";var r=e.find(t,function(e,r){return r===t.length-1||e.startTime<=n&&t[r+1].startTime>n});return r.id}function k(t,n){var r=e.find(t,function(e,r){return r===t.length-1||e.startTime<=n&&t[r+1].startTime>n});return r.id}function g(t){return e.find(t,function(e){return"done"in e})}function w(e,t){return e&&"original"!==e?t.find(function(t){return t.id.toString()===e}):null}function h(t,n){var r={},i=p(t);if(i===-1)r.original=t;else{var s=v(n,i);e.each(t,function(e){var t=v(n,e.time);e.time<i&&t!==s&&(t="original"),r[t]||(r[t]=[]),r[t].push(e)})}return R(r)}function y(t,n,r,i){var s={};if(t){var a=T(t,r,i),o=w(a,r);e.each(n,function(e){var t=void 0;t=o&&"added"in e&&e.time<o.startTime?"original":T(e,r,i),t&&(t=t.toString(),s[t]||(s[t]=[]),s[t].push(e))})}else s.original=n;return R(s)}function T(e,t,n){var r=n[e.key],i=void 0;return!t.length||e.time<t[0].startTime?"original":(i=r&&0!==r.length?"done"in e||"wasDone"in e?I(e,r):S(e,r,t):k(t,e.time),i?i.toString():null)}function I(t,n){if(1===n.length)return n[0].id;var r=n.filter(function(e){return"ACTIVE"===e.state&&t.time>=e.startTime||e.endTime&&t.time>=e.startTime&&t.time<=e.endTime}),i=e.sortBy(r,"endTime").pop();return i?i.id:null}function S(e,t,n){var r=null,i=n.filter(function(t){return e.time>=t.startTime}),s=i.filter(function(t){return t.endTime&&e.time<=t.endTime});if(s.length>1){var a=t.map(function(e){return e.id});r=s.slice().reverse().find(function(e){return a.includes(e.id)}),r||(r=s.pop())}else r=1===s.length?s[0]:i.pop();return r?r.id:null}function R(t){var n={};return e.each(t,function(t,r){function i(t,n){return e.find(e.clone(t).reverse(),function(e){return e.added===n})}function s(t){return e.reject(t,function(e){return"added"in e})}n[r]=n[r]||[],e.each(t,function(e){"added"in e||n[r].push(e)});var a={};e.each(t,function(e){"added"in e&&(a[e.key]=a[e.key]||[],a[e.key].push(e))}),e.each(a,function(t,o){var u=e.reduce(t,function(e,t){return e+(t.added?1:-1)},0);if(u>0){var d=i(t,!0);d&&(a[o]=s(),a[o].push(d))}else if(u<0){var m=i(t,!1);m&&(a[o]=s(),a[o].push(m))}else a[o]=s(),e.last(t).added===!1&&(n[r]=e.reject(n[r],function(e){return e.key===o}))}),e.each(e.flatten(a),function(e){n[r].push(e)})}),n}function b(t,n){var r={added:0,removed:0,net:0};return e.each(n||[],function(e){if("added"in e){var n=t[e.key]||0;e.added?r.added+=n:e.wasDone||(r.removed+=n)}}),r.net=r.added-r.removed,r}function C(t,n){return e.reduce(n,function(e,n){if(n.done){var r=t[n.key]||0;return e+r}return e},0)}function F(e){var t;switch(e){case"duration":t={formatFull:function(e){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e,{durationUnit:GH.TimeFormatDurationUnits.SECONDS,dropMinutesIfLongerThanADay:!0})},formatCompact:function(e){return GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration(e,{durationUnit:GH.TimeFormatDurationUnits.SECONDS,timeFormat:GH.TimeFormatDisplays.MOST_SIGNIFICANT})}};break;default:t={formatFull:GH.NumberFormat.format,formatCompact:GH.NumberFormat.format}}return t}function A(t){function n(e){return Math.round(r.mean(e,function(e){return e.workCompleted}))}var i=e.last(t),s=i&&i.isActive,a=s?t.slice(0,-1):t,o={baseline:i?i.baseline:0};if(a.length<E)return e.extend(o,{forecastError:AJS.format("A forecast cannot be shown until at least {0,choice,1#1 sprint has|1\u003c{0,number} sprints have} been completed.",E)});if(0===i.workRemaining)return e.extend(o,{sprintsRemaining:0});var u=n(e.last(a,E)),d=i.workRemaining,m=!1;if(s)if(i.workCompleted>u)u=n(e.last(t,E));else{var c=i.workAtStart+i.workAdded-i.workRemoved;d=c-Math.min(c,u),m=!0}return 0===u?e.extend(o,{forecastError:AJS.format("A forecast cannot be shown until at least one of {0,number} most recent {0,choice,1#sprint|1\u003csprints} contains completed work.",E)}):e.extend(o,{sprintsRemaining:Math.ceil(d/u),velocity:u,workRemaining:d,isLastSprintForecast:m})}function G(t,n){if(t.forecastError||0===t.sprintsRemaining)return e.map(e.range(n),function(e){return{sprintId:"forecast"+e,sprintName:"",baseline:t.baseline,workAtStart:0,workAdded:0,workRemoved:0,workCompleted:0,workRemaining:0,isForecast:!0,isActive:!1}});var r=t.workRemaining;return e.map(e.range(n),function(e){var n=r,i=Math.min(r,t.velocity);return r-=i,{sprintId:"forecast"+e,sprintName:"",baseline:t.baseline,workAtStart:n,workAdded:0,workRemoved:0,workCompleted:i,workRemaining:r,isForecast:!0,isActive:!1}})}function H(t,n){function r(e){return function(t){return e[t].added}}var i={sprints:[],series:{baseline:[],workAdded:[],workRemaining:[],workCompleted:[]},estimationStatistic:t.estimationStatistic,labels:t.labels||{},rapidViewId:t.rapidViewId};t.epic&&(i.epic=t.epic),t.version&&(i.version=t.version);var s=m(t),a=c(s),o=a.changes,d=f(s,t.estimatableIssueKeys),k=e.sortBy(t.sprints,"startTime"),w=U.isFeatureEnabled("jsw.classic.epic-releases.burndown-reports.fixes"),T=void 0,I=void 0;w?(I=g(o),T=y(I,o,k,t.estimatableIssueKeyToSprints)):T=h(o,k);var S=b(d,T.original).net,R=C(d,T.original),F={sprintId:"original",sprintName:i.labels.originalEstimate,baseline:0,workAtStart:S,workAdded:0,workRemoved:0,workCompleted:R,workRemaining:S-R,isForecast:!1,isActive:!1,issues:e.pluck(e.where(T.original,{done:!0}),"key")},H=F;i.sprints=e.map(k,function(t){var r=T[t.id],i=b(d,r),s=C(d,r),a={sprintId:t.id,sprintName:t.name,baseline:n?0:H.baseline-i.net,workAtStart:H.workRemaining,workAdded:i.added,workRemoved:i.removed,workCompleted:s,workRemaining:H.workRemaining-s+i.net,startTime:t.startTime,endTime:t.endTime,isForecast:!1,isActive:"ACTIVE"===t.state,issues:e.pluck(e.where(r,{done:!0}),"key")};return H=a,a});var D=void 0,N=void 0;if(i.sprints.length)if(w)if(I){var x=Object.keys(T);N=u.indexOf(i.sprints,function(e){return x.includes(e.sprintId.toString())}),D=u.indexOf(i.sprints,function(e){return e.workAdded||e.workRemoved||e.workCompleted||e.workRemaining},!0),i.sprints=N>=0&&D>=0?i.sprints.slice(N,D+1):[]}else i.sprints=[];else{var E=p(o,i.sprints[0].startTime),B=v(k,E);N=u.indexOf(i.sprints,function(e){return e.sprintId===B}),D=u.indexOf(i.sprints,function(e){return e.workAdded||e.workRemoved||e.workCompleted||e.workRemaining},!0),i.sprints=N>=0&&D>=0?i.sprints.slice(N,D+1):[]}var j=e.last(i.sprints),O=i.sprints.length?j.workRemaining:F.workRemaining,V=F.workCompleted+e.reduce(i.sprints,function(e,t){return e+t.workCompleted},0),M=i.forecast=A(i.sprints);i.sprints.unshift(F),i.getForecast=e.partial(G,M);var J=l(o),K=e.intersection(J,e.keys(d));if(0===O){var L=e.pluck(e.where(o,{done:!0}),"key"),_=e.filter(L,r(a.issueStates)),q=e.filter(t.estimatableIssueKeys,r(a.issueStates)),W=e.difference(q,_),$=W.length;i.forecast.remainingEstimatableIssueCount=$}return i.snapshot={workRemaining:O,workCompleted:V,estimatedIssueCount:K.length,estimatableIssueCount:e.intersection(J,t.estimatableIssueKeys).length,issueCount:J.length},i}function D(n,r){var i=n.contents,s=e.object(e.pluck(i.completedIssues,"key"),i.completedIssues);return n.estimationStatistic=r.estimationStatistic,i.incompleteIssues=e.union(i.incompleteEstimatedIssues,i.incompleteUnestimatedIssues),i.incompleteIssuesSum={text:n.estimationStatistic.formatter.formatFull(i.incompletedIssuesEstimateSum.value),value:i.incompletedIssuesEstimateSum.value},i.incompleteIssuesUrl=d.getUrlForIssues(i.incompleteIssues),n.sprints=e.filter(r.sprints,function(e){return"original"!==e.sprintId||e.issues.length}).reverse(),n.sprints=e.map(n.sprints,function(r){var i={sprintId:r.sprintId};return i.issues=e.map(r.issues,function(e){return s[e]}),i.issues=e.compact(i.issues),i.issueNavUrl=d.getUrlForIssues(i.issues),"original"===r.sprintId?i.sprintName="Before initial sprint":(i.sprintName=r.sprintName,i.sprintReportUrl=d.prependBaseUrl("/secure/RapidBoard.jspa?rapidView="+n.rapidViewId+"&view=reporting&chart=sprintRetrospective&sprint="+r.sprintId)),r.startTime&&(i.formattedStartTime=t(r.startTime).format(x)),r.endTime&&(i.formattedEndTime=t(r.endTime).format(x)),i.formatedWorkCompleted=n.estimationStatistic.formatter.formatFull(r.workCompleted),i}),n}function N(t){var n=m(t),r={};return e.each(n,function(e){var t=r[e.key]=r[e.key]||[];t.push(e)}),r}var x="LL",E=3,U=require("jira/featureflags/feature-manager"),B={getScopeBySprintData:H,getIssuesBySprintData:D,getEstimationStatisticFormatter:F,_getIssueHistory:N};GH.Reports=GH.Reports||{},GH.Reports.ScopeBurndownBySprintTransformer=B}(_,moment,AJS.$,d3,GH.Ajax,GH.RapidViewConfig,GH.NumberFormat,GH.TimeFormat,GH.Util,GH.UrlFormat);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ReportIssueTable.soy' */
// This file was automatically generated from ReportIssueTable.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.issueTable.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.issueTable == 'undefined') { GH.tpl.reports.issueTable = {}; }


GH.tpl.reports.issueTable.renderIssueTable = function(opt_data, opt_ignored) {
  var output = '<div class="aui-group ghx-issue-table-title"><div class="aui-item">';
  if (opt_data.sprint || opt_data.listName) {
    output += '<h4>';
    if (opt_data.sprint) {
      var sprintName__soy9 = '' + ((opt_data.sprint.isActive) ? soy.$$escapeHtml(AJS.format('{0} (active)',opt_data.sprint.sprintName)) : soy.$$escapeHtml(opt_data.sprint.sprintName));
      output += (opt_data.sprint.sprintReportUrl) ? '<a href="' + soy.$$escapeHtml(opt_data.sprint.sprintReportUrl) + '">' + soy.$$escapeHtml(sprintName__soy9) + '</a>' : soy.$$escapeHtml(sprintName__soy9);
    } else {
      output += soy.$$escapeHtml(opt_data.listName);
    }
    output += '</h4>' + ((opt_data.titleTooltip) ? '<span class="aui-icon aui-icon-small aui-iconfont-help issue-table-title-tooltip" title="' + soy.$$escapeHtml(opt_data.titleTooltip) + '"></span>' : '');
  }
  output += ((opt_data.sprint && opt_data.sprint.formattedStartTime && opt_data.sprint.formattedEndTime) ? ' <span>' + soy.$$escapeHtml(opt_data.sprint.formattedStartTime) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndTime) + '</span>' : '') + '</div><div class="aui-item">' + ((opt_data.issues.length > 0) ? '<a class="ghx-controls" href="' + soy.$$escapeHtml(opt_data.issueNavLink) + '">' + soy.$$escapeHtml('View in Issue Navigator') + '</a>' : '') + '</div></div>' + ((opt_data.issues.length > 0) ? '<table class="aui">' + GH.tpl.reports.issueTable.renderIssueTableHeader({estimateStatisticName: opt_data.estimationStatistic.name, estimateStatisticValue: opt_data.estimationValue, currentEstimateStatisticValue: opt_data.currentEstimationValue, showEpicColumn: opt_data.showEpicColumn}) + GH.tpl.reports.issueTable.renderIssueTableRows(opt_data) + '</table>' : (opt_data.emptyMessage) ? '<p>' + soy.$$escapeHtml(opt_data.emptyMessage) + '</p>' : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTable.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTable';
}


GH.tpl.reports.issueTable.renderIssueTableHeader = function(opt_data, opt_ignored) {
  var output = '<tr><th>' + soy.$$escapeHtml('Key') + '</th><th>' + soy.$$escapeHtml('Summary') + '</th><th>' + soy.$$escapeHtml('Issue Type') + '</th><th>' + soy.$$escapeHtml('Priority') + '</th><th>' + soy.$$escapeHtml('Status') + '</th>' + ((opt_data.showEpicColumn) ? '<th>' + soy.$$escapeHtml('Epic') + '</th>' : '');
  var headerTooltip__soy82 = opt_data.currentEstimateStatisticValue && opt_data.estimateStatisticValue != opt_data.currentEstimateStatisticValue ? AJS.format('Estimate modified from {0} to {1}',opt_data.estimateStatisticValue,opt_data.currentEstimateStatisticValue) : '';
  output += '<th class="ghx-right ghx-minimal ghx-nowrap" title="' + soy.$$escapeHtml(headerTooltip__soy82) + '">' + soy.$$escapeHtml(opt_data.estimateStatisticName) + ' <span>(';
  if (opt_data.currentEstimateStatisticValue && opt_data.estimateStatisticValue != opt_data.currentEstimateStatisticValue) {
    output += GH.tpl.reports.issueTable.renderChangedEstimateIndicator({initialEstimate: opt_data.estimateStatisticValue, currentEstimate: opt_data.currentEstimateStatisticValue});
  } else {
    var className__soy94 = '' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.estimateStatisticValue});
    output += '<span class="' + soy.$$escapeHtml(className__soy94) + '">' + soy.$$escapeHtml(opt_data.estimateStatisticValue) + '</span>';
  }
  output += ')</span></th></tr>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTableHeader.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTableHeader';
}


GH.tpl.reports.issueTable.renderIssueTableRows = function(opt_data, opt_ignored) {
  var output = '';
  var issueList104 = opt_data.issues;
  var issueListLen104 = issueList104.length;
  for (var issueIndex104 = 0; issueIndex104 < issueListLen104; issueIndex104++) {
    var issueData104 = issueList104[issueIndex104];
    var issueAdded__soy105 = opt_data.addedIssues && opt_data.addedIssues[issueData104.key];
    output += '<tr' + ((issueAdded__soy105) ? ' class="ghx-added" title="' + soy.$$escapeHtml('Issue added to sprint after start time') + '"' : '') + '><td class="ghx-nowrap"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData104.key) + '">' + soy.$$escapeHtml(issueData104.key) + '</a>' + ((issueAdded__soy105) ? ' *' : '') + '</td><td>' + soy.$$escapeHtml(issueData104.summary) + '</td><td class="ghx-nowrap">' + ((issueData104.typeName) ? '<img src="' + soy.$$escapeHtml(issueData104.typeUrl) + '" />' + soy.$$escapeHtml(issueData104.typeName) : soy.$$escapeHtml('None')) + '</td><td class="ghx-nowrap">' + ((issueData104.priorityName) ? '<img src="' + soy.$$escapeHtml(issueData104.priorityUrl) + '" />' + soy.$$escapeHtml(issueData104.priorityName) : soy.$$escapeHtml('None')) + '</td><td class="ghx-nowrap">' + GH.tpl.status.renderFull({status: issueData104.status}) + '</td>' + ((opt_data.showEpicColumn) ? '<td class="ghx-nowrap">' + ((issueData104.epic) ? aui.labels.label({extraClasses: [issueData104.epicColor], text: '' + GH.tpl.epic.getEpicNameString({epicLabel: issueData104.epicLabel, epicKey: issueData104.epic}), url: GH.Ajax.CONTEXT_PATH + '/browse/' + issueData104.epic, extraAttributes: {title: issueData104.epic}}) : '') + '</td>' : '');
    var tooltip__soy160 = issueData104.estimateStatistic && issueData104.currentEstimateStatistic && issueData104.estimateStatistic.statFieldValue.text != issueData104.currentEstimateStatistic.statFieldValue.text ? AJS.format('Estimate modified from {0} to {1}',issueData104.estimateStatistic.statFieldValue.text,issueData104.currentEstimateStatistic.statFieldValue.text) : '';
    output += '<td class="ghx-right ghx-minimal ghx-nowrap" title="' + soy.$$escapeHtml(tooltip__soy160) + '">' + ((issueData104.estimateStatistic && issueData104.estimateStatistic.statFieldValue && issueData104.estimateStatistic.statFieldValue.text) ? (issueData104.currentEstimateStatistic && issueData104.estimateStatistic.statFieldValue.text != issueData104.currentEstimateStatistic.statFieldValue.text) ? GH.tpl.reports.issueTable.renderChangedEstimateIndicator({initialEstimate: issueData104.estimateStatistic.statFieldValue.text, currentEstimate: issueData104.currentEstimateStatistic.statFieldValue.text}) : soy.$$escapeHtml(issueData104.estimateStatistic.statFieldValue.text) : '-') + '</td></tr>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderIssueTableRows.soyTemplateName = 'GH.tpl.reports.issueTable.renderIssueTableRows';
}


GH.tpl.reports.issueTable.renderChangedEstimateIndicator = function(opt_data, opt_ignored) {
  return '<span class="ghx-previous-value  ' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.initialEstimate}) + '">' + soy.$$escapeHtml(opt_data.initialEstimate) + ((opt_data.initialEstimate == '-') ? ' ' : '') + ' &#8594; </span><span class="ghx-current-value ' + GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar({value: opt_data.currentEstimate}) + '">' + soy.$$escapeHtml(opt_data.currentEstimate) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.renderChangedEstimateIndicator.soyTemplateName = 'GH.tpl.reports.issueTable.renderChangedEstimateIndicator';
}


GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.value == '-' ? 'empty-mode' : '');
};
if (goog.DEBUG) {
  GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar.soyTemplateName = 'GH.tpl.reports.issueTable.returnEmptyModeClassForDashChar';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprint.soy' */
// This file was automatically generated from ScopeBurndownBySprint.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.scopeBurndownBySprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.scopeBurndownBySprint == 'undefined') { GH.tpl.reports.scopeBurndownBySprint = {}; }


GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent = function(opt_data, opt_ignored) {
  var output = '';
  var statistic__soy3 = opt_data.estimationStatistic.name;
  output += '<div class="ghx-inline-dialog-container">' + ((opt_data.url != '') ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '') + '<strong>' + soy.$$escapeHtml(opt_data.sprint.sprintName) + '</strong>' + ((opt_data.url != '') ? '</a>' : '') + ((opt_data.sprint.formattedStartDate) ? '<p class="ghx-sprint-dialog-dates">' + soy.$$escapeHtml(opt_data.sprint.formattedStartDate) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndDate) + '</p>' : '') + '<table class="ghx-stat-table">' + GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: 'at start of sprint', estimateValue: opt_data.sprint.formattedWorkAtStart, estimationStatistic: statistic__soy3}) + ((opt_data.sprint.workAdded) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: opt_data.labels.workAdded, estimateValue: opt_data.sprint.formattedWorkAdded, estimationStatistic: statistic__soy3}) : '') + ((opt_data.sprint.workRemoved) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: opt_data.labels.workRemoved, estimateValue: opt_data.sprint.formattedWorkRemoved, estimationStatistic: statistic__soy3}) : '') + ((opt_data.sprint.workCompleted) ? GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('completed') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkCompleted, estimationStatistic: statistic__soy3}) : '') + GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('remaining') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkRemaining, estimationStatistic: statistic__soy3}) + '</table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent';
}


GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate = function(opt_data, opt_ignored) {
  return '<tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.estimateValue) + '</span></td><th class="ghx-stat-table-label">' + soy.$$escapeHtml(opt_data.estimateLabel) + '</th></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderDialogWorkEstimate';
}


GH.tpl.reports.scopeBurndownBySprint.renderIssueList = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.sprints.length > 0) ? '<h3>' + soy.$$escapeHtml('Completed Issues') + '</h3>' : '');
  var sprintList77 = opt_data.sprints;
  var sprintListLen77 = sprintList77.length;
  for (var sprintIndex77 = 0; sprintIndex77 < sprintListLen77; sprintIndex77++) {
    var sprintData77 = sprintList77[sprintIndex77];
    output += GH.tpl.reports.scopeBurndownBySprint.renderIssueTable({listName: sprintData77.sprintName, sprint: sprintData77, issues: sprintData77.issues, issueNavLink: sprintData77.issueNavUrl, estimationStatistic: opt_data.estimationStatistic, estimationValue: sprintData77.formatedWorkCompleted, showEpicColumn: opt_data.showEpicColumn, emptyMessage: opt_data.emptySprintMessage});
  }
  output += (opt_data.contents.incompleteIssues.length > 0) ? '<h3>' + soy.$$escapeHtml('Incomplete Issues') + '</h3>' + GH.tpl.reports.scopeBurndownBySprint.renderIssueTable({issues: opt_data.contents.incompleteIssues, issueNavLink: opt_data.contents.incompleteIssuesUrl, estimationStatistic: opt_data.estimationStatistic, estimationValue: opt_data.contents.incompleteIssuesSum.text, showEpicColumn: opt_data.showEpicColumn}) : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderIssueList.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderIssueList';
}


GH.tpl.reports.scopeBurndownBySprint.renderIssueTable = function(opt_data, opt_ignored) {
  return '<div class="ghx-scope-burndown-table-section">' + GH.tpl.reports.issueTable.renderIssueTable(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderIssueTable.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderIssueTable';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints = function(opt_data, opt_ignored) {
  return '<img class="ghx-infographic-trophy" src="' + soy.$$escapeHtml(opt_data.imageURL) + '"><p class="ghx-work-done-message">' + soy.$$escapeHtml(AJS.format('{0,choice,0#All issues are done!|1\x3c All estimated issues are done!}',opt_data.unestimatedIssuesCount)) + ((opt_data.unestimatedIssuesCount) ? ' ' + soy.$$escapeHtml(AJS.format('{0,choice,1#There is 1 unestimated issue.|1\x3cThere are {0} unestimated issues.}',opt_data.unestimatedIssuesCount)) : '') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent = function(opt_data, opt_ignored) {
  return '<h2><span class="aui-icon aui-icon-small aui-iconfont-success"></span> ' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 sprints|1#1 sprint|1\x3c{0,number} sprints} remaining',opt_data.sprintsRemaining)) + '</h2><p>' + soy.$$escapeHtml(opt_data.description) + '</p><table class="ghx-stat-table"><tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.velocity) + '</span></td><td class="ghx-stat-table-label">' + soy.$$escapeHtml('Velocity per sprint') + '</td></tr><tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.workRemaining) + '</span></td><td class="ghx-stat-table-label">' + soy.$$escapeHtml('remaining') + '</td></tr></table><p>' + GH.tpl.reports.scopeBurndownBySprint.renderHelpLink(opt_data) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent';
}


GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2><p>' + soy.$$escapeHtml(opt_data.description) + '</p><p>' + GH.tpl.reports.scopeBurndownBySprint.renderHelpLink(opt_data) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage';
}


GH.tpl.reports.scopeBurndownBySprint.renderHelpLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.helpUrl) + '" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.reports.scopeBurndownBySprint.renderHelpLink.soyTemplateName = 'GH.tpl.reports.scopeBurndownBySprint.renderHelpLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartDialog.js' */
!function(e,t,i,r){function n(e,t){var i=t.formatter.formatFull;return e.startTime&&e.endTime&&(e.formattedStartDate=moment(e.startTime).format(c),e.formattedEndDate=moment(e.endTime).format(c)),e.formattedWorkAtStart=i(e.workAtStart),e.formattedWorkAdded=i(e.workAdded),e.formattedWorkRemoved=i(e.workRemoved),e.formattedWorkCompleted=i(e.workCompleted),e.formattedWorkRemaining=i(e.workRemaining),e}function a(e,t,i){var r="";return e.isForecast&&!e.isActive||"original"===e.sprintId||(r=f.buildBareRestUrl("secure/RapidBoard.jspa?rapidView="+e.rapidViewId+"&view=reporting&chart=sprintRetrospective&sprint="+e.sprintId)),GH.tpl.reports.scopeBurndownBySprint.renderSprintScopeDialogContent({sprint:n(e,t),estimationStatistic:t,url:r,labels:i})}function o(t,i,n,o){if(d()&&i.sprintId===m)s.hide();else{var c=e.select(t);c.classed("active",!0),s=r.create(l,t,function(e,t,r){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.html(a(i,n,o)),r()},{addActiveClass:!1,container:p,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,offsetX:8,hideCallback:function(){c.classed("active",!1)}}),m=i.sprintId,s.show()}return s}function d(){return!!s&&s.is(":visible")}var s,l="scope-by-sprint-dlg",p="#ghx-report-scrollarea > .aui-page-panel",c="LL",m=null,f=require("jira-agile/rapid/ajax");i.preventCloseOnClick(l),GH.Reports.ScopeBurndownBySprintChartDialog={show:o,hide:function(){s&&(s.hide(),m=null)},isVisible:d}}(d3,GH.Reports,GH.InlineDialog,GH.SideInlineDialog);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChart.js' */
!function(t,e,i,n,r,s){"use strict";function a(t){return t.workRemaining-o(t)}function o(t){var e=Math.max(0,t.workAdded-t.workRemoved);return Math.min(t.workRemaining,e)}function l(t){return t.isForecast&&!t.isActive}function c(){var r=function(){return i.floatingBarChart().baselineAccessor(function(t){return t.baseline}).xAccessor(function(t){return t.sprintId}).yAccessor(function(t){return t.baseline+t.workCompleted+a(t)+o(t)}).maxBarWidth(h).extend({emptyBarHeight:i.prop(u),labelAccessor:function(){return function(t){return t.isActive?AJS.format("{0} (active)",t.sprintName):t.sprintName}},isCollapsedBar:function(){return function(t){return!!t.collapsed}},isEmptyBar:function(){var t=this.baselineAccessor(),e=this.yAccessor(),i=this.isCollapsedBar();return function(n){return!i(n)&&e(n)===t(n)}},barHeight:function(){var t=this.baselineAccessor(),e=this.yAccessor(),i=this.yScale(),n=this.isEmptyBar(),r=this.emptyBarHeight();return function(s){return n(s)?r:i(t(s))-i(e(s))}},data:function(){return C.sprints()}}).update(function(t){var e=this.x(),i=this.y(),n=this.isEmptyBar(),r=this.emptyBarHeight();t.selection.attr("transform",function(t,s){var a=i(t,s);return n(t)&&(a-=r),"translate("+e(t,s)+","+a+")"})})},c=function(){var t=i.stack().classPrefix("ghx").showLabels(!0).extend({barWidth:i.prop(),labelAccessor:function(){return function(t){return t[2]||""}},labelFormatter:i.prop()});return t.data.get(function(t){if(!t)return[];var e=o(t),i=a(t),n=this.labelFormatter(),r=[];return r.push([e+i,t.workCompleted,t.workCompleted?"-"+n(t.workCompleted):""]),r.push([e,i,n(i)]),r.push([0,e,e?"+"+n(e):""]),r}),t},f=function(){return i.drawable().extend(i.withDimensions()).enter(function(t){var e=t.selection;e.append("rect").classed("ghx-series-0",!0),e.append("text").classed("ghx-series-label-0 bar-label",!0),e.append("polyline").classed("ghx-bar-underlined",!0)}).update(function(t){var e=this.height(),i=this.width(),n=t.selection;n.selectAll("rect").attr("height",e).attr("width",i),n.selectAll("text").attr("x",i/2).attr("y",e/2).attr("dy","0.45em").text(0),n.selectAll("polyline").attr("points","0,"+e+" "+i+","+e)})},g=function(){var t=e.scale.linear().domain([d,h]).range([3,5]);return i.circlePlot().extend({yRange:function(){var t=this.height();return[0,t]},radiusAccessor:function(){var e=this.width();return function(){return t(e)}}}).elementClass("ghx-ellipsis").data([[0,0],[1,0],[2,0]]).xDomain([-1,3]).yDomain([-1,1])},x=function(){return i.drawable().extend(i.withDimensions()).elementClass("ghx-collapsed-sprint").extend({ellipsisHeight:function(){return.5*this.width()}}).enter(function(t){t.selection.append("text").attr({"text-anchor":"middle",y:-this.ellipsisHeight(),dy:"-.4em"})}).update(function(t){var n=this.width();t.selection.select("text").each(function(t){var r=e.select(this).text(AJS.format("{0,choice,0#0 sprints|1#1 sprint|1\u003c{0,number} sprints} not shown",t));i.utils.wrapText(r,n,!0)}),g().height(-this.ellipsisHeight()).width(n)(t.selection)})},w=function(){return r().elementTag("g").showLabels(!0).update(function(t){var i=this.barWidth(),n=this.barHeight(),r=this.isEmptyBar(),s=this.isCollapsedBar(),a=C.data().estimationStatistic.formatter.formatCompact,o=this.showLabels();t.selection.each(function(t){var l=n(t),h=s(t),d=r(t),u=e.select(this).classed("ghx-prediction",t.isForecast);c().elementClass("ghx-stack").height(l).barWidth(i).showLabels(o).labelFormatter(a).data(h||d?null:t)(u),f().elementClass("ghx-zero-value-sprint").height(l).width(i).data(d?[0]:[])(u),x().width(i).data(h?[t.collapsed]:[])(u)})})},b=i.labelledAxis().height(60).text("Sprints").orient("bottom").axisConstructor(function(){return e.svg.axis().outerTickSize(0)}),v=i.labelledAxis().width(50).orient("left").extend({text:function(){return C.data().estimationStatistic.name}}).axisConstructor(function(){var t=C.data().estimationStatistic.formatter.formatCompact;return e.svg.axis().outerTickSize(0).tickFormat(function(e){return t(Math.abs(e))}).tickValues([0])}),y=i.layerable().addLayer("grid",i.gridLines().orient("left").extend({width:function(){return C.restrictedWidth()}})).addLayer("divider",i.singular().extend(i.withDimensions()).elementTag("line").elementClass("chart-divider").update(function(t){t.selection.attr({x1:C.restrictedWidth(),x2:C.restrictedWidth(),y1:-m,y2:this.height()+m})})).addLayer("border",i.drawable().extend(i.withDimensions()).data([{from:[0,0],to:[1,0]},{from:[1,0],to:[1,1]}]).elementTag("line").update(function(t){var i=e.scale.linear().domain([0,1]).range([0,this.width()]),n=e.scale.linear().domain([0,1]).range([0,this.height()]);t.selection.each(function(t){return e.select(this).attr({x1:i(t.from[0]),y1:n(t.from[1]),x2:i(t.to[0]),y2:n(t.to[1])})})})).addLayer("sprints",w().elementClass("ghx-bar-sprint").dataFilter(function(t){return n.reject(t,l)})).addLayer("forecastSprints",w().elementClass("ghx-bar-sprint").showLabels(!1).dataFilter(function(t){return n.filter(t,function(t){return l(t)&&t.workAtStart>0})})).addLayer("dialogTargets",r().enter(function(t){s.hide(),t.selection.on("click.dialog",function(t){var e=C.data();t.rapidViewId=e.rapidViewId,s.show(this,t,e.estimationStatistic,e.labels)})}).elementClass("ghx-clickable-bar-sprint").dataFilter(function(t){return n.reject(t,l)})),C=i.component().extend(function(){var t=this.data().sprints,e=this.positions().center.width,i=e-p,n=r(),s=n.padding(),a=n.outerPadding(),o=d/(1-s),l=h/(1-s),c=Math.max(Math.min(i/t.length,l),o),u=Math.max(Math.ceil(p/c),Math.ceil((e-l*t.length)/c)),m=Math.floor((e-o*(2*a-s))/o),f=t.length+u-m+1;if(f>1){var g=t[1+f];t=t.slice(),t.splice(1,f,{sprintId:"sprints collapsed",sprintName:"",baseline:Math.min(0,g.baseline),workAtStart:0,workAdded:0,workRemoved:0,workCompleted:0,workRemaining:0,isForecast:!1,isActive:!1,collapsed:f})}var x=this.data(),w=x.getForecast(u),b=t.concat(w);c=e/(b.length+a),x.forecast.forecastError?this.restrictedWidth(c*(t.length+2*a-s)):this.restrictedWidth(c*(t.length+a-s/2)),this.sprints(b)}).extend(i.borderLayout()).extend(i.utils.defaultViewBox).center(y).north(i.withDimensions().height(25)).south(b).west(v).east(i.withDimensions().width(1)).extend({sprints:i.prop([]),restrictedWidth:i.prop(null),xDomain:function(){return n.pluck(this.sprints(),"sprintId")},yDomain:function(){var t=this.sprints(),i=n.min(n.pluck(t,"baseline")),r=e.max(t,function(t){return t.baseline+t.workCompleted+o(t)+a(t)});return[i,r]}}),k=i.singular().extend(i.withDimensions()).elementTag("div").elementClass("ghx-infographic-overlay").update(function(e){var i=C.data();i.forecast.forecastError?e.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicHelpMessage({title:"No forecast available yet",description:i.forecast.forecastError,helpUrl:i.labels.helpUrl})):0===i.forecast.sprintsRemaining?e.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicNoSprints({unestimatedIssuesCount:i.forecast.remainingEstimatableIssueCount,imageURL:AJS.contextPath()+"/download/resources/"+t.getPluginKey()+"/images/trophy.svg"})):e.selection.html(GH.tpl.reports.scopeBurndownBySprint.renderInfographicContent({sprintsRemaining:i.forecast.sprintsRemaining,velocity:i.estimationStatistic.formatter.formatFull(i.forecast.velocity),workRemaining:i.estimationStatistic.formatter.formatFull(i.forecast.workRemaining),description:i.labels.forecastDescription(i.forecast.sprintsRemaining),estimationStatistic:i.estimationStatistic.name,helpUrl:i.labels.helpUrl}));var n=C.height(),r=C.width(),s=C.positions(),a=s.west.width+C.restrictedWidth(),o=r-a,l=s.center.height,c=e.selection.node().offsetHeight,h=e.selection.node().offsetWidth,d=a+o/2,u=s.north.height+l/2;e.selection.style({left:d/r*100+"%",top:u/n*100+"%","margin-left":-h/2+"px","margin-top":-c/2+"px"})}),A=i.component().extend(i.withData()).extend(function(){var t=this.selection(),e=i.singular().elementTag("svg").elementClass("ghx-svg-chart");e(t),C.parent(this)(e.elements()),k.parent(this)(t)});return A}var h=80,d=40,u=25,p=320,m=20;GH.Reports.ScopeBurndownBySprintChart=c}(GH.Util,d3,c3,_,GH.NumberFormat,GH.Reports.ScopeBurndownBySprintChartDialog);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartHowTo.js' */
!function(t,n,e,r){function c(){var c=function(){return n.floatingBarChart().elementClass("ghx-bar-sprint").elementTag("g").yAccessor(function(t){return t[0]+e.reduce(t[1],function(t,n){return t+n},0)}).yDomain([-1,9]).update(function(e){var r=this.barWidth(),c=this.barHeight();e.selection.each(function(e){n.stack().classPrefix("ghx").height(c(e)).extend({barWidth:function(){return r},data:function(){var t=e[1];return[[t[0]+t[1],t[2]],[t[0],t[1]],[0,t[0]]]}})(t.select(this))})})},a=c().data([[0,[0,8,0]],[0,[0,6,2]],[0,[0,4,2]],[0,[0,2,2]],[0,[0,0,2]]]),i=c().data([[2,[0,6,0]],[0,[2,4.5,1.5]],[0,[0,5,1.5]],[2,[0,1.5,1.5]],[2,[0,0,1.5]]]),o=c().data([[0,[0,6,1.5]],[0,[0,4.5,1.5]],[0,[0,3,1.5]],[0,[0,1.5,1.5]],[0,[0,0,1.5]]]).update(function(t){t.selection.classed("ghx-prediction",function(t,n){return n>=2})});return n.component("scopeBurndownBySprintChartHowTo").extend(r.multipleCharts()).extend(function(){this.selection().selectAll(this.chartSelector()).classed("ghx-scope-burndown-chart-svg",!0)}).charts([a,i,o])}r.ScopeBurndownBySprintChartHowTo=c}(d3,c3,_,GH.Reports);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ScopeBurndownBySprintChartLegend.js' */
!function(t,e){"use strict";function n(){function n(t,e,n){return t.append("g").classed(e,!0).append("rect").attr("width","100%").attr("height","100%").classed(n,!0)}function r(t,e,n,r){var s=t.append("g").classed(e,!0);return s.append("rect").classed(n,!0).attr({y:0,width:"100%",height:"50%"}),s.append("rect").classed(r,!0).attr({y:"50%",width:"100%",height:"50%"}),s}var s=function(t){n(t,"ghx-bar-sprint","ghx-series-0")},i=function(t){n(t,"ghx-bar-sprint","ghx-series-1")},a=function(t){n(t,"ghx-bar-sprint","ghx-series-2")},c=function(t){r(t,"ghx-prediction","ghx-series-0","ghx-series-1")};return e.component("scopeBurndownBySprintChartLegend").extend(t()).charts([s,c,i,a])}GH.Reports.ScopeBurndownBySprintChartLegend=n}(GH.Reports.multipleCharts,c3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChart.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart",["require"],function(t){"use strict";function e(){}var n,r,a=t("underscore"),i=t("jira-agile/d3"),o=t("jira-agile/rapid/global-events");return o.on("pre-initialization",function(){n=c3,r=GH.FlotChartUtils}),e.prototype={hide:function(t){GH.Reports.BurnupChartDialog.hide(),t.html("")},show:function(t,e){e.html("");var r=GH.Reports.BurnupChartScrubber();e=e.append("svg").attr("height",parseInt(e.style("height"))).attr("width",parseInt(e.style("width")));var o=[t.start,t.end],c=[i.min(t.scope.concat(t.work),function(t){return t.value}),i.max([{value:8}].concat(t.scope.concat(t.work)),function(t){return t.value})],s=n.component().extend(function(){r.enableScrubber(),GH.Reports.BurnupChartDialog.hide()}).extend(n.borderLayout()).extend(n.utils.defaultViewBox).extend({xDomain:function(){var t=o;return a.each(t,function(t){n.checkIsNumber(t)}),t},yDomain:function(){var t=c;return a.each(t,function(t){n.checkIsNumber(t)}),t},clusters:n.prop()}).xScaleConstructor(i.time.scale).yScaleConstructor(i.scale.linear),u=n.labelledAxis().axisConstructor(function(){return i.svg.axis().tickFormat(function(e){return t.formatShortDate(e)})}).extend(function(){this.selection().selectAll("g.tick").filter(function(){return this.getAttribute("transform").indexOf("translate(-")!==-1}).remove()}).height(50).text("Time").orient("bottom"),l=this.calculateYTicks(c[1],t.statisticField),d=n.labelledAxis().axisConstructor(function(){return i.svg.axis().tickValues(l.tickValues).tickFormat(t.formatStatistic).ticks(8)}).width(60).text(t.statisticField.name).orient("left"),h=n.fillWithRect().elementClass("ghx-dragging"),p=this.buildGuideline(t),f=n.component().extend(n.interactive().domContext(AJS.$("#ghx-chart-group")).region(h)).extend(n.layerable());t.sprintCompleted||f.addLayer("today-line",n.linePlot().extend({data:function(){return[[t.now,c[0]],[t.now,c[1]]]}}).elementClass("today-line")).addLayer("today-line-label",n.label().extend({width:function(){return 2*s.xScale()(t.now)},height:function(){return s.yScale()(c[1])},orient:function(){return"bottom"},text:function(){return "Today"}})),f.extend(r).addLayer("grid",n.gridLines().orient("left")).addLayer("non-work-days",n.areaPlot().extend({data:function(){return s.data().nonWorkPeriods.map(function(t){return[[t.start,c[0]],[t.start,c[1]],[t.end,c[1]],[t.end,c[0]]]}).reduce(function(t,e){return t.concat(e)},[])}}).elementClass("non-working-days")).addLayer("guideline",n.linePlot().extend({data:function(){return p}}).elementClass("guide-line")).addLayer("scope-projection",n.linePlot().extend({data:function(){var e=s.data().scope[t.scope.length-1];return[[e.timestamp,e.value],[t.end,e.value]]}}).elementClass("scope-projection-line")).addLayer("scope",this.steppedLinePlot().extend({data:function(){return s.data().scope.map(function(t){return[t.timestamp,t.value]})}}).elementClass("scope-line")).addLayer("work",this.steppedLinePlot().extend({data:function(){return s.data().work.map(function(t){return[t.timestamp,t.value]})}}).elementClass("work-line")).addLayer("filler",h).addLayer("scope-marker",n.circlePlot().xAccessor(function(t){return t.timestamp}).yAccessor(function(t){return t.value}).extend({data:function(){return s.data().scope.slice(1,-1)}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.BurnupChartDialog.show(this,t,e),r.hideScrubber()})}).elementClass("scope-line-marker")).addLayer("work-marker",n.circlePlot().xAccessor(function(t){return t.timestamp}).yAccessor(function(t){return t.value}).extend({data:function(){return s.data().work.slice(1,-1)}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.BurnupChartDialog.show(this,t,e),r.hideScrubber()})}).elementClass("work-line-marker")),s=s.center(f).north(n.withDimensions().height(20)).south(u).east(n.withDimensions().width(40)).west(d),s.data(t),s(e)},buildGuideline:function(t){var e=[[t.start,0]],n=t.scope[t.scope.length-1].value,r=t.end-t.start;t.nonWorkPeriods.forEach(function(t){r-=t.end-t.start});var a=0;return t.nonWorkPeriods.forEach(function(i){var o=i.start-t.start;o-=a;var c=Math.min(o/r,1);e.push([i.start,c*n]),e.push([i.end,c*n]),a+=i.end-i.start}),e.push([t.end,n]),e},steppedLinePlot:function(){return n.component("steppedlinePlot").extend(n.linePlot()).update(function(t){var e=this.lineConstructor()().x(this.x()).y(this.y());e.interpolate("step-after"),t.selection.attr("d",e(this.data())).attr("stroke","black").attr("fill","none")})},calculateYTicks:function(t,e){var n,a=r.calculateYAxis(t,e),i=a.tickSize||a.minTickSize;if(i){n=[];for(var o=0;o<=t;o+=i)n.push(o)}return{tickValues:n}}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChartLegend.js' */
!function(n,e){"use strict";function t(){function t(n,e,t){return n.append("g").classed(e,!0).append("line").attr("stroke-linecap","round").attr("x1","0").attr("y1","20").attr("x2","20").attr("y2","20").attr("transform","translate(-10,3), rotate(-45)").classed(t,!0)}var r=function(n){t(n,"ghx-burnup-line-legend","completed-work")},u=function(n){t(n,"ghx-burnup-line-legend","guideline")},o=function(n){t(n,"ghx-burnup-line-legend","scope")},a=function(n){t(n,"ghx-burnup-line-legend","scope-projection")};return e.component("sprintBurnupChartLegend").extend(n()).charts([o,a,r,u])}GH.Reports.BurnupChartLegend=t}(GH.Reports.multipleCharts,c3);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupTransformer.js' */
!function(e,t,n,r,a,s,i,u,o,d,p){"use strict";function c(e){var n=m(e),r=S(e,n);return e.chartData={now:e.now,start:e.startTime,startKeys:r.startKeys,end:n,sprintCompleted:!!e.completeTime,endKeys:r.endKeys,nonWorkPeriods:x(e.workRateData,e.startTime,n),scope:r.scope,work:r.done,statisticField:e.statisticField,rapidViewId:e.rapidViewId,estimatedIssueEvents:r.scope.filter(function(e){return e.value>0}).length,issueToSummary:e.issueToSummary},e.chartData.formatDate=function(e){return t.utc(e).format("lll")},e.chartData.formatShortDate=function(n){return t.duration(t.utc(e.chartData.end).diff(e.chartData.start)).years()>0?t.utc(n).format("MMM YYYY"):t.utc(n).format("MMM D")},e.chartData.formatStatistic=function(t){return p.renderStatisticText(t,!1,e.chartData.statisticField.renderer)},e.chartData.formatEventType=function(e){switch(e){case"estimate update":return "Estimate updated";case"issue done":return "Issue completed";case"issue not done":return "Issue re-opened";case"issue removed":return "Removed from sprint";case"issue added":return "Added to sprint";case"start event":return "Sprint started";case"end event":return "Sprint finished";default:return e}},e}function m(e){return e.completeTime?e.completeTime:e.now>e.endTime?e.now:e.endTime}function f(e,t){var n=[],r=[];return e.forEach(function(e){var a=t[e.key];a||(a={key:e.key,prevEstimate:0,estimate:0,inSprint:!1,done:!1},t[e.key]=a);var s=!1,i=!1;switch(e.type){case"estimate update":a.estimate!==e.newEstimate&&(a.prevEstimate=a.estimate,a.estimate=e.newEstimate,s=a.inSprint&&!a.isExcluded,i=a.inSprint&&!a.isExcluded&&a.done);break;case"issue done":a.done||(a.done=!0,i=a.inSprint&&!a.isExcluded);break;case"issue not done":a.done&&(a.done=!1,a.isExcluded?(e.isInclusion=!0,a.isExcluded=!1,s=a.inSprint):i=a.inSprint);break;case"issue removed":a.inSprint&&(a.inSprint=!1,s=!a.isExcluded,i=!a.isExcluded&&a.done);break;case"issue added":a.inSprint||(a.inSprint=!0,s=!0,i=a.done)}s&&n.push(v("scope",e.timestamp,y(t,!1),e,a)),i&&r.push(v("done",e.timestamp,y(t,!0),e,a))}),{scope:n,done:r}}function h(e,t,n){return v(e,t,n,{type:"start event"},{})}function l(e,t,n){return v(e,t,n,{type:"end event"},{})}function v(e,t,n,r,a){r=r||{},a=a||{};var s=0,i=0;return"issue removed"===r.type?(s=0,i=a.estimate):"issue added"===r.type?(s=a.estimate,i=0):"issue not done"===r.type?r.isInclusion?(s=a.estimate,i=0):(s=0,i=a.estimate):(s=a.estimate,i=a.prevEstimate),{timestamp:t,value:n,change:{type:r.type,line:e,key:a.key,fromValue:i,toValue:s}}}function y(e,t){var n=0;for(var r in e)if(e.hasOwnProperty(r)){var a=e[r];a.inSprint&&!a.isExcluded&&(t&&a.done||!t)&&(n+=a.estimate)}return n}function S(e,t){var n=g(e.changes).sort(function(e,t){return e.timestamp>t.timestamp?1:e.timestamp===t.timestamp?0:-1}),r=parseInt(e.startTime),a=e.now>t?t:e.now,s={};f(n.filter(function(e){return e.timestamp<=r}),s);for(var i in s)if(s.hasOwnProperty(i)){var u=s[i];u.done&&u.inSprint&&(u.isExcluded=!0)}var o=k(s),d=[h("scope",r,y(s,!1))],p=[h("done",r,0,"start event")],c=f(n.filter(function(e){return e.timestamp>r&&e.timestamp<=a}),s),m=k(s);return d=d.concat(c.scope),p=p.concat(c.done),d.push(l("scope",a,d[d.length-1].value)),p.push(l("done",a,p[p.length-1].value)),{scope:d,done:p,startKeys:o,endKeys:m}}function k(e){return Object.keys(e).filter(function(t){var n=e[t];return n.inSprint&&!n.isExcluded}).sort(w)}function w(e,t){if(e===t)return 0;var n=/(\w+)-(\d+)/,r=n.exec(e);if(!r)return-1;var a=n.exec(t);if(!a)return 1;var s=r[1],i=a[1];if(s!==i)return s>i?1:-1;var u=parseInt(r[2],10),o=parseInt(a[2],10);return u===o?0:u>o?1:-1}function g(e){var t=[],n=function(e){e.column&&(e.column.notDone?t.push({type:"issue not done",key:e.key,timestamp:parseInt(r)}):e.column.notDone||t.push({type:"issue done",key:e.key,timestamp:parseInt(r)})),e.statC&&e.statC.newValue&&t.push({type:"estimate update",key:e.key,timestamp:parseInt(r),newEstimate:e.statC.newValue>0?e.statC.newValue:0}),e.added===!1&&t.push({type:"issue removed",key:e.key,timestamp:parseInt(r)}),e.added===!0&&t.push({type:"issue added",key:e.key,timestamp:parseInt(r)})};for(var r in e)e.hasOwnProperty(r)&&e[r].forEach(n);return t}function x(e,t,n){var r=[];return e.rates.forEach(function(e){e.rate<1&&e.start<=n&&e.end>=t&&r.push({start:e.start<t?t:e.start,end:e.end>n?n:e.end})}),r}var E={getBurnupModelFromScopeBurndownModel:c};GH.Reports=GH.Reports||{},GH.Reports.SprintBurnupTransformer=E}(_,moment,AJS.$,d3,GH.Ajax,GH.RapidViewConfig,GH.NumberFormat,GH.TimeFormat,GH.Util,GH.UrlFormat,GH.ChartUtils);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChart.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChart=function(){"use strict";var e=c3.component().extend(function(){this.clusters(e.data().getClusteredIssueSeries(20,this.xScale(),this.yScale())),e.data().issues.length>0?o.enableScrubber():o.disableScrubber(),GH.Reports.ControlChartDialog.hide()}).extend(c3.borderLayout()).extend(c3.utils.defaultViewBox).extend({xDomain:function(){var t=e.data().bounds.x;return _.each(t,function(e){c3.checkIsNumber(e)}),t},yDomain:function(){var t=e.data().bounds.y;return _.each(t,function(e){c3.checkIsNumber(e)}),t},clusters:c3.prop()}).xScaleConstructor(d3.time.scale).yScaleConstructor(function(){return e.data().bounds.y[1]<30?d3.scale.linear():d3.scale.pow().exponent(1/3)}),t=c3.labelledAxis().axisConstructor(function(){return d3.svg.axis().tickFormat(function(t){var n=moment(e.data().bounds.x[1]).diff(e.data().bounds.x[0],"days");return moment(t).format(n<2?"LLL":"LL")})}).extend(function(){this.selection().selectAll("g.tick").filter(function(){return this.getAttribute("transform").indexOf("translate(-")!==-1}).remove()}).height(50).text("Issue Transition Date").orient("bottom"),n=c3.labelledAxis().axisConstructor(function(){return d3.svg.axis().tickFormat(function(e){return GH.NumberFormat.format(e)})}).width(60).text("Elapsed time (days)").orient("left"),r=function(){return c3.circlePlot().xAccessor(function(e){return e.point[0]}).yAccessor(function(e){return e.point[1]})},a=d3.scale.log().domain([2,100]).range([6,15]).clamp(!0),i=c3.fillWithRect().elementClass("ghx-dragging"),o=GH.Reports.ControlChartScrubber(),s=c3.component().extend(c3.interactive().domContext(AJS.$("#ghx-chart-group")).region(i)).extend(c3.layerable()).extend(o).clipped(!0).addLayer("standard-deviation",c3.deviationPlot().extend({data:function(){return e.data().series.standardDeviationArea}}).elementClass("standard-deviation")).addLayer("grid",c3.gridLines().orient("left")).addLayer("mean",c3.linePlot().extend({data:function(){return e.data().series.meanLine}}).elementClass("control-chart-mean")).addLayer("aggregate-mean",c3.linePlot().extend({data:function(){return e.data().series.rollingAverageLine}}).elementClass("control-chart-aggregate-mean")).addLayer("filler",i).addLayer("issues",r().extend({data:function(){return e.clusters().unclustered}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.ControlChartDialog.show(this,e.issue),o.hideScrubber()})}).dataKey(function(e){return e.issue.key}).elementClass("issue")).addLayer("issue-clusters",r().extend({data:function(){return e.clusters().clustered}}).enter(function(e){e.selection.on("click.dialog",function(e){GH.Reports.ControlChartDialog.show(this,e.issues),o.hideScrubber()})}).dataKey(function(e){return e.point[0]}).elementClass("cluster").radiusAccessor(function(e){return a(e.size)}));return e.center(s).north(c3.withDimensions().height(10)).south(t).west(n)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartHowTo.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChartHowTo=function(){var e=_.range(8),t=c3.circlePlot().data(_.zip(e,[0,2,1,1.5,2,0,11,1.2])).xDomain([-1,8]).yDomain([-2,14]).elementClass("issue").update(function(e){e.selection.each(function(e){11===e[1]&&d3.select(this).classed("active",!0)})}),a=c3.linePlot().data(_.zip(e,[7,5,5.5,3.5,4,3,3,2])).yDomain([0,10]).elementClass("control-chart-aggregate-mean"),n=[4,6,3,4,5,4,4.5,4],o=[4,4,3.5,2,2,1.5,1,1],l=c3.layerable().xDomain([0,e.length-1]).yDomain([0,10]).addLayer("standard-deviation",c3.deviationPlot().data(_.zip(e,n,o)).elementClass("standard-deviation")).addLayer("rolling-average",c3.linePlot().data(_.zip(e,n)).elementClass("control-chart-aggregate-mean"));return c3.component("controlChartHowTo").extend(GH.Reports.multipleCharts()).extend(function(){this.selection().selectAll(this.chartSelector()).classed("ghx-control-chart-svg",!0)}).charts([t,a,l])};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartLegend.js' */
GH.Reports=GH.Reports||{},GH.Reports.controlChartLegend=function(){var t=[[0,0],[1,1]],e=function(t){t.append("circle").attr("cx","50%").attr("cy","50%").attr("r",4).classed("issue",!0)},a=function(t){t.append("circle").attr("cx","50%").attr("cy","50%").attr("r",9).classed("cluster",!0)},r=c3.linePlot().data(t).elementClass("control-chart-mean"),n=c3.linePlot().data(t).elementClass("control-chart-aggregate-mean"),c=function(t){t.append("rect").attr("width","100%").attr("height","100%").classed("standard-deviation",!0)};return c3.component("controlChartLegend").extend(GH.Reports.multipleCharts()).charts([e,a,r,n,c])};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsModel.js' */
!function(){function n(){}var i=!1;n.prototype={includeNonWorkingDays:i,resetToDefaults:function(){return this.includeNonWorkingDays=i,this},fromNormalized:function(n){return"includeNonWorkingDays"in n?this.includeNonWorkingDays=n.includeNonWorkingDays:this.resetToDefaults(),this},toNormalized:function(){var n={};return this.includeNonWorkingDays&&(n.includeNonWorkingDays=this.includeNonWorkingDays),n},isDefault:function(){return this.includeNonWorkingDays===i}},GH.Reports.ControlChartViewingOptionsModel=n}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsModel.js' */
!function(e){function t(){}t.prototype={available:null,selected:null,setAvailable:function(e){return this.available=e,this.fromNormalized(this.selected),this},getDefaults:function(){if(!this.available)return null;var t=e.pluck(this.available.columns,"id"),i=t.length<3?[e.last(t)]:t.slice(1,-1);return{columnIds:i,swimlaneIds:e.pluck(this.available.swimlanes,"id"),quickFilterIds:[]}},resetToDefaults:function(){return this.selected=this.getDefaults(),this},fromNormalized:function(t){t=t?e.pick(t,"columnIds","swimlaneIds","quickFilterIds"):{};var i={columnIds:"columns",swimlaneIds:"swimlanes",quickFilterIds:"quickFilters"},l=this.available;return l&&e.each(t,function(s,n){var a=e.pluck(l[i[n]],"id"),u=e.intersection(t[n],a);u.length?t[n]=u:delete t[n]}),this.selected=e.defaults(t,this.getDefaults()),this},toNormalized:function(){function t(t){e.isEqual(l[t].sort(),i[t].sort())||(s[t]=l[t])}var i=this.getDefaults(),l=this.selected,s={};return i?(t("columnIds"),t("swimlaneIds"),t("quickFilterIds"),s):e.extend(s,l)},isDefault:function(){return e.isEmpty(this.toNormalized())}},GH.Reports.ControlChartRefinementsModel=t}(_);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service",["require"],function(e){"use strict";function t(e){var t={url:"/rapid/charts/controlchart.json",data:e};return T.get(t,"rapidChartData")}function a(e,t,a,n){var r=-1,i=0,m=[];return g.each(a,function(a){var o=e.leaveTimes[a];if(o!==t.currentTime){var s=n?e.totalTime[a]:e.workingTime[a];i+=s,m.push({name:t.columns[a].name,duration:s}),o>r&&(r=o)}}),r===-1?null:{key:e.key,summary:e.summary,endTime:r,duration:i,columns:m}}function n(e,t){var n=[];t=t||{},g.each(e.columns,function(e,a){g.contains(t.refinements.selected.columnIds,e.id)&&n.push(a)});var r=g.compact(g.map(e.issues,function(r){return a(r,e,n,t.viewingOptions.includeNonWorkingDays)}));return g.sortBy(r,"endTime")}function r(e,t,a){var n=0,r=0;g.each(t,function(t){a&&(t=a(t)),r=t-e,n+=r*r});var i=n/(t.length>0?t.length:1);return Math.sqrt(i)}function i(e,t,a,n,r){var i=new h(e,t,a,n,r);return{clustered:g.filter(i,function(e){return e.cluster}),unclustered:g.reject(i,function(e){return e.cluster})}}function m(e,t,a){var n=5,i=.2,m={rollingAverageLine:[],standardDeviationArea:[],rollingAverageWindow:0,maxStandardDeviation:0};if(!t.length)return m;var o=Math.max(n,t.length*i),s=Math.floor((o-1)/2);m.rollingAverageWindow=2*s+1;var u=g.indexOf(e,t[0]),l=t[0].endTime>a.timeFrameTimes.from?Math.max(0,u-1):u,d=g.last(t).endTime<a.timeFrameTimes.to?Math.min(e.length,u+t.length+1):u+t.length,c=e.slice(l,d);g.each(c,function(t,a){var n=Math.max(0,l+a-s),i=Math.min(e.length,l+a+s+1),o=e.slice(n,i),u=v.mean(o,D),d=u/p,c=r(u,o,D)/p;m.rollingAverageLine.push([t.endTime,d]),m.standardDeviationArea.push([t.endTime,d,c]),m.maxStandardDeviation=Math.max(m.maxStandardDeviation,d+c)});var h=g.last(m.rollingAverageLine),f=g.last(m.standardDeviationArea);return h[0]<a.timeFrameTimes.to&&(m.rollingAverageLine.push([a.timeFrameTimes.to,h[1]]),m.standardDeviationArea.push([a.timeFrameTimes.to,f[1],f[2]])),m}function o(e,t){return e/=p,[[t.timeFrameTimes.from,e],[t.timeFrameTimes.to,e]]}function s(e,t){return g.filter(e,function(e){return t.timeFrameTimes.from<=e.endTime&&e.endTime<=t.timeFrameTimes.to})}function u(e,t){return{mean:v.mean(e,D),median:v.median(e,D),min:v.min(e,D),max:v.max(e,D),rollingAverageWindow:t}}function l(e){return g.map(e,function(e){return[e.endTime,e.duration/p]})}function d(e,t,a){var n=Math.ceil(v.max(e,D)/p),r=Math.max(n,t),i=1.1*r;return{x:[a.timeFrameTimes.from,a.timeFrameTimes.to],y:[0,i]}}function c(){}var h,g=e("underscore"),v=e("jira-agile/d3"),f=e("jira-agile/rapid/global-events"),T=e("jira-agile/rapid/ajax");f.on("pre-initialization",function(){h=clusterVectors});var p=864e5,D=function(e){return e.duration};return c._calculateRollingSeries=m,c.prototype={get:function(e,t){return t=t||{},this._getData(e,t).andThen(function(e){var a=n(e,t),r=a.length?a[0].endTime:e.currentTime;t.timeFrame=t.timeFrame.clone(),t.timeFrame.setBounds(new Date(r),new Date(e.currentTime));var c=t.timeFrame.getTimeFrameDates();t.timeFrameTimes={from:c.fromDate.getTime(),to:c.toDate.getTime()};var h=s(a,t),g=m(a,h,t),v=u(h,g.rollingAverageWindow),f=l(h);return{issues:h,series:{meanLine:o(v.mean||0,t),rollingAverageLine:g.rollingAverageLine,standardDeviationArea:g.standardDeviationArea},stats:v,bounds:d(h,g.maxStandardDeviation,t),earliestTime:r,currentTime:e.currentTime,getClusteredIssueSeries:function(e,t,a){return i(f,h,e,t,a)}}})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_getData:function(e,a){var n={rapidViewId:e,swimlaneId:a.refinements.selected.swimlaneIds,quickFilterId:a.refinements.selected.quickFilterIds};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&g.isEqual(this._dataRequestParams,n)||(this._dataRequestParams=n,this._dataPromise=t(n)),this._dataPromise}},c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller",["require"],function(e){var t,i,r,n,a,o,l,s={},d=e("underscore"),c=e("jira-agile/rapid/global-events"),u=e("jira/analytics/web-client"),m=e("jira-agile/rapid/analytics-tracker"),p=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view"),f=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service"),g=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller"),h=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-viewing-options-controller"),F=new f;return c.on("pre-initialization",function(){t=GH.Reports.ChartTimeFrameModel,i=GH.Reports.ControlChartRefinementsModel,r=GH.Reports.ControlChartViewingOptionsModel,n=GH.ChartTimeFrames,a=GH.PromiseKeeper,o=GH.RapidBoard.State,l=GH.RapidViewConfig}),s.id="controlChart",s.SETTINGS_KEY="chart.config.controlChart",s.displayed=!1,s.rapidViewData=null,s.initPhasePromise=null,s.filterOptions=null,s.firstTimeLoadingData=!0,s.analytics=new m("gh.report.controlChart"),s.setRapidView=function(e){s.rapidViewData=e||{}},s.update=function(){s.saveFilterOptions(),o.pushState(),s.loadAndProcess(),s.fireQuickFilterToggledEvent()},s.fireQuickFilterToggledEvent=function(){var e=s.getFilterOptions(),t=e.refinements.selected.quickFilterIds,i=e.refinements.available.quickFilters.filter(function(e){return t.indexOf(e.id)>-1}).map(function(e){return e.query});i.length>0&&u.sendTrackEvent({source:"controlChartScreen",actionSubject:"quickFilter",actionSubjectId:"applyQuickfilter",action:"applied",attributes:{boardId:s.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),quickFiltersAppliedCount:i.length,onlyMyIssuesQuickFilterApplied:i.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY)>-1,recentlyUpdatedQuickFilterApplied:i.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY)>-1,customQuickFilterApplied:i.some(function(e){return e!==GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY&&e!==GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY})}})},s.show=function(){var e=s,t=e.getFilterOptions();e.initPhasePromise||(e.initPhasePromise=l.fetchConfiguration(e.rapidViewData.id).done(function(e){t.refinements.setAvailable(d.pick(e,"columns","swimlanes","quickFilters"))})),e._dataPromiseKeeper=new a,e.initPhasePromise.done(function(){e.displayed=!0;var i=(s.getFilterOptions(),"custom"===l.currentData.data.swimlaneStrategy);i||(t.refinements.selected.swimlaneIds=d.pluck(t.refinements.available.swimlanes,"id")),o.pushState(),p.init(),g.start(t.refinements),h.start(t.viewingOptions),s.loadAndProcess();var r="show."+(s.rapidViewData.sprintSupportEnabled?"scrum":"kanban");s.analytics.trigger(r)})},s.hide=function(){s.displayed=!1,s._dataPromiseKeeper&&s._dataPromiseKeeper.reset(),p.destroy(),F.clearCache()},s.loadAndProcess=function(){p.showSpinner();var e=s.getFilterOptions(),t=F.get(s.rapidViewData.id,e);return s._dataPromiseKeeper.add(t).done(function(t){s.displayed&&(t.issues.length>0?(p.hideBlankState(),u.sendTrackEvent({source:"controlChartScreen",action:"viewed",actionSubject:"report",actionSubjectId:"controlChart",attributes:{boardId:s.rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile",appliedColumns:e.refinements.selected.columnIds.length,totalColumns:e.refinements.available.columns.length,quickfiltersAppliedCount:e.refinements.selected.quickFilterIds.length,swimlanesAppliedCount:e.refinements.selected.swimlaneIds.length}})):(p.showBlankState(e),s.analytics.trigger("blank")),s.processChartData(t))}).always(function(e){"abort"!==e&&p.hideSpinner()})},s.getFilterOptions=function(){if(!s.filterOptions){var e=o.getBoardSetting(o.getRapidViewId(),s.SETTINGS_KEY,{});s.filterOptions={timeFrame:(new t).fromNormalized(e),refinements:(new i).fromNormalized(e),viewingOptions:(new r).fromNormalized(e)}}return s.filterOptions},s.saveFilterOptions=function(){o.setBoardSetting(s.SETTINGS_KEY,s.getNormalizedFromInternal())},s.processChartData=function(e){var t=new Date(e.earliestTime),i=new Date(e.currentTime),r=s.getFilterOptions();if(r.timeFrame.setBounds(t,i),s.firstTimeLoadingData){var a=(i-t)/n.day;s.firstTimeLoadingData=!1,r.timeFrame.isDefault()&&a<90&&(r.timeFrame.setAllTime(),o.pushState())}p.render(e,r.timeFrame)},s.isApplicable=function(e){return!o.isAgilityBoard()},s.getNormalizedFromInternal=function(){var e=s.getFilterOptions();return d.extend({chart:s.id},e.timeFrame.toNormalized(),e.refinements.toNormalized(),e.viewingOptions.toNormalized())},s.updateInternalFromNormalized=function(e){var t=s.getFilterOptions();t.timeFrame.fromNormalized(e),t.refinements.fromNormalized(e),t.viewingOptions.fromNormalized(e),s.saveFilterOptions()},s.toUrl=function(e){return{days:e.days,from:e.from,to:e.to,column:e.columnIds,swimlane:e.swimlaneIds,quickfilter:e.quickFilterIds,nwd:e.includeNonWorkingDays}},s.getNormalizedFromUrl=function(e){function t(e){return d.isArray(e)?d.map(e,Number):[Number(e)]}function i(e){return e===(!0).toString()}var r={};return"days"in e&&(r.days=isNaN(e.days)?e.days:Number(e.days)),"to"in e&&(r.to=e.to),"from"in e&&(r.from=e.from),"column"in e&&(r.columnIds=t(e.column)),"swimlane"in e&&(r.swimlaneIds=t(e.swimlane)),"quickfilter"in e&&(r.quickFilterIds=t(e.quickfilter)),"nwd"in e&&(r.includeNonWorkingDays=i(e.nwd)),r},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartView.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view",["require"],function(e){var t,r,a,n,o,i,s,l,d,m,c,u={},h=e("jquery"),f=e("jira-agile/d3"),g=e("jira/moment"),p=e("jira/analytics/web-client"),D=e("jira-agile/rapid/global-events");return D.on("pre-initialization",function(){t=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller"),i=e("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller"),r=GH.ChartView,a=GH.Reports.controlChart,n=GH.Reports.controlChartHowTo,o=GH.Reports.controlChartLegend,s=GH.Layout,l=GH.RapidViewConfig,d=GH.TimeFormat,m=GH.NumberFormat,c=GH.ChartTimeFrames}),u.$timeWindowSelect=null,u.$fromDateInput=null,u.$toDateInput=null,u.$timeFrameResetLink=null,u.ControlChart=null,u.bindingToModel=!1,u._firstRender=null,u.init=function(){u._firstRender=!0;var e=l.currentData.data.swimlaneStrategy;r.getChartContentElem(!0).html(GH.tpl.reports.controlChart.renderChartBody({shouldShowSwimlaneRefine:"custom"===e})),r.getChartLegendD3(!0).html(GH.tpl.reports.controlChart.renderLegend()),h("#ghx-chart-header-secondary .ghx-chart-legend").show();var t=new n;t(f.select(".ghx-group-how"));var i=new o;i(f.select(".ghx-chart-legend")),u.renderControls(),u.renderChartSelector(),u.ControlChart=new a,u.bindToWindowResize()},u.destroy=function(){u.unbindToWindowResize()},u.render=function(e,t){u.bindModelToView(e,t),u._firstRender||r.showChartUpdatedToast(),u._firstRender=!1},u.renderChart=function(){u.ControlChart(f.select("#control-chart .ghx-svg-chart"))},u.renderChartSelector=function(){r.getChartSelector(!0).html(GH.tpl.reports.controlChart.renderChartSelector())},u.bindModelToChartHeader=function(e,t){var a=t.getTimeFrameDates(),n="LL",o=GH.tpl.reports.controlChart.renderChartTimeWindow({fromDate:g(a.fromDate).format(n),toDate:g(a.toDate).format(n),timeFrame:t.timeFrame});h(".js-chart-time-window").text(o);var i=0===e.issues.length?"":GH.tpl.reports.controlChart.renderChartSnapshots({mean:d.formatSensibleShortDuration(e.stats.mean),median:d.formatSensibleShortDuration(e.stats.median),min:d.formatSensibleShortDuration(e.stats.min),max:d.formatSensibleShortDuration(e.stats.max),issueCount:m.format(e.issues.length)});r.getChartSnapshot(!0).html(i);var s=h(".js-chart-legend-rollingaveragewindow");e.stats.rollingAverageWindow?s.text(AJS.format("{0,number} issue window",e.stats.rollingAverageWindow)):s.text("Not available")},u.bindModelToControls=function(e){u.bindingToModel=!0;var t=e.getTimeFrameDates(),r=u.$timeFrameResetLink;u.$timeWindowSelect.val(e.getTimeFrame()).trigger("change"),u.updateCustomDatesFields(t.fromDate,t.toDate),u.validateCustomDates(),e.isDefault()?r.attr("aria-disabled","true").attr("title","Time scale is currently using default settings"):r.removeAttr("aria-disabled title"),u.bindingToModel=!1},u.bindModelToChart=function(e){u.ControlChart.data(e),u.renderChart()},u.bindModelToView=function(e,t){u.bindModelToChart(e),u.bindModelToChartHeader(e,t),u.bindModelToControls(t)},u.bindToWindowResize=function(){s.bindDelayedWindowResize(),h(GH).bind(s.EVENT_DELAYED_RESIZE+"."+t.id,function(){u.renderChart()})},u.unbindToWindowResize=function(){h(GH).unbind(s.EVENT_DELAYED_RESIZE+"."+t.id)},u.showBlankState=function(e){var t=h(GH.tpl.reports.controlChart.renderBlankStateMessage({canResetRefinements:!e.timeFrame.isDefault()||!e.refinements.isDefault()}));t.find(".js-options-reset").on("click",function(e){u.resetDefaultTimeWindow(e),i.resetToDefaults()}),r.showBlankStateMessage(t)},u.hideBlankState=function(){r.hideBlankStateMessage()},u.showSpinner=function(){r.showSpinner()},u.hideSpinner=function(){r.hideSpinner()},u.handleTimeWindowChanged=function(e){if(!u.bindingToModel){var r=u.$timeWindowSelect.val();if("custom"===r){var a=u.getCustomDates();t.getFilterOptions().timeFrame.setSimpleDates(a.fromDate,a.toDate)}else t.getFilterOptions().timeFrame.setDays(+r);t.update(),p.sendUIEvent({source:"controlChartScreen",actionSubject:"select",actionSubjectId:"timeWindow",action:"changed"})}},u.renderControls=function(){Calendar.setup({firstDay:0,inputField:"js-option-timeframe-custom-from",button:"js-option-timeframe-custom-from_trigger_c",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:d.dateFormat,useISO8601WeekNumbers:d.useISO8601WeekNumbers,showsTime:!1}),Calendar.setup({firstDay:0,inputField:"js-option-timeframe-custom-to",button:"js-option-timeframe-custom-to_trigger_c",align:"Tl",singleClick:!0,cache:!1,positionStyle:"fixed",ifFormat:d.dateFormat,useISO8601WeekNumbers:d.useISO8601WeekNumbers,showsTime:!1}),u.$timeWindowSelect=h("#js-option-timeframe"),u.$fromDateInput=h("#js-option-timeframe-custom-from"),u.$toDateInput=h("#js-option-timeframe-custom-to"),u.$timeFrameResetLink=h("#js-option-timeframe-reset"),u.$timeWindowSelect.change(u.handleTimeWindowChanged),u.$fromDateInput.change(u.handleCustomDateSelected),u.$toDateInput.change(u.handleCustomDateSelected),u.$timeFrameResetLink.click(u.resetDefaultTimeWindow)},u.handleCustomDateSelected=function(){if(!u.bindingToModel){if(u.validateCustomDates()){u.$timeWindowSelect.val("custom");var e=u.getCustomDates();t.getFilterOptions().timeFrame.setSimpleDates(e.fromDate,e.toDate),t.update()}p.sendUIEvent({source:"controlChartScreen",actionSubject:"input",actionSubjectId:"date",action:"changed"})}},u.getCustomDates=function(){var e=u.$fromDateInput.val(),t=u.$toDateInput.val();return{fromDate:Date.parseDate(e,d.dateFormat),toDate:Date.parseDate(t,d.dateFormat),fromText:e,toText:t}},u.updateCustomDatesFields=function(e,t){u.$fromDateInput.val(e.print(d.dateFormat)),u.$toDateInput.val(t.print(d.dateFormat))},u.resetDefaultTimeWindow=function(e){u.bindingToModel||(t.getFilterOptions().timeFrame.resetToDefault(),t.update(),e.preventDefault())},u.validateCustomDates=function(){var e=u.getCustomDates(),t=!0,r="";return e.fromDate&&e.toDate&&c.isValidDate(e.fromText)&&c.isValidDate(e.toText)?e.fromDate>e.toDate&&(r="From-date must be before to-date",t=!1):(r=AJS.format("Date format should be as follows: {0}",c.getDateAsText(new Date)),t=!1),u.setTimeFrameError(r),t},u.setTimeFrameError=function(e){h(".js-timeframes-error").html(e)},u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsView.js' */
GH.Reports.ControlChartRefinementsView=function(e,t,n,l){function i(e,t,i,o){var c=e.find("select"),u=e.find(".ghx-refinement-selector"),d=_.map(p.available[t],function(e){return{value:e.id,label:e.name,selected:!1}});c.empty().append(GH.tpl.reports.controlChart.renderSelectOptions({options:d}));var f=new l({element:c,itemAttrDisplayed:"label"});f.$container.addClass("hidden").append(GH.tpl.reports.controlChart.renderRefineInfoMessage({message:o}));var m=n.create({content:f.$container,offsetTarget:u,width:"auto"});return u.on("click",function(e){e.preventDefault(),m.toggle(),f.$field.focus()}),f.model.$element.on("unselect selected",function(){h&&(r()?(p.selected[i]=_.map(f.model.getSelectedValues(),function(e){return+e}),a()):setTimeout(function(){s()},0))}),{multiSelect:f,$button:u}}function r(){var e=u.multiSelect.model.getSelectedValues().length>0,t=!d||d.multiSelect.model.getSelectedValues().length>0;return e&&t}function o(e){g=null;var t=GH.RapidViewConfig.currentData.data.swimlaneStrategy,n="custom"===t;u=i(e.find("#js-options-refine-columns"),"columns","columnIds","At least one column must be selected"),n&&(d=i(e.find("#js-options-refine-swimlanes"),"swimlanes","swimlaneIds","At least one swimlane must be selected")),f=i(e.find("#js-options-refine-quickfilters"),"quickFilters","quickFilterIds",""),m=e.find(".js-reset-btn").on("click",function(e){e.preventDefault(),c()})}function a(){_.isEqual(p.toNormalized(),g)||(null!==g&&S("modelChanged"),s(),g=p.toNormalized())}function s(){function e(e,n){if(e){e.multiSelect.clear(),_.each(n,function(t){var n=e.multiSelect.model.getDescriptor(t.toString());e.multiSelect.selectItem(n,!0)});var l=t(e.multiSelect.model.$element);e.$button.find(".ghx-refinement-wrap").text(l||"None")}}function t(e){var t=e.find("option:selected").map(function(){return this.text}).get().join(", ");return t}h=!1,e(u,p.selected.columnIds),e(d,p.selected.swimlaneIds),e(f,p.selected.quickFilterIds),p.isDefault()?m.attr("aria-disabled","true"):m.removeAttr("aria-disabled"),h=!0}function c(){S("resetToDefaults")}var u,d,f,m,p=null,g=null,S=e.noop,h=!0;return{start:function(t){p=t,o(e("#ghx-controlchart-refine-options"))},digest:function(){a()},setHandler:function(e){S=e},getModel:function(){return p}}}(AJS.$,AJS.I18n,AJS.InlineLayer,AJS.CheckboxMultiSelect);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartRefinementsController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-refinements-controller",["require"],function(t){"use strict";function e(){n.setHandler(function(t){o[t]()})}var r,n=GH.Reports.ControlChartRefinementsView,i=t("jira-agile/rapid/global-events");i.on("pre-initialization",function(){r=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")});var o={modelChanged:function(){r.update()},resetToDefaults:function(){n.getModel().resetToDefaults(),n.digest()}};return{start:function(t){e(),n.start(t),n.digest()},resetToDefaults:o.resetToDefaults}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsView.js' */
GH.Reports.ControlChartViewingOptionsView=function(n){function t(n){a=null,r=n.find("#js-option-nwd").on("change",function(){d&&(u.includeNonWorkingDays=this.checked,o())}),l=n.find(".js-reset-btn").on("click",function(n){n.preventDefault(),i()})}function o(){_.isEqual(u.toNormalized(),a)||(null!==a&&c("modelChanged"),e(),a=u.toNormalized())}function e(){d=!1,r.prop("checked",u.includeNonWorkingDays),u.isDefault()?l.attr("aria-disabled","true"):l.removeAttr("aria-disabled"),d=!0}function i(){c("resetToDefaults")}var r,l,u=null,a=null,c=n.noop,d=!0;return{start:function(o){u=o,t(n("#ghx-controlchart-viewing-options"))},digest:function(){o()},setHandler:function(n){c=n},getModel:function(){return u}}}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartViewingOptionsController.js' */
define("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-viewing-options-controller",["require"],function(t){"use strict";function r(){e.setHandler(function(t){o[t]()})}var i,e=GH.Reports.ControlChartViewingOptionsView,n=t("jira-agile/rapid/global-events");n.on("pre-initialization",function(){i=t("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")});var o={modelChanged:function(){i.update()},resetToDefaults:function(){e.getModel().resetToDefaults(),e.digest()}};return{start:function(t){r(),e.start(t),e.digest()}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartDialog.js' */
GH.Reports=GH.Reports||{},GH.Reports.ControlChartDialog=function(){function e(e){return _.each(e.columns,function(e){e.formattedDuration=s(e.duration)}),e.formattedDuration=s(e.duration),e}function t(e){var t=function(e){return e.duration};return[{label:"Max time",value:s(d3.max(e,t))},{label:"Average time",value:s(d3.mean(e,t))},{label:"Min time",value:s(d3.min(e,t))}]}function n(t){return GH.tpl.reports.controlChart.renderDialogIssueContent({issue:e(t),url:GH.Ajax.CONTEXT_PATH+"/browse/"+encodeURIComponent(t.key)})}function r(e){var n=_.pluck(e,"key");return GH.tpl.reports.controlChart.renderDialogClusterContent({issueCount:e.length,stats:t(e),url:GH.Ajax.CONTEXT_PATH+"/secure/GHViewInNavigator.jspa?issueKeys="+encodeURIComponent(n.join(","))})}function a(e,t){var a=d3.select(e);a.classed("active",!0);var o=_.isArray(t);return i=GH.SideInlineDialog.create(l,e,function(e,a,i){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),e.html(o?r(t):n(t)),i()},{addActiveClass:!1,container:c,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,hideCallback:function(){a.classed("active",!1)}}),i.show(),i}function o(){return!!i&&i.is(":visible")}var i,l="control-chart-issues",c="#ghx-report-scrollarea > .aui-page-panel",s=GH.TimeFormat.formatShortDuration;return GH.InlineDialog.preventCloseOnClick(l),{show:a,hide:function(){i&&i.hide()},isVisible:o}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartScrubberDialog.js' */
GH.Reports.ControlChartScrubberDialog=function(){function e(e){return moment(e).format("LLL")}function n(e){return moment(e).format("LL")}function i(e){m=e,f=GH.SideInlineDialog.create(C,e,function(e,n,i){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog ghx-scrubber-dialog"),e.addClass("ghx-scrubber-contents"),e.next("#arrow-"+C).addClass("ghx-arrow-scrubber-dialog"),i()},H),a()}function r(){b=!1}function t(){b=!0}function o(){!GH.Reports.ControlChartDialog.isVisible()&&b&&f.show()}function a(){GH.InlineDialog.registerInlineDialogHacks(C,{validateClickToCloseFn:function(){return!1}})}function l(){f&&f.hide()}function s(e){g(),c(e),f.refresh()}function c(e){var n;n=e.time?GH.tpl.reports.controlChart.renderScrubberDialogContent({indicatedTime:u(e.time),rollingAverage:GH.Util.roundToDecimalPlaces(e.rollingAverage,1),standardDeviation:GH.Util.roundToDecimalPlaces(e.standardDeviation,1)}):GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent({startTime:u(e.startTime),endTime:u(e.endTime)}),d().find(".ghx-scrubber-contents").html(n)}function u(i){var r=GH.Reports.ControlChartController.getFilterOptions().timeFrame,t=r.getTimeFrameDuration()/GH.ChartTimeFrames.day;return i=t>30?n(i):e(i)}function d(){return AJS.$("#inline-dialog-"+C)}function g(){h()||o()}function h(){return!!f&&f.is(":visible")}var f,m,b=!0,C="scrubber-dialog",D="#ghx-chart-group",H={container:D,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,width:230,closeOthers:!1,persistent:!0,addActiveClass:!1};return{init:i,show:o,hide:l,isVisible:h,refresh:s,disable:r,enable:t}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChartScrubber.js' */
GH.Reports.ControlChartScrubber=function(){function r(){GH.Reports.ControlChartScrubberDialog.disable()}function e(){GH.Reports.ControlChartScrubberDialog.enable()}function t(){GH.Reports.ControlChartScrubberDialog.show()}function n(){GH.Reports.ControlChartScrubberDialog.hide()}function i(){c.hideScrubber()}function o(){u.cancelDrag()}function a(r,e){var t={};if(r.rollingAverageLine.length&&r.rollingAverageLine[0][0]<=e){var n=GH.Util.indexOf(r.rollingAverageLine,function(r){return r[0]<=e},!0);t.rollingAverage=r.rollingAverageLine[n][1],t.standardDeviation=r.standardDeviationArea[n][2]}return t}function l(){var r=this.mouseCoordinates(),e=this.xScale().invert;if(r)if(u.isDragging()){var t=u.currentRange();GH.Reports.ControlChartScrubberDialog.refresh({startTime:e(t[0]),endTime:e(t[1])})}else{var n=e(r[0]),i=a(this.data().series,n);GH.Reports.ControlChartScrubberDialog.refresh({time:n,rollingAverage:i.rollingAverage,standardDeviation:i.standardDeviation})}}function s(){var r=this.selection();c.parent(this),c.interactiveLayer(this),c(r),u.parent(this),u.interactiveLayer(this),u(r),GH.Reports.ControlChartScrubberDialog.init(c.elements()[0]);var e=this;u.onEndDrag(_.bind(l,e)),this.mouseover(function(){t.call(e)}),this.mousemove("ccscrubber",function(){l.call(e)}),this.mouseout(function(){n.call(e)})}var c=c3.scrubber().elementClass("ghx-scrubber").shouldHideScrubber(function(){return GH.Reports.ControlChartDialog.isVisible()}),u=GH.Reports.ControlChartBrush();return c3.component().extend(_.once(s)).extend(o).extend({hideScrubber:i,disableScrubber:r,enableScrubber:e})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/ControlChartBrush.js' */
GH.Reports.ControlChartBrush=function(){return c3.brush().elementClass("ghx-chart-brush").enter(function(){var t=this;AJS.$(document).on("click mouseup",function(e){0===AJS.$(e.target).closest(t.parent().selection().node()).size()&&t.cancelDrag()}),AJS.$(document).on("keydown",function(e){27===e.keyCode&&t.cancelDrag()})}).onDrag(function(){AJS.$(d3.event.target).closest(this.parent().selection().node()).size()>0?GH.Reports.ControlChartDialog.hide():this.cancelDrag()}).onEndDrag(function(t){var e=this;t[1]-t[0]<5||(t=_.map(t,function(t){return e.parent().xScale().invert(t)}),GH.Reports.ControlChartController.getFilterOptions().timeFrame.setSimpleDates(t[0],t[1]),GH.Reports.ControlChartController.update())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/controlchart/ControlChart.soy' */
// This file was automatically generated from ControlChart.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.controlChart.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.controlChart == 'undefined') { GH.tpl.reports.controlChart = {}; }


GH.tpl.reports.controlChart.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="control-chart" class="ghx-control-chart-svg"><svg class="ghx-svg-chart"></svg></div></div><div id="ghx-chart-options" class="aui-group"><div id="ghx-chart-options-time" class="aui-item">' + GH.tpl.reports.controlChart.renderChartTimeOptions(null) + '</div><div id="ghx-chart-options-refine" class="aui-item">' + GH.tpl.reports.controlChart.renderChartRefineOptions(opt_data) + '</div><div id="ghx-chart-options-view" class="aui-item">' + GH.tpl.reports.controlChart.renderChartViewingOptions(null) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartBody.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartBody';
}


GH.tpl.reports.controlChart.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2><p>' + soy.$$escapeHtml('There are either no issues on this board, or all the issues have been filtered out by the chart refinements.') + '</p>' + ((opt_data.canResetRefinements) ? '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-options-reset'], text: 'Reset the report filters'}) + '</p>' : '<p>' + soy.$$escapeHtml('Change the filter values for this report below') + '</p>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.controlChart.renderBlankStateMessage';
}


GH.tpl.reports.controlChart.renderChartSnapshots = function(opt_data, opt_ignored) {
  return '<div class="ghx-chart-snapshot"><dl><dt class="js-chart-snapshot-mean">' + soy.$$escapeHtml(opt_data.mean) + '</dt><dd>' + soy.$$escapeHtml('Average') + '</dd></dl><dl><dt class="js-chart-snapshot-median">' + soy.$$escapeHtml(opt_data.median) + '</dt><dd>' + soy.$$escapeHtml('Median') + '</dd></dl><dl><dt class="js-chart-snapshot-min-time">' + soy.$$escapeHtml(opt_data.min) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('Min {0}','Time')) + '</dd></dl><dl><dt class="js-chart-snapshot-max-time">' + soy.$$escapeHtml(opt_data.max) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('Max {0}','Time')) + '</dd></dl><dl><dt class="js-chart-snapshot-issue-count">' + soy.$$escapeHtml(opt_data.issueCount) + '</dt><dd>' + soy.$$escapeHtml('Issues') + '</dd></dl></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartSnapshots.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartSnapshots';
}


GH.tpl.reports.controlChart.renderChartSelector = function(opt_data, opt_ignored) {
  return '<div class="ghx-time-window js-chart-time-window"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartSelector.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartSelector';
}


GH.tpl.reports.controlChart.renderChartTimeWindow = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.timeFrame) {
    case 0:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'All Time'));
      break;
    case 7:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past Week'));
      break;
    case 14:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past 2 Weeks'));
      break;
    case 30:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past Month'));
      break;
    case 90:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past 3 Months'));
      break;
    case 180:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Past 6 Months'));
      break;
    default:
      output += soy.$$escapeHtml(AJS.format('{0} to {1} ({2})',opt_data.fromDate,opt_data.toDate,'Custom'));
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartTimeWindow.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartTimeWindow';
}


GH.tpl.reports.controlChart.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Issue') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Cluster of issues') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Average') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Rolling average') + '<div class="ghx-description js-chart-legend-rollingaveragewindow"></div></li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-control-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Standard deviation') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderLegend.soyTemplateName = 'GH.tpl.reports.controlChart.renderLegend';
}


GH.tpl.reports.controlChart.renderChartTimeOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Time scale') + '</h4><form class="aui"><fieldset><div class="field-group"><label for="js-option-timeframe">' + soy.$$escapeHtml('Timeframe') + '</label><select class="select" id="js-option-timeframe" title="' + soy.$$escapeHtml('Timeframe') + '"><option value="7">' + soy.$$escapeHtml('Past Week') + '</option><option value="14">' + soy.$$escapeHtml('Past 2 Weeks') + '</option><option value="30">' + soy.$$escapeHtml('Past Month') + '</option><option value="90">' + soy.$$escapeHtml('Past 3 Months') + '</option><option value="180">' + soy.$$escapeHtml('Past 6 Months') + '</option><option value="0">' + soy.$$escapeHtml('All Time') + '</option><option value="custom">' + soy.$$escapeHtml('Custom') + '</option></select></div></fieldset><fieldset><div class="field-group"><label>' + soy.$$escapeHtml('Custom dates') + '</label><div class="ghx-calendar-wrap"><span id="js-option-timeframe-custom-from_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit date') + '">' + soy.$$escapeHtml('Edit') + '</span><input class="text" type="text" id="js-option-timeframe-custom-from"></div><span class="ghx-conjunction">' + soy.$$escapeHtml('to') + '</span><div class="ghx-calendar-wrap"><span id="js-option-timeframe-custom-to_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar" title="' + soy.$$escapeHtml('Edit date') + '">' + soy.$$escapeHtml('Edit') + '</span><input class="text" type="text" id="js-option-timeframe-custom-to"></div><div class="ghx-error js-timeframes-error"></div></div></fieldset><fieldset>' + aui.buttons.button({id: ['js-option-timeframe-reset'], extraClasses: ['js-reset-btn', 'js-options-timeframe-reset', 'aui-button-link', 'ghx-margin-top'], text: 'Reset to default', type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartTimeOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartTimeOptions';
}


GH.tpl.reports.controlChart.renderChartRefineOptions = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<h4>' + soy.$$escapeHtml('Refine report') + '</h4><form id="ghx-controlchart-refine-options" class="aui">' + GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-columns', label: 'Columns'}) + ((opt_data.shouldShowSwimlaneRefine) ? GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-swimlanes', label: 'Swimlanes'}) : '') + GH.tpl.reports.controlChart.renderRefineOption({id: 'js-options-refine-quickfilters', label: 'Quick Filters'}) + '<fieldset>' + aui.buttons.button({extraClasses: ['js-reset-btn', 'js-options-refine-reset', 'aui-button-link', 'ghx-margin-top'], text: 'Reset to default', type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartRefineOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartRefineOptions';
}


GH.tpl.reports.controlChart.renderRefineOption = function(opt_data, opt_ignored) {
  return '<fieldset><div id="' + soy.$$escapeHtml(opt_data.id) + '" class="field-group"><label>' + soy.$$escapeHtml(opt_data.label) + '</label><button id="' + soy.$$escapeHtml(opt_data.id) + '-selector" type="button" class="ghx-refinement-selector aui-button aui-button-subtle ghx-drop-arrow"><div class="ghx-refinement-wrap"></div></button><select id="' + soy.$$escapeHtml(opt_data.id) + '-select" multiple="multiple" class="hidden"></select></div></fieldset>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderRefineOption.soyTemplateName = 'GH.tpl.reports.controlChart.renderRefineOption';
}


GH.tpl.reports.controlChart.renderRefineInfoMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-description ghx-sparkler-description js-options-refine-error">' + soy.$$escapeHtml(opt_data.message) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderRefineInfoMessage.soyTemplateName = 'GH.tpl.reports.controlChart.renderRefineInfoMessage';
}


GH.tpl.reports.controlChart.renderSelectOptions = function(opt_data, opt_ignored) {
  var output = '';
  var optionList158 = opt_data.options;
  var optionListLen158 = optionList158.length;
  for (var optionIndex158 = 0; optionIndex158 < optionListLen158; optionIndex158++) {
    var optionData158 = optionList158[optionIndex158];
    output += '<option' + ((optionData158.value) ? ' value="' + soy.$$escapeHtml(optionData158.value) + '"' : '') + ((optionData158.selected) ? ' selected="selected"' : '') + '>' + soy.$$escapeHtml(optionData158.label) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderSelectOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderSelectOptions';
}


GH.tpl.reports.controlChart.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Viewing options') + '</h4><form  id="ghx-controlchart-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-nwd" /><label for="js-option-nwd">' + soy.$$escapeHtml('Include non-working days in calculations') + '</label></div></fieldset><fieldset>' + aui.buttons.button({extraClasses: ['js-reset-btn', 'aui-button-link', 'ghx-margin-top'], text: 'Reset to default', type: 'link', tagName: 'a'}) + '</fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.controlChart.renderChartViewingOptions';
}


GH.tpl.reports.controlChart.renderDialogIssueContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-inline-dialog-container"><a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a> <span>' + soy.$$escapeHtml(opt_data.issue.summary) + '</span>';
  var columnList192 = opt_data.issue.columns;
  var columnListLen192 = columnList192.length;
  for (var columnIndex192 = 0; columnIndex192 < columnListLen192; columnIndex192++) {
    var columnData192 = columnList192[columnIndex192];
    output += GH.tpl.reports.controlChart.renderDialogItem({label: columnData192.name, value: columnData192.formattedDuration});
  }
  output += GH.tpl.reports.controlChart.renderDialogItem({label: 'Cycle time', value: opt_data.issue.formattedDuration}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogIssueContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogIssueContent';
}


GH.tpl.reports.controlChart.renderDialogClusterContent = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-inline-dialog-container"><strong>' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.issueCount)) + '</strong> <a href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml('View in Issue Navigator') + '</a>';
  var statList209 = opt_data.stats;
  var statListLen209 = statList209.length;
  for (var statIndex209 = 0; statIndex209 < statListLen209; statIndex209++) {
    var statData209 = statList209[statIndex209];
    output += GH.tpl.reports.controlChart.renderDialogItem(statData209);
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogClusterContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogClusterContent';
}


GH.tpl.reports.controlChart.renderDialogItem = function(opt_data, opt_ignored) {
  return '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml(opt_data.label) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.value) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderDialogItem.soyTemplateName = 'GH.tpl.reports.controlChart.renderDialogItem';
}


GH.tpl.reports.controlChart.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><p><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span>' + soy.$$escapeHtml(opt_data.indicatedTime) + '</p>' + ((opt_data.rollingAverage != null || opt_data.standardDeviation != null) ? '<table class="aui-table">' + ((opt_data.rollingAverage != null) ? GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'Rolling average', value: AJS.format('{0,choice,0#{0,number} days|1#{0,number} day|1\x3c{0,number} days}',opt_data.rollingAverage)}) : '') + ((opt_data.standardDeviation != null) ? GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'Standard deviation', value: AJS.format('{0,choice,0#{0,number} days|1#{0,number} day|1\x3c{0,number} days}',opt_data.standardDeviation)}) : '') + '</table>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberDialogContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberDialogContent';
}


GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><table class="aui-table">' + GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'From', value: opt_data.startTime}) + GH.tpl.reports.controlChart.renderScrubberDialogItem({label: 'To', value: opt_data.endTime}) + '</table></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberBrushingDialogContent';
}


GH.tpl.reports.controlChart.renderScrubberDialogItem = function(opt_data, opt_ignored) {
  return '<tr><th>' + soy.$$escapeHtml(opt_data.label) + '</th><td>' + soy.$$escapeHtml(opt_data.value) + '</td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.controlChart.renderScrubberDialogItem.soyTemplateName = 'GH.tpl.reports.controlChart.renderScrubberDialogItem';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service",["require"],function(t){"use strict";function e(t){var e={url:"/rapid/charts/releaseburndownchart",data:t};return d.get(e,"rapidChartData")}function a(t,e){return n.getScopeBySprintData(t,e)}function r(){}var i,n,s=t("underscore"),o=t("jira-agile/rapid/global-events"),d=t("jira-agile/rapid/ajax");return o.on("pre-initialization",function(){i=GH.RapidViewConfig,n=GH.Reports.ScopeBurndownBySprintTransformer}),r.prototype={get:function(t,e,r){return this._getData(t,e,r).andThen(function(t){return t.rapidViewId=i.currentData.id,t.estimationStatistic=i.currentData.data.estimationStatistic,t.estimationStatistic.formatter=n.getEstimationStatisticFormatter(t.estimationStatistic.renderer),t.labels={originalEstimate:"Original estimate at start of version",workAdded:"added to version",workRemoved:"removed from version",forecastDescription:function(t){return AJS.format("Based on your velocity for the last 3 sprints, it will take {0,choice,0#0 more sprints|1#1 more sprint|1\u003c{0,number} more sprints} to complete this version.",t)},helpUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Release+Burndown","isLocal":false}.url},a(t,r.zeroBaseline)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:a,_getData:function(t,a,r){var i={rapidViewId:t,versionId:a};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&s.isEqual(this._dataRequestParams,i)||(this._dataRequestParams=i,this._dataPromise=e(i)),this._dataPromise}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownChartTableDataService.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service",["require"],function(a){"use strict";function t(a){var t={url:"/rapid/charts/versionreport",data:a};return o.get(t,"versionReportData")}function r(a,t){return a.showIssueEpic=!0,i.getIssuesBySprintData(a,t)}function e(){}var i,n=a("underscore"),s=a("jira-agile/rapid/global-events"),o=a("jira-agile/rapid/ajax");return s.on("pre-initialization",function(){i=GH.Reports.ScopeBurndownBySprintTransformer}),e.prototype={get:function(a,t,e){return this._getData(a,t).andThen(function(t){return t.rapidViewId=a,r(t,e)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:r,_getData:function(a,r){var e={rapidViewId:a,versionId:r};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&n.isEqual(this._dataRequestParams,e)||(this._dataRequestParams=e,this._dataPromise=t(e)),this._dataPromise}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReport.soy' */
// This file was automatically generated from ReleaseBurndownReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.releaseBurndownReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.releaseBurndownReport == 'undefined') { GH.tpl.reports.releaseBurndownReport = {}; }


GH.tpl.reports.releaseBurndownReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-release-burndown-report" class="ghx-scope-burndown-chart-svg ghx-release-burndown-chart-svg"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="ghx-version-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderChartBody';
}


GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2>' + ((opt_data.hasNoVersion) ? '<p>' + soy.$$escapeHtml('There are no versions on this board.') + '</p>' : (opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml('There are no estimated issues in this version.') + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: opt_data.hasNoVersion ? 'Add versions in the Versions panel of the Backlog' : 'Estimate issues in the Backlog', tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage';
}


GH.tpl.reports.releaseBurndownReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work completed') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work forecast') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work remaining') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work added') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderLegend.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderLegend';
}


GH.tpl.reports.releaseBurndownReport.renderSnapshot = function(opt_data, opt_ignored) {
  var output = '';
  var unestimatedIssuesTooltipText__soy35 = soy.$$escapeHtml(AJS.format('{0}% of issues do not have an estimate ({1} of {2})',opt_data.unestimatedIssuesPercentage,opt_data.unestimatedIssuesCount,opt_data.estimatableIssuesCount)) + '<b>' + soy.$$escapeHtml('Issue types that do not include the estimation statistic are not counted.') + '</b>';
  output += '<div class="ghx-chart-snapshot">' + ((opt_data.shouldShowUnestimatedIssues) ? '<dl class="ghx-unestimated-issues ' + soy.$$escapeHtml(opt_data.unestimatedIssuesThresholdExceeded ? ' ghx-threshold-exceeded' : '') + '" data-tooltip="' + soy.$$escapeHtml(unestimatedIssuesTooltipText__soy35) + '"><dt>' + soy.$$escapeHtml(opt_data.unestimatedIssuesPercentage) + '%</dt><dd>' + soy.$$escapeHtml('unestimated issues') + '</dd></dl>' : '') + '<dl class=\'ghx-completed-overview\'><dt>' + soy.$$escapeHtml(AJS.format('{0} of {1}',opt_data.workCompleted,opt_data.workTotal)) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('completed ({0})',opt_data.estimationStatistic)) + '</dd></dl></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderSnapshot.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderSnapshot';
}


GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Viewing options') + '</h4><form  id="ghx-versionreport-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-zero-baseline" ' + ((opt_data.zeroBaseline) ? 'checked' : '') + '/><label for="js-option-zero-baseline">' + soy.$$escapeHtml('Align sprints at the base of the chart') + '</label><p class="ghx-description">' + soy.$$escapeHtml('Use this view to see trends in the scope for the version.') + '</p></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions';
}


GH.tpl.reports.releaseBurndownReport.renderVersionMetadata = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml(opt_data.name) + '</h3>' + ((opt_data.description) ? '<p>' + soy.$$escapeHtml(opt_data.description) + '</p>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Planned start date') + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.formattedStartDate ? opt_data.formattedStartDate : 'None') + '</div></div><div class="aui-group"><div class="aui-item">' + ((opt_data.released) ? soy.$$escapeHtml('Release date') : soy.$$escapeHtml('Planned release date')) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.formattedReleaseDate ? opt_data.formattedReleaseDate : 'None') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.releaseBurndownReport.renderVersionMetadata.soyTemplateName = 'GH.tpl.reports.releaseBurndownReport.renderVersionMetadata';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReportView.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view",["jquery","underscore","jira-agile/d3","jira-agile/rapid/events","jira-agile/rapid/global-events","jira-agile/rapid/ui/chart/chart-view","jira-agile/rapid/ui/component/chart-picker","jira-agile/tooltip","jira-agile/rapid/const/PageMode"],function(e,t,n,r,s,i,o,a,d){function h(){new r(this)}var l,p,u,c,g,m,w;return s.on("pre-initialization",function(){l=GH.Reports.ScopeBurndownBySprintChart,p=GH.Reports.ScopeBurndownBySprintChartLegend,u=GH.Reports.ScopeBurndownBySprintChartHowTo,c=GH.Layout,g=GH.Ajax,m=GH.RapidViewConfig,w=GH.RapidBoard.ViewController}),h.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(n){this._model=n,i.getChartContentElem(!0).html(GH.tpl.reports.releaseBurndownReport.renderChartBody()),i.getChartLegendD3(!0).html(GH.tpl.reports.releaseBurndownReport.renderLegend()).show(),this._renderOptions(),this._versionPicker=new o("releaseBurndown.selectedVersionId","There are currently no versions on this board."),e(this._versionPicker).on("selectedItemChanged",t.bind(this._handleVersionSelected,this)),this._chart=new l,this._legend=new p,this._howTo=new u,this._renderLegend(),this._renderHowTo()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,i.getChartContentElem(!0).empty(),i.getChartLegendD3(!0).empty(),e(GH).unbind(c.EVENT_DELAYED_RESIZE+".releaseBurndownReport")},setVersions:function(e){this._versionPicker.setItems(e),this._versionPicker.setDefaultItem(e[0])},update:function(n){this._versionPicker.setSelectedItem(n.version.id,!0),this._versionPicker.render(i.getChartSelector(!0)),this._chart.data(n),this._renderChart(),this._renderSnapshot(n),this._renderVersionMetadata(n),this._firstRender?(c.bindDelayedWindowResize(),e(GH).bind(c.EVENT_DELAYED_RESIZE+".releaseBurndownReport",t.bind(this._handleWindowResized,this))):i.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){this._renderTable(e)},showBlankState:function(t,n){var r=e(GH.tpl.reports.releaseBurndownReport.renderBlankStateMessage({planModeUrl:g.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+m.currentData.data.id+"&view=planning&versions=visible",hasNoVersion:t,hasNoEstimatedStories:n}));r.find(".js-plan-mode").on("simpleClick",function(e){e.preventDefault(),w.setMode(d.PLAN)}),i.showBlankStateMessage(r)},hideBlankState:function(){i.hideBlankStateMessage()},showSpinner:function(){i.showSpinner()},hideSpinner:function(){i.hideSpinner()},_renderSnapshot:function(t){var n=30,r=t.snapshot.estimatableIssueCount-t.snapshot.estimatedIssueCount,s=t.snapshot.estimatableIssueCount>0?Math.round(r/t.snapshot.estimatableIssueCount*100):0,i=0===t.snapshot.issueCount?"":GH.tpl.reports.releaseBurndownReport.renderSnapshot({estimatableIssuesCount:t.snapshot.estimatableIssueCount,unestimatedIssuesCount:r,unestimatedIssuesPercentage:s,unestimatedIssuesThresholdExceeded:s>n,workCompleted:t.estimationStatistic.formatter.formatFull(t.snapshot.workCompleted),workTotal:t.estimationStatistic.formatter.formatFull(t.snapshot.workCompleted+t.snapshot.workRemaining),estimationStatistic:t.estimationStatistic.name,shouldShowUnestimatedIssues:"issueCount"!==t.estimationStatistic.typeId});e("#ghx-chart-snapshot").html(i),a.tipsify({selector:"#ghx-chart-snapshot .ghx-unestimated-issues",html:!0,className:"ghx-tipsy-left"})},_renderTable:function(e){i.getChartContentElem(!0).find(".ghx-report-issue-list").html(GH.tpl.reports.scopeBurndownBySprint.renderIssueList(t.extend({emptySprintMessage:"No issues completed this sprint for current version."},e)))},_renderLegend:function(){this._legend(n.select(".ghx-chart-legend"))},_renderHowTo:function(){this._howTo(n.select(".ghx-group-how"))},_renderChart:function(){this._chart(n.select("#ghx-release-burndown-report"))},_renderVersionMetadata:function(e){i.getChartContentElem(!0).find(".ghx-version-metadata").html(GH.tpl.reports.releaseBurndownReport.renderVersionMetadata(e.version))},_renderOptions:function(){var t=this;e("#ghx-chart-options").html(GH.tpl.reports.releaseBurndownReport.renderChartViewingOptions(this._model)),e("#js-option-zero-baseline").on("change",function(){t.trigger("optionChanged",{zeroBaseline:this.checked})})},_handleVersionSelected:function(e,t){this.trigger("versionSelected",t.item.id)},_handleWindowResized:function(){this._renderChart()}},h});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/releaseburndown/ReleaseBurndownReportController.js' */
define("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller",["require"],function(e){function i(){}var r,t,a,n=e("underscore"),o=e("jira-agile/rapid/global-events"),s=e("jira/analytics/web-client"),d=e("jira-agile/rapid/analytics-tracker"),l=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view"),u=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service"),c=e("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service"),h=(e("jira/featureflags/feature-manager"),e("jira-agile/features/feature-flags"),new u),p=new c;return o.on("pre-initialization",function(){r=GH.PromiseKeeper,t=GH.RapidBoard.State,a=new GH.VersionsDataService}),i.id="releaseBurndown",i.prototype={SETTINGS_KEY:"chart.config.releaseBurndown",displayed:!1,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(e){this._rapidViewData=e||{}},show:function(){this.displayed=!0,this._tracker=new d("gh.report.releaseburndown"),t.pushState();var e=this._view=new l;e.on("versionSelected",n.bind(function(e){this._model.versionId=e,this.update()},this)).on("optionChanged",n.bind(function(e){this._model.zeroBaseline=e.zeroBaseline,this._tracker.trigger("zeroBaseline."+(e.zeroBaseline?"on":"off")),this.update()},this)),e.init(this._model),e.showSpinner(),this._tracker.trigger("show"),this._dataPromiseKeeper=new r;var i=a.getSimpleVersions(this._rapidViewData.id);this._dataPromiseKeeper.add(i).done(n.bind(function(i){i.length?(i.reverse(),null!=this._model.versionId&&a.versionExists(i,this._model.versionId)||(this._model.versionId=i[0].id),e.setVersions(i),this.update(!0)):(this._model.versionId=null,e.showBlankState(!0,!0),this._tracker.trigger("blank"),e.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),h.clearCache(),p.clearCache()},update:function(e){if(e?t.replaceState():t.pushState(),this.saveState(),null!=this._model.versionId){var i=this;i._view.showSpinner();var r=h.get(i._rapidViewData.id,i._model.versionId,{zeroBaseline:i._model.zeroBaseline});return i._dataPromiseKeeper.add(r).done(function(e){0===e.snapshot.estimatedIssueCount?(i._view.showBlankState(!1,!0),i._tracker.trigger("blank")):(i._view.hideBlankState(),s.sendTrackEvent({source:"releaseBurndownReportScreen",action:"viewed",actionSubject:"report",actionSubjectId:"releaseBurndown",attributes:{boardId:i._rapidViewData.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),projectId:JIRA.API.Projects.getCurrentProjectId(),projectType:JIRA.API.Projects.getCurrentProjectType(),simplified:!1,reportType:"agile"}})),i._view.update(e);var r=p.get(i._rapidViewData.id,i._model.versionId,e);i._dataPromiseKeeper.add(r).done(function(e){i._view.updateTable(e)})}).always(function(e){"abort"!==e&&i._view.hideSpinner()})}},saveState:function(){t.setBoardSetting(this.SETTINGS_KEY,this.getNormalizedFromInternal())},loadState:function(){this._model=t.getBoardSetting(t.getRapidViewId(),this.SETTINGS_KEY,{versionId:null,zeroBaseline:!1})},isApplicable:function(e){return e.sprintSupportEnabled&&!t.isAgilityBoard()},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),n.defaults(n.clone(this._model),{zeroBaseline:!1})},updateInternalFromNormalized:function(e){this._model=e},toUrl:function(e){return{version:null!==e.versionId?e.versionId:void 0,zeroBaseline:!!e.zeroBaseline||void 0}},getNormalizedFromUrl:function(e){return{versionId:isNaN(e.version)?null:+e.version,zeroBaseline:"true"===e.zeroBaseline}}},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service",["require"],function(t){"use strict";function e(t){var e={url:"/rapid/charts/epicburndownchart",data:t};return c.get(e,"epicBurndownChartData")}function i(t,e){return n.getScopeBySprintData(t,e)}function a(){}var r,n,o=t("underscore"),s=t("jira-agile/rapid/global-events"),c=t("jira-agile/rapid/ajax");return s.on("pre-initialization",function(){r=GH.RapidViewConfig,n=GH.Reports.ScopeBurndownBySprintTransformer}),a.prototype={get:function(t,e,a){return this._getData(t,e,a).andThen(function(t){return t.rapidViewId=r.currentData.id,t.estimationStatistic=r.currentData.data.estimationStatistic,t.estimationStatistic.formatter=n.getEstimationStatisticFormatter(t.estimationStatistic.renderer),t.labels={originalEstimate:"Original estimate at start of epic",workAdded:"added to epic",workRemoved:"removed from epic",forecastDescription:function(t){return AJS.format("Based on your velocity for the last 3 sprints, it will take {0,choice,0#0 more sprints|1#1 more sprint|1\u003c{0,number} more sprints} to complete this epic.",t)},helpUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Epic+Burndown","isLocal":false}.url},t.epic={key:t.epicKey,summary:t.epicSummary,creationTime:t.epicCreationTime},i(t,a.zeroBaseline)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:i,_getData:function(t,i,a){var r={rapidViewId:t,epicKey:i};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&o.isEqual(this._dataRequestParams,r)||(this._dataRequestParams=r,this._dataPromise=e(r)),this._dataPromise}},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownChartTableDataService.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service",["require"],function(a){"use strict";function t(a){var t={url:"/rapid/charts/epicreport",data:a};return u.get(t,"epicBurndownData")}function e(a,t){return a.showIssueEpic=!1,i.getIssuesBySprintData(a,t)}function r(){}var i,n=a("underscore"),s=a("jira-agile/rapid/global-events"),u=a("jira-agile/rapid/ajax");return s.on("pre-initialization",function(){i=GH.Reports.ScopeBurndownBySprintTransformer}),r.prototype={get:function(a,t,r){return this._getData(a,t).andThen(function(t){return t.rapidViewId=a,e(t,r)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:e,_getData:function(a,e){var r={rapidViewId:a,epicKey:e};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&n.isEqual(this._dataRequestParams,r)||(this._dataRequestParams=r,this._dataPromise=t(r)),this._dataPromise}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReport.soy' */
// This file was automatically generated from EpicBurndownReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.epicBurndownReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.epicBurndownReport == 'undefined') { GH.tpl.reports.epicBurndownReport = {}; }


GH.tpl.reports.epicBurndownReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-epic-burndown-report" class="ghx-scope-burndown-chart-svg ghx-epic-burndown-chart-svg"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="js-epic-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderChartBody';
}


GH.tpl.reports.epicBurndownReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2>' + ((opt_data.hasNoEpic) ? '<p>' + soy.$$escapeHtml('There are currently no epics on this board') + '</p>' : (opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml('There are no estimated issues in this epic.') + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: opt_data.hasNoEpic ? 'Add epics in the Epics panel of the Backlog' : 'Estimate issues in the Backlog', tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderBlankStateMessage';
}


GH.tpl.reports.epicBurndownReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work completed') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work forecast') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work remaining') + '</li></ul><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('work added') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderLegend.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderLegend';
}


GH.tpl.reports.epicBurndownReport.renderDialogSprintContent = function(opt_data, opt_ignored) {
  var output = '';
  var statistic__soy35 = opt_data.estimationStatistic.name;
  output += '<div class="ghx-inline-dialog-container">' + ((opt_data.url != '') ? '<a href="' + soy.$$escapeHtml(opt_data.url) + '">' : '') + '<strong>' + soy.$$escapeHtml(opt_data.sprint.sprintName) + '</strong>' + ((opt_data.url != '') ? '</a>' : '') + ((opt_data.sprint.formattedStartDate) ? '<p class="ghx-sprint-dialog-dates">' + soy.$$escapeHtml(opt_data.sprint.formattedStartDate) + ' - ' + soy.$$escapeHtml(opt_data.sprint.formattedEndDate) + '</p>' : '') + '<table class="ghx-stat-table">' + GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: 'at start of sprint', estimateValue: opt_data.sprint.formattedWorkAtStart, estimationStatistic: statistic__soy35}) + ((opt_data.sprint.workAdded) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: 'added', estimateValue: opt_data.sprint.formattedWorkAdded, estimationStatistic: statistic__soy35}) : '') + ((opt_data.sprint.workRemoved) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: 'removed', estimateValue: opt_data.sprint.formattedWorkRemoved, estimationStatistic: statistic__soy35}) : '') + ((opt_data.sprint.workCompleted) ? GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('completed') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkCompleted, estimationStatistic: statistic__soy35}) : '') + GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate({estimateLabel: '' + soy.$$escapeHtml('remaining') + ((opt_data.sprint.isForecast) ? ' (' + soy.$$escapeHtml('forecast') + ')' : ''), estimateValue: opt_data.sprint.formattedWorkRemaining, estimationStatistic: statistic__soy35}) + '</table></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderDialogSprintContent.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderDialogSprintContent';
}


GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate = function(opt_data, opt_ignored) {
  return '<tr><td class="ghx-stat-table-number"><span title="' + soy.$$escapeHtml(opt_data.estimationStatistic) + '">' + soy.$$escapeHtml(opt_data.estimateValue) + '</span></td><th class="ghx-stat-table-label">' + soy.$$escapeHtml(opt_data.estimateLabel) + '</th></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderDialogWorkEstimate';
}


GH.tpl.reports.epicBurndownReport.renderSnapshot = function(opt_data, opt_ignored) {
  var output = '';
  var unestimatedIssuesTooltipText__soy104 = soy.$$escapeHtml(AJS.format('{0}% of issues do not have an estimate ({1} of {2})',opt_data.unestimatedIssuesPercentage,opt_data.unestimatedIssuesCount,opt_data.estimatableIssuesCount)) + '<b>' + soy.$$escapeHtml('Issue types that do not include the estimation statistic are not counted.') + '</b>';
  output += '<div class="ghx-chart-snapshot">' + ((opt_data.shouldShowUnestimatedIssues) ? '<dl class="ghx-unestimated-issues ' + soy.$$escapeHtml(opt_data.unestimatedIssuesThresholdExceeded ? ' ghx-threshold-exceeded' : '') + '" data-tooltip="' + soy.$$escapeHtml(unestimatedIssuesTooltipText__soy104) + '"><dt>' + soy.$$escapeHtml(opt_data.unestimatedIssuesPercentage) + '%</dt><dd>' + soy.$$escapeHtml('unestimated issues') + '</dd></dl>' : '') + '<dl><dt>' + soy.$$escapeHtml(AJS.format('{0} of {1}',opt_data.workCompleted,opt_data.workTotal)) + '</dt><dd>' + soy.$$escapeHtml(AJS.format('completed ({0})',opt_data.estimationStatistic)) + '</dd></dl></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderSnapshot.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderSnapshot';
}


GH.tpl.reports.epicBurndownReport.renderChartViewingOptions = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml('Viewing options') + '</h4><form  id="ghx-versionreport-viewing-options" class="aui"><fieldset><div class="checkbox"><input class="checkbox" type="checkbox" id="js-option-zero-baseline" ' + ((opt_data.zeroBaseline) ? 'checked' : '') + '/><label for="js-option-zero-baseline">' + soy.$$escapeHtml('Align sprints at the base of the chart') + '</label><p class="ghx-description">' + soy.$$escapeHtml('Use this view to see trends in the scope for the epic.') + '</p></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderChartViewingOptions.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderChartViewingOptions';
}


GH.tpl.reports.epicBurndownReport.renderEpicMetadata = function(opt_data, opt_ignored) {
  return '<h3>' + soy.$$escapeHtml('Epic') + '</h3><p><span class="ghx-issue-list-epic-information"><a role="button" class="ghx-epic-key-link" title="' + soy.$$escapeHtml('View epic details') + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a><span class="ghx-issue-list-epic-summary"> ' + soy.$$escapeHtml(opt_data.summary) + ' </span></span></p>';
};
if (goog.DEBUG) {
  GH.tpl.reports.epicBurndownReport.renderEpicMetadata.soyTemplateName = 'GH.tpl.reports.epicBurndownReport.renderEpicMetadata';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReportView.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-view",["jquery","underscore","jira-agile/rapid/ui/component/chart-picker","jira-agile/rapid/ui/chart/chart-view","jira-agile/d3","jira-agile/rapid/events","jira-agile/rapid/global-events","jira-agile/tooltip","jira-agile/rapid/const/PageMode","jira/featureflags/feature-manager"],function(e,t,i,n,r,s,a,o,d,p){"use strict";function h(){new s(this)}var l,c,u,g,m,w,_,f;return a.on("pre-initialization",function(){l=GH.Layout,c=GH.Ajax,u=GH.LinkedPagesController,g=GH.RapidBoard.ViewController,m=GH.RapidViewConfig,w=GH.Reports.ScopeBurndownBySprintChart,_=GH.Reports.ScopeBurndownBySprintChartLegend,f=GH.Reports.ScopeBurndownBySprintChartHowTo}),h.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(r){this._model=r,n.getChartContentElem(!0).html(GH.tpl.reports.epicBurndownReport.renderChartBody()),n.getChartLegendD3(!0).html(GH.tpl.reports.epicBurndownReport.renderLegend()).show(),this._renderOptions(),this._epicPicker=new i("epicBurndown.selectedEpicId","There are currently no epics on this board"),e(this._epicPicker).on("selectedItemChanged",t.bind(this._handleEpicSelected,this)),this._chart=new w,this._legend=new _,this._howTo=new f,this._renderLegend(),this._renderHowTo()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,n.getChartContentElem(!0).empty(),n.getChartLegendD3(!0).empty(),e(GH).unbind(l.EVENT_DELAYED_RESIZE+".epicBurndownReport")},setEpics:function(e){this._epics=e,this._epicPicker.setItems(e),this._epicPicker.setDefaultItem(e[0])},update:function(i,r){if(r){var s=t.findWhere(this._epics,{id:i.epic.key}).linkedPagesCount;this._renderLinkedPagesTrigger(i.epic.key,s)}this._epicPicker.setSelectedItem(i.epic.key,!0),this._epicPicker.render(n.getChartSelector(!0)),this._chart.data(i),this._renderChart(),this._renderSnapshot(i),this._renderEpicMetadata(i.epic),this._firstRender?(l.bindDelayedWindowResize(),e(GH).bind(l.EVENT_DELAYED_RESIZE+".epicBurndownReport",t.bind(this._handleWindowResized,this))):n.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){this._renderTable(e)},showBlankState:function(t,i){var r=e(GH.tpl.reports.epicBurndownReport.renderBlankStateMessage({planModeUrl:c.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+m.currentData.data.id+"&view=planning"+(t?"&epics=visible":""),hasNoEpic:t,hasNoEstimatedStories:i}));r.find(".js-plan-mode").on("simpleClick",function(e){e.preventDefault(),t&&GH.PlanController.setEpicsColumnVisible(!0),g.setMode(d.PLAN)}),n.showBlankStateMessage(r)},hideBlankState:function(){n.hideBlankStateMessage()},showSpinner:function(){n.showSpinner()},hideSpinner:function(){n.hideSpinner()},_renderSnapshot:function(t){var i=30,n=t.snapshot.estimatableIssueCount-t.snapshot.estimatedIssueCount,r=t.snapshot.estimatableIssueCount>0?Math.round(n/t.snapshot.estimatableIssueCount*100):0,s=0===t.snapshot.issueCount?"":GH.tpl.reports.epicBurndownReport.renderSnapshot({estimatableIssuesCount:t.snapshot.estimatableIssueCount,unestimatedIssuesCount:n,unestimatedIssuesPercentage:r,unestimatedIssuesThresholdExceeded:r>i,workCompleted:t.estimationStatistic.formatter.formatFull(t.snapshot.workCompleted),workTotal:t.estimationStatistic.formatter.formatFull(t.snapshot.workCompleted+t.snapshot.workRemaining),estimationStatistic:t.estimationStatistic.name,shouldShowUnestimatedIssues:"issueCount"!==t.estimationStatistic.typeId});e("#ghx-chart-snapshot").html(s),o.tipsify({selector:"#ghx-chart-snapshot .ghx-unestimated-issues",html:!0,className:"ghx-tipsy-left"})},_renderEpicMetadata:function(t){e(".js-epic-metadata").html(GH.tpl.reports.epicBurndownReport.renderEpicMetadata(t))},_renderLinkedPagesTrigger:function(t,i){var n=GH.tpl.component.linkedpages.renderTrigger({isLoadEpicPageLinksOnDemandEnabled:p.isFeatureEnabled("jsw.load.epic.page.links.on.demand"),linkedPagesCount:i,title:"Create and view pages linked to this epic"}),r=e("#ghx-chart-header-primary .ghx-linked-pages-trigger");r.remove(),r=e(n),e("#ghx-chart-selector").after(r),u.initDialogTrigger(u.EPIC,d.REPORT,t,r)},_renderTable:function(e){n.getChartContentElem(!0).find(".ghx-report-issue-list").html(GH.tpl.reports.scopeBurndownBySprint.renderIssueList(t.extend({emptySprintMessage:"No issues completed this sprint for current epic."},e)))},_renderLegend:function(){this._legend(r.select(".ghx-chart-legend"))},_renderHowTo:function(){this._howTo(r.select(".ghx-group-how"))},_renderChart:function(){this._chart(r.select("#ghx-epic-burndown-report"))},_renderOptions:function(){var t=this;e("#ghx-chart-options").html(GH.tpl.reports.epicBurndownReport.renderChartViewingOptions(this._model)),e("#js-option-zero-baseline").on("change",function(){t.trigger("optionChanged",{zeroBaseline:this.checked})})},_handleEpicSelected:function(e,t){this.trigger("epicSelected",t.item)},_handleWindowResized:function(){this._renderChart()}},h});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/epicburndown/EpicBurndownReportController.js' */
define("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller",["require"],function(e){"use strict";function i(){}var t,a,r,n,o,s=e("underscore"),d=e("jira-agile/rapid/analytics-tracker"),l=e("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service"),p=e("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service"),c=e("jira-agile/rapid/global-events"),u=new l,h=new p;return c.on("pre-initialization",function(){t=GH.PromiseKeeper,a=GH.RapidBoard.State,r=GH.Reports.EpicBurndownReportView,n=GH.EpicsDataService,o=new n}),i.id="epicBurndown",i.prototype={SETTINGS_KEY:"chart.config.epicBurndown",displayed:!1,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(e){this._rapidViewData=e||{}},show:function(){this.displayed=!0,this._tracker=new d("gh.report.epicburndown"),a.pushState();var e=this._view=new r;e.on("epicSelected",s.bind(function(e){this._model.epicKey=e.id,this.update()},this)).on("optionChanged",s.bind(function(e){this._model.zeroBaseline=e.zeroBaseline,this._tracker.trigger("zeroBaseline."+(e.zeroBaseline?"on":"off")),this.update()},this)),e.init(this._model),e.showSpinner(),this._tracker.trigger("show"),this._dataPromiseKeeper=new t;var i=o.getSimpleEpics(this._rapidViewData.id);this._dataPromiseKeeper.add(i).done(s.bind(function(i){i.length?(i.reverse(),null!=this._model.epicKey&&o.epicExists(i,this._model.epicKey)||(this._model.epicKey=i[0].id),e.setEpics(i),this.update(!0)):(this._model.epicKey=null,e.showBlankState(!0,!0),this._tracker.trigger("blank"),e.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),u.clearCache(),h.clearCache()},update:function(e){if(e?a.replaceState():a.pushState(),this.saveState(),null!=this._model.epicKey){var i=this;i._view.showSpinner();var t=u.get(i._rapidViewData.id,i._model.epicKey,{zeroBaseline:i._model.zeroBaseline});return i._dataPromiseKeeper.add(t).done(function(e){0===e.snapshot.estimatedIssueCount?(i._view.showBlankState(!1,!0),i._tracker.trigger("blank")):i._view.hideBlankState(),i._view.update(e,o.supportsPages());var t=h.get(i._rapidViewData.id,i._model.epicKey,e);i._dataPromiseKeeper.add(t).done(function(e){i._view.updateTable(e)})}).always(function(e){"abort"!==e&&i._view.hideSpinner()})}},saveState:function(){a.setBoardSetting(this.SETTINGS_KEY,this.getNormalizedFromInternal())},loadState:function(){this._model=a.getBoardSetting(a.getRapidViewId(),this.SETTINGS_KEY,{epicKey:null,zeroBaseline:!1})},isApplicable:function(e){return e.sprintSupportEnabled&&!a.isAgilityBoard()},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),s.defaults(s.clone(this._model),{zeroBaseline:!1})},updateInternalFromNormalized:function(e){this._model=e},toUrl:function(e){return{epic:null!==e.epicKey?e.epicKey:void 0,zeroBaseline:!!e.zeroBaseline||void 0}},getNormalizedFromUrl:function(e){return{epicKey:e.epic||null,zeroBaseline:"true"===e.zeroBaseline}}},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChartDataService.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service",["require"],function(t){"use strict";function a(t){var a={url:"/rapid/charts/scopechangeburndownchart",data:t};return i.get(a,"sprintburnupchart")}function r(t){return u.getBurnupModelFromScopeBurndownModel(t)}function e(){}var i,n,u,s=t("underscore"),o=t("jira-agile/rapid/global-events");return o.on("pre-initialization",function(){i=GH.Ajax,n=GH.RapidViewConfig,u=GH.Reports.SprintBurnupTransformer}),e.prototype={get:function(t,a,e){return this._getData(t,a,e).andThen(function(t){return t.rapidViewId=n.currentData.id,r(t)})},clearCache:function(){this._dataPromise&&(this._dataPromise=null,this._dataRequestParams=null)},_transformData:r,_getData:function(t,r,e){var i={rapidViewId:t,sprintId:r,statisticFieldId:e};return this._dataPromise&&"rejected"!==this._dataPromise.state()&&s.isEqual(this._dataRequestParams,i)||(this._dataRequestParams=i,this._dataPromise=a(i)),this._dataPromise}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupReport.soy' */
// This file was automatically generated from BurnupReport.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.reports.burnupReport.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.reports == 'undefined') { GH.tpl.reports = {}; }
if (typeof GH.tpl.reports.burnupReport == 'undefined') { GH.tpl.reports.burnupReport = {}; }


GH.tpl.reports.burnupReport.renderChartBody = function(opt_data, opt_ignored) {
  return '<div id="ghx-chart-group"><div id="ghx-sprint-burnup-report" class="ghx-burnup-chart ghx-svg-chart"></div></div><div id="ghx-chart-options" class="aui-group"></div><div class="ghx-version-metadata"></div><div class="ghx-report-issue-list"></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderChartBody.soyTemplateName = 'GH.tpl.reports.burnupReport.renderChartBody';
}


GH.tpl.reports.burnupReport.renderBlankStateMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-blank-message"><h2>' + soy.$$escapeHtml('This chart cannot be displayed') + '</h2>' + ((opt_data.hasNoEstimatedStories) ? '<p>' + soy.$$escapeHtml('There are no estimated issues in this sprint.') + '</p>' : '') + '<p class="ghx-margin-top-x2">' + aui.buttons.button({extraClasses: ['js-plan-mode'], text: 'Estimate issues in the Backlog', tagName: 'a', extraAttributes: 'href="' + opt_data.planModeUrl + '"'}) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderBlankStateMessage.soyTemplateName = 'GH.tpl.reports.burnupReport.renderBlankStateMessage';
}


GH.tpl.reports.burnupReport.renderLegend = function(opt_data, opt_ignored) {
  return '<div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Work scope') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Scope projection') + '</li></ul></div><div><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Completed Work') + '</li></ul></div><div class="ghx-legend-column"><ul class="ghx-legend-item"><li class="ghx-legend-key"><svg class="ghx-svg-chart ghx-scope-burndown-chart-svg"></svg></li><li class="ghx-legend-value">' + soy.$$escapeHtml('Guideline') + '</li></ul></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderLegend.soyTemplateName = 'GH.tpl.reports.burnupReport.renderLegend';
}


GH.tpl.reports.burnupReport.renderDialogIssueContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><b>' + GH.tpl.reports.burnupReport.renderIssueKeyLink({key: opt_data.issueKey}) + '</b> ' + soy.$$escapeHtml(opt_data.issueSummary) + '<h5>' + soy.$$escapeHtml(opt_data.eventDescription) + '</h5><div class="aui-group"><div class="aui-item ghx-burnup-card-label">' + soy.$$escapeHtml('Estimate') + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.fromValue) + ' \u2192 ' + soy.$$escapeHtml(opt_data.toValue) + '</div></div><h5>' + soy.$$escapeHtml('Effect on sprint') + '</h5><div class="aui-group"><div class="aui-item ghx-burnup-card-label">' + soy.$$escapeHtml('Estimate') + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.totalFromValue) + ' \u2192 ' + soy.$$escapeHtml(opt_data.totalToValue) + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderDialogIssueContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderDialogIssueContent';
}


GH.tpl.reports.burnupReport.renderDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><div class="aui-group"><div class="aui-item">\u2211 ' + soy.$$escapeHtml(opt_data.statistic) + '</div><div class="aui-item">' + soy.$$escapeHtml(opt_data.totalValue) + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderDialogContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderDialogContent';
}


GH.tpl.reports.burnupReport.renderScrubberDialogContent = function(opt_data, opt_ignored) {
  return '<div class="ghx-inline-dialog-container"><p><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar"></span>' + soy.$$escapeHtml(opt_data.indicatedTime) + '</p>' + ((opt_data.scope != null || opt_data.completedWork != null) ? '<table class="aui-table">' + ((opt_data.scope != null) ? GH.tpl.reports.burnupReport.renderScrubberDialogItem({label: 'Work scope', value: opt_data.scope}) : '') + ((opt_data.completedWork != null) ? GH.tpl.reports.burnupReport.renderScrubberDialogItem({label: 'Completed Work', value: opt_data.completedWork}) : '') + '</table>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderScrubberDialogContent.soyTemplateName = 'GH.tpl.reports.burnupReport.renderScrubberDialogContent';
}


GH.tpl.reports.burnupReport.renderScrubberDialogItem = function(opt_data, opt_ignored) {
  return '<tr><th>' + soy.$$escapeHtml(opt_data.label) + '</th><td>' + soy.$$escapeHtml(opt_data.value) + '</td></tr>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderScrubberDialogItem.soyTemplateName = 'GH.tpl.reports.burnupReport.renderScrubberDialogItem';
}


GH.tpl.reports.burnupReport.renderChartTable = function(opt_data, opt_ignored) {
  var output = '<table class="aui ghx-hover-highlight"><thead><tr><th id="series-date">' + soy.$$escapeHtml('Date') + '</th><th id="series-event-type">' + soy.$$escapeHtml('Event Type') + '</th><th id="series-issue">' + soy.$$escapeHtml('Issue') + '</th><th id="series-completed-work" class="ghx-minimal">' + soy.$$escapeHtml('Completed Work') + '</th><th id="series-scope" class="ghx-minimal">' + soy.$$escapeHtml('Work scope') + '</th></tr></thead><tbody>';
  var rowList96 = opt_data.rows;
  var rowListLen96 = rowList96.length;
  for (var rowIndex96 = 0; rowIndex96 < rowListLen96; rowIndex96++) {
    var rowData96 = rowList96[rowIndex96];
    output += '<tr><td headers="series-date">' + ((rowData96.dateString) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData96.dateString) + '</div>' : '') + '</td><td headers="series-event-type">' + ((rowData96.eventString) ? '<div class="ghx-nowrap">' + soy.$$escapeHtml(rowData96.eventString) + '</div>' : '') + '</td><td headers="series-issue">';
    if (rowData96.issues) {
      var issueList112 = rowData96.issues;
      var issueListLen112 = issueList112.length;
      for (var issueIndex112 = 0; issueIndex112 < issueListLen112; issueIndex112++) {
        var issueData112 = issueList112[issueIndex112];
        output += GH.tpl.reports.burnupReport.renderIssueKeyLink({key: issueData112.key}) + ' ' + soy.$$escapeHtml(issueData112.summary) + ' <br />';
      }
    }
    output += '</td><td headers="series-completed-work"><div class="ghx-nowrap">' + ((rowData96.doneChange) ? '<span class=\'ghx-previous-value\'>' + soy.$$escapeHtml(rowData96.doneChange.from) + ' \u2192 </span>' + soy.$$escapeHtml(rowData96.doneChange.to) : soy.$$escapeHtml(rowData96.doneValue)) + '</div></td><td headers="series-scope"><div class="ghx-nowrap">' + ((rowData96.scopeChange) ? '<span class=\'ghx-previous-value\'>' + soy.$$escapeHtml(rowData96.scopeChange.from) + ' \u2192 </span>' + soy.$$escapeHtml(rowData96.scopeChange.to) : soy.$$escapeHtml(rowData96.scopeValue)) + '</div></td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderChartTable.soyTemplateName = 'GH.tpl.reports.burnupReport.renderChartTable';
}


GH.tpl.reports.burnupReport.renderIssueKeyLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.key) + '">' + soy.$$escapeHtml(opt_data.key) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.reports.burnupReport.renderIssueKeyLink.soyTemplateName = 'GH.tpl.reports.burnupReport.renderIssueKeyLink';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupReportView.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view",["require"],function(e){function t(){new d(this)}var i,r,n,a,s,o=e("jquery"),h=e("underscore"),p=e("jira-agile/d3"),d=e("jira-agile/rapid/events"),l=e("jira-agile/rapid/global-events"),u=e("jira-agile/rapid/ui/chart/chart-view"),c=e("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart"),g=e("jira-agile/rapid/const/PageMode"),m=e("jira-agile/rapid/ui/chart/report-sla-tracker"),_=GH.RapidBoard;return l.on("pre-initialization",function(){a=GH.Reports.BurnupChartLegend,s=GH.Reports.ScopeBurndownBySprintChartHowTo,i=GH.Layout,r=GH.Ajax,n=GH.RapidViewConfig}),t.prototype={_chart:null,_legend:null,_howTo:null,_firstRender:!0,_model:null,init:function(e){this._model=e,u.getChartContentElem(!0).html(GH.tpl.reports.burnupReport.renderChartBody()),u.getChartLegendD3(!0).html(GH.tpl.reports.burnupReport.renderLegend()).show();var t=n.currentData.data.id;this._sprintPicker=new GH.ChartPicker("sprintBurnup.selectedSprintId"),o(this._sprintPicker).on("selectedItemChanged",h.bind(this._handleSprintSelected,this)),this._shouldShowEstimatePicker()&&(this._estimatePicker=new GH.EstimatePicker("sprintBurnup.selectedEstimate"),this._estimatePicker.load(t,this._handleEstimateSelected.bind(this))),this._chart=new c,this._legend=a(),this._howTo=s()},destroy:function(){this._chart=null,this._legend=null,this._howTo=null,this._model=null,u.getChartContentElem(!0).empty(),u.getChartLegendD3(!0).empty(),o(GH).unbind(i.EVENT_DELAYED_RESIZE+".sprintBurnupReport")},setSprints:function(e){this._sprintPicker.setItems(e),this._sprintPicker.setDefaultItem(e[0])},update:function(e){this._sprintPicker.setSelectedItem(e.sprintId,!0),this._sprintPicker.render(u.getChartSelector(!0)),this._shouldShowEstimatePicker()&&(this._estimatePicker.setSelectedItem(e.statisticField.id,!0),this._estimatePicker.render(u.getChartControls(!0))),this._renderLegend(),this._renderHowTo(),this._renderChart(e),this.data=e,this._firstRender?(i.bindDelayedWindowResize(),o(GH).bind(i.EVENT_DELAYED_RESIZE+".sprintBurnupReport",h.bind(this._handleWindowResized,this))):u.showChartUpdatedToast(),this._firstRender=!1},updateTable:function(e){if(!this._blankState){var t=this.getTableRows(e.chartData),i=AJS.$(GH.tpl.reports.burnupReport.renderChartTable({rows:t}));u.getChartContentElem(!0).find(".ghx-report-issue-list").empty().append(i)}},showBlankState:function(e){this._blankState=!0;var t=o(GH.tpl.reports.burnupReport.renderBlankStateMessage({planModeUrl:r.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+n.currentData.data.id+"&view=planning&versions=visible",hasNoEstimatedStories:e}));t.find(".js-plan-mode").on("simpleClick",function(e){e.preventDefault(),_.ViewController.setMode(g.PLAN)}),this._chart.hide(p.select("#ghx-sprint-burnup-report")),u.getChartLegendD3(!0).hide(),u.getChartContentElem(!0).find(".ghx-report-issue-list").hide(),u.showBlankStateMessage(t),m.checkReportAndFireSlaEvent(m.reportNames.burnup)},hideBlankState:function(){this._blankState=!1,u.hideBlankStateMessage(),u.getChartLegendD3(!0).show(),u.getChartContentElem(!0).find(".ghx-report-issue-list").show()},showSpinner:function(){u.showSpinner()},hideSpinner:function(){u.hideSpinner()},getTableRows:function(e){function t(e,t){return e.map(function(e){return{key:e,summary:t[e]}})}var i=e.scope[0].value,r=0,n=e.scope.concat(e.work).sort(function(e,t){return e.timestamp>t.timestamp?1:e.timestamp===t.timestamp?0:-1}).map(function(n){var a={timestamp:n.timestamp,dateString:e.formatDate(n.timestamp),issues:t([n.change.key],e.issueToSummary),event:n.change.type,eventString:e.formatEventType(n.change.type)},s="issue done"===n.change.type?parseFloat(n.change.toValue):parseFloat(n.change.toValue)-parseFloat(n.change.fromValue)||0;return"done"===n.change.line&&(r+=s,0===s?a.doneValue=e.formatStatistic(r):a.doneChange={from:e.formatStatistic(r-s),to:e.formatStatistic(r)},a.scopeValue=e.formatStatistic(i)),"scope"===n.change.line&&(i+=s,0===s?a.scopeValue=e.formatStatistic(i):a.scopeChange={from:e.formatStatistic(i-s),to:e.formatStatistic(i)},a.doneValue=e.formatStatistic(r)),a});return n=n.reduce(function(e,t){var i=e.pop();return i?i.timestamp!==t.timestamp||i.event!==t.event||i.issueKey!==t.issueKey||i.doneChange&&t.doneChange||i.scopeChange&&t.scopeChange?(e.push(i),e.push(t),e):(i.doneChange||(i.doneChange=t.doneChange),i.scopeChange||(i.scopeChange=t.scopeChange),e.push(i),e):(e.push(t),e)},[]),n[0].issues=t(e.startKeys,e.issueToSummary),e.sprintCompleted?n[n.length-1].issues=t(e.endKeys,e.issueToSummary):n.pop(),n},_shouldShowEstimatePicker:function(){return!_.State.isAgilityBoard()},_renderLegend:function(){this._blankState||this._legend(p.select(".ghx-chart-legend"))},_renderHowTo:function(){this._blankState||this._howTo(p.select(".ghx-group-how"))},_renderChart:function(e){if(!this._blankState){var t=p.select("#ghx-sprint-burnup-report");t.empty()||(u.getChartGroup().find(".ghx-sprint-goal").remove(),u.getChartGroup().prepend(GH.tpl.board.x.renderSprintGoal({goal:this._sprintPicker.getSelectedItem().goal})),this._chart.show(e,t),m.checkReportAndFireSlaEvent(m.reportNames.burnup))}},_handleSprintSelected:function(e,t){this.trigger("sprintSelected",t.item.id)},_handleEstimateSelected:function(e){this.trigger("estimateSelected",e)},_handleWindowResized:function(){this._renderChart(this.data)}},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupReportController.js' */
define("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller",["require"],function(t){function e(){}var i,r,a,n,s=t("underscore"),o=t("jira-agile/rapid/global-events"),d=t("jira-agile/rapid/analytics-tracker"),l=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view"),p=t("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service"),u=t("jira-agile/rapid/ui/chart/report-sla-tracker"),h=new p,c=GH.RapidBoard;return o.on("pre-initialization",function(){i=GH.PromiseKeeper,r=GH.RapidBoard.State,a=new GH.VersionsDataService,n=new GH.SprintsDataService}),e.prototype={SETTINGS_KEY:"chart.config.sprintBurnup",displayed:!1,_sprints:null,_model:null,_rapidViewData:null,_tracker:null,setRapidView:function(t){this._rapidViewData=t||{}},show:function(){this.displayed=!0,this._tracker=new d("gh.report.burnup"),c.State.pushState();var t=this._view=new l;t.on("sprintSelected",s.bind(function(t){this._model.sprint=t,this._tracker.trigger("sprintChanged"),this.update()},this)).on("estimateSelected",s.bind(function(t){this._model.estimate=t,this._tracker.trigger("estimateChanged"),this.update()},this)).on("optionChanged",s.bind(function(t){this._model.zeroBaseline=t.zeroBaseline,this.update()},this)),t.init(this._model),t.showSpinner(),this._tracker.trigger("show"),this._dataPromiseKeeper=new i;var e=n.getSimpleSprints(this._rapidViewData.id);this._dataPromiseKeeper.add(e).done(s.bind(function(e){this._model||(this._model={}),e.length?(e.reverse(),null==this._model.sprint&&(this._model.sprint=e[0].id),this._sprints=e,t.setSprints(e),this.update(!0)):(this._model.sprint=null,t.showBlankState(!0,!0),this._tracker.trigger("blank"),t.hideSpinner())},this))},hide:function(){this.displayed=!1,this._dataPromiseKeeper&&this._dataPromiseKeeper.reset(),this._view&&(this._view.destroy(),this._view=null),h.clearCache()},update:function(t){var e=this;if(this.isSprintSelectable(e._model.sprint)||(e._model.sprint=e._sprints[0].id),t?c.State.replaceState():c.State.pushState(),null!=this._model.sprint){this.saveState(),e._view.showSpinner();var i=h.get(e._rapidViewData.id,e._model.sprint,e._model.estimate);return e._dataPromiseKeeper.add(i).done(function(t){0===t.chartData.estimatedIssueEvents?(e._view.showBlankState(!0),e._tracker.trigger("blank")):e._view.hideBlankState(),t.chartData.sprintId=e._model.sprint,e._view.setSprints(e._sprints),e._view.update(t.chartData),e._view.updateTable(t)}).fail(function(t,e){"abort"!==t&&u.checkReportAndFireSlaEvent(u.reportNames.burnup,e)}).always(function(t){"abort"!==t&&e._view.hideSpinner()})}},saveState:function(){c.State.setBoardSetting(this.SETTINGS_KEY,this._model)},loadState:function(){this._model=c.State.getBoardSetting(c.State.getRapidViewId(),this.SETTINGS_KEY)},isApplicable:function(t){return t.sprintSupportEnabled||r.isAgilityBoard()},getNormalizedFromInternal:function(){return null===this._model&&this.loadState(),s.defaults(s.clone(this._model),{})},updateInternalFromNormalized:function(t){this._model||this.loadState(),this._model=s.defaults(s.clone(t),this._model)},toUrl:function(t){return{sprint:null!==t.sprint?t.sprint:void 0,estimate:null!==t.estimate?t.estimate:void 0}},isSprintSelectable:function(t){return this._sprints.filter(function(e){return e.id===t}).length>0},getNormalizedFromUrl:function(t){return{sprint:isNaN(t.sprint)?null:+t.sprint,estimate:t.estimate}}},e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChartDialog.js' */
GH.Reports=GH.Reports||{},GH.Reports.BurnupChartDialog=function(){function e(e,t){var a=e.formatStatistic;if(t.change.key){var n=t.change.toValue-t.change.fromValue;return GH.tpl.reports.burnupReport.renderDialogIssueContent({issueKey:t.change.key,issueSummary:e.issueToSummary[t.change.key],fromValue:a(t.change.fromValue),toValue:a(t.change.toValue),totalFromValue:a(t.value-n),totalToValue:a(t.value),eventDescription:e.formatEventType(t.change.type)})}return GH.tpl.reports.burnupReport.renderDialogContent({totalValue:t.value,statistic:e.statisticField.name})}function t(t,a,o){var l=d3.select(t);return l.classed("active",!0),n=GH.SideInlineDialog.create(i,t,function(t,n,i){t.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),t.html(e(a,o)),i()},{addActiveClass:!1,container:r,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,persistent:!0,hideCallback:function(){l.classed("active",!1)}}),n.show(),n}function a(){return!!n&&n.is(":visible")}var n,i="sprint-burnup-issue",r="#ghx-report-scrollarea > .aui-page-panel";return GH.InlineDialog.preventCloseOnClick(i),{show:t,hide:function(){n&&n.hide()},isVisible:a}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChartScrubberDialog.js' */
GH.Reports.BurnupChartScrubberDialog=function(){function e(e){b=e,d=GH.SideInlineDialog.create(h,e,function(e,i,n){e.closest(".aui-inline-dialog").addClass("ghx-inline-dialog ghx-scrubber-dialog"),e.addClass("ghx-scrubber-contents"),e.next("#arrow-"+h).addClass("ghx-arrow-scrubber-dialog"),n()},p),t()}function i(){g=!1}function n(){g=!0}function r(){!GH.Reports.BurnupChartDialog.isVisible()&&g&&d.show()}function t(){GH.InlineDialog.registerInlineDialogHacks(h,{validateClickToCloseFn:function(){return!1}})}function o(){d&&d.hide()}function s(e){l(),a(e),d.refresh()}function a(e){var i;e.time&&(i=GH.tpl.reports.burnupReport.renderScrubberDialogContent({indicatedTime:e.time,scope:e.scope,completedWork:e.completedWork})),c().find(".ghx-scrubber-contents").html(i)}function c(){return AJS.$("#inline-dialog-"+h)}function l(){u()||r()}function u(){return!!d&&d.is(":visible")}var d,b,g=!0,h="scrubber-dialog",f="#ghx-chart-group",p={container:f,fadeTime:0,noBind:!0,cacheContent:!1,hideDelay:6e4,width:230,closeOthers:!1,persistent:!0,addActiveClass:!1};return{init:e,show:r,hide:o,isVisible:u,refresh:s,disable:i,enable:n}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/ui/chart/v2/burnup/BurnupChartScrubber.js' */
GH.Reports.BurnupChartScrubber=function(){function r(){GH.Reports.BurnupChartScrubberDialog.disable()}function e(){GH.Reports.BurnupChartScrubberDialog.enable()}function t(){GH.Reports.BurnupChartScrubberDialog.show()}function n(){GH.Reports.BurnupChartScrubberDialog.hide()}function i(){s.hideScrubber()}function u(){b.cancelDrag()}function a(r,e){for(var t=r.length-1;t>=0;t--)if(r[t].timestamp<=e)return r[t].value;return r[0].value}function o(){var r=this.mouseCoordinates(),e=this.xScale().invert,t=this.data();if(r){var n=e(r[0]);GH.Reports.BurnupChartScrubberDialog.refresh({time:t.formatDate(n),scope:t.formatStatistic(a(this.data().scope,n)),completedWork:t.formatStatistic(a(this.data().work,n))})}}function c(){var r=this.selection();s.parent(this),s.interactiveLayer(this),s(r),b.parent(this),b.interactiveLayer(this),b(r),GH.Reports.BurnupChartScrubberDialog.init(s.elements()[0]);var e=this;this.mouseover(function(){t.call(e)}),this.mousemove("ccscrubber",function(){o.call(e)}),this.mouseout(function(){n.call(e)})}var s=c3.scrubber().elementClass("ghx-scrubber").shouldHideScrubber(function(){return GH.Reports.BurnupChartDialog.isVisible()}),b=c3.brush().elementClass("ghx-chart-brush").onDrag(function(){GH.Reports.BurnupChartDialog.hide()});return c3.component().extend(_.once(c)).extend(u).extend({hideScrubber:i,disableScrubber:r,enableScrubber:e})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-charts-js-resources', location = 'jira-agile-module/includes/js/rapid/LegacyReportsNamespaces.js' */
AJS.namespace("GH.BurndownChartController",null,require("jira-agile/rapid/ui/chart/burndown-chart-controller")),AJS.namespace("GH.BurndownChartModel",null,require("jira-agile/rapid/ui/chart/burndown-chart-model")),AJS.namespace("GH.BurndownChartView",null,require("jira-agile/rapid/ui/chart/burndown-chart-view")),AJS.namespace("GH.BurndownRate",null,require("jira-agile/rapid/ui/chart/burndown-rate")),AJS.namespace("GH.BurndownReportChartController",null,require("jira-agile/rapid/ui/chart/burndown-report-chart-controller")),AJS.namespace("GH.BurndownTableProducer",null,require("jira-agile/rapid/ui/chart/burndown-table-producer")),AJS.namespace("GH.BurndownTimelineProducer",null,require("jira-agile/rapid/ui/chart/burndown-timeline-producer")),AJS.namespace("GH.CFD.Data",null,require("jira-agile/rapid/ui/chart/cfd-data")),AJS.namespace("GH.CFDController",null,require("jira-agile/rapid/ui/chart/cfd-controller")),AJS.namespace("GH.CFDView",null,require("jira-agile/rapid/ui/chart/cfd-view")),AJS.namespace("GH.ChangeEvent",null,require("jira-agile/rapid/ui/chart/change-event")),AJS.namespace("GH.ChangesReportModel",null,require("jira-agile/rapid/ui/chart/changes-report-model")),AJS.namespace("GH.Chart",null,require("jira-agile/rapid/ui/chart/chart")),AJS.namespace("GH.ChartColors",null,require("jira-agile/rapid/ui/chart/chart-colors")),AJS.namespace("GH.ChartController",null,require("jira-agile/rapid/ui/chart/chart-controller")),AJS.namespace("GH.ChartView",null,require("jira-agile/rapid/ui/chart/chart-view")),AJS.namespace("GH.NonWorkingDaysUtils",null,require("jira-agile/rapid/ui/chart/non-working-days-util")),AJS.namespace("GH.ReleaseDatePredictor",null,require("jira-agile/rapid/ui/chart/release-date-predictor")),AJS.namespace("GH.ReportController",null,require("jira-agile/rapid/ui/chart/report-controller")),AJS.namespace("GH.Reports.ControlChartController",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-controller")),AJS.namespace("GH.Reports.ControlChartDataService",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-data-service")),AJS.namespace("GH.Reports.ControlChartView",null,require("jira-agile/rapid/ui/chart/v2/controlchart/control-chart-view")),AJS.namespace("GH.Reports.EpicBurndownChartDataService",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-data-service")),AJS.namespace("GH.Reports.EpicBurndownChartTableDataService",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-chart-table-data-service")),AJS.namespace("GH.Reports.EpicBurndownReportController",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-controller")),AJS.namespace("GH.Reports.EpicBurndownReportView",null,require("jira-agile/rapid/ui/chart/v2/epicburndown/epic-burndown-report-view")),AJS.namespace("GH.Reports.ReleaseBurndownChartDataService",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-data-service")),AJS.namespace("GH.Reports.ReleaseBurndownChartTableDataService",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-chart-table-data-service")),AJS.namespace("GH.Reports.ReleaseBurndownReportController",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-controller")),AJS.namespace("GH.Reports.ReleaseBurndownReportView",null,require("jira-agile/rapid/ui/chart/v2/releaseburndown/release-burndown-report-view")),AJS.namespace("GH.Reports.BurnupReportView",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-view")),AJS.namespace("GH.Reports.BurnupReportController",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-report-controller")),AJS.namespace("GH.Reports.BurnupChartDataService",null,require("jira-agile/rapid/ui/chart/v2/burnup/burnup-chart-data-service")),AJS.namespace("GH.VersionReport",null,require("jira-agile/rapid/ui/chart/version-report")),AJS.namespace("GH.VersionReportController",null,require("jira-agile/rapid/ui/chart/version-report-controller")),AJS.namespace("GH.VersionReportModel",null,require("jira-agile/rapid/ui/chart/version-report-model")),AJS.namespace("GH.VersionReportView",null,require("jira-agile/rapid/ui/chart/version-report-view")),AJS.namespace("GH.EstimatePicker",null,require("jira-agile/rapid/ui/component/estimate-picker")),AJS.namespace("GH.ChartPicker",null,require("jira-agile/rapid/ui/component/chart-picker"));;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-helppath-constants.js-gh-hp' */
/*globals GH*/
define('jira/inline-issue-create/agile/helppath-constants', [], function () {

    "use strict";

    // watch out for the gh-jsHelpPaths transformer - the invocations must go inline
    return {
        configureBoard: GH && {"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Creating+issues+and+sub-tasks","isLocal":false} || {}
    };
});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = 'inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.InlineIssueCreate&&(JIRA.Templates.InlineIssueCreate={}),"undefined"==typeof JIRA.Templates.InlineIssueCreate.Agile&&(JIRA.Templates.InlineIssueCreate.Agile={}),JIRA.Templates.InlineIssueCreate.Agile.description=function(e,i){var t='<div class="iic-widget__description'+(e.issueTypeName?"":" iic-widget__description_invisible")+'">'+soy.$$escapeHtml("New")+' <span class="iic-widget__description__selected-issue-type-name">'+(e.issueTypeName?soy.$$escapeHtml(e.issueTypeName):"")+"</span> "+soy.$$escapeHtml("in")+" ";if(e.sections.length>=1){t+='<button type="button" aria-owns="iic-widget__description__section-select-'+soy.$$escapeHtml(e.widgetId)+'" aria-haspopup="true" class="iic-widget__description__section-select-trigger aui-button aui-button-subtle aui-dropdown2-trigger aui-style-default">'+soy.$$escapeHtml(e.currentSection)+'</button><div id="iic-widget__description__section-select-'+soy.$$escapeHtml(e.widgetId)+'" data-aui-alignment="top left" class="iic-widget__description__section-select aui-dropdown2 aui-style-default"><ul class="aui-list-truncate">';for(var s=e.sections,n=s.length,a=0;a<n;a++){var o=s[a];t+='<li><a href="#" data-section-id="'+soy.$$escapeHtml(o.id)+'">'+soy.$$escapeHtml(o.translatedName)+"</a></li>"}t+="</ul></div><!-- .aui-dropdown2 -->"}else t+=soy.$$escapeHtml(e.currentSection);return t+="</div>"},JIRA.Templates.InlineIssueCreate.Agile.configurationIssue=function(e,i){return""+soy.$$escapeHtml("Due to the configuration for this particular board, you\'ll have to use the full dialog to create a new issue.")+(e.url?' <a href="'+soy.$$escapeHtml(e.url)+'" target="_blank" rel="noopener">'+soy.$$escapeHtml("Learn more")+"</a>":"")};;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-issue-types.js' */
define("jira/inline-issue-create/agile/entities/issue-types",["jira/inline-issue-create/entities/issue-types"],function(e){"use strict";function t(){return!!GH.RapidBoard.State.epicsAsCardsEnabled&&GH.RapidBoard.State.epicsAsCardsEnabled()}var i=e.extend({parse:function(t){var i=e.prototype.parse.apply(this,arguments);return this.filterOutGHEpics(i)},reset:function(t){var i=this.filterOutGHEpics(t);return e.prototype.reset.apply(this,[i])},filterOutGHEpics:function(e){var i=GH.EpicConfig.getEpicIssueTypeId();return e&&i&&!t()?_.filter(e,function(e){return e.id!==i}):e}});return i});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-description.js' */
define("jira/inline-issue-create/agile/views/description",["jira/inline-issue-create/views/description","jquery","underscore"],function(e,i,t){"use strict";var o=e.extend({template:JIRA.Templates.InlineIssueCreate.Agile.description,ui:{selectedIssueTypeName:".iic-widget__description__selected-issue-type-name",sectionDropdownTrigger:".iic-widget__description__section-select-trigger",sectionDropdownItem:".iic-widget__description__section-select a",sectionDropdown:".iic-widget__description__section-select"},modelEvents:t.extend({"change:lockState":function(e,i){i===this.model.constants.STATE_LOCK_SENDING?this.disable():this.enable()}},e.prototype.modelEvents),initialize:function(){t.bindAll(this,"onDropdownShow","onItemClick")},onRender:function(){this.unwrapTemplate(),this.ui.sectionDropdown.on("aui-dropdown2-show",this.onDropdownShow),this.ui.sectionDropdownItem.on("click",this.onItemClick)},onDropdownShow:function(e){var t=this.ui.sectionDropdown;t.appendTo(this.$el);var o=this.ui.sectionDropdownTrigger.offset(),n=this.ui.sectionDropdownTrigger.position(),s=this.ui.sectionDropdownTrigger.outerHeight(),r=t.height(),c=i("body").outerHeight(!0)<o.top+s+r;t.css({left:n.left,top:(c?n.top-r:n.top+s)+"px"}),c&&(t.addClass("aui-dropdown2-alignment-top"),this.ui.sectionDropdownTrigger.addClass("iic-widget__issue-type-selector__trigger_opened-up"))},onItemClick:function(e){this.trigger("selected",i(e.target))},disable:function(){this.ui.sectionDropdownTrigger.attr&&this.ui.sectionDropdownTrigger.attr("aria-disabled",!0)},enable:function(){this.ui.sectionDropdownTrigger.attr&&this.ui.sectionDropdownTrigger.attr("aria-disabled",!1)},serializeData:function(){var e={},i=this.allSections.get(this.currentSectionId);this.model.getSelectedIssueType()&&(e=this.model.getSelectedIssueType().toJSON());var t=this.currentSectionId||-1,o=this.allSections.toJSON().filter(function(e){return e.id!==t});return{issueTypeName:e.name,widgetId:this.model.cid,currentSection:i?i.getTranslatedName():"",sections:o}}});return o});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-widget.js' */
define("jira/inline-issue-create/agile/widget",["jira/inline-issue-create/widget","jira/inline-issue-create/agile/helppath-constants","jira/featureflags/feature-manager"],function(e,i,t){"use strict";var a=e.extend({activate:function(){if(this.model.getLockState()===this.model.constants.STATE_LOCK_PERM_INACTIVE){var a=this.openCreateIssueDialog(),n=!1;return t.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&window.IssueCreate&&window.IssueCreate.Visibility&&(n=window.IssueCreate.Visibility.isEnabled),n||a.done(function(e){e.onContentReady(function(){JIRA.applyMessageToForm("info",e.$form,JIRA.Templates.InlineIssueCreate.Agile.configurationIssue({url:i.configureBoard.url}),!0)})}),!1}return e.prototype.activate.call(this)}});return a});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-group.js' */
define("jira/inline-issue-create/agile/widget-group",["jira/inline-issue-create/agile/widget","jira/inline-issue-create/agile/issue-type-dropdown","jira/inline-issue-create/widget-group","jquery","jira/inline-issue-create/util","internal/browser-metrics","jira/featureflags/feature-manager"],function(e,i,t,r,s,n,a){"use strict";return t.extend({initialize:function(){t.prototype.initialize.apply(this,arguments),this.Widget=e,this.boardJQL=void 0,this.filterJQLs=void 0,_.bindAll(this,"issueCreatedHandler","addOverridesOnBeforeIssueCreated"),this.on("widget:rendered",this.widgetRenderedHandler),this.widgetOptions.dropdownView=i,this.widgetOptions.isAgility=function(){return GH.RapidBoard.State.isAgilityBoard()}},widgetRenderedHandler:function(e,i,t){var r=t.parent(".ghx-meta");r.addClass("plan-inline-create-inside")},issueCreatedHandler:function(e,i,t){var a=this;t.analytics.triggerAnalytics("plan.created");var o=GH.BacklogView._scrollToView;GH.BacklogView._scrollToView=r.noop;var d=r("#ghx-backlog"),l=d.scrollTop();GH.BacklogController.reloadAndSelectCreatedIssues([e]).done(function(){GH.BacklogView._scrollToView=o,GH.BacklogModel.isIssueVisible(e.issueKey)||t.analytics.triggerAnalytics("plan.createdNotVisible"),d.scrollTop(l),s.scrollElementToView(d,t.view.$el),t.model.getLockState()!==t.model.constants.STATE_LOCK_PERM_INACTIVE&&a.activateWidget(t),n.end({key:"jira.agile.create.inline.issue.submit"}),JIRA.trace("inline.create.backlog.refreshed")})},addOverridesOnBeforeIssueCreated:function(e,i){i.overrides=i.overrides||{};var t=GH.EpicController.getFilteredEpicKey();if(t&&"none"!==t){var r=GH.EpicConfig.getEpicLinkFieldName();i.overrides[r]=t}var s=GH.VersionController.getFilteredVersionId();s&&"none"!==s&&(i.overrides.fixVersion=s)},_createNewWidget:function(e){var i=t.prototype._createNewWidget.apply(this,arguments);return i.widget.on("beforeIssueCreated",this.addOverridesOnBeforeIssueCreated),i.widget.on("issueCreated",this.issueCreatedHandler),i},setBoardJQL:function(e){this.boardJQL=e,this._syncJQLs()},_syncJQLs:function(){var e=[];this.boardJQL&&e.push(this.boardJQL),e.push.apply(e,this.filterJQLs),e.length&&this.setCurrentJqls(e)},setFilterJQLs:function(e){this.filterJQLs=e,this._syncJQLs()}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-type-dropdown.js' */
define("jira/inline-issue-create/agile/issue-type-dropdown",["jquery","jira/inline-issue-create/util","jira/inline-issue-create/views/issue-type-dropdown"],function(i,t,e){"use strict";return e.extend({initialize:function(i){e.prototype.initialize.apply(this,arguments),this.options.isAgility=GH.RapidBoard.State.isAgilityBoard()},calculateDropdownDirectionAndHeightPosition:function(){var e=this.ui.issueTypeIcon.outerHeight(),o=this.ui.issueTypeIcon.offset().top,n=this.ui.issueTypeDropdown.outerHeight(),s=i("#ghx-backlog").offset().top,u=o-s,l=i("body").outerHeight(!0)-(o+e);return t.trace(this,"spaceBelow",l,"visibleSpaceAbove",u,"dropdownContentHeight",n),l>n?(t.debug(this,"Positioning down - full"),{vAlignment:"bottom"}):u>n?(t.debug(this,"Positioning up - full"),{vAlignment:"top"}):l>u?(t.debug(this,"Positioning down - limited",l),{vAlignment:"bottom",limitHeight:l-10}):(t.debug(this,"Positioning up - limited",u),{vAlignment:"top",limitHeight:u-10})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:widget-jag-plan-initialiser-common', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-initialiser.js' */
define("jira/inline-issue-create/agile/initialiser",["jquery","underscore","jira/inline-issue-create/util","jira/inline-issue-create/lib/brace","jira/inline-issue-create/entities/inline-bootstrap","jira/inline-issue-create/agile/widget-group","jira/inline-issue-create/agile/entities/issue-types","jira/inline-issue-create/agile/views/description","jira/inline-issue-create/views/default-trigger","jira-agile/rapid/ui/plan/plan-controller","jira-agile/rapid/ui/plan/backlog-controller","jira-agile/rapid/ui/plan/backlog-model","jira-agile/rapid/ui/plan/sprint-backlog-view","jira-agile/rapid/ui/plan/sprint-view","jira-agile/rapid/ui/plan/plan-controls","jira/featureflags/feature-manager","jira/inline-issue-create/agile/helppath-constants","exports"],function(e,i,t,a,r,n,s,d,o,l,c,g,u,p,f,S,w,v){"use strict";function j(){var e=i.filter(f.quickfilters.getQuickFilters(),function(e){return e.isActive}),t=i.map(e,function(e){return e.query});G.setFilterJQLs(t)}function I(){j(),C.reset(),V.fireWhenInitialized(function(){V.getHasCreateIssuePermission()&&(V.getHasScheduleIssuePermission()&&g.getFutureSprintModels().forEach(function(e){C.add(new R({id:""+e.sprintData.id,translatedName:e.sprintData.name}))}),C.add(new R({id:"backlog",translatedName:"Backlog"})))}),C.trigger("refreshed")}function h(e){if(!e||e.model.getLockState()===e.model.constants.STATE_LOCK_PERM_INACTIVE)return!1;if("pending"===J.state())return!1;var i=g.getBacklogModel2().getIssueList(),t=GH.BacklogStatistics.getIssueListStats(i,!1);if(0===t.totalCount){var a=GH.RapidBoard.State.isAgilityBoard();if(!a)return 0===g.getSprintModels().length;var r=g.getSprintModels();return 1===r.length&&0===r[0].issueList.data.order.length}}function b(){j(),V.fireWhenInitialized(function(){J.then(function(){if(V.getHasCreateIssuePermission()){var i=G.getWidget("backlog");if(i.render(e("#ghx-content-group .ghx-backlog-group .js-issue-list")),h(i.widget)){var t=i.widget.model;t.getIssueTypes()&&t.setSelectedIssueType(t.getIssueTypes().at(0)),G.activateWidget(i.widget)}}})}),JIRA.trace("inline.create.backlog.rendered")}function B(){A!==GH.RapidBoard.State.getRapidViewId()&&(A=GH.RapidBoard.State.getRapidViewId(),JIRA.trace("inline.create.boardjql.fetching"),S.isFeatureEnabled("jsw.classic.backlog.remove-editmodel-use-config")?GH.RapidViewConfig.fetchConfiguration(GH.RapidBoard.State.getRapidViewId()).done(function(e){var i=e.query;G.setBoardJQL(i),JIRA.trace("inline.create.boardjql.fetched")}):GH.Ajax.get({url:"/rapidviewconfig/editmodel.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId()},deferErrorHandling:!0},"rapidBoardJQL").done(function(e){var i=e.filterConfig.query;G.setBoardJQL(i),JIRA.trace("inline.create.boardjql.fetched")}))}function k(e,i){if(j(),!i.isActiveSprint()){var t=i.getSprintData().id;V.fireWhenInitialized(function(){V.getHasCreateIssuePermission()&&V.getHasScheduleIssuePermission()&&G.getWidget(t).render(e.find(".ghx-issues"))})}}if(!(AJS&&AJS.DarkFeatures&&AJS.DarkFeatures.isEnabled("jira.inline.issue.create.disable"))){var m=o.extend({serializeData:function(){return{cssClass:"iic-agile-plan",isAgility:GH.RapidBoard.State.isAgilityBoard()}}});S.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")&&(m=o.extend({serializeData:function(){return{cssClass:"iic-agile-plan",isAgility:GH.RapidBoard.State.isAgilityBoard()}},configureBoardUrl:function(){return w.configureBoard.url}}));var A,R=a.Model.extend({namedAttributes:{id:"string",translatedName:"string"}}),H=a.Collection.extend({model:R}),C=new H,y=r.extend({issueTypesCollectionType:s}),V=new y,G=new n({TriggerView:m,inlineBootstrap:V,widgetOptions:{descriptionView:d},createdCallback:function(i,t){"backlog"!==t&&i.setOverrides({Sprint:t}),i.descriptionView.currentSectionId=""+t,i.descriptionView.allSections=C,i.listenTo(i.descriptionView.allSections,"refreshed",function(){this.render()}),i.descriptionView.on("selected",function(i){var t=e(i),a=t.data("section-id");G.activateWidget(G.getWidget(a).widget)})}}),J=e.Deferred(),x=i.once(function(){t.after(g,"setData",function(){J.resolve(),I()}),t.after(g,"updateDataForSprint",I),t.after(p,"renderAllSprints",I),t.after(u,"renderBacklog",b),t.after(f.quickfilters,"setActiveQuickFilters",j),t.after(u,"updateBacklog",b),t.after(c,"updateEpicFiltering",b),t.after(c,"updateVersionFiltering",b),t.after(p,"_renderSprintContent",k),t.after(GH.RapidBoard,"refreshBoardData",B),t.after(GH.RapidBoard.ViewController,"setMode",B);var i=g.getSprintModels();B(),b(),i.forEach(function(i){var t=e('.js-sprint-container[data-sprint-id="'+i.getSprintId()+'"]');k(t,i)})});v.init=i.once(function(){l.isActive()?x():t.after(l,"initializePlanMode",x)})}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:backbone-paginator', location = 'jira-projects-module/sidebar/lib/backbone.paginator.adapter.js' */
define("jira/projects/libs/backbone.paginator",["backbone","underscore","atlassian/libs/factories/backbone.paginator-2.0.2"],function(a,e,n){"use strict";return n(e,a)}),AJS.namespace("Backbone.PageableCollection",null,require("jira/projects/libs/backbone.paginator"));;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Projects&&(JIRA.Projects={}),"undefined"==typeof JIRA.Projects.AbstractList&&(JIRA.Projects.AbstractList={}),"undefined"==typeof JIRA.Projects.AbstractList.Templates&&(JIRA.Projects.AbstractList.Templates={}),JIRA.Projects.AbstractList.Templates.pagination=function(e,t){var a='<ol data-total="'+soy.$$escapeHtml(e.totalPages)+'" class="aui-nav aui-nav-pagination'+(e.cssClass?" "+soy.$$escapeHtml(e.cssClass):"")+'">';if(e.firstPage<e.lastPage){a+='<li class="aui-nav-previous"><a href="'+soy.$$escapeHtml(e.url)+"&amp;page="+(e.currentPage==e.firstPage?"0":soy.$$escapeHtml(e.currentPage-1))+'" '+(e.currentPage==e.firstPage?'aria-disabled="true"':'data-page="'+(e.currentPage==e.firstPage?"0":soy.$$escapeHtml(e.currentPage-1))+'"')+">"+soy.$$escapeHtml("Previous")+"</a></li>";for(var s=e.firstPage,o=e.lastPage+1,r=s;r<o;r++)a+=r==e.currentPage?'<li class="aui-nav-page aui-nav-selected">'+soy.$$escapeHtml(r)+"</li>":'<li><a href="'+soy.$$escapeHtml(e.url)+"&amp;page="+soy.$$escapeHtml(r)+'" data-page="'+soy.$$escapeHtml(r)+'">'+soy.$$escapeHtml(r)+"</a></li>";a+='<li class="aui-nav-next"><a href="'+soy.$$escapeHtml(e.url)+"&amp;page="+(e.currentPage==e.lastPage?soy.$$escapeHtml(e.lastPage):soy.$$escapeHtml(e.currentPage+1))+'"'+(e.currentPage==e.lastPage?'aria-disabled="true"':'data-page="'+(e.currentPage==e.lastPage?soy.$$escapeHtml(e.lastPage):soy.$$escapeHtml(e.currentPage+1))+'"')+">"+soy.$$escapeHtml("Next")+"</a></li>"}return a+="</ol>"},JIRA.Projects.AbstractList.Templates.actionsError=function(e,t){return'<div class="operation-retry '+soy.$$escapeHtml(e.class)+'"><div>'+aui.icons.icon({icon:"info",useIconFont:!0})+'<a href="#" class="operation-retry">'+soy.$$escapeHtml("Retry")+'</a><a href="#" tabindex="0" class="aui-icon aui-icon-small aui-iconfont-remove operation-discard" title="'+soy.$$escapeHtml("Discard")+'">'+soy.$$escapeHtml("Discard")+"</a></div></div>"},JIRA.Projects.AbstractList.Templates.tableLayoutCommon=function(e,t){return'<table id="'+(e.id?soy.$$escapeHtml(e.id):"items-table")+'" class="aui dynamic-table '+(e.class?soy.$$escapeHtml(e.class):"")+'"><tbody class="header">'+soy.$$filterNoAutoescape(e.headerRow)+'</tbody><tbody class="items"></tbody></table>'},JIRA.Projects.AbstractList.Templates.searchLayout=function(e,t){return'<div id="filter-container"></div><div class="header-ending"></div>'+aui.page.pagePanelContent({content:'<div id="content-container"></div>',extraClasses:"aui-page-panel-content-no-table"})+'<div id="submit-container"></div>'},JIRA.Projects.AbstractList.Templates.actionsSuccess=function(e,t){return'<div class="operation-success">'+aui.icons.icon({icon:"approve",useIconFont:!0})+"</div>"},JIRA.Projects.AbstractList.Templates.deleteError=function(e,t){return"<p><b>"+soy.$$escapeHtml(e.name)+"</b> "+soy.$$escapeHtml("couldn\'t be deleted.")+"</p>"+aui.buttons.button({text:"Retry",type:"link",extraClasses:"dynamic_table__retry"})};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/lib/backbone.queryparams.js' */
/*! THIS FILE HAS BEEN MODIFIED BY ATLASSIAN, SEE https://github.com/jhudson8/backbone-query-parameters/pull/63/files */
!function(t,e){"object"==typeof exports&&t.require?module.exports=e(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],function(r,n){return e(r||t._,n||t.Backbone)}):e(_,Backbone)}(this,function(t,e){function r(e,r,n){t.each(Array.prototype.slice.call(arguments,2),function(t){Object.defineProperty(r,t,{get:function(){return e[t]},set:function(r){e[t]=r}})})}function n(t){var e=t.location,n={};r(e,n,"assign","ancestorOrigins","origin","hash","search","pathname","port","hostname","host","protocol","href","reload"),n.replace=function(){e.replace(t.root+"#"+t.fragment)},n.unPatch=function(){return t.location=e},t.location=n}function a(t){var e=t.history,n={};r(e,n,"length","state","back","forward","go","pushState"),n.replaceState=function(r,n,a){return a=t.root+t.fragment,e.replaceState(r,n,a)},n.unPatch=function(){t.history=e},t.history=n}function i(e,r){var n=e.split("&");t.each(n,function(t){var e=t.split("=");r(e.shift(),e.join("="))})}var o=/^\?(.*)/,s=/\((.*?)\)/g,c=/(\(\?)?:\w+/g,u=/\*\w+/g,h=/[\-{}\[\]+?.,\\\^$|#\s]/g,l=/^([^\?]*)/,p=/[\:\*]([^\:\?\/]+)/g,f=/^[#\/]|\s+$/g,m=/\/$/;e.Router.arrayValueSplit="|";var d=function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=this.location.pathname;var r=this.root.replace(m,""),n=this.location.search;t.indexOf(r)||(t=t.substr(r.length)),n&&(t+=n)}else t=this.getHash();return t.replace(f,"")};r.isSupported=function(){try{return Object.defineProperty({},"x",{}),!0}catch(t){return!1}}();var g=e.History.prototype.start,y=e.History.prototype.loadUrl;t.extend(e.History.prototype,{getFragment:d,getQueryParameters:function(e,r){e=d.apply(this,arguments);var n=e.replace(l,""),a=n.match(o);if(a){n=a[1];var s={};return i(n,function(e,r){r=r.replace(/\+/g,"%20"),r=decodeURIComponent(r),s[e]?t.isString(s[e])?s[e]=[s[e],r]:s[e].push(r):s[e]=r}),s}return{}},start:function(){r.isSupported&&(n(this),a(this));try{return g.apply(this,arguments)}finally{this.location.unPatch&&this.location.unPatch(),this.history.unPatch&&this.history.unPatch()}},loadUrl:function(){return this.location&&this.location.unPatch&&this.location.unPatch(),this.history&&this.history.unPatch&&this.history.unPatch(),y.apply(this,arguments)}}),t.extend(e.Router.prototype,{initialize:function(t){this.encodedSplatParts=t&&t.encodedSplatParts},getFragment:d,_routeToRegExp:function(e){var r=u.exec(e)||{index:-1},n=c.exec(e)||{index:-1},a=e.match(p)||[];e=e.replace(h,"\\$&").replace(s,"(?:$1)?").replace(c,function(t,e){return e?t:"([^\\/\\?]+)"}).replace(u,"([^??]*?)"),e+="(\\?.*)?";var i=new RegExp("^"+e+"$");return r.index>=0&&(n>=0?i.splatMatch=r.index-n.index:i.splatMatch=-1),i.paramNames=t.map(a,function(t){return t.substring(1)}),i.namedParameters=this.namedParameters,i},_extractParameters:function(r,n){var a=r.exec(n).slice(1),s={};a.length>0&&t.isUndefined(a[a.length-1])&&a.splice(a.length-1,1);var c=a.length&&a[a.length-1]&&a[a.length-1].match(o);if(c){var u=c[1],h={};if(u){var l=this;i(u,function(t,e){l._setParamValue(t,e,h)})}a[a.length-1]=h,t.extend(s,h)}var p=a.length;if(r.splatMatch&&this.encodedSplatParts){if(r.splatMatch<0)return a;p-=1}for(var f=0;f<p;f++)t.isString(a[f])&&(a[f]=decodeURIComponent(a[f]),r.paramNames&&r.paramNames.length>=f-1&&(s[r.paramNames[f]]=a[f]));return e.Router.namedParameters||r.namedParameters?[s]:a},_setParamValue:function(t,e,r){t=t.replace("[]","");for(var n=t.split("."),a=r,i=0;i<n.length;i++){var o=n[i];i===n.length-1?a[o]=this._decodeParamValue(e,a[o]):a=a[o]=a[o]||{}}},_decodeParamValue:function(r,n){r=r.replace(/\+/g,"%20");var a=e.Router.arrayValueSplit;if(a&&r.indexOf(a)>=0){for(var i=r.split(a),o=i.length-1;o>=0;o--)i[o]?i[o]=decodeURIComponent(i[o]):i.splice(o,1);return i}return r=decodeURIComponent(r),n?t.isArray(n)?(n.push(r),n):[n,r]:r},toFragment:function(e,r){return r&&(t.isString(r)||(r=this._toQueryString(r)),r&&(e+="?"+r)),e},_toQueryString:function(r,n){function a(t){return String(t).replace(i,encodeURIComponent(i))}var i=e.Router.arrayValueSplit;if(!r)return"";n=n||"";var o="";for(var s in r){var c=r[s];if(t.isString(c)||t.isNumber(c)||t.isBoolean(c)||t.isDate(c))c=this._toQueryParam(c),(t.isBoolean(c)||t.isNumber(c)||t.isString(c)||c)&&(o+=(o?"&":"")+this._toQueryParamName(s,n)+"="+a(encodeURIComponent(c)));else if(t.isArray(c)){for(var u="",h=0;h<c.length;h++){var l=this._toQueryParam(c[h]);(t.isBoolean(l)||null!==l)&&(u+=i+a(l))}u&&(o+=(o?"&":"")+this._toQueryParamName(s,n)+"="+u)}else{var p=this._toQueryString(c,this._toQueryParamName(s,n,!0));p&&(o+=(o?"&":"")+p)}}return o},_toQueryParamName:function(t,e,r){return e+t+(r?".":"")},_toQueryParam:function(e){return t.isNull(e)||t.isUndefined(e)?null:e}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/Effects.js' */
define("jira/projects/abstract-list/effects",["jquery"],function(e){"use strict";return{onCollectionRemove:function(t){var i=e.Deferred(),r=this.children.findByModel(t);return r?(r.$el.addClass("transition-destroy"),r.$("td > div").animate({height:0},500,function(){this.removeChildView(r),this.checkEmpty(),i.resolve()}.bind(this))):i.resolve(),i}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/ItemCollectionView.js' */
define("jira/projects/abstract-list/item-collection-view",["jira/projects/abstract-list/effects","jira/projects/libs/marionette","jira/projects/abstract-list/lazy-loading-collection","jquery","underscore"],function(e,t,i,n,l){"use strict";var o=t.CollectionView.extend({tagName:"tbody",initialize:function(e){if(!e.collection instanceof i)throw"Collection should extend LazyLoadingCollection";var t=l.debounce(this._checkScroll,o.SCROLL_DEBOUNCE,!0).bind(this);n(window).on("scroll.infiniteScroll",t),this.checkInterval=setInterval(t,o.CHECK_INTERVAL)},onDestroy:function(){n(window).off("scroll.infiniteScroll"),clearInterval(this.checkInterval)},_checkScroll:function(e){var t=this.children.last();t.$el.isInView()&&this._nextPage(e),JIRA.trace("jira.projects.scroll.checked")},_nextPage:function(e){e&&e.preventDefault();var t=this.collection.nextPage();t&&this.trigger("infiniteScrollEvent",{elementsLoaded:this.collection.elementsLeft().elementsLoaded,elementsLeft:this.collection.elementsLeft().elementsLeft})},_onCollectionRemove:e.onCollectionRemove});return o.SCROLL_DEBOUNCE=50,o.CHECK_INTERVAL=1e3,o});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/TableLayoutView.js' */
define("jira/projects/abstract-list/table-layout-view",["jira/projects/libs/marionette","backbone"],function(t,e){"use strict";var i=t.LayoutView.extend({regions:{itemsRegion:".items"},initialize:function(t){this.collection=t.collection,this.submitController=t.submitController},onRender:function(){this.itemsRegion.attachHtml=this._attachHtmlReplaceRegionWrapper;var t=new this.ItemCollectionView({collection:this.collection,submitController:this.submitController,className:"items"});this.itemsRegion.show(t)},_attachHtmlReplaceRegionWrapper:function(t){this.$el.replaceWith(t.el)}});return i});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/queryStringParam.js' */
!function(){"use strict";function t(t,s,i){if(i=i||window.location,t){var a=i.search.substr(1).split("&");s&&(a=a.concat(i.hash.substr(1).split("&")));for(var r=a.length-1;r>=0;r--){var e=a[r].split("=");if(2==e.length&&t===e[0])return decodeURIComponent(e[1].replace(/\+/g," "))}}}AJS.namespace("JIRA.Projects.AbstractList.NavigationUtils"),JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam=t}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/NavigationUtils.js' */
!function(){"use strict";var t=require("atlassian/libs/uri-1.14.1");AJS.namespace("JIRA.Projects.AbstractList.NavigationUtils"),JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported=!!history.pushState,JIRA.Projects.AbstractList.NavigationUtils.getBackboneHistoryRoot=function(){return JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported?"":JIRA.Projects.AbstractList.NavigationUtils.getRoot()},JIRA.Projects.AbstractList.NavigationUtils.getRoot=function(){var t=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("selectedItem");return document.location.pathname+(t?"?selectedItem="+t:"?")},JIRA.Projects.AbstractList.NavigationUtils.navigate=function(t){JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported&&(t=JIRA.Projects.AbstractList.NavigationUtils.getRoot()+t),Backbone.history.navigate(t)},JIRA.Projects.AbstractList.NavigationUtils.append=function(i,a){var s=new t(location.href);s=s.addSearch(i,a),history.replaceState(null,"",s.href())}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/FilterModel.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.FilterModel"),JIRA.Projects.AbstractList.FilterModel=Backbone.Model.extend({filterAttributes:[],initialize:function(t){this.pageableCollection=t.pageableCollection,delete this.attributes.pageableCollection},filterCollection:function(){var t=this.pageableCollection.originalCollection;this.pageableCollection.fullCollection.reset(t),this.pageableCollection.getPage("first")},navigate:function(){JIRA.Projects.AbstractList.NavigationUtils.navigate(this.getFilterQueryStringParams()),this.trigger("navigate")},getFilterQueryStringParams:function(){var t=this.filterAttributes.reduce(function(t,e){var i=this.get(e);return i?t+"&"+encodeURIComponent(e)+"="+encodeURIComponent(i):t}.bind(this),"");return JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported||(t=t.substr(1)),t}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/ItemModel.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.ItemModel"),JIRA.Projects.AbstractList.ItemModel=Backbone.Model.extend({})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/ItemView.js' */
define("jira/projects/abstract-list/item-view",["jira/flag","jira/ajs/ajax/ajax-util","jira/projects/abstract-model/submit-model-states","jira/projects/libs/marionette","jira/loading/loading","jquery"],function(t,e,i,r,n,a){var o=r.ItemView.extend({modelEvents:{change:"_modelChange"},events:{"click @ui.retryAddButton":"_retryAddOperation","click @ui.retryDeleteButton":"_retryDeleteOperation","click @ui.retryUpdateButton":"_retryUpdateOperation","click @ui.discard":"_discardOperation"},ui:{retryAddButton:".operation-retry.operation-add a.operation-retry",retryDeleteButton:".operation-retry.operation-delete a.operation-retry",retryUpdateButton:".operation-retry.operation-update a.operation-retry",discard:".operation-retry a.operation-discard"},_modelChange:function(t){t.get("state")===i.ERROR_DELETE&&this._showFlag(),this.render.apply(this,arguments)},listenToElements:function(t){_.each(t,function(t,e){var i=this[t].bind(this);if(i){var r=e.substring(0,e.indexOf(" ")),n=e.substring(r.length+1),a=this._getElement(n);this._onElement(a,r,i)}},this)},_onElement:function(t,e,i){t&&t.length&&t.on(e,i)},_getElement:function(t){if(0===t.indexOf("@ui.")){var e=t.substring(4);return this.ui[e]}return a(t)},onRender:function(){this.unwrapTemplate()},_retryAddOperation:function(t){t.preventDefault(),this.model.trigger("retry-add",this.model)},_retryDeleteOperation:function(t){t.preventDefault(),this.model.trigger("retry-delete",this.model)},_retryUpdateOperation:function(t){t.preventDefault(),this.model.trigger("retry-update",this.model)},_discardOperation:function(t){t.preventDefault(),this.model.discard()},_showLoading:function(){AJS.dim(),n.showLoadingIndicator()},_hideLoading:function(){AJS.undim(),n.hideLoadingIndicator()},_showFlag:function(){0==this.$el.parents(".dynamic-table > .items").length||this.$el.isInView()||(this.flag||(this.flag=t.showErrorMsg(null,JIRA.Projects.AbstractList.Templates.deleteError({name:this.model.get("name")})),a(this.flag).find(".dynamic_table__retry").on("click",function(){this._deleteItemRetry(),this.flag.close()}.bind(this))),this.flag.setAttribute("aria-hidden","false"))}});return o});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/Layout.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.Layout"),JIRA.Projects.AbstractList.Layout=JIRA.Projects.Libs.Marionette.LayoutView.extend({onRender:function(){this.unwrapTemplate()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/LazyLoadingCollection.js' */
define("jira/projects/abstract-list/lazy-loading-collection",["backbone"],function(i){"use strict";var t=i.Collection.extend({collectionClass:null,_findAddingIndex:function(i,t){return 0},initialize:function(i,t){this.originalCollection=new this.collectionClass(t.data),this.fullCollection=new this.collectionClass(this.originalCollection.models),this.nextPage(),this.listenTo(this,"remove",function(){this.originalCollection.length<=1&&this.trigger("collectionChanged")})},nextPage:function(){return!this.isFullyLoaded()&&(this.add(this.fullCollection.slice(this.size(),Math.min(this.size()+t.PAGE_INCREMENT,this.fullCollection.size()))),!this.isFullyLoaded())},isFullyLoaded:function(){return this.size()>=this.fullCollection.size()},updateElement:function(i){var t=i.get("id"),e=i.toJSON(),l=this.fullCollection.get(t);return l&&l.set(e),this.originalCollection.filter(function(i){return i.id==t}).some(function(i){i.set(e)}),l},addElement:function(i){if(this.originalCollection.add(i,{at:this._findAddingIndex(this.originalCollection,i)}),this.filter.elementMatchFilter(i)){var t=this._findAddingIndex(this.fullCollection,i);this.fullCollection.add(i,{at:t}),t<=this.size()&&this.add(i,{at:t})}this.size()<=1&&this.trigger("update"),this.trigger("collectionChanged")},resetFilter:function(i){this.fullCollection.reset(i),this.reset(),this.nextPage()},elementsLeft:function(){return{elementsTotal:this.fullCollection.size(),elementsLoaded:this.size(),elementsLeft:this.fullCollection.size()-this.size()}}});return t.PAGE_INCREMENT=25,t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/PaginationView.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.PaginationView"),JIRA.Projects.AbstractList.PaginationView=JIRA.Projects.Libs.Marionette.ItemView.extend({template:JIRA.Projects.AbstractList.Templates.pagination,ui:{page:"li a"},events:{"click @ui.page":"clickPage"},collectionEvents:{reset:"render"},modelEvents:{change:"render"},onRender:function(){this.unwrapTemplate()},serializeData:function(){var t=JIRA.Projects.AbstractList.NavigationUtils.getRoot()+this.model.getFilterQueryStringParams(),e=_.extend({url:t},this.collection.state);return e.firstPage=Math.max(e.currentPage-5,e.firstPage),e.totalPages=e.lastPage,e.lastPage=Math.min(e.currentPage+5,e.lastPage),e},clickPage:function(t){t.preventDefault();var e=+AJS.$(t.target).attr("data-page");e&&(JIRA.Projects.AbstractList.NavigationUtils.navigate(this.model.getFilterQueryStringParams()+"&page="+e),this.collection.getPage(e),this.trigger("navigate",e))}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/Router.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.AbstractList.Router"),JIRA.Projects.AbstractList.Router=Backbone.Router.extend({initialize:function(){this.route(/(.*)/,"any")},any:function(){}})}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/SubmitController.js' */
define("jira/projects/abstract-list/submit-controller",["jira/projects/libs/marionette"],function(r){var t=r.Controller.extend({});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/SubmitModelEvents.js' */
define("jira/projects/abstract-list/submit-model-events",[],function(){var e={SERVER_ERROR:"SubmitModelEvent.serverError"};return Object.freeze(e)});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/SubmitModel.js' */
define("jira/projects/abstract-list/submit-model",["backbone","jira/projects/abstract-model/submit-model-states","jquery"],function(t,e,s){var i=t.Model.extend({defaults:{state:e.READY},save:function(i){this.set("state",i||e.IN_PROGRESS);var a=s.Deferred();return t.Model.prototype.save.call(this,[],{attrs:this.toDataJSON()}).done(function(){this.detailsSync().always(function(){this._traceItemAdded(),this.set("state",e.SUCCESSFUL),a.resolve()}.bind(this))}.bind(this)).fail(function(t){this.set("state",e.ERROR_ADD),this._traceItemAdded(),a.reject(t)}.bind(this)),a},_traceItemAdded:function(){JIRA.trace("jira.item.add.finished")},discard:function(){this.get("state")===e.ERROR_ADD?this.destroy({data:{}}):this.get("state")!==e.ERROR_DELETE&&this.get("state")!==e.ERROR_UPDATE||this.set("state",e.READY)},detailsSync:function(){return s.ajax({type:"GET",url:this.detailsPath(),contentType:"application/json"}).done(function(t){this.set(t)}.bind(this))},isStateError:function(){return e.isStateError(this.get("state"))},isStateErrorOrRetrying:function(){return e.isStateErrorOrRetrying(this.get("state"))},addStateTimeout:function(t,e){setTimeout(function(){this.get("state")===t&&this.set("state",e)}.bind(this),5e3)}});return i});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/SubmitView.js' */
define("jira/projects/abstract-list/submit-view",["jira/projects/libs/marionette"],function(e){var t=e.ItemView.extend({});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:abstract-list-page', location = 'jira-projects-module/page/project/abstract-list/SubmitModelStates.js' */
define("jira/projects/abstract-model/submit-model-states",[],function(){var R=new function(){this.READY="ready",this.IN_PROGRESS="in-progress",this.IN_PROGRESS_ERROR="in-progress-error",this.SUCCESSFUL="successful",this.ERROR_ADD="error-add",this.ERROR_DELETE="error-delete",this.ERROR_UPDATE="error-update",this.STATES_ERROR=[this.ERROR_ADD,this.ERROR_DELETE,this.ERROR_UPDATE],this.STATES_ERROR_RETRYING=this.STATES_ERROR.slice(),this.STATES_ERROR_RETRYING.push(this.IN_PROGRESS_ERROR),this.isStateError=function(R){return this.STATES_ERROR.indexOf(R)>=0},this.isStateErrorOrRetrying=function(R){return this.STATES_ERROR_RETRYING.indexOf(R)>=0}};return Object.freeze(R)});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-metrics', location = 'jira-projects-module/page/project/release/Analytics.js' */
define("jira/projects/release/analytics",[],function(){"use strict";var e=function(e,t){AJS.trigger("analyticsEvent",{name:e,data:t||{}})};return{progressDialogClick:function(){e("jira.projects.release.progress.dialog.click")},navigate:function(){var t=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",!0)||"unreleased",i=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("contains",!0)||"",r=+JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("page",!0)||1;e("jira.projects.release.navigate",{status:t,containsLength:i.length,page:r})},emptyViewRendered:function(){e("jira.projects.release.empty.view")},releaseLearnMoreClicked:function(){e("jira.projects.release.learn.more.click")},showEditVersion:function(){e("jira.projects.release.edit.show")},editVersionFail:function(){e("jira.projects.release.edit.fail")},editVersionSuccess:function(){e("jira.projects.release.edit.success")}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-data', location = 'jira-projects-module/page/project/release/CalendarParamsData.js' */
define("jira/projects/release/calendar-params-data",["wrm/data"],function(a){return a.claim("com.atlassian.jira.projects.page.release:calendarParams")});;
;
/* module-key = 'com.atlassian.plugin.jslibs:marionette-1.6.1-factory', location = 'atlassian-jslibs/factories/marionette/1.6.1/marionette-1.6.1-factory.js' */
(function(e){define("atlassian/libs/factories/marionette-1.6.1",function(){return function(d,k){var h=k.Marionette;e.call({_:d,Backbone:k});var g=k.Marionette;g.VERSION="1.6.1";k.Marionette=h;return g}})})(function(){var e=this.Backbone,d=this._,k=function(a){this._views={};this._indexByModel={};this._indexByCustom={};this._updateLength();d.each(a,this.add,this)};d.extend(k.prototype,{add:function(a,b){var f=a.cid;this._views[f]=a;a.model&&(this._indexByModel[a.model.cid]=f);b&&(this._indexByCustom[b]=
f);this._updateLength()},findByModel:function(a){return this.findByModelCid(a.cid)},findByModelCid:function(a){return this.findByCid(this._indexByModel[a])},findByCustom:function(a){return this.findByCid(this._indexByCustom[a])},findByIndex:function(a){return d.values(this._views)[a]},findByCid:function(a){return this._views[a]},remove:function(a){var b=a.cid;a.model&&delete this._indexByModel[a.model.cid];d.any(this._indexByCustom,function(a,c){if(a===b)return delete this._indexByCustom[c],!0},this);
delete this._views[b];this._updateLength()},call:function(a){this.apply(a,d.tail(arguments))},apply:function(a,b){d.each(this._views,function(f){d.isFunction(f[a])&&f[a].apply(f,b||[])})},_updateLength:function(){this.length=d.size(this._views)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){k.prototype[a]=function(){var b=[d.values(this._views)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});var h={},g=function(a){this.options=a;this._wreqrHandlers={};d.isFunction(this.initialize)&&this.initialize(a)};g.extend=e.Model.extend;d.extend(g.prototype,e.Events,{setHandlers:function(a){d.each(a,function(a,f){var c=null;d.isObject(a)&&!d.isFunction(a)&&(c=a.context,a=a.callback);this.setHandler(f,a,c)},this)},setHandler:function(a,b,f){this._wreqrHandlers[a]={callback:b,context:f};this.trigger("handler:add",a,b,f)},hasHandler:function(a){return!!this._wreqrHandlers[a]},
getHandler:function(a){var b=this._wreqrHandlers[a];if(!b)throw Error("Handler not found for '"+a+"'");return function(){var a=Array.prototype.slice.apply(arguments);return b.callback.apply(b.context,a)}},removeHandler:function(a){delete this._wreqrHandlers[a]},removeAllHandlers:function(){this._wreqrHandlers={}}});h.Handlers=g;g=function(a){this.options=a;this._commands={};d.isFunction(this.initialize)&&this.initialize(a)};d.extend(g.prototype,e.Events,{getCommands:function(a){var b=this._commands[a];
b||(b={command:a,instances:[]},this._commands[a]=b);return b},addCommand:function(a,b){this.getCommands(a).instances.push(b)},clearCommands:function(a){this.getCommands(a).instances=[]}});h.CommandStorage=g;g=h.Handlers.extend({storageType:h.CommandStorage,constructor:function(a){this.options=a||{};this._initializeStorage(this.options);this.on("handler:add",this._executeCommands,this);var b=Array.prototype.slice.call(arguments);h.Handlers.prototype.constructor.apply(this,b)},execute:function(a,b){a=
arguments[0];b=Array.prototype.slice.call(arguments,1);this.hasHandler(a)?this.getHandler(a).apply(this,b):this.storage.addCommand(a,b)},_executeCommands:function(a,b,f){var c=this.storage.getCommands(a);d.each(c.instances,function(a){b.apply(f,a)});this.storage.clearCommands(a)},_initializeStorage:function(a){a=a.storageType||this.storageType;this.storage=d.isFunction(a)?new a:a}});h.Commands=g;h.RequestResponse=h.Handlers.extend({request:function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,
1);return this.getHandler(a).apply(this,b)}});g=function(){};g.extend=e.Model.extend;d.extend(g.prototype,e.Events);h.EventAggregator=g;var m=function(a,b){var f=Error(a);f.name=b||"Error";throw f;},c={};e.Marionette=c;c.$=e.$;var j=Array.prototype.slice;c.extend=e.Model.extend;c.getOption=function(a,b){if(a&&b)return a.options&&b in a.options&&void 0!==a.options[b]?a.options[b]:a[b]};var q=function(a,b,f){return f.toUpperCase()},r=/(^|:)(\w)/gi;c.triggerMethod=function(a){var b=this["on"+a.replace(r,
q)];d.isFunction(this.trigger)&&this.trigger.apply(this,arguments);if(d.isFunction(b))return b.apply(this,d.tail(arguments))};var s=document.documentElement,n=function(a){a._isShown&&a._isRendered&&s.contains(a.el)&&d.isFunction(a.triggerMethod)&&a.triggerMethod("dom:refresh")};c.MonitorDOMRefresh=function(a){a.listenTo(a,"show",function(){a._isShown=!0;n(a)});a.listenTo(a,"render",function(){a._isRendered=!0;n(a)})};var t=function(a,b,f,c){c=c.split(/\s+/);d.each(c,function(c){var d=a[c];d||m("Method '"+
c+"' was configured as an event handler, but does not exist.");a.listenTo(b,f,d,a)})},u=function(a,b,f,c){a.listenTo(b,f,c,a)},v=function(a,b,f,c){c=c.split(/\s+/);d.each(c,function(c){a.stopListening(b,f,a[c],a)})},w=function(a,b,c,d){a.stopListening(b,c,d,a)},o=function(a,b,c,i,l){b&&c&&(d.isFunction(c)&&(c=c.call(a)),d.each(c,function(c,f){d.isFunction(c)?i(a,b,f,c):l(a,b,f,c)}))};c.bindEntityEvents=function(a,b,c){o(a,b,c,u,t)};c.unbindEntityEvents=function(a,b,c){o(a,b,c,w,v)};c.Callbacks=function(){this._deferred=
c.$.Deferred();this._callbacks=[]};d.extend(c.Callbacks.prototype,{add:function(a,b){this._callbacks.push({cb:a,ctx:b});this._deferred.done(function(c,d){b&&(c=b);a.call(c,d)})},run:function(a,b){this._deferred.resolve(b,a)},reset:function(){var a=this._callbacks;this._deferred=c.$.Deferred();this._callbacks=[];d.each(a,function(a){this.add(a.cb,a.ctx)},this)}});c.Controller=function(a){this.triggerMethod=c.triggerMethod;this.options=a||{};d.isFunction(this.initialize)&&this.initialize(this.options)};
c.Controller.extend=c.extend;d.extend(c.Controller.prototype,e.Events,{close:function(){this.stopListening();this.triggerMethod("close");this.unbind()}});c.Region=function(a){this.options=a||{};this.el=c.getOption(this,"el");if(!this.el){var b=Error("An 'el' must be specified for a region.");b.name="NoElError";throw b;}this.initialize&&(b=Array.prototype.slice.apply(arguments),this.initialize.apply(this,b))};d.extend(c.Region,{buildRegion:function(a,b){var c="string"===typeof a,i="string"===typeof a.selector,
l="undefined"===typeof a.regionType,e="function"===typeof a;if(!e&&!c&&!i)throw Error("Region must be specified as a Region type, a selector string or an object with selector property");var h,g;c&&(h=a);a.selector&&(h=a.selector,delete a.selector);e&&(g=a);!e&&l&&(g=b);a.regionType&&(g=a.regionType,delete a.regionType);if(c||e)a={};a.el=h;c=new g(a);a.parentEl&&(c.getEl=function(b){var c=a.parentEl;d.isFunction(c)&&(c=c());return c.find(b)});return c}});d.extend(c.Region.prototype,e.Events,{show:function(a){this.ensureEl();
var b=a.isClosed||d.isUndefined(a.$el),f=a!==this.currentView;f&&this.close();a.render();(f||b)&&this.open(a);this.currentView=a;c.triggerMethod.call(this,"show",a);c.triggerMethod.call(a,"show")},ensureEl:function(){if(!this.$el||0===this.$el.length)this.$el=this.getEl(this.el)},getEl:function(a){return c.$(a)},open:function(a){this.$el.empty().append(a.el)},close:function(){var a=this.currentView;a&&!a.isClosed&&(a.close?a.close():a.remove&&a.remove(),c.triggerMethod.call(this,"close",a),delete this.currentView)},
attachView:function(a){this.currentView=a},reset:function(){this.close();delete this.$el}});c.Region.extend=c.extend;var p=c.Controller.extend({constructor:function(a){this._regions={};c.Controller.prototype.constructor.call(this,a)},addRegions:function(a,b){var c={};d.each(a,function(a,l){"string"===typeof a&&(a={selector:a});a.selector&&(a=d.defaults({},a,b));var e=this.addRegion(l,a);c[l]=e},this);return c},addRegion:function(a,b){var f;f=d.isObject(b);var i=d.isString(b),e=!!b.selector;f=i||f&&
e?c.Region.buildRegion(b,c.Region):d.isFunction(b)?c.Region.buildRegion(b,c.Region):b;this._store(a,f);this.triggerMethod("region:add",a,f);return f},get:function(a){return this._regions[a]},removeRegion:function(a){this._remove(a,this._regions[a])},removeRegions:function(){d.each(this._regions,function(a,b){this._remove(b,a)},this)},closeRegions:function(){d.each(this._regions,function(a){a.close()},this)},close:function(){this.removeRegions();var a=Array.prototype.slice.call(arguments);c.Controller.prototype.close.apply(this,
a)},_store:function(a,b){this._regions[a]=b;this._setLength()},_remove:function(a,b){b.close();delete this._regions[a];this._setLength();this.triggerMethod("region:remove",a,b)},_setLength:function(){this.length=d.size(this._regions)}});d.each("forEach each map find detect filter select reject every all some any include contains invoke toArray first initial rest last without isEmpty pluck".split(" "),function(a){p.prototype[a]=function(){var b=[d.values(this._regions)].concat(d.toArray(arguments));
return d[a].apply(d,b)}});c.RegionManager=p;c.TemplateCache=function(a){this.templateId=a};d.extend(c.TemplateCache,{templateCaches:{},get:function(a){var b=this.templateCaches[a];b||(b=new c.TemplateCache(a),this.templateCaches[a]=b);return b.load()},clear:function(){var a,b=j.call(arguments),c=b.length;if(0<c)for(a=0;a<c;a++)delete this.templateCaches[b[a]];else this.templateCaches={}}});d.extend(c.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var a=
this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(a)},loadTemplate:function(a){var b=c.$(a).html();(!b||0===b.length)&&m("Could not find template: '"+a+"'","NoTemplateError");return b},compileTemplate:function(a){return d.template(a)}});c.Renderer={render:function(a,b){if(!a){var f=Error("Cannot render the template since it's false, null or undefined.");f.name="TemplateNotFoundError";throw f;}return("function"===typeof a?a:c.TemplateCache.get(a))(b)}};c.View=e.View.extend({constructor:function(a){d.bindAll(this,
"render");var b=Array.prototype.slice.apply(arguments);this.options=d.extend({},d.result(this,"options"),d.isFunction(a)?a.call(this):a);this.events=this.normalizeUIKeys(d.result(this,"events"));e.View.prototype.constructor.apply(this,b);c.MonitorDOMRefresh(this);this.listenTo(this,"show",this.onShowCalled,this)},triggerMethod:c.triggerMethod,getTemplate:function(){return c.getOption(this,"template")},mixinTemplateHelpers:function(a){var a=a||{},b=c.getOption(this,"templateHelpers");d.isFunction(b)&&
(b=b.call(this));return d.extend(a,b)},normalizeUIKeys:function(a){if("undefined"!==typeof a)return d.each(d.keys(a),function(b){var c=b.split("@ui.");2===c.length&&(a[c[0]+this.ui[c[1]]]=a[b],delete a[b])},this),a},configureTriggers:function(){if(this.triggers){var a={},b=this.normalizeUIKeys(d.result(this,"triggers"));d.each(b,function(b,c){var e=d.isObject(b),g=e?b.event:b;a[c]=function(a){if(a){var c=a.preventDefault,d=a.stopPropagation,i=e?b.stopPropagation:d;(e?b.preventDefault:c)&&c&&c.apply(a);
i&&d&&d.apply(a)}this.triggerMethod(g,{view:this,model:this.model,collection:this.collection})}},this);return a}},delegateEvents:function(a){this._delegateDOMEvents(a);c.bindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.bindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},_delegateDOMEvents:function(a){a=a||this.events;d.isFunction(a)&&(a=a.call(this));var b={},c=this.configureTriggers();d.extend(b,a,c);e.View.prototype.delegateEvents.call(this,b)},undelegateEvents:function(){var a=
Array.prototype.slice.call(arguments);e.View.prototype.undelegateEvents.apply(this,a);c.unbindEntityEvents(this,this.model,c.getOption(this,"modelEvents"));c.unbindEntityEvents(this,this.collection,c.getOption(this,"collectionEvents"))},onShowCalled:function(){},close:function(){!this.isClosed&&!1!==this.triggerMethod("before:close")&&(this.isClosed=!0,this.triggerMethod("close"),this.unbindUIElements(),this.remove())},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);
var a=d.result(this,"_uiBindings");this.ui={};d.each(d.keys(a),function(b){this.ui[b]=this.$(a[b])},this)}},unbindUIElements:function(){this.ui&&this._uiBindings&&(d.each(this.ui,function(a,b){delete this.ui[b]},this),this.ui=this._uiBindings,delete this._uiBindings)}});c.ItemView=c.View.extend({constructor:function(){c.View.prototype.constructor.apply(this,j.call(arguments))},serializeData:function(){var a={};this.model?a=this.model.toJSON():this.collection&&(a={items:this.collection.toJSON()});
return a},render:function(){this.isClosed=!1;this.triggerMethod("before:render",this);this.triggerMethod("item:before:render",this);var a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate(),a=c.Renderer.render(b,a);this.$el.html(a);this.bindUIElements();this.triggerMethod("render",this);this.triggerMethod("item:rendered",this);return this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),c.View.prototype.close.apply(this,j.call(arguments)),this.triggerMethod("item:closed"))}});
c.CollectionView=c.View.extend({itemViewEventPrefix:"itemview",constructor:function(a){this._initChildViewStorage();c.View.prototype.constructor.apply(this,j.call(arguments));this._initialEvents();this.initRenderBuffer()},initRenderBuffer:function(){this.elBuffer=document.createDocumentFragment();this._bufferedChildren=[]},startBuffering:function(){this.initRenderBuffer();this.isBuffering=!0},endBuffering:function(){this.isBuffering=!1;this.appendBuffer(this,this.elBuffer);this._triggerShowBufferedChildren();
this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(d.each(this._bufferedChildren,function(a){c.triggerMethod.call(a,"show")}),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this.render,this))},addChildView:function(a){this.closeEmptyView();var b=this.getItemView(a),c=this.collection.indexOf(a);
this.addItemView(a,b,c)},onShowCalled:function(){this.children.each(function(a){c.triggerMethod.call(a,"show")})},triggerBeforeRender:function(){this.triggerMethod("before:render",this);this.triggerMethod("collection:before:render",this)},triggerRendered:function(){this.triggerMethod("render",this);this.triggerMethod("collection:rendered",this)},render:function(){this.isClosed=!1;this.triggerBeforeRender();this._renderChildren();this.triggerRendered();return this},_renderChildren:function(){this.startBuffering();
this.closeEmptyView();this.closeChildren();this.isEmpty(this.collection)?this.showEmptyView():this.showCollection();this.endBuffering()},showCollection:function(){var a;this.collection.each(function(b,c){a=this.getItemView(b);this.addItemView(b,a,c)},this)},showEmptyView:function(){var a=this.getEmptyView();if(a&&!this._showingEmptyView){this._showingEmptyView=!0;var b=new e.Model;this.addItemView(b,a,0)}},closeEmptyView:function(){this._showingEmptyView&&(this.closeChildren(),delete this._showingEmptyView)},
getEmptyView:function(){return c.getOption(this,"emptyView")},getItemView:function(){var a=c.getOption(this,"itemView");a||m("An `itemView` must be specified","NoItemViewError");return a},addItemView:function(a,b,f){var i=c.getOption(this,"itemViewOptions");d.isFunction(i)&&(i=i.call(this,a,f));a=this.buildItemView(a,b,i);this.addChildViewEventForwarding(a);this.triggerMethod("before:item:added",a);this.children.add(a);this.renderItemView(a,f);this._isShown&&!this.isBuffering&&c.triggerMethod.call(a,
"show");this.triggerMethod("after:item:added",a);return a},addChildViewEventForwarding:function(a){var b=c.getOption(this,"itemViewEventPrefix");this.listenTo(a,"all",function(){var f=j.call(arguments),i=f[0],e=this.getItemEvents();f[0]=b+":"+i;f.splice(1,0,a);"undefined"!==typeof e&&d.isFunction(e[i])&&e[i].apply(this,f);c.triggerMethod.apply(this,f)},this)},getItemEvents:function(){return d.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView:function(a,b){a.render();
this.appendHtml(this,a,b)},buildItemView:function(a,b,c){a=d.extend({model:a},c);return new b(a)},removeItemView:function(a){a=this.children.findByModel(a);this.removeChildView(a);this.checkEmpty()},removeChildView:function(a){a&&(this.stopListening(a),a.close?a.close():a.remove&&a.remove(),this.children.remove(a));this.triggerMethod("item:removed",a)},isEmpty:function(){return!this.collection||0===this.collection.length},checkEmpty:function(){this.isEmpty(this.collection)&&this.showEmptyView()},
appendBuffer:function(a,b){a.$el.append(b)},appendHtml:function(a,b){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):a.$el.append(b.el)},_initChildViewStorage:function(){this.children=new k},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),c.View.prototype.close.apply(this,j.call(arguments)))},closeChildren:function(){this.children.each(function(a){this.removeChildView(a)},this);this.checkEmpty()}});
c.CompositeView=c.CollectionView.extend({constructor:function(){c.CollectionView.prototype.constructor.apply(this,j.call(arguments))},_initialEvents:function(){this.once("render",function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView,this),this.listenTo(this.collection,"remove",this.removeItemView,this),this.listenTo(this.collection,"reset",this._renderChildren,this))})},getItemView:function(){var a=c.getOption(this,"itemView")||this.constructor;a||m("An `itemView` must be specified",
"NoItemViewError");return a},serializeData:function(){var a={};this.model&&(a=this.model.toJSON());return a},render:function(){this.isRendered=!0;this.isClosed=!1;this.resetItemViewContainer();this.triggerBeforeRender();var a=this.renderModel();this.$el.html(a);this.bindUIElements();this.triggerMethod("composite:model:rendered");this._renderChildren();this.triggerMethod("composite:rendered");this.triggerRendered();return this},_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),
c.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var a={},a=this.serializeData(),a=this.mixinTemplateHelpers(a),b=this.getTemplate();return c.Renderer.render(b,a)},appendBuffer:function(a,b){this.getItemViewContainer(a).append(b)},appendHtml:function(a,b){a.isBuffering?(a.elBuffer.appendChild(b.el),a._bufferedChildren.push(b)):this.getItemViewContainer(a).append(b.el)},getItemViewContainer:function(a){if("$itemViewContainer"in
a)return a.$itemViewContainer;var b;(b=c.getOption(a,"itemViewContainer"))?(b=d.isFunction(b)?b.call(this):b,b=a.$(b),0>=b.length&&m("The specified `itemViewContainer` was not found: "+a.itemViewContainer,"ItemViewContainerMissingError")):b=a.$el;return a.$itemViewContainer=b},resetItemViewContainer:function(){this.$itemViewContainer&&delete this.$itemViewContainer}});c.Layout=c.ItemView.extend({regionType:c.Region,constructor:function(a){a=a||{};this._firstRender=!0;this._initializeRegions(a);c.ItemView.prototype.constructor.call(this,
a)},render:function(){this.isClosed&&this._initializeRegions();this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments);return c.ItemView.prototype.render.apply(this,a)},close:function(){if(!this.isClosed){this.regionManager.close();var a=Array.prototype.slice.apply(arguments);c.ItemView.prototype.close.apply(this,a)}},addRegion:function(a,b){var c={};c[a]=b;return this._buildRegions(c)[a]},addRegions:function(a){this.regions=d.extend({},
this.regions,a);return this._buildRegions(a)},removeRegion:function(a){delete this.regions[a];return this.regionManager.removeRegion(a)},_buildRegions:function(a){var b=this,d={regionType:c.getOption(this,"regionType"),parentEl:function(){return b.$el}};return this.regionManager.addRegions(a,d)},_initializeRegions:function(a){this._initRegionManager();a=d.isFunction(this.regions)?this.regions(a):this.regions||{};this.addRegions(a)},_reInitializeRegions:function(){this.regionManager.closeRegions();
this.regionManager.each(function(a){a.reset()})},_initRegionManager:function(){this.regionManager=new c.RegionManager;this.listenTo(this.regionManager,"region:add",function(a,b){this[a]=b;this.trigger("region:add",a,b)});this.listenTo(this.regionManager,"region:remove",function(a,b){delete this[a];this.trigger("region:remove",a,b)})}});c.AppRouter=e.Router.extend({constructor:function(a){e.Router.prototype.constructor.apply(this,j.call(arguments));this.options=a||{};var b=c.getOption(this,"appRoutes"),
d=this._getController();this.processAppRoutes(d,b)},appRoute:function(a,b){var c=this._getController();this._addAppRoute(c,a,b)},processAppRoutes:function(a,b){if(b){var c=d.keys(b).reverse();d.each(c,function(c){this._addAppRoute(a,c,b[c])},this)}},_getController:function(){return c.getOption(this,"controller")},_addAppRoute:function(a,b,c){var e=a[c];if(!e)throw Error("Method '"+c+"' was not found on the controller");this.route(b,c,d.bind(e,a))}});c.Application=function(a){this._initRegionManager();
this._initCallbacks=new c.Callbacks;this.vent=new h.EventAggregator;this.commands=new h.Commands;this.reqres=new h.RequestResponse;this.submodules={};d.extend(this,a);this.triggerMethod=c.triggerMethod};d.extend(c.Application.prototype,e.Events,{execute:function(){var a=Array.prototype.slice.apply(arguments);this.commands.execute.apply(this.commands,a)},request:function(){var a=Array.prototype.slice.apply(arguments);return this.reqres.request.apply(this.reqres,a)},addInitializer:function(a){this._initCallbacks.add(a)},
start:function(a){this.triggerMethod("initialize:before",a);this._initCallbacks.run(a,this);this.triggerMethod("initialize:after",a);this.triggerMethod("start",a)},addRegions:function(a){return this._regionManager.addRegions(a)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(a){this._regionManager.removeRegion(a)},getRegion:function(a){return this._regionManager.get(a)},module:function(a,b){var d=c.Module;b&&(d=b.moduleClass||d);var e=j.call(arguments);e.unshift(this);
return d.create.apply(d,e)},_initRegionManager:function(){this._regionManager=new c.RegionManager;this.listenTo(this._regionManager,"region:add",function(a,b){this[a]=b});this.listenTo(this._regionManager,"region:remove",function(a){delete this[a]})}});c.Application.extend=c.extend;c.Module=function(a,b,f){this.moduleName=a;this.options=d.extend({},this.options,f);this.initialize=f.initialize||this.initialize;this.submodules={};this._setupInitializersAndFinalizers();this.app=b;this.startWithParent=
!0;this.triggerMethod=c.triggerMethod;d.isFunction(this.initialize)&&this.initialize(this.options)};c.Module.extend=c.extend;d.extend(c.Module.prototype,e.Events,{initialize:function(){},addInitializer:function(a){this._initializerCallbacks.add(a)},addFinalizer:function(a){this._finalizerCallbacks.add(a)},start:function(a){this._isInitialized||(d.each(this.submodules,function(b){b.startWithParent&&b.start(a)}),this.triggerMethod("before:start",a),this._initializerCallbacks.run(a,this),this._isInitialized=
!0,this.triggerMethod("start",a))},stop:function(){this._isInitialized&&(this._isInitialized=!1,c.triggerMethod.call(this,"before:stop"),d.each(this.submodules,function(a){a.stop()}),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),c.triggerMethod.call(this,"stop"))},addDefinition:function(a,b){this._runModuleDefinition(a,b)},_runModuleDefinition:function(a,b){if(a){var f=d.flatten([this,this.app,e,c,c.$,d,b]);a.apply(this,f)}},_setupInitializersAndFinalizers:function(){this._initializerCallbacks=
new c.Callbacks;this._finalizerCallbacks=new c.Callbacks}});d.extend(c.Module,{create:function(a,b,c){var e=a,g=j.call(arguments);g.splice(0,3);var b=b.split("."),h=[];h[b.length-1]=c;d.each(b,function(b,d){var j=e;e=this._getModule(j,b,a,c);this._addModuleDefinition(j,e,h[d],g)},this);return e},_getModule:function(a,b,f,e){var g=c.Module,h=d.extend({},e);e&&(g=e.moduleClass||g);e=a[b];e||(e=new g(b,f,h),a[b]=e,a.submodules[b]=e);return e},_addModuleDefinition:function(a,b,c,e){var g;d.isFunction(c)?
(g=c,c=!0):d.isObject(c)?(g=c.define,c="undefined"!==typeof c.startWithParent?c.startWithParent:!0):c=!0;g&&b.addDefinition(g,e);b.startWithParent=b.startWithParent&&c;b.startWithParent&&!b.startWithParentIsConfigured&&(b.startWithParentIsConfigured=!0,a.addInitializer(function(a){b.startWithParent&&b.start(a)}))}});c.Wreqr=h;c.ChildViewContainer=k});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'jira-project-config-plugin/lib/backbone/backbone-amd.js' */
define("jira-project-config/backbone",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/backbone-1.0.0"),i=e("underscore"),n=e("jquery");return r(i,n)});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'jira-project-config-plugin/lib/marionettejs/marionette-amd.js' */
define("jira-project-config/marionette",["require"],function(e){"use strict";var r=e("atlassian/libs/factories/marionette-1.6.1"),i=e("jira-project-config/backbone"),t=e("underscore");return r(t,i)});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:backbone-marionette', location = 'jira-project-config-plugin/lib/namespace.js' */
AJS.namespace("JIRA.ProjectConfig.Backbone",null,require("jira-project-config/backbone")),AJS.namespace("JIRA.ProjectConfig.Backbone.Marionette",null,require("jira-project-config/marionette"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/templates/versions.soy' */
// This file was automatically generated from versions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Versions.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Versions == 'undefined') { JIRA.Templates.Versions = {}; }


JIRA.Templates.Versions.releaseStatus = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.released) ? '<span class="aui-icon aui-icon-small aui-iconfont-version icon-default' + ((opt_data.archived) ? ' project-config-icon-version-archived' : '') + '"></span>' : (opt_data.archived) ? '<span class="project-config-icon project-config-icon-version-archived"></span>' : '<span class="project-config-icon project-config-icon-version"></span>');
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.releaseStatus.soyTemplateName = 'JIRA.Templates.Versions.releaseStatus';
}


JIRA.Templates.Versions.operations = function(opt_data, opt_ignored) {
  var output = '<a id="version-' + soy.$$escapeHtml(opt_data.version.id) + '-operations-trigger" class="aui-button aui-button-compact aui-button-subtle project-config-operations-trigger" href="#"><span class="aui-icon aui-icon-small aui-iconfont-more icon-default"></span></a><div class="project-config-operations-list aui-list hidden"><ul class="aui-list-section aui-first aui-last">';
  if (opt_data.version.operations) {
    var operationList20 = opt_data.version.operations;
    var operationListLen20 = operationList20.length;
    for (var operationIndex20 = 0; operationIndex20 < operationListLen20; operationIndex20++) {
      var operationData20 = operationList20[operationIndex20];
      output += (operationData20.href) ? '<li class="aui-list-item"><a class="aui-list-item-link ' + soy.$$escapeHtml(operationData20.styleClass) + '" href="' + soy.$$escapeHtml(operationData20.href) + '">' + soy.$$escapeHtml(operationData20.label) + '</a></li>' : '<li class="aui-list-item"><a class="aui-list-item-link ' + soy.$$escapeHtml(operationData20.styleClass) + '" href="#">' + soy.$$escapeHtml(operationData20.label) + '</a></li>';
    }
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.operations.soyTemplateName = 'JIRA.Templates.Versions.operations';
}


JIRA.Templates.Versions.editName = function(opt_data, opt_ignored) {
  return '<input name="name" type="text" class="text" value="' + soy.$$escapeHtml(opt_data.value ? opt_data.value : '') + '"  />' + ((! opt_data.update) ? '<input name="project" type="hidden" value="' + soy.$$escapeHtml(opt_data.project) + '">' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.editName.soyTemplateName = 'JIRA.Templates.Versions.editName';
}


JIRA.Templates.Versions.readStartDate = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.userStartDate) ? soy.$$escapeHtml(opt_data.userStartDate) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.readStartDate.soyTemplateName = 'JIRA.Templates.Versions.readStartDate';
}


JIRA.Templates.Versions.readReleaseDate = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.userReleaseDate) ? soy.$$escapeHtml(opt_data.userReleaseDate) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.readReleaseDate.soyTemplateName = 'JIRA.Templates.Versions.readReleaseDate';
}


JIRA.Templates.Versions.editStartDate = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="project-config-date-field"><input id="project-config-version-start-date-field" name="userStartDate" type="text" class="text short-field" value="' + soy.$$escapeHtml(opt_data.userStartDate ? opt_data.userStartDate : '') + '" /><a href="#" id="project-config-versions-start-date-trigger" title="' + soy.$$escapeHtml('Select a date') + '"><span class="aui-icon aui-icon-small aui-iconfont-calendar icon-default">' + soy.$$escapeHtml('Select a date') + '</span></a></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.editStartDate.soyTemplateName = 'JIRA.Templates.Versions.editStartDate';
}


JIRA.Templates.Versions.editReleaseDate = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="project-config-date-field"><input id="project-config-version-release-date-field" name="userReleaseDate" type="text" class="text short-field" value="' + soy.$$escapeHtml(opt_data.userReleaseDate ? opt_data.userReleaseDate : '') + '" /><a href="#" id="project-config-versions-release-date-trigger" title="' + soy.$$escapeHtml('Select a date') + '"><span class="aui-icon aui-icon-small aui-iconfont-calendar icon-default">' + soy.$$escapeHtml('Select a date') + '</span></a></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.editReleaseDate.soyTemplateName = 'JIRA.Templates.Versions.editReleaseDate';
}


JIRA.Templates.Versions.deleteForm = function(opt_data, opt_ignored) {
  var output = '<h2 class="dialog-title">' + soy.$$escapeHtml('Delete') + ' ' + soy.$$escapeHtml(opt_data.version.name) + '</h2><form class="aui version-delete" action="#" method="post"><div class="form-body">';
  if (opt_data.areRelatedIssues) {
    if (opt_data.versions.length) {
      output += '<div class="info-message">' + soy.$$escapeHtml('What would you like to do with any issues assigned to this version?') + '</div>';
      if (opt_data.relatedIssueCount.issuesAffectedCount) {
        output += '<fieldset class="group"><legend><span>' + soy.$$escapeHtml('Issues affecting') + ' (<a id="affects-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;version=' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount.issuesAffectedCount) + '</a>)</span></legend><div class="radio"><input name="affects" value="swap" id="affects-swap" class="radio" checked="checked" type="radio" /><label for="affects-swap">' + soy.$$escapeHtml('Assign them to this version') + '</label> <select id="moveAffectedIssuesTo" name="moveAffectedIssuesTo" class="select">';
        var versionList99 = opt_data.versions;
        var versionListLen99 = versionList99.length;
        for (var versionIndex99 = 0; versionIndex99 < versionListLen99; versionIndex99++) {
          var versionData99 = versionList99[versionIndex99];
          output += '<option value="' + soy.$$escapeHtml(versionData99.id) + '">' + soy.$$escapeHtml(versionData99.name) + '</option>';
        }
        output += '</select></div><div class="radio"><input name="affects" values="remove" id="affects-remove" class="radio" type="radio"><label for="affects-remove">' + soy.$$escapeHtml('Remove the version') + '</label></div></fieldset>';
      }
      if (opt_data.relatedIssueCount.issuesFixedCount) {
        output += '<fieldset class="group"><legend><span>' + soy.$$escapeHtml('Issues fixed in') + ' (<a id="fix-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;fixfor=' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount.issuesFixedCount) + '</a>)</span></legend><div class="radio"><input name="fix" value="swap" id="fix-swap" class="radio" checked="checked" type="radio" /><label for="fix-swap">' + soy.$$escapeHtml('Assign them to this version') + '</label> <select id="moveFixIssuesTo" name="moveFixIssuesTo" class="select">';
        var versionList124 = opt_data.versions;
        var versionListLen124 = versionList124.length;
        for (var versionIndex124 = 0; versionIndex124 < versionListLen124; versionIndex124++) {
          var versionData124 = versionList124[versionIndex124];
          output += '<option value="' + soy.$$escapeHtml(versionData124.id) + '">' + soy.$$escapeHtml(versionData124.name) + '</option>';
        }
        output += '</select></div><div class="radio"><input name="fix" value="remove" id="fix-remove" class="radio" type="radio"><label for="fix-remove">' + soy.$$escapeHtml('Remove the version') + '</label></div></fieldset>';
      }
      if (opt_data.relatedIssueCount.issueCountWithCustomFieldsShowingVersion) {
        var usageList136 = opt_data.relatedIssueCount.customFieldUsage;
        var usageListLen136 = usageList136.length;
        for (var usageIndex136 = 0; usageIndex136 < usageListLen136; usageIndex136++) {
          var usageData136 = usageList136[usageIndex136];
          output += '<fieldset class="group"><legend><span>' + soy.$$escapeHtml(usageData136.fieldName) + ' (<a id="custom-' + soy.$$escapeHtml(usageData136.customFieldId) + '-count" href="' + soy.$$escapeHtml("") + '/issues/?jql=' + soy.$$escapeHtml(usageData136.issueLink) + '">' + soy.$$escapeHtml(usageData136.issueCountWithVersionInCustomField) + '</a>):</span></legend><div class="radio"><input name="customField' + soy.$$escapeHtml(usageData136.customFieldId) + 'Action" value="swap" id="custom-swap-' + soy.$$escapeHtml(usageData136.customFieldId) + '" class="radio" checked="checked" type="radio" /><label for="custom-' + soy.$$escapeHtml(usageData136.customFieldId) + '-swap">' + soy.$$escapeHtml('Assign them to this version') + '</label> <select id="move-custom-' + soy.$$escapeHtml(usageData136.customFieldId) + '-to" name="customField' + soy.$$escapeHtml(usageData136.customFieldId) + 'MoveTo" class="select">';
          var versionList160 = opt_data.versions;
          var versionListLen160 = versionList160.length;
          for (var versionIndex160 = 0; versionIndex160 < versionListLen160; versionIndex160++) {
            var versionData160 = versionList160[versionIndex160];
            output += '<option value="' + soy.$$escapeHtml(versionData160.id) + '">' + soy.$$escapeHtml(versionData160.name) + '</option>';
          }
          output += '</select></div><div class="radio"><input name="customField' + soy.$$escapeHtml(usageData136.customFieldId) + 'Action" value="remove" id="custom-remove-' + soy.$$escapeHtml(usageData136.customFieldId) + '" class="radio" type="radio"><label for="custom-' + soy.$$escapeHtml(usageData136.customFieldId) + '-remove">' + soy.$$escapeHtml('Remove the version') + '</label></div></fieldset>';
        }
      }
    } else {
      output += '<div class="info-message"><p>' + soy.$$escapeHtml('There are issues that have this version selected in one or more fields. If you delete this version, the affected fields in these issues will be set to empty.') + ' </p><p>' + soy.$$escapeHtml('The fields where this version is selected are listed below. If you want to review the issues related to a field, click the number next to the field.') + '</p><ul><li>' + soy.$$escapeHtml('Issues affecting') + ' (<a id="affects-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;version=' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount.issuesAffectedCount) + '</a>)</li><li>' + soy.$$escapeHtml('Issues fixed in') + ' (<a id="fix-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;fixfor=' + soy.$$escapeHtml(opt_data.version.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount.issuesFixedCount) + '</a>)</li>';
      if (opt_data.relatedIssueCount.issueCountWithCustomFieldsShowingVersion) {
        var usageList205 = opt_data.relatedIssueCount.customFieldUsage;
        var usageListLen205 = usageList205.length;
        for (var usageIndex205 = 0; usageIndex205 < usageListLen205; usageIndex205++) {
          var usageData205 = usageList205[usageIndex205];
          output += '<li>' + soy.$$escapeHtml(usageData205.fieldName) + ' (<a id="custom-' + soy.$$escapeHtml(usageData205.customFieldId) + '-count" href="' + soy.$$escapeHtml("") + '/issues/?jql=' + soy.$$escapeHtml(usageData205.issueLink) + '">' + soy.$$escapeHtml(usageData205.issueCountWithVersionInCustomField) + '</a>)</li>';
        }
      }
      output += '</ul></div>';
    }
  } else {
    output += '<div class="info-message">' + soy.$$escapeHtml(AJS.format('Are you sure you want to delete {0}?',opt_data.version.name)) + '</div>';
  }
  output += '</div><div class="buttons-container form-footer"><div class="buttons">' + ((opt_data.areRelatedIssues) ? '<input id="submit" class="aui-button aui-button-primary" type="submit" value="' + soy.$$escapeHtml('Delete') + '" />' : '<input id="submit" class="aui-button aui-button-primary" type="submit" value="' + soy.$$escapeHtml('Yes') + '" />') + '<a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.deleteForm.soyTemplateName = 'JIRA.Templates.Versions.deleteForm';
}


JIRA.Templates.Versions.releaseForm = function(opt_data, opt_ignored) {
  var output = '<h2 class="dialog-title">' + soy.$$escapeHtml('Release version') + ': ' + soy.$$escapeHtml(opt_data.version.name) + '</h2><form class="aui" action="#" method="post"><div class="form-body">';
  var projectQueryParam__soy242 = opt_data.projectId ? 'pid=' + opt_data.projectId + '&' : '';
  var issuesLink__soy243 = "" + '/secure/IssueNavigator.jspa?reset=true&mode=hide&' + projectQueryParam__soy242 + 'fixfor=' + opt_data.version.id;
  if (opt_data.errorMessages && opt_data.errorMessages.length > 0) {
    output += '<div class="aui-message error"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml('Error') + '</strong><ul>';
    var errorList249 = opt_data.errors.errorMessages;
    var errorListLen249 = errorList249.length;
    for (var errorIndex249 = 0; errorIndex249 < errorListLen249; errorIndex249++) {
      var errorData249 = errorList249[errorIndex249];
      output += '<li class="error-list-item">' + soy.$$escapeHtml(errorData249) + '</li>';
    }
    output += '</ul></div>';
  }
  if (opt_data.unresolvedIssuesExist && opt_data.issuesUnresolvedCount) {
    output += '<div class="aui-message warning" id="project-config-version-release-form-unresolved-message"><span class="aui-icon icon-warning"></span><a id="project-config-version-release-form-issues-link" href="' + soy.$$escapeHtml(issuesLink__soy243) + '">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} issue|1\x3c{0} issues}',opt_data.issuesCount)) + '</a> ' + soy.$$escapeHtml(AJS.format('{0,choice,1#is|1\x3care} in this release:',opt_data.issuesCount)) + '<ul><li id="project-config-version-release-form-resolved-issues-count">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} resolved issue|1\x3c{0} resolved issues}',opt_data.issuesResolvedCount)) + '</li><li id="project-config-version-release-form-unresolved-issues-count">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} unresolved issue|1\x3c{0} unresolved issues}',opt_data.issuesUnresolvedCount)) + '</li></ul></div>';
    if (opt_data.versions.length) {
      output += '<fieldset class="group"><legend><span>' + soy.$$escapeHtml('Unresolved issues') + '</span></legend><div class="radio"><input name="unresolved" id="project-config-version-release-form-unresolved-ignore" class="radio" checked="checked" type="radio" value="ignore"><label for="project-config-version-release-form-unresolved-ignore" id="project-config-version-release-form-unresolved-ignore-label">' + soy.$$escapeHtml('Ignore and proceed with release') + '</label></div><div class="radio"><input name="unresolved" id="project-config-version-release-form-unresolved-move" class="radio" type="radio" value="move"><label for="project-config-version-release-form-unresolved-move" id="project-config-version-release-form-unresolved-move-label">' + soy.$$escapeHtml('Move issues to version') + ': </label><select id="moveUnfixedIssuesTo" name="moveUnfixedIssuesTo" class="select long-field">';
      var versionList277 = opt_data.versions;
      var versionListLen277 = versionList277.length;
      for (var versionIndex277 = 0; versionIndex277 < versionListLen277; versionIndex277++) {
        var versionData277 = versionList277[versionIndex277];
        output += soy.$$escapeHtml(versionData277.nextScheduled) + '<option ' + ((versionData277.nextScheduled) ? 'selected="selected"' : '') + ' value="' + soy.$$escapeHtml(versionData277.id) + '">' + soy.$$escapeHtml(versionData277.name) + '</option>';
      }
      output += '</select></div></fieldset>';
    } else {
      output += '<p id="project-config-version-release-form-unresolved-ignore-paragraph" class="jira-release-dialog-paragraph">' + soy.$$escapeHtml('Do you want to proceed with the release?') + '</p>';
    }
  } else {
    output += '<p id="project-config-version-release-form-all-issues-resolved" class="jira-release-dialog-paragraph"><a id="project-config-version-release-form-issues-link" href="' + soy.$$escapeHtml(issuesLink__soy243) + '">' + soy.$$escapeHtml(AJS.format('{0,choice,1#{0} issue|1\x3c{0} issues}',opt_data.issuesCount)) + '</a> ' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('will be released from \x3cstrong\x3e{0}\x3c/strong\x3e',typeof (opt_data.projectName) === 'number' ? opt_data.projectName : soy.$$escapeHtml(opt_data.projectName)))) + '</p>';
  }
  output += '<div class="field-group"><label for="project-config-version-release-form-release-date-field">' + soy.$$escapeHtml('Release date') + '</label><input id="project-config-version-release-form-release-date-field" name="userReleaseDate" type="text" class="text medium-field" value="' + soy.$$escapeHtml(opt_data.version.userReleaseDate ? opt_data.version.userReleaseDate : '') + '" /> <a href="#" id="project-config-versions-release-form-release-date-trigger" title="' + soy.$$escapeHtml('Select a date') + '"><span class="aui-icon aui-icon-small aui-iconfont-calendar icon-default">' + soy.$$escapeHtml('Select a date') + '</span></a>' + ((opt_data.errors.releaseDate) ? '<div class="error project-config-error" id="project-config-versions-release-form-release-date-error">' + soy.$$escapeHtml(opt_data.errors.releaseDate) + '</div>' : '') + '</div></div><input type="hidden" name="version-name" value="' + soy.$$escapeHtml(opt_data.version.name) + '"><input type="hidden" name="issues-count" value="' + soy.$$escapeHtml(opt_data.issuesCount) + '"><input type="hidden" name="unresolved-issues-count" value="' + soy.$$escapeHtml(opt_data.issuesUnresolvedCount) + '"><input type="hidden" name="released" value="true" /><div class="buttons-container form-footer"><div class="buttons"><input class="aui-button" type="submit" id="project-config-version-release-form-submit" value="' + soy.$$escapeHtml('Release') + '" /><a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.releaseForm.soyTemplateName = 'JIRA.Templates.Versions.releaseForm';
}


JIRA.Templates.Versions.mergeForm = function(opt_data, opt_ignored) {
  var output = '<h2 class="dialog-title">' + soy.$$escapeHtml('Merge Versions') + '</h2><form class="aui" action="#" method="post"><div class="form-body">';
  if (opt_data.versions && opt_data.versions.length > 0) {
    if (opt_data.errorMessages && opt_data.errorMessages.length > 0) {
      output += '<div class="aui-message error"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml('Error') + '</strong><ul>';
      var errorList338 = opt_data.errorMessages;
      var errorListLen338 = errorList338.length;
      for (var errorIndex338 = 0; errorIndex338 < errorListLen338; errorIndex338++) {
        var errorData338 = errorList338[errorIndex338];
        output += '<li class="error-list-item">' + soy.$$escapeHtml(errorData338) + '</li>';
      }
      output += '</ul></div>';
    }
    output += '<div class="aui-message warning"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('WARNING: You cannot un-merge these versions once they have merged.') + '</div><div class="field-group"><label>' + soy.$$escapeHtml('Merging From Versions') + '</label><select multiple id="idsToMerge" name="idsToMerge" class="select">';
    var versionList349 = opt_data.versions;
    var versionListLen349 = versionList349.length;
    for (var versionIndex349 = 0; versionIndex349 < versionListLen349; versionIndex349++) {
      var versionData349 = versionList349[versionIndex349];
      output += '<option value="' + soy.$$escapeHtml(versionData349.id) + '">' + soy.$$escapeHtml(versionData349.name) + '</option>';
    }
    output += '</select></div><div class="field-group"><label>' + soy.$$escapeHtml('Merge To Version') + '</label><select name="idMergeTo" class="select">';
    var versionList359 = opt_data.versions;
    var versionListLen359 = versionList359.length;
    for (var versionIndex359 = 0; versionIndex359 < versionListLen359; versionIndex359++) {
      var versionData359 = versionList359[versionIndex359];
      output += '<option value="' + soy.$$escapeHtml(versionData359.id) + '">' + soy.$$escapeHtml(versionData359.name) + '</option>';
    }
    output += '</select></div>';
  } else {
    output += '<label id="project-config-versions-merge-form-no-versions">' + soy.$$escapeHtml('There are currently no versions for this project.') + '</label>';
  }
  output += '</div><input type="hidden" name="released" value="true" /><div class="buttons-container form-footer"><div class="buttons">' + ((opt_data.versions && opt_data.versions.length > 0) ? '<input class="aui-button" type="submit" id="project-config-version-merge-form-submit" value="' + soy.$$escapeHtml('Merge') + '" />' : '') + '<a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.mergeForm.soyTemplateName = 'JIRA.Templates.Versions.mergeForm';
}


JIRA.Templates.Versions.unreleaseForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml(AJS.format('Unrelease Version {0}',opt_data.version.name)) + '</h2><form class="aui" action="#" method="post"><input type="hidden" name="released" value="false" /><div class="form-body"><div class="field-group"><label>' + soy.$$escapeHtml('Release date') + '</label><input name="releaseDate" type="text" class="text" value="' + soy.$$escapeHtml(opt_data.version.releaseDate || '') + '"  /></div></div><div class="buttons-container form-footer"><div class="buttons"><input class="aui-button" type="submit" value="' + soy.$$escapeHtml('Update') + '" /><a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
};
if (goog.DEBUG) {
  JIRA.Templates.Versions.unreleaseForm.soyTemplateName = 'JIRA.Templates.Versions.unreleaseForm';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/templates/template-wrapper.js' */
define("jira-project-config/versions/templates",[],function(){"use strict";return window.JIRA.Templates.Versions});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/js/MergeForm.js' */
define("jira-project-config/versions/merge-form",["require"],function(e){"use strict";var r=e("underscore"),s=e("jira-project-config/backbone"),t=e("jira-project-config/versions/templates");return s.View.extend({submit:function(e,s){if(this.$("#idsToMerge + .error").length>0)return this.$("#idsToMerge-textarea").focus(),this.$(".button:disabled").attr("disabled","disabled"),this;this.$(".throbber").addClass("loading");var t=this,o=e.idsToMerge,i=e.idMergeTo;o.length>1&&(o=r.without(o,i)),o&&0!==o.length||s();var n=[],a=o.length,g=!0,c=0,d=function(){var e=t.collection.get(o[c]);e.merge({data:{mergeTo:i},complete:function(e,r){400===e&&r&&r.errorMessages&&(g=!1),r&&r.errorMessages&&r.errorMessages.length>0&&(n=n.concat(r.errorMessages)),c++,c===a?g?s():(t.$(".throbber").removeClass("loading"),t.render(t.ready,{errorMessages:n})):d()}})};return d(),this},render:function(e,r){this.ready=e;var s=this;return r=r||{},s.el.innerHTML=t.mergeForm({versions:s.collection.toJSON(),errorMessages:r.errorMessages||[]}),e.call(s,s.el),this}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/js/ReleaseForm.js' */
define("jira-project-config/versions/release-form",["require"],function(e){"use strict";var r=e("jquery"),s=e("jira-project-config/backbone"),o=e("jira-project-config/versions/templates"),t=e("jira/api/projects");return s.View.extend({submit:function(e,r,s){this.$(".throbber").addClass("loading");var o=this,t={userReleaseDate:e.userReleaseDate,released:!0,expand:"operations"};return"move"===e.unresolved&&(t.moveUnfixedIssuesTo=e.moveUnfixedIssuesTo),this.model.save(t,{success:function(){r.render(),s()},error:function(r,t,a){if(400===a.status){var n={errors:t.errors,values:e};o.render(o.ready,n)}else s();o.$(".throbber").removeClass("loading")}}),this},render:function(e,s){this.ready=e;var a=this;return s=s||{},this.model.getUnresolvedIssueCount({success:function(n){var i=n.issuesCount,u=n.issuesUnresolvedCount,l=i-u,d=0!==n.issuesUnresolvedCount;a.el.innerHTML=o.releaseForm({version:a.model.toJSON(),unresolvedIssuesExist:d,issuesCount:i,issuesResolvedCount:l,issuesUnresolvedCount:u,versions:a.model.getMoveVersionsJSON(),projectId:r("meta[name=projectId]").attr("content"),projectName:t.getCurrentProjectName(),errors:s.errors||{},errorMessages:s.errorMessages||[]}),e.call(a,a.el);var c=a.$("#project-config-version-release-form-release-date-field")[0];Calendar.setup({singleClick:!0,align:"Bl",firstDay:AJS.params.firstDay,button:a.$("#project-config-versions-release-form-release-date-trigger")[0],inputField:c,currentMillis:AJS.params.currentMillis,useISO8601WeekNumbers:AJS.params.useISO8601,ifFormat:AJS.params.dateFormat}),a.model.get("releaseDate")&&Date.prototype.print&&(c.value=new Date(a.model.get("releaseDate")).print(AJS.params.dateFormat)),r("#moveUnfixedIssuesTo").focus(function(){r("#project-config-version-release-form-unresolved-move").attr("checked","checked")})}}),this}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/js/DeleteForm.js' */
define("jira-project-config/versions/delete-form",["require"],function(e){"use strict";var s=e("jquery"),t=e("underscore"),o=e("jira-project-config/versions/templates"),c=e("jira-project-config/backbone");return c.View.extend({submit:function(e,s,t){return this.$(".throbber").addClass("loading"),"swap"!==e.fix&&delete e.moveFixIssuesTo,"swap"!==e.affects&&delete e.moveAffectedIssuesTo,this.model.destroy({data:e,success:function(){t()},error:function(){t()}}),this},render:function(e){var c=this;return this.model.getRelatedIssueCount({success:function(i){var n=!0;0===i.issuesFixedCount&&0===i.issuesAffectedCount&&0===i.issueCountWithCustomFieldsShowingVersion&&(n=!1);var r=i.customFieldUsage||[],u=c.model.toJSON().id,d=s("meta[name=projectId]").attr("content");t.each(r,function(e){e.issueLink=encodeURI("project = "+d+" AND '"+e.fieldName+"' = "+u)}),c.el.innerHTML=o.deleteForm({version:c.model.toJSON(),relatedIssueCount:i,areRelatedIssues:n,versions:c.model.getSwapVersionsJSON(),projectId:d}),e.call(c,c.el),s("#moveAffectedIssuesTo").focus(function(){s("#affects-swap").attr("checked","checked")}),s("#moveFixIssuesTo").focus(function(){s("#fix-swap").attr("checked","checked")}),t.each(r,function(e){var t=e.customFieldId;s("#move-custom-"+t+"-to").focus(function(){s("#custom-swap-"+t).attr("checked","checked")})})}}),this}})});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-versions-dialogs', location = 'jira-project-config-plugin/versions/js/namespace-dialogs.js' */
AJS.namespace("JIRA.Admin.Version.DeleteForm",null,require("jira-project-config/versions/delete-form")),AJS.namespace("JIRA.Admin.Version.MergeForm",null,require("jira-project-config/versions/merge-form")),AJS.namespace("JIRA.Admin.Version.ReleaseForm",null,require("jira-project-config/versions/release-form")),AJS.namespace("JIRA.Templates.Versions",null,require("jira-project-config/versions/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'jira-project-config-plugin/utilities/widgets/progressindicator/template.soy' */
// This file was automatically generated from template.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.ProjectConfig.ProgressIndicator.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.ProjectConfig == 'undefined') { JIRA.Templates.ProjectConfig = {}; }
if (typeof JIRA.Templates.ProjectConfig.ProgressIndicator == 'undefined') { JIRA.Templates.ProjectConfig.ProgressIndicator = {}; }


JIRA.Templates.ProjectConfig.ProgressIndicator.render = function(opt_data, opt_ignored) {
  return '<div class="project-config-blanket"></div><div class="project-config-spinner"></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.ProjectConfig.ProgressIndicator.render.soyTemplateName = 'JIRA.Templates.ProjectConfig.ProgressIndicator.render';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'jira-project-config-plugin/utilities/widgets/progressindicator/template-wrapper.js' */
define("jira-project-config/utils/widgets/progress-indicator/templates",[],function(){"use strict";return window.JIRA.Templates.ProjectConfig.ProgressIndicator});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:progress-indicator', location = 'jira-project-config-plugin/utilities/widgets/progressindicator/view.js' */
define("jira-project-config/utils/widgets/progress-indicator",["require"],function(e){"use strict";var r=e("jira-project-config/marionette"),i=e("jira-project-config/utils/widgets/progress-indicator/templates"),t=40,n=440;return r.ItemView.extend({className:"project-config-progress-indicator-blanket",template:i.render,ui:{spinner:".project-config-spinner"},onBeforeClose:function(){clearInterval(this._intervalID)},onRender:function(){function e(){r=(r-t)%n,i.ui.spinner.css("background-position","0 "+r+"px")}var r=0,i=this;clearInterval(this._intervalID),this._intervalID=setInterval(e,50)}})}),AJS.namespace("JIRA.ProjectConfig.ProgressIndicator.View",null,require("jira-project-config/utils/widgets/progress-indicator"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'jira-project-config-plugin/utilities/region.js' */
define("jira-project-config/utils/region",["jira-project-config/marionette","jira/util/events","jira/util/events/types","jira/util/events/reasons"],function(e,i,t,n){"use strict";return e.Region.extend({initialize:function(){this.listenTo(this,"show",function(){i.trigger(t.NEW_CONTENT_ADDED,[this.$el,n.contentRefreshed])})}})}),AJS.namespace("JIRA.ProjectConfig.Region",null,require("jira-project-config/utils/region"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'jira-project-config-plugin/utilities/virtual-region.js' */
define("jira-project-config/utils/virtual-region",["jira-project-config/utils/region","jira-project-config/marionette","underscore","jquery"],function(i,e,t,r){"use strict";return i.extend({initialize:function(e){this.target=e.target,delete e.target,i.prototype.initialize.apply(this,arguments)},show:function(i){var n=i.isClosed||t.isUndefined(i.$el),o=i!==this.currentView;return this.currentView&&(n||o)&&(this.stub=r('<div style="display: none"></div>'),this.currentView.$el.replaceWith(this.stub)),e.Region.prototype.show.apply(this,arguments)},open:function(i){var e=this.stub||this.$el.find(this.target);e.replaceWith(i.el)}})}),AJS.namespace("JIRA.ProjectConfig.VirtualRegion",null,require("jira-project-config/utils/virtual-region"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-utilities', location = 'jira-project-config-plugin/utilities/utils.js' */
define("jira-project-config/utils",["jira/dialog/form-dialog","jira/ajs/ajax/smart-ajax","wrm/context-path","underscore","jquery"],function(e,t,r,n,o){var a="2",i=r()+"/rest/api/"+a;return{REST_VERSION:a,REST_BASE_URL:i,getRestVersion:function(){return a},getRestBaseUrl:function(){return i},getProjectKey:function(){return o("meta[name=projectKey]").attr("content")},getKey:function(){return o("meta[name=projectKey]").attr("content")},getProjectId:function(){return o("meta[name=projectId]").attr("content")},getId:function(){return o("meta[name=projectId]").attr("content")},convertXHRToSmartAjaxResult:function(e){var r=e.status>=400?"error":"success";return t.SmartAjaxResult(e,(new Date).getTime(),r,JSON.parse(e.responseText))},openDialogForRow:function(t,r,o,a){a=a||{};var i=new t({model:r.model}),c=new e(n.extend({id:o,content:function(e){i.render(function(t){e(t)})},submitHandler:function(e){i.submit(this.$form.serializeObject(),r,function(){c.hide()}),e.preventDefault()}},a));return c.show(),c}}}),AJS.namespace("JIRA.REST_VERSION",null,require("jira-project-config/utils").getRestVersion()),AJS.namespace("JIRA.REST_BASE_URL",null,require("jira-project-config/utils").getRestBaseUrl()),AJS.namespace("JIRA.ProjectConfig.getKey",null,require("jira-project-config/utils").getProjectKey),AJS.namespace("JIRA.ProjectConfig.getId",null,require("jira-project-config/utils").getProjectId),AJS.namespace("AJS.convertXHRToSmartAjaxResult",null,require("jira-project-config/utils").convertXHRToSmartAjaxResult),AJS.namespace("AJS.openDialogForRow",null,require("jira-project-config/utils").openDialogForRow);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-class-names', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/class-names.js' */
("undefined"===typeof window?global:window).__17e04bba0bef0009cc832216dc2470d2=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={NO_VALUE:"aui-restfultable-editable-no-value",NO_ENTRIES:"aui-restfultable-no-entires",RESTFUL_TABLE:"aui-restfultable",ROW:"aui-restfultable-row",READ_ONLY:"aui-restfultable-readonly",ACTIVE:"aui-restfultable-active",ALLOW_HOVER:"aui-restfultable-allowhover",FOCUSED:"aui-restfultable-focused",MOVEABLE:"aui-restfultable-movable",
DISABLED:"aui-restfultable-disabled",SUBMIT:"aui-restfultable-submit",CANCEL:"aui-restfultable-cancel",EDIT_ROW:"aui-restfultable-editrow",CREATE:"aui-restfultable-create",DRAG_HANDLE:"aui-restfultable-draghandle",ORDER:"aui-restfultable-order",EDITABLE:"aui-restfultable-editable",ERROR:"error",DELETE:"aui-restfultable-delete",LOADING:"loading"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-create-view', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/custom-create-view.js' */
("undefined"===typeof window?global:window).__226d5785d36c6f3d2eaa19d9b986ea68=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-edit-view', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/custom-edit-view.js' */
("undefined"===typeof window?global:window).__a88f71998f64176b4467b73bf7f68708=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-custom-read-view', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/custom-read-view.js' */
("undefined"===typeof window?global:window).__54897143fc7cd42cd80d313dd2bfdf55=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});var b=__e3ce9f42f29f6bd2118d84461512f4a4;a.default=(b&&b.__esModule?b:{"default":b}).default.View;return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-data-keys', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/data-keys.js' */
("undefined"===typeof window?global:window).__b68b83266eb028cf402de39c4933799b=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={ENABLED_SUBMIT:"enabledSubmit",ROW_VIEW:"RestfulTable_Row_View"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-vendor-jquery-serializetoobject', location = 'node_modules/@atlassian/aui/src/js-vendor/jquery/serializetoobject.js' */
("undefined"===typeof window?global:window).__c972538512dcf935ab0c75d63e2e3cff=function(){jQuery.fn.serializeObject=function(){var a={};this.find(":input:not(:button):not(:submit):not(:radio):not('select[multiple]')").each(function(){""!==this.name&&(null===this.value&&(this.value=""),a[this.name]=this.value.match(/^(tru|fals)e$/i)?"true"==this.value.toLowerCase():this.value)});this.find("input:radio:checked").each(function(){a[this.name]=this.value});this.find("select[multiple]").each(function(){var c=
jQuery(this),b=c.val();a[this.name]=c.data("aui-ss")?b?b[0]:"":null!==b?b:[]});return a};return{}}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-events', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/events.js' */
("undefined"===typeof window?global:window).__f9e062e0834111cb42fed4e788d40075=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={REORDER_SUCCESS:"RestfulTable.reorderSuccess",ROW_ADDED:"RestfulTable.rowAdded",ROW_REMOVED:"RestfulTable.rowRemoved",EDIT_ROW:"RestfulTable.switchedToEditMode",SERVER_ERROR:"RestfulTable.serverError",CREATED:"created",UPDATED:"updated",FOCUS:"focus",BLUR:"blur",SUBMIT:"submit",SAVE:"save",MODAL:"modal",MODELESS:"modeless",CANCEL:"cancel",
CONTENT_REFRESHED:"contentRefreshed",RENDER:"render",FINISHED_EDITING:"finishedEditing",VALIDATION_ERROR:"validationError",SUBMIT_STARTED:"submitStarted",SUBMIT_FINISHED:"submitFinished",INITIALIZED:"initialized",ROW_INITIALIZED:"rowInitialized",ROW_EDIT:"editRow"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-throbber', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/throbber.js' */
("undefined"===typeof window?global:window).__f736a94af005df464b5cb85d70aeb4be=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default=function(){return'<span class="aui-restfultable-throbber"></span>'};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-edit-row', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/edit-row.js' */
("undefined"===typeof window?global:window).__306e5d088ae3093bce3a4ccc028d1000=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var g={};"use strict";Object.defineProperty(g,"__esModule",{value:!0});var j="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},c=f(__307d3e18fd611f85395c67cddeb1fe24);__c972538512dcf935ab0c75d63e2e3cff;var k=
f(__e3ce9f42f29f6bd2118d84461512f4a4),l=f(__17e04bba0bef0009cc832216dc2470d2),m=f(__b68b83266eb028cf402de39c4933799b),n=f(__f9e062e0834111cb42fed4e788d40075);f(__d74c881c8f23921c15438d0f30c99f80);var o=f(__f736a94af005df464b5cb85d70aeb4be);g.default=k.default.View.extend({tagName:"tr",events:{focusin:"_focus",click:"_focus",keyup:"_handleKeyUpEvent"},initialize:function(a){this.$el=(0,c.default)(this.el);this._event=n.default;this.classNames=l.default;this.dataKeys=m.default;this.columns=a.columns;
this.isCreateRow=a.isCreateRow;this.allowReorder=a.allowReorder;this.events["click ."+this.classNames.CANCEL]="_cancel";this.delegateEvents();a.isUpdateMode?this.isUpdateMode=!0:(this._modelClass=a.model,this.model=new this._modelClass);this.fieldFocusSelector=a.fieldFocusSelector;this.bind(this._event.CANCEL,function(){this.disabled=true}).bind(this._event.SAVE,function(a){this.disabled||this.submit(a)}).bind(this._event.FOCUS,function(a){this.focus(a)}).bind(this._event.BLUR,function(){this.$el.removeClass(this.classNames.FOCUSED);
this.disable()}).bind(this._event.SUBMIT_STARTED,function(){this._submitStarted()}).bind(this._event.SUBMIT_FINISHED,function(){this._submitFinished()})},defaultColumnRenderer:function(a){if(!1!==a.allowEdit)return(0,c.default)("<input type='text' />").addClass("text").attr({name:a.name,value:a.value});if(a.value)return document.createTextNode(a.value)},renderDragHandle:function(){return'<span class="'+this.classNames.DRAG_HANDLE+'"></span></td>'},_handleKeyUpEvent:function(a){27===a.keyCode&&this.trigger(this._event.CANCEL)},
_cancel:function(a){this.trigger(this._event.CANCEL);a.preventDefault();return this},_submitStarted:function(){this.submitting=!0;this.showLoading().disable().delegateEvents({});return this},_submitFinished:function(){this.submitting=!1;this.hideLoading().enable().delegateEvents(this.events);return this},_focus:function(a){this.hasFocus()||this.trigger(this._event.FOCUS,a.target.name);return this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(a){this.enable();
a?a=this.$el.find(this.fieldFocusSelector(a)):(a=this.$el.find(this.classNames.ERROR+":first"),a=0===a.length?this.$el.find(":input:text:first"):a.parent().find(":input"));this.$el.addClass(this.classNames.FOCUSED);a.focus().trigger("select");return this},disable:function(){var a,b;c.default.browser.mozilla&&(b=this.$el.find(":submit"),b.length&&(a=(0,c.default)("<input type='submit' class='"+this.classNames.SUBMIT+"' />").addClass(b.attr("class")).val(b.val()).data(this.dataKeys.ENABLED_SUBMIT,b),
b.replaceWith(a)));this.$el.addClass(this.classNames.DISABLED).find(":submit").attr("disabled","disabled");return this},enable:function(){var a,b;c.default.browser.mozilla&&(a=this.$el.find(this.classNames.SUBMIT),(b=a.data(this.dataKeys.ENABLED_SUBMIT))&&a.length&&a.replaceWith(b));this.$el.removeClass(this.classNames.DISABLED).find(":submit").removeAttr("disabled");return this},showLoading:function(){this.$el.addClass(this.classNames.LOADING);return this},hideLoading:function(){this.$el.removeClass(this.classNames.LOADING);
return this},hasUpdates:function(){return!!this.mapSubmitParams(this.serializeObject())},serializeObject:function(){var a=this.$el;return a.serializeObject?a.serializeObject():a.serialize()},mapSubmitParams:function(a){return this.model.changedAttributes(a)},submit:function(a){var b=this,h;document.activeElement!==window&&(0,c.default)(document.activeElement).blur();if(this.isUpdateMode){if(h=this.mapSubmitParams(this.serializeObject()),!h)return b.trigger(b._event.CANCEL)}else this.model.clear(),
h=this.mapSubmitParams(this.serializeObject());this.trigger(this._event.SUBMIT_STARTED);this.model.save(h,{success:function(){b.isUpdateMode?b.trigger(b._event.UPDATED,b.model,a):(b.trigger(b._event.CREATED,b.model.toJSON()),b.model=new b._modelClass,b.render({errors:{},values:{}}),b.trigger(b._event.FOCUS));b.trigger(b._event.SUBMIT_FINISHED)},error:function(a,c,h){400===h.status&&(b.renderErrors(c.errors),b.trigger(b._event.VALIDATION_ERROR,c.errors));b.trigger(b._event.SUBMIT_FINISHED)},silent:!0});
return this},renderError:function(a,b){return(0,c.default)("<div />").attr("data-field",a).addClass(this.classNames.ERROR).text(b)},renderErrors:function(a){var b=this;this.$("."+this.classNames.ERROR).remove();a&&c.default.each(a,function(a,c){b.$el.find("[name='"+a+"']").closest("td").append(b.renderError(a,c))});return this},render:function(a){var b=this;this.$el.empty();this.allowReorder&&(0,c.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(b.$el);
c.default.each(this.columns,function(f,d){var e,i;e=a.values[d.id];var g=[{name:d.id,value:e,allowEdit:d.allowEdit},a.values,b.model];e&&b.$el.attr("data-"+d.id,e);e=b.isCreateRow&&d.createView?(new d.createView({model:b.model})).render(g[0]):d.editView?(new d.editView({model:b.model})).render(g[0]):b.defaultColumnRenderer.apply(b,g);i=(0,c.default)("<td />");"object"===("undefined"===typeof e?"undefined":j(e))&&e.done?e.done(function(a){i.append(a)}):i.append(e);d.styleClass&&i.addClass(d.styleClass);
i.appendTo(b.$el)});this.$el.append(this.renderOperations(a.update,a.values)).addClass(this.classNames.ROW+" "+this.classNames.EDIT_ROW);this.trigger(this._event.RENDER,this.$el,a.values);this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]);return this},renderOperations:function(a){var b=(0,c.default)('<td class="aui-restfultable-operations" />');a?b.append((0,c.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Update"})).append((0,
c.default)('<a class="aui-button aui-button-link" href="#" />').addClass(this.classNames.CANCEL).text("Cancel").attr({accesskey:this.cancelAccessKey})):b.append((0,c.default)('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Add"}));return b.add((0,c.default)('<td class="aui-restfultable-status" />').append((0,o.default)()))}});return g=g["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-events', location = 'node_modules/@atlassian/aui/src/js/aui/events.js' */
("undefined"===typeof window?global:window).__1a99a68c34e660050a094f87fb28903d=function(){function g(a){return a&&a.__esModule?a:{"default":a}}function d(a,b){(0,h.default)(j.default).trigger(a,b)}function e(a,b){(0,h.default)(j.default).bind(a,b)}function f(a,b,c){(0,h.default)(b).trigger(a,c);d(a,c);b.id&&d(b.id+"-"+a,c)}var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.triggerEvtForInst=b.triggerEvt=b.bindEvt=void 0;var h=g(__307d3e18fd611f85395c67cddeb1fe24),a;a=__c8cfa00f1eba9ac7af89ee3d0d33961d;
if(!a||!a.__esModule){var c={};if(null!=a)for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(c[i]=a[i]);c.default=a;a=c}var j=g(__fd277fcde858b82a198666a405e85600),c=g(__4d02fe17b8e885a34493e34af3d145dd);b.bindEvt=e=a.fn(e,"bindEvt",{sinceVersion:"5.8.0"});b.triggerEvt=d=a.fn(d,"triggerEvt",{sinceVersion:"5.8.0"});b.triggerEvtForInst=f=a.fn(f,"triggerEvtForInst",{sinceVersion:"5.8.0"});(0,c.default)("bindEvt",e);(0,c.default)("triggerEvt",d);(0,c.default)("triggerEvtForInst",f);b.bindEvt=
e;b.triggerEvt=d;b.triggerEvtForInst=f;return b}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-entry-model', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/entry-model.js' */
("undefined"===typeof window?global:window).__928a2470c59a6ae17c3b26224648a948=function(){function f(a){return a&&a.__esModule?a:{"default":a}}var i={};"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=f(__307d3e18fd611f85395c67cddeb1fe24),m=__1a99a68c34e660050a094f87fb28903d,
j=f(__922acd0053a6de3ea4c53d8902766ab6),h=f(__e3ce9f42f29f6bd2118d84461512f4a4),n=f(__f9e062e0834111cb42fed4e788d40075),k=h.default.Model.extend({sync:function(a,b,d){var e=this,c=d.error;d.error=function(a){e._serverErrorHandler(a,this);c&&c.apply(this,arguments)};return h.default.sync.apply(h.default,arguments)},save:function(a,b){var b=b||{},d=this,e,c=b.error,f=b.success;b.error=function(a,b){var e=g.default.parseJSON(b.responseText||b.data);c&&c.call(d,d,e,b)};this.isNew()?h.default.Model.prototype.save.call(this,
a,b):a&&(e=k.extend({url:this.url()}),e=new e({id:this.id}),e.save=h.default.Model.prototype.save,b.success=function(a,b){d.clear().set(a.toJSON());f&&f.call(d,d,b)},e.save(a,b))},destroy:function(a){var a=a||{},b=this,d=this.url(),e;a.data&&(e=g.default.param(a.data));""!==e&&(d=d+"?"+e);g.default.ajax({url:d,type:"DELETE",dataType:"json",contentType:"application/json",success:function(c){b.collection&&b.collection.remove(b);a.success&&a.success.call(b,c)},error:function(c){b._serverErrorHandler(c,
this);a.error&&a.error.call(b,c)}});return this},changedAttributes:function(a){var b={},d=this.toJSON();g.default.each(a,function(a,c){d[a]?d[a]&&d[a]!==c&&("object"===("undefined"===typeof c?"undefined":l(c))?j.default.isEqual(c,d[a])||(b[a]=c):b[a]=c):"string"===typeof c?""!==g.default.trim(c)&&(b[a]=c):g.default.isArray(c)?0!==c.length&&(b[a]=c):b[a]=c});if(!j.default.isEmpty(b))return this.addExpand(b),b},addExpand:function(){},_serverErrorHandler:function(a,b){var d;400!==a.status&&(d=g.default.parseJSON(a.responseText||
a.data),(0,m.triggerEvtForInst)(n.default.SERVER_ERROR,this,[d,a,b]))},fetch:function(a){a=a||{};this.clear();h.default.Model.prototype.fetch.call(this,a)}});i.default=k;return i=i["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table-row', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table/row.js' */
("undefined"===typeof window?global:window).__db1289144ca525c25c4d90561fcced7d=function(){function e(a){return a&&a.__esModule?a:{"default":a}}var h={};"use strict";Object.defineProperty(h,"__esModule",{value:!0});var b=e(__307d3e18fd611f85395c67cddeb1fe24),j;var c=__8eca5e5171c0c22be18ea931ed65c747;if(c&&c.__esModule)j=c;else{var k={};if(null!=c)for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(k[d]=c[d]);k.default=c;j=k}d=e(__e3ce9f42f29f6bd2118d84461512f4a4);var l=e(__17e04bba0bef0009cc832216dc2470d2),
m=e(__b68b83266eb028cf402de39c4933799b),n=e(__f9e062e0834111cb42fed4e788d40075);e(__d74c881c8f23921c15438d0f30c99f80);var o=e(__f736a94af005df464b5cb85d70aeb4be);h.default=d.default.View.extend({tagName:"tr",events:{"click .aui-restfultable-editable":"edit"},initialize:function(a){a=a||{};this._event=n.default;this.classNames=l.default;this.dataKeys=m.default;this.columns=a.columns;this.allowEdit=a.allowEdit;this.allowDelete=a.allowDelete;if(!this.events["click .aui-restfultable-editable"])throw Error("It appears you have overridden the events property. To add events you will need to usea work around. https://github.com/documentcloud/backbone/issues/244");
this.index=a.index||0;this.deleteConfirmation=a.deleteConfirmation;this.allowReorder=a.allowReorder;this.$el=(0,b.default)(this.el);this.bind(this._event.CANCEL,function(){this.disabled=!0}).bind(this._event.FOCUS,function(a){this.focus(a)}).bind(this._event.BLUR,function(){this.unfocus()}).bind(this._event.MODAL,function(){this.$el.addClass(this.classNames.ACTIVE)}).bind(this._event.MODELESS,function(){this.$el.removeClass(this.classNames.ACTIVE)})},renderDragHandle:function(){return'<span class="'+
this.classNames.DRAG_HANDLE+'"></span></td>'},defaultColumnRenderer:function(a){if(a.value)return document.createTextNode(a.value.toString())},sync:function(a){var b=this;this.model.addExpand(a);this.showLoading();this.model.save(a,{success:function(){b.hideLoading().render();b.trigger(b._event.UPDATED)},error:function(){b.hideLoading()}});return this},refresh:function(a,b){var c=this;this.showLoading();this.model.fetch({success:function(){c.hideLoading().render();a&&a.apply(this,arguments)},error:function(){c.hideLoading();
b&&b.apply(this,arguments)}});return this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(){(0,b.default)(this.el).addClass(this.classNames.FOCUSED);return this},unfocus:function(){(0,b.default)(this.el).removeClass(this.classNames.FOCUSED);return this},showLoading:function(){this.$el.addClass(this.classNames.LOADING);return this},hideLoading:function(){this.$el.removeClass(this.classNames.LOADING);return this},edit:function(a){a=(0,b.default)(a.target).is("."+
this.classNames.EDITABLE)?(0,b.default)(a.target).attr("data-field-name"):(0,b.default)(a.target).closest("."+this.classNames.EDITABLE).attr("data-field-name");this.trigger(this._event.ROW_EDIT,a);return this},renderOperations:function(){var a=this;if(!1!==this.allowDelete)return(0,b.default)("<a href='#' class='aui-button' />").addClass(this.classNames.DELETE).text("Delete").click(function(b){b.preventDefault();a.destroy()})},destroy:function(){if(this.deleteConfirmation){var a=
j.popup(400,200,"delete-entity-"+this.model.get("id"));a.element.html(this.deleteConfirmation(this.model.toJSON()));a.show();a.element.find(".cancel").click(function(){a.hide()});a.element.find("form").submit(_.bind(function(b){a.hide();this.model.destroy();b.preventDefault()},this))}else this.model.destroy()},render:function(){var a=this,c=this.model.toJSON(),e=(0,b.default)("<td class='aui-restfultable-operations' />").append(this.renderOperations({},c)),d=(0,b.default)("<td class='aui-restfultable-status' />").append((0,
o.default)());this.$el.removeClass(this.classNames.DISABLED+" "+this.classNames.FOCUSED+" "+this.classNames.LOADING+" "+this.classNames.EDIT_ROW).addClass(this.classNames.READ_ONLY).empty();this.allowReorder&&(0,b.default)('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(a.$el);this.$el.attr("data-id",this.model.id);b.default.each(this.columns,function(e,f){var g,d=(0,b.default)("<td />");g=c[f.id];var i=f.fieldName||f.id,h=[{name:i,value:g,allowEdit:f.allowEdit},
c,a.model];g&&a.$el.attr("data-"+f.id,g);g=f.readView?(new f.readView({model:a.model})).render(h[0]):a.defaultColumnRenderer.apply(a,h);if(!1!==a.allowEdit&&!1!==f.allowEdit){if(i=(0,b.default)("<span />").addClass(a.classNames.EDITABLE).append('<span class="aui-icon aui-icon-small aui-iconfont-edit"></span>').append(g).attr("data-field-name",i),d=(0,b.default)("<td />").append(i).appendTo(a.$el),!g||""==b.default.trim(g))d.addClass(a.classNames.NO_VALUE),i.html((0,b.default)("<em />").text(this.emptyText||
"Enter value"))}else d.append(g);f.styleClass&&d.addClass(f.styleClass);d.appendTo(a.$el)});this.$el.append(e).append(d).addClass(this.classNames.ROW+" "+this.classNames.READ_ONLY);this.trigger(this._event.RENDER,this.$el,c);this.$el.trigger(this._event.CONTENT_REFRESHED,[this.$el]);return this}});return h=h["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-restful-table', location = 'node_modules/@atlassian/aui/src/js/aui/restful-table.js' */
("undefined"===typeof window?global:window).__abf29ef092b15abcf6c6c04fa65a04b4=function(){function f(a){return a&&a.__esModule?a:{"default":a}}function l(a,b,c){(0,e.default)(b).trigger(a,c);(0,e.default)(document).trigger(a,c);b.id&&(a=b.id+"_"+a,(0,e.default)(document).trigger(a,c))}var m={};"use strict";Object.defineProperty(m,"__esModule",{value:!0});var e=f(__307d3e18fd611f85395c67cddeb1fe24),n;var h=__cf890abdf040e0993fb71f2f839bc972;if(h&&h.__esModule)n=h;else{var j={};if(null!=h)for(var k in h)Object.prototype.hasOwnProperty.call(h,
k)&&(j[k]=h[k]);j.default=h;n=j}var o=f(__e3ce9f42f29f6bd2118d84461512f4a4),r=f(__17e04bba0bef0009cc832216dc2470d2);k=f(__226d5785d36c6f3d2eaa19d9b986ea68);var h=f(__a88f71998f64176b4467b73bf7f68708),j=f(__54897143fc7cd42cd80d313dd2bfdf55),s=f(__b68b83266eb028cf402de39c4933799b),t=f(__306e5d088ae3093bce3a4ccc028d1000),p=f(__928a2470c59a6ae17c3b26224648a948),u=f(__f9e062e0834111cb42fed4e788d40075),w=f(__4d02fe17b8e885a34493e34af3d145dd);f(__d74c881c8f23921c15438d0f30c99f80);var q=f(__db1289144ca525c25c4d90561fcced7d),
v=f(__f736a94af005df464b5cb85d70aeb4be),g=o.default.View.extend({initialize:function(a){var b=this;b.options=e.default.extend(!0,b._getDefaultOptions(a),a);b.id=this.options.id;b._event=u.default;b.classNames=r.default;b.dataKeys=s.default;this.$table=(0,e.default)(a.el).addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui").addClass(b.classNames.LOADING);this.$table.wrapAll("<form class='aui' action='#' />");this.$thead=(0,e.default)("<thead/>");this.$theadRow=
(0,e.default)("<tr />").appendTo(this.$thead);this.$tbody=(0,e.default)("<tbody/>");if(!this.$table.length)throw Error("RestfulTable: Init failed! The table you have specified ["+this.$table.selector+"] cannot be found.");if(!this.options.columns)throw Error("RestfulTable: Init failed! You haven't provided any columns to render.");this.showGlobalLoading();this.options.columns.forEach(function(a){var d=e.default.isFunction(a.header)?a.header():a.header;"undefined"===typeof d&&(n.warn("You have not specified [header] for column ["+
a.id+"]. Using id for now..."),d=a.id);b.$theadRow.append("<th>"+d+"</th>")});b.$theadRow.append("<th></th><th></th>");this._models=this._createCollection();this._rowClass=this.options.views.row;this.editRows=[];this.$table.closest("form").submit(function(a){b.focusedRow&&b.focusedRow.trigger(b._event.SAVE);a.preventDefault()});this.options.allowReorder&&(this.$theadRow.prepend("<th />"),this.$tbody.sortable({handle:"."+this.classNames.DRAG_HANDLE,helper:function(a,d){var i=(0,e.default)("<div/>").attr("class",
d.attr("class")).addClass(b.classNames.MOVEABLE);d.children().each(function(){var a=(0,e.default)(this),b=parseInt(0+a.css("border-left-width"),10),c=parseInt(0+a.css("border-right-width"),10),b=a[0].clientWidth+b+c;i.append((0,e.default)("<div/>").html(a.html()).attr("class",a.attr("class")).width(b))});i=(0,e.default)("<div class='aui-restfultable-readonly'/>").append(i);i.css({left:d.offset().left});i.appendTo(document.body);return i},start:function(a,d){var i=d.helper[0].clientHeight,f=d.placeholder.find("td");
d.item.addClass(b.classNames.MOVEABLE).children().each(function(a){(0,e.default)(this).width(f.eq(a).width())});var g='<td colspan="'+b.getColumnCount()+'">&nbsp;</td>';d.placeholder.html(g).css({height:i,visibility:"visible"});b.getRowFromElement(d.item[0]).trigger(b._event.MODAL)},stop:function(a,d){if((0,e.default)(d.item[0]).is(":visible"))d.item.removeClass(b.classNames.MOVEABLE).children().attr("style",""),d.placeholder.removeClass(b.classNames.ROW),b.getRowFromElement(d.item[0]).trigger(b._event.MODELESS)},
update:function(a,d){var e={row:b.getRowFromElement(d.item[0]),item:d.item,nextItem:d.item.next(),prevItem:d.item.prev()};b.move(e)},axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8E3}),this.$tbody.bind("selectstart mousedown",function(a){return!(0,e.default)(a.target).is("."+b.classNames.DRAG_HANDLE)}));!1!==this.options.allowCreate&&(this._createRow=(new this.options.views.editRow({columns:this.options.columns,isCreateRow:!0,model:this.options.model.extend({url:function(){return b.options.resources.self}}),
cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey,allowReorder:this.options.allowReorder,fieldFocusSelector:this.options.fieldFocusSelector})).bind(this._event.CREATED,function(a){b.options.addPosition==void 0&&b.options.createPosition==="bottom"||b.options.addPosition==="bottom"?b.addRow(a):b.addRow(a,0)}).bind(this._event.VALIDATION_ERROR,function(){this.trigger(b._event.FOCUS)}).render({errors:{},values:{}}),this.$create=(0,e.default)('<tbody class="'+this.classNames.CREATE+
'" />').append(this._createRow.el),this._applyFocusCoordinator(this._createRow),this._createRow.trigger(this._event.FOCUS));this._models.bind("remove",function(a){b.getRows().forEach(function(d){if(d.model===a){d.hasFocus()&&b._createRow&&b._createRow.trigger(b._event.FOCUS);b.removeRow(d)}})});this.fetchInitialResources()},fetchInitialResources:function(){var a=this;e.default.isFunction(this.options.resources.all)?this.options.resources.all(function(b){a.populate(b)}):e.default.get(this.options.resources.all,
function(b){a.populate(b)})},move:function(a){var b=this,c=function(a){return a.length?{after:b.getRowFromElement(a).model.url()}:{position:"First"}};a.row&&(c=b.options.reverseOrder?c(a.nextItem):c(a.prevItem),e.default.ajax({url:a.row.model.url()+"/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(c),complete:function(){a.row.hideLoading()},success:function(a){AJS.triggerEvtForInst(b._event.REORDER_SUCCESS,b,[a])},error:function(a){var c=e.default.parseJSON(a.responseText||
a.data);AJS.triggerEvtForInst(b._event.SERVER_ERROR,b,[c,a,this])}}),a.row.showLoading())},_createCollection:function(){var a=this;return new (this.options.Collection.extend({sort:function(b){b||(b={});if(!this.comparator)throw Error("Cannot sort a set without a comparator");this.tableRows=a.getRows();this.models=this.sortBy(this.comparator);this.tableRows=void 0;b.silent||this.trigger("refresh",this,b);return this},remove:function(b,c){this.tableRows=a.getRows();o.default.Collection.prototype.remove.apply(this,
arguments);this.tableRows=void 0;return this}}))([],{comparator:function(b){var c;(void 0!==this.tableRows?this.tableRows:a.getRows()).some(function(a,e){if(a.model.id===b.id)return c=e,!0});return c}})},populate:function(a){this.options.reverseOrder&&a.reverse();this.hideGlobalLoading();a&&a.length?(this._models.reset([],{silent:!0}),this.renderRows(a),this.isEmpty()&&this.showNoEntriesMsg()):this.showNoEntriesMsg();this.$table.append(this.$thead);"bottom"===this.options.createPosition?this.$table.append(this.$tbody).append(this.$create):
this.$table.append(this.$create).append(this.$tbody);this.$table.removeClass(this.classNames.LOADING).trigger(this._event.INITIALIZED,[this]);l(this._event.INITIALIZED,this,[this]);this.options.autoFocus&&this.$table.find(":input:text:first").focus()},showGlobalLoading:function(){this.$loading||(this.$loading=(0,e.default)('<div class="aui-restfultable-init">'+(0,v.default)()+'<span class="aui-restfultable-loading">'+this.options.loadingMsg+"</span></div>"));this.$loading.is(":visible")||this.$loading.insertAfter(this.$table);
return this},hideGlobalLoading:function(){this.$loading&&this.$loading.remove();return this},addRow:function(a,b){var c,d;if(!a.id)throw Error("RestfulTable.addRow: to add a row values object must contain an id. Maybe you are not returning it from your restend point?Recieved:"+JSON.stringify(a));d=new this.options.model(a);c=this._renderRow(d,b);this._models.add(d);this.removeNoEntriesMsg();l(this._event.ROW_ADDED,this,[c,this]);return this},removeRow:function(a){this._models.remove(a.model);a.remove();
this.isEmpty()&&this.showNoEntriesMsg();l(this._event.ROW_REMOVED,this,[a,this])},isEmpty:function(){return 0===this._models.length},getModels:function(){return this._models},getTable:function(){return this.$table},getTableBody:function(){return this.$tbody},getCreateRow:function(){return this._createRow},getColumnCount:function(){var a=2;this.allowReorder&&++a;return this.options.columns.length+a},getRowFromElement:function(a){return(0,e.default)(a).data(this.dataKeys.ROW_VIEW)},showNoEntriesMsg:function(){this.$noEntries&&
this.$noEntries.remove();this.$noEntries=(0,e.default)("<tr>").addClass(this.classNames.NO_ENTRIES).append((0,e.default)("<td>").attr("colspan",this.getColumnCount()).text(this.options.noEntriesMsg)).appendTo(this.$tbody);return this},removeNoEntriesMsg:function(){this.$noEntries&&0<this._models.length&&this.$noEntries.remove();return this},getRows:function(){var a=this,b=[];this.$tbody.find("."+this.classNames.READ_ONLY).each(function(){var c=(0,e.default)(this).data(a.dataKeys.ROW_VIEW);c&&b.push(c)});
return b},_renderRow:function(a,b){var c=this,d=this.$tbody.find("."+this.classNames.READ_ONLY),e,f;f=new this._rowClass({model:a,columns:this.options.columns,allowEdit:this.options.allowEdit,allowDelete:this.options.allowDelete,allowReorder:this.options.allowReorder,deleteConfirmation:this.options.deleteConfirmation});this.removeNoEntriesMsg();f.bind(this._event.ROW_EDIT,function(a){l(this._event.EDIT_ROW,{},[this,c]);c.edit(this,a)});e=f.render().$el;-1!==b&&("number"===typeof b&&0!==d.length?e.insertBefore(d[b]):
this.$tbody.append(e));e.data(this.dataKeys.ROW_VIEW,f);f.bind(this._event.MODAL,function(){c.$table.removeClass(c.classNames.ALLOW_HOVER);c.$tbody.sortable("disable");c.getRows().forEach(function(a){c.isRowBeingEdited(a)||a.delegateEvents({})})});f.bind(this._event.MODELESS,function(){c.$table.addClass(c.classNames.ALLOW_HOVER);c.$tbody.sortable("enable");c.getRows().forEach(function(a){c.isRowBeingEdited(a)||a.delegateEvents()})});this._applyFocusCoordinator(f);this.trigger(this._event.ROW_INITIALIZED,
f);return f},isRowBeingEdited:function(a){var b=!1;this.editRows.some(function(c){if(c.el===a.el)return b=!0});return b},_applyFocusCoordinator:function(a){var b=this;a.hasFocusBound||(a.hasFocusBound=!0,a.bind(this._event.FOCUS,function(){b.focusedRow&&b.focusedRow!==a&&b.focusedRow.trigger(b._event.BLUR);b.focusedRow=a;a instanceof q.default&&b._createRow&&b._createRow.enable()}));return this},_removeEditRow:function(a){a=e.default.inArray(a,this.editRows);this.editRows.splice(a,1);return this},
_shiftFocusAfterEdit:function(){0<this.editRows.length?this.editRows[this.editRows.length-1].trigger(this._event.FOCUS):this._createRow&&this._createRow.trigger(this._event.FOCUS);return this},_saveEditRowOnBlur:function(){return 1>=this.editRows.length},dismissEditRows:function(){this.editRows.forEach(function(a){a.hasUpdates()||a.trigger(this._event.FINISHED_EDITING)},this)},edit:function(a,b){var c=this,d=new this.options.views.editRow({el:a.el,columns:this.options.columns,isUpdateMode:!0,allowReorder:this.options.allowReorder,
fieldFocusSelector:this.options.fieldFocusSelector,model:a.model,cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey}),e=a.model.toJSON();e.update=!0;d.render({errors:{},update:!0,values:e}).bind(c._event.UPDATED,function(b,d){c._removeEditRow(this);this.unbind();a.render().delegateEvents();a.trigger(c._event.UPDATED);!1!==d&&c._shiftFocusAfterEdit()}).bind(c._event.VALIDATION_ERROR,function(){this.trigger(c._event.FOCUS)}).bind(c._event.FINISHED_EDITING,function(){c._removeEditRow(this);
a.render().delegateEvents();this.unbind()}).bind(c._event.CANCEL,function(){c._removeEditRow(this);this.unbind();a.render().delegateEvents();c._shiftFocusAfterEdit()}).bind(c._event.BLUR,function(){c.dismissEditRows();c._saveEditRowOnBlur()&&this.trigger(c._event.SAVE,!1)});this._applyFocusCoordinator(d);d.trigger(c._event.FOCUS,b);c._createRow&&c._createRow.disable();this.editRows.push(d);return d},renderRows:function(a){var b=this._models.comparator,c=[];this._models.comparator=void 0;a=_.map(a,
function(a){a=new this.options.model(a);c.push(this._renderRow(a,-1).el);return a},this);this._models.add(a,{silent:!0});this._models.comparator=b;this.removeNoEntriesMsg();this.$tbody.append(c);return this},_getDefaultOptions:function(a){return{model:a.model||p.default,allowEdit:!0,views:{editRow:t.default,row:q.default},Collection:o.default.Collection.extend({url:a.resources.self,model:a.model||p.default}),allowReorder:!1,fieldFocusSelector:function(a){return":input[name="+a+"], #"+a},loadingMsg:a.loadingMsg||
"Loading"}}});g.ClassNames=r.default;g.CustomCreateView=k.default;g.CustomEditView=h.default;g.CustomReadView=j.default;g.DataKeys=s.default;g.EditRow=t.default;g.EntryModel=p.default;g.Events=u.default;g.Row=q.default;g.Throbber=v.default;(0,w.default)("RestfulTable",g);m.default=g;return m=m["default"]}.call(this);;
;
/* module-key = 'jira.webresources:aui-restfultable-amd-shim', location = '/static/lib/amd-shims/aui-restfultable-amd.js' */
define("aui/restful-table",function(){return AJS.RestfulTable});;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-restfultable', location = 'jira-project-config-plugin/global/js/events.js' */
!function(e){JIRA.bind(AJS.RestfulTable.Events.SERVER_ERROR,function(r,o){var s=e("#project-config-error-console");o&&o.errorMessages&&(s.empty(),new JIRA.FormDialog({id:"server-error-dialog",content:function(e){e(JIRA.Templates.Common.serverErrorDialog({message:o.errorMessages[0]}))}}).show())})}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/templates/components.soy' */
// This file was automatically generated from components.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Component.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Component == 'undefined') { JIRA.Templates.Component = {}; }


JIRA.Templates.Component.icon = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-component"></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.Component.icon.soyTemplateName = 'JIRA.Templates.Component.icon';
}


JIRA.Templates.Component.editComponentName = function(opt_data, opt_ignored) {
  return '<input class="text" name="name" value="' + soy.$$escapeHtml(opt_data.value ? opt_data.value : '') + '" />' + ((! opt_data.update) ? '<input name="project" type="hidden" value="' + soy.$$escapeHtml(opt_data.project) + '">' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.Component.editComponentName.soyTemplateName = 'JIRA.Templates.Component.editComponentName';
}


JIRA.Templates.Component.componentLead = function(opt_data, opt_ignored) {
  return '<span class="' + ((opt_data.component.lead && ! opt_data.component.lead.active) ? 'project-config-invalid' : '') + '">' + ((opt_data.component.lead) ? JIRA.Templates.User.profileLink({user: opt_data.component.lead, avatarSize: 'xsmall', avatarUrl: opt_data.component.lead.avatarUrls['16x16'], linked: false}) : (opt_data.component.leadUserName) ? soy.$$escapeHtml(opt_data.component.leadUserName) : '<em>' + soy.$$escapeHtml('Add Lead') + '</em>') + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.Component.componentLead.soyTemplateName = 'JIRA.Templates.Component.componentLead';
}


JIRA.Templates.Component.editComponentLead = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isLeadPickerDisabled) ? '<input name="leadUserName" class="text aui-ss-disabled" value="' + ((opt_data.lead) ? soy.$$escapeHtml(opt_data.lead.name) : (opt_data.leadUserName) ? soy.$$escapeHtml(opt_data.leadUserName) : '') + '" />' : '<select class="single-user-picker js-default-user-picker hidden" name="leadUserName">' + ((opt_data.lead) ? '<option style="background-image:url(' + soy.$$escapeHtml(opt_data.lead.avatarUrls['16x16']) + ')" selected="selected" value="' + soy.$$escapeHtml(opt_data.lead.name) + '">' + soy.$$escapeHtml(opt_data.lead.displayName) + '</option>' : (opt_data.leadUserName) ? '<option selected="selected" value="' + soy.$$escapeHtml(opt_data.leadUserName) + '">' + soy.$$escapeHtml(opt_data.leadUserName) + '</option>' : '') + '</select>');
};
if (goog.DEBUG) {
  JIRA.Templates.Component.editComponentLead.soyTemplateName = 'JIRA.Templates.Component.editComponentLead';
}


JIRA.Templates.Component.defaultAssignee = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.component.assigneeType) {
    case 'PROJECT_DEFAULT':
      output += '<span class="project-config-component-assignee project-config-component-project-default ' + ((! opt_data.component.isAssigneeTypeValid) ? 'project-config-invalid' : '') + '" ' + ((opt_data.component.assigneeInvalidMsg) ? ' title="' + soy.$$escapeHtml(opt_data.component.assigneeInvalidMsg) + '"' : '') + '>' + soy.$$escapeHtml('Project Default') + '</span>';
      break;
    case 'COMPONENT_LEAD':
      output += '<span class="project-config-component-assignee project-config-component-component-lead ' + ((! opt_data.component.isAssigneeTypeValid) ? 'project-config-invalid' : '') + '" ' + ((opt_data.component.assigneeInvalidMsg) ? ' title="' + soy.$$escapeHtml(opt_data.component.assigneeInvalidMsg) + '"' : '') + '>' + soy.$$escapeHtml('Component Lead') + '</span>';
      break;
    case 'PROJECT_LEAD':
      output += '<span class="project-config-component-assignee project-config-component-project-lead ' + ((! opt_data.component.isAssigneeTypeValid) ? 'project-config-invalid' : '') + '" ' + ((opt_data.component.assigneeInvalidMsg) ? ' title="' + soy.$$escapeHtml(opt_data.component.assigneeInvalidMsg) + '"' : '') + '>' + soy.$$escapeHtml('Project Lead') + '</span>';
      break;
    case 'UNASSIGNED':
      output += '<span class="project-config-component-assignee project-config-component-unassigned ' + ((! opt_data.component.isAssigneeTypeValid) ? 'project-config-invalid' : '') + '"' + ((opt_data.component.assigneeInvalidMsg) ? ' title="' + soy.$$escapeHtml(opt_data.component.assigneeInvalidMsg) + '"' : '') + '>' + soy.$$escapeHtml('Unassigned') + '</span>';
      break;
    default:
      output += '<span class="project-config-component-assignee project-config-component-unknown ' + ((! opt_data.component.isAssigneeTypeValid) ? 'project-config-invalid' : '') + '">' + soy.$$escapeHtml(opt_data.component.assigneeType) + '</span>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Component.defaultAssignee.soyTemplateName = 'JIRA.Templates.Component.defaultAssignee';
}


JIRA.Templates.Component.editDefaultAssignee = function(opt_data, opt_ignored) {
  return '<select class="select" name="assigneeType"><option value="PROJECT_DEFAULT"' + ((opt_data.assigneeType == 'PROJECT_DEFAULT') ? ' selected' : '') + '>' + soy.$$escapeHtml('Project Default') + ' (' + ((opt_data.isDefaultAssigneeProjectLead) ? soy.$$escapeHtml('Project Lead') : soy.$$escapeHtml('Unassigned')) + ')</option><option value="COMPONENT_LEAD"' + ((opt_data.assigneeType == 'COMPONENT_LEAD') ? ' selected' : '') + '>' + soy.$$escapeHtml('Component Lead') + ' ' + ((opt_data.lead) ? '(' + soy.$$escapeHtml(opt_data.lead.displayName) + ')' : '') + '</option><option value="PROJECT_LEAD"' + ((opt_data.assigneeType == 'PROJECT_LEAD') ? ' selected' : '') + '>' + soy.$$escapeHtml('Project Lead') + ' (' + soy.$$escapeHtml(opt_data.projectLeadAssignee) + ')</option><option value="UNASSIGNED"' + ((opt_data.assigneeType == 'UNASSIGNED') ? ' selected' : '') + '>' + soy.$$escapeHtml('Unassigned') + '</option></select>';
};
if (goog.DEBUG) {
  JIRA.Templates.Component.editDefaultAssignee.soyTemplateName = 'JIRA.Templates.Component.editDefaultAssignee';
}


JIRA.Templates.Component.deleteForm = function(opt_data, opt_ignored) {
  var output = '<h2 class="dialog-title">' + soy.$$escapeHtml('Delete') + ' ' + soy.$$escapeHtml('Component') + ': ' + soy.$$escapeHtml(opt_data.component.name) + '</h2><form class="aui" action="#" method="post"><div class="form-body">';
  if (opt_data.relatedIssueCount) {
    if (opt_data.swapComponents.length) {
      output += '<div class="aui-message info"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('There are issues related to this component, specify what is to be done with them.') + '</div><fieldset class="group"><legend><span>' + soy.$$escapeHtml('Related Issues') + ' (<a id="issue-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;component=' + soy.$$escapeHtml(opt_data.component.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount) + '</a>)</span></legend><div class="radio"><input name="component" value="swap" id="component-swap" class="radio" checked="checked" type="radio" /><label for="component-swap">' + soy.$$escapeHtml('Swap current issues to component') + '</label> <select name="moveIssuesTo" class="select">';
      var componentList194 = opt_data.swapComponents;
      var componentListLen194 = componentList194.length;
      for (var componentIndex194 = 0; componentIndex194 < componentListLen194; componentIndex194++) {
        var componentData194 = componentList194[componentIndex194];
        output += '<option value="' + soy.$$escapeHtml(componentData194.id) + '">' + soy.$$escapeHtml(componentData194.name) + '</option>';
      }
      output += '</select></div><div class="radio"><input name="component" value="remove" id="component-remove" class="radio" type="radio"><label for="component-remove">' + soy.$$escapeHtml('Remove component from all issues.') + '</label></div>';
    } else {
      output += '<div class="aui-message info"><span class="aui-icon icon-info"></span> <p>' + soy.$$escapeHtml('There are issues related to this component and no components in this project to migrate them to.') + ' <strong>' + soy.$$escapeHtml('The component will be removed from all issues.') + '</strong></p><ul><li>' + soy.$$escapeHtml('Related Issues') + ' (<a id="issue-count" href="' + soy.$$escapeHtml("") + '/secure/IssueNavigator.jspa?reset=true&amp;mode=hide&amp;pid=' + soy.$$escapeHtml(opt_data.projectId) + '&amp;component=' + soy.$$escapeHtml(opt_data.component.id) + '">' + soy.$$escapeHtml(opt_data.relatedIssueCount) + '</a>)</li></ul></div>';
    }
    output += '</fieldset>';
  } else {
    output += '<div class="aui-message info"><span class="aui-icon icon-info"></span>' + soy.$$escapeHtml('There are no issues that use this component. It is safe to delete.') + '</div>';
  }
  output += '</div><div class="buttons-container form-footer"><div class="buttons"><input id="submit" class="aui-button" type="submit" value="' + soy.$$escapeHtml('Delete') + '" /><a href="#" class="aui-button aui-button-link cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.Component.deleteForm.soyTemplateName = 'JIRA.Templates.Component.deleteForm';
}
;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/templates/template-wrapper.js' */
define("jira-project-config/component/templates",[],function(){"use strict";return window.JIRA.Templates.Component}),AJS.namespace("JIRA.Templates.Component",null,require("jira-project-config/component/templates"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/DeleteForm.js' */
define("jira-project-config/component/view/delete-form",["jira-project-config/component/templates","jira-project-config/backbone","jquery"],function(e,t,o){"use strict";var n=e;return t.View.extend({submit:function(e,t,o){return this.$(".throbber").addClass("loading"),"swap"!==e.component&&delete e.moveIssuesTo,this.model.destroy({data:e,success:function(){o()},error:function(){o()}}),this},render:function(e){var t=this;return this.model.getRelatedIssueCount({success:function(r){t.el.innerHTML=n.deleteForm({relatedIssueCount:r,component:t.model.toJSON(),swapComponents:t.model.getSwapComponentsJSON(),projectId:o("meta[name=projectId]").attr("content")}),e.call(t,t.el)}}),this}})}),AJS.namespace("JIRA.Admin.Component.DeleteForm",null,require("jira-project-config/component/view/delete-form"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/ComponentRow.js' */
define("jira-project-config/component/view/row",["aui/restful-table","jira-project-config/component/view/delete-form","jira-project-config/utils","jira/userhover/userhover"],function(e,t,o,i){"use strict";var n=e.Row;return n.extend({initialize:function(){n.prototype.initialize.apply(this,arguments),this.events["click .project-config-component-delete"]="destroy",this.delegateEvents(),this.bind(this._event.RENDER,function(){var e=this.model.get("id");this.$el.addClass("project-config-component").attr("id","component-"+e+"-row").attr("data-id",e),i(this.el)})},destroy:function(e){this.trigger("focus"),o.openDialogForRow(t,this,"component-"+this.model.get("id")+"-delete-dialog"),e&&e.preventDefault()}})}),AJS.namespace("JIRA.Admin.Component.ComponentRow",null,require("jira-project-config/component/view/row"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/EditComponentRow.js' */
define("jira-project-config/component/view/edit-row",["aui/restful-table"],function(t){"use strict";var i=t.EditRow;return i.extend({initialize:function(){i.prototype.initialize.apply(this,arguments),this.bind(this._event.RENDER,function(){this.$el.addClass("project-config-components-add-fields")})},submit:function(){var t=this.$(".project-config-component-lead .error");0===t.length?i.prototype.submit.apply(this,arguments):this.focus()}})}),AJS.namespace("JIRA.Admin.Component.EditComponentRow",null,require("jira-project-config/component/view/edit-row"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/Icon.js' */
define("jira-project-config/component/view/icon",["jira-project-config/component/templates","aui/restful-table"],function(e,n){"use strict";var o=n.CustomReadView,i=e;return o.extend({render:function(){return i.icon()}})}),AJS.namespace("JIRA.Admin.Component.IconView",null,require("jira-project-config/component/view/icon"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/ComponentLead.js' */
define("jira-project-config/component/view/lead",["jira-project-config/component/templates","aui/restful-table","underscore"],function(e,n,t){"use strict";var i=n.CustomReadView,o=e;return i.extend({render:function(){var e=t.clone(this.model.attributes);if(e.lead||e.leadUserName)return e.assigneeInvalidMsg=this.model.getAssigneeInvalidMsg(),o.componentLead({component:e})}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeReadView",null,require("jira-project-config/component/view/lead"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/DefaultAssignee.js' */
define("jira-project-config/component/view/default-assignee",["jira-project-config/component/templates","aui/restful-table"],function(e,n){"use strict";var t=n.CustomReadView,i=e;return t.extend({render:function(){return i.defaultAssignee({component:this.model.attributes})}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeTypeReadView",null,require("jira-project-config/component/view/default-assignee"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/EditName.js' */
define("jira-project-config/component/view/edit-name",["jira-project-config/component/templates","aui/restful-table"],function(e,t){"use strict";var n=t.CustomEditView,i=e;return n.extend({render:function(e){return e.project=this.model.getProject(),e.update=!1,i.editComponentName(e)}})}),AJS.namespace("JIRA.Admin.Component.NameEditView",null,require("jira-project-config/component/view/edit-name"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/EditDefaultAssignee.js' */
define("jira-project-config/component/view/edit-default-assignee",["jira-project-config/component/templates","aui/restful-table","underscore"],function(e,t,i){"use strict";var n=t.CustomEditView,s=e;return n.extend({render:function(){var e=i.clone(this.model.attributes);return e.isDefaultAssigneeProjectLead=this.model.isDefaultAssigneeProjectLead(),e.projectLeadAssignee=this.model.getProjectLeadAssignee(),s.editDefaultAssignee(e)}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeTypeEditView",null,require("jira-project-config/component/view/edit-default-assignee"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:project-config-component-views', location = 'jira-project-config-plugin/components/js/views/EditComponentLead.js' */
define("jira-project-config/component/view/edit-lead",["jira-project-config/component/templates","aui/restful-table","underscore"],function(e,i,n){"use strict";var t=i.CustomEditView,o=e;return t.extend({render:function(){var e=n.clone(this.model.attributes);return e.isLeadPickerDisabled=this.model.isLeadPickerDisabled(),e.assigneeInvalidMsg=this.model.getAssigneeInvalidMsg(),o.editComponentLead(e)}})}),AJS.namespace("JIRA.Admin.Component.RealAssigneeEditView",null,require("jira-project-config/component/view/edit-lead"));;
;
/* module-key = 'com.atlassian.jira.jira-project-config-plugin:globals-templates-common-soy', location = 'jira-project-config-plugin/global/templates/common.soy' */
// This file was automatically generated from common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.Common == 'undefined') { JIRA.Templates.Common = {}; }


JIRA.Templates.Common.serverErrorDialog = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + 'Error' + '</h2><div class="form-body"><div class="aui-message error"><span class="aui-icon icon-error"></span> ' + opt_data.message + '</div></div><div class="buttons-container form-footer"><div class="buttons"><a href="#" class="aui-button aui-button-link cancel">' + 'Close' + '</a></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.Common.serverErrorDialog.soyTemplateName = 'JIRA.Templates.Common.serverErrorDialog';
}


JIRA.Templates.Common.formatAnchor = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.href) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.body) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.Common.formatAnchor.soyTemplateName = 'JIRA.Templates.Common.formatAnchor';
}
;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/templates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Projects&&(JIRA.Projects={}),"undefined"==typeof JIRA.Projects.Release&&(JIRA.Projects.Release={}),"undefined"==typeof JIRA.Projects.Release.Templates&&(JIRA.Projects.Release.Templates={}),JIRA.Projects.Release.Templates.page=function(e,t){return""+(e.renderLegacy||e.showBreadcrumbs?"":JIRA.Projects.Release.Templates.whatsnew(e))+aui.page.pageHeader({content:"<h1>"+soy.$$escapeHtml(e.releaseTitle)+"</h1>"+(e.renderLegacy?'<div class="aui-page-header-image"><div class="aui-avatar aui-avatar-large"><div class="aui-avatar-inner project-config-icon48-versions"></div></div></div><div class="aui-page-header-main"><h2>'+soy.$$escapeHtml(e.releaseTitle)+"</h2></div>":"<h1>"+soy.$$escapeHtml(e.releaseTitle)+"</h1>")+(!e.adminLink||e.manageVersions||e.renderLegacy?"":aui.page.pageHeaderActions({content:""+aui.buttons.button({id:"manage-versions",text:"Manage Versions",href:soy.$$escapeHtml(AJS.contextPath())+"/"+soy.$$escapeHtml(e.adminLink)})})),extraClasses:""+(e.renderLegacy?"aui-page-header-fixed__legacy":"aui-page-header-fixed")})+'<div id="release-page" class="releases-page-app '+(e.renderLegacy?"releases-page-app__legacy":"")+'"></div>'},JIRA.Projects.Release.Templates.whatsnew=function(e,t){return e=e||{},""+(e.learnMoreURL?'<div class="whats-new-container"><div class="whats-new"><div class="logo"></div><h2>'+soy.$$escapeHtml("Get the status of a version at a glance or go deeper")+"</h2><p>"+soy.$$escapeHtml("These are the versions in your project. Hover over the progress bar for a summary or click a version to see the complete status, including the issues, development data, and potential problems.")+'</p><p><a href="'+soy.$$escapeHtml(e.learnMoreURL)+'" title="'+soy.$$escapeHtml(e.learnMoreTitle)+'">'+soy.$$escapeHtml("Learn more")+"</a></p></div></div>":"")},JIRA.Projects.Release.Templates.filter=function(e,t){return'<form id="version-filter" class="version-filter aui ajs-dirty-warning-exempt"><div class="version-filter-text-container"><div class="version-filter-search-container '+(e.contains?"version-filter-search-opened":"")+'"><input type="text" id="version-filter-text" class="version-filter-text text" value="'+soy.$$escapeHtml(e.contains)+'" /><span class="aui-icon aui-icon-small aui-iconfont-search-small"></span></div><div class="version-filter-status-text" title="'+soy.$$escapeHtml("Use Quick Filters to view a subset of versions.")+'">'+soy.$$escapeHtml("Quick filters:")+'</div></div><div class="version-filter-status-container">'+JIRA.Projects.Release.Templates.button({buttonName:"released",isPressed:e.isReleasedPressed,text:"Released"})+JIRA.Projects.Release.Templates.button({buttonName:"unreleased",isPressed:e.isUnreleasedPressed,text:"Unreleased"})+(e.showArchived?JIRA.Projects.Release.Templates.button({buttonName:"archived",isPressed:e.isArchivedPressed,text:"Archived"}):"")+"</div></form>"},JIRA.Projects.Release.Templates.button=function(e,t){return'<a class="version-filter-status-'+soy.$$escapeHtml(e.buttonName)+" version-filter-status-button "+(e.isPressed?"version-filter-status-pressed":"")+'" href="#" data-version-type="'+soy.$$escapeHtml(e.buttonName)+'">'+soy.$$escapeHtml(e.text)+"</a>"},JIRA.Projects.Release.Templates.table=function(e,t){return""+aui.table({extraClasses:"versions-table dynamic-table",theadContent:'<tr><th class="versions-table__handle"> </th><th class="versions-table__name">'+soy.$$escapeHtml("Version")+'</th><th class="versions-table__status">'+soy.$$escapeHtml("Status")+'</th><th class="versions-table__progress">'+soy.$$escapeHtml("Progress")+'</th><th class="versions-table__date">'+soy.$$escapeHtml("Start date")+'</th><th class="versions-table__date">'+soy.$$escapeHtml("Release date")+'</th><th class="versions-table__description">'+soy.$$escapeHtml("Description")+'</th><th class="dynamic-table__actions">'+soy.$$escapeHtml("Actions")+"</th></tr>",content:"",id:"versions-table"})},JIRA.Projects.Release.Templates.row=function(e,t){var s="<tr "+(null!=e.id?'data-version-id="'+soy.$$escapeHtml(e.id)+'"':"")+' class="item-state-'+soy.$$escapeHtml(e.state)+" "+(e.overdue?"release-overdue":"")+'">'+("ready"==e.state?'<td class="versions-table__handle"><span class="aui-icon aui-icon-small aui-iconfont-appswitcher">'+soy.$$escapeHtml("Reorder versions")+"</span></td>":'<td class="versions-table__handle-disabled"></td>')+'<td class="versions-table__name"><div>'+(e.url?'<a href="'+soy.$$escapeHtml(e.url)+'">'+soy.$$insertWordBreaks(soy.$$escapeHtml(e.name),10)+"</a>":soy.$$insertWordBreaks(soy.$$escapeHtml(e.name),10))+'</div></td><td class="versions-table__status"><div>'+(e.archived?aui.lozenges.lozenge({text:"archived",isSubtle:!0}):e.released?aui.lozenges.lozenge({text:"Released",type:"success",isSubtle:!0}):aui.lozenges.lozenge({text:"Unreleased",type:"current",isSubtle:!0}))+'</div></td><td class="versions-table__progress"><div>'+(e.status?JIRA.Projects.Release.Templates.status(e.status):"")+'</div></td><td class="versions-table__date_start"><div>'+JIRA.Projects.Release.Templates.date(e.startDate)+'</div></td><td class="versions-table__date_release"><div>'+JIRA.Projects.Release.Templates.date(e.releaseDate)+'</div></td><td class="versions-table__description"><div>'+soy.$$insertWordBreaks(soy.$$escapeHtml(e.description),10)+'</div></td><td class="dynamic-table__actions"><div>';switch(e.state){case"in-progress":s+=aui.icons.icon({icon:"wait"});break;case"in-progress-error":s+=aui.icons.icon({icon:"wait"});break;case"successful":s+=JIRA.Projects.AbstractList.Templates.actionsSuccess(null);break;case"error-add":s+=JIRA.Projects.AbstractList.Templates.actionsError({class:"operation-add"});break;case"error-delete":s+=JIRA.Projects.AbstractList.Templates.actionsError({class:"operation-delete"});break;case"error-update":s+=JIRA.Projects.AbstractList.Templates.actionsError({class:"operation-update"});break;default:s+=JIRA.Projects.Release.Templates.actionsDropdown(e)}return s+="</div></td></tr>"},JIRA.Projects.Release.Templates.actionsDropdown=function(e,t){for(var s='<a href="#version-actions-'+soy.$$escapeHtml(e.id)+'" aria-owns="version-actions-'+soy.$$escapeHtml(e.id)+'" aria-haspopup="true" class="aui-button aui-button-subtle aui-button-compact aui-dropdown2-trigger aui-dropdown2-trigger-arrowless aui-style-default details-button"><span class="aui-icon aui-icon-small aui-iconfont-more">'+soy.$$escapeHtml("Operations")+'</span></a><div id="version-actions-'+soy.$$escapeHtml(e.id)+'" class="aui-dropdown2 aui-style-default version-actions"><ul class="aui-list-truncate"><li>',a=e.operations,r=a.length,o=0;o<r;o++){var n=a[o],i=null!=n.href?AJS.contextPath()+n.href:"#";s+='<a class="'+soy.$$escapeHtml(n.styleClass)+'" href="'+soy.$$escapeHtml(i)+'">'+soy.$$escapeHtml(n.label)+"</a>"}return s+="</li></ul></div>"},JIRA.Projects.Release.Templates.emptyRow=function(e,t){return'<tr class="versions-table__row-empty"><td colspan="8"><div class="no-results no-table-common"><img class="releases-logo" src="'+soy.$$escapeHtml(AJS.contextPath())+'/download/resources/com.atlassian.jira.jira-projects-plugin:release-page-assets/page/project/release/image/versions-search-empty-state.svg" /><h4>'+soy.$$escapeHtml("No versions were found that match your search")+'</h4><p class="description">'+soy.$$escapeHtml("Try modifying your filter criteria.")+"</p></div></td></tr>"},JIRA.Projects.Release.Templates.status=function(e,t){var s="",a=e.unmapped.count+e.toDo.count+e.inProgress.count+e.complete.count;return s+=a?'<div class="progressbar-container"><div class="progressbar progressbar_full">'+JIRA.Projects.Release.Templates.progressBarEntry({entry:e.complete,totalCount:a,type:"complete",name:"Done"})+JIRA.Projects.Release.Templates.progressBarEntry({entry:e.inProgress,totalCount:a,type:"in-progress",name:"In Progress"})+JIRA.Projects.Release.Templates.progressBarEntry({entry:e.toDo,totalCount:a,type:"to-do",name:"To Do"})+JIRA.Projects.Release.Templates.progressBarEntry({entry:e.unmapped,totalCount:a,type:"undefined",name:"No Category"})+"</div></div>":soy.$$escapeHtml("No issues")},JIRA.Projects.Release.Templates.progressBarEntry=function(e,t){var s="",a=e.entry.count/e.totalCount*100;return s+=a?'<div class="progressbar__entry progressbar__entry progressbar__entry progressbar__entry_'+soy.$$escapeHtml(e.type)+'" data-type="'+soy.$$escapeHtml(e.type)+'" data-title="'+soy.$$escapeHtml(e.name)+'" data-count="'+soy.$$escapeHtml(e.entry.count)+'" data-url="'+soy.$$escapeHtml(e.entry.jqlUrl)+'" style="width: '+soy.$$escapeHtml(a)+'%"></div>':""},JIRA.Projects.Release.Templates.progressBarDialog=function(e,t){for(var s='<div class="progress-statuses">'+soy.$$escapeHtml("Version")+": "+soy.$$escapeHtml(e.name)+"<br />"+soy.$$escapeHtml(AJS.format("{0,choice,0#{0} issues|1#{0} issue|1\u003c{0} issues} in total",e.totalCount))+'<br /><table class="progress-statuses__table"><tbody>',a=e.entries,r=a.length,o=0;o<r;o++){var n=a[o];s+="<tr><td>"+soy.$$escapeHtml(n.name)+'</td><td><a href="'+soy.$$escapeHtml(n.url)+'">'+aui.badges.badge({text:n.count,extraClasses:"progress-statuses__table__badge progress-statuses__table__badge_"+soy.$$escapeHtml(n.type)})+"</a></td></tr>"}return s+='</tbody><tfoot><td colspan="2"><a href="'+soy.$$escapeHtml(e.url)+'">'+soy.$$escapeHtml("All issues")+"</a></td></tfoot></table></div>"},JIRA.Projects.Release.Templates.date=function(e,t){return e=e||{},""+(e.formatted?'<time class="date" datetime="'+soy.$$escapeHtml(e.iso)+'">'+soy.$$escapeHtml(e.formatted)+"</time>":"")},JIRA.Projects.Release.Templates.noVersions=function(e,t){return'<div class="no-versions no-table-common"><img class="releases-logo" src="'+soy.$$escapeHtml(AJS.contextPath())+'/download/resources/com.atlassian.jira.jira-projects-plugin:release-page-assets/jira-projects-module/page/project/release/image/versions-empty-state.svg" /><h4>'+soy.$$escapeHtml("You haven\'t added any version to this project yet")+'</h4><p class="description">'+soy.$$escapeHtml("Versions are points-in-time for a project, and help you organise and schedule your work.")+'</p><p><a id="learn-more" target="_blank" href="'+soy.$$filterNoAutoescape(e.learnMoreUrl)+'">'+soy.$$escapeHtml("Learn more")+"</a></p></div>"},JIRA.Projects.Release.Templates.addVersion=function(e,t){return""+aui.form.form({id:"releases-add__version",action:"",extraClasses:"ajs-dirty-warning-subsequent-submits-allowed",content:'<div class="releases-add__name">'+aui.form.input({placeholderText:"Version name",name:"name",type:"text"})+'<div class="error-container"></div></div><div class="releases-add__date-start">'+aui.form.input({placeholderText:"Start date (optional)",name:"startDate",type:"text",extraAttributes:' autocomplete="off"'})+'<a href="#" title="'+soy.$$escapeHtml("Select a date")+'">'+aui.icons.icon({icon:"calendar",useIconFont:!0,accessibilityText:"Select a date"})+'</a><div class="error-container" style="white-space: pre-wrap"></div></div><div class="releases-add__date-release">'+aui.form.input({placeholderText:"Release date (optional)",name:"releaseDate",type:"text",extraAttributes:' autocomplete="off"'})+'<a href="#" title="'+soy.$$escapeHtml("Select a date")+'">'+aui.icons.icon({icon:"calendar",useIconFont:!0,accessibilityText:"Select a date"})+'</a><div class="error-container" style="white-space: pre-wrap"></div></div><div class="releases-add__description">'+aui.form.input({placeholderText:"Description (optional)",name:"description",type:"text"})+'<div class="error-container"></div></div><div class="releases-add__confirm">'+aui.buttons.button({text:"Add",type:"primary"})+"</div>"})},JIRA.Projects.Release.Templates.tableLayout=function(e,t){return""+JIRA.Projects.AbstractList.Templates.tableLayoutCommon({id:"versions-table",class:"versions-table",headerRow:'<tr><th class="versions-table__handle"> </th><th class="versions-table__name">'+soy.$$escapeHtml("Version")+'</th><th class="versions-table__status">'+soy.$$escapeHtml("Status")+'</th><th class="versions-table__progress">'+soy.$$escapeHtml("Progress")+'</th><th class="versions-table__date">'+soy.$$escapeHtml("Start date")+'</th><th class="versions-table__date">'+soy.$$escapeHtml("Release date")+'</th><th class="versions-table__description">'+soy.$$escapeHtml("Description")+'</th><th class="dynamic-table__actions">'+soy.$$escapeHtml("Actions")+"</th></tr>"})},JIRA.Projects.Release.Templates.versionEdit=function(e,t){return""+aui.page.document({pageType:"focused",pageSize:"large",windowTitle:"Edit version",extraClasses:"version-edit",content:""+aui.page.pageHeader({content:""+aui.page.pageHeaderMain({content:"<h1>"+soy.$$escapeHtml("Edit version")+"</h1>"})})+("dialog"==e.decorator?JIRA.Projects.Release.Templates.versionEditFormPanel(e):aui.page.pagePanel({content:""+aui.page.pagePanelContent({content:""+JIRA.Projects.Release.Templates.versionEditFormPanel(e)})}))})},JIRA.Projects.Release.Templates.versionEditFormPanel=function(e,t){var s="";if(e.version&&!e.forbidden)s+=JIRA.Projects.Release.Templates.versionEditForm(e);else if(e.globalErrors){s+='<div id="version-edit" class="form-body">';for(var a="",r=e.globalErrors,o=r.length,n=0;n<o;n++){var i=r[n];a+=soy.$$escapeHtml(i)}s+=aui.message.error({content:a}),s+="</div>"}return s},JIRA.Projects.Release.Templates.versionEditForm=function(e,t){var s=""+(e.version.id?'<input type="hidden" name="id" value="'+soy.$$escapeHtml(e.version.id)+'" />':"")+(e.decorator?'<input type="hidden" name="decorator" value="'+soy.$$escapeHtml(e.decorator)+'" />':"")+(e.globalSuccess?aui.message.success({content:""+soy.$$escapeHtml(e.globalSuccess)}):"");if(e.globalErrors){for(var a="",r=e.globalErrors,o=r.length,n=0;n<o;n++){var i=r[n];a+=soy.$$escapeHtml(i)}s+=aui.message.error({content:a})}s+='<div class="form-body">'+aui.form.fieldGroup({content:""+aui.form.label({content:""+soy.$$escapeHtml("Name"),isRequired:"true"})+aui.form.input({id:"version-name",name:"name",type:"text",value:e.version.name})+JIRA.Projects.Release.Templates.errorDiv({name:"name",errors:e.errors,extraAttributes:"data-field=name"})})+aui.form.fieldGroup({content:""+aui.form.label({content:""+soy.$$escapeHtml("Start date")})+aui.form.input({placeholderText:"Start date (optional)",name:"userStartDate",type:"text",value:e.version.startDate.datePickerFormatted,extraAttributes:' autocomplete="off" date-picker data-field-name="startDate"'})+'<a href="#" title="'+soy.$$escapeHtml("Select a date")+'">'+aui.icons.icon({icon:"calendar",useIconFont:!0,accessibilityText:"Select a date"})+"</a>"+JIRA.Projects.Release.Templates.errorDiv({name:"startDate",errors:e.errors,extraAttributes:"data-field=startDate"})})+aui.form.fieldGroup({content:""+aui.form.label({content:""+soy.$$escapeHtml("Release date")})+aui.form.input({placeholderText:"Release date (optional)",name:"userReleaseDate",type:"text",value:e.version.releaseDate.datePickerFormatted,extraAttributes:' autocomplete="off" date-picker data-field-name="releaseDate"'})+'<a href="#" title="'+soy.$$escapeHtml("Select a date")+'">'+aui.icons.icon({icon:"calendar",useIconFont:!0,accessibilityText:"Select a date"})+"</a>"+JIRA.Projects.Release.Templates.errorDiv({name:"releaseDate",errors:e.errors,extraAttributes:"data-field=releaseDate"})})+aui.form.fieldGroup({content:""+aui.form.label({content:""+soy.$$escapeHtml("Description")})+aui.form.input({id:"version-description",name:"description",type:"text",value:e.version.description,placeholderText:"Description (optional)"})+JIRA.Projects.Release.Templates.errorDiv({name:"description",errors:e.errors,extraAttributes:"data-field=description"})})+"</div>"+aui.form.buttons({extraClasses:"horizontally-aligned form-footer",content:""+aui.form.submit({id:"version-save-submit",type:"primary",text:"Save"})+(e.urlCancel&&"dialog"==e.decorator?aui.buttons.button({id:"version-edit-cancel",href:e.urlCancel,type:"link",text:"Cancel",extraClasses:"cancel",extraAttributes:'data-project="'+soy.$$escapeHtml(e.projectKey)+'"'}):"")});var l=""+aui.form.form({id:"version-edit",action:soy.$$escapeHtml(AJS.contextPath())+"/rest/api/2/version/"+soy.$$escapeHtml(e.version.id),extraClasses:"version-edit-form",extraAttributes:'data-return-url="'+soy.$$escapeHtml(e.urlReturn)+'"',content:s});return l},JIRA.Projects.Release.Templates.errorDiv=function(e,t){return""+(e.errors.errors[e.name]?'<div class="error" '+(e.extraAttributes?soy.$$escapeHtml(e.extraAttributes):"")+">"+soy.$$escapeHtml(e.errors.errors[e.name])+"</div>":"")},JIRA.Projects.Release.Templates.calendarConfiguration=function(e,t){return'<fieldset class="hidden datepicker-params"><div class="parameters"><input title="dateFormat" type="hidden" value="'+soy.$$escapeHtml(e.ifFormat)+'" /></div></fieldset>'},JIRA.Projects.Release.Templates.searchLayout=function(e,t){return'<table class="top-container"><tr><td><div id="filter-container"></div></td><td><div id="merge-container"></div></td></tr></table>'+(e.isProjectAdmin?"":'<div id="adg3"></div>')+aui.page.pagePanelContent({content:'<div id="content-container"></div><div id="submit-container"></div><div id="config-data-container"></div>',extraClasses:"aui-page-panel-content-no-table"})},JIRA.Projects.Release.Templates.merge=function(e,t){return""+(e.isProjectAdmin&&e.versionsSize>1?'<a id="versions-merge" href="#"><img src="'+soy.$$escapeHtml(AJS.contextPath())+'/download/resources/com.atlassian.jira.jira-projects-plugin:release-page-assets/jira-projects-module/page/project/release/image/merge-versions-icon.svg" /> '+soy.$$escapeHtml("Merge versions")+"</a>":"<span></span>")};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/SubmitController.js' */
define("jira/projects/release/submit-controller",["jira/projects/libs/marionette","jira/ajs/ajax/ajax-util","jira/flag","jira/featureflags/feature-manager","jira/projects/release/submit-view","jira/projects/release/submit-model","jira/projects/abstract-list/submit-controller","jira/projects/abstract-model/submit-model-states"],function(e,t,i,s,r,a,n,o){var d=n.extend({initialize:function(e){this._viewModel=new a,this.pageableItems=e.pageableItems,this.isProjectAdmin=e.isProjectAdmin},showView:function(){var e=new r({model:this._viewModel,pageableItems:this.options.pageableItems});return this.listenTo(e,"save",this.versionAdd),e},versionAdd:function(e){var t=e.clone();return this.listenTo(t,"retry-add",function(){this._versionAdd(t,!1,o.IN_PROGRESS_ERROR)}),this._versionAdd(t,!0,o.IN_PROGRESS)},_versionAdd:function(e,t,i){return e.set("state",i),t&&this.pageableItems.addElement(e),e.save(i).done(function(){setTimeout(function(){e.get("state")===o.SUCCESSFUL&&e.set("state",o.READY)},5e3),e.trigger("added",e)}.bind(this)),e},displaySubmitView:function(){return this.isProjectAdmin}});return d});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/SubmitModelConverter.js' */
define("jira/projects/release/submit-model-converter",[],function(){var e={getDefaultStatus:function(){return["unmapped","toDo","inProgress","complete"].reduce(function(e,t){return e[t]={count:0,jqlUrl:""},e},{})},getDate:function(e,t){return{formatted:e,iso:t||""}}};return e});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/SubmitModel.js' */
define("jira/projects/release/submit-model",["backbone","jira/projects/abstract-list/submit-model","underscore","jquery","wrm/context-path","jira/projects/release/submit-model-converter","jira/projects/abstract-model/submit-model-states","jira/ajs/ajax/ajax-util","jira/projects/abstract-list/submit-model-events","wrm/context-path","jira/ajs/ajax/smart-ajax","jira/util/events"],function(e,t,s,r,a,i,o,n,c,l,u,d){var h=t.extend({RELATED_ISSUES_PATH:"/relatedIssueCounts",MERGE_PATH:"/mergeto/",urlRoot:a()+"/rest/api/2/version",defaults:s.extend({},t.prototype.defaults,{released:!1,archived:!1,operations:[]}),detailsPath:function(){return a()+"/rest/projects/1.0/project/"+encodeURIComponent(this.get("project"))+"/release/details/"+this.id},toDataJSON:function(){var e=this.toJSON(),t=s.pick(e,"project","name","description");return t.userStartDate=e.startDate.formatted,t.userReleaseDate=e.releaseDate.formatted,t},_traceItemAdded:function(){JIRA.trace("jira.version.add.finished")},parse:function(t,s){var r=e.Model.prototype.parse.call(this,t,s);return r.startDate=i.getDate(t.userStartDate,t.startDate),r.releaseDate=i.getDate(t.userReleaseDate,t.releaseDate),r.status=i.getDefaultStatus(),delete r.userStartDate,delete r.userReleaseDate,r},destroy:function(t){t=t||{},this.lastDestroyOptions=s.clone(t);var r=t.data?t.data.moveFixIssuesTo:void 0,a=this.collection;t.wait=!0;var i=e.Model.prototype.destroy.apply(this,arguments);return i&&(i.fail(function(e){this.set("state",o.ERROR_DELETE),this.set("errorMsg",AJS.escapeHtml(n.getErrorMessageFromXHR(e)))}.bind(this)),r>0?i.then(function(){var e=a.get(r);e?e.detailsSync().always(function(){JIRA.trace("jira.version.delete.finished")}):JIRA.trace("jira.version.delete.finished")}.bind(this)):i.always(function(){JIRA.trace("jira.version.delete.finished")}),this.trigger("removeItemEvent")),i},sync:function(t,s,r){switch(t){case"delete":var a=this._convertFormToReplacementData(r.data);return r.attrs=a,delete r.data,r.url=this.url()+"/removeAndSwap",e.sync("create",s,r);case"move":return r.url=this.url()+"/move",r.attrs=s?{after:s.url()}:{position:"First"},e.sync("create",this,r)}return e.sync.apply(this,arguments)},_convertFormToReplacementData:function(e){var e=e||{},t={};"swap"===e.affects&&(t.moveAffectedIssuesTo=e.moveAffectedIssuesTo),"swap"===e.fix&&(t.moveFixIssuesTo=e.moveFixIssuesTo);for(var s in e){var r=s.match(/^customField([0-9]+)Action$/);if(r){t.customFieldReplacementList=t.customFieldReplacementList||[];var a=e[s],i=r[1],o={customFieldId:Number(i),moveTo:"swap"===a?e["customField"+i+"MoveTo"]:null};t.customFieldReplacementList.push(o)}}return t},save:function(a,i){if(this.lastSaveAttributes=s.clone(a),i=i||{},this.isNew())return t.prototype.save.call(this,a,i);if(a){var n=r.Deferred();this.set("state",o.isStateError(this.get("state"))?o.IN_PROGRESS_ERROR:o.IN_PROGRESS);var c=i.error,l=i.success;return e.Model.prototype.save.call(this,[],{attrs:a}).done(function(e){this.detailsSync().always(function(){this.set("state",o.SUCCESSFUL),n.resolve(),l&&l.call(this,this,e)}.bind(this))}.bind(this)).fail(function(e){if(this.set("state",o.ERROR_UPDATE),n.reject(e),c){var t=r.parseJSON(e.responseText||e.data);c.call(this,this,t,e)}}.bind(this)),n}},getUnresolvedIssueCount:function(e){var t=this.id;e=e||{};e.error;return u.makeRequest({url:l()+"/rest/api/2/version/"+t+"/unresolvedIssueCount",complete:function(t,s,r){r.successful?e.success.call(this,r.data):e.success.call(this,r.data)}.bind(this)}),this},getMoveVersionsJSON:function(){var e=this.collection.filter(function(e){return!e.get("released")&&e!==this}.bind(this)).map(function(e,t){var s=e.toJSON();return this.collection.at(t+1)===this&&(s.nextScheduled=!0),s}.bind(this));return e},getRelatedIssueCount:function(e){var t=this;return e=e||{},u.makeRequest({url:this.url()+this.RELATED_ISSUES_PATH,complete:function(s,r,a){a.successful?e.success.call(t,a.data):t._serverErrorHandler(a)}}),this},getSwapVersionsJSON:function(){var e=this,t=[];return this.collection.each(function(s){s.get("archived")||s===e||t.push(s.toJSON())}),t.reverse()},_serverErrorHandler:function(e,t){var s={};if(400!==e.status){try{s=r.parseJSON(e.responseText||e.data)}catch(e){s.errorMessages=[e]}d.trigger(c.SERVER_ERROR,[s,e,t,this])}},merge:function(e){var t=this,s=this.url(),r=e.data,a=this.collection;return"string"!=typeof r.mergeTo&&e.error.call(this,{status:400,errorMessages:["parameters"]}),u.makeRequest({url:s+this.MERGE_PATH+r.mergeTo,type:"PUT",dataType:"json",timeout:12e4,complete:function(s,i,n){var c=n.data;if("string"==typeof n.data)try{c=JSON.parse(n.data)}catch(e){c={successful:!1,errorMessages:[String.valueOf(e)]},n.data=JSON.stringify(c)}var l=!(400===s.status&&c&&c.errors);if(n.successful){t.trigger("destroy",t,t.collection,e),e.success&&e.success.call(t,c);var u=a.get(r.mergeTo);u?u.detailsSync().always(function(){u.set("state",o.SUCCESSFUL),u.addStateTimeout(o.SUCCESSFUL,o.READY),JIRA.trace("jira.version.merge.finished")}):JIRA.trace("jira.version.merge.finished")}else l&&(t._serverErrorHandler(n),e.error&&e.error.call(t,c));e.complete&&e.complete.call(t,s.status,c)}}),this}});return h});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/PageableVersionsCollection.js' */
define("jira/projects/release/pageable-versions-collection",["backbone","jira/projects/release/submit-model","jira/projects/abstract-list/lazy-loading-collection"],function(e,i,o){var t=e.Collection.extend({model:i}),l=o.extend({collectionClass:t,initialize:function(e){o.prototype.initialize.apply(this,arguments),this.listenTo(this,"added",function(e){this._addToTop(this,e),this._addToTop(this.originalCollection,e),this._addToTop(this.fullCollection,e)}),this.listenTo(this,"reorder",function(e,i){this._moveBefore(this,e,i),this._moveBefore(this.originalCollection,e,i),this._moveBefore(this.fullCollection,e,i),this.trigger("collectionChanged")})},_addToTop:function(e,i){var o=e.indexOf(i);o>0&&(e.remove(i),e.add(i,{at:0}))},_moveBefore:function(e,i,o){e.remove(i,{silent:!0}),e.add(i,o&&{at:e.indexOf(o)})}});return l});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/SubmitView.js' */
define("jira/projects/release/submit-view",["jira/projects/abstract-list/submit-view","jira/projects/release/submit-model","jira/api/projects","jira/ajs/ajax/ajax-util","jira/flag","jira/util/data/meta","underscore","jira/moment","jira/projects/release/submit-model-converter","jira/projects/release/calendar-params-data"],function(e,t,a,r,i,n,s,o,d,u){var l=new Object,m=new Object,h=e.extend({template:JIRA.Projects.Release.Templates.addVersion,ui:{form:"form",allInputs:"input[name]",nameInput:"input[name='name']",dateStartInput:"input[name='startDate']",dateStartCalendarTrigger:".releases-add__date-start a",dateReleaseInput:"input[name='releaseDate']",dateReleaseCalendarTrigger:".releases-add__date-release a",descriptionInput:"input[name='description']",err_nameInput:".releases-add__name .error-container",err_dateStartInput:".releases-add__date-start .error-container",err_dateReleaseInput:".releases-add__date-release .error-container",addButton:".releases-add__confirm button"},events:{"submit @ui.form":"_onSubmit","input @ui.nameInput":"_validateForm","change @ui.dateStartInput":"_validateStartDate","change @ui.dateReleaseInput":"_validateReleaseDate"},validation:{nameInput:["_uniqueName","_constraint","_empty"]},onRender:function(){this._setupCalendar(this.ui.dateStartCalendarTrigger,this.ui.dateStartInput),this._setupCalendar(this.ui.dateReleaseCalendarTrigger,this.ui.dateReleaseInput),this._validateForm()},_setupCalendar:function(e,t){var a=s.extend({},u,{button:e,inputField:t});Calendar.setup(a)},_getFormData:function(){var e=this.ui.form.serializeArray().reduce(function(e,t){return e[t.name]=t.value,e},{});return e.project=a.getCurrentProjectKey(),e.startDate=d.getDate(e.startDate),e.releaseDate=d.getDate(e.releaseDate),e.status=d.getDefaultStatus(),e},_validateForm:function(e){var t=s.flatten([this._validateName(),this._validateStartDate(m),this._validateReleaseDate(m)]);return t.length>0?this.ui.addButton.attr("disabled","disabled"):this.ui.addButton.is(":disabled")&&(this.ui.addButton.removeAttr("disabled"),e&&this.ui.descriptionInput.is(e.target)&&this.ui.addButton.focus()),t},_onSubmit:function(e){e.preventDefault(),this._validateForm(e).length>0||(this.model.clear(),this.model.set(this._getFormData()),this.trigger("save",this.model),this.model.clear(),this.isDestroyed||(this.ui.allInputs.val(""),this.ui.nameInput.focus(),this._validateForm()))},_validateName:function(){return s.flatten(s.map(this.validation,function(e,t){var a=this.ui[t].val(),r=s.flatten(e.map(function(e){return this[e](a)},this)),i=r.filter(function(e){return e!==l});return i.length>0?this._showError(t,i.join(", ")):this._hideError(t),r},this))},_validateStartDate:function(e){return this._validateDate("dateStartInput","dateReleaseInput",!0,e)||[]},_validateReleaseDate:function(e){return this._validateDate("dateReleaseInput","dateStartInput",!1,e)||[]},_validateDate:function(e,t,a,r){var i,n=this.ui[e].val().trim();if(0==n.length)return this._hideError(e),void(r!==m&&this._validateForm());if(n=this._correctFormat(n)){this.ui[e].val(n);var s=this.ui[t].val().trim();s.length>0&&this._correctFormat(s)&&(this._hideError(t),this._compareDates(n,s,a)||(i="The start date cannot be after the release date."))}else i=AJS.format("Please enter the date in the following format: {0}",u.dateFormat);return this._showError(e,i),i?this.ui.addButton.attr("disabled","disabled"):r!==m&&this._validateForm(),i},_showError:function(e,t){this.ui["err_"+e].html(void 0!==t?t:"").toggleClass("error",void 0!==t)},_hideError:function(e){this.ui["err_"+e].html("").removeClass("error")},_uniqueName:function(e){return this.options.pageableItems.originalCollection.some(function(t){return(t.get("name")||"").toLowerCase()===(e||"").toLowerCase()})?"Version of such name already exists.":[]},_constraint:function(e){return e&&e.length>255?"255 character limit exceeded.":[]},_empty:function(e){return e&&0!==e.trim().length?[]:l},_compareDates:function(e,t,a){var r=o.splitDate(e,u.ifFormat),i=o.splitDate(t,u.ifFormat),n=new Date(r.year,r.month,r.day),s=new Date(i.year,i.month,i.day);return a?n<=s:s<=n},_correctFormat:function(e){var t=o.splitDate(e,u.ifFormat);if(t.month!==-1&&!isNaN(t.day)&&!isNaN(t.year)&&0!==t.day&&0!==t.year){var a=new Date(t.year,t.month,t.day);if(a.getFullYear()==t.year&&a.getMonth()==t.month)return e.toLowerCase()}}});return h});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/FilterModel.js' */
define("jira/projects/release/filter-model",["jira/projects/abstract-model/submit-model-states"],function(t){"use strict";var e=JIRA.Projects.AbstractList.FilterModel,s=e.extend({filterAttributes:["status","contains"],defaults:{status:"unreleased",contains:""},initialize:function(t){e.prototype.initialize.call(this,t),this.on("change:status change:contains",this.filterCollection),this.on("change:status change:contains",this.navigate)},_getStatus:function(){return this.get("status")||s.FILTER_NONE},_getContains:function(){return(this.get("contains")||"").toLowerCase()},emptyContainsField:function(){this.set("contains","")},filterCollection:function(){var t=this.pageableCollection.originalCollection.models.filter(this.elementMatchFilter,this);this.pageableCollection.resetFilter(t)},_statusMatches:function(t){var e=this._getStatus();return e===s.FILTER_ALL||e===s.FILTER_NONE||(t.get("archived")?this.containsStatus("archived"):this.containsStatus("released")&&t.get("released")||this.containsStatus("unreleased")&&!t.get("released"))},elementMatchFilter:function(e){if(e.get("state")===t.IN_PROGRESS||e.get("state")===t.IN_PROGRESS_ERROR)return!0;if(!this._statusMatches(e))return!1;var s=this._getContains();return""===s||e.get("name").toLowerCase().indexOf(s)>-1||e.get("description").toLowerCase().indexOf(s)>-1||e.get("startDate").formatted.toLowerCase().indexOf(s)>-1||e.get("releaseDate").formatted.toLowerCase().indexOf(s)>-1},containsStatus:function(t){var e=this.get("status")||s.FILTER_NONE;return 0===e.indexOf(t)||e.indexOf("-"+t)>0}},{FILTER_ALL:"all",FILTER_NONE:"no-filter"});return s});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/FilterView.js' */
define("jira/projects/page/release/view/filter",["jira/projects/libs/marionette","underscore","jira/projects/release/filter-model"],function(e,t,s){"use strict";var i=JIRA.Projects.Release.Templates,n=function(){return JIRA.trace.apply(JIRA,arguments)},a={CONTAINS_OPENED:"version-filter-search-opened",STATUS_PRESSED:"version-filter-status-pressed"};return e.ItemView.extend({template:i.filter,ui:{form:"form",unreleased:".version-filter-status-unreleased",released:".version-filter-status-released",archived:".version-filter-status-archived",contains:".text",quickFilter:".version-filter-status-text",searchContainer:".version-filter-search-container"},events:{"submit @ui.form":function(e){e.preventDefault()},"input @ui.contains":"inputContains","change @ui.contains":"inputContains","click @ui.released":"clickStatusReleased","click @ui.unreleased":"clickStatusUnreleased","click @ui.archived":"clickStatusArchived","focus @ui.contains":function(){this.ui.searchContainer.addClass(a.CONTAINS_OPENED)},"blur @ui.contains":function(){this._isContainsEmpty()&&this.ui.searchContainer.removeClass(a.CONTAINS_OPENED)}},modelEvents:{"change:status":function(){var e=this._getReleased(),t=this._getUnreleased(),s=this.ui.released.hasClass(a.STATUS_PRESSED),i=this.ui.unreleased.hasClass(a.STATUS_PRESSED);e&&!s&&this.ui.released.addClass(a.STATUS_PRESSED),!e&&s&&this.ui.released.removeClass(a.STATUS_PRESSED),t&&!i&&this.ui.unreleased.addClass(a.STATUS_PRESSED),!t&&i&&this.ui.unreleased.removeClass(a.STATUS_PRESSED),this.ui.archived.toggleClass(a.STATUS_PRESSED,this._getArchived()),n("project.release.status.changed")}},onRender:function(){this.ui.quickFilter.tooltip({gravity:"w"})},clickStatusReleased:function(e){this._clickStatus(e,!this._getReleased(),this._getUnreleased(),this._getArchived())},clickStatusUnreleased:function(e){this._clickStatus(e,this._getReleased(),!this._getUnreleased(),this._getArchived())},clickStatusArchived:function(e){this._clickStatus(e,this._getReleased(),this._getUnreleased(),!this._getArchived())},_clickStatus:function(e,t,s,i){e.preventDefault(),this.model.set("status",this._getCurrentStatus(t,s,i))},_isContainsEmpty:function(){return t.isEmpty(this.ui.contains.val())},searchContainerResize:function(){this._isContainsEmpty()?this.ui.contains.is(":focus")||this.ui.searchContainer.removeClass(a.CONTAINS_OPENED):this.ui.searchContainer.addClass(a.CONTAINS_OPENED)},_inputContains:t.debounce(function(){var e=this.ui.contains.val();this.model.set("contains",e)},100),inputContains:function(){this.searchContainerResize(),this._inputContains()},_getReleased:function(){var e=this.model.get("status");return e===s.FILTER_ALL||this.model.containsStatus("released")},_getUnreleased:function(){var e=this.model.get("status");return e===s.FILTER_ALL||this.model.containsStatus("unreleased")},_getArchived:function(){var e=this.model.get("status");return e===s.FILTER_ALL||this.model.containsStatus("archived")},_getCurrentStatus:function(e,t,i){if(e&&t&&i)return s.FILTER_ALL;if(!e&&!t&&!i)return s.FILTER_NONE;var n=[];return e&&n.push("released"),t&&n.push("unreleased"),i&&n.push("archived"),n.join("-")},serializeData:function(){var e=this;return{contains:this.model.get("contains"),isReleasedPressed:e._getReleased(),isUnreleasedPressed:e._getUnreleased(),isArchivedPressed:e._getArchived(),showArchived:e.options.isProjectAdmin}}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/EmptyItemView.js' */
define("jira/projects/release/empty-item-view",["jira/projects/libs/marionette"],function(e){"use strict";var t=e.ItemView.extend({template:JIRA.Projects.Release.Templates.emptyRow,onRender:function(){this.unwrapTemplate()}});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/NoVersionsItemView.js' */
define("jira/projects/release/noversionsitemview",["jira/projects/libs/marionette","jira/projects/release/analytics"],function(e,r){"use strict";var n=e.ItemView.extend({template:JIRA.Projects.Release.Templates.noVersions,ui:{learnMoreLink:"#learn-more"},events:{"click @ui.learnMoreLink":"onLearnMoreClicked"},onRender:function(){this.unwrapTemplate(),r.emptyViewRendered()},onLearnMoreClicked:function(){r.releaseLearnMoreClicked()}});return n});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/ItemView.js' */
define("jira/projects/release/item-view",["jira/projects/abstract-list/item-view","jquery","jira/projects/libs/marionette","jira/projects/abstract-model/submit-model-states","jira/ajs/ajax/ajax-util","jira-project-config/utils","jira/projects/release/version-adapter"],function(e,t,i,r,n,s,a){"use strict";function o(e){var t;return t=404===e.readyState?"Version of such name does not exist":n.getErrorMessageFromXHR(e),AJS.escapeHtml(t)}var l=JIRA.Admin.Version.DeleteForm,c=JIRA.Admin.Version.ReleaseForm,u=e.extend({template:JIRA.Projects.Release.Templates.row,ui:_.extend({},e.prototype.ui,{dragHandle:".versions-table__handle .aui-icon",progressbar:".progressbar",deleteLink:".project-config-operations-delete",releaseversionLink:".project-config-operations-release",unreleaseversionLink:".project-config-operations-unrelease",archiveversionLink:".project-config-operations-archive",unarchiveversionLink:".project-config-operations-unarchive"}),modelEvents:_.extend({},e.prototype.modelEvents,{"retry-delete":"_deleteItemRetry","retry-update":"_updateItemRetry"}),outterEvents:{"click @ui.deleteLink":"deleteItem","click @ui.releaseversionLink":"release","click @ui.unreleaseversionLink":"unrelease","click @ui.archiveversionLink":"archive","click @ui.unarchiveversionLink":"unarchive"},onRender:function(){this.listenToElements(this.outterEvents),this.unwrapTemplate(),this.initializeProgressDialog()},_discardOperation:function(e){e.preventDefault(),this.model.discard(),this.flag&&this.flag.close()},deleteItem:function(e){e.preventDefault(),this._deletePerform()},_deleteItemRetry:function(){this.model.set("state",r.IN_PROGRESS_ERROR),this.model.destroy(this.model.lastDestroyOptions)},_deletePerform:function(){this._showLoading();var e=this.model.detailsSync();e.then(function(){s.openDialogForRow(l,this,"version-"+this.model.get("id")+"-delete-dialog",{width:700})}.bind(this)).fail(function(e){this.model.set("state",r.ERROR_DELETE),this.model.set("errorMsg",o(e))}.bind(this),this._hideLoading.bind(this))},_updateItemRetry:function(){this._saveChanges(this.model.lastSaveAttributes)},_saveChanges:function(e){this.model.save(e).done(function(){setTimeout(function(){this.model.get("state")===r.SUCCESSFUL&&this.model.set("state",r.READY)}.bind(this),5e3)}.bind(this))},release:function(e){e.preventDefault(),this._releasePerform()},_releasePerform:function(){var e=this.model,i=new a(e),r=s.openDialogForRow(c,i,"version-release-dialog");return t(r).on("Dialog.hide",function(){var t=this.$form.serializeObject(),i=t.moveUnfixedIssuesTo;if(i){var r=e.collection.get(i);r&&r.detailsSync().always(function(){JIRA.trace("jira.version.release.reload.finished")})}}),r},unrelease:function(e){e.preventDefault(),this._unreleasePerform()},_unreleasePerform:function(){this._saveChanges({released:!1})},archive:function(e){e.preventDefault(),this._archivePerform()},_archivePerform:function(){this._saveChanges({archived:!0})},unarchive:function(e){e.preventDefault(),this._unarchivePerform()},_unarchivePerform:function(){this._saveChanges({archived:!1})},initializeProgressDialog:function(){var e=this,i=AJS.InlineDialog(this.ui.progressbar,"version-progress-"+this.cid,function(e,r,n){var s=AJS.$(r),a=s.closest("tr"),o=a.find("td.versions-table__name a"),l=[],c=0;return s.find(".progressbar__entry").each(function(e,i){var r=t(i),n=+r.attr("data-count");c+=+n,l.push({name:r.attr("data-title"),type:r.attr("data-type"),url:r.attr("data-url"),count:n})}),e.html(JIRA.Projects.Release.Templates.progressBarDialog({name:o.text(),url:o.attr("href"),totalCount:c,entries:l})),n(),i.refresh(),!1},{gravity:"w",autoWidth:!0,onHover:!0,hideDelay:500});i.on("click","a",function(){e.trigger("progressDialogClicked")})}});return u});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/VersionAdapter.js' */
define("jira/projects/release/version-adapter",["backbone","jquery","jira/projects/abstract-model/submit-model-states","jira/ajs/ajax/ajax-util"],function(e,t,o,s){"use strict";var r=function(t){_.extend(this,e.Events),this._backboneModel=t,this.model=this};return r.RELEASE_SUCCESS_EVENT="version.model.save.success",r.RELEASE_ERROR_EVENT="version.model.save.error",r.prototype.getUnresolvedIssueCount=function(e){return this._backboneModel.getUnresolvedIssueCount(e),this},r.prototype.getMoveVersionsJSON=function(){return this._backboneModel.getMoveVersionsJSON()},r.prototype.toJSON=function(){return this._backboneModel.toJSON()},r.prototype.get=function(e){if("releaseDate"!==e)return this._backboneModel.get(e);var t=this._backboneModel.get("releaseDate");return t?t.iso:void 0},r.prototype.save=function(n,a){this._backboneModel.lastSaveAttributes=_.clone(n),a=a||{};var i=a.error,c=a.success,l=t.Deferred();return e.Model.prototype.save.call(this._backboneModel,[],{attrs:n}).done(function(e){l.resolve(),this._backboneModel.set("state",o.SUCCESSFUL),this._backboneModel.addStateTimeout(o.SUCCESSFUL,o.READY),c&&(c.call(this,this,e),this.trigger(r.RELEASE_SUCCESS_EVENT,n))}.bind(this)).fail(function(e){if(l.reject(e),400!=e.status&&this._backboneModel.set("state",o.ERROR_UPDATE),this._backboneModel.set("errorMsg",AJS.escapeHtml(s.getErrorMessageFromXHR(e))),i){var n=t.parseJSON(e.responseText||e.data);i.call(this._backboneModel,this._backboneModel,n,e),this.trigger(r.RELEASE_ERROR_EVENT,n)}}.bind(this)),l},r.prototype.render=function(){this._backboneModel.detailsSync()},r});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/ItemCollectionView.js' */
define("jira/projects/release/item-collection-view",["jquery","underscore","jira/projects/abstract-list/item-collection-view","jira/projects/release/item-view","jira/projects/release/empty-item-view"],function(e,i,t,r,c){"use strict";return t.extend({childView:r,emptyView:c})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/TableLayoutView.js' */
define("jira/projects/release/table-layout-view",["jira/projects/abstract-list/table-layout-view","jira/projects/release/item-collection-view","jira/projects/abstract-model/submit-model-states","jquery"],function(e,t,r,i){"use strict";var o=e.extend({template:JIRA.Projects.Release.Templates.tableLayout,ItemCollectionView:t,onRender:function(){e.prototype.onRender.apply(this,arguments),this.makeSortable()},makeSortable:function(){var e=this.$el.find("tbody.items"),t=!1;e.sortable({placeholder:{element:function(e){return i('<tr class="item-placeholder"><td colspan="'+e.find("td").length+'"></td></tr>').css("height",e.height()+"px")[0]},update:function(e,t){}},handle:".versions-table__handle",axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8e3,update:function(i,o){if(t)return e.sortable("cancel"),void(t=!1);var n=this.collection.get(o.item.data("version-id")),a=this.collection.at(this.collection.indexOf(n)+1),s=this.collection.get(o.item.nextAll("tr[data-version-id]").first().data("version-id"));n&&(n.set("state",r.IN_PROGRESS),n.sync("move",s,{}).then(function(){JIRA.trace("jira.version.reorder.success")}).fail(function(){this.reorder(n,a),JIRA.trace("jira.version.reorder.failure")}.bind(this)).always(function(){n.set("state",r.READY),JIRA.trace("jira.version.reorder.finished")}),this.reorder(n,s))}.bind(this),helper:function(e,t){var r=t.find("td"),o=t.clone();return o=o.appendTo("body").wrap('<table class="aui dynamic-table versions-table versions-table__readonly"><tbody class="items"></tbody></table>').parent().parent().css("left",t.offset().left+"px"),o.find("td").each(function(e,t){i(t).css("width",i(r[e]).width()+"px")}),o}}),i(document).keyup(function(r){r.keyCode===i.ui.keyCode.ESCAPE&&(t=!0,e.sortable("cancel"),t=!1)}),this.listenTo(this.collection,"add remove destroy",function(t,r){var i=e.data("sortable");i&&(i.refresh(),i.helper&&i._setContainment())})},reorder:function(e,t){var r=i(window).scrollTop();this.collection.trigger("reorder",e,t),i(window).scrollTop(r)}});return o});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/MergeView.js' */
define("jira/projects/release/merge-view",["jira/projects/libs/marionette","jira/dialog/form-dialog","jira/ajs/select/multi-select","jquery"],function(e,i,t,r){"use strict";var n=e.ItemView.extend({template:JIRA.Projects.Release.Templates.merge,ui:{mergeButton:"#versions-merge"},onRender:function(){this.ui.mergeButton.on("click",this.mergeVersions.bind(this))},initialize:function(e){this.pageableItems=e.pageableItems,this.isProjectAdmin=!!e.isProjectAdmin},serializeData:function(){return{isProjectAdmin:this.isProjectAdmin,versionsSize:this.pageableItems.originalCollection.length}},mergeVersions:function(e){e.preventDefault();var n=new JIRA.Admin.Version.MergeForm({collection:this.pageableItems.originalCollection}),o=function(e){return e.idsToMerge?e.idsToMerge=Array.isArray(e.idsToMerge)?e.idsToMerge:[e.idsToMerge]:e.idsToMerge=[],e},s=new i({id:"versionsMergeDialog",content:function(e){n.render(function(i){e(i)})},submitHandler:function(e){var i=o(this.$form.serializeObject());s.$popup.find("#idsToMerge + .error").length>0?(s.hideFooterLoadingIndicator(),s.$popup.find(".aui-button:disabled").removeAttr("disabled")):0===i.idsToMerge.length?s.hide():n.submit(i,function(){s.hide()}),e.preventDefault()}});return s.onContentReady(function(){var e=r("#versionsMergeDialog select[multiple]");new t({element:e,itemAttrDisplayed:"label"})}),s.show(),s}});return n});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/SearchLayoutView.js' */
define("jira/projects/release/searchlayoutview",["jira/projects/libs/marionette","backbone","jira/projects/page/release/view/filter","jira/projects/release/noversionsitemview","jira/projects/release/table-layout-view","jira/projects/release/merge-view","jira/projects/release/config-data-view"],function(e,i,t,n,r,o,s){"use strict";var a=e.LayoutView.extend({template:JIRA.Projects.Release.Templates.searchLayout,regions:{submitRegion:"#submit-container",filterRegion:"#filter-container",mainRegion:"#content-container",mergeRegion:"#merge-container",configDataRegion:"#config-data-container"},initialize:function(e){this.filter=e.filter,this.pageableItems=e.pageableItems,this.releaseLearnMoreUrl=e.releaseLearnMoreUrl,this.submitController=e.submitController,this.configDataModel=e.configDataModel,this.listenTo(this.pageableItems,"collectionChanged",this._renderMainRegion),this.isProjectAdmin=e.isProjectAdmin},serializeData:function(){return{isProjectAdmin:this.isProjectAdmin}},onRender:function(){this.submitController.displaySubmitView()&&this.submitRegion.show(this.submitController.showView()),this._renderMainRegion()},_renderMainRegion:function(){if(0===this.pageableItems.originalCollection.length)this.mainRegion.show(new n({model:new i.Model({learnMoreUrl:this.releaseLearnMoreUrl})})),this.filterRegion.empty(),this.filter.emptyContainsField(),this.mergeRegion.empty();else{this.filterRegion.show(new t({model:this.filter,isProjectAdmin:this.isProjectAdmin})),this.listenTo(this,"filterChanged",function(){this.filterRegion.currentView.render()});var e=new r({submitController:this._submitController,collection:this.pageableItems});this.mainRegion.show(e),this.mainRegion.currentView.on("childview:progressDialogClicked",function(){this.trigger("progressDialogClicked")}.bind(this));var a=new o({pageableItems:this.pageableItems,isProjectAdmin:this.isProjectAdmin});this.mergeRegion.show(a)}var l=new s({model:this.configDataModel});this.configDataRegion.show(l)}});return a});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/ConfigDataView.js' */
define("jira/projects/release/config-data-view",["jira/projects/libs/marionette"],function(e){"use strict";var t=e.ItemView.extend({template:JIRA.Projects.Release.Templates.calendarConfiguration});return t});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/ConfigDataModel.js' */
define("jira/projects/release/config-data-model",["backbone","jira/projects/release/calendar-params-data"],function(e,a){"use strict";return e.Model.extend({defaults:{ifFormat:a.ifFormat}})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/ReleasePageApp.js' */
define("jira/projects/page/release/release-page-app",["jira/projects/libs/marionette","jira/api/projects","jira/data/local-storage","wrm/data","backbone","jquery","jira/projects/release/searchlayoutview","jira/projects/release/submit-controller","jira/projects/release/pageable-versions-collection","jira/projects/release/filter-model","jira/projects/abstract-list/submit-model-events","jira/projects/release/config-data-model","jira/dialog/form-dialog","jira/util/events"],function(e,t,r,a,i,o,s,n,l,c,g,u,p,m){"use strict";function j(){return void 0!==t.getCurrentProjectId()}var d=a.claim("com.atlassian.jira.projects.page.release:projectAdmin"),f=new e.Application;return f.on("start",function(b){function R(e){try{r.setItem(I,e)}catch(e){console.warn(e)}}function v(){f.trigger("navigate")}if(j()){var A=t.getCurrentProjectId(),I="jira-projects:release-page-status-"+A,w=o("head");w.append(o("<meta>").attr("name","projectKey").attr("content",t.getCurrentProjectKey())),w.append(o("<meta>").attr("name","projectId").attr("content",t.getCurrentProjectId()));var P=b.container,y=a.claim("com.atlassian.jira.projects.page.release:learnMoreUrl");f.pageableItems=new l(null,{data:b.data}),f.filter=new c({pageableCollection:f.pageableItems,status:"unreleased",contains:""}),f.filter.filterCollection(),f.filter.on("change:status",function(e,t){R(t)}),f.pageableItems.filter=f.filter,f.configDataModel=new u,f.submitController=new n({pageableItems:f.pageableItems,isProjectAdmin:d}),f.addRegions({mainRegion:new e.Region({el:P})}),f.mainRegion.on("show",function(){AJS.populateParameters(),f.trigger("mainRegionShown")}),f.mainRegion.show(new s({filter:f.filter,pageableItems:f.pageableItems,releaseLearnMoreUrl:y,submitController:f.submitController,isProjectAdmin:d,configDataModel:f.configDataModel})),f.mainRegion.currentView.on("progressDialogClicked",function(){f.trigger("progressDialogClicked")}),f.mainRegion.currentView.on("navigate",v),f.router=new JIRA.Projects.AbstractList.Router,f.router.on("route:any",function(){var e=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",!0)||"unreleased",t=JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("contains",!0)||"";+JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("page",!0)||1;f.filter.set("status",e,{silent:!0}),R(e),f.filter.set("contains",t,{silent:!0}),f.filter.filterCollection(),f.mainRegion.currentView.trigger("filterChanged")}),f.filter.on("navigate",v),f.router.on("route:any",v);try{var h=r.getItem(I);!JIRA.Projects.AbstractList.NavigationUtils.getQueryStringParam("status",!0)&&j()&&h&&(f.filter.set("status",h,{silent:!0}),JIRA.Projects.AbstractList.NavigationUtils.append("status",h))}catch(e){console.warn(e)}i.history&&i.History&&!i.History.started&&i.history.start({root:JIRA.Projects.AbstractList.NavigationUtils.getBackboneHistoryRoot(),pushState:JIRA.Projects.AbstractList.NavigationUtils.pushStateSupported}),m.bind(g.SERVER_ERROR,function(e,t){var r=o("#project-config-error-console");t&&t.errorMessages&&(r.empty(),new p({id:"server-error-dialog",content:function(e){e(JIRA.Templates.Common.serverErrorDialog({message:t.errorMessages[0]}))}}).show())})}}),f});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:release-page-assets', location = 'jira-projects-module/page/project/release/release-page-data.js' */
define("jira/projects/page/release/release-page-data",["jquery","jira/api/projects","jira/ajs/ajax/smart-ajax","wrm/data","wrm/context-path"],function(e,a,r,t,s){"use strict";var i=new e.Deferred;try{i.resolve(t.claim("com.atlassian.jira.projects.page.release:versions"))}catch(e){i.reject("The data could not be obtained. This may be a temporary glitch or the server may be down.")}return i.promise()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-board-location-picker', location = 'jira-agile-module/includes/js/boardlocation/location-type.js' */
define("jira-agile/boardlocation/location-type",[],function(){"use strict";var e={project:"project",user:"user"};return e});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-board-location-picker', location = 'jira-agile-module/includes/js/boardlocation/board-location-picker.js' */
define("jira-agile/boardlocation/board-location-picker",["jira-agile/rapid/ajax","jira-agile/boardlocation/location-type"],function(e,t){"use strict";var r=function(t){if(!t||!t.selector)throw new Error("Board location picker requires a selector");this.$select=AJS.$(t.selector),this.useSingleSelect=Boolean(t.useSingleSelect),this.filterSoftwareProjects=Boolean(t.filterSoftwareProjects),this.selectedItems=t.selectedItems||{},this.projectsOnly=t.projectsOnly||!1,this.change=t.change||function(){},t.currentProjectId&&(this.currentProjectId=t.currentProjectId,this.currentProject=null),this.restUrl=this.projectsOnly?"/project.json":"/boardLocation.json",this.restUrl=this.filterSoftwareProjects&&this.projectsOnly?this.restUrl+="?isSoftware=true":this.restUrl;var r=this.useSingleSelect?AJS.SingleSelect:AJS.MultiSelect;this.selectPicker=new r({element:this.$select,width:300,itemAttrDisplayed:"label",ajaxOptions:{query:!0,url:e.buildRestUrl(this.restUrl),formatResponse:this._processAjax.bind(this)}}),this.useSingleSelect&&this.selectedItems&&this.selectPicker.setSelection(this.selectedItems),"function"==typeof t.change&&(this.$select.bind("unselect",this.change),this.$select.bind("change",this.change)),"function"==typeof t.focusout&&this.selectPicker.$container.bind("focusout",t.focusout),this.currentProjectId&&this.selectPicker.requestSuggestions(!0).then(function(){this.currentProject&&this.selectPicker.addItem(this._getProjectDescriptor(this.currentProject))}.bind(this))};return r.prototype.show=function(){AJS.warn("BoardLocationPicker.show is deprecated. It is no longer needed as all initialisation occurs in the constructor")},r.prototype.hasValue=function(){return Boolean(this.$select.val())},r.prototype.hasErrors=function(){return this.selectPicker.$container.parent().find(".error").length>0},r.prototype.getValue=function(){return this.$select.val()},r.prototype.getElement=function(){return this.$select},r.prototype.setSelectedItems=function(e){return this.selectPicker.setSelection(e)},r.prototype._findProject=function(e,t){return(e||[]).filter(function(e){return t&&e.id===t}.bind(this))[0]},r.prototype._findUnmatchingProjects=function(e,t){return(e||[]).filter(function(e){return!t||e.id!==t}.bind(this))},r.prototype._processAjax=function(e){if(!(e&&(e.projects&&e.projects.length||e.user)))return[];this.currentProject=this._findProject(e.projects,this.currentProjectId);var t=this._findUnmatchingProjects(e.projects,this.currentProjectId).map(this._getProjectDescriptor.bind(this)),r=new AJS.GroupDescriptor({weight:1,label:"Projects"}),i=new AJS.GroupDescriptor({weight:2,label:"Personal"});if(this.currentProject){var o=[this._getProjectDescriptor(this.currentProject)].concat(t);o.forEach(function(e){r.addItem(e)})}else t.forEach(function(e){r.addItem(e)});if(Boolean(e.user)){var n=this._getUserDescriptor(e.user);return null!==n&&i.addItem(n),[r,i]}return[r]},r.prototype._getProjectDescriptor=function(e){if(!e)throw new Error("BoardLocationPicker.prototype._getProjectDescriptor requires a project");return new AJS.ItemDescriptor({value:"project_"+String(e.id),key:String(e.key),label:e.displayName,name:e.name,html:AJS.escapeHTML(String(e.displayName)),icon:e.avatar,locationType:t.project})},r.prototype._getUserDescriptor=function(e){return e?new AJS.ItemDescriptor({value:"user_"+String(e.id),key:null,label:e.displayName,name:e.name,html:AJS.escapeHTML(String(e.displayName)),icon:e.avatar,locationType:t.user}):null},r}),AJS.namespace("GH.BoardLocationPicker",null,require("jira-agile/boardlocation/board-location-picker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/rapid/ui/startwizard/WizardView.soy' */
// This file was automatically generated from WizardView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.startwizard.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.startwizard == 'undefined') { GH.tpl.startwizard = {}; }


GH.tpl.startwizard.renderMethodologySelectionStep = function(opt_data, opt_ignored) {
  return '<form class="aui ghx-halved-vertical"><div class="aui-group"><div class="aui-item"><h2>' + soy.$$escapeHtml('Scrum') + '</h2><p>' + soy.$$escapeHtml('Scrum focuses on planning, committing and delivering time-boxed chunks of work called Sprints') + '</p></div><div class="aui-item"><h2>' + soy.$$escapeHtml('Kanban') + '</h2><p>' + soy.$$escapeHtml('Kanban focuses on visualising your workflow and limiting work-in-progress to facilitate incremental improvements to your existing process') + '</p></div></div><div class="aui-group ghx-button-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum" class="aui-button">' + soy.$$escapeHtml('Create a Scrum board') + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban" class="aui-button">' + soy.$$escapeHtml('Create a Kanban board') + '</button></div></div>' + ((opt_data.canCreateProject) ? '<div class="aui-group"><div class="aui-item"><button id="ghx-wizard-methodology-scrum-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml('Create a Scrum board with sample data') + '</button></div><div class="aui-item"><button id="ghx-wizard-methodology-kanban-sample" class="aui-button aui-button-link">' + soy.$$escapeHtml('Create a Kanban board with sample data') + '</button></div></div>' : '') + '</form>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodologySelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodologySelectionStep';
}


GH.tpl.startwizard.renderMethodSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split" id="js-method-choice"><div class="aui-item"><form class="aui"><fieldset class="group ghx-space-saver">' + ((opt_data.canCreateProject) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-new-project" name="ghx-wizard-method" value="newProject" ' + ((opt_data.selectedOption == 'newProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-new-project">' + soy.$$escapeHtml('Board created with new Software project') + '</label><div class="description">' + soy.$$escapeHtml('A new board based on a new Software project') + '</div></div>' : '') + ((opt_data.hasProjectsAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-project" name="ghx-wizard-method" value="existingProject" ' + ((opt_data.selectedOption == 'existingProject') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-project">' + soy.$$escapeHtml('Board from an existing project') + '</label><div class="description">' + soy.$$escapeHtml('Boards can contain one or more projects.') + '</div></div>' : '') + ((opt_data.hasFiltersAccessible) ? '<div class="radio"><input class="radio" type="radio" id="ghx-wizard-method-existing-filter" name="ghx-wizard-method" value="existingFilter" ' + ((opt_data.selectedOption == 'existingFilter') ? 'checked="checked"' : '') + '><label for="ghx-wizard-method-existing-filter">' + soy.$$escapeHtml('Board from an existing Saved Filter') + '</label><div class="description">' + soy.$$escapeHtml('An advanced option using a JQL filter.') + '</div></div>' : '') + '</fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderMethodSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderMethodSelectionStep';
}


GH.tpl.startwizard.renderProjectSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div class="field-group"><label for="ghx-wizard-project-board-name">' + soy.$$escapeHtml('Board name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-project-board-name" maxlength="155"></div><div class="field-group"><label for="projects">' + soy.$$escapeHtml('Project') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-choose-project" multiple="multiple" class="hidden"></select><div class="description">' + soy.$$escapeHtml('Select one or more projects to include in this board') + '</div></div><div class="field-group" id="ghx-board-location-picker-for-multiple-project"><label for="ghx-field-board-location-change-for-multiple-project">' + soy.$$escapeHtml('Location') + '<span class="aui-icon icon-required"></span></label><div id="ghx-field-board-location-change-for-multiple-project" class="field-value ghx-spinner"></div></div></fieldset></form></div><div class="aui-item"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectSelectionStep';
}


GH.tpl.startwizard.renderFilterSelectionStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div class="field-group"><label for="ghx-wizard-filter-view-name">' + soy.$$escapeHtml('Board name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-filter-view-name" name="name" maxlength="155"></div><div class="field-group" id="ghx-filter-picker"><label for="ghx-wizard-filter-select">' + soy.$$escapeHtml('Saved filter') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-filter-select" class="hidden"></select><div id="ghx-filter-error"></div></div><div id="ghx-create-permissioninfo-container"></div><div class="field-group" id="ghx-board-location-picker-for-filter"><label for="ghx-field-board-location-change-for-filter">' + soy.$$escapeHtml('Location') + '<span class="aui-icon icon-required"></span></label><div id="ghx-field-board-location-change-for-filter" class="field-value ghx-spinner"></div></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml('Saved Filters') + '</h3><div class="description">' + soy.$$escapeHtml('Choose from a list of existing filters as a base for your new board. To create a new Saved Filter, save a search in the Issue Navigator.') + '</div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderFilterSelectionStep.soyTemplateName = 'GH.tpl.startwizard.renderFilterSelectionStep';
}


GH.tpl.startwizard.renderProjectCreationStep = function(opt_data, opt_ignored) {
  return '<div class="aui-group ghx-split"><div class="aui-item"><form class="aui ajs-dirty-warning-exempt"><fieldset><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname">' + soy.$$escapeHtml('Project name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectname" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectName) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey">' + soy.$$escapeHtml('Project key') + '<span class="aui-icon icon-required"></span></label><input class="text short-field" type="text" id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectkey" value="' + soy.$$escapeHtml(opt_data.sampleInfo.projectKey) + '"></div><div class="field-group"><label for="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead">' + soy.$$escapeHtml('Project lead') + '<span class="aui-icon icon-required"></span></label><select id="ghx-wizard-' + soy.$$escapeHtml(opt_data.prefix) + '-projectlead" class="' + ((opt_data.strictMode) ? 'js-default-user-picker-by-account-id' : 'js-default-user-picker') + ' hidden"><option' + ((opt_data.user.avatarUrl) ? ' style="background-image:url(\'' + soy.$$escapeHtml(opt_data.user.avatarUrl) + '\')"' : '') + 'selected="selected" value="' + ((opt_data.strictMode) ? soy.$$escapeHtml(opt_data.user.accountId) : soy.$$escapeHtml(opt_data.user.name)) + '">' + soy.$$escapeHtml(opt_data.user.displayName) + '</option></select><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches.') + '</div></div></fieldset></form></div><div class="aui-item ghx-alignwith-textgroup"><h3>' + soy.$$escapeHtml('Creating a project') + '</h3>' + ((opt_data.methodology == 'simple') ? '<div class="description">' + soy.$$escapeHtml('A board will be created with your project, and will be named after your project.') + '</div>' : '<div class="description">' + soy.$$escapeHtml('A board will be created with your project, and will be named after your project. You can rename your board in the board settings screen.') + '</div>') + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderProjectCreationStep.soyTemplateName = 'GH.tpl.startwizard.renderProjectCreationStep';
}


GH.tpl.startwizard.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml('Shares') + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + '</div><div class="field-group"><label>' + soy.$$escapeHtml('Owner') + '</label><span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.owner.displayName) + '</span></div>';
};
if (goog.DEBUG) {
  GH.tpl.startwizard.renderPermissionInfo.soyTemplateName = 'GH.tpl.startwizard.renderPermissionInfo';
}


GH.tpl.startwizard.createProjectTimeout = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('The operation has timed out, the project and board might have been created already. You can confirm this by checking the \x3ca href\x3d\x22{0}\x22\x3eManage Boards\x3c/a\x3e page.',opt_data.manageBoardURL));
};
if (goog.DEBUG) {
  GH.tpl.startwizard.createProjectTimeout.soyTemplateName = 'GH.tpl.startwizard.createProjectTimeout';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/rapid/configuration/RapidView.soy' */
// This file was automatically generated from RapidView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.view.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.view == 'undefined') { GH.tpl.rapid.view = {}; }


GH.tpl.rapid.view.renderConfigurationHeader = function(opt_data, opt_ignored) {
  return '<div id="ghx-modes-tools">' + aui.buttons.button({text: 'Back to board', type: 'subtle', href: GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidViewId + '&useStoredSettings=true', id: 'back-to-board', iconType: 'aui', iconText: 'Back to board', iconClass: 'aui-icon-small aui-iconfont-back-page'}) + '</div><h2>' + soy.$$escapeHtml('Settings for') + ' <span id="js-nav-view-name">' + soy.$$escapeHtml(opt_data.name) + '</span></h2>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationHeader.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationHeader';
}


GH.tpl.rapid.view.renderConfigurationTabs = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-config-header"></div><div class="aui-page-panel"><div class="aui-page-panel-inner"><div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="aui-navgroup-inner"><div class="aui-nav-heading"><strong>' + soy.$$escapeHtml('Settings') + '</strong></div><ul id="ghx-config-nav" class="aui-nav">';
  var configurationTabList21 = opt_data.configurationTabs;
  var configurationTabListLen21 = configurationTabList21.length;
  for (var configurationTabIndex21 = 0; configurationTabIndex21 < configurationTabListLen21; configurationTabIndex21++) {
    var configurationTabData21 = configurationTabList21[configurationTabIndex21];
    output += '<li data-tabitem="' + soy.$$escapeHtml(configurationTabData21.key) + '"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=' + soy.$$escapeHtml(configurationTabData21.key) + '">' + soy.$$escapeHtml(configurationTabData21.label) + '</a></li>';
  }
  output += '</ul></div></nav></div><section id="ghx-config-panel-content" class="aui-page-panel-content">';
  var configurationTabList35 = opt_data.configurationTabs;
  var configurationTabListLen35 = configurationTabList35.length;
  for (var configurationTabIndex35 = 0; configurationTabIndex35 < configurationTabListLen35; configurationTabIndex35++) {
    var configurationTabData35 = configurationTabList35[configurationTabIndex35];
    output += '<div class="ghx-page-panel-content-item" id="' + soy.$$escapeHtml(configurationTabData35.key) + '">' + soy.$$filterNoAutoescape(configurationTabData35.html) + '</div>';
  }
  output += '</section></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigurationTabs.soyTemplateName = 'GH.tpl.rapid.view.renderConfigurationTabs';
}


GH.tpl.rapid.view.renderViewNameEditForm = function(opt_data, opt_ignored) {
  return '<label for="ghx-field-viewname">' + soy.$$escapeHtml('Board name') + '</label>' + GH.tpl.rapid.view.renderViewNameField(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameEditForm';
}


GH.tpl.rapid.view.renderViewNameField = function(opt_data, opt_ignored) {
  return '<span class="field-value ' + ((opt_data.canEdit) ? 'js-edit-rapidViewName' : '') + '" data-fieldname="viewname" data-fieldvalue="' + soy.$$escapeHtml(opt_data.rapidViewName) + '"><span id="ghx-field-viewname" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>' + soy.$$escapeHtml(opt_data.rapidViewName) + '</span></span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewNameField.soyTemplateName = 'GH.tpl.rapid.view.renderViewNameField';
}


GH.tpl.rapid.view.renderViewBoardAdminsEditForm = function(opt_data, opt_ignored) {
  var output = '<label for="ghx-field-view-board-admins">' + soy.$$escapeHtml('Administrators') + '</label><span  class="field-value' + ((opt_data.canEdit) ? ' js-edit-rapidViewBoardAdmin' : '') + '" ><span id="ghx-field-view-board-admins-span" ' + ((opt_data.canEdit) ? 'class="ghx-editable"' : '') + '>';
  var itemList77 = opt_data.model;
  var itemListLen77 = itemList77.length;
  if (itemListLen77 > 0) {
    for (var itemIndex77 = 0; itemIndex77 < itemListLen77; itemIndex77++) {
      var itemData77 = itemList77[itemIndex77];
      output += ((itemData77.isUser) ? '<span class="user-hover" rel="' + soy.$$escapeHtml(itemData77.key) + '">' + soy.$$escapeHtml(itemData77.displayName) + '</span>' : '<span>' + soy.$$escapeHtml(itemData77.displayName) + '</span>') + ((! (itemIndex77 == itemListLen77 - 1)) ? '<span>, </span>' : '');
    }
  } else {
    output += '<span class="ghx-fa">' + soy.$$escapeHtml('None') + '</span>';
  }
  output += '</span></span><span id="ghx-field-view-board-admins">' + ((opt_data.canUsePicker) ? '<select id="ghx-board-admins" multiple="multiple" class="hidden"></select>' : '') + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewBoardAdminsEditForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewBoardAdminsEditForm';
}


GH.tpl.rapid.view.renderViewBoardLocationForm = function(opt_data, opt_ignored) {
  return '' + ((opt_data.rapidViewBoardLocation) ? '<label for="' + soy.$$escapeHtml(opt_data.ghxBoardLocationChangeId) + '-select">' + soy.$$escapeHtml('Location') + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><span id="' + soy.$$escapeHtml(opt_data.ghxBoardLocationChangeId) + '" class="field-value' + ((opt_data.canEdit) ? ' ghx-editable ghx-ss' : '') + '">' + ((opt_data.rapidViewBoardLocation.avatarURI) ? '<span class="aui-avatar aui-avatar-small aui-avatar-project jira-system-avatar"><span class="aui-avatar-inner"><img src=' + soy.$$escapeHtml(opt_data.rapidViewBoardLocation.avatarURI) + '></span></span>' : '') + '<span>' + soy.$$escapeHtml(opt_data.rapidViewBoardLocation.name) + '</span></span><select id="' + soy.$$escapeHtml(opt_data.ghxBoardLocationChangeId) + '-select" class="hidden"></select>' + ((opt_data.showHelp) ? '<div class="description">' + soy.$$escapeHtml('Select a Software project or your own profile as the place where this board will live') + '</div>' : '') : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderViewBoardLocationForm.soyTemplateName = 'GH.tpl.rapid.view.renderViewBoardLocationForm';
}


GH.tpl.rapid.view.renderBoardAdminsEditNoPicker = function(opt_data, opt_ignored) {
  var output = '<span class="ghx-margin-right"><strong>' + soy.$$escapeHtml('Groups') + '</strong>: <input class="text medium-field" id="ghx-board-admin-edit-groups" value="';
  var itemList138 = opt_data.model.groupKeys;
  var itemListLen138 = itemList138.length;
  for (var itemIndex138 = 0; itemIndex138 < itemListLen138; itemIndex138++) {
    var itemData138 = itemList138[itemIndex138];
    output += soy.$$escapeHtml(itemData138.key) + ((! (itemIndex138 == itemListLen138 - 1)) ? ',' : '');
  }
  output += '" /></span><strong>' + soy.$$escapeHtml('Users') + '</strong>: <input class="text medium-field " id="ghx-board-admin-edit-users" value="';
  var itemList147 = opt_data.model.userKeys;
  var itemListLen147 = itemList147.length;
  for (var itemIndex147 = 0; itemIndex147 < itemListLen147; itemIndex147++) {
    var itemData147 = itemList147[itemIndex147];
    output += soy.$$escapeHtml(itemData147.key) + ((! (itemIndex147 == itemListLen147 - 1)) ? ',' : '');
  }
  output += '" /><div class="description">' + soy.$$escapeHtml('Separate user keys and group names with commas.') + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderBoardAdminsEditNoPicker.soyTemplateName = 'GH.tpl.rapid.view.renderBoardAdminsEditNoPicker';
}


GH.tpl.rapid.view.renderConfigPermissionsWarning = function(opt_data, opt_ignored) {
  return '' + ((opt_data.model.canEdit != true) ? '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + ((opt_data.model.parentProject) ? '<strong>' + soy.$$escapeHtml('Contact your project admin or board admin to update the board settings') + '</strong>' : '<strong>' + soy.$$escapeHtml('Contact a Jira or Board Administrator to configure this board.') + '</strong>') + '</p></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderConfigPermissionsWarning.soyTemplateName = 'GH.tpl.rapid.view.renderConfigPermissionsWarning';
}


GH.tpl.rapid.view.renderFilterDetails = function(opt_data, opt_ignored) {
  var output = '<form class="aui" id="ghx-savedfilter-form"><div class="aui-message warning hidden" id="unmapped-issues-warning"><span class="aui-icon icon-warning"></span><p>' + soy.$$escapeHtml('Some issues in the Saved Filter will not be shown on the board.') + ' <a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/RapidView.jspa?rapidView=' + soy.$$escapeHtml(opt_data.rapidViewId) + '&amp;tab=columns" id="js-view-columns">' + soy.$$escapeHtml('View unmapped statuses which contain these issues.') + '</a></p></div><div class="field-group"><label>' + soy.$$escapeHtml('Saved Filter') + '</label><span id="ghx-filter-change" class="field-value' + ((opt_data.canEdit) ? ' ghx-editable ghx-ss' : '') + '">' + soy.$$escapeHtml(opt_data.savedFilter.name) + '</span><select id="ghx-filter-change-select" class="hidden"></select><p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/IssueNavigator.jspa?mode=show&requestId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + ((opt_data.canEdit) ? soy.$$escapeHtml('Edit Filter Query') : soy.$$escapeHtml('View Filter Query')) + '</a></p></div>' + GH.tpl.rapid.view.renderPermissionInfo(opt_data) + '<div class="field-group ghx-jql-preview"><label>' + soy.$$escapeHtml('Filter Query') + '</label><span class="field-value">' + ((opt_data.savedFilter.query) ? soy.$$escapeHtml(opt_data.savedFilter.query) : '') + '</span></div><div class="field-group"><label>' + soy.$$escapeHtml('Ranking') + '</label><span class="field-value">';
  if (opt_data.savedFilter.isOrderedByRank) {
    output += soy.$$escapeHtml('Using Rank');
  } else {
    if (! opt_data.savedFilter.orderByWarnings) {
      output += soy.$$escapeHtml('Ranking is disabled, as the Filter Query is not ordered by Rank');
    } else {
      var warningList217 = opt_data.savedFilter.orderByWarnings.errorMessages;
      var warningListLen217 = warningList217.length;
      for (var warningIndex217 = 0; warningIndex217 < warningListLen217; warningIndex217++) {
        var warningData217 = warningList217[warningIndex217];
        output += soy.$$escapeHtml(warningData217) + '<br>';
      }
    }
    output += (opt_data.savedFilter.canEdit && opt_data.savedFilter.canBeFixed) ? '<p><button class="aui-button js-update-filter-order-by">' + soy.$$escapeHtml('Add Rank') + '</button></p>' : '';
  }
  output += '</span></div>';
  if (opt_data.savedFilter.queryProjects) {
    output += '<div class="field-group"><label>' + soy.$$escapeHtml('Projects in board') + '</label><ul id="ghx-show-projects-in-board" class="field-value">';
    if (opt_data.savedFilter.queryProjects.displayMessage) {
      output += '<span class="field-value">' + soy.$$escapeHtml(opt_data.savedFilter.queryProjects.displayMessage) + '</span>';
    } else {
      var avatarSize__soy238 = 'small';
      var projectList239 = opt_data.savedFilter.queryProjects.projects;
      var projectListLen239 = projectList239.length;
      for (var projectIndex239 = 0; projectIndex239 < projectListLen239; projectIndex239++) {
        var projectData239 = projectList239[projectIndex239];
        output += '<li>' + aui.avatar.avatar({isProject: 'true', size: '' + soy.$$escapeHtml(avatarSize__soy238), avatarImageUrl: soy.$$escapeHtml("") + '/secure/projectavatar?size=' + soy.$$escapeHtml(avatarSize__soy238) + '&pid=' + soy.$$escapeHtml(projectData239.id), extraClasses: 'jira-system-avatar'}) + '<span>' + soy.$$escapeHtml(projectData239.name) + '</span><p>';
        var viewProjectPermissionText__soy257 = 'View permission';
        output += ((projectData239.isValidEditProjectConfigAction) ? '<a href="' + soy.$$escapeHtml("") + '/plugins/servlet/project-config/' + soy.$$escapeHtml(projectData239.key) + '/permissions">' + soy.$$escapeHtml(viewProjectPermissionText__soy257) + '</a>' : '<a class="disabled">' + soy.$$escapeHtml(viewProjectPermissionText__soy257) + '</a><span class="aui-icon aui-icon-small aui-iconfont-info" title="' + soy.$$escapeHtml('You are not allowed to view this Project Permission') + '"></span>') + '</p></li>';
      }
    }
    output += '</ul></div>';
  }
  output += (opt_data.isSubqueriesConfigurable) ? '<div class="field-group ghx-jql"><label for="ghx-sub-jql">' + soy.$$escapeHtml('Kanban board sub-filter') + '</label><div id="js-sub-container-work">' + GH.tpl.rapid.view.renderSubQueryView({section: 'board.kanban.work', queryValue: opt_data.subqueries[0], canEdit: opt_data.canEdit}) + '</div><div class="description">' + soy.$$escapeHtml('Further filtering of issues for unreleased work.') + '</div></div>' : '';
  if (opt_data.isOldDoneIssuesCutoffConfigurable) {
    output += '<div class="field-group ghx-show-old-limit"><label for="ghx-limit-days">' + soy.$$escapeHtml('Hide completed issues older than') + '</label><select id="ghx-limit-days" class="select" ' + ((opt_data.canEdit != true) ? 'disabled="disabled"' : '') + '>';
    var optionList297 = opt_data.oldDoneIssuesCutoffOptions;
    var optionListLen297 = optionList297.length;
    for (var optionIndex297 = 0; optionIndex297 < optionListLen297; optionIndex297++) {
      var optionData297 = optionList297[optionIndex297];
      output += '<option value="' + soy.$$escapeHtml(optionData297.value) + '" ' + ((opt_data.oldDoneIssuesCutoff == optionData297.value) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml(optionData297.label) + '</option>';
    }
    output += '</select><div class="description">' + soy.$$escapeHtml('Speed up your board by hiding issues you\x27re no longer working on.') + '</div></div>';
  }
  output += ((opt_data.isJqsInJswFFEnabled) ? '<div class="field-group"><label for="ghx-jqs-toggle">' + soy.$$escapeHtml('JQL Subscription') + '</label><aui-toggle id="ghx-jqs-toggle" label="' + soy.$$escapeHtml('JQL Subscription') + '"' + ((! opt_data.canEdit) ? ' disabled="disabled"' : '') + ((opt_data.jqsInJsw) ? ' checked="checked"' : '') + '></aui-toggle><div class="description">' + soy.$$escapeHtml('Enables JQL Subscription') + '</div></div>' : '') + '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderFilterDetails.soyTemplateName = 'GH.tpl.rapid.view.renderFilterDetails';
}


GH.tpl.rapid.view.renderSubQueryView = function(opt_data, opt_ignored) {
  return '<span id="ghx-sub-work" class="field-value' + ((opt_data.canEdit) ? ' js-editable ghx-editable ghx-jql' : '') + '">' + ((opt_data.queryValue) ? soy.$$escapeHtml(opt_data.queryValue) : (opt_data.canEdit) ? '<em>' + soy.$$escapeHtml('Add Sub-Filter') + '</em>' : soy.$$escapeHtml('No sub-filter')) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryView.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryView';
}


GH.tpl.rapid.view.renderSubQueryControls = function(opt_data, opt_ignored) {
  return '<textarea class="js-jql-autocomplete-field textarea" id="ghx-sub-jql" data-section="' + soy.$$escapeHtml(opt_data.section) + '" cols="20" rows="2">' + soy.$$escapeHtml(opt_data.queryValue) + '</textarea><span id="ghx-sub-jql-errormsg" class="icon jqlgood js-jql-autocomplete-error"><span></span></span><button class="aui-button js-subquery-submit">' + soy.$$escapeHtml('Update') + '</button><button class="aui-button js-subquery-cancel">' + soy.$$escapeHtml('Cancel') + '</button>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderSubQueryControls.soyTemplateName = 'GH.tpl.rapid.view.renderSubQueryControls';
}


GH.tpl.rapid.view.renderPermissionInfo = function(opt_data, opt_ignored) {
  return '<div class="field-group"><label for="ghx-create-permissioninfo">' + soy.$$escapeHtml('Shares') + '</label>' + GH.tpl.rapid.view.renderPermissionEntries({permissionEntries: opt_data.savedFilter.permissionEntries}) + ((opt_data.savedFilter.canEdit) ? '<p class="ghx-additional"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/EditFilter!default.jspa?filterId=' + soy.$$escapeHtml(opt_data.savedFilter.id) + '">' + soy.$$escapeHtml('Edit Filter Shares') + '</a></p>' : '</div><div class="field-group"><label>' + soy.$$escapeHtml('Owner') + '</label><span class="field-value">' + soy.$$filterNoAutoescape(opt_data.savedFilter.owner.renderedLink) + '</span>') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionInfo.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionInfo';
}


GH.tpl.rapid.view.renderPermissionEntries = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.permissionEntries.length > 0) {
    output += '<span class="field-value"><ul id="ghx-create-permissioninfo">';
    var permissionEntryList383 = opt_data.permissionEntries;
    var permissionEntryListLen383 = permissionEntryList383.length;
    for (var permissionEntryIndex383 = 0; permissionEntryIndex383 < permissionEntryListLen383; permissionEntryIndex383++) {
      var permissionEntryData383 = permissionEntryList383[permissionEntryIndex383];
      output += '<li>';
      var permissionValueList385 = permissionEntryData383.values;
      var permissionValueListLen385 = permissionValueList385.length;
      for (var permissionValueIndex385 = 0; permissionValueIndex385 < permissionValueListLen385; permissionValueIndex385++) {
        var permissionValueData385 = permissionValueList385[permissionValueIndex385];
        output += ((permissionValueData385.type == 'Shared with the public') ? '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-unlocked" title="' + soy.$$escapeHtml('Sharing unrestricted') + '">' + soy.$$escapeHtml('Sharing unrestricted') + '</span>' : '<span class="ghx-iconfont ghx-iconfont-inactive aui-icon aui-icon-small aui-iconfont-locked" title="' + soy.$$escapeHtml('Sharing restricted') + '">' + soy.$$escapeHtml('Sharing restricted') + '</span>') + ((permissionValueData385.name) ? '<strong>' + soy.$$escapeHtml(permissionValueData385.type) + ':</strong><span>' + soy.$$escapeHtml(permissionValueData385.name) + '</span>' : '<strong>' + soy.$$escapeHtml(permissionValueData385.type) + '</strong>');
      }
      output += '</li>';
    }
    output += '</ul></span>';
  } else {
    output += '<span class="field-value">' + soy.$$escapeHtml('No shares') + '</span>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.renderPermissionEntries.soyTemplateName = 'GH.tpl.rapid.view.renderPermissionEntries';
}


GH.tpl.rapid.view.deleteForm = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.deleteForm.soyTemplateName = 'GH.tpl.rapid.view.deleteForm';
}


GH.tpl.rapid.view.confirmForm = function(opt_data, opt_ignored) {
  return '<h2 class="dialog-title">' + soy.$$escapeHtml('Confirmation') + '</h2><form class="aui" action="#" method="post"><div class="form-body"><p>' + soy.$$filterNoAutoescape(opt_data.message) + '</p></div><div class="form-footer buttons-container"><div class="buttons"><input id="submit" class="button" type="submit" value="' + soy.$$escapeHtml('Confirm') + '" /><a role="button" href="#" class="cancel">' + soy.$$escapeHtml('Cancel') + '</a></div></div></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.view.confirmForm.soyTemplateName = 'GH.tpl.rapid.view.confirmForm';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/rapid/configuration/BoardLocationConfig.js' */
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}}();define("includes/js/rapid/configuration/BoardLocationConfig",["jquery","jira-agile/boardlocation/board-location-picker"],function(e,t){var a=function(){function a(e){_classCallCheck(this,a),this.$container=e,this.boardLocationPicker=void 0}return _createClass(a,[{key:"init",value:function(t){Object.assign(this,{},e.extend(!0,{boardLocationModel:{projectId:"",userLocationId:"",name:"None",avatarURI:""},selectedCallback:function(){},canEdit:!1,stayActivated:!1,isRequired:!1,showHelp:!1,boardLocationChangeId:""},t)),this.render()}},{key:"initClickHandler",value:function(){var a=this,o=this.$container.find(".field-value.ghx-editable");o.one("click",function(o){e(o.currentTarget).hide(),a.boardLocationPicker=new t({selector:"#"+a.boardLocationChangeId+"-select",change:a.changeHandler.bind(a),useSingleSelect:!0,selectedItems:a.getSelection(a.boardLocationModel,!0),filterSoftwareProjects:!0})}),this.stayActivated&&o.click()}},{key:"changeHandler",value:function(e,t){var a=this;if(t&&t.properties){var o="project"===t.properties.locationType?t.properties.value.replace("project_",""):null,i=("project"===t.properties.locationType?t.properties.key:null,"user"===t.properties.locationType?t.properties.value.replace("user_",""):null),n=t.properties.label,r=t.properties.icon;this.validateSelection(t.properties).then(function(){a.boardLocationModel={projectId:o,userLocationId:i,name:n,avatarURI:r},a.selectedCallback(a.boardLocationModel)});var c="locationless";o?c="project":i&&(c="user"),AJS.trigger("analyticsEvent",{name:"gh.boardlocationconfig.location.changed",data:{locationType:c,automaticSetLocation:Boolean(t.properties.automaticSetLocation)}})}}},{key:"getSelection",value:function(e,t){return e.userLocationId&&"number"==typeof e.userLocationId?new AJS.ItemDescriptor({value:e.userLocationId.toString(),label:e.displayName||e.name,icon:e.avatar,html:AJS.escapeHTML(String(e.displayName||e.name)),locationType:e.locationType,savedFilter:e,automaticSetLocation:Boolean(t)}):new AJS.ItemDescriptor({value:e.projectId.toString(),label:e.name,icon:e.avatarURI,html:AJS.escapeHTML(String(e.name)),locationType:e.locationType,savedFilter:e,automaticSetLocation:Boolean(t)})}},{key:"setLocation",value:function(e){this.boardLocationPicker.setSelectedItems(this.getSelection(e,!0))}},{key:"render",value:function(){this.$container.html(GH.tpl.rapid.view.renderViewBoardLocationForm({rapidViewBoardLocation:this.boardLocationModel,canEdit:this.canEdit,showHelp:this.showHelp,isRequired:this.isRequired,ghxBoardLocationChangeId:this.boardLocationChangeId})),this.initClickHandler()}},{key:"validateSelection",value:function(e){var t=this.validationCallback||Promise.resolve.bind(Promise);return t(e)}}]),a}();return a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/rapid/ui/startwizard/WizardView.js' */
!function(){GH.StartWizardView={},GH.StartWizardView.dialog=void 0,GH.StartWizardView.model=void 0,GH.StartWizardView.stepsNameStack=void 0,GH.StartWizardView.pages={},GH.StartWizardView.filterPicker=void 0,GH.StartWizardView.boardLocationPicker=void 0,GH.StartWizardView.locationModel=void 0,GH.StartWizardView.windowResizeListener=function(){GH.StartWizardView.dialog&&GH.StartWizardView.dialog.updateHeight()};var e=require("jira-agile/rapid/ajax"),t=require("jira/analytics/web-client"),r=require("jira-agile/rapid/analytics-tracker"),a=require("includes/js/rapid/configuration/BoardLocationConfig"),i=require("jira-agile/boardlocation/location-type"),o=require("jira-agile/boardlocation/board-location-picker"),n=require("internal/browser-metrics");GH.StartWizardView.analytics=new r("gh.create.wizard");var d=AJS.$.Deferred(),c=AJS.$.Deferred(),l=1e4;GH.StartWizardView.steps={methodologySelection:{render:function(e){var t={canCreateProject:GH.UserData.canCreateProject()};return{header:"Create a board",content:GH.tpl.startwizard.renderMethodologySelectionStep(t)}},bind:function(e,t){AJS.$("#ghx-wizard-methodology-scrum").click(function(e){e.preventDefault(),t.sampleData=!1,GH.StartWizardView.selectMethodology("scrum",t)}),AJS.$("#ghx-wizard-methodology-kanban").click(function(e){e.preventDefault(),t.sampleData=!1,GH.StartWizardView.selectMethodology("kanban",t)}),AJS.$("#ghx-wizard-methodology-scrum-sample").click(function(e){e.preventDefault(),t.sampleData=!0,GH.StartWizardView.selectMethodology("scrum",t)}),AJS.$("#ghx-wizard-methodology-kanban-sample").click(function(e){e.preventDefault(),t.sampleData=!0,GH.StartWizardView.selectMethodology("kanban",t)})},analyticsScreenName:"chooseBoardTypeModal"},methodSelection:{render:function(e){var t=e.method;return t||(t=GH.UserData.userConfig.canCreateProject?"newProject":"existingProject"),{header:"Create a board",content:GH.tpl.startwizard.renderMethodSelectionStep(_.extend({},e,{canCreateProject:GH.UserData.userConfig.canCreateProject,hasProjectsAccessible:GH.UserData.userConfig.hasProjectsAccessible,hasFiltersAccessible:GH.UserData.userConfig.hasFiltersAccessible,selectedOption:t}))}},bind:function(e){GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject()},next:function(e,t){var r=e.find("input[name=ghx-wizard-method]").filter(":checked").val();t.method=r;var a=AJS.$.Deferred();return"newProject"===r?a.resolve("projectCreation"):"existingProject"===r?a.resolve("projectSelection"):"existingFilter"===r?a.resolve("filterSelection"):a.reject(new Error("Unknown board creation method : "+r)),a.promise()},analyticsScreenName:"chooseBoardSourceModal"},projectCreation:{render:function(e){return e.prefix="project",GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"project",sampleInfo:{projectName:"",projectKey:""},methodology:e.methodology})},bind:function(e,t){GH.StartWizardView.bindProjectCreation(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.createProject(GH.StartWizardView.dialog,e)},analyticsScreenName:"createBoardModal"},sampleProjectCreation:{render:function(e){return e.prefix="sample",GH.StartWizardView.renderProjectCreation({user:GH.UserData.userConfig,prefix:"sample",sampleInfo:e.sampleInfo})},bind:function(e,t){GH.StartWizardView.bindProjectCreation(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.createSampleProject(GH.StartWizardView.dialog,e)},analyticsScreenName:"createSampleProjectModal"},projectSelection:{render:function(e){return{header:"Name this board",content:GH.tpl.startwizard.renderProjectSelectionStep()}},bind:function(e,t){GH.StartWizardView.bindProjectSelection(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.validateProjectSelection(e)},analyticsScreenName:"createBoardModal"},filterSelection:{render:function(e){return{header:"Name this board",content:GH.tpl.startwizard.renderFilterSelectionStep()}},bind:function(e,t){GH.StartWizardView.bindFilterSelection(e,t)},completeActionName:"Create board",complete:function(e){return GH.StartWizardView.validateFilterSelection(e)},analyticsScreenName:"createBoardModal"}},GH.StartWizardView.show=function(t){if(!GH.StartWizardView.dialog){var r=900;GH.StartWizardView.dialog=GH.Dialog.create({width:r,height:400,id:"ghx-wizard-dialog",onCancelFn:function(){GH.StartWizardView.disposeWizard(),GH.StartWizardView.analytics.trigger("cancel")}}),window.addEventListener("resize",GH.StartWizardView.windowResizeListener),GH.StartWizardView.model={},GH.StartWizardView.stepsNameStack=[],GH.StartWizardView.dialog.show(),GH.StartWizardView.analytics.trigger("start"),GH.StartWizardView.preventSubmitOnEnter(),JIRA.API&&JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectId()?(e.get({url:"/project/"+JIRA.API.Projects.getCurrentProjectId(),deferErrorHandling:!0,timeout:l}).then(d.resolve).fail(d.reject),c.reject()):GH.UserData.userConfig.selectUserContainerByDefault?(e.get({url:"/boardLocation/currentUser",deferErrorHandling:!0,timeout:l}).then(c.resolve).fail(c.reject),d.reject()):(d.reject(),c.reject())}},GH.StartWizardView.preventSubmitOnEnter=function(){var e=function(e){if(13===e.keyCode&&"ghx-wizard-filter-select-field"!==e.target.id)return e.preventDefault(),!1};AJS.$("input").keydown(e)},GH.StartWizardView.showStep=function(e){if(!_.has(GH.StartWizardView.steps,e))throw new Error("Unknown wizard step "+e);var t=GH.StartWizardView.dialog;if(GH.StartWizardView.pages[e])t.gotoPage(GH.StartWizardView.pages[e]),"methodSelection"===e&&GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject(),GH.StartWizardView.dialog.popup.element.find(".dialog-panel-body .aui-message-error").remove();else{var r=GH.StartWizardView.steps[e],a=r.render(GH.StartWizardView.model);t.addPage(),GH.StartWizardView.pages[e]=t.curpage,t.addHeader(a.header);var i=AJS.$(a.content);if("methodSelection"===e&&GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject(),t.addPanel(null,i,"ghx-wizard-panel"),GH.StartWizardView.stepsNameStack.length>0&&t.addButton("Back",function(){var e=GH.StartWizardView.stepsNameStack.pop();GH.StartWizardView.showStep(e)},"aui-button"),_.has(r,"complete")){var o=function(){var e=AJS.$(this),t=e.attr("aria-disabled");"true"!==t&&r.complete(GH.StartWizardView.model)};t.addButton(r.completeActionName,o,"aui-button aui-button-primary js-wizard-button-complete")}else if(_.has(r,"next")){var d=function(){var a=AJS.$(this),o=a.attr("aria-disabled");if("true"!==o){var n=r.next(i,GH.StartWizardView.model),d=function(t){GH.StartWizardView.stepsNameStack.push(e),GH.StartWizardView.showStep(t)},c=function(e){console.log(e),t.updateHeight()};n.done(function(e){d(e)}).fail(c)}};t.addButton("Next",d,"aui-button aui-button-primary js-wizard-button-next")}t.addCancel("Cancel",function(){t.cancel()}),r.bind(i,GH.StartWizardView.model)}t.updateHeight(),GH.StartWizardView.preventSubmitOnEnter(),GH.StartWizardView.triggerAnalytics(e),n.end({key:"jira.agile.work.create-board"})},GH.StartWizardView.triggerAnalytics=function(e){var r=GH.StartWizardView.steps[e].analyticsScreenName;t.sendPageEvent(r)},GH.StartWizardView.hideOrShowCreateOptionsBesidesFromNewProject=function(){var e=AJS.$("#ghx-wizard-dialog div.radio #ghx-wizard-method-existing-project").parent(),t=AJS.$("#ghx-wizard-dialog div.radio #ghx-wizard-method-existing-filter").parent();/(simple|agility)/.test(GH.StartWizardView.model.methodology)?(e.hide(),t.hide()):(e.show(),t.show())},GH.StartWizardView.startWizardWithoutProjectCreate=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];GH.UserData.userConfig={canCreateProject:!1,hasProjectsAccessible:!0,hasFiltersAccessible:!0,selectUserContainerByDefault:e},GH.StartWizardView.startWizard()},GH.StartWizardView.startWizardWithUserConfigCheck=function(){GH.UserData.userConfig?GH.StartWizardView.startWizard():e.get({url:"userData/userConfig"}).done(function(e){GH.UserData.setUserConfig(e),GH.StartWizardView.startWizard()}).fail(GH.StartWizardView.startWizardWithoutProjectCreate)},GH.StartWizardView.startWizard=function(){n.start({key:"jira.agile.work.create-board",isInitial:!1}),GH.StartWizardView.show(),GH.StartWizardView.showStep("methodologySelection")},GH.StartWizardView.disposeWizard=function(){GH.StartWizardView.dialog=void 0,GH.StartWizardView.pages={},window.removeEventListener("resize",GH.StartWizardView.windowResizeListener)},GH.StartWizardView.genStartFunction=function(e,t){return function(){GH.StartWizardView.show(),GH.StartWizardView.model.sampleData=t,GH.StartWizardView.selectMethodology(e,GH.StartWizardView.model)}},GH.StartWizardView.bindWelcomePage=function(){GH.Dialog.registerDialog(".js-wizard-scrum",GH.StartWizardView.genStartFunction("scrum",!1)),GH.Dialog.registerDialog(".js-wizard-scrum-sample",GH.StartWizardView.genStartFunction("scrum",!0)),GH.Dialog.registerDialog(".js-wizard-kanban",GH.StartWizardView.genStartFunction("kanban",!1)),GH.Dialog.registerDialog(".js-wizard-kanban-sample",GH.StartWizardView.genStartFunction("kanban",!0))},GH.StartWizardView.getCreateProjectRequest=function(e){var t=e.project,r={projectName:t.name,projectKey:t.key,boardName:e.boardName,preset:e.methodology,sampleData:e.sampleData};return r.projectLeadAccountId=t.lead,r},GH.StartWizardView.createProject=function(t,r){GH.StartWizardView.populateProjectCreationProperties(r);var a=GH.StartWizardView.getCreateProjectRequest(r);t.disableControls(),t.showSpinner();var i={url:"/welcome/createProject",data:a,errorContextMap:{projectName:"#ghx-wizard-"+r.prefix+"-projectname",projectKey:"#ghx-wizard-"+r.prefix+"-projectkey",projectLead:"#ghx-wizard-"+r.prefix+"-projectlead"},timeout:12e4,deferErrorHandling:!0};return e.put(i).done(function(e){function t(){i()}var a="com.pyxis.greenhopper.jira:gh-"+e.success.preset.toLowerCase()+"-template";GH.StartWizardView.fireBoardCreatedTrackEvent({boardId:e.success.rapidView.id,boardType:e.success.preset,locationId:e.success.project.id,projectType:"software",projectTemplateKey:a,projectId:e.success.project.id}),GH.StartWizardView.fireProjectCreatedTrackEvent({projectId:e.success.project.id,projectType:"software",projectTemplateKey:a,sampleData:r.sampleData}),e.success.sample=r.sampleData,/(simple|agility)/.test(r.methodology)||GH.PersistentMessages.WelcomeMessage.show(e.success);var i=function(){GH.StartWizardView.gotoCreatedView(e.success.rapidView.id,r.methodology)};t()}).fail(function(r,a,o,n){_.each(r.getGlobalErrors(),function(e){"timeout"===e.message&&(e.message=GH.tpl.startwizard.createProjectTimeout({manageBoardURL:GH.RapidBoard.getManageViewsPageUrl()}),e.noAutoescape=!0)}),e.handleContextualErrors(r,i.errorContextMap),e.handleGlobalErrors(r,i.errorContextMap),t.hideSpinner(),t.enableControls(),t.updateHeight()})},GH.StartWizardView.validateProjectSelection=function(t){GH.StartWizardView.dialog.disableControls(),GH.StartWizardView.dialog.showSpinner();var r=AJS.$("#ghx-wizard-project-board-name");GH.Validation.clearContextualErrors(GH.StartWizardView.boardLocationPicker.getElement()),GH.Validation.clearContextualErrors(r);var a=GH.StartWizardView.locationModel?GH.StartWizardView.locationModel.projectId:null;return e.post({url:"/rapidview/create/presets",data:{name:r.val(),projectIds:GH.StartWizardView.boardLocationPicker.getValue().map(function(e){return e.replace("project_","")}),preset:t.methodology,locationId:a,locationType:GH.StartWizardView.getBoardLocationType()},errorContextMap:{name:"#ghx-wizard-project-board-name",projectIds:GH.StartWizardView.boardLocationPicker.selector}}).done(function(e){GH.StartWizardView.handleCreate(e,"simple",t.methodology),GH.StartWizardView.fireBoardCreatedTrackEvent({boardId:e.success.id,boardType:t.methodology,locationId:a})}).fail(function(){GH.StartWizardView.dialog.enableControls(),GH.StartWizardView.dialog.hideSpinner(),GH.StartWizardView.dialog.updateHeight()})},GH.StartWizardView.getBoardLocationId=function(){if(GH.StartWizardView.locationModel){if(GH.StartWizardView.locationModel.projectId)return GH.StartWizardView.locationModel.projectId;if(GH.StartWizardView.locationModel.userLocationId)return GH.StartWizardView.locationModel.userLocationId}return null},GH.StartWizardView.getBoardLocationType=function(){if(GH.StartWizardView.locationModel){if(GH.StartWizardView.locationModel.projectId)return i.project;if(GH.StartWizardView.locationModel.userLocationId)return i.user}return null},GH.StartWizardView.validateFilterSelection=function(t){var r=AJS.$("#ghx-wizard-filter-view-name"),a=GH.StartWizardView.filterPicker.getElement(),i=AJS.$(GH.StartWizardView.filterPicker.selector);GH.Validation.clearContextualErrors(r),GH.Validation.clearContextualErrors(a);var o="user"===GH.StartWizardView.getBoardLocationType()?null:GH.StartWizardView.getBoardLocationId();return GH.StartWizardView.dialog.disableControls(),GH.StartWizardView.dialog.showSpinner(),e.post({url:"/rapidview/create/advanced",data:{name:r.val(),filterId:i.val()?i.val()[0]:null,methodology:t.methodology,locationId:o,locationType:GH.StartWizardView.getBoardLocationType()},errorContextMap:{name:"#ghx-wizard-filter-view-name",filterId:GH.StartWizardView.filterPicker.selector}}).done(function(e){GH.StartWizardView.handleCreate(e,"simple",t.methodology),GH.StartWizardView.fireBoardCreatedTrackEvent({boardId:e.success.id,boardType:t.methodology,locationId:o})}).fail(function(){GH.StartWizardView.dialog.hideSpinner(),GH.StartWizardView.dialog.enableControls(),GH.StartWizardView.dialog.updateHeight()})},GH.StartWizardView.handleCreate=function(e,t,r){var a=!/(simple|agility)/.test(t)&&r;"simple"!==t&&GH.PersistentMessages.CreateViewMessage.setView(e.success.id,e.success.name,t,a),GH.StartWizardView.analytics.trigger("complete"),GH.StartWizardView.gotoCreatedView(e.success.id,r)},GH.StartWizardView.gotoCreatedView=function(e,t){var r="scrum"===t?"planning":null;GH.Navigation.gotoDefaultRapidBoardPage(e,r)},GH.StartWizardView.selectMethodology=function(t,r){r.methodology=t;var a=/(simple|agility)/.test(t);if(GH.StartWizardView.stepsNameStack.push("methodologySelection"),r.sampleData)e.get({url:"/welcome/sampledataproject?preset="+r.methodology},"sampledataproject").done(function(e){r.sampleInfo=e,GH.StartWizardView.showStep("sampleProjectCreation")}).fail(function(){GH.StartWizardView.showStep("sampleProjectCreation")});else{var i=GH.UserData.userConfig.canCreateProject,o=GH.UserData.userConfig.hasProjectsAccessible,n=GH.UserData.userConfig.hasFiltersAccessible&&!a;i||n?o||n?GH.StartWizardView.showStep("methodSelection"):GH.StartWizardView.showStep("projectCreation"):GH.StartWizardView.showStep("projectSelection")}},GH.StartWizardView.populateProjectCreationProperties=function(e){var t=AJS.$("#ghx-wizard-"+e.prefix+"-projectname"),r=AJS.$("#ghx-wizard-"+e.prefix+"-projectkey"),a=AJS.$("#ghx-wizard-"+e.prefix+"-projectlead");GH.Validation.clearContextualErrors(t),GH.Validation.clearContextualErrors(r),GH.Validation.clearContextualErrors(a),e.project={name:t.val(),key:r.val().toUpperCase(),lead:AJS.$("#ghx-wizard-"+e.prefix+"-projectlead option:selected").val()}},GH.StartWizardView.createSampleProject=function(e,t){t.sampleData=!0,GH.StartWizardView.createProject(e,t)},GH.StartWizardView.validateBoardName=function(e,t){return GH.Validation.clearContextualErrors(e),t.boardName=e.val(),!!t.boardName||(GH.Validation.showContextualErrors(e,"Please enter a name for your board."),!1)},GH.StartWizardView.renderProjectCreation=function(e){return e.strictMode=!0,{header:"New project with board",content:GH.tpl.startwizard.renderProjectCreationStep(e)}},GH.StartWizardView.bindProjectSelection=function(t,r){var a=function(e){var t=Boolean(AJS.$("#ghx-board-location-picker-for-multiple-project .loading").length),r="false"===AJS.$("#ghx-board-location-change-for-multiple-project-select-suggestions").parent().attr("aria-hidden"),a="software"===e.projectTypeKey,i=GH.StartWizardView.boardLocationConfig.boardLocationModel.userLocationId;return!(t||r||!a||i)},i=function(t){e.get({url:"/project/"+t,deferErrorHandling:!0,timeout:l}).then(function(e){a(e)&&GH.StartWizardView.boardLocationConfig.setLocation({projectId:"project_"+e.id,userLocationId:"",name:e.name,avatarURI:e.projectIconUrl,locationType:"project"})}).fail(function(){AJS.trigger("analyticsEvent",{name:"gh.boardlocationconfig.location.auto.set.failed"})})};GH.StartWizardView.boardLocationPicker=new o({selector:"#ghx-wizard-choose-project",projectsOnly:!0,change:function(e){GH.StartWizardView.dialog.updateHeight();var t=GH.StartWizardView.boardLocationPicker.getValue()?GH.StartWizardView.boardLocationPicker.getValue():[];if(1===t.length){var r=e.currentTarget[0],a=r.value.replace("project_","");i(a)}},currentProjectId:JIRA.API&&JIRA.API.Projects?JIRA.API.Projects.getCurrentProjectId():null}),GH.StartWizardView.boardLocationPicker.selectPicker.keys.Return=function(e){e.preventDefault()};var n=["#ghx-wizard-project-board-name","#ghx-wizard-choose-project"],d="#ghx-board-location-picker-for-multiple-project",c="ghx-board-location-change-for-multiple-project";GH.StartWizardView.buildBoardLocationPicker(d,c,n),GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:n})},GH.StartWizardView.buildBoardLocationPicker=function(e,t,r){var i=new a(AJS.$(e)),o={canEdit:!0,stayActivated:!0,isRequired:!0,showHelp:!0,boardLocationModel:{name:""},selectedCallback:function(e){GH.StartWizardView.locationModel=e},boardLocationChangeId:t};d.then(function(e){var t={name:""};e&&(e.projectId=e.projectId||e.id,e.avatarURI=e.avatarURI||e.projectIconUrl,"software"===e.projectTypeKey&&(t=e)),i.init(Object.assign(o,{boardLocationModel:t}))}).fail(function(){c.then(function(e){e&&(e.userLocationId=e.id),i.init(Object.assign(o,{boardLocationModel:e||null}))}).fail(function(){i.init(o)})}).always(function(){GH.StartWizardView.locationModel=i.boardLocationModel,GH.StartWizardView.dialog.updateHeight()}),r.push("#"+t+"-select"),GH.StartWizardView.boardLocationConfig=i},function(){"use strict";var e=require("jira/util/events/types");GH.StartWizardView.bindProjectCreation=function(t,r){AJS.$("#ghx-wizard-"+r.prefix+"-projectkey").generateFrom(AJS.$("#ghx-wizard-"+r.prefix+"-projectname"),{maxNameLength:64,maxKeyLength:64}),JIRA.trigger(e.NEW_CONTENT_ADDED,[t]),t.trigger("contentRefresh");var a=GH.StartWizardView.dialog,i=a.page[a.curpage];i.button[1].item;GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:["#ghx-wizard-"+r.prefix+"-projectname","#ghx-wizard-"+r.prefix+"-projectkey","#ghx-wizard-"+r.prefix+"-projectlead"]})}}(),GH.StartWizardView.bindFilterSelection=function(e,t){var r=function(e,r){var a="";if(delete t.savedFilter,r&&r.properties){var i=r.properties.savedFilter;a=null!==i?GH.tpl.startwizard.renderPermissionInfo({savedFilter:i}):"",t.savedFilter=i}AJS.$("#ghx-create-permissioninfo-container").html(a),GH.StartWizardView.dialog.updateHeight()};GH.StartWizardView.filterPicker=new GH.SavedFilterPicker({selector:"#ghx-wizard-filter-select",selected:r,stayActivated:!0}),GH.StartWizardView.filterPicker.show(t.savedFilter),GH.StartWizardView.filterPicker.singleSelect.keys.Return=function(e){e.preventDefault()};var a=["#ghx-wizard-filter-view-name","#ghx-wizard-filter-select"],i="#ghx-board-location-picker-for-filter",o="ghx-board-location-change-for-filter";GH.StartWizardView.buildBoardLocationPicker(i,o,a),GH.StartWizardView.attachDependantButton({buttonIndex:1,selectors:a})},GH.StartWizardView.attachDependantButton=function(e){var t=GH.StartWizardView.dialog,r=t.page[t.curpage],a=r.button[e.buttonIndex].item;GH.StartWizardView.dependantValidationListener({selectors:e.selectors,full:function(){a.attr("aria-disabled","false")},empty:function(){a.attr("aria-disabled","true")}})},GH.StartWizardView.dependantValidationListener=function(e){function t(){var t=_.filter(e.selectors,function(e){var t=AJS.$(e);return!AJS.$.trim(t.val())});return _.isEmpty(t)?e.full():e.empty()}function r(){e.nowait?t():setTimeout(t,50)}_.isEmpty(e.selectors)||(e.full=e.full||AJS.$.noop(),e.empty=e.empty||AJS.$.noop(),e.nowait=e.nowait||!1,_.each(e.selectors,function(e){var t=AJS.$("#ghx-wizard-dialog");t.on("input",e,r),t.on("change",e,r),t.on("selected",e,r),t.on("unselect",e,r)}),t())},GH.StartWizardView.fireBoardCreatedTrackEvent=function(e){var r=GH.StartWizardView.getBoardLocationType(),a=e.boardType[0].toUpperCase()+e.boardType.substr(1).toLowerCase(),i={containerType:r?r:"project",objectType:"board",objectId:e.boardId,attributes:{boardId:e.boardId,boardType:a,location:r?r:"project"},action:"created",actionSubject:"board",actionSubjectId:e.boardId,source:"createBoardModal"};e.locationId&&(i.containerId=e.locationId),e.projectId&&(i.attributes.projectId=e.projectId),e.projectType&&(i.attributes.projectType=e.projectType),e.projectTemplateKey&&(i.attributes.projectTemplateKey=e.projectTemplateKey),t.sendTrackEvent(i)},GH.StartWizardView.fireProjectCreatedTrackEvent=function(e){var r={containerType:"project",containerId:e.projectId,attributes:{projectType:e.projectType,projectTemplateKey:e.projectTemplateKey,createdUsing:e.sampleData?"sample":"template"},action:"created",actionSubject:"project",actionSubjectId:e.projectId,source:e.sampleData?"createSampleProjectModal":"createBoardModal"};t.sendTrackEvent(r)},AJS.$(GH).trigger("WizardViewLoaded")}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/rapid/ui/component/SavedFilterPicker.js' */
!function(){"use strict";var e=require("jira/ajs/select/single-select"),t=require("jira-agile/rapid/ajax");GH.SavedFilterPicker=function(e){this.selector=e.selector,this.fieldSelector=e.selector+"-field",this.blurHandler=e.blur,this.selectHandler=e.selected,this.stayActivated=e.stayActivated,this.focus=e.focus},GH.SavedFilterPicker.prototype.show=function(i){var r=AJS.$(this.selector),s=new e({element:r,width:300,removeOnUnSelect:!0,itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:!0,url:t.buildRestUrl("/savedfilter/list.json"),formatResponse:function(e){if(e.errors){var i=t._convertJiraErrors(e.errors),s={searchName:this.selector};return t.handleContextualErrors(i,s),!1}r.siblings(".ghx-error").remove();var l=[];return AJS.$(e.filters).each(function(){l.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name)),savedFilter:this}))}),l}}});this.singleSelect=s;var l=this.removeSingleSelect;this.stayActivated||AJS.$(this.fieldSelector).blur(function(){l(s)}),_.isFunction(this.blurHandler)&&AJS.$(this.fieldSelector).blur(this.blurHandler),this.focus&&AJS.$(this.fieldSelector).focus().select(),i&&this.setSelection(i);var n=this.selectHandler;this.stayActivated?(r.bind("selected",n),r.bind("unselect",n)):(r.bind("selected",function(e,t){l(s),n(e,t)}),r.bind("unselect",function(e,t){l(s),n(e,t)}))},GH.SavedFilterPicker.prototype.setSelection=function(e){this.singleSelect.setSelection(new AJS.ItemDescriptor({value:e.id.toString(),label:e.name,html:AJS.escapeHTML(String(e.name)),savedFilter:e,selected:!0}))},GH.SavedFilterPicker.prototype.removeSingleSelect=function(e){e.hideSuggestions(),e.disable()},GH.SavedFilterPicker.prototype.getElement=function(){return this.singleSelect.$field}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-create-board', location = 'jira-agile-module/includes/js/lib/jquery/jquery.keygen.js' */
!function(e,t){e.KeyGenerator=function(){var e=["THE","A","AN","AS","AND","OF","OR"],n={},a=function(e){return e.join("").length},r=function(n){return t.grep(n,function(n,a){return t.inArray(n,e)===-1})},o=function(e){var n="";return t.each(e,function(e,t){n+=t.charAt(0)}),n},u=function(e){var t,n=!1;for(t=0;t<e.length;t++)if(i(e[t]))n=!0;else if(n)return e.substring(0,t+1);return e},i=function(e){return e&&1===e.length&&e.search("[AEIOUY]")!==-1};return n[199]="C",n[231]="c",n[252]="u",n[251]="u",n[250]="u",n[249]="u",n[233]="e",n[234]="e",n[235]="e",n[232]="e",n[226]="a",n[228]="a",n[224]="a",n[229]="a",n[225]="a",n[239]="i",n[238]="i",n[236]="i",n[237]="i",n[196]="A",n[197]="A",n[201]="E",n[230]="ae",n[198]="Ae",n[244]="o",n[246]="o",n[242]="o",n[243]="o",n[220]="U",n[255]="Y",n[214]="O",n[241]="n",n[209]="N",{generateKey:function(e,i){i=t.extend({},i);var c="number"==typeof i.desiredKeyLength?i.desiredKeyLength:4,h="number"==typeof i.maxKeyLength?i.maxKeyLength:1/0;if(e=t.trim(e),!e)return"";for(var s=[],g=0,f=e.length;g<f;g++){var l=n[e.charCodeAt(g)];s.push(l?l:e[g])}e=s.join("");var d=[];t.each(e.split(/\s+/),function(e,t){t&&(t=t.replace(/[^a-zA-Z]/g,""),t=t.toUpperCase(),t.length&&d.push(t))}),c&&a(d)>c&&(d=r(d));var m;if(0==d.length)m="";else if(1==d.length){var v=d[0],y=u(v);m=h<v.length||Math.abs(v.length-c)>=Math.abs(y.length-c)?y:v}else{var K=a(d),x=o(d);m=h<K||Math.abs(K-c)>=Math.abs(x.length-c)?x:d.join("")}return h&&m.length>h&&(m=m.substr(0,h)),m}}};var n=e.KeyGenerator();t.fn.generateFrom=function(e,a){var r={desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},o=t(this).first(),e=e.first(),a=t.extend({},r,a);return function(){var r=function(){return o.data("autosuggest")!==!1},u=function(e){o.val()&&o.data("lastGeneratedValue")!==o.val()&&o.data("autosuggest",!1)},i=function(e){o.data("lastGeneratedValue",e),o.val(e)},c=function(){u(o.val()),f()},h=function(e){s(e,c)},s=function(e,n){var r,o=t(e.target);r=function(){g(e),n(),o.is(":visible")&&o.data("checkHook",setTimeout(r,a.timeoutMS))},o.data("checkHook")||o.data("checkHook",setTimeout(r,0))},g=function(e){var n=t(e.target);clearTimeout(n.data("checkHook")),n.removeData("checkHook")},f=function(){r()&&i(n.generateKey(e.val(),{desiredKeyLength:a.desiredKeyLength,maxKeyLength:a.maxKeyLength}))};e.attr("maxlength",a.maxNameLength),o.attr("maxlength",a.maxKeyLength),o.css("text-transform","uppercase"),document.activeElement&&document.activeElement===e[0]&&h({target:e[0]}),e.focus(h),e.blur(g)}(),this}}(window,jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-common', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseVersionDialog.js' */
GH.Dialogs.ReleaseVersionDialog={},GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED="versionReleased",GH.Dialogs.ReleaseVersionDialog.dialog=void 0,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.ReleaseVersionDialog.analytics=new e("gh.release")}(),GH.Dialogs.ReleaseVersionDialog.showDialog=function(e,a){GH.Dialog.dim(),GH.Ajax.get({url:"/release/model.json",data:{rapidViewId:e,columnId:a}},"showReleaseVersionDialog").done(GH.Dialogs.ReleaseVersionDialog.renderDialog).fail(GH.Dialog.undim)},GH.Dialogs.ReleaseVersionDialog.renderDialog=function(e){_.each(e.projectIssueDetails,function(e){e.name=AJS.escapeHTML(String(e.name))});var a=GH.Dialogs.ReleaseVersionDialog.dialog=GH.Dialog.create({width:500,height:380,id:"ghx-dialog-release",onCancelFn:function(){GH.Dialogs.ReleaseVersionDialog.dialog=void 0,GH.Dialog.triggerHideEvent(),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel",e.projectIssueDetails.length)},analyticsPageName:"releaseNewVersionModal"});AJS.$("#"+a.id).addClass("ghx-dialog"),a.addHeader("Release"),a.addPanel("","panel"),a.getCurrentPanel().html(GH.tpl.dialogs.releaseversion.renderReleaseDialog({model:e})),a.addButton("Release",function(){GH.Dialogs.ReleaseVersionDialog.release(e),GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.RELEASE_VERSION)},"aui-button aui-button-primary"),a.addCancel("Cancel",function(){a.cancel()}),AJS.$(".aui-dialog").addClass("ghx-dialog");new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-release-date",button:"ghx-release-date_trigger_c",align:"Tl",singleClick:!0,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start",e.projectIssueDetails.length),a.show(),GH.Dialog.Spinner.hide(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.ReleaseVersionDialog.release=function(e){GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete",e.projectIssueDetails.length);var a=GH.Dialogs.ReleaseVersionDialog.dialog;a.disableControls(),a.showSpinner(),GH.Ajax.post({url:"/release",data:{versionName:AJS.$("#ghx-release-name").val(),releaseDate:AJS.$("#ghx-release-date").val(),description:AJS.$("#ghx-release-desc").val(),rapidViewId:e.rapidViewId,columnId:e.columnId},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date_trigger_c"}}).done(function(e){var a=GH.Dialogs.ReleaseVersionDialog.dialog;a&&(a.dispose(),GH.Dialog.triggerHideEvent(),GH.Dialogs.ReleaseVersionDialog.dialog=void 0),GH.Notification.showSuccess(e.success.message),AJS.$(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED)}).fail(function(){var e=GH.Dialogs.ReleaseVersionDialog.dialog;e&&(e.hideSpinner(),e.enableControls())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-common', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseVersionDialog.soy' */
// This file was automatically generated from ReleaseVersionDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.releaseversion.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.releaseversion == 'undefined') { GH.tpl.dialogs.releaseversion = {}; }


GH.tpl.dialogs.releaseversion.renderReleaseDialog = function(opt_data, opt_ignored) {
  var output = '<div id="version-new">';
  if (opt_data.model.projectIssueDetails.length > 0) {
    output += '<ul id="ghx-release-navigator">';
    var projectList7 = opt_data.model.projectIssueDetails;
    var projectListLen7 = projectList7.length;
    for (var projectIndex7 = 0; projectIndex7 < projectListLen7; projectIndex7++) {
      var projectData7 = projectList7[projectIndex7];
      output += '<li><a title="' + soy.$$escapeHtml('View in Issue Navigator') + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/GHReleaseIssueNavigator.jspa?projectId=' + soy.$$escapeHtml(projectData7.id) + '&rapidViewId=' + soy.$$escapeHtml(opt_data.model.rapidViewId) + '&columnId=' + soy.$$escapeHtml(opt_data.model.columnId) + '">' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|2#{0} issues}',projectData7.issueCount)) + '</a> ' + soy.$$filterNoAutoescape(AJS.format('will be released from \x3cstrong\x3e{0}\x3c/strong\x3e',projectData7.name)) + '</li>';
    }
    output += '</ul>';
  }
  output += '<form action="#" class="aui"><fieldset><div class="field-group"><label for="ghx-release-name">' + soy.$$escapeHtml('Version name') + '</label><input id="ghx-release-name" type="text" class="text"><div id="query-results"></div></div><div class="field-group"><label for="ghx-release-date">' + soy.$$escapeHtml('Release date') + '</label><input type="text" id="ghx-release-date" value="' + soy.$$escapeHtml(opt_data.model.defaultReleaseDate) + '" class="text"><span id="ghx-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar">&nbsp;</span></div><div class="field-group"><label for="ghx-release-desc">' + soy.$$escapeHtml('Description') + '</label><textarea id="ghx-release-desc" rows="4" class="textarea"></textarea></div></fieldset></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.releaseversion.renderReleaseDialog.soyTemplateName = 'GH.tpl.dialogs.releaseversion.renderReleaseDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-common', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseExistingVersionDialog.js' */
define("jira-agile/rapid/ui/dialog/release-existing-version-dialog",["jquery","underscore","jira/projects/release/version-adapter","jira/projects/release/submit-model","jira-project-config/utils","jira-agile/rapid/ajax","jira/analytics/web-client","jira/container-api"],function(e,s,i,o,n,a,r,t){"use strict";function l(e){var s=g.get(e);return s&&s.get("project")&&s.get("project").name}var g,d=JIRA.Admin.Version.ReleaseForm,u=GH.Notification,c=Backbone.Collection.extend({model:o}),v={};v.init=function(){var e=GH.VersionController.getVersionModel(),i=e.getAllVersions();AJS.params.dateFormat=GH.TimeFormat.dateFormat,g=new c,s.each(i,function(e){var s=new o(e);g.add(s)})},v.show=function(e){a.get({url:"/release/existingVersionModel.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),versionId:e}}).done(function(s){s.hasIssueOutOfScope?v.showGoToReleaseHubDialog(e,"This version has issues that are not included in the board. We recommend using the Release Hub instead."):s.hasIssueWithComplexMapping?v.showGoToReleaseHubDialog(e,"This version has issues with potential problems. We recommend using the Release Hub instead."):(v.showReleaseExistingDialog(e,s),r.sendPageEvent("releaseExistingVersionModal"))})},v.showReleaseExistingDialog=function(o,a){var r=this;GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start.existing");var t,u=function(s){if(s.moveUnfixedIssuesTo){var i=m(s.moveUnfixedIssuesTo);p(AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e released. The unresolved {1,choice,1#issue|1\u003cissues} are now in \u003cstrong\u003e{2}\u003c/strong\u003e.",t.versionName,t.issueCount,i))}else p("Version released");e(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete.existing")},c=function(e){s.isEmpty(e.errorMessages)||(t.hide(),f(t.versionName))},v=new i(g.get(o));v.on(i.RELEASE_SUCCESS_EVENT,u),v.on(i.RELEASE_ERROR_EVENT,c),t=n.openDialogForRow(d,v,"version-release-dialog"),t.onContentReady(h.bind(t,a.hasIssueInAnotherUnreleasedVersion,l(o))),e(t).on("Dialog.hide",function(){r.cancelled&&GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel.existing")})},v.showGoToReleaseHubDialog=function(e,s){var i=GH.Dialog.create({width:400,height:200,analyticsPageName:"releaseHubRedirectModal"}),o=GH.VersionController.getVersionModel(),n=o.getVersion(e);i.addHeader(AJS.format("Release version: {0}",n.name)),i.addPanel("","panel"),i.getCurrentPanel().html(s),i.addButton("Go to Release Hub",function(){var s=a.CONTEXT_PATH+"/projects/"+n.project.key+"/versions/"+e;t.navigate(s,function(){window.location.href=s})}),GH.Dialog.addCancelButton(i),i.show()};var m=function(e){var s=g.get(e);return s&&s.get("name")},f=function(e){var s={};s.message=AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e can\'\'t be released at this time. Please refresh your browser and try again.",e),u.showErrors({errors:[s]})},p=function(e){u.showSuccess(e)},h=function(s,i){this.issuesCount=this.$form.find('input[name="issues-count"]').attr("value"),this.versionName=this.$form.find('input[name="version-name"]').attr("value");var o=this.$form.find("#project-config-version-release-form-unresolved-ignore-paragraph");o&&o.before(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.invisibleIssuePartial({issuesCount:this.issuesCount,versionName:this.versionName})));var n=this.$form.find("#project-config-version-release-form-unresolved-ignore-label");n.length&&(s?(e("#project-config-version-release-form-unresolved-message").after(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.issueUnreleasedVersionVisible())),n.append(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.mayRemoveUnresolvedIssues({issuesCount:this.issuesCount,versionName:this.versionName})))):n.append(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.willRemoveUnresolvedIssues({versionName:this.versionName}))));var a=this.$form.find("#project-config-version-release-form-all-issues-resolved strong");a.length&&"undefined"===a.text()&&a.text(i)};return v});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-dependencies', location = 'jira-agile-module/includes/js/rapid/LegacyNamespaces.js' */
AJS.namespace("GH.ReleaseVersionTrigger",null,require("jira-agile/rapid/ui/work/release-version-trigger")),AJS.namespace("GH.SprintConfig",null,require("jira-agile/rapid/ui/plan/sprint-config")),AJS.namespace("GH.Ajax",null,require("jira-agile/rapid/ajax"));;
;
/* module-key = 'com.atlassian.jira.plugins.inline-create.jira-inline-issue-create-plugin:jag-integration-tests', location = '/inline-issue-create/widgets/agile-plan/agile-plan-inline-issue-create-initialiser-tests.js' */
require(["underscore","jquery","jira/inline-issue-create/util"],function(t,e,i){"use strict";function n(t){var e="iic.test."+t;JIRA.trace(e)}function r(e,r,a,o){i.after(e,r,function(){t.isFunction(o)&&o.apply(this,arguments),n(a)})}r(GH.PlanControls,"init","controls.inited"),r(GH.SprintView,"renderAllSprints","render.all.sprints"),r(GH.BacklogModel,"setData","backlog.data.set"),r(GH.BacklogView,"_scrollToView","scrolled.to.issue"),r(GH.BacklogModel,"updateDataForSprint","updated.data.for.sprint"),r(GH.SprintBacklogView,"renderBacklog","backlog.rendered"),r(GH.SprintBacklogView,"updateBacklog","backlog.updated"),r(GH.RapidBoard.State,"setRapidViewId","rapid.view.changed"),r(GH.SprintView,"_renderSprintContent","sprint.content.rendered",function(t,e){n("sprint.content.rendered."+e.getSprintData().id)}),i.after(GH.PlanControls,"init",function(){r(GH.PlanControls.quickfilters,"setActiveQuickFilters","active.filters.set")})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-onboarding-common', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanOnboarding.js' */
!function(t,s,i,e,a,n){"use strict";function r(){var t=i.getBacklogModel2(),n=t.getIssueList(),r={issueListStats:e.getIssueListStats(n,!1),sprintModels:i.getSprintModels(),canCreateIssue:i.canCreateIssue(),canManageSprints:i.canManageSprints(),isIssueLimitExceeded:i.isIssueLimitExceeded,isUsingLogicalSprints:!GH.RapidBoard.State.isIssueListBacklog()&&!GH.RapidBoard.State.isKanbanBoard(),sprintIssueListStats:[],numActiveSprints:0,numFutureSprints:0};return s.each(r.sprintModels,function(t){r.sprintIssueListStats.push(a.calculateSprintIssueListStats(t,t.getIssueList())),"ACTIVE"===t.sprintData.state&&r.numActiveSprints++,"FUTURE"===t.sprintData.state&&r.numFutureSprints++}),r}function o(s){var i=t(".ghx-onboarding-fillyourbacklog-group"),e=t(".ghx-backlog-group .ghx-helper");s.isIssueLimitExceeded?(e.hide(),i.empty()):s.issueListStats.totalCount<3&&0===s.sprintModels.length&&s.canCreateIssue?(i.html(GH.tpl.planonboarding.renderFillYourBacklogMessage()),e.hide()):0===s.issueListStats.totalCount||0===s.issueListStats.visibleCount?(e.show(),i.empty()):(e.hide(),i.empty())}function p(i){var e,a,n,r;i.canManageSprints&&0===i.numActiveSprints&&!i.isIssueLimitExceeded&&(n=s.first(i.sprintModels),r=s.first(i.sprintIssueListStats),n&&r&&(GH.RapidBoard.State.isCollapsibleBacklogEnabled()&&n.isBacklog()?l._updateFillYourBacklogMessageNew(i):"FUTURE"===n.sprintData.state&&0===r.totalCount&&(e=t(".js-sprint-container"),a=e.filter("[data-sprint-id="+n.sprintData.id+"]").find(".ghx-helper"),a.html(GH.tpl.planonboarding.renderPlanYourSprintMessage()))))}function u(s){var i=t(".ghx-onboarding-error-group");if(s.isIssueLimitExceeded){var e=GH.RapidBoard.State.getRapidViewId(),a=GH.RapidBoard.getRapidViewConfigurationUrl(e,"filter");i.html(GH.tpl.planonboarding.renderTooManyIssuesMessage({linkAddr:a,boardSettingClass:"board-settings-link"}))}else i.empty()}function d(t){return t.canManageSprints&&0===t.numFutureSprints&&0===t.numActiveSprints&&t.issueListStats.totalCount>=3}var l=function(){n(this)};l._updateFillYourBacklogMessageNew=function(s){var i=t(".ghx-onboarding-fillyourbacklog-group"),e=t(".js-sprint-container").filter("[data-sprint-id='backlog']").find(".ghx-helper");s.isIssueLimitExceeded?(e.hide(),i.empty()):s.issueListStats.totalCount<3&&1===s.sprintModels.length&&s.canCreateIssue?(i.html(GH.tpl.planonboarding.renderFillYourBacklogMessage()),e.hide()):0===s.issueListStats.totalCount||0===s.issueListStats.visibleCount?(e.show(),i.empty()):(e.hide(),i.empty())},l.prototype.updateStartSprint=function(i){if(t(".js-sprint-start").removeClass("aui-button-primary"),i.canManageSprints&&0===i.numActiveSprints&&!i.isIssueLimitExceeded){var e=s.find(i.sprintModels,function(t,s){return"FUTURE"===t.sprintData.state&&i.sprintIssueListStats[s].totalCount>0});if(e){var a=".js-sprint-container[data-sprint-id="+e.sprintData.id+"] .js-sprint-start";t(a).addClass("aui-button-primary")}}},l.prototype.renderOnboarding=function(){var t=r();GH.RapidBoard.State.isCollapsibleBacklogEnabled()||o(t),t.isUsingLogicalSprints&&p(t),u(t),this.updateCreateSprint(t),this.updateStartSprint(t),this.refresh()},l.prototype.refresh=function(){this.trigger("refresh")},l.prototype.updateCreateSprint=function(s){var i=t(".js-add-sprint");d(s)?i.addClass("aui-button-primary"):i.removeClass("aui-button-primary")},GH.PlanOnboarding=l,GH.planOnboarding=new l}(AJS.$,_,GH.BacklogModel,GH.BacklogStatistics,GH.SprintView,GH.Events);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-onboarding-common', location = 'jira-agile-module/includes/js/rapid/ui/plan/PlanOnboarding.soy' */
// This file was automatically generated from PlanOnboarding.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.planonboarding.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.planonboarding == 'undefined') { GH.tpl.planonboarding = {}; }


GH.tpl.planonboarding.renderFillYourBacklogMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-fillyourbacklog ghx-onboarding-container"><div class="ghx-onboarding-image"></div><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml('Plan your team\x27s work') + '</h5><p>' + soy.$$escapeHtml('The backlog is your team\x27s to-do list. Create 3 issues, and rank them in order of priority.') + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderFillYourBacklogMessage.soyTemplateName = 'GH.tpl.planonboarding.renderFillYourBacklogMessage';
}


GH.tpl.planonboarding.renderPlanYourSprintMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-planyoursprint ghx-onboarding-container"><div class="ghx-onboarding-image"></div><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml('Plan your sprint') + '</h5><p>' + soy.$$escapeHtml('As a team, agree on what work needs to be completed, and drag these issues to the sprint.') + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderPlanYourSprintMessage.soyTemplateName = 'GH.tpl.planonboarding.renderPlanYourSprintMessage';
}


GH.tpl.planonboarding.renderTooManyIssuesMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-onboarding-error ghx-onboarding-container"><div class="ghx-onboarding-image"></div><div class="ghx-onboarding-message"><h5>' + soy.$$escapeHtml('Too many issues are trying to load') + '</h5><p>' + soy.$$escapeHtml('It will take you eons to scroll through mountains of issues.') + '</p><p><a href="' + soy.$$escapeHtml(opt_data.linkAddr) + '" class="' + soy.$$escapeHtml(opt_data.boardSettingClass) + '">' + soy.$$escapeHtml('Update board filter') + '</a></p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.planonboarding.renderTooManyIssuesMessage.soyTemplateName = 'GH.tpl.planonboarding.renderTooManyIssuesMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:plan-chaperones-common', location = 'jira-agile-module/onboarding/chaperones/PlanChaperones.js' */
define("jira-agile/onboarding/chaperones/plan-chaperones",["jquery","underscore","jira/util/data/meta"],function(e,t,n){function i(){t.each(this.chaperones,function(t){"undefined"!=typeof t.helptip?t.helptip.refresh():e(t.anchorSelector).length&&this._initChaperone(t)},this)}function o(){return n.getBoolean("onboarding-has-completed-first-use-flow")}var r=function(e){this.chaperones=[{id:"create-sprint",title:"Create a sprint",bodyHtml:"You now have some issues in your backlog. Create a sprint to start working on them.",anchorSelector:".js-add-sprint.aui-button-primary"},{id:"start-sprint",title:"Start your sprint",bodyHtml:"Click this button when you are ready to start the sprint.",anchorSelector:".js-sprint-start.aui-button-primary"}],e.on("refresh",i,this)};return r.prototype._initChaperone=function(n){AJS.HelpTip&&o()&&"undefined"==typeof n.helptip&&(n.helptip=new AJS.HelpTip({id:"onboarding-"+n.id,title:n.title,bodyHtml:n.bodyHtml,anchor:n.anchorSelector,showCloseButton:!0}),n.helptip.show({force:!0}),e(document).on("click.planChaperone",n.anchorSelector,t.bind(function(){this._dismissChaperone(n)},this)))},r.prototype._dismissChaperone=function(t){"undefined"!=typeof t.helptip&&(t.helptip.dismiss("dismissed"),delete t.helptip,e(document).off("click.planChaperone",t.anchorSelector))},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:plan-chaperones-common', location = 'jira-agile-module/onboarding/chaperones/PlanChaperonesInit.js' */
require(["jira-agile/onboarding/chaperones/plan-chaperones"],function(n){new n(GH.planOnboarding)});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/jql-autocomplete.js' */
define("jira/autocomplete/jql-autocomplete",["jira/util/formatter","jira/autocomplete/autocomplete","jira/jql/jql-grammar","jira/jql/util","jira/jql/operator-util","jira/util/data/meta","jira/util/objects","jquery","underscore","jira/featureflags/feature-manager","wrm/context-path"],function(e,t,r,a,s,n,i,l,o,d){var g=function(n){var o,g=i.begetObject(t),u=n.parser,p=l.grep(n.jqlFieldNames,function(e){return e.searchable}),c=l.grep(n.jqlFieldNames,function(e){return e.orderable}),f=n.jqlFunctionNames,m=l("#"+n.errorID),h=0,v=l("#jqlcolumnnum"),O=l("#jqlrownum"),S=n.autoCompleteUrl||contextPath+"/rest/api/2/jql/autocompletedata/suggestions";g.textToSuggestionCursorPosition=function(){return g.field.selectionRange().textBefore},g.pushSuggestionsOnHtmlStack=function(e,t,r,s,n,i){for(var l=Math.min(15,e.length),d=0;d<l;d++){var g,u;if(e[d].value){var p=e[d];g=o&&n?(o.getNeedsOpenParen()?"(":"")+p.value:p.value,u=p.displayName}else u=e[d],g=u;t.push(g);var c=u.replace(/<b>/g,"").replace(/<\/b>/g,"");if(i&&a.isCollapsedField(g)){var f=a.extractFieldTypeInformation(g);null===f?L(r,s,d,u,c):y(r,s,d,u,g,f)}else L(r,s,d,u,c)}};var L=function(e,t,r,a,s){e.push('<li id="',t,r,'" title="',s,'">',a,"</li>")},y=function(e,t,r,a,s,n){var i=a.replace(" - "+s.replace(/(^")|("$)/g,""),""),l=i.replace(/<\/?b>/g,""),o="";if("string"==typeof n.name){var d="string"==typeof n.icon?'<img src="'+n.icon+'" alt="'+n.name+'">':"";o='<span class="custom-field-type">'+d+n.name+"</span>",l+=" ["+n.name+"]"}e.push('<li id="',t,r,'" title="',l,'">',i,o,"</li>")};return g.renderSuggestions=function(t,r,a,s){var n=[];if(t instanceof Array){if(t.length<1&&r&&r.length<1&&a&&a.length<1)return n;var i=["<ul>"];a&&a.length>0&&g.pushSuggestionsOnHtmlStack(a,n,i,"jql_operator_suggest_",!1,!1),g.pushSuggestionsOnHtmlStack(t,n,i,"jql_value_suggest_",!0,s),r&&r.length>0&&g.pushSuggestionsOnHtmlStack(r,n,i,"jql_function_suggest_",!1,!1),i.push("</ul>");var o=l('<a class="syntax-help" target="_jiraHelp"></a>').attr("title","query_filter.advanced_search.title").attr("href","https://confluence.atlassian.com/display/SERVICEDESKCLOUD/Advanced+searching").text("Syntax Help"),d=l('<div class="syntax-help-container">').append(o);g.responseContainer.html(i.join("")).append(d).find("li").each(function(e){var t=l(this);n[e]=[t,n[e]],t.tooltip({gravity:"w"})}),g.addSuggestionControls(n)}return n},g.completeField=function(e){var t,r=g.getReplacementStartIndex(o,e),a=g.getReplacementEndIndex(o,r);t=g.isAutoSelectFirstEnabled()?o.isInsideList()?e:e+" ":e,g.replaceValue(r,a,t);var s=u.parse(g.field.val());g.updateParseIndicator(s)},g.findFieldNameForSuggestions=function(e){for(var t=0;t<p.length;t++){var r=p[t];if(a.equalsIgnoreCase(a.getUnquotedString(r.value),e)){if(r.cfid)return r.cfid;break}}return a.stripEscapeCharacters(e)},g.prepareOperandSuggestions=function(e,t,r,n,i){if(e){var l=h,d=null==i?null===o.getLastOperand()?"":a.stripEscapeCharacters(o.getLastOperand()):i,u=t+":"+d,p={fieldName:g.findFieldNameForSuggestions(t)};null===o.getLastOperand()&&null===i||(p.fieldValue=d);var c=s.isWasOperator(o.getLastOperator());g.getSavedResponse(u)?g.renderSuggestionsForOperands(d,g.getSavedResponse(u),r,n,l):(g.dropdownController.dropdown.removeClass("dropdown-ready"),g.delay(function(){g._makeRequest({url:S,dataType:"json",data:p,success:function(e){var t;if(t=null!==e&&null!==e.results?e.results:[],c){var a=p.fieldValue;t=g.appendEmpty(a,t)}g.saveResponse(u,t),g.renderSuggestionsForOperands(d,t,r,n,l)},error:function(){g.renderSuggestionsForOperands(d,[],r,n,l)}})},g.queryDelay))}else g.renderSuggestionsForOperands(a.stripEscapeCharacters(o.getLastOperand()),[],r,n,h)},g.preparePredicateSuggestions=function(e,t){"undefined"==typeof t&&(t=null);var r=g.slimListForPredicates(t,f,e);g.boldMatchingString(t,r);var s=null==t?null===o.getLastOperand()?"":a.stripEscapeCharacters(o.getLastOperand()):t,n=e+":"+s,i={predicateName:a.stripEscapeCharacters(e)};null===o.getLastOperand()&&null===t||(i.predicateValue=s),null!==o.getLastFieldName()&&(i.fieldName=g.findFieldNameForSuggestions(o.getLastFieldName()),n=o.getLastFieldName()+":"+n),g.predicateSupportsAutoComplete(e)?g.getSavedResponse(n)?g.renderSuggestions(g.getSavedResponse(n),r):(g.dropdownController.dropdown.removeClass("dropdown-ready"),g.delay(function(){g._makeRequest({url:S,dataType:"json",data:i,success:function(e){var t;t=null!==e&&null!==e.results?e.results:[];var a=i.predicateValue;t=g.appendEmpty(a,t),g.saveResponse(n,t),g.renderSuggestions(t,r)},error:function(){g.renderSuggestionsForOperands(s,[])}})},g.queryDelay)):g.renderSuggestions([],r)},g.incompleteOperator=function(){var e=o.getTokens();return null==e||e.length<2?"":(e=g.textToSuggestionCursorPosition().split(" "),e.length>2?e[e.length-1]:"")},g.incompletePredicateValue=function(){var e=o.getTokens();return null==e||e.length<3?"":(e=g.textToSuggestionCursorPosition().split(/[\s(,]+/),e.length>3?e[e.length-1]:"")},g.appendEmpty=function(e,t){var a=g.slimListForMapResults(e,r.empty_operand,!0);return null!=e&&g.boldMatchingString(e,a),t.length<15?t=t.concat(a):t[14]=a[0],t},g.dispatcher=function(e){var t,n,i=l(g.field).selectionRange(),d=e.substring(0,i.start),m=u.parse(d);if(o=m.getResult(),h++,o.getNeedsField())g.renderSuggestionsFromMap(a.stripEscapeCharacters(o.getLastFieldName()),p,r.jql_not_logical_operator,!1,!0);else if(o.getNeedsOperatorOrOperand()){n=s.isEmptyOnlyOperator(o.getLastOperator())?r.empty_operand:f,m.calcLastOperandStartIndex();var v=m.getParsedOperator(),O=g.getSuggestionsForOperators(v,r.jql_operators);if(O&&O.length>0){var S=g.incompleteOperator();g.prepareOperandSuggestions(!0,o.getLastFieldName(),n,O,S)}}else if(o.getNeedsOperator())g.renderSuggestionsForOperators(o.getLastOperator(),r.jql_operators);else if(o.getNeedsPredicateOperand()){var L=o.getLastWasPredicate();g.preparePredicateSuggestions(L,a.stripEscapeCharacters(o.getLastOperand()))}else if(o.getNeedsLogicalOperator())o.getNeedsWasPredicate()?o.getNeedsOrderBy()?(t=null===o.getLastOrderBy()?o.getLastWasPredicate():o.getLastOrderBy(),"was"===o.getLastOperator()?g.renderSuggestionsFromMap(t,r.jql_was_predicates_and_order_by,!1):g.renderSuggestionsFromMap(t,r.jql_changed_predicates_and_order_by,!1)):"was"===o.getLastOperator()?g.renderSuggestionsFromMap(o.getLastWasPredicate(),r.jql_was_predicates_and_logical_operators,!1):g.renderSuggestionsFromMap(o.getLastWasPredicate(),r.jql_changed_predicates_and_logical_operators,!1):o.getNeedsOrderBy()?(t=null===o.getLastOrderBy()?o.getLastLogicalOperator():o.getLastOrderBy(),g.renderSuggestionsFromMap(t,r.jql_logical_operators_and_order_by,!1)):g.renderSuggestionsFromMap(o.getLastLogicalOperator(),r.jql_logical_operators,!1);else if(o.getNeedsOrderByField())g.renderSuggestionsFromMap(a.stripEscapeCharacters(o.getLastOrderByFieldName()),c,!0,!1,!0);else if(o.getNeedsOrderByDirection())g.renderSuggestionsFromMap(o.getLastOrderByDirection(),r.jql_order_by_direction,!1);else if(o.getNeedsOperand()){var y=o.getLastFieldName(),_=!1;if(!s.isEmptyOnlyOperator(o.getLastOperator()))for(var q=0;q<p.length;q++)if(a.equalsIgnoreCase(a.getUnquotedString(p[q].value),y)||p[q].cfid&&a.equalsIgnoreCase(p[q].cfid,y)){_=p[q].auto;break}n=s.isEmptyOnlyOperator(o.getLastOperator())?r.empty_operand:f,g.prepareOperandSuggestions(_,y,n,{})}else o.getNeedsOrderBy()?g.renderSuggestionsFromMap(o.getLastOrderBy(),r.jql_logical_operators_and_order_by,!1):g.dropdownController.hideDropdown();g.parse(e)},g.parse=function(e){var t=u.parse(e);return g.updateParseIndicator(t),g.updateColumnLineCount(),t.getResult()},g.renderSuggestionsFromMap=function(e,t,r,a,s){r||(r={});var n=g.slimListForMapResults(e,t,a),i=g.slimListForMapResults(e,r,a);g.boldMatchingString(e,i),g.boldMatchingString(e,n),g.renderSuggestions(n,i,[],s),0===n.length&&0===i.length&&g.dropdownController.hideDropdown()},g.getSuggestionsForOperators=function(e,t){for(var r,s=g.slimListForMapResults(e,t,!1),n=o.getLastFieldName(),i=0;i<p.length;i++)if(a.equalsIgnoreCase(a.getUnquotedString(p[i].value),n)||p[i].cfid&&a.equalsIgnoreCase(p[i].cfid,n)){r=p[i].operators;break}return r&&(s=l.grep(s,function(e){return l.inArray(e.value,r)>-1})),g.boldMatchingString(e,s),s},g.renderSuggestionsForOperators=function(e,t){var r=g.getSuggestionsForOperators(e,t);g.renderSuggestions(r),0===r.length&&g.dropdownController.hideDropdown()},g.renderSuggestionsForOperands=function(e,t,r,a,s){if(s===h){var n=g.slimListForFunctionResults(e,r,o.getLastOperator());g.boldMatchingString(e,n),g.renderSuggestions(t,n,a,!1),0===t.length&&0===n.length&&0===a.length&&g.dropdownController.hideDropdown()}},g.boldMatchingString=function(e,t){if(null!=e&&0!==t.length){for(var r=e.length,a=0,s=r;a<s;a++)switch(e.charAt(a)){case"<":case">":r+=3;break;case"&":r+=4;break;case'"':r+=5}for(var n=0;n<t.length;n++)if(t[n].displayName){var i=t[n].displayName;t[n]={value:t[n].value,displayName:"<b>"+i.substring(0,r)+"</b>"+i.substring(r)}}else t[n]={value:t[n],displayName:"<b>"+t[n].substring(0,r)+"</b>"+t[n].substring(r)}}},g.getReplacementStartIndex=function(e,t){var r,a=l(g.field);return r=e.getNeedsField()?e.getLastFieldNameStartIndex():e.getNeedsOperatorOrOperand()?e.getNeedsOperator()&&s.isWasOperator(t)?e.getLastOperatorStartIndex():e.getLastOperandStartIndex():e.getNeedsOperand()?e.getLastOperandStartIndex():e.getNeedsOperator()?e.getLastOperatorStartIndex():e.getNeedsOrderByField()?e.getLastOrderByFieldNameStartIndex():e.getNeedsOrderByDirection()?e.getLastOrderByDirectionStartIndex():e.getNeedsPredicateOperand()?e.getLastOperandStartIndex():e.getNeedsLogicalOperator()?null!==e.getLastLogicalOperatorStartIndex()&&0!==e.getLastLogicalOperatorStartIndex()?e.getLastLogicalOperatorStartIndex():null!==e.getLastOrderBy()&&0!==e.getLastOrderByStartIndex()?e.getLastOrderByStartIndex():null!=e.getLastWasPredicate()&&0!==e.getLastWasPredicateStartIndex()?e.getLastWasPredicateStartIndex():e.getMustBeOperatorOrPredicate()===!0?a.selectionRange().start:a.selectionRange().start-1:e.getNeedsWasPredicate()?e.getLastWasPredicateStartIndex():e.getNeedsOrderBy()?e.getLastOrderByStartIndex():a.selectionRange().start-1,null!=r?r:a.selectionRange().start},g.getReplacementEndIndex=function(e,t){var a=l(g.field),s=a.selectionRange(),n=null;if(s.start===s.end&&s.end!==g.field.val().length&&t<s.start){var i=e.getTokens().length-1,o=u.parse(g.field.val());if(!o.getParseError()){var d=o.getResult().getTokens()[i];if(null!==d&&"("!==d&&")"!==d){for(var p=g.field.val(),c=p.substring(t,p.length),f=c.split(""),m=0,h=0;h<f.length&&r.REGEXP_WHITESPACE.test(f[h]);h++)m++;n=t+d.length+m}}}return null===n&&(n=s.end),n<t&&(g.replaceValue(t,n," "),n=t),n},g.replaceValue=function(e,t,r){var a=l(g.field);a.selectionRange(e,t),l.browser.webkit&&!g.field.forceSelection?document.execCommand("insertText",!1,r):g.field.forceSelection&&g.field.selection?g.field.selection(r):a.selection(r);var s=a.selectionRange().end;a.selectionRange(s,s)},g.slimListForMapResults=function(e,t,r){var s=a.htmlEscape(e),n=l.grep(t,function(e){return a.startsWithIgnoreCaseNullsMeanAll(s,e.displayName)});return r||1!==n.length||a.startsWithNotEqualsIgnoreCaseNullMeansAll(s,n[0].displayName)?n:{}},g.slimListForFunctionResults=function(e,t,r){for(var n,i=o.getLastFieldName(),d=0;d<p.length;d++)if(a.equalsIgnoreCase(a.getUnquotedString(p[d].value),i)||p[d].cfid&&a.equalsIgnoreCase(p[d].cfid,i)){n=p[d].types;break}var g=l.grep(t,function(t){if(t.isList&&!s.isListSupportingOperator(r)||!t.isList&&s.isListSupportingOperator(r))return!1;if(!n)return!1;for(var i=l.inArray("java.lang.Object",t.types)>-1||l.inArray("java.lang.Object",n)>-1,o=0;o<n.length&&!i;o++)i=l.inArray(n[o],t.types)!==-1;return!!i&&(a.startsWithIgnoreCaseNullsMeanAll(e,t.value)||a.startsWithIgnoreCaseNullsMeanAll(e,t.displayName))});return 1!==g.length||a.startsWithNotEqualsIgnoreCaseNullMeansAll(e,g[0].displayName)?g:{}},g.slimListForPredicates=function(e,t,s){for(var n,i,o=0;o<r.jql_changed_predicates.length;o++)if(a.equalsIgnoreCase(a.getUnquotedString(r.jql_changed_predicates[o].value),s)){n=r.jql_changed_predicates[o].type,i=r.jql_changed_predicates[o].supportsList;break}var d=l.grep(t,function(t){if("undefined"!=typeof t.isList&&(t.isList&&i||!t.isList&&i))return!1;var r=l.inArray(n,t.types)!==-1;return!!r&&(a.startsWithIgnoreCaseNullsMeanAll(e,t.value)||a.startsWithIgnoreCaseNullsMeanAll(e,t.displayName))});return 1!==d.length||a.startsWithNotEqualsIgnoreCaseNullMeansAll(e,d[0].displayName)?d:{}},g.predicateSupportsAutoComplete=function(e){for(var t,s=0;s<r.jql_changed_predicates.length;s++)if(a.equalsIgnoreCase(a.getUnquotedString(r.jql_changed_predicates[s].value),e)){t=r.jql_changed_predicates[s].auto;break}return t},g.getSavedResponse=function(e){return this.requested||(this.requested={}),this.requested[e]},g.saveResponse=function(e,t){"string"==typeof e&&"object"==typeof t&&(this.requested||(this.requested={}),this.requested[e]=t)},g.startsWithIgnoreCase=function(e,t){return!(null===t||null===e||t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},g.updateParseIndicator=function(e){e.getParseError()?m.attr("title",e.getResult().getParseErrorMsg()).removeClass("jqlgood").addClass("jqlerror"):m.attr("title","").removeClass("jqlerror").addClass("jqlgood")},g.updateColumnLineCount=function(){var e=l(g.field),t=0;if(g.field[0]===document.activeElement){var a=e.selectionRange();t=a.start}else t=g.field[0].value.length;for(var s=1,n=1,i=g.field.val(),o=0;o<t;o++)r.REGEXP_NEW_LINE.test(i.charAt(o))?(s++,n=1):n++;v.text(n),O.text(s)},g.isAutoSelectFirstEnabled=function(){return d.isFeatureEnabled("jira.jql.autoselectfirst")},g.init(n),g};return g});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/jql-grammar.js' */
define("jira/jql/jql-grammar",function(){"use strict";var a={};return a.jql_order_by=[{value:"ORDER BY",displayName:"ORDER BY"}],a.jql_operators=[{value:"=",displayName:"="},{value:"!=",displayName:"!="},{value:"~",displayName:"~"},{value:"<=",displayName:"&lt;="},{value:">=",displayName:"&gt;="},{value:">",displayName:"&gt;"},{value:"<",displayName:"&lt;"},{value:"!~",displayName:"!~"},{value:"is not",displayName:"is not"},{value:"is",displayName:"is"},{value:"not in",displayName:"not in"},{value:"in",displayName:"in"},{value:"was",displayName:"was"},{value:"was not",displayName:"was not"},{value:"was in",displayName:"was in"},{value:"was not in",displayName:"was not in"},{value:"changed",displayName:"changed"}],a.jql_logical_operators=[{value:"AND",displayName:"AND"},{value:"OR",displayName:"OR"}],a.jql_logical_operators_and_order_by=a.jql_logical_operators.concat(a.jql_order_by),a.jql_order_by_direction=[{value:"ASC",displayName:"ASC"},{value:"DESC",displayName:"DESC"}],a.empty_operand=[{value:"EMPTY",displayName:"EMPTY",types:["java.lang.Object"]}],a.jql_not_logical_operator=[{value:"NOT",displayName:"NOT"}],a.jql_was_predicates=[{value:"AFTER",displayName:"AFTER",type:"java.util.Date",supportsList:"false"},{value:"BEFORE",displayName:"BEFORE",type:"java.util.Date",supportsList:"false"},{value:"BY",displayName:"BY",type:"com.atlassian.crowd.embedded.api.User",supportsList:"false",auto:"true"},{value:"DURING",displayName:"DURING",type:"java.util.Date",supportsList:"true"},{value:"ON",displayName:"ON",type:"java.util.Date",supportsList:"false"}],a.jql_changed_predicates=a.jql_was_predicates.concat([{value:"FROM",displayName:"FROM",type:"java.lang.String",supportsList:"true",auto:"true"},{value:"TO",displayName:"TO",type:"java.lang.String",supportsList:"true",auto:"true"}]),a.jql_was_predicates_and_order_by=a.jql_was_predicates.concat(a.jql_logical_operators_and_order_by),a.jql_was_predicates_and_logical_operators=a.jql_was_predicates.concat(a.jql_logical_operators),a.jql_changed_predicates_and_order_by=a.jql_changed_predicates.concat(a.jql_logical_operators_and_order_by),a.jql_changed_predicates_and_logical_operators=a.jql_changed_predicates.concat(a.jql_logical_operators),a.REGEXP_ANDS=/^AND\s/i,a.REGEXP_ORS=/^OR\s/i,a.REGEXP_NOTS=/^NOT\s/i,a.REGEXP_SNOT=/^\s+not/i,a.REGEXP_SIN=/^\s+in/i,a.REGEXP_SNOT_IN=/^\s+(not\s+in|not|in)/i,a.REGEXP_COMMA_DELIMITER=/^\s*,/,a.REGEXP_ASCENDING=/^\s+asc/i,a.REGEXP_DESCENDING=/^\s+desc/i,a.REGEXP_ORDER_BY=/^order\s+by/i,a.REGEXP_WHITESPACE=/^\s/,a.REGEXP_UNICODE=/^u[a-fA-F0-9]{4}/,a.REGEXP_FIELD_NAME=/^\s-\scf\[\d\d\d\d\d\]/,a.REGEXP_NEW_LINE=/[\r\n]/,a.REGEXP_NUMBER=/\d/,a.REGEXP_TOKEN_CHAR=/[^=!~<>(),\s&|\]]/,a.REGEXP_SPECIAL_CHAR=/[{}*\/%+$#@?;\][]/,a.REGEXP_SPACE_OR_ELSE=/[\s(]/,a.REGEXP_CHARS_TO_ESCAPE=/[^trn"'\\\s]/,a.REGEXP_NOTSTART=/^NO?$/i,a.REGEXP_INSTART=/^IN?$/i,a.REGEXP_PREDICATE=/^(after|before|by|during|from|on|to)/i,a.REGEXP_GROUPED_CUSTOM_FIELD=/^[^\[\]\s.'"]+\[[\w\s]+]/,a});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/jql-parse-result.js' */
define("jira/jql/jql-parse-result",["jira/jql/util"],function(e){"use strict";return function(){var t=[],r=[],n=0;return{getTokens:function(){return r},getRichTokens:function(){return t},addToken:function(e){r[n]=e,t[n]={value:e,kind:"unknown"},n++},setLastFieldName:function(s,i){this.fieldNameStartIndex=null===s?i.getMaxTokenStringIdx():i.getTokenStringIdx()-s.length,this.lastFieldName=e.getUnquotedString(s),r[n]=s,t[n]={value:s,kind:"fieldName",startIndex:this.fieldNameStartIndex},n++},getLastFieldName:function(){return this.lastFieldName},getLastFieldNameStartIndex:function(){return this.fieldNameStartIndex},setLastOrderByFieldName:function(s,i){this.orderByFieldNameStartIndex=null===s?i.getMaxTokenStringIdx():i.getTokenStringIdx()-s.length,this.lastOrderByFieldName=e.getUnquotedString(s),this.lastOrderByDirection=null,r[n]=s,t[n]={value:s,kind:"orderByFieldName",startIndex:this.orderByFieldNameStartIndex},n++},getLastOrderByFieldName:function(){return this.lastOrderByFieldName},getLastOrderByFieldNameStartIndex:function(){return this.orderByFieldNameStartIndex},setLastOrderByDirection:function(e,s){this.orderByDirectionStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastOrderByDirection=e,r[n]=e,t[n]={value:this.lastOrderByDirection,kind:"orderByDirection",startIndex:this.orderByDirectionStartIndex},n++},getLastOrderByDirection:function(){return this.lastOrderByDirection},getLastOrderByDirectionStartIndex:function(){return this.orderByDirectionStartIndex},setNeedsField:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!0,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1,this.needsWasPredicate=!1,this.lastWasOperator=null},getNeedsField:function(){return this.needsField},setNeedsOrderByField:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!0,this.needsOrderByDirection=!1,this.lastOrderByDirection=null,this.needsListComma=!1},getNeedsOrderByField:function(){return this.needsOrderByField},setNeedsOrderByDirection:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!0,this.needsListComma=!1},getNeedsOrderByDirection:function(){return this.needsOrderByDirection},setNeedsOrderByComma:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},setNeedsListComma:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!0},getNeedsListComma:function(){return this.needsListComma},setLastOperator:function(e,s){this.lastOperator=e,this.operatorStartIndex=s,r[n]=e,t[n]={value:this.lastOperator,kind:"operator",startIndex:this.operatorStartIndex},n++},setLastWasOperator:function(e){this.lastWasOperator=e},getLastWasOperator:function(){return this.lastWasOperator},getLastOperator:function(){return this.lastOperator},getLastOperatorStartIndex:function(){return this.operatorStartIndex},setLastOperand:function(s,i){this.operandStartIndex=null===s?i.getMaxTokenStringIdx():i.getTokenStringIdx()-s.length,this.lastOperand=e.getUnquotedString(s),r[n]=s,t[n]={value:s,kind:"operand",startIndex:this.operandStartIndex},n++},getLastOperand:function(){return this.lastOperand},setNeedsOperand:function(){this.needsField=!1,this.needsOperator=!1,this.needsLogicalOperator=!1,this.needsOperand=!0,this.needsOrderBy=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},setNeedsOperandOrOperator:function(){this.needsField=!1,this.needsOperator=!0,this.needsLogicalOperator=!1,this.needsOperand=!0,this.needsOrderBy=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},getNeedsOperand:function(){return this.needsOperand},setNeedsPredicateOperand:function(){this.needsPredicateOperand=!0},resetNeedsPredicateOperand:function(){this.needsPredicateOperand=!1,this.needsOperand=!1},getNeedsPredicateOperand:function(){return this.needsPredicateOperand},getLastOperandStartIndex:function(){return this.operandStartIndex},setLastOperandStartIndex:function(e){this.operandStartIndex=e,this.richTokens[n].startIndex=e},setLastLogicalOperator:function(e,s){this.lastLogicalOperator=e,this.logicalOperatorStartIndex=s,r[n]=e,t[n]={value:this.lastLogicalOperator,kind:"logicalOperator",startIndex:this.logicalOperatorStartIndex},n++},setNeedsOperator:function(){this.needsField=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsOperator=!0,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1},getNeedsOperatorOrOperand:function(){return this.needsOperator&&this.needsOperand},getNeedsOperator:function(){return this.needsOperator},getLastLogicalOperator:function(){return this.lastLogicalOperator},getLastLogicalOperatorStartIndex:function(){return this.logicalOperatorStartIndex},setNeedsLogicalOperator:function(e){this.needsLogicalOperator=!0,this.needsOperator=!1,this.needsOperand=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsListComma=!1,this.needsOrderBy=!e.getInParens(),null!=this.lastWasOperator&&(this.needsWasPredicate=!0)},setNeedsOpenParen:function(e){this.needsOpenParen=e},getNeedsOpenParen:function(){return this.needsOpenParen},getNeedsLogicalOperator:function(){return this.needsLogicalOperator},setNeedsOrderBy:function(e){this.needsOrderBy=e},getNeedsOrderBy:function(){return this.needsOrderBy},getNeedsWasPredicate:function(){return this.needsWasPredicate},setLastWasPredicate:function(e,t){this.wasPredicateStartIndex=null===e?t.getMaxTokenStringIdx():t.getTokenStringIdx()-e.length,this.lastWasPredicate=e,r[n]=e,n++},getLastWasPredicate:function(){return this.lastWasPredicate},resetLastPredicates:function(){this.lastLogicalOperator=null,this.lastWasPredicate=null,this.lastOperand=null,this.wasPredicateStartIndex=null,this.operandStartIndex=null},getLastWasPredicateStartIndex:function(){return this.wasPredicateStartIndex},setLastOrderBy:function(e,s){this.orderByStartIndex=null===e?s.getMaxTokenStringIdx():s.getTokenStringIdx()-e.length,this.lastOrderBy=e,r[n]=e,t[n]={value:this.lastOrderBy,kind:"orderBy",startIndex:this.orderByStartIndex},n++},getLastOrderBy:function(){return this.lastOrderBy},getLastOrderByStartIndex:function(){return this.orderByStartIndex},resetLogicalOperators:function(){this.lastLogicalOperator=null,this.logicalOperatorStartIndex=null,this.needsLogicalOperator=null},setParseError:function(e){this.parseError=!0,this.parseErrorMsg=e},getParseError:function(){return this.parseError},getParseErrorMsg:function(){return this.parseErrorMsg},setNeedsNothing:function(){this.needsOperator=!1,this.needsOperand=!1,this.needsLogicalOperator=!1,this.needsOrderBy=!1,this.needsField=!1,this.needsOrderByField=!1,this.needsOrderByDirection=!1,this.needsOpenParen=!1,this.needsListComma=!1,this.needsWasPredicate=null,this.needsPredicateOperand=null,this.mustBeOperatorOrPredicate=null,this.lastWasOperator=null},setOperandComplete:function(){this.operandComplete=!0},getOperandComplete:function(){return this.operandComplete},setInsideList:function(e){this.insideList=e},isInsideList:function(){return this.insideList},setMustBeOperatorOrPredicate:function(e){this.mustBeOperatorOrPredicate=e},getMustBeOperatorOrPredicate:function(){return this.mustBeOperatorOrPredicate},resetTerminalClause:function(){this.lastFieldName=null,this.fieldNameStartIndex=null,this.needsField=null,this.lastOperator=null,this.operatorStartIndex=null,this.needsOperator=null,this.lastOperand=null,this.operandStartIndex=null,this.needsOperand=null,this.operandComplete=null,this.needsOpenParen=null,this.needsListComma=!1,this.mustBeOperatorOrPredicate=null},init:function(){this.lastFieldName=null,this.fieldNameStartIndex=null,this.needsField=null,this.lastOperator=null,this.operatorStartIndex=null,this.needsOperator=null,this.lastOperand=null,this.operandStartIndex=null,this.needsOperand=null,this.lastLogicalOperator=null,this.logicalOperatorStartIndex=null,this.lastOrderByFieldName=null,this.lastOrderByFieldNameStartIndex=null,this.lastOrderByDirection=null,this.lastOrderByDirectionStartIndex=null,this.orderByStartIndex=null,this.lastOrderBy=null,this.needsOrderBy=null,this.needsOrderByField=null,this.needsOrderByDirection=null,this.operandComplete=null,this.needsOpenParen=null,this.needsListComma=null,this.wasPredicateStartIndex=null,this.lastWasPredicate=null,this.needsWasPredicate=null,this.needsPredicateOperand=null,this.mustBeOperatorOrPredicate=null,this.lastWasOperator=null,this.insideList=null}}}});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/jql-parse-token.js' */
define("jira/jql/jql-parse-token",["jira/jql/jql-parse-result"],function(t){"use strict";return function(){return{init:function(n){this.tokenStringIdx=0,this.tokenString=n,this.parseError=!1,this.parseErrorMsg=null,this.result=t(),this.result.init(),this.inParens=0,this.inListParens=0},consumeCharacter:function(){this.tokenStringIdx++},consumeCharacters:function(t){this.tokenStringIdx=this.tokenStringIdx+t},backTrackToIdx:function(t){this.tokenStringIdx=t,this.parseError=!1,this.parseErrorMsg=null,this.result.parseError=!1,this.result.parseErrorMsg=null},getTokenStringIdx:function(){return this.tokenStringIdx},currentCharacter:function(){return this.tokenStringIdx>=this.tokenString.length?null:this.tokenString.charAt(this.tokenStringIdx)},remainingString:function(){return this.tokenStringIdx>=this.tokenString.length?null:this.tokenString.substr(this.tokenStringIdx,this.tokenString.length)},getMaxTokenStringIdx:function(){return this.tokenString.length},isComplete:function(){return!!this.parseError||this.tokenStringIdx>=this.tokenString.length},setInParens:function(){this.inParens++},setOutOfParens:function(){0!==this.inParens&&this.inParens--},getInParens:function(){return 0!==this.inParens},setInListParens:function(){this.inListParens++},setOutOfListParens:function(){this.inListParens>0&&this.inListParens--},getInListParens:function(){return this.inListParens>0},setParseError:function(){this.parseError=!0;var t=this.tokenStringIdx-9<0?0:this.tokenStringIdx-9,n=this.tokenString.substring(t,this.tokenStringIdx-1);this.result.setParseError("..."+n+"^"+this.tokenString.substring(this.tokenStringIdx,this.tokenString.length))},getParseError:function(){return this.parseError},calcLastOperandStartIndex:function(){var t=this.getResult(),n=t.getLastOperator();if(n.length>0){var r=n.length-n.replace(/\s+/g,"").length;t.setLastOperandStartIndex(t.getLastOperatorStartIndex()+n.length+r+1)}},getParsedOperator:function(){var t=this.getResult();return t.getLastOperator().length>0?this.tokenString.substr(t.getLastOperatorStartIndex()):null},getResult:function(){return this.result}}}});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/jql-parser.js' */
define("jira/jql/jql-parser",["jira/jql/jql-grammar","jira/jql/jql-parse-token","jira/jql/operator-util","jquery","jira/jql/util"],function(e,t,r,s,a){return function(i){var n=i;return{parse:function(e){var r=t();return r.init(e),this.jql(r),r},orderByClause:function(t){var r=t.remainingString(),s=r.match(e.REGEXP_ORDER_BY);if(s){var a=r.substring(0,s[0].length);t.consumeCharacters(a.length),t.getResult().setLastOrderBy(a,t),t.isComplete()?(t.getResult().resetLogicalOperators(),t.setParseError()):(r=t.remainingString(),e.REGEXP_WHITESPACE.test(r)?(this.chewWhitespace(t),this.orderByFields(t)):(t.getResult().resetLogicalOperators(),t.setParseError()))}else t.consumeCharacters(r.length),t.getResult().setLastOrderBy(r,t),t.setParseError()},orderByFields:function(e){if(this.orderByField(e),this.chewWhitespace(e),e.isComplete())e.getResult().getNeedsOrderByField()||e.getResult().setLastOrderByDirection("",e);else{var t=e.remainingString();this.startsWithIgnoreCase(",",t)?(e.consumeCharacter(),this.orderByFields(e),this.chewWhitespace(e)):(t=e.remainingString(),null!==t&&e.consumeCharacters(t.length),e.getResult().setNeedsOrderByDirection(),e.getResult().setLastOrderByDirection(t,e),e.setParseError())}},orderByField:function(t){this.chewWhitespace(t);var r=this.fieldName(t);if(0!==r.length){t.getResult().setLastOrderByFieldName(r,t);var s=t.remainingString();t.isComplete()||e.REGEXP_COMMA_DELIMITER.test(s)?(t.getResult().setNeedsOrderByField(),this.chewWhitespace(t)):e.REGEXP_ASCENDING.test(s)?(this.chewWhitespace(t),t.consumeCharacters(3),t.getResult().setLastOrderByDirection("asc",t),t.getResult().setNeedsOrderByComma()):e.REGEXP_DESCENDING.test(s)?(this.chewWhitespace(t),t.consumeCharacters(4),t.getResult().setLastOrderByDirection("desc",t),t.getResult().setNeedsOrderByComma()):t.getResult().setNeedsOrderByDirection()}else t.getResult().setLastOrderByFieldName("",t),t.getResult().setNeedsOrderByField(),t.setParseError()},jql:function(e){this.orClause(e);var t=e.remainingString();this.startsWithIgnoreCase("ord",t)&&this.orderByClause(e),e.result.setInsideList(0!==e.inListParens)},orClause:function(t){for(;!t.isComplete()&&!this.startsWithIgnoreCase(")",t.remainingString());){this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("ord",r))break;if(t.getResult().getMustBeOperatorOrPredicate()?t.getResult().resetLastPredicates():(t.getResult().resetLogicalOperators(),this.andClause(t)),!t.isComplete()&&null===t.getResult().getLastLogicalOperator()){if(t.getResult().getNeedsWasPredicate()&&this.predicateClause(t),t.isComplete())return;if(r=t.remainingString(),this.startsWithIgnoreCase("ord",r))break;if(null!==r&&(e.REGEXP_ORS.test(r)||this.startsWithIgnoreCase("|",r)||this.startsWithIgnoreCase("||",r)))this.startsWithIgnoreCase("||",r)?(t.getResult().setLastLogicalOperator("||",t.getTokenStringIdx()),t.consumeCharacters(2)):e.REGEXP_ORS.test(r)?(t.getResult().setLastLogicalOperator("OR",t.getTokenStringIdx()),t.consumeCharacters(3)):(t.getResult().setLastLogicalOperator("|",t.getTokenStringIdx()),t.consumeCharacters(1)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField();else if(!this.startsWithIgnoreCase(")",r)||!t.getInParens()){this.chewWhitespace(t);var s,a=null===r?t.getMaxTokenStringIdx():t.getMaxTokenStringIdx()-r.length;null!=r&&(s=r.split(" "),t.getResult().setLastLogicalOperator(s[0],a),t.getResult().setLastWasPredicate(s[0],t),t.getResult().setNeedsLogicalOperator(t)),null==t.getResult().getLastWasOperator()?t.setParseError():null!=s&&(e.REGEXP_PREDICATE.test(s[0])?(t.getResult().setLastLogicalOperator(null),t.getResult().resetNeedsPredicateOperand()):(e.REGEXP_ANDS.test(r)&&(t.consumeCharacters(4),t.getResult().resetTerminalClause(),t.getResult().setNeedsField()),(t.isComplete()||1===s.length)&&t.setParseError()))}}}},andClause:function(t){if(this.chewWhitespace(t),this.notClause(t),!t.isComplete()&&null===t.getResult().getLastLogicalOperator()){this.chewWhitespace(t);var r=t.remainingString();null!==r&&(e.REGEXP_ANDS.test(r)||this.startsWithIgnoreCase("&",r)||this.startsWithIgnoreCase("&&",r))?(this.startsWithIgnoreCase("&&",r)?(t.getResult().setLastLogicalOperator("&&",t.getTokenStringIdx()),t.consumeCharacters(2)):this.startsWithIgnoreCase("&",r)?(t.getResult().setLastLogicalOperator("&",t.getTokenStringIdx()),t.consumeCharacters(1)):(t.getResult().setLastLogicalOperator("AND",t.getTokenStringIdx()),t.consumeCharacters(4)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField()):(t.getResult().setNeedsLogicalOperator(t),t.isComplete()&&t.getResult().setLastLogicalOperator(null,t.getMaxTokenStringIdx()))}},notClause:function(t){if(this.chewWhitespace(t),t.isComplete())this.terminalClause(t),t.setParseError();else{this.chewWhitespace(t);var r=t.remainingString();null!==r&&(e.REGEXP_NOTS.test(r)||this.startsWithIgnoreCase("!",r))?(t.getResult().needsField=!1,this.startsWithIgnoreCase("!",r)?(t.getResult().setLastLogicalOperator("!",t.getTokenStringIdx()),t.consumeCharacters(1)):(t.getResult().setLastLogicalOperator("NOT",t.getTokenStringIdx()),t.consumeCharacters(4)),t.getResult().resetTerminalClause(),t.isComplete()&&t.setParseError(),t.getResult().setNeedsField()):this.terminalClause(t)}},predicateClause:function(e){if(this.chewWhitespace(e),e.isComplete())e.setParseError();else{var t=e.remainingString(),r=t.split(/[\s(]+/);if(null!==t){if(e.getResult().setMustBeOperatorOrPredicate(!1),this.startsWithLogicalOperator(t)){if(1===r.length)return e.getResult().setLastWasPredicate(r[0],e),void e.setParseError();return}if(e.getResult().resetNeedsPredicateOperand(),e.consumeCharacters(r[0].length),e.getResult().setLastWasPredicate(r[0],e),1===r.length)return void e.setParseError();this.wasPredicateComplete(r[0])?(e.getResult().setNeedsPredicateOperand(),e.getResult().setLastOperand(null,e),this.predicateOperand(e)):e.setParseError()}}},predicateOperand:function(e){this.chewWhitespace(e);var t=this.collectPredicateOperands(e);null!=t&&""!=t||(e.getResult().setLastOperandStartIndex(e.getTokenStringIdx()),e.setParseError()),null!=e.remainingString()&&(e.getResult().resetNeedsPredicateOperand(),e.getResult().resetLastPredicates(),e.getResult().setMustBeOperatorOrPredicate(!0),e.getResult().setNeedsLogicalOperator(e),this.chewWhitespace(e))},collectPredicateOperands:function(e){"DURING"===e.getResult().getLastWasPredicate()&&e.getResult().setNeedsOpenParen(!0);var t=this.listOperand(e,!0);return 0===t.length?(t=this.functionOperand(e),0===t.length?t=this.singleValueOperand(e):e.getResult().setNeedsOpenParen(!1)):e.getResult().setNeedsOpenParen(!1),a.getUnquotedString(t)},terminalClause:function(t){t.getResult().resetTerminalClause(),this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("(",r))t.getResult().addToken("("),t.setInParens(),t.consumeCharacter(),this.orClause(t),this.chewWhitespace(t),r=t.remainingString(),this.startsWithIgnoreCase(")",r)?(t.getResult().addToken(")"),t.consumeCharacter(),t.setOutOfParens(),t.isComplete()&&(t.getResult().resetLogicalOperators(),t.getResult().resetLastPredicates())):t.setParseError();else if(this.field(t),t.isComplete())t.getResult().setNeedsField(),t.setParseError();else if(this.oper(t),t.isComplete()){if("was"===t.getResult().getLastOperator()||"was not"===t.getResult().getLastOperator())t.getResult().setNeedsOperandOrOperator();else{if("changed"===t.getResult().getLastWasOperator()){var s=t.currentCharacter();return void(null!==s&&e.REGEXP_SPACE_OR_ELSE.test(s)?t.getResult().setNeedsLogicalOperator(t):(t.getResult().resetLogicalOperators(),t.getResult().setNeedsOrderBy(!1)))}t.getResult().setNeedsOperator()}t.setParseError()}else{if("changed"===t.getResult().getLastWasOperator())return void t.getResult().setNeedsLogicalOperator(t);if(this.operand(t),t.getResult().getOperandComplete()){var a=t.getResult().getLastWasOperator();t.getResult().setNeedsNothing(),a&&t.getResult().setLastWasOperator(a)}else t.isComplete()&&!t.getResult().getNeedsListComma()&&t.getResult().setNeedsOperand()}},field:function(e){var t=this.fieldName(e);if(0!==t.length)e.getResult().setLastFieldName(t,e);else if(null===e.getResult().getLastFieldName()){var r=e.remainingString();e.getResult().setNeedsField(),e.getResult().setLastFieldName(r,e),e.setParseError()}},fieldName:function(t){this.chewWhitespace(t);var r=["issue","assignee","reporter","creator","watcher","project"],s=t.remainingString(),a=this.findStartsWith(r,s);if(a)return this.fieldProperty(a,t);if(this.startsWithIgnoreCase("cf",s)){var i=t.getTokenStringIdx(),n=t.remainingString();if(t.consumeCharacters(2),this.chewWhitespace(t),s=t.remainingString(),this.startsWithIgnoreCase("[",s)){t.consumeCharacter(),s=t.remainingString();var l=this.numberValue(t);if(0!==l.length&&(this.chewWhitespace(t),s=t.remainingString(),this.startsWithIgnoreCase("]",s)))return t.consumeCharacter(),n.substring(0,t.getTokenStringIdx()-i)}return t.setParseError(),n}var o=s&&s.match(e.REGEXP_GROUPED_CUSTOM_FIELD);if(o){var g=o[0];return t.consumeCharacters(g.length),g}return this.fieldOrFunctionName(t)},fieldProperty:function(e,t){t.consumeCharacters(e.length),this.chewWhitespace(t);var r=t.remainingString();if(this.startsWithIgnoreCase("[",r)){t.consumeCharacter();for(var s=[this.stringValue(t)];!t.parseError&&this.startsWithIgnoreCase(".",t.remainingString());)t.consumeCharacter(),s[s.length]=this.stringValue(t);if(0!==s.length&&0!==s[0].length&&!this.startsWithIgnoreCase(".",s[0])&&(this.chewWhitespace(t),r=t.remainingString(),this.startsWithIgnoreCase("]",r)&&(t.consumeCharacter(),r=t.remainingString(),!/\.\s*=/.test(r)))){for(var a=[this.stringValue(t)];!t.parseError&&this.startsWithIgnoreCase(".",t.remainingString());)t.consumeCharacter(),a[a.length]=this.stringValue(t);return e+"["+s.join(".")+"]"+a.join(".")}}return t.setParseError(),""},findStartsWith:function(e,t){var r=this.startsWithIgnoreCase,s=e.map(function(e){return e+".property"}),a=_.find(s,function(e){return r(e,t)});return a||null},oper:function(t){this.chewWhitespace(t);var s=t.remainingString(),a=this.getLongestOperatorMatch(s,e.jql_operators);if(null!==a){if(t.getResult().setLastOperator(a,t.getTokenStringIdx()),(r.isWasOperator(a)||r.isChangedOperator(a))&&t.getResult().setLastWasOperator(a),t.consumeCharacters(a.length),"in"===a||"is"===a||"is not"===a||"not in"===a||"was"===a||"was not"===a||"was in"===a||"was not in"===a){var i=t.currentCharacter();null===i||e.REGEXP_SPACE_OR_ELSE.test(i)||t.setParseError()}"was"===a?(t.getResult().setNeedsOperandOrOperator(),this.chewWhitespace(t),s=t.remainingString(),null!=s&&(e.REGEXP_NOTSTART.test(s)||e.REGEXP_INSTART.test(s))&&t.setParseError()):"was not"===a?(t.getResult().setNeedsOperandOrOperator(),this.chewWhitespace(t),s=t.remainingString(),null!=s&&e.REGEXP_INSTART.test(s)&&t.setParseError()):"changed"===a?t.getResult().setNeedsLogicalOperator(t):t.getResult().setNeedsOperand()}else if(null===t.getResult().getLastOperator()){var n=null===s?t.getMaxTokenStringIdx():t.getMaxTokenStringIdx()-s.length;t.getResult().setLastOperator(s,n),t.getResult().setNeedsOperator(),t.setParseError()}},operand:function(e){this.chewWhitespace(e),"in"!==e.getResult().getLastOperator()&&"not in"!==e.getResult().getLastOperator()&&"was not in"!==e.getResult().getLastOperator()&&"was in"!==e.getResult().getLastOperator()||e.getResult().setNeedsOpenParen(!0);var t=this.listOperand(e,!0);if(0===t.length?(t=this.functionOperand(e),0===t.length?t=this.singleValueOperand(e):e.getResult().setNeedsOpenParen(!1)):e.getResult().setNeedsOpenParen(!1),null===t||0===t.length){var r=e.remainingString();e.getResult().setLastOperand(r,e),e.getResult().setNeedsOperand(),e.setParseError()}return 0!==t.length?t:""},singleValueOperand:function(e){var t=this.stringValue(e);return 0!==t.length?(e.getResult().setLastOperand(t,e),"empty"!==t.toLowerCase()&&"null"!==t.toLowerCase()&&this.isReservedWord(t.toLowerCase())&&e.setParseError(),t):""},functionOperand:function(e){var t=e.getTokenStringIdx(),r=this.fieldOrFunctionName(e);this.chewWhitespace(e);var s=this.listOperand(e,!1);if(0!==r.length&&0!==s.length){var a=r+s;return e.getResult().setLastOperand(a,e),a}return e.backTrackToIdx(t),""},listOperand:function(e,t){if("("===e.currentCharacter()){e.consumeCharacter(),e.setInListParens();var r=this.collectListValues(e,t),s="("+r;return this.chewWhitespace(e),")"===e.currentCharacter()?(e.consumeCharacter(),e.setOutOfListParens(),s+=")","()"===s&&t&&e.getResult().setLastOperand(s,e),t&&(e.getResult().setOperandComplete(),e.getResult().resetNeedsPredicateOperand())):e.setParseError(),s}return""},collectListValues:function(e,t){t&&e.getResult().setNeedsOperand(),this.chewWhitespace(e);var r=t?this.operand(e):this.stringValue(e);if(0!==r.length){if(this.chewWhitespace(e)&&t&&e.getResult().setNeedsListComma(),","===e.currentCharacter()){e.consumeCharacter();var s=this.collectListValues(e,t);return 0===s.length&&e.setParseError(),r+", "+s}return r}return""},startsWithIgnoreCase:function(e,t){return!(null===t||null===e||t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},startsWithLogicalOperator:function(e){return null!==e&&(this.startsWithOr(e)||this.startsWithAnd(e)||this.startsWithNot(e)||this.startsWithBraces(e))},startsWithOr:function(e){return this.startsWithIgnoreCase("|",e)||this.startsWithIgnoreCase("||",e)||this.startsWithIgnoreCase("or",e)},startsWithAnd:function(e){return this.startsWithIgnoreCase("&",e)||this.startsWithIgnoreCase("&&",e)||this.startsWithIgnoreCase("and",e)},startsWithNot:function(e){return this.startsWithIgnoreCase("!",e)||this.startsWithIgnoreCase("not",e)},startsWithBraces:function(e){return this.startsWithIgnoreCase("(",e)||this.startsWithIgnoreCase(")",e)},chewWhitespace:function(t){for(var r=!1,s=t.currentCharacter();null!==s&&e.REGEXP_WHITESPACE.test(s);)t.consumeCharacter(),s=t.currentCharacter(),r=!0;return r},getLongestOperatorMatch:function(t,r){var s,a=null;if(this.startsWithIgnoreCase("is",t)&&(s=t.substring(2).match(e.REGEXP_SNOT),a=s?t.substring(0,s[0].length+2):"is"),this.startsWithIgnoreCase("was",t))s=t.substring(3).match(e.REGEXP_SNOT_IN),a=s?t.substring(0,s[0].length+3):"was";else if(this.startsWithIgnoreCase("not",t)){var i=t.substring(3).match(e.REGEXP_SIN);i&&(a=t.substring(0,i[0].length+3))}else for(var n=0;n<r.length;n++)this.startsWithIgnoreCase(r[n].value,t)&&(null===a||e.jql_operators[n].value.length>a)&&(a=e.jql_operators[n].value);return a},getValueMinusExtraWhitespace:function(t){if(null===t)return null;for(var r="",s=!0,a=t.split(""),i=0;i<a.length;i++){var n=a[i];e.REGEXP_WHITESPACE.test(n)?s&&(s=!1,r+=n):(s=!0,r+=n)}return r},fieldOrFunctionName:function(e){var t=this.stringValue(e);return'""'!==t&&"''"!==t||e.setParseError(),this.isReservedWord(t.toLowerCase())&&e.setParseError(),t},isReservedWord:function(e){return s.inArray(e,n)!==-1},stringValue:function(t){for(var r="",s=!1,a=!1,i=t.currentCharacter();null!==i&&(s||a||e.REGEXP_TOKEN_CHAR.test(i));){if(r+=i,t.consumeCharacter(),"\\"===i){if(i=t.currentCharacter(),null===i){t.setParseError();break}if(e.REGEXP_CHARS_TO_ESCAPE.test(i)){var n=t.remainingString();if(!e.REGEXP_UNICODE.test(n)){t.setParseError();break}}r+=i,t.consumeCharacter()}else{if(e.REGEXP_SPECIAL_CHAR.test(i)&&!s&&!a){t.setParseError();break}'"'!==i||a?"'"!==i||s||(a=!a):s=!s}i=t.currentCharacter()}return t.isComplete()&&(s||a)&&t.setParseError(),r},numberValue:function(t){var r="";this.chewWhitespace(t);for(var s=t.currentCharacter();null!==s&&e.REGEXP_NUMBER.test(s);)r+=s,t.consumeCharacter(),s=t.currentCharacter();return r},wasPredicateComplete:function(t){for(var r=!1,s=e.jql_changed_predicates.length,a=0;a<s;++a)if(t.toLowerCase()==e.jql_changed_predicates[a].value.toLowerCase()){r=!0;break}return r}}}});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/operator-util.js' */
define("jira/jql/operator-util",function(){"use strict";var n={};return n.isListSupportingOperator=function(n){return"in"===n||"not in"===n||"was not in"===n||"was in"===n},n.isEmptyOnlyOperator=function(n){return"is"===n||"is not"===n},n.isWasOperator=function(n){return"was"===n||"was in"===n||"was not in"===n||"was not"===n},n.isChangedOperator=function(n){return"changed"===n},n.isHistoryOperator=function(r){return n.isWasOperator(r)||n.isChangedOperator(r)},n});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/jql/util.js' */
define("jira/jql/util",["jira/jql/jql-grammar","wrm/context-path"],function(e,t){"use strict";var a={},n=t()+"/images/icons/autocomplete/",o={Checkboxes:"Checkbox",Date:"Date",Dropdown:"Dropdown",Labels:"Labels",Number:"Number",Paragraph:"Paragraph",People:"People","Short text":"Short text","Time stamp":"Time stamp","Radio Buttons":"Radio","Project Picker (single project)":"Project picker","Version Picker (multiple versions)":"Version picker (multi)","Version Picker (single version)":"Version picker (single)","User Picker (single user)":"User picker (single)","URL Field":"URL","Select List (multiple choices)":"Select list (multiple choices)","User Picker (multiple users)":"User picker (multi)","Approvers List":"Approvers List","Group Picker (multiple groups)":"Group picker (multi)","Group Picker (single group)":"Group picker (single)","Select List (cascading)":"Select list (cascading)",Assets:"Assets","Date of first response":"Date of first response","Days since last comment":"Days since last comment","Domain of Reporter":"Domain of reporter","Domain of Assignee":"Domain of assignee","Number of attachments":"Number of attachments","Last public comment date":"Last public comment date","Last commented by a User Flag":"Last commented by a User Flag","Username of last updater or commenter":"Username of last updater or commenter","Number of comments":"Number of comments","Participants of an issue":"Participants of an issue",Team:"Team","Time in Status":"Time in status"},l={Checkboxes:n+"Checkbox.svg",Date:n+"Date.svg",Dropdown:n+"Dropdown.svg",Labels:n+"Label.svg",Number:n+"Number.svg",Paragraph:n+"Paragraph.svg",People:n+"People.svg","Short text":n+"Short-text.svg","Time stamp":n+"Time-stamp.svg"},r=/^"?(.+)\[(.+)\]"?$/,i=/^"?cf\[(\d+)\]"?$/;return a.extractFieldTypeInformation=function(e){var t=i.exec(e);if(t)return null;var a=r.exec(e);if(!a)return null;var n=a[2];return{name:o[n]||null,icon:l[n]||null}},a.isCollapsedField=function(e){return r.test(e)},a.htmlEscape=function(e){if(null==e)return null;for(var t="",a=e.split(""),n=0;n<a.length;n++)t+="<"===a[n]?"&lt;":">"===a[n]?"&gt;":"&"===a[n]?"&amp;":'"'===a[n]?"&quot;":a[n];return t},a.stripEscapeCharacters=function(t){if(null==t)return t;for(var a="",n=t.split(""),o=0;o<n.length&&("\\"!==n[o]||e.REGEXP_UNICODE.test(t.substring(o,t.length))||(o++,!(o>=t.length)));o++)a+=n[o];return a},a.equalsIgnoreCase=function(e,t){return null===e&&null===t||null!==e&&null!==e&&e.toLowerCase()===t.toLowerCase()},a.startsWithIgnoreCaseNullsMeanAll=function(e,t){return null===t||null===e||!(t.length<e.length)&&e.toLowerCase()==t.substr(0,e.length).toLowerCase()},a.startsWithNotEqualsIgnoreCaseNullMeansAll=function(t,a){if(null===a||null===t)return!0;if(a.length<t.length)return!1;var n=t.toLowerCase()==a.substr(0,t.length).toLowerCase();if(n){var o=null;return o=e.REGEXP_FIELD_NAME.test(a.substr(t.length,a.length))?a.substr(0,t.length):a,t.toLowerCase()!=o.toLowerCase()}return!1},a.getUnquotedString=function(e){var t=null!=e&&e.length>=3&&"\\"!==e.charAt(e.length-2);return null!=e&&'"'===e.charAt(0)?(e=e.substring(1,e.length),'"'===e.charAt(e.length-1)&&t&&(e=e.substring(0,e.length-1))):null!=e&&"'"===e.charAt(0)&&(e=e.substring(1,e.length),"'"===e.charAt(e.length-1)&&t&&(e=e.substring(0,e.length-1))),e},a});;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/namespace.js' */
AJS.namespace("jira.widget.autocomplete.JQL",null,require("jira/autocomplete/jql-autocomplete")),AJS.namespace("JIRA.JQLAutoComplete",null,require("jira/autocomplete/jql-autocomplete")),AJS.namespace("JIRA.JQLAutoComplete.MyParser",null,require("jira/jql/jql-parser")),AJS.namespace("JIRA.JQLAutoComplete.ParseResult",null,require("jira/jql/jql-parse-result")),AJS.namespace("JIRA.JQLAutoComplete.Token",null,require("jira/jql/jql-parse-token"));;
;
/* module-key = 'jira.webresources:jqlautocomplete', location = '/includes/jira/autocomplete/initJQLAutoComplete.js' */
!function(){"use strict";var e=require("jira/autocomplete/jql-autocomplete"),r=require("jira/jql/jql-parser"),t=require("jira/util/forms"),n=require("jquery");n(function(){n(".jql-autocomplete-params").each(function(){var i={};n(this).find("input").each(function(){var e=n(this);i[e.attr("id")]=e.val()});var l=JSON.parse(n("#jqlFieldz").text()),o=JSON.parse(n("#jqlFunctionNamez").text()),a=JSON.parse(n("#jqlReservedWordz").text()),u=function(){var e=require("jira/featureflags/feature-manager");return e.isFeatureEnabled("jira.jql.autoselectfirst")},s=e({fieldID:"jqltext",parser:r(a),queryDelay:.65,jqlFieldNames:l,jqlFunctionNames:o,minQueryLength:0,allowArrowCarousel:!0,autoSelectFirst:u(),errorID:"jqlerrormsg"}),d=n("#jqltext");d.unbind("keypress",t.submitOnEnter).keypress(function(e){if(null===s.dropdownController||!s.dropdownController.displayed||s.selectedIndex<0)return!(13===e.keyCode&&!e.ctrlKey&&!e.shiftKey)||(n("#jqlform").submit(),!1)}),s.buildResponseContainer(),s.parse(d.text()),s.updateColumnLineCount(),d.click(function(){s.dropdownController.hideDropdown()})})})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-release-page-assets', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseVersionDialog.js' */
GH.Dialogs.ReleaseVersionDialog={},GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED="versionReleased",GH.Dialogs.ReleaseVersionDialog.dialog=void 0,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.ReleaseVersionDialog.analytics=new e("gh.release")}(),GH.Dialogs.ReleaseVersionDialog.showDialog=function(e,a){GH.Dialog.dim(),GH.Ajax.get({url:"/release/model.json",data:{rapidViewId:e,columnId:a}},"showReleaseVersionDialog").done(GH.Dialogs.ReleaseVersionDialog.renderDialog).fail(GH.Dialog.undim)},GH.Dialogs.ReleaseVersionDialog.renderDialog=function(e){_.each(e.projectIssueDetails,function(e){e.name=AJS.escapeHTML(String(e.name))});var a=GH.Dialogs.ReleaseVersionDialog.dialog=GH.Dialog.create({width:500,height:380,id:"ghx-dialog-release",onCancelFn:function(){GH.Dialogs.ReleaseVersionDialog.dialog=void 0,GH.Dialog.triggerHideEvent(),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel",e.projectIssueDetails.length)},analyticsPageName:"releaseNewVersionModal"});AJS.$("#"+a.id).addClass("ghx-dialog"),a.addHeader("Release"),a.addPanel("","panel"),a.getCurrentPanel().html(GH.tpl.dialogs.releaseversion.renderReleaseDialog({model:e})),a.addButton("Release",function(){GH.Dialogs.ReleaseVersionDialog.release(e),GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.RELEASE_VERSION)},"aui-button aui-button-primary"),a.addCancel("Cancel",function(){a.cancel()}),AJS.$(".aui-dialog").addClass("ghx-dialog");new Calendar;Calendar.setup({firstDay:0,inputField:"ghx-release-date",button:"ghx-release-date_trigger_c",align:"Tl",singleClick:!0,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers}),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start",e.projectIssueDetails.length),a.show(),GH.Dialog.Spinner.hide(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.ReleaseVersionDialog.release=function(e){GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete",e.projectIssueDetails.length);var a=GH.Dialogs.ReleaseVersionDialog.dialog;a.disableControls(),a.showSpinner(),GH.Ajax.post({url:"/release",data:{versionName:AJS.$("#ghx-release-name").val(),releaseDate:AJS.$("#ghx-release-date").val(),description:AJS.$("#ghx-release-desc").val(),rapidViewId:e.rapidViewId,columnId:e.columnId},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date_trigger_c"}}).done(function(e){var a=GH.Dialogs.ReleaseVersionDialog.dialog;a&&(a.dispose(),GH.Dialog.triggerHideEvent(),GH.Dialogs.ReleaseVersionDialog.dialog=void 0),GH.Notification.showSuccess(e.success.message),AJS.$(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED)}).fail(function(){var e=GH.Dialogs.ReleaseVersionDialog.dialog;e&&(e.hideSpinner(),e.enableControls())})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-release-page-assets', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseVersionDialog.soy' */
// This file was automatically generated from ReleaseVersionDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.releaseversion.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.releaseversion == 'undefined') { GH.tpl.dialogs.releaseversion = {}; }


GH.tpl.dialogs.releaseversion.renderReleaseDialog = function(opt_data, opt_ignored) {
  var output = '<div id="version-new">';
  if (opt_data.model.projectIssueDetails.length > 0) {
    output += '<ul id="ghx-release-navigator">';
    var projectList7 = opt_data.model.projectIssueDetails;
    var projectListLen7 = projectList7.length;
    for (var projectIndex7 = 0; projectIndex7 < projectListLen7; projectIndex7++) {
      var projectData7 = projectList7[projectIndex7];
      output += '<li><a title="' + soy.$$escapeHtml('View in Issue Navigator') + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/GHReleaseIssueNavigator.jspa?projectId=' + soy.$$escapeHtml(projectData7.id) + '&rapidViewId=' + soy.$$escapeHtml(opt_data.model.rapidViewId) + '&columnId=' + soy.$$escapeHtml(opt_data.model.columnId) + '">' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|2#{0} issues}',projectData7.issueCount)) + '</a> ' + soy.$$filterNoAutoescape(AJS.format('will be released from \x3cstrong\x3e{0}\x3c/strong\x3e',projectData7.name)) + '</li>';
    }
    output += '</ul>';
  }
  output += '<form action="#" class="aui"><fieldset><div class="field-group"><label for="ghx-release-name">' + soy.$$escapeHtml('Version name') + '</label><input id="ghx-release-name" type="text" class="text"><div id="query-results"></div></div><div class="field-group"><label for="ghx-release-date">' + soy.$$escapeHtml('Release date') + '</label><input type="text" id="ghx-release-date" value="' + soy.$$escapeHtml(opt_data.model.defaultReleaseDate) + '" class="text"><span id="ghx-release-date_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar">&nbsp;</span></div><div class="field-group"><label for="ghx-release-desc">' + soy.$$escapeHtml('Description') + '</label><textarea id="ghx-release-desc" rows="4" class="textarea"></textarea></div></fieldset></form></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.releaseversion.renderReleaseDialog.soyTemplateName = 'GH.tpl.dialogs.releaseversion.renderReleaseDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-release-page-assets', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseExistingVersionDialog.js' */
define("jira-agile/rapid/ui/dialog/release-existing-version-dialog",["jquery","underscore","jira/projects/release/version-adapter","jira/projects/release/submit-model","jira-project-config/utils","jira-agile/rapid/ajax","jira/analytics/web-client","jira/container-api"],function(e,s,i,o,n,a,r,t){"use strict";function l(e){var s=g.get(e);return s&&s.get("project")&&s.get("project").name}var g,d=JIRA.Admin.Version.ReleaseForm,u=GH.Notification,c=Backbone.Collection.extend({model:o}),v={};v.init=function(){var e=GH.VersionController.getVersionModel(),i=e.getAllVersions();AJS.params.dateFormat=GH.TimeFormat.dateFormat,g=new c,s.each(i,function(e){var s=new o(e);g.add(s)})},v.show=function(e){a.get({url:"/release/existingVersionModel.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),versionId:e}}).done(function(s){s.hasIssueOutOfScope?v.showGoToReleaseHubDialog(e,"This version has issues that are not included in the board. We recommend using the Release Hub instead."):s.hasIssueWithComplexMapping?v.showGoToReleaseHubDialog(e,"This version has issues with potential problems. We recommend using the Release Hub instead."):(v.showReleaseExistingDialog(e,s),r.sendPageEvent("releaseExistingVersionModal"))})},v.showReleaseExistingDialog=function(o,a){var r=this;GH.Dialogs.ReleaseVersionDialog.analytics.trigger("start.existing");var t,u=function(s){if(s.moveUnfixedIssuesTo){var i=m(s.moveUnfixedIssuesTo);p(AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e released. The unresolved {1,choice,1#issue|1\u003cissues} are now in \u003cstrong\u003e{2}\u003c/strong\u003e.",t.versionName,t.issueCount,i))}else p("Version released");e(GH).trigger(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED),GH.Dialogs.ReleaseVersionDialog.analytics.trigger("complete.existing")},c=function(e){s.isEmpty(e.errorMessages)||(t.hide(),f(t.versionName))},v=new i(g.get(o));v.on(i.RELEASE_SUCCESS_EVENT,u),v.on(i.RELEASE_ERROR_EVENT,c),t=n.openDialogForRow(d,v,"version-release-dialog"),t.onContentReady(h.bind(t,a.hasIssueInAnotherUnreleasedVersion,l(o))),e(t).on("Dialog.hide",function(){r.cancelled&&GH.Dialogs.ReleaseVersionDialog.analytics.trigger("cancel.existing")})},v.showGoToReleaseHubDialog=function(e,s){var i=GH.Dialog.create({width:400,height:200,analyticsPageName:"releaseHubRedirectModal"}),o=GH.VersionController.getVersionModel(),n=o.getVersion(e);i.addHeader(AJS.format("Release version: {0}",n.name)),i.addPanel("","panel"),i.getCurrentPanel().html(s),i.addButton("Go to Release Hub",function(){var s=a.CONTEXT_PATH+"/projects/"+n.project.key+"/versions/"+e;t.navigate(s,function(){window.location.href=s})}),GH.Dialog.addCancelButton(i),i.show()};var m=function(e){var s=g.get(e);return s&&s.get("name")},f=function(e){var s={};s.message=AJS.format("\u003cstrong\u003e{0}\u003c/strong\u003e can\'\'t be released at this time. Please refresh your browser and try again.",e),u.showErrors({errors:[s]})},p=function(e){u.showSuccess(e)},h=function(s,i){this.issuesCount=this.$form.find('input[name="issues-count"]').attr("value"),this.versionName=this.$form.find('input[name="version-name"]').attr("value");var o=this.$form.find("#project-config-version-release-form-unresolved-ignore-paragraph");o&&o.before(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.invisibleIssuePartial({issuesCount:this.issuesCount,versionName:this.versionName})));var n=this.$form.find("#project-config-version-release-form-unresolved-ignore-label");n.length&&(s?(e("#project-config-version-release-form-unresolved-message").after(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.issueUnreleasedVersionVisible())),n.append(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.mayRemoveUnresolvedIssues({issuesCount:this.issuesCount,versionName:this.versionName})))):n.append(AJS.$(GH.tpl.dialogs.ReleaseExistingVersionDialog.willRemoveUnresolvedIssues({versionName:this.versionName}))));var a=this.$form.find("#project-config-version-release-form-all-issues-resolved strong");a.length&&"undefined"===a.text()&&a.text(i)};return v});;
;
/* module-key = 'com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload', location = 'jira-attachment-module/jira-attachments.js' */
!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(1),o=r(i),a=n(78),s=r(a),u=n(79),c=r(u),l=n(84),f=r(l),d=n(86),h=r(d),p=n(87),v=r(p),m=n(90),y=r(m),b=n(4),g=r(b),_=n(91),w=r(_),x=n(9),k=r(x);g.default.areAttachmentsEnabled()&&((0,w.default)(),k.default.install(),h.default.registerAttachmentMenuHandlerFactory(c.default),h.default.registerBrowseLinkHandlerFactory(c.default),h.default.registerAttachmentsZoneCreator(o.default),h.default.registerTemporaryAttachmentCreatorFactory(f.default),h.default.registerTemporaryAttachmentZoneCreator(s.default),h.default.registerTemporaryBinaryUploadHandler(v.default),h.default.registerConnectedTemporaryBinaryUploadHandler(y.default))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(16),a=r(o),s=n(10),u=r(s),c=n(20),l=r(c);t.default=function(e){var t="view-issue/drop-zone",n=(0,i.dropzone)(e).then(function(e){return e.on("drop",function(){a.default.triggerAttachRequested("viewIssueDropZone")}),e}),r=!1;return{activate:function(){return n.then(function(e){r||(r=!0,e.activate(),u.default.publish("upload/switch-context",{name:t}))})},deactivate:function(){return n.then(function(e){r&&(e.deactivate(),r=!1)})},drop:function(){return n.catch(function(e){a.default.triggerInitialisationException((0,l.default)(e)),u.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.connectedTemporaryBinary=t.binary=t.dropzone=t.popup=t.browser=t.temporaryAttachmentDropzone=t.temporaryAttachmentPopup=t.temporaryAttachmentBrowser=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(3),a=r(o),s=n(16),u=r(s),c=n(17),l=r(c),f=n(25),d=n(20),h=r(d),p=n(77),v=n(19),m=r(v),y="user_token_fetch_fail",b=3e4,g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.default.getApiUrl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.default.authProvider,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.default.getUploadParameters,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:p.connectToIssueChanges;return n().then(function(t){m.default.mark("attachments.media.components."+e+".credentials.received");var n=i({},{apiUrl:t},{authProvider:r});return n}).then(function(n){return(0,f.MediaPicker)(e,n,t)}).then(function(t){return m.default.mark("attachments.media.components."+e+".component.created"),t}).then(p.connect).then(s).then(function(e){return o().then(function(t){return e.setUploadParams(t)}),e})}},_=function(e){return new Promise(function(t,n){var r=l.default.schedule(function(){u.default.triggerInitializationTimeout(),n({message:"Initialisation Timeout",logged:!0})},b);e.on("ready",function(){m.default.mark("attachments.media.components.popup.ready"),l.default.cancel(r),u.default.triggerPopupInitialized(),u.default.triggerPopupMetrics(),t(e)}),e.on("upload-error",function(t){var i=t.error;i.logged=!0,i.name===y?(u.default.triggerUserNotLoggedIn(),m.default.mark("attachments.media.components.popup.user.not.logged"),l.default.cancel(r),e.teardown(),n(i)):u.default.triggerPopupError((0,h.default)(i))})})},w=g("browser",{multiple:!0}),x=function(e){return g("popup",{userAuthProvider:e})().then(_)},k=function(e){return g("dropzone",{headless:!0,container:e})()},A=(t.temporaryAttachmentBrowser=function(e){return function(){return w(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)}},t.temporaryAttachmentPopup=function(e){return function(t){return g("popup",{userAuthProvider:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges).then(_)}},t.temporaryAttachmentDropzone=function(e,t){return g("dropzone",{headless:!0,container:t})(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)},function(e){return a.default.getApiUrl().then(function(t){var n=i({},{apiUrl:t},{authProvider:function(){return a.default.temporaryAuthProviderGetter(e)}});return n}).then(function(e){return(0,f.MediaPicker)("binary",e)}).then(function(t){return a.default.getTemporaryAttachmentUploadParameters(e).then(function(e){return t.setUploadParams(e),t})})}),S=function(e){return g("binary")(a.default.getApiUrl,a.default.temporaryAuthProvider,a.default.getTemporaryAttachmentUploadParameters.bind(null,e),p.connectToProjectChanges)};t.browser=w,t.popup=x,t.dropzone=k,t.binary=A,t.connectedTemporaryBinary=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(4),s=r(a),u=n(8),c=r(u),l=n(9),f=r(l),d=n(11),h=r(d),p=n(16),v=r(p),m=n(20),y=r(m),b=n(23),g=r(b),_=n(7),w=r(_);n(24);var x=(0,c.default)(),k=function(e){return e.ok?e.json():e.text().then(function(t){t=t||"Unexpected error",t="Credentials request failure: "+t+" (http status code: "+e.status+")";var n=new Error(t);throw n.description=t,n})},A=function(e){return[x+"/rest/api/2/attachment/upload/issue/"+e+"/credentials",{credentials:"same-origin"}]},S=function(e){return[x+"/rest/api/2/attachment/upload/project/"+e+"/credentials",{credentials:"same-origin"}]},P=function(e,t){return[x+"/rest/api/2/attachment/upload/issue/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t}),headers:{"Content-Type":"application/json"}}]},O=function(e,t,n){return[x+"/rest/api/2/attachment/upload/project/"+e,{credentials:"same-origin",method:"POST",body:JSON.stringify({fileId:t,formToken:n}),headers:{"Content-Type":"application/json"}}]},I=function(){return new Request(x+"/rest/internal/latest/media/user/credentials",{credentials:"same-origin"})},E={fetchMetadata:!1,autoFinalize:!0},j=function(e){return Promise.resolve(e).then(F).then(k).then(function(e){var t=e.token,n=e.targetCollection,r=e.tokenDurationInMins;return o({},{token:t,targetCollection:n},isNaN(r)?{}:{tokenDurationInMins:r})})},T=function(e){return Promise.resolve(e).then(fetch).then(k).then(function(e){var t=e.id,n=e.token,r=e.tokenDurationInMins;return o({},{clientId:t,token:n},isNaN(r)?{}:{tokenDurationInMins:r})})},C=function(e){return 60*((e.tokenDurationInMins||10)-1)*1e3},M=(0,g.default)(function(e){return Promise.resolve(e).then(A).then(j)},C),U=(0,g.default)(function(e){return Promise.resolve(e).then(S).then(j)},C),L=(0,g.default)(function(e){return Promise.resolve(e).then(I).then(T)},C),F=function(e){var t=i(e,2),n=t[0],r=t[1];return fetch(n,r)},R=w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiClientId)return e.apiClientId;throw new Error("Media clientId is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve clientId",description:(0,y.default)(e)})})}),N=function(e){return R().then(function(t){return U.get(e).then(function(e){return{clientId:t,token:e.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})};t.default={getClientId:R,getApiUrl:w.default.memoize(function(){return new Promise(function(e){e(s.default.getMediaCredentials())}).then(function(e){if(e&&e.apiUrl)return e.apiUrl;throw new Error("Media apiUrl is missing or have unexpected format")}).catch(function(e){return Promise.reject({name:"Could not retrieve apiUrl",description:(0,y.default)(e)})})}),authProvider:function(){return R().then(function(e){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(t){return{clientId:e,token:t.token}})}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},userAuthProvider:function(){return Promise.resolve("userAuth").then(L.get).catch(function(e){v.default.triggerUserAuthFetchFailed((0,y.default)(e))})},temporaryAuthProvider:function(){return f.default.getProjectContext().then(function(e){return N(e)}).catch(function(e){v.default.triggerTokenFetchFailed((0,y.default)(e))})},temporaryAuthProviderGetter:N,getUploadParameters:function(){return h.default.getIssueId().then(function(e){return M.get(e)}).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},createAttachment:function(e,t){return Promise.resolve(P(e,t)).then(F).then(k)},createTemporaryAttachment:function(e,t,n){return Promise.resolve(O(e,t,n)).then(F).then(k)},getTemporaryAttachmentUploadParameters:function(e){return Promise.resolve(e).then(U.get).then(function(e){return o({},E,{collection:e.targetCollection})}).catch(function(e){return v.default.triggerUploadParametersFetchFailed((0,y.default)(e)),E})},reset:function(){M.clear()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),o=r(i),a=n(6),s=r(a),u=n(7),c=r(u),l="com.atlassian.jira.jira-attachment-plugin:integrate-attachment-upload.integration-configuration",f=["\\","/",'"',":","?","*","<","|",">"],d=o.default.getWRM("upload-limit")||1/0,h=o.default.getWRM("thumbnail-mime-types"),p=c.default.memoize(function(){return s.default.claim(l)});t.default={getInvalidChars:function(){return f},getMaxFileSize:function(){return d},getThumbnailMimeType:function(){return h},getMediaCredentials:function(){var e=p(),t=e.apiUrl,n=e.apiClientId;return{apiUrl:t,apiClientId:n}},areAttachmentsEnabled:function(){return p().attachmentsEnabled===!0}}},function(e,t){e.exports=require("dndattachment/util/Configuration")},function(e,t){e.exports=require("wrm/data")},function(e,t){e.exports=require("underscore")},function(e,t){e.exports=require("wrm/context-path")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a={uploadContext:null,projectId:null};t.default={getProjectContext:function(){return a.projectId?Promise.resolve(a.projectId):Promise.reject(new Error("Project id wasn't set"))},getUploadContextName:function(){return a.uploadContext&&a.uploadContext.name},getUploadContextSettings:function(){return a.uploadContext&&a.uploadContext.uploadSettings},install:function(){o.default.subscribe("upload/switch-context",function(e){a.uploadContext=e}),o.default.subscribe("project/changed",function(e){a.projectId=e})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Map;t.default={subscribe:function(e,t){n.has(e)||n.set(e,[]),n.get(e).push(t)},publish:function(e,t){n.has(e)&&n.get(e).forEach(function(e){e(t)})},unsubscribe:function(e){n.forEach(function(t){for(var n=0,r=t.length;n<r;n++)t[n]===e&&(t.splice(n,1),n--)})},reset:function(){n=new Map}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(10),o=r(i),a=n(12),s=r(a),u=n(13),c=r(u),l=n(14),f=r(l),d=n(15),h=r(d),p=2e3,v=function(){return new Promise(function(e,t){var n=s.default.getSelectedIssueId(),r=void 0;n?e(n):r=setInterval(function(){n=s.default.getSelectedIssueId(),n&&(clearInterval(r),e(n))},p)})},m=void 0;c.default.bind(f.default.ISSUE_REFRESHED,function(e,t){m=Promise.resolve(t),o.default.publish("issue/changed",t)}),t.default={getIssueId:function(){return m=m||v()},getIssueKey:function(){return s.default.getSelectedIssueKey()},getIssuePermlink:function(){return h.default.get("viewissue-permlink")}}},function(e,t){e.exports=require("jira/issues/api")},function(e,t){e.exports=require("jira/util/events")},function(e,t){e.exports=require("jira/components/issueviewer/eventtypes")},function(e,t){e.exports=require("jira/util/data/meta")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(17),a=r(o),s=n(19),u=r(s),c=n(20),l=r(c),f=n(21),d=r(f),h=n(22),p=r(h),v={stopInitialising:function(e){this.initialising=!1,this.popupInitialised=e},startRequest:function(e){this.requestStartedTime=a.default.current(),this.source=e},getData:function(e){var t=e.error,n=e.fileSize,r=e.uploadId;return{msSinceLastUserAction:a.default.since(this.requestStartedTime),initialising:this.initialising,popupInitialised:this.popupInitialised,source:this.source,error:(0,d.default)(t),fileSize:n,uploadId:r}},reset:function(){this.initialising=!0,this.popupInitialised=!1,this.requestStartedTime=Number.MAX_VALUE}};v.reset();var m=function(e,t){return AJS.trigger("analytics",{name:e,data:t})},y=function(e,t){return m(e,v.getData(t||{}))},b=function(e,t){return m(e,i({},{source:v.source},t))};t.default={triggerPopupInitialized:function(){v.stopInitialising(!0),y("issue.attachment.media-picker.popup-initialized")},triggerUserNotLoggedIn:function(){v.stopInitialising(!1),y("issue.attachment.media-picker.user-not-logged")},triggerPopupError:function(e){y("issue.attachment.media-picker.popup-error",{error:e})},triggerGenericPopupInitialisationError:function(e){y("issue.attachment.media-picker.generic-popup-initialisation-error",{error:e})},triggerAttachRequested:function(e){v.startRequest(e);var t="issue.attachment.media-picker.attach-requested";y(t),p.default.trigger("legacy-gas-v2-event",t)},triggerPopupShown:function(){y("issue.attachment.media-picker.popup-shown")},triggerPopupFailedToShow:function(e){y("issue.attachment.media-picker.popup-failed-to-show",{error:e})},triggerAttachFileBrowserShown:function(){y("issue.attachment.media-picker.browse-shown")},triggerAttachFileBrowserFailedToShow:function(e){y("issue.attachment.media-picker.browse-failed-to-show",{error:e})},triggerInitialisationException:function(e){e=(0,l.default)(e),v.stopInitialising(!1),y("issue.attachment.media-picker.initialisation-exception",{error:e})},triggerFileUploadFinished:function(e){y("issue.attachment.media-picker.file-upload-finished",{uploadId:e})},triggerAttachmentCreatedInJIRA:function(e){y("issue.attachment.media-picker.attachment-created-in-jira",{uploadId:e})},triggerCantCreateAttachmentInJIRA:function(e,t){y("issue.attachment.media-picker.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerUploadStarted:function(e,t){y("issue.attachment.media-picker.upload-started",{uploadId:e,fileSize:t})},triggerUploadError:function(e,t){y("issue.attachment.media-picker.upload-error",{error:e,uploadId:t})},triggerUploadCancelled:function(e){y("issue.attachment.media-picker.upload-cancelled",{uploadId:e})},triggerUploadValidationFailed:function(e,t){y("issue.attachment.media-picker.upload-validation-failed",{error:e,uploadId:t})},triggerInitializationTimeout:function(){y("issue.attachment.media-picker.initialization-timeout")},triggerTokenFetchFailed:function(e){y("issue.attachment.media-picker.error.token-fetch",{error:e})},triggerUserAuthFetchFailed:function(e){y("issue.attachment.media-picker.popup-error.user-auth-fetch",{error:e})},triggerUploadParametersFetchFailed:function(e){y("issue.attachment.media-picker.error.upload-params-fetch",{error:e})},triggerUploadRequestedWhenNotInitialised:function(){y("issue.attachment.media-picker.upload-request.not-initialised")},triggerBrowserRequestedWhenNotInitialised:function(){y("issue.attachment.media-picker.upload-request.browser.not-initialised")},triggerTemporaryAttachmentCreatedInJIRA:function(e){b("issue.attachment.media-picker.temporary.attachment-created-in-jira",{uploadId:e})},triggerCantCreateTemporaryAttachmentInJIRA:function(e,t){b("issue.attachment.media-picker.temporary.cant-create-attachment-in-jira",{error:e,uploadId:t})},triggerPopupMetrics:function(){var e=i({"dom.loaded":u.default.getDomContentLoadedTiming()},u.default.getMarksForNamespace("attachments.media.components.popup"));AJS.trigger("analytics",{name:"issue.attachment.media-picker.popup-metrics",data:e})},getRequestIdentifier:function(){return v.requestIdentifier},reset:function(){v.reset()}}},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={current:function(){return Math.round(e&&e.performance&&e.performance.now())},since:function(e){return Math.round(this.current()-e)},schedule:function(e,t){return setTimeout(e,t)},cancel:function(e){clearTimeout(e)}}}).call(t,n(18))},function(e,t,n){(function(t){"use strict";e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(18))},function(e,t,n){(function(e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mark:function(t){return e&&e.performance&&e.performance.mark(t)},getMarksForNamespace:function(t){var n={};if(e&&e.performance){e.performance.getEntriesByType("mark").filter(function(e){return 0===e.name.indexOf(t)}).forEach(function(e){var t=e.name,r=e.startTime;return n[t]=parseInt(r,10)})}return n},getDomContentLoadedTiming:function(){var t=e&&e.performance&&e.performance.timing;return t?parseInt(t.domContentLoadedEventStart-t.navigationStart,10):0}}}).call(t,n(18))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r=function(e){return"undefined"!=typeof e},i=function(e){return r(e.config)&&r(e.config.headers)&&r(e.response)&&r(e.response.config)&&r(e.response.config.headers)};t.default=function(e){if(r(e.name)&&r(e.message))return e.toString();if(r(e.name)&&r(e.description))return e.name+": "+e.description;if(r(e.message))return e.message;if("string"==typeof e)return e;if(i(e)){var t=n({},e);return delete t.config.headers.Authorization,delete t.response.config.headers.Authorization,""+e}return""+e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return"string"==typeof e&&e.indexOf("Authorization")!==-1?"Error sanitized":e}},function(e,t){e.exports=require("jira/customevents/trigger-custom-event")},function(e,t){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1},n=new Map;return{get:function(i){if(!n.has(i)){var o=e(i).then(function(e){var o=t(e);return o&&setTimeout(function(){return r(n,i)},o),e}).catch(function(e){throw r(n,i),e});n.set(i,o)}return n.get(i)},clear:function(){n.clear()}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r=function(e,t){return e.has(t)&&e.delete(t)}},function(e,t){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=a(t);return t.readAsArrayBuffer(e),n}function u(e){var t=new FileReader,n=a(t);return t.readAsText(e),n}function c(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&g(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!_(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function d(e){var t=e.toUpperCase();return w.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=d(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function v(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function m(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var b=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=function(e){return e&&DataView.prototype.isPrototypeOf(e)},_=ArrayBuffer.isView||function(e){return e&&b.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},f.call(h.prototype),f.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];m.redirect=function(e,t){if(x.indexOf(t)===-1)throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=h,e.Response=m,e.fetch=function(e,t){return new Promise(function(n,r){var i=new h(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;n(new m(t,e))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&y.blob&&(o.responseType="blob"),i.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t,n){!function(e,t){for(var n in t)e[n]=t[n]}(t,function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="lib/",t(t.s=149)}([function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(159),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(61)("wks"),i=n(42),o=n(4).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(4),i=n(2),o=n(14),a=n(15),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,n){"use strict";function r(e){return"[object Array]"===k.call(e)}function i(e){return"[object ArrayBuffer]"===k.call(e)}function o(e){return"undefined"!=typeof FormData&&e instanceof FormData}function a(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer}function s(e){return"string"==typeof e}function u(e){return"number"==typeof e}function c(e){return void 0===e}function l(e){return null!==e&&"object"==typeof e}function f(e){return"[object Date]"===k.call(e)}function d(e){return"[object File]"===k.call(e)}function h(e){return"[object Blob]"===k.call(e)}function p(e){return"[object Function]"===k.call(e)}function v(e){return l(e)&&p(e.pipe)}function m(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams}function y(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function b(){return"undefined"!=typeof window&&"undefined"!=typeof document&&"function"==typeof document.createElement}function g(e,t){if(null!==e&&void 0!==e)if("object"==typeof e||r(e)||(e=[e]),r(e))for(var n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function _(){function e(e,n){"object"==typeof t[n]&&"object"==typeof e?t[n]=_(t[n],e):t[n]=e}for(var t={},n=0,r=arguments.length;n<r;n++)g(arguments[n],e);return t}function w(e,t,n){return g(t,function(t,r){e[r]=n&&"function"==typeof t?x(t,n):t}),e}var x=n(117),k=Object.prototype.toString;e.exports={isArray:r,isArrayBuffer:i,isFormData:o,isArrayBufferView:a,isString:s,isNumber:u,isObject:l,isUndefined:c,isDate:f,isFile:d,isBlob:h,isFunction:p,isStream:v,isURLSearchParams:m,isStandardBrowserEnv:b,forEach:g,merge:_,extend:w,trim:y}},function(e,t,n){(function(t,n){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
	 * @version   4.1.1
	 */
!function(t,r){e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function i(e){return"function"==typeof e}function o(e){V=e}function a(e){J=e}function s(){return void 0!==$?function(){$(c)}:u()}function u(){var e=setTimeout;return function(){return e(c,1)}}function c(){for(var e=0;e<q;e+=2)(0,X[e])(X[e+1]),X[e]=void 0,X[e+1]=void 0;q=0}function l(e,t){var n=arguments,r=this,i=new this.constructor(d);void 0===i[ee]&&T(i);var o=r._state;return o?function(){var e=n[o-1];J(function(){return I(o,i,e,r._result)})}():A(r,i,e,t),i}function f(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(d);return _(n,e),n}function d(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function v(e){try{return e.then}catch(e){return ie.error=e,ie}}function m(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function y(e,t,n){J(function(e){var r=!1,i=m(n,t,function(n){r||(r=!0,t!==n?_(e,n):x(e,n))},function(t){r||(r=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,k(e,i))},e)}function b(e,t){t._state===ne?x(e,t._result):t._state===re?k(e,t._result):A(t,void 0,function(t){return _(e,t)},function(t){return k(e,t)})}function g(e,t,n){t.constructor===e.constructor&&n===l&&t.constructor.resolve===f?b(e,t):n===ie?(k(e,ie.error),ie.error=null):void 0===n?x(e,t):i(n)?y(e,t,n):x(e,t)}function _(t,n){t===n?k(t,h()):e(n)?g(t,n,v(n)):x(t,n)}function w(e){e._onerror&&e._onerror(e._result),S(e)}function x(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&J(S,e))}function k(e,t){e._state===te&&(e._state=re,e._result=t,J(w,e))}function A(e,t,n,r){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ne]=n,i[o+re]=r,0===o&&e._state&&J(S,e)}function S(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)r=t[a],i=t[a+n],r?I(n,r,i,o):i(o);e._subscribers.length=0}}function P(){this.error=null}function O(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function I(e,t,n,r){var o=i(n),a=void 0,s=void 0,u=void 0,c=void 0;if(o){if(a=O(n,r),a===oe?(c=!0,s=a.error,a.error=null):u=!0,t===a)return void k(t,p())}else a=r,u=!0;t._state!==te||(o&&u?_(t,a):c?k(t,s):e===ne?x(t,a):e===re&&k(t,a))}function E(e,t){try{t(function(t){_(e,t)},function(t){k(e,t)})}catch(t){k(e,t)}}function j(){return ae++}function T(e){e[ee]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function C(e,t){this._instanceConstructor=e,this.promise=new e(d),this.promise[ee]||T(this.promise),H(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?x(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&x(this.promise,this._result))):k(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function U(e){return new C(this,e).promise}function L(e){var t=this;return new t(H(e)?function(n,r){for(var i=e.length,o=0;o<i;o++)t.resolve(e[o]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,n=new t(d);return k(n,e),n}function R(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[ee]=j(),this._result=this._state=void 0,this._subscribers=[],d!==e&&("function"!=typeof e&&R(),this instanceof z?E(this,e):N())}function D(){var e=void 0;if(void 0!==n)e=n;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=z}var B=void 0;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H=B,q=0,$=void 0,V=void 0,J=function(e,t){X[q]=e,X[q+1]=t,2===(q+=2)&&(V?V(c):Z())},W="undefined"!=typeof window?window:void 0,K=W||{},G=K.MutationObserver||K.WebKitMutationObserver,Y="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),Q="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,X=new Array(1e3),Z=void 0;Z=Y?function(){return function(){return t.nextTick(c)}}():G?function(){var e=0,t=new G(c),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():Q?function(){var e=new MessageChannel;return e.port1.onmessage=c,function(){return e.port2.postMessage(0)}}():void 0===W?function(){try{var e=r(209);return $=e.runOnLoop||e.runOnContext,s()}catch(e){return u()}}():u();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,re=2,ie=new P,oe=new P,ae=0;return C.prototype._enumerate=function(e){for(var t=0;this._state===te&&t<e.length;t++)this._eachEntry(e[t],t)},C.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===f){var i=v(e);if(i===l&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(n===z){var o=new n(d);g(o,e,i),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},C.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===te&&(this._remaining--,e===re?k(r,n):this._result[t]=n),0===this._remaining&&x(r,this._result)},C.prototype._willSettleAt=function(e,t){var n=this;A(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(re,t,e)})},z.all=U,z.race=L,z.resolve=f,z.reject=F,z._setScheduler=o,z._setAsap=a,z._asap=J,z.prototype={constructor:z,then:l,catch:function(e){return this.then(null,e)}},z.polyfill=D,z.Promise=z,z}()}()}).call(t,n(78),n(52))},function(e,t,n){var r=n(140)("wks"),i=n(141),o=n(13).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(10),i=n(92),o=n(63),a=Object.defineProperty;t.f=n(12)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(11);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){e.exports=!n(18)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(29);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(9),i=n(43);e.exports=n(12)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){e.exports={default:n(156),__esModule:!0}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(93),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(178),o=r(i),a=n(182),s=r(a),u=n(93),c=r(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,n){e.exports={default:n(187),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(110),i=n(25);t.handleError=function(e,t){var n=Error().stack||"",o=t||"",a=e+": "+o+" \n "+n;(new r.UserTracker).track()(new i.ErrorException(e,n,t)),console.error(a)}},function(e,t){e.exports={}},function(e,t,n){var r=n(66),i=n(59);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(19),s=r(a),u=n(20),c=r(u),l=n(0),f=r(l),d=n(1),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(t,n){(0,f.default)(this,e),this.prefix="files.mediapicker-web.",this.name=this.prefix+t,this.properties=n}return(0,h.default)(e,[{key:"toJSON",value:function(){return{name:this.name,properties:this.properties}}}]),e}();t.UserEvent=p;var v=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"library.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MediaPickerLoaded=v;var m=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"browser.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPBrowserLoaded=m;var y=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"dropzone.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPDropzoneLoaded=y;var b=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"cliboard.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPClipboardLoaded=b;var g=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.loaded",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupLoaded=g;var _=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.shown",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupShown=_;var w=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"popup.hidden",{}))}return(0,c.default)(t,e),t}(p);t.MPPopupHidden=w;var x=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.ended",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadEnded=x;var k=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.upload.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileUploadStarted=k;var A=function(e){function t(){return(0,f.default)(this,t),(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"file.processing.started",{}))}return(0,c.default)(t,e),t}(p);t.MPFileProcessingStarted=A;var S=function(e){function t(e,n,r){(0,f.default)(this,t);var i={alias:e,description:r,stacktrace:n};return(0,s.default)(this,(t.__proto__||(0,o.default)(t)).call(this,"files.mediapicker-web.library.exception.fired",i))}return(0,c.default)(t,e),t}(p);t.ErrorException=S},function(e,t){e.exports=n(26)},function(e,t,n){var r=n(55),i=n(138);e.exports=n(37)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(56);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){"use strict";var r=n(164)(!0);n(65)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(9).f,i=n(17),o=n(3)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){n(169);for(var r=n(4),i=n(15),o=n(23),a=n(3)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){var r=n(14),i=n(189),o=n(190),a=n(10),s=n(67),u=n(102),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(80),o=n(122),a=n(112),s=function(e,t){return o.checkWebpSupport().then(function(t){return e.accept=t?"image/webp,image/*,*/*;q=0.8":"image/*,*/*;q=0.8",e})},u=function(t,n,i,o){var u=r.__assign({},n,{"Content-Type":"application/json"});return i||(a.isAsapBasedAuth(t)?u["X-Issuer"]=t.asapIssuer:a.isClientBasedAuth(t)&&(u["X-Client-Id"]=t.clientId),u.Authorization="Bearer "+t.token),"image"===o?s(u):e.resolve(u)},c=function(t,n,i,o){var s={};return i&&(s.token=t.token,a.isClientBasedAuth(t)?s.client=t.clientId:a.isAsapBasedAuth(t)&&(s.issuer=t.asapIssuer)),e.resolve(r.__assign({collection:o},n,s))},l=function(e){return e=e||"json",{image:"blob",json:"json"}[e]};t.default=function(t){var n=t.preventPreflight,r=t.collectionName,o=t.config,a=o.authProvider,s=o.serviceHost;return function(t){var o=t.url,f=t.headers,d=t.params,h=t.responseType,p=t.method,v=t.data,m=a({collectionName:r}),y=function(t){return e.all([u(t,f,n,h),c(t,d,n,r)])},b=function(e){var t=e[0],n=e[1];return i.default({method:p||"get",url:o,baseURL:s,headers:t,params:n,data:v,responseType:l(h)})};return m.then(y).then(b).then(function(e){return e.data})}}}).call(t,n(7))},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(137)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports={}},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=d[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(u(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(u(r.parts[o],t));d[r.id]={id:r.id,refs:1,parts:a}}}}function r(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r],o=i[0],a=i[1],s=i[2],u=i[3],c={css:a,media:s,sourceMap:u};n[o]?n[o].parts.push(c):t.push(n[o]={id:o,parts:[c]})}return t}function i(e,t){var n=v(),r=b[b.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),b.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function o(e){e.parentNode.removeChild(e);var t=b.indexOf(e);t>=0&&b.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",i(e,t),t}function s(e){var t=document.createElement("link");return t.rel="stylesheet",i(e,t),t}function u(e,t){var n,r,i;if(t.singleton){var u=y++;n=m||(m=a(t)),r=c.bind(null,n,u,!1),i=c.bind(null,n,u,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=s(t),r=f.bind(null,n),i=function(){o(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(t),r=l.bind(null,n),i=function(){o(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function c(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=g(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function l(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function f(e,t){var n=t.css,r=t.sourceMap;r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var d={},h=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}},p=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,y=0,b=[];e.exports=function(e,t){t=t||{},void 0===t.singleton&&(t.singleton=p()),void 0===t.insertAt&&(t.insertAt="bottom");var i=r(e);return n(i,t),function(e){for(var o=[],a=0;a<i.length;a++){var s=i[a],u=d[s.id];u.refs--,o.push(u)}e&&n(r(e),t);for(var a=0;a<o.length;a++){var u=o[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete d[u.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){var r=n(59);e.exports=function(e){return Object(r(e))}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports=!0},function(e,t,n){var r=n(10),i=n(166),o=n(68),a=n(60)("IE_PROTO"),s=function(){},u=function(){var e,t=n(62)("iframe"),r=o.length;for(t.style.display="none",n(96).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(95),i=n(68);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(185),v=n(132),m=n(271),y=function(e){function t(e,n){var r=n.apiUrl,i=n.authProvider,a=n.uploadParams;(0,s.default)(this,t);var u=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return u.onFilesAdded=function(e){var t=e.files;u.emitUploadsStart(t)},u.onFileAdded=function(e){var t=e.file;u.emitUploadStart(t),t.raw&&t.type.match(/^image\//)&&m.default(t.raw).then(function(e){u.emitUploadPreviewUpdate(t,e)})},u.onFileUploading=function(e){var t=e.file,n=e.progress;u.emitUploadProgress(t,n)},u.onFileFinalizeReady=function(e){var t=e.file,n=e.finalize;u.emitUploadFinalizeReady(t,n)},u.onFileConverting=function(e){var t=e.file;u.emitUploadProcessing(t)},u.onFileConverted=function(e){var t=e.file,n=e.progress,r=e.metadata;u.emitUploadProgress(t,n),u.emitUploadEnd(t,r)},u.onUploadError=function(e){var t=e.file,n=e.error;u.emitUploadError(t,n)},u.uploadService=new p.UploadService(r,i,a||{}),u.uploadService.on("files-added",u.onFilesAdded),u.uploadService.on("file-added",u.onFileAdded),u.uploadService.on("file-uploading",u.onFileUploading),u.uploadService.on("file-finalize-ready",u.onFileFinalizeReady),u.uploadService.on("file-converting",u.onFileConverting),u.uploadService.on("file-converted",u.onFileConverted),u.uploadService.on("file-upload-error",u.onUploadError),u}return(0,h.default)(t,e),(0,c.default)(t,[{key:"cancel",value:function(e){this.uploadService.cancel(e)}},{key:"setUploadParams",value:function(e){this.uploadService.setUploadParams(e)}}]),t}(v.MPComponent);t.MediaLocalUpload=y},function(e,t,n){var r=n(31),i=n(3)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){e.exports={default:n(203),__esModule:!0}},function(e,t,n){var r=n(207),i=n(208),o=i;o.v1=r,o.v4=i,e.exports=o},function(e,t,n){"use strict";(function(t){e.exports="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this}).call(t,n(52))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function r(e,t){function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]]);return n}function o(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(t,n,r,i){return new(r||(r=e))(function(e,o){function a(e){try{u(i.next(e))}catch(e){o(e)}}function s(e){try{u(i.throw(e))}catch(e){o(e)}}function u(t){t.done?e(t.value):new r(function(e){e(t.value)}).then(a,s)}u((i=i.apply(t,n||[])).next())})}function c(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(a=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(o,n[1])).done)return a;switch(o=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,o=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],o=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function l(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function f(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function h(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function p(e){return this instanceof p?(this.v=e,this):new p(e)}function v(t,n,r){function i(t){f[t]&&(l[t]=function(n){return new e(function(e,r){d.push([t,n,e,r])>1||o(t,n)})})}function o(e,t){try{a(f[e](t))}catch(e){c(d[0][3],e)}}function a(t){t.value instanceof p?e.resolve(t.value.v).then(s,u):c(d[0][2],t)}function s(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),d.shift(),d.length&&o(d[0][0],d[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,f=r.apply(t,n||[]),d=[];return l={},i("next"),i("throw"),i("return"),l[Symbol.asyncIterator]=function(){return this},l}function m(e){function t(t,i){e[t]&&(n[t]=function(n){return(r=!r)?{value:p(e[t](n)),done:"return"===t}:i?i(n):n})}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof f?f(e):e[Symbol.iterator]()}t.__extends=r,n.d(t,"__assign",function(){return g}),t.__rest=i,t.__decorate=o,t.__param=a,t.__metadata=s,t.__awaiter=u,t.__generator=c,t.__exportStar=l,t.__values=f,t.__read=d,t.__spread=h,t.__await=p,t.__asyncGenerator=v,t.__asyncDelegator=m,t.__asyncValues=y;/*! *****************************************************************************
	Copyright (c) Microsoft Corporation. All rights reserved.
	Licensed under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of the
	License at http://www.apache.org/licenses/LICENSE-2.0

	THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
	KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
	WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
	MERCHANTABLITY OR NON-INFRINGEMENT.

	See the Apache Version 2.0 License for specific language governing permissions
	and limitations under the License.
	***************************************************************************** */
var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}}.call(t,n(7))},function(e,t,n){var r=n(86);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(28),i=n(276),o=n(277),a=Object.defineProperty;t.f=n(37)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var r=n(61)("keys"),i=n(42);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(4),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t,n){var r=n(11),i=n(4).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){"use strict";var r=n(44),i=n(5),o=n(94),a=n(15),s=n(17),u=n(23),c=n(165),l=n(32),f=n(91),d=n(3)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&w.next&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t,n){var r=n(31);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(64),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){t.f=n(3)},function(e,t,n){var r=n(42)("meta"),i=n(11),o=n(17),a=n(9).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(18)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},d=function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},h=function(e){return c&&p.NEED&&u(e)&&!o(e,r)&&l(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},function(e,t,n){var r=n(4),i=n(2),o=n(44),a=n(69),s=n(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t){},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";function r(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=i(t),this.reject=i(n)}var i=n(29);e.exports.f=function(e){return new r(e)}},function(e,t,n){var r=n(15);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){(function(r,i){var o;!function(a){function s(){this._events={},this._conf&&u.call(this,this._conf)}function u(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==a?e.maxListeners:p,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=p}function c(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,u.call(this,e)}function f(e,t,n,r){if(!n)return[];var i,o,a,s,u,c,l,d=[],h=t.length,p=t[r],v=t[r+1];if(r===h&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===p||"**"===p||n[p]){if("*"===p){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(d=d.concat(f(e,t,n[a],r+1)));return d}if("**"===p){(l=r+1===h||r+2===h&&"*"===v)&&n._listeners&&(d=d.concat(f(e,t,n,h)));for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!l&&(d=d.concat(f(e,t,n[a],h))),d=d.concat(f(e,t,n[a],r))):d=a===v?d.concat(f(e,t,n[a],r+2)):d.concat(f(e,t,n[a],r)));return d}d=d.concat(f(e,t,n[p],r+1))}if(s=n["*"],s&&f(e,t,s,r+1),u=n["**"])if(r<h){u._listeners&&f(e,t,u,h);for(a in u)"_listeners"!==a&&u.hasOwnProperty(a)&&(a===v?f(e,t,u[a],r+2):a===p?f(e,t,u[a],r+1):(c={},c[a]=u[a],f(e,t,{"**":c},r+1)))}else u._listeners?f(e,t,u,h):u["*"]&&u["*"]._listeners&&f(e,t,u["*"],h);return d}function d(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,o=e.shift();o!==a;){if(i[o]||(i[o]={}),i=i[o],0===e.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(t),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,c.call(this,i._listeners.length,o))):i._listeners=t,!0;o=e.shift()}return!0}var h=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},p=10;l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){e!==a&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,r){function i(){return 0==--t&&o.off(e,i),n.apply(this,arguments)}var o=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return i._origin=n,this._on(e,i,r),o},l.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,i,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,o,u,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,a){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return i.resolve([!1]);var t,n,r,o,a,u=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),o=1;o<c;o++)t[o]=arguments[o];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:u.push(this._all[r].call(this,e));break;case 2:u.push(this._all[r].call(this,e,arguments[1]));break;case 3:u.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:u.push(this._all[r].apply(this,t))}}if(this.wildcard){a=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();f.call(this,a,l,this.listenerTree,0)}else a=this._events[e];if("function"==typeof a)switch(this.event=e,c){case 1:u.push(a.call(this));break;case 2:u.push(a.call(this,arguments[1]));break;case 3:u.push(a.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];u.push(a.apply(this,t))}else if(a&&a.length){if(a=a.slice(),c>3)for(t=new Array(c-1),o=1;o<c;o++)t[o-1]=arguments[o];for(r=0,n=a.length;r<n;r++)switch(this.event=e,c){case 1:u.push(a[r].call(this));break;case 2:u.push(a[r].call(this,arguments[1]));break;case 3:u.push(a[r].call(this,arguments[1],arguments[2]));break;default:u.push(a[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?i.reject(arguments[1]):i.reject("Uncaught, unspecified 'error' event.");return i.all(u)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this.emit("newListener",e,t),this.wildcard?(d.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){function n(e){if(e!==a){var t=Object.keys(e);for(var r in t){var i=t[r],o=e[i];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&n(e[i]),0===Object.keys(o).length&&delete e[i])}}}if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();i=f.call(this,null,o,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var s=0;s<i.length;s++){var u=i[s];if(r=u._listeners,h(r)){for(var c=-1,l=0,d=r.length;l<d;l++)if(r[l]===t||r[l].listener&&r[l].listener===t||r[l]._origin&&r[l]._origin===t){c=l;break}if(c<0)continue;return this.wildcard?u._listeners.splice(c,1):this._events[e].splice(c,1),0===r.length&&(this.wildcard?delete u._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete u._listeners:delete this._events[e],this.emit("removeListener",e,t))}return n(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,r=t.length;n<r;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||s.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=f.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){var i=n[r];i._listeners=null}else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return f.call(this,t,n,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),h(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},(o=function(){return l}.call(t,n,t,e))!==a&&(e.exports=o)}()}).call(t,n(78),n(7))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&h&&(v=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(e){l=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],v=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new u(e,t)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){e.exports=n(40)},function(e,t,n){e.exports=n(220)},function(e,t,n){"use strict";(function(t){function r(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var i=n(6),o=n(222),a=/^\)\]\}',?\n/,s={"Content-Type":"application/x-www-form-urlencoded"},u={adapter:function(){var e;return"undefined"!=typeof XMLHttpRequest?e=n(118):void 0!==t&&(e=n(118)),e}(),transformRequest:[function(e,t){return o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(r(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)?(r(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e){e=e.replace(a,"");try{e=JSON.parse(e)}catch(e){}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},i.forEach(["delete","get","head"],function(e){u.headers[e]={}}),i.forEach(["post","put","patch"],function(e){u.headers[e]=i.merge(s)}),e.exports=u}).call(t,n(78))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){this.referenceCountById={},this.referencesById={}}return e.prototype.acquire=function(e,t){return this.referenceCountById[e]||(this.referencesById[e]=t(),this.referenceCountById[e]=0),this.referenceCountById[e]=this.referenceCountById[e]+1,this.referencesById[e]},e.prototype.release=function(e){this.referenceCountById[e]>0&&(this.referenceCountById[e]=this.referenceCountById[e]-1),this.referenceCountById[e]||delete this.referencesById[e]},e}();t.Pool=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(50),f=r(l);Object.defineProperty(t,"__esModule",{value:!0});var d=n(80),h=n(111);t.isTokenError=function(e){if(e&&e.error){var t=e.error.code;return"JwtAuthoriser:TokenExpiredError"===t||"JwtAuthoriser:AuthenticationError"===t}return!1},t.addAuthToHeaders=function(e,t){var n=e.headers||{};return(0,f.default)({},e,{headers:(0,f.default)({},n,h.mapAuthToAuthHeaders(t))})},t.addAuthToQueryParameters=function(e,t){return(0,f.default)({},e,{parameters:(0,f.default)({},e.parameters,h.mapAuthToQueryParameters(t))})};var p=function(){function e(t,n,r){(0,s.default)(this,e),this.apiUrl=t,this.authProvider=n,this.collection=r}return(0,c.default)(e,[{key:"refreshAuth",value:function(){var e=this;return this.authProvider({collectionName:this.collection}).then(function(t){return e.auth=t,t})}},{key:"call",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.addAuthToHeaders;return this.makeCall(e,r).catch(function(i){if(!(i&&i.response&&t.isTokenError(i.response.data)))throw i;return n.makeCall(e,r,!0)})}},{key:"makeCall",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.getAuth(r).then(function(r){return n.makeCallWithToken(e,t,r)})}},{key:"getAuth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.auth&&!e?o.default.resolve(this.auth):this.refreshAuth()}},{key:"makeCallWithToken",value:function(e,t,n){var r=t(e,n),i=this.getAxiosRequestConfig(r);return d.default.request(i).then(function(e){return e.data})}},{key:"getAxiosRequestConfig",value:function(e){var t=e.httpMethod,n=e.mediaApiMethod,r=e.parameters,i=e.headers,o=e.data;return{url:this.apiUrl+"/"+n,method:t,headers:(0,f.default)({},i,o?{"Content-Type":"application/json; charset=utf-8"}:{}),params:r,data:o}}},{key:"storedAuth",get:function(){return this.auth}}]),e}();t.MediaClient=p},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(56),i=n(13).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(284),i=n(85);e.exports=function(e){return r(i(e))}},function(e,t,n){var r=n(140)("keys"),i=n(141);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(55).f,i=n(57),o=n(8)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(17),i=n(41),o=n(60)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){e.exports=!n(12)&&!n(18)(function(){return 7!=Object.defineProperty(n(62)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(162),o=r(i),a=n(171),s=r(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,n){e.exports=n(15)},function(e,t,n){var r=n(17),i=n(24),o=n(167)(!1),a=n(60)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(4).document;e.exports=r&&r.documentElement},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(31);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(95),i=n(68).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(47),i=n(43),o=n(24),a=n(63),s=n(17),u=n(92),c=Object.getOwnPropertyDescriptor;t.f=n(12)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){e.exports={default:n(186),__esModule:!0}},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(10),i=n(29),o=n(3)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r,i,o,a=n(14),s=n(191),u=n(96),c=n(62),l=n(4),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,m=0,y={},b=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},g=function(e){b.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++m]=function(){s("function"==typeof e?e:Function(e),t)},r(m),m},h=function(e){delete y[e]},"process"==n(31)(f)?r=function(e){f.nextTick(a(b,e,1))}:v&&v.now?r=function(e){v.now(a(b,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=g,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",g,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),b.call(e)}}:function(e){setTimeout(a(b,e,1),0)}),e.exports={set:d,clear:h}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(10),i=n(11),o=n(75);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(4),i=n(2),o=n(9),a=n(12),s=n(3)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){(function(t){var n,r=t.crypto||t.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}e.exports=n}).call(t,n(52))},function(e,t){function n(e,t){var n=t||0,i=r;return i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+"-"+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]+i[e[n++]]}for(var r=[],i=0;i<256;++i)r[i]=(i+256).toString(16).substr(1);e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(50),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(210),f=function(){function e(){(0,s.default)(this,e),this.defaults={storage_key:"media-picker.herment.storage",product:"media-picker",subproduct:"library",version:"1.0"},this.queue=[],this.queueProcessor=l.default((0,o.default)({},this.defaults,{queue:this.queue})),this.queueProcessor&&this.queueProcessor.start(),this.defaultProperties={}}return(0,c.default)(e,[{key:"track",value:function(){var e=this;return function(t){var n=t.toJSON();n.properties=(0,o.default)({},e.defaultProperties,n.properties),e.queue.push(n)}}}]),e}();t.UserTracker=f},function(e,t,n){"use strict";function r(e){return o.isClientBasedAuth(e)?{"X-Client-Id":e.clientId,Authorization:"Bearer "+e.token}:{"X-Issuer":e.asapIssuer,Authorization:"Bearer "+e.token}}function i(e){return o.isClientBasedAuth(e)?{client:e.clientId,token:e.token}:{issuer:e.asapIssuer,token:e.token}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(212);t.mapAuthToAuthHeaders=r,t.mapAuthToQueryParameters=i},function(e,t,n){"use strict";function r(e){return!!e.clientId}function i(e){return!!e.asapIssuer}Object.defineProperty(t,"__esModule",{value:!0}),t.isClientBasedAuth=r,t.isAsapBasedAuth=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114);t.RemoteMediaCollectionProvider=r.RemoteMediaCollectionProvider;var i=n(116);t.FileProvider=i.FileProvider;var o=n(123);t.LinkProvider=o.LinkProvider;var a=n(239);t.MediaItemProvider=a.MediaItemProvider;var s=n(240);t.MediaUrlPreviewProvider=s.MediaUrlPreviewProvider;var u=n(126);t.UrlPreviewProvider=u.UrlPreviewProvider},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(115);n(79);var i=function(){function e(e,t,n,i){this.collectionService=e,this.collectionName=t,this.pageSize=n,this.sortDirection=i,this.subject=new r.Subject,this.connectableObservable=this.subject.publishReplay(1),this.items=[],this.nextInclusiveStartKey=void 0,this.isLoading=!1,this.connectableObservable.connect(),this.loadNextPage()}return e.prototype.observable=function(){return this.connectableObservable},e.prototype.loadNextPageUntil=function(e){var t=this;if(!this.items.some(e))var n=this.connectableObservable.subscribe({next:function(r){!t.nextInclusiveStartKey||r.items.some(e)?n.unsubscribe():t.loadNextPage()},complete:function(){return n.unsubscribe()},error:function(e){return n.unsubscribe()}})},e.prototype.loadNextPage=function(){var e=this;this.isLoading||(this.isLoading=!0,this.collectionService.getCollectionItems(this.collectionName,this.pageSize,this.nextInclusiveStartKey,this.sortDirection,"full").then(function(t){e.isLoading=!1,(r=e.items).push.apply(r,t.items);var n={id:e.collectionName,items:e.items};e.nextInclusiveStartKey=t.nextInclusiveStartKey,e.subject.next(n);var r},function(t){e.isLoading=!1,e.subject.error(t)}))},e.prototype.refresh=function(){var e=this;if(!this.isLoading){this.isLoading=!0;var t,n=this.items[0]&&this.items[0].details,r=n&&n.id,i=n&&n.occurrenceKey,o=[],a=function(){e.collectionService.getCollectionItems(e.collectionName,e.pageSize,t,e.sortDirection,"full").then(function(n){for(var s=!1,u=0,c=n.items;u<c.length;u++){var l=c[u],f=l.details,d=f.id,h=f.occurrenceKey;if(d===r&&h===i){s=!0;break}o.push(l)}s?(e.isLoading=!1,e.items=o.concat(e.items),e.subject.next({id:e.collectionName,items:e.items})):n.nextInclusiveStartKey&&(t=n.nextInclusiveStartKey,a())},function(t){e.isLoading=!1,e.subject.error(t)})};a()}},e}();t.RemoteMediaCollectionProvider=i},function(e,t){e.exports=n(43)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(219),i=n(26);n(79),t.FILE_PROVIDER_RETRY_INTERVAL=2e3;var o=function(){function e(){}return e.fromMediaApi=function(t,n,i,o,a){return e.fromFileService(new r.MediaFileService(t,n),i,o,a)},e.fromFileService=function(e,t,n,r){return{observable:function(){var o=new i.Observable(function(i){var o,a=r||1e3,s=function(){e.getFileItem(t,n).then(function(e){"pending"!==e.details.processingStatus?(i.next(e),i.complete()):(i.next(e),o=setTimeout(function(){return s()},a))},function(e){i.error(e)})};return s(),function(){null!==o&&clearTimeout(o)}}).publishReplay(1);return o.connect(),o}}},e}();t.FileProvider=o},function(e,t,n){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},function(e,t,n){"use strict";(function(t){var r=n(6),i=n(223),o=n(225),a=n(226),s=n(227),u=n(119),c="undefined"!=typeof window&&window.btoa&&window.btoa.bind(window)||n(228);e.exports=function(e){return new t(function(t,l){var f=e.data,d=e.headers;r.isFormData(f)&&delete d["Content-Type"];var h=new XMLHttpRequest,p="onreadystatechange",v=!1;if("undefined"==typeof window||!window.XDomainRequest||"withCredentials"in h||s(e.url)||(h=new window.XDomainRequest,p="onload",v=!0,h.onprogress=function(){},h.ontimeout=function(){}),e.auth){var m=e.auth.username||"",y=e.auth.password||"";d.Authorization="Basic "+c(m+":"+y)}if(h.open(e.method.toUpperCase(),o(e.url,e.params,e.paramsSerializer),!0),h.timeout=e.timeout,h[p]=function(){if(h&&(4===h.readyState||v)&&(0!==h.status||h.responseURL&&0===h.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in h?a(h.getAllResponseHeaders()):null,r=e.responseType&&"text"!==e.responseType?h.response:h.responseText,o={data:r,status:1223===h.status?204:h.status,statusText:1223===h.status?"No Content":h.statusText,headers:n,config:e,request:h};i(t,l,o),h=null}},h.onerror=function(){l(u("Network Error",e)),h=null},h.ontimeout=function(){l(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED")),h=null},r.isStandardBrowserEnv()){var b=n(229),g=(e.withCredentials||s(e.url))&&e.xsrfCookieName?b.read(e.xsrfCookieName):void 0;g&&(d[e.xsrfHeaderName]=g)}if("setRequestHeader"in h&&r.forEach(d,function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete d[t]:h.setRequestHeader(t,e)}),e.withCredentials&&(h.withCredentials=!0),e.responseType)try{h.responseType=e.responseType}catch(e){if("json"!==h.responseType)throw e}"function"==typeof e.onDownloadProgress&&h.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&h.upload&&h.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then(function(e){h&&(h.abort(),l(e),h=null)}),void 0===f&&(f=null),h.send(f)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(224);e.exports=function(e,t,n,i){var o=new Error(e);return r(o,t,n,i)}},function(e,t,n){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,n){"use strict";function r(e){this.message=e}r.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},r.prototype.__CANCEL__=!0,e.exports=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(237)),r(n(238))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(124),i=n(26);n(79);var o=function(){function e(){}return e.fromMediaApi=function(t,n,i){return e.fromLinkService(new r.MediaLinkService(t),n,i)},e.fromLinkService=function(e,t,n){return{observable:function(){
var r=new i.Observable(function(r){return e.getLinkItem(t,n).then(function(e){r.next(e),r.complete()},function(e){r.error(e)}),function(){}}).publishReplay(1);return r.connect(),r}}},e}();t.LinkProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getLinkItem=function(e,t){return r.default({config:this.config,collectionName:t,preventPreflight:!0})({url:"/link/"+e}).then(function(e){return e.data}).then(function(e){return{type:"link",details:{id:e.id,url:e.url,type:e.metadata.type,title:e.metadata.title,description:e.metadata.description,site:e.metadata.site,author:e.metadata.author,date:e.metadata.date,resources:e.metadata.resources}}})},e.prototype.addLinkItem=function(e,t,n){return r.default({config:this.config,collectionName:t})({method:"post",url:"/link",data:{url:e,metadata:n}}).then(function(e){return e.data.id})},e}();t.MediaLinkService=i},function(e,t,n){"use strict";function r(e,t,n){return new i.Observable(function(r){var i=e.acquire(t,n),o=i.subscribe(r);return function(){o.unsubscribe(),e.release(t)}})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.observableFromObservablePool=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(241),i=n(26),o=function(){function e(){}return e.fromMediaApi=function(t,n){return e.fromUrlPreviewService(new r.MediaUrlPreviewService(t),n)},e.fromUrlPreviewService=function(e,t){return{observable:function(){return new i.Observable(function(n){return e.getUrlPreview(t).then(function(e){n.next(e),n.complete()},function(e){n.error(e)}),function(){}})}}},e}();t.UrlPreviewProvider=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(35);t.DEFAULT_COLLECTION_PAGE_SIZE=10;var o=function(){function e(e){this.config=e}return e.prototype.mapToMediaCollectionItem=function(e){var t=e.id,n=e.type,i=e.occurrenceKey,o=e.details;if("file"===n){var a=o;return{type:"file",details:r.__assign({id:t,occurrenceKey:i},a)}}var s=o;return{type:"link",details:r.__assign({id:t,type:"link",occurrenceKey:i,title:s.title||""},s)}},e.prototype.getCollectionItems=function(e,n,r,o,a){var s=this;return void 0===n&&(n=t.DEFAULT_COLLECTION_PAGE_SIZE),i.default({config:this.config,preventPreflight:!0,collectionName:e})({url:"/collection/"+e+"/items",params:{limit:n,inclusiveStartKey:r,sortDirection:o,details:a}}).then(function(e){return{items:e.data.contents.map(s.mapToMediaCollectionItem),nextInclusiveStartKey:e.data.nextInclusiveStartKey}})},e}();t.MediaCollectionService=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_NAMES={OBJ_CREATE_FAIL:"object_create_fail",METADATA_FETCH_FAIL:"metadata_fetch_fail",TOKEN_FETCH_FAIL:"token_fetch_fail",TOKEN_UPDATE_FAIL:"token_update_fail",TOKEN_SOURCE_EMPTY:"token_source_empty",UPLOAD_FAIL:"upload_fail",USER_TOKEN_FETCH_FAIL:"user_token_fetch_fail"};var u=function(){function e(t,n,r){(0,o.default)(this,e),this.fileId=t,this.name=n,this.description=r}return(0,s.default)(e,[{key:"toJSON",value:function(){return{fileId:this.fileId,name:this.name,description:this.description}}}]),e}();t.MediaError=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(246),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(22),f=function(){function e(t,n,r,i,o,a,u){(0,s.default)(this,e),e.isValidFileId(t)||l.handleError("wrong_file_id","Passed fileId is incorrect."),e.isValidName(n)||l.handleError("wrong_file_name","Passed file name is incorrect."),e.isValidSize(r)||l.handleError("wrong_file_size","Passed file size is incorrect."),e.isValidCreationDate(i)||l.handleError("wrong_file_date","Passed file creation date is incorrect."),e.isValidType(o)||l.handleError("wrong_file_type","Passed file type is incorrect."),this.id=t,this.name=n,this.size=r,this.creationDate=i,this.type=o,this.publicId=a,this.resumableFile=u}return(0,c.default)(e,[{key:"toJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId,chunks:this.chunks,toPureJSON:this.toPureJSON.bind(this)}}},{key:"toPureJSON",value:function(){return{id:this.id,name:this.name,size:this.size,creationDate:this.creationDate,type:this.type,publicId:this.publicId}}},{key:"_isImage",value:function(){return new o.default(["image/png","image/jpeg","image/jpg","image/gif"]).has(this.type)}},{key:"chunks",get:function(){return this.resumableFile?this.resumableFile.chunks:void 0}},{key:"raw",get:function(){return this.resumableFile?this.resumableFile.file:void 0}},{key:"preview",get:function(){return this._isImage()?this.raw:void 0}}],[{key:"isValidFileId",value:function(e){return"string"==typeof e&&e.length>0}},{key:"isValidName",value:function(e){return"string"==typeof e}},{key:"isValidType",value:function(e){return"string"==typeof e}},{key:"isValidSize",value:function(e){return"number"==typeof e&&e>=0}},{key:"isValidCreationDate",value:function(e){return"number"==typeof e&&e>0}}]),e}();t.MediaFile=f},function(e,t,n){var r=n(11);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUploadParams={collection:void 0,fetchMetadata:!0,autoFinalize:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(270),c=n(77),l=n(22),f=n(25),d=function(){function e(t){(0,o.default)(this,e),this.context=t,this.emitter=new c.EventEmitter2({wildcard:!0})}return(0,s.default)(e,[{key:"once",value:function(e,t){this.emitter.once(e,t)}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"onAny",value:function(e){this.emitter.onAny(e)}},{key:"addListener",value:function(e,t){this.emitter.addListener(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"removeListener",value:function(e,t){this.emitter.removeListener(e,t)}},{key:"removeAllListeners",value:function(e){this.emitter.removeAllListeners(e)}},{key:"emit",value:function(e,t){return this.emitter.emit(e,t)}},{key:"emitUploadsStart",value:function(e){this.emit("uploads-start",{files:e.map(function(e){return e.toJSON()})})}},{key:"emitUploadStart",value:function(e){this.emit("upload-start",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileUploadStarted)}},{key:"emitUploadProgress",value:function(e,t){this.emit("upload-status-update",{file:e.toJSON(),progress:t})}},{key:"emitUploadFinalizeReady",value:function(e,t){this.emit("upload-finalize-ready",{file:e.toJSON(),finalize:t})}},{key:"emitUploadPreviewUpdate",value:function(e,t){this.emit("upload-preview-update",{file:e.toJSON(),preview:t})}},{key:"emitUploadProcessing",value:function(e){this.emit("upload-processing",{file:e.toJSON()}),this.context.trackEvent(new f.MPFileProcessingStarted)}},{key:"emitUploadEnd",value:function(e,t){this.emit("upload-end",{file:e.toJSON(),public:t}),this.context.trackEvent(new f.MPFileUploadEnded)}},{key:"emitUploadError",value:function(e,t){this.emit("upload-error",{file:e.toJSON(),error:t.toJSON()})}},{key:"getStaticAssetUrl",value:function(e){return void 0===u.html[e]&&l.handleError("wrong_static_asset","The passet static asset does not exist"),!0===u.usingVersions?u.baseUrl+"/"+u.version+"/"+u.html[e]:u.baseUrl+"/"+u.html[e]}}]),e}();t.MPComponent=d},function(e,t,n){e.exports={default:n(272),__esModule:!0}},function(e,t,n){"use strict";var r=n(135),i=n(136),o=n(278),a=n(27),s=n(57),u=n(38),c=n(279),l=n(90),f=n(287),d=n(8)("iterator"),h=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,v,m,y,b){c(n,t,v);var g,_,w,x=function(e){if(!h&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},k=t+" Iterator",A="values"==m,S=!1,P=e.prototype,O=P[d]||P["@@iterator"]||m&&P[m],I=O||x(m),E=m?A?x("entries"):I:void 0,j="Array"==t?P.entries||O:O;if(j&&(w=f(j.call(new e)))!==Object.prototype&&(l(w,k,!0),r||s(w,d)||a(w,d,p)),A&&O&&"values"!==O.name&&(S=!0,I=function(){return O.call(this)}),r&&!b||!h&&!S&&P[d]||a(P,d,I),u[t]=I,u[k]=p,m)if(g={values:A?I:x("values"),keys:y?I:x("keys"),entries:E},b)for(_ in g)_ in P||o(P,_,g[_]);else i(i.P+i.F*(h||S),t,g);return g}},function(e,t){e.exports=!0},function(e,t,n){var r=n(13),i=n(36),o=n(54),a=n(27),s=function(e,t,n){var u,c,l,f=e&s.F,d=e&s.G,h=e&s.S,p=e&s.P,v=e&s.B,m=e&s.W,y=d?i:i[t]||(i[t]={}),b=y.prototype,g=d?r:h?r[t]:(r[t]||{}).prototype;d&&(n=t);for(u in n)(c=!f&&g&&void 0!==g[u])&&u in y||(l=c?g[u]:n[u],y[u]=d&&"function"!=typeof g[u]?n[u]:v&&c?o(l,r):m&&g[u]==l?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):p&&"function"==typeof l?o(Function.call,l):l,p&&((y.virtual||(y.virtual={}))[u]=l,e&s.R&&b&&!b[u]&&a(b,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(84),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){var r=n(13),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=n(13).document&&document.documentElement},function(e,t,n){var r=n(58),i=n(8)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),i))?n:o?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){var r,i,o,a=n(54),s=n(300),u=n(143),c=n(87),l=n(13),f=l.process,d=l.setImmediate,h=l.clearImmediate,p=l.MessageChannel,v=0,m={},y=function(){var e=+this;if(m.hasOwnProperty(e)){var t=m[e];delete m[e],t()}},b=function(e){y.call(e.data)};d&&h||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return m[++v]=function(){s("function"==typeof e?e:Function(e),t)},r(v),v},h=function(e){delete m[e]},"process"==n(58)(f)?r=function(e){f.nextTick(a(y,e,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),y.call(e)}}:function(e){setTimeout(a(y,e,1),0)}),e.exports={set:d,clear:h}},function(e,t,n){var r=n(307);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){/*!
	  * domready (c) Dustin Diaz 2014 - License MIT
	  */
!function(t,n){e.exports=function(){var e,t=[],n=document,r=n.documentElement.doScroll,i=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return i||n.addEventListener("DOMContentLoaded",e=function(){for(n.removeEventListener("DOMContentLoaded",e),i=1;e=t.shift();)e()}),function(e){i?setTimeout(e,0):t.push(e)}}()}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHTML=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]}},function(e,t,n){e.exports=n(150)},function(e,t,n){"use strict";function r(e,t,n){if(!t)return{binary:i.BinaryUploader,browser:o.Browser,clipboard:a.Clipboard,dropzone:s.Dropzone,popup:u.Popup}[e];var r={trackEvent:f};switch(e){case"binary":return new i.BinaryUploader(r,t);case"browser":return new o.Browser(r,t,n);case"clipboard":return new a.Clipboard(r,t);case"dropzone":return new s.Dropzone(r,t,n);case"popup":return new u.Popup(r,t,n);default:var c="The component "+e+" does not exist";throw l.handleError("wrong_component",c),new Error(c)}}Object.defineProperty(t,"__esModule",{value:!0}),n(151),n(153);var i=n(155);t.BinaryUploader=i.BinaryUploader;var o=n(306);t.Browser=o.Browser;var a=n(308);t.Clipboard=a.Clipboard;var s=n(309);t.Dropzone=s.Dropzone;var u=n(313);t.Popup=u.Popup;var c=n(110),l=n(22),f=(new c.UserTracker).track();t.MediaPicker=r},function(e,t,n){var r=n(152);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,'.mpAUI{color:#333;font-family:Arial,sans-serif;font-size:14px;line-height:1.42857143}.mpAUI h2{color:#333;font-size:24px;font-weight:400;line-height:1.25;text-transform:none;margin:30px 0 0}.mpAUI .aui-dialog2-header-close img{width:16px!important;height:16px!important;position:relative;top:2px;opacity:.5}.mpAUI .aui-dialog2-header-close:hover img{opacity:1}.mpAUI .aui-dialog2{box-sizing:border-box;position:relative;left:0;right:0;visibility:hidden}.mpAUI .aui-dialog2-xlarge{width:980px;min-height:431px}.mpAUI .aui-dialog2-small .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:380px}@media (max-height:700px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:180px}.mpAUI .aui-dialog2-large,.mpAUI .aui-dialog2-xlarge{min-height:131px;height:-120%}}@media (max-height:500px){.mpAUI .aui-dialog2-large .aui-dialog2-content,.mpAUI .aui-dialog2-medium .aui-dialog2-content,.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{min-height:80px}.mpAUI .aui-dialog2-medium{min-height:131px;height:-120%}}@media (max-width:1000px){.mpAUI .aui-dialog2-xlarge{width:100%;height:-20%}.mpAUI .aui-dialog2-xlarge.aui-layer{top:69px}.mpAUI .aui-dialog2-xlarge .aui-dialog2-content{height:100%}}@media (max-width:820px){.mpAUI .aui-dialog2-large{width:100%;height:-20%}.mpAUI .aui-dialog2-large.aui-layer{top:69px}.mpAUI .aui-dialog2-large .aui-dialog2-content{height:100%}}@media (max-width:620px){.mpAUI .aui-dialog2-medium{width:100%;height:-20%}.mpAUI .aui-dialog2-medium.aui-layer{top:69px}.mpAUI .aui-dialog2-medium .aui-dialog2-content{height:100%}}@media (max-width:420px){.mpAUI .aui-dialog2-small{width:100%;height:-20%}.mpAUI .aui-dialog2-small.aui-layer{top:69px}.mpAUI .aui-dialog2-small .aui-dialog2-content{height:100%}}.mpAUI .aui-dialog2-footer,.mpAUI .aui-dialog2-header{background:#f5f5f5;visibility:visible}.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=true] .aui-dialog2-header{opacity:0;transition:opacity .2s,visibility .2s;transition-delay:0s;visibility:hidden}.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-content,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-footer,.mpAUI .aui-dialog2.aui-layer[aria-hidden=false] .aui-dialog2-header{opacity:1;transition:opacity .2s;transition-delay:0s;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-content{max-height:100%}.mpAUI .aui-dialog2-content{border-radius:3px;background-color:#fff;box-sizing:border-box;overflow:auto;padding:20px;visibility:visible}.mpAUI .aui-dialog2 .aui-dialog2-header{margin-top:-69px}.mpAUI .aui-dialog2-header{border-bottom:1px solid #ccc;border-radius:5px 5px 0 0;box-sizing:border-box;color:#333;font-weight:400;height:69px;padding:0 20px;width:100%;display:table}.mpAUI .aui-dialog2-header-actions{width:100%}.mpAUI .aui-dialog2-header-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-main,.mpAUI .aui-dialog2-header-secondary{display:table-cell;vertical-align:middle}.mpAUI .aui-dialog2[data-aui-modal=true] .aui-dialog2-header-close{display:none}.mpAUI .aui-dialog2-footer-hint{color:#707070;line-height:31px}.mpAUI .aui-dialog2-footer-hint,.mpAUI .aui-dialog2-header-main{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;padding-right:10px}.mpAUI .aui-dialog2-header-main{max-width:400px}.mpAUI .aui-dialog2-footer-actions,.mpAUI .aui-dialog2-header-close,.mpAUI .aui-dialog2-header-secondary{text-align:right}.mpAUI .aui-dialog2-footer-actions{float:right}.mpAUI .aui-dialog2-header-close{width:20px;height:20px;padding-left:5px;text-align:right;vertical-align:middle;line-height:100%;cursor:pointer;color:#707070}.mpAUI .aui-iconfont-close-dialog:before{content:"\\F11B"}.mpAUI .aui-dialog2-warning .aui-dialog2-header{background-color:#d04437;border-bottom-color:#d04437;color:#fff}.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-actions a,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-close,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-main,.mpAUI .aui-dialog2-warning .aui-dialog2-header .aui-dialog2-header-secondary a{color:inherit}.mpAUI .aui-dialog2-header-close .aui-icon{vertical-align:middle}.mpAUI .aui-dialog2-footer{border-top:1px solid #ccc;box-sizing:border-box;height:51px;overflow:hidden;padding:10px 20px;width:100%;border-radius:0 0 5px 5px}.mpAUI .aui-dialog2-footer:empty{height:5px;padding:0}.mpAUI .aui-button,.mpAUI .aui-button:visited,.mpAUI a.aui-button{box-sizing:border-box;background:#f5f5f5;border:1px solid #ccc;border-radius:3.01px;color:#333;cursor:pointer;display:inline-block;font-family:inherit;font-size:14px;font-variant:normal;font-weight:400;height:2.14285714em;line-height:1.42857143;margin:0;padding:4px 10px;text-decoration:none;vertical-align:baseline;white-space:nowrap}.mpAUI .aui-button.aui-button-light,.mpAUI .aui-button:visited.aui-button-light,.mpAUI a.aui-button.aui-button-light{background:#fff}.mpAUI .aui-button~.aui-button{margin-left:10px}.mpAUI a.aui-button:active,.mpAUI a.aui-button:focus,.mpAUI a.aui-button:hover{text-decoration:none}.mpAUI .aui-button:focus,.mpAUI form.aui .button:focus,.mpAUI form.aui .cancel:focus{outline:1px dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:1px}.mpAUI .aui-button::-moz-focus-inner{border:0;padding:0}.mpAUI .aui-button-subtle.aui-button:focus,.mpAUI .aui-button-subtle.aui-button:hover,.mpAUI .aui-button:focus,.mpAUI .aui-button:hover{background:#e9e9e9;border-color:#999;color:#000;text-decoration:none}.mpAUI .aui-button.aui-button-subtle.active,.mpAUI .aui-button.aui-button-subtle:active{border-color:#999}.mpAUI .aui-button-subtle.aui-button.active,.mpAUI .aui-button-subtle.aui-button:active,.mpAUI .aui-button.active,.mpAUI .aui-button:active,.mpAUI .aui-header .aui-button-split-more.active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#f5f5f5;text-decoration:none}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(:active){border-right-color:transparent}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:active:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:focus:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary)+.aui-button-split-more:hover:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):active+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):focus+.aui-button-split-more:before,.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more:before{visibility:hidden}.mpAUI .aui-buttons .aui-button.aui-button-split-main:not(.aui-button-primary):hover+.aui-button-split-more{border-left:1px solid #999;margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more{margin-left:-1px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:focus,.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more:hover{margin-left:-2px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger:before{content:"";border-left:1px solid #ccc;bottom:4px;display:block;left:-1px;position:absolute;top:4px}.mpAUI .aui-buttons .aui-button.aui-button-split-main+.aui-button-split-more.aui-dropdown2-trigger.aui-button-primary:before{border-color:#fff}.mpAUI .aui-button.aui-button-primary,.mpAUI .aui-button.aui-button-primary:visited{background:#3572b0;border-color:transparent;color:#fff;font-weight:700;-webkit-font-smoothing:antialiased}.mpAUI .aui-button.aui-button-primary:focus,.mpAUI .aui-button.aui-button-primary:hover{background:#2a67a5;border-color:transparent;color:#fff}.mpAUI .aui-button.aui-button-primary:active{box-shadow:inset 0 3px 6px 0 rgba(0,0,0,.1);background-image:none;background:#3572b0;text-decoration:none}.mpAUI .aui-button.aui-button-link,.mpAUI .aui-button.aui-button-link:visited,.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{background:transparent;border-color:transparent;color:#3572b0;padding:4px 0;text-decoration:none;box-shadow:none}.mpAUI .aui-button.aui-button-link:active,.mpAUI .aui-button.aui-button-link:focus,.mpAUI .aui-button.aui-button-link:hover,.mpAUI .aui-button.aui-button-text:active,.mpAUI .aui-button.aui-button-text:focus,.mpAUI .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-link:active,.mpAUI .aui-buttons .aui-button.aui-button-link:focus,.mpAUI .aui-buttons .aui-button.aui-button-link:hover,.mpAUI .aui-buttons .aui-button.aui-button-link[aria-pressed=true],.mpAUI .aui-buttons .aui-button.aui-button-text:active,.mpAUI .aui-buttons .aui-button.aui-button-text:focus,.mpAUI .aui-buttons .aui-button.aui-button-text:hover,.mpAUI .aui-buttons .aui-button.aui-button-text[aria-pressed=true]{background:transparent;border-color:transparent;box-shadow:none;text-decoration:underline}.mpAUI .aui-button.aui-button-text,.mpAUI .aui-button.aui-button-text:visited{border:none;font-size:inherit;height:inherit;line-height:normal;padding:0}.mpAUI .aui-button.aui-button-subtle{background:transparent;border-color:transparent;color:#707070}.mpAUI .aui-buttons .aui-button.aui-button-subtle{border-radius:3.01px}.mpAUI .aui-button.aui-button-subtle .aui-icon{margin-right:1px}.mpAUI .aui-button>.aui-icon+.aui-button-label{margin-left:4px}',""])},function(e,t,n){var r=n(154);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup .aui-dialog2-large{width:845px;height:530px;position:fixed;left:calc(50% - 845px/2);top:calc(50% - 530px/2);margin:0;overflow:visible}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=function(e){function t(e,n){return(0,s.default)(this,t),(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n))}return(0,h.default)(t,e),(0,c.default)(t,[{key:"upload",value:function(e,t){var n=t||"file",r=this._urltoFile(e,n);this.uploadService.addFile(r)}},{key:"_urltoFile",value:function(e,t){var n=e.split(","),r=n[0].match(/:(.*?);/);if(!r||r.length<2)throw new Error("Failed to retrieve file from data URL");for(var i=r[1],o=atob(n[1]),a=o.length,s=new Uint8Array(a);a--;)s[a]=o.charCodeAt(a);var u=new Blob([s],{type:i});return u.name=t,u}}]),t}(p.MediaLocalUpload);t.BinaryUploader=v},function(e,t,n){n(157),e.exports=n(2).Object.getPrototypeOf},function(e,t,n){var r=n(41),i=n(91);n(158)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){var r=n(5),i=n(2),o=n(18);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){e.exports={default:n(160),__esModule:!0}},function(e,t,n){n(161);var r=n(2).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(5);r(r.S+r.F*!n(12),"Object",{defineProperty:n(9).f})},function(e,t,n){e.exports={default:n(163),__esModule:!0}},function(e,t,n){n(30),n(33),e.exports=n(69).f("iterator")},function(e,t,n){var r=n(64),i=n(59);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(45),i=n(43),o=n(32),a={};n(15)(a,n(3)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(9),i=n(10),o=n(46);e.exports=n(12)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(24),i=n(67),o=n(168);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(64),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(170),i=n(97),o=n(23),a=n(24);e.exports=n(65)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(172),__esModule:!0}},function(e,t,n){n(173),n(73),n(176),n(177),e.exports=n(2).Symbol},function(e,t,n){"use strict";var r=n(4),i=n(17),o=n(12),a=n(5),s=n(94),u=n(70).KEY,c=n(18),l=n(61),f=n(32),d=n(42),h=n(3),p=n(69),v=n(71),m=n(174),y=n(98),b=n(10),g=n(24),_=n(63),w=n(43),x=n(45),k=n(175),A=n(100),S=n(9),P=n(46),O=A.f,I=S.f,E=k.f,j=r.Symbol,T=r.JSON,C=T&&T.stringify,M=h("_hidden"),U=h("toPrimitive"),L={}.propertyIsEnumerable,F=l("symbol-registry"),R=l("symbols"),N=l("op-symbols"),z=Object.prototype,D="function"==typeof j,B=r.QObject,H=!B||!B.prototype||!B.prototype.findChild,q=o&&c(function(){return 7!=x(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=O(z,t);r&&delete z[t],I(e,t,n),r&&e!==z&&I(z,t,r)}:I,$=function(e){var t=R[e]=x(j.prototype);return t._k=e,t},V=D&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},J=function(e,t,n){return e===z&&J(N,t,n),b(e),t=_(t,!0),b(n),i(R,t)?(n.enumerable?(i(e,M)&&e[M][t]&&(e[M][t]=!1),n=x(n,{enumerable:w(0,!1)})):(i(e,M)||I(e,M,w(1,{})),e[M][t]=!0),q(e,t,n)):I(e,t,n)},W=function(e,t){b(e);for(var n,r=m(t=g(t)),i=0,o=r.length;o>i;)J(e,n=r[i++],t[n]);return e},K=function(e,t){return void 0===t?x(e):W(x(e),t)},G=function(e){var t=L.call(this,e=_(e,!0));return!(this===z&&i(R,e)&&!i(N,e))&&(!(t||!i(this,e)||!i(R,e)||i(this,M)&&this[M][e])||t)},Y=function(e,t){if(e=g(e),t=_(t,!0),e!==z||!i(R,t)||i(N,t)){var n=O(e,t);return!n||!i(R,t)||i(e,M)&&e[M][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=E(g(e)),r=[],o=0;n.length>o;)i(R,t=n[o++])||t==M||t==u||r.push(t);return r},X=function(e){for(var t,n=e===z,r=E(n?N:g(e)),o=[],a=0;r.length>a;)!i(R,t=r[a++])||n&&!i(z,t)||o.push(R[t]);return o};D||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===z&&t.call(N,n),i(this,M)&&i(this[M],e)&&(this[M][e]=!1),q(this,e,w(1,n))};return o&&H&&q(z,e,{configurable:!0,set:t}),$(e)},s(j.prototype,"toString",function(){return this._k}),A.f=Y,S.f=J,n(99).f=k.f=Q,n(47).f=G,n(72).f=X,o&&!n(44)&&s(z,"propertyIsEnumerable",G,!0),p.f=function(e){return $(h(e))}),a(a.G+a.W+a.F*!D,{Symbol:j});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ee=0;Z.length>ee;)h(Z[ee++]);for(var te=P(h.store),ne=0;te.length>ne;)v(te[ne++]);a(a.S+a.F*!D,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=j(e)},keyFor:function(e){if(!V(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!D,"Object",{create:K,defineProperty:J,defineProperties:W,getOwnPropertyDescriptor:Y,getOwnPropertyNames:Q,getOwnPropertySymbols:X}),T&&a(a.S+a.F*(!D||c(function(){var e=j();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!V(e)){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);return t=r[1],"function"==typeof t&&(n=t),!n&&y(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!V(t))return t}),r[1]=t,C.apply(T,r)}}}),j.prototype[U]||n(15)(j.prototype,U,j.prototype.valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(46),i=n(72),o=n(47);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(24),i=n(99).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(r(e))}},function(e,t,n){n(71)("asyncIterator")},function(e,t,n){n(71)("observable")},function(e,t,n){e.exports={default:n(179),__esModule:!0}},function(e,t,n){n(180),e.exports=n(2).Object.setPrototypeOf},function(e,t,n){var r=n(5);r(r.S,"Object",{setPrototypeOf:n(181).set})},function(e,t,n){var r=n(11),i=n(10),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(14)(Function.call,n(100).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(183),__esModule:!0}},function(e,t,n){n(184);var r=n(2).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(5);r(r.S,"Object",{create:n(45)})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(21),s=r(a),u=n(196),c=r(u),l=n(50),f=r(l),d=n(0),h=r(d),p=n(1),v=r(p);Object.defineProperty(t,"__esModule",{value:!0});var m=n(206),y=n(51),b=n(77),g=n(22),_=n(211),w=n(111),x=n(128),k=n(129),A=n(261),S=n(131),P=n(262),O=n(83),I=n(267),E=n(268),j=function(){function e(t,n,r){var i=this;(0,h.default)(this,e),this.uploads={},this.retry=0,this.emit=function(e,t){i.emitter.emit(e,t)},this.getQueryParameters=function(e,t){var n=i.getMediaClient(e),r=n.storedAuth;if(r)return(0,f.default)({hash:t.hash},w.mapAuthToQueryParameters(r));throw new Error("auth required")},this.generateTarget=function(e){var t=e.map(function(e){return e.split("=")}).reduce(function(e,t){var n=(0,c.default)(t,2),r=n[0],i=n[1];return e[r]=i,e},{}),n=t.hash,r=t.resumableCurrentChunkSize,o=t.client,a=t.issuer,s=t.token,u=void 0;return u=a?"issuer="+a+"&token="+s:"client="+o+"&token="+s,i.uploadChunkUrl+"/"+n+"-"+r+"?"+u},this.onFilesAdded=function(e){if(0!==e.length){var t=i.uploadParams;e.forEach(function(e){i.uploads[e.uniqueIdentifier]={creationDate:Date.now(),uploadParams:t}});var n=t.collection;i.mediaClientPool.getMediaClient(n).refreshAuth().then(function(){i.retry=0;var t=e.map(function(e){return i.mapResumableFileToMediaFile(e)});i.emit("files-added",{files:t}),t.forEach(function(e){return i.emit("file-added",{file:e})}),i.resumable.upload()},function(){e.forEach(function(e){return i.onError(e,x.ERROR_NAMES.TOKEN_FETCH_FAIL)}),e.forEach(function(e){return e.cancel()}),e.forEach(i.cleanupResumableFile)})}},this.onChunkingComplete=function(e){e.chunks.forEach(function(t){var n=t.callback;t.callback=function(t,r){return"error"===t?(i.retry++,e.abort(),e.pause(!0),void i.resumable.fire("fileError",e,r||"")):("success"===t&&(i.retry=0),void n(t,r))}})},this.onFileProgress=function(e){var t=e.progress(),n=i.mapResumableFileToMediaFile(e);if(t>0&&t<1){var r=new A.MediaProgress(n.size,n.size*t,n.creationDate,Date.now());i.emit("file-uploading",{file:n,progress:r})}},this.onFileSuccess=function(e){return i.getResumableFileUploadParams(e).autoFinalize?void i.finalizeFile(e):void i.emit("file-finalize-ready",{file:i.mapResumableFileToMediaFile(e),finalize:function(){i.finalizeFile(e)}})},this.onFileError=function(e,t){var n=i.getMediaClient(e);i.onUploadError(e,x.ERROR_NAMES.UPLOAD_FAIL,t,n).then(function(){e._prevProgress=0,e.pause(!1),e.chunks.forEach(function(e){"error"===e.status()&&(e.preprocessState=0,e.send()),"pending"===e.status()&&2===e.preprocessState&&(e.preprocessState=0)})}).catch(function(){e.cancel()})},this.onDrop=function(e){e.preventDefault(),e.stopPropagation(),i.emit("file-dropped",e)},this.mapResumableFileToMediaFile=function(e,t){return new k.MediaFile(e.uniqueIdentifier,e.file.name,e.file.size,i.getResumableFileCreationDate(e),e.file.type,t,e)},this.getResumableFileCreationDate=function(e){return i.uploads[e.uniqueIdentifier].creationDate},this.getResumableFileUploadParams=function(e){return i.uploads[e.uniqueIdentifier].uploadParams},this.cleanupResumableFile=function(e){delete i.uploads[e.uniqueIdentifier]},this.emitter=new b.EventEmitter2,this.uploadChunkUrl=t+"/chunk",this.mediaClientPool=new I.MediaClientPool(t,n),this.api=new E.MediaApi,this.setUploadParams(r),this.resumable=new m({target:this.generateTarget,uploadMethod:"PUT",testMethod:"HEAD",chunkSize:4194304,chunkRetryInterval:2500,maxChunkRetries:5,simultaneousUploads:3,forceChunkSize:!0,permanentErrors:[400,403,404,415,500,501],method:"octet",minFileSize:0,query:this.getQueryParameters,preprocess:function(t){return e.hasher.hash(t)},generateUniqueIdentifier:function(){return y.v4()}}),this.resumable.on("filesAdded",this.onFilesAdded),this.resumable.on("chunkingComplete",this.onChunkingComplete),this.resumable.on("fileProgress",this.onFileProgress),this.resumable.on("fileSuccess",this.onFileSuccess),this.resumable.on("fileError",this.onFileError)}return(0,v.default)(e,[{key:"setUploadParams",value:function(e){this.uploadParams=(0,f.default)({},S.defaultUploadParams,e)}},{key:"getUploadParams",value:function(){return this.uploadParams}},{key:"addBrowse",value:function(e){this.resumable.assignBrowse(e)}},{key:"addDropzone",value:function(e){this.dropzoneElement||(this.dropzoneElement=e,this.dropzoneElement.addEventListener("drop",this.onDrop),this.resumable.assignDrop(this.dropzoneElement))}},{key:"removeDropzone",value:function(){this.dropzoneElement&&(this.dropzoneElement.removeEventListener("drop",this.onDrop),this.resumable.unAssignDrop(this.dropzoneElement),this.dropzoneElement=void 0)}},{key:"addFile",value:function(e){this.resumable.addFile(e)}},{key:"cancel",value:function(e){if(e){var t=this.resumable.getFromUniqueIdentifier(e);t&&t.cancel()}else this.resumable.cancel()}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"off",value:function(e,t){this.emitter.off(e,t)}},{key:"getMediaClient",value:function(e){var t=this.getResumableFileUploadParams(e),n=t.collection;return this.mediaClientPool.getMediaClient(n)}},{key:"finalizeFile",value:function(e){var t=this,n=e.fileName,r=e.file,i=this.getResumableFileUploadParams(e),o=i.collection,a=e.chunks.map(function(e){return e.hash+"-"+(e.endByte-e.startByte)}),s=this.getMediaClient(e);this.api.createUpload(s).then(function(e){return t.appendChunksToUpload(s,e,a,1e3)}).then(function(e){return t.api.createFileFromUpload(s,n,r.type,e,o)}).then(function(n){return t.processFile(s,n,e)}).catch(function(n){t.onError(e,x.ERROR_NAMES.OBJ_CREATE_FAIL,n)})}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i=this;return _.sliceByChunks(n,r).map(function(n,o){var a=o*r;return function(){return i.api.appendChunksToUpload(e,t,n,a)}}).reduce(function(e,t){return e.then(t)},s.default.resolve()).then(function(){return t})}},{key:"processFile",value:function(e,t,n){var r=this;return this.fetchFileMetadata(e,t,n).then(function(e){var t=r.mapResumableFileToMediaFile(n,e.id),i=new A.MediaProgress(t.size,t.size,t.creationDate,Date.now());r.emit("file-converted",{file:t,progress:i,metadata:e})}).catch(function(e){r.onError(n,x.ERROR_NAMES.METADATA_FETCH_FAIL,e)})}},{key:"fetchFileMetadata",value:function(e,t,n){var r=this.getResumableFileUploadParams(n),i=r.collection;return r.fetchMetadata?(this.emit("file-converting",{file:this.mapResumableFileToMediaFile(n,t)}),this.api.pollForFileMetadata(e,t,i)):s.default.resolve({id:t})}},{key:"onUploadError",value:function(e,t,n,r){var i=this;return new s.default(function(o,a){var s=e.uniqueIdentifier,u=void 0;try{u=JSON.parse(n)}catch(e){}return O.isTokenError(u)&&i.retry<=1?void r.refreshAuth().then(function(){return o()}).catch(function(){i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,x.ERROR_NAMES.TOKEN_UPDATE_FAIL,n)}),g.handleError(t,n),a()}):(u&&u.error&&u.error.title&&(n=u.error.title),i.emit("file-upload-error",{file:i.mapResumableFileToMediaFile(e),error:new x.MediaError(s,t,n)}),g.handleError(t,n),a(),void 0)})}},{key:"onError",value:function(e,t,n){var r=void 0;r=n&&n.error&&n.error.title?n.error.title:(0,o.default)(n||{}),this.emit("file-upload-error",{file:this.mapResumableFileToMediaFile(e),error:new x.MediaError(e.uniqueIdentifier,t,r)}),g.handleError(t,r)}}]),e}();j.hasher=P.createHasher(),t.UploadService=j},function(e,t,n){var r=n(2),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){n(73),n(30),n(33),n(188),n(194),n(195),e.exports=n(2).Promise},function(e,t,n){"use strict";var r,i,o,a,s=n(44),u=n(4),c=n(14),l=n(49),f=n(5),d=n(11),h=n(29),p=n(74),v=n(34),m=n(103),y=n(104).set,b=n(192)(),g=n(75),_=n(105),w=n(106),x=u.TypeError,k=u.process,A=u.Promise,S="process"==l(k),P=function(){},O=i=g.f,I=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(3)("species")]=function(e){e(P,P)};return(S||"function"==typeof PromiseRejectionEvent)&&e.then(P)instanceof t}catch(e){}}(),E=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},j=function(e,t){if(!e._n){e._n=!0;var n=e._c;b(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&M(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(x("Promise-chain cycle")):(o=E(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&T(e)})}},T=function(e){y.call(u,function(){var t,n,r,i=e._v,o=C(e);if(o&&(t=_(function(){S?k.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=S||C(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},C=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!C(t.promise))return!1;return!0},M=function(e){y.call(u,function(){var t;S?k.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},U=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),j(t,!0))},L=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw x("Promise can't be resolved itself");(t=E(e))?b(function(){var r={_w:n,_d:!1};try{t.call(e,c(L,r,1),c(U,r,1))}catch(e){U.call(r,e)}}):(n._v=e,n._s=1,j(n,!1))}catch(e){U.call({_w:n,_d:!1},e)}}};I||(A=function(e){p(this,A,"Promise","_h"),h(e),r.call(this);try{e(c(L,this,1),c(U,this,1))}catch(e){U.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(76)(A.prototype,{then:function(e,t){var n=O(m(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=S?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&j(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(L,e,1),this.reject=c(U,e,1)},g.f=O=function(e){return e===A||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!I,{Promise:A}),n(32)(A,"Promise"),n(107)("Promise"),a=n(2).Promise,f(f.S+f.F*!I,"Promise",{reject:function(e){var t=O(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!I),"Promise",{resolve:function(e){return w(s&&this===a?A:this,e)}}),f(f.S+f.F*!(I&&n(193)(function(e){A.all(e).catch(P)})),"Promise",{all:function(e){var t=this,n=O(t),r=n.resolve,i=n.reject,o=_(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=O(t),r=n.reject,i=_(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t,n){var r=n(10);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(23),i=n(3)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(4),i=n(104).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(31)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(3)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(5),i=n(2),o=n(4),a=n(103),s=n(106);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(5),i=n(75),o=n(105);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;
var i=n(197),o=r(i),a=n(200),s=r(a);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={default:n(198),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(199)},function(e,t,n){var r=n(49),i=n(3)("iterator"),o=n(23);e.exports=n(2).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){e.exports={default:n(201),__esModule:!0}},function(e,t,n){n(33),n(30),e.exports=n(202)},function(e,t,n){var r=n(10),i=n(102);e.exports=n(2).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){n(204),e.exports=n(2).Object.assign},function(e,t,n){var r=n(5);r(r.S+r.F,"Object",{assign:n(205)})},function(e,t,n){"use strict";var r=n(46),i=n(72),o=n(47),a=n(41),s=n(66),u=Object.assign;e.exports=!u||n(18)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=r})?function(e,t){for(var n=a(e),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var d,h=s(arguments[c++]),p=l?r(h).concat(l(h)):r(h),v=p.length,m=0;v>m;)f.call(h,d=p[m++])&&(n[d]=h[d]);return n}:u},function(e,t,n){!function(){"use strict";var t=function(e){function n(e,t,n){var i=this;i.opts={},i.getOpt=e.getOpt,i._prevProgress=0,i.resumableObj=e,i.file=t,i.fileName=t.fileName||t.name,i.size=t.size,i.relativePath=t.webkitRelativePath||t.relativePath||i.fileName,i.uniqueIdentifier=n,i._pause=!1,i.container="";var a=void 0!==n,s=function(e,t){switch(e){case"progress":i.resumableObj.fire("fileProgress",i);break;case"error":i.abort(),a=!0,i.chunks=[],i.resumableObj.fire("fileError",i,t);break;case"success":if(a)return;i.resumableObj.fire("fileProgress",i),i.isComplete()&&i.resumableObj.fire("fileSuccess",i,t);break;case"retry":i.resumableObj.fire("fileRetry",i)}};return i.chunks=[],i.abort=function(){var e=0;o.each(i.chunks,function(t){"uploading"==t.status()&&(t.abort(),e++)}),e>0&&i.resumableObj.fire("fileProgress",i)},i.cancel=function(){var e=i.chunks;i.chunks=[],o.each(e,function(e){"uploading"==e.status()&&(e.abort(),i.resumableObj.uploadNextChunk())}),i.resumableObj.removeFile(i),i.resumableObj.fire("fileProgress",i)},i.retry=function(){i.bootstrap();var e=!1;i.resumableObj.on("chunkingComplete",function(){e||i.resumableObj.upload(),e=!0})},i.bootstrap=function(){i.abort(),a=!1,i.chunks=[],i._prevProgress=0;for(var e=i.getOpt("forceChunkSize")?Math.ceil:Math.floor,t=Math.max(e(i.file.size/i.getOpt("chunkSize")),1),n=0;n<t;n++)!function(e){window.setTimeout(function(){i.chunks.push(new r(i.resumableObj,i,e,s)),i.resumableObj.fire("chunkingProgress",i,e/t)},0)}(n);window.setTimeout(function(){i.resumableObj.fire("chunkingComplete",i)},0)},i.progress=function(){if(a)return 1;var e=0,t=!1;return o.each(i.chunks,function(n){"error"==n.status()&&(t=!0),e+=n.progress(!0)}),e=t?1:e>.99999?1:e,e=Math.max(i._prevProgress,e),i._prevProgress=e,e},i.isUploading=function(){var e=!1;return o.each(i.chunks,function(t){if("uploading"==t.status())return e=!0,!1}),e},i.isComplete=function(){var e=!1;return o.each(i.chunks,function(t){var n=t.status();if("pending"==n||"uploading"==n||1===t.preprocessState)return e=!0,!1}),!e},i.pause=function(e){i._pause=void 0===e?!i._pause:e},i.isPaused=function(){return i._pause},i.resumableObj.fire("chunkingStart",i),i.bootstrap(),this}function r(e,t,n,r){var i=this;i.opts={},i.getOpt=e.getOpt,i.resumableObj=e,i.fileObj=t,i.fileObjSize=t.size,i.fileObjType=t.file.type,i.offset=n,i.callback=r,i.lastProgressCallback=new Date,i.tested=!1,i.retries=0,i.pendingRetry=!1,i.preprocessState=0;var a=i.getOpt("chunkSize");return i.loaded=0,i.startByte=i.offset*a,i.endByte=Math.min(i.fileObjSize,(i.offset+1)*a),i.fileObjSize-i.endByte<a&&!i.getOpt("forceChunkSize")&&(i.endByte=i.fileObjSize),i.xhr=null,i.test=function(){i.xhr=new XMLHttpRequest;var e=function(e){i.tested=!0;var t=i.status();"success"==t?(i.callback(t,i.message()),i.resumableObj.uploadNextChunk()):i.send()};i.xhr.addEventListener("load",e,!1),i.xhr.addEventListener("error",e,!1),i.xhr.addEventListener("timeout",e,!1);var t=[],n=i.getOpt("parameterNamespace"),r=i.getOpt("query");"function"==typeof r&&(r=r(i.fileObj,i)),o.each(r,function(e,r){t.push([encodeURIComponent(n+e),encodeURIComponent(r)].join("="))}),t.push([n+"resumableChunkNumber",encodeURIComponent(i.offset+1)].join("=")),t.push([n+"resumableChunkSize",encodeURIComponent(i.getOpt("chunkSize"))].join("=")),t.push([n+"resumableCurrentChunkSize",encodeURIComponent(i.endByte-i.startByte)].join("=")),t.push([n+"resumableTotalSize",encodeURIComponent(i.fileObjSize)].join("=")),t.push([n+"resumableType",encodeURIComponent(i.fileObjType)].join("=")),t.push([n+"resumableIdentifier",encodeURIComponent(i.fileObj.uniqueIdentifier)].join("=")),t.push([n+"resumableFilename",encodeURIComponent(i.fileObj.fileName)].join("=")),t.push([n+"resumableRelativePath",encodeURIComponent(i.fileObj.relativePath)].join("=")),t.push([n+"resumableTotalChunks",encodeURIComponent(i.fileObj.chunks.length)].join("=")),i.xhr.open(i.getOpt("testMethod"),o.getTarget(t)),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var a=i.getOpt("headers");"function"==typeof a&&(a=a(i.fileObj,i)),o.each(a,function(e,t){i.xhr.setRequestHeader(e,t)}),i.xhr.send(null)},i.preprocessFinished=function(){i.preprocessState=2,i.send()},i.send=function(){var e=i.getOpt("preprocess");if("function"==typeof e)switch(i.preprocessState){case 0:return i.preprocessState=1,void e(i);case 1:return}if(i.getOpt("testChunks")&&!i.tested)return void i.test();i.xhr=new XMLHttpRequest,i.xhr.upload.addEventListener("progress",function(e){new Date-i.lastProgressCallback>1e3*i.getOpt("throttleProgressCallbacks")&&(i.callback("progress"),i.lastProgressCallback=new Date),i.loaded=e.loaded||0},!1),i.loaded=0,i.pendingRetry=!1,i.callback("progress");var t=function(e){var t=i.status();if("success"==t||"error"==t)i.callback(t,i.message()),i.resumableObj.uploadNextChunk();else{i.callback("retry",i.message()),i.abort(),i.retries++;var n=i.getOpt("chunkRetryInterval");void 0!==n?(i.pendingRetry=!0,setTimeout(i.send,n)):i.send()}};i.xhr.addEventListener("load",t,!1),i.xhr.addEventListener("error",t,!1),i.xhr.addEventListener("timeout",t,!1);var n={resumableChunkNumber:i.offset+1,resumableChunkSize:i.getOpt("chunkSize"),resumableCurrentChunkSize:i.endByte-i.startByte,resumableTotalSize:i.fileObjSize,resumableType:i.fileObjType,resumableIdentifier:i.fileObj.uniqueIdentifier,resumableFilename:i.fileObj.fileName,resumableRelativePath:i.fileObj.relativePath,resumableTotalChunks:i.fileObj.chunks.length},r=i.getOpt("query");"function"==typeof r&&(r=r(i.fileObj,i)),o.each(r,function(e,t){n[e]=t});var a=i.fileObj.file.slice?"slice":i.fileObj.file.mozSlice?"mozSlice":i.fileObj.file.webkitSlice?"webkitSlice":"slice",s=i.fileObj.file[a](i.startByte,i.endByte),u=null,c=i.getOpt("target"),l=i.getOpt("parameterNamespace");if("octet"===i.getOpt("method")){u=s;var f=[];o.each(n,function(e,t){f.push([encodeURIComponent(l+e),encodeURIComponent(t)].join("="))}),c=o.getTarget(f)}else u=new FormData,o.each(n,function(e,t){u.append(l+e,t)}),u.append(l+i.getOpt("fileParameterName"),s);var d=i.getOpt("uploadMethod");i.xhr.open(d,c),"octet"===i.getOpt("method")&&i.xhr.setRequestHeader("Content-Type","binary/octet-stream"),i.xhr.timeout=i.getOpt("xhrTimeout"),i.xhr.withCredentials=i.getOpt("withCredentials");var h=i.getOpt("headers");"function"==typeof h&&(h=h(i.fileObj,i)),o.each(h,function(e,t){i.xhr.setRequestHeader(e,t)}),i.xhr.send(u)},i.abort=function(){i.xhr&&i.xhr.abort(),i.xhr=null},i.status=function(){return i.pendingRetry?"uploading":i.xhr?i.xhr.readyState<4?"uploading":200==i.xhr.status||201==i.xhr.status?"success":o.contains(i.getOpt("permanentErrors"),i.xhr.status)||i.retries>=i.getOpt("maxChunkRetries")?"error":(i.abort(),"pending"):"pending"},i.message=function(){return i.xhr?i.xhr.responseText:""},i.progress=function(e){void 0===e&&(e=!1);var t=e?(i.endByte-i.startByte)/i.fileObjSize:1;if(i.pendingRetry)return 0;switch(i.status()){case"success":case"error":return 1*t;case"pending":return 0*t;default:return i.loaded/(i.endByte-i.startByte)*t}},this}if(!(this instanceof t))return new t(e);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var i=this;i.files=[],i.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,method:"multipart",uploadMethod:"POST",testMethod:"GET",prioritizeFirstAndLastChunk:!1,target:"/",parameterNamespace:"",testChunks:!0,generateUniqueIdentifier:null,getTarget:null,maxChunkRetries:void 0,chunkRetryInterval:void 0,permanentErrors:[400,404,415,500,501],maxFiles:void 0,withCredentials:!1,xhrTimeout:0,maxFilesErrorCallback:function(e,t){var n=i.getOpt("maxFiles");alert("Please upload no more than "+n+" file"+(1===n?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too small, please upload files larger than "+o.formatSize(i.getOpt("minFileSize"))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(e,t){alert(e.fileName||e.name+" is too large, please upload files less than "+o.formatSize(i.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(e,t){alert(e.fileName||e.name+" has type not allowed, please upload files of type "+i.getOpt("fileType")+".")}},i.opts=e||{},i.getOpt=function(e){var i=this;if(e instanceof Array){var a={};return o.each(e,function(e){a[e]=i.getOpt(e)}),a}if(i instanceof r){if(void 0!==i.opts[e])return i.opts[e];i=i.fileObj}if(i instanceof n){if(void 0!==i.opts[e])return i.opts[e];i=i.resumableObj}if(i instanceof t)return void 0!==i.opts[e]?i.opts[e]:i.defaults[e]},i.events=[],i.on=function(e,t){i.events.push(e.toLowerCase(),t)},i.fire=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);for(var n=e[0].toLowerCase(),t=0;t<=i.events.length;t+=2)i.events[t]==n&&i.events[t+1].apply(i,e.slice(1)),"catchall"==i.events[t]&&i.events[t+1].apply(null,e);"fileerror"==n&&i.fire("error",e[2],e[1]),"fileprogress"==n&&i.fire("progress")};var o={stopEvent:function(e){e.stopPropagation(),e.preventDefault()},each:function(e,t){if(void 0!==e.length){for(var n=0;n<e.length;n++)if(!1===t(e[n]))return}else for(n in e)if(!1===t(n,e[n]))return},generateUniqueIdentifier:function(e){var t=i.getOpt("generateUniqueIdentifier");if("function"==typeof t)return t(e);var n=e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+n.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(e,t){var n=!1;return o.each(e,function(e){return e!=t||(n=!0,!1)}),n},formatSize:function(e){return e<1024?e+" bytes":e<1048576?(e/1024).toFixed(0)+" KB":e<1073741824?(e/1024/1024).toFixed(1)+" MB":(e/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(e){var t=i.getOpt("target");return"function"==typeof t?t(e):(t+=t.indexOf("?")<0?"?":"&",t+e.join("&"))}},a=function(e){o.stopEvent(e),e.dataTransfer&&e.dataTransfer.items?u(e.dataTransfer.items,e):e.dataTransfer&&e.dataTransfer.files&&u(e.dataTransfer.files,e)},s=function(e){e.preventDefault()},u=function(e,t,n,r){n||(n={total:0,files:[],event:t}),c(e.length,n);for(var i=0;i<e.length;i++){var o,a,s=e[i];if(s.isFile||s.isDirectory)o=s;else if(s.getAsEntry)o=s.getAsEntry();else{if(!s.webkitGetAsEntry){if("function"==typeof s.getAsFile){l(s.getAsFile(),n,r);continue}if(File&&s instanceof File){l(s,n,r);continue}c(-1,n);continue}o=s.webkitGetAsEntry()}if(o){if(o.isFile)o.file(function(e){l(e,n,r)},function(e){console.warn(e)});else if(o.isDirectory){a=o.createReader();var f=[],d=function(e){a.readEntries(function(r){if(r.length>0){for(var i=0;i<r.length;i++)f.push(r[i]);d(o.fullPath)}else u(f,t,n,e),c(-1,n)},function(e){c(-1,n),console.warn(e)})};d(o.fullPath)}}else c(-1,n)}},c=function(e,t){t.total+=e,t.files.length===t.total&&f(t.files,t.event)},l=function(e,t,n){n&&(e.relativePath=n+"/"+e.name),t.files.push(e),t.files.length===t.total&&f(t.files,t.event)},f=function(e,t){var r=0,a=i.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if(void 0!==a.maxFiles&&a.maxFiles<e.length+i.files.length){if(1!==a.maxFiles||1!==i.files.length||1!==e.length)return a.maxFilesErrorCallback(e,r++),!1;i.removeFile(i.files[0])}var s=[];o.each(e,function(e){function u(r){i.getFromUniqueIdentifier(r)||function(){e.uniqueIdentifier=r;var o=new n(i,e,r);i.files.push(o),s.push(o),o.container=void 0!==t?t.srcElement:null,window.setTimeout(function(){i.fire("fileAdded",o,t)},0)}()}var c=e.name;if(a.fileType.length>0){var l=!1;for(var f in a.fileType){var d="."+a.fileType[f];if(-1!==c.indexOf(d,c.length-d.length)){l=!0;break}}if(!l)return a.fileTypeErrorCallback(e,r++),!1}if(void 0!==a.minFileSize&&e.size<a.minFileSize)return a.minFileSizeErrorCallback(e,r++),!1;if(void 0!==a.maxFileSize&&e.size>a.maxFileSize)return a.maxFileSizeErrorCallback(e,r++),!1;var h=o.generateUniqueIdentifier(e);h&&"function"==typeof h.done&&"function"==typeof h.fail?h.done(function(e){u(e)}).fail(function(){u()}):u(h)}),window.setTimeout(function(){i.fire("filesAdded",s)},0)};return i.uploadNextChunk=function(){var e=!1;if(i.getOpt("prioritizeFirstAndLastChunk")&&(o.each(i.files,function(t){return t.chunks.length&&"pending"==t.chunks[0].status()&&0===t.chunks[0].preprocessState?(t.chunks[0].send(),e=!0,!1):t.chunks.length>1&&"pending"==t.chunks[t.chunks.length-1].status()&&0===t.chunks[t.chunks.length-1].preprocessState?(t.chunks[t.chunks.length-1].send(),e=!0,!1):void 0}),e))return!0;if(o.each(i.files,function(t){if(!1===t.isPaused()&&o.each(t.chunks,function(t){if("pending"==t.status()&&0===t.preprocessState)return t.send(),e=!0,!1}),e)return!1}),e)return!0;var t=!1;return o.each(i.files,function(e){if(!e.isComplete())return t=!0,!1}),t||i.fire("complete"),!1},i.assignBrowse=function(e,t){void 0===e.length&&(e=[e]),o.each(e,function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:(n=document.createElement("input"),n.setAttribute("type","file"),n.style.display="none",e.addEventListener("click",function(){n.style.opacity=0,n.style.display="block",n.focus(),n.click(),n.style.display="none"},!1),e.appendChild(n));var r=i.getOpt("maxFiles");void 0===r||1!=r?n.setAttribute("multiple","multiple"):n.removeAttribute("multiple"),t?n.setAttribute("webkitdirectory","webkitdirectory"):n.removeAttribute("webkitdirectory"),n.addEventListener("change",function(e){f(e.target.files,e),e.target.value=""},!1)})},i.assignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.addEventListener("dragover",s,!1),e.addEventListener("dragenter",s,!1),e.addEventListener("drop",a,!1)})},i.unAssignDrop=function(e){void 0===e.length&&(e=[e]),o.each(e,function(e){e.removeEventListener("dragover",s),e.removeEventListener("dragenter",s),e.removeEventListener("drop",a)})},i.isUploading=function(){var e=!1;return o.each(i.files,function(t){if(t.isUploading())return e=!0,!1}),e},i.upload=function(){if(!i.isUploading()){i.fire("uploadStart");for(var e=1;e<=i.getOpt("simultaneousUploads");e++)i.uploadNextChunk()}},i.pause=function(){o.each(i.files,function(e){e.abort()}),i.fire("pause")},i.cancel=function(){for(var e=i.files.length-1;e>=0;e--)i.files[e].cancel();i.fire("cancel")},i.progress=function(){var e=0,t=0;return o.each(i.files,function(n){e+=n.progress()*n.size,t+=n.size}),t>0?e/t:0},i.addFile=function(e,t){f([e],t)},i.removeFile=function(e){for(var t=i.files.length-1;t>=0;t--)i.files[t]===e&&i.files.splice(t,1)},i.getFromUniqueIdentifier=function(e){var t=!1;return o.each(i.files,function(n){n.uniqueIdentifier==e&&(t=n)}),t},i.getSize=function(){var e=0;return o.each(i.files,function(t){e+=t.size}),e},this};e.exports=t}()},function(e,t,n){function r(e,t,n){var r=t&&n||0,i=t||[];e=e||{};var a=void 0!==e.clockseq?e.clockseq:u,f=void 0!==e.msecs?e.msecs:(new Date).getTime(),d=void 0!==e.nsecs?e.nsecs:l+1,h=f-c+(d-l)/1e4;if(h<0&&void 0===e.clockseq&&(a=a+1&16383),(h<0||f>c)&&void 0===e.nsecs&&(d=0),d>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=f,l=d,u=a,f+=122192928e5;var p=(1e4*(268435455&f)+d)%4294967296;i[r++]=p>>>24&255,i[r++]=p>>>16&255,i[r++]=p>>>8&255,i[r++]=255&p;var v=f/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=a>>>8|128,i[r++]=255&a;for(var m=e.node||s,y=0;y<6;++y)i[r+y]=m[y];return t||o(i)}var i=n(108),o=n(109),a=i(),s=[1|a[0],a[1],a[2],a[3],a[4],a[5]],u=16383&(a[6]<<8|a[7]),c=0,l=0;e.exports=r},function(e,t,n){function r(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var a=e.random||(e.rng||i)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[r+s]=a[s];return t||o(a)}var i=n(108),o=n(109);e.exports=r},function(e,t){},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(101),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l={internalStorage:{storage:{},getItem:function(e){return this.storage[e]},setItem:function(e,t){this.storage[e]=t},clear:function(){this.storage={}}},getLocalStorage:function(){return window.localStorage},getSessionStorage:function(){return window.sessionStorage},getInternalStorage:function(){return this.internalStorage},getStorage:function(){try{var e=this.getLocalStorage();if(e)return e;var t=this.getSessionStorage();if(t)return t}catch(e){return this.getInternalStorage()}},isCORSRequest:function(e){var t=document.createElement("a");return t.href=e,t.host!==window.location.host},getCookieValue:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null}},f=function(){function e(t){var n=this;(0,s.default)(this,e),this.STORAGE_KEY_PREAMBLE="herment",this.MAXEVENTS=100,this.PUBLISH_INTERVAL=5e3,this.SAVE_INTERVAL=1e3,this.isStarted=!1,this.config=this.parseConfig(t),this.storage=l.getStorage(),window.addEventListener("unload",function(){return n.moveQueueToStorage()})}return(0,c.default)(e,[{key:"getAtlPath",value:function(){return l.getCookieValue("__atl_path")}},{key:"getServerName",value:function(){return document.location.hostname}},{key:"getProductNameFromServerName",value:function(e){return void 0!==e?e.replace(".com","").replace(".net","").replace(".org","").replace(".au","").replace(".io",""):"-"}},{key:"getSubdomain",value:function(e){if(e.match(/^([a-z0-9\.]*)[\-\.]{1}([a-z0-9]+)+\.([a-z]{2,6})$/i)){var t=e.split(".");if(t=2===t[t.length-1].length?t.slice(0,t.length-3):t.slice(0,t.length-2),0!==t.length)return t.join(".")}return"-"}},{key:"generateRandomStorageKey",value:function(){var e=(Math.random()+"").slice(2,12),t=(Math.random()+"").slice(2,12);return e.concat(t)}},{key:"ajaxPost",value:function(e,t){var n=new XMLHttpRequest;n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("Accept","application/json, text/javascript, */*;"),n.send(t)}},{key:"parseConfig",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=window,n=t.AJS?t.AJS.EventQueue:[],r=e.queue||n,i=e.analyticsscheme||"https",o=e.analyticsserver||"analytics.atlassian.com",a=e.analyticsurl||"/analytics/events",s=e.server||this.getServerName();return{queue:r,gasScheme:i,gasServer:o,gasUrl:a,serverName:s,productName:e.product||this.getProductNameFromServerName(s),subProductName:e.subproduct||this.getSubdomain(s)||"-",version:e.version,session:e.session,sen:e.sen,sourceIP:e.sourceIP,atlPath:e.atlpath||this.getAtlPath(),post:e.ajax||this.ajaxPost,maxevents:e.maxevents||this.MAXEVENTS,storageKey:e.storage_key||this.STORAGE_KEY_PREAMBLE+this.generateRandomStorageKey()+this.generateRandomStorageKey(),user:e.user||"default",publishInterval:e.publish_interval||this.PUBLISH_INTERVAL,saveInterval:e.save_interval||this.SAVE_INTERVAL}}},{key:"pushToServer",value:function(e,t){var n=this.config,r=n.gasScheme,i=n.gasServer,a=n.gasUrl;(t||this.config.post)(r+"://"+i+a,(0,o.default)({events:e}))}},{key:"addEventsToArray",value:function(e,t,n){if(n&&n.server&&n.product&&n.subproduct&&n.user)for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(t.length>=this.config.maxevents)return;if(i.name&&i.properties){var o={name:i.name,properties:i.properties,serverTime:i.time||(new Date).getTime(),server:n.server,user:n.user,product:n.product,subproduct:n.subproduct,version:n.version,session:n.session,sen:n.sen,sourceIP:n.sourceIP,atlPath:n.atlPath};t.push(o)}}}},{key:"publishFromQueueAndStorage",value:function(e){try{var t=e||this.pushToServer.bind(this),n=[];if(this.config.queue.length<1&&(void 0===this.storage||this.storage.length<1))return;var r={server:this.config.serverName,user:this.config.user,product:this.config.productName,subproduct:this.config.subProductName,version:this.config.version,session:this.config.session,sen:this.config.sen,sourceIP:this.config.sourceIP,atlPath:this.config.atlPath};this.addEventsToArray(this.config.queue,n,r);var i=this.popEventsFromStorage();this.addEventsToArray(i,n,r),this.config.queue.length=0,n&&n.length&&t(n)}catch(e){}}},{key:"serialiseEventsToString",value:function(e){return(0,o.default)(e)}},{key:"deserialiseEvents",value:function(e){return JSON.parse(e)}},{key:"storeEvents",value:function(e){if(this.storage)try{if(this.storage[this.config.storageKey]){var t=this.deserialiseEvents(this.storage[this.config.storageKey])||[];t.length<this.config.maxevents&&t.push.apply(t,e),e=t}this.storage.setItem(this.config.storageKey,this.serialiseEventsToString(e))}catch(e){}}},{key:"popEventsFromStorage",value:function(){if(!this.storage)return[];try{if(this.storage[this.config.storageKey]){var e=this.deserialiseEvents(this.storage[this.config.storageKey]);return this.storage[this.config.storageKey]=this.serialiseEventsToString([]),e}}catch(e){}return[]}},{key:"moveQueueToStorage",value:function(){0!==this.config.queue.length&&this.storage&&(this.storeEvents(this.config.queue),this.config.queue.length=0)}},{key:"start",value:function(){var e=this;this.isStarted=!0;var t=Array.prototype.push;this.config.queue.push=function(n){n.time=(new Date).getTime(),t.call(e.config.queue,n)},this.initialSaveTimeout=setTimeout(this.publishFromQueueAndStorage.bind(this),this.config.saveInterval),this.publishInterval=setInterval(this.publishFromQueueAndStorage.bind(this),this.config.publishInterval),this.saveInterval=setInterval(this.moveQueueToStorage.bind(this),this.config.saveInterval)}},{key:"stop",value:function(){this.isStarted=!1,this.publishFromQueueAndStorage(),clearTimeout(this.initialSaveTimeout),clearInterval(this.saveInterval),clearInterval(this.publishInterval)}},{key:"destroy",value:function(){this.stop()}}]),e}(),d=void 0,h=function(){return function(e){return d?(d.stop(),void(d.config=d.parseConfig(e))):d=new f(e)}}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sliceByChunks=function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(213)),r(n(112)),r(n(214)),r(n(216)),r(n(113)),r(n(122))},function(e,t,n){"use strict";function r(e,t){return{type:"FETCHING_COLLECTION_SUCCEEDED",collection:e,hasNextPage:t}}function i(e){return{type:"FETCHING_COLLECTION_FAILED",error:e}}Object.defineProperty(t,"__esModule",{value:!0});var o;!function(e){e[e.click=0]="click",e[e.delete=1]="delete",e[e.download=2]="download",e[e.retry=3]="retry",e[e.custom=4]="custom"}(o=t.CardActionType||(t.CardActionType={})),t.CardClick=function(e){return{type:o.click,handler:e}},t.CardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.ListCardClick=function(e){return{type:o.click,handler:e}},t.ListCardDelete=function(e){return{label:"Delete",type:o.delete,handler:e}},t.CollectionCardClick=function(e){return{type:o.click,handler:e}},t.fetchingCollectionSucceeded=r,t.fetchingCollectionFailed=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(215);t.DefaultMediaStateManager=r.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=function(){function e(){this.subscribers={},this.state=new Map}return e.prototype.getState=function(e){return this.state.get(e)},e.prototype.updateState=function(e,t){var n=this.subscribers[e],i=r.__assign({},this.state.get(e)||{},t);this.state.set(e,i),void 0!==n&&Array.from(n).forEach(function(e){return e.call(e,i)})},e.prototype.subscribe=function(e,t){var n=this.subscribers,r=n[e];void 0===r&&(r=[],n[e]=r),r.indexOf(t)>-1||r.push(t)},e.prototype.unsubscribe=function(e,t){var n=this.subscribers[e];if(void 0!==n){var r=n.indexOf(t);r>-1&&n.splice(r,1)}},e.prototype.destroy=function(){this.subscribers={}},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(26);n(217),n(218);var i=n(113),o=n(242),a=n(244),s=n(124),u=n(245),c=n(127),l=200,f=function(){function e(){}return e.create=function(e){return new d(e)},e}();t.ContextFactory=f;var d=function(){function e(e){this.config=e,this.collectionPool=o.RemoteMediaCollectionProviderFactory.createPool(),this.itemPool=i.MediaItemProvider.createPool(),this.urlPreviewPool=i.MediaUrlPreviewProvider.createPool(),this.fileItemCache=new u.LRUCache(e.cacheSize||l)}return e.prototype.getMediaItemProvider=function(e,t,n,o){var a=o&&"link"===o.type,s=o&&"file"===o.type&&"pending"!==o.details.processingStatus;if(o&&(a||s))return{observable:function(){return r.Observable.of(o)}};var u=i.MediaItemProvider.fromPool(this.itemPool,this.apiConfig,this.fileItemCache,t,e,n);return o?{observable:function(){return u.observable().startWith(o)}}:u},e.prototype.getMediaCollectionProvider=function(e,t){return void 0===t&&(t=c.DEFAULT_COLLECTION_PAGE_SIZE),o.RemoteMediaCollectionProviderFactory.fromPool(this.collectionPool,this.apiConfig,e,t)},e.prototype.getDataUriService=function(e){return new a.MediaDataUriService(this.config.authProvider,this.config.serviceHost,e)},e.prototype.getUrlPreviewProvider=function(e){return i.MediaUrlPreviewProvider.fromPool(this.urlPreviewPool,this.apiConfig,e)},e.prototype.addLinkItem=function(e,t,n){return new s.MediaLinkService(this.apiConfig).addLinkItem(e,t,n)},e.prototype.refreshCollection=function(e,t){this.getMediaCollectionProvider(e,t).refresh()},Object.defineProperty(e.prototype,"apiConfig",{get:function(){return{serviceHost:this.config.serviceHost,authProvider:this.config.authProvider}},enumerable:!0,configurable:!0}),e}()},function(e,t){e.exports=n(57)},function(e,t){e.exports=n(63)},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t){this.config=e,this.fileItemCache=t}return t.prototype.getFileItem=function(t,n){var i=this,o=[t,"file"].join("-"),a=this.fileItemCache.get(o);return a?e.resolve(a):r.default({config:this.config,collectionName:n,preventPreflight:!0})({url:"/file/"+t}).then(function(e){return e.data}).then(function(e){var t={type:"file",details:{id:e.id,mediaType:e.mediaType,mimeType:e.mimeType,name:e.name,processingStatus:e.processingStatus,size:e.size,artifacts:e.artifacts}};return"succeeded"===e.processingStatus&&i.fileItemCache.set(o,t),t})},t}();t.MediaFileService=i}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){var t=new a(e),n=o(a.prototype.request,t);return i.extend(n,a.prototype,t),i.extend(n,t),n}var i=n(6),o=n(117),a=n(221),s=n(81),u=r(s);u.Axios=a,u.create=function(e){return r(i.merge(s,e))},u.Cancel=n(121),u.CancelToken=n(235),u.isCancel=n(120),u.all=function(e){return t.all(e)},u.spread=n(236),e.exports=u,e.exports.default=u}).call(t,n(7))},function(e,t,n){"use strict";(function(t){function r(e){this.defaults=e,this.interceptors={request:new a,response:new a}}var i=n(81),o=n(6),a=n(230),s=n(231),u=n(233),c=n(234);r.prototype.request=function(e){"string"==typeof e&&(e=o.merge({url:arguments[0]},arguments[1])),e=o.merge(i,this.defaults,{method:"get"},e),e.baseURL&&!u(e.url)&&(e.url=c(e.baseURL,e.url));var n=[s,void 0],r=t.resolve(e);for(this.interceptors.request.forEach(function(e){n.unshift(e.fulfilled,e.rejected)}),this.interceptors.response.forEach(function(e){n.push(e.fulfilled,e.rejected)});n.length;)r=r.then(n.shift(),n.shift());return r},o.forEach(["delete","get","head"],function(e){r.prototype[e]=function(t,n){return this.request(o.merge(n||{},{method:e,url:t}))}}),o.forEach(["post","put","patch"],function(e){r.prototype[e]=function(t,n,r){return this.request(o.merge(r||{},{method:e,url:t,data:n}))}}),e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t){r.forEach(e,function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])})}},function(e,t,n){"use strict";var r=n(119);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n)):e(n)}},function(e,t,n){"use strict";e.exports=function(e,t,n,r){return e.config=t,n&&(e.code=n),e.response=r,e}},function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var i=n(6);e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(i.isURLSearchParams(t))o=t.toString();else{var a=[];i.forEach(t,function(e,t){null!==e&&void 0!==e&&(i.isArray(e)&&(t+="[]"),i.isArray(e)||(e=[e]),i.forEach(e,function(e){i.isDate(e)?e=e.toISOString():i.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),o=a.join("&")}return o&&(e+=(-1===e.indexOf("?")?"?":"&")+o),e}},function(e,t,n){"use strict";var r=n(6);e.exports=function(e){var t,n,i,o={};return e?(r.forEach(e.split("\n"),function(e){i=e.indexOf(":"),t=r.trim(e.substr(0,i)).toLowerCase(),n=r.trim(e.substr(i+1)),t&&(o[t]=o[t]?o[t]+", "+n:n)}),o):o}},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){function e(e){var t=e;return n&&(i.setAttribute("href",t),t=i.href),i.setAttribute("href",t),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}var t,n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");return t=e(window.location.href),function(n){var i=r.isString(n)?e(n):n;return i.protocol===t.protocol&&i.host===t.host}}():function(){return function(){return!0}}()},function(e,t,n){"use strict";function r(){this.message="String contains an invalid character"}function i(e){for(var t,n,i=String(e),a="",s=0,u=o;i.charAt(0|s)||(u="=",s%1);a+=u.charAt(63&t>>8-s%1*8)){if((n=i.charCodeAt(s+=.75))>255)throw new r;t=t<<8|n}return a}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.code=5,r.prototype.name="InvalidCharacterError",e.exports=i},function(e,t,n){"use strict";var r=n(6);e.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,n,i,o,a){
var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},function(e,t,n){"use strict";function r(){this.handlers=[]}var i=n(6);r.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){i.forEach(this.handlers,function(t){null!==t&&e(t)})},e.exports=r},function(e,t,n){"use strict";(function(t){function r(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var i=n(6),o=n(232),a=n(120),s=n(81);e.exports=function(e){return r(e),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=i.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),i.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]}),(e.adapter||s.adapter)(e).then(function(t){return r(e),t.data=o(t.data,t.headers,e.transformResponse),t},function(n){return a(n)||(r(e),n&&n.response&&(n.response.data=o(n.response.data,n.response.headers,e.transformResponse))),t.reject(n)})}}).call(t,n(7))},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t,n){return r.forEach(n,function(n){e=n(e,t)}),e}},function(e,t,n){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,n){"use strict";e.exports=function(e,t){return e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,"")}},function(e,t,n){"use strict";(function(t){function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var n;this.promise=new t(function(e){n=e});var r=this;e(function(e){r.reason||(r.reason=new i(e),n(r.reason))})}var i=n(121);r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var e;return{token:new r(function(t){e=t}),cancel:e}},e.exports=r}).call(t,n(7))},function(e,t,n){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isImageRemote=function(e,t){if(void 0===t&&(t=window.location.origin),URL&&URL.prototype){var n=new URL(e);return!!n.host&&n.origin!==t}return!0}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n;t.checkWebpSupport=function(){return void 0!==n?e.resolve(n):new e(function(e){var t=new Image;t.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA",t.onload=t.onerror=function(){n=2===t.height,e(n)}})}}).call(t,n(7))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(116),i=n(123),o=n(82),a=n(125),s=function(){function e(){}return e.fromMediaApi=function(e,t,n,o,a){switch(n){case"file":return r.FileProvider.fromMediaApi(e,t,o,a,r.FILE_PROVIDER_RETRY_INTERVAL);case"link":return i.LinkProvider.fromMediaApi(e,o,a);default:throw new Error("invalid media type "+n)}},e.fromPool=function(t,n,r,i,o,s){return{observable:function(){var u=[i,o,s].join("-");return a.observableFromObservablePool(t,u,function(){return e.fromMediaApi(n,r,i,o,s).observable()})}}},e.createPool=function(){return new o.Pool},e}();t.MediaItemProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(53),i=n(126),o=n(82),a=n(125),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.fromMediaApi=function(e,t){return i.UrlPreviewProvider.fromMediaApi(e,t)},t.fromPool=function(e,n,r){return{observable:function(){return a.observableFromObservablePool(e,r,function(){return t.fromMediaApi(n,r).observable()})}}},t.createPool=function(){return new o.Pool},t}(i.UrlPreviewProvider);t.MediaUrlPreviewProvider=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function e(e){this.config=e}return e.prototype.getUrlPreview=function(e){return r.default({config:this.config})({url:"/link/preview",params:{url:e}}).then(function(e){var t=e.data,n=t.preview,r=t.previewError;if(r)throw new Error(r.code+": "+r.name);return n})},e}();t.MediaUrlPreviewService=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(114),i=n(127),o=n(243),a=n(82),s=function(){function e(){}return e.fromCollectionService=function(e,t,n,i){return void 0===i&&(i="desc"),new r.RemoteMediaCollectionProvider(e,t,n,i)},e.fromMediaAPI=function(t,n,r,o){return void 0===o&&(o="desc"),e.fromCollectionService(new i.MediaCollectionService(t),n,r,o)},e.fromPool=function(e,t,n,a,s){void 0===s&&(s="desc");var u=[n,a,s].join("-"),c=function(){var e=new i.MediaCollectionService(t);return new r.RemoteMediaCollectionProvider(e,n,a,s)};return o.mediaCollectionProviderFromPool(e,u,c)},e.createPool=function(){return new a.Pool},e}();t.RemoteMediaCollectionProviderFactory=s},function(e,t,n){"use strict";function r(e,t,n){return e.acquire(t,function(){var r=n(),o=r.observable;return r.observable=function(){return new i.Observable(function(n){var i=o.bind(r)(),a=i.subscribe(n);return function(){a.unsubscribe(),e.release(t)}})},r})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(26);t.mediaCollectionProviderFromPool=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=n(35),i=function(){function t(e,t,n){this.authProvider=e,this.serviceHost=t,this.collectionName=n,this.request=r.default({config:{serviceHost:this.serviceHost,authProvider:this.authProvider},collectionName:this.collectionName})}return t.prototype.fetchOriginalDataUri=function(e){return this.fetchSomeDataUri("/file/"+e.details.id+"/binary",{"max-age":3600,collection:this.collectionName})},t.prototype.fetchImageDataUri=function(e,t,n,r){return void 0===r&&(r="crop"),this.fetchSomeDataUri("/file/"+e.details.id+"/image",{width:t,height:n,mode:r,"max-age":3600,collection:this.collectionName})},t.prototype.fetchSomeDataUri=function(e,t){return this.request({url:e,params:t,responseType:"image"}).then(this.readBlob)},t.prototype.readBlob=function(t){return new e(function(e,n){var r=new FileReader;r.addEventListener("load",function(){return e(r.result)}),r.addEventListener("error",function(){return n(r.error)}),r.readAsDataURL(t)})},t}();t.MediaDataUriService=i}).call(t,n(7))},function(e,t){function n(e){this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap={}}n.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e.newer&&(e===this.oldest&&(this.oldest=e.newer),e.newer.older=e.older),e.older&&(e.older.newer=e.newer),e.newer=void 0,e.older=this.newest,this.newest&&(this.newest.newer=e),this.newest=e)},n.prototype.put=function(e,t){var n=this._keymap[e];return n?(n.value=t,void this._markEntryAsUsed(n)):(this._keymap[e]=n={key:e,value:t,older:void 0,newer:void 0},this.newest?(this.newest.newer=n,n.older=this.newest):this.oldest=n,this.newest=n,this.size++,this.size>this.limit?this.shift():void 0)},n.prototype.shift=function(){var e=this.oldest;return e&&(this.oldest.newer?(this.oldest=this.oldest.newer,this.oldest.older=void 0):(this.oldest=void 0,this.newest=void 0),e.newer=e.older=void 0,delete this._keymap[e.key],this.size--),e},n.prototype.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return this._markEntryAsUsed(n),t?n:n.value},n.prototype.find=function(e){return this._keymap[e]},n.prototype.set=function(e,t){var n,r=this.get(e,!0);return r?(n=r.value,r.value=t):(n=this.put(e,t))&&(n=n.value),n},n.prototype.remove=function(e){var t=this._keymap[e];if(t)return delete this._keymap[t.key],t.newer&&t.older?(t.older.newer=t.newer,t.newer.older=t.older):t.newer?(t.newer.older=void 0,this.oldest=t.newer):t.older?(t.older.newer=void 0,this.newest=t.older):this.oldest=this.newest=void 0,this.size--,t.value},n.prototype.removeAll=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?n.prototype.keys=function(){return Object.keys(this._keymap)}:n.prototype.keys=function(){var e=[];for(var t in this._keymap)e.push(t);return e},n.prototype.forEach=function(e,t,n){var r;if(!0===t?(n=!0,t=void 0):"object"!=typeof t&&(t=this),n)for(r=this.newest;r;)e.call(t,r.key,r.value,this),r=r.older;else for(r=this.oldest;r;)e.call(t,r.key,r.value,this),r=r.newer},n.prototype.toJSON=function(){for(var e=new Array(this.size),t=0,n=this.oldest;n;)e[t++]={key:n.key,value:n.value},n=n.newer;return e},n.prototype.toString=function(){for(var e="",t=this.oldest;t;)e+=String(t.key)+":"+t.value,(t=t.newer)&&(e+=" < ");return e},"object"==typeof this&&(this.LRUCache=n)},function(e,t,n){e.exports={default:n(247),__esModule:!0}},function(e,t,n){n(73),n(30),n(33),n(248),n(254),n(257),n(259),e.exports=n(2).Set},function(e,t,n){"use strict";var r=n(249),i=n(130);e.exports=n(250)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){"use strict";var r=n(9).f,i=n(45),o=n(76),a=n(14),s=n(74),u=n(34),c=n(65),l=n(97),f=n(107),d=n(12),h=n(70).fastKey,p=n(130),v=d?"_s":"size",m=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=p(this,t),r=m(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){p(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!m(p(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return p(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=m(e,t);return o?o.v=n:(e._l=o={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:m,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?l(0,n.k):"values"==t?l(0,n.v):l(0,[n.k,n.v]):(e._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(4),i=n(5),o=n(70),a=n(18),s=n(15),u=n(76),c=n(34),l=n(74),f=n(11),d=n(32),h=n(9).f,p=n(251)(0),v=n(12);e.exports=function(e,t,n,m,y,b){var g=r[e],_=g,w=y?"set":"add",x=_&&_.prototype,k={};return v&&"function"==typeof _&&(b||x.forEach&&!a(function(){(new _).entries().next()}))?(_=t(function(t,n){l(t,_,e,"_c"),t._c=new g,void 0!=n&&c(n,y,t[w],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in x&&(!b||"clear"!=e)&&s(_.prototype,e,function(n,r){if(l(this,_,e),!t&&b&&!f(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),b||h(_.prototype,"size",{get:function(){return this._c.size}})):(_=m.getConstructor(t,e,y,w),u(_.prototype,n),o.NEED=!0),d(_,e),k[e]=_,i(i.G+i.W+i.F,k),b||m.setStrong(_,e,y),_}},function(e,t,n){var r=n(14),i=n(66),o=n(41),a=n(67),s=n(252);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,h=t||s;return function(t,s,p){for(var v,m,y=o(t),b=i(y),g=r(s,p,3),_=a(b.length),w=0,x=n?h(t,_):u?h(t,0):void 0;_>w;w++)if((d||w in b)&&(v=b[w],m=g(v,w,y),e))if(n)x[w]=m;else if(m)switch(e){case 3:return!0;case 5:return v;case 6:return w;case 2:x.push(v)}else if(l)return!1;return f?-1:c||l?l:x}}},function(e,t,n){var r=n(253);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(11),i=n(98),o=n(3)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(5);r(r.P+r.R,"Set",{toJSON:n(255)("Set")})},function(e,t,n){var r=n(49),i=n(256);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(34);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(258)("Set")},function(e,t,n){"use strict";var r=n(5);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(260)("Set")},function(e,t,n){"use strict";var r=n(5),i=n(29),o=n(14),a=n(34);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return i(this),t=void 0!==u,t&&i(u),void 0==e?new this:(n=[],t?(r=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(22),c=function(){function e(t,n,r,i){return(0,o.default)(this,e),this.size=t,this.progress=n,this.startTime=r,this.measureTime=i,e.isValidSize(t)?e.isValidProgress(t,n)?e.isValidStartTime(r)?e.isValidMeasureTime(r,i)?(this.size=t,this.progress=n,this.startTime=r,void(this.measureTime=i)):void u.handleError("wrong_measure_time","The progress measure time has incorrect format."):void u.handleError("wrong_start_time","The progress start time has incorrect format."):void u.handleError("wrong_progress","The progress format is incorrect."):void u.handleError("wrong_file_size","Passed file size is incorrect.")}return(0,s.default)(e,[{key:"toJSON",value:function(){return{absolute:this.absolute,portion:this.portion,max:this.max,overallTime:this.overallTime,expectedFinishTime:this.expectedFinishTime,timeLeft:this.timeLeft}}},{key:"absolute",get:function(){return this.progress}},{key:"portion",get:function(){return this.progress/this.size}},{key:"max",get:function(){return this.size}},{key:"overallTime",get:function(){return(this.measureTime-this.startTime)/this.portion}},{key:"expectedFinishTime",get:function(){return this.startTime+this.overallTime}},{key:"timeLeft",get:function(){return this.expectedFinishTime-this.measureTime}}],[{key:"isValidSize",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidProgress",value:function(t,n){return e.isValidSize(t)&&"number"==typeof n&&n>=0&&n<=t}},{key:"isValidStartTime",value:function(e){return"number"==typeof e&&e>0}},{key:"isValidMeasureTime",value:function(t,n){return e.isValidStartTime(t)&&"number"==typeof n&&n>=t}}]),e}();t.MediaProgress=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(263),i=n(265);t.createHasher=function(){var e=void 0;try{e=new i.WorkerHasher(3)}catch(t){e=new r.SimpleHasher}return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(264),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"hash",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=new FileReader;r.onload=function(t){var n=t.target.result;e.hash=new u(4194304).digestFromArrayBuffer(n),e.preprocessFinished()},r.readAsArrayBuffer(n)}}]),e}();t.SimpleHasher=c},function(e,t,n){(function(t){!function(){function n(e){"use strict";for(var t={fill:0},o=function(e){for(e+=9;e%64>0;e+=1);return e},a=function(e,t){var n=new Uint8Array(e.buffer),r=t%4,i=t-r;switch(r){case 0:n[i+3]=0;case 1:n[i+2]=0;case 2:n[i+1]=0;case 3:n[i+0]=0}for(var o=1+(t>>2);o<e.length;o++)e[o]=0},s=function(e,t,n){e[t>>2]|=128<<24-(t%4<<3),e[14+(2+(t>>2)&-16)]=n/(1<<29)|0,e[15+(2+(t>>2)&-16)]=n<<3},u=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a.charCodeAt(n+3);case 1:e[i+1-(s<<1)|0]=a.charCodeAt(n+2);case 2:e[i+2-(s<<1)|0]=a.charCodeAt(n+1);case 3:e[i+3-(s<<1)|0]=a.charCodeAt(n)}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2]=a.charCodeAt(n+o)<<24|a.charCodeAt(n+o+1)<<16|a.charCodeAt(n+o+2)<<8|a.charCodeAt(n+o+3);switch(u){case 3:e[i+c+1|0]=a.charCodeAt(n+c+2);case 2:e[i+c+2|0]=a.charCodeAt(n+c+1);case 1:e[i+c+3|0]=a.charCodeAt(n+c)}}},c=function(e,t,n,r,i){var o,a=this,s=i%4,u=(r+s)%4,c=r-u;switch(s){case 0:e[i]=a[n+3];case 1:e[i+1-(s<<1)|0]=a[n+2];case 2:e[i+2-(s<<1)|0]=a[n+1];case 3:e[i+3-(s<<1)|0]=a[n]}if(!(r<u+s)){for(o=4-s;o<c;o=o+4|0)t[i+o>>2|0]=a[n+o]<<24|a[n+o+1]<<16|a[n+o+2]<<8|a[n+o+3];switch(u){case 3:e[i+c+1|0]=a[n+c+2];case 2:e[i+c+2|0]=a[n+c+1];case 1:e[i+c+3|0]=a[n+c]}}},l=function(e,t,n,r,o){var a,s=this,u=o%4,c=(r+u)%4,l=r-c,f=new Uint8Array(i.readAsArrayBuffer(s.slice(n,n+r)));switch(u){case 0:e[o]=f[3];case 1:e[o+1-(u<<1)|0]=f[2];case 2:e[o+2-(u<<1)|0]=f[1];case 3:e[o+3-(u<<1)|0]=f[0]}if(!(r<c+u)){for(a=4-u;a<l;a=a+4|0)t[o+a>>2|0]=f[a]<<24|f[a+1]<<16|f[a+2]<<8|f[a+3];switch(c){case 3:e[o+l+1|0]=f[l+2];case 2:e[o+l+2|0]=f[l+1];case 1:e[o+l+3|0]=f[l]}}},f=function(e){switch(r.getDataType(e)){case"string":return u.bind(e);case"array":case"buffer":return c.bind(e);case"arraybuffer":return c.bind(new Uint8Array(e));case"view":return c.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return l.bind(e)}},d=new Array(256),h=0;h<256;h++)d[h]=(h<16?"0":"")+h.toString(16);var p=function(e){for(var t=new Uint8Array(e),n=new Array(e.byteLength),r=0;r<n.length;r++)n[r]=d[t[r]];return n.join("")},v=function(e){var t;if(e<=65536)return 65536;if(e<16777216)for(t=1;t<e;t<<=1);else for(t=16777216;t<e;t+=16777216);return t};!function(e){if(e%64>0)throw new Error("Chunk size must be a multiple of 128 bit");t.offset=0,t.maxChunkLen=e,t.padMaxChunkLen=o(e),t.heap=new ArrayBuffer(v(t.padMaxChunkLen+320+20)),t.h32=new Int32Array(t.heap),t.h8=new Int8Array(t.heap),t.core=new n._core({Int32Array:Int32Array,DataView:DataView},{},t.heap),t.buffer=null}(e||65536);var m=function(e,n){t.offset=0;var r=new Int32Array(e,n+320,5);r[0]=1732584193,r[1]=-271733879,r[2]=-1732584194,r[3]=271733878,r[4]=-1009589776},y=function(e,n){var r=o(e),i=new Int32Array(t.heap,0,r>>2);return a(i,e),s(i,e,n),r},b=function(e,n,r,i){f(e)(t.h8,t.h32,n,r,i||0)},g=function(e,n,r,i,o){var a=r;b(e,n,r),o&&(a=y(r,i)),t.core.hash(a,t.padMaxChunkLen)},_=function(e,t){var n=new Int32Array(e,t+320,5),r=new Int32Array(5),i=new DataView(r.buffer);return i.setInt32(0,n[0],!1),i.setInt32(4,n[1],!1),i.setInt32(8,n[2],!1),i.setInt32(12,n[3],!1),i.setInt32(16,n[4],!1),r},w=this.rawDigest=function(e){var n=e.byteLength||e.length||e.size||0;m(t.heap,t.padMaxChunkLen);var r=0,i=t.maxChunkLen;for(r=0;n>r+i;r+=i)g(e,r,i,n,!1);return g(e,r,n-r,n,!0),_(t.heap,t.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return p(w(e).buffer)},this.resetState=function(){return m(t.heap,t.padMaxChunkLen),this},this.append=function(e){var n,r=0,i=e.byteLength||e.length||e.size||0,o=t.offset%t.maxChunkLen;for(t.offset+=i;r<i;)n=Math.min(i-r,t.maxChunkLen-o),b(e,r,n,o),o+=n,r+=n,o===t.maxChunkLen&&(t.core.hash(t.maxChunkLen,t.padMaxChunkLen),o=0);return this},this.getState=function(){var e;if(t.offset%t.maxChunkLen)e=t.heap.slice(0);else{var n=new Int32Array(t.heap,t.padMaxChunkLen+320,5);e=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}return{offset:t.offset,heap:e}},this.setState=function(e){return t.offset=e.offset,20===e.heap.byteLength?new Int32Array(t.heap,t.padMaxChunkLen+320,5).set(new Int32Array(e.heap)):t.h32.set(new Int32Array(e.heap)),this};var x=this.rawEnd=function(){var e=t.offset,n=e%t.maxChunkLen,r=y(n,e);t.core.hash(r,t.padMaxChunkLen);var i=_(t.heap,t.padMaxChunkLen);return m(t.heap,t.padMaxChunkLen),i};this.end=function(){return p(x().buffer)}}var r={getDataType:function(e){if("string"==typeof e)return"string";if(e instanceof Array)return"array";if(void 0!==t&&t.Buffer&&t.Buffer.isBuffer(e))return"buffer";if(e instanceof ArrayBuffer)return"arraybuffer";if(e.buffer instanceof ArrayBuffer)return"view";if(e instanceof Blob)return"blob";throw new Error("Unsupported data type.")}};if(n._core=function(e,t,n){"use asm";var r=new e.Int32Array(n);function i(e,t){e=e|0;t=t|0;var n=0,i=0,o=0,a=0,s=0,u=0,c=0,l=0,f=0,d=0,h=0,p=0,v=0,m=0;o=r[t+320>>2]|0;s=r[t+324>>2]|0;c=r[t+328>>2]|0;f=r[t+332>>2]|0;h=r[t+336>>2]|0;for(n=0;(n|0)<(e|0);n=n+64|0){a=o;u=s;l=c;d=f;p=h;for(i=0;(i|0)<64;i=i+4|0){m=r[n+i>>2]|0;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[e+i>>2]=m}for(i=e+64|0;(i|0)<(e+80|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|~s&f)|0)+((m+h|0)+1518500249|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+80|0;(i|0)<(e+160|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)+1859775393|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+160|0;(i|0)<(e+240|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s&c|s&f|c&f)|0)+((m+h|0)-1894007588|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}for(i=e+240|0;(i|0)<(e+320|0);i=i+4|0){m=(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])<<1|(r[i-12>>2]^r[i-32>>2]^r[i-56>>2]^r[i-64>>2])>>>31;v=((o<<5|o>>>27)+(s^c^f)|0)+((m+h|0)-899497514|0)|0;h=f;f=c;c=s<<30|s>>>2;s=o;o=v;r[i>>2]=m}o=o+a|0;s=s+u|0;c=c+l|0;f=f+d|0;h=h+p|0}r[t+320>>2]=o;r[t+324>>2]=s;r[t+328>>2]=c;r[t+332>>2]=f;r[t+336>>2]=h}return{hash:i}},e.exports=n,"undefined"!=typeof FileReaderSync){var i=new FileReaderSync,o=function(e,t,n){try{return n(null,e.digest(t))}catch(e){return n(e)}},a=function(e,t,n,r,i){var o=new self.FileReader;o.onloadend=function(){var s=o.result;t+=o.result.byteLength;try{e.append(s)}catch(e){return void i(e)}t<r.size?a(e,t,n,r,i):i(null,e.end())},o.readAsArrayBuffer(r.slice(t,t+n))};self.onmessage=function(e){var t=e.data.data,r=e.data.file,i=e.data.id;if(void 0!==i&&(r||t)){var s=e.data.blockSize||4194304,u=new n(s);u.resetState();var c=function(e,t){e?self.postMessage({id:i,error:e.name}):self.postMessage({id:i,hash:t})};t&&o(u,t,c),r&&a(u,0,s,r,c)}}}}()}).call(t,n(52))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(266),c=function(){function e(t){(0,o.default)(this,e),this.workers=[],this.jobs={};for(var n=0;n<t;++n)this.workers.push(this.createWorker())}return(0,s.default)(e,[{key:"hash",value:function(e){this.calculateHashInWorker(e)}},{key:"createWorker",value:function(){var e=this,t=new Blob([u]),n=URL.createObjectURL(t),r=new Worker(n),i={worker:r,activeJobs:0};return r.addEventListener("message",function(t){e.handleWorkerMessage(t,i)}),i}},{key:"handleWorkerMessage",value:function(e,t){var n=e.data.id,r=this.jobs[n];r&&(delete this.jobs[n],t.activeJobs--,e.data.error?this.calculateHashInWorker(r):(r.hash=e.data.hash,r.preprocessFinished()))}},{key:"calculateHashInWorker",value:function(e){var t=e.fileObj.file,n=t.slice(e.startByte,e.endByte),r=e.fileObj.fileName+e.fileObjSize+e.startByte;this.jobs[r]=e;var i=this.getWorker();this.dispatch(r,i,n)}},{key:"dispatch",value:function(e,t,n){t.activeJobs++;var r=t.worker;if(navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")){var i=new FileReader;return i.onload=function(){r.postMessage({id:e,data:i.result})},void i.readAsBinaryString(n)}r.postMessage({id:e,data:n})}},{key:"getWorker",value:function(){return this.workers.reduce(function(e,t){return t.activeJobs<e.activeJobs?t:e},this.workers[0])}}]),e}();t.WorkerHasher=c},function(e,t){e.exports="(function () {\n    var /*\n * Rusha, a JavaScript implementation of the Secure Hash Algorithm, SHA-1,\n * as defined in FIPS PUB 180-1, tuned for high performance with large inputs.\n * (http://github.com/srijs/rusha)\n *\n * Inspired by Paul Johnstons implementation (http://pajhome.org.uk/crypt/md5).\n *\n * Copyright (c) 2013 Sam Rijs (http://awesam.de).\n * Released under the terms of the MIT license as follows:\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n * IN THE SOFTWARE.\n */\n    util = {\n        getDataType: function (data) {\n            if (typeof data === 'string') {\n                return 'string';\n            }\n            if (data instanceof Array) {\n                return 'array';\n            }\n            if (typeof global !== 'undefined' && global.Buffer && global.Buffer.isBuffer(data)) {\n                return 'buffer';\n            }\n            if (data instanceof ArrayBuffer) {\n                return 'arraybuffer';\n            }\n            if (data.buffer instanceof ArrayBuffer) {\n                return 'view';\n            }\n            if (data instanceof Blob) {\n                return 'blob';\n            }\n            throw new Error('Unsupported data type.');\n        }\n    };\n    function Rusha(chunkSize) {\n        'use strict';\n        var // Private object structure.\n        self$2 = { fill: 0 };\n        var // Calculate the length of buffer that the sha1 routine uses\n        // including the padding.\n        padlen = function (len) {\n            for (len += 9; len % 64 > 0; len += 1);\n            return len;\n        };\n        var padZeroes = function (bin, len) {\n            var h8 = new Uint8Array(bin.buffer);\n            var om = len % 4, align = len - om;\n            switch (om) {\n            case 0:\n                h8[align + 3] = 0;\n            case 1:\n                h8[align + 2] = 0;\n            case 2:\n                h8[align + 1] = 0;\n            case 3:\n                h8[align + 0] = 0;\n            }\n            for (var i$2 = (len >> 2) + 1; i$2 < bin.length; i$2++)\n                bin[i$2] = 0;\n        };\n        var padData = function (bin, chunkLen, msgLen) {\n            bin[chunkLen >> 2] |= 128 << 24 - (chunkLen % 4 << 3);\n            // To support msgLen >= 2 GiB, use a float division when computing the\n            // high 32-bits of the big-endian message length in bits.\n            bin[((chunkLen >> 2) + 2 & ~15) + 14] = msgLen / (1 << 29) | 0;\n            bin[((chunkLen >> 2) + 2 & ~15) + 15] = msgLen << 3;\n        };\n        var // Convert a binary string and write it to the heap.\n        // A binary string is expected to only contain char codes < 256.\n        convStr = function (H8, H32, start, len, off) {\n            var str = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = str.charCodeAt(start + 3);\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = str.charCodeAt(start + 2);\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = str.charCodeAt(start + 1);\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = str.charCodeAt(start);\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2] = str.charCodeAt(start + i$2) << 24 | str.charCodeAt(start + i$2 + 1) << 16 | str.charCodeAt(start + i$2 + 2) << 8 | str.charCodeAt(start + i$2 + 3);\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = str.charCodeAt(start + j + 2);\n            case 2:\n                H8[off + j + 2 | 0] = str.charCodeAt(start + j + 1);\n            case 1:\n                H8[off + j + 3 | 0] = str.charCodeAt(start + j);\n            }\n        };\n        var // Convert a buffer or array and write it to the heap.\n        // The buffer or array is expected to only contain elements < 256.\n        convBuf = function (H8, H32, start, len, off) {\n            var buf = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            switch (om) {\n            case 0:\n                H8[off] = buf[start + 3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[start + 2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[start + 1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[start];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[start + i$2] << 24 | buf[start + i$2 + 1] << 16 | buf[start + i$2 + 2] << 8 | buf[start + i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[start + j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[start + j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[start + j];\n            }\n        };\n        var convBlob = function (H8, H32, start, len, off) {\n            var blob = this, i$2, om = off % 4, lm = (len + om) % 4, j = len - lm;\n            var buf = new Uint8Array(reader.readAsArrayBuffer(blob.slice(start, start + len)));\n            switch (om) {\n            case 0:\n                H8[off] = buf[3];\n            case 1:\n                H8[off + 1 - (om << 1) | 0] = buf[2];\n            case 2:\n                H8[off + 2 - (om << 1) | 0] = buf[1];\n            case 3:\n                H8[off + 3 - (om << 1) | 0] = buf[0];\n            }\n            if (len < lm + om) {\n                return;\n            }\n            for (i$2 = 4 - om; i$2 < j; i$2 = i$2 + 4 | 0) {\n                H32[off + i$2 >> 2 | 0] = buf[i$2] << 24 | buf[i$2 + 1] << 16 | buf[i$2 + 2] << 8 | buf[i$2 + 3];\n            }\n            switch (lm) {\n            case 3:\n                H8[off + j + 1 | 0] = buf[j + 2];\n            case 2:\n                H8[off + j + 2 | 0] = buf[j + 1];\n            case 1:\n                H8[off + j + 3 | 0] = buf[j];\n            }\n        };\n        var convFn = function (data) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return convStr.bind(data);\n            case 'array':\n                return convBuf.bind(data);\n            case 'buffer':\n                return convBuf.bind(data);\n            case 'arraybuffer':\n                return convBuf.bind(new Uint8Array(data));\n            case 'view':\n                return convBuf.bind(new Uint8Array(data.buffer, data.byteOffset, data.byteLength));\n            case 'blob':\n                return convBlob.bind(data);\n            }\n        };\n        var slice = function (data, offset) {\n            switch (util.getDataType(data)) {\n            case 'string':\n                return data.slice(offset);\n            case 'array':\n                return data.slice(offset);\n            case 'buffer':\n                return data.slice(offset);\n            case 'arraybuffer':\n                return data.slice(offset);\n            case 'view':\n                return data.buffer.slice(offset);\n            }\n        };\n        var // Precompute 00 - ff strings\n        precomputedHex = new Array(256);\n        for (var i = 0; i < 256; i++) {\n            precomputedHex[i] = (i < 16 ? '0' : '') + i.toString(16);\n        }\n        var // Convert an ArrayBuffer into its hexadecimal string representation.\n        hex = function (arrayBuffer) {\n            var binarray = new Uint8Array(arrayBuffer);\n            var res = new Array(arrayBuffer.byteLength);\n            for (var i$2 = 0; i$2 < res.length; i$2++) {\n                res[i$2] = precomputedHex[binarray[i$2]];\n            }\n            return res.join('');\n        };\n        var ceilHeapSize = function (v) {\n            // The asm.js spec says:\n            // The heap object's byteLength must be either\n            // 2^n for n in [12, 24) or 2^24 * n for n ≥ 1.\n            // Also, byteLengths smaller than 2^16 are deprecated.\n            var p;\n            if (// If v is smaller than 2^16, the smallest possible solution\n                // is 2^16.\n                v <= 65536)\n                return 65536;\n            if (// If v < 2^24, we round up to 2^n,\n                // otherwise we round up to 2^24 * n.\n                v < 16777216) {\n                for (p = 1; p < v; p = p << 1);\n            } else {\n                for (p = 16777216; p < v; p += 16777216);\n            }\n            return p;\n        };\n        var // Initialize the internal data structures to a new capacity.\n        init = function (size) {\n            if (size % 64 > 0) {\n                throw new Error('Chunk size must be a multiple of 128 bit');\n            }\n            self$2.offset = 0;\n            self$2.maxChunkLen = size;\n            self$2.padMaxChunkLen = padlen(size);\n            // The size of the heap is the sum of:\n            // 1. The padded input message size\n            // 2. The extended space the algorithm needs (320 byte)\n            // 3. The 160 bit state the algoritm uses\n            self$2.heap = new ArrayBuffer(ceilHeapSize(self$2.padMaxChunkLen + 320 + 20));\n            self$2.h32 = new Int32Array(self$2.heap);\n            self$2.h8 = new Int8Array(self$2.heap);\n            self$2.core = new Rusha._core({\n                Int32Array: Int32Array,\n                DataView: DataView\n            }, {}, self$2.heap);\n            self$2.buffer = null;\n        };\n        // Iinitializethe datastructures according\n        // to a chunk siyze.\n        init(chunkSize || 64 * 1024);\n        var initState = function (heap, padMsgLen) {\n            self$2.offset = 0;\n            var io = new Int32Array(heap, padMsgLen + 320, 5);\n            io[0] = 1732584193;\n            io[1] = -271733879;\n            io[2] = -1732584194;\n            io[3] = 271733878;\n            io[4] = -1009589776;\n        };\n        var padChunk = function (chunkLen, msgLen) {\n            var padChunkLen = padlen(chunkLen);\n            var view = new Int32Array(self$2.heap, 0, padChunkLen >> 2);\n            padZeroes(view, chunkLen);\n            padData(view, chunkLen, msgLen);\n            return padChunkLen;\n        };\n        var // Write data to the heap.\n        write = function (data, chunkOffset, chunkLen, off) {\n            convFn(data)(self$2.h8, self$2.h32, chunkOffset, chunkLen, off || 0);\n        };\n        var // Initialize and call the RushaCore,\n        // assuming an input buffer of length len * 4.\n        coreCall = function (data, chunkOffset, chunkLen, msgLen, finalize) {\n            var padChunkLen = chunkLen;\n            write(data, chunkOffset, chunkLen);\n            if (finalize) {\n                padChunkLen = padChunk(chunkLen, msgLen);\n            }\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n        };\n        var getRawDigest = function (heap, padMaxChunkLen) {\n            var io = new Int32Array(heap, padMaxChunkLen + 320, 5);\n            var out = new Int32Array(5);\n            var arr = new DataView(out.buffer);\n            arr.setInt32(0, io[0], false);\n            arr.setInt32(4, io[1], false);\n            arr.setInt32(8, io[2], false);\n            arr.setInt32(12, io[3], false);\n            arr.setInt32(16, io[4], false);\n            return out;\n        };\n        var // Calculate the hash digest as an array of 5 32bit integers.\n        rawDigest = this.rawDigest = function (str) {\n            var msgLen = str.byteLength || str.length || str.size || 0;\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            var chunkOffset = 0, chunkLen = self$2.maxChunkLen;\n            for (chunkOffset = 0; msgLen > chunkOffset + chunkLen; chunkOffset += chunkLen) {\n                coreCall(str, chunkOffset, chunkLen, msgLen, false);\n            }\n            coreCall(str, chunkOffset, msgLen - chunkOffset, msgLen, true);\n            return getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n        };\n        // The digest and digestFrom* interface returns the hash digest\n        // as a hex string.\n        this.digest = this.digestFromString = this.digestFromBuffer = this.digestFromArrayBuffer = function (str) {\n            return hex(rawDigest(str).buffer);\n        };\n        this.resetState = function () {\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return this;\n        };\n        this.append = function (chunk) {\n            var chunkOffset = 0;\n            var chunkLen = chunk.byteLength || chunk.length || chunk.size || 0;\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var inputLen;\n            self$2.offset += chunkLen;\n            while (chunkOffset < chunkLen) {\n                inputLen = Math.min(chunkLen - chunkOffset, self$2.maxChunkLen - turnOffset);\n                write(chunk, chunkOffset, inputLen, turnOffset);\n                turnOffset += inputLen;\n                chunkOffset += inputLen;\n                if (turnOffset === self$2.maxChunkLen) {\n                    self$2.core.hash(self$2.maxChunkLen, self$2.padMaxChunkLen);\n                    turnOffset = 0;\n                }\n            }\n            return this;\n        };\n        this.getState = function () {\n            var turnOffset = self$2.offset % self$2.maxChunkLen;\n            var heap;\n            if (!turnOffset) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                heap = io.buffer.slice(io.byteOffset, io.byteOffset + io.byteLength);\n            } else {\n                heap = self$2.heap.slice(0);\n            }\n            return {\n                offset: self$2.offset,\n                heap: heap\n            };\n        };\n        this.setState = function (state) {\n            self$2.offset = state.offset;\n            if (state.heap.byteLength === 20) {\n                var io = new Int32Array(self$2.heap, self$2.padMaxChunkLen + 320, 5);\n                io.set(new Int32Array(state.heap));\n            } else {\n                self$2.h32.set(new Int32Array(state.heap));\n            }\n            return this;\n        };\n        var rawEnd = this.rawEnd = function () {\n            var msgLen = self$2.offset;\n            var chunkLen = msgLen % self$2.maxChunkLen;\n            var padChunkLen = padChunk(chunkLen, msgLen);\n            self$2.core.hash(padChunkLen, self$2.padMaxChunkLen);\n            var result = getRawDigest(self$2.heap, self$2.padMaxChunkLen);\n            initState(self$2.heap, self$2.padMaxChunkLen);\n            return result;\n        };\n        this.end = function () {\n            return hex(rawEnd().buffer);\n        };\n    }\n    ;\n    // The low-level RushCore module provides the heart of Rusha,\n    // a high-speed sha1 implementation working on an Int32Array heap.\n    // At first glance, the implementation seems complicated, however\n    // with the SHA1 spec at hand, it is obvious this almost a textbook\n    // implementation that has a few functions hand-inlined and a few loops\n    // hand-unrolled.\n    Rusha._core = function RushaCore(stdlib, foreign, heap) {\n        'use asm';\n        var H = new stdlib.Int32Array(heap);\n        function hash(k, x) {\n            // k in bytes\n            k = k | 0;\n            x = x | 0;\n            var i = 0, j = 0, y0 = 0, z0 = 0, y1 = 0, z1 = 0, y2 = 0, z2 = 0, y3 = 0, z3 = 0, y4 = 0, z4 = 0, t0 = 0, t1 = 0;\n            y0 = H[x + 320 >> 2] | 0;\n            y1 = H[x + 324 >> 2] | 0;\n            y2 = H[x + 328 >> 2] | 0;\n            y3 = H[x + 332 >> 2] | 0;\n            y4 = H[x + 336 >> 2] | 0;\n            for (i = 0; (i | 0) < (k | 0); i = i + 64 | 0) {\n                z0 = y0;\n                z1 = y1;\n                z2 = y2;\n                z3 = y3;\n                z4 = y4;\n                for (j = 0; (j | 0) < 64; j = j + 4 | 0) {\n                    t1 = H[i + j >> 2] | 0;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[k + j >> 2] = t1;\n                }\n                for (j = k + 64 | 0; (j | 0) < (k + 80 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | ~y1 & y3) | 0) + ((t1 + y4 | 0) + 1518500249 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 80 | 0; (j | 0) < (k + 160 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) + 1859775393 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 160 | 0; (j | 0) < (k + 240 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 & y2 | y1 & y3 | y2 & y3) | 0) + ((t1 + y4 | 0) - 1894007588 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                for (j = k + 240 | 0; (j | 0) < (k + 320 | 0); j = j + 4 | 0) {\n                    t1 = (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) << 1 | (H[j - 12 >> 2] ^ H[j - 32 >> 2] ^ H[j - 56 >> 2] ^ H[j - 64 >> 2]) >>> 31;\n                    t0 = ((y0 << 5 | y0 >>> 27) + (y1 ^ y2 ^ y3) | 0) + ((t1 + y4 | 0) - 899497514 | 0) | 0;\n                    y4 = y3;\n                    y3 = y2;\n                    y2 = y1 << 30 | y1 >>> 2;\n                    y1 = y0;\n                    y0 = t0;\n                    H[j >> 2] = t1;\n                }\n                y0 = y0 + z0 | 0;\n                y1 = y1 + z1 | 0;\n                y2 = y2 + z2 | 0;\n                y3 = y3 + z3 | 0;\n                y4 = y4 + z4 | 0;\n            }\n            H[x + 320 >> 2] = y0;\n            H[x + 324 >> 2] = y1;\n            H[x + 328 >> 2] = y2;\n            H[x + 332 >> 2] = y3;\n            H[x + 336 >> 2] = y4;\n        }\n        return { hash: hash };\n    };\n    if (// If we'e running in Node.JS, export a module.\n        typeof module !== 'undefined') {\n        module.exports = Rusha;\n    } else if (// If we're running in a DOM context, export\n        // the Rusha object to toplevel.\n        typeof window !== 'undefined') {\n        window.Rusha = Rusha;\n    }\n    if (// If we're running in a webworker, accept\n        // messages containing a jobid and a buffer\n        // or blob object, and return the hash result.\n        typeof FileReaderSync !== 'undefined') {\n        var reader = new FileReaderSync();\n        var hashData = function hash(hasher, data, cb) {\n            try {\n                return cb(null, hasher.digest(data));\n            } catch (e) {\n                return cb(e);\n            }\n        };\n        var hashFile = function hashArrayBuffer(hasher, readTotal, blockSize, file, cb) {\n            var reader$2 = new self.FileReader();\n            reader$2.onloadend = function onloadend() {\n                var buffer = reader$2.result;\n                readTotal += reader$2.result.byteLength;\n                try {\n                    hasher.append(buffer);\n                } catch (e) {\n                    cb(e);\n                    return;\n                }\n                if (readTotal < file.size) {\n                    hashFile(hasher, readTotal, blockSize, file, cb);\n                } else {\n                    cb(null, hasher.end());\n                }\n            };\n            reader$2.readAsArrayBuffer(file.slice(readTotal, readTotal + blockSize));\n        };\n        self.onmessage = function onMessage(event) {\n            var data = event.data.data, file = event.data.file, id = event.data.id;\n            if (typeof id === 'undefined')\n                return;\n            if (!file && !data)\n                return;\n            var blockSize = event.data.blockSize || 4 * 1024 * 1024;\n            var hasher = new Rusha(blockSize);\n            hasher.resetState();\n            var done = function done$2(err, hash) {\n                if (!err) {\n                    self.postMessage({\n                        id: id,\n                        hash: hash\n                    });\n                } else {\n                    self.postMessage({\n                        id: id,\n                        error: err.name\n                    });\n                }\n            };\n            if (data)\n                hashData(hasher, data, done);\n            if (file)\n                hashFile(hasher, 0, blockSize, file, done);\n        };\n    }\n}());";
},function(e,t,n){"use strict";var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(83),a=function e(t,n){var r=this;(0,i.default)(this,e),this.apiUrl=t,this.authProvider=n,this.clients={},this.getMediaClient=function(e){return r.getStoredClient(e)||r.createNewClient(e)},this.createNewClient=function(e){var t=new o.MediaClient(r.apiUrl,r.authProvider,e);return r.setClient(t,e),t},this.getStoredClient=function(e){return void 0===e?r.clientForAbsentCollection:r.clients[e]},this.setClient=function(e,t){return void 0===t?void(r.clientForAbsentCollection=e):void(r.clients[t]=e)}};t.MediaClientPool=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(51),c=n(83),l=n(269),f=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"createUpload",value:function(e){var t={httpMethod:"POST",mediaApiMethod:"upload",parameters:{createUpTo:1,safariCacheBuster:u.v4()}};return l.retryTask(function(){return e.call(t,c.addAuthToQueryParameters).then(function(e){var t=e.data;if(0===t.length)throw new Error("No uploads were created");return t[0].id})},5,1e3,2)}},{key:"appendChunksToUpload",value:function(e,t,n,r){var i={httpMethod:"PUT",mediaApiMethod:"upload/"+t+"/chunks",data:{chunks:n,offset:r}};return e.call(i)}},{key:"createFileFromUpload",value:function(e,t,n,r,i){var o={httpMethod:"POST",mediaApiMethod:"file/upload",parameters:i?{collection:i}:{},data:{name:t,mimeType:n,uploadId:r}};return e.call(o).then(function(e){return e.data.id})}},{key:"pollForFileMetadata",value:function(e,t,n){var r={httpMethod:"GET",mediaApiMethod:"file/"+t,parameters:n?{collection:n}:{}};return l.retryTask(function(){return e.call(r,c.addAuthToQueryParameters).then(function(e){var t=e.data;if("succeeded"===t.processingStatus||"failed"===t.processingStatus)return t;throw new Error("Processing not finished")})},10,1e3,2)}}]),e}();t.MediaApi=f},function(e,t,n){"use strict";function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new o.default(function(i,o){!function t(n,a){n>0?e().then(i).catch(function(e){setTimeout(function(){t(n-1,a*r)},a)}):e().then(i).catch(o)}(t,n)})}var i=n(21),o=function(e){return e&&e.__esModule?e:{default:e}}(i);Object.defineProperty(t,"__esModule",{value:!0}),t.retryTask=r},function(e,t){e.exports={baseUrl:"https://d2lmxj1uc02uys.cloudfront.net",usingVersions:!0,html:{popup:"./html/popup.html",popupInject:"./html/popup/popup.html",dropzone:"./html/dropzone.html",redirectUrl:"./html/link-account-handler/handler.html",userMethodsHelperUrl:"./html/user-methods-helper/helper.html"},version:"11.1.11"}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0});var o=n(305);t.default=function(e){return new i.default(function(t,n){o.fileToBase64(e).then(function(e){var r=new Image;r.src=e,r.onload=function(){return t({src:r.src,width:r.width,height:r.height})},r.onerror=n})})}},function(e,t,n){n(273),n(274),n(289),n(293),e.exports=n(36).Promise},function(e,t){},function(e,t,n){"use strict";var r=n(275)(!0);n(134)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){var r=n(84),i=n(85);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,n){e.exports=!n(37)&&!n(137)(function(){return 7!=Object.defineProperty(n(87)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(56);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){e.exports=n(27)},function(e,t,n){"use strict";var r=n(280),i=n(138),o=n(90),a={};n(27)(a,n(8)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(28),i=n(281),o=n(142),a=n(89)("IE_PROTO"),s=function(){},u=function(){var e,t=n(87)("iframe"),r=o.length;for(t.style.display="none",n(143).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(55),i=n(28),o=n(282);e.exports=n(37)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(283),i=n(142);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(57),i=n(88),o=n(285)(!1),a=n(89)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(58);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(88),i=n(139),o=n(286);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(84),i=Math.max,o=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):o(e,t)}},function(e,t,n){var r=n(57),i=n(288),o=n(89)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(85);e.exports=function(e){return Object(r(e))}},function(e,t,n){n(290);for(var r=n(13),i=n(27),o=n(38),a=n(8)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){"use strict";var r=n(291),i=n(292),o=n(38),a=n(88);e.exports=n(134)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){"use strict";var r,i,o,a=n(135),s=n(13),u=n(54),c=n(144),l=n(136),f=n(56),d=n(86),h=n(294),p=n(295),v=n(299),m=n(145).set,y=n(301)(),b=s.TypeError,g=s.process,_=s.Promise,g=s.process,w="process"==c(g),x=function(){},k=!!function(){try{var e=_.resolve(1),t=(e.constructor={})[n(8)("species")]=function(e){e(x,x)};return(w||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(e){}}(),A=function(e,t){return e===t||e===_&&t===o},S=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},P=function(e){return A(_,e)?new O(e):new i(e)},O=i=function(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw b("Bad Promise constructor");t=e,n=r}),this.resolve=d(t),this.reject=d(n)},I=function(e){try{e()}catch(e){return{error:e}}},E=function(e,t){if(!e._n){e._n=!0;var n=e._c;y(function(){for(var r=e._v,i=1==e._s,o=0;n.length>o;)!function(t){var n,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&C(e),e._h=1),!0===a?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===t.promise?u(b("Promise-chain cycle")):(o=S(n))?o.call(n,s,u):s(n)):u(r)}catch(e){u(e)}}(n[o++]);e._c=[],e._n=!1,t&&!e._h&&j(e)})}},j=function(e){m.call(s,function(){var t,n,r,i=e._v;if(T(e)&&(t=I(function(){w?g.emit("unhandledRejection",i,e):(n=s.onunhandledrejection)?n({promise:e,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=w||T(e)?2:1),e._a=void 0,t)throw t.error})},T=function(e){if(1==e._h)return!1;for(var t,n=e._a||e._c,r=0;n.length>r;)if(t=n[r++],t.fail||!T(t.promise))return!1;return!0},C=function(e){m.call(s,function(){var t;w?g.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},M=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),E(t,!0))},U=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw b("Promise can't be resolved itself");(t=S(e))?y(function(){var r={_w:n,_d:!1};try{t.call(e,u(U,r,1),u(M,r,1))}catch(e){M.call(r,e)}}):(n._v=e,n._s=1,E(n,!1))}catch(e){M.call({_w:n,_d:!1},e)}}};k||(_=function(e){h(this,_,"Promise","_h"),d(e),r.call(this);try{e(u(U,this,1),u(M,this,1))}catch(e){M.call(this,e)}},r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(302)(_.prototype,{then:function(e,t){var n=P(v(this,_));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=w?g.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&E(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),O=function(){var e=new r;this.promise=e,this.resolve=u(U,e,1),this.reject=u(M,e,1)}),l(l.G+l.W+l.F*!k,{Promise:_}),n(90)(_,"Promise"),n(303)("Promise"),o=n(36).Promise,l(l.S+l.F*!k,"Promise",{reject:function(e){var t=P(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(a||!k),"Promise",{resolve:function(e){if(e instanceof _&&A(e.constructor,this))return e;var t=P(this);return(0,t.resolve)(e),t.promise}}),l(l.S+l.F*!(k&&n(304)(function(e){_.all(e).catch(x)})),"Promise",{all:function(e){var t=this,n=P(t),r=n.resolve,i=n.reject,o=I(function(){var n=[],o=0,a=1;p(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o&&i(o.error),n.promise},race:function(e){var t=this,n=P(t),r=n.reject,i=I(function(){p(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i&&r(i.error),n.promise}})},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(54),i=n(296),o=n(297),a=n(28),s=n(139),u=n(298),c={},l={},t=e.exports=function(e,t,n,f,d){var h,p,v,m,y=d?function(){return e}:u(e),b=r(n,f,t?2:1),g=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(o(y)){for(h=s(e.length);h>g;g++)if((m=t?b(a(p=e[g])[0],p[1]):b(e[g]))===c||m===l)return m}else for(v=y.call(e);!(p=v.next()).done;)if((m=i(v,b,p.value,t))===c||m===l)return m};t.BREAK=c,t.RETURN=l},function(e,t,n){var r=n(28);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(38),i=n(8)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(144),i=n(8)("iterator"),o=n(38);e.exports=n(36).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t,n){var r=n(28),i=n(86),o=n(8)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||void 0==(n=r(a)[o])?t:i(n)}},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(13),i=n(145).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(58)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=l=!l}}else if(s&&s.resolve){var d=s.resolve();n=function(){d.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(27);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){"use strict";var r=n(13),i=n(36),o=n(55),a=n(37),s=n(8)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){var r=n(8)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){"use strict";var r=n(133),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.fileToBase64=function(e){return new i.default(function(t,n){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onabort=function(){return n("abort")},r.onerror=n,r.readAsDataURL(e)})}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var p=n(48),v=n(25),m=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.default)(this,t);var i=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return i.browseElem=document.createElement("INPUT"),i.browseElem.setAttribute("type","file"),i.browseElem.style.display="none",r.multiple&&i.browseElem.setAttribute("multiple",""),r.fileExtensions&&i.browseElem.setAttribute("accept",r.fileExtensions.join(",")),document.body.appendChild(i.browseElem),i.uploadService.addBrowse(i.browseElem),i.context.trackEvent(new v.MPBrowserLoaded),i}return(0,h.default)(t,e),(0,c.default)(t,[{key:"browse",value:function(){this.browseElem.click()}},{key:"teardown",value:function(){var e=this.browseElem.parentNode;e&&e.removeChild(this.browseElem)}}]),t}(p.MediaLocalUpload);t.Browser=m},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerPopup{display:none;position:fixed;z-index:2147483647;left:0;top:0;width:100%;height:100%;background-color:rgba(9,30,66,.44);transition:opacity .2s;transition-delay:.1s}.mediaPickerPopup .aui-dialog2-header{height:50px!important}.mediaPickerPopup .aui-dialog2-content{padding:0!important;height:100%;position:relative!important;overflow:hidden!important}.mediaPickerPopup .aui-dialog2-content iframe{width:100%;height:100%;border-width:0;position:absolute}",""])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(16),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u),l=n(19),f=r(l),d=n(20),h=r(d);Object.defineProperty(t,"__esModule",{value:!0});var p=n(48),v=n(25),m=n(147),y=function(e){function t(e,n){(0,s.default)(this,t);var r=(0,f.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e,n));return r.pasteHandler=function(e){for(var t=e.clipboardData.files,n=0;n<t.length;++n){var i=t[n];r.uploadService.addFile(i)}},r.context.trackEvent(new v.MPClipboardLoaded),r}return(0,h.default)(t,e),(0,c.default)(t,[{key:"activate",value:function(){var e=this;m(function(){e.deactivate(),document.addEventListener("paste",e.pasteHandler,!1)})}},{key:"deactivate",value:function(){document.removeEventListener("paste",this.pasteHandler)}}]),t}(p.MediaLocalUpload);t.Clipboard=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(16),s=r(a),u=n(0),c=r(u),l=n(1),f=r(l),d=n(19),h=r(d),p=n(20),v=r(p);Object.defineProperty(t,"__esModule",{value:!0}),n(310);var m=n(80),y=n(48),b=n(22),g=n(25),_=n(148),w=n(312),x=function(e){return[].slice.call(e,0)},k=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,c.default)(this,t);var i=(0,h.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e,n));i.onDragOver=function(e){if(e.preventDefault(),i.instance&&t.dragContainsFiles(e)){var n=e.dataTransfer,r=void 0;try{r=n.effectAllowed}catch(e){}n.dropEffect="move"===r||"linkMove"===r?"move":"copy",i.instance.classList.add("active");var o=i.getDraggedItemsLength(n);i.emitDragOver({length:o})}},i.onDragLeave=function(e){i.instance&&(e.preventDefault(),i.instance.classList.remove("active"),i.emitDragLeave())},i.onDrop=function(e){var n=i.instance;n&&t.dragContainsFiles(e)&&(n.classList.remove("active"),i.emit("drop",void 0),i.emitDragLeave())};var o=r;return i.container=o.container||document.body,i.headless=o.headless||!1,i.uiActive=!1,i.context.trackEvent(new g.MPDropzoneLoaded),i}return(0,v.default)(t,e),(0,f.default)(t,[{key:"activate",value:function(){var e=this;return w.whenDomReady.then(function(){if(e.container=e.container||document.body,!e.instance)return e.createInstance()}).then(function(){e.deactivate(),e.container.addEventListener("dragover",e.onDragOver,!1),e.container.addEventListener("dragleave",e.onDragLeave,!1),e.uploadService.addDropzone(e.container)})}},{key:"deactivate",value:function(){this.container.removeEventListener("dragover",this.onDragOver,!1),this.container.removeEventListener("dragleave",this.onDragLeave,!1),this.uploadService.removeDropzone()}},{key:"getDraggedItemsLength",value:function(e){return e.items?x(e.items).filter(function(e){return"file"===e.kind}).length:e.files.length}},{key:"createInstance",value:function(){var e=this;return this.getDropzoneUI().then(function(t){e.instance=t,e.container.appendChild(e.instance),e.uploadService.on("file-dropped",e.onDrop)})}},{key:"getDropzoneUI",value:function(){var e=this;return this.headless?o.default.resolve(document.createElement("DIV")):new o.default(function(t,n){return m.default.get(e.getStaticAssetUrl("dropzone")).then(function(e){t(_.parseHTML(e.data))},function(e){b.handleError("dropzone_load_fail",e),n(e)})})}},{key:"emitDragOver",value:function(e){this.uiActive||(this.uiActive=!0,this.emit("drag-enter",e))}},{key:"emitDragLeave",value:function(){var e=this;this.uiActive&&(this.uiActive=!1,window.setTimeout(function(){e.uiActive||e.emit("drag-leave",void 0)},50))}}],[{key:"dragContainsFiles",value:function(e){var t=e.dataTransfer.types;return x(t).indexOf("Files")>-1}}]),t}(y.MediaLocalUpload);t.Dropzone=k},function(e,t,n){var r=n(311);"string"==typeof r&&(r=[[e.i,r,""]]),n(40)(r,{}),r.locals&&(e.exports=r.locals)},function(e,t,n){t=e.exports=n(39)(),t.push([e.i,".mediaPickerDropzone{position:fixed;left:0;top:0;width:100%;height:0;overflow:hidden;margin:auto;font-family:Source Sans Pro,Helvetica Neue,Helvetica,Arial,sans-serif;pointer-events:none}@keyframes atlassian-doc{0%{transform:rotate(0deg)}to{transform:rotate(-18deg)}}@keyframes spreadsheet{0%{transform:rotate(0deg)}to{transform:rotate(20deg)}}.mediaPickerDropzone .mp-content{width:100vw;height:100vh}.mediaPickerDropzone .mp-content .mp-circle{transition:width .2s ease,height .2s ease,top .2s ease,left .2s ease;width:0;height:0;transform:scale(1);background-color:#0052cc;border-radius:50%;margin:auto;position:absolute;overflow:hidden;color:#fff;top:50%;left:50%}.mediaPickerDropzone .mp-content .mp-circle .mp-title{font-weight:500;font-size:40px;margin-bottom:20px}.mediaPickerDropzone .mp-content .mp-circle .mp-description{font-size:16px;font-weight:500}.mediaPickerDropzone .mp-content .mp-circle .mp-text{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Fira Sans,Droid Sans,Helvetica Neue,sans-serif;left:0;right:0;top:130px;position:absolute;text-align:center}.mediaPickerDropzone .mp-content .mp-circle .mp-text span{display:block}.mediaPickerDropzone .mp-content .mp-circle .mp-fileIcon{width:auto;height:200px;position:absolute;bottom:0;margin:auto;transform-origin:bottom;left:150px}.mediaPickerDropzone.active{height:100%;background-color:hsla(0,0%,100%,.7);position:fixed;z-index:500}.mediaPickerDropzone.active .mp-circle{width:500px;height:500px;top:calc(50% - 250px);left:calc(50% - 250px)}.mediaPickerDropzone.active .mp-circle .mp-iconAtlassianDoc{left:100px;width:183px;height:212px;bottom:-15px;animation:atlassian-doc .75s .2s forwards}.mediaPickerDropzone.active .mp-circle .mp-iconOtherDoc{left:170px;z-index:1;width:173px;height:224px}.mediaPickerDropzone.active .mp-circle .mp-iconPageSpreadsheet{left:250px;animation:spreadsheet .75s .2s forwards}",""])},function(e,t,n){"use strict";var r=n(21),i=function(e){return e&&e.__esModule?e:{default:e}}(r);Object.defineProperty(t,"__esModule",{value:!0}),t.whenDomReady=function(){return"complete"===document.readyState?i.default.resolve():new i.default(function(e){window.addEventListener("load",e)})}()},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.id,n=e.name,r=e.size,i=e.creationDate,o=e.type,a=e.publicId;return new S.MediaFile(t,n,r,i,o,a)}var o=n(21),a=r(o),s=n(50),u=r(s),c=n(16),l=r(c),f=n(0),d=r(f),h=n(1),p=r(h),v=n(19),m=r(v),y=n(20),b=r(y);Object.defineProperty(t,"__esModule",{value:!0}),n(146);var g=n(51),_=n(132),w=n(314),x=n(22),k=n(315),A=n(25),S=n(129),P=n(128),O=n(131),I=n(147),E=n(148),j=n(316);t.USER_RECENTS_COLLECTION="recents";var T=function(e){function t(e,n,r){var i=r.userAuthProvider,o=r.container;(0,d.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.config=n,a.context.trackEvent(new A.MPPopupLoaded),a.uploadParams=(0,u.default)({},O.defaultUploadParams,n.uploadParams),a.userAuthProvider=i,a.container=o||document.body,I(function(){a.init()}),a}return(0,b.default)(t,e),(0,p.default)(t,[{key:"init",value:function(){this.popupReady=!1;var e=g.v4(),t={channelName:e,apiUrl:this.config.apiUrl,redirectUrl:this.getStaticAssetUrl("redirectUrl")};this.instance=this._createInstance(t),this.container.appendChild(this.instance),this.popupIframe=this._createInteractionLayer(e)}},{key:"show",value:function(){var e=this;return this.instance||this.init(),this.config.authProvider({collectionName:this.uploadParams.collection}).then(function(t){return e.popupIframe.setTenant({auth:t,uploadParams:e.uploadParams}),e.popupIframe.resetView(),e._show(),a.default.resolve()})}},{key:"cancel",value:function(e){this.popupIframe.cancelUpload(e)}},{key:"teardown",value:function(){this.instance&&(this.instance.parentNode&&this.instance.parentNode.removeChild(this.instance),delete this.instance),this.localFileBrowser&&this.localFileBrowser.teardown()}},{key:"hide",value:function(){this.instance&&(this.instance.style.display="none"),this.emit("closed",void 0),this.context.trackEvent(new A.MPPopupHidden)}},{key:"setUploadParams",value:function(e){this.uploadParams=(0,u.default)({},O.defaultUploadParams,e)}},{key:"_show",value:function(){this.popupReady&&(this.instance.style.display="block",this.context.trackEvent(new A.MPPopupShown))}},{key:"_createInstance",value:function(e){var t=e.apiUrl,n=e.channelName,r=e.redirectUrl,i="?channelName="+encodeURIComponent(n)+"&apiUrl="+encodeURIComponent(t)+"&redirectUrl="+encodeURIComponent(r);return E.parseHTML('<div class="mediaPickerPopup mpAUI">\n        <section role="dialog" id="demo-dialog" class="aui-layer aui-dialog2 aui-dialog2-large" aria-hidden="false">\n            <div class="aui-dialog2-content">\n                <iframe class="mpApp" src="'+this.getStaticAssetUrl("popupInject")+i+'"></iframe>\n            </div>\n        </section>\n      </div>')}},{key:"_createInteractionLayer",value:function(e){var t=this,n=this.instance.querySelector(".mpApp"),r=n.contentWindow,o=w({window:r,scope:e});this.messageService=new j.PostisMessageService(o),this.messageService.handle("uploadFinalizeReady",function(e){return new a.default(function(n){t.emitUploadFinalizeReady(i(e),function(){return n()})})}),this.messageService.handle("getUserAuth",function(e){return t.userAuthProvider(e)});var s=new k.InteractionLayer(this,o);return s.on("uploadEvent",function(e){switch(e.name){case"upload-start":t.emitUploadStart(i(e.data.file));break;case"upload-status-update":t.emitUploadProgress(i(e.data.file),e.data.progress);break;case"upload-preview-update":var n=e.data,r=n.file,o=n.preview;t.emitUploadPreviewUpdate(i(r),o);break;case"upload-processing":t.emitUploadProcessing(i(e.data.file));break;case"upload-end":t.emitUploadEnd(i(e.data.file),e.data.public);break;case"upload-error":var a=e.data,s=a.file,u=a.error;t.emitUploadError(i(s),new P.MediaError(u.fileId,u.name,u.description)),x.handleError(u.name,u.description)}}),s.on("ready",function(){t.emit("ready",void 0),t.popupReady=!0}),s.initProtocol(),s}}]),t}(_.MPComponent);t.Popup=T},function(e,t){function n(e){var t,n=e.scope,r=e.window,i=e.windowForEventListening||window,o={},a=[],s={},u=!1,c=function(e){var t;try{t=JSON.parse(e.data)}catch(e){return}if(t.postis&&t.scope===n){var r=o[t.method];if(r)for(var i=0;i<r.length;i++)r[i].call(null,t.params);else s[t.method]=s[t.method]||[],s[t.method].push(t.params)}};i.addEventListener("message",c,!1);var l={listen:function(e,t){o[e]=o[e]||[],o[e].push(t);var n=s[e];if(n)for(var r=o[e],i=0;i<r.length;i++)for(var a=0;a<n.length;a++)r[i].call(null,n[a]);delete s[e]},send:function(e){var t=e.method;(u||"__ready__"===e.method)&&r&&"function"==typeof r.postMessage?r.postMessage(JSON.stringify({postis:!0,scope:n,method:t,params:e.params}),"*"):a.push(e)},ready:function(e){u?e():setTimeout(function(){l.ready(e)},50)},destroy:function(e){clearInterval(t),u=!1,i&&"function"==typeof i.removeEventListener&&i.removeEventListener("message",c),e&&e()}},f=+new Date+Math.random()+"";return t=setInterval(function(){l.send({method:"__ready__",params:f})},50),l.listen("__ready__",function(e){if(e===f){clearInterval(t),u=!0;for(var n=0;n<a.length;n++)l.send(a[n]);a=[]}else l.send({method:"__ready__",params:e})}),l}e.exports=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(0),o=r(i),a=n(1),s=r(a);Object.defineProperty(t,"__esModule",{value:!0});var u=n(77),c=function(){function e(t,n){(0,o.default)(this,e),this.popup=t,this.channel=n,this.sanitizeUploadParams=function(e){return{collection:e.collection,fetchMetadata:e.fetchMetadata,autoFinalize:e.autoFinalize}},this.emitter=new u.EventEmitter2}return(0,s.default)(e,[{key:"initProtocol",value:function(){var e=this;this.channel.ready(function(){e.channel.listen("hidePopup",function(){e.popup.hide()}),e.channel.listen("showPopup",function(){e.popup.show()}),e.channel.listen("ready",function(){e.emit("ready",void 0)}),e.channel.listen("uploadEvent",function(t){e.emit("uploadEvent",t.event)})})}},{key:"resetView",value:function(){this.channel.send({method:"resetView"})}},{key:"cancelUpload",value:function(e){this.channel.send({method:"cancelUpload",params:{uploadId:e}})}},{key:"setTenant",value:function(e){var t=e.auth,n=e.uploadParams;this.channel.send({method:"setTenant",params:{auth:t,uploadParams:this.sanitizeUploadParams(n)}})}},{key:"on",value:function(e,t){this.emitter.on(e,t)}},{key:"emit",value:function(e,t){this.emitter.emit(e,t)}}]),e}();t.InteractionLayer=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),a=n(0),s=r(a),u=n(1),c=r(u);Object.defineProperty(t,"__esModule",{value:!0});var l=n(115);n(317),n(318);var f=n(51),d=function(){function e(t){(0,s.default)(this,e),this.channel=t,this.requests=this.observeChannelRequests(t),this.responses=this.observeChannelResponses(t)}return(0,c.default)(e,[{key:"post",value:function(e){var t=this;return new o.default(function(n,r){var i=f.v4(),o=t.responses.filter(function(e){return e.traceId===i}).subscribe({next:function(e){var t=e.response,i=e.error;i?r(i):n(t),o.unsubscribe()}});t.channel.send({method:"REQUEST",params:{traceId:i,message:e}})})}},{key:"handle",value:function(e,t){var n=this;this.requests.filter(function(t){return t.message.type===e}).subscribe({next:function(e){var r=e.traceId,i=e.message;t(i.payload).then(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,response:e}})}).catch(function(e){n.channel.send({method:"RESPONSE",params:{traceId:r,error:e}})})}})}},{key:"observeChannelRequests",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("REQUEST",function(e){t.next(e)})}),t}},{key:"observeChannelResponses",value:function(e){var t=new l.Subject;return e.ready(function(){e.listen("RESPONSE",function(e){t.next(e)})}),t}}]),e}();t.PostisMessageService=d},function(e,t){e.exports=n(73)},function(e,t){e.exports=n(75)}]))},function(e,t,n){"use strict";var r=n(27),i=n(28),o=n(39),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,o=i.toSubscriber(e,t,n);if(r?r.call(o,this.source):o.add(this.source?this._subscribe(o):this._trySubscribe(o)),o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.syncErrorThrown=!0,e.syncErrorValue=t,e.error(t)}},e.prototype.forEach=function(e,t){var n=this;if(t||(r.root.Rx&&r.root.Rx.config&&r.root.Rx.config.Promise?t=r.root.Rx.config.Promise:r.root.Promise&&(t=r.root.Promise)),!t)throw new Error("no Promise impl found");return new t(function(t,r){var i;i=n.subscribe(function(t){if(i)try{e(t)}catch(e){r(e),i.unsubscribe()}else e(t)},r,t)})},e.prototype._subscribe=function(e){return this.source.subscribe(e)},e.prototype[o.observable]=function(){return this},e.create=function(t){return new e(t)},e}();t.Observable=a},function(e,t,n){(function(e){"use strict";var n="undefined"!=typeof window&&window,r="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,i="undefined"!=typeof e&&e,o=n||i||r;t.root=o,function(){if(!o)throw new Error("RxJS could not find any global context (window, self, global)")}()}).call(t,n(18))},function(e,t,n){"use strict";function r(e,t,n){if(e){if(e instanceof i.Subscriber)return e;if(e[o.rxSubscriber])return e[o.rxSubscriber]()}return e||t||n?new i.Subscriber(e,t,n):new i.Subscriber(a.empty)}var i=n(29),o=n(38),a=n(37);t.toSubscriber=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(30),o=n(31),a=n(37),s=n(38),u=function(e){function t(n,r,i){switch(e.call(this),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a.empty;break;case 1:if(!n){this.destination=a.empty;break}if("object"==typeof n){n instanceof t?(this.destination=n,this.destination.add(this)):(this.syncErrorThrowable=!0,this.destination=new c(this,n));break}default:this.syncErrorThrowable=!0,this.destination=new c(this,n,r,i)}}return r(t,e),t.prototype[s.rxSubscriber]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},
t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this,t=e._parent,n=e._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=n,this},t}(o.Subscription);t.Subscriber=u;var c=function(e){function t(t,n,r,o){e.call(this),this._parentSubscriber=t;var s,u=this;i.isFunction(n)?s=n:n&&(s=n.next,r=n.error,o=n.complete,n!==a.empty&&(u=Object.create(n),i.isFunction(u.unsubscribe)&&this.add(u.unsubscribe.bind(u)),u.unsubscribe=this.unsubscribe.bind(this))),this._context=u,this._next=s,this._error=r,this._complete=o}return r(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber;if(this._error)t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else{if(!t.syncErrorThrowable)throw this.unsubscribe(),e;t.syncErrorValue=e,t.syncErrorThrown=!0,this.unsubscribe()}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){throw this.unsubscribe(),e}},t.prototype.__tryOrSetError=function(e,t,n){try{t.call(this._context,n)}catch(t){return e.syncErrorValue=t,e.syncErrorThrown=!0,!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(u)},function(e,t){"use strict";function n(e){return"function"==typeof e}t.isFunction=n},function(e,t,n){"use strict";function r(e){return e.reduce(function(e,t){return e.concat(t instanceof c.UnsubscriptionError?t.errors:t)},[])}var i=n(32),o=n(33),a=n(30),s=n(34),u=n(35),c=n(36),l=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var n=this,l=n._parent,f=n._parents,d=n._unsubscribe,h=n._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var p=-1,v=f?f.length:0;l;)l.remove(this),l=++p<v&&f[p]||null;if(a.isFunction(d)){var m=s.tryCatch(d).call(this);m===u.errorObject&&(t=!0,e=e||(u.errorObject.e instanceof c.UnsubscriptionError?r(u.errorObject.e.errors):[u.errorObject.e]))}if(i.isArray(h))for(p=-1,v=h.length;++p<v;){var y=h[p];if(o.isObject(y)){var m=s.tryCatch(y.unsubscribe).call(y);if(m===u.errorObject){t=!0,e=e||[];var b=u.errorObject.e;b instanceof c.UnsubscriptionError?e=e.concat(r(b.errors)):e.push(b)}}}if(t)throw new c.UnsubscriptionError(e)}},e.prototype.add=function(t){if(!t||t===e.EMPTY)return e.EMPTY;if(t===this)return this;var n=t;switch(typeof t){case"function":n=new e(t);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var r=n;n=new e,n._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=this._subscriptions||(this._subscriptions=[]);return i.push(n),n._addParent(this),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);n!==-1&&t.splice(n,1)}},e.prototype._addParent=function(e){var t=this,n=t._parent,r=t._parents;n&&n!==e?r?r.indexOf(e)===-1&&r.push(e):this._parents=[e]:this._parent=e},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();t.Subscription=l},function(e,t){"use strict";t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return null!=e&&"object"==typeof e}t.isObject=n},function(e,t,n){"use strict";function r(){try{return o.apply(this,arguments)}catch(e){return a.errorObject.e=e,a.errorObject}}function i(e){return o=e,r}var o,a=n(35);t.tryCatch=i},function(e,t){"use strict";t.errorObject={e:{}}},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(t){e.call(this),this.errors=t;var n=Error.call(this,t?t.length+" errors occurred during unsubscription:\n  "+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"");this.name=n.name="UnsubscriptionError",this.stack=n.stack,this.message=n.message}return n(t,e),t}(Error);t.UnsubscriptionError=r},function(e,t){"use strict";t.empty={closed:!0,next:function(e){},error:function(e){throw e},complete:function(){}}},function(e,t,n){"use strict";var r=n(27),i=r.root.Symbol;t.rxSubscriber="function"==typeof i&&"function"==typeof i.for?i.for("rxSubscriber"):"@@rxSubscriber",t.$$rxSubscriber=t.rxSubscriber},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}var i=n(27);t.getSymbolObservable=r,t.observable=r(i.root),t.$$observable=t.observable},function(e,t,n){"use strict";var r=n(26),i=n(41);r.Observable.prototype.publishReplay=i.publishReplay},function(e,t,n){"use strict";function r(e,t,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===t&&(t=Number.POSITIVE_INFINITY),o.multicast.call(this,new i.ReplaySubject(e,t,n))}var i=n(42),o=n(55);t.publishReplay=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(43),o=n(46),a=n(31),s=n(53),u=n(44),c=n(45),l=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY),e.call(this),this.scheduler=r,this._events=[],this._bufferSize=t<1?1:t,this._windowTime=n<1?1:n}return r(t,e),t.prototype.next=function(t){var n=this._getNow();this._events.push(new f(n,t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,n=this._trimBufferThenGetEvents(),r=this.scheduler;if(this.closed)throw new u.ObjectUnsubscribedError;this.hasError?t=a.Subscription.EMPTY:this.isStopped?t=a.Subscription.EMPTY:(this.observers.push(e),t=new c.SubjectSubscription(this,e)),r&&e.add(e=new s.ObserveOnSubscriber(e,r));for(var i=n.length,o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r},t}(i.Subject);t.ReplaySubject=l;var f=function(){function e(e,t){this.time=e,this.value=t}return e}()},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=n(29),a=n(31),s=n(44),u=n(45),c=n(38),l=function(e){function t(t){e.call(this,t),this.destination=t}return r(t,e),t}(o.Subscriber);t.SubjectSubscriber=l;var f=function(e){function t(){e.call(this),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}return r(t,e),t.prototype[c.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new d(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new s.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new s.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new s.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),a.Subscription.EMPTY):this.isStopped?(e.complete(),a.Subscription.EMPTY):(this.observers.push(e),new u.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new i.Observable;return e.source=this,e},t.create=function(e,t){return new d(e,t)},t}(i.Observable);t.Subject=f;var d=function(e){function t(t,n){e.call(this),this.destination=t,this.source=n}return r(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){var t=this.source;return t?this.source.subscribe(e):a.Subscription.EMPTY},t}(f);t.AnonymousSubject=d},function(e,t){"use strict";var n=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},r=function(e){function t(){var t=e.call(this,"object unsubscribed");this.name=t.name="ObjectUnsubscribedError",this.stack=t.stack,this.message=t.message}return n(t,e),t}(Error);t.ObjectUnsubscribedError=r},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(31),o=function(e){function t(t,n){e.call(this),this.subject=t,this.subscriber=n,this.closed=!1}return r(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);n!==-1&&t.splice(n,1)}}},t}(i.Subscription);t.SubjectSubscription=o},function(e,t,n){"use strict";var r=n(47),i=n(50);t.queue=new i.QueueScheduler(r.QueueAction)},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(48),o=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n}return r(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),n>0?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return n>0||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(i.AsyncAction);t.QueueAction=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(27),o=n(49),a=function(e){function t(t,n){e.call(this,t,n),this.scheduler=t,this.work=n,this.pending=!1}return r(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,this.pending=!0;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),i.root.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){return void 0===n&&(n=0),null!==n&&this.delay===n&&this.pending===!1?t:i.root.clearInterval(t)&&void 0||void 0},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);return n?n:void(this.pending===!1&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null)))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,r!==-1&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(o.Action);t.AsyncAction=a},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(31),o=function(e){function t(t,n){e.call(this)}return r(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(i.Subscription);t.Action=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(51),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t}(i.AsyncScheduler);t.QueueScheduler=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(52),o=function(e){function t(){e.apply(this,arguments),this.actions=[],this.active=!1,this.scheduled=void 0}return r(t,e),t.prototype.flush=function(e){var t=this.actions;if(this.active)return void t.push(e);var n;this.active=!0;do if(n=e.execute(e.state,e.delay))break;while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}},t}(i.Scheduler);t.AsyncScheduler=o},function(e,t){"use strict";var n=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=Date.now?Date.now:function(){return+new Date},e}();t.Scheduler=n},function(e,t,n){"use strict";function r(e,t){return void 0===t&&(t=0),this.lift(new s(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29),a=n(54);t.observeOn=r;var s=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))},e}();t.ObserveOnOperator=s;var u=function(e){function t(t,n,r){void 0===r&&(r=0),e.call(this,t),this.scheduler=n,this.delay=r}return i(t,e),t.dispatch=function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.add(this.scheduler.schedule(t.dispatch,this.delay,new c(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(a.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(a.Notification.createError(e))},t.prototype._complete=function(){this.scheduleMessage(a.Notification.createComplete())},t}(o.Subscriber);t.ObserveOnSubscriber=u;var c=function(){function e(e,t){this.notification=e,this.destination=t}return e}();t.ObserveOnMessage=c},function(e,t,n){"use strict";var r=n(26),i=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){var r=this.kind;switch(r){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){var e=this.kind;switch(e){case"N":return r.Observable.of(this.value);case"E":return r.Observable.throw(this.error);case"C":return r.Observable.empty()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return"undefined"!=typeof t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",(void 0),t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",(void 0)),e}();t.Notification=i},function(e,t,n){"use strict";function r(e,t){var n;if(n="function"==typeof e?e:function(){return e},"function"==typeof t)return this.lift(new o(n,t));var r=Object.create(this,i.connectableObservableDescriptor);return r.source=this,r.subjectFactory=n,r}var i=n(56);t.multicast=r;var o=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}();t.MulticastOperator=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(43),o=n(26),a=n(29),s=n(31),u=function(e){function t(t,n){e.call(this),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}return r(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.Subscription,e.add(this.source.subscribe(new l(this.getSubject(),this))),e.closed?(this._connection=null,e=s.Subscription.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return this.lift(new f(this))},t}(o.Observable);t.ConnectableObservable=u;var c=u.prototype;t.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:c._subscribe},_isComplete:{value:c._isComplete,writable:!0},getSubject:{value:c.getSubject},connect:{value:c.connect},refCount:{value:c.refCount}};var l=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(i.SubjectSubscriber),f=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new d(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),d=function(e){function t(t,n){e.call(this,t),this.connectable=n}return r(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(!e)return void(this.connection=null);this.connectable=null;var t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()},t}(a.Subscriber)},function(e,t,n){"use strict";var r=n(26),i=n(58);r.Observable.of=i.of},function(e,t,n){"use strict";var r=n(59);t.of=r.ArrayObservable.of},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=n(60),a=n(61),s=n(62),u=function(e){function t(t,n){e.call(this),this.array=t,this.scheduler=n,n||1!==t.length||(this._isScalar=!0,this.value=t[0])}return r(t,e),t.create=function(e,n){return new t(e,n)},t.of=function(){for(var e=[],n=0;n<arguments.length;n++)e[n-0]=arguments[n];var r=e[e.length-1];s.isScheduler(r)?e.pop():r=null;var i=e.length;return i>1?new t(e,r):1===i?new o.ScalarObservable(e[0],r):new a.EmptyObservable(r)},t.dispatch=function(e){var t=e.array,n=e.index,r=e.count,i=e.subscriber;return n>=r?void i.complete():(i.next(t[n]),void(i.closed||(e.index=n+1,this.schedule(e))))},t.prototype._subscribe=function(e){var n=0,r=this.array,i=r.length,o=this.scheduler;if(o)return o.schedule(t.dispatch,0,{array:r,index:n,count:i,subscriber:e});for(var a=0;a<i&&!e.closed;a++)e.next(r[a]);e.complete()},t}(i.Observable);t.ArrayObservable=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=function(e){function t(t,n){e.call(this),this.value=t,this.scheduler=n,this._isScalar=!0,n&&(this._isScalar=!1)}return r(t,e),t.create=function(e,n){return new t(e,n)},t.dispatch=function(e){var t=e.done,n=e.value,r=e.subscriber;return t?void r.complete():(r.next(n),void(r.closed||(e.done=!0,this.schedule(e))))},t.prototype._subscribe=function(e){var n=this.value,r=this.scheduler;return r?r.schedule(t.dispatch,0,{done:!1,value:n,subscriber:e}):(e.next(n),void(e.closed||e.complete()))},t}(i.Observable);t.ScalarObservable=o},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(26),o=function(e){function t(t){e.call(this),this.scheduler=t}return r(t,e),t.create=function(e){return new t(e)},t.dispatch=function(e){var t=e.subscriber;t.complete()},t.prototype._subscribe=function(e){var n=this.scheduler;return n?n.schedule(t.dispatch,0,{subscriber:e}):void e.complete()},t}(i.Observable);t.EmptyObservable=o},function(e,t){"use strict";function n(e){return e&&"function"==typeof e.schedule}t.isScheduler=n},function(e,t,n){"use strict";var r=n(26),i=n(64);r.Observable.prototype.startWith=i.startWith},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=e[e.length-1];u.isScheduler(n)?e.pop():n=null;var r=e.length;return 1===r?s.concatStatic(new o.ScalarObservable(e[0],n),this):r>1?s.concatStatic(new i.ArrayObservable(e,n),this):s.concatStatic(new a.EmptyObservable(n),this)}var i=n(59),o=n(60),a=n(61),s=n(65),u=n(62);t.startWith=r},function(e,t,n){"use strict";function r(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];return this.lift.call(i.apply(void 0,[this].concat(e)))}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var n=null,r=e;return a.isScheduler(r[e.length-1])&&(n=r.pop()),null===n&&1===e.length&&e[0]instanceof o.Observable?e[0]:new s.ArrayObservable(e,n).lift(new u.MergeAllOperator(1))}var o=n(26),a=n(62),s=n(59),u=n(66);t.concat=r,t.concatStatic=i},function(e,t,n){"use strict";function r(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),this.lift(new s(e))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(67),a=n(68);t.mergeAll=r;var s=function(){function e(e){this.concurrent=e}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.concurrent))},e}();t.MergeAllOperator=s;var u=function(e){function t(t,n){e.call(this,t),this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?(this.active++,this.add(a.subscribeToResult(this,e))):this.buffer.push(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(o.OuterSubscriber);t.MergeAllSubscriber=u},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(29),o=function(e){function t(){e.apply(this,arguments)}return r(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(i.Subscriber);t.OuterSubscriber=o},function(e,t,n){"use strict";function r(e,t,n,r){var d=new l.InnerSubscriber(e,n,r);if(d.closed)return null;if(t instanceof u.Observable)return t._isScalar?(d.next(t.value),d.complete(),null):t.subscribe(d);if(o.isArrayLike(t)){for(var h=0,p=t.length;h<p&&!d.closed;h++)d.next(t[h]);d.closed||d.complete()}else{if(a.isPromise(t))return t.then(function(e){d.closed||(d.next(e),d.complete())},function(e){return d.error(e)}).then(null,function(e){i.root.setTimeout(function(){throw e})}),d;if(t&&"function"==typeof t[c.iterator])for(var v=t[c.iterator]();;){var m=v.next();if(m.done){d.complete();break}if(d.next(m.value),d.closed)break}else if(t&&"function"==typeof t[f.observable]){var y=t[f.observable]();if("function"==typeof y.subscribe)return y.subscribe(new l.InnerSubscriber(e,n,r));d.error(new TypeError("Provided object does not correctly implement Symbol.observable"))}else{var b=s.isObject(t)?"an invalid object":"'"+t+"'",g="You provided "+b+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.";d.error(new TypeError(g))}}return null}var i=n(27),o=n(69),a=n(70),s=n(33),u=n(26),c=n(71),l=n(72),f=n(39);t.subscribeToResult=r},function(e,t){"use strict";t.isArrayLike=function(e){return e&&"number"==typeof e.length}},function(e,t){"use strict";function n(e){return e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}t.isPromise=n},function(e,t,n){"use strict";function r(e){var t=e.Symbol;if("function"==typeof t)return t.iterator||(t.iterator=t("iterator polyfill")),t.iterator;var n=e.Set;if(n&&"function"==typeof(new n)["@@iterator"])return"@@iterator";var r=e.Map;if(r)for(var i=Object.getOwnPropertyNames(r.prototype),o=0;o<i.length;++o){var a=i[o];if("entries"!==a&&"size"!==a&&r.prototype[a]===r.prototype.entries)return a}return"@@iterator"}var i=n(27);t.symbolIteratorPonyfill=r,t.iterator=r(i.root),t.$$iterator=t.iterator},function(e,t,n){"use strict";var r=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},i=n(29),o=function(e){function t(t,n,r){e.call(this),this.parent=t,this.outerValue=n,this.outerIndex=r,this.index=0}return r(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(i.Subscriber);t.InnerSubscriber=o},function(e,t,n){"use strict";var r=n(26),i=n(74);r.Observable.prototype.filter=i.filter},function(e,t,n){"use strict";function r(e,t){return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29);t.filter=r;var a=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.predicate,this.thisArg))},e}(),s=function(e){function t(t,n,r){e.call(this,t),this.predicate=n,this.thisArg=r,this.count=0}return i(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(o.Subscriber)},function(e,t,n){"use strict";var r=n(26),i=n(76);r.Observable.prototype.map=i.map},function(e,t,n){"use strict";function r(e,t){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return this.lift(new a(e,t))}var i=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},o=n(29);t.map=r;var a=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new s(e,this.project,this.thisArg))},e}();t.MapOperator=a;var s=function(e){function t(t,n,r){e.call(this,t),this.project=n,this.count=0,this.thisArg=r||this}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(o.Subscriber)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.on("upload-start",function(e){return u.default.publish(f+"new",e)}),e.on("upload-preview-update",function(e){return u.default.publish(f+"preview",e)}),e.on("upload-status-update",function(e){return u.default.publish(f+"progress",e)}),e.on("upload-error",function(e){return u.default.publish(f+"error",e)}),e.on("upload-processing",function(e){return u.default.publish(f+"done",e)}),e.on("upload-end",function(e){return u.default.publish(f+"done",e)}),u.default.subscribe(f+"cancel",function(t){e.cancel&&e.cancel(t)}),e}function o(e){return u.default.subscribe("issue/changed",function(t){l.default.getUploadParameters().then(e.setUploadParams.bind(e))}),e}function a(e){return u.default.subscribe("project/changed",function(t){l.default.getTemporaryAttachmentUploadParameters(t).then(e.setUploadParams.bind(e))}),e}Object.defineProperty(t,"__esModule",{value:!0}),t.connect=i,t.connectToIssueChanges=o,t.connectToProjectChanges=a;var s=n(10),u=r(s),c=n(3),l=r(c),f="upload/"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(16),s=r(a),u=n(10),c=r(u),l=n(20),f=r(l);t.default=function(e,t,n,r,a){var u="create-issue/drop-zone",l=(0,o.temporaryAttachmentDropzone)(e,r).then(function(e){return e.on("drop",function(){s.default.triggerAttachRequested(u)}),e}),d=!1;return{activate:function(){return l.then(function(r){d||(d=!0,r.activate(),c.default.publish("upload/switch-context",{name:u,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},a)}),c.default.publish("project/changed",e))})},deactivate:function(){return l.then(function(e){d&&(e.deactivate(),d=!1)})},drop:function(){return l.catch(function(e){s.default.triggerInitialisationException((0,f.default)(e)),c.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(80),o=r(i),a=n(20),s=r(a),u=n(16),c=r(u),l=n(10),f=r(l),d=n(83),h=r(d),p="jira.issue.media-picker.show",v={
blockWikiEditorMarkupInsert:!1},m=void 0,y=function(e){var t="view-issue/"+e;return(0,o.default)().then(function(e){m=e}).catch(function(e){c.default.triggerInitialisationException((0,s.default)(e))}),function(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v;n&&n.preventDefault(),h.default.start({key:p,isInitial:!1,threshold:250}),c.default.triggerAttachRequested(e),m?m.show().then(function(){return h.default.end({key:p})}).then(function(){return f.default.publish("upload/switch-context",{name:t,uploadSettings:r})}).catch(function(){f.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")}):c.default.triggerUploadRequestedWhenNotInitialised()}};t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(81),a=r(o),s=n(82),u=r(s),c=n(7),l=r(c),f=function(){return u.default.then(function(){return new a.default(i.popup,i.browser)})};t.default=l.default.memoize(f)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(16),u=r(s),c=n(20),l=r(c),f=n(3),d=r(f),h=function(){function e(t,n){var r=this;i(this,e);var o=d.default.userAuthProvider;o().then(function(e){e?r.componentPromise=t(o).then(function(e){return[e,"popup"]}).catch(function(e){return e.logged||u.default.triggerGenericPopupInitialisationError((0,l.default)(e)),n().then(function(e){return[e,"browser"]})}).then(r.handleComponentInitSuccess.bind(r)).catch(r.handleComponentInitFailure.bind(r)):r.componentPromise=r.initializeBrowser.call(r,n)})}return a(e,[{key:"initializeBrowser",value:function(e){return e().then(function(e){return[e,"browser"]}).then(this.handleComponentInitSuccess.bind(this)).catch(this.handleComponentInitFailure.bind(this))}},{key:"handleComponentInitSuccess",value:function(e){var t=o(e,2),n=t[0],r=t[1];return this.mediaComponent=n,this.componentType=r,[n,r]}},{key:"handleComponentInitFailure",value:function(e){u.default.triggerInitialisationException((0,l.default)(e)),this.componentType="none"}},{key:"show",value:function(){var e=this;switch(this.componentType){case"browser":return this.showBrowser();case"popup":return this.showPopup();case"none":return Promise.reject("Component initialisation error");default:return d.default.userAuthProvider().then(function(){return e.componentPromise}).then(function(){return"popup"===e.componentType?e.showPopup():(u.default.triggerBrowserRequestedWhenNotInitialised(),Promise.resolve())})}}},{key:"showPopup",value:function(){return this.mediaComponent.show().then(function(){return u.default.triggerPopupShown()}).catch(function(e){return u.default.triggerPopupFailedToShow((0,l.default)(e)),Promise.reject(e)})}},{key:"showBrowser",value:function(){var e=this;return new Promise(function(t,n){try{e.mediaComponent.browse(),u.default.triggerAttachFileBrowserShown(),t()}catch(e){u.default.triggerAttachFileBrowserFailedToShow((0,l.default)(e)),n(e)}})}}]),e}();t.default=h},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Promise(function(e,t){"undefined"==typeof document?t("Document is not available"):/^loaded|^interactive|^complete/.test(document.readyState)?e():document.addEventListener("DOMContentLoaded",function(t){return e()})})},function(e,t){e.exports=require("internal/browser-metrics")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return _||(0,u.default)(e).then(function(e){_=e}).catch(function(e){d.default.triggerInitialisationException((0,l.default)(e))}),p.default.publish("project/changed",e),function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g;return r&&r.preventDefault(),m.default.start({key:y,isInitial:!1,threshold:250}),d.default.triggerAttachRequested(b),_?(i=a({},i,{projectId:e,formToken:t,panelNode:n}),p.default.publish("project/changed",e),_.show().then(function(){return m.default.end({key:y})}).then(function(){return p.default.publish("upload/switch-context",{name:b,uploadSettings:i})}).catch(function(){p.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})):void d.default.triggerUploadRequestedWhenNotInitialised()}}function o(){_=null}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=i,t.resetMediaComponent=o;var s=n(85),u=r(s),c=n(20),l=r(c),f=n(16),d=r(f),h=n(10),p=r(h),v=n(83),m=r(v),y="jira.create.issue.media-picker.show",b="create-issue/link",g={blockWikiEditorMarkupInsert:!1},_=void 0},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(81),a=r(o),s=n(82),u=r(s),c=n(7),l=r(c),f=function(e){var t=(0,i.temporaryAttachmentPopup)(e),n=(0,i.temporaryAttachmentBrowser)(e);return u.default.then(function(){return new a.default(t,n)})};t.default=l.default.memoize(f)},function(e,t){e.exports=require("dndattachment/integration-register")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(3),a=r(o),s=n(88),u=r(s),c=n(16),l=r(c),f=n(20),d=r(f),h=n(89),p=r(h);t.default=function(e,t,n,r){var o="view-issue/attach-screenshot",s=p.default.Deferred();(0,i.binary)(e).then(function(t){return t.on("upload-start",function(e){s.notify("init"),l.default.triggerUploadStarted(e.file.id,e.file.size)}),t.on("upload-status-update",function(e){s.notify({loaded:e.progress.absolute,total:e.progress.max})}),t.on("upload-end",function(t){return a.default.createTemporaryAttachment(e,t.file.publicId,r).then(function(e){s.resolve({id:e.attachmentId})})}),t.on("upload-processing",function(e){s.notify({loaded:e.absolute,total:e.max})}),t.on("upload-error",function(e){s.reject(null,e.name,e.description,{}),l.default.triggerUploadError(e.name,e.fileId)}),t}).then(function(e){return l.default.triggerAttachRequested(o),(0,u.default)(t).then(function(t){e.upload(t,n)})}).catch(function(e){return l.default.triggerInitialisationException((0,d.default)(e))});return s}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(){n(this)},r.readAsDataURL(e)})}},function(e,t){e.exports=require("jquery")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(2),a=n(88),s=r(a),u=n(10),c=r(u),l=n(16),f=r(l),d=n(20),h=r(d),p={blockWikiEditorMarkupInsert:!0},v=function(e,t,n){var r="create-issue/attach-screenshot",a=(0,o.connectedTemporaryBinary)(e).catch(function(e){f.default.triggerInitialisationException((0,h.default)(e))});return function(o){return a.then(function(a){return(0,s.default)(o).then(function(s){f.default.triggerAttachRequested(r),c.default.publish("project/changed",e),c.default.publish("upload/switch-context",{name:r,uploadSettings:i({},{projectId:e,formToken:t,panelNode:n},p)}),a.upload(s,o.name)})}).catch(function(){c.default.publish("media/error","Attachment upload setup failed. Try refreshing a page or contact Support.")})}};t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(10),a=r(o),s=n(92),u=r(s),c=n(109),l=r(c);n(24),t.default=function(){a.default.subscribe("upload/new",function(e){var t=e.file;u.default.startUpload(t)}),a.default.subscribe("upload/preview",function(e){var t=e.file,n=e.preview,r=l.default.decodeBase64DataUri(n.src),i=new Blob([r],{type:t.type});i.name=t.name,u.default.updatePreview(t,i)}),a.default.subscribe("upload/progress",function(e){var t=e.file,n=e.progress;u.default.progress(t,n)}),a.default.subscribe("upload/error",function(e){var t=e.error;t.isMediaError=!0,u.default.error(t)}),a.default.subscribe("upload/done",function(e){var t=e.file.publicId?e.file:i({},e.file,{publicId:e.public.id});u.default.done(t)}),a.default.subscribe("media/error",u.default.globalError)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=n(93),s=r(a),u=n(99),c=r(u),l=n(101),f=r(l),d=n(102),h=r(d),p=n(11),v=r(p),m=n(9),y=r(m),b=n(3),g=r(b),_=n(104),w=r(_),x=n(10),k=r(x),A=n(105),S=r(A),P=n(16),O=r(P),I=n(107),E=r(I),j=n(108),T=r(j),C=new Map,M=function(e){return e&&0===e.indexOf("create-issue")};t.default={startUpload:function(e){var t=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1};O.default.triggerUploadStarted(e.id,e.size);var n=this._createUpload(e);C.set(e.id,n),t.onFileUploadStarted&&t.onFileUploadStarted.call(e,e),n.then(function(e){var t=e.view,n=e.uploadContext,r=e.uploadSettings;M(n)?f.default.insertUpload(r.panelNode,t.$node):c.default.insertUpload(t.$node)}),this._validate(e)},updatePreview:function(e,t){t&&C.get(e.id)&&C.get(e.id).then(function(e){e.preview=t,e.view.loadThumbnail(t)})},progress:function(e,t){C.get(e.id)&&C.get(e.id).then(function(e){var n=e.view;return n.progress(t.portion)})},error:function(e){e.fileId&&C.get(e.fileId)&&C.get(e.fileId).then(function(t){var n=t.view,r=t.file,i=t.uploadContext,o=t.uploadSettings;e.logged||O.default.triggerUploadError(e.description,e.fileId),e.isMediaError&&(e.description="We could not connect to the file storage service. Please try again in a moment."),n.fail(e),M(i)||c.default.uploadError(r.name,e.description,function(){n.destroy(),C.delete(r.id)}),o.onFileUploadFinished&&o.onFileUploadFinished.call(r,r)})},globalError:function(e){c.default.globalError(e)},done:function(e){var t=this;O.default.triggerFileUploadFinished(e.id),C.get(e.id).then(function(n){var r=n.view,i=n.uploadContext,o=n.uploadSettings;return r.done(),M(i)?t.createTemporaryAttachment(e,o):t.createAttachment(o.issueId,e)})},createTemporaryAttachment:function(e,t){var n=this;Promise.all([t.projectId,t.formToken]).then(function(t){var n=o(t,2),r=n[0],i=n[1];if(!r||!i)throw new Error("Missing form data associated with upload");return g.default.createTemporaryAttachment(r,e.publicId,i)}).then(this.temporaryAttachmentCreated.bind(this,e)).catch(function(t){var r=t.message;O.default.triggerCantCreateTemporaryAttachmentInJIRA(r,e.id),n.error({fileId:e.id,description:r||"Couldn't create attachment"})})},createAttachment:function(e,t){var n=this;g.default.createAttachment(e,t.publicId).then(this.attachmentCreated.bind(this,t)).catch(function(e){var r=e.message;O.default.triggerCantCreateAttachmentInJIRA(r,t.id),n.error({fileId:t.id,description:r||"Couldn't create attachment"})})},attachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(r){var i=r.view,o=r.wikiFieldsContext,a=r.issueLinkHTML,s=r.uploadSettings;O.default.triggerAttachmentCreatedInJIRA(e.id),n.updateViewWithCreatedAttachment(e,t,i,s.issueId,o),c.default.notifyUserOfCreatedAttachment(e,a),C.delete(e.id)})},temporaryAttachmentCreated:function(e,t){var n=this;C.get(e.id).then(function(e){var r=e.view,i=e.wikiFieldsContext,o=e.uploadSettings,a=e.preview,s=e.file;O.default.triggerTemporaryAttachmentCreatedInJIRA(s.id),n.addAttachmentToDndStore(t.attachmentId,s,a),r.attachmentCreated(t.attachmentId),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,s.name),o.onFileUploadFinished&&o.onFileUploadFinished.call(s,s),C.delete(s.id)})},addAttachmentToDndStore:function(e,t,n){return T.default.putAttachment(e,n?n:t)},updateViewWithCreatedAttachment:function(e,t,n,r,i){var o=h.default.create(e,t,{viewType:c.default.getViewType(),issueId:r});n.$node.replaceWith(o),i.isWikiFieldFocused&&S.default.insertWikiMarkup(i.focusedField,e.name)},cancel:function(e){C.has(e.id)&&C.get(e.id).then(function(t){var n=t.uploadSettings;O.default.triggerUploadCancelled(e.id),k.default.publish("upload/cancel",e.id),C.delete(e.id),n.onFileUploadFinished&&onFileUploadFinished.call(e,e)})},_createUpload:function(e){var t=this,n=y.default.getUploadContextName(),r=y.default.getUploadContextSettings()||{blockWikiEditorMarkupInsert:!1},o=void 0;return o=M(n)?Promise.resolve(r):v.default.getIssueId().then(function(e){return i({},r,{issueId:e})}),o.then(function(r){var i=S.default.getWikiFieldsContextInformation(),o=void 0;i&&i.isWikiFieldFocused&&r.blockWikiEditorMarkupInsert&&(i.isWikiFieldFocused=!1),o=M(n)?s.default.createIssue(e,{},function(){t.cancel(e)}):s.default.viewIssue(e,{viewType:c.default.getViewType()},function(){t.cancel(e)});var a=v.default.getIssuePermlink(),u=v.default.getIssueKey(),l=E.default.getHtml(u,a);return{view:o,file:e,wikiFieldsContext:i,issueLinkHTML:l,uploadContext:n,uploadSettings:r}})},_validate:function(e){var t=w.default.validateFile(e),n=t.valid,r=t.message;n||(O.default.triggerUploadValidationFailed(r,e.id),this.error({fileId:e.id,description:r,logged:!0}),k.default.publish("upload/cancel",e.id))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(94),o=r(i),a=n(98),s=r(a);t.default={viewIssue:function(e,t,n){return new o.default(e,t,n)},createIssue:function(e,t,n){return new s.default(e,t,n)}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(95),s=r(a),u=n(96),c=r(u),l=n(97),f=r(l),d=n(89),h=r(d),p=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="attachments-upload-progress-bar"/>'),this.$node.data("viewMode",this.context.viewType),this.render()}return o(e,[{key:"render",value:function(){var e=s.default.AttachmentsUploadProgressBar({isImageType:"gallery"===this.context.viewType});"list"===this.context.viewType&&this.$node.addClass("attachment-content"),this.$node.html(e),this.renderFileProperties()}},{key:"renderFileProperties",value:function(){var e=this;"gallery"==this.context.viewType?(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode):(0,h.default)(c.default.renderAttachmentIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__upload-control span").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size))}},{key:"loadThumbnail",value:function(e){if("gallery"===this.context.viewType){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.$node.find(".upload-progress-bar__upload-control").hide(),this.$node.addClass("upload-progress-bar__upload-finished")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%")}},{key:"destroy",value:function(){this.$node.remove()}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=p},function(e,t){e.exports=JIRA.Templates.DnDAttachmentPlugin},function(e,t){e.exports=JIRA.Templates.ViewIssue},function(e,t){"use strict";function n(e){var t=e/a;return t.toFixed(2)+u}function r(e){var t=Math.round(e/o);return t+s}function i(e){var t=e/o;return t.toFixed(1)+s}Object.defineProperty(t,"__esModule",{value:!0});var o=1024,a=o*o,s=" kB",u=" MB";t.default=function(e){return e>a?n(e):e>o?r(e):i(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(95),s=r(a),u=n(96),c=r(u),l=n(97),f=r(l),d=n(89),h=r(d),p=["aui-iconfont-close-dialog","aui-iconfont-success","aui-iconfont-error"],v=function(){function e(t,n,r){i(this,e),this.file=t,this.context=n,this.onCancel=r,this.$node=(0,h.default)('<div class="upload-progress-bar"/>'),this.render()}return o(e,[{key:"render",value:function(){var e=this,t=s.default.UploadProgressBar({isImageType:!0});this.$node.html(t),this.$node.find(".upload-progress-bar__file-name").text(this.file.name),this.$node.find(".upload-progress-bar__control button").on("click",function(){e.onCancel(),e.destroy()}),this.file.size>=0&&this.$node.find(".upload-progress-bar__file-size").html((0,f.default)(this.file.size)),(0,h.default)(c.default.renderThumbnailIcon({mimetype:this.file.type})).appendTo(this.thumbnailNode),this.thumbnailNode.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui")}},{key:"loadThumbnail",value:function(e){var t=URL.createObjectURL(e);this.thumbnailNode.addClass("upload-progress-bar__thumbnail_image"),this.thumbnailNode.find(".attachment-thumbnail-icon").detach(),(0,h.default)("<img/>").attr("src",t).appendTo(this.thumbnailNode)}},{key:"progress",value:function(e){this.progressPortion=e,this.progressNode.toggleClass("UploadProgressBar_progressUnknown",this.progressPortion===!1),this.progressPortion>=0&&this.progressNode.find(".upload-progress-bar__bar").css("width",100*this.progressPortion+"%")}},{key:"done",value:function(){this.setIcon("aui-iconfont-success"),this.progress(1)}},{key:"attachmentCreated",value:function(e){this.$checkbox=(0,h.default)('<input type="checkbox" name="filetoconvert"/>').addClass("upload-progress-bar__checkbox").attr("value",e).attr("id","filetoconvert-"+e).prop("checked",!0).insertBefore(this.$node),this.$node.addClass("upload-progress-bar__upload-ready").addClass("upload-progress-bar__upload-finished"),this.setIcon("aui-iconfont-close-dialog")}},{key:"fail",value:function(e){this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.progressNode.find(".upload-progress-bar__bar").css("width","100%"),this.$node.find(".upload-progress-bar__error-message").text(e.description)}},{key:"destroy",value:function(){this.$checkbox&&this.$checkbox.prop("checked",!1).prop("value",null),this.$node.remove()}},{key:"setIcon",value:function(e){var t=this.$node.find(".upload-progress-bar__control button .aui-icon");p.forEach(function(n){t.toggleClass(n,n===e)})}},{key:"thumbnailNode",get:function(){return this.$node.find(".upload-progress-bar__thumbnail")}},{key:"progressNode",get:function(){return this.$node.find(".upload-progress-bar__progress-bar")}}]),e}();t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(100),s=r(a),u="#file_attachments, #attachment_thumbnails",c=function(){return(0,o.default)(u)};t.default={getViewType:function(){return"file_attachments"===c().attr("id")?"list":"gallery"},insertUpload:function(e){if(0===c().length)throw new Error("Attachment List is not present");c().prepend(e)},uploadError:function(e,t,n){var r=s.default.showErrorMsg(AJS.format("\"{0}\" was not uploaded.",AJS.escapeHtml(e)),AJS.escapeHtml(t));(0,o.default)(r).on("aui-flag-close",n)},globalError:function(e){return s.default.showErrorMsg("Cannot upload attachments",AJS.escapeHtml(e))},notifyUserOfCreatedAttachment:function(e,t){s.default.showSuccessMsg("",AJS.format("{0} was attached successfully to {1}.",AJS.escapeHtml(e.name),t))}}},function(e,t){e.exports=require("jira/flag")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i);t.default={insertUpload:function(e,t){var n=(0,o.default)(e);if(0===n.length)throw new Error("Cannot find temp attachment dropzone");n.after((0,o.default)(t))}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(96),o=r(i),a=n(8),s=r(a),u=n(97),c=r(u),l=n(103),f=n(89),d=r(f),h=function(){return"undefined"==typeof window?"":window&&window.location&&window.location.origin}(),p=(0,s.default)(),v=""+h+p,m=function(e){return encodeURIComponent(e)},y=function(e,t){var n=m(e.name);return"secure/attachment/"+t.attachmentId+"/"+n},b=function(e,t){var n=m(e.name);return(0,l.isImageType)(e)?v+"/secure/thumbnail/"+t.attachmentId+"/"+n+"?default=false":null},g=function(e,t){var n=m(e.name);return t.expandable?null:v+"/secure/thumbnail/"+t.attachmentId+"/"+n};t.default={create:function(e,t,n){var r=[{id:t.attachmentId,attachmentUrl:y(e,t),thumbnailUrl:b(e,t),jiraThumbnailUrl:g(e,t),fileName:e.name,mimeType:e.type,expandable:t.expandable,deletable:t.deletable,fileSize:(0,c.default)(e.size),createdIso8601:e.creationDate,createdDateTime:e.creationDate}];return(0,d.default)(o.default.renderAttachments({baseurl:p,fullBaseUrl:v,issue:{id:n.issueId},attachments:r,viewMode:n.viewType})).find(".attachment-content")}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=u.default.getThumbnailMimeType().split(",");return e&&e.type&&a.default.contains(t,e.type)}Object.defineProperty(t,"__esModule",{value:!0}),t.isImageType=void 0;var o=n(7),a=r(o),s=n(4),u=r(s);t.isImageType=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(97),o=r(i),a=n(4),s=r(a);t.default={validateFile:function(e){var t=this.fileNameContainsInvalidCharacter(e.name),n=void 0;return""!==t&&(n=AJS.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",e.name,t)),this.sizeExceedsMaximum(e.size)&&(n="File exceeds maximum size limit set by the administrator ({0}).".replace("{0}",(0,o.default)(s.default.getMaxFileSize()))),n?{valid:!1,message:n}:{valid:!0}},fileNameContainsInvalidCharacter:function(e){return s.default.getInvalidChars().reduce(function(t,n){return e.indexOf(n)!==-1?n:t},"")},sizeExceedsMaximum:function(e){return e>s.default.getMaxFileSize()}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(106),s=r(a);t.default={getWikiFieldsContextInformation:function(){var e=(0,o.default)("textarea.wiki-textfield:visible:focus");return e?{isWikiFieldFocused:e.length>0,focusedField:e[0]}:void 0},insertWikiMarkup:function(e,t){var n=(0,o.default)(e);s.default.insertWikiMarkup(t,e,e.selectionStart,e.selectionStart),n.is(":focus")||n.focus()}}},function(e,t){e.exports=require("dndattachment/ctrlv/utility")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(89),o=r(i),a=n(95),s=r(a);t.default={getHtml:function(e,t){var n=(0,o.default)("#summary-val input"),r=(0,o.default)("#summary-val"),i=n&&n.attr("value")||r&&r.text();return s.default.SuccessMessageLink({issueLink:t,issueKey:e,issueSummary:i})}}},function(e,t){e.exports=require("dndattachment/TemporaryAttachments")},function(e,t){e.exports=require("dndattachment/ctrlv/base64decode")}]);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/jquery/colorpicker2/colorpicker.js' */
!function(e){var o=function(){var o=65,t='<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit"></div></div>',r={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!1},i=function(o,t){var r=j(o);e(t).data("colorpicker").fields.eq(1).val(r.r).end().eq(2).val(r.g).end().eq(3).val(r.b).end()},a=function(o,t){e(t).data("colorpicker").fields.eq(4).val(o.h).end().eq(5).val(o.s).end().eq(6).val(o.b).end()},c=function(o,t){e(t).data("colorpicker").fields.eq(0).val(B(o)).end()},n=function(o,t){e(t).data("colorpicker").selector.css("backgroundColor","#"+B({h:o.h,s:100,b:100})),e(t).data("colorpicker").selectorIndic.css({left:parseInt(150*o.s/100,10),top:parseInt(150*(100-o.b)/100,10)})},d=function(o,t){e(t).data("colorpicker").hue.css("top",parseInt(150-150*o.h/360,10))},l=function(o,t){e(t).data("colorpicker").currentColor.css("backgroundColor","#"+B(o))},s=function(o,t){e(t).data("colorpicker").newColor.css("backgroundColor","#"+B(o))},p=function(t){var r=t.charCode||t.keyCode||-1;if(r>o&&r<=90||32==r)return!1;var i=e(this).parent().parent();i.data("colorpicker").livePreview===!0&&u.apply(this)},u=function(o){var t,r=e(this).parent().parent();this.parentNode.className.indexOf("_hex")>0?r.data("colorpicker").color=t=E(z(this.value)):this.parentNode.className.indexOf("_hsb")>0?r.data("colorpicker").color=t=H({h:parseInt(r.data("colorpicker").fields.eq(4).val(),10),s:parseInt(r.data("colorpicker").fields.eq(5).val(),10),b:parseInt(r.data("colorpicker").fields.eq(6).val(),10)}):r.data("colorpicker").color=t=T(O({r:parseInt(r.data("colorpicker").fields.eq(1).val(),10),g:parseInt(r.data("colorpicker").fields.eq(2).val(),10),b:parseInt(r.data("colorpicker").fields.eq(3).val(),10)})),o&&(i(t,r.get(0)),c(t,r.get(0)),a(t,r.get(0))),n(t,r.get(0)),d(t,r.get(0)),s(t,r.get(0)),r.data("colorpicker").onChange.apply(r,[t,B(t),j(t)])},h=function(o){var t=e(this).parent().parent();t.data("colorpicker").fields.parent().removeClass("colorpicker_focus")},f=function(){o=this.parentNode.className.indexOf("_hex")>0?70:65,e(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),e(this).parent().addClass("colorpicker_focus")},v=function(o){var t=e(this).parent().find("input").focus(),r={el:e(this).parent().addClass("colorpicker_slider"),max:this.parentNode.className.indexOf("_hsb_h")>0?360:this.parentNode.className.indexOf("_hsb")>0?100:255,y:o.pageY,field:t,val:parseInt(t.val(),10),preview:e(this).parent().parent().data("colorpicker").livePreview};e(document).bind("mouseup",r,g),e(document).bind("mousemove",r,m)},m=function(e){return e.data.field.val(Math.max(0,Math.min(e.data.max,parseInt(e.data.val+e.pageY-e.data.y,10)))),e.data.preview&&u.apply(e.data.field.get(0),[!0]),!1},g=function(o){return u.apply(o.data.field.get(0),[!0]),o.data.el.removeClass("colorpicker_slider").find("input").focus(),e(document).unbind("mouseup",g),e(document).unbind("mousemove",m),!1},k=function(o){var t={cal:e(this).parent(),y:e(this).offset().top};t.preview=t.cal.data("colorpicker").livePreview,e(document).bind("mouseup",t,_),e(document).bind("mousemove",t,b)},b=function(e){return u.apply(e.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,e.pageY-e.data.y)))/150,10)).get(0),[e.data.preview]),!1},_=function(o){return i(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),e(document).unbind("mouseup",_),e(document).unbind("mousemove",b),!1},x=function(o){var t={cal:e(this).parent(),pos:e(this).offset()};t.preview=t.cal.data("colorpicker").livePreview,e(document).bind("mouseup",t,y),e(document).bind("mousemove",t,w)},w=function(e){return u.apply(e.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,e.pageY-e.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,e.pageX-e.data.pos.left))/150,10)).get(0),[e.data.preview]),!1},y=function(o){return i(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),c(o.data.cal.data("colorpicker").color,o.data.cal.get(0)),e(document).unbind("mouseup",y),e(document).unbind("mousemove",w),!1},C=function(o){e(this).addClass("colorpicker_focus")},M=function(o){e(this).removeClass("colorpicker_focus")},I=function(o){var t=e(this).parent(),r=t.data("colorpicker").color;t.data("colorpicker").origColor=r,l(r,t.get(0)),t.data("colorpicker").onSubmit(r,B(r),j(r),t.data("colorpicker").el)},q=function(o){var t=e("#"+e(this).data("colorpickerId"));t.data("colorpicker").onBeforeShow.apply(this,[t.get(0)]);var r=e(this).offset(),i=S(),a=r.top+this.offsetHeight,c=r.left;return a+176>i.t+i.h&&(a-=this.offsetHeight+176),c+356>i.l+i.w&&(c-=356),t.css({left:c+"px",top:a+"px"}),0!=t.data("colorpicker").onShow.apply(this,[t.get(0)])&&t.show(),e(document).bind("mousedown",{cal:t},P),!1},P=function(o){N(o.data.cal.get(0),o.target,o.data.cal.get(0))||(0!=o.data.cal.data("colorpicker").onHide.apply(this,[o.data.cal.get(0)])&&o.data.cal.hide(),e(document).unbind("mousedown",P))},N=function(e,o,t){if(e==o)return!0;if(e.contains)return e.contains(o);if(e.compareDocumentPosition)return!!(16&e.compareDocumentPosition(o));for(var r=o.parentNode;r&&r!=t;){if(r==e)return!0;r=r.parentNode}return!1},S=function(){var e="CSS1Compat"==document.compatMode;return{l:window.pageXOffset||(e?document.documentElement.scrollLeft:document.body.scrollLeft),t:window.pageYOffset||(e?document.documentElement.scrollTop:document.body.scrollTop),w:window.innerWidth||(e?document.documentElement.clientWidth:document.body.clientWidth),h:window.innerHeight||(e?document.documentElement.clientHeight:document.body.clientHeight)}},H=function(e){return{h:Math.min(360,Math.max(0,e.h)),s:Math.min(100,Math.max(0,e.s)),b:Math.min(100,Math.max(0,e.b))}},O=function(e){return{r:Math.min(255,Math.max(0,e.r)),g:Math.min(255,Math.max(0,e.g)),b:Math.min(255,Math.max(0,e.b))}},z=function(e){var o=6-e.length;if(o>0){for(var t=[],r=0;r<o;r++)t.push("0");t.push(e),e=t.join("")}return e},Y=function(e){var e=parseInt(e.indexOf("#")>-1?e.substring(1):e,16);return{r:e>>16,g:(65280&e)>>8,b:255&e}},E=function(e){return T(Y(e))},T=function(e){var o={h:0,s:0,b:0},t=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b),i=r-t;return o.b=r,o.s=0!=r?255*i/r:0,0!=o.s?e.r==r?o.h=(e.g-e.b)/i:e.g==r?o.h=2+(e.b-e.r)/i:o.h=4+(e.r-e.g)/i:o.h=-1,o.h*=60,o.h<0&&(o.h+=360),o.s*=100/255,o.b*=100/255,o},j=function(e){var o={},t=Math.round(e.h),r=Math.round(255*e.s/100),i=Math.round(255*e.b/100);if(0==r)o.r=o.g=o.b=i;else{var a=i,c=(255-r)*i/255,n=(a-c)*(t%60)/60;360==t&&(t=0),t<60?(o.r=a,o.b=c,o.g=c+n):t<120?(o.g=a,o.b=c,o.r=a-n):t<180?(o.g=a,o.r=c,o.b=c+n):t<240?(o.b=a,o.r=c,o.g=a-n):t<300?(o.b=a,o.g=c,o.r=c+n):t<360?(o.r=a,o.g=c,o.b=a-n):(o.r=0,o.g=0,o.b=0)}return{r:Math.round(o.r),g:Math.round(o.g),b:Math.round(o.b)}},W=function(o){var t=[o.r.toString(16),o.g.toString(16),o.b.toString(16)];return e.each(t,function(e,o){1==o.length&&(t[e]="0"+o)}),t.join("")},B=function(e){return W(j(e))},D=function(){var o=e(this).parent(),t=o.data("colorpicker").origColor;o.data("colorpicker").color=t,i(t,o.get(0)),c(t,o.get(0)),a(t,o.get(0)),n(t,o.get(0)),d(t,o.get(0)),s(t,o.get(0))};return{init:function(o){if(o=e.extend({},r,o||{}),"string"==typeof o.color)o.color=E(o.color);else if(void 0!=o.color.r&&void 0!=o.color.g&&void 0!=o.color.b)o.color=T(o.color);else{if(void 0==o.color.h||void 0==o.color.s||void 0==o.color.b)return this;o.color=H(o.color)}return this.each(function(){if(!e(this).data("colorpickerId")){var r=e.extend({},o);r.origColor=o.color;var m="collorpicker_"+parseInt(1e3*Math.random());e(this).data("colorpickerId",m);var g=e(t).attr("id",m);r.flat?g.appendTo(this).show():g.appendTo(document.body),r.fields=g.find("input").bind("keyup",p).bind("change",u).bind("blur",h).bind("focus",f),g.find("span").bind("mousedown",v).end().find(">div.colorpicker_current_color").bind("click",D),r.selector=g.find("div.colorpicker_color").bind("mousedown",x),r.selectorIndic=r.selector.find("div div"),r.el=this,r.hue=g.find("div.colorpicker_hue div"),g.find("div.colorpicker_hue").bind("mousedown",k),r.newColor=g.find("div.colorpicker_new_color"),r.currentColor=g.find("div.colorpicker_current_color"),g.data("colorpicker",r),g.find("div.colorpicker_submit").bind("mouseenter",C).bind("mouseleave",M).bind("click",I),i(r.color,g.get(0)),a(r.color,g.get(0)),c(r.color,g.get(0)),d(r.color,g.get(0)),n(r.color,g.get(0)),l(r.color,g.get(0)),s(r.color,g.get(0)),r.flat?g.css({position:"relative",display:"block"}):e(this).bind(r.eventName,q)}})},showPicker:function(){return this.each(function(){e(this).data("colorpickerId")&&q.apply(this)})},hidePicker:function(){return this.each(function(){e(this).data("colorpickerId")&&e("#"+e(this).data("colorpickerId")).hide()})},setColor:function(o){if("string"==typeof o)o=E(o);else if(void 0!=o.r&&void 0!=o.g&&void 0!=o.b)o=T(o);else{if(void 0==o.h||void 0==o.s||void 0==o.b)return this;o=H(o)}return this.each(function(){if(e(this).data("colorpickerId")){var t=e("#"+e(this).data("colorpickerId"));t.data("colorpicker").color=o,t.data("colorpicker").origColor=o,i(o,t.get(0)),a(o,t.get(0)),c(o,t.get(0)),d(o,t.get(0)),n(o,t.get(0)),l(o,t.get(0)),s(o,t.get(0))}})}}}();e.fn.extend({ColorPicker:o.init,ColorPickerHide:o.hidePicker,ColorPickerShow:o.showPicker,ColorPickerSetColor:o.setColor})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/gh-shortener.js' */
GH.Shortener=AJS.Control.extend({_getDefaultOptions:function(){return{items:"a, span",numRows:1,shortenText:"hide",shortenOnInit:!0,persist:!0,expandButtonTooltip:"Click to view {0} more",collapseButtonTooltip:"Hide"}},init:function(t){"string"==typeof t&&(t={element:t}),t=t||{},this.options=AJS.$.extend(this._getDefaultOptions(),t),this._timerId=0,this.expanded=!1,this.$container=AJS.$(this.options.element),this._assignEvents("body",document.body),this._ready()},_isValid:function(){return!this.initialized&&this.$container.is(":visible")&&this.$container.children().length>0},_ready:function(){this._isValid()&&(this.$items=this.$container.children(this.options.items),this.$expandButton=this._render("expandButton"),this.$collapseButton=this._render("collapseButton"),this._assignEvents("expand-button",".gh-shortener-expand"),this._assignEvents("collapse-button",".gh-shortener-collapse"),this._assignEvents("resize-region",window),this._isCollapsedOnInit()?this.collapse():this.expand(),this.initialized=!0)},_renders:{expandButton:function(){return AJS.$("<a href='#' class='ellipsis gh-shortener-expand' title='"+this.options.expandButtonTooltip+"'></a><br>")},collapseButton:function(){return AJS.$(" <a title='Hide' class='gh-shortener-collapse' style='margin-left:3px' href='#'></a>")}},_events:{"expand-button":{click:function(t){t.currentTarget===this.$expandButton[0]&&(t.preventDefault(),this.expand(),this._saveState("expanded"))}},"collapse-button":{click:function(t){t.currentTarget===this.$collapseButton[0]&&(t.preventDefault(),this.collapse(),this._saveState("collapsed"),this.$container.scrollIntoView())}},"resize-region":{resize:function(){if(clearTimeout(this._timerId),!this.expanded){var t=this;this._timerId=setTimeout(function(){t.collapse()},400)}}},body:{tabSelect:function(){this._ready()}}},_saveState:function(t){try{localStorage.setItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"),t)}catch(e){}},_loadState:function(){return localStorage.getItem("AJS.Shortener#"+this.$container.closest("[id]").attr("id"))},_isCollapsedOnInit:function(){var t=this._loadState();return null!==t?"expanded"!==t:this.options.shortenOnInit},_removeButtons:function(){this.$expandButton.remove(),this.$collapseButton.remove()},_getOverflowIndex:function(){if(this.$items.length>1)for(var t=1,e=-1,i=0;i<this.$items.length;i++){var n=this.$items.eq(i).offset().left;if(n<=e&&(t++,t>this.options.numRows))return i;e=n}return-1},expand:function(){this._removeButtons(),this._getOverflowIndex()>0&&(this.$collapseButton=this._render("collapseButton"),this.$container.append(this.$collapseButton),this.$container.css("height","auto")),this.expanded=!0},collapse:function(){this._removeButtons();var t=this._getOverflowIndex();if(t>0){this.$container.css({position:"absolute",visibility:"hidden",width:this.$container[0].clientWidth+"px"});var e=this.$expandButton.first();do{var i=this.$items.length-t;e.text("("+i+")"),this.$expandButton.insertBefore(this.$items[t]),t--;var n=this.$items.eq(t).offset(),s=this.$expandButton.offset();if(n.left<s.left&&s.top<n.top+10)break}while(t>0);var o=t<this.$items.length-1?this.$items.eq(t+1).offset().top-this.$container.offset().top+"px":"auto";this.$container.css({height:o,position:"static",visibility:"visible",width:"auto"}),e.attr("title",AJS.format(this.options.expandButtonTooltip,i))}else this.$container.css("height","auto");this.expanded=!1}}),function(){"use strict";var t=require("jquery");t.fn.shorten=function(t){var e=[];return t=t||{},this.each(function(){t.element=this,e.push(new AJS.Shortener(t))}),e}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/backbone.js' */
(function(){var t,e=this,i=e.Backbone,s=Array.prototype.slice,n=Array.prototype.splice;t="undefined"!=typeof exports?exports:e.Backbone={},t.VERSION="0.9.2";var r=e._;r||"undefined"==typeof require||(r=require("underscore"));var a=e.jQuery||e.Zepto||e.ender;t.setDomLibrary=function(t){a=t},t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var o=/\s+/,h=t.Events={on:function(t,e,i){var s,n,r,a,h;if(!e)return this;for(t=t.split(o),s=this._callbacks||(this._callbacks={});n=t.shift();)h=s[n],r=h?h.tail:{},r.next=a={},r.context=i,r.callback=e,s[n]={tail:a,next:h?h.next:r};return this},off:function(t,e,i){var s,n,a,h,c,u;if(n=this._callbacks){if(!(t||e||i))return delete this._callbacks,this;for(t=t?t.split(o):r.keys(n);s=t.shift();)if(a=n[s],delete n[s],a&&(e||i))for(h=a.tail;(a=a.next)!==h;)c=a.callback,u=a.context,(e&&c!==e||i&&u!==i)&&this.on(s,c,u);return this}},trigger:function(t){var e,i,n,r,a,h,c;if(!(n=this._callbacks))return this;for(h=n.all,t=t.split(o),c=s.call(arguments,1);e=t.shift();){if(i=n[e])for(r=i.tail;(i=i.next)!==r;)i.callback.apply(i.context||this,c);if(i=h)for(r=i.tail,a=[e].concat(c);(i=i.next)!==r;)i.callback.apply(i.context||this,a)}return this}};h.bind=h.on,h.unbind=h.off;var c=t.Model=function(t,e){var i;t||(t={}),e&&e.parse&&(t=this.parse(t)),(i=A(this,"defaults"))&&(t=r.extend({},i,t)),e&&e.collection&&(this.collection=e.collection),this.attributes={},this._escapedAttributes={},this.cid=r.uniqueId("c"),this.changed={},this._silent={},this._pending={},this.set(t,{silent:!0}),this.changed={},this._silent={},this._pending={},this._previousAttributes=r.clone(this.attributes),this.initialize.apply(this,arguments)};r.extend(c.prototype,h,{changed:null,_silent:null,_pending:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return r.clone(this.attributes)},get:function(t){return this.attributes[t]},escape:function(t){var e;if(e=this._escapedAttributes[t])return e;var i=this.get(t);return this._escapedAttributes[t]=r.escape(null==i?"":""+i)},has:function(t){return null!=this.get(t)},set:function(t,e,i){var s,n,a;if(r.isObject(t)||null==t?(s=t,i=e):(s={},s[t]=e),i||(i={}),!s)return this;if(s instanceof c&&(s=s.attributes),i.unset)for(n in s)s[n]=void 0;if(!this._validate(s,i))return!1;this.idAttribute in s&&(this.id=s[this.idAttribute]);var o=i.changes={},h=this.attributes,u=this._escapedAttributes,l=this._previousAttributes||{};for(n in s)a=s[n],(!r.isEqual(h[n],a)||i.unset&&r.has(h,n))&&(delete u[n],(i.silent?this._silent:o)[n]=!0),i.unset?delete h[n]:h[n]=a,r.isEqual(l[n],a)&&r.has(h,n)==r.has(l,n)?(delete this.changed[n],delete this._pending[n]):(this.changed[n]=a,i.silent||(this._pending[n]=!0));return i.silent||this.change(i),this},unset:function(t,e){return(e||(e={})).unset=!0,this.set(t,null,e)},clear:function(t){return(t||(t={})).unset=!0,this.set(r.clone(this.attributes),t)},fetch:function(e){e=e?r.clone(e):{};var i=this,s=e.success;return e.success=function(t,n,r){return!!i.set(i.parse(t,r),e)&&void(s&&s(i,t))},e.error=t.wrapError(e.error,i,e),(this.sync||t.sync).call(this,"read",this,e)},save:function(e,i,s){var n,a;if(r.isObject(e)||null==e?(n=e,s=i):(n={},n[e]=i),s=s?r.clone(s):{},s.wait){if(!this._validate(n,s))return!1;a=r.clone(this.attributes)}var o=r.extend({},s,{silent:!0});if(n&&!this.set(n,s.wait?o:s))return!1;var h=this,c=s.success;s.success=function(t,e,i){var a=h.parse(t,i);return s.wait&&(delete s.wait,a=r.extend(n||{},a)),!!h.set(a,s)&&void(c?c(h,t):h.trigger("sync",h,t,s))},s.error=t.wrapError(s.error,h,s);var u=this.isNew()?"create":"update",l=(this.sync||t.sync).call(this,u,this,s);return s.wait&&this.set(a,o),l},destroy:function(e){e=e?r.clone(e):{};var i=this,s=e.success,n=function(){i.trigger("destroy",i,i.collection,e)};if(this.isNew())return n(),!1;e.success=function(t){e.wait&&n(),s?s(i,t):i.trigger("sync",i,t,e)},e.error=t.wrapError(e.error,i,e);var a=(this.sync||t.sync).call(this,"delete",this,e);return e.wait||n(),a},url:function(){var t=A(this,"urlRoot")||A(this.collection,"url")||C();return this.isNew()?t:t+("/"==t.charAt(t.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},change:function(t){t||(t={});var e=this._changing;this._changing=!0;for(var i in this._silent)this._pending[i]=!0;var s=r.extend({},t.changes,this._silent);this._silent={};for(var i in s)this.trigger("change:"+i,this,this.get(i),t);if(e)return this;for(;!r.isEmpty(this._pending);){this._pending={},this.trigger("change",this,t);for(var i in this.changed)this._pending[i]||this._silent[i]||delete this.changed[i];this._previousAttributes=r.clone(this.attributes)}return this._changing=!1,this},hasChanged:function(t){return arguments.length?r.has(this.changed,t):!r.isEmpty(this.changed)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&r.clone(this.changed);var e,i=!1,s=this._previousAttributes;for(var n in t)r.isEqual(s[n],e=t[n])||((i||(i={}))[n]=e);return i},previous:function(t){return arguments.length&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return r.clone(this._previousAttributes)},isValid:function(){return!this.validate(this.attributes)},_validate:function(t,e){if(e.silent||!this.validate)return!0;t=r.extend({},this.attributes,t);var i=this.validate(t,e);return!i||(e&&e.error?e.error(this,i,e):this.trigger("error",this,i,e),!1)}});var u=t.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,{silent:!0,parse:e.parse})};r.extend(u.prototype,h,{model:c,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},add:function(t,e){var i,s,a,o,h,c,u={},l={},d=[];for(e||(e={}),t=r.isArray(t)?t.slice():[t],i=0,a=t.length;i<a;i++){if(!(o=t[i]=this._prepareModel(t[i],e)))throw new Error("Can't add an invalid model to a collection");h=o.cid,c=o.id,u[h]||this._byCid[h]||null!=c&&(l[c]||this._byId[c])?d.push(i):u[h]=l[c]=o}for(i=d.length;i--;)t.splice(d[i],1);for(i=0,a=t.length;i<a;i++)(o=t[i]).on("all",this._onModelEvent,this),this._byCid[o.cid]=o,null!=o.id&&(this._byId[o.id]=o);if(this.length+=a,s=null!=e.at?e.at:this.models.length,n.apply(this.models,[s,0].concat(t)),this.comparator&&this.sort({silent:!0}),e.silent)return this;for(i=0,a=this.models.length;i<a;i++)u[(o=this.models[i]).cid]&&(e.index=i,o.trigger("add",o,this,e));return this},remove:function(t,e){var i,s,n,a;for(e||(e={}),t=r.isArray(t)?t.slice():[t],i=0,s=t.length;i<s;i++)a=this.getByCid(t[i])||this.get(t[i]),a&&(delete this._byId[a.id],delete this._byCid[a.cid],n=this.indexOf(a),this.models.splice(n,1),this.length--,e.silent||(e.index=n,a.trigger("remove",a,this,e)),this._removeReference(a));return this},push:function(t,e){return t=this._prepareModel(t,e),this.add(t,e),t},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return t=this._prepareModel(t,e),this.add(t,r.extend({at:0},e)),t},shift:function(t){var e=this.at(0);return this.remove(e,t),e},get:function(t){if(null!=t)return this._byId[null!=t.id?t.id:t]},getByCid:function(t){return t&&this._byCid[t.cid||t]},at:function(t){return this.models[t]},where:function(t){return r.isEmpty(t)?[]:this.filter(function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},sort:function(t){if(t||(t={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");var e=r.bind(this.comparator,this);return 1==this.comparator.length?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("reset",this,t),this},pluck:function(t){return r.map(this.models,function(e){return e.get(t)})},reset:function(t,e){t||(t=[]),e||(e={});for(var i=0,s=this.models.length;i<s;i++)this._removeReference(this.models[i]);return this._reset(),this.add(t,r.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),this},fetch:function(e){e=e?r.clone(e):{},void 0===e.parse&&(e.parse=!0);var i=this,s=e.success;return e.success=function(t,n,r){i[e.add?"add":"reset"](i.parse(t,r),e),s&&s(i,t)},e.error=t.wrapError(e.error,i,e),(this.sync||t.sync).call(this,"read",this,e)},create:function(t,e){var i=this;if(e=e?r.clone(e):{},t=this._prepareModel(t,e),!t)return!1;e.wait||i.add(t,e);var s=e.success;return e.success=function(n,r,a){e.wait&&i.add(n,e),s?s(n,r):n.trigger("sync",t,r,e)},t.save(null,e),t},parse:function(t,e){return t},chain:function(){return r(this.models).chain()},_reset:function(t){this.length=0,this.models=[],this._byId={},this._byCid={}},_prepareModel:function(t,e){if(e||(e={}),t instanceof c)t.collection||(t.collection=this);else{var i=t;e.collection=this,t=new this.model(i,e),t._validate(t.attributes,e)||(t=!1)}return t},_removeReference:function(t){this==t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,s){("add"!=t&&"remove"!=t||i==this)&&("destroy"==t&&this.remove(e,s),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],this._byId[e.id]=e),this.trigger.apply(this,arguments))}});var l=["forEach","each","map","reduce","reduceRight","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","sortBy","sortedIndex","toArray","size","first","initial","rest","last","without","indexOf","shuffle","lastIndexOf","isEmpty","groupBy"];r.each(l,function(t){u.prototype[t]=function(){return r[t].apply(r,[this.models].concat(r.toArray(arguments)))}});var d=t.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},f=/:\w+/g,p=/\*\w+/g,g=/[-[\]{}()+?.,\\^$|#\s]/g;r.extend(d.prototype,h,{initialize:function(){},route:function(e,i,s){return t.history||(t.history=new v),r.isRegExp(e)||(e=this._routeToRegExp(e)),s||(s=this[i]),t.history.route(e,r.bind(function(n){var r=this._extractParameters(e,n);s&&s.apply(this,r),this.trigger.apply(this,["route:"+i].concat(r)),t.history.trigger("route",this,i,r)},this)),this},navigate:function(e,i){t.history.navigate(e,i)},_bindRoutes:function(){if(this.routes){var t=[];for(var e in this.routes)t.unshift([e,this.routes[e]]);for(var i=0,s=t.length;i<s;i++)this.route(t[i][0],t[i][1],this[t[i][1]])}},_routeToRegExp:function(t){return t=t.replace(g,"\\$&").replace(f,"([^/]+)").replace(p,"(.*?)"),new RegExp("^"+t+"$")},_extractParameters:function(t,e){return t.exec(e).slice(1)}});var v=t.History=function(){this.handlers=[],r.bindAll(this,"checkUrl")},m=/^[#\/]/,_=/msie [\w.]+/;v.started=!1,r.extend(v.prototype,h,{interval:50,getHash:function(t){var e=t?t.location:window.location,i=e.href.match(/#(.*)$/);return i?i[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||e){t=window.location.pathname;var i=window.location.search;i&&(t+=i)}else t=this.getHash();return t.indexOf(this.options.root)||(t=t.substr(this.options.root.length)),t.replace(m,"")},start:function(t){if(v.started)throw new Error("Backbone.history has already been started");v.started=!0,this.options=r.extend({},{root:"/"},this.options,t),this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&window.history&&window.history.pushState);var e=this.getFragment(),i=document.documentMode,s=_.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);s&&(this.iframe=a('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(e)),this._hasPushState?a(window).bind("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?a(window).bind("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=e;var n=window.location,o=n.pathname==this.options.root;return this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!o?(this.fragment=this.getFragment(null,!0),window.location.replace(this.options.root+"#"+this.fragment),!0):(this._wantsPushState&&this._hasPushState&&o&&n.hash&&(this.fragment=this.getHash().replace(m,""),window.history.replaceState({},document.title,n.protocol+"//"+n.host+this.options.root+this.fragment)),this.options.silent?void 0:this.loadUrl())},stop:function(){a(window).unbind("popstate",this.checkUrl).unbind("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),v.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e==this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e!=this.fragment&&(this.iframe&&this.navigate(e),void(this.loadUrl()||this.loadUrl(this.getHash())))},loadUrl:function(t){var e=this.fragment=this.getFragment(t),i=r.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0});return i},navigate:function(t,e){if(!v.started)return!1;e&&e!==!0||(e={trigger:e});var i=(t||"").replace(m,"");this.fragment!=i&&(this._hasPushState?(0!=i.indexOf(this.options.root)&&(i=this.options.root+i),this.fragment=i,window.history[e.replace?"replaceState":"pushState"]({},document.title,i)):this._wantsHashChange?(this.fragment=i,this._updateHash(window.location,i,e.replace),this.iframe&&i!=this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,i,e.replace))):window.location.assign(this.options.root+t),e.trigger&&this.loadUrl(t))},_updateHash:function(t,e,i){i?t.replace(t.toString().replace(/(javascript:|#).*$/,"")+"#"+e):t.hash=e}});var y=t.View=function(t){this.cid=r.uniqueId("view"),this._configure(t||{}),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},w=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName"];r.extend(y.prototype,h,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this},make:function(t,e,i){var s=document.createElement(t);return e&&a(s).attr(e),i&&a(s).html(i),s},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof a?t:a(t),this.el=this.$el[0],e!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(t||(t=A(this,"events"))){this.undelegateEvents();for(var e in t){var i=t[e];if(r.isFunction(i)||(i=this[t[e]]),!i)throw new Error('Method "'+t[e]+'" does not exist');var s=e.match(w),n=s[1],a=s[2];i=r.bind(i,this),n+=".delegateEvents"+this.cid,""===a?this.$el.bind(n,i):this.$el.delegate(a,n,i)}}},undelegateEvents:function(){this.$el.unbind(".delegateEvents"+this.cid)},_configure:function(t){this.options&&(t=r.extend({},this.options,t));for(var e=0,i=b.length;e<i;e++){var s=b[e];t[s]&&(this[s]=t[s])}this.options=t},_ensureElement:function(){if(this.el)this.setElement(this.el,!1);else{var t=A(this,"attributes")||{};this.id&&(t.id=this.id),this.className&&(t["class"]=this.className),this.setElement(this.make(this.tagName,t),!1)}}});var x=function(t,e){var i=k(this,t,e);return i.extend=this.extend,i};c.extend=u.extend=d.extend=y.extend=x;var E={create:"POST",update:"PUT","delete":"DELETE",read:"GET"};t.sync=function(e,i,s){var n=E[e];s||(s={});var o={type:n,dataType:"json"};return s.url||(o.url=A(i,"url")||C()),s.data||!i||"create"!=e&&"update"!=e||(o.contentType="application/json",o.data=JSON.stringify(i.toJSON())),t.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{}),t.emulateHTTP&&("PUT"!==n&&"DELETE"!==n||(t.emulateJSON&&(o.data._method=n),o.type="POST",o.beforeSend=function(t){t.setRequestHeader("X-HTTP-Method-Override",n)})),"GET"===o.type||t.emulateJSON||(o.processData=!1),a.ajax(r.extend(o,s))},t.wrapError=function(t,e,i){return function(s,n){n=s===e?n:s,t?t(e,n,i):e.trigger("error",e,n,i)}};var S=function(){},k=function(t,e,i){var s;return s=e&&e.hasOwnProperty("constructor")?e.constructor:function(){t.apply(this,arguments)},r.extend(s,t),S.prototype=t.prototype,s.prototype=new S,e&&r.extend(s.prototype,e),i&&r.extend(s,i),s.prototype.constructor=s,s.__super__=t.prototype,s},A=function(t,e){return t&&t[e]?r.isFunction(t[e])?t[e]():t[e]:null},C=function(){throw new Error('A "url" property or function must be specified')}}).call(this);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/backbone-overrides.js' */
!function(n,o){GH.Backbone=o.noConflict()}(AJS.$,Backbone);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/events.js' */
!function(t){GH.triggerEvt=function(i,r){t(AJS).trigger(i,r)},GH.bindEvt=function(i,r){t(AJS).bind(i,r)},GH.triggerEvtForInst=function(i,r,g){t(r).trigger(i,g),GH.triggerEvt(i,g),r.id&&GH.triggerEvt(r.id+"_"+i,g)}}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/serializetoobject.js' */
jQuery.fn.serializeObject=function(){var t={};return this.find(":input:not(:button):not(:submit):not(:radio):not('select[multiple]')").each(function(){""!==this.name&&(null===this.value&&(this.value=""),t[this.name]=this.value.match(/^(tru|fals)e$/i)?"true"==this.value.toLowerCase():this.value)}),this.find("input:radio:checked").each(function(){t[this.name]=this.value}),this.find("select[multiple]").each(function(){var i=jQuery(this),e=i.val();i.data("aui-ss")?e?t[this.name]=e[0]:t[this.name]="":null!==e?t[this.name]=e:t[this.name]=[]}),t};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/color.js' */
!function(r){function e(e){var a;return e&&e.constructor==Array&&3==e.length?e:(a=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))?[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]:(a=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))?[2.55*parseFloat(a[1]),2.55*parseFloat(a[2]),2.55*parseFloat(a[3])]:(a=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))?[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]:(a=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))?[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]:t[r.trim(e).toLowerCase()]}function a(a,t){var o;do{if(o=r.curCSS(a,t),""!=o&&"transparent"!=o||r.nodeName(a,"body"))break;t="backgroundColor"}while(a=a.parentNode);return e(o)}r.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(t,o){r.fx.step[o]=function(r){0==r.state&&(r.start=a(r.elem,o),r.end=e(r.end)),r.elem.style[o]="rgb("+[Math.max(Math.min(parseInt(r.pos*(r.end[0]-r.start[0])+r.start[0]),255),0),Math.max(Math.min(parseInt(r.pos*(r.end[1]-r.start[1])+r.start[1]),255),0),Math.max(Math.min(parseInt(r.pos*(r.end[2]-r.start[2])+r.start[2]),255),0)].join(",")+")"}});var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/restfultable.js' */
!function(e,t){GH.RestfulTable=t.View.extend({initialize:function(t){var s=this;if(s.options=e.extend(!0,s._getDefaultOptions(t),t),s.id=this.options.id,s._events=GH.RestfulTable.Events,s.classNames=GH.RestfulTable.ClassNames,s.dataKeys=GH.RestfulTable.DataKeys,this.$table=e(t.el).addClass(this.classNames.RESTFUL_TABLE).addClass(this.classNames.ALLOW_HOVER).addClass("aui").addClass(s.classNames.LOADING),this.$table.wrapAll("<form class='aui' action='#' />"),this.$thead=e("<thead/>"),this.$theadRow=e("<tr />").appendTo(this.$thead),this.$tbody=e("<tbody/>"),!this.$table.length)throw new Error("GH.RestfulTable: Init failed! The table you have specified ["+this.$table.selector+"] cannot be found.");if(!this.options.columns)throw new Error("GH.RestfulTable: Init failed! You haven't provided any columns to render.");this.showGlobalLoading(),e.each(this.options.columns,function(t,i){var o=e.isFunction(i.header)?i.header():i.header;"undefined"==typeof o&&(console.warn("You have not specified [header] for column ["+i.id+"]. Using id for now..."),o=i.id),s.$theadRow.append("<th>"+o+"</th>")}),s.$theadRow.append("<th></th><th></th>"),this._models=this._createCollection(),this._rowClass=this.options.views.row,this.editRows=[],this.$table.closest("form").submit(function(e){s.focusedRow&&s.focusedRow.trigger(s._events.SAVE),e.preventDefault()}),this.options.allowReorder&&(this.$theadRow.prepend("<th />"),this.$tbody.agileSortable({handle:"."+this.classNames.DRAG_HANDLE,helper:function(t,i){var o=i.clone(!0).addClass(s.classNames.MOVEABLE);return o.children().each(function(t){e(this).width(i.children().eq(t).width())}),o},helperAdjusted:function(){this.helper[0].style.top=parseInt(this.helper[0].style.top,10)+window.scrollY+"px"},start:function(t,i){var o=i.placeholder.find("td");i.item.addClass(s.classNames.MOVEABLE).children().each(function(t){e(this).width(o.eq(t).width())}),i.placeholder.html('<td colspan="'+s.getColumnCount()+'">&nbsp;</td>').css("visibility","visible"),s.getRowFromElement(i.item[0]).trigger(s._events.MODAL)},stop:function(e,t){jQuery(t.item[0]).is(":visible")&&(t.item.removeClass(s.classNames.MOVEABLE).children().attr("style",""),t.placeholder.removeClass(s.classNames.ROW),s.getRowFromElement(t.item[0]).trigger(s._events.MODELESS))},update:function(t,i){var o,n,a={},r=s.getRowFromElement(i.item[0]);r&&(s.options.reverseOrder?(n=i.item.next(),n.length?(o=s.getRowFromElement(n).model,a.after=o.url()):a.position="First"):(n=i.item.prev(),n.length?(o=s.getRowFromElement(n).model,a.after=o.url()):a.position="First"),e.ajax({url:r.model.url()+"/move",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(a),complete:function(){r.hideLoading()},success:function(e){GH.triggerEvtForInst(s._events.REORDER_SUCCESS,s,[e])},error:function(t){var i=e.parseJSON(t.responseText||t.data);GH.triggerEvtForInst(s._events.SERVER_ERROR,s,[i,t])}}),r.showLoading())},axis:"y",delay:0,containment:"document",cursor:"move",scroll:!0,zIndex:8e3}),this.$tbody.bind("selectstart mousedown",function(t){return!e(t.target).is("."+s.classNames.DRAG_HANDLE)})),this.options.allowCreate!==!1&&(this._createRow=new this.options.views.editRow({columns:this.options.columns,isCreateRow:!0,model:this.options.model.extend({url:function(){return s.options.resources.self}}),cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey,allowReorder:this.options.allowReorder}).bind(this._events.CREATED,function(e){"bottom"===s.options.createPosition?s.addRow(e):s.addRow(e,0)}).bind(this._events.VALIDATION_ERROR,function(){this.trigger(s._events.FOCUS)}).render({errors:{},values:{}}),this.$create=e('<tbody class="'+this.classNames.CREATE+'" />').append(this._createRow.el),this._applyFocusCoordinator(this._createRow),this._createRow.trigger(this._events.FOCUS)),this._models.bind("remove",function(t){e.each(s.getRows(),function(e,i){i.model===t&&(i.hasFocus()&&s._createRow&&s._createRow.trigger(s._events.FOCUS),s.removeRow(i))})}),e.isFunction(this.options.resources.all)?this.options.resources.all(function(e){s.populate(e)}):e.get(this.options.resources.all,function(e){s.populate(e)})},_createCollection:function(){var s=this,i=this.options.Collection.extend({sort:function(e){if(e||(e={}),!this.comparator)throw new Error("Cannot sort a set without a comparator");return this.tableRows=s.getRows(),this.models=this.sortBy(this.comparator),this.tableRows=void 0,e.silent||this.trigger("refresh",this,e),this},remove:function(e,i){return this.tableRows=s.getRows(),t.Collection.prototype.remove.apply(this,arguments),this.tableRows=void 0,this}});return new i([],{comparator:function(t){var i;return e.each(void 0!==this.tableRows?this.tableRows:s.getRows(),function(e){if(this.model.id===t.id)return i=e,!1}),i}})},populate:function(e){this.options.reverseOrder&&e.reverse(),this.hideGlobalLoading(),e&&e.length?(this._models.reset([],{silent:!0}),this.renderRows(e),this.isEmpty()&&this.showNoEntriesMsg()):this.showNoEntriesMsg(),this.$table.append(this.$thead),"bottom"===this.options.createPosition?this.$table.append(this.$tbody).append(this.$create):this.$table.append(this.$create).append(this.$tbody),this.$table.removeClass(this.classNames.LOADING).trigger(this._events.INITIALIZED,[this]),GH.triggerEvtForInst(this._events.INITIALIZED,this,[this]),this.options.autoFocus&&this.$table.find(":input:text:first").focus()},showGlobalLoading:function(){return this.$loading||(this.$loading=e('<div class="aui-restfultable-init"><span class="aui-restfultable-throbber"></span><span class="aui-restfultable-loading">'+this.options.loadingMsg+"</span></div>")),this.$loading.is(":visible")||this.$loading.insertAfter(this.$table),this},hideGlobalLoading:function(){return this.$loading&&this.$loading.remove(),this},addRow:function(e,t){var s,i;if(!e.id)throw new Error("GH.RestfulTable.addRow: to add a row values object must contain an id. Maybe you are not returning it from your restend point?Recieved:"+JSON.stringify(e));return i=new this.options.model(e),s=this._renderRow(i,t),this._models.add(i),this.removeNoEntriesMsg(),GH.triggerEvtForInst(this._events.ROW_ADDED,this,[s,this]),this},removeRow:function(e){this._models.remove(e.model),e.remove(),this.isEmpty()&&this.showNoEntriesMsg(),GH.triggerEvtForInst(this._events.ROW_REMOVED,this,[e,this])},isEmpty:function(){return 0===this._models.length},getModels:function(){return this._models},getTable:function(){return this.$table},getTableBody:function(){return this.$tbody},getCreateRow:function(){return this._createRow},getColumnCount:function(){return this.options.columns.length+2},getRowFromElement:function(t){return e(t).data(this.dataKeys.ROW_VIEW)},showNoEntriesMsg:function(){return this.$noEntries&&this.$noEntries.remove(),this.$noEntries=e("<tr>").addClass(this.classNames.NO_ENTRIES).append(e("<td>").attr("colspan",this.getColumnCount()).text(this.options.noEntriesMsg)).appendTo(this.$tbody),this},removeNoEntriesMsg:function(){return this.$noEntries&&this._models.length>0&&this.$noEntries.remove(),this},getRows:function(){var t=this,s=[];return this.$tbody.find("."+this.classNames.READ_ONLY).each(function(){var i=e(this),o=i.data(t.dataKeys.ROW_VIEW);o&&s.push(o)}),s},_renderRow:function(t,s){var i,o,n=this,a=this.$tbody.find("."+this.classNames.READ_ONLY);return o=new this._rowClass({model:t,columns:this.options.columns,allowEdit:this.options.allowEdit,allowDelete:this.options.allowDelete,allowReorder:this.options.allowReorder,deleteConfirmation:this.options.deleteConfirmation}),this.removeNoEntriesMsg(),o.bind(this._events.EDIT_ROW,function(e){n.edit(this,e)}),i=o.render().$el,s!==-1&&("number"==typeof s&&0!==a.length?i.insertBefore(a[s]):this.$tbody.append(i)),i.data(this.dataKeys.ROW_VIEW,o),o.bind(this._events.MODAL,function(){n.$table.removeClass(n.classNames.ALLOW_HOVER),n.$tbody.agileSortable("disable"),e.each(n.getRows(),function(){n.isRowBeingEdited(this)||this.delegateEvents({})})}),o.bind(this._events.ANIMATION_STARTED,function(){n.$table.removeClass(n.classNames.ALLOW_HOVER)}),o.bind(this._events.ANIMATION_FINISHED,function(){n.$table.addClass(n.classNames.ALLOW_HOVER)}),o.bind(this._events.MODELESS,function(){n.$table.addClass(n.classNames.ALLOW_HOVER),n.$tbody.agileSortable("enable"),e.each(n.getRows(),function(){n.isRowBeingEdited(this)||this.delegateEvents()})}),this._applyFocusCoordinator(o),this.trigger(this._events.ROW_INITIALIZED,o),o},isRowBeingEdited:function(t){var s=!1;return e.each(this.editRows,function(){if(this.el===t.el)return s=!0,!1}),s},_applyFocusCoordinator:function(e){var t=this;return e.hasFocusBound||(e.hasFocusBound=!0,e.bind(this._events.FOCUS,function(){t.focusedRow&&t.focusedRow!==e&&t.focusedRow.trigger(t._events.BLUR),t.focusedRow=e,e instanceof GH.RestfulTable.Row&&t._createRow&&t._createRow.enable()})),this},_removeEditRow:function(t){var s=e.inArray(t,this.editRows);return this.editRows.splice(s,1),this},_shiftFocusAfterEdit:function(){return this.editRows.length>0?this.editRows[this.editRows.length-1].trigger(this._events.FOCUS):this._createRow&&this._createRow.trigger(this._events.FOCUS),this},_saveEditRowOnBlur:function(){return this.editRows.length<=1},dismissEditRows:function(){var t=this;e.each(this.editRows,function(){this.hasUpdates()||this.trigger(t._events.FINISHED_EDITING)})},edit:function(e,t){var s=this,i=new this.options.views.editRow({el:e.el,columns:this.options.columns,isUpdateMode:!0,allowReorder:this.options.allowReorder,model:e.model,cancelAccessKey:this.options.cancelAccessKey,submitAccessKey:this.options.submitAccessKey}),o=e.model.toJSON();return o.update=!0,i.render({errors:{},update:!0,values:o}).bind(s._events.UPDATED,function(t,i){s._removeEditRow(this),this.unbind(),e.render().delegateEvents(),e.trigger(s._events.UPDATED),i!==!1&&s._shiftFocusAfterEdit()}).bind(s._events.VALIDATION_ERROR,function(){this.trigger(s._events.FOCUS)}).bind(s._events.FINISHED_EDITING,function(){s._removeEditRow(this),e.render().delegateEvents(),this.unbind()}).bind(s._events.CANCEL,function(){s._removeEditRow(this),this.unbind(),e.render().delegateEvents(),s._shiftFocusAfterEdit()}).bind(s._events.BLUR,function(){s.dismissEditRows(),s._saveEditRowOnBlur()&&this.trigger(s._events.SAVE,!1)}),this._applyFocusCoordinator(i),i.trigger(s._events.FOCUS,t),s._createRow&&s._createRow.disable(),this.editRows.push(i),i},renderRows:function(e){var t=this._models.comparator,s=[];this._models.comparator=void 0;var i=_.map(e,function(e){var t=new this.options.model(e);return s.push(this._renderRow(t,-1).el),t},this);return this._models.add(i,{silent:!0}),this._models.comparator=t,this.removeNoEntriesMsg(),this.$tbody.append(s),this},_getDefaultOptions:function(e){return{model:e.model||GH.RestfulTable.EntryModel,allowEdit:!0,views:{editRow:GH.RestfulTable.EditRow,row:GH.RestfulTable.Row},Collection:t.Collection.extend({url:e.resources.self,model:e.model||GH.RestfulTable.EntryModel}),allowReorder:!1,loadingMsg:e.loadingMsg||"Loading"}}}),GH.RestfulTable.DataKeys={ENABLED_SUBMIT:"enabledSubmit",ROW_VIEW:"RestfulTable_Row_View"},GH.RestfulTable.ClassNames={NO_VALUE:"aui-restfultable-editable-no-value",NO_ENTRIES:"aui-restfultable-no-entires",RESTFUL_TABLE:"aui-restfultable",ROW:"aui-restfultable-row",READ_ONLY:"aui-restfultable-readonly",ACTIVE:"aui-restfultable-active",ALLOW_HOVER:"aui-restfultable-allowhover",FOCUSED:"aui-restfultable-focused",MOVEABLE:"aui-restfultable-movable",ANIMATING:"aui-restfultable-animate",DISABLED:"aui-restfultable-disabled",SUBMIT:"aui-restfultable-submit",CANCEL:"aui-restfultable-cancel",EDIT_ROW:"aui-restfultable-editrow",CREATE:"aui-restfultable-create",DRAG_HANDLE:"aui-restfultable-draghandle",ORDER:"aui-restfultable-order",EDITABLE:"aui-restfultable-editable",ERROR:"error",DELETE:"aui-restfultable-delete",LOADING:"loading"},GH.RestfulTable.Events={REORDER_SUCCESS:"RestfulTable.reorderSuccess",ROW_ADDED:"RestfulTable.rowAdded",ROW_REMOVED:"RestfulTable.rowRemoved",EDIT_ROW:"RestfulTable.switchedToEditMode",SERVER_ERROR:"RestfulTable.serverError",CREATED:"created",UPDATED:"updated",FOCUS:"focus",BLUR:"blur",SUBMIT:"submit",SAVE:"save",MODAL:"modal",MODELESS:"modeless",CANCEL:"cancel",CONTENT_REFRESHED:"contentRefreshed",RENDER:"render",FINISHED_EDITING:"finishedEditing",VALIDATION_ERROR:"validationError",SUBMIT_STARTED:"submitStarted",SUBMIT_FINISHED:"submitFinished",ANIMATION_STARTED:"animationStarted",ANIMATION_FINISHED:"animationFinisehd",INITIALIZED:"initialized",ROW_INITIALIZED:"rowInitialized"}}(AJS.$,GH.Backbone);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/restfultable.entrymodel.js' */
!function(r,e){GH.RestfulTable.EntryModel=e.Model.extend({save:function(t,s){s=s||{};var a,n,o=this,c=s.error,i=s.success;s.error=function(e,t){var s=r.parseJSON(t.responseText||t.data);o._serverErrorHandler(t),c&&c.call(o,o,s,t)},this.isNew()?e.Model.prototype.save.call(this,t,s):t&&(a=e.Model.extend({url:this.url()}),n=new a({id:this.id}),s.success=function(r,e){o.clear().set(r.toJSON()),i&&i.call(o,o,e)},n.save(t,s))},destroy:function(e){e=e||{};var t,s=this,a=this.url();return e.data&&(t=r.param(e.data)),""!==t&&(a=a+"?"+t),r.ajax({url:a,type:"DELETE",dataType:"json",success:function(r){s.collection&&s.collection.remove(s),e.success&&e.success.call(s,r)},error:function(r){s._serverErrorHandler(r),e.error&&e.error.call(s,r)}}),this},changedAttributes:function(e){var t={},s=this.toJSON();if(r.each(e,function(e,a){s[e]?s[e]&&s[e]!==a&&("object"==typeof a?_.isEqual(a,s[e])||(t[e]=a):t[e]=a):"string"==typeof a?""!==r.trim(a)&&(t[e]=a):r.isArray(a)?0!==a.length&&(t[e]=a):t[e]=a}),!_.isEmpty(t))return this.addExpand(t),t},addExpand:function(r){},_serverErrorHandler:function(e){var t;400!==e.status&&(t=r.parseJSON(e.responseText||e.data),GH.triggerEvtForInst(GH.RestfulTable.Events.SERVER_ERROR,this,[t,e]))},fetch:function(r){r=r||{};var t=this,s=r.error;this.clear(),r.error=function(r,e){t._serverErrorHandler(e),s&&s.apply(this,arguments)},e.Model.prototype.fetch.call(this,r)}})}(AJS.$,GH.Backbone);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/restfultable.editrow.js' */
!function(e,t){GH.RestfulTable.EditRow=t.View.extend({tagName:"tr",events:{focusin:"_focus",click:"_focus",keyup:"_handleKeyUpEvent"},initialize:function(t){this.$el=e(this.el),this._events=GH.RestfulTable.Events,this.classNames=GH.RestfulTable.ClassNames,this.dataKeys=GH.RestfulTable.DataKeys,this.columns=t.columns,this.isCreateRow=t.isCreateRow,this.allowReorder=t.allowReorder,this.events["click ."+this.classNames.CANCEL]="_cancel",this.delegateEvents(),t.isUpdateMode?this.isUpdateMode=!0:(this._modelClass=t.model,this.model=new this._modelClass),this.bind(this._events.CANCEL,function(){this.disabled=!0}).bind(this._events.SAVE,function(e){this.disabled||this.submit(e)}).bind(this._events.FOCUS,function(e){this.focus(e)}).bind(this._events.BLUR,function(){this.$el.removeClass(this.classNames.FOCUSED),this.disable()}).bind(this._events.SUBMIT_STARTED,function(){this._submitStarted()}).bind(this._events.SUBMIT_FINISHED,function(){this._submitFinished()})},defaultColumnRenderer:function(t){return t.allowEdit!==!1?e("<input type='text' />").addClass("text").attr({name:t.name,value:t.value}):t.value?document.createTextNode(t.value):void 0},renderDragHandle:function(){return'<span class="'+this.classNames.DRAG_HANDLE+'"></span></td>'},_handleKeyUpEvent:function(e){27===e.keyCode&&this.trigger(this._events.CANCEL)},_cancel:function(e){return this.trigger(this._events.CANCEL),e.preventDefault(),this},_submitStarted:function(){return this.submitting=!0,this.showLoading().disable().delegateEvents({}),this},_submitFinished:function(){return this.submitting=!1,this.hideLoading().enable().delegateEvents(this.events),this},_focus:function(e){return this.hasFocus()||this.trigger(this._events.FOCUS,e.target.name),this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(e){var t,s;return this.enable(),e?t=this.$el.find(":input[name="+e+"], #"+e):(s=this.$el.find(this.classNames.ERROR+":first"),t=0===s.length?this.$el.find(":input:text:first"):s.parent().find(":input")),this.$el.addClass(this.classNames.FOCUSED),t.focus().trigger("select"),this},disable:function(){var t,s;return e.browser.mozilla&&(s=this.$el.find(":submit"),s.length&&(t=e("<input type='submit' class='"+this.classNames.SUBMIT+"' />").addClass(s.attr("class")).val(s.val()).data(this.dataKeys.ENABLED_SUBMIT,s),s.replaceWith(t))),this.$el.addClass(this.classNames.DISABLED).find(":submit").attr("disabled","disabled"),this},enable:function(){var t,s;return e.browser.mozilla&&(t=this.$el.find(this.classNames.SUBMIT),s=t.data(this.dataKeys.ENABLED_SUBMIT),s&&t.length&&t.replaceWith(s)),this.$el.removeClass(this.classNames.DISABLED).find(":submit").removeAttr("disabled"),this},showLoading:function(){return this.$el.addClass(this.classNames.LOADING),this},hideLoading:function(){return this.$el.removeClass(this.classNames.LOADING),this},hasUpdates:function(){return!!this.mapSubmitParams(this.$el.serializeObject())},mapSubmitParams:function(e){return this.model.changedAttributes(e)},submit:function(t){var s,i=this;if(document.activeElement!==window&&e(document.activeElement).blur(),this.isUpdateMode){if(s=this.mapSubmitParams(this.$el.serializeObject()),!s)return i.trigger(i._events.CANCEL)}else this.model.clear(),s=this.mapSubmitParams(this.$el.serializeObject());return this.trigger(this._events.SUBMIT_STARTED),this.model.save(s,{success:function(){i.isUpdateMode?i.trigger(i._events.UPDATED,i.model,t):(i.trigger(i._events.CREATED,i.model.toJSON()),i.model=new i._modelClass,i.render({errors:{},values:{}}),i.trigger(i._events.FOCUS)),i.trigger(i._events.SUBMIT_FINISHED)},error:function(e,t,s){400===s.status&&i.renderErrors(t.errors).trigger(i._events.VALIDATION_ERROR,t.errors),i.trigger(i._events.SUBMIT_FINISHED)},silent:!0}),this},renderError:function(t,s){return e("<div />").attr("data-field",t).addClass(this.classNames.ERROR).text(s)},renderErrors:function(t){var s=this;return this.$("."+this.classNames.ERROR).remove(),t&&e.each(t,function(e,t){s.$el.find("[name='"+e+"']").closest("td").append(s.renderError(e,t))}),this},render:function(t){var s=this;return this.$el.empty(),this.allowReorder&&e('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(s.$el),e.each(this.columns,function(i,a){var n,r,l=t.values[a.id],d=[{name:a.id,value:l,allowEdit:a.allowEdit},t.values,s.model];l&&s.$el.attr("data-"+a.id,l),n=s.isCreateRow&&a.createView?new a.createView({model:s.model}).render(d[0]):a.editView?new a.editView({model:s.model}).render(d[0]):s.defaultColumnRenderer.apply(s,d),r=e("<td />"),"object"==typeof n&&n.done?n.done(function(e){r.append(e)}):r.append(n),a.styleClass&&r.addClass(a.styleClass),r.appendTo(s.$el)}),this.$el.append(this.renderOperations(t.update,t.values)).addClass(this.classNames.ROW+" "+this.classNames.EDIT_ROW),this.trigger(this._events.RENDER,this.$el,t.values),this.$el.trigger(this._events.CONTENT_REFRESHED,[this.$el]),this},renderOperations:function(t){var s=e('<td class="aui-restfultable-operations" />');return t?s.append(e('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Update"})).append(e('<a class="aui-button aui-button-link" href="#" />').addClass(this.classNames.CANCEL).text("Cancel").attr({accesskey:this.cancelAccessKey})):s.append(e('<input class="aui-button" type="submit" />').attr({accesskey:this.submitAccessKey,value:"Add"})),s.add(e('<td class="aui-restfultable-throbber" />'))}})}(AJS.$,GH.Backbone);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/restfultable.customview.js' */
GH.RestfulTable.CustomEditView=GH.RestfulTable.CustomCreateView=GH.RestfulTable.CustomReadView=GH.Backbone.View;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/lib/restfultable/restfultable.row.js' */
!function(e,t){GH.RestfulTable.Row=t.View.extend({tagName:"tr",events:{"click .aui-restfultable-editable":"edit"},initialize:function(t){if(t=t||{},this._events=GH.RestfulTable.Events,this.classNames=GH.RestfulTable.ClassNames,this.dataKeys=GH.RestfulTable.DataKeys,this.columns=t.columns,this.allowEdit=t.allowEdit,this.allowDelete=t.allowDelete,!this.events["click .aui-restfultable-editable"])throw new Error("It appears you have overridden the events property. To add events you will need to usea work around. https://github.com/documentcloud/backbone/issues/244");this.index=t.index||0,this.deleteConfirmation=t.deleteConfirmation,this.allowReorder=t.allowReorder,this.$el=e(this.el),this.bind(this._events.CANCEL,function(){this.disabled=!0}).bind(this._events.FOCUS,function(e){this.focus(e)}).bind(this._events.BLUR,function(){this.unfocus()}).bind(this._events.UPDATED,function(){this._showUpdated()}).bind(this._events.MODAL,function(){this.$el.addClass(this.classNames.ACTIVE)}).bind(this._events.MODELESS,function(){this.$el.removeClass(this.classNames.ACTIVE)})},renderDragHandle:function(){return'<span class="'+this.classNames.DRAG_HANDLE+'"></span></td>'},defaultColumnRenderer:function(e){if(e.value)return document.createTextNode(e.value.toString())},_showUpdated:function(){var t=this,s=this.$el.addClass(this.classNames.ANIMATING).find("td").css("backgroundColor","#ebf1fd");this.trigger(this._events.ANIMATION_STARTED),t.delegateEvents({}),setTimeout(function(){s.animate({backgroundColor:"white"},function(){s.css("backgroundColor",""),t.trigger(t._events.ANIMATION_FINISHED),e(document).one("mousemove",function(){t.delegateEvents(),t.$el.removeClass(t.classNames.ANIMATING)})})},500)},sync:function(e){this.model.addExpand(e);var t=this;return this.showLoading(),this.model.save(e,{success:function(){t.hideLoading().render(),t.trigger(t._events.UPDATED)},error:function(){t.hideLoading()}}),this},refresh:function(e,t){var s=this;return this.showLoading(),this.model.fetch({success:function(){s.hideLoading().render(),e&&e.apply(this,arguments)},error:function(){s.hideLoading(),t&&t.apply(this,arguments)}}),this},hasFocus:function(){return this.$el.hasClass(this.classNames.FOCUSED)},focus:function(){return e(this.el).addClass(this.classNames.FOCUSED),this},unfocus:function(){return e(this.el).removeClass(this.classNames.FOCUSED),this},showLoading:function(){return this.$el.addClass(this.classNames.LOADING),this},hideLoading:function(){return this.$el.removeClass(this.classNames.LOADING),this},edit:function(t){var s;return s=e(t.target).is("."+this.classNames.EDITABLE)?e(t.target).attr("data-field-name"):e(t.target).closest("."+this.classNames.EDITABLE).attr("data-field-name"),this.trigger(GH.RestfulTable.Events.EDIT_ROW,s),this},renderOperations:function(){var t=this;if(this.allowDelete!==!1)return e("<a href='#' class='aui-button' />").addClass(this.classNames.DELETE).text("Delete").click(function(e){e.preventDefault(),t.destroy()})},destroy:function(){if(this.deleteConfirmation){var e=GH.Dialog.create({width:500,height:200,id:"delete-entity-"+this.model.get("id")});e.addHeader(this.deleteConfirmation.header),e.addPanel("","panel"),e.getCurrentPanel().html(this.deleteConfirmation.content(this.model.toJSON())),e.addButtonPanel(),e.addButton("Delete",_.bind(function(t){this.model.destroy(),e.hide()},this),"aui-button"),GH.Dialog.addCancelButton(e),e.show()}else this.model.destroy()},render:function(){var t=this,s=this.model.toJSON(),a=e("<td class='aui-restfultable-operations' />").append(this.renderOperations({},s)),i=e("<td class='aui-restfultable-throbber' />");return this.$el.removeClass(this.classNames.DISABLED+" "+this.classNames.FOCUSED+" "+this.classNames.LOADING+" "+this.classNames.EDIT_ROW).addClass(this.classNames.READ_ONLY).empty(),this.allowReorder&&e('<td  class="'+this.classNames.ORDER+'" />').append(this.renderDragHandle()).appendTo(t.$el),this.$el.attr("data-id",this.model.id),e.each(this.columns,function(a,i){var n,l=e("<td />"),d=s[i.id],o=i.fieldName||i.id,r=[{name:o,value:d,allowEdit:i.allowEdit},s,t.model];if(d&&t.$el.attr("data-"+i.id,d),n=i.readView?new i.readView({model:t.model}).render(r[0]):t.defaultColumnRenderer.apply(t,r),t.allowEdit!==!1&&i.allowEdit!==!1){var h=e("<span />").addClass(t.classNames.EDITABLE).append('<span class="aui-icon icon-edit-sml" />').append(n).attr("data-field-name",o);l=e("<td />").append(h).appendTo(t.$el),n&&""!=e.trim(n)||(l.addClass(t.classNames.NO_VALUE),h.html(e("<em />").text(this.emptyText||"Enter value")))}else l.append(n);i.styleClass&&l.addClass(i.styleClass),l.appendTo(t.$el)}),this.$el.append(a).append(i).addClass(this.classNames.ROW+" "+this.classNames.READ_ONLY),this.trigger(this._events.RENDER,this.$el,s),this.$el.trigger(this._events.CONTENT_REFRESHED,[this.$el]),this}})}(AJS.$,GH.Backbone);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/BoardAdminWarning.js' */
define("jira-agile/rapid/configuration/BoardAdminWarning",[],function(){function n(n,i){var r=GH.tpl.boardAdminWarning.adminWarningText();return e(r,n,i)}function i(n,i,r){var o=GH.tpl.boardAdminWarning.locationWarningText({name:n});return e(o,i,r)}function e(n,i,e){r._warningDialog(n,i,e)}var r={};return r.init=function(n){var i=n.warnBeforeEditingOwner,e=n.warnBeforeEditingLocation;this.warnBeforeEditingOwner=i,this.warnBeforeEditingLocation=e},r.confirmBoardAdminChange=function(i){var e=this,r=i.userKeys,o=i.groupKeys;return new Promise(function(i,a){return e.warnBeforeEditingOwner?void AJS.$.ajax({url:AJS.contextPath()+"/rest/api/2/user?expand=groups",type:"get",dataType:"json",data:{username:GH.UserData.getUserName()}}).done(function(e){var t=function(n,i){return n.some(function(n){return i.includes(n.name)})},u=e.key||e.name;r.includes(u)||t(e.groups.items,o)?i():n(i,a)}).fail(function(){i()}):void i()})},r.confirmLocationChange=function(n){var e=this,r=n.value,o=n.name;return new Promise(function(n,a){return e.warnBeforeEditingLocation?void AJS.$.ajax({url:AJS.contextPath()+"/rest/api/2/mypermissions?projectId="+r+"&permissions=ADMINISTER_PROJECTS",type:"get",dataType:"json"}).done(function(e){var r=e.permissions,t=r.ADMINISTER_PROJECTS.havePermission;"boolean"!=typeof t||t?n():i(o,n,a)}).fail(function(){n()}):void n()})},r._warningDialog=function(n,i,e){var r=GH.ConfirmDialog.create("ghx-admin-confirm-dialog",{content:n,contentEscaping:!1,onConfirmFn:i,onCancelFn:e,height:230});r.show()},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/BoardAdminWarning.soy' */
// This file was automatically generated from BoardAdminWarning.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.boardAdminWarning.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.boardAdminWarning == 'undefined') { GH.tpl.boardAdminWarning = {}; }


GH.tpl.boardAdminWarning.adminWarningText = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml('Removing yourself as a board administrator means you\x27ll no longer be able to change any board settings. Do you still want to do this?');
};
if (goog.DEBUG) {
  GH.tpl.boardAdminWarning.adminWarningText.soyTemplateName = 'GH.tpl.boardAdminWarning.adminWarningText';
}


GH.tpl.boardAdminWarning.locationWarningText = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('If you move this board into the \x3cstrong\x3e{0}\x3c/strong\x3e project, you\x27\x27ll no longer be able to change any board settings. Do you still want to do this?',typeof (opt_data.name) === 'number' ? opt_data.name : soy.$$escapeHtml(opt_data.name))));
};
if (goog.DEBUG) {
  GH.tpl.boardAdminWarning.locationWarningText.soyTemplateName = 'GH.tpl.boardAdminWarning.locationWarningText';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/CardLayoutConfigTable.js' */
!function(e,t,r,n,a){"use strict";function i(e,t,n){this.mode=e,this.model=t,this.el=r(n)}i.prototype={render:function(){function i(e){e.forEach(function(e){r(e).on(GH.RestfulTable.Events.SERVER_ERROR,l)})}function l(e,t,r){h.refresh().done(i)}function d(t){h.refresh().done(i),e.warning(g.el,{body:t.cardlayoutConfig,insert:"prepend"})}var o=this.model,s=o.canEdit,u=this.mode,c=t.filter(o.currentFields,function(e){return e.mode===this.mode},this),f=this._getAvailableCardLayoutFields(!1);if(0!==c.length||0!==f.length){this.el.html("<table></table>");var h=this.restfulTable=new n({el:this.el.find("table"),resources:{all:function(e){return e(c)},self:a.buildRestUrl("/cardlayout/"+o.rapidViewId+"/"+this.mode+"/field/")},columns:this._getTableColumns(),allowEdit:!1,allowDelete:s,allowReorder:s,allowCreate:s});this.model.canEdit&&(i(h.getModels()),h.refresh=function(){var e=r.Deferred();return h.getCreateRow().render({values:{},errors:{}}),h.getModels().fetch({success:function(r,n){h.$tbody.empty(),h.renderRows(n.fields),o.currentFields=t.filter(o.currentFields,function(e){return e.mode!==u}),o.currentFields.concat(n.fields),e.resolve(r)}}),e.promise()},r(h).bind(n.Events.ROW_ADDED,function(e,t,r){h.refresh().done(i),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("cardLayout")}),r(h).bind(n.Events.ROW_REMOVED,function(){h.getCreateRow().render({values:{},errors:{}}),h.refresh().done(i),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("cardLayout")}),h.getCreateRow().bind(GH.RestfulTable.Events.VALIDATION_ERROR,d));var g=this}},_getTableColumns:function(){return[{id:"fieldId",header:"Field Name",fieldName:"fieldId",readView:n.CustomReadView.extend({render:function(){return GH.tpl.cardlayoutconfig.renderFieldCell(this.model.toJSON())}}),createView:this._getCustomCreateView()}]},_getCustomCreateView:function(){var e=this;return n.CustomCreateView.extend({render:function(t){var n=this,a=r('<select class="select"></select>').attr("name",t.name),i=e._getAvailableCardLayoutFields(!1);return i.length?a.html(this.renderOptions(i)):a.hide(),e._getAvailableCardLayoutFields(!0).done(function(t){i=t.fields,i.sort(function(e,t){return e.name.localeCompare(t.name)}),i.length?(e.restfulTable.getCreateRow().enable(),a.html(n.renderOptions(i)).show()):(a.hide(),e.restfulTable.getCreateRow().disable())}),a},renderOptions:function(e){return t.reduce(e,function(e,t){var n=r("<option></option>").val(t.fieldId).text(t.name);return e.add(n)},r())}})},_getAvailableCardLayoutFields:function(e){var t=this.model;return e?a.get({url:"/cardlayout/"+t.rapidViewId+"/"+this.mode+"/available"},"cardLayoutConfig").done(function(e){t.availableFields=e.fields}):t.availableFields}},GH.CardLayoutConfigTable=i}(AJS.messages,_,AJS.$,GH.RestfulTable,GH.Ajax);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/CardLayoutConfig.js' */
define("jira-agile/rapid/configuration/CardLayoutConfig",["jquery","jira-agile/rapid/ajax","jira-agile/rapid/ui/SPConfigView"],function(n,i,a){"use strict";function o(i,a){this.model=i,this.cardLayoutConfig=i.cardLayoutConfig,this.isSprintSupportEnabled=i.isSprintSupportEnabled,this.isKanPlanEnabled=i.isKanPlanEnabled,this.canEdit=i.canEdit,this.showDaysInColumn=i.showDaysInColumn,this.rapidViewId=i.rapidListConfig.rapidViewId,this.el=n(a)}var t=GH.CardLayoutConfigTable;return o.prototype={render:function(){this.el.html(GH.tpl.cardlayoutconfig.renderCardLayoutConfig({isSprintSupportEnabled:this.isSprintSupportEnabled,isKanPlanEnabled:this.isKanPlanEnabled,canEdit:this.canEdit,showDaysInColumn:this.showDaysInColumn})),(this.isSprintSupportEnabled||this.isKanPlanEnabled)&&new t("planMode",this.cardLayoutConfig,"#ghx-card-layout-config-plan").render(),new t("workMode",this.cardLayoutConfig,"#ghx-card-layout-config-work").render(),this.initEvents()},getDaysInColumnCheckbox:function(){return this.el.find(".js-config-load-days-toggle")},initEvents:function(){this.getDaysInColumnCheckbox().change(this.saveShowDaysInColumn.bind(this))},initCardLayoutThenRender:function(i){var o=this;n(".ghx-throbber").remove(),_.isUndefined(this.cardLayoutConfig)&&"cardLayout"===i&&(a.renderSpinner(),GH.Ajax.get({url:"/rapidviewconfig/editmodel.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),cardLayoutConfig:!0},deferErrorHandling:!0},"rapidBoardConfig").done(function(i){o.cardLayoutConfig=i.cardLayoutConfig,o.render(),n(".ghx-throbber").remove()}))},saveShowDaysInColumn:function(){var n=this,a={rapidViewId:this.rapidViewId,showDaysInColumn:this.getDaysInColumnCheckbox().prop("checked")};i.put({url:"/rapidviewconfig/showDaysInColumn",data:a}).done(function(i){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("showDaysInColumn",{oldValId:n.showDaysInColumn,newValId:a.showDaysInColumn}),n.showDaysInColumn=a.showDaysInColumn}).fail(function(){n.getDaysInColumnCheckbox().prop("checked",!a.showDaysInColumn)})}},o});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/CardLayoutConfig.soy' */
// This file was automatically generated from CardLayoutConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.cardlayoutconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.cardlayoutconfig == 'undefined') { GH.tpl.cardlayoutconfig = {}; }


GH.tpl.cardlayoutconfig.renderCardLayoutConfig = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Card layout') + '</h2><p>' + soy.$$escapeHtml('Cards can be configured to show up to three extra fields.') + '</p>' + ((opt_data.isSprintSupportEnabled || opt_data.isKanPlanEnabled) ? '<h5>' + soy.$$escapeHtml('Backlog') + '</h5><div id="ghx-card-layout-config-plan" class="ghx-margin-top"></div>' : '') + '<h5>' + soy.$$escapeHtml(opt_data.isSprintSupportEnabled ? 'Active sprints' : 'Kanban board') + '</h5><div id="ghx-card-layout-config-work" class="ghx-margin-top"></div><form class="aui"><div class="field-group"><label for="ghx-config-load-days-toggle">' + soy.$$escapeHtml('Days in column') + '</label><aui-toggle id="ghx-config-load-days-toggle" class="js-config-load-days-toggle" label="' + soy.$$escapeHtml('Days in column') + '"' + ((! opt_data.canEdit) ? ' disabled="disabled"' : '') + ((opt_data.showDaysInColumn) ? ' checked="checked"' : '') + '></aui-toggle><div class="description">' + soy.$$escapeHtml('Show a visual indicator on each card that represents the time spent in the column. This can help identify slow moving issues.') + '</div></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.cardlayoutconfig.renderCardLayoutConfig.soyTemplateName = 'GH.tpl.cardlayoutconfig.renderCardLayoutConfig';
}


GH.tpl.cardlayoutconfig.renderFieldCell = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name) + ((! opt_data.isValid) ? ' <span title="' + soy.$$escapeHtml('This field is currently unavailable. It may have been removed from the system.') + '" class="ghx-icon ghx-icon-warning"></span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.cardlayoutconfig.renderFieldCell.soyTemplateName = 'GH.tpl.cardlayoutconfig.renderFieldCell';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/RoadmapConfig.js' */
define("jira-agile/rapid/configuration/RoadmapConfig",[],function(){"use strict";var a=require("jira/container-api").APIs.getNavigationAPI,o=require("jira/analytics/web-client"),e=require("jira/featureflags/feature-manager"),r={boardId:0,boardName:"",isRoadmapEnabled:!1,projectName:"",isBoardCrossProject:!1},n=function(){var a="/roadmaps/classic/board/"+r.boardId+"/crossProject";GH.Ajax.get({url:a}).done(function(a){r.isBoardCrossProject=a.crossProject,a.crossProject?(b(),r.isRoadmapEnabled?AJS.$("#ghx-config-enable-roadmap").removeProp("disabled"):AJS.$("#ghx-config-enable-roadmap").prop("disabled",!0)):(g(),AJS.$("#ghx-config-enable-roadmap").removeProp("disabled"))}).fail(function(a){var o=a.getGlobalErrors();if(o.length>0&&o[0].message){var e=!0;GH.Notification.showError("Error",o[0].message,e)}})},d=function(){o.sendScreenEvent("roadmapConfigScreen",null,{isRoadmapEnabled:r.isRoadmapEnabled,isBoardCrossProject:r.isBoardCrossProject})},i=function(o){JIRA.API.getSidebar().then(function(a){return a.updateData({rapidView:o},!0)}),a().then(function(a){return a.updateData()})},t=function(){c(!1,r.isBoardCrossProject),GH.Ajax.put({url:"/roadmaps/classic/board/"+r.boardId+"/disableRoadmap"}).done(function(){r.isRoadmapEnabled=!1}).fail(function(a){return l(a)}).always(function(){return i(r.boardId)})},s=function(){var a="/roadmaps/classic/board/"+r.boardId+"/enableRoadmapWithValidation",o=Boolean(AJS.$("#ghx-config-enable-roadmap").prop("checked"))===!1;return o?void t():void GH.Ajax.put({url:a}).done(function(a){a.success&&a.success.crossProject?(r.isBoardCrossProject=a.success.crossProject,b(),m(!1)):(r.isRoadmapEnabled=a.success.roadmapEnabled,g(),i(r.boardId)),c(!0,r.isBoardCrossProject)}).fail(function(a){return l(a)})},c=function(a,e){o.sendUIEvent({source:"roadmapConfig",action:"changed",actionSubject:"toggle",actionSubjectId:"roadmapConfigToggle",objectType:"board",objectId:r.boardId,attributes:{enabled:a,crossProject:e}})},l=function(a){var o=r.isRoadmapEnabled;m(o);var e=a.getGlobalErrors();if(e.length>0&&e[0].message){var n=!0;GH.Notification.showError("Error",e[0].message,n)}},p=function(){GH.RapidBoard.Config.setTab("filter")},m=function(a){AJS.$("#ghx-config-enable-roadmap").prop("checked",a)},b=function(){AJS.$("#ghx-roadmap-warning-message-container").show()},g=function(){AJS.$("#ghx-roadmap-warning-message-container").hide()},u=function(){var a=Boolean(AJS.$("#ghx-config-enable-roadmap").prop("checked")),e="/roadmaps/classic/board/"+r.boardId+(a?"/enableRoadmap":"/disableRoadmap");o.sendUIEvent({source:"roadmapConfig",action:"changed",actionSubject:"toggle",actionSubjectId:"roadmapConfigToggle",objectType:"board",objectId:r.boardId,attributes:{enabled:a}}),GH.Ajax.put({url:e}).done(function(){r.isRoadmapEnabled=a}).fail(function(a){var o=r.isRoadmapEnabled;AJS.$("#ghx-config-enable-roadmap").prop("checked",o);var e=a.getGlobalErrors();if(e.length>0&&e[0].message){var n=!0;GH.Notification.showError("Error",e[0].message,n)}}).always(function(){i(r.boardId)})},f=function(){var a=e.isFeatureEnabled("jsw.roadmaps.cross-project-validation"),o=a?s:u,n={learnMoreAboutEnableUrl:"https://confluence.atlassian.com/jirasoftwarecloud/enable-and-disable-the-roadmap-1004952906.html",learnMoreAboutRoadmapUrl:"https://confluence.atlassian.com/jirasoftwarecloud/create-manage-and-visualize-your-epics-on-the-roadmap-1004952901.html",boardName:r.boardName,projectName:r.projectName,isRoadmapEnabled:r.isRoadmapEnabled,isCrossProjectValidationEnabled:a,isBoardCrossProject:a&&r.isBoardCrossProject};AJS.$("#ghx-config-roadmap").html(GH.tpl.roadmapconfig.renderRoadmapConfig(n)),AJS.$("#ghx-config-enable-roadmap").change(o),a&&(AJS.$("#ghx-roadmap-message-edit-filter").on("click",p),r.isBoardCrossProject&&b())},j=function(a){r.boardId=a.id,r.boardName=a.name,r.isRoadmapEnabled=a.isRoadmapEnabled,r.isBoardCrossProject=a.isBoardCrossProject,r.projectName=a.boardLocationModel.name,f()},h=function(a){r.boardName=a,f()};return{init:j,render:f,onChangeEnableRoadmap:u,onRoadmapTabSelection:n,fireScreenAnalytic:d,state:r,updateBoardName:h}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/RoadmapConfig.soy' */
// This file was automatically generated from RoadmapConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.roadmapconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.roadmapconfig == 'undefined') { GH.tpl.roadmapconfig = {}; }


GH.tpl.roadmapconfig.renderRoadmapConfig = function(opt_data, opt_ignored) {
  return '<div class="roadmap-config-header"><h2>' + soy.$$escapeHtml('Roadmap') + '</h2></div><div class="content">' + ((opt_data.isCrossProjectValidationEnabled) ? '<div id="ghx-roadmap-warning-message-container"><div id="ghx-roadmap-inline-warning" class="aui-message aui-message-warning roadmap-cross-project-warning"><p class="title"><strong>' + soy.$$escapeHtml('Roadmaps are designed for single projects') + '</strong></p><p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('Your roadmap isn\x27\x27t available because the board filter contains multiple projects. To use your roadmap, adjust the board filter to include issues from \x3cstrong\x3e{0}\x3c/strong\x3e only.',typeof (opt_data.projectName) === 'number' ? opt_data.projectName : soy.$$escapeHtml(opt_data.projectName)))) + '&nbsp;<a href=' + soy.$$escapeHtml(opt_data.learnMoreAboutEnableUrl) + ' target="_blank">' + soy.$$escapeHtml('Learn more about enabling the roadmap') + '</a></p><p><a id="ghx-roadmap-message-edit-filter" tabindex="0">' + soy.$$escapeHtml('Edit Filter Query') + '</a></p></div></div>' : '') + '<p><form class="aui"><div class="field-group"><label for="ghx-config-enable-roadmap" class="bold-label">' + soy.$$escapeHtml(AJS.format('Enable the roadmap for {0}',opt_data.boardName)) + '</label><aui-toggle id="ghx-config-enable-roadmap" label=""' + ((opt_data.isRoadmapEnabled) ? ' checked="checked"' : '') + ((opt_data.isBoardCrossProject && opt_data.isRoadmapEnabled != true) ? ' aria-disabled="true" disabled="true"' : '') + '></aui-toggle></div></form></p><p><span>' + soy.$$escapeHtml('Create, manage, and visualize your team\x27s epics on the roadmap. Gain visibility and insight into large pieces of work ahead of time by tracking your team\x27s progress, mapping dependencies, and drilling into the details of your project.') + '</span><a href=' + soy.$$escapeHtml(opt_data.learnMoreAboutRoadmapUrl) + ' target="_blank">&nbsp;' + soy.$$escapeHtml('Learn more about the roadmap') + '</a></p><div class="ghx-roadmap-illustration"></div></div><div id="roadmap-feedback-container"></div>';
};
if (goog.DEBUG) {
  GH.tpl.roadmapconfig.renderRoadmapConfig.soyTemplateName = 'GH.tpl.roadmapconfig.renderRoadmapConfig';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/RapidViewConfiguration.js' */
var _extends=Object.assign||function(i){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var d in e)Object.prototype.hasOwnProperty.call(e,d)&&(i[d]=e[d])}return i};!function(){"use strict";function i(i){return i.replace(/(!|"|#|\$|%|&|'|\(|\)|\*|\+|,|\.|\/|:|;|<|=|>|\?|@|\[|\\|\]|\^|`|\{|\||\}|~)/g,"\\$1")}function a(a){if(a)return AJS.$("#"+i(a))}function e(i){return i&&a(i).length>0}function d(i){GH.RapidBoard.State.setSelectedConfigTab(i),GH.RapidBoard.Config.setTab(i),GH.RapidBoard.State.pushState(),GH.RapidBoard.State.setStoredSelectedConfigTab(i)}function o(i){var a=i.replace(/^\w/,function(i){return i.toUpperCase()});return"boardSettings"+a+"Screen"}var n=require("jira/analytics/web-client"),r=require("jira-agile/rapid/analytics-tracker"),t=require("jira-agile/rapid/configuration/CardLayoutConfig"),s=require("jira-agile/rapid/configuration/RoadmapConfig"),g=require("jira-agile/rapid/events"),p=require("jira-agile/rapid/configuration/BoardAdminWarning"),l=require("jira-agile/rapid/ui/SPConfig"),c=require("jira-agile/rapid/ui/SPConfigView"),f=require("jira/atlaskit/breadcrumbs"),u=require("jira/featureflags/feature-manager"),B=require("jira-agile/rapid/deferred-resources-loader"),m=new r("gh.config.tab");GH.RapidBoard.Config={},GH.RapidBoard.Config.BoardAdmins={editData:null},GH.RapidBoard.Config.analytics={fieldChange:new r("gh.config.field"),sendBoardUpdatedTrackEvent:function(i,a){var e=GH.RapidBoard.State.getRapidViewId(),d={containerType:GH.RapidViewConfig.currentData.data.locationType,objectType:"board",objectId:e,attributes:{boardId:e,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),updatedItems:[_extends({name:i},a)]},action:"updated",actionSubject:"board",actionSubjectId:e,source:o(GH.RapidBoard.State.getSelectedConfigTab())};"project"===d.containerType&&JIRA.API&&JIRA.API.Projects&&(d.containerId=JIRA.API.Projects.getCurrentProjectId()),n.sendTrackEvent(d)},tabChange:{trigger:function(i){n.sendScreenEvent(o(i),null,{boardType:GH.RapidBoard.State.getBoardTypeForAnalytics()}),m.trigger(i+".view")}}},GH.RapidBoard.Config.BoardAdmins.analytics={update:new r("gh.config.boardadmins","update")},GH.RapidBoard.Config.defaultTab="filter",GH.RapidBoard.Config.storedTabKey="selectedConfigTab",GH.RapidBoard.Config.events=new g,GH.RapidBoard.Config.BACKLOG_COLUMN_STATUS_UPDATE="backlog.column.status.update",GH.RapidBoard.Config.LOCATION_CHANGED="location.changed",GH.RapidBoard.Config.init=function(){GH.RapidBoard.Config.events.trigger("before:renderBoardConfig"),GH.Dialog.CreateView.init(),GH.RapidBoard.Config.loadEditModel(),GH.RapidBoard.Config.initRapidViewNameEdit(),GH.RapidBoard.Config.initRapidViewBoardAdminsEdit(),GH.PersistentMessages.CreateViewMessage.renderMessage()},GH.RapidBoard.Config.loadEditModel=function(){function i(i){return GH.Ajax.get({url:"/rapidviewconfig/editmodel.json",data:{rapidViewId:e,cardLayoutConfig:i},deferErrorHandling:!0},"rapidBoardConfig")}var a=GH.State.toViewState(window.location.href),e=a.rapidView;if(!e)return void GH.RapidBoard.gotoManageViewsPage();var d,o=GH.Ajax.get({url:"/xboard/configuration-tabs",data:{rapidViewId:e},deferErrorHandling:!0});d=u.isFeatureEnabled("jsw.classic.editmodel.cardlayout.optional")?"cardLayout"==GH.RapidBoard.State.getSelectedConfigTab()?i():i(!1):i(),AJS.$.when(d,o).done(function(i,a){var e=i[0],d=a[0].values;GH.RapidBoard.Config.renderEditScreen(e,d)}).fail(GH.RapidViewConfig.handleRapidLoadError)},GH.RapidBoard.Config.editedRapidViewId=void 0,GH.RapidBoard.Config.renderEditScreen=function(i,a){function e(a){return Object.assign({},i,{selectedCallback:function(e){var o=i.boardLocationModel;GH.RapidBoard.Config.events.trigger(GH.RapidBoard.Config.LOCATION_CHANGED),GH.Ajax.put({url:"/rapidviewconfig/boardLocation",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),locationType:e.projectId?a.project:e.userLocationId?a.user:null,locationId:e.projectId}}).done(function(){JIRA.API.getSidebar().then(function(a){d(a,e,i.id)});var n=require("jira/container-api");n.APIs.getNavigationAPI().then(function(a){d(a,e,i.id)}),GH.RapidBoard.Config.loadEditModel(),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("boardLocation",{newValName:e.projectId?a.project:a.user,oldValName:o.projectId?a.project:a.user,newValId:e.projectId||e.userLocationId,oldValId:o.projectId||o.userLocationId})})},boardLocation:i.boardLocationModel,validationCallback:p.confirmLocationChange.bind(p)})}function d(i,a,e){a.projectId?o(a.projectId).then(function(a){n(i,{containerType:"PROJECT",projectKey:a,rapidViewId:e})}):n(i,{containerType:a.userLocationId?"USER":null,rapidViewId:e})}function o(i){var a=$.Deferred();return AJS.$.get(contextPath+"/rest/api/2/project/"+i).then(function(i){a.resolve(i.key)}),a.promise()}function n(i,a){i.updateContext({containerType:a.containerType,projectKey:a.projectKey},!0),i.updateData({rapidView:a.rapidViewId},!0)}var r=require("jira/util/events/types"),g=require("includes/js/rapid/configuration/BoardLocationConfig");GH.RapidBoard.State.setRapidViewId(i.id),GH.RapidViewConfig.storeGlobalConfig(i.globalConfig);var l=i.isSprintSupportEnabled,c=AJS.$("body");c.removeClass("ghx-sprint-support ghx-no-sprint-support ghx-days-in-column-enabled ghx-days-in-column-disabled"),i.showDaysInColumn?c.addClass("ghx-days-in-column-enabled"):c.addClass("ghx-days-in-column-disabled"),l?c.addClass("ghx-sprint-support"):c.addClass("ghx-no-sprint-support"),c.addClass("ghx-board-configure"),AJS.$("#ghx-content-main").html(GH.tpl.rapid.view.renderConfigurationTabs({rapidViewId:i.id,configurationTabs:a})),AJS.$.support.touch&&AJS.$("#gh").removeClass("ghx-no-touch").addClass("ghx-touch"),GH.JQLAutoComplete.setModel(i),GH.RapidBoard.Config.renderHeader(i),GH.RapidBoard.Config.renderViewNameForm(i),_.extend(GH.RapidBoard.Config.BoardAdmins,{model:i.boardAdmins,canEdit:i.canEdit,canUsePicker:i.canUseBoardAdminsPicker}),p.init(i),GH.RapidBoard.Config.renderViewBoardAdminsForm(),AJS.$("#ghx-view-board-configuration-main-form").on("submit",function(i){return i.preventDefault(),!1});var f=new g(AJS.$("#ghx-view-board-location-edit")),m=function(i){try{return require(i)}catch(a){return}},C=m("jira-agile/boardlocation/location-type");C?f.init(e(C)):B.actionOnDeferParsingComplete(function(){C=require("jira-agile/boardlocation/location-type"),f.init(e(C))}),GH.RapidBoard.Config.Filter.init(i),GH.RapidBoard.Config.Columns.init(i),GH.RapidBoard.Config.Swimlanes.init(i),GH.RapidBoard.Config.QuickFilter.init(i),l&&GH.RapidBoard.Config.Estimation.init(i),GH.WorkingDaysConfig.init(i),GH.CardColorConfig.init(i),u.isFeatureEnabled("jsw.classic.editmodel.cardlayout.optional")?(GH.CardLayoutConfig=new t(i,"#ghx-config-cardLayout"),i.cardLayoutConfig&&GH.CardLayoutConfig.render()):new t(i,"#ghx-config-cardLayout").render(),GH.DetailViewConfig.init(i),GH.RapidViewConfig.currentData&&GH.RapidViewConfig.currentData.data&&"project"===GH.RapidViewConfig.currentData.data.locationType&&s.init(i),GH.RapidBoard.Config.editedRapidViewId=i.id,JIRA.bind(r.NEW_CONTENT_ADDED,function(i,a){var e=AJS.$(a).find(".js-jql-autocomplete-field"),d=AJS.$(a).find(".js-jql-autocomplete-error");if(e.length>0&&d.length>0){var o=e.attr("id"),n=d.attr("id");e=AJS.$("#"+o),d=AJS.$("#"+n),e.length>0&&d.length>0&&GH.JQLAutoComplete.initialize(o,n)}}),GH.RapidBoard.Config.initState(),GH.RapidBoard.Config.initListeners();var H=GH.RapidBoard.State.getSelectedConfigTab();"roadmapConfig"===H&&s.fireScreenAnalytic(),_.delay(function(){AJS.$("#ghx-config-header").attr("data-rendered",(new Date).getTime())}),GH.Footer.agileFooter(),GH.RapidBoard.Config.events.trigger("after:renderBoardConfig")},GH.RapidBoard.Config.renderHeader=function(i){c.renderTitle({model:i});GH.UserData.hasUser();GH.ViewActions.renderOnConfiguration(i);var a=AJS.$("#ghx-config-header");a.html(GH.tpl.rapid.view.renderConfigPermissionsWarning({model:i})),i.canEdit?AJS.$("#gh").addClass("ghx-editor").removeClass("ghx-reader"):AJS.$("#gh").addClass("ghx-reader").removeClass("ghx-editor")},GH.RapidBoard.Config.updateTitle=function(i){AJS.$("#js-nav-view-name").text(i)},GH.RapidBoard.Config.initRapidViewNameEdit=function(){GH.RapidBoard.Util.InlineEditable.register(".js-edit-rapidViewName",{validate:GH.RapidBoard.Config.validateViewName,save:GH.RapidBoard.Config.saveViewName,renderView:GH.RapidBoard.Config.renderViewNameField,postEdit:GH.RapidBoard.Config.handleTitleUpdate})},GH.RapidBoard.Config.renderViewNameForm=function(i){var a=AJS.$("#ghx-view-name-edit");a.html(GH.tpl.rapid.view.renderViewNameEditForm({rapidViewName:i.name,canEdit:i.canEdit}))},GH.RapidBoard.Config.validateViewName=function(i){var a=i.editElement.val();return!!GH.Validation.notBlank(i.editElement,"Name is a required field")&&(i.newValue=a,!0)},GH.RapidBoard.Config.saveViewName=function(i){var a=GH.RapidBoard.Config.editedRapidViewId;GH.Ajax.put({url:"/rapidviewconfig/name",data:{id:a,name:i.newValue}}).done(function(){if(GH.RapidBoard.Config.analytics.fieldChange.trigger("boardname.update"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("boardName"),f.isEnabled()){JIRA.API.getSidebar().then(function(i){return i.updateData({rapidView:a})});var e=require("jira/container-api");e.APIs.getNavigationAPI().then(function(i){return i.updateData({rapidView:a})})}s.updateBoardName(i.newValue)}),GH.RapidBoard.Util.InlineEditable.updateView(i)},GH.RapidBoard.Config.handleTitleUpdate=function(i){i.canceled||GH.RapidBoard.Config.updateTitle(i.newValue)},GH.RapidBoard.Config.renderViewNameField=function(i){var a=AJS.$(GH.tpl.rapid.view.renderViewNameField({rapidViewName:i.newValue,canEdit:!0}));return a},GH.RapidBoard.Config.initRapidViewBoardAdminsEdit=function(){GH.RapidBoard.Util.InlineEditable.register(".js-edit-rapidViewBoardAdmin",{renderEdit:GH.RapidBoard.Config.renderViewBoardAdminsEditField,activate:null})},GH.RapidBoard.Config.renderViewBoardAdminsForm=function(){var i=AJS.$("#ghx-view-board-admins-edit");i.html(GH.tpl.rapid.view.renderViewBoardAdminsEditForm({model:GH.RapidBoard.BoardAdminsPicker.getAdminsDisplayModel(GH.RapidBoard.Config.BoardAdmins.model),canEdit:GH.RapidBoard.Config.BoardAdmins.canEdit,canUsePicker:GH.RapidBoard.Config.BoardAdmins.canUsePicker}))},GH.RapidBoard.Config.renderViewBoardAdminsEditField=function(i){GH.RapidBoard.Config.BoardAdmins.editData=i,GH.RapidBoard.Config.BoardAdmins.canUsePicker?GH.RapidBoard.Config.renderViewBoardAdminsMultiselect():GH.RapidBoard.Config.renderViewBoardAdminsNoPicker()},GH.RapidBoard.Config.renderViewBoardAdminsNoPicker=function(){var i=AJS.$("#ghx-field-view-board-admins");i.html(GH.tpl.rapid.view.renderBoardAdminsEditNoPicker({model:GH.RapidBoard.Config.BoardAdmins.model})),AJS.$("#ghx-board-admin-edit-groups").focus(),AJS.$("#ghx-board-admin-edit-groups, #ghx-board-admin-edit-users").bind("keydown",function(i){13===i.keyCode?GH.RapidBoard.Config.BoardAdmins.handleReturn(i):27===i.keyCode&&GH.RapidBoard.Config.BoardAdmins.handleEsc(i)}),GH.RapidBoard.Config.bindNonPickerEvents()},GH.RapidBoard.Config.bindNonPickerEvents=function(){AJS.$("#ghx-board-admin-edit-groups, #ghx-board-admin-edit-users").blur(function(){GH.RapidBoard.Config.areBothNonPickerFieldsBlurred().done(function(){GH.RapidBoard.Config.endBoardAdminsForm()})})},GH.RapidBoard.Config.unbindNonPickerEvents=function(){AJS.$("#ghx-board-admin-edit-groups, #ghx-board-admin-edit-users").unbind("blur")},GH.RapidBoard.Config.BoardAdmins.handleReturn=function(){GH.RapidBoard.Config.unbindNonPickerEvents(),GH.RapidBoard.Config.BoardAdmins.canUsePicker?0===GH.RapidBoard.Config.BoardAdmins.form.multiselect._getUserInputValue().length&&GH.RapidBoard.Config.endBoardAdminsForm(!0):GH.RapidBoard.Config.endBoardAdminsForm(!0)},GH.RapidBoard.Config.BoardAdmins.handleEsc=function(){GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits(GH.RapidBoard.Config.BoardAdmins.editData),GH.RapidBoard.Config.unbindNonPickerEvents(),GH.RapidBoard.Config.renderViewBoardAdminsForm()},GH.RapidBoard.Config.areBothNonPickerFieldsBlurred=function(){var i=AJS.$.Deferred();return setTimeout(function(){var a=AJS.$("#ghx-board-admin-edit-groups:focus, #ghx-board-admin-edit-users:focus");a.length>0?i.reject():i.resolve()},90),i.promise()},GH.RapidBoard.Config.renderViewBoardAdminsMultiselect=function(){GH.RapidBoard.Config.BoardAdmins.form=new GH.RapidBoard.BoardAdminsPicker({selector:"#ghx-board-admins",initialData:GH.RapidBoard.Config.formatBoardAdminsInitData(GH.RapidBoard.Config.BoardAdmins.model),blur:function(){clearTimeout(GH.RapidBoard.Config.BoardAdmins.tId);var i=setTimeout(GH.RapidBoard.Config.endBoardAdminsForm,150);GH.RapidBoard.Config.BoardAdmins.tId=i}});var i=GH.RapidBoard.Config.BoardAdmins.form;i.show(),i.multiselect.INVALID_KEYS.Esc=!1,i.multiselect.keys.Return=function(){i.multiselect.suggestionsVisible||GH.RapidBoard.Config.BoardAdmins.handleReturn()},i.multiselect.keys.Esc=function(){i.multiselect.suggestionsVisible||GH.RapidBoard.Config.BoardAdmins.handleEsc()}},GH.RapidBoard.Config.formatBoardAdminsInitData=function(i){function a(i,a){return{value:i+":"+a.key,label:a.displayName,html:AJS.escapeHTML(String(a.displayName))}}var e=_.map(i.userKeys,function(i){return a("user",i)}),d=_.map(i.groupKeys,function(i){return a("group",i)});return _.union(e,d)},GH.RapidBoard.Config.endBoardAdminsForm=function(i){if(clearTimeout(GH.RapidBoard.Config.BoardAdmins.tId),GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits(GH.RapidBoard.Config.BoardAdmins.editData),!GH.RapidBoard.Config.BoardAdmins.canUsePicker||GH.RapidBoard.Config.shouldHideBoardAdminsForm()||i){var a;a=GH.RapidBoard.Config.BoardAdmins.canUsePicker?GH.RapidBoard.Config.BoardAdmins.form.getAjaxValue():GH.RapidBoard.Config.resolveNewBoardAdminsModelFromTextFields(),GH.RapidBoard.Config.validateBoardAdmins(a).done(GH.RapidBoard.Config.saveBoardAdmins).fail(function(){GH.RapidBoard.Config.renderViewBoardAdminsForm()})}},GH.RapidBoard.Config.resolveNewBoardAdminsModelFromTextFields=function(){var i=function(i){return""===i},a=/\s*,\s*/,e=function(e){return _.uniq(_.reject(e.split(a),i))};return{userKeys:e(AJS.$("#ghx-board-admin-edit-users").val()),groupKeys:e(AJS.$("#ghx-board-admin-edit-groups").val())}},GH.RapidBoard.Config.saveBoardAdmins=function(){var i;return i=GH.RapidBoard.Config.BoardAdmins.canUsePicker?GH.RapidBoard.Config.BoardAdmins.form.getAjaxValue():GH.RapidBoard.Config.resolveNewBoardAdminsModelFromTextFields(),GH.RapidBoard.Config.BoardAdmins.analytics.update.trigger(i.groupKeys.length+","+i.userKeys.length),GH.Ajax.put({url:"/rapidviewconfig/boardadmins",data:{id:GH.RapidBoard.Config.editedRapidViewId,boardAdmins:i}}).done(function(i,a,e){GH.RapidBoard.Config.BoardAdmins.model=JSON.parse(e.responseText),GH.RapidBoard.Config.renderViewBoardAdminsForm(),GH.RapidBoard.Config.loadEditModel(),GH.RapidBoard.Config.analytics.fieldChange.trigger("boardadmins.update"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("boardAdmins")}).fail(function(){GH.RapidBoard.Config.renderViewBoardAdminsForm()})},GH.RapidBoard.Config.shouldHideBoardAdminsForm=function(){return 0===AJS.$("textarea:focus").length},GH.RapidBoard.Config.validateBoardAdmins=function(i){var a=AJS.$.Deferred();return 0===i.userKeys.length&&0===i.groupKeys.length?a.reject():GH.RapidBoard.Config.hasBoardAdminsChanged(i)?(p.confirmBoardAdminChange(i).then(a.resolve,a.reject),a.promise()):a.reject()},GH.RapidBoard.Config.hasBoardAdminsChanged=function(i){return!_.isEqual(i,GH.RapidBoard.Config.BoardAdmins.model)},GH.RapidBoard.Config.setTab=function(i){var e=void 0;u.isFeatureEnabled("jsw.classic.editmodel.cardlayout.optional")&&GH.CardLayoutConfig.initCardLayoutThenRender(i),e=a(i),GH.RapidBoard.State.setSelectedConfigTab(i),GH.RapidBoard.Config.analytics.tabChange.trigger(i),AJS.$(".ghx-page-panel-content-item").css({display:"none"}),e.css({display:"block"});var d=AJS.$("#ghx-config-nav").find("li");d.removeClass("aui-nav-selected").filter('[data-tabitem="'+i+'"]').addClass("aui-nav-selected")},GH.RapidBoard.Config.initState=function(){var i=GH.RapidBoard.State.getSelectedConfigTab();e(i)&&i!==l.USE_STORED_TAB||(i=GH.RapidBoard.State.getStoredSelectedConfigTab(),e(i)||(i=l.INITIAL_TAB)),GH.RapidBoard.State.setSelectedConfigTab(i),GH.RapidBoard.Config.setTab(i),GH.RapidBoard.State.replaceState()},GH.RapidBoard.Config.initListeners=function(){var i=GH.Util.wrapPreventDefault(function(){var i=AJS.$(this).data("tabitem");if(i){var a=GH.State.toViewState(window.location.href);i!==a.tab&&(d(i),"roadmapConfig"===i&&(u.isFeatureEnabled("jsw.roadmaps.cross-project-validation")&&s.onRoadmapTabSelection(),s.fireScreenAnalytic()))}});AJS.$("#ghx-config-nav").find("li").off("simpleClick",i).on("simpleClick",i),GH.RapidBoard.Config.Columns.on(GH.RapidBoard.Config.Columns.BACKLOG_COLUMN_STATUS_UPDATE,GH.RapidBoard.Config.loadEditModel,"backlog-column-status-change")}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/RestfulTableExtensions.js' */
GH.RapidBoard.Config.Util={},GH.RapidBoard.Config.Util.TextAreaEditView=GH.RestfulTable.CustomEditView.extend({render:function(e){return AJS.$('<textarea class="textarea"></textarea>').attr("name",e.name).text(e.value||"")}}),GH.RapidBoard.Config.Util.JQLEditView=GH.RestfulTable.CustomEditView.extend({initialize:function(){if(GH.RestfulTable.CustomEditView.prototype.initialize.apply(this,arguments),!this.namespace)throw"You must provide a namespace. please extend JQLEditView"},render:function(e){return AJS.$(GH.tpl.inlineeditfield.renderJQLAutocomplete(_.extend({namespace:this.namespace,id:this.model.attributes.id},e)))}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/ManageViews.js' */
GH.RapidBoard.ManageViews={},function(){var a=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.ManageViews.analytics=new a("gh.manageviews")}(),GH.RapidBoard.ManageViews.init=function(){GH.Dialog.CreateView.init(),GH.RapidBoard.ManageViews.loadModel(),AJS.$(document).delegate(".ghx-delete-view","click",function(a){a.preventDefault();var e=AJS.$(this).attr("data-view-id"),i=AJS.$(this).attr("data-view-name");GH.RapidBoard.DeleteDialog.showDeleteDialog(e,i)}),AJS.$(GH).bind("ghx.rapidview.deleted",function(a,e){GH.Notification.showSuccess(e.message),GH.RapidBoard.ManageViews.loadModel()}),AJS.$(document).delegate(".js-copy-view","click",function(a){a.preventDefault();var e=AJS.$(this).attr("data-view-id"),i=AJS.$(this).attr("data-view-name");GH.ViewActions.showCopyBoardDialog(e,i)}),new GH.RapidBoard.ManageViews.analytics.trigger("show")},GH.RapidBoard.ManageViews.loadModel=function(){GH.Ajax.get({url:"/rapidviews/viewsData.json"},"manageViews").done(GH.RapidBoard.ManageViews.render)},GH.RapidBoard.ManageViews.render=function(a){var e=GH.UserData.hasUser();GH.RapidViewConfig.storeGlobalConfig(a.globalConfig),GH.ViewActions.renderOnManage(),AJS.$("body").addClass("ghx-board-manage"),a.views.length>0?(GH.RapidBoard.ManageViews.shortenBoardAdmins(a.views),a.views.sort(GH.RapidBoard.viewModelComparator),AJS.$("#ghx-content-main").html(GH.tpl.rapid.manageviews.renderViewsTable({views:a.views,canCopy:e}))):AJS.$("#ghx-content-main").html(GH.tpl.board.x.renderNoViews()),AJS.$.support.touch&&AJS.$("#gh").removeClass("ghx-no-touch").addClass("ghx-touch"),GH.Footer.agileFooter(),_.each(a.views,function(a){a.shortener=new GH.Shortener({items:"span.ghx-board-admin-list-item",element:"div.board-admins-list-"+a.id,numRows:1})})},GH.RapidBoard.ManageViews.shortenBoardAdmins=function(a){_.each(a,function(a){a.boardAdmins?a.renderableBoardAdmins=GH.RapidBoard.BoardAdminsPicker.getOrderedUnion(a.boardAdmins):a.renderableBoardAdmins=[]})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/FilterConfig.js' */
GH.RapidBoard.Config.Filter={},function(){var i=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.Config.Filter.analytics=new i("gh.config.subquery.edit")}(),GH.RapidBoard.Config.Filter.init=function(i){GH.RapidBoard.Config.FilterModel.setModel(i),GH.RapidBoard.Config.Filter.showFilter(),AJS.$(document).delegate(".js-update-filter-order-by","click",function(i){GH.RapidBoard.Config.Filter.confirmOrderByUpdate(),i.preventDefault()}),GH.RapidBoard.Config.FilterModel.canChangeFilter&&AJS.$(document).delegate("#js-sub-container-work .js-editable","click",GH.RapidBoard.Config.Filter.initSubQueryEdit),AJS.$(GH).bind(GH.RapidBoard.Config.UNMAPPED_STATUSES_WITH_ISSUES,function(){AJS.$("#unmapped-issues-warning").removeClass("hidden")}),AJS.$(GH).bind(GH.RapidBoard.Config.NO_UNMAPPED_STATUSES_WITH_ISSUES,function(){AJS.$("#unmapped-issues-warning").addClass("hidden")})},GH.RapidBoard.Config.Filter.showFilter=function(){var i=GH.RapidBoard.Config.FilterModel.canChangeFilter,e=GH.RapidBoard.Config.FilterModel.savedFilter,a=GH.RapidBoard.Config.FilterModel.id,r=!GH.RapidBoard.Config.FilterModel.isSprintSupportEnabled,o=r?[GH.RapidBoard.Config.Filter.getSubQueryForDisplay()]:[],d=GH.RapidBoard.Config.FilterModel.isOldDoneIssuesCutoffConfigurable,t=GH.RapidBoard.Config.FilterModel.oldDoneIssuesCutoffOptions,n=GH.RapidBoard.Config.FilterModel.oldDoneIssuesCutoff,l=GH.RapidBoard.Config.FilterModel.isJqsInJswEnabled,s=require("jira/featureflags/feature-manager"),u=s.isFeatureEnabled("jsw.classic.jqs.integration")&&s.isFeatureEnabled("jsw.classic.jqs.integration.config");AJS.$("#ghx-config-filter").html(GH.tpl.rapid.view.renderFilterDetails({savedFilter:e,subqueries:o,isSubqueriesConfigurable:r,canEdit:i,rapidViewId:a,isOldDoneIssuesCutoffConfigurable:d,oldDoneIssuesCutoff:n,oldDoneIssuesCutoffOptions:t,isJqsInJswFFEnabled:u,jqsInJsw:l})),AJS.$("#js-view-columns").bind("simpleClick",GH.Util.wrapPreventDefault(function(){GH.RapidBoard.Config.setTab("columns"),GH.State.replace({rapidView:GH.RapidBoard.Config.editedRapidViewId,tab:"columns"})})),i&&GH.RapidBoard.Config.Filter.initClickHandler(e);var f=AJS.$("#ghx-show-projects-in-board .aui-iconfont-info").tooltip({gravity:"w"});f.length>0&&f.tooltip({gravity:"w"}),AJS.$("#ghx-limit-days").change(GH.RapidBoard.Config.Filter.saveOldDoneIssuesCutoff),AJS.$("#ghx-jqs-toggle").change(GH.RapidBoard.Config.Filter.saveJqsInJswEnabled)},GH.RapidBoard.Config.Filter.saveOldDoneIssuesCutoff=function(){var i=$("#ghx-limit-days").val();GH.Ajax.put({url:"/rapidviewconfig/oldDoneIssuesCutoff",data:{rapidViewId:GH.RapidBoard.Config.FilterModel.id,oldDoneIssuesCutoff:i}}).done(function(e){GH.RapidBoard.Config.FilterModel.setOldDoneIssuesCutoff(i)}),AJS.trigger("analytics",{name:"gh.workmode.fast.kanban.configure.cutoff",data:{value:i,boardId:GH.RapidBoard.Config.FilterModel.id}})},GH.RapidBoard.Config.Filter.saveJqsInJswEnabled=function(){var i=$("#ghx-jqs-toggle").prop("checked");GH.Ajax.put({url:"/rapidviewconfig/jqsInJsw",data:{rapidViewId:GH.RapidBoard.Config.FilterModel.id,jqsInJsw:i}}).done(function(e){GH.RapidBoard.Config.FilterModel.setJqsInJswEnabled(i)})},GH.RapidBoard.Config.Filter.initClickHandler=function(i){AJS.$("#ghx-filter-change").one("click",function(e){AJS.$(this).hide();var a=new GH.SavedFilterPicker({selected:GH.RapidBoard.Config.Filter.selectHandler,selector:"#ghx-filter-change-select",blur:GH.RapidBoard.Config.Filter.showFilter,stayActivated:!0});a.show(i)})},GH.RapidBoard.Config.Filter.selectHandler=function(i,e){e.properties&&GH.Ajax.put({url:"/rapidviewconfig/filter",data:{id:GH.RapidBoard.Config.FilterModel.id,savedFilterId:e.properties.value}}).done(function(i){GH.RapidBoard.Config.FilterModel.setSavedFilter(i.success),GH.RapidBoard.Config.Filter.showFilter(),GH.RapidBoard.Config.analytics.fieldChange.trigger("savedfilter.update"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("savedFilter")})},GH.RapidBoard.Config.Filter.confirmOrderByUpdate=function(){var i=GH.Dialog.create({width:400,height:200,id:"confirm-filter-dialog",closeOnOutsideClick:!0});i.addHeader("Update Filter"),i.addPanel("Panel 1","<p>"+"Changing the Query for this Filter will add Rank and remove any other Order By sorting. This will affect all boards using this Filter."+"</p>","panel-body"),i.addButton("Confirm",function(i){i.disableControls(),GH.RapidBoard.Config.Filter.updateOrderBy(i)},"aui-button"),GH.Dialog.addCancelButton(i),AJS.$("#"+i.id).addClass("ghx-dialog"),i.show()},GH.RapidBoard.Config.Filter.updateOrderBy=function(i){var e=GH.RapidBoard.Config.FilterModel.id;e&&GH.Ajax.put({url:"/rapidviewconfig/orderbyrank",data:{id:e}}).done(function(e){GH.RapidBoard.Config.FilterModel.setSavedFilter(e.getSuccessObject()),GH.RapidBoard.Config.Filter.showFilter(),GH.Notification.showSuccess("Query for this Filter updated"),i.hide()}).fail(i.enableControls)},GH.RapidBoard.Config.Filter.initSubQueryEdit=function(i){var e=AJS.$("#js-sub-container-work"),a=GH.tpl.rapid.view.renderSubQueryControls({section:"board.kanban.work",queryValue:GH.RapidBoard.Config.FilterModel.getSubQuery().query});e.empty().append(a),AJS.$("#js-sub-container-work .js-subquery-submit").click(GH.RapidBoard.Config.Filter.updateSubQuery),AJS.$("#js-sub-container-work .js-subquery-cancel").click(GH.RapidBoard.Config.Filter.cancelSubQueryEdit),GH.JQLAutoComplete.initialize("ghx-sub-jql","ghx-sub-jql-errormsg"),AJS.$("#ghx-sub-jql").focus()},GH.RapidBoard.Config.Filter.cancelSubQueryEdit=function(i){var e=AJS.$("#js-sub-container-work"),a=GH.tpl.rapid.view.renderSubQueryView({section:"board.kanban.work",queryValue:GH.RapidBoard.Config.Filter.getSubQueryForDisplay(),canEdit:GH.RapidBoard.Config.FilterModel.canChangeFilter});e.empty().append(a)},GH.RapidBoard.Config.Filter.updateSubQuery=function(i){i.preventDefault(),console.log("update subquery");var e=GH.RapidBoard.Config.FilterModel.id,a=AJS.$(this).parent().children("textarea"),r=a.attr("data-section"),o=a.val();GH.RapidBoard.Config.Filter.analytics.trigger(r),GH.Ajax.put({url:"/subqueries/"+e,data:{query:o},errorContextMap:{query:GH.RapidBoard.Config.Filter.displaySubQueryError}}).done(function(i){GH.RapidBoard.Config.FilterModel.updateSubQuery(i.getSuccessObject()),GH.RapidBoard.Config.analytics.fieldChange.trigger("subquery.update"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("subQuery"),GH.RapidBoard.Config.Filter.showFilter()})},GH.RapidBoard.Config.Filter.getSubQueryForDisplay=function(){var i=GH.RapidBoard.Config.FilterModel.getSubQuery();return!!i.query&&i.query},GH.RapidBoard.Config.Filter.displaySubQueryError=function(i,e){var a="#ghx-sub-jql";a=AJS.$(a),a.siblings(".ghx-error").remove();var r=GH.tpl.rapid.notification.renderContextualErrors({errors:i.errors});a.parent().append(r)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/FilterConfigModel.js' */
GH.RapidBoard.Config.FilterModel={},GH.RapidBoard.Config.FilterModel.id=void 0,GH.RapidBoard.Config.FilterModel.savedFilter=void 0,GH.RapidBoard.Config.FilterModel.subQueries=[],GH.RapidBoard.Config.FilterModel.canChangeFilter=void 0,GH.RapidBoard.Config.FilterModel.canEditFilter=void 0,GH.RapidBoard.Config.FilterModel.isSprintSupportEnabled=void 0,GH.RapidBoard.Config.FilterModel.setModel=function(i){GH.RapidBoard.Config.FilterModel.id=i.id,GH.RapidBoard.Config.FilterModel.setSavedFilter(i.filterConfig),GH.RapidBoard.Config.FilterModel.canChangeFilter=i.canEdit,GH.RapidBoard.Config.FilterModel.isSprintSupportEnabled=i.isSprintSupportEnabled,GH.RapidBoard.Config.FilterModel.hasIssuesWithUnmappedStatuses=function(){var o=i.rapidListConfig.unmappedStatuses;return _.any(o,function(i){return i.issueCount>0})},i.isSprintSupportEnabled||(GH.RapidBoard.Config.FilterModel.subQueries=i.subqueryConfig.subqueries),GH.RapidBoard.Config.FilterModel.isOldDoneIssuesCutoffConfigurable=i.isOldDoneIssuesCutoffConfigurable,GH.RapidBoard.Config.FilterModel.oldDoneIssuesCutoffOptions=i.oldDoneIssuesCutoffOptions,GH.RapidBoard.Config.FilterModel.oldDoneIssuesCutoff=i.oldDoneIssuesCutoff,GH.RapidBoard.Config.FilterModel.isJqsInJswEnabled=i.jqsInJswEnabled},GH.RapidBoard.Config.FilterModel.setSavedFilter=function(i){GH.RapidBoard.Config.FilterModel.savedFilter=i},GH.RapidBoard.Config.FilterModel.setOldDoneIssuesCutoff=function(i){GH.RapidBoard.Config.FilterModel.oldDoneIssuesCutoff=i},GH.RapidBoard.Config.FilterModel.setJqsInJswEnabled=function(i){GH.RapidBoard.Config.FilterModel.jqsInJswEnabled=i},GH.RapidBoard.Config.FilterModel.updateSubQuery=function(i){for(var o=0;o<GH.RapidBoard.Config.FilterModel.subQueries.length;o++)if(i.section==GH.RapidBoard.Config.FilterModel.subQueries[o].section)return void(GH.RapidBoard.Config.FilterModel.subQueries[o]=i)},GH.RapidBoard.Config.FilterModel.getSubQuery=function(){return GH.RapidBoard.Config.FilterModel.subQueries[0]};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/ColumnConfig.js' */
!function(){"use strict";var a=require("jira-agile/tooltip"),i=(require("jira-agile/rapid/configuration/CardLayoutConfig"),require("jira-agile/rapid/events")),n=require("jira-agile/rapid/ajax"),o=require("jira-agile/rapid/analytics-tracker"),e=require("jira-agile/rapid/deferred-resources-loader"),d=require("jira-agile/rapid/const/PageMode"),t=require("jira/featureflags/feature-manager"),l=new o("jira-software.configuration.epic-as-panel"),r=t.isFeatureEnabled("jsw.classic.board.horizontal-scroll");GH.RapidBoard.Config.Columns=new i,GH.RapidBoard.Config.UNMAPPED_STATUSES_WITH_ISSUES="unmappedStatusesWithIssues",GH.RapidBoard.Config.NO_UNMAPPED_STATUSES_WITH_ISSUES="noUnmappedStatusesWithIssues",GH.RapidBoard.Config.Columns.BACKLOG_COLUMN_STATUS_UPDATE="backlog-column-status-change",GH.RapidBoard.Config.Columns.model=void 0,GH.RapidBoard.Config.Columns.kanPlanConfig=void 0,GH.RapidBoard.Config.Columns.init=function(a){GH.RapidBoard.Config.Columns.data=a,GH.RapidBoard.Config.Columns.model=a.rapidListConfig,GH.RapidBoard.Config.Columns.model.showEpicAsPanel=a.showEpicAsPanel,GH.RapidBoard.Config.Columns.kanPlanConfig={isKanbanBoard:a.isSprintSupportEnabled===!1,isKanPlanEnabled:a.isKanPlanEnabled},GH.RapidBoard.Config.Columns.renderColumnMapping(),r||AJS.$("#ghx-columns-config-tab-link").bind("tabSelect",GH.RapidBoard.Config.Columns.alignColumnHeights),GH.RapidBoard.Config.Columns.EditField.registerInlineEdits(),AJS.$(GH).bind(GH.Dialogs.AddColumn.EVENT_COLUMN_ADDED,GH.RapidBoard.Config.Columns.updateNewColumn),AJS.$(GH).bind(GH.Dialogs.CreateStatus.EVENT_STATUS_CREATED,GH.RapidBoard.Config.Columns.updateNewStatus),AJS.$(GH).bind(GH.Dialogs.RemoveStatus.EVENT_STATUS_REMOVED,GH.RapidBoard.Config.Columns.updateRemovedStatus),AJS.$(GH).bind(GH.Dialogs.ConvertWorkflow.EVENT_WORKFLOW_CONVERTED,GH.RapidBoard.Config.Columns.reloadColumnsModel)},GH.RapidBoard.Config.Columns.renderColumnMapping=function(){var a=GH.RapidBoard.Config.Columns.model;a.unmappedStatusesWithIssues=_.filter(a.unmappedStatuses,function(a){return a.issueCount>0}),a.unmappedStatusesWithIssues.length>0?AJS.$(GH).trigger(GH.RapidBoard.Config.UNMAPPED_STATUSES_WITH_ISSUES,a.unmappedStatusesWithIssues):AJS.$(GH).trigger(GH.RapidBoard.Config.NO_UNMAPPED_STATUSES_WITH_ISSUES),a.unmappedStatusesWithoutIssues=_.filter(a.unmappedStatuses,function(a){return 0===a.issueCount});var i=a.mappedColumns.filter(function(a){return a.mappedStatuses.length>0&&!a.isKanPlanColumn});i.length>0&&(i[0].isFirstColumnWithStatuses=!0,i[i.length-1].isLastColumnWithStatuses=!0);var n,o="",e={"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+the+Simplified+Workflow","isLocal":false}.url;_.isUndefined(a.workflow.simplifiedWorkflowProjectName)||(n=AJS.escapeHTML(String(a.workflow.simplifiedWorkflowProjectName)),o=GH.Ajax.CONTEXT_PATH+"/plugins/servlet/project-config/"+a.workflow.simplifiedWorkflowProjectKey+"/workflows");var d,t=GH.Ajax.CONTEXT_PATH+"/secure/ContactAdministrators.jspa",l=AJS.$("#columns"),s=document.getElementById("ghx-mapping-columns-wrapper");s&&(d=document.getElementById("ghx-mapping-columns-wrapper").scrollLeft),l.html(GH.tpl.columnconfig.renderColumnMappingView({model:a,lastUpdated:(new Date).getTime(),simplifiedWorkflowProjectName:n,adminWorkflowUrl:o,contactAdminUrl:t,kanbanBacklogUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+your+Kanban+backlog","isLocal":false}.url,simplifiedWorkflowLearnMoreUrl:e,shouldRenderKanbanBacklogColumn:GH.RapidBoard.Config.Columns.shouldRenderKanbanBacklogColumn(),isKanPlanEnabled:GH.RapidBoard.Config.Columns.kanPlanConfig.isKanPlanEnabled,isHorizontalScrollEnabled:r})),r&&d&&(document.getElementById("ghx-mapping-columns-wrapper").scrollLeft=d),l.find(".aui-iconfont-help").tooltip({html:!0,gravity:"s"}),r||GH.RapidBoard.Config.Columns.alignColumnHeights(),GH.RapidBoard.Config.Columns.model.canEdit&&(GH.RapidBoard.Config.Columns.DnD.init(),GH.RapidBoard.Config.Columns.attachListeners(a),GH.RapidBoard.Config.Columns.EditField.init(),AJS.$("#ghx-mapping .ghx-action[data-deleteindex] .js-column-delete").click(GH.RapidBoard.Config.Columns.deleteColumn))},GH.RapidBoard.Config.Columns.alignColumnHeights=function(){var a=AJS.$("#ghx-mapping"),i=a.find(".ghx-config-status:not(.ghx-kanplan-backlog)");i.css({height:""});var n=a.height(),o=a.find(".ghx-status:first").outerHeight();i.css({height:n+2*o})},GH.RapidBoard.Config.Columns.attachListeners=function(i){i.workflow.isSimplifiedWorkflowFeatureEnabled&&!i.workflow.usingSimplifiedWorkflow&&i.workflow.canSimplifyWorkflow&&i.workflow.userCanSimplifyWorkflow&&AJS.$("#js-convert-workflow").click(GH.RapidBoard.Config.Columns.convertWorkflowDialog),i.workflow.usingSimplifiedWorkflow&&i.workflow.isProjectAdminOfSimplifiedWorkflow?(AJS.$("#ghx-config-addcolumn").click(GH.RapidBoard.Config.Columns.addColumnDialog),AJS.$("#ghx-config-addstatus").click(GH.RapidBoard.Config.Columns.addStatusDialog),AJS.$("#ghx-mapping .ghx-unmapped .js-remove-status").click(GH.RapidBoard.Config.Columns.removeStatusDialog),AJS.$("#ghx-mapping .js-resolution-update").click(GH.RapidBoard.Config.Columns.resolutionUpdate),AJS.$("#ghx-mapping .js-resolution-update").each(function(){var i=AJS.$(this),n=i.parents("ul.ghx-config-status"),o=n.hasClass("ghx-last")?"e":"n";a.tipsify({selector:i,gravity:o})})):AJS.$("#ghx-config-addcolumn").click(GH.RapidBoard.Config.Columns.addColumn),AJS.$("#ghx-mapping").agileSortable({handle:".ghx-header",items:".ghx-column-wrapper:not(.ghx-fixed-column)",forceHelperSize:!0,forcePlaceholderSize:!0,opacity:"0.9",placeholder:"ghx-sortable-placeholder",tolerance:"pointer",start:function(){GH.RapidBoard.Util.InlineEditable.cancelActiveEdits()},stop:function(){GH.RapidBoard.Config.Columns.save()}}),AJS.$("#ghx-statisticsfield-select").change(GH.RapidBoard.Config.Columns.save);var n=AJS.$("#ghx-checkbox-epic-appearance");n.change(function(){var a=n.prop("checked");GH.RapidBoard.Config.Columns.updateShowEpicAsPanel(a,function(){l.trigger(a?"click.on":"click.off")})})},GH.RapidBoard.Config.Columns.updateShowEpicAsPanel=function(a,i){var o=AJS.$("#ghx-checkbox-epic-appearance"),e=GH.RapidBoard.Config.Columns.model,d={rapidViewId:e.rapidViewId,showEpicAsPanel:a};n.put({url:"/rapidviewconfig/showEpicAsPanel",data:d}).done(function(){GH.RapidBoard.Config.Columns.data.showEpicAsPanel=d.showEpicAsPanel,GH.RapidBoard.Config.Columns.model.showEpicAsPanel=d.showEpicAsPanel,GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("showEpicAsPanel",{oldValId:!d.showEpicAsPanel,newValId:d.showEpicAsPanel}),i&&i()}).fail(function(){o.prop("checked",!a)})},GH.RapidBoard.Config.Columns.convertWorkflowDialog=function(a){a.preventDefault(),GH.Dialogs.ConvertWorkflow.showDialog(GH.RapidBoard.Config.Columns.model.rapidViewId)},GH.RapidBoard.Config.Columns.addStatusDialog=function(){GH.Dialogs.CreateStatus.showDialog(GH.RapidBoard.Config.Columns.model.rapidViewId)},GH.RapidBoard.Config.Columns.addColumnDialog=function(){GH.Dialogs.AddColumn.showDialog(GH.RapidBoard.Config.Columns.model.rapidViewId,GH.RapidBoard.Config.Columns.model.workflow.usingSimplifiedWorkflow)},GH.RapidBoard.Config.Columns.removeStatusDialog=function(a){var i=AJS.$(this),n=i.closest(".ghx-status").attr("data-statusid");GH.Dialogs.RemoveStatus.showDialog(GH.RapidBoard.Config.Columns.model.rapidViewId,n)},GH.RapidBoard.Config.Columns.addColumn=function(){var a={name:"New Column",mappedStatuses:[],min:"No Min",max:"No Max",isKanPlanColumn:!1},i=GH.RapidBoard.Config.Columns.model.mappedColumns,n=i.length-1;i.splice(n,0,a),GH.RapidBoard.Config.Columns.renderColumnMapping(),GH.RapidBoard.Config.Columns.save(!1,function(){AJS.$("#ghx-mapping .ghx-mapped:eq("+n+") .ghx-header-name").click()})},GH.RapidBoard.Config.Columns.deleteColumn=function(a){var i=AJS.$(this).closest(".ghx-action").data("deleteindex"),n=GH.RapidBoard.Config.Columns.model.mappedColumns[i].mappedStatuses,o=GH.RapidBoard.Config.Columns.model.unmappedStatuses;GH.RapidBoard.Config.Columns.model.unmappedStatuses=o.concat(n),GH.RapidBoard.Config.Columns.model.mappedColumns.splice(i,1),GH.RapidBoard.Config.Columns.renderColumnMapping(),GH.RapidBoard.Config.Columns.save(!1)};var s=function(){var a=[];return AJS.$("#ghx-mapping .ghx-mapped").each(function(i,n){n=AJS.$(n);var o={},e=[];n.find(".ghx-status").each(function(a,i){e[a]={id:AJS.$(i).attr("data-statusid")}}),o.mappedStatuses=e;var d=n.attr("data-column-id");d&&(o.id=parseInt(d,10));var t=n.find('.ghx-header-name[data-fieldname="name"]').attr("data-fieldvalue");t&&(o.name=t),o.min=n.find('span[data-fieldname="min"]').attr("data-fieldvalue"),o.max=n.find('span[data-fieldname="max"]').attr("data-fieldvalue"),o.isKanPlanColumn=n.hasClass("ghx-kanplan-backlog"),a.push(o)}),a};GH.RapidBoard.Config.Columns._getModifiedModel=s;var u=function(a){var i=p(GH.RapidBoard.Config.Columns.model.mappedColumns),n=p(a);return i!==n},p=function(a){var i=a.find(function(a){return a.isKanPlanColumn});return i&&i.mappedStatuses.length>0};GH.RapidBoard.Config.Columns.save=function(a,i){"undefined"==typeof a&&(a=!0);var o={};o.currentStatisticsField={id:AJS.$("#ghx-statisticsfield-select").val()},o.rapidViewId=GH.RapidBoard.Config.Columns.model.rapidViewId,o.mappedColumns=s(),n.put({url:"/rapidviewconfig/columns",data:o}).done(function(n){GH.RapidBoard.Config.Columns.model=_.extend(GH.RapidBoard.Config.Columns.model,n.success),GH.RapidViewConfig.kanPlanEnabled=p(GH.RapidBoard.Config.Columns.model.mappedColumns),a&&GH.RapidBoard.Config.Columns.renderColumnMapping(),i&&i(),JIRA.trace("gh.config.column.saved"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("columnConfig")})},GH.RapidBoard.Config.Columns.updateNewColumn=function(a,i){GH.RapidBoard.Config.Columns.model=i,GH.RapidBoard.Config.Columns.renderColumnMapping()},GH.RapidBoard.Config.Columns.updateNewStatus=function(a,i){GH.RapidBoard.Config.Columns.containsStatus(i)||GH.RapidBoard.Config.Columns.model.unmappedStatuses.push(i),GH.RapidBoard.Config.Columns.renderColumnMapping(),GH.RapidBoard.Animation.fadeElement('.ghx-status[data-statusid="'+i.id+'"]');var n=AJS.$('.ghx-status[data-statusid="'+i.id+'"]').offset().top;AJS.$(window).scrollTop(n)},GH.RapidBoard.Config.Columns.updateRemovedStatus=function(a,i){var n=GH.RapidBoard.Config.Columns.model.unmappedStatuses;GH.RapidBoard.Config.Columns.model.unmappedStatuses=_.reject(n,function(a){return a.id===i}),GH.RapidBoard.Config.Columns.renderColumnMapping()},GH.RapidBoard.Config.Columns.reloadColumnsModel=function(){var a=n.get({url:"/rapidviewconfig/editmodel.json",data:{rapidViewId:GH.RapidBoard.Config.Columns.model.rapidViewId}},"columnConfig");return a.done(GH.RapidBoard.Config.Columns.processColumnMappingData),a},GH.RapidBoard.Config.Columns.processColumnMappingData=function(a){GH.RapidBoard.Config.Columns.model=a.rapidListConfig,GH.RapidBoard.Config.Columns.renderColumnMapping()},GH.RapidBoard.Config.Columns.containsStatus=function(a){var i=_.any(GH.RapidBoard.Config.Columns.model.unmappedStatuses,function(i){return i.id===a.id});return!!i||(_.any(GH.RapidBoard.Config.Columns.model.mappedColumns,function(n){if(i=_.any(n.mappedStatuses,function(i){return i.id===a.id}))return!0}),i)},GH.RapidBoard.Config.Columns.DnD={},GH.RapidBoard.Config.Columns.DnD.init=function(){GH.RapidBoard.Config.Columns.DnD.registerStatusDraggables()},GH.RapidBoard.Config.Columns.DnD.registerStatusDraggables=function(){AJS.$(".ghx-config-status").agileSortable({items:".ghx-status",connectWith:[".ghx-config-status"],placeholder:"ghx-sortable-status-placeholder",start:GH.RapidBoard.Config.Columns.DnD.statusDragStart,stop:GH.RapidBoard.Config.Columns.DnD.statusDragStop})},GH.RapidBoard.Config.Columns.DnD.statusDragStart=function(a,i){var n=AJS.$(".ghx-sortable-status-placeholder"),o=n.outerWidth(),e=n.outerHeight();i.item.width(o),i.item.height(e),GH.RapidBoard.Util.InlineEditable.cancelActiveEdits()},GH.RapidBoard.Config.Columns.DnD.statusDragStop=function(a,i){AJS.$(".tipsy").hide(),i.item.width(AJS.$(".ghx-constraints").width());var n=GH.RapidBoard.Config.Columns.model.showEpicAsPanel,o=GH.RapidBoard.Config.Columns._getModifiedModel(),t=u(o);t&&!p(o)&&n?e.triggerOnDemandResourceLoadWithCondition(GH.RapidBoard.State.getMode()===d.WORK,["wrc!gh-rapid-lwf-board-deferred"],"columnConfig",function(){var a=require("jira-agile/rapid/ui/kanplan/kan-plan-dialog-utils"),i=a.createAutoOffShowEpicAsPanelDialog();i.show(),i.on("submit",function(){GH.RapidBoard.Config.Columns.save(!1,function(){GH.RapidBoard.Config.Columns.updateShowEpicAsPanel(!1,function(){GH.RapidBoard.Config.Columns.trigger(GH.RapidBoard.Config.Columns.BACKLOG_COLUMN_STATUS_UPDATE),l.trigger("auto-off")})})}),i.on("cancel",function(){GH.RapidBoard.Config.Columns.renderColumnMapping(),AJS.trigger("analyticsEvent",{name:"jira-software.configuration.disable-kanplan-dialog.click.cancel"})})}):GH.RapidBoard.Config.Columns.save(!1,function(){t&&GH.RapidBoard.Config.Columns.trigger(GH.RapidBoard.Config.Columns.BACKLOG_COLUMN_STATUS_UPDATE)})},GH.RapidBoard.Config.Columns.EditField={},GH.RapidBoard.Config.Columns.EditField.MAX_ISSUE_COUNT_LIMIT=1e3,GH.RapidBoard.Config.Columns.EditField.init=function(){},GH.RapidBoard.Config.Columns.EditField.constraintsData=function(a,i){var n=GH.RapidBoard.Util.InlineEditable.defaultFieldData(a,i);return n.columnIndex=a.attr("data-columnindex"),n},GH.RapidBoard.Config.Columns.EditField.renderConstraintInlineEdit=function(a){var i=GH.RapidBoard.Util.InlineEditable.renderTextFieldInlineEdit(a,GH.tpl.columnconfig.renderCapacityFieldEdit);return i},GH.RapidBoard.Config.Columns.EditField.preInlineEditCallback=function(a){AJS.$('#ghx-mapping .ghx-header input[type="text"]').blur()},GH.RapidBoard.Config.Columns.EditField.columnNameValidation=function(a){var i=a.editElement.val();return!!GH.Validation.notBlank(a.editElement,"Name is a required field")&&(a.newValue=i,!0)},GH.RapidBoard.Config.Columns.EditField.constraintValidation=function(a){var i=a.editElement.val();i=AJS.$.trim(i);var n=a.editElement.parent().find(":not(.ghx-error):last"),o=a.fieldName,e=a.columnIndex;if(""!==i){if(i=parseInt(i,10),isNaN(i))return GH.Validation.showContextualErrors(n,"Constraint must be a number"),!1;if(i=Math.floor(i),i<0)return GH.Validation.showContextualErrors(n,AJS.format("Constraint must be greater than or equal to {0}",0)),!1;if(i>=GH.RapidBoard.Config.Columns.EditField.MAX_ISSUE_COUNT_LIMIT)return GH.Validation.showContextualErrors(n,AJS.format("Constraint must be less than {0}",GH.RapidBoard.Config.Columns.EditField.MAX_ISSUE_COUNT_LIMIT)),!1;var d="min"===o?"max":"min",t=AJS.$("#ghx-mapping .ghx-mapped .js-edit-"+d+"[data-columnindex="+e+"]").attr("data-fieldvalue");if(""!==t)if(t=parseInt(t,10),"min"===o){if(i>t)return GH.Validation.showContextualErrors(n,"Minimum constraint must be less than or equal to the maximum constraint"),!1}else if(i<t)return GH.Validation.showContextualErrors(n,"Maximum constraint must be greater than or equal to the minimum constraint"),!1}return a.newValue=i,!0},GH.RapidBoard.Config.Columns.EditField.saveEditChanges=function(a){GH.RapidBoard.Util.InlineEditable.updateView(a),GH.RapidBoard.Config.Columns.save(!1)},GH.RapidBoard.Config.Columns.EditField.renderColumnNameView=function(a){var i=AJS.$(GH.tpl.columnconfig.renderColumnNameField({canEdit:!0,fieldName:a.fieldName,fieldValue:a.newValue,displayValue:a.newValue}));return i},GH.RapidBoard.Config.Columns.EditField.renderColumnConstraintView=function(a){var i,n=a.newValue,o=_.isNumber(n);return i=AJS.$(GH.tpl.columnconfig.renderCapacityField({canEdit:!0,fieldName:a.fieldName,fieldValue:n,index:a.columnIndex,hasValue:o}))},GH.RapidBoard.Config.Columns.EditField.registerInlineEdits=function(){var a=GH.RapidBoard.Util.InlineEditable,i=GH.RapidBoard.Config.Columns.EditField;a.register("#ghx-mapping .ghx-mapped .js-edit-name-trigger",{preEdit:i.preInlineEditCallback,validate:i.columnNameValidation,save:i.saveEditChanges,renderView:i.renderColumnNameView}),a.register("#ghx-mapping .ghx-mapped .js-edit-min,.js-edit-max",{getData:i.constraintsData,preEdit:i.preInlineEditCallback,renderEdit:i.renderConstraintInlineEdit,validate:i.constraintValidation,save:i.saveEditChanges,renderView:i.renderColumnConstraintView})},GH.RapidBoard.Config.Columns.resolutionUpdate=function(){var a=AJS.$(this),i=a.is(":checked"),o=a.closest(".ghx-status").attr("data-statusid"),e=parseInt(a.closest(".ghx-config-status").attr("data-column-id"),10),d=_.findWhere(GH.RapidBoard.Config.Columns.model.mappedColumns,{id:e}),t=_.findWhere(d.mappedStatuses,{id:o});t.isResolutionDone=i,n.post({url:"/workflow/status/resolution",data:{rapidViewId:GH.RapidBoard.Config.Columns.model.rapidViewId,statusId:o,done:i}})},GH.RapidBoard.Config.Columns.shouldRenderKanbanBacklogColumn=function(){return GH.RapidBoard.Config.Columns.kanPlanConfig.isKanbanBoard}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/ColumnConfig.soy' */
// This file was automatically generated from ColumnConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.columnconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.columnconfig == 'undefined') { GH.tpl.columnconfig = {}; }


GH.tpl.columnconfig.renderColumnMappingView = function(opt_data, opt_ignored) {
  return '' + GH.tpl.columnconfig.renderConfigColumns(opt_data) + GH.tpl.columnconfig.renderColumnMapping(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderColumnMappingView.soyTemplateName = 'GH.tpl.columnconfig.renderColumnMappingView';
}


GH.tpl.columnconfig.renderConfigColumns = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-config-columns" class="ghx-config-columns"><h2>' + soy.$$escapeHtml('Column management') + '</h2><p>' + soy.$$escapeHtml('Columns can be added, removed, reordered and renamed. Columns are based upon global statuses and can be moved between columns. Minimum and maximum constraints can be set for each mapped column.') + '</p><form class="aui"><div class="field-group"><label>' + soy.$$escapeHtml('Column Constraint') + '</label><select id="ghx-statisticsfield-select" class="select" ' + ((opt_data.model.canEdit != true) ? 'disabled="disabled"' : '') + '>';
  var fieldList28 = opt_data.model.statisticsFields;
  var fieldListLen28 = fieldList28.length;
  for (var fieldIndex28 = 0; fieldIndex28 < fieldListLen28; fieldIndex28++) {
    var fieldData28 = fieldList28[fieldIndex28];
    output += '<option value="' + soy.$$escapeHtml(fieldData28.id) + '" ' + ((fieldData28.id == opt_data.model.currentStatisticsField.id) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(fieldData28.name) + '</option>';
  }
  output += '</select><div class="description">' + soy.$$escapeHtml('Constraints can be added to columns on the board for one statistic.') + '</div></div>' + ((opt_data.model.workflow.isSimplifiedWorkflowFeatureEnabled) ? '<div class="field-group"><label>' + soy.$$escapeHtml('Simplified Workflow') + '</label>' + ((opt_data.model.workflow.usingSimplifiedWorkflow) ? '<div class="field-value">' + soy.$$escapeHtml('Using Simplified Workflow') + '</div><div class="description">' + soy.$$filterNoAutoescape(AJS.format('The {0}workflow{1} for project {2}{3}{4} is currently managed by Jira Software. Project Administrators can add and remove statuses below.','<a href="' + opt_data.adminWorkflowUrl + '">','</a>','<b>',opt_data.simplifiedWorkflowProjectName,'</b>')) + GH.tpl.columnconfig.renderSimplifiedWorkflowHelp(opt_data) + '</div>' : (opt_data.model.workflow.canSimplifyWorkflow) ? '<button id="js-convert-workflow" class="aui-button ghx-button-inline" ' + ((! opt_data.model.workflow.userCanSimplifyWorkflow || opt_data.model.canEdit != true) ? ' disabled="true"' : '') + '>' + soy.$$escapeHtml('Simplify workflow') + '</button><div class="description">' + soy.$$filterNoAutoescape(AJS.format('Simplify the workflow for project {0}{1}{2} to make it managed by Jira Software. This will allow Project Administrators to add and remove statuses below.','<b>',opt_data.simplifiedWorkflowProjectName,'</b>')) + GH.tpl.columnconfig.renderSimplifiedWorkflowHelp(opt_data) + ((! opt_data.model.workflow.userCanSimplifyWorkflow && opt_data.model.canEdit == true) ? '<br/>' + soy.$$filterNoAutoescape(AJS.format('{0}Contact an administrator{1} to perform this action.','<a href="' + opt_data.contactAdminUrl + '">','</a>')) : '') + '</div>' : '<div class="field-value">' + soy.$$escapeHtml('Software Simplified Workflow unavailable') + '</div><div class="description">' + soy.$$escapeHtml('This board is unable to use a Software Simplified Workflow.') + GH.tpl.columnconfig.renderSimplifiedWorkflowHelp(opt_data) + '</div>') + '</div>' : '') + ((opt_data.isKanPlanEnabled) ? '<div class="field-group"><label for="ghx-checkbox-epic-appearance">' + soy.$$escapeHtml('Epics panel') + '</label><aui-toggle id="ghx-checkbox-epic-appearance"' + ((opt_data.model.showEpicAsPanel) ? ' checked="checked"' : '') + 'label="' + soy.$$escapeHtml('Epics panel') + '"></aui-toggle><div class="description">' + soy.$$escapeHtml('Display epics in a panel in the backlog, and not as cards on the board') + '</div></div>' : '') + '</form><div class="ghx-toolbar ghx-config-column-toolbar aui-buttons">';
  if (opt_data.model.workflow.isSimplifiedWorkflowFeatureEnabled && opt_data.model.workflow.usingSimplifiedWorkflow) {
    var title__soy102 = '' + ((opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow != true) ? soy.$$filterNoAutoescape(AJS.format('Only users who have Administer Project permission on project \x27\x27{0}\x27\x27 can add statuses to this board.',opt_data.model.workflow.simplifiedWorkflowProjectName)) : '');
    var disabled__soy107 = opt_data.model.canEdit == false || opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow == false;
    output += aui.buttons.button({id: 'ghx-config-addstatus', isDisabled: disabled__soy107, extraAttributes: {title: title__soy102}, text: 'Add status'});
  }
  var disabled__soy113 = opt_data.model.canEdit == false;
  output += aui.buttons.button({id: 'ghx-config-addcolumn', isDisabled: disabled__soy113, text: 'Add column'}) + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderConfigColumns.soyTemplateName = 'GH.tpl.columnconfig.renderConfigColumns';
}


GH.tpl.columnconfig.renderColumnMapping = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-mapping" data-last-updated="' + soy.$$escapeHtml(opt_data.lastUpdated) + '" class="' + ((opt_data.isHorizontalScrollEnabled) ? 'ghx-flexible-board' : '') + '">' + ((opt_data.isHorizontalScrollEnabled) ? '<div id="ghx-mapping-columns-wrapper"><div id="ghx-mapping-columns">' : '');
  if (opt_data.shouldRenderKanbanBacklogColumn) {
    var columnList132 = opt_data.model.mappedColumns;
    var columnListLen132 = columnList132.length;
    for (var columnIndex132 = 0; columnIndex132 < columnListLen132; columnIndex132++) {
      var columnData132 = columnList132[columnIndex132];
      output += (columnData132.isKanPlanColumn) ? GH.tpl.columnconfig.renderBacklogColumn({column: columnData132, canEdit: opt_data.model.canEdit, simplifiedWorkflow: opt_data.model.workflow.usingSimplifiedWorkflow, statuses: columnData132.mappedStatuses, statisticsFieldEnabled: opt_data.model.currentStatisticsField.isEnabled, numberOfColumns: opt_data.model.mappedColumns.length, kanbanBacklogUrl: opt_data.kanbanBacklogUrl, isHorizontalScrollEnabled: opt_data.isHorizontalScrollEnabled}) : GH.tpl.columnconfig.renderMappingColumn({simplifiedWorkflow: opt_data.model.workflow.usingSimplifiedWorkflow, canEdit: opt_data.model.canEdit, statisticsField: opt_data.model.currentStatisticsField, column: columnData132, index: columnIndex132, numberOfColumns: opt_data.model.mappedColumns.length, shouldRenderKanbanBacklogColumn: opt_data.shouldRenderKanbanBacklogColumn, canUpdateResolution: opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow, isHorizontalScrollEnabled: opt_data.isHorizontalScrollEnabled});
    }
    output += ((opt_data.isHorizontalScrollEnabled) ? '</div></div>' : '') + GH.tpl.columnconfig.renderUnmappedColumn({simplifiedWorkflow: opt_data.model.workflow.usingSimplifiedWorkflow, unmappedStatusesWithIssues: opt_data.model.unmappedStatusesWithIssues, unmappedStatusesWithoutIssues: opt_data.model.unmappedStatusesWithoutIssues, numberOfColumns: opt_data.model.mappedColumns.length, statisticsFieldEnabled: opt_data.model.currentStatisticsField.isEnabled, canDeleteStatus: opt_data.model.workflow.usingSimplifiedWorkflow && opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow && opt_data.model.canEdit, isHorizontalScrollEnabled: opt_data.isHorizontalScrollEnabled});
  } else {
    var columnList168 = opt_data.model.mappedColumns;
    var columnListLen168 = columnList168.length;
    for (var columnIndex168 = 0; columnIndex168 < columnListLen168; columnIndex168++) {
      var columnData168 = columnList168[columnIndex168];
      output += (columnData168.isKanPlanColumn == false) ? GH.tpl.columnconfig.renderMappingColumn({simplifiedWorkflow: opt_data.model.workflow.usingSimplifiedWorkflow, canEdit: opt_data.model.canEdit, statisticsField: opt_data.model.currentStatisticsField, column: columnData168, index: columnIndex168, numberOfColumns: opt_data.model.mappedColumns.length, shouldRenderKanbanBacklogColumn: opt_data.shouldRenderKanbanBacklogColumn, canUpdateResolution: opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow, isHorizontalScrollEnabled: opt_data.isHorizontalScrollEnabled}) : '';
    }
    output += ((opt_data.isHorizontalScrollEnabled) ? '</div></div>' : '') + GH.tpl.columnconfig.renderUnmappedColumn({simplifiedWorkflow: opt_data.model.workflow.usingSimplifiedWorkflow, unmappedStatusesWithIssues: opt_data.model.unmappedStatusesWithIssues, unmappedStatusesWithoutIssues: opt_data.model.unmappedStatusesWithoutIssues, numberOfColumns: opt_data.model.mappedColumns.length, statisticsFieldEnabled: opt_data.model.currentStatisticsField.isEnabled, canDeleteStatus: opt_data.model.workflow.usingSimplifiedWorkflow && opt_data.model.workflow.isProjectAdminOfSimplifiedWorkflow && opt_data.model.canEdit, isHorizontalScrollEnabled: opt_data.isHorizontalScrollEnabled});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderColumnMapping.soyTemplateName = 'GH.tpl.columnconfig.renderColumnMapping';
}


GH.tpl.columnconfig.renderSimplifiedWorkflowHelp = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.simplifiedWorkflowLearnMoreUrl) + '"><span title="' + soy.$$escapeHtml('Learn more about Software Simplified Workflow') + '" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-help">' + soy.$$escapeHtml('Learn more about Software Simplified Workflow') + '</span></a>';
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderSimplifiedWorkflowHelp.soyTemplateName = 'GH.tpl.columnconfig.renderSimplifiedWorkflowHelp';
}


GH.tpl.columnconfig.renderMappingColumn = function(opt_data, opt_ignored) {
  var output = ((! opt_data.isHorizontalScrollEnabled) ? '<div class="ghx-column-wrapper" style="width:' + soy.$$escapeHtml(100 / (opt_data.numberOfColumns + 1)) + '%;">' : '') + '<ul class="' + ((opt_data.isHorizontalScrollEnabled) ? 'ghx-column-wrapper' : '') + ' ghx-config-status ghx-mapped' + ((opt_data.column.isFirstColumnWithStatuses) ? ' ghx-first' : (opt_data.column.isLastColumnWithStatuses) ? ' ghx-last' : '') + ((opt_data.column.mappedStatuses.length == 0) ? ' ghx-no-status-column' : '') + '" data-column-id="' + soy.$$escapeHtml(opt_data.column.id) + '"><li class="ghx-header"><div class="ghx-config-operator"><div class="ghx-action ghx-config-move"></div>' + ((opt_data.shouldRenderKanbanBacklogColumn && opt_data.numberOfColumns > 2 || ! opt_data.shouldRenderKanbanBacklogColumn && opt_data.numberOfColumns > 1) ? '<div class="ghx-action ghx-config-delete" data-deleteindex="' + soy.$$escapeHtml(opt_data.index) + '"><span class="aui-icon aui-icon-small aui-iconfont-delete js-column-delete"></span></div>' : '') + '</div>' + GH.tpl.columnconfig.renderColumnNameField({canEdit: opt_data.canEdit, fieldName: 'name', fieldValue: opt_data.column.name, displayValue: opt_data.column.name}) + ((opt_data.statisticsField.isEnabled) ? GH.tpl.columnconfig.renderCapacities(opt_data) : '') + '<div class="ghx-border-bottom"></div></li>';
  if (opt_data.column.mappedStatuses.length == 0) {
    output += '<li class="ghx-no-status-column-text">' + soy.$$escapeHtml('This column will not show on the board without a status') + '</li>';
  } else {
    var statusList248 = opt_data.column.mappedStatuses;
    var statusListLen248 = statusList248.length;
    for (var statusIndex248 = 0; statusIndex248 < statusListLen248; statusIndex248++) {
      var statusData248 = statusList248[statusIndex248];
      output += GH.tpl.columnconfig.renderStatus({simplifiedWorkflow: opt_data.simplifiedWorkflow, canUpdateResolution: opt_data.canUpdateResolution, status: statusData248, canDeleteStatus: false});
    }
  }
  output += '</ul>' + ((! opt_data.isHorizontalScrollEnabled) ? '</div>' : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderMappingColumn.soyTemplateName = 'GH.tpl.columnconfig.renderMappingColumn';
}


GH.tpl.columnconfig.renderUnmappedColumn = function(opt_data, opt_ignored) {
  return ((! opt_data.isHorizontalScrollEnabled) ? '<div class="ghx-column-wrapper ghx-fixed-column" style="width:' + soy.$$escapeHtml(100 / (opt_data.numberOfColumns + 1)) + '%;">' : '') + '<ul class="' + ((opt_data.isHorizontalScrollEnabled) ? 'ghx-column-wrapper ghx-fixed-column ' : '') + 'ghx-config-status ghx-unmapped ' + ((opt_data.statisticsFieldEnabled) ? 'ghx-statistics-enabled' : '') + '"><li class="ghx-header"><h3 class="ghx-header-name" title="' + soy.$$escapeHtml('Unmapped Statuses') + '">' + soy.$$escapeHtml('Unmapped Statuses') + '</h3><span title="' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml('Issues in these statuses won\x27t show on the Kanban board or Kanban backlog.')) + '" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-help"></span><div class="ghx-border-bottom"></div></li>' + GH.tpl.columnconfig.renderUnmappedColumnBody(opt_data) + '</ul>' + ((! opt_data.isHorizontalScrollEnabled) ? '</div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderUnmappedColumn.soyTemplateName = 'GH.tpl.columnconfig.renderUnmappedColumn';
}


GH.tpl.columnconfig.renderBacklogColumn = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-column-wrapper ghx-fixed-column ghx-kanplan-backlog-column"' + ((! opt_data.isHorizontalScrollEnabled) ? 'style="width:' + soy.$$escapeHtml(100 / (opt_data.numberOfColumns + 1)) + '%;"' : '') + '><div class="ghx-top-header" style=\'height:' + ((opt_data.statisticsFieldEnabled) ? '139px' : '32px') + '\'>' + GH.tpl.columnconfig.renderColumnNameField({canEdit: false, fieldName: 'name', fieldValue: 'Kanban backlog', displayValue: 'Kanban backlog'}) + '</div><div class="ghx-border-bottom"></div><ul class="ghx-config-status ghx-mapped ghx-kanplan-backlog" data-column-id="' + soy.$$escapeHtml(opt_data.column.id) + '"><li class="ghx-header"><div class="ghx-backlog-column-image"></div><div class="ghx-backlog-column-container"></div></li>' + ((opt_data.statuses.length == 0) ? '<li class="ghx-no-status-text"><strong>' + soy.$$escapeHtml('Board getting full?') + '</strong><p>' + soy.$$escapeHtml('With the Kanban backlog, you can plan your team\x27s work in a dedicated space away from the board.') + '</p>' + ((opt_data.canEdit) ? '<div class="ghx-drag-status-zone"><div>' + soy.$$escapeHtml('Drag a status here to enable') + '</div></div>' : '') + '</li>' : '');
  var statusList324 = opt_data.statuses;
  var statusListLen324 = statusList324.length;
  for (var statusIndex324 = 0; statusIndex324 < statusListLen324; statusIndex324++) {
    var statusData324 = statusList324[statusIndex324];
    output += GH.tpl.columnconfig.renderStatus({simplifiedWorkflow: opt_data.simplifiedWorkflow, canUpdateResolution: false, status: statusData324, canDeleteStatus: false});
  }
  output += '</ul><div class="ghx-footer"><a href="' + soy.$$escapeHtml(opt_data.kanbanBacklogUrl) + '" target="_blank">' + soy.$$escapeHtml('What is Kanban backlog?') + '</a></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderBacklogColumn.soyTemplateName = 'GH.tpl.columnconfig.renderBacklogColumn';
}


GH.tpl.columnconfig.renderUnmappedColumnBody = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.unmappedStatusesWithIssues.length > 0) ? '<li><h4>' + soy.$$escapeHtml('Statuses containing issues') + '</h4><p class="ghx-description">' + soy.$$escapeHtml('Not visible on the board') + '</p></li>' : '');
  var statusList344 = opt_data.unmappedStatusesWithIssues;
  var statusListLen344 = statusList344.length;
  for (var statusIndex344 = 0; statusIndex344 < statusListLen344; statusIndex344++) {
    var statusData344 = statusList344[statusIndex344];
    output += GH.tpl.columnconfig.renderStatus({simplifiedWorkflow: opt_data.simplifiedWorkflow, canUpdateResolution: false, status: statusData344, canDeleteStatus: false});
  }
  output += ((opt_data.unmappedStatusesWithIssues.length > 0 && opt_data.unmappedStatusesWithoutIssues.length > 0) ? '<li class="ghx-hr"></li>' : '') + ((opt_data.unmappedStatusesWithoutIssues.length > 0) ? '<li><h4>' + soy.$$escapeHtml('Statuses not containing issues') + '</h4></li>' : '');
  var statusList359 = opt_data.unmappedStatusesWithoutIssues;
  var statusListLen359 = statusList359.length;
  for (var statusIndex359 = 0; statusIndex359 < statusListLen359; statusIndex359++) {
    var statusData359 = statusList359[statusIndex359];
    output += GH.tpl.columnconfig.renderStatus({simplifiedWorkflow: opt_data.simplifiedWorkflow, canUpdateResolution: false, status: statusData359, canDeleteStatus: opt_data.canDeleteStatus});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderUnmappedColumnBody.soyTemplateName = 'GH.tpl.columnconfig.renderUnmappedColumnBody';
}


GH.tpl.columnconfig.renderStatus = function(opt_data, opt_ignored) {
  return '<li><div class="ghx-status' + ((! opt_data.status.isPresentInWorkflow == true) ? ' ghx-not-present' : '') + '" data-statusid="' + soy.$$escapeHtml(opt_data.status.id) + '"><div class="ghx-name' + ((opt_data.canDeleteStatus) ? ' ghx-has-bin' : '') + ((! opt_data.status.isPresentInWorkflow == true) ? ' ghx-has-warning' : '') + '"><div class="ghx-lozenge-wrap">' + GH.tpl.status.renderFull(opt_data) + '</div></div><div><div class="ghx-qty">' + soy.$$escapeHtml(AJS.format('{0,choice,0#No issues|1#{0} issue|2#{0} issues}',opt_data.status.issueCount)) + '</div><div class="ghx-done">' + ((opt_data.simplifiedWorkflow) ? '<label><input id="resolution-update-' + soy.$$escapeHtml(opt_data.status.id) + '" class="js-resolution-update" data-tooltip="' + soy.$$escapeHtml('Tick to set the resolution to \x27Done\x27 when an issue is transitioned to this status') + '" type="checkbox"' + ((! opt_data.canUpdateResolution || ! opt_data.status.isPresentInWorkflow == true) ? ' disabled="true" ' : '') + ((opt_data.status.isResolutionDone) ? ' checked="checked" ' : '') + '><span class=' + soy.$$escapeHtml(opt_data.canUpdateResolution ? '' : 'ghx-resolution-update-disabled') + '>' + soy.$$escapeHtml('Set resolution') + '</span></label>' : '') + '</div></div><div class="ghx-actions">' + ((! opt_data.status.isPresentInWorkflow == true) ? '<span class="ghx-icon ghx-icon-warning"  title="' + soy.$$escapeHtml('This status is not available in any of the workflows used by this board. To remove, drag it to unmapped statuses where it will no longer be available.') + '"></span>' : '') + ((opt_data.canDeleteStatus) ? '<a class="js-remove-status ghx-remove-status" rel="nofollow"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove" title="' + soy.$$escapeHtml('Remove Status') + '">' + soy.$$escapeHtml('Remove Status') + '</span></a>' : '') + '</div></div></li>';
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderStatus.soyTemplateName = 'GH.tpl.columnconfig.renderStatus';
}


GH.tpl.columnconfig.renderCapacities = function(opt_data, opt_ignored) {
  return '<div class="ghx-constraints">' + GH.tpl.columnconfig.renderCapacityField({canEdit: opt_data.canEdit, fieldName: 'min', fieldValue: opt_data.column.min, index: opt_data.index, hasValue: opt_data.column.min != '' ? true : false}) + GH.tpl.columnconfig.renderCapacityField({canEdit: opt_data.canEdit, fieldName: 'max', fieldValue: opt_data.column.max, index: opt_data.index, hasValue: opt_data.column.max != '' ? true : false}) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderCapacities.soyTemplateName = 'GH.tpl.columnconfig.renderCapacities';
}


GH.tpl.columnconfig.renderCapacityField = function(opt_data, opt_ignored) {
  var output = '';
  var placeholder__soy434 = opt_data.fieldName == 'min' ? 'No Min' : 'No Max';
  var title__soy435 = opt_data.fieldName == 'min' ? 'Minimum constraint for this column' : 'Maximum constraint for this column';
  var displayValue__soy436 = opt_data.hasValue ? opt_data.fieldValue : placeholder__soy434;
  output += '<span class="field-value' + ((opt_data.canEdit) ? ' js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + ' ghx-editable' : '') + ' ghx-busted ghx-busted-' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" data-columnindex=' + soy.$$escapeHtml(opt_data.index) + ' title="' + soy.$$escapeHtml(title__soy435) + '">' + soy.$$escapeHtml(displayValue__soy436) + '</span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderCapacityField.soyTemplateName = 'GH.tpl.columnconfig.renderCapacityField';
}


GH.tpl.columnconfig.renderCapacityFieldEdit = function(opt_data, opt_ignored) {
  return '<input type="text" maxlength="5" name="' + soy.$$escapeHtml(opt_data.fieldName) + '" class=" ghx-busted ghx-busted-' + soy.$$escapeHtml(opt_data.fieldName) + '" data-columnindex=' + soy.$$escapeHtml(opt_data.index) + '>';
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderCapacityFieldEdit.soyTemplateName = 'GH.tpl.columnconfig.renderCapacityFieldEdit';
}


GH.tpl.columnconfig.renderColumnNameField = function(opt_data, opt_ignored) {
  return '<h3 class="ghx-header-name ' + ((opt_data.canEdit) ? 'ghx-editable js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger' : '') + '" ' + ((opt_data.canEdit) ? 'tabindex="0"' : '') + ' data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" title="' + soy.$$escapeHtml(opt_data.displayValue) + '">' + soy.$$escapeHtml(opt_data.displayValue) + '</h3>';
};
if (goog.DEBUG) {
  GH.tpl.columnconfig.renderColumnNameField.soyTemplateName = 'GH.tpl.columnconfig.renderColumnNameField';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/ops/GHJQLAutoComplete.js' */
!function(){"use strict";function e(e,t){var r=o("#"+e),i=r.length>0&&r[0]===document.activeElement,n=JIRA.JQLAutoComplete({fieldID:e,parser:JIRA.JQLAutoComplete.MyParser(GH.JQLAutoComplete.jqlReservedWords),queryDelay:.65,jqlFieldNames:GH.JQLAutoComplete.jqlFields,jqlFunctionNames:GH.JQLAutoComplete.jqlFunctionNames,minQueryLength:0,allowArrowCarousel:!0,autoSelectFirst:!1,errorID:t}),s=o("#"+e);s.unbind("keypress",submitOnEnter),n.buildResponseContainer(),n.parse(s.text()),n.updateColumnLineCount(),s.on("focus",function(){n.positionResponseContainer()}),s.click(function(){n.dropdownController.hideDropdown()}),i&&r.select(),r.data("ghJqlAutoComplete",n)}var o=require("jquery"),t=require("jira-agile/rapid/deferred-resources-loader"),r=require("jira/featureflags/feature-manager"),i=require("jira-agile/rapid/const/PageMode");GH.JQLAutoComplete.setModel=function(e){GH.JQLAutoComplete.jqlFields=JSON.parse(e.JQLAutoComplete.jqlFields),GH.JQLAutoComplete.jqlFunctionNames=JSON.parse(e.JQLAutoComplete.jqlFunctionNames),GH.JQLAutoComplete.jqlReservedWords=JSON.parse(e.JQLAutoComplete.jqlReservedWords)},GH.JQLAutoComplete.initialize=function(o,t){r.isFeatureEnabled("jsw.classic.keto")&&GH.RapidBoard.State.getMode()===i.PLAN?n(["wrc!gh-rapid-backlog-deferred"],o,t):GH.RapidBoard.State.getMode()===i.WORK?n(["wrc!gh-rapid-lwf-board-deferred"],o,t):e(o,t)};var n=function(o,r,i){t.triggerOnDemandResourceLoad(o,"jqlAutoComplete",function(){e(r,i)})};GH.JQLAutoComplete.fixSuggestionPositioning=function(e){var t=o("#"+e).data("ghJqlAutoComplete");t&&(t.positionResponseContainer||(t.positionResponseContainer=function(){this.responseContainer&&this.field&&this.responseContainer.css({top:this.field.outerHeight()})}),t.positionResponseContainer())}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/SwimlaneConfig.js' */
GH.RapidBoard.Config.Swimlanes={},GH.RapidBoard.Config.Swimlanes.Analytics={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.Config.Swimlanes.Analytics.base=new e("gh.swimlane"),GH.RapidBoard.Config.Swimlanes.Analytics.add=new e("gh.swimlane","create"),GH.RapidBoard.Config.Swimlanes.Analytics.edit=new e("gh.swimlane","edit"),GH.RapidBoard.Config.Swimlanes.Analytics.remove=new e("gh.swimlane","delete")}(),GH.RapidBoard.Config.Swimlanes.strategies=[{id:"custom",primarySelectId:"custom",inPrimarySelection:!0,name:"Queries",description:"Group issues by custom queries. Queries are based on JQL that is additional to the saved filter of this board."},{id:"parentChild",primarySelectId:"parentChild",inPrimarySelection:!0,name:"Stories",description:"Group sub-tasks under their parent issue. Issues without sub-tasks will be shown in their own group at the bottom."},{id:"assignee",primarySelectId:"assignee",inPrimarySelection:!0,name:"Assignees",description:"Group issues by their assignee"},{id:"assigneeUnassignedFirst",primarySelectId:"assignee",inPrimarySelection:!1,name:"Assignees",description:"Group issues by their assignee"},{id:"epic",primarySelectId:"epic",inPrimarySelection:!0,name:"Epics",description:"Group issues under their epic. Issues not assigned to an epic will be shown in their own group at the bottom. Epics with no issues on the board will not be shown."},{id:"project",primarySelectId:"project",inPrimarySelection:!0,name:"Projects",description:"Group issues by their projects."},{id:"none",primarySelectId:"none",inPrimarySelection:!0,name:"None",description:"No swimlanes will be displayed."}],GH.RapidBoard.Config.Swimlanes.assigneeStrategies=[{id:"assignee",name:"Show below other swimlanes"},{id:"assigneeUnassignedFirst",name:"Show above other swimlanes"}],GH.RapidBoard.Config.Swimlanes.TableColumns=[{id:"name",header:"Name",fieldName:"name"},{id:"query",header:"JQL",fileName:"query",editView:GH.RapidBoard.Config.Util.JQLEditView.extend({namespace:"ghx-swimlane"})},{id:"description",header:"Description",fileName:"description",editView:GH.RapidBoard.Config.Util.TextAreaEditView}],GH.RapidBoard.Config.Swimlanes.model=void 0,GH.RapidBoard.Config.Swimlanes.init=function(e){GH.RapidBoard.Config.Swimlanes.model=e.swimlanesConfig,e.isSprintSupportEnabled?GH.RapidBoard.Config.Swimlanes.boardType="scrum":e.isSimpleBoard?GH.RapidBoard.Config.Swimlanes.boardType="simple":GH.RapidBoard.Config.Swimlanes.boardType="kanban",GH.RapidBoard.Config.Swimlanes.renderConfig()},GH.RapidBoard.Config.Swimlanes.getStrategyById=function(e){return _.find(GH.RapidBoard.Config.Swimlanes.getStrategies(),function(i){return i.id==e})},GH.RapidBoard.Config.Swimlanes.renderConfig=function(){var e=GH.RapidBoard.Config.Swimlanes.model,i=e.canEdit,a=e.swimlaneStrategy,n=GH.RapidBoard.Config.Swimlanes.getStrategyById(a);n||(n=GH.RapidBoard.Config.Swimlanes.getStrategyById("none")),AJS.$("#ghx-config-swimlanes").html(GH.tpl.swimlaneconfig.renderSwimlaneConfigView({canEdit:i,selectedStrategy:n,strategies:GH.RapidBoard.Config.Swimlanes.getStrategies()})),GH.RapidBoard.Config.Swimlanes.updateStrategyConfig(n),AJS.$("#ghx-swimlanestrategy-select").change(GH.RapidBoard.Config.Swimlanes.saveStrategySelection)},GH.RapidBoard.Config.Swimlanes.getStrategies=function(){return _.filter(GH.RapidBoard.Config.Swimlanes.strategies,function(e){return!e.boardType||e.boardType==GH.RapidBoard.Config.Swimlanes.boardType})},GH.RapidBoard.Config.Swimlanes.updateStrategyConfig=function(e){switch(AJS.$("#ghx-swimlanestrategy-description").text(e.description),e.id){case"custom":return void GH.RapidBoard.Config.Swimlanes.initializeCustomConfig();case"assignee":case"assigneeUnassignedFirst":return void GH.RapidBoard.Config.Swimlanes.initializeAssigneeConfig(e);case"parentChild":case"none":default:GH.RapidBoard.Config.Swimlanes.initializeNone()}},GH.RapidBoard.Config.Swimlanes.saveStrategySelection=function(e){var i=AJS.$("#ghx-swimlanestrategy-select").val(),a=AJS.$("#ghx-assignee-strategy-select").val(),n=GH.RapidBoard.Config.Swimlanes.model.swimlaneStrategy,t="assignee"===i&&a?a:i,s=GH.RapidBoard.Config.Swimlanes.getStrategyById(t);if(s){GH.RapidBoard.Config.Swimlanes.model.swimlaneStrategy=s.id;GH.RapidBoard.Config.Swimlanes.updateStrategyConfig(s);var d=GH.RapidBoard.Config.Swimlanes.model.rapidViewId;GH.Ajax.put({url:"/rapidviewconfig/swimlaneStrategy",data:{id:d,swimlaneStrategyId:s.id}}).done(function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("swimLaneStrategy",{oldValId:n,newValId:t}),JIRA.trace("gh.swimlanes.strategy.saved")})}},GH.RapidBoard.Config.Swimlanes.initializeAssigneeConfig=function(e){var i=GH.RapidBoard.Config.Swimlanes.model,a=i.canEdit;AJS.$("#ghx-swimlane-strategy-config").html(GH.tpl.swimlaneconfig.renderAssigneeStrategyConfig({canEdit:a,assigneeStrategies:GH.RapidBoard.Config.Swimlanes.assigneeStrategies,selectedStrategy:e})),AJS.$("#ghx-assignee-strategy-select").change(GH.RapidBoard.Config.Swimlanes.saveStrategySelection)},GH.RapidBoard.Config.Swimlanes.initializeNone=function(){AJS.$("#ghx-swimlane-strategy-config").empty()},GH.RapidBoard.Config.Swimlanes.initializeCustomConfig=function(){var e=GH.RapidBoard.Config.Swimlanes.model,i=e.canEdit,a=e.rapidViewId,n=e.swimlanes;if(!i)for(var t=0;t<n.length;t++)n[t].readonly=!0;AJS.$("#ghx-swimlane-strategy-config").html('<table id="ghx-swimlane-table" class="aui"></table>');var s=new GH.RestfulTable({el:AJS.$("#ghx-swimlane-table"),resources:{all:function(e){e(GH.RapidBoard.Config.Swimlanes.model.swimlanes)},self:GH.Ajax.buildRestUrl("/swimlanes/"+a+"/")},columns:GH.RapidBoard.Config.Swimlanes.TableColumns,deleteConfirmation:{header:"Delete",content:function(e){return GH.tpl.rapid.view.deleteForm({message:AJS.format("Are you sure you want to delete Swimlane \u003cstrong\u003e{0}\u003c/strong\u003e?",AJS.escapeHTML(String(e.name)))})}},views:{row:GH.RapidBoard.Config.Swimlanes.Row,editRow:GH.RapidBoard.Config.Swimlanes.EditRow},allowEdit:i,allowDelete:i,allowReorder:i,allowCreate:i}),d=s.getModels();d.on("add",function(e,i){GH.RapidBoard.Config.Swimlanes.model.swimlanes=i.toJSON()}),d.on("remove",function(e,i){GH.RapidBoard.Config.Swimlanes.model.swimlanes=i.toJSON()}),d.on("change",function(e,i){var a=this;setTimeout(function(){GH.RapidBoard.Config.Swimlanes.model.swimlanes=a.toJSON()},0)}),AJS.$(s).bind(GH.RestfulTable.Events.REORDER_SUCCESS,function(){GH.RapidBoard.Config.Swimlanes.model.swimlanes=this.getModels().sort().toJSON()}),s.$tbody.agileSortable("option","items","> .js-sortable"),e.canEdit&&(_.delay(GH.JQLAutoComplete.initialize,0,"ghx-swimlane-jql-create","ghx-swimlane-jql-errormsg-create"),AJS.$(document).bind("tabSelect",function(e,i){GH.JQLAutoComplete.fixSuggestionPositioning("ghx-swimlane-jql-create")}),AJS.$(s).bind(GH.RestfulTable.Events.ROW_REMOVED,function(e,i){GH.RapidBoard.Config.Swimlanes.Analytics.remove.trigger(i.model.attributes.query)}))},GH.RapidBoard.Config.Swimlanes.Row=GH.RestfulTable.Row.extend({render:function(){GH.RestfulTable.Row.prototype.render.apply(this,arguments);var e=this.model.get("isDefault");return this.$el.toggleClass("js-sortable",!e).toggleClass("ghx-default-swimlane",e),e&&this.$el.find(".aui-restfultable-delete").remove(),this}}),GH.RapidBoard.Config.Swimlanes.EditRow=GH.RestfulTable.EditRow.extend({submit:function(){var e=this.$el.serializeObject(),i=this.model.attributes.query,a=e&&e.query?e.query:"";return this.model.id?GH.RapidBoard.Config.Swimlanes.Analytics.edit.trigger("old: "+i+", new: "+a):GH.RapidBoard.Config.Swimlanes.Analytics.add.trigger(a),GH.RestfulTable.EditRow.prototype.submit.apply(this,arguments)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/SwimlaneConfig.soy' */
// This file was automatically generated from SwimlaneConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.swimlaneconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.swimlaneconfig == 'undefined') { GH.tpl.swimlaneconfig = {}; }


GH.tpl.swimlaneconfig.renderSwimlaneConfigView = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Swimlanes') + '</h2><p>' + soy.$$escapeHtml('A swimlane is a row on the board that can be used to group issues. Swimlane type can be changed below and will be saved automatically. Note: queries will not be lost when changing to another swimlane type.') + '</p><form class="aui"><div class="field-group"><label>' + soy.$$escapeHtml('Base Swimlanes on') + '</label><select id="ghx-swimlanestrategy-select" class="select" ' + ((opt_data.canEdit != true) ? 'disabled="disabled"' : '') + '>';
  var strategyList14 = opt_data.strategies;
  var strategyListLen14 = strategyList14.length;
  for (var strategyIndex14 = 0; strategyIndex14 < strategyListLen14; strategyIndex14++) {
    var strategyData14 = strategyList14[strategyIndex14];
    output += (strategyData14.inPrimarySelection) ? '<option value="' + soy.$$escapeHtml(strategyData14.id) + '"' + ((strategyData14.id == opt_data.selectedStrategy.primarySelectId) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(strategyData14.name) + '</option>' : '';
  }
  output += '</select><div id="ghx-swimlanestrategy-description" class="description"></div></div></form><div id="ghx-swimlane-strategy-config" class="ghx-margin-top" ></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.swimlaneconfig.renderSwimlaneConfigView.soyTemplateName = 'GH.tpl.swimlaneconfig.renderSwimlaneConfigView';
}


GH.tpl.swimlaneconfig.renderAssigneeStrategyConfig = function(opt_data, opt_ignored) {
  var output = '<form class="aui"><div class="field-group"><label>' + soy.$$escapeHtml('Unassigned issues') + '</label><select id="ghx-assignee-strategy-select" class="select" ' + ((opt_data.canEdit != true) ? 'disabled="disabled"' : '') + '>';
  var strategyList36 = opt_data.assigneeStrategies;
  var strategyListLen36 = strategyList36.length;
  for (var strategyIndex36 = 0; strategyIndex36 < strategyListLen36; strategyIndex36++) {
    var strategyData36 = strategyList36[strategyIndex36];
    output += '<option value="' + soy.$$escapeHtml(strategyData36.id) + '"' + ((strategyData36.id == opt_data.selectedStrategy.id) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(strategyData36.name) + '</option>';
  }
  output += '</select></div></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.swimlaneconfig.renderAssigneeStrategyConfig.soyTemplateName = 'GH.tpl.swimlaneconfig.renderAssigneeStrategyConfig';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/QuickFilterConfig.js' */
!function(){"use strict";var i=require("jira-agile/rapid/analytics-tracker"),e=require("jquery");GH.RapidBoard.Config.QuickFilter={},GH.RapidBoard.Config.QuickFilter.model=void 0,GH.RapidBoard.Config.QuickFilter.Analytics={},GH.RapidBoard.Config.QuickFilter.Analytics.base=new i("gh.quickfilter"),GH.RapidBoard.Config.QuickFilter.Analytics.add=new i("gh.quickfilter","create"),GH.RapidBoard.Config.QuickFilter.Analytics.edit=new i("gh.quickfilter","edit"),GH.RapidBoard.Config.QuickFilter.Analytics.remove=new i("gh.quickfilter","delete"),GH.RapidBoard.Config.QuickFilter.TableColumns=[{id:"name",header:"Name",fieldName:"name"},{id:"query",header:"JQL",fieldName:"query",editView:GH.RapidBoard.Config.Util.JQLEditView.extend({namespace:"ghx-quick-filter"})},{id:"description",header:"Description",fieldName:"description",editView:GH.RapidBoard.Config.Util.TextAreaEditView}],GH.RapidBoard.Config.QuickFilter.init=function(i){GH.RapidBoard.Config.QuickFilter.model=i.quickFilterConfig,GH.RapidBoard.Config.QuickFilter.initializeTable()},GH.RapidBoard.Config.QuickFilter.initializeTable=function(){var i=GH.RapidBoard.Config.QuickFilter.model,t=i.canEdit,a=i.rapidViewId;AJS.$("#ghx-config-quickFilters").html(GH.tpl.quickfilterconfig.renderQuickFilterConfig());var r=new GH.RestfulTable({el:e("#ghx-quick-filter-table"),resources:{all:function(i){i(GH.RapidBoard.Config.QuickFilter.model.quickFilters)},self:GH.Ajax.buildRestUrl("/quickfilters/"+a+"/")},columns:GH.RapidBoard.Config.QuickFilter.TableColumns,deleteConfirmation:{header:"Delete",content:function(i){return GH.tpl.rapid.view.deleteForm({message:AJS.format("Are you sure you want to delete Quick Filter \u003cstrong\u003e{0}\u003c/strong\u003e?",AJS.escapeHTML(String(i.name)))})}},views:{editRow:GH.RestfulTable.EditRow.extend({submit:function(){var i=this.$el.serializeObject(),e=this.model.attributes.query,t=i&&i.query?i.query:"";if(this.model.id){var r="rapidViewId: "+a+", oldJql: '"+e+"', newJql: '"+t+"'";GH.RapidBoard.Config.QuickFilter.Analytics.edit.trigger(r),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("quickFilters")}else GH.RapidBoard.Config.QuickFilter.Analytics.add.trigger("rapidViewId: "+GH.RapidBoard.Config.editedRapidViewId+", jql: '"+t+"'"),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("quickFilters");return GH.RestfulTable.EditRow.prototype.submit.apply(this,arguments)}})},allowEdit:t,allowDelete:t,allowReorder:t,allowCreate:t});i.canEdit&&(_.delay(GH.JQLAutoComplete.initialize,0,"ghx-quick-filter-jql-create","ghx-quick-filter-jql-errormsg-create"),AJS.$(document).bind("tabSelect",function(){GH.JQLAutoComplete.fixSuggestionPositioning("ghx-quick-filter-jql-create")}),AJS.$(r).bind(GH.RestfulTable.Events.ROW_REMOVED,function(i,e){var t="rapidViewId: "+a+", jql: '"+e.model.attributes.query+"'";GH.RapidBoard.Config.QuickFilter.Analytics.remove.trigger(t),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("quickFilters")}))}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/QuickFilterConfig.soy' */
// This file was automatically generated from QuickFilterConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.quickfilterconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.quickfilterconfig == 'undefined') { GH.tpl.quickfilterconfig = {}; }


GH.tpl.quickfilterconfig.renderQuickFilterConfig = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Quick Filters') + '</h2><p>' + soy.$$escapeHtml('Quick Filters can be used to further filter the issues in the board based on the additional JQL query.') + '</p><table id="ghx-quick-filter-table" class="aui"></table>';
};
if (goog.DEBUG) {
  GH.tpl.quickfilterconfig.renderQuickFilterConfig.soyTemplateName = 'GH.tpl.quickfilterconfig.renderQuickFilterConfig';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/EstimationConfig.js' */
GH.RapidBoard.Config.Estimation={},GH.RapidBoard.Config.Estimation.model=void 0,GH.RapidBoard.Config.Estimation.init=function(i){GH.RapidBoard.Config.Estimation.model=i.estimationStatisticConfig,GH.RapidBoard.Config.Estimation.initializeForm()},GH.RapidBoard.Config.Estimation.initializeForm=function(){var i=GH.RapidBoard.Config.Estimation.model,t={model:i,urls:{estimationAndTracking:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Configuring+Estimation+and+Tracking","isLocal":false}.url},currentTrackingStatisticIsNone:"none"==i.currentTrackingStatistic.typeId,trackingDescriptionNone:AJS.format("Issues will burn down their {0}{1}{2} value upon completion.","<b>",AJS.escapeHTML(String(i.currentEstimationStatistic.name)),"</b>")};"issueCount_"==i.currentEstimationStatistic.id?t.currentEstimateDescription="Your velocity from sprint to sprint will be measured by the number of issues completed in each sprint. However, you will not be required to enter any estimates against issues in the backlog.":"field_timeoriginalestimate"==i.currentEstimationStatistic.id?t.currentEstimateDescription=AJS.format("Estimate issues in the Backlog using durations (e.g. hours, ideal days). Your velocity from sprint to sprint will be measured against these estimates. This estimate will be stored against Jira\'\'s {0}Original Estimate{1} field on the issue.","<b>","</b>"):t.currentEstimateDescription=AJS.format("Estimate issues in the Backlog by entering values for {0}{1}{2}. Your velocity from sprint to sprint will be measured against these estimates.","<b>",AJS.escapeHTML(String(i.currentEstimationStatistic.name)),"</b>"),AJS.$("#ghx-config-estimation").html(GH.tpl.estimationconfig.renderEstimationConfigView(t)),GH.RapidBoard.Config.Estimation.attachListeners()},GH.RapidBoard.Config.Estimation.attachListeners=function(){AJS.$("#ghx-estimatestatistic-select").change(GH.RapidBoard.Config.Estimation.save),AJS.$(':radio[name="ghx-trackingstatistic"]').change(GH.RapidBoard.Config.Estimation.save)},GH.RapidBoard.Config.Estimation.save=function(){var i={estimateStatisticId:AJS.$("#ghx-estimatestatistic-select").val(),trackingStatisticId:AJS.$(':radio[name="ghx-trackingstatistic"]:checked').val(),rapidViewId:GH.RapidBoard.Config.Estimation.model.rapidViewId},t=function(i){GH.Notification.showSuccess("Estimation configuration has been saved.");var t=GH.RapidBoard.Config.Estimation.model,a=i.success;GH.RapidBoard.Config.Estimation.init({estimationStatisticConfig:a}),a.currentEstimationStatistic.id!==t.currentEstimationStatistic.id?GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("estimationStatistic",{oldValId:t.currentEstimationStatistic.id,newValId:a.currentEstimationStatistic.id}):a.currentTrackingStatistic.id!==t.currentTrackingStatistic.id&&GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("trackingStatistic",{oldValId:t.currentTrackingStatistic.id,newValId:a.currentTrackingStatistic.id})};GH.Ajax.put({url:"/rapidviewconfig/estimation",data:i,errorContextMap:{estimatestatistic:"#ghx-estimatestatistic-select"}}).done(t)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/EstimationConfig.soy' */
// This file was automatically generated from EstimationConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.estimationconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.estimationconfig == 'undefined') { GH.tpl.estimationconfig = {}; }


GH.tpl.estimationconfig.renderEstimationConfigView = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Estimation') + '</h2><p>' + soy.$$filterNoAutoescape(AJS.format('Issues can be estimated when in the Backlog to get an idea of how much work is being committed to in a sprint. {0}Read more about estimation and tracking.{1}','<a href="' + opt_data.urls.estimationAndTracking + '" class="js-outgoing-link" data-link-id="estimation.and.tracking">','</a>')) + '</p><form class="aui ghx-limited"><div class="field-group"><label>' + soy.$$escapeHtml('Estimation Statistic') + '</label><select id="ghx-estimatestatistic-select" class="select" ' + ((opt_data.model.canEdit != true) ? 'disabled="disabled"' : '') + '>';
  var fieldList15 = opt_data.model.availableEstimationStatistics;
  var fieldListLen15 = fieldList15.length;
  for (var fieldIndex15 = 0; fieldIndex15 < fieldListLen15; fieldIndex15++) {
    var fieldData15 = fieldList15[fieldIndex15];
    output += '<option value="' + soy.$$escapeHtml(fieldData15.id) + '"' + ((fieldData15.id == opt_data.model.currentEstimationStatistic.id) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(fieldData15.name) + '</option>';
  }
  output += '</select>' + ((! opt_data.model.currentEstimationStatistic.isValid) ? '<div class="error">' + soy.$$escapeHtml('The configured estimation statistic is no longer valid. Please select a valid option.') + '</div>' : '') + '<div class="description">' + soy.$$filterNoAutoescape(opt_data.currentEstimateDescription) + '</div></div><fieldset class="group"><legend><span>' + soy.$$escapeHtml('Time Tracking') + '</span></legend><div class="radio"><input class="radio" type="radio" id="ghx-trackingstatistic-none" name="ghx-trackingstatistic" value="none_"' + ((opt_data.currentTrackingStatisticIsNone) ? ' checked="checked"' : '') + ' ' + ((opt_data.model.canEdit != true) ? 'disabled="disabled"' : '') + ' /><label for="ghx-trackingstatistic-none">' + soy.$$escapeHtml('None') + '</label><div class="description">' + soy.$$filterNoAutoescape(opt_data.trackingDescriptionNone) + '</div></div><div class="radio"><input class="radio" type="radio" id="ghx-trackingstatistic-remainingtimeestimate" name="ghx-trackingstatistic" value="field_timeestimate"' + ((! opt_data.currentTrackingStatisticIsNone) ? ' checked="checked"' : '') + ' ' + ((opt_data.model.canEdit != true) ? 'disabled="disabled"' : '') + ' /><label for="ghx-trackingstatistic-remainingtimeestimate">' + soy.$$escapeHtml('Remaining Estimate and Time Spent') + '</label><div class="description">' + soy.$$filterNoAutoescape(AJS.format('Track time against issues using Jira\x27\x27s {0}Remaining Estimate{1} and {0}Time Spent{1} fields.','<b>','</b>')) + '</div></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.estimationconfig.renderEstimationConfigView.soyTemplateName = 'GH.tpl.estimationconfig.renderEstimationConfigView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/WorkingDaysConfig.js' */
!function(){GH.WorkingDaysConfig={},GH.WorkingDaysConfig.ISO8601Format="%Y-%m-%d",GH.WorkingDaysConfig.model=void 0,GH.WorkingDaysConfig.init=function(n){GH.WorkingDaysConfig.model=n.workingDaysConfig,GH.WorkingDaysConfig.renderTab()},GH.WorkingDaysConfig.renderTab=function(){AJS.$("#ghx-config-time").html(GH.tpl.workingdaysconfig.renderChartConfig()),GH.WorkingDaysConfig.renderTimeZoneConfig(),GH.WorkingDaysConfig.renderWeeklyConfig(),GH.WorkingDaysConfig.renderDailyConfig()},GH.WorkingDaysConfig.renderTimeZoneConfig=function(){var n=GH.WorkingDaysConfig.model.timeZoneEditModel,o=n.regions,i=GH.WorkingDaysConfig.model.timeZoneEditModel.currentTimeZoneId,e=GH.WorkingDaysConfig.getRegionKeyForTimeZoneId(i),a={canEdit:GH.WorkingDaysConfig.model.canEdit,selectedRegionKey:e,regions:o,zones:GH.WorkingDaysConfig.getZonesForRegion(e),selectedTimeZoneId:i};AJS.$("#ghx-timezone-config").html(GH.tpl.workingdaysconfig.renderTimeZoneConfig(a)),AJS.$("#ghx-region-select").change(GH.WorkingDaysConfig.updateRegionZones),AJS.$("#ghx-timezone-select").change(GH.WorkingDaysConfig.handleTimezoneUpdate)},GH.WorkingDaysConfig.updateRegionZones=function(){var n=AJS.$("#ghx-region-select").val(),o=GH.WorkingDaysConfig.getZonesForRegion(n),i={zones:o};$timezoneSelect=AJS.$("#ghx-timezone-select"),$timezoneSelect.html(GH.tpl.workingdaysconfig.renderTimeZoneOptions(i)),GH.WorkingDaysConfig.handleTimezoneUpdate()},GH.WorkingDaysConfig.getZonesForRegion=function(n){return _.filter(GH.WorkingDaysConfig.model.timeZoneEditModel.timeZones,function(o){return o.regionKey===n})},GH.WorkingDaysConfig.getRegionKeyForTimeZoneId=function(n){var o=_.find(GH.WorkingDaysConfig.model.timeZoneEditModel.timeZones,function(o){return o.timeZoneId===n});return o?o.regionKey:null},GH.WorkingDaysConfig.handleTimezoneUpdate=function(){var n=AJS.$("#ghx-timezone-select").val();GH.WorkingDaysConfig.setTimezone(n)},GH.WorkingDaysConfig.renderWeeklyConfig=function(){var n=AJS.$("#ghx-weekdays-config");n.html(GH.tpl.workingdaysconfig.renderWeekdaysConfig({canEdit:GH.WorkingDaysConfig.model.canEdit,weekDays:GH.WorkingDaysConfig.model.weekDays})),n.find("input.checkbox").change(GH.WorkingDaysConfig.saveWeekDays)},GH.WorkingDaysConfig.renderDailyConfig=function(){AJS.$("#ghx-daily-config").html(GH.tpl.workingdaysconfig.renderDailyConfig({canEdit:GH.WorkingDaysConfig.model.canEdit}));var n=0;Calendar.setup({firstDay:0,cache:!1,inputField:"ghx-add-off-day",button:"ghx-add-off-day-button",align:"Tr",singleClick:!0,positionStyle:"fixed",ifFormat:GH.TimeFormat.dateFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers,onUpdate:function(){n=(new Date).getTime()},onClose:function(o){(new Date).getTime()-n<100&&GH.WorkingDaysConfig.handleAddDay(),o.hide()}}),GH.WorkingDaysConfig.renderDays()},GH.WorkingDaysConfig.renderDays=function(){var n={days:[]},o=GH.WorkingDaysConfig.model.nonWorkingDays;o.sort(function(n,o){return n.iso8601Date.localeCompare(o.iso8601Date)}),_.each(o,function(o){var i=GH.WorkingDaysConfig.parseIsoDateString(o.iso8601Date);i=new Date(i);var e=i.print(GH.TimeFormat.dateFormat);n.days.push({displayValue:e,value:o.iso8601Date})});var i=AJS.$("#ghx-existing-off-days");i.html(GH.tpl.workingdaysconfig.renderDays({days:n.days,canEdit:GH.WorkingDaysConfig.model.canEdit})),i.find(".aui-icon-close").click(GH.WorkingDaysConfig.handleRemoveDay)},GH.WorkingDaysConfig.handleAddDay=function(){var n=AJS.$("#ghx-add-off-day").val();if(n){var o=Date.parseDate(n,GH.TimeFormat.dateFormat);GH.WorkingDaysConfig.addDay(o),GH.WorkingDaysConfig.addDayToModel(o),GH.WorkingDaysConfig.renderDays(),AJS.$("#ghx-add-off-day").val("")}},GH.WorkingDaysConfig.addDayToModel=function(n){var o=GH.WorkingDaysConfig.toISODate(n),i=GH.WorkingDaysConfig.model.nonWorkingDays,e=_.find(i,function(n){return n.iso8601Date===o});e||i.push({iso8601Date:o})},GH.WorkingDaysConfig.removeDayFromModel=function(n){var o=GH.WorkingDaysConfig.toISODate(n),i=GH.WorkingDaysConfig.model.nonWorkingDays;GH.WorkingDaysConfig.model.nonWorkingDays=_.reject(i,function(n){return n.iso8601Date===o})},GH.WorkingDaysConfig.handleRemoveDay=function(n){var o=AJS.$(this).closest(".js-day-off"),i=GH.WorkingDaysConfig.parseIsoDateString(o.attr("data-date"));GH.WorkingDaysConfig.removeDay(i),GH.WorkingDaysConfig.removeDayFromModel(i),GH.WorkingDaysConfig.renderDays()},GH.WorkingDaysConfig.toISODate=function(n){return n.print("%Y-%m-%d")},GH.WorkingDaysConfig.parseIsoDateString=function(n){return Date.parseDate(n,GH.WorkingDaysConfig.ISO8601Format)},GH.WorkingDaysConfig.setTimezone=function(n){var o={rapidViewId:GH.WorkingDaysConfig.model.rapidViewId,timeZoneId:n};GH.Ajax.put({url:"/rapidviewconfig/workingdays/timezone",data:o}).done(function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("timezone")})},GH.WorkingDaysConfig.saveWeekDays=function(){var n={rapidViewId:GH.WorkingDaysConfig.model.rapidViewId,monday:AJS.$("#ghx-monday").is(":checked"),tuesday:AJS.$("#ghx-tuesday").is(":checked"),wednesday:AJS.$("#ghx-wednesday").is(":checked"),thursday:AJS.$("#ghx-thursday").is(":checked"),friday:AJS.$("#ghx-friday").is(":checked"),saturday:AJS.$("#ghx-saturday").is(":checked"),sunday:AJS.$("#ghx-sunday").is(":checked")};GH.Ajax.put({url:"/rapidviewconfig/workingdays/weekdays",data:n}).done(function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("workingDays")})},GH.WorkingDaysConfig.addDay=function(n){var o={rapidViewId:GH.WorkingDaysConfig.model.rapidViewId,iso8601Date:GH.WorkingDaysConfig.toISODate(n)};GH.Ajax.post({url:"/rapidviewconfig/workingdays/nonworkingday/add",data:o}).done(function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("nonWorkingDays")})},GH.WorkingDaysConfig.removeDay=function(n){var o={rapidViewId:GH.WorkingDaysConfig.model.rapidViewId,iso8601Date:GH.WorkingDaysConfig.toISODate(n)};GH.Ajax.post({url:"/rapidviewconfig/workingdays/nonworkingday/remove",data:o}).done(function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("nonWorkingDays")})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/WorkingDaysConfig.soy' */
// This file was automatically generated from WorkingDaysConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.workingdaysconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.workingdaysconfig == 'undefined') { GH.tpl.workingdaysconfig = {}; }


GH.tpl.workingdaysconfig.renderChartConfig = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml('Working days') + '</h2><p>' + soy.$$escapeHtml('These settings allow you to highlight or exclude non-working days from reports and gadgets.') + '</p><p class="ghx-description">' + soy.$$escapeHtml('They apply to the following reports: Burndown Chart, Sprint Report, Epic Report, Version Report, Control Chart; and the following gadgets: Sprint Health Gadget, Burndown Gadget.') + '</p><div id="ghx-timezone-config" class="ghx-margin-top"></div><div id="ghx-weekdays-config" class="ghx-margin-top"></div><div id="ghx-daily-config" class="ghx-margin-top"></div>';
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderChartConfig.soyTemplateName = 'GH.tpl.workingdaysconfig.renderChartConfig';
}


GH.tpl.workingdaysconfig.renderTimeZoneConfig = function(opt_data, opt_ignored) {
  var output = '<h5>' + soy.$$escapeHtml('Time Zone') + '</h5>' + ((opt_data.canEdit && ! opt_data.selectedRegionKey) ? '<div class="aui-message error">' + soy.$$escapeHtml('Select a region and time zone') + '</div>' : '') + '<form class="aui gh-aui"><fieldset><div class="field-group"><label for="ghx-region-select">' + soy.$$escapeHtml('Region') + ':</label><select id="ghx-region-select" class="select" ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '>';
  var regionList26 = opt_data.regions;
  var regionListLen26 = regionList26.length;
  for (var regionIndex26 = 0; regionIndex26 < regionListLen26; regionIndex26++) {
    var regionData26 = regionList26[regionIndex26];
    output += '<option value="' + soy.$$escapeHtml(regionData26.key) + '"' + ((regionData26.key == opt_data.selectedRegionKey) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(regionData26.displayName) + '</option>';
  }
  output += '</select></div><div class="field-group"><label for="ghx-timezone-select">' + soy.$$escapeHtml('Time Zone') + ':</label><select id="ghx-timezone-select" class="select" ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '>' + GH.tpl.workingdaysconfig.renderTimeZoneOptions(opt_data) + '</select></div></fieldset></form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderTimeZoneConfig.soyTemplateName = 'GH.tpl.workingdaysconfig.renderTimeZoneConfig';
}


GH.tpl.workingdaysconfig.renderTimeZoneOptions = function(opt_data, opt_ignored) {
  var output = '';
  var zoneList49 = opt_data.zones;
  var zoneListLen49 = zoneList49.length;
  for (var zoneIndex49 = 0; zoneIndex49 < zoneListLen49; zoneIndex49++) {
    var zoneData49 = zoneList49[zoneIndex49];
    output += '<option value="' + soy.$$escapeHtml(zoneData49.timeZoneId) + '"' + ((zoneData49.timeZoneId == opt_data.selectedTimeZoneId) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(zoneData49.gMTOffset) + ' ' + soy.$$escapeHtml(zoneData49.city) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderTimeZoneOptions.soyTemplateName = 'GH.tpl.workingdaysconfig.renderTimeZoneOptions';
}


GH.tpl.workingdaysconfig.renderWeekdaysConfig = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml('Standard Working Days') + '</h5><form class="aui gh-aui"><fieldset class="group"><legend><span>' + soy.$$escapeHtml('Every') + '</span></legend><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-monday" ' + ((opt_data.weekDays.monday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-monday">' + soy.$$escapeHtml('Monday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-tuesday" ' + ((opt_data.weekDays.tuesday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-tuesday">' + soy.$$escapeHtml('Tuesday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-wednesday" ' + ((opt_data.weekDays.wednesday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-wednesday">' + soy.$$escapeHtml('Wednesday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-thursday" ' + ((opt_data.weekDays.thursday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-thursday">' + soy.$$escapeHtml('Thursday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-friday" ' + ((opt_data.weekDays.friday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-friday">' + soy.$$escapeHtml('Friday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-saturday" ' + ((opt_data.weekDays.saturday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-saturday">' + soy.$$escapeHtml('Saturday') + '</label></div><div class="checkbox"><input class="checkbox" type="checkbox" id="ghx-sunday" ' + ((opt_data.weekDays.sunday) ? 'checked="checked"' : '') + ' ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '/><label for="ghx-sunday">' + soy.$$escapeHtml('Sunday') + '</label></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderWeekdaysConfig.soyTemplateName = 'GH.tpl.workingdaysconfig.renderWeekdaysConfig';
}


GH.tpl.workingdaysconfig.renderDailyConfig = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml('Non-Working Days') + '</h5><form class="aui gh-aui"><div class="field-group"><label>' + soy.$$escapeHtml('Dates') + ':</label><span class="field-value" id="ghx-existing-off-days"></span></div><div class="field-group"><input id="ghx-add-off-day" type="hidden" value="" readonly><button id="ghx-add-off-day-button" class="aui-button" ' + ((! opt_data.canEdit) ? 'disabled="disabled"' : '') + '>' + soy.$$escapeHtml('Add Date') + '</button><span id="ghx-add-off-day-error"></span></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderDailyConfig.soyTemplateName = 'GH.tpl.workingdaysconfig.renderDailyConfig';
}


GH.tpl.workingdaysconfig.renderDays = function(opt_data, opt_ignored) {
  var output = '';
  var dayList151 = opt_data.days;
  var dayListLen151 = dayList151.length;
  if (dayListLen151 > 0) {
    for (var dayIndex151 = 0; dayIndex151 < dayListLen151; dayIndex151++) {
      var dayData151 = dayList151[dayIndex151];
      output += (opt_data.canEdit) ? aui.labels.label({extraClasses: ['js-day-off'], isCloseable: true, text: dayData151.displayValue, extraAttributes: {'data-date': dayData151.value}}) : aui.labels.label({text: dayData151.displayValue});
    }
  } else {
    output += '<em>' + soy.$$escapeHtml('No dates') + '</em>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.workingdaysconfig.renderDays.soyTemplateName = 'GH.tpl.workingdaysconfig.renderDays';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/CardColorConfig.js' */
!function(){"use strict";var o=require("jira-agile/rapid/analytics-tracker"),e=require("jquery");GH.CardColorConfig={},GH.CardColorConfig.model=void 0,GH.CardColorConfig.Analytics={},GH.CardColorConfig.Analytics.base=new o("gh.config.cardcolor"),GH.CardColorConfig.Analytics.add=new o("gh.config.cardcolor.custom","add"),GH.CardColorConfig.Analytics.edit=new o("gh.config.cardcolor.custom","edit"),GH.CardColorConfig.Analytics.remove=new o("gh.config.cardcolor.custom","delete"),GH.CardColorConfig.strategies=[{id:"issuetype",name:"Issue Types",hasDescriptionField:!1,canAddRows:!1,canReorderRows:!1,columnOverrides:{value:{header:"Issue Type"}}},{id:"priority",name:"Priorities",hasDescriptionField:!1,canAddRows:!1,canReorderRows:!1,columnOverrides:{value:{header:"Priority"}}},{id:"assignee",name:"Assignees",hasDescriptionField:!1,canAddRows:!1,canReorderRows:!1,columnOverrides:{value:{header:"Assignee"}}},{id:"custom",name:"Queries",hasDescriptionField:!0,canAddRows:!0,canReorderRows:!0,columnOverrides:{value:{allowEdit:!0,allowDelete:!0,header:"JQL",emptyText:"Add query",editView:GH.RapidBoard.Config.Util.JQLEditView.extend({namespace:"ghx-card-color"})}}},{id:"none",name:"None",hasDescriptionField:!1,canAddRows:!1,canReorderRows:!1}],GH.CardColorConfig.TableColumnsDefaults=[{id:"color",header:"Color",fieldName:"color",styleClass:"ghx-picker",allowEdit:!0,allowDelete:!0,readView:GH.RestfulTable.CustomReadView.extend({render:function(o){return AJS.$(GH.tpl.cardcolorconfig.renderReadOnlyViewColor(o))}}),editView:GH.RestfulTable.CustomEditView.extend({render:function(o){var e=this;o.value||(o.value=GH.CardColorConfig.nextDefaultColorHex());var r=AJS.$(GH.tpl.cardcolorconfig.renderEditableViewColor(o)),a=this.$picker=r.filter(".ghx-picker-select");return a.ColorPicker({onChange:function(o,r,t){var l="#"+r;a.css("background-color",l),a.attr("data-field-value",l),a.parent().find("input").val(l),e.model.set({color:l})},onHide:function(o){GH.CardColorConfig.hidePicker(o,e)},onBeforeShow:function(){var o=a.parent().find("input").val().substr(1);AJS.$(this).ColorPickerSetColor(o)}}).bind("click",_.bind(this.focus,this)),r.filter("input").bind("select",_.bind(this.focus,this)),r},focus:function(){this.$picker.ColorPickerShow()}})},{id:"value",header:null,fieldName:"value",allowEdit:!1,allowDelete:!1,readView:GH.RestfulTable.CustomReadView.extend({render:function(o){var e=this.model.get("displayValue");return e?document.createTextNode(e):null}}),editView:GH.RestfulTable.CustomEditView.extend({render:function(o){var e=this.model.get("displayValue");return e?document.createTextNode(e):null}})}],GH.CardColorConfig.hidePicker=function(o,e){AJS.$(o).fadeOut(500);var r=e.model.get("id");if(r){var a=GH.CardColorConfig.model.rapidViewId;GH.Ajax.put({url:"/cardcolors/"+a+"/color/"+e.model.get("id"),data:e.model.toJSON()})}var t=AJS.$(".aui-restfultable-editrow .aui-restfultable-cancel");return t.click(),t.parent().show(),!1},GH.CardColorConfig.init=function(o){GH.CardColorConfig.model=o.cardColorConfig,GH.CardColorConfig.renderConfig()},GH.CardColorConfig.getStrategyById=function(o){return _.find(GH.CardColorConfig.strategies,function(e){return e.id===o})},GH.CardColorConfig.getCurrentStrategy=function(){var o=GH.CardColorConfig.model;return o&&o.cardColorStrategy?GH.CardColorConfig.getStrategyById(o.cardColorStrategy):null},GH.CardColorConfig.renderConfig=function(){var o=GH.CardColorConfig.model,e=o.canEdit,r=o.cardColorStrategy;AJS.$("#ghx-config-cardColors").html(GH.tpl.cardcolorconfig.renderCardColorConfigView({canEdit:e,currentStrategyId:r,strategies:GH.CardColorConfig.strategies,learnMore:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Customising+Cards","isLocal":false}.url}));var a=GH.CardColorConfig.getStrategyById(r);a&&(GH.CardColorConfig.loadStrategyConfig(a),AJS.$("#ghx-cardcolorstrategy-select").change(GH.CardColorConfig.saveStrategySelection))},GH.CardColorConfig.saveStrategySelection=function(o){var e=GH.CardColorConfig.getCurrentStrategy(),r=AJS.$("#ghx-cardcolorstrategy-select").val(),a=GH.CardColorConfig.getStrategyById(r);if(a){GH.CardColorConfig.model.cardColorStrategy=a.id;var t=GH.CardColorConfig.model.rapidViewId;GH.Ajax.put({url:"/cardcolors/"+t+"/strategy",data:{id:t,cardColorStrategyId:a.id}}).done(function(){GH.CardColorConfig.loadStrategyConfig(a),GH.CardColorConfig.Analytics.base.trigger("editStrategy",a.id),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("cardColourStrategy",{oldValId:e.id,newValId:a.id})})}},GH.CardColorConfig.loadStrategyConfig=function(o){AJS.$("#ghx-cardcolorstrategy-select").after(GH.tpl.cardcolorconfig.renderCardColorLoading());var e=GH.CardColorConfig.model.rapidViewId;GH.Ajax.get({url:"/cardcolors/"+e+"/strategy/"+o.id,data:{preloadValues:!0}},"cardColorConfig").done(GH.CardColorConfig.processConfigData)},GH.CardColorConfig.processConfigData=function(o){GH.CardColorConfig.model=o,GH.CardColorConfig.renderConfigurationTable()},GH.CardColorConfig.renderConfigurationTable=function(){var o=GH.CardColorConfig.model,r=o.canEdit,a=o.rapidViewId,t=GH.CardColorConfig.getCurrentStrategy();if(AJS.$("#ghx-card-color-table-form").html('<table id="ghx-card-color-table"></table>').attr("data-strategy",t.id),AJS.$("#ghx-cardcolorstrategy-select ~ .ghx-spinner").remove(),"none"!==t.id){GH.CardColorConfig.nextDefaultColorHex.counter=o.cardColors.length;var l=new GH.RestfulTable({el:e("#ghx-card-color-table"),resources:{all:function(o){o(GH.CardColorConfig.model.cardColors)},self:GH.Ajax.buildRestUrl("/cardcolors/"+a+"/color/")},columns:_.map(GH.CardColorConfig.TableColumnsDefaults,function(o){return _.extend({},o,t.columnOverrides[o.id])}),deleteConfirmation:{header:"Delete",content:function(o){return GH.tpl.rapid.view.deleteForm({message:"Are you sure you want to delete this card color?"})}},views:{editRow:GH.RestfulTable.EditRow.extend({mapSubmitParams:function(o){var e=GH.RestfulTable.EditRow.prototype.mapSubmitParams.call(this,o);return e&&(e.strategy=t.id),e},submit:function(){var o=this.$el.serializeObject(),e=this.model.attributes.value,r=o&&o.value?o.value:"";return e?GH.CardColorConfig.Analytics.edit.trigger("new: "+r+", old: "+e):GH.CardColorConfig.Analytics.add.trigger(r),GH.RestfulTable.EditRow.prototype.submit.apply(this,arguments)}})},allowEdit:r,allowDelete:r,allowCreate:r&&t.canAddRows,allowReorder:r&&t.canReorderRows});"custom"===t.id&&(_.delay(GH.JQLAutoComplete.initialize,0,"ghx-card-color-jql-create","ghx-card-color-jql-errormsg-create"),AJS.$(document).bind("tabSelect",function(){GH.JQLAutoComplete.fixSuggestionPositioning("ghx-card-color-jql-create")}),AJS.$(l).bind(GH.RestfulTable.Events.ROW_REMOVED,function(o,e){GH.CardColorConfig.Analytics.remove.trigger(e.model.attributes.value)}))}},GH.CardColorConfig.getDefaultColorHex=function(o){var e=GH.CardColorConfig.model.defaultColors;return e[o%e.length]},GH.CardColorConfig.nextDefaultColorHex=function(){return GH.CardColorConfig.getDefaultColorHex(GH.CardColorConfig.nextDefaultColorHex.counter++)},GH.CardColorConfig.nextDefaultColorHex.counter=null}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/CardColorConfig.soy' */
// This file was automatically generated from CardColorConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.cardcolorconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.cardcolorconfig == 'undefined') { GH.tpl.cardcolorconfig = {}; }


GH.tpl.cardcolorconfig.renderReadOnlyViewColor = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<span class="ghx-picker-select js-card-color-edit"' + ((opt_data.value) ? ' style="background-color:' + soy.$$escapeHtml(opt_data.value) + ';"' : '') + '>' + ((! opt_data.value) ? '<em>' + soy.$$escapeHtml('gh.rapid.config.cardcolors.empty.color') + '</em>' : '&nbsp;') + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.cardcolorconfig.renderReadOnlyViewColor.soyTemplateName = 'GH.tpl.cardcolorconfig.renderReadOnlyViewColor';
}


GH.tpl.cardcolorconfig.renderEditableViewColor = function(opt_data, opt_ignored) {
  return '<input type="hidden" name="' + soy.$$escapeHtml(opt_data.name) + '" value="' + soy.$$escapeHtml(opt_data.value) + '"><span class="ghx-picker-select js-card-color-edit"' + ((opt_data.value) ? ' style="background-color:' + soy.$$escapeHtml(opt_data.value) + ';"' : '') + '>' + ((! opt_data.value) ? '<em>' + soy.$$escapeHtml('gh.rapid.config.cardcolors.empty.color') + '</em>' : '&nbsp;') + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.cardcolorconfig.renderEditableViewColor.soyTemplateName = 'GH.tpl.cardcolorconfig.renderEditableViewColor';
}


GH.tpl.cardcolorconfig.renderCardColorConfigView = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Card colors') + '</h2><p>' + soy.$$filterNoAutoescape(AJS.format('Choose a method for assigning colors to your cards. If no method is selected, the cards will not have a colored edge. Any changes to the color configuration for a method are saved immediately, so you can switch back to it later if you wish.','<br/>')) + '</p><p><a href="' + soy.$$escapeHtml(opt_data.learnMore) + '">' + soy.$$escapeHtml('Learn more about card colors.') + '</a></p><form class="aui"><div class="field-group"><label>' + soy.$$escapeHtml('Colors based on') + '</label><select id="ghx-cardcolorstrategy-select" class="select" ' + ((opt_data.canEdit != true) ? 'disabled="disabled"' : '') + '>';
  var strategyList55 = opt_data.strategies;
  var strategyListLen55 = strategyList55.length;
  for (var strategyIndex55 = 0; strategyIndex55 < strategyListLen55; strategyIndex55++) {
    var strategyData55 = strategyList55[strategyIndex55];
    output += '<option value="' + soy.$$escapeHtml(strategyData55.id) + '"' + ((strategyData55.id == opt_data.currentStrategyId) ? 'selected="SELECTED"' : '') + '>' + soy.$$escapeHtml(strategyData55.name) + '</option>';
  }
  output += '</select></div></form><div id="ghx-card-color-table-form"></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.cardcolorconfig.renderCardColorConfigView.soyTemplateName = 'GH.tpl.cardcolorconfig.renderCardColorConfigView';
}


GH.tpl.cardcolorconfig.renderCardColorLoading = function(opt_data, opt_ignored) {
  return '<div class="ghx-spinner"></div>';
};
if (goog.DEBUG) {
  GH.tpl.cardcolorconfig.renderCardColorLoading.soyTemplateName = 'GH.tpl.cardcolorconfig.renderCardColorLoading';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/DetailViewConfig.js' */
GH.DetailViewConfig={},GH.DetailViewConfig.UNSUPPORTED_CATEGORY="unsupported",GH.DetailViewConfig.model=void 0,GH.DetailViewConfig.restfulTableHeadings={details:"General fields",dates:"Date fields",people:"People",links:"Links",unsupported:"Unsupported fields"},GH.DetailViewConfig.restfulTable={},GH.DetailViewConfig.TableColumns=[{id:"fieldId",header:"Field name",fieldName:"fieldId",readView:GH.RestfulTable.CustomReadView.extend({render:function(e){return GH.tpl.detailviewconfig.renderDetailViewFieldCell(this.model.toJSON())}})}],GH.DetailViewConfig.createView=function(e){return GH.RestfulTable.CustomCreateView.extend({render:function(i){var l=this,t=AJS.$('<select class="select"></select>').attr("name",i.name),a=GH.DetailViewConfig.getAvailableDetailViewFields(!1);return a=_.filter(a,function(i){return i.category===e}),a.length?t.html(this.renderOptions(a)):t.hide(),GH.DetailViewConfig.getAvailableDetailViewFields(!0).done(function(i){a=i.fields,a=_.filter(a,function(i){return i.category===e}),a.sort(function(e,i){return e.name.localeCompare(i.name)}),a.length?(GH.DetailViewConfig.restfulTable[e].getCreateRow().enable(),t.html(l.renderOptions(a)).show()):(t.hide(),GH.DetailViewConfig.restfulTable[e].getCreateRow().disable())}),t},renderOptions:function(e){return _.reduce(e,function(e,i){var l=AJS.$("<option></option>").val(i.fieldId).text(i.name);return e.add(l)},AJS.$())}})},GH.DetailViewConfig.init=function(e){0!==AJS.$("#ghx-config-detailView").length&&(GH.DetailViewConfig.model=e.detailViewFieldConfig,GH.DetailViewConfig.renderConfig())},GH.DetailViewConfig.renderConfig=function(){GH.DetailViewConfig.model;AJS.$("#ghx-config-detailView").html(GH.tpl.detailviewconfig.renderDetailViewConfig({fieldConfigHelpUrl:{"url":"https://confluence.atlassian.com/display/AdminJIRACloud/Specifying+field+behavior","isLocal":false}.url,screenConfigHelpUrl:{"url":"https://confluence.atlassian.com/display/AdminJIRACloud/Defining+a+screen","isLocal":false}.url})),GH.DetailViewConfig.renderConfigurationTable(GH.DetailViewConfig.UNSUPPORTED_CATEGORY),GH.DetailViewConfig.renderConfigurationTable("details"),GH.DetailViewConfig.renderConfigurationTable("dates"),GH.DetailViewConfig.renderConfigurationTable("people"),GH.DetailViewConfig.renderConfigurationTable("links")},GH.DetailViewConfig.renderConfigurationTable=function(e){var i=GH.DetailViewConfig.model,l=i.canEdit,t=i.rapidViewId,a=AJS.$("#ghx-detail-view-field-table-form-"+e),n=GH.DetailViewConfig.restfulTableHeadings[e];if(!l)return void a.html(GH.tpl.detailviewconfig.renderEmptyDetailViewTable({heading:n}));var o=_.filter(GH.DetailViewConfig.model.currentFields,function(i){return i.category===e}),r=_.filter(GH.DetailViewConfig.getAvailableDetailViewFields(!1),function(i){return i.category===e});if(0!==o.length||0!==r.length){var d="ghx-detail-view-field-table-"+e;a.html(GH.tpl.detailviewconfig.renderDetailViewTable({heading:n,tableId:d,description:e===GH.DetailViewConfig.UNSUPPORTED_CATEGORY?"Some fields in the Issue Detail View are no longer supported in Jira Software. You can delete these fields since unsupported fields won\'t appear on your board.":""}));var f=GH.DetailViewConfig.TableColumns;f[0].createView=GH.DetailViewConfig.createView(e);var g={el:AJS.$("#"+d),resources:{all:function(e){return e(o)},self:GH.Ajax.buildRestUrl("/detailviewfield/"+t+"/field/")},columns:f,allowEdit:!1,allowDelete:l,allowReorder:l,allowCreate:l};e===GH.DetailViewConfig.UNSUPPORTED_CATEGORY&&(g.allowReorder=!1,g.allowCreate=!1);var w=GH.DetailViewConfig.restfulTable[e]=new GH.RestfulTable(g);AJS.$(w).bind(GH.RestfulTable.Events.ROW_REMOVED,function(){e===GH.DetailViewConfig.UNSUPPORTED_CATEGORY?w.isEmpty()&&a.remove():w.getCreateRow().render({values:{},errors:{}}),GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("detailViewConfig")}),AJS.$(w).bind(GH.RestfulTable.Events.ROW_ADDED,function(){GH.RapidBoard.Config.analytics.sendBoardUpdatedTrackEvent("detailViewConfig")})}},GH.DetailViewConfig.getAvailableDetailViewFields=function(e){var i=GH.DetailViewConfig.model;return e?GH.Ajax.get({url:"/detailviewfield/"+i.rapidViewId+"/available"},"detailViewConfig").done(function(e){i.availableFields=e.fields}):i.availableFields};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-config-resources', location = 'jira-agile-module/includes/js/rapid/configuration/DetailViewConfig.soy' */
// This file was automatically generated from DetailViewConfig.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.detailviewconfig.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.detailviewconfig == 'undefined') { GH.tpl.detailviewconfig = {}; }


GH.tpl.detailviewconfig.renderDetailViewConfig = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml('Issue Detail View') + '</h2>';
  var newIssueViewLink__soy6 = '<a href="https://confluence.atlassian.com/display/JIRACORECLOUD/The+new+Jira+issue+view">' + soy.$$filterNoAutoescape('new issue view') + '</a>';
  var issueLayoutPath__soy11 = '<b>' + soy.$$filterNoAutoescape('Project settings \x3e Issue layout') + '</b>';
  var configurePath__soy16 = '<b>' + soy.$$filterNoAutoescape('... \x3e Configure') + '</b>';
  output += '<div class="aui-message purple-message"><p class="title">' + soy.$$filterNoAutoescape('Layout in the new Jira issue view') + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('The order of fields in the {0} is set for issue types in a project, so that issues have a consistent look across different project locations, like boards, backlogs, search, and the full-page issue view. To configure the layout of issue types in a project, go to {1}.',newIssueViewLink__soy6,issueLayoutPath__soy11)) + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('Alternatively, and for issues on personal and multi-project boards, open an issue on the board and choose {0}.',configurePath__soy16)) + '</p><p><a href="https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Configure+field+layout+in+the+issue+view">' + soy.$$filterNoAutoescape('Learn more about configuring the new issue view') + '</a></p></div><p>' + soy.$$escapeHtml('Add, delete or reorder fields on the Issue Detail View.') + '</p><p class="ghx-description">' + soy.$$filterNoAutoescape(AJS.format('Some fields may be hidden, depending on the \x3ca href\x3d\x22{0}\x22\x3efield configuration scheme\x3c/a\x3e used for the project\x27\x27s issue types.',opt_data.fieldConfigHelpUrl)) + '&nbsp;' + soy.$$filterNoAutoescape(AJS.format('Some fields may also be uneditable; to make a field editable, \x3ca href\x3d\x22{0}\x22\x3eit must be added\x3c/a\x3e to the Edit Issue screen for the project of an issue.',opt_data.screenConfigHelpUrl)) + '</p><div id="ghx-detail-view-field-table-form-unsupported" class="ghx-margin-top-x2"></div><div id="ghx-detail-view-field-table-form-details" class="ghx-margin-top-x2"></div><div id="ghx-detail-view-field-table-form-dates" class="ghx-margin-top-x2"></div><div id="ghx-detail-view-field-table-form-people" class="ghx-margin-top-x2"></div><div id="ghx-detail-view-field-table-form-links" class="ghx-margin-top-x2"></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailviewconfig.renderDetailViewConfig.soyTemplateName = 'GH.tpl.detailviewconfig.renderDetailViewConfig';
}


GH.tpl.detailviewconfig.renderDetailViewFieldCell = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.name) + ((! opt_data.isValid) ? ' <span title="' + soy.$$escapeHtml('This field is currently unavailable. It may have been removed from the system.') + '" class="ghx-icon ghx-icon-warning"></span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.detailviewconfig.renderDetailViewFieldCell.soyTemplateName = 'GH.tpl.detailviewconfig.renderDetailViewFieldCell';
}


GH.tpl.detailviewconfig.renderDetailViewTable = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml(opt_data.heading) + '</h5><p>' + soy.$$escapeHtml(opt_data.description) + '</p><table id="' + soy.$$escapeHtml(opt_data.tableId) + '"></table>';
};
if (goog.DEBUG) {
  GH.tpl.detailviewconfig.renderDetailViewTable.soyTemplateName = 'GH.tpl.detailviewconfig.renderDetailViewTable';
}


GH.tpl.detailviewconfig.renderEmptyDetailViewTable = function(opt_data, opt_ignored) {
  return '<h5>' + soy.$$escapeHtml(opt_data.heading) + '</h5><span class="ghx-fa">' + soy.$$escapeHtml('No additional fields added') + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.detailviewconfig.renderEmptyDetailViewTable.soyTemplateName = 'GH.tpl.detailviewconfig.renderEmptyDetailViewTable';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-lwf-board-deferred', location = 'jira-agile-module/includes/js/sidebar/subnavigator/PlanSubnavigatorContextProvider.js' */
AJS.namespace("GH.RapidBoard.PlanSubnavigatorContextProvider"),define("jira-agile/subnavigator/plan-subnavigator-context-provider",["underscore","jira-agile/rapid/ui/plan/plan-controls"],function(n,a){var e={id:0,label:"Backlog"},r={hasSubnavigator:function(){return!0},header:function(){return a.rapidViewConfig.name},itemList:function(){return[e]},onLoad:function(){},selectedItem:function(){return e.id},getChangeViewText:function(){return"_"},analyticEvent:function(){}};return r}),AJS.namespace("GH.RapidBoard.PlanSubnavigatorContextProvider",null,require("jira-agile/subnavigator/plan-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-lwf-board-deferred', location = 'jira-agile-module/includes/js/rapid/DefaultDeferredResourceEventHandler.js' */
define("jira-agile/rapid/deferred-resources-event-handler",["require"],function(e){"use strict";var i=e("jira-agile/rapid/global-events"),r={};return r.init=function(){r.triggerPreInitialization(),r.triggerDeferBatchParsingCompleteEvent()},r.triggerPreInitialization=function(){i.trigger("pre-initialization")},r.triggerDeferBatchParsingCompleteEvent=function(){AJS.$(GH).trigger("deferBatchParsingComplete")},r});;;try{window.performance.mark('gh-rapid-lwf-board-deferred_batch_file_eval:end');} catch(e){};