;try{window.performance.mark('greenhopper-rapid-non-gadget-lwf-board,gh-rapid-lwf-board,jira.global,atl.general,jira.general,atl.global,com.pyxis.greenhopper.jira,gh-rapid-config-lwf-board-deferred,jira.webresources,com.atlassian.jira.plugins.jira-development-integration-plugin_batch_file_eval:start');} catch(e){};;
/* module-key = 'jira.webresources:bundles-experiment-feature-flags', location = '/js/featureflags/bundles-experiment-feature-manager.js' */
define("jira/featureflags/bundles-experiment-feature-manager",["jira/util/data/meta","jira/featureflags/feature-manager"],function(e,t){"use strict";const a="jsw.growth.confluence.bundles.activation",n="variation-1",r="variation-2",i="not-enrolled",u=t.getFlagValue(a)||i;return{BUNDLES_LAUNCH_DARKLY_FEATURE_FLAG:a,shouldCreateSpace:function(){return[n,r].indexOf(u)!==-1},getBundleExperimentCohort:function(){return u}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/ui/notification/Notification.soy' */
// This file was automatically generated from Notification.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.notification.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.notification == 'undefined') { GH.tpl.rapid.notification = {}; }


GH.tpl.rapid.notification.renderErrorMessages = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.errors.length > 1) {
    output += '<ul>';
    var errorList6 = opt_data.errors;
    var errorListLen6 = errorList6.length;
    for (var errorIndex6 = 0; errorIndex6 < errorListLen6; errorIndex6++) {
      var errorData6 = errorList6[errorIndex6];
      output += '<li>' + ((errorData6.noAutoescape) ? soy.$$filterNoAutoescape(errorData6.message) : soy.$$escapeHtml(errorData6.message)) + '</li>';
    }
    output += '</ul>';
  } else {
    var errorList18 = opt_data.errors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      output += '<p>' + ((errorData18.noAutoescape) ? soy.$$filterNoAutoescape(errorData18.message) : soy.$$escapeHtml(errorData18.message)) + '</p>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderErrorMessages.soyTemplateName = 'GH.tpl.rapid.notification.renderErrorMessages';
}


GH.tpl.rapid.notification.renderContextualErrors = function(opt_data, opt_ignored) {
  var output = '';
  var errorList29 = opt_data.errors;
  var errorListLen29 = errorList29.length;
  for (var errorIndex29 = 0; errorIndex29 < errorListLen29; errorIndex29++) {
    var errorData29 = errorList29[errorIndex29];
    output += '<div class="ghx-error">' + soy.$$escapeHtml(errorData29.message) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderContextualErrors.soyTemplateName = 'GH.tpl.rapid.notification.renderContextualErrors';
}


GH.tpl.rapid.notification.renderMessageHolder = function(opt_data, opt_ignored) {
  return '<div class="ghx-body-warning">' + soy.$$escapeHtml(AJS.format('This version of {0} is not a supported browser.',opt_data.browser)) + ' <a href="' + soy.$$escapeHtml(opt_data.docsUrl) + '">' + soy.$$escapeHtml('See our documentation for the list of supported browsers.') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderMessageHolder.soyTemplateName = 'GH.tpl.rapid.notification.renderMessageHolder';
}


GH.tpl.rapid.notification.renderAuiMessage = function(opt_data, opt_ignored) {
  return '<div id="ghx-global-message" class="aui-message ' + soy.$$escapeHtml(opt_data.type) + ((opt_data.className) ? ' ' + soy.$$escapeHtml(opt_data.className) : '') + '">' + ((opt_data.title) ? '<p class="title">' + ((opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + '<strong>' + soy.$$escapeHtml(opt_data.title) + '</strong></p>' : '') + ((opt_data.message) ? '<p>' + ((! opt_data.title && opt_data.icon) ? '<span class="aui-icon icon-' + soy.$$escapeHtml(opt_data.type) + '"></span>' : '') + ((opt_data.messageHtml) ? soy.$$filterNoAutoescape(opt_data.message) : soy.$$escapeHtml(opt_data.message)) + '</p>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderAuiMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderAuiMessage';
}


GH.tpl.rapid.notification.renderGHtvMessage = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div id="ghx-update-message" class="ghx-tv-message"><p>' + soy.$$escapeHtml('This board has been updated') + ': <a href="" class="js-refresh-now">' + soy.$$escapeHtml('Refresh') + '</a>' + ((opt_data.showIgnore) ? '<span class="ghx-divider">&bull;</span><a href="" class="js-ignore-refresh">' + soy.$$escapeHtml('Ignore') + '</a>' : '') + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.notification.renderGHtvMessage.soyTemplateName = 'GH.tpl.rapid.notification.renderGHtvMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/Events.js' */
define("jira-agile/rapid/events",["require"],function(t){function n(t){return t?e.extend(t,n.prototype):t=this,t._bindings=[],t}var e=t("underscore");return n.prototype={on:function(t,n,e){return e&&this._off({type:t,context:e}),this._bindings.push({type:t,handler:n,context:e}),this},off:function(t){return e.isString(t)?this._off({type:t}):e.isFunction(t)?this._off({handler:t}):e.isObject(t)&&this._off({context:t}),this},_off:function(t){this._bindings=e.reject(this._bindings,function(n){var e=!t.type||t.type===n.type,i=!t.context||t.context===n.context,r=!t.handler||t.handler===n.handler;return e&&i&&r})},trigger:function(t){var n=Array.prototype.slice.call(arguments,1);return e.each(this._bindings,function(e){e.type===t&&e.handler.apply(e.context,n)}),this}},n}),AJS.namespace("GH.Events",null,require("jira-agile/rapid/events"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/GlobalEvents.js' */
define("jira-agile/rapid/global-events",["require"],function(e){"use strict";var i=e("jira-agile/rapid/events");return new i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/gh-config.js' */
AJS.namespace("GH.Config"),GH.Config.isSampleDataAvailable=!1,GH.Config.setSampleDataAvailable=function(a){GH.Config.isSampleDataAvailable=a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/Ajax.js' */
define("jira-agile/rapid/ajax",["jira/util/top-same-origin-window"],function(e){"use strict";var r={};return r.CONTEXT_PATH=AJS.contextPath(),r.REST_URL_BASE="/rest/greenhopper/1.0",r.PUBLIC_REST_URL_BASE="/rest/agile/1.0",r.xhrRegistery={},r.stallTimeout=300,r.get=function(e,t){var n;try{n=require("jira/util/gadgets-feature-flag-manager").isFeatureEnabled("endeavour.gadget.sprintburndown-prefetch")}catch(o){n=!1}AJS.$.extend(e,{type:"GET",headers:n?AJS.$.extend(e.headers,{"X-Atlassian-GreenHopper-Gadget":!_.isUndefined(GH.gadget)}):{"X-Atlassian-GreenHopper-Gadget":!_.isUndefined(GH.gadget)}});var a=r._executeGet(e,t);return a.pipe(function(e,r,t){return AJS.$.Deferred().resolveWith(this,[e.success,r,t])})},r.post=function(e){return e=r._getSettings(e,!0),AJS.$.extend(e,{type:"POST",contentType:"application/json"}),r._executeStore(e)},r.put=function(e){return e=r._getSettings(e,!0),e.type="PUT",r._executeStore(e)},r.del=function(e){return e=r._getSettings(e,!0),e.type="DELETE",r._executeStore(e)},r._getSettings=function(e,t){return!e.bareUrl&&e.url&&(e.bareUrl=r.buildRestUrl(e.url)),e.bareUrl&&(e.url=e.bareUrl),e.dataType||(e.dataType="json"),e.data&&t&&(e.data=JSON.stringify(e.data)),e.contentType="application/json",e},r._getXhrData=function(e){var t={timestamp:0};return e&&(t=r.xhrRegistery[e]?r.xhrRegistery[e]:r.xhrRegistery[e]=t),t},r._executeGet=function(e,t){e=r._getSettings(e);var n=r._getXhrData(t);n.xhr&&(n.xhr.abort(),delete n.xhr,delete n.xhrAbort,delete n.timeoutId);var o=n.timestamp;if(n.timestamp=(new Date).getTime(),n.timestamp-o<r.stallTimeout){var a,s=AJS.$.Deferred(),u=function(){a=r._executeGet(e,t),a.then(s.resolve,s.reject)};n.timeoutId=window.setTimeout(u,r.stallTimeout),n.xhr=s.promise(),n.xhr.abort=function(){a?a.abort.apply(a,arguments):clearTimeout(n.timeoutId)}}else n.xhr=r.makeRequest(e);return n.xhrAbort=n.xhr.abort,n.xhr.abort=function(){var e=n.xhr,r=n.xhrAbort;if(e&&r)return r.apply(e,arguments)},n.xhr.done(function(){n.xhr&&delete n.xhr}).fail(function(){n.xhr&&delete n.xhr}),n.xhr},r._executeStore=function(e){if(e=e||{},e.data&&"string"==typeof e.data&&/\?\?/.test(e.data)){var t="\\u003F\\u003F";e.data=e.data.replace(/\?\?/g,t)}return e.dataType="json",r.makeRequest(e)},r.makeRequest=function(e){var t=AJS.$.Deferred();e=_.extend(e,{success:function(){t.resolveWith(this,arguments)},error:function(){t.rejectWith(this,arguments)}});var n=t.promise(JIRA.SmartAjax.makeRequest(e)),o=n.abort;n.abort=function(e){return n.abortMarker="timeout"!==e,o.apply(n,arguments)};var a=n.pipe(r._generateDoneInterceptor(),r._generateFailInterceptor(e.errorsNoAutoEscape));return e.deferErrorHandling||a.fail(r._generateErrorHandler(e.onGlobalError,e.errorContextMap,e.contextualErrorRenderer,e.globalErrorDismissable)),a},r._generateDoneInterceptor=function(){return function(e,t,n){return e=e||{},e=r._createExtendedResult(e),r.matchesCurrentUser(n)?e.isSuccess()?AJS.$.Deferred().resolveWith(this,[e,t,n]):AJS.$.Deferred().rejectWith(this,[e,n,t,null]):r._handleCurrentUserChanged(n)}},r._generateFailInterceptor=function(e){return function(t,n,o){if(t.abortMarker)return AJS.$.Deferred();if(!r.matchesCurrentUser(t))return r._handleCurrentUserChanged(t);var a={},s=null;if(t.responseText)try{a=JSON.parse(t.responseText)}catch(u){}return a.errors||a.errorMessages?s=r._convertJiraErrors(a,e):a.message&&(s=r._convertFrameworkErrors(a)),s||(s=r._convertGenericErrors(t,o)),AJS.$.Deferred().rejectWith(this,[s,t,n,o])}},r.handleContextualErrors=function(e,r,t){return r=r||{},!!e.hasContextualErrors()&&(AJS.$(e.getContextualErrors()).each(function(n,o){var a=r[o.contextId];if(a)if(AJS.$.isFunction(a))a(o,e);else{a=AJS.$(a),a.siblings(".ghx-error").remove();var s;s=t?t(o):GH.tpl.rapid.notification.renderContextualErrors({errors:o.errors}),a.after(s)}else AJS.$(o.errors).each(function(r,t){e.addGlobalError(t)})}),!0)},r.handleGlobalErrors=function(e,r,t){return!!e.hasGlobalErrors()&&(GH.Notification.showErrors({errors:e.getGlobalErrors()},t),r&&r instanceof Function&&r(e),!0)},r.buildRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),r.buildBareRestUrl(r.REST_URL_BASE+e)},r.buildPublicRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),r.buildBareRestUrl(r.PUBLIC_REST_URL_BASE+e)},r.buildBareRestUrl=function(e){return 0!==e.indexOf("/")&&(e="/"+e),r.CONTEXT_PATH+e},r._createExtendedResult=function(e){return e?r._extendResult({success:e}):r._extendResult({success:!0})},r._extendResult=function(e){return AJS.$.extend(e,{getGlobalErrors:function(){return e.error?e.error.errors:null},getContextualErrors:function(){return e.error?e.error.contextualErrors:null},hasGlobalErrors:function(){return e.error&&e.error.errors&&e.error.errors.length>0},hasContextualErrors:function(){return e.error&&e.error.contextualErrors},addGlobalError:function(r){e.error||(e.error={}),e.error.errors||(e.error.errors=[]),e.error.errors[e.error.errors.length]=r},getSuccessObject:function(){return e.success},isSuccess:function(){return!e.error}})},r._generateErrorHandler=function(e,t,n,o){return function(a){r.handleContextualErrors(a,t,n),r.handleGlobalErrors(a,e,o)}},r._convertJiraErrors=function(e,t){var n=e.errorMessages?e.errorMessages:[];n=_.map(n,function(e){return{message:e,noAutoescape:t}});var o=e.errors?e.errors:{};o=_.map(o,function(e,r){return{contextId:r,errors:[{message:e,noAutoescape:t}]}});var a={error:{errors:n,contextualErrors:o}};return r._extendResult(a)},r._convertFrameworkErrors=function(e){var t={error:{errors:[{message:e.message}],contextualErrors:[]}};return r._extendResult(t)},r._convertGenericErrors=function(e,t){var n=r._extendResult({});return 0===e.status&&"abort"===t?n.addGlobalError({message:"Ajax.error.timeout"}):t&&n.addGlobalError({message:t}),n},r._hasUsernameResponseHeader=function(e){return!!e.getResponseHeader("X-AUSERNAME")},r._hasUserAccountIdResponseHeader=function(e){return!!e.getResponseHeader("X-AACCOUNTID")},r._getUserForResponse=function(e){return e.getResponseHeader("X-AUSERNAME")?decodeURIComponent(e.getResponseHeader("X-AUSERNAME")):"anonymous"},r._getAccountIdForResponse=function(e){return e.getResponseHeader("X-AACCOUNTID")?decodeURIComponent(e.getResponseHeader("X-AACCOUNTID")):"anonymous"},function(){var e=require("jira/util/data/meta");r.getUserFromAJS=function(){var r=e.get("remote-user");return r?r:"anonymous"},r.getAccountIdFromAJS=function(){var r=e.get("atlassian-account-id");return r?r:"anonymous"}}(),r.matchesCurrentUser=function(e){return!e.getResponseHeader||!e.getAllResponseHeaders||!r._hasUserAccountIdResponseHeader(e)||r.getAccountIdFromAJS()===r._getAccountIdForResponse(e)||204===e.status&&!e.getAllResponseHeaders()&&AJS.$.browser.msie},r._handleCurrentUserChanged=function(t){var n=(r.getUserFromAJS(),r._getUserForResponse(t),r.getAccountIdFromAJS()),o=r._getAccountIdForResponse(t),a="anonymous"!==n&&"anonymous"===o;if(a){var s=GH.Navigation.getLoginUrl();require("jira/container-api").navigate(s,function(){location.href=s})}else e(window).location.reload();return AJS.$.Deferred()},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/ui/notification/Notification.js' */
!function(){var e=require("jira/util/top-same-origin-window"),i=function(){return e(window).document};AJS.namespace("GH.Notification"),GH.Notification.autoHideEnabled=!0;var t=Object.freeze({INFO:"info",SUCCESS:"success"});GH.Notification.showErrors=function(e,i){var t=GH.Notification.prepareNotificationDiv(),o=GH.tpl.rapid.notification.renderErrorMessages(e);"undefined"==typeof i&&(i=!0),AJS.messages.error(t,{title:"Error",body:o,closeable:i}),GH.Notification._divStyle(t)&&t.css(GH.Notification._divStyle(t)),t.show()},GH.Notification.showError=function(e,i,t){var o=GH.Notification.prepareNotificationDiv();"undefined"==typeof t&&(t=!0),AJS.messages.error(o,{title:e,body:i,closeable:t}),GH.Notification._divStyle(o)&&o.css(GH.Notification._divStyle(o)),o.show()},GH.Notification.showWarnings=function(e,i){var t={autoHide:!0,autoHideDelay:5e3,preRendered:!1,showTitle:!1};i=_.extend({},t,i);var o,a=GH.Notification.prepareNotificationDiv();o=i.preRendered?e:GH.tpl.rapid.notification.renderErrorMessages({errors:e});var n={body:o,closeable:!0};i.showTitle&&(n.title="Warning"),AJS.messages.warning(a,n),GH.Notification._divStyle(a)&&a.css(GH.Notification._divStyle(a)),a.show(),i.autoHide&&GH.Notification.autoHideEnabled&&setTimeout(function(){a.hide()},i.autoHideDelay)},GH.Notification.showWarning=function(e){var i=GH.Notification.prepareNotificationDiv();AJS.messages.warning(i,{body:e,closeable:!0}),GH.Notification._divStyle(i)&&i.css(GH.Notification._divStyle(i)),i.show()},GH.Notification.clear=function(){GH.Notification.prepareNotificationDiv().hide()},GH.Notification.handleDateFormatMismatchError=function(e){var i='<a href="'+GH.Ajax.CONTEXT_PATH+'/secure/admin/AdvancedApplicationProperties.jspa">';i+="Advanced Settings",i+="</a>";var t=AJS.format("It appears your Jira date format settings are misconfigured. Please check the {0} and ensure that \'\'jira.date.time.picker.java.format\'\' and \'\'jira.date.time.picker.javascript.format\'\' have matching output.",i);GH.Notification.showWarnings(t,{autoHide:!1,preRendered:!0})},GH.Notification.auiMessage=function(e){var i=_.extend({type:"generic",icon:!0,messageHtml:!1},e);return GH.tpl.rapid.notification.renderAuiMessage({type:i.type,title:i.title,icon:i.icon,messageHtml:i.messageHtml,message:i.message})},GH.Notification.Handler={_defaultNotificationHandler:function(){var e=AJS.$("<div/>").addClass("global-msg");return AJS.$(".global-msg",i()).remove(),AJS.$("body",i()).append(e),e},_defaultDivStyleHandler:function(e){return{marginLeft:-e.outerWidth()/2,top:20}},setCustomDivStyleHandler:function(e){this._customDivStyleHandler=e,this._useDefault=!1},_useDefault:!0,setCustomNotificationHandler:function(e){this._customNotificationHandler=e,this._useDefault=!1},removeCustomHandlers:function(){this._useDefault=!0},getNotificationHandler:function(){return this._useDefault||null==this._customNotificationHandler?this._defaultNotificationHandler:this._customNotificationHandler},getDivStyleHandler:function(){return this._useDefault||null==this._customDivStyleHandler?this._defaultDivStyleHandler:this._customDivStyleHandler}},GH.Notification._divStyle=function(e){var i=GH.Notification.Handler.getDivStyleHandler();return i(e)},GH.Notification.prepareNotificationDiv=function(){var e=GH.Notification.Handler.getNotificationHandler();return e()},GH.Notification.showSuccess=function(e,i){o(t.SUCCESS,e,i)},GH.Notification.showInfo=function(e,i){o(t.INFO,e,i)};var o=function(e,t,o){clearTimeout(GH.Notification.current);var a={timeout:5e3,closeable:!0,shadowed:!0};o=_.extend(a,o,{body:t});var n=GH.Notification.prepareNotificationDiv();AJS.messages[e](n,o),GH.Notification._divStyle(n)&&n.css(GH.Notification._divStyle(n)),n.show(),GH.Notification.autoHideEnabled&&(GH.Notification.current=setTimeout(function(){AJS.$(".global-msg",i()).hide()},o.timeout))};GH.Notification.showIssueMessage=function(e){var i=JIRA.SessionStorage,t=null,o=null;e||(e=i.getItem("selectedIssueId")),e&&(o=i.getItem("selectedIssueKey"),t=i.getItem("selectedIssueMsg"),GH.Notification.showIssueMessageImpl(e,t,o)),i.removeItem("selectedIssueId"),i.removeItem("selectedIssueKey"),i.removeItem("selectedIssueMsg")},GH.Notification.showIssueMessageImpl=function(e,i,t){i||(i="thanks_issue_updated");var o=AJS.params[i];o&&t&&(o=AJS.format(o,t),GH.Notification.showSuccess(o))},GH.Notification.addPageLoadMessage=function(e,i){var t=GH.storage.get("gh.pageloadmessages",!0)||[];t.push({message:e,type:i||"success"}),GH.storage.put("gh.pageloadmessages",t,!0)},GH.Notification._displayPageLoadMessages=function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var i=e[0].type,t="";switch(_.each(e,function(e){t.length>0&&(t+="<br>"),t+=e.message}),i){case"warning":GH.Notification.showWarning(t);break;case"success":default:GH.Notification.showSuccess(t)}GH.storage.put("gh.pageloadmessages",null,!0)}};var a=null;GH.Notification.showBoardUpdatedMessage=function(){var e=void 0,i=AJS.$.Deferred();if(0===AJS.$(".aui-flag[aria-hidden=false]").length){var t=GH.tpl.rapid.notification.renderGHtvMessage({showIgnore:!1});a=AJS.flag({type:"info",body:t}),e=AJS.$(t)}var o=function(e){e.preventDefault(),GH.Notification.clearBoardUpdatedMessage(),i.resolve()};return AJS.$(".js-refresh-now").off("click",o).click(o),i.promise()},GH.Notification.clearBoardUpdatedMessage=function(){a&&a.close()},GH.Notification.isBoardUpdatedMessageVisible=function(){var e=AJS.$("#ghx-update-message");return e.length>0},AJS.$(document).ready(function(){GH.Notification.showIssueMessage(),GH.storage&&GH.Notification._displayPageLoadMessages()})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/state/storage.js' */
AJS.namespace("GH.storage"),GH.storage.get=function(e,t){var r;if(r=t?sessionStorage.getItem(e):localStorage.getItem(e),"string"!=typeof r)return r;try{return JSON.parse(r)}catch(o){return}},GH.storage.put=function(e,t,r){if(null===t||void 0===t)r?sessionStorage.removeItem(e):localStorage.removeItem(e);else try{r?sessionStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,JSON.stringify(t))}catch(o){return!1}return!0},window.localStorage&&window.sessionStorage||(GH.storage.get=function(){return null},GH.storage.put=function(){return!1});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/Validation.js' */
AJS.namespace("GH.Validation"),GH.Validation.notBlank=function(r,t,n){var a=GH.Validation.applyRules(r,t,n,function(){return AJS.$.trim(AJS.$(r).val()).length>0});return a},GH.Validation.maxLength=function(r,t,n,a){var i=GH.Validation.applyRules(r,n,a,function(){return AJS.$.trim(AJS.$(r).val()).length<=t});return i},GH.Validation.isPositiveInteger=function(r,t,n){var a=GH.Validation.applyRules(r,t,n,function(){return/^\d*$/.test(AJS.$.trim(AJS.$(r).val()))});return a},GH.Validation.applyRules=function(r,t,n,a){r=AJS.$(r),errorCtx=n?AJS.$(n):r;var i=a.call(this);return!!i||(GH.Validation.showContextualErrors(errorCtx,t),!1)},GH.Validation.showContextualErrors=function(r,t,n,a,i){GH.Validation.clearContextualErrors(r),r.after(GH.tpl.rapid.notification.renderContextualErrors({errors:[{message:AJS.I18n.getText(t,n,a,i)}]}))},GH.Validation.clearContextualErrors=function(r){r=AJS.$(r),r.find(".ghx-error").remove(),r.siblings(".ghx-error").remove()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/gh-helppaths.js' */
AJS.namespace("GH.HelpPaths"),GH.HelpPaths.getHelpPath=function(e){return null};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/gh-message.js' */
AJS.namespace("GH.Message"),GH.Message.showIssueMessage=function(e){var s=JIRA.SessionStorage,a=null,t=null;e||e||(e=s.getItem("selectedIssueId")),e&&(t=s.getItem("selectedIssueKey"),a=s.getItem("selectedIssueMsg"),GH.Message.showIssueMessageImpl(e,a,t)),s.removeItem("selectedIssueId"),s.removeItem("selectedIssueKey"),s.removeItem("selectedIssueMsg")},GH.Message.showIssueMessageImpl=function(e,s,a){s||(s="thanks_issue_updated");var t=AJS.params[s];t&&a&&(t=AJS.format(t,a),GH.Message.showSuccess(t))},GH.Message.prepareNotificationDiv=function(){var e=AJS.$("#gh-notification");return 0==e.length&&(e=AJS.$('<div id="gh-notification"></div>'),AJS.$("#gh").append(e)),e.text(""),e},GH.Message.preparePresistentNotificationDiv=function(){var e=AJS.$("#gh-persistent-notification");return 0==e.length&&(e=AJS.$('<div id="gh-persistent-notification"></div>'),AJS.$("#gh").append(e)),e.text(""),e},GH.Message.showSuccess=function(e){var s=GH.Message.prepareNotificationDiv();AJS.messages.success(s,{body:e}),s.show(),setTimeout('AJS.$("#gh-notification").hide()',5e3)},GH.Message.showWarning=function(e){var s=GH.Message.prepareNotificationDiv();AJS.messages.warning(s,{body:e,closeable:!0}),s.show()},GH.Message.showPersistentWarning=function(e){var s=GH.Message.preparePresistentNotificationDiv();AJS.messages.warning(s,{body:e,closeable:!0}),s.show()},GH.Message.addPageLoadMessage=function(e,s){var a=GH.storage.get("gh.pageloadmessages",!0)||[];a.push({message:e,type:s||"success"}),GH.storage.put("gh.pageloadmessages",a,!0)},GH.Message._displayPageLoadMessages=function(){var e=GH.storage.get("gh.pageloadmessages",!0);if(e){var s=e[0].type,a="";switch(_.each(e,function(e){a.length>0&&(a+="<br>"),a+=e.message}),s){case"warning":GH.Message.showWarning(a);break;case"success":default:GH.Message.showSuccess(a)}GH.storage.put("gh.pageloadmessages",null,!0)}},AJS.$(document).ready(function(){GH.Message.showIssueMessage(),GH.storage&&GH.Message._displayPageLoadMessages()}),AJS.$(document).ready(function(){var e=AJS.$("#footer"),s=e.find(".footer-body:first ul:first"),a=e.find("#ghx-footer");s.before(a),a.css({visibility:""})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/Util.js' */
AJS.namespace("GH.Util"),GH.Util.getPluginKey=function(){return AJS.$('meta[name="ghx-plugin-key"]').attr("content")},GH.Util.getEdition=function(e){var r=JSON.parse(jQuery('meta[name="ajs-product-editions"]').attr("content"));switch(r[e]){case"f":return"jedi";case"s":return"standard";case"p":return"premium";default:return"unlicensed"}},GH.Util.wrapPreventDefault=function(e,r){return function(n){return n.preventDefault(),e.apply(r||this,arguments)}},GH.Util.andThenSplice=function(){return{_needsSplice:Array.prototype.slice.call(arguments)}},GH.Util.andThen=function(e){var r=[{trigger:"resolveWith",on:"done",filter:arguments[1]},{trigger:"rejectWith",on:"fail",filter:arguments[2]},{trigger:"notifyWith",on:"progress",filter:arguments[3]}];return AJS.$.Deferred(function(n){_.each(r,function(r){var t=r.on,i=r.trigger,o=_.isFunction(r.filter)&&r.filter;e[t](function(){var e=o&&o.apply(this,arguments);if(e&&_.isFunction(e.promise))e.promise().done(n.resolve).fail(n.reject).progress(n.notify);else{var r;r=e&&_.isArray(e._needsSplice)?e._needsSplice:o?[e]:arguments,n[i](_.isFunction(this.promise)?n.promise():this,r)}})})}).promise()},AJS.$._OriginalDeferred=AJS.$.Deferred,AJS.$.Deferred=function(e){return AJS.$._OriginalDeferred(function(r){r.andThen=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(r),GH.Util.andThen.apply(this,e)};var n=r.promise;r.promise=function(){var e=n.apply(this,arguments);return e.andThen=function(){var r=Array.prototype.slice.call(arguments);return r.unshift(e),GH.Util.andThen.apply(this,r)},e},e&&e.call(r,r)})},GH.Util.indexOf=function(e,r,n){var t=-1;return n&&(e=e.slice().reverse()),_.some(e,function(i,o){return!!r(i,o)&&(t=n?e.length-1-o:o,!0)}),t},GH.Util.swapArrayItems=function(e,r,n){var t;return!!(e&&r!==n&&Math.min(r,n)>=0&&Math.max(r,n)<e.length)&&(t=e[n],e[n]=e[r],e[r]=t,!0)},GH.Util.roundToDecimalPlaces=function(e,r){if("number"!=typeof e||e===Math.round(e))return e;if(0===r)return Math.round(e);var n=e.toString();if(n.indexOf("e")>=0)return e;var t=e<0,i=n.split("."),o=+i[1].charAt(r);if(i[1]=i[1].substr(0,r),o>5||!t&&5===o){var a=/^0*/.exec(i[1])[0];i[1]=a+(+i[1]+1),i[1].length>r&&(a?i[1]=i[1].substr(i[1].length-r):(i[0]=+i[0]+1,i[1]=0))}return parseFloat(i.join("."))},GH.Util.promiseCast=function(e){if(e&&AJS.$.isFunction(e.promise)){var r=new Promise(function(r,n){e.done(function(e){return r(e)}),e.fail(function(r){return n(e)})});return r}return e&&"function"==typeof e.then?e:new Promise(function(r){return r(e)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/rapid/UserData.js' */
define("jira-agile/rapid/user-data",["jira/util/data/meta"],function(e){"use strict";var r={};return r.remoteUser=e.get("remote-user"),r.loggedIn=!!r.remoteUser,r.hasUser=function(){return r.loggedIn},r.getUserName=function(){return r.remoteUser},r.canCreateProject=function(){return r.userConfig.canCreateProject},r.canCreateBoard=function(){return r.userConfig&&r.userConfig.canCreateBoard},r.setGlobalConfig=function(e){r.quickCreateDefaultIssueTypeId=e.quickCreateDefaultIssueTypeId,r.setUserConfig(e.userConfig)},r.getUserConfig=function(){return r.userConfig},r.setUserConfig=function(e){r.userConfig=e},r}),AJS.namespace("GH.UserData",null,require("jira-agile/rapid/user-data"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/features/feature-flags.js' */
define("jira-agile/features/feature-flags",[],function(){var e=function(e,a){return{key:e,fallback:a}};return{EPIC_CREATE_IMPROVEMENT:e("agile.epic.create.improvement",!1)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-core', location = 'jira-agile-module/includes/js/gh/navigation/Navigation.js' */
!function(){AJS.namespace("GH.Navigation");var a=require("jira-agile/rapid/ajax");GH.Navigation.gotoDefaultRapidBoardPage=function(a,i){window.location.href=GH.Navigation.getDefaultRapidBoardPageUrl(a,i)},GH.Navigation.gotoDefaultRapidBoardPageAfterSprintStarted=function(a){window.location.href=GH.Navigation.getCanonicRapidBoardPageUrl(a)+"&sprintStarted=true"},GH.Navigation.getDefaultRapidBoardPageUrl=function(a,i){var n=_.isUndefined(i)?"":"&view="+i;return GH.Navigation.getCanonicRapidBoardPageUrl(a)+n},GH.Navigation.getCanonicRapidBoardPageUrl=function(i){return a.CONTEXT_PATH+"/secure/RapidBoard.jspa?rapidView="+i},GH.Navigation.getLoginUrl=function(){return a.CONTEXT_PATH+"/login.jsp?os_destination="+encodeURIComponent(window.location.href)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'jira-agile-module/includes/js/rapid/ui/persistent-messages/CreateViewMessage.js' */
AJS.namespace("GH.PersistentMessages.CreateViewMessage"),GH.PersistentMessages.CreateViewMessage.setView=function(e,s,a,t){var r={id:e,name:s,type:a,subType:t};GH.storage.put("gh.createViewMessage",r,!0)},GH.PersistentMessages.CreateViewMessage.clear=function(){GH.storage.put("gh.createViewMessage",null,!0)},GH.PersistentMessages.CreateViewMessage.renderMessage=function(){var e=GH.storage.get("gh.createViewMessage",!0);if(e&&"simple"!==e.type){e.name=AJS.escapeHTML(String(e.name));var s;"advanced"==e.type?s=GH.tpl.board.x.renderCreateViewMessage:"kanban"==e.subType?s=GH.tpl.board.x.renderWelcomeViewMessageKanban:"scrum"==e.subType&&(s=GH.tpl.board.x.renderWelcomeViewMessageScrum);var a=s({rapidView:e,url:AJS.parseUri(window.location.href)});GH.Notification.showSuccess(a,{title:"Success",timeout:1e4}),GH.PersistentMessages.CreateViewMessage.clear()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-persistent-messages', location = 'jira-agile-module/includes/js/rapid/ui/persistent-messages/WelcomeMessage.js' */
AJS.namespace("GH.PersistentMessages.WelcomeMessage"),GH.PersistentMessages.WelcomeMessage.show=function(e){GH.storage.put("gh.welcomeMessage",e,!0)},GH.PersistentMessages.WelcomeMessage.renderMessage=function(){var e=GH.storage.get("gh.welcomeMessage",!0);if(e&&"simple"!==e.preset){var s=null;e.rapidView.name=AJS.escapeHTML(String(e.rapidView.name)),e.project.name=AJS.escapeHTML(String(e.project.name));var a=null;/kanban/.test(e.preset)?a=e.sample?GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban:GH.tpl.board.x.renderWelcomeProjectMessageKanban:/scrum/.test(e.preset)&&(a=e.sample?GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum:GH.tpl.board.x.renderWelcomeProjectMessageScrum),s=a({project:e.project,rapidView:e.rapidView,url:AJS.parseUri(window.location.href)}),GH.Notification.showSuccess(s,{title:"Success",timeout:1e4}),GH.storage.put("gh.welcomeMessage",null,!0)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'jira-agile-module/includes/js/dialog/dialog.js' */
AJS.namespace("GH.Dialog"),GH.Dialog.baseExtension={_getDefaultOptions:function(){return AJS.$.extend(this._super(),{onDialogFinished:function(){this.handleSuccess()}})},_performRedirect:function(){this.redirected=!0,this.handleSuccess()},hide:function(e,n){return JIRA.Dialog.current===this&&(this._super(e),void(n===!0||!n||n.reason!==JIRA.Dialog.HIDE_REASON.escape&&n.reason!==JIRA.Dialog.HIDE_REASON.cancel||this.doCancelCleanup()))},doCancelCleanup:function(){},handleSuccess:function(){}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'jira-agile-module/includes/js/rapid/ops/DialogExtension.js' */
AJS.namespace("GH.Dialog.XBoardExtension"),GH.Dialog.XBoardExtension.getActionInfo=function(e){var t="workflow-transition-",a=e.options.id;return a.substring(0,t.length)===t?{formId:a,isTransition:!0,transitionId:a.substring(t.length)}:{formId:a,isTransition:!1}},GH.Dialog.XBoardExtension.handleSuccess=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),this.hide(!0,!0),this._hideloadingIndicator();var e=GH.Dialog.XBoardExtension.getActionInfo(this),t=GH.IssueOperationShortcuts.getSelectedIssueId(),a=GH.IssueOperationShortcuts.getSelectedIssueKey();GH.WorkController.isActive()?GH.Dialog.handleWorkModeUpdate(t,a,e):GH.PlanController.isActive()&&GH.Dialog.handlePlanModeUpdate(t,a,e),GH.Notification.showIssueMessage(t),GH.WorkDragAndDrop.transitionTargetStatus=void 0},GH.Dialog.handlePlanModeUpdate=function(e,t,a){if(!GH.IssueOperationShortcuts.isOverrideSelectedIssueActive()){var o=0,r=null,s=GH.BacklogModel.findModelWithIssue(t);s&&(GH.SprintModel.isSprintModel(s)&&(r=s.getSprintId()),o=s.getIssueList().getIssueIndex(t)),GH.PlanController.reload(function(){var e=GH.BacklogSelectionController.getSelectedIssueKey();if(!e){var t=null;r&&(t=GH.BacklogModel.getSprintModel(r)),t||(t=GH.BacklogModel.getBacklogModel2()),GH.BacklogSelectionController.selectIssue(t.getIssueList().getIssueKeyAtIndex(o))}})}},GH.Dialog.handleWorkModeUpdate=function(e,t,a){var o=GH.Dialog.createParentCompletedCheckCallback(t),r=GH.Dialog.createSelectMostAppropriateIssueCallback(t);if(a.isTransition)if(GH.WorkDragAndDrop.transitionTargetStatus){var s=GH.WorkDragAndDrop.transitionTargetStatus,n=GH.GridDataController.getModel(),l=n.getIssueDataByKey(t),i=n.getIssuePositionByKey(t),d=n.getColumns(),u=i.columnId,c=GH.GridColumnsData.getColumnIdForStatus(d,s);n.moveIssueToColumn(t,u,c),l.status=s,n.updateIssueData(l),GH.SwimlaneView.rerenderCell(i.swimlaneId,u),GH.SwimlaneView.rerenderCell(i.swimlaneId,c),o()}else GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"ParentWithAllSubsCompletedCheck",o);GH.CallbackManager.registerCallback(GH.WorkController.CALLBACK_POOL_LOADED,"SelectMostAppropriateIssueCallback",r),GH.WorkController.reload()},GH.Dialog.createParentCompletedCheckCallback=function(e){return function(){var t=GH.GridDataController.getModel();if(!_.isUndefined(t.data.issues[e])&&!_.isUndefined(t.data.issues[e].parentKey)){var a=t.data.issues[e].parentKey;if(_.contains(t.data.columnIssueMapping[_.last(t.data.columns).id],e)){var o=t.data.columnIssueMapping[_.last(t.data.columns).id],r=_.reduce(_.toArray(t.data.issues),function(e){return!_.contains(o,e)}),s=_.find(r,function(e){return t.data.issues[e].parentKey===a});s||GH.WorkController.resolveParentTask(t.data.issues[a])}}}},GH.Dialog.createSelectMostAppropriateIssueCallback=function(e){var t=GH.GridDataController.getModel().getIssuePositionByKey(e);return function(){var a=GH.GridDataController.getModel().getIssueDataByKey(e);if(!a){var o=GH.GridDataController.getModel().getIssueKeyAtPosition(t);o?(GH.WorkSelectionController.selectIssue(o,{pushState:!1,dontUpdateUI:!0}),GH.RapidBoard.State.replaceState()):(GH.WorkSelectionController.selectIssue(void 0,{pushState:!1,dontUpdateUI:!0}),GH.RapidBoard.State.replaceState())}}},GH.Dialog.XBoardExtension.doCancelCleanup=function(){GH.IssueOperationShortcuts.clearOverrideSelectedIssue(),GH.WorkDragAndDrop.transitionTargetStatus=void 0};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'jira-agile-module/includes/js/dialog/form-dialog.js' */
!function(){"use strict";var o=require("jira/dialog/form-dialog");AJS.namespace("GH.FormDialog"),GH.FormDialog=o.extend(GH.Dialog.baseExtension),GH.FormDialog=GH.FormDialog.extend(GH.Dialog.XBoardExtension)}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'jira-agile-module/includes/js/dialog/labels-dialog.js' */
define("jira-agile/dialog/labels-dialog",["jira/dialog/labels-dialog"],function(i){var n=i.extend(GH.Dialog.baseExtension);return n=n.extend(GH.Dialog.XBoardExtension),n=n.extend({_handleSubmitResponse:function(i,n,t){this.serverIsDone&&(this.options.onSuccessfulSubmit&&this.options.onSuccessfulSubmit.call(this,i,n,t),this.options.autoClose&&this.hide(),this.options.onDialogFinished&&this.options.onDialogFinished.call(this,i,n,t))},decorateContent:function(){this._super();var i=this.get$popupContent(),n=i.find("input[name=customFieldId]");if(1===n.length){var t=i.find("#hint");t.hide()}}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-dialog', location = 'jira-agile-module/includes/js/rapid/ui/dialog/DialogUtil.js' */
AJS.namespace("GH.Dialog"),GH.Dialog.create=function(n){AJS.$("#"+n.id).remove(),n=_.defaults(n,{bindEscape:!0});var e=new AJS.Dialog(n),i=e.show,a=n&&n.analyticsPageName,o=function(){GH.Dialog.preShow(),GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.prepareNotificationDiv),GH.Notification.Handler.setCustomDivStyleHandler(function(){return""}),i.call(e),GH.Dialog.sendAnalyticsPageEvent(a);var o=AJS.$("#"+n.id).find(".dialog-button-panel .aui-button");o.is(":enabled")&&o.focus(),AJS.$("#"+n.id).addClass("ghx-dialog")};return _.extend(e,{dispose:GH.Dialog.generateCloseHandler(e),cancel:GH.Dialog.generateCloseHandler(e,n.onCancelFn),submit:GH.Dialog.generateCloseHandler(e,n.onConfirmFn),show:o,disableControls:GH.Dialog.generateDisableControlsFn(e),enableControls:GH.Dialog.generateEnableControlsFn(e),showSpinner:GH.Dialog.generateShowSpinnerFn(e),hideSpinner:GH.Dialog.generateHideSpinnerFn(e)}),GH.Dialog.bindEscapeHandler(e,!n.bindEscape),e},GH.Dialog.prepareNotificationDiv=function(){var n=AJS.$(".dialog-page-body:visible"),e=n.find(".dialog-panel-body:first-child");return 0===e.length&&(e=AJS.$("<div/>").addClass("dialog-panel-body").prependTo(n)),AJS.$("<div/>").prependTo(e)},GH.Dialog.addCancelButton=function(n){n.addCancel("Cancel",function(e){n.cancel(n)})},GH.Dialog.bindEscapeHandler=function(n,e){e?JIRA.bind("Dialog.beforeHide",function(e,i,a,o){o===n.id&&a===JIRA.Dialog.HIDE_REASON.escape&&e.preventDefault()}):AJS.$(document).bind("keyup."+n.id,function(e){27===e.keyCode&&n.cancel(n)})},GH.Dialog.generateCloseHandler=function(n,e){var i=require("jira/container-api");return function(){return n.remove(),GH.Dialog.undim(),AJS.$(document).unbind("keyup."+n.id),i.getIsIframe()||AJS.unbind("remove.dialog"),e&&e(n),GH.Notification.Handler.removeCustomHandlers(),!1}},GH.Dialog.generateDisableControlsFn=function(n){return function(){AJS.$("#"+n.id+" button").attr("disabled","disabled")}},GH.Dialog.generateEnableControlsFn=function(n){return function(){AJS.$("#"+n.id+" button").removeAttr("disabled")}},GH.Dialog.generateShowSpinnerFn=function(n){return function(){AJS.$("#"+n.id).find(".button-panel-cancel-link").css("visibility","hidden").before('<span class="ghx-spinner"/>')}},GH.Dialog.generateHideSpinnerFn=function(n){return function(){AJS.$("#"+n.id).find(".ghx-spinner").remove().end().find(".button-panel-cancel-link").css("visibility","visible")}},GH.Dialog.sanitizeAJSDim=function(){var n=AJS.dim;AJS.dim=function(){try{n.apply(this,arguments)}catch(e){}}},GH.Dialog.registerDialog=function(n,e,i){AJS.$(document).undelegate(n,"click").delegate(n,"click",function(n){var a=AJS.$(this);a.hasClass("disabled")||(n.preventDefault(),e(n,i))})},GH.Dialog.Spinner={},GH.Dialog.Spinner.$el=AJS.$('<div class="jira-page-adg-loading-background"></div><div class="jira-page-adg-spinner">            <span class="jira-page-adg-spinner-container">                <span class="jira-page-adg-spinner-wrapper" size="48">                    <svg                        class="jira-page-adg-spinner-svg"                        focusable="false"                        height="48"                        size="48"                        viewBox="0 0 48 48"                        width="48"                        xmlns="http://www.w3.org/2000/svg"                    >                        <circle cx="24" cy="24" r="21.5"></circle>                    </svg>                </span>            </span>        </div>'),GH.Dialog.Spinner.show=function(){AJS.$(".aui-blanket").after(GH.Dialog.Spinner.$el)},GH.Dialog.Spinner.hide=function(){GH.Dialog.Spinner.$el.remove()},GH.Dialog.triggerShowEvent=function(){AJS.$(window).trigger("show.dialog")},GH.Dialog.triggerHideEvent=function(){AJS.$(window).trigger("hide.dialog")},GH.Dialog.dim=function(){AJS.dim(),GH.Dialog.Spinner.show(),GH.Dialog.triggerShowEvent()},GH.Dialog.undim=function(){AJS.undim(),AJS.$(".aui-blanket").empty(),GH.Dialog.Spinner.hide(),GH.Dialog.triggerHideEvent()},GH.Dialog.preShow=function(){AJS.$(".aui-blanket").empty(),GH.Dialog.Spinner.hide()},GH.Dialog.sendAnalyticsPageEvent=function(n){var e=require("jira/analytics/web-client");n&&"string"==typeof n&&n.length>0&&e.sendPageEvent(n)};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = 'jira-projects-module/sidebar/analytics/analytics.js' */
!function(e){"use strict";function r(e){return JIRA.Projects.Sidebar.Analytics.Hash.prefixedHash(e||"NONE")}function i(e,r){AJS.trigger("analyticsEvent",{name:"jira.project.centric.navigation.sidebar."+e,data:r})}function o(){return"atl.jira.proj.config"===e('meta[name="admin.active.section"]').attr("content")}function t(e){return n.indexOf([c,e].join("."))!==-1}AJS.namespace("JIRA.Projects.Sidebar.Analytics");var c="proj.config";JIRA.Projects.Sidebar.Analytics=function(a){var s=AJS.sidebar(a),p=e();if(p=p.add(s.$el),p=p.add(s.submenus.inlineDialog),!JIRA.API.Sidebar)throw new Error("Error: cannot start analytics before JIRA.Projects.Sidebar.initAPI is called");JIRA.API.Sidebar.isProjectSidebar()?i("load.project",{projectId:JIRA.API.Projects.getCurrentProjectId(),projectType:JIRA.API.Projects.getCurrentProjectType()}):i("load.global"),p.on("click","a",function(){var a=r(e(this).attr("data-link-id")),s={id:a.hash,prefix:a.prefix},p=AJS.Meta.get("sidebar-source-page");if(p)s.sidebarSourcePage=p;else if(e(".issue-tools button.expand").length>0)s.sidebarSourcePage="search-el";else if(e(".navigation-tools button.collapse").length>0)s.sidebarSourcePage="fullscreen-el";else if(o()){var j=e('meta[name="admin.active.tab"]').attr("content");j=j.replace("com.atlassian.servicedesk.project-ui:",""),t(j)?s.sidebarSourcePage=[c,j].join("."):s.sidebarSourcePage=c}n.indexOf(s.sidebarSourcePage)===-1&&(s.sidebarSourcePage="unknown"),i("click.link",s)})};var n=["search-el","fullscreen-el","search","fullscreen","rapid-board","service-desk","proj.config","proj.config.view_project_summary","proj.config.view_project_issuetypes","proj.config.project-issuetypes-expand","proj.config.view_project_workflows","proj.config.view_project_screens","proj.config.view_project_fields","proj.config.view_project_versions","proj.config.view_project_components","proj.config.view_project_roles","proj.config.view_project_permissions","proj.config.view_project_issuesecurity","proj.config.view_project_notifications","proj.config.devstatus-admin-page-link","proj.config.hipchat-project-admin-page-link","proj.config.view_issue_collectors","proj.config.sd-project-request-types-item","proj.config.sd-project-request-security-item","proj.config.sd-project-portal-settings-item","proj.config.sd-project-feedback-settings-item","proj.config.sd-project-email-settings-item","proj.config.sd-project-confluence-kb-item","proj.config.sd-project-sidebar-sla","proj.config.sd-project-automation-item"]}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-analytics', location = 'jira-projects-module/sidebar/analytics/hash.js' */
!function(){"use strict";function n(n,r){return 0===n.indexOf(r)}function r(r,t){return r.substring(n(r,t)?t.length:0)}function t(n){var r,t=0;if(!n)return"";for(var e=0;e<n.length;e+=1)r=n.charCodeAt(e),t=32*t-t+r,t|=0;return t}AJS.namespace("JIRA.Projects.Sidebar.Analytics");var e=[];JIRA.Projects.Sidebar.Analytics.Hash={prefixedHash:function(i){var a=_.find(e,_.partial(n,i))||"";return{prefix:a,hash:a+t(r(i,a))}},addPrefix:function(n){n&&!_.contains(e,n)&&e.push(n)},clearPrefixes:function(){e.length=0}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-expansion-manager', location = 'jira-projects-module/sidebar/expansion-manager.js' */
!function(){"use strict";var e="jira-sidebar-collapsed";AJS.namespace("JIRA.Projects.Sidebar"),JIRA.Projects.Sidebar.initExpansionManager=function(){var a=Boolean(WRM.data.claim("sidebar-collapsed-by-default"));JIRA.Projects.Sidebar.ExpansionManager=function(n,i){function o(a){a.isResponsive&&"true"===i[e]&&a.preventDefault()}function r(a){a.isResponsive||n.isViewportNarrow()||(i[e]=n.isCollapsed().toString())}function s(){n.reflow()&&n.isViewportNarrow()||(a&&void 0===i[e]||"true"===i[e]?n.collapse():n.expand())}i||(i=window.localStorage),s(),n.on("expand-start",o),n.on("expand-end collapse-end",r)}},JIRA.Projects.Sidebar.initExpansionManager()}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/babel-polyfill.js' */
!function(t,n,r){"use strict";!function(t){function n(e){if(r[e])return r[e].exports;var o=r[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var r={};n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:e})},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=64)}([function(t,n,e){var o=e(9),i=e(23),u=e(18),c=e(32),f=e(27),a=function(t,n,e){var s,l,p,h,v=t&a.F,y=t&a.G,g=t&a.S,b=t&a.P,d=t&a.B,x=y?o:g?o[n]||(o[n]={}):(o[n]||{}).prototype,m=y?i:i[n]||(i[n]={}),O=m.prototype||(m.prototype={});y&&(e=n);for(s in e)l=!v&&x&&x[s]!==r,p=(l?x:e)[s],h=d&&l?f(p,o):b&&"function"==typeof p?f(Function.call,p):p,x&&c(x,s,p,t&a.U),m[s]!=p&&u(m,s,h),b&&O[s]!=p&&(O[s]=p)};o.core=i,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,n,r){var e=r(40)("wks"),o=r(26),i=r(9).Symbol,u="function"==typeof i;(t.exports=function(t){return e[t]||(e[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=e},function(t,n,r){var e=r(16);t.exports=function(t){return Object(e(t))}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,r){var e=r(21),o=Math.min;t.exports=function(t){return t>0?o(e(t),9007199254740991):0}},function(t,n,r){t.exports=!r(6)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,r){var e=r(0),o=r(6),i=r(16),u=/"/g,c=function(t,n,r,e){var o=String(i(t)),c="<"+n;return""!==r&&(c+=" "+r+'="'+String(e).replace(u,"&quot;")+'"'),c+">"+o+"</"+n+">"};t.exports=function(t,n){var r={};r[t]=n(c),e(e.P+e.F*o(function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3}),"String",r)}},function(t,n,r){var e=r(28),o=r(16);t.exports=function(t){return e(o(t))}},function(t,r){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof n&&(n=e)},function(t,n,r){var e=r(15),o=r(51),i=r(24),u=Object.defineProperty;n.f=r(5)?Object.defineProperty:function(t,n,r){if(e(t),n=i(n,!0),e(r),o)try{return u(t,n,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[n]=r.value),t}},function(t,n,r){var e=r(6);t.exports=function(t,n){return!!t&&e(function(){n?t.call(null,function(){},1):t.call(null)})}},function(t,n,r){var e=r(0),o=r(23),i=r(6);t.exports=function(t,n){var r=(o.Object||{})[t]||Object[t],u={};u[t]=n(r),e(e.S+e.F*i(function(){r(1)}),"Object",u)}},function(t,n){var r={}.hasOwnProperty;t.exports=function(t,n){return r.call(t,n)}},function(t,n,e){var o=e(1)("unscopables"),i=Array.prototype;i[o]==r&&e(18)(i,o,{}),t.exports=function(t){i[o][t]=!0}},function(t,n,r){var e=r(3);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){t.exports=function(t){if(t==r)throw TypeError("Can't call method on  "+t);return t}},function(t,n,e){var o=e(27),i=e(28),u=e(2),c=e(4),f=e(50);t.exports=function(t,n){var e=1==t,a=2==t,s=3==t,l=4==t,p=6==t,h=5==t||p,v=n||f;return function(n,f,y){for(var g,b,d=u(n),x=i(d),m=o(f,y,3),O=c(x.length),S=0,j=e?v(n,O):a?v(n,0):r;O>S;S++)if((h||S in x)&&(g=x[S],b=m(g,S,d),t))if(e)j[S]=b;else if(b)switch(t){case 3:return!0;case 5:return g;case 6:return S;case 2:j.push(g)}else if(l)return!1;return p?-1:s||l?l:j}}},function(t,n,r){var e=r(10),o=r(25);t.exports=r(5)?function(t,n,r){return e.f(t,n,o(1,r))}:function(t,n,r){return t[n]=r,t}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,r){var e=r(54),o=r(44);t.exports=Object.keys||function(t){return e(t,o)}},function(t,n){var r=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:r)(t)}},function(t,n,r){var e=r(31),o=r(25),i=r(8),u=r(24),c=r(13),f=r(51),a=Object.getOwnPropertyDescriptor;n.f=r(5)?a:function(t,n){if(t=i(t),n=u(n,!0),f)try{return a(t,n)}catch(t){}if(c(t,n))return o(!e.f.call(t,n),t[n])}},function(n,r){var e=n.exports={version:"2.5.1"};"number"==typeof t&&(t=e)},function(t,n,r){var e=r(3);t.exports=function(t,n){if(!e(t))return t;var r,o;if(n&&"function"==typeof(r=t.toString)&&!e(o=r.call(t)))return o;if("function"==typeof(r=t.valueOf)&&!e(o=r.call(t)))return o;if(!n&&"function"==typeof(r=t.toString)&&!e(o=r.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n){var e=0,o=Math.random();t.exports=function(t){return"Symbol(".concat(t===r?"":t,")_",(++e+o).toString(36))}},function(t,n,e){var o=e(19);t.exports=function(t,n,e){if(o(t),n===r)return t;switch(e){case 1:return function(r){return t.call(n,r)};case 2:return function(r,e){return t.call(n,r,e)};case 3:return function(r,e,o){return t.call(n,r,e,o)}}return function(){return t.apply(n,arguments)}}},function(t,n,r){var e=r(29);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){var r={}.toString;t.exports=function(t){return r.call(t).slice(8,-1)}},function(t,n,r){var e=r(21),o=Math.max,i=Math.min;t.exports=function(t,n){return t=e(t),t<0?o(t+n,0):i(t,n)}},function(t,n){n.f={}.propertyIsEnumerable},function(t,n,r){var e=r(9),o=r(18),i=r(13),u=r(26)("src"),c=Function.toString,f=(""+c).split("toString");r(23).inspectSource=function(t){return c.call(t)},(t.exports=function(t,n,r,c){var a="function"==typeof r;a&&(i(r,"name")||o(r,"name",n)),t[n]!==r&&(a&&(i(r,u)||o(r,u,t[n]?""+t[n]:f.join(String(n)))),t===e?t[n]=r:c?t[n]?t[n]=r:o(t,n,r):(delete t[n],o(t,n,r)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[u]||c.call(this)})},function(t,n,r){var e=r(26)("meta"),o=r(3),i=r(13),u=r(10).f,c=0,f=Object.isExtensible||function(){return!0},a=!r(6)(function(){return f(Object.preventExtensions({}))}),s=function(t){u(t,e,{value:{i:"O"+ ++c,w:{}}})},l=function(t,n){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,e)){if(!f(t))return"F";if(!n)return"E";s(t)}return t[e].i},p=function(t,n){if(!i(t,e)){if(!f(t))return!0;if(!n)return!1;s(t)}return t[e].w},h=function(t){return a&&v.NEED&&f(t)&&!i(t,e)&&s(t),t},v=t.exports={KEY:e,NEED:!1,fastKey:l,getWeak:p,onFreeze:h}},function(t,n){t.exports=!1},function(t,n){n.f=Object.getOwnPropertySymbols},function(t,n,r){var e=r(29);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,r){var e=r(13),o=r(2),i=r(43)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),e(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,n){t.exports={}},function(t,n,r){t.exports=r(34)||!r(6)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete r(9)[t]})},function(t,n,r){var e=r(9),o=e["__core-js_shared__"]||(e["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,n,r){var e=r(10).f,o=r(13),i=r(1)("toStringTag");t.exports=function(t,n,r){t&&!o(t=r?t:t.prototype,i)&&e(t,i,{configurable:!0,value:n})}},function(t,n,r){var e=r(8),o=r(4),i=r(30);t.exports=function(t){return function(n,r,u){var c,f=e(n),a=o(f.length),s=i(u,a);if(t&&r!=r){for(;a>s;)if((c=f[s++])!=c)return!0}else for(;a>s;s++)if((t||s in f)&&f[s]===r)return t||s||0;return!t&&-1}}},function(t,n,r){var e=r(40)("keys"),o=r(26);t.exports=function(t){return e[t]||(e[t]=o(t))}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,e){var o=e(15),i=e(55),u=e(44),c=e(43)("IE_PROTO"),f=function(){},a=function(){var t,n=e(52)("iframe"),r=u.length;for(n.style.display="none",e(56).appendChild(n),n.src="javascript:",t=n.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),a=t.F;r--;)delete a.prototype[u[r]];return a()};t.exports=Object.create||function(t,n){var e;return null!==t?(f.prototype=o(t),e=new f,f.prototype=null,e[c]=t):e=a(),n===r?e:i(e,n)}},function(t,n,r){var e=r(54),o=r(44).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,o)}},function(t,n,r){var e=r(95),o=r(16);t.exports=function(t,n,r){if(e(n))throw TypeError("String#"+r+" doesn't accept regex!");return String(o(t))}},function(t,n,r){var e=r(1)("match");t.exports=function(t){var n=/./;try{"/./"[t](n)}catch(r){try{return n[e]=!1,!"/./"[t](n)}catch(t){}}return!0}},function(t,n,r){var e=r(10),o=r(25);t.exports=function(t,n,r){n in t?e.f(t,n,o(0,r)):t[n]=r}},function(t,n,r){var e=r(126);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,r){t.exports=!r(5)&&!r(6)(function(){return 7!=Object.defineProperty(r(52)("div"),"a",{get:function(){return 7}}).a})},function(t,n,r){var e=r(3),o=r(9).document,i=e(o)&&e(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,n,r){n.f=r(1)},function(t,n,r){var e=r(13),o=r(8),i=r(42)(!1),u=r(43)("IE_PROTO");t.exports=function(t,n){var r,c=o(t),f=0,a=[];for(r in c)r!=u&&e(c,r)&&a.push(r);for(;n.length>f;)e(c,r=n[f++])&&(~i(a,r)||a.push(r));return a}},function(t,n,r){var e=r(10),o=r(15),i=r(20);t.exports=r(5)?Object.defineProperties:function(t,n){o(t);for(var r,u=i(n),c=u.length,f=0;c>f;)e.f(t,r=u[f++],n[r]);return t}},function(t,n,r){var e=r(9).document;t.exports=e&&e.documentElement},function(t,n,r){var e=r(8),o=r(46).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],c=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?c(t):o(e(t))}},function(t,n,e){var o=e(29),i=e(1)("toStringTag"),u="Arguments"==o(function(){return arguments}()),c=function(t,n){try{return t[n]}catch(t){}};t.exports=function(t){var n,e,f;return t===r?"Undefined":null===t?"Null":"string"==typeof(e=c(n=Object(t),i))?e:u?o(n):"Object"==(f=o(n))&&"function"==typeof n.callee?"Arguments":f}},function(t,n,e){var o=e(21),i=e(16);t.exports=function(t){return function(n,e){var u,c,f=String(i(n)),a=o(e),s=f.length;return a<0||a>=s?t?"":r:(u=f.charCodeAt(a),u<55296||u>56319||a+1===s||(c=f.charCodeAt(a+1))<56320||c>57343?t?f.charAt(a):u:t?f.slice(a,a+2):c-56320+(u-55296<<10)+65536)}}},function(t,n,e){var o=e(34),i=e(0),u=e(32),c=e(18),f=e(13),a=e(38),s=e(101),l=e(41),p=e(37),h=e(1)("iterator"),v=!([].keys&&"next"in[].keys()),y=function(){return this};t.exports=function(t,n,e,g,b,d,x){s(e,n,g);var m,O,S,j=function(t){if(!v&&t in A)return A[t];switch(t){case"keys":case"values":return function(){return new e(this,t)}}return function(){return new e(this,t)}},P=n+" Iterator",w="values"==b,_=!1,A=t.prototype,F=A[h]||A["@@iterator"]||b&&A[b],E=F||j(b),k=b?w?j("entries"):E:r,M="Array"==n?A.entries||F:F;if(M&&(S=p(M.call(new t)))!==Object.prototype&&S.next&&(l(S,P,!0),o||f(S,h)||c(S,h,y)),w&&F&&"values"!==F.name&&(_=!0,E=function(){return F.call(this)}),o&&!x||!v&&!_&&A[h]||c(A,h,E),a[n]=E,a[P]=y,b)if(m={values:w?E:j("values"),keys:d?E:j("keys"),entries:k},x)for(O in m)O in A||u(A,O,m[O]);else i(i.P+i.F*(v||_),n,m);return m}},function(t,n,r){var e=r(19),o=r(2),i=r(28),u=r(4);t.exports=function(t,n,r,c,f){e(n);var a=o(t),s=i(a),l=u(a.length),p=f?l-1:0,h=f?-1:1;if(r<2)for(;;){if(p in s){c=s[p],p+=h;break}if(p+=h,f?p<0:l<=p)throw TypeError("Reduce of empty array with no initial value")}for(;f?p>=0:l>p;p+=h)p in s&&(c=n(c,s[p],p,a));return c}},function(t,n,e){function o(t,n,e,s,l,p,h,v){for(var y,g,b=l,d=0,x=!!h&&f(h,v,3);d<s;){if(d in e){if(y=x?x(e[d],d,n):e[d],g=!1,u(y)&&(g=y[a],g=g!==r?!!g:i(y)),g&&p>0)b=o(t,n,y,c(y.length),b,p-1)-1;else{if(b>=9007199254740991)throw TypeError();t[b]=y}b++}d++}return b}var i=e(36),u=e(3),c=e(4),f=e(27),a=e(1)("isConcatSpreadable");t.exports=o},function(t,n,r){var e=r(20),o=r(8),i=r(31).f;t.exports=function(t){return function(n){for(var r,u=o(n),c=e(u),f=c.length,a=0,s=[];f>a;)i.call(u,r=c[a++])&&s.push(t?[r,u[r]]:u[r]);return s}}},function(t,n,r){r(65),r(68),r(69),r(70),r(71),r(72),r(73),r(74),r(75),r(76),r(77),r(78),r(79),r(80),r(81),r(83),r(85),r(87),r(88),r(89),r(90),r(93),r(94),r(96),r(97),r(99),r(100),r(102),r(103),r(104),r(105),r(106),r(107),r(108),r(109),r(110),r(111),r(112),r(113),r(114),r(115),r(116),r(121),r(122),r(123),r(124),r(125),r(127),r(128),r(129),r(130),r(131),r(132),r(133),r(134),r(135),r(137),r(139),r(140),r(141),r(143),r(145),r(146),r(147),r(148),r(150),r(151),r(152),r(153),r(154),t.exports=r(155)},function(t,n,e){var o=e(9),i=e(13),u=e(5),c=e(0),f=e(32),a=e(33).KEY,s=e(6),l=e(40),p=e(41),h=e(26),v=e(1),y=e(53),g=e(66),b=e(67),d=e(36),x=e(15),m=e(8),O=e(24),S=e(25),j=e(45),P=e(57),w=e(22),_=e(10),A=e(20),F=w.f,E=_.f,k=P.f,M=o.Symbol,T=o.JSON,I=T&&T.stringify,W=v("_hidden"),C=v("toPrimitive"),N={}.propertyIsEnumerable,R=l("symbol-registry"),z=l("symbols"),D=l("op-symbols"),G=Object.prototype,J="function"==typeof M,K=o.QObject,U=!K||!K.prototype||!K.prototype.findChild,q=u&&s(function(){return 7!=j(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(t,n,r){var e=F(G,n);e&&delete G[n],E(t,n,r),e&&t!==G&&E(G,n,e)}:E,B=function(t){var n=z[t]=j(M.prototype);return n._k=t,n},L=J&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},Y=function(t,n,r){return t===G&&Y(D,n,r),x(t),n=O(n,!0),x(r),i(z,n)?(r.enumerable?(i(t,W)&&t[W][n]&&(t[W][n]=!1),r=j(r,{enumerable:S(0,!1)})):(i(t,W)||E(t,W,S(1,{})),t[W][n]=!0),q(t,n,r)):E(t,n,r)},Q=function(t,n){x(t);for(var r,e=b(n=m(n)),o=0,i=e.length;i>o;)Y(t,r=e[o++],n[r]);return t},$=function(t,n){return n===r?j(t):Q(j(t),n)},H=function(t){var n=N.call(this,t=O(t,!0));return!(this===G&&i(z,t)&&!i(D,t))&&(!(n||!i(this,t)||!i(z,t)||i(this,W)&&this[W][t])||n)},V=function(t,n){if(t=m(t),n=O(n,!0),t!==G||!i(z,n)||i(D,n)){var r=F(t,n);return!r||!i(z,n)||i(t,W)&&t[W][n]||(r.enumerable=!0),r}},X=function(t){for(var n,r=k(m(t)),e=[],o=0;r.length>o;)i(z,n=r[o++])||n==W||n==a||e.push(n);return e},Z=function(t){for(var n,r=t===G,e=k(r?D:m(t)),o=[],u=0;e.length>u;)!i(z,n=e[u++])||r&&!i(G,n)||o.push(z[n]);return o};J||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:r),n=function(r){this===G&&n.call(D,r),i(this,W)&&i(this[W],t)&&(this[W][t]=!1),q(this,t,S(1,r))};return u&&U&&q(G,t,{configurable:!0,set:n}),B(t)},f(M.prototype,"toString",function(){return this._k}),w.f=V,_.f=Y,e(46).f=P.f=X,e(31).f=H,e(35).f=Z,u&&!e(34)&&f(G,"propertyIsEnumerable",H,!0),y.f=function(t){return B(v(t))}),c(c.G+c.W+c.F*!J,{Symbol:M});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;tt.length>nt;)v(tt[nt++]);for(var rt=A(v.store),et=0;rt.length>et;)g(rt[et++]);c(c.S+c.F*!J,"Symbol",{for:function(t){return i(R,t+="")?R[t]:R[t]=M(t)},keyFor:function(t){if(!L(t))throw TypeError(t+" is not a symbol!");for(var n in R)if(R[n]===t)return n},useSetter:function(){U=!0},useSimple:function(){U=!1}}),c(c.S+c.F*!J,"Object",{create:$,defineProperty:Y,defineProperties:Q,getOwnPropertyDescriptor:V,getOwnPropertyNames:X,getOwnPropertySymbols:Z}),T&&c(c.S+c.F*(!J||s(function(){var t=M();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){if(t!==r&&!L(t)){for(var n,e,o=[t],i=1;arguments.length>i;)o.push(arguments[i++]);return n=o[1],"function"==typeof n&&(e=n),!e&&d(n)||(n=function(t,n){if(e&&(n=e.call(this,t,n)),!L(n))return n}),o[1]=n,I.apply(T,o)}}}),M.prototype[C]||e(18)(M.prototype,C,M.prototype.valueOf),p(M,"Symbol"),p(Math,"Math",!0),p(o.JSON,"JSON",!0)},function(t,n,r){var e=r(9),o=r(23),i=r(34),u=r(53),c=r(10).f;t.exports=function(t){var n=o.Symbol||(o.Symbol=i?{}:e.Symbol||{});"_"==t.charAt(0)||t in n||c(n,t,{value:u.f(t)})}},function(t,n,r){var e=r(20),o=r(35),i=r(31);t.exports=function(t){var n=e(t),r=o.f;if(r)for(var u,c=r(t),f=i.f,a=0;c.length>a;)f.call(t,u=c[a++])&&n.push(u);return n}},function(t,n,r){var e=r(0);e(e.S+e.F*!r(5),"Object",{defineProperty:r(10).f})},function(t,n,r){var e=r(0);e(e.S+e.F*!r(5),"Object",{defineProperties:r(55)})},function(t,n,r){var e=r(8),o=r(22).f;r(12)("getOwnPropertyDescriptor",function(){return function(t,n){return o(e(t),n)}})},function(t,n,r){var e=r(0);e(e.S,"Object",{create:r(45)})},function(t,n,r){var e=r(2),o=r(37);r(12)("getPrototypeOf",function(){return function(t){return o(e(t))}})},function(t,n,r){var e=r(2),o=r(20);r(12)("keys",function(){return function(t){return o(e(t))}})},function(t,n,r){r(12)("getOwnPropertyNames",function(){return r(57).f})},function(t,n,r){var e=r(3),o=r(33).onFreeze;r(12)("freeze",function(t){return function(n){return t&&e(n)?t(o(n)):n}})},function(t,n,r){var e=r(3),o=r(33).onFreeze;r(12)("seal",function(t){return function(n){return t&&e(n)?t(o(n)):n}})},function(t,n,r){var e=r(3),o=r(33).onFreeze;r(12)("preventExtensions",function(t){return function(n){return t&&e(n)?t(o(n)):n}})},function(t,n,r){var e=r(3);r(12)("isFrozen",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(3);r(12)("isSealed",function(t){return function(n){return!e(n)||!!t&&t(n)}})},function(t,n,r){var e=r(3);r(12)("isExtensible",function(t){return function(n){return!!e(n)&&(!t||t(n))}})},function(t,n,r){var e=r(0);e(e.S+e.F,"Object",{assign:r(82)})},function(t,n,r){var e=r(20),o=r(35),i=r(31),u=r(2),c=r(28),f=Object.assign;t.exports=!f||r(6)(function(){var t={},n={},r=Symbol(),e="abcdefghijklmnopqrst";return t[r]=7,e.split("").forEach(function(t){n[t]=t}),7!=f({},t)[r]||Object.keys(f({},n)).join("")!=e})?function(t,n){for(var r=u(t),f=arguments.length,a=1,s=o.f,l=i.f;f>a;)for(var p,h=c(arguments[a++]),v=s?e(h).concat(s(h)):e(h),y=v.length,g=0;y>g;)l.call(h,p=v[g++])&&(r[p]=h[p]);return r}:f},function(t,n,r){var e=r(0);e(e.S,"Object",{is:r(84)})},function(t,n){t.exports=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(0);e(e.S,"Object",{setPrototypeOf:r(86).set})},function(t,n,e){var o=e(3),i=e(15),u=function(t,n){if(i(t),!o(n)&&null!==n)throw TypeError(n+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{r=e(27)(Function.call,e(22).f(Object.prototype,"__proto__").set,2),r(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return u(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):r),check:u}},function(t,n,r){var e=r(58),o={};o[r(1)("toStringTag")]="z",o+""!="[object z]"&&r(32)(Object.prototype,"toString",function(){return"[object "+e(this)+"]"},!0)},function(t,n,r){var e=r(0),o=r(30),i=String.fromCharCode,u=String.fromCodePoint;e(e.S+e.F*(!!u&&1!=u.length),"String",{fromCodePoint:function(t){for(var n,r=[],e=arguments.length,u=0;e>u;){if(n=+arguments[u++],o(n,1114111)!==n)throw RangeError(n+" is not a valid code point");r.push(n<65536?i(n):i(55296+((n-=65536)>>10),n%1024+56320))}return r.join("")}})},function(t,n,r){var e=r(0),o=r(8),i=r(4);e(e.S,"String",{raw:function(t){for(var n=o(t.raw),r=i(n.length),e=arguments.length,u=[],c=0;r>c;)u.push(String(n[c++])),c<e&&u.push(String(arguments[c]));return u.join("")}})},function(t,n,r){r(91)("trim",function(t){return function(){return t(this,3)}})},function(t,n,r){var e=r(0),o=r(16),i=r(6),u=r(92),c="["+u+"]",f="",a=RegExp("^"+c+c+"*"),s=RegExp(c+c+"*$"),l=function(t,n,r){var o={},c=i(function(){return!!u[t]()||f[t]()!=f}),a=o[t]=c?n(p):u[t];r&&(o[r]=a),e(e.P+e.F*c,"String",o)},p=l.trim=function(t,n){return t=String(o(t)),1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(s,"")),t};t.exports=l},function(t,n){t.exports="\t\n\v\f\r \u2028\u2029\ufeff"},function(t,n,r){var e=r(0),o=r(59)(!1);e(e.P,"String",{codePointAt:function(t){return o(this,t)}})},function(t,n,e){var o=e(0),i=e(4),u=e(47),c="".endsWith;o(o.P+o.F*e(48)("endsWith"),"String",{endsWith:function(t){var n=u(this,t,"endsWith"),e=arguments.length>1?arguments[1]:r,o=i(n.length),f=e===r?o:Math.min(i(e),o),a=String(t);return c?c.call(n,a,f):n.slice(f-a.length,f)===a}})},function(t,n,e){var o=e(3),i=e(29),u=e(1)("match");t.exports=function(t){var n;return o(t)&&((n=t[u])!==r?!!n:"RegExp"==i(t))}},function(t,n,e){var o=e(0),i=e(47);o(o.P+o.F*e(48)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:r)}})},function(t,n,r){var e=r(0);e(e.P,"String",{repeat:r(98)})},function(t,n,r){var e=r(21),o=r(16);t.exports=function(t){var n=String(o(this)),r="",i=e(t);if(i<0||i==1/0)throw RangeError("Count can't be negative");for(;i>0;(i>>>=1)&&(n+=n))1&i&&(r+=n);return r}},function(t,n,e){var o=e(0),i=e(4),u=e(47),c="".startsWith;o(o.P+o.F*e(48)("startsWith"),"String",{startsWith:function(t){var n=u(this,t,"startsWith"),e=i(Math.min(arguments.length>1?arguments[1]:r,n.length)),o=String(t);return c?c.call(n,o,e):n.slice(e,e+o.length)===o}})},function(t,n,e){var o=e(59)(!0);e(60)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:r,done:!0}:(t=o(n,e),this._i+=t.length,{value:t,done:!1})})},function(t,n,r){var e=r(45),o=r(25),i=r(41),u={};r(18)(u,r(1)("iterator"),function(){return this}),t.exports=function(t,n,r){t.prototype=e(u,{next:o(1,r)}),i(t,n+" Iterator")}},function(t,n,r){r(7)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},function(t,n,r){r(7)("big",function(t){return function(){return t(this,"big","","")}})},function(t,n,r){r(7)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,n,r){r(7)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,n,r){r(7)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,n,r){r(7)("fontcolor",function(t){return function(n){return t(this,"font","color",n)}})},function(t,n,r){r(7)("fontsize",function(t){return function(n){return t(this,"font","size",n)}})},function(t,n,r){r(7)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,n,r){r(7)("link",function(t){return function(n){return t(this,"a","href",n)}})},function(t,n,r){r(7)("small",function(t){return function(){return t(this,"small","","")}})},function(t,n,r){r(7)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,n,r){r(7)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,n,r){r(7)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,n,r){var e=r(0);e(e.S,"Array",{isArray:r(36)})},function(t,n,e){var o=e(27),i=e(0),u=e(2),c=e(117),f=e(118),a=e(4),s=e(49),l=e(119);i(i.S+i.F*!e(120)(function(t){Array.from(t)}),"Array",{from:function(t){var n,e,i,p,h=u(t),v="function"==typeof this?this:Array,y=arguments.length,g=y>1?arguments[1]:r,b=g!==r,d=0,x=l(h);if(b&&(g=o(g,y>2?arguments[2]:r,2)),x==r||v==Array&&f(x))for(n=a(h.length),e=new v(n);n>d;d++)s(e,d,b?g(h[d],d):h[d]);else for(p=x.call(h),e=new v;!(i=p.next()).done;d++)s(e,d,b?c(p,g,[i.value,d],!0):i.value);return e.length=d,e}})},function(t,n,e){var o=e(15);t.exports=function(t,n,e,i){try{return i?n(o(e)[0],e[1]):n(e)}catch(n){var u=t.return;throw u!==r&&o(u.call(t)),n}}},function(t,n,e){var o=e(38),i=e(1)("iterator"),u=Array.prototype;t.exports=function(t){return t!==r&&(o.Array===t||u[i]===t)}},function(t,n,e){var o=e(58),i=e(1)("iterator"),u=e(38);t.exports=e(23).getIteratorMethod=function(t){if(t!=r)return t[i]||t["@@iterator"]||u[o(t)]}},function(t,n,r){var e=r(1)("iterator"),o=!1;try{var i=[7][e]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,n){if(!n&&!o)return!1;var r=!1;try{var i=[7],u=i[e]();u.next=function(){return{done:r=!0}},i[e]=function(){return u},t(i)}catch(t){}return r}},function(t,n,r){var e=r(0),o=r(49);e(e.S+e.F*r(6)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,n=arguments.length,r=new("function"==typeof this?this:Array)(n);n>t;)o(r,t,arguments[t++]);return r.length=n,r}})},function(t,n,e){var o=e(0),i=e(8),u=[].join;o(o.P+o.F*(e(28)!=Object||!e(11)(u)),"Array",{join:function(t){return u.call(i(this),t===r?",":t)}})},function(t,n,e){var o=e(0),i=e(56),u=e(29),c=e(30),f=e(4),a=[].slice;o(o.P+o.F*e(6)(function(){i&&a.call(i)}),"Array",{slice:function(t,n){var e=f(this.length),o=u(this);if(n=n===r?e:n,"Array"==o)return a.call(this,t,n);for(var i=c(t,e),s=c(n,e),l=f(s-i),p=Array(l),h=0;h<l;h++)p[h]="String"==o?this.charAt(i+h):this[i+h];return p}})},function(t,n,e){var o=e(0),i=e(19),u=e(2),c=e(6),f=[].sort,a=[1,2,3];o(o.P+o.F*(c(function(){a.sort(r)})||!c(function(){a.sort(null)})||!e(11)(f)),"Array",{sort:function(t){return t===r?f.call(u(this)):f.call(u(this),i(t))}})},function(t,n,r){var e=r(0),o=r(17)(0),i=r(11)([].forEach,!0);e(e.P+e.F*!i,"Array",{forEach:function(t){return o(this,t,arguments[1])}})},function(t,n,e){var o=e(3),i=e(36),u=e(1)("species");t.exports=function(t){var n;return i(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)||(n=r),o(n)&&null===(n=n[u])&&(n=r)),n===r?Array:n}},function(t,n,r){var e=r(0),o=r(17)(1);e(e.P+e.F*!r(11)([].map,!0),"Array",{map:function(t){return o(this,t,arguments[1])}})},function(t,n,r){var e=r(0),o=r(17)(2);e(e.P+e.F*!r(11)([].filter,!0),"Array",{filter:function(t){return o(this,t,arguments[1])}})},function(t,n,r){var e=r(0),o=r(17)(3);e(e.P+e.F*!r(11)([].some,!0),"Array",{some:function(t){return o(this,t,arguments[1])}})},function(t,n,r){var e=r(0),o=r(17)(4);e(e.P+e.F*!r(11)([].every,!0),"Array",{every:function(t){return o(this,t,arguments[1])}})},function(t,n,r){var e=r(0),o=r(61);e(e.P+e.F*!r(11)([].reduce,!0),"Array",{reduce:function(t){return o(this,t,arguments.length,arguments[1],!1)}})},function(t,n,r){var e=r(0),o=r(61);e(e.P+e.F*!r(11)([].reduceRight,!0),"Array",{reduceRight:function(t){return o(this,t,arguments.length,arguments[1],!0)}})},function(t,n,r){var e=r(0),o=r(42)(!1),i=[].indexOf,u=!!i&&1/[1].indexOf(1,-0)<0;e(e.P+e.F*(u||!r(11)(i)),"Array",{indexOf:function(t){return u?i.apply(this,arguments)||0:o(this,t,arguments[1])}})},function(t,n,r){var e=r(0),o=r(8),i=r(21),u=r(4),c=[].lastIndexOf,f=!!c&&1/[1].lastIndexOf(1,-0)<0;e(e.P+e.F*(f||!r(11)(c)),"Array",{lastIndexOf:function(t){if(f)return c.apply(this,arguments)||0;var n=o(this),r=u(n.length),e=r-1;for(arguments.length>1&&(e=Math.min(e,i(arguments[1]))),e<0&&(e=r+e);e>=0;e--)if(e in n&&n[e]===t)return e||0;return-1}})},function(t,n,r){var e=r(0);e(e.P,"Array",{copyWithin:r(136)}),r(14)("copyWithin")},function(t,n,e){var o=e(2),i=e(30),u=e(4);t.exports=[].copyWithin||function(t,n){var e=o(this),c=u(e.length),f=i(t,c),a=i(n,c),s=arguments.length>2?arguments[2]:r,l=Math.min((s===r?c:i(s,c))-a,c-f),p=1;for(a<f&&f<a+l&&(p=-1,a+=l-1,f+=l-1);l-- >0;)a in e?e[f]=e[a]:delete e[f],f+=p,a+=p;return e}},function(t,n,r){var e=r(0);e(e.P,"Array",{fill:r(138)}),r(14)("fill")},function(t,n,e){var o=e(2),i=e(30),u=e(4);t.exports=function(t){for(var n=o(this),e=u(n.length),c=arguments.length,f=i(c>1?arguments[1]:r,e),a=c>2?arguments[2]:r,s=a===r?e:i(a,e);s>f;)n[f++]=t;return n}},function(t,n,e){var o=e(0),i=e(17)(5),u=!0;"find"in[]&&Array(1).find(function(){u=!1}),o(o.P+o.F*u,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:r)}}),e(14)("find")},function(t,n,e){var o=e(0),i=e(17)(6),u="findIndex",c=!0;u in[]&&Array(1)[u](function(){c=!1}),o(o.P+o.F*c,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:r)}}),e(14)(u)},function(t,n,e){var o=e(14),i=e(142),u=e(38),c=e(8);t.exports=e(60)(Array,"Array",function(t,n){this._t=c(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=r,i(1)):"keys"==n?i(0,e):"values"==n?i(0,t[e]):i(0,[e,t[e]])},"values"),u.Arguments=u.Array,o("keys"),o("values"),o("entries")},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,r){r(144)("Array")},function(t,n,r){var e=r(9),o=r(10),i=r(5),u=r(1)("species");t.exports=function(t){var n=e[t];i&&n&&!n[u]&&o.f(n,u,{configurable:!0,get:function(){return this}})}},function(t,n,e){var o=e(0),i=e(42)(!0);o(o.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:r)}}),e(14)("includes")},function(t,n,r){var e=r(0),o=r(62),i=r(2),u=r(4),c=r(19),f=r(50);e(e.P,"Array",{flatMap:function(t){var n,r,e=i(this);return c(t),n=u(e.length),r=f(e,0),o(r,e,e,n,0,1,t,arguments[1]),r}}),r(14)("flatMap")},function(t,n,e){var o=e(0),i=e(62),u=e(2),c=e(4),f=e(21),a=e(50);o(o.P,"Array",{flatten:function(){var t=arguments[0],n=u(this),e=c(n.length),o=a(n,0);return i(o,n,n,e,0,t===r?1:f(t)),o}}),e(14)("flatten")},function(t,n,e){var o=e(0),i=e(149),u=e(8),c=e(22),f=e(49);o(o.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,e,o=u(t),a=c.f,s=i(o),l={},p=0;s.length>p;)(e=a(o,n=s[p++]))!==r&&f(l,n,e);return l}})},function(t,n,r){var e=r(46),o=r(35),i=r(15),u=r(9).Reflect;t.exports=u&&u.ownKeys||function(t){var n=e.f(i(t)),r=o.f;return r?n.concat(r(t)):n}},function(t,n,r){var e=r(0),o=r(63)(!1);e(e.S,"Object",{values:function(t){return o(t)}})},function(t,n,r){var e=r(0),o=r(63)(!0);e(e.S,"Object",{entries:function(t){return o(t)}})},function(t,n,r){var e=r(0),o=r(2),i=r(19),u=r(10);r(5)&&e(e.P+r(39),"Object",{__defineGetter__:function(t,n){u.f(o(this),t,{get:i(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(0),o=r(2),i=r(19),u=r(10);r(5)&&e(e.P+r(39),"Object",{__defineSetter__:function(t,n){u.f(o(this),t,{set:i(n),enumerable:!0,configurable:!0})}})},function(t,n,r){var e=r(0),o=r(2),i=r(24),u=r(37),c=r(22).f;r(5)&&e(e.P+r(39),"Object",{__lookupGetter__:function(t){var n,r=o(this),e=i(t,!0);do{if(n=c(r,e))return n.get}while(r=u(r))}})},function(t,n,r){var e=r(0),o=r(2),i=r(24),u=r(37),c=r(22).f;r(5)&&e(e.P+r(39),"Object",{__lookupSetter__:function(t){var n,r=o(this),e=i(t,!0);do{if(n=c(r,e))return n.set}while(r=u(r))}})}]),"undefined"!=typeof module&&module.exports?module.exports=t:"function"==typeof define&&define.amd?define(function(){return t}):n.core=t}(1,1);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/lib/amd-shim/underscore.js' */
define("_",function(){return window._});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/lib/setFocus.js' */
JIRA.setFocus=function(){var e="form.dont-default-focus",t="input:not(#issue-filter-submit), select, textarea, button, a.cancel",n=["div.aui-popup-content:visible","form.aui:visible","form:visible"],o=[],i=function(e,t,n,o){var i=!1;return AJS.$(t,e).not(n).find(o).each(function(){var e=AJS.$(this);if(e.is(":visible:enabled, a:visible"))return e.focus(),e.is(":text, :password, textarea")&&(e.is(".focus-select-end")?e.setCaretToPosition(e[0].value.length):e.setSelectionRange(0,e[0].value.length)),i=!0,!1}),i},s=function(){for(var e=0,t=o[o.length-1];!i(t.context,t.parentElementSelectors[e],t.excludeParentSelector,t.focusElementSelector)&&e<t.parentElementSelectors.length;)e++};return{FocusConfiguration:function(){this.context=document,this.excludeParentSelector=e,this.focusElementSelector=t,this.parentElementSelectors=n.slice(0),this.focusNow=s},triggerFocus:function(){0==o.length&&o.push(new this.FocusConfiguration),o[o.length-1].focusNow()},pushConfiguration:function(e){o.push(e)},popConfiguration:function(){o.pop()}}}(),jQuery(function(){JIRA.setFocus.triggerFocus()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/Namespaces.js' */
"undefined"==typeof GH&&(window.GH={}),"undefined"==typeof GH.view&&(GH.view={}),"undefined"==typeof GH.view.model&&(GH.view.model={}),"undefined"==typeof GH.Global&&(GH.Global={}),"undefined"==typeof GH.Dialog&&(GH.Dialog={}),"undefined"==typeof GH.Dialogs&&(GH.Dialogs={}),"undefined"==typeof GH.State&&(GH.State={}),"undefined"==typeof GH.XBoard&&(GH.XBoard={}),"undefined"==typeof GH.RapidBoard&&(GH.RapidBoard={}),"undefined"==typeof GH.HelpPaths&&(GH.HelpPaths={}),"undefined"==typeof GH.JQLAutoComplete&&(GH.JQLAutoComplete={}),"undefined"==typeof GH.RapidBoard.Util&&(GH.RapidBoard.Util={}),"undefined"==typeof GH.NumberFormat&&(GH.NumberFormat={}),"undefined"==typeof GH.UrlFormat&&(GH.UrlFormat={}),AJS.format=function(e){var t=/'(?!')/g,n=/^\d+$/,r=/^(\d+),number$/,a=/^(\d+),choice,(.+)/,o=/^\s*(-?\d+)([#<])(.*)/,i=function(e,t){var i,f,d="";if(i=e.match(n))d=t.length>++e?t[e]:"";else if(i=e.match(r))f=GH.NumberFormat&&GH.NumberFormat.format||_.identity,d=t.length>++i[1]?f(t[i[1]]):"";else if(i=e.match(a)){var l=t.length>++i[1]?t[i[1]]:null;if(null!==l){for(var u=i[2].split("|"),p=null,G=0;G<u.length;G++){var H=u[G].match(o);if(!H){console.log("Bad formatting of message: "+e);break}var s=parseInt(H[1],10);if(l<s){if(p){d=p;break}d=H[3];break}if(l==s&&"#"==H[2]){d=H[3];break}G==u.length-1&&(d=H[3]),p=H[3]}var m=[d].concat(Array.prototype.slice.call(t,1));d=AJS.format.apply(AJS,m)}}return d},f=function(e){for(var t=!1,n=-1,r=0,a=0;a<e.length;a++){var o=e.charAt(a);if("'"==o&&(t=!t),!t)if("{"===o)0===r&&(n=a),r++;else if("}"===o&&r>0&&(r--,0===r)){var i=[];return i.push(e.substring(0,a+1)),i.push(e.substring(0,n)),i.push(e.substring(n+1,a)),i}}return null},d=function(e){for(var n=arguments,r="",a=f(e);a;)e=e.substring(a[0].length),r+=a[1].replace(t,""),r+=i(a[2],n),a=f(e);return r+=e.replace(t,"")};return d.apply(AJS,arguments)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/SimpleClick.js' */
!function(){"use strict";var e=require("jquery");e.event.special.simpleClick={add:function(c){c._clickHandler=function(e){if(!e.ctrlKey&&!e.metaKey&&!e.shiftKey)return c.handler.apply(this,arguments)},e(this).on("click",c.selector,c._clickHandler)},remove:function(c){e(this).off("click",c.selector,c._clickHandler)}}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/PromiseKeeper.js' */
!function(){"use strict";var n=require("jquery"),t=function i(t){return this instanceof i?(this._parent=t,this._doneCallbacks=n.Callbacks(),this._failCallbacks=n.Callbacks(),void(this._alwaysCallbacks=n.Callbacks())):new i};t.prototype={add:function(t){var i=n.Deferred();i.original=t;var e=this._getPending();this._abortIfPending(e),this._setPending(i);var a=this;return t.done(function(){i===a._getPending()&&(i.resolveWith(a,arguments),a._doneCallbacks.fireWith(a,arguments))}),t.fail(function(){i===a._getPending()&&(i.rejectWith(a,arguments),a._failCallbacks.fireWith(a,arguments))}),t.always(function(){i===a._getPending()&&a._alwaysCallbacks.fireWith(a,arguments)}),i.promise()},done:function(n){return this._doneCallbacks.add(n),this},fail:function(n){return this._failCallbacks.add(n),this},always:function(n){return this._alwaysCallbacks.add(n),this},reset:function(){this._abortIfPending(this._getPending()),this._setPending(null)},sub:function(){return new t(this)},_getPending:function(){return this._parent?this._parent._getPending():this._pending},_setPending:function(n){this._parent?this._parent._setPending(n):this._pending=n},_abortIfPending:function(t){t&&"pending"===t.state()&&(t.reject("abort"),n.isFunction(t.original.abort)&&t.original.abort())}},GH.PromiseKeeper=t}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/configuration/SPConfig.js' */
define("jira-agile/rapid/ui/SPConfig",[],function(){return Object.freeze({USE_STORED_TAB:"default",INITIAL_TAB:"filter",PARAM_NAME:"config"})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/state/State.js' */
var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e};!function(){"use strict";var e=require("jira/container-api"),t=require("jira/featureflags/feature-manager"),a=t.isFeatureEnabled("endeavour.rapidboard.pretty-url");GH.State.push=function(t,a){var r=GH.State.toUri(t);if("undefined"==typeof a&&(a=document.title),GH.spa){var i=AJS.parseUri(r).relative;GH.spa.history.push(i,t)}a&&e.titleChange(a),AJS.$(AJS).trigger("gh.virtualpageview")},GH.State.replace=function(t,a){var r=GH.State.toUri(t);if("undefined"==typeof a&&(a=document.title),GH.spa){var i=AJS.parseUri(r).relative;GH.spa.history.replace(i,t)}a&&e.titleChange(a)},GH.State.getViewState=function(){return t.isFeatureEnabled("jsw.classic.reuse-redundant-libs")?{}:History.getState().data},GH.State.getHashParams=function(){var e=window.location.href;return!(e.indexOf("#")<0)&&GH.State.toViewState(e)},GH.State.toViewState=function(e){if(e.lastIndexOf("?")<0&&!a)return{};var t=GH.State.getStateFromUri(e);return delete t._suid,t},GH.State.toUri=function(e){var t=AJS.parseUri(document.location.href);if(t.anchor="",a){var r=GH.RapidBoard.UrlState.getNormalizedRapidBoardState(),i=GH.spa.urlState;if(i.mode!==r.mode){var n=!!i.accountId,o=n?"/jira/people/"+i.accountId:"/jira/software/c/projects/"+i.projectKey;o+="/boards/"+i.boardId,"plan"===r.mode&&(o+="/backlog"),"report"===r.mode&&(o+="/reports/"+GH.spa.lodash.kebabCase(r.chart)),"reporting"!==e.view&&"planning.nodetail"!==e.view||delete e.view,"planning"===e.view&&(e.view="detail"),t.path=o}}return t.queryKey=AJS.$.extend({},e),t.toString()},GH.State.registerStateChangeListener=function(e){var a=t.isFeatureEnabled("jsw.classic.reuse-redundant-libs")?GH.spa.historyAdapter:History.Adapter;a.bind(window,"statechange",e)},GH.State.registerStatePopListener=function(e){var a=t.isFeatureEnabled("jsw.classic.reuse-redundant-libs")?GH.spa.historyAdapter:History.Adapter;a.bind(window,"popstate.rapidboardSpa",e)},GH.State.getStateFromUri=function(e){var t=AJS.parseUri(e);t.anchor&&(t=AJS.parseUri(t.anchor));var r=t.queryKey;if(a){var i=GH.spa.urlState,n={selectedProjectKey:i.projectKey,projectKey:i.projectKey,rapidView:i.rapidView,chart:i.chartView,mode:i.mode};r=_extends({},r,n)}return r}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/state/UrlState.js' */
GH.RapidBoard.UrlState={},GH.RapidBoard.UrlState.dateFormat="%Y-%m-%d",GH.RapidBoard.UrlState.normalizeNumberParam=function(a,t){if(_.isUndefined(t)&&(t=null),void 0===a)return t;if(null===a)return t;var r=parseInt(a,10);return isFinite(r)?r:t},GH.RapidBoard.UrlState.normalizeBooleanParam=function(a,t){return _.isUndefined(t)&&(t=null),void 0===a?t:null===a?t:"false"!==a&&Boolean(a)},GH.RapidBoard.UrlState.normalizeDateParam=function(a,t){if(_.isUndefined(t)&&(t=null),void 0===a)return t;if(null===a)return t;var r=Date.parseDate(a,GH.RapidBoard.UrlState.dateFormat);return r},GH.RapidBoard.UrlState.normalizeNumberArrayParam=function(a){var t=[];if(_.isString(a)){var r=GH.RapidBoard.UrlState.normalizeNumberParam(a);null!==r&&t.push(r)}else _.isArray(a)&&_.each(a,function(a){var r=GH.RapidBoard.UrlState.normalizeNumberParam(a);null!==r&&t.push(r)});return t},GH.RapidBoard.UrlState.normalizeStringParam=function(a,t){if(_.isUndefined(t)&&(t=null),_.isArray(a)&&a.length>0){var r=a[0];return""!==r?decodeURIComponent(r):t}return _.isString(a)&&""!==a?decodeURIComponent(a):t},GH.RapidBoard.UrlState.normalizeStringArrayParam=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=[];return _.isString(a)&&a.length>0?r=[GH.RapidBoard.UrlState.normalizeStringParam(a,null)]:_.isArray(a)&&(r=a.map(function(a){return GH.RapidBoard.UrlState.normalizeStringParam(a,null)})),r.length?r:t},GH.RapidBoard.UrlState.removeEmptyParams=function(a){var t={};return _.each(a,function(a,r){_.isArray(a)?a.length>0&&(t[r]=a):_.isString(a)?_.isEmpty(a)||(t[r]=a):null===a||void 0===a||(t[r]=a)}),t},GH.RapidBoard.UrlState.toUrlParameterString=function(a){var t="";return _.each(a,function(a,r){_.isArray(a)?_.each(a,function(e){t.length>0&&(t+="&"),t+=r+"="+encodeURIComponent(a)}):(t.length>0&&(t+="&"),t+=r+"="+encodeURIComponent(a))}),t},GH.RapidBoard.UrlState.setHandlers=function(a){GH.RapidBoard.UrlState.handlers=a.filter(Boolean)},GH.RapidBoard.UrlState.handlers=[],GH.RapidBoard.UrlState.normalizeUrlToState=function(a){var t=GH.State.toViewState(a),r={};return _.each(GH.RapidBoard.UrlState.handlers,function(a){a.isApplicable(r)&&a.getNormalizedFromUrl(t,r)}),r},GH.RapidBoard.UrlState.getNormalizedUrlState=function(){var a=GH.RapidBoard.UrlState.getCurrentUrlState(),t={};return _.each(GH.RapidBoard.UrlState.handlers,function(r){r.isApplicable(t)&&r.getNormalizedFromUrl(a,t)}),t},GH.RapidBoard.UrlState.toUrlState=function(a){var t={};return _.each(GH.RapidBoard.UrlState.handlers,function(r){r.isApplicable(a)&&r.toUrl(a,t)}),t},GH.RapidBoard.UrlState.deferredPushState=function(a){a<GH.RapidBoard.UrlState.lastPushReplace||GH.RapidBoard.UrlState.pushState()},GH.RapidBoard.UrlState.lastPushReplace=0,GH.RapidBoard.UrlState.pushState=function(a){GH.RapidBoard.UrlState.lastPushReplace=(new Date).getTime();var t=GH.RapidBoard.UrlState.getNormalizedRapidBoardState(),r=GH.RapidBoard.UrlState.toUrlState(t),e=GH.RapidBoard.UrlState.getNormalizedUrlState();_.isEqual(t,e)||(require("jira-agile/rapid/wrm-spa-utils").isPrettyUrlsEnabled()&&(delete r.rapidView,delete r.selectedProjectKey,delete r.projectKey,delete r.chart),GH.State.push(r,a))},GH.RapidBoard.UrlState.replaceState=function(a){GH.RapidBoard.UrlState.lastPushReplace=(new Date).getTime();var t=GH.RapidBoard.UrlState.getNormalizedRapidBoardState(),r=GH.RapidBoard.UrlState.toUrlState(t),e=GH.RapidBoard.UrlState.getNormalizedUrlState();_.isEqual(t,e)&&!a||(require("jira-agile/rapid/wrm-spa-utils").isPrettyUrlsEnabled()&&(delete r.rapidView,delete r.selectedProjectKey,delete r.projectKey,delete r.chart),GH.State.replace(r))},GH.RapidBoard.UrlState.getNormalizedRapidBoardState=function(){var a={};return _.each(GH.RapidBoard.UrlState.handlers,function(t){t.isApplicable(a)&&t.getNormalizedFromInternal(a)}),a},GH.RapidBoard.UrlState.loadState=function(){var a=GH.RapidBoard.UrlState.getNormalizedUrlState();_.each(GH.RapidBoard.UrlState.handlers,function(t){t.isApplicable(a)&&t.updateInternalFromNormalized(a)})},GH.RapidBoard.UrlState.getCurrentUrlState=function(){return GH.State.toViewState(GH.RapidBoard.UrlState._getHref())},GH.RapidBoard.UrlState._getHref=function(){return window.location.href},GH.RapidBoard.UrlState.hasUrlState=function(){return!_.isEmpty(GH.RapidBoard.UrlState.getCurrentUrlState())},GH.RapidBoard.UrlState.isUrlStateUpToDate=function(){var a=GH.RapidBoard.UrlState.getNormalizedRapidBoardState(),t=GH.RapidBoard.UrlState.getNormalizedUrlState();return _.isEqual(a,t)},GH.RapidBoard.UrlState.getViewStateRequestParameterString=function(){var a=GH.RapidBoard.UrlState.getCurrentUrlState(),t=GH.RapidBoard.UrlState.removeEmptyParams(a);return GH.RapidBoard.UrlState.toUrlParameterString(t)},GH.RapidBoard.UrlState.HISTORY_CHANGED="historyDidChange",GH.RapidBoard.UrlState.historyChanged=function(){return GH.RapidBoard.UrlState.isUrlStateUpToDate()?void AJS.$(GH).trigger(GH.RapidBoard.UrlState.HISTORY_CHANGED):(GH.RapidBoard.UrlState.logDifferenceInState(),GH.RapidBoard.UrlState.loadState(),GH.RapidBoard.reload(),void AJS.$(GH).trigger(GH.RapidBoard.UrlState.HISTORY_CHANGED))},GH.RapidBoard.UrlState.historyPopped=function(){GH.RapidBoard.UrlState.isUrlStateUpToDate()||GH.RapidBoard.refreshBoardData();var a=require("jira/container-api");if(!a.getIsIframe()){var t=GH.RapidBoard.UrlState.getNormalizedUrlState(),r=GH.RapidBoard.UrlState.getNormalizedRapidBoardState();t.rapidView!==r.rapidView&&a.APIs.getNavigationAPI().then(function(a){return a.updateContext({boardId:t.rapidView})})}},GH.RapidBoard.UrlState.logDifferenceInState=function(){GH.RapidBoard.UrlState.getNormalizedRapidBoardState(),GH.RapidBoard.UrlState.getNormalizedUrlState()},GH.RapidBoard.UrlState.init=function(){setTimeout(function(){GH.State.registerStateChangeListener(GH.RapidBoard.UrlState.historyChanged),GH.State.registerStatePopListener(GH.RapidBoard.UrlState.historyPopped)},200)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/help/Tooltip.js' */
define("jira-agile/tooltip",["jquery","underscore"],function(t,e){"use strict";function i(e){var i=e.options.gravity;if("function"==typeof i&&(i=i.call(e.$element[0])),"n"===i.charAt(0)||"s"===i.charAt(0)){var r=e.$tip,n=r.offset(),o=Math.max(0,a-n.left),s=Math.max(0,a+n.left+r.outerWidth()-t(window).width()),c=r.find(".tipsy-arrow"),f=o&&s?0:o||-s;f?(r.css("left",parseInt(r.css("left"),10)+f),c.css("marginLeft",-c.outerWidth()/2-f)):c.css("marginLeft","");var u=r.css("bottom"),l=r.outerHeight();r.css({top:"",left:""});var h=e.$element[0].getBoundingClientRect(),v=t(window).width()-h.right+h.width/2-r.outerWidth()/2,d=v<0;r.css({bottom:u,right:d?"0px":v-f+"px",position:"fixed"});var p=r.outerHeight();if(l!==p){var u=Number.parseInt(r.css("bottom"));r.css("bottom",u+l-p+"px")}d?c.css("marginLeft",Math.abs(v)>h.width/2||r.outerWidth()<h.width/4?r.outerWidth()/2-14:h.width/4):c.css("marginLeft","")}}function r(t){var e=250;setTimeout(function(){t.$tip.is(":visible")&&(t.$element.is(":visible")?r(t):t.hide())},e)}function n(t,e){t&&(t.show(),t.$tip&&(i(t),r(t),e.trigger("show",t)))}var o=(require("jira/featureflags/feature-manager"),GH.Events),s=200,a=20,c={};return c.tipsify=function(i){i=e.extend({},i,{trigger:"manual",title:"data-tooltip"});var r=new o;if(!i.selector)return r;if(i.context&&e.isString(i.selector)){var a=i.selector;t(i.context).ghHoverIntent({interval:s,selector:a,over:function(){var e=t(this);if(e.is(":visible")){var o=e.tooltip(i).tipsy(!0);n(o,r)}},out:function(){var e=t(this).tipsy(!0);e&&e.hide()}})}else t(i.selector).tooltip(i).ghHoverIntent({interval:s,over:function(){var e=t(this).tipsy(!0);n(e,r)},out:function(){t(this).tipsy("hide")}});return r},c.enable=function(e){var i=t(e).tipsy(!0);i&&i.enable()},c.disable=function(e){var i=t(e).tipsy(!0);i&&i.disable()},c.hide=function(e){var i=t(e).tipsy(!0);i&&(t(e).trigger("mouseleave"),i.hide())},c});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/lib/ajs-future.js' */
!function(){function t(t,e,n,o,i){t.buttonpanel||t.addButtonPanel(),i||(i="#"),this.page=t,this.onclick=n,this._onclick=function(){n.call(this,t.dialog,t)},this.item=AJS("a",e).attr("href",i).addClass("button-panel-link"),o&&this.item.addClass(o),"function"==typeof n&&this.item.click(this._onclick),t.buttonpanel.append(this.item),this.id=t.button.length,t.button[this.id]=this}AJS.Dialog.prototype.addCancel||(AJS.Dialog.prototype.addCancel=function(e,n){var o=this.page[this.curpage];new t(o,e,n,"button-panel-cancel-link");o.recalcSize()}),AJS.parseUri=function(t,e){function n(t){for(var e=n.options,o=e.parser[e.strictMode?"strict":"loose"].exec(t),i={},a=14;a--;)i[e.key[a]]=o[a]||"";return i[e.q.name]={},i[e.key[12]].replace(e.q.parser,function(t,n,o){n&&("object"==typeof i[e.q.name][n]?i[e.q.name][n].push(o):i[e.q.name][n]?i[e.q.name][n]=[i[e.q.name][n],o]:i[e.q.name][n]=o)}),i}return n.options={strictMode:!!e,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t=n(t),t.toString=function(){var e=[];return AJS.$.each(t.queryKey,function(t,n){_.isObject(n)?AJS.$.each(n,function(n,o){e.push(t+"="+o)}):e.push(t+"="+n)}),t.protocol+"://"+t.authority+t.path+"?"+e.join("&")+"#"+t.anchor},t}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/lib/ajs-version.js' */
GH.ajsVersion=function(){if(!AJS.version)return{major:-1,minor:0,milestone:0};var n=AJS.version.split("."),e={major:n[0],minor:0,milestone:0};if(3==n.length)e.minor=n[1],e.milestone=n[2];else if(2==n.length){var i=n[1].split("-");2==i.length&&(e.minor=i[0],e.milestone=i[1].substring(i[1].indexOf("m")+1))}return e},GH.ajsVersionAfter=function(n,e,i){var r=GH.ajsVersion();return!(r.major<n)&&(!(e&&r.minor<e)&&!(i&&r.milestone<i))};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/ui-utils.js' */
GH.Util=GH.Util||{},GH.Util.UI={},GH.Util.UI.isDisabled=function(i){var t=AJS.$(i);return t.hasClass("disabled")||"true"==t.attr("aria-disabled")},GH.Util.UI.isEnabled=function(i){return!GH.Util.UI.isDisabled(i)},GH.Util.UI.isVisibleY=function(i){var t=AJS.$(window).height(),a=AJS.$(document).scrollTop();return i>a&&i<t+a},GH.Util.UI.isVisibleX=function(i){var t=AJS.$(window).width(),a=AJS.$(document).scrollLeft();return i>a&&i<t+a},GH.Util.UI.ariaEnable=function(i){AJS.$(i).removeAttr("aria-disabled")},GH.Util.UI.ariaDisable=function(i){AJS.$(i).attr("aria-disabled","true")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/Layout.js' */
GH.Layout={},GH.Layout.windowResizeTimer=null,GH.Layout.EVENT_DELAYED_RESIZE="delayedResize",GH.Layout.info={windowWidth:-1,windowHeight:-1},GH.Layout.getWindowWidth=function(){return GH.Layout.info.windowWidth},GH.Layout.getWindowHeight=function(){return GH.Layout.info.windowHeight},GH.Layout.bindDelayedWindowResize=_.once(function(){var i="resize.rapidboardSpa";AJS.$(window).bind(i,function(i){null!=GH.Layout.windowResizeTimer&&window.clearTimeout(GH.Layout.windowResizeTimer),GH.Layout.windowResizeTimer=window.setTimeout(function(){GH.Layout.updateWindowSize()?GH.Layout.fireDelayedWindowResize():"rapidboardSpa"===i.namespace&&GH.Layout.fireDelayedWindowResize()},250)})}),GH.Layout.updateWindowSize=function(){var i=AJS.$(window),o=GH.Layout.info.windowWidth,e=GH.Layout.info.windowHeight,n=i.width(),t=i.height();return(o!=n||e!=t)&&(GH.Layout.info.windowWidth=n,GH.Layout.info.windowHeight=t,!0)},GH.Layout.fireDelayedWindowResize=function(){AJS.$(GH).trigger(GH.Layout.EVENT_DELAYED_RESIZE)},GH.Layout.initPreRender=function(){var i=AJS.$(window);GH.Layout.info.windowWidth=i.width(),GH.Layout.info.windowHeight=i.height()},GH.Layout.init=function(){GH.Layout.bindDelayedWindowResize()},GH.Layout.initPreRender();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/Footer.js' */
GH.Footer={},GH.Footer.agileFooter=function(){var o=AJS.$("#footer"),r=o.find(".footer-body:first ul:first"),e=o.find("#ghx-footer");JIRA.Version.isGreaterThanOrEqualTo("6.2")||r.before(e),e.css({visibility:""})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/Browser.js' */
GH.RapidBoard.Browsers={},GH.RapidBoard.Browsers.userAgentMap={mozilla:"Firefox"},GH.RapidBoard.Browsers.unsupportedBrowsers=[{name:"mozilla",versions:["1.7","1.8","1.9"]}],GH.RapidBoard.Browsers.init=function(){GH.RapidBoard.Browsers.unsupported()},GH.RapidBoard.Browsers.isGreaterThanIE9=function(){return AJS.$.browser.msie&&parseFloat(AJS.$.browser.version)>9},GH.RapidBoard.Browsers.isInputEventSupported=function(){return"oninput"in document.createElement("input")&&!AJS.$.browser.msie||GH.RapidBoard.Browsers.isGreaterThanIE9()},GH.RapidBoard.Browsers.describeBrowser=function(r){r=r||navigator.userAgent;var e=/chrome/.test(navigator.userAgent.toLowerCase()),o=!e&&/safari/.test(navigator.userAgent.toLowerCase()),s=AJS.$.uaMatch(r),a=s.browser,n=s.version.replace(/(\d+)\.(\d+).*$/,"$1.$2");return e?a="chrome":o&&(a="safari"),{name:a,version:n}},GH.RapidBoard.Browsers.unsupported=function(){var r,e,o,s=GH.RapidBoard.Browsers.describeBrowser(),a=GH.RapidBoard.Browsers.unsupportedBrowsers;for(e=0;e<a.length;e++)if(o=a[e],s.name==o.name&&o.versions.indexOf(s.version)>=0){var n=s.name;GH.RapidBoard.Browsers.userAgentMap[n]&&(n=GH.RapidBoard.Browsers.userAgentMap[n]);var i={"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Supported+Platforms","isLocal":false}.url;r=GH.tpl.rapid.notification.renderMessageHolder({browser:n,docsUrl:i}),AJS.$("body").prepend(r);break}},AJS.$(function(){GH.RapidBoard.Browsers.init()});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/NumberFormat.js' */
GH.NumberFormat={},GH.NumberFormat.groupingSeparator=",",GH.NumberFormat.decimalSeparator=".",GH.NumberFormat.format=function(r){if(_.isNumber(r)){r=GH.Util.roundToDecimalPlaces(r,2);var t=r<<0,a=r.toString().split(".")[1],e=function(r){return r.split("").reverse().join("")},o=e(e(t.toString()).replace(/(\d{3})(?=\d)/g,"$1"+GH.NumberFormat.groupingSeparator));return o+(a?GH.NumberFormat.decimalSeparator+a:"")}},GH.NumberFormat.formatExponential=function(r){if(_.isNumber(r)){var t=Math.abs(r).toFixed(0).length-1,a=r/Math.pow(10,t);return GH.NumberFormat.format(a)+"e"+GH.NumberFormat.format(t)}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/TimeFormat.js' */
GH.TimeFormatDisplays={},GH.TimeFormatDisplays.PRETTY="pretty",GH.TimeFormatDisplays.DAYS="days",GH.TimeFormatDisplays.HOURS="hours",GH.TimeFormatDisplays.MOST_SIGNIFICANT="most-significant",GH.TimeFormatDurationUnits={},GH.TimeFormatDurationUnits.SECONDS="seconds",GH.TimeFormatDurationUnits.MILLISECONDS="millis",GH.TimeFormat={},GH.TimeFormat.timeTrackingConfigOpts={hoursPerDay:8,daysPerWeek:5,timeFormat:GH.TimeFormatDisplays.PRETTY,symbols:{week:"w",day:"d",hour:"h",minute:"m"}},GH.TimeFormat.normalDisplayOpts={hoursPerDay:24,daysPerWeek:7,timeFormat:GH.TimeFormatDisplays.PRETTY,symbols:{week:"w",day:"{0}d",hour:"{0}h",minute:"{0}m"}},GH.TimeFormat.formatMinuteDuration=function(t){return GH.TimeFormat.formatDuration(t?6e4*t:0)},GH.TimeFormat.formatShortMinuteDuration=function(t){return GH.TimeFormat.formatShortDuration(t?6e4*t:0)},GH.TimeFormat.formatDuration=function(t){t||(t=0);var r=Math.floor(t/864e5),o=t-864e5*r,a=Math.floor(o/36e5);o-=36e5*a;var e=Math.floor(o/6e4),i="";return r>0&&(i+=r+" ",i+=r>1?AJS.format("days",r):AJS.format("day",r)),a>0&&(i.length>0&&(i+=" "),i+=a+" ",i+=a>1?AJS.format("hours",a):AJS.format("hour",a)),(t>0||0===i.length)&&(i.length>0&&(i+=" "),i+=e+" ",i+=0===e||e>1?AJS.format("minutes",e):AJS.format("minute",e)),i},GH.TimeFormat.formatShortDurationForTimeTrackingConfiguration=function(t,r){return _.isUndefined(r)&&(r={durationUnit:GH.TimeFormatDurationUnits.SECONDS}),GH.TimeFormat._formatShortDuration(t,_.extend({},GH.TimeFormat.timeTrackingConfigOpts,r))},GH.TimeFormat.formatShortDuration=function(t){return GH.TimeFormat._formatShortDuration(t,_.extend({},GH.TimeFormat.normalDisplayOpts,{durationUnit:GH.TimeFormatDurationUnits.MILLISECONDS}))},GH.TimeFormat.formatSensibleShortDuration=function(t){var r=GH.TimeFormat._formatShortDuration(t,_.extend({},GH.TimeFormat.normalDisplayOpts,{durationUnit:GH.TimeFormatDurationUnits.MILLISECONDS,dropMinutesIfLongerThanADay:!0}));return 0===r.length&&(r=GH.TimeFormat.getZeroMinutesShortFormat()),r},GH.TimeFormat.getZeroMinutesShortFormat=function(){return AJS.format("{0}m",0)},GH.TimeFormat._formatShortDuration=function(t,r){if(t||(t=0),0===t)return"0";var o=GH.TimeFormat.normalDisplayOpts;r=_.isUndefined(r)?{}:r,r=_.extend({},o,r);var a,e,i,m,n,s=6e4,u=60*s,l=r.hoursPerDay*u,T=r.daysPerWeek*l;r.durationUnit===GH.TimeFormatDurationUnits.SECONDS&&(t*=1e3),a=Math.floor(t/T),n=t%T,e=Math.floor(n/l),n%=l,i=Math.floor(n/u),n%=u,m=Math.floor(n/s),r.dropMinutesIfLongerThanADay&&e>0&&(m=0);var f=[];r.timeFormat===GH.TimeFormatDisplays.PRETTY?f=[{val:a,fmt:r.symbols.week},{val:e,fmt:r.symbols.day},{val:i,fmt:r.symbols.hour},{val:m,fmt:r.symbols.minute}]:r.timeFormat===GH.TimeFormatDisplays.DAYS?(e+=a*r.daysPerWeek,i+=m/60,f=[{val:e,fmt:r.symbols.day},{val:i,fmt:r.symbols.hour}]):r.timeFormat===GH.TimeFormatDisplays.HOURS?(e+=a*r.daysPerWeek,i=e*r.hoursPerDay+i+m/60,f=[{val:i,fmt:r.symbols.hour}]):r.timeFormat===GH.TimeFormatDisplays.MOST_SIGNIFICANT&&(f=a>0?[{val:GH.Util.roundToDecimalPlaces(t/T,1),fmt:r.symbols.week}]:e>0?[{val:GH.Util.roundToDecimalPlaces(t/l,1),fmt:r.symbols.day}]:i>0?[{val:GH.Util.roundToDecimalPlaces(t/u,1),fmt:r.symbols.hour}]:[{val:m<1?"":GH.Util.roundToDecimalPlaces(t/s,1),fmt:r.symbols.minute}]);var D=function(t){var r="";return _.each(t,function(t){if(t.val>0){r.length>0&&(r+=" ");var o=t.fmt;o.indexOf("{0}")<0&&(o="{0}"+o);var a=GH.NumberFormat.format(t.val);r+=AJS.format(o,a)}}),!r&&t.length&&(r=AJS.format(_.last(t).fmt,"< 1")),r};return D(f)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ops/MouseUtils.js' */
GH.MouseUtils={},GH.MouseUtils.openInSameTab=function(e){return(_.isUndefined(e.which)||null===e.which||1===e.which||0===e.which&&AJS.$.browser.msie)&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey&&!AJS.$.browser.msie)},GH.MouseUtils.getMetaKeys=function(e){return e?{metaPressed:e.metaKey||e.ctrlKey,shiftPressed:e.shiftKey}:{metaPressed:!1,shiftPressed:!1}},GH.MouseUtils.hasMetaKeys=function(e){return e.metaPressed||e.shiftPressed},GH.MouseUtils.isMetaPressed=function(e){return e.metaPressed},GH.MouseUtils.isShiftPressed=function(e){return e.shiftPressed};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ops/ScrollUtils.js' */
GH.ScrollUtils={},GH.ScrollUtils.scrollElementToViewPort=function(o,t,l){var r=o.scrollTop(),c=0;l.top<t.top?c=l.top-t.top:t.bottom<l.bottom&&(c=l.bottom-t.bottom),0!==c&&o.animate({scrollTop:r+c},"fast")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/UrlFormat.js' */
GH.UrlFormat={},GH.UrlFormat.defaultContextPath="",GH.UrlFormat.prependBaseUrl=function(t){if(t&&0!==t.indexOf("http://")&&0!==t.indexOf("https://")){var r=GH.Ajax&&GH.Ajax.CONTEXT_PATH?GH.Ajax.CONTEXT_PATH:GH.UrlFormat.defaultContextPath;t=r+t}return t},GH.UrlFormat.getUrlForIssues=function(t){var r=_.compact(_.pluck(t,"id")).join(","),e=""!==r?"id in ("+r+")":"";return GH.UrlFormat.prependBaseUrl("/issues/?jql="+encodeURIComponent(e))};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ops/CallbackManager.js' */
GH.CallbackManager={},GH.CallbackManager.callbacks={},GH.CallbackManager.executeCallbacks=function(a,l){var c=GH.CallbackManager.callbacks[a];c&&!_.isEmpty(c)&&(_.each(c,function(a){a.fn(l)}),delete GH.CallbackManager.callbacks[a])},GH.CallbackManager.registerCallback=function(a,l,c){var e=GH.CallbackManager.callbacks[a];e||(e=GH.CallbackManager.callbacks[a]=[]),e.push({name:l,fn:c})},GH.CallbackManager.deleteCallbacks=function(a){_.each(_.keys(GH.CallbackManager.callbacks),function(l){l.substr(0,a.length)==a&&delete GH.CallbackManager.callbacks[l]})},GH.CallbackManager.getCallbacks=function(a){return GH.CallbackManager.callbacks[a]||[]},GH.CallbackManager.clear=function(){GH.CallbackManager.callbacks={}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/configuration/InlineEditField.js' */
!function(){"use strict";GH.RapidBoard.Util.InlineEditable={},GH.RapidBoard.Util.InlineEditable.defaultFieldData=function(e,i){var t=e.attr("data-fieldname"),a=e.attr("data-fieldvalue"),n=e.attr("data-defaultvalue"),l=e.attr("data-maxdisplaylength");return{fieldName:t,fieldValue:a,defaultValue:n,maxDisplayLength:l}},GH.RapidBoard.Util.InlineEditable.defaultActivate=function(e){e.editElement.focus(),e.editElement.select()},GH.RapidBoard.Util.InlineEditable.defaultTextRenderView=function(e){var i=AJS.$(GH.tpl.inlineeditfield.renderBasicTextView({canEdit:!0,fieldName:e.fieldName,fieldValue:e.newValue,displayValue:e.newValue,defaultValue:e.defaultValue,maxDisplayLength:e.maxDisplayLength}));return i},GH.RapidBoard.Util.InlineEditable.pencilTextRenderView=function(e){var i=AJS.$(GH.tpl.inlineeditfield.renderPencilTextView({canEdit:!0,fieldName:e.fieldName,fieldValue:e.newValue,displayValue:e.newValue}));return i},GH.RapidBoard.Util.InlineEditable.remoteTriggeredTextRenderView=function(e){var i=AJS.$(GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName:e.fieldName,fieldValue:e.newValue,displayValue:e.newValue}));return i},GH.RapidBoard.Util.InlineEditable.renderTextFieldInlineEdit=function(e,i){i||(i=GH.tpl.inlineeditfield.renderBasicTextFieldEdit);var t=AJS.$(i(e));return t.val(e.fieldValue),t.blur(function(i){GH.RapidBoard.Util.InlineEditable.submitChanges(e)}),t.keydown(function(i){27===i.keyCode?(i.stopPropagation(),GH.RapidBoard.Util.InlineEditable.cancelEdit(e)):13===i.keyCode&&(i.preventDefault(),GH.RapidBoard.Util.InlineEditable.submitChanges(e))}),t},GH.RapidBoard.Util.InlineEditable.defaultTextValidation=function(e){var i=e.editElement.val();return e.newValue=i,!0},GH.RapidBoard.Util.InlineEditable.renderUserPickerInlineEdit=function(e,i){var t={value:e.fieldValue},a=AJS.$(GH.tpl.inlineeditfield.renderUserPickerFieldEdit({name:"userpickerSelect",data:t}));return a},GH.RapidBoard.Util.InlineEditable.userPickerActivate=function(e){var i=require("jira/ajs/select/single-select"),t=e.editElement.find("select"),a=function(e){if(!e.finishSubmitted){e.finishSubmitted=!0;var i=e.selectObject,t=i.getSelectedDescriptor(),a=null;if(!t)return void GH.RapidBoard.Util.InlineEditable.cancelEdit(e);a=t.value(),a!==e.fieldValue?GH.RapidBoard.Util.InlineEditable.submitChanges(e):GH.RapidBoard.Util.InlineEditable.cancelEdit(e)}};GH.SingleSelect=i.extend({submitForm:function(){this.suggestionsVisible||(this.handleFreeInput(),a(e))},_handleEscape:function(i){this.suggestionsVisible&&(i.stopPropagation(),"keyup"===i.type&&this.hideSuggestions()),"keyup"===i.type&&GH.RapidBoard.Util.InlineEditable.cancelEdit(e)},_deactivate:function(){this.acceptFocusedSuggestion(),this.hideSuggestions(),a(e)}});var n=new GH.SingleSelect({element:t,showDropdownButton:!1,removeOnUnSelect:!0,submitInputVal:!0,errorMessage:"The user \'{0}\' is invalid.",ajaxOptions:{url:GH.Ajax.CONTEXT_PATH+"/rest/api/1.0/users/picker",query:!0,minQueryLength:0,data:{showAvatar:!0},formatResponse:function(e){var i=[];return AJS.$(e).each(function(e,t){var a=new AJS.GroupDescriptor({weight:e,id:"user-suggestions",replace:!0,label:t.footer});AJS.$(t.users).each(function(){a.addItem(new AJS.ItemDescriptor({value:this.name,label:this.displayName,html:this.html,allowDuplicate:!1,icon:this.avatarUrl}))}),i.push(a)}),i}}});e.selectObject=n;var l=e.editElement.find("input");l.focus(),t.select()},GH.RapidBoard.Util.InlineEditable.userPickerValidation=function(e){var i=e.selectObject.getSelectedDescriptor();return e.newValue=i.value(),e.newDisplayValue=i.label(),0===e.newDisplayValue.length&&(e.newDisplayValue=e.newValue),!0},GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit=function(e,i){var t=AJS.$(GH.tpl.inlineeditfield.renderDatePickerFieldEdit({fieldName:e.fieldName,fieldValue:e.fieldValue}));return t},GH.RapidBoard.Util.InlineEditable.datePickerActivate=function(e,i){var t=e.fieldName;i=_.extend({},{cache:!1,firstDay:0,inputField:"ghx-datepicker-"+t,button:"ghx-datepicker-"+t+"_trigger_c",align:"Br",singleClick:!0,showsTime:!0,timeFormat:12,positionStyle:"fixed",onClose:function(i){GH.RapidBoard.Util.InlineEditable.submitChanges(e),i.hide()},ifFormat:GH.TimeFormat.dateTimePickerFormat,useISO8601WeekNumbers:GH.TimeFormat.useISO8601WeekNumbers},i),Calendar.setup(i),AJS.$("#ghx-datepicker-"+t).keydown(function(i){27===i.keyCode?(i.stopPropagation(),GH.RapidBoard.Util.InlineEditable.cancelEdit(e),GH.Validation.clearContextualErrors()):13===i.keyCode&&(i.preventDefault(),GH.RapidBoard.Util.InlineEditable.submitChanges(e))}),AJS.$("#ghx-datepicker-"+t).focus(),AJS.$("#ghx-datepicker-"+t).blur(function(){GH.RapidBoard.Util.InlineEditable.submitChanges(e)})},GH.RapidBoard.Util.InlineEditable.datePickerValidation=function(e){var i=e.editElement.find("input").val();return e.newValue=i,!0},GH.RapidBoard.Util.InlineEditable.activeEdits=[],GH.RapidBoard.Util.InlineEditable.cancelActiveEdits=function(){_.each(GH.RapidBoard.Util.InlineEditable.activeEdits,function(e){GH.RapidBoard.Util.InlineEditable.cancelEdit(e)})},GH.RapidBoard.Util.InlineEditable.submitActiveEdits=function(){return!_.isEmpty(GH.RapidBoard.Util.InlineEditable.activeEdits)&&(_.each(GH.RapidBoard.Util.InlineEditable.activeEdits,function(e){GH.RapidBoard.Util.InlineEditable.submitChanges(e)}),!0)},GH.RapidBoard.Util.InlineEditable.register=function(e,i){var t={getViewElement:function(e){return AJS.$(this)},getData:GH.RapidBoard.Util.InlineEditable.defaultFieldData,preEdit:function(e){},renderEdit:GH.RapidBoard.Util.InlineEditable.renderTextFieldInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.defaultActivate,validate:GH.RapidBoard.Util.InlineEditable.defaultTextValidation,save:function(e){GH.RapidBoard.Util.InlineEditable.updateView(e)},renderView:GH.RapidBoard.Util.InlineEditable.defaultTextRenderView,postEdit:function(e){},startEdit:GH.RapidBoard.Util.InlineEditable.startEdit};i&&AJS.$.extend(!0,t,i);var a=AJS.$(document);a.off("click",e).on("click",e,t,function(e){var i=e.data,a=i.getViewElement.call(this,e);t.startEdit(a,i)})},GH.RapidBoard.Util.InlineEditable.startEdit=function(e,i){var t;if(i.getData&&(t=i.getData(e,i)),t){if(t.viewElement=e,t.options=i,i.preEdit){var a=i.preEdit(t);if(a===!1)return}GH.RapidBoard.Util.InlineEditable.activeEdits.push(t);var n=i.renderEdit(t);t.editElement=n,AJS.$(t.viewElement).replaceWith(t.editElement),i.activate&&i.activate(t)}},GH.RapidBoard.Util.InlineEditable.cancelEdit=function(e){e.canceled=!0,e.editElement.replaceWith(e.viewElement),GH.Validation.clearContextualErrors(e.viewElement),e.options.postEdit&&e.options.postEdit(e),GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits(e)},GH.RapidBoard.Util.InlineEditable.submitChanges=function(e){var i=e.options.validate(e);return i?void e.options.save(e):void e.options.activate(e)},GH.RapidBoard.Util.InlineEditable.updateView=function(e){e.updated=!0;var i=e.options.renderView(e);e.viewElement=i,e.editElement.replaceWith(i),GH.Validation.clearContextualErrors(e.viewElement),e.options.postEdit&&e.options.postEdit(e),GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits(e)},GH.RapidBoard.Util.InlineEditable.removeFromActiveEdits=function(e){GH.RapidBoard.Util.InlineEditable.activeEdits=_.without(GH.RapidBoard.Util.InlineEditable.activeEdits,e)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/configuration/InlineEditField.soy' */
// This file was automatically generated from InlineEditField.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.inlineeditfield.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.inlineeditfield == 'undefined') { GH.tpl.inlineeditfield = {}; }


GH.tpl.inlineeditfield.renderBasicTextView = function(opt_data, opt_ignored) {
  return '<span' + ((opt_data.canEdit) ? ' class="field-value ghx-editable js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger" tabindex="0"' : ' class="field-value ghx-readonly"') + ' data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + ((opt_data.fieldValue) ? soy.$$escapeHtml(opt_data.fieldValue) : '') + '"' + ((opt_data.defaultValue) ? ' data-defaultvalue="' + soy.$$escapeHtml(opt_data.defaultValue) + '"' : '') + ' data-maxdisplaylength="' + ((opt_data.maxDisplayLength) ? soy.$$escapeHtml(opt_data.maxDisplayLength) : '') + '" >' + ((opt_data.defaultValue && ! opt_data.displayValue) ? soy.$$escapeHtml(opt_data.defaultValue) : (opt_data.maxDisplayLength) ? soy.$$truncate(soy.$$escapeHtml(opt_data.displayValue), opt_data.maxDisplayLength, true) : soy.$$escapeHtml(opt_data.displayValue)) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderBasicTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderBasicTextView';
}


GH.tpl.inlineeditfield.renderBasicTextFieldEdit = function(opt_data, opt_ignored) {
  return '<input type="text" name="' + soy.$$escapeHtml(opt_data.fieldName) + '" class="text js-editing-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + ' ' + ((opt_data.cssClass) ? ' ' + soy.$$escapeHtml(opt_data.cssClass) : '') + '" ' + ((opt_data.maxLength) ? 'maxlength="' + soy.$$escapeHtml(opt_data.maxLength) + '"' : '') + '>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderBasicTextFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderBasicTextFieldEdit';
}


GH.tpl.inlineeditfield.renderUserPickerFieldEdit = function(opt_data, opt_ignored) {
  return '<span><select class="js-default-user-picker" name="' + soy.$$escapeHtml(opt_data.name) + '">' + ((opt_data.data.avatarUrl) ? '<option selected="selected" style="background-image:url(\'' + soy.$$escapeHtml(opt_data.data.avatarUrl) + '\')" value="' + soy.$$escapeHtml(opt_data.data.value) + '">' : '<option selected="selected" value="' + soy.$$escapeHtml(opt_data.data.value) + '">') + ((opt_data.data.displayName) ? soy.$$escapeHtml(opt_data.data.displayName) : soy.$$escapeHtml(opt_data.data.value)) + '</option></select></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderUserPickerFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderUserPickerFieldEdit';
}


GH.tpl.inlineeditfield.renderDatePickerFieldEdit = function(opt_data, opt_ignored) {
  return '<span><input id="ghx-datepicker-' + soy.$$escapeHtml(opt_data.fieldName) + '" class="text medium-field js-editing-field" type="text" value="' + soy.$$escapeHtml(opt_data.fieldValue) + '"><span id="ghx-datepicker-' + soy.$$escapeHtml(opt_data.fieldName) + '_trigger_c" class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-calendar js-editing-field" title="' + soy.$$escapeHtml('Edit end date') + '">' + soy.$$escapeHtml('Edit') + '</span></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderDatePickerFieldEdit.soyTemplateName = 'GH.tpl.inlineeditfield.renderDatePickerFieldEdit';
}


GH.tpl.inlineeditfield.renderPencilTextView = function(opt_data, opt_ignored) {
  return '<span' + ((opt_data.canEdit) ? ' class="field-value ghx-editable-secondary js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger" tabindex="0"' : ' class="field-value ghx-readonly-secondary"') + ' data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" >' + soy.$$escapeHtml(opt_data.displayValue) + ((opt_data.canEdit) ? '<span class="js-edit-pencil ghx-icon ghx-icon-edit" title="' + soy.$$escapeHtml('Click to edit') + '"></span>' : '') + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderPencilTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderPencilTextView';
}


GH.tpl.inlineeditfield.renderRemoteTriggeredTextView = function(opt_data, opt_ignored) {
  return '<span class="field-value js-editable-field js-edit-' + soy.$$escapeHtml(opt_data.fieldName) + '-trigger" data-fieldname="' + soy.$$escapeHtml(opt_data.fieldName) + '" data-fieldvalue="' + soy.$$escapeHtml(opt_data.fieldValue) + '" >' + soy.$$escapeHtml(opt_data.displayValue) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderRemoteTriggeredTextView.soyTemplateName = 'GH.tpl.inlineeditfield.renderRemoteTriggeredTextView';
}


GH.tpl.inlineeditfield.renderJQLAutocomplete = function(opt_data, opt_ignored) {
  return '<span><textarea class="js-jql-autocomplete-field textarea" name="' + soy.$$escapeHtml(opt_data.name) + '" id="' + soy.$$escapeHtml(opt_data.namespace) + '-jql-' + ((opt_data.id) ? soy.$$escapeHtml(opt_data.id) : 'create') + '" cols="20" rows="2">' + ((opt_data.value) ? soy.$$escapeHtml(opt_data.value) : '') + '</textarea><span id="' + soy.$$escapeHtml(opt_data.namespace) + '-jql-errormsg-' + ((opt_data.id) ? soy.$$escapeHtml(opt_data.id) : 'create') + '" class="icon jqlgood js-jql-autocomplete-error"><span></span></span></span>';
};
if (goog.DEBUG) {
  GH.tpl.inlineeditfield.renderJQLAutocomplete.soyTemplateName = 'GH.tpl.inlineeditfield.renderJQLAutocomplete';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/lib/jquery/jquery.ui.resizable.js' */
!function(t,e){function i(t){return parseInt(t,10)||0}function s(t){return!isNaN(parseInt(t,10))}t.widget("ui.resizable",t.ui.mouse,{version:"1.10.3",widgetEventPrefix:"resize",options:{alsoResize:!1,alsoResizeMirror:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var e,i,s,h,n,o=this,a=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!a.aspectRatio,aspectRatio:a.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:a.helper||a.ghost||a.animate?a.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=a.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)s=t.trim(e[i]),n="ui-resizable-"+s,h=t("<div class='ui-resizable-handle "+n+"'></div>"),h.css({zIndex:a.zIndex}),"se"===s&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(h);this._renderAxis=function(e){var i,s,h,n;e=e||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=t(this.handles[i],this.element),n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),h=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),e.css(h,n),this._proportionallyResize()),t(this.handles[i]).length},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(h=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=h&&h[1]?h[1]:"se")}),a.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){a.disabled||(t(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){a.disabled||o.resizing||(t(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e,i=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),e=this.element,this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")}).insertAfter(e),e.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(e){var i,s,h=!1;for(i in this.handles)s=t(this.handles[i])[0],(s===e.target||t.contains(s,e.target))&&(h=!0);return!this.options.disabled&&h},_mouseStart:function(e){var s,h,n,o=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),s=i(this.helper.css("left")),h=i(this.helper.css("top")),o.containment&&(s+=t(o.containment).scrollLeft()||0,h+=t(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:h},this.size=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:s,top:h},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:e.pageX,top:e.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=t(".ui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===n?this.axis+"-resize":n),l.addClass("ui-resizable-resizing"),this._propagate("start",e),!0},_mouseDrag:function(e){var i,s=this.helper,h={},n=this.originalMousePosition,o=this.axis,a=this.position.top,l=this.position.left,r=this.size.width,p=this.size.height,d=e.pageX-n.left||0,g=e.pageY-n.top||0,f=this._change[o];return!!f&&(i=f.apply(this,[e,d,g]),this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(i=this._updateRatio(i,e)),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),this.position.top!==a&&(h.top=this.position.top+"px"),this.position.left!==l&&(h.left=this.position.left+"px"),this.size.width!==r&&(h.width=this.size.width+"px"),this.size.height!==p&&(h.height=this.size.height+"px"),s.css(h),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),t.isEmptyObject(h)||this._trigger("resize",e,this.ui()),!1)},_mouseStop:function(e){this.resizing=!1;var i,s,h,n,o,a,l,r=this.options,p=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),h=s&&t.ui.hasScroll(i[0],"left")?0:p.sizeDiff.height,n=s?0:p.sizeDiff.width,o={width:p.helper.width()-n,height:p.helper.height()-h},a=parseInt(p.element.css("left"),10)+(p.position.left-p.originalPosition.left)||null,l=parseInt(p.element.css("top"),10)+(p.position.top-p.originalPosition.top)||null,r.animate||this.element.css(t.extend(o,{top:l,left:a})),p.helper.height(p.size.height),p.helper.width(p.size.width),this._helper&&!r.animate&&this._proportionallyResize()),t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,i,h,n,o,a=this.options;o={minWidth:s(a.minWidth)?a.minWidth:0,maxWidth:s(a.maxWidth)?a.maxWidth:1/0,minHeight:s(a.minHeight)?a.minHeight:0,maxHeight:s(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,h=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),h>o.minHeight&&(o.minHeight=h),i<o.maxWidth&&(o.maxWidth=i),n<o.maxHeight&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(t){this.offset=this.helper.offset(),s(t.left)&&(this.position.left=t.left),s(t.top)&&(this.position.top=t.top),s(t.height)&&(this.size.height=t.height),s(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,i=this.size,h=this.axis;return s(t.height)?t.width=t.height*this.aspectRatio:s(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===h&&(t.left=e.left+(i.width-t.width),t.top=null),"nw"===h&&(t.top=e.top+(i.height-t.height),t.left=e.left+(i.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,i=this.axis,h=s(t.width)&&e.maxWidth&&e.maxWidth<t.width,n=s(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=s(t.width)&&e.minWidth&&e.minWidth>t.width,a=s(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,r=this.position.top+this.size.height,p=/sw|nw|w/.test(i),d=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),a&&(t.height=e.minHeight),h&&(t.width=e.maxWidth),n&&(t.height=e.maxHeight),o&&p&&(t.left=l-e.minWidth),h&&p&&(t.left=l-e.maxWidth),a&&d&&(t.top=r-e.minHeight),n&&d&&(t.top=r-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,s,h,n=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(h=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")],s=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(s[e],10)||0);h.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,s=this.originalPosition;return{left:s.left+e,width:i.width-e}},n:function(t,e,i){var s=this.originalSize,h=this.originalPosition;return{top:h.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!==e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("resizable"),s=i.options,h=i._proportionallyResizeElements,n=h.length&&/textarea/i.test(h[0].nodeName),o=n&&t.ui.hasScroll(h[0],"left")?0:i.sizeDiff.height,a=n?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-o},r=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,p=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,p&&r?{top:p,left:r}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};h&&h.length&&t(h[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var e,s,h,n,o,a,l,r=t(this).data("resizable"),p=r.options,d=r.element,g=p.containment,f=g instanceof t?g.get(0):/parent/.test(g)?d.parent().get(0):g;f&&(r.containerElement=t(f),/document/.test(g)||g===document?(r.containerOffset={left:0,top:0},r.containerPosition={left:0,top:0},r.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight}):(e=t(f),s=[],t(["Top","Right","Left","Bottom"]).each(function(t,h){s[t]=i(e.css("padding"+h))}),r.containerOffset=e.offset(),r.containerPosition=e.position(),r.containerSize={height:e.innerHeight()-s[3],width:e.innerWidth()-s[1]},h=r.containerOffset,n=r.containerSize.height,o=r.containerSize.width,a=t.ui.hasScroll(f,"left")?f.scrollWidth:o,l=t.ui.hasScroll(f)?f.scrollHeight:n,r.parentData={element:f,left:h.left,top:h.top,width:a,height:l}))},resize:function(e){var i,s,h,n,o=t(this).data("resizable"),a=o.options,l=o.containerOffset,r=o.position,p=o._aspectRatio||e.shiftKey,d={top:0,left:0},g=o.containerElement;g[0]!==document&&/static/.test(g.css("position"))&&(d=l),r.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),p&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=a.helper?l.left:0),r.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),p&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper?o.offset.left-d.left:o.offset.left-d.left)+o.sizeDiff.width),s=Math.abs((o._helper?o.offset.top-d.top:o.offset.top-l.top)+o.sizeDiff.height),h=o.containerElement.get(0)===o.element.parent().get(0),n=/relative|absolute/.test(o.containerElement.css("position")),h&&n&&(i-=o.parentData.left),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,p&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,p&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var e=t(this).data("resizable"),i=e.options,s=e.containerOffset,h=e.containerPosition,n=e.containerElement,o=t(e.helper),a=o.offset(),l=o.outerWidth()-e.sizeDiff.width,r=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r}),e._helper&&!i.animate&&/static/.test(n.css("position"))&&t(this).css({left:a.left-h.left-s.left,width:l,height:r})}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("resizable"),h=s.options,n=s.originalSize,o=s.originalPosition,a={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(e,s){t(e).each(function(){var e=t(this),h=t(this).data("ui-resizable-alsoresize"),n={},o=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(h[e]||0)+(a[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})};"object"!=typeof h.alsoResize||h.alsoResize.nodeType?l(h.alsoResize):t.each(h.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","alsoResizeMirror",{start:function(){var e=t(this).data("resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("ui-resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResizeMirror||i.alsoResizeMirror.parentNode?s(i.alsoResizeMirror):i.alsoResizeMirror.length?(i.alsoResizeMirror=i.alsoResizeMirror[0],s(i.alsoResizeMirror)):t.each(i.alsoResizeMirror,function(t){s(t)})},resize:function(e,i){var s=t(this).data("resizable"),h=s.options,n=s.originalSize,o=s.originalPosition,a={height:s.size.height-n.height||0,width:s.size.width-n.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(e,s){t(e).each(function(){var e=t(this),h=t(this).data("ui-resizable-alsoresize"),n={},o=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(h[e]||0)-(a[e]||0);i&&i>=0&&(n[e]=i||null)}),e.css(n)})};"object"!=typeof h.alsoResizeMirror||h.alsoResizeMirror.nodeType?l(h.alsoResizeMirror):t.each(h.alsoResizeMirror,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(){var e=t(this).data("resizable"),i=e.options,s=e.size,h=e.originalSize,n=e.originalPosition,o=e.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,r=a[1]||1,p=Math.round((s.width-h.width)/l)*l,d=Math.round((s.height-h.height)/r)*r,g=h.width+p,f=h.height+d,c=i.maxWidth&&i.maxWidth<g,u=i.maxHeight&&i.maxHeight<f,m=i.minWidth&&i.minWidth>g,z=i.minHeight&&i.minHeight>f;i.grid=a,m&&(g+=l),z&&(f+=r),c&&(g-=l),u&&(f-=r),/^(se|s|e)$/.test(o)?(e.size.width=g,e.size.height=f):/^(ne)$/.test(o)?(e.size.width=g,e.size.height=f,e.position.top=n.top-d):/^(sw)$/.test(o)?(e.size.width=g,e.size.height=f,e.position.left=n.left-p):(e.size.width=g,e.size.height=f,e.position.top=n.top-d,e.position.left=n.left-p)}}),t.fn.agileResizable=t.fn.resizable}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/lib/jquery/jquery.ui.droppable.js' */
!function(e,t){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i)),i&&!i.activated&&(e.ui.ddmanager.dragStart(i,t),i.activated=!0)},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i)),i.activated&&(e.ui.ddmanager.dragStop(i,t),i.activated=!1)},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current;if(!s||(s.currentItem||s.element)[0]==this.element[0])return!1;var o=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==s.options.scope&&t.accept.call(t.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return o=!0,!1}),!o&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.23"}),e.ui.intersect=function(t,i,s){if(!i.offset)return!1;var o=(t.positionAbs||t.position.absolute).left,r=o+t.helperProportions.width,n=(t.positionAbs||t.position.absolute).top,a=n+t.helperProportions.height,l=i.offset.left,p=l+i.proportions.width,h=i.offset.top,d=h+i.proportions.height;switch(s){case"fit":return l<=o&&r<=p&&h<=n&&a<=d;case"intersect":return l<o+t.helperProportions.width/2&&r-t.helperProportions.width/2<p&&h<n+t.helperProportions.height/2&&a-t.helperProportions.height/2<d;case"pointer":var c=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,u=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,f=e.ui.isOver(u,c,h,l,i.proportions.height,i.proportions.width);return f;case"touch":return(n>=h&&n<=d||a>=h&&a<=d||n<h&&a>d)&&(o>=l&&o<=p||r>=l&&r<=p||o<l&&r>p);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var n=0;n<s.length;n++)if(!(s[n].options.disabled||t&&!s[n].accept.call(s[n].element[0],t.currentItem||t.element))){for(var a=0;a<r.length;a++)if(r[a]==s[n].element[0]){s[n].proportions.height=0;continue e}s[n].visible="none"!=s[n].element.css("display"),s[n].visible&&("mousedown"==o&&s[n]._activate.call(s[n],i),s[n].offset=s[n].element.offset(),s[n].proportions={width:s[n].element[0].offsetWidth,height:s[n].element[0].offsetHeight})}},drop:function(t,i){var s=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s=e.ui.intersect(t,this,this.options.tolerance),o=s||1!=this.isover?s&&0==this.isover?"isover":null:"isout";if(o){var r;if(this.options.greedy){var n=this.element.parents(":data(droppable):eq(0)");n.length&&(r=e.data(n[0],"droppable"),r.greedyChild="isover"==o?1:0)}r&&"isover"==o&&(r.isover=0,r.isout=1,r._out.call(r,i)),this[o]=1,this["isout"==o?"isover":"isout"]=0,this["isover"==o?"_over":"_out"].call(this,i),r&&"isout"==o&&(r.isout=0,r.isover=1,r._over.call(r,i))}}})},dragStop:function(t,i){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},e.fn.agileDroppable=e.fn.droppable}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/lib/jquery/jquery.ui.sortable.js' */
!function(t,e){t.widget("ui.sortable",t.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:!1,axisAdjusted:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",helperAdjusted:!1,items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",intersectionOverride:!1,helperProportions:!1,zIndex:1e3},_create:function(){this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&(/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData("sortable-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);var s=null,o=this;t(e.target).parents().each(function(){if(t.data(this,"sortable-item")==o)return s=t(this),!1});if(t.data(e.target,"sortable-item")==o&&(s=t(e.target)),!s)return!1;if(this.options.handle&&!i){var r=!1;if(t(this.options.handle,s).find("*").andSelf().each(function(){this==e.target&&(r=!0)}),!r)return!1}return this.currentItem=s,this._removeCurrentsFromItems(),!0},_mouseStart:function(i,s,o){var r=this.options,n=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(i),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),"function"==typeof this.options.additionalScrollParents?this.additionalScrollParents=this.options.additionalScrollParents():this.additionalScrollParents=e,this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.options.initializeTopAndLeft&&(this.helper[0].style.left=this.offset.left+"px",this.helper[0].style.top=this.offset.top+"px"),t.extend(this.offset,{click:{left:i.pageX-this.offset.left,top:i.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this._generatePosition(i),this.originalPageX=i.pageX,this.originalPageY=i.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&(t("body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",r.cursor)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),"function"==typeof this.options.axisAdjusted&&this.options.axisAdjusted.apply(this),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this.additionalScrollParents&&(this.additionalOverflowOffsets=[],this.additionalOverflowSizes=[],t.each(this.additionalScrollParents,function(e,i){var s=t(i);n.additionalOverflowOffsets[e]=s.offset(),n.additionalOverflowSizes[e]={width:s.width(),height:s.height()}})),this._trigger("start",i,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!o)for(var h=this.containers.length-1;h>=0;h--)this.containers[h]._trigger("activate",i,n._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!r.dropBehaviour&&setTimeout(function(){t.ui.ddmanager.prepareOffsets(n,i)},0),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(i),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,s=!1;if(this.options.ignoreOriginalScroll||(this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(e.pageY-t(document).scrollTop()<i.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed)),e.pageX-t(document).scrollLeft()<i.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed)))),this.additionalScrollParents){var o=this;t.each(this.additionalScrollParents,function(t,r){var n=o.additionalOverflowOffsets[t],h=o.additionalOverflowSizes[t];n.left<=e.pageX&&e.pageX<n.left+h.width&&(n.top+r.offsetHeight-e.pageY<i.scrollSensitivity?r.scrollTop=s=r.scrollTop+i.scrollSpeed:e.pageY-n.top<i.scrollSensitivity&&(r.scrollTop=s=r.scrollTop-i.scrollSpeed)),n.top<=e.pageY&&e.pageY<n.top+h.height&&(n.left+r.offsetWidth-e.pageX<i.scrollSensitivity?r.scrollLeft=s=r.scrollLeft+i.scrollSpeed:e.pageX-n.left<i.scrollSensitivity&&(r.scrollLeft=s=r.scrollLeft-i.scrollSpeed))})}s&&i.containment&&this._setContainment(),s!==!1&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),"function"==typeof this.options.helperAdjusted&&this.options.helperAdjusted.apply(this);var r=this.element.offset(),n={width:this.element.width(),height:this.element.height()};if(r.left<=e.pageX&&e.pageX<=r.left+n.width&&r.top<=e.pageY&&e.pageY<=r.top+n.height)for(var h=this.items.length-1;h>=0;h--){var a=this.items[h],l=a.item[0],c="function"==typeof this.options.intersectionOverride?this.options.intersectionOverride.apply(this,[a]):this._intersectsWithPointer(a);if(c&&!(l==this.currentItem[0]||this.placeholder[1==c?"next":"prev"]()[0]==l||t.ui.contains(this.placeholder[0],l)||"semi-dynamic"==this.options.type&&t.ui.contains(this.element[0],l))){if(this.direction=1==c?"down":"up","pointer"!=this.options.tolerance&&"function"!=typeof this.options.intersectionOverride&&!this._intersectsWithSides(a))break;this._rearrange(e,a),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,o=s.placeholder.offset();s.reverting=!0,t(this.helper).animate({left:o.left-this.offset.parent.left-s.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:o.top-this.offset.parent.top-s.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){var e=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,e._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,e._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,o=s+this.helperProportions.height,r=t.left,n=r+t.width,h=t.top,a=h+t.height,l=this.offset.click.top,c=this.offset.click.left,p=s+l>h&&s+l<a&&e+c>r&&e+c<n;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?p:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<n&&h<s+this.helperProportions.height/2&&o-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),s=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),o=i&&s,r=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return!!o&&(this.floating?n&&"right"==n||"down"==r?2:1:r&&("down"==r?2:1))},_intersectsWithSides:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),s=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),o=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"==r&&s||"left"==r&&!s:o&&("down"==o&&i||"up"==o&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i=[],s=[],o=this._connectWith();if(o&&e)for(var r=o.length-1;r>=0;r--)for(var n=t(o[r]),h=n.length-1;h>=0;h--){var a=t.data(n[h],"sortable");a&&a!=this&&!a.options.disabled&&s.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}s.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var r=s.length-1;r>=0;r--)s[r][0].each(function(){i.push(this)});return t(i)},_removeCurrentsFromItems:function(){for(var t=this.currentItem.find(":data(sortable-item)"),e=0;e<this.items.length;e++)for(var i=0;i<t.length;i++)t[i]==this.items[e].item[0]&&this.items.splice(e,1)},_refreshItems:function(e){this.items=[],this.containers=[this];var i=this.items,s=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],o=this._connectWith();if(o)for(var r=o.length-1;r>=0;r--)for(var n=t(o[r]),h=n.length-1;h>=0;h--){var a=t.data(n[h],"sortable");a&&a!=this&&!a.options.disabled&&(s.push([t.isFunction(a.options.items)?a.options.items.call(a.element[0],e,{item:this.currentItem}):t(a.options.items,a.element),a]),this.containers.push(a))}for(var r=s.length-1;r>=0;r--)for(var l=s[r][1],c=s[r][0],h=0,p=c.length;h<p;h++){var f=t(c[h]);f.data("sortable-item",l),i.push({item:f,instance:l,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item;e||(s.width=o.outerWidth(),s.height=o.outerHeight());var r=o.offset();s.left=r.left,s.top=r.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var r=this.containers[i].element.offset();this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(e){var i=e||this,s=i.options;if(!s.placeholder||s.placeholder.constructor==String){var o=s.placeholder;s.placeholder={element:function(){var e=t(document.createElement(i.currentItem[0].nodeName)).addClass(o||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return o||(e.style.visibility="hidden"),e},update:function(t,e){o&&!s.forcePlaceholderSize||(e.height()||e.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=t(s.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),s.placeholder.update(i,i.placeholder)},_contactContainers:function(e){for(var i=null,s=null,o=this.containers.length-1;o>=0;o--)if(!t.ui.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(i&&t.ui.contains(this.containers[o].element[0],i.element[0]))continue;i=this.containers[o],s=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",e,this._uiHash(this)),this.containers[o].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1;else if(this.currentContainer!=this.containers[s]){for(var r=1e4,n=null,h=this.positionAbs[this.containers[s].floating?"left":"top"],a=this.items.length-1;a>=0;a--)if(t.ui.contains(this.containers[s].element[0],this.items[a].item[0])){var l=this.items[a][this.containers[s].floating?"left":"top"];Math.abs(l-h)<r&&(r=Math.abs(l-h),n=this.items[a])}if(!n&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[s],n?this._rearrange(e,n,null,!0):this._rearrange(e,null,this.containers[s].element,!0),this._trigger("change",e,this._uiHash()),this.containers[s]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(""==s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.browser.msie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.options.helperProportions?this.helperProportions=this.options.helperProportions:this.helperProportions={width:this.helper.outerWidth()+(parseInt(this.helper.css("padding-left"))||0)+(parseInt(this.helper.css("padding-right"))||0)+(parseInt(this.helper.css("border-left-width"))||0)+(parseInt(this.helper.css("border-right-width"))||0)+(parseInt(this.helper.css("margin-left"))||0)+(parseInt(this.helper.css("margin-right"))||0),height:this.helper.outerHeight()+(parseInt(this.helper.css("padding-top"))||0)+(parseInt(this.helper.css("padding-bottom"))||0)+(parseInt(this.helper.css("border-top-width"))||0)+(parseInt(this.helper.css("border-bottom-width"))||0)+(parseInt(this.helper.css("margin-top"))||0)+(parseInt(this.helper.css("margin-bottom"))||0)}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),"document"!=e.containment&&"window"!=e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),"function"==typeof e.containment)this.containment=e.containment.apply(this);else if(!/^(document|window|parent)$/.test(e.containment)){var i=t(e.containment)[0],s=t(e.containment).offset(),o="hidden"!=t(i).css("overflow");this.containment=[s.left+(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0)-this.margins.top,s.left+(o?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,s.top+(o?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"==e?1:-1,o=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),r=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():r?0:o.scrollTop())*s),left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-(t.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():r?0:o.scrollLeft())*s)}},_generatePosition:function(e){var i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var r=e.pageX,n=e.pageY;if(this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(n=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(n=this.containment[3]+this.offset.click.top)),i.grid)){var h=this.originalPageY+Math.round((n-this.originalPageY)/i.grid[1])*i.grid[1];n=this.containment&&(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h-this.offset.click.top<this.containment[1]?h+i.grid[1]:h-i.grid[1]:h;var a=this.originalPageX+Math.round((r-this.originalPageX)/i.grid[0])*i.grid[0];r=this.containment&&(a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2])?a-this.offset.click.left<this.containment[0]?a+i.grid[0]:a-i.grid[0]:a}return{top:n-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(t.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this,r=this.counter;window.setTimeout(function(){r==o.counter&&o.refreshPositions(!s)},0)},_clear:function(e,i){this.reverting=!1;var s=[];if(!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var o in this._storedCSS)"auto"!=this._storedCSS[o]&&"static"!=this._storedCSS[o]||(this._storedCSS[o]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||s.push(function(t){this._trigger("update",t,this._uiHash())}),!t.ui.contains(this.element[0],this.currentItem[0])){i||s.push(function(t){this._trigger("remove",t,this._uiHash())});for(var o=this.containers.length-1;o>=0;o--)t.ui.contains(this.containers[o].element[0],this.currentItem[0])&&!i&&(s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.containers[o])),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.containers[o])))}for(var o=this.containers.length-1;o>=0;o--)i||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[o])),this.containers[o].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",e,this._uiHash());for(var o=0;o<s.length;o++)s[o].call(this,e);this._trigger("stop",e,this._uiHash())}return!1}if(i||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var o=0;o<s.length;o++)s[o].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}}),t.extend(t.ui.sortable,{version:"1.8.11-greenhopper"}),t.fn.agileSortable=t.fn.sortable}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/lib/jquery/jquery.ui.touch-punch.js' */
!function(o){function t(o,t){if(!(o.originalEvent.touches.length>1)){o.preventDefault();var e=o.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),o.target.dispatchEvent(n)}}if(o.support.touch="ontouchend"in document,o.support.touch){var e,n=o.ui.mouse.prototype,u=n._mouseInit;n._touchStart=function(o){var n=this;!e&&n._mouseCapture(o.originalEvent.changedTouches[0])&&(e=!0,n._touchMoved=!1,t(o,"mouseover"),t(o,"mousemove"),t(o,"mousedown"))},n._touchMove=function(o){e&&(this._touchMoved=!0,t(o,"mousemove"))},n._touchEnd=function(o){e&&(t(o,"mouseup"),t(o,"mouseout"),this._touchMoved||t(o,"click"),e=!1)},n._mouseInit=function(){var t=this;t.element.bind("touchstart",o.proxy(t,"_touchStart")).bind("touchmove",o.proxy(t,"_touchMove")).bind("touchend",o.proxy(t,"_touchEnd")),u.call(t)}}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/lib/jquery/jquery.keygen.js' */
!function(e,t){e.KeyGenerator=function(){var e=["THE","A","AN","AS","AND","OF","OR"],n={},a=function(e){return e.join("").length},r=function(n){return t.grep(n,function(n,a){return t.inArray(n,e)===-1})},o=function(e){var n="";return t.each(e,function(e,t){n+=t.charAt(0)}),n},u=function(e){var t,n=!1;for(t=0;t<e.length;t++)if(i(e[t]))n=!0;else if(n)return e.substring(0,t+1);return e},i=function(e){return e&&1===e.length&&e.search("[AEIOUY]")!==-1};return n[199]="C",n[231]="c",n[252]="u",n[251]="u",n[250]="u",n[249]="u",n[233]="e",n[234]="e",n[235]="e",n[232]="e",n[226]="a",n[228]="a",n[224]="a",n[229]="a",n[225]="a",n[239]="i",n[238]="i",n[236]="i",n[237]="i",n[196]="A",n[197]="A",n[201]="E",n[230]="ae",n[198]="Ae",n[244]="o",n[246]="o",n[242]="o",n[243]="o",n[220]="U",n[255]="Y",n[214]="O",n[241]="n",n[209]="N",{generateKey:function(e,i){i=t.extend({},i);var c="number"==typeof i.desiredKeyLength?i.desiredKeyLength:4,h="number"==typeof i.maxKeyLength?i.maxKeyLength:1/0;if(e=t.trim(e),!e)return"";for(var s=[],g=0,f=e.length;g<f;g++){var l=n[e.charCodeAt(g)];s.push(l?l:e[g])}e=s.join("");var d=[];t.each(e.split(/\s+/),function(e,t){t&&(t=t.replace(/[^a-zA-Z]/g,""),t=t.toUpperCase(),t.length&&d.push(t))}),c&&a(d)>c&&(d=r(d));var m;if(0==d.length)m="";else if(1==d.length){var v=d[0],y=u(v);m=h<v.length||Math.abs(v.length-c)>=Math.abs(y.length-c)?y:v}else{var K=a(d),x=o(d);m=h<K||Math.abs(K-c)>=Math.abs(x.length-c)?x:d.join("")}return h&&m.length>h&&(m=m.substr(0,h)),m}}};var n=e.KeyGenerator();t.fn.generateFrom=function(e,a){var r={desiredKeyLength:4,maxKeyLength:10,maxNameLength:30,timeoutMS:100,validationCallback:function(){},errorCallback:function(){}},o=t(this).first(),e=e.first(),a=t.extend({},r,a);return function(){var r=function(){return o.data("autosuggest")!==!1},u=function(e){o.val()&&o.data("lastGeneratedValue")!==o.val()&&o.data("autosuggest",!1)},i=function(e){o.data("lastGeneratedValue",e),o.val(e)},c=function(){u(o.val()),f()},h=function(e){s(e,c)},s=function(e,n){var r,o=t(e.target);r=function(){g(e),n(),o.is(":visible")&&o.data("checkHook",setTimeout(r,a.timeoutMS))},o.data("checkHook")||o.data("checkHook",setTimeout(r,0))},g=function(e){var n=t(e.target);clearTimeout(n.data("checkHook")),n.removeData("checkHook")},f=function(){r()&&i(n.generateKey(e.val(),{desiredKeyLength:a.desiredKeyLength,maxKeyLength:a.maxKeyLength}))};e.attr("maxlength",a.maxNameLength),o.attr("maxlength",a.maxKeyLength),o.css("text-transform","uppercase"),document.activeElement&&document.activeElement===e[0]&&h({target:e[0]}),e.focus(h),e.blur(g)}(),this}}(window,jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/lib/jquery/jquery.hoverIntent.js' */
!function(e){e.fn.ghHoverIntent=function(t,n,o){var r={interval:100,sensitivity:7,timeout:0};r="object"==typeof t?e.extend(r,t):e.isFunction(n)?e.extend(r,{over:t,out:n,selector:o}):e.extend(r,{over:t,out:t,selector:n});var v,u,i,s,h=function(e){v=e.pageX,u=e.pageY},a=function(t,n){return n.hoverIntent_t=clearTimeout(n.hoverIntent_t),Math.abs(i-v)+Math.abs(s-u)<r.sensitivity?(e(n).off("mousemove.hoverIntent",h),n.hoverIntent_s=1,r.over.apply(n,[t])):(i=v,s=u,n.hoverIntent_t=setTimeout(function(){a(t,n)},r.interval),void 0)},I=function(e,t){return t.hoverIntent_t=clearTimeout(t.hoverIntent_t),t.hoverIntent_s=0,r.out.apply(t,[e])},c=function(t){var n=jQuery.extend({},t),o=this;o.hoverIntent_t&&(o.hoverIntent_t=clearTimeout(o.hoverIntent_t)),"mouseenter"==t.type?(i=n.pageX,s=n.pageY,e(o).on("mousemove.hoverIntent",h),1!=o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){a(n,o)},r.interval))):(e(o).off("mousemove.hoverIntent",h),1==o.hoverIntent_s&&(o.hoverIntent_t=setTimeout(function(){I(n,o)},r.timeout)))};return this.on({"mouseenter.hoverIntent":c,"mouseleave.hoverIntent":c},r.selector)}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ops/Collection.js' */
GH.Collection={},GH.Collection.Map=function(t){return this instanceof GH.Collection.Map?(this.clear(),_.forEach(t,function(t,e){this.put(e,t)},this),this):new GH.Collection.Map(t)},GH.Collection.Map.prototype.clear=function(){return this.length=0,this._valuesByKey={},this},GH.Collection.Map.prototype.forEach=function(t,e){return _.forEach(this._valuesByKey,t,e),this},GH.Collection.Map.prototype.get=function(t){return this._valuesByKey[t]},GH.Collection.Map.prototype.has=function(t){return _.has(this._valuesByKey,t)},GH.Collection.Map.prototype.keys=function(){return _.keys(this._valuesByKey)},GH.Collection.Map.prototype.put=function(t,e){return this.has(t)||this.length++,this._valuesByKey[t]=e,this},GH.Collection.Map.prototype.remove=function(t){return this.has(t)&&(delete this._valuesByKey[t],this.length--),this},GH.Collection.Map.prototype.replace=GH.Collection.Map,GH.Collection.Map.prototype.toPlainObject=function(){return _.extend({},this._valuesByKey)},GH.Collection.Map.prototype.values=function(){return _.values(this._valuesByKey)},GH.Collection.Set=function(){return this instanceof GH.Collection.Set?(this._map=new GH.Collection.Map,this.length=0,this.add.apply(this,arguments),this):GH.Collection.Set.apply(new GH.Collection.Set,arguments)},GH.Collection.Set.prototype.add=function(){var t=this._map;return _.forEach(arguments,function(e){t.put(e,!0)},this),this.length=t.length,this},GH.Collection.Set.prototype.clear=function(){return this.length=0,this._map.clear(),this},GH.Collection.Set.prototype.forEach=function(t,e){return this._map.forEach(function(o,i){return t.call(e,i)}),this},GH.Collection.Set.prototype.has=function(t){return this._map.has(t)},GH.Collection.Set.prototype.remove=function(){var t=this._map;return _.forEach(arguments,function(e){t.remove(e)},!0),this.length=t.length,this},GH.Collection.Set.prototype.replace=GH.Collection.Set,GH.Collection.Set.prototype.toArray=function(){return this._map.keys()},GH.Collection.OrderedSet=function(){return this instanceof GH.Collection.OrderedSet?(this.clear(),this.push.apply(this,arguments),this):GH.Collection.OrderedSet.apply(new GH.Collection.OrderedSet,arguments)},GH.Collection.OrderedSet.prototype.clear=function(){return this.length=0,this._values=[],this._positionByValue=new GH.Collection.Map,this},GH.Collection.OrderedSet.prototype.push=function(){var t=this._positionByValue,e=this._values;return _.forEach(arguments,function(o){t.has(o)||(t.put(o,e.length),e.push(o))},this),this._values=e,this.length=e.length,this},GH.Collection.OrderedSet.prototype.first=function(){return this.get(0)},GH.Collection.OrderedSet.prototype.forEach=function(t,e){return _.forEach(this._values,t,e),this},GH.Collection.OrderedSet.prototype.get=function(t){return this._values[t]},GH.Collection.OrderedSet.prototype.has=function(t){return this._positionByValue.has(t)},GH.Collection.OrderedSet.prototype.indexOf=function(t){var e=this._positionByValue.get(t);return _.isUndefined(e)?-1:e},GH.Collection.OrderedSet.prototype.last=function(){return this.get(this.length-1)},GH.Collection.OrderedSet.prototype.pop=function(){var t=this._values.pop();return this._positionByValue.remove(t),this.length=this._values.length,t},GH.Collection.OrderedSet.prototype.remove=function(){var t=this._values;return _.forEach(arguments,function(e){var o=_.indexOf(t,e);o!==-1&&(t=t.slice(0,o).concat(t.slice(o+1)))}),this.replace.apply(this,t),this},GH.Collection.OrderedSet.prototype.replace=GH.Collection.OrderedSet,GH.Collection.OrderedSet.prototype.shift=function(){var t=this._values,e=t.shift();return this.replace.apply(this,t),e},GH.Collection.OrderedSet.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},GH.Collection.OrderedSet.prototype.unshift=function(){var t=this._positionByValue,e=this._values;return _.forEach(arguments,function(o){t.has(o)||e.unshift(o)},this),this.replace.apply(this,e),this},GH.Collection.OrderedMap=function(t){return this instanceof GH.Collection.OrderedMap?(this.clear(),_.forEach(t,function(t,e){this.put(e,t)},this),this):new GH.Collection.OrderedMap(t)},GH.Collection.OrderedMap.prototype.clear=function(){return this.length=0,this._keys=[],this._values=[],this._indexByKey=new GH.Collection.Map,this._valueByKey=new GH.Collection.Map,this},GH.Collection.OrderedMap.prototype.forEach=function(t,e){for(var o=this._keys,i=this._values,n=0,r=o.length;n<r;n++)t.call(e,i[n],o[n],n);return this},GH.Collection.OrderedMap.prototype.get=function(t){return this._valueByKey.get(t)},GH.Collection.OrderedMap.prototype.getByIndex=function(t){return this._values[t]},GH.Collection.OrderedMap.prototype.getKeyByIndex=function(t){return this._keys[t]},GH.Collection.OrderedMap.prototype.has=function(t){return this._indexByKey.has(t)},GH.Collection.OrderedMap.prototype.indexOf=function(t){return this._indexByKey.indexOf(t)},GH.Collection.OrderedMap.prototype.keys=function(){return this._keys.slice(0)},GH.Collection.OrderedMap.prototype.put=function(t,e){return this.has(t)||(this._indexByKey.put(t,this.length),this._valueByKey.put(t,e),this._keys.push(t),this._values.push(e),this.length++),this},GH.Collection.OrderedMap.prototype.remove=function(t){var e=this._indexByKey.get(t);if(e!==-1){this._indexByKey.remove(t),this._valueByKey.remove(t);var o=this._keys;this._keys=o.slice(0,e).concat(o.slice(e+1));var i=this._values;this._values=i.slice(0,e).concat(i.slice(e+1)),this.length--}return this},GH.Collection.OrderedMap.prototype.replace=GH.Collection.OrderedMap,GH.Collection.OrderedMap.prototype.toPlainObject=function(){return this._valueByKey.toPlainObject()},GH.Collection.OrderedMap.prototype.values=function(){return this._values.slice(0)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/Animation.js' */
GH.RapidBoard.Animation=function(o){function r(o,r,e){return o.addClass(d).animate(r,e||a).promise().done(function(){o.removeClass(d)})}function e(e,t,n,i){var a=o(e);return a.css({height:t}),r(a,{height:n},i).done(function(){a.css({height:""})})}function t(e,t){var n=o(e),i=n.height();n.css("height","auto");var a=n.height();return n.css("height",i),r(n,{height:a},t).done(function(){n.css("height","auto")})}function n(e,t){var n=o(e);return r(n,{height:0},t)}function i(r,e,t){var n=o(r),i=e||"#fff",t=t||"#d6d6d6",a="#ebf2f9",c="#ccd9ea";n.addClass(d),n.stop().animate({"background-color":a,"border-top-color":c,"border-left-color":c,"border-right-color":c,"border-bottom-color":c},250).delay(1200).animate({"background-color":i,"border-top-color":t,"border-left-color":t,"border-right-color":t,"border-bottom-color":t},500).promise().done(function(){n.css({"background-color":"","border-top-color":"","border-left-color":"","border-right-color":"","border-bottom-color":""}),n.removeClass(d)})}var a=200,c=500,d="js-animation-inprogress";return{DEFAULT_DURATION:a,LONG_DURATION:c,animateHeight:e,animateHeightToAuto:t,animateHeightToZero:n,fadeElement:i}}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/RapidBoard.js' */
GH.RapidBoard.API_EVENT_CAUSE_BOARD_RELOAD="GH.RapidBoard.causeBoardReload",GH.RapidBoard.Analytics={},GH.RapidBoard.projectKey=void 0,GH.RapidBoard.projectId=void 0,GH.RapidBoard.deferBatchParsed=!1,GH.RapidBoard.nodeList=document.querySelectorAll("script[src*='batch.js'"),function(){var a=require("jira-agile/rapid/analytics-tracker");GH.RapidBoard.Analytics.toolsMenu=new a("gh.rapidboard.toolsmenu")}(),GH.RapidBoard.navigateToUrl=function(a){var e=require("jira/container-api");e.navigate(a,function(){location.href=a})},GH.RapidBoard.gotoRapidBoardPage=function(a,e){GH.RapidBoard.navigateToUrl(GH.RapidBoard.getRapidBoardPageUrl(a,e))},GH.RapidBoard.getRapidBoardPageUrl=function(a,e){var r=_.isUndefined(e)?"&useStoredSettings=true":"&view="+e;return GH.Navigation.getCanonicRapidBoardPageUrl(a)+r},GH.RapidBoard.gotoRapidViewConfiguration=function(a,e){GH.RapidBoard.navigateToUrl(GH.RapidBoard.getRapidViewConfigurationUrl(a,e))},GH.RapidBoard.getRapidViewConfigurationUrl=function(a,e){var r=GH.Ajax.CONTEXT_PATH+"/secure/RapidView.jspa?rapidView="+a;return e&&(r=r+"&config="+e),r},GH.RapidBoard.copyRapidViewAndGotoConfiguration=function(a,e){GH.RapidBoard.Analytics.toolsMenu.trigger("copy"),GH.Ajax.put({url:"/rapidview/"+a+"/copy"}).done(function(a){var r=AJS.format("Successfully copied board \u003cstrong\u003e{0}\u003c/strong\u003e to \u003cstrong\u003e{1}\u003c/strong\u003e.",AJS.escapeHTML(String(e)),AJS.escapeHTML(String(a.success.name)));GH.Notification.addPageLoadMessage(r),GH.RapidBoard.gotoRapidViewConfiguration(a.success.id)})},GH.RapidBoard.printCardsInRapidBoard=function(){var a=require("jira-agile/rapid/ui/print/card-printing-controller");GH.RapidBoard.State.isPlanMode()?a.printBoardPlanView(GH.RapidBoard.ViewController.collectPrintablePlanIssues()):GH.RapidBoard.State.isWorkMode()&&a.printBoardWorkView(GH.RapidBoard.ViewController.collectPrintableWorkIssues())},GH.RapidBoard.getManageViewsPageUrl=function(){return GH.Ajax.CONTEXT_PATH+"/jira/boards"},GH.RapidBoard.gotoManageViewsPage=function(a){GH.RapidBoard.navigateToUrl(GH.RapidBoard.getManageViewsPageUrl()+(a||""))},GH.RapidBoard.getCurrentPageReturnUrl=function(){var a=GH.RapidBoard.UrlState.getViewStateRequestParameterString(),e="/secure/RapidBoard.jspa?"+a;return encodeURIComponent(e)},GH.RapidBoard.reload=function(){var a=GH.RapidBoard.State.getRapidViewIdWithInfo();return new Promise(function(e){GH.RapidViewConfig.fetchConfiguration(a).done(function(r){return GH.RapidBoard.setNewViewData(r),a.viewId?GH.RapidBoard.ViewController.preload(a.viewId).then(e):e(!0)})})},GH.RapidBoard.setNewViewData=function(a){GH.RapidBoard.State.setRapidViewId(a.id),GH.RapidBoard.BoardHeader.update(a),GH.ViewActions.initViewActions(a),GH.ViewActions.on("boardToolsRendered",function(){var a=GH.RapidBoard.State.getMode(),e=a?a:"board";AJS.$("#board-tools-section-content .js-view-action-configure").bind("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software."+e+".boardmenu.click.configure-board"})})}),GH.RapidBoard.ViewController.update(a)},GH.RapidBoard.initListeners=function(a){var e=require("jira/featureflags/feature-manager"),r=require("jira-agile/rapid/deferred-resources-loader"),i=function(){return e.isFeatureEnabled("jsw.classic.keto")},t=function(){return e.isFeatureEnabled("cbb.heritage")};require("jira-agile/rapid/const/PageMode");GH.RapidBoard.projectKey=AJS.$('meta[name="ghx-project-key"]').attr("content"),GH.RapidBoard.projectId=AJS.$('meta[name="ghx-project-id"]').attr("content"),GH.Layout.init(),r.handleDeferredResourceImport(t()&&!GH.DetailsView,function(){GH.Dialog.CreateView.init()}),GH.RapidBoard.BoardHeader.init(),GH.RapidBoard.ViewController.init(a),i()?(r.handleDeferredResourceImport(i()&&!GH.RapidBoard.QuickCreate||!GH.RapidBoard.QuickCreate,function(){GH.RapidBoard.QuickCreate.init()}),r.handleDeferredResourceImport(i()&&!GH.RapidBoard.QuickEdit||!GH.RapidBoard.QuickEdit,function(){GH.RapidBoard.QuickEdit.init()})):(r.handleDeferredResourceImport(!GH.RapidBoard.QuickCreate,function(){GH.RapidBoard.QuickCreate.init()}),r.handleDeferredResourceImport(!GH.RapidBoard.QuickEdit,function(){GH.RapidBoard.QuickEdit.init()})),GH.RapidBoard.performanceMarkScriptEvalEnd(),JIRA.bind(GH.RapidBoard.API_EVENT_CAUSE_BOARD_RELOAD,GH.RapidBoard.reload)},GH.RapidBoard.dropDeferBatchingInitialEventForSPA=function(){AJS.$(GH).trigger("deferBatchingDownloadInitiate")},GH.RapidBoard.performanceMarkScriptEvalEnd=function(){var a=this,e=GH.RapidBoard.nodeList,r=Array.from(e).filter(function(a){var e=a.attributes.src;return e&&e.value&&e.value.indexOf("greenhopper-rapid-non-gadget")!=-1});r.forEach(function(e){return e.addEventListener("load",GH.RapidBoard.addEndMark.call(a,e))})},GH.RapidBoard.getDeferredFragmentContext=function(){var a=GH.RapidBoard.nodeList,e="";Array.from(a).filter(function(a){var r=a.attributes.src;r&&r.value&&r.value.indexOf("gh-rapid-lwf-board")!=-1?e="gh-rapid-lwf-board-deferred":r&&r.value&&r.value.indexOf("greenhopper-rapid-non-gadget-backlog")!=-1&&(e="gh-rapid-backlog-deferred")});return e},GH.RapidBoard.addEndMark=function(a){a.removeEventListener("load",GH.RapidBoard.addEndMark);try{window.performance.mark(GH.RapidBoard.extractContextsFromUrl(a.attributes.src.value)+"_batch_file_eval:end")}catch(e){}},GH.RapidBoard.extractContextsFromUrl=function(a){var e="js/",r="/batch.js";return a.substring(a.lastIndexOf(e)+e.length,a.lastIndexOf(r))},GH.RapidBoard.init=function(){var a=require("jira/featureflags/feature-manager"),e=function(){return a.isFeatureEnabled("jsw_classic_boards_experimental_loading_skeleton_dpgxz")},r=require("jira-agile/rapid/const/PageMode");if(!AJS.$("body.ghx-print-card-body").length){GH.RapidBoard.State.setNewIssueViewEnabled(AJS.$("#ghx-issue-fragment").length>0),GH.RapidBoard.AnalyticsClient=require("jira/analytics/web-client");var i=require("jira-agile/rapid/global-events");i.trigger("pre-initialization");var t=GH.RapidBoard.UrlState.getCurrentUrlState();AJS.$("#gh").html(GH.tpl.board.x.renderRapidBoard({isWorkMode:GH.RapidBoard.State.getMode()===r.WORK&&!t.config,isExperimentalSkeletonEnabled:e()})),AJS.$("body").addClass("ghx-scroll-columns"),AJS.$.support.touch&&AJS.$("#gh").removeClass("ghx-no-touch").addClass("ghx-touch"),AJS.$(GH).bind("ghx.rapidview.deleted",function(a,e){GH.Notification.addPageLoadMessage(e.message),GH.RapidBoard.gotoManageViewsPage()});var d=parseInt(t.rapidView);(_.isUndefined(d)||_.isNaN(d))&&(d=GH.RapidBoard.State.getRapidViewId());var o=require("jira/container-api");return o.onParentDidMount(function(){window.setTimeout(function(){GH.Layout.updateWindowSize()&&GH.Layout.fireDelayedWindowResize()},100)}),o.onParentRequestRefresh(function(a){a.force?window.location.reload():GH.RapidBoard.reload()}),o.init(),new Promise(function(a){return GH.RapidViewConfig.fetchConfiguration(d).done(function(e){GH.spa&&(GH.spa.historyAdapter=GH.spa.historyAdapter||{bind:function(a,e,r){jQuery(a).bind(e,r)}}),GH.RapidBoard.initListeners(e),GH.RapidBoard.State.initializeState();var r=require("jira/featureflags/feature-manager"),i=require("jira-agile/rapid/deferred-resources-loader"),t=require("jira-agile/rapid/const/PageMode");if(!r.isFeatureEnabled("jsw.classic.keto")||GH.RapidBoard.State.getMode()!==t.WORK&&GH.RapidBoard.State.getMode()!==t.PLAN)GH.RapidBoard.State.getMode()===t.WORK&&(i.deferJSLoad(["wrc!gh-rapid-lwf-board-deferred"]),GH.RapidBoard.dropDeferBatchingInitialEventForSPA());else{var d="wrc!"+GH.RapidBoard.getDeferredFragmentContext();r.isFeatureEnabled("cbb.heritage")?i.deferJSLoad(["wrc!jira.global","wrc!jira.general","wrc!atl.global","wrc!atl.general",d]):i.deferJSLoad([d]),GH.RapidBoard.dropDeferBatchingInitialEventForSPA()}AJS.$(GH).bind("deferBatchParsingFailed",function(){}),GH.RapidBoard.reload(),i.handleDeferredResourceImport(r.isFeatureEnabled("jsw.classic.keto")&&!GH.Poller,function(){GH.Poller.init()}),GH.RapidBoard.fireShowBoardAnalytics(e),a()})})}},function(){GH.RapidBoard.refreshBoardData=function(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=require("jira/featureflags/feature-manager"),r=parseInt(GH.RapidBoard.UrlState.getCurrentUrlState().rapidView),i=!0;return GH.WorkDataLoader.markDirty(),e.isFeatureEnabled("jsw.classic.send.etag")?a||GH.WorkDataLoader.clearEtag():GH.WorkDataLoader.clearEtag(),GH.RapidViewConfig.fetchConfiguration(r,i).then(function(a){return a.isSimpleBoard&&location.reload(),GH.RapidBoard.fireShowBoardAnalytics(a),GH.RapidBoard.UrlState.loadState(),GH.RapidBoard.setNewViewData(a),Promise.all([GH.RapidBoard.ViewController.preload(r),GH.RapidBoard.ViewController.sidebarController.updateSidebar(r)])})}}(),GH.RapidBoard.loadNewBoard=function(a){return GH.RapidBoard.State.setRapidViewId(a),GH.RapidBoard.State.pushState(),GH.RapidBoard.refreshBoardData()},GH.RapidBoard.viewModelComparator=function(a,e){return"string"!=typeof a.name?-1:"string"!=typeof e.name?1:a.name.toLowerCase()<e.name.toLowerCase()?-1:a.name.toLowerCase()>e.name.toLowerCase()?1:0},GH.RapidBoard.fireShowBoardAnalytics=function(a){function e(){JIRA.SmartAjax.makeRequest({type:"GET",contentType:"application/json",url:GH.Ajax.CONTEXT_PATH+"/rest/api/2/project/"+GH.RapidBoard.projectKey,success:function(a){"projectTypeKey"in a&&"software"!==a.projectTypeKey&&AJS.trigger("analytics",{name:"gh.rapidboard.show.global",data:{projectType:a.projectTypeKey}})}})}var r=!_.isUndefined(a);r&&(AJS.trigger("analytics",{name:"gh.rapidboard.show"}),AJS.trigger("analytics",{name:"gh.rapidboard.show."+(a.sprintSupportEnabled?"scrum":"kanban"),data:{boardId:a.id,kanbanBacklogEnabled:!!a.kanPlanEnabled,locationType:a.locationType}}),_.isEmpty(GH.RapidBoard.projectKey)||e())},GH.RapidBoard.sendIssueUpdatedTrackEvent=function(a,e){var r=require("jira/featureflags/feature-manager"),i=require("jira-agile/rapid/deferred-resources-loader");i.handleDeferredResourceImport(r.isFeatureEnabled("jsw.classic.keto")&&!GH.WorkController,function(){var r=GH.WorkController.rapidViewData,i=GH.RapidBoard.State.getBoardTypeForAnalytics(),t={source:GH.RapidBoard.State.isPlanMode()?"backlogScreen":"boardScreen",actionSubject:"issue",action:"updated",actionSubjectId:a.id,containerType:"project",containerId:a.projectId,objectType:"issue",objectId:a.id,attributes:{issueTypeId:a.typeId,projectType:"software",boardId:r.id,boardType:i,updatedItems:e}};GH.RapidBoard.AnalyticsClient.sendTrackEvent(t)})},GH.RapidBoard.updateMultilineQuickFilterToggledState=function(){var a=GH.RapidBoard.State.getRapidViewId(),e=GH.RapidBoard.State.getMode(),r=a&&e?"__storejs_quickfilters_"+a+"_"+e:null;if(r){var i=GH.storage.get(r);null!==i&&i!==GH.bridge.FilterBridge.isMultilineQuickFilterActive()&&GH.bridge.FilterBridge.toggleMultilineQuickFilterTrigger()}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/dialog/InlineDialog.js' */
define("jira-agile/dialog/inline",["_","aui/inline-dialog"],function(i,n){var e={create:function(i,e,l,r){return r=r||{},GH.InlineDialog.remove(i),r=GH.InlineDialog._addBlurTriggerOverride(r,e),n(AJS.$(e),i,l,r)},remove:function(i){AJS.$("#inline-dialog-"+i).remove()},registerInlineDialogHacks:function(i,n){var e=n&&n.disregardClickSelectors||[],l=n&&n.validateClickToCloseFn||!1;AJS.$(document).bind("showLayer",function(n,r,a){"inlineDialog"===r&&a.id===i&&(a._validateClickToClose=function(i){for(var n=this.id,r=0;r<e.length;r++){var a=AJS.$(i.target);if(a.parents(e[r]).length>0)return!1;if(a.is(e[r]))return!1}return!(AJS.$(i.target).parents("#inline-dialog-"+n).length>0)&&!(l&&!l(i))},AJS.$("body").unbind("click."+a.id+".inline-dialog-check"))})},preventCloseOnClick:function(i){AJS.$(document).on("click","#inline-dialog-"+i,function(i){i.stopPropagation()})},_addBlurTriggerOverride:function(n,e){var l=n.upfrontCallback;return i.defaults({upfrontCallback:function(){AJS.$(e).blur(),i.isFunction(l)&&l.apply(this,arguments)}},n)}};return e}),AJS.namespace("GH.InlineDialog",null,require("jira-agile/dialog/inline"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/dialog/SideInlineDialog.js' */
define("jira-agile/dialog/side-inline",["jira-agile/dialog/inline","_"],function(e,i){return{create:function(n,a,l,r){return r=r||{},i.defaults(r,{gravity:"w",offsetX:15,offsetY:0}),e.create(n,a,l,r)}}}),AJS.namespace("GH.SideInlineDialog",null,require("jira-agile/dialog/side-inline"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/dialog/CreateView.soy' */
// This file was automatically generated from CreateView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.createviewdialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.createviewdialog == 'undefined') { GH.tpl.createviewdialog = {}; }


GH.tpl.createviewdialog.renderDialog = function(opt_data, opt_ignored) {
  return '<div class="aui-tabs horizontal-tabs"><ul class="tabs-menu"><li class="menu-item active-tab"><a href="#ghx-create-presets"><strong>' + soy.$$escapeHtml('Presets') + '</strong></a></li><li class="menu-item"><a href="#ghx-create-advanced"><strong>' + soy.$$escapeHtml('Advanced') + '</strong></a></li></ul><div class="tabs-pane active-pane" id="ghx-create-presets">' + GH.tpl.createviewdialog.renderPresets(null) + '</div><div class="tabs-pane" id="ghx-create-advanced">' + GH.tpl.createviewdialog.renderAdvanced(opt_data) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderDialog.soyTemplateName = 'GH.tpl.createviewdialog.renderDialog';
}


GH.tpl.createviewdialog.renderPresets = function(opt_data, opt_ignored) {
  return '<div class="ghx-options">' + GH.tpl.createviewdialog.renderScrum(null) + GH.tpl.createviewdialog.renderKanban(null) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderPresets.soyTemplateName = 'GH.tpl.createviewdialog.renderPresets';
}


GH.tpl.createviewdialog.renderScrum = function(opt_data, opt_ignored) {
  return '<div class="ghx-module ghx-scrum"><h2>' + soy.$$escapeHtml('Scrum') + '</h2><p class="ghx-module-description">' + soy.$$escapeHtml('Scrum is a method of development where the focus is on planning, committing and delivering time-boxed chunks of work called Sprints.') + '</p><p>' + soy.$$escapeHtml('Presets are:') + '</p><ul><li>' + soy.$$escapeHtml('Story swimlanes') + '</li><li>' + soy.$$escapeHtml('Story Points as estimation statistic') + '</li><li>' + soy.$$escapeHtml('Two-week iterations (starting today)') + '</li><li>' + soy.$$escapeHtml('Standard Quick Filters') + '</li><li>' + soy.$$escapeHtml('Issues ordered by Rank') + '</li><li>' + soy.$$escapeHtml('Columns: To Do, In Progress, Done') + '</li></ul><p>' + soy.$$escapeHtml('These settings can be changed later.') + '</p><button class="aui-button">' + soy.$$escapeHtml('Select Scrum') + '</button></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderScrum.soyTemplateName = 'GH.tpl.createviewdialog.renderScrum';
}


GH.tpl.createviewdialog.renderKanban = function(opt_data, opt_ignored) {
  return '<div class="ghx-module ghx-kanban"><h2>' + soy.$$escapeHtml('Kanban') + '</h2><p class="ghx-module-description">' + soy.$$escapeHtml('Kanban is a method of development where the focus is on visualising your workflow and limiting work-in-progress. This assists you in making incremental improvements to your existing process.') + '</p><p>' + soy.$$escapeHtml('Presets are:') + '</p><ul><li>' + soy.$$escapeHtml('Expedite swimlane') + '</li><li>' + soy.$$escapeHtml('Issue Count as column statistic') + '</li><li>' + soy.$$escapeHtml('Days in column indicator') + '</li><li>' + soy.$$escapeHtml('Standard Quick Filters') + '</li><li>' + soy.$$escapeHtml('Issues ordered by Rank') + '</li><li>' + soy.$$escapeHtml('Columns: To Do, In Progress, Done') + '</li></ul><p>' + soy.$$escapeHtml('These settings can be changed later.') + '</p><button class="aui-button">' + soy.$$escapeHtml('Select Kanban') + '</button></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderKanban.soyTemplateName = 'GH.tpl.createviewdialog.renderKanban';
}


GH.tpl.createviewdialog.renderAdvanced = function(opt_data, opt_ignored) {
  return '<form action="#" method="post" class="aui"><p>' + soy.$$escapeHtml('Advanced allows the creation of a Kanban board using an existing Jira Saved Filter') + '</p><div class="field-group"><label for="ghx-view-name">' + soy.$$escapeHtml('Board name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-view-name" name="name"></div><h3>' + soy.$$escapeHtml('Jira Filter') + '</h3><fieldset><div class="field-group" id="ghx-filter-picker"><label for="ghx-create-filter-select">' + soy.$$escapeHtml('Saved filter') + '</label>' + ((opt_data.canSeeSavedFilters) ? '<select id="ghx-create-filter-select" class="hidden"></select><div id="ghx-filter-error"></div>' : '<span class="field-value">' + soy.$$escapeHtml('There are no saved filters.') + ' <a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/secure/IssueNavigator.jspa?mode=show&amp;createNew=true">' + soy.$$escapeHtml('Create a filter now.') + '</a></span>') + '</div><div id="ghx-create-permissioninfo-container"></div></fieldset><fieldset><div class="field-group"><button id="ghx-create-advanced-submit" class="aui-button ' + ((! opt_data.canSeeSavedFilters) ? 'js-disabled' : '') + '"' + ((! opt_data.canSeeSavedFilters) ? ' disabled="disabled"' : '') + '>' + soy.$$escapeHtml('Create') + '</button></div></fieldset></form>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderAdvanced.soyTemplateName = 'GH.tpl.createviewdialog.renderAdvanced';
}


GH.tpl.createviewdialog.renderCreateNewView = function(opt_data, opt_ignored) {
  return '<div class="ghx-module"><form class="aui"><fieldset><div class="field-group"><label for="name">' + soy.$$escapeHtml('Board Name') + '<span class="aui-icon icon-required"></span></label><input class="text" type="text" id="ghx-dialog-create-view-viewname"></div><div class="field-group"><label for="projects">' + soy.$$escapeHtml('Projects') + '<span class="aui-icon icon-required"></span></label><select id="ghx-dialog-create-view-viewprojects" multiple="multiple" class="hidden"></select><div class="description">' + soy.$$escapeHtml('Select the projects to be included in this board.') + '</div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.createviewdialog.renderCreateNewView.soyTemplateName = 'GH.tpl.createviewdialog.renderCreateNewView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/dialog/CreateView.js' */
!function(){"use strict";var e=require("aui/tabs"),a=require("jquery"),t=require("jira/featureflags/feature-manager"),i=require("jira/container-api"),r=t.isFeatureEnabled("endeavour.rapid-board.imperative-api.create-board");GH.Dialog.CreateView={};var n=require("jira-agile/rapid/analytics-tracker");GH.Dialog.CreateView.analytics=new n("gh.create.view"),GH.Dialog.CreateView.init=function(){r?a(document).on("click",".js-view-action-create",function(){i.APIs.getNavigationAPI().then(function(e){return e.createBoard()})}):GH.Dialog.registerDialog(".js-view-action-create",GH.StartWizardView.startWizard),GH.Dialog.registerDialog(".js-view-action-create-scrum",GH.Dialog.CreateView.openCreateScrum),GH.Dialog.registerDialog(".js-view-action-create-kanban",GH.Dialog.CreateView.openCreateKanban)},GH.Dialog.CreateView.openCreateScrum=function(){GH.Dialog.CreateView.openPresetDialog("scrum")},GH.Dialog.CreateView.openCreateKanban=function(){GH.Dialog.CreateView.openPresetDialog("kanban")},GH.Dialog.CreateView.open=function(){GH.Ajax.get({url:"/rapidview/createmodel"},"createView").done(GH.Dialog.CreateView.openWizard)},GH.Dialog.CreateView.openWizard=function(e){var a=function(e){GH.Dialog.CreateView.analytics.trigger("cancel",e.curpage.toString())},t=GH.Dialog.create({width:600,height:600,id:"ghx-dialog-create-view",onCancelFn:a});GH.Dialog.CreateView.analytics.trigger("start"),GH.Dialog.CreateView.renderSelectPresetPage(t,e),t.addPage(),GH.Dialog.CreateView.renderSelectNameAndProjectsPage(t,!0),t.gotoPage(0),t.gotoPanel(0),t.show(),GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.prepareNotificationDiv),AJS.$(t.getCurrentPanel().body).trigger("contentRefresh")},GH.Dialog.CreateView.openPresetDialog=function(e){var a=function(e){GH.Dialog.CreateView.analytics.trigger("cancel",e.curpage.toString())},t=GH.Dialog.create({width:600,height:600,id:"ghx-dialog-create-view",onCancelFn:a});t.selectedPreset=e,GH.Dialog.CreateView.analytics.trigger("start",e),GH.Dialog.CreateView.renderSelectNameAndProjectsPage(t,!1),t.gotoPage(0),t.gotoPanel(0),t.show(),t.updateHeight(),GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.prepareNotificationDiv),AJS.$("#"+t.id).find("input:visible:first").focus()},GH.Dialog.CreateView.renderSelectPresetPage=function(e,a){function t(){e.nextPage(),e.updateHeight(),AJS.$("#"+e.id).find("input:visible:first").focus(),GH.Dialog.CreateView.prepareNotificationDiv=function(){var a=AJS.$(e.getCurrentPanel().body),t=AJS.$("<div/>");return t.addClass("dialog-panel-body").prependTo(a),e.updateHeight(),t},GH.Notification.Handler.setCustomNotificationHandler(GH.Dialog.CreateView.prepareNotificationDiv)}var i=require("jira/ajs/select/single-select");e.addHeader("Create Board"),AJS.$("#"+e.id).addClass("ghx-dialog-create-view");var r=AJS.$(GH.tpl.createviewdialog.renderDialog({canSeeSavedFilters:a.canSeeSavedFilters}));e.addPanel("Select a Preset",r,"ghx-dialog-create-view-page"),GH.Dialog.CreateView.setupTabs(e.id),GH.Dialog.addCancelButton(e);var n=AJS.$("#"+e.id).find(".ghx-kanban button"),o=AJS.$("#"+e.id).find(".ghx-scrum button");n.click(function(){e.selectedPreset="kanban",t()}),o.click(function(){e.selectedPreset="scrum",t()}),r.find("form").submit(function(){return GH.Dialog.CreateView.submitAdvanced(),!1});var l=AJS.$("#ghx-create-filter-select");if(l.size()>0){new i({element:l,width:300,removeOnUnSelect:!0,overlabel:"Start typing for Filters",itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:!0,url:GH.Ajax.buildRestUrl("/savedfilter/list.json"),formatResponse:function(e){if(e.errors){var a=GH.Ajax._convertJiraErrors(e.errors),t={searchName:"#ghx-create-filter-select"};return GH.Ajax.handleContextualErrors(a,t),!1}AJS.$("#ghx-create-filter-select").siblings(".ghx-error").remove();var i=[];return AJS.$(e.filters).each(function(){i.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name)),savedFilter:this}))}),i}}});l.bind("selected",function(e,a){GH.Dialog.CreateView.updatePermissionInfo(a.properties.savedFilter)}),l.bind("unselect",function(e){GH.Dialog.CreateView.updatePermissionInfo(null)})}var d=AJS.$("#ghx-create-advanced-submit");d.click(function(a){return e.disableControls(),GH.Dialog.CreateView.submitAdvanced(e),!1})},GH.Dialog.CreateView.renderSelectNameAndProjectsPage=function(e,a){var t=AJS.$("#"+e.id),i="Create Board";"scrum"===e.selectedPreset?i="Create Scrum Board":"kanban"===e.selectedPreset&&(i="Create Kanban Board"),e.addHeader(i),t.addClass("ghx-dialog");var r=AJS.$(GH.tpl.createviewdialog.renderCreateNewView());e.addPanel(i,r,"ghx-dialog-create-view-page"),a&&e.addButton("Back",function(e){e.prevPage(),e.updateHeight()},"aui-button");var n=function(){var a=AJS.$("#"+e.id).find(".ghx-next");d()?a.attr("disabled","disabled").addClass("js-disabled"):a.removeAttr("disabled").removeClass("js-disabled")},o=t.find("#ghx-dialog-create-view-viewname"),l=new GH.BoardLocationPicker({selector:"#ghx-dialog-create-view-viewprojects",projectsOnly:!0,change:n,currentProjectId:JIRA.API&&JIRA.API.Projects?JIRA.API.Projects.getCurrentProjectId():null}),d=function(){return!o.val()||!l.hasValue()||l.hasErrors()},s=function(e){if(d()){var a=AJS.$("#"+e.id).find(".ghx-next");return a.attr("disabled","disabled").addClass("js-disabled"),!1}return GH.Dialog.CreateView.submitPresets(e)};e.addButton("Create",s,"ghx-next aui-button"),r.find("form").submit(function(){return s(e),!1}),GH.Dialog.addCancelButton(e),t.find(".ghx-next").attr("disabled","disabled").addClass("js-disabled"),o.keyup(n)},GH.Dialog.CreateView.setupTabs=function(a){e.setup();var t=GH.Dialog.CreateView.State.getPreferredTab();t&&e.change(AJS.$("a[href="+t+"]")),AJS.$("#"+a+" .menu-item").click(function(){var e=AJS.$(this);GH.Dialog.CreateView.State.setPreferredTab(e.find("a:first").attr("href"))})},GH.Dialog.CreateView.submitPresets=function(e){AJS.$(e.getCurrentPanel().body).find(".ghx-error").remove();var a=e.selectedPreset,t={name:AJS.$("#ghx-dialog-create-view-viewname").val(),projectIds:AJS.$("#ghx-dialog-create-view-viewprojects").val(),preset:a},i={name:"#ghx-dialog-create-view-viewname",projectIds:"#ghx-dialog-create-view-viewprojects",preset:a},r=function(e){"scrum"===a?GH.Dialog.CreateView.handleCreateResult(e,function(e){return GH.RapidBoard.gotoRapidBoardPage(e,"planning")},"preset",a):GH.Dialog.CreateView.handleCreateResult(e,GH.RapidBoard.gotoRapidBoardPage,"preset",a)};GH.Ajax.post({url:"/rapidview/create/presets",data:t,errorContextMap:i}).done(r)},GH.Dialog.CreateView.submitAdvanced=function(e){var a=AJS.$("#ghx-view-name"),t=a.val(),i=AJS.$("#ghx-create-filter-select");if(!GH.Validation.notBlank(a,"Name is a required field"))return void e.enableControls();if(!GH.Validation.notBlank(i,"A saved filter is required","#ghx-filter-error"))return void e.enableControls();var r=i.val()||[];GH.Ajax.post({url:"/rapidview/create/advanced",data:{name:t,filterId:r[0]},errorContextMap:{name:"#ghx-view-name",filterId:"#ghx-create-filter-select"}}).done(function(e){GH.Dialog.CreateView.handleCreateResult(e,GH.RapidBoard.gotoRapidViewConfiguration,"advanced","advanced")}).fail(e.enableControls)},GH.Dialog.CreateView.handleCreateResult=function(e,a,t,i){GH.Dialog.CreateView.analytics.trigger("complete",i);var r=t!==i&&i;"simple"!==t&&GH.PersistentMessages.CreateViewMessage.setView(e.success.id,e.success.name,t,r),a(e.success.id)},GH.Dialog.CreateView.updatePermissionInfo=function(e){var a=null!=e?GH.tpl.rapid.view.renderPermissionInfo({savedFilter:e}):"";AJS.$("#ghx-create-permissioninfo-container").html(a)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/dialog/CreateViewState.js' */
GH.Dialog.CreateView.State={},GH.Dialog.CreateView.State.data={},GH.Dialog.CreateView.State.setPreferredTab=function(e){GH.storage.put("gh.dialog.createView.preferredTab",e,!0)},GH.Dialog.CreateView.State.getPreferredTab=function(){return GH.storage.get("gh.dialog.createView.preferredTab",!0)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/BoardAdminsPicker.js' */
GH.RapidBoard.BoardAdminsPicker=function(e){this.selector=e.selector,this.change=e.change,this.initialData=e.initialData,this.editData=e.editData,this.blur=e.blur},GH.RapidBoard.BoardAdminsPicker.prototype.show=function(){var e=AJS.$(this.selector);this.select=e,this.multiselect=new AJS.MultiSelect({element:e,width:400,errorMessage:"",itemAttrDisplayed:"label",ajaxOptions:{url:GH.Ajax.CONTEXT_PATH+GH.Ajax.REST_URL_BASE+"/rapidviewconfig/boardadminspicker?maxResults=15",formatResponse:function(e){var r,i=new AJS.GroupDescriptor({weight:0,label:"Groups"}),t=new AJS.GroupDescriptor({weight:1,label:"Users"});return _.each(e.users,function(e){e.key=e.key||e.name;var i=e.displayName;r=GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor("user",e.key,i,i),t.addItem(r)}),_.each(e.groups,function(e){r=GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor("group",e.name,e.name,e.name),i.addItem(r)}),[i,t]},query:!0}}),this.multiselect._addMultipleItems(this.initialData),this.select.bind("unselect",this.change),this.select.bind("change",this.change),this.multiselect.$field.focus(),this.multiselect.$field.blur(this.blur)},GH.RapidBoard.BoardAdminsPicker.prototype.getAjaxValue=function(){var e=this.getValue(),r={userKeys:[],groupKeys:[]};return null==e?r:(_.each(e,function(e){var i=e.split(":"),t=i[0],a=i.slice(1).join(":");i.length<2||("user"==t&&r.userKeys.push(a),"group"==t&&r.groupKeys.push(a))}),r)},GH.RapidBoard.BoardAdminsPicker.buildItemDescriptor=function(e,r,i,t){return new AJS.ItemDescriptor({value:e+":"+r,label:i,html:AJS.escapeHTML(String(t))})},GH.RapidBoard.BoardAdminsPicker.prototype.hasValue=function(){return!!this.select.val()},GH.RapidBoard.BoardAdminsPicker.prototype.hasErrors=function(){return this.multiselect.$container.parent().find(".error").length>0},GH.RapidBoard.BoardAdminsPicker.prototype.getValue=function(){return this.select.val()},GH.RapidBoard.BoardAdminsPicker.prototype.getElement=function(){return this.select},GH.RapidBoard.BoardAdminsPicker.sortModel=function(e){var r=function(e,r){return e.displayName.toLowerCase().localeCompare(r.displayName.toLowerCase())};return{userKeys:e.userKeys.sort(r),groupKeys:e.groupKeys.sort(r)}},GH.RapidBoard.BoardAdminsPicker.getOrderedUnion=function(e){var r=GH.RapidBoard.BoardAdminsPicker.sortModel(e);return _.union(r.groupKeys,r.userKeys)},GH.RapidBoard.BoardAdminsPicker.getAdminsDisplayModel=function(e){var r=GH.RapidBoard.BoardAdminsPicker.sortModel(e),i=_.map(r.groupKeys,function(e){return e.isUser=!1,e}),t=_.map(r.userKeys,function(e){return e.isUser=!0,e});return _.union(i,t)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/dialog/FindView.soy' */
// This file was automatically generated from FindView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.findviewdialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.findviewdialog == 'undefined') { GH.tpl.findviewdialog = {}; }


GH.tpl.findviewdialog.renderFindExistingView = function(opt_data, opt_ignored) {
  return '<div class="ghx-module"><form class="aui"><fieldset><div class="field-group"><label for="name">' + soy.$$escapeHtml('Board Name') + '<span class="aui-icon icon-required"></span></label><select id="ghx-welcome-find-viewname" class="hidden"></select><div class="description">' + soy.$$escapeHtml('Start typing to get a list of possible matches.') + '</div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.findviewdialog.renderFindExistingView.soyTemplateName = 'GH.tpl.findviewdialog.renderFindExistingView';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/dialog/FindView.js' */
!function(){"use strict";GH.Dialog.FindView={};var e=require("jira-agile/rapid/analytics-tracker");GH.Dialog.FindView.analytics=new e("gh.welcome.find.view"),GH.Dialog.FindView.init=function(){GH.Dialog.registerDialog(".js-find-view",GH.Dialog.FindView.openFindExistingViewDialog)},GH.Dialog.FindView.openFindExistingViewDialog=function(){var e=function(e){GH.Dialog.FindView.analytics.trigger("cancel",e.curpage.toString())},i=GH.Dialog.create({width:600,height:215,id:"ghx-welcome-dialog-view-find",onCancelFn:e});i.eventCategory="gh.welcome.find.view",GH.Dialog.FindView.analytics.trigger("start"),GH.Dialog.FindView.showFindViewStep(i),i.gotoPage(0),i.gotoPanel(0),i.show(),AJS.$("#ghx-welcome-find-viewname-field").focus(),AJS.$(i.getCurrentPanel().body).trigger("contentRefresh")},GH.Dialog.FindView.showFindViewStep=function(e){var i=require("jira/ajs/select/single-select");e.addHeader("Find an Existing Board"),AJS.$("#"+e.id).addClass("ghx-dialog");var n=AJS.$(GH.tpl.findviewdialog.renderFindExistingView());e.addPanel("Find an Existing Board",n,"ghx-welcome-page"),e.addButton("Use",GH.Dialog.FindView.validateViewFind,"aui-button"),n.find("form").submit(function(){return GH.Dialog.FindView.validateViewFind(e),!1});new i({element:AJS.$("#ghx-welcome-find-viewname"),width:300,removeOnUnSelect:!0,overlabel:"Start typing for names",itemAttrDisplayed:"label",errorMessage:"",ajaxOptions:{query:!0,url:GH.Ajax.buildRestUrl("/rapidviews/list.json"),formatResponse:function(e){var i=[];return AJS.$(e.views).each(function(){i.push(new AJS.ItemDescriptor({value:this.id.toString(),label:this.name,html:AJS.escapeHTML(String(this.name))}))}),i}}});GH.Dialog.addCancelButton(e)},GH.Dialog.FindView.validateViewFind=function(e){var i={id:AJS.$("#ghx-welcome-find-viewname").val()},n={viewName:"#ghx-welcome-find-viewname"},a=function(){GH.Dialog.FindView.analytics.trigger("complete"),GH.RapidBoard.gotoRapidBoardPage(i.id)};AJS.$(e.getCurrentPanel().body).find(".ghx-error").remove(),GH.Ajax.get({url:"welcome/validateViewFind",data:i,errorContextMap:n},"validateViewFind").done(a)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/Avatar.soy' */
// This file was automatically generated from Avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.avatar.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.avatar == 'undefined') { GH.tpl.avatar = {}; }


GH.tpl.avatar.renderIssueAvatar = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issue.avatarUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.issue.avatarUrl) + '" class="ghx-avatar-img"' + ((opt_data.tooltipHtml) ? 'alt="' + soy.$$escapeHtml(opt_data.tooltipHtml) + '" data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipHtml) + '"' : '') + '>' : '');
};
if (goog.DEBUG) {
  GH.tpl.avatar.renderIssueAvatar.soyTemplateName = 'GH.tpl.avatar.renderIssueAvatar';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/field/StatusRenderer.soy' */
// This file was automatically generated from StatusRenderer.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.status.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.status == 'undefined') { GH.tpl.status = {}; }


GH.tpl.status.renderIcon = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy3 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy3, maxWidth: opt_data.maxWidth}) : '<img src="' + soy.$$escapeHtml(opt_data.status.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.status.name) + '" title="' + soy.$$escapeHtml(opt_data.status.name) + '">' : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderIcon.soyTemplateName = 'GH.tpl.status.renderIcon';
}


GH.tpl.status.renderText = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy22 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy22, maxWidth: opt_data.maxWidth}) : soy.$$escapeHtml(opt_data.status.name) : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderText.soyTemplateName = 'GH.tpl.status.renderText';
}


GH.tpl.status.renderFull = function(opt_data, opt_ignored) {
  var output = '';
  var isSubtleFinal__soy35 = opt_data.isSubtle == undefined ? true : opt_data.isSubtle;
  output += (opt_data.status) ? (opt_data.status.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.status, isCompact: opt_data.isCompact, isSubtle: isSubtleFinal__soy35}) : '<img src="' + soy.$$escapeHtml(opt_data.status.iconUrl) + '" alt="' + soy.$$escapeHtml(opt_data.status.name) + '" title="' + soy.$$escapeHtml(opt_data.status.name) + '">' + soy.$$escapeHtml(opt_data.status.name) + '</img>' : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.status.renderFull.soyTemplateName = 'GH.tpl.status.renderFull';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/field/EpicLinkRenderer.soy' */
// This file was automatically generated from EpicLinkRenderer.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.field.epicLink.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.field == 'undefined') { GH.tpl.field = {}; }
if (typeof GH.tpl.field.epicLink == 'undefined') { GH.tpl.field.epicLink = {}; }


GH.tpl.field.epicLink.renderEpicLink = function(opt_data, opt_ignored) {
  var output = '';
  var name__soy3 = '' + GH.tpl.epic.getEpicNameStringNoAutoescape({epicLabel: opt_data.field.text, epicKey: opt_data.field.epicKey});
  output += (opt_data.removableIfAllowed && opt_data.field.canRemoveEpic) ? GH.tpl.field.issueLabel.renderLabel({extraClasses: ['js-epic-remove', opt_data.field.epicColor], isCloseable: true, closeIconText: 'Remove from epic', text: name__soy3, extraAttributes: {title: name__soy3, 'data-epickey': opt_data.field.epicKey}}) : GH.tpl.field.issueLabel.renderLabel({extraClasses: (opt_data.extraClasses != null ? opt_data.extraClasses : '') + ' ' + opt_data.field.epicColor, text: name__soy3, extraAttributes: {title: name__soy3, 'data-epickey': opt_data.field.epicKey}});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.field.epicLink.renderEpicLink.soyTemplateName = 'GH.tpl.field.epicLink.renderEpicLink';
}


GH.tpl.field.epicLink.renderEpicLinkFromIssue = function(opt_data, opt_ignored) {
  return '' + GH.tpl.field.issueLabel.renderLabel({extraClasses: opt_data.extraClasses + ' ' + opt_data.epic.epicColor, text: opt_data.epic.epicLabel, extraAttributes: {title: opt_data.epic.epicLabel, 'data-epickey': opt_data.epic.key}});
};
if (goog.DEBUG) {
  GH.tpl.field.epicLink.renderEpicLinkFromIssue.soyTemplateName = 'GH.tpl.field.epicLink.renderEpicLinkFromIssue';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/component/field/IssueLabelRenderer.soy' */
// This file was automatically generated from IssueLabelRenderer.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.field.issueLabel.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.field == 'undefined') { GH.tpl.field = {}; }
if (typeof GH.tpl.field.issueLabel == 'undefined') { GH.tpl.field.issueLabel = {}; }


GH.tpl.field.issueLabel.renderOrphanedSubtaskLabel = function(opt_data, opt_ignored) {
  var output = '';
  var text__soy3 = AJS.format('Sub-task of {0}',opt_data.parentKey);
  output += GH.tpl.field.issueLabel.renderLabel({adg3: opt_data.adg3, extraClasses: opt_data.extraClasses, text: text__soy3, extraAttributes: {title: text__soy3}});
  return output;
};
if (goog.DEBUG) {
  GH.tpl.field.issueLabel.renderOrphanedSubtaskLabel.soyTemplateName = 'GH.tpl.field.issueLabel.renderOrphanedSubtaskLabel';
}


GH.tpl.field.issueLabel.renderLabel = function(opt_data, opt_ignored) {
  return '' + aui.lozenges.lozenge(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.field.issueLabel.renderLabel.soyTemplateName = 'GH.tpl.field.issueLabel.renderLabel';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/DeferredResourcesLoader.js' */
define("jira-agile/rapid/deferred-resources-loader",["require"],function(e){"use strict";var n=this,a=(e("jira/featureflags/feature-manager"),e("jira/analytics/web-client")),r={},t=!1;return r.fetchWRMResourcesOnDemand=function(e,n,a){window&&window.performance&&window.performance.mark("download_defer_batch_start"),WRM.require(e).then(function(){window&&window.performance&&window.performance.mark("download_defer_batch_end"),a.call(this),r.sendAnalyticsEvent("deferBatchParsingComplete",n,e)}).fail(function(){r.onResourceFetchFailEventTrigger(n,e)})},r.onResourceFetchFailEventTrigger=function(e,n){AJS.$(GH).trigger("deferBatchParsingFailed"),r.sendAnalyticsEvent("deferBatchParsingFailed",e,n)},r.deferJSLoad=function(e){AJS.$(GH).bind("deferBatchingDownloadInitiate",function(){r.fetchMainDeferBatch(e)})},r.fetchMainDeferBatch=function(e){r.fetchWRMResourcesOnDemand(e,"onload",r.deferBatchParsingCompleteCallback)},r.deferBatchParsingCompleteCallback=function(){var n=e("jira-agile/rapid/deferred-resources-event-handler");t=!0,n&&n.init()},r.actionOnDeferParsingComplete=function(e){var a=n;AJS.$(GH).bind("deferBatchParsingComplete",function(){e.call(a)})},r.triggerOnDemandResourceLoad=function(e,a,t){r.getDeferBatchParsed()?t.call(n):r.fetchWRMResourcesOnDemand(e,a,function(){r.deferBatchParsingCompleteCallback.call(n),t.call(n)})},r.getDeferBatchParsed=function(){return t},r.handleDeferredResourceImport=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments[1];e&&!r.getDeferBatchParsed()?r.actionOnDeferParsingComplete(a):a.call(n)},r.triggerOnDemandResourceLoadWithCondition=function(e,a,t,i,c){if(e){var o=function(){l(),c.call(this)},d=function(){l(),i.call(this)},l=function(){!!c&&AJS.$(GH).unbind("deferBatchParsingFailed",o),AJS.$(GH).unbind("deferBatchParsingComplete",d)};c&&AJS.$(GH).bind("deferBatchParsingFailed",o),r.triggerOnDemandResourceLoad(a,t,d)}else i.call(n)},r.sendAnalyticsEvent=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];a.sendOperationalEvent({source:"ui",actionSubject:"ui",action:e,attributes:{analyticsSource:r,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),isClassic:!0,source:n,resources:t.toString()}})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/sla/EvictingQueue.js' */
function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var u=0;u<t.length;u++){var n=t[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,u,n){return u&&e(t.prototype,u),n&&e(t,n),t}}();define("jira-agile/rapid/ui/sla/evicting-queue",["underscore"],function(e){"use strict";var t=function(){function t(e){if(_classCallCheck(this,t),e<=0)throw new Error("Non-empty queue-sizes are not allowed");this.arrayQueue=[],this.tail=0,this.head=0,this.capacity=e}return _createClass(t,[{key:"insert",value:function(e){return this.isFull()&&this._dequeue(),this._enqueue(e),!0}},{key:"isFull",value:function(){return this.arrayQueue.length>=this.capacity}},{key:"_enqueue",value:function(e){this.arrayQueue.push(e)}},{key:"_dequeue",value:function(){return this.arrayQueue.shift()}},{key:"all",value:function(){return e.extend([],this.arrayQueue)}}]),t}();return t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-common-lwf-resources', location = 'jira-agile-module/includes/js/rapid/ui/sla/GlobalErrors.js' */
function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function r(r,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}return function(e,n,a){return n&&r(e.prototype,n),a&&r(e,a),e}}();define("jira-agile/rapid/ui/sla/global-errors",["jira-agile/rapid/ui/sla/evicting-queue"],function(r){"use strict";var e=function(){function e(n){_classCallCheck(this,e),this.errors=new r(n)}return _createClass(e,[{key:"hasNonScriptError",value:function(){return this.getAllErrors().some(function(r){return"Script error."!==r.message})}},{key:"recordError",value:function(r){var n=r.message,a=r.filename,t=r.lineno,o=r.colno,i=r.error;this.errors.insert({message:n,filename:a,lineno:t,colno:o,error:e.replaceErrors(i)})}},{key:"getAllErrors",value:function(){return this.errors.all()}}],[{key:"replaceErrors",value:function(r){if(r&&r instanceof Error){var e={};return Object.getOwnPropertyNames(r).forEach(function(n){e[n]=r[n]}),e}return r}}]),e}();return e});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:soy-templates', location = 'jira-view-issue-module/viewissue/attachmentsblock.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ViewIssue&&(JIRA.Templates.ViewIssue={}),JIRA.Templates.ViewIssue.renderAttachments=function(e,t){return""+("list"==e.viewMode?JIRA.Templates.ViewIssue.fileAttachments(e):JIRA.Templates.ViewIssue.galleryAttachments(e))},JIRA.Templates.ViewIssue.fileAttachments=function(e,t){for(var a='<ol id="file_attachments" class="item-attachments" data-sort-key="'+soy.$$escapeHtml(e.sortKey)+'" data-sort-order="'+soy.$$escapeHtml(e.sortOrder)+'">',s=e.attachments,i=s.length,n=0;n<i;n++){var c=s[n];a+=JIRA.Templates.ViewIssue.fileAttachment(soy.$$augmentMap(e,{fileAttachment:c}))}return a+="</ol>"},JIRA.Templates.ViewIssue.galleryAttachments=function(e,t){for(var a='<ol id="attachment_thumbnails" class="item-attachments" data-sort-key="'+soy.$$escapeHtml(e.sortKey)+'" data-sort-order="'+soy.$$escapeHtml(e.sortOrder)+'">',s=e.attachments,i=s.length,n=0;n<i;n++){var c=s[n];a+=JIRA.Templates.ViewIssue.imageAttachment(soy.$$augmentMap(e,{imageAttachment:c}))}return a+="</ol>"},JIRA.Templates.ViewIssue.fileAttachment=function(e,t){return'<li class="attachment-content js-file-attachment'+(e.fileAttachment.latest?"":" earlier-version")+'" data-attachment-id="'+soy.$$escapeHtml(e.fileAttachment.id)+'"'+JIRA.Templates.ViewIssue.renderAttachmentData({issue:e.issue,attachment:e.fileAttachment})+">"+(e.fileAttachment.expandable?JIRA.Templates.ViewIssue.zipFileAttachment(e):'<div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+"</dl>")+"</li>"},JIRA.Templates.ViewIssue.zipFileAttachment=function(e,t){return'<div class="twixi-block collapsed expander"><div class="twixi-wrap verbose"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-expanded"><span>'+soy.$$escapeHtml("Hide")+'</span></span></a><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+'<dd class="zip-contents"><ol><li><div class="attachment-thumb"><img src="'+soy.$$escapeHtml(e.baseurl)+'/images/icons/wait.gif" /></div>'+soy.$$escapeHtml("Extracting archive...")+'</li></ol></dd></dl></div><div class="twixi-wrap concise"><a href="#" class="twixi"><span class="icon-default aui-icon aui-icon-small aui-iconfont-collapsed"><span>'+soy.$$escapeHtml("Show")+'</span></span></a><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.fileAttachment.mimeType)+":"+soy.$$escapeHtml(e.fileAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.fileAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.fileAttachment})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon(soy.$$augmentMap(e,{mimetype:e.fileAttachment.mimeType}))+"</a></div><dl>"+JIRA.Templates.ViewIssue.renderAttachmentInfo(soy.$$augmentMap(e,{attachment:e.fileAttachment}))+"</dl></div></div>"},JIRA.Templates.ViewIssue.imageAttachment=function(e,t){return'<li class="attachment-content js-file-attachment" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.imageAttachment.mimeType)+":"+soy.$$escapeHtml(e.imageAttachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.renderAttachmentData({issue:e.issue,attachment:e.imageAttachment})+'><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'" title="'+soy.$$escapeHtml(e.imageAttachment.fileName)+" -"+(e.imageAttachment.latest?" "+soy.$$escapeHtml("Latest"):"")+" "+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+(e.imageAttachment.authorDisplayName?" - "+soy.$$escapeHtml(e.imageAttachment.authorDisplayName):"")+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.imageAttachment})+">"+(null!=e.imageAttachment.thumbnailUrl?'<jira-attachment-thumbnail url="'+soy.$$escapeHtml(""+e.imageAttachment.thumbnailUrl)+'" jira-url="'+soy.$$escapeHtml(""+e.imageAttachment.jiraThumbnailUrl)+'" filename="'+soy.$$escapeHtml(e.imageAttachment.fileName)+'"></jira-attachment-thumbnail>':JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype:e.imageAttachment.mimeType}))+"</a></div><dl "+(e.imageAttachment.latest?"":'class="earlier-version"')+"><dt>"+(e.imageAttachment.deletable?'<span class="blender blender-delete"></span><div class="attachment-delete"><a title="'+soy.$$escapeHtml("Delete this attachment")+'" id="del_'+soy.$$escapeHtml(e.imageAttachment.id)+'" href="'+soy.$$escapeHtml(e.baseurl)+"/secure/DeleteAttachment!default.jspa?id="+soy.$$escapeHtml(e.issue.id)+"&deleteAttachmentId="+soy.$$escapeHtml(e.imageAttachment.id)+'&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml("Delete this attachment")+"</span></a></div>":'<span class="blender"></span>')+'<a  href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.imageAttachment.attachmentUrl)+'" class="attachment-title" title="'+soy.$$escapeHtml(e.imageAttachment.fileName)+" -"+(e.imageAttachment.latest?" "+soy.$$escapeHtml("Latest"):"")+" "+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+(e.imageAttachment.authorDisplayName?" - "+soy.$$escapeHtml(e.imageAttachment.authorDisplayName):"")+'"'+JIRA.Templates.ViewIssue.tagAttachment({attachment:e.imageAttachment})+">"+soy.$$escapeHtml(e.imageAttachment.fileName)+'</a></dt><dd class="attachment-size">'+soy.$$escapeHtml(e.imageAttachment.fileSize)+'</dd><dd class="attachment-date"><time class="livestamp" datetime="'+soy.$$escapeHtml(""+e.imageAttachment.createdIso8601)+'">'+soy.$$escapeHtml(e.imageAttachment.createdDateTime)+"</time></dd></dl></li>"},JIRA.Templates.ViewIssue.renderAttachmentInfo=function(e,t){return'<dt class="attachment-title"><a href="'+soy.$$escapeHtml(e.baseurl)+"/"+soy.$$escapeHtml(""+e.attachment.attachmentUrl)+'" title="'+(e.attachment.latest?soy.$$escapeHtml("Latest")+" ":"")+" "+soy.$$escapeHtml(e.attachment.createdDateTime)+(e.attachment.authorDisplayName?" - "+soy.$$escapeHtml(e.attachment.authorDisplayName):"")+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.attachment.mimeType)+":"+soy.$$escapeHtml(e.attachment.fileName)+":"+soy.$$escapeHtml(e.fullBaseUrl)+"/"+soy.$$escapeHtml(""+e.attachment.attachmentUrl)+'"'+JIRA.Templates.ViewIssue.tagAttachment(e)+">"+soy.$$escapeHtml(e.attachment.fileName)+'</a></dt><dd class="attachment-delete">'+(e.attachment.deletable?'<a title="'+soy.$$escapeHtml("Delete this attachment")+'" id="del_'+soy.$$escapeHtml(e.attachment.id)+'" href="'+soy.$$escapeHtml(e.baseurl)+"/secure/DeleteAttachment!default.jspa?id="+soy.$$escapeHtml(e.issue.id)+"&deleteAttachmentId="+soy.$$escapeHtml(e.attachment.id)+'&from=issue"><span class="icon-default aui-icon aui-icon-small aui-iconfont-delete">'+soy.$$escapeHtml("Delete this attachment")+"</span></a>":'<span class="icon"></span>')+'</dd><dd class="attachment-date"><time class="livestamp" datetime="'+soy.$$escapeHtml(""+e.attachment.createdIso8601)+'">'+soy.$$escapeHtml(e.attachment.createdDateTime)+'</time></dd><dd class="attachment-size">'+soy.$$escapeHtml(e.attachment.fileSize)+'</dd><dd class="attachment-author">'+soy.$$escapeHtml(e.attachment.authorDisplayName?e.attachment.authorDisplayName:"")+"</dd>"},JIRA.Templates.ViewIssue.renderAttachmentData=function(e,t){return'data-issue-id="'+soy.$$escapeHtml(e.issue.id)+'"'+(e.attachment.expandable?'data-attachment-type="expandable"':null!=e.attachment.thumbnailUrl?'data-attachment-type="image"':'data-attachment-type="file"')},JIRA.Templates.ViewIssue.renderAttachmentLegacyIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileIconUrl(e),i=""+JIRA.Templates.ViewIssue.matchFileIconAlt(e);return a+='<img src="'+soy.$$escapeHtml(s)+'" height="16" width="16" border="0" alt="'+soy.$$escapeHtml(i)+'">'},JIRA.Templates.ViewIssue.matchFileIconUrl=function(e,t){return soy.$$escapeHtml(e.baseurl)+"/images/icons/attach/"+JIRA.Templates.ViewIssue.matchFileIcon(e)},JIRA.Templates.ViewIssue.matchFileIcon=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+="pdf.gif";break;case"image/gif":a+="image.gif";break;case"image/png":a+="image.gif";break;case"image/jpeg":a+="image.gif";break;case"text/xml":a+="xml.gif";break;case"text/html":a+="html.gif";break;case"text/plain":a+="text.gif";break;case"application/zip":a+="zip.gif";break;case"application/x-gzip-compressed":a+="zip.gif";break;case"application/msword":a+="word.gif";break;case"application/msword-template":a+="word.gif";break;case"application/vnd.ms-word.document.macroEnabled.12":a+="word.gif";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+="word.gif";break;case"application/vnd.ms-word.template.macroEnabled.12":a+="word.gif";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+="word.gif";break;case"application/vnd.ms-excel":a+="excel.gif";break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+="excel.gif";break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+="excel.gif";break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+="excel.gif";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+="excel.gif";break;case"application/vnd.ms-excel.template.macroEnabled.12":a+="excel.gif";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+="excel.gif";break;case"application/vnd.ms-powerpoint":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+="powerpoint.gif";break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+="powerpoint.gif";break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+="powerpoint.gif";break;case"text/x-java":a+="java.gif";break;case"text/x-java-source":a+="java.gif";break;case"application/x-java-archive":a+="java.gif";break;default:a+="file.gif"}return a},JIRA.Templates.ViewIssue.matchFileIconAlt=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+=soy.$$escapeHtml("PDF File");break;case"image/gif":a+=soy.$$escapeHtml("GIF File");break;case"image/png":a+=soy.$$escapeHtml("PNG File");break;case"image/jpeg":a+=soy.$$escapeHtml("JPEG File");break;case"text/xml":a+=soy.$$escapeHtml("XML File");break;case"text/html":a+=soy.$$escapeHtml("HTML File");break;case"text/plain":a+=soy.$$escapeHtml("Text File");break;case"application/zip":a+=soy.$$escapeHtml("Zip Archive");break;case"application/x-gzip-compressed":a+=soy.$$escapeHtml("GZip Archive");break;case"application/msword":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/msword-template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-word.document.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-word.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-excel.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+=soy.$$escapeHtml("Microsoft Word");break;case"application/vnd.ms-powerpoint":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+=soy.$$escapeHtml("Microsoft PowerPoint");break;case"text/x-java":a+=soy.$$escapeHtml("Java Source File");break;case"text/x-java-source":a+=soy.$$escapeHtml("Java Source File");break;case"application/x-java-archive":a+=soy.$$escapeHtml("Java Archive File");break;default:a+=soy.$$escapeHtml("File")}return a},JIRA.Templates.ViewIssue.renderAttachmentIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileClass(e),i=""+JIRA.Templates.ViewIssue.matchFileIconAlt(e);return a+='<span class="aui-icon aui-icon-small attachment-icon '+soy.$$escapeHtml(s)+'" title="'+soy.$$escapeHtml(i)+'"></span>'},JIRA.Templates.ViewIssue.renderThumbnailIcon=function(e,t){var a="",s=""+JIRA.Templates.ViewIssue.matchFileClass(e);return a+='<span class="aui-icon aui-icon-large attachment-thumbnail-icon '+soy.$$escapeHtml(s)+'"></span>'},JIRA.Templates.ViewIssue.matchFileClass=function(e,t){var a="";switch(e.mimetype){case"application/pdf":a+="aui-iconfont-file-pdf";break;case"image/gif":a+="aui-iconfont-image";break;case"image/png":a+="aui-iconfont-image";break;case"image/jpeg":a+="aui-iconfont-image";break;case"video/mp4":a+="aui-iconfont-file-video";break;case"text/xml":a+="aui-iconfont-file-code";break;case"text/html":a+="aui-iconfont-file-code";break;case"text/plain":a+="aui-iconfont-file-txt";break;case"application/zip":a+="aui-iconfont-file-zip";break;case"application/x-gzip-compressed":a+="aui-iconfont-file-zip";break;case"application/msword":a+="aui-iconfont-file-doc";break;case"application/msword-template":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-word.document.macroEnabled.12":a+="aui-iconfont-file-doc";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-word.template.macroEnabled.12":a+="aui-iconfont-file-doc";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.template":a+="aui-iconfont-file-doc";break;case"application/vnd.ms-excel":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.addin.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.sheet.binary.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.sheet.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-excel.template.macroEnabled.12":a+="aui-iconfont-file-xls";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.template":a+="aui-iconfont-file-xls";break;case"application/vnd.ms-powerpoint":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.template.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.template":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.addin.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.slideshow":a+="aui-iconfont-file-ppt";break;case"application/vnd.ms-powerpoint.presentation.macroEnabled.12":a+="aui-iconfont-file-ppt";break;case"application/vnd.openxmlformats-officedocument.presentationml.presentation":a+="aui-iconfont-file-ppt";break;case"text/x-java":a+="aui-iconfont-file-code";break;case"text/x-java-source":a+="aui-iconfont-file-code";break;case"application/x-java-archive":a+="aui-iconfont-file-zip";break;default:a+="aui-iconfont-devtools-file"}return a},JIRA.Templates.ViewIssue.tagAttachment=function(e,t){return""+JIRA.Templates.ViewIssue.tagFilePreview({id:e.attachment.id,title:e.attachment.fileName,mimeType:e.attachment.mimeType,thumbnailUrl:e.attachment.thumbnailUrl})},JIRA.Templates.ViewIssue.tagFilePreview=function(e,t){var a="",s=""+(null==e.mimeType&&null!=e.thumbnailUrl?"image":null!=e.mimeType&&(""+e.mimeType).indexOf("image/")!=-1?"image":null!=e.mimeType&&(""+e.mimeType).indexOf("video/mp4")!=-1?"video":"application/pdf"==e.mimeType?"document":"unknown");return a+="unknown"!=s?' file-preview-id="'+soy.$$escapeHtml(e.id)+'" file-preview-title="'+soy.$$escapeHtml(e.title)+'" file-preview-type="'+soy.$$escapeHtml(s)+'" file-preview-mime-type="'+soy.$$escapeHtml(e.mimeType)+'"'+(null!=e.thumbnailUrl?'file-preview-url="'+soy.$$escapeHtml(""+e.thumbnailUrl)+'"':""):""};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'jira-dnd-attachment-module/js/jira-amd.js' */
define("dndattachment/JIRA",function(){return JIRA});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-amd', location = 'jira-dnd-attachment-module/js/aui-amd.js' */
define("dndattachment/aui",function(){return AJS});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/i18n.js' */
define("dndattachment/i18n",function(){var t={"dnd.attachment.unsupported.browser":"Drag and Drop of attachments is currently only available for the following browsers:","dnd.attachment.file.is.too.large":"File exceeds maximum size limit set by the administrator ({0}).","dnd.attachment.upload.in.progress":"Upload in progress, please wait.","dnd.attachment.not.uploaded":function(t){return AJS.format("File \"{0}\" was not uploaded",t)},"dnd.attachment.unauthorized":"You are not authorized, session has expired or connection is lost.","dnd.attachment.internal.server.error":"An internal error has occurred. Please contact your administrator.","dnd.attachment.upload.aborted":"Upload was aborted.","dnd.attachment.upload.remove":"Remove attachment"};return function(n){if(t[n])return t[n];throw"Unknown key: "+n}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/TemporaryAttachments.js' */
define("dndattachment/TemporaryAttachments",[],function(){var t={};return{createAttachment:function(t,e,n,a){return{id:t,name:e,type:n,file:a}},getAttachment:function(e,n){return t[e]||this.createAttachment(e,n)},putAttachment:function(e,n){return t[e]=this.createAttachment(e,n.name,n.type,n)}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/Parser.js' */
define("dndattachment/Parser",["dndattachment/aui","jquery"],function(e,n){function r(e){var r=n(e).find(a).add(e.filter(a)),d=r.addClass(t).map(function(e,r){var t=new n.Deferred;return require([n(r).attr("duiType")],function(e){"function"==typeof e?t.resolve(new e(r)):t.reject()}),t});return n.when.apply(window,n.makeArray(d))}var t="-dui-type-parsed",a="*[duiType]:not(."+t+")";return JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(e,n,t){r(n)}),n.isReady?r(n("body")):n(function(){r(n("body"))}),{parse:r}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-base', location = 'jira-dnd-attachment-module/js/dropzones/IssueDropZone.js' */
define("dndattachment/dropzones/IssueDropZone",["jquery","jira/flag","dndattachment/Parser","dndattachment/aui","dndattachment/JIRA","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility"],function(e,t,n,i,s,r,a,o,d){var u=5e3,l=["An internal error has occurred. Please contact your administrator."],h=Class.extend({eventGroup:"issuedropzone",progressBarType:"dndattachment/progressbars/UploadProgressBar",init:function(t){return this.$node=e(t),this.isSupportedBrowser()?(this.$node.parents(".mod-content")&&this.$node.parents(".mod-content").addClass("issue-drop-zone"),this.uploadLimit=this.$node.data("upload-limit"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.attachFileUrl=contextPath+"/secure/AttachFile.jspa",this.pendingQueue=[],this.render(),void this.queueEvent("init")):this.renderUnsupported()},queueTask:function(t){this.pendingQueue.push(t),t.always(function(){this.pendingQueue.splice(this.pendingQueue.indexOf(t),1)}.bind(this)),this.markDirty(!0),e.when.apply(window,this.pendingQueue).always(_.debounce(this.checkMarkDirty,!1,!0).bind(this))},render:function(){this.$node.html(s.Templates.DnDAttachmentPlugin.IssueDropZone({})),this.fileInput=this.$node.find(".issue-drop-zone__file"),this.fileButton=this.$node.find("button.issue-drop-zone__button"),this.connectListeners(),s.trace("jira.issue.dnd.issuedropzone.render")},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseLinkHandler.bind(this))},browseLinkHandler:function(e){e.preventDefault(),this.fileInput.click()},connectListeners:function(){this.fileInput.change(function(e){this.handleFilesReceived(this.fileInput[0].files),this.queueEvent("fileInput",{count:this.fileInput[0].files.length}),this.fileInput.attr("value",null)}.bind(this)),this.addHandlerToBrowseLink();var t=this.$node.parents(".issue-drop-zone").length>0?this.$node.parents(".issue-drop-zone"):this.$node;this.$dropTarget=t.find(">*").andSelf(),this.$dropTarget.on("dragover dragenter drop",function(n){if(n.preventDefault(),n.stopPropagation(),t.addClass("dragover"),"drop"==n.type){t.removeClass("dragover"),e(document).trigger("dropHandled");var i=new o(n.dataTransfer);i.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}}.bind(this)),this.$dropTarget.on("dragleave",function(){t.removeClass("dragover")}.bind(this))},configureUploadProgressBar:function(e,t){e.data("upload-size",this.uploadSize).data("file",t).data("form-token",this.formToken)},createUploadProgressBar:function(t){var i=e('<div duiType="'+this.progressBarType+'" class="upload-progress-bar"></div>');return this.configureUploadProgressBar(i,t),n.parse(i).then(function(e){this.placeUploadProgressBar(i,e),this.handleNewProgressBar(e)}.bind(this))},placeUploadProgressBar:function(e){return e.insertAfter(this.$node)},handleNewProgressBar:function(e){},handleFilesReceived:function(e){this.uploadFiles(e)},uploadFiles:function(n){var r=new e.Deferred,a=[],o=s.Issues.Api.getSelectedIssueKey(),d=s.Issues.Api.getSelectedIssueId(),l=i.Meta.get("viewissue-permlink"),h=e("#summary-val input").attr("value")||e("#summary-val").text(),c=s.Templates.DnDAttachmentPlugin.SuccessMessageLink({issueLink:l,issueKey:o,issueSummary:h}),p=_.map(n,function(t){var n=new e.Deferred;return this.createUploadProgressBar(t).then(function(e){this.trigger("progressBarInserted",e),a.push(e),e.uploadFile(t,this.uploadLimit).then(n.resolve.bind(n),n.resolve.bind(n)).done(function(){this.trigger("uploadFinished",e)}.bind(this)).fail(function(){s.trace("jira.issue.dnd.upload.fail"),r.reject(arguments)})}.bind(this)),n}.bind(this)),f=e.when.apply(window,p);return f.done(function(){var e=_.filter(1==p.length?[arguments]:arguments,function(e){return e&&e[0]&&e[0].id}).map(function(e){return e[0].id});0!=e.length&&this.commitUpload(e,d).done(function(){_.delay(function(){a.some(function(e){e.getAutoDestroy()&&(e.destroy(),this.queueEvent("autoDestroy"))}.bind(this))}.bind(this),u);var e=_.filter(a,function(e){return e.result.isResolved()});if(1==e.length){var n=e[0].getFileName();t.showSuccessMsg("",i.format("{0} was attached successfully to {1}.",n,c))}else e.length>1&&t.showSuccessMsg("",i.format("{0} files were attached successfully to {1}.",e.length,c));r.resolve(_.map(e,function(e){return e.file.name}))}.bind(this)).fail(function(e,t){r.reject(e,t),e&&e.forEach(function(e){a.forEach(function(t){t.reportError(e)})}),t&&a.forEach(function(e){var n=t["#"+e.getFileID()]||t[e.getFileName()];n&&e.reportError(n)}),s.trace("jira.issue.dnd.commit.fail")})}.bind(this)),this.queueTask(f),r},loadAttachments:function(e){e.forEach(function(e){this.createUploadProgressBar(e.file).then(function(t){t.setFileID(e.id),t.setFileName(e.name),t.setFileSize(e.size),t.setProgress(1),t.setFinished(),this.trigger("uploadFinished",t)}.bind(this))},this)},commitUpload:function(t,n){return new e.Deferred},attachFile:function(t,n){var i=new e.Deferred;return s.SmartAjax.makeRequest({type:"POST",url:this.attachFileUrl,data:{inline:!0,id:n||s.Issue.getIssueId(),filetoconvert:t,atl_token:atl_token(),formToken:this.formToken},dataType:"json"}).done(i.resolve.bind(i)).fail(function(e){try{var t=JSON.parse(e.responseText);i.reject(t.errorMessages||l,t.errors)}catch(e){i.reject(l)}}),i},isSupportedBrowser:function(){if(e("html.webkit")[0]||e("html.safari")[0]){if(!(parseFloat(e.browser.version)>=537))return!1}else if(e("html.mozilla")[0]){if(!(parseFloat(e.browser.version)>=1.9))return!1}else{if(!e("html.msie")[0])return!1;if(!(parseFloat(e.browser.version)>=10))return!1}return!0},renderUnsupported:function(){this.$node.addClass("issue-drop-zone__not-supported").text(r("dnd.attachment.unsupported.browser")).append("<ul><li>FireFox 3.6+</li><li>Chrome 5+</li><li>Safari 5</li></ul>")},markDirty:function(e){this.$node.addClass(s.DirtyForm.ClassNames.SANCTIONED),this.$node.toggleClass(s.DirtyForm.ClassNames.EXEMPT,!e),this.$node.attr("value",!1),this.$node.attr("defaultValue",!0)},checkMarkDirty:function(){0==this.pendingQueue.length&&this.markDirty(!1)},queueEvent:function(e,t){i.trigger("analytics",{name:"issue.dnd.attachment."+this.eventGroup+"."+e,data:t||{}})}});return h});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-integration', location = 'jira-dnd-attachment-module/js/integration/register.js' */
define("dndattachment/integration-register",function(){function r(r){return e[r]}function t(r,t){return"function"==typeof t&&(e[r]=t,!0)}var e={attachmentMenuLink:null,attachmentsZoneCreator:null,browseLink:null,temporaryAttachmentCreatorFactory:null,attachmentCreatorFactoryForBrowseLink:null,attachmentCreatorFactoryForAttachLink:null,temporaryBinaryUploadHandler:null,connectedTemporaryBinaryUploadHandler:null};return{getAttachmentMenuHandler:function(){var t=r("attachmentCreatorFactoryForAttachLink");return t&&t("attachment-menu")},registerAttachmentMenuHandlerFactory:function(r){return t("attachmentCreatorFactoryForAttachLink",r)},getBrowseLinkHandler:function(){var t=r("attachmentCreatorFactoryForBrowseLink");return t&&t("browse-link")},registerBrowseLinkHandlerFactory:function(r){return t("attachmentCreatorFactoryForBrowseLink",r)},getAttachmentsZoneCreator:function(){return r("attachmentsZoneCreator")},registerAttachmentsZoneCreator:function(r){return t("attachmentsZoneCreator",r)},registerTemporaryAttachmentCreatorFactory:function(r){return t("temporaryAttachmentCreatorFactory",r)},getTemporaryAttachmentCreator:function(t,e,n){var a=r("temporaryAttachmentCreatorFactory");return a&&a(t,e,n)},getTemporaryAttachmentZoneCreator:function(){return r("temporaryAttachmentsZoneCreator")},registerTemporaryAttachmentZoneCreator:function(r){return t("temporaryAttachmentsZoneCreator",r)},getTemporaryBinaryUploadHandler:function(){return r("temporaryBinaryUploadHandler")},registerTemporaryBinaryUploadHandler:function(r){return t("temporaryBinaryUploadHandler",r)},getConnectedTemporaryBinaryUploadHandler:function(){return r("connectedTemporaryBinaryUploadHandler")},registerConnectedTemporaryBinaryUploadHandler:function(r){return t("connectedTemporaryBinaryUploadHandler",r)},unregisterAllHandlers:function(){for(var r in e)e[r]=null}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/AttachmentsDropZone.js' */
define("dndattachment/dropzones/AttachmentsDropZone",["dndattachment/dropzones/IssueDropZone","jira/util/events","dndattachment/util/events/types","jquery","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility","jira/dialog/dialog","dndattachment/integration-register","dndattachment/upload/handler","jira/featureflags/feature-manager"],function(e,t,n,o,r,i,a,s,d,h){var c=function(){var e=parseUri(window.location);return e.protocol+"://"+e.authority}(),l=e.extend({eventGroup:"attachmentsdropzone",progressBarType:"dndattachment/progressbars/AttachmentsUploadProgressBar",init:function(){this._super.apply(this,arguments),this.attachFileUrl=contextPath+"/rest/jddap/1.0/attachment",t.bind(JIRA.Events.PANEL_REFRESHED,this.panelRefreshed.bind(this)),this.connectContainer()},connectContainer:function(){this.$containerNode=this.getContainerNode(),this.$dragoverDropzone=o(JIRA.Templates.DnDAttachmentPlugin.dropzone()),this.$dragoverBorder=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-border"),this.$dragoverInfo=this.$dragoverDropzone.find(".attachments-drop-zone__dragover-info"),this.$dragoverDropzone.appendTo(this.$containerNode),this._connectDropzone(),this.$windowMask=o(JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask()),this.$body=o(document.body);var e=this.$body;window.__SPA__&&(e=o("#attachment-dropzone-mask-container"),e.length||(e=this.$body)),e.append(this.$windowMask),this.$body.on("dragenter",_.throttle(this.onBodyDragEnter.bind(this),200,{trailing:!1})),this.$body.on("dragleave",this.onBodyDragLeave.bind(this)),this.$windowMask.on("dragover dragenter",this.onWindowMaskDragEnter.bind(this)),this.$windowMask.on("dragleave",this.onWindowMaskDragLeave.bind(this)),this.$windowMask.on("drop",this.onWindowMaskDrop.bind(this)),this.$auiSidebar=o(".aui-sidebar-body"),this._disconnectListenersFromParentDropzone(),this.onContentAddedHandler=this.onContentAdded.bind(this),t.bind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),this.externalHandler=s.getBrowseLinkHandler()},_connectDropzone:function(){var e=s.getAttachmentsZoneCreator();this.onDragOverDropHandler=this.onDragOverDrop.bind(this),this.onDragLeaveHandler=this.onDragLeave.bind(this),this.$containerNode.on("dragover dragenter drop",this.onDragOverDropHandler),this.$containerNode.on("dragleave",this.onDragLeaveHandler),"function"==typeof e&&(this.externalZone=e(this.$containerNode[0]))},_disconnectListenersFromParentDropzone:function(){this.$dropTarget.off("dragover drop dragleave dragenter"),o(document).off("dragover dragenter")},disconnectContainer:function(){this.$dragoverDropzone.remove(),this.$windowMask.remove(),this.$body.removeClass("attachments-drop-zone__dragover"),this.$body.off("dragenter",this.onBodyDragEnter.bind(this)),this.$containerNode.off("dragenter dragover drop",this.onDragOverDropHandler),this.$containerNode.off("dragleave",this.onDragLeaveHandler),this.externalZone&&this.externalZone.deactivate(),t.unbind(JIRA.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),d.disconnectCurrentDropZone(this)},isAttached:function(){return o.contains(document.body,this.$node[0])},onContentAdded:function(){this.isAttached()||this.disconnectContainer()},getContainerNode:function(){var e=o(o(".issue-container")[0]);return"static"===e.css("position")&&e.css("position","relative"),e},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseFilesAndUpload.bind(this))},canDoFullPageDrop:function(){return a.current?(JIRA.trace("jira.issue.dnd.dropnotallowed"),!1):(JIRA.trace("jira.issue.dnd.dropallowed"),!0)},onDragOverDrop:function(e){if(!this.isAttached())return void this.disconnectContainer();if(i.dragEventContainsFiles(e)&&this.canDoFullPageDrop()&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),JIRA.trace("jira.issue.dnd.dragover"),this.$body.addClass("attachments-drop-zone__dragover"),this.$body.addClass("attachments-drop-zone__window-dragover"),this.$containerNode.addClass("attachments-drop-zone__dragover-fade"),this._readjustDropzone(),this._repositionStickyInfoBox(),"dragenter"===e.type&&this.externalZone&&(d.isDefaultExecutor({})?this.externalZone.activate():this.externalZone.deactivate()),"drop"==e.type))if(this.removeAllDragoverClasses(this.$containerNode),o(document).trigger("dropHandled"),this.externalZone&&d.isDefaultExecutor({}))this.externalZone.drop();else{var t=new r(e.dataTransfer);t.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))}},onDragLeave:function(){this.removeAllDragoverClasses(this.$containerNode)},browseFilesAndUpload:function(e,t){return"function"==typeof this.externalHandler&&d.isDefaultExecutor({})?this.externalHandler.call(null,e,t||{}):this.browseLinkHandler.call(this,e),!0},_readjustDropzone:function(){if(0!==this.$auiSidebar.length){var e=this.$auiSidebar.offset().left+this.$auiSidebar.width();if(this.$dragoverBorder.parent().offset()){var t=this.$dragoverBorder.parent().offset().left;e>t?this.$dragoverBorder.css({left:e-t}):this.$dragoverBorder.css({left:0})}else this.$dragoverBorder.css({left:0})}},_repositionStickyInfoBox:function(){if(window.__SPA__){var e=this.$containerNode.scrollParent().scrollTop()+10;return void this.$dragoverInfo.css({top:e})}var t,e=this.$containerNode.scrollParent().scrollTop()+10,n=this.$containerNode.offset().top;t=this.$containerNode.scrollParent().offset()?this.$containerNode.scrollParent().offset().top:0;var o;o=0===t?e>=n?e-n:10:e,this.$dragoverInfo.css({top:o})},onBodyDragEnter:function(e){i.dragEventContainsFiles(e)&&(this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"))},onBodyDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDragEnter:function(e){i.dragEventContainsFiles(e)&&(e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="none"),this._readjustDropzone(),this.$body.addClass("attachments-drop-zone__window-dragover"),this.canDoFullPageDrop()&&(this.$body.addClass("attachments-drop-zone__dragover"),this._repositionStickyInfoBox()))},onWindowMaskDragLeave:function(){this.removeAllDragoverClasses()},onWindowMaskDrop:function(e){e.preventDefault(),this.removeAllDragoverClasses()},removeAllDragoverClasses:function(e){e&&e.removeClass("attachments-drop-zone__dragover-fade"),this.$body.removeClass("attachments-drop-zone__window-dragover"),this.$body.removeClass("attachments-drop-zone__dragover")},handleFilesReceived:function(e){var r=o("textarea.wiki-textfield:visible:focus"),i=r.length>0;t.trigger(n.ATTACHMENT_FOR_PAGE_RECEIVED,{files:e,isWikiTextfieldFocused:i,wikiTextfield:r[0]})},render:function(){return this.$node.parents("#attachmentmodule").addClass("attachments-drop-zone-parent"),this.$listNode=this.$node.siblings("#file_attachments, #attachment_thumbnails"),this._super.apply(this,arguments)},panelRefreshed:function(e,t,n,r){if(r.find(this.$node).is("*")){this.getViewMode();n=n.find(">.mod-content"),n.addClass("issue-drop-zone"),this.$node.prependTo(n),this.render();var i=r.find(".attachments-upload-progress-bar");i.data("viewMode",this.getViewMode()).each(function(e,t){var n=o(t).prop("_instance");void 0!=n&&n.render()}),i.each(function(e,t){this.insertProgressBar(o(t))}.bind(this)),this._disconnectListenersFromParentDropzone()}},getViewMode:function(){return"file_attachments"==this.$listNode.attr("id")?"list":"gallery"},getSortBy:function(){return this.$listNode.data("sort-key")},getSortOrder:function(){return this.$listNode.data("sort-order")},getSortComparator:function(){var e="asc"==this.getSortOrder()?1:-1,t="fileName"==this.getSortBy()?function(e){return e.find(".attachment-title").text()}:function(e){return new Date(e.find("*[datetime]").attr("datetime")).getTime()},n="fileName"==this.getSortBy()&&String.prototype.localeCompare?function(e,t){return e.localeCompare(t)}:function(e,t){return e<t?-1:e>t?1:0};return function(o,r){var i=t(o),a=t(r);return e*n(i,a)}},commitUpload:function(e,t){var n=new o.Deferred;return this.attachFile(e,t).then(n.resolve.bind(n),n.reject.bind(n)),n.then(function(n){var r=o(JIRA.Templates.ViewIssue.renderAttachments({baseurl:contextPath,fullBaseUrl:c+contextPath,issue:{id:t},attachments:n,viewMode:this.getViewMode()})).find(".attachment-content");n.forEach(function(t,n){var o=r[n],i=this.$listNode.find('>*[data-file-id="'+e[n]+'"]');i.replaceWith(o)},this),JIRA.trigger(JIRA.Events.NEW_CONTENT_ADDED,[this.$listNode,JIRA.CONTENT_ADDED_REASON.panelRefreshed]),JIRA.trace("jira.issue.dnd.attached")}.bind(this)),this.queueTask(n),this.queueEvent("commitUpload",{count:e.length}),n},configureUploadProgressBar:function(e){this._super.apply(this,arguments),e.data("viewMode",this.getViewMode())},placeUploadProgressBar:function(e,t){return t.$node.find("time.livestamp").attr("datetime",(new Date).toISOString()).livestamp(),this.insertProgressBar(e),t.bind("onDestroy",function(){var t=e.parents(".item-attachments");0==t.find(".attachments-upload-progress-bar, .attachment-content").length&&t.remove()}),e},insertProgressBar:function(e){var t=this.getSortComparator(),n=this.$listNode.children().toArray(),r=function(n){if(t(e,o(n))<1)return e.insertBefore(n),!0};n.some(r)||e.appendTo(this.$listNode)}});return l});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/UploadProgressBar.js' */
define("dndattachment/progressbars/UploadProgressBar",["jquery","dndattachment/Parser","dndattachment/JIRA","dndattachment/aui","dndattachment/i18n","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,i,s,n,o,r,a){function d(t,e){s.trigger("analytics",{name:"issue.dnd.attachment.uploadprogress."+t,data:e||{}})}var h=["aui-iconfont-error","aui-iconfont-success","aui-iconfont-close-dialog"],u=r.getWRM("thumbnail-mime-types").split(","),l=Class.extend({autoDestroy:!0,init:function(e){this.result=new t.Deferred,this.$node=t(e),this.file=this.$node.data("file"),this.uploadSize=this.$node.data("upload-size"),this.formToken=this.$node.data("form-token"),this.$node.prop("_instance",this),this.render()},render:function(){this.$node.html(i.Templates.DnDAttachmentPlugin.UploadProgressBar({isImageType:this.isImageType()})),this.afterRender()},afterRender:function(){this.file&&(this.setFileName(this.file.name),this.setFileSize(this.file.size),this.loadThumbnail(this.file)),this.progress&&this.updateProgress(),this.connectListeners()},connectListeners:function(){this.getControlNode().on("click",function(){this.destroy(),d("buttonClick")}.bind(this))},destroy:function(){this.destroyed||(this.upload&&this.upload.abort(),this.setAutoDestroy(!1),this.trigger("onBeforeDestroy"),this.destroyed=!0,this.$node.animate({opacity:0},{duration:250,complete:function(){this.$node.slideUp(250,function(){this.objectURL&&window.URL.revokeObjectURL(this.objectURL),this.$node.remove(),i.trace("jira.issue.dnd.progressbar.removed"),this.trigger("onDestroy")}.bind(this))}.bind(this)}))},isDestroyed:function(){return!!this.destroyed},setAutoDestroy:function(t){this.autoDestroy=t},getAutoDestroy:function(){return this.autoDestroy},getUploadParams:function(t){var e={filename:t.name,size:t.size,atl_token:atl_token(),formToken:this.formToken};return _.extend(e,this.getEntityParams()),e},getEntityParams:function(){var t={},e=i.Issue.getIssueId(),s=this.$node.parents("form").find('*[name="pid"]').attr("value");return s?t.projectId=s:e&&(t.issueId=e),t},setFile:function(t){this.file=t},setFileID:function(t){this.fileID=t,this.$node.attr("data-file-id",t)},getFileID:function(){return this.fileID},setFileName:function(t){this.$node.find(".upload-progress-bar__file-name").text(t)},getFileName:function(){return this.$node.find(".upload-progress-bar__file-name").text()},setFileSize:function(t){t>=0&&this.$node.find(".upload-progress-bar__file-size").html(a.format(t))},uploadFile:function(t,e){this.setFile(t);var r=this.result;if(this.monitorUpload(r),r.fail(this.reportError.bind(this)),t.size>e)return r.reject(n("dnd.attachment.file.is.too.large").replace("{0}",this.uploadSize),!0),r;for(var a=["\\","/",'"',":","?","*","<","|",">"],d=0;d<a.length;d++){var h=a[d];if(_.contains(t.name,h))return r.reject(s.format("{0} contains the invalid character \'\'{1}\'\'. Please rename the file and try again.",t.name,h),!0),r}return this.upload=new s.InlineAttach.AjaxUpload({file:t,params:this.getUploadParams(t),url:s.InlineAttach.AjaxPresenter.DEFAULT_URL,progress:function(e){r.notify(e/t.size)},success:function(e,i){void 0!==e.id&&void 0!==e.name?(r.notify(1),r.resolve(e,i,t)):r.reject(e,i,t)},error:function(t,e){r.reject(n("dnd.attachment.internal.server.error"),e)},abort:function(){r.reject(n("dnd.attachment.upload.aborted"),"abort")}}),this.checkSession().then(function(){this.upload.upload()}.bind(this)).fail(function(){r.reject(n("dnd.attachment.unauthorized"),401)}),this.$node.find(".upload-progress-bar__control>*").on("click",function(){this.upload.abort(),r.reject()}.bind(this)),r.done(function(e){o.putAttachment(e.id,t),this.setFileID(e.id),i.trace("jira.issue.dnd.uploaded")}.bind(this)),r},monitorUpload:function(t){t.progress(this.setProgress.bind(this)),t.done(this.setFinished.bind(this)),t.fail(this.setFailed.bind(this))},setProgress:function(t){this.progress=t,this.updateProgress()},updateProgress:function(){var t=this.$node.find(".upload-progress-bar__progress-bar");t.toggleClass("UploadProgressBar_progressUnknown",this.progress===!1),this.progress>=0&&t.find(".upload-progress-bar__bar").css("width",100*this.progress+"%")},setFinished:function(){this.$node.addClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__control button .aui-icon").addClass("aui-iconfont-success").removeClass("aui-iconfont-close-dialog"),this.finished=!0,this.trigger("onFinished")},setFailed:function(){this.$node.addClass("UploadProgressBar_uploadFailed"),this.finished=!0,this.failed=!0,this.trigger("onFailed")},isFinished:function(){return!!this.finished},isFailed:function(){return!!this.failed},isSuccessful:function(){return this.isFinished()&&!this.isFailed()},isImageType:function(){return this.file&&this.file.type&&_.contains(u,this.file.type)},getThumbnailSrc:function(t){return this.isImageType()&&(this.objectURL=window.URL.createObjectURL(t)),this.objectURL||i.Templates.ViewIssue.matchFileIconUrl({baseurl:s.contextPath(),mimetype:t.type})},getThumbnailNode:function(){return this.$node.find(".upload-progress-bar__thumbnail")},getControlNode:function(){return this.$node.find(".upload-progress-bar__control button")},loadThumbnail:function(e){var i=this.getThumbnailSrc(e),s=this.getThumbnailNode();s.addClass(this.objectURL?"upload-progress-bar__thumbnail_image":"upload-progress-bar__thumbnail_icon");var n=t("<img/>").attr("src",i);return n.appendTo(s)},reportError:function(t,e){"object"==typeof t&&t.errorMessage&&(t=t.errorMessage),this.$node.addClass("upload-progress-bar__upload-error"),this.$node.removeClass("upload-progress-bar__upload-finished"),this.$node.find(".upload-progress-bar__bar").css("width","100%"),this.showErrorMessage(t,e),this.setAutoDestroy(!1),d("error",{message:t})},showErrorMessage:function(t){this.$node.find(".upload-progress-bar__error-message").text(t)},setIcon:function(t){var e=this.$node.find(".upload-progress-bar__control button .aui-icon");if(!h.some(function(i){return e.toggleClass(i,i==t),i==t}))throw"Unknown icon"},checkSession:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/auth/1/session",contentType:"application/json"}).done(function(){e.resolve()}).fail(function(){this.checkPermissions().done(function(t){e.resolve()}).fail(function(){e.reject()})}.bind(this)),e},checkPermissions:function(){var e=new t.Deferred;return s.$.ajax({type:"GET",url:contextPath+"/rest/api/2/mypermissions",contentType:"application/json",data:t.extend({},this.getEntityParams(),{permissions:"CREATE_ATTACHMENTS"})}).done(function(t){t.permissions.CREATE_ATTACHMENTS.havePermission?e.resolve():e.reject()}).fail(function(){e.reject()}),e}});return l});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/AttachmentsUploadProgressBar.js' */
define("dndattachment/progressbars/AttachmentsUploadProgressBar",["dndattachment/progressbars/UploadProgressBar","jira/flag","jquery","dndattachment/i18n"],function(e,t,a,n){return e.extend({render:function(){this.$node.html(JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar({isImageType:this.isImageType()})).removeClass("upload-progress-bar").addClass("attachments-upload-progress-bar"),this.$node.toggleClass("attachment-content",!this.isImageType()),this.afterRender()},loadThumbnail:function(t){return"gallery"==this.$node.data("viewMode")?e.prototype.isImageType.call(this)?this._super.apply(this,arguments):a(JIRA.Templates.ViewIssue.renderThumbnailIcon({mimetype:t.type})).appendTo(this.getThumbnailNode()):a(JIRA.Templates.ViewIssue.renderAttachmentIcon({mimetype:t.type})).appendTo(this.getThumbnailNode())},showErrorMessage:function(e,s){if("abort"!=s){var o=t.showErrorMsg(n("dnd.attachment.not.uploaded")(this.getFileName()),AJS.escapeHTML(e));a(o).on("aui-flag-close",function(){this.destroy()}.bind(this)),this.bind("onDestroy",function(){o.close()})}},isImageType:function(){return"gallery"==this.$node.data("viewMode")},getControlNode:function(){return this.$node.find(".upload-progress-bar__upload-control span")},getAutoDestroy:function(){return!1}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/IssueDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.IssueDropZone=function(e,t){return'<div class="issue-drop-zone__target"></div><span class="issue-drop-zone__text"><span class="issue-drop-zone__drop-icon"> </span> '+soy.$$escapeHtml("Drop files to attach, or")+' <button type="button" class="issue-drop-zone__button"> '+soy.$$escapeHtml("browse")+'.</button><input class="issue-drop-zone__file ignore-inline-attach" type="file" multiple /></span>'},JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/AttachmentsDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/AttachmentsDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.dropzoneMask=function(n,e){return'<span><div class="attachments-drop-zone__dragover-mask"></div></span>'},JIRA.Templates.DnDAttachmentPlugin.dropzone=function(n,e){return'<span><div class="attachments-drop-zone__dragover-border"><div class="attachments-drop-zone__dragover-info"><p>'+soy.$$escapeHtml("Drop files to attach them to the issue")+"</p></div></div></span>"},JIRA.Templates.DnDAttachmentPlugin.windowDropzoneMask=function(n,e){return'<span><div class="attachments-drop-zone__window-dragover-mask"></div></span>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/UploadProgressBar.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.UploadProgressBar=function(a,s){return'<div class="upload-progress-bar__thumbnail"> </div><span class="upload-progress-bar__file-name"> </span><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog">'+soy.$$escapeHtml("Cancel upload")+'</span></button></div><div class="upload-progress-bar__error-message"></div>'},JIRA.Templates.DnDAttachmentPlugin.AttachmentsUploadProgressBar=function(a,s){return""+(a.isImageType?'<div class="upload-progress-bar__thumbnail"><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><dl><dt><span class="upload-progress-bar__file-name"> </span></dt><dd class="upload-progress-bar__file-size"> </dd><dd class="upload-progress-bar__upload-control"><span>'+soy.$$escapeHtml("Cancel")+'</span></dd><dd class="upload-progress-bar__error-message"></dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>':'<div class="attachment-thumb upload-progress-bar__thumbnail"></div><dl><dt class="attachment-title upload-progress-bar__file-name"></dt><dd class="upload-progress-bar__upload-control"><span>'+soy.$$escapeHtml("Cancel")+'</span></dd><dd class="attachment-size"><span class="upload-progress-bar__file-size"> </span><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></dd><dd class="attachment-author"> </dd><dd class="attachment-date"><time class="livestamp" /></dd></dl>')},JIRA.Templates.DnDAttachmentPlugin.TempUploadProgressBar=function(a,s){return'<div class="temp-upload-progress-bar__parent-container temp-upload-progress-bar__uploading"><div class="temp-upload-progress-bar__container"><div class="upload-progress-bar__thumbnail"></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div><div class="upload-progress-bar__error"><div class="upload-progress-bar__error-indicator"><span class="aui-icon aui-icon-large aui-iconfont-error">'+soy.$$escapeHtml("Upload error")+'</span></div><div class="upload-progress-bar__error-text">'+soy.$$escapeHtml("Upload failed")+'</div></div><div class="upload-progress-bar__upload-mask"></div><div class="upload-progress-bar__control"><button type="button" class="aui-button aui-button-subtle aui-button-compact"><span class="aui-icon aui-icon-small aui-iconfont-close-dialog"><div class="button-text" aria-label="'+soy.$$escapeHtml("Cancel upload")+' "></div><div class="file-name"></div><div class="error-message"></div></span></button></div><div class="upload-progress-bar__progress-bar"><span class="upload-progress-bar__bar"> </span></div></div><div class="upload-progress-bar_file-name-container"><span class="upload-progress-bar__file-name"></span></div></div>'},JIRA.Templates.DnDAttachmentPlugin.SuccessMessageLink=function(a,s){return'<a href="'+soy.$$escapeHtml(a.issueLink)+'">'+soy.$$escapeHtml(a.issueKey)+" - "+soy.$$escapeHtml(a.issueSummary)+"</a>"};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/path.js' */
define("dndattachment/ctrlv/path",["exports"],function(t){"use strict";var n=function(t){return t.split(/\//).pop()};t.basename=n,t.dirname=function(t){var e=n(t);return t.substring(0,t.length-e.length)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/templates/soy/attach-screenshot-form.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Html5Screenshot&&(JIRA.Templates.Html5Screenshot={}),JIRA.Templates.Html5Screenshot.attachScreenshotForm=function(e,t){return'<h2 class="dialog-title">'+soy.$$escapeHtml("Attach Screenshot")+'</h2><form action="ShowAttachScreenshotFormAction.jspa" class="aui" method="post" id="attach-screenshot-form"><input type="hidden" name="id" value="'+soy.$$escapeHtml(e.id)+'"/><input type="hidden" name="projectId" value="'+soy.$$escapeHtml(e.projectId)+'"/><input type="hidden" name="atl_token" value="'+soy.$$escapeHtml(e.atlToken)+'"><input type="hidden" name="formToken" value="'+soy.$$escapeHtml(e.formToken)+'"><input type="hidden" name="filetoconvert" value=""><div class="attach-screenshot-padding"><div class="attach-screenshot-container"><div id="attach-screenshot-inner-container"><div class="mod-content"><ul class="item-details"><li><dl><dt>'+soy.$$escapeHtml("Take a screenshot:")+"</dt>"+("pc"==e.userPlatform?"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003ePrtScn\u003c/kbd\u003e")+"</dd>":"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003e&#8963; Ctrl\u003c/kbd\u003e + \u003ckbd\u003e&#8984; Cmd\u003c/kbd\u003e + \u003ckbd\u003e&#8679; Shift\u003c/kbd\u003e + \u003ckbd\u003e3\u003c/kbd\u003e")+"</dd>")+"</dl></li><li><dl><dt>"+soy.$$escapeHtml("Paste the image:")+"</dt>"+("pc"==e.userPlatform?"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003eCtrl\u003c/kbd\u003e + \u003ckbd\u003ev\u003c/kbd\u003e")+"</dd>":"<dd>"+soy.$$filterNoAutoescape("\u003ckbd\u003e&#8984; Cmd\u003c/kbd\u003e + \u003ckbd\u003ev\u003c/kbd\u003e")+"</dd>")+'</dl></li></ul></div><input type="text" id="attach-screenshot-fake-input"><div class="attach-screenshot-padding attach-screenshot-padding-inner"><div id="attach-screenshot-image-container" class="attach-screenshot-image-container"><div class="attach-screenshot-placeholder"><div class="mod-content"><ul class="item-details"><li><dl><dt id="attach-screenshot-placeholder-message">'+soy.$$escapeHtml("Your image will be pasted here")+"</dt></dl></li></ul></div></div></div></div><div id='attach-max-size' class=\"hidden\">"+soy.$$escapeHtml(e.maxSize)+"</div></div></div></div><fieldset><div><legend><span>"+soy.$$escapeHtml("Attach Screenshot")+'</span></legend><div id="attach-screenshot-filename-group" class="field-group"><div id="attach-screenshot-progress-container"></div><label for="attachscreenshotname">'+soy.$$escapeHtml("File name")+' <span class="aui-icon icon-required">'+soy.$$escapeHtml("Required")+'</span></label><input class="text" type="text" id="attachscreenshotname" name="attachscreenshotname" title="File Name" value="'+soy.$$escapeHtml(e.nextScreenshotName)+'"><div class="description">'+soy.$$escapeHtml("A file name to be used as attached image name")+'</div></div></div></fieldset><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-primary" id="attach-screenshot-html5-upload">'+soy.$$escapeHtml("Upload")+'</button><a href="#" class="cancel">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/html5.js' */
define("dndattachment/ctrlv/html5",["jquery","underscore","dndattachment/integration-register","dndattachment/ctrlv/base64decode","dndattachment/ctrlv/utility","jira/dialog/dialog","jira/dialog/dialog-register","jira/ajs/ajax/smart-ajax","jira/attachment/inline-attach","dndattachment/ctrlv/tracking","exports"],function(e,t,n,i,r,a,o,s,l,c,d){"use strict";d.getFileFromEvent=function(n){var i=new e.Deferred;return r.isImagePasteEvent(n)?i.resolve(t(n.clipboardData.items).filter(function(e){return e.type.indexOf("image")!==-1}).map(function(e){return e.getAsFile()})[0]||t(n.clipboardData.files).filter(function(e){return e.type.indexOf("image")!==-1})[0]):i.reject(),i.promise()},d.REQUEST_TIMEOUT_MILLIS=3e5,d.screenshotFileUpload={},d.screenshotFileUploadUri=null,d.$document=void 0,d.$window=void 0,d.$container=void 0,d.$fakeInput=void 0,d.uploadError=!1,d.uploadErrorMsg="",d.progressView={hidden:!1,progress:0,old:0,progressBarContainer:void 0,progressEl:void 0,container:void 0,options:void 0,staticProgress:void 0,initProgress:function(){this.container=this.buildContainer(),this.progressEl=this.buildProgress(),this.container.append(this.progressEl),this.options={showPercentage:!1,height:"5px"},this.progressBarContainer=e("#attach-screenshot-progress-container"),this.progressBarContainer.empty(),this.progressBarContainer.append(this.container),this.staticProgress=this.container,this.hidden=!0},finish:function(){this.value(100)},progressHandler:function(e){var t=Math.round(100*e.loaded/e.total);this.value(t)},value:function(e){e>100?e=100:e<0&&(e=0),this.hidden&&(this.progressEl.show(),this.hidden=!1),this.old!==e&&(this.progressEl.progressBar(e,this.options),e>=100&&this.progressEl.fadeOut(),this.old=e)},buildContainer:function(){return e("<div>").addClass("file-progress")},buildProgress:function(){return e("<div>").attr("id","attach-screenshot-upload-progress")}},d.dialogView={pasteCatcher:{},presenter:void 0,getMaxSize:function(){return e("#attach-max-size").text()},getFileSize:function(){return e.isPlainObject(this.presenter.screenshotFileUpload)&&t.isEmpty(this.presenter.screenshotFileUpload)?0:this.presenter.screenshotFileUpload.size||this.presenter.screenshotFileUpload.byteLength||this.presenter.screenshotFileUpload.length},cleanGeneralErrors:function(){e("#error-attach-screenshot-image").closest(".field-group").remove()},cleanFileErrors:function(){e("#error-attach-screenshot-filename").remove()},displayErrors:function(e){"compatibility"in e&&r.showErrorMsg("",e.compatibility),"fileName"in e&&r.showErrorMsg("",e.fileName),"fileUpload"in e&&r.showErrorMsg("",e.fileUpload)},appendBlobImage:function(e){var t=window.URL||window.webkitURL,n=t.createObjectURL(e);this.presenter.screenshotFileUpload=e,this.createImage(n)},createImage:function(n){var i=new Image;i.onload=function(){},i.src=n,this.presenter.screenshotToUpload=i;var r=e(i);r.addClass("attach-screenshot-pasted-image");var a=e("#attach-screenshot-image-container");a.empty(),a.append(r),this.presenter.$fakeInput.focus(),t.defer(function(){d.imageCreatedHandler()})},checkInput:function(){var e,t=d.dialogView.pasteCatcher.childNodes[0];return t&&("IMG"===t.tagName&&0===t.src.indexOf("data:")&&(e=t.src),d.dialogView.pasteCatcher.innerHTML=""),e||d.$fakeInput.focus(),e},onPaste:function(e){d.dialogView.cleanFileErrors(),d.dialogView.cleanGeneralErrors(),r.isImagePasteEvent(e)?d.getFileFromEvent(e).then(function(e){this.appendBlobImage(e)}.bind(this)):setTimeout(function(){var e=this.checkInput();e&&(d.screenshotFileUpload=i.decodeBase64DataUri(e),d.dialogView.createImage(e))}.bind(this),0)},getFakeInput:function(){return e("#attach-screenshot-fake-input")},getContainer:function(){return e("#attach-screenshot-image-container")},getIssueKey:function(){return e("input[name='id']").val()},getProjectId:function(){return e("input[name='projectId']").val()},getDocument:function(){return e(document)},getWindow:function(){return e(window)},getFileNameInput:function(){return e("#attachscreenshotname")},hasPngExtension:function(e){var t=/\.png$/i;return t.test(e)},setFileToConvert:function(t){e("input[name='filetoconvert']").val(t)},buildPasteCatcher:function(){if(document.getElementById("attach-screenshot-form")){var e=document.createElement("div");return e.setAttribute("contenteditable","true"),e.style.width=0,e.style.height=0,e.style.position="absolute",e.style.top="-5000px",document.getElementById("attach-screenshot-form").appendChild(e),e}},_getFormSubmits:function(){return e("#attach-screenshot-form").find("button.aui-button")},disable:function(){return this._getFormSubmits().attr("disabled","disabled"),this},enable:function(){return this._getFormSubmits().removeAttr("disabled"),this},isEnabled:function(){return this.isVisible()&&!this._getFormSubmits().attr("disabled")},isVisible:function(){return e("#attach-screenshot-form").length>0},initDialog:function(e){this.pasteCatcher={},this.presenter=e,this.pasteCatcher=this.buildPasteCatcher()}},d.initScreenshotPasteHandler=function(){var e=d.dialogView;d.screenshotFileUpload={},d.resetUploadErrors(),d.dialogView.initDialog(d),d.$document=e.getDocument(),d.$window=e.getWindow(),d.$container=e.getContainer(),d.$fakeInput=e.getFakeInput(),d.bindOnce(d.$container,"click",d.setFocusOnClickHandler),d.bindOnce(d.$fakeInput,"focus",d.showFocusOnFieldHandler),d.bindOnce(d.$fakeInput,"blur",d.hideFocusOnFieldHandler),d.bindOnce(d.$fakeInput,"keydown",d.keyDownHandler),r.browserIsSupported()?d.bindOnce(d.$window,"paste",d.pasteHandler):e.displayErrors({compatibility:AJS.format("Your browser is not supported. Consider using an alternative supported browser such as {0}Google Chrome{1} or {2}Firefox{3}.",'<a href="//www.google.com/chrome/browser/">',"</a>",'<a href="//www.mozilla.org/firefox/">',"</a>")})},d.resetUploadErrors=function(){d.uploadError=!1,d.uploadErrorMsg=void 0},d.setUploadError=function(e){d.uploadError=!0,d.uploadErrorMsg=e},d.bindOnce=function(e,t,n){e.unbind(t,n),e.bind(t,n)},d.showFocusOnFieldHandler=function(){d.$container.addClass("focus")},d.hideFocusOnFieldHandler=function(){d.$container.addClass("focus")},d.setFocusOnClickHandler=function(){d.$fakeInput.focus()},d.pasteHandler=function(e){d.dialogView.isEnabled()&&(e=r.normalizePasteEvent(e),d.dialogView.onPaste(e))},d.polyPasteHandler=function(e,t,n){d.dialogView.isEnabled()&&(d.screenshotFileUpload={length:-1},d.screenshotFileUploadUri=t,d.dialogView.createImage(n))},d.keyDownHandler=function(e){r.isKeyPasteEvent(e)&&d.dialogView.pasteCatcher.focus&&d.dialogView.pasteCatcher.focus()},d.imageCreatedHandler=function(){d.doAjaxUpload(this.dialogView.getIssueKey(),this.dialogView.getFileNameInput().val())},d.getMimeType=function(){return"image/png"},d.createData=function(){return d.screenshotFileUpload},d.clipboardDataIsEmpty=function(e){return null==window.clipboardData&&!(e&&e.clipboardData&&e.clipboardData.types&&e.clipboardData.types.length>0)},d.validateFileSize=function(e,t,n){var t=t||d.dialogView.getFileSize(),n=n||d.dialogView.getMaxSize();if(t>n){var i=l.Text.fileSize(n,t);e.fileUpload=AJS.format("Screenshot is too large to attach. Attachment is {0} but the largest allowed attachment is {1}.",i[1],i[0])}},d.validateFormData=function(n,i){var a={};return e.isPlainObject(n)&&t.isEmpty(n)&&(a.fileUpload="Please paste the image you wish to upload"),d.validateFileSize(a),d.uploadError&&(a.fileUpload="The error occurred during image upload - you will need to try the pasting image again. Sorry for the inconvenience."),""==i&&(a.fileName="You must specify a filename of the image."),r.isValidFileName(i)||(a.fileName="Filename must not contain the characters \'\\\', \'/\', \'\"\', \':\', \'?\', \'*\', \'\u003c\', \'|\', \'\u003e\', \'!\'"),a},d.doAjaxUpload=function(i,r){d.dialogView.disable();var a={};if(d.validateFileSize(a),!t.isEmpty(a))return d.dialogView.displayErrors(a),void d.dialogView.enable();var o=d.createData(),l=d.getMimeType(),c=e("#attach-screenshot-form").find("input[name='formToken']").attr("value"),u=encodeURIComponent(this.dialogView.getProjectId()),p=AJS.contextPath()+"/rest/internal/2/AttachTemporaryFile?size="+d.dialogView.getFileSize()+"&filename="+encodeURIComponent(r)+"&atl_token="+encodeURIComponent(atl_token())+"&issueId="+encodeURIComponent(this.dialogView.getIssueKey())+(c?"&formToken="+encodeURIComponent(c):"");d.resetUploadErrors();var h=n.getTemporaryBinaryUploadHandler(),g=h?h(u,o,r,encodeURIComponent(c)):d.executeAjaxUpload(o,p,l);g.progress(function(e){"init"==e&&d.progressView.initProgress()}).done(function(e){"string"==typeof e&&(e=JSON.parse(e)),d.dialogView.setFileToConvert(e.id)}).fail(function(e,t,n,i){var r;if("abort"===i.statusText)r="The call to the Jira server did not complete within the timeout period.  We are unsure of the result of this operation.";else if(i.hasData){var a=JSON.parse(i.data);r=a.errorMessage?a.errorMessage:s.buildSimpleErrorContent(i,{alert:!1})}d.setUploadError(r),d.dialogView.displayErrors({fileUpload:r})}).always(function(){var t=e.Deferred();t.resolve(),t.then(function(){d.dialogView.enable(),d.progressView.finish()})}).progress(function(e){"init"!=e&&d.progressView.progressHandler(e)})},d.executeAjaxUpload=function(t,n,i){c.trigger("attach.screenshot.html5.jira.upload");var r=e.Deferred(),a=s.makeRequest({type:"POST",url:n,contentType:i,processData:!1,data:t,timeout:d.REQUEST_TIMEOUT_MILLIS,success:r.resolve.bind(r),error:r.reject.bind(r),xhr:function(){var t=e.ajaxSettings.xhr();return r.notify("init"),t.upload.addEventListener("progress",r.notify.bind(r)),t}});return r.always(function(){e.ajaxSettings.xhr().removeEventListener("progress",d.progressView.progressHandler),e(o.attachScreenshotDialog).off("Dialog.hide",a.abort)}),e(o.attachScreenshotDialog).one("Dialog.hide",a.abort),r.promise()},d.show=function(){var n=new e.Deferred,i=e(".issueaction-attach-screenshot-html5");return null!=a.current?n.reject().promise():0==i.length?n.reject().promise():(t.defer(function(){i.trigger("click")}),e(document).on("dialogContentReady",function(e,t){t===o.attachScreenshotDialog&&d.dialogView.isEnabled()?n.resolve(t):n.reject()}),e(document).on("ajaxComplete.jira.screenshot.dialog",function(e,t,r){r.url.indexOf(i.attr("href"))>-1&&setTimeout(function(){n.isResolved()||n.reject()},1e3)}),n.always(function(){e(document).off("ajaxComplete.jira.screenshot.dialog")}),n.promise())}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/issue-paste.js' */
define("dndattachment/ctrlv/issue-paste",["jquery","dndattachment/ctrlv/trace","dndattachment/ctrlv/tracking","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/base64decode","jira/dialog/dialog","jira/util/events","dndattachment/util/events/types","exports"],function(t,e,n,a,i,r,o,u,c,s){"use strict";function l(t,e){e.stateName=t;var n=function(){var n=e.apply(null,arguments);return n.stateName=t,n};return n.stateName=t,n}function d(t,e,n){return l(t,function(){var a=setTimeout(function(){f(_)},n),i=e.apply(null,arguments),r=function(t,e){var n=i(t,e);if(n)return clearTimeout(a),n};return r.stateName=t,r})}function f(t,e){if(f.eventQueue)return void f.eventQueue.push({type:t,object:e});for(f.eventQueue=[{type:t,object:e}];f.eventQueue.length>0;){var n=f.eventQueue.splice(0,1)[0],a=A(n.type,n.object);a&&(A=a)}delete f.eventQueue}var g=0,E=1,v=2,m=3,p=4,h=5,I=6,T=7,w=8,_=9,N=l("idle",function(){function i(e){if(!t(e.target).is(":input:not(.wiki-textfield, #summary)")&&!a.isContentEditable(e.target))return!0}return function(r,o){if(r==g&&a.isKeyPasteEvent(o)){if(a.browserIsNativePaste()||!i(o)||!a.browserIsSupported())return;return n.trigger("attach.screenshot.html5.catchClipboard"),new D(o)}if(r==E){if(a.isImagePasteEvent(o))return n.trigger("attach.screenshot.html5.handlePaste"),i(o)?(t(o.target).is(":input.wiki-textfield")&&o.preventDefault(),new L(o)):void e("jira/attach-images-plugin/pasteIgnored");e("jira/attach-images-plugin/pasteIgnoredNotImage")}}}),D=d("catchClipboard",function(e){function n(){o.remove()}var i=document.activeElement;e.selectionStart=e.target.selectionStart,e.selectionEnd=e.target.selectionEnd;var o=t('<div contenteditable="true" class="attach-screenshot-paste-catcher"></div>').appendTo("body");return o.focus(),t(i).is(":focusable:input,:aui-focusable:input")&&setTimeout(function(){i.focus()}),function(t,u){if(t==E){if(a.isImagePasteEvent(u))return n(),u.target=i,new L(u);if(a.isHtmlImagePasteEvent(u))return n(),u.target=i,new b(u);if(a.isTextPasteEvent(u)){n();var c=a.getTextPasteContent(u);return a.insertToInput(c,e.target,e.selectionStart,e.selectionEnd),u.preventDefault(),new N}}if(t==_){n();var s=o.find(">img");if(s.is(":only-child")){var l=s.attr("src");if(0===l.toLowerCase().indexOf("http"))return N();var d=r.decodeBase64DataUri(l),f=new Blob([d],{type:"image/png"});return new O(f,e)}var g=a.getTextContent(o[0]);return a.insertToInput(g,e.target,e.selectionStart,e.selectionEnd),N()}}}),b=l("imageLoading",function(t){var e=a.getHtmlImagePaste(t);return e?a.loadImage(e).then(function(t){f(p,t)},f.bind(null,h)):f(h),function(e,n){if(e==p){var i=a.convertImageToBlob(n);return i?new O(i,t):new N}if(e==_||e==h)return new N}}),L=d("fileLoading",function(t){return i.getFileFromEvent(t).done(function(t){f(v,t)}).fail(function(){f(m)}),function(e,n){return e==v?new O(n,t):e==m||e==_?new N:void 0}},1e3),O=l("attachImage",function(e,n){var i=n.target,r=a.generateFileName()+".png",o=a.convertBlobToImage(e,r);return u.trigger(c.ATTACHMENT_FOR_PAGE_RECEIVED,{files:[o],isWikiTextfieldFocused:a.isWikiTextfield(t(i)),wikiTextfield:i,isPaste:!0,successCallback:function(){f(I)}}),function(t,e){return new N}}),A=new N;s._getStateMap=function(){return{events:{EVENT_WINDOW_KEYDOWN:g,EVENT_WINDOW_PASTE:E,EVENT_FILE_LOADED:v,EVENT_FILE_LOAD_ERROR:m,EVENT_IMAGE_LOADED:p,EVENT_IMAGE_LOAD_ERROR:h,EVENT_DIALOG_LOADED:I,EVENT_DIALOG_CLOSED:T,EVENT_DIALOG_CANCELED:w,EVENT_TIMEOUT:_},states:{StateIdle:N,StateCatchClipboard:D,StateImageLoading:b,StateFileLoading:L,StateAttachImage:O}}},s.initIssuePaste=function(){t(window).on("keydown",function(t){f(g,t)}),t(window).on("paste",function(t){f(E,a.normalizePasteEvent(t))}),u.bind("Dialog.hide",function(t,e,n){n?f(w,e):f(T,e)})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/trace.js' */
define("dndattachment/ctrlv/trace",[],function(){"use strict";return function(){return JIRA.trace.apply(void 0,arguments)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/tracking.js' */
define("dndattachment/ctrlv/tracking",["exports"],function(t){"use strict";t.trigger=function(t,n){AJS.trigger("analytics",{name:t,data:n||{}})}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/executor.js' */
define("dndattachment/ctrlv/executor",["jquery","jira/util/events","dndattachment/ctrlv/html5","dndattachment/upload/handler","exports"],function(e,t,n,r,a){a.register=function(){var a={name:"JIRA Ctrl+V attachment executor",weight:5,isValid:function(e,t){return!!t.isPaste},processFiles:function(r,a){var c=e.Deferred();return n.show().done(function(n){var a=e("#attach-screenshot-placeholder-message"),i=e.Event("paste");i.clipboardData={files:r},a.focus(),setTimeout(function(){a.trigger(i)}),t.bind("Dialog.hide",function(e,t,n){n?c.reject():c.resolve([t.find("#attachscreenshotname").val()+".png"])})}),c}};r.registerExecutor(a)}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:jira-html5-attach-images-resources', location = 'jira-dnd-attachment-module/js/ctrlv/initialize.js' */
define("dndattachment/ctrlv/initialize",["jquery","underscore","dndattachment/ctrlv/utility","dndattachment/ctrlv/html5","dndattachment/ctrlv/issue-paste","dndattachment/ctrlv/tracking","dndattachment/ctrlv/executor","jira/dialog/dialog-register","jira/dialog/form-dialog","exports"],function(t,e,n,i,a,r,o,c,s,d){"use strict";d.init=function(){var n=s.extend({options:{}});JIRA.ScreenshotDialog=n,a.initIssuePaste(),t(document).ready(function(){var a=t.Deferred();a.resolve(),c.attachScreenshotDialog=new n({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",isIssueDialog:!0,onContentRefresh:function(){this.$form.bind("before-submit",function(n){var a=i.validateFormData(i.screenshotFileUpload,t.trim(i.dialogView.getFileNameInput().val()));return 0==i.dialogView.getFileSize()?(n.preventDefault(),!1):!!e.isEmpty(a)||(i.dialogView.displayErrors(a),n.preventDefault(),!1)})},delayShowUntil:function(){return a}}),t(document).bind("dialogContentReady",function(t,e){e===c.attachScreenshotDialog&&null!==document.getElementById("attach-screenshot-form")&&(r.trigger("attach.screenshot.html5.contentReady"),i.initScreenshotPasteHandler())}),t(document).ready(function(){t(document).on("click","#attach-screenshot-html5",function(){r.trigger("attach.screenshot.html5.display")})})}),o.register()}}),require(["dndattachment/ctrlv/initialize","jquery"],function(t,e){"use strict";e(function(){t.init()})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-form-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/FormDropZone.js' */
define("dndattachment/dropzones/FormDropZone",["dndattachment/Parser","dndattachment/integration-register","dndattachment/upload/handler","dndattachment/dropzones/IssueDropZone","jquery","dndattachment/aui","dndattachment/i18n","dndattachment/JIRA","dndattachment/util/DataTransfer","dndattachment/ctrlv/utility","jira/util/events","underscore"],function(e,t,n,o,i,r,a,d,s,h,l,c){var p=o.extend({eventGroup:"formdropzone",init:function(){this._super.apply(this,arguments),this.progressBars=[],this.bind("uploadFinished",this.onUploadFinished.bind(this)),this.$containerNode=this.getContainerNode(),this.$formNode=this.$node.parents("form"),this.formToken=this.$formNode.find('input[name="formToken"]').attr("value"),this.projectId=this.$formNode.find("*[name=pid]").val(),this.$inputNode=i('<input name="dnd-dropzone" type="hidden" />').insertAfter(this.$node),this.$fieldNode=this.$node.parents(".field-group"),this.$fieldNode.addClass("long-field"),this.connectContainer()},onUploadFinished:function(e,t){var n=i('<input type="checkbox" name="filetoconvert"/>').addClass("upload-progress-bar__checkbox").attr("value",t.fileID).attr("id","filetoconvert-"+t.fileID).prop("checked",!0).insertBefore(t.$node);t.bind("onBeforeDestroy",function(){n.prop("checked",!1).prop("value",null)}),setTimeout(function(){t.$node.addClass("upload-progress-bar__upload-ready"),t.setIcon("aui-iconfont-close-dialog")},1e3),d.trace("jira.issue.dnd.uploadfinished")},commitUpload:function(e){return this.queueEvent("commitUpload",{count:e.length}),new i.Deferred},getContainerNode:function(){return this.$node.parents(".jira-dialog-content")},connectContainer:function(){if(this.$dragoverMask=i('<div class="attach-files-drop-zone__dragover-mask" />'),this.$dragoverMask.appendTo(this.$containerNode),this.$body=i(document.body),this.onDragOverDropHandler=this.onDragOverDrop.bind(this),this.onDragLeaveHandler=this.onDragLeave.bind(this),this.onBodyDragOverDropHandler=this.onBodyDragOverDrop.bind(this),this.$containerNode.on("dragenter dragover drop",this.onDragOverDropHandler),this.$containerNode.on("dragleave",this.onDragLeaveHandler),this.$body.on("dragover drop",this.onBodyDragOverDropHandler),this.onBeforeSubmitHandler=this.onBeforeSubmit.bind(this),this.$formNode.on("before-submit",this.onBeforeSubmitHandler),this.onContentAddedHandler=this.onContentAdded.bind(this),d.bind(d.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),l.bind("Dialog.hide",this.onDialogHide.bind(this)),r.dialog2&&r.dialog2.on("hide",this.onDialogHide.bind(this)),this.projectId){this.externalTemporaryAttachmentCreator=t.getTemporaryAttachmentCreator(this.projectId,this.formToken,this.$node[0]);var e=t.getConnectedTemporaryBinaryUploadHandler();"function"==typeof e&&(this.externalPasteUploadHandler=e(this.projectId,this.formToken,this.$node[0]));var n=t.getTemporaryAttachmentZoneCreator();if("function"==typeof n){var o={};this.externalZone=n(this.projectId,this.formToken,this.$node[0],this.$containerNode[0],{onFileUploadStarted:function(e){var t=new i.Deferred;o[e.id]=t,this.queueTask(t.promise())}.bind(this),onFileUploadFinished:function(e){o[e.id].resolve()}})}}},addHandlerToBrowseLink:function(){this.fileButton.click(this.browseFilesAndUpload.bind(this))},browseFilesAndUpload:function(e,t){if("function"==typeof this.externalTemporaryAttachmentCreator&&n.isDefaultExecutor({})){var o={},r=c.extend({},t,{onFileUploadStarted:function(e){var n=new i.Deferred;o[e.id]=n,this.queueTask(n.promise()),t&&t.onFileUploadStarted&&t.onFileUploadStarted.call(e,e)}.bind(this),onFileUploadFinished:function(e){o[e.id].resolve(),t&&t.onFileUploadFinished&&t.onFileUploadFinished.call(null)}});return this.externalTemporaryAttachmentCreator.call(null,e,r),!0}this.browseLinkHandler.call(this,e)},disconnectContainer:function(){this.externalZone&&this.externalZone.deactivate(),n.disconnectCurrentDropZone(this),this.$dragoverMask.remove(),this.$containerNode.removeClass("attach-files-drop-zone__dragover"),this.$containerNode.off("dragover drop",this.onDragOverDropHandler),this.$containerNode.off("dragleave",this.onDragLeaveHandler),this.$formNode.off("before-submit",this.onBeforeSubmitHandler),d.unbind(d.Events.NEW_CONTENT_ADDED,this.onContentAddedHandler),l.unbind("Dialog.hide",this.onDialogHide.bind(this)),r.dialog2&&r.dialog2.off("hide",this.onDialogHide.bind(this))},isAttached:function(){return i.contains(document.body,this.$node[0])},onContentAdded:function(){this.isAttached()||this.disconnectContainer()},onDialogHide:function(){this.$body.off("dragover drop",this.onBodyDragOverDropHandler)},onBodyDragOverDrop:function(e){e.preventDefault(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="none")},onDragOverDrop:function(e){return this.isAttached()?void(h.dragEventContainsFiles(e)&&(e.preventDefault(),e.stopPropagation(),e.originalEvent&&(e.originalEvent.dataTransfer.dropEffect="copy"),this.$containerNode.addClass("attach-files-drop-zone__dragover"),"dragenter"===e.type&&this.externalZone&&(n.isDefaultExecutor({})?this.externalZone.activate():this.externalZone.deactivate()),"drop"===e.type&&(this.$containerNode.removeClass("attach-files-drop-zone__dragover"),i(document).trigger("dropHandled"),e.isPasteEvent?this.externalPasteUploadHandler?this.externalPasteUploadHandler(e.dataTransfer.files[0]):this.doAjaxUpload(e.dataTransfer):this.externalZone&&n.isDefaultExecutor({})?this.externalZone.drop():this.doAjaxUpload(e.dataTransfer)))):void this.disconnectContainer()},doAjaxUpload:function(e){var t=new s(e);t.getFiles().then(function(e){this.handleFilesReceived(e),this.queueEvent("fileDrop",{count:e.length})}.bind(this))},onDragLeave:function(){this.$containerNode.removeClass("attach-files-drop-zone__dragover")},onBeforeSubmit:function(e){if(this.isDirty){e.preventDefault();var t={};t[this.$inputNode.attr("name")]=a("dnd.attachment.upload.in.progress"),d.applyErrorsToForm(this.$formNode,t),this.$formNode.find(".error").toArray().some(function(e){e.scrollIntoView()})}},markDirty:function(e){o.prototype.markDirty.apply(this,arguments),this.isDirty=e,d.trace(e?"jira.issue.dnd.isdirty":"jira.issue.dnd.isclear")},handleNewProgressBar:function(e){this.progressBars.push(e),e.bind("onBeforeDestroy",c.bind(function(){this.trigger("progressBarOnBeforeDestroy",e),this.progressBars=c.filter(this.progressBars,function(t){return t!==e}),0===this.progressBars.length&&this.trigger("allUploadsCancelled")},this)),e.bind("onDestroy",c.bind(function(){this.trigger("progressBarDestroyed")},this)),e.bind("onFinished",c.bind(function(){this.trigger("progressBarFinished")},this)),e.bind("onFailed",c.bind(function(){this.trigger("progressBarFailed")},this)),this.trigger("progressBarStarted")},filesStillUploading:function(){return c.filter(this.progressBars,function(e){return!e.isFinished()}).length>0},anyFilesFailed:function(){return c.filter(this.progressBars,function(e){return e.isFailed()}).length>0}});return p});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/AttachFilesDropZone.js' */
define("dndattachment/dropzones/AttachFilesDropZone",["dndattachment/dropzones/FormDropZone","jquery"],function(e,n){var t=e.extend({eventGroup:"attachfiledropzone",init:function(){this._super.apply(this,arguments),this.bind("progressBarInserted",function(e,t){var r=new n.Deferred;this.queueTask(r),t.result.done(r.resolve.bind(r)),t.bind("onBeforeDestroy",function(){r.resolve()})}.bind(this))},checkMarkDirty:function(){this.pendingQueue.length<=1&&this.markDirty(!1)}});return t});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/dropzones/CreateIssueDropZone.js' */
define("dndattachment/dropzones/CreateIssueDropZone",["jquery","dndattachment/dropzones/FormDropZone"],function(e,n){var r=n.extend({eventGroup:"createissuedropzone",progressBarType:"dndattachment/progressbars/ProjectUploadProgressBar",getContainerNode:function(){return e(this.$node.parents(".jira-dialog-content")[0]||this.$node.parents("form#issue-create").parents(".aui-page-panel-content")[0])},handleNewProgressBar:function(e){this._super.apply(this,arguments),e.bind("onDestroy onFinished",_.bind(function(){if(!this.filesStillUploading()){var e={};e[this.$inputNode.attr("name")]="",JIRA.applyErrorsToForm(this.$formNode,e)}},this))}});return r});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/js/progressbars/ProjectUploadProgressBar.js' */
define("dndattachment/progressbars/ProjectUploadProgressBar",["jquery","dndattachment/progressbars/UploadProgressBar"],function(e,a){return a.extend({getProjectId:function(){return this.$node.parents("form").find("*[name=pid]").val()},getUploadParams:function(e){var t=a.prototype.getUploadParams.apply(this,arguments);return this.getProjectId()&&(t.projectId=this.getProjectId()),t},loadThumbnail:function(a){if(this.isImageType())return this._super.apply(this,arguments);var t=this.getThumbnailNode();t.removeClass("upload-progress-bar__thumbnail_image").addClass("upload-progress-bar__thumbnail_icon").addClass("upload-progress-bar__thumbnail_icon_aui");var r="aui-iconfont-devtools-file",s="File";"object"==typeof a&&(r=JIRA.Templates.ViewIssue.matchFileClass({mimetype:a.type}),s=JIRA.Templates.ViewIssue.matchFileIconAlt({mimetype:a.type}));var o=e('<span class="aui-icon aui-icon-large"/>').addClass(r).attr("title",s);return o.appendTo(t)}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/AttachFilesDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.AttachFilesDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/AttachFilesDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:dnd-create-issue-drop-zone', location = 'jira-dnd-attachment-module/templates/CreateIssueDropZone.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.DnDAttachmentPlugin&&(JIRA.Templates.DnDAttachmentPlugin={}),JIRA.Templates.DnDAttachmentPlugin.CreateIssueDropZone=function(e,t){return'<div duiType="dndattachment/dropzones/CreateIssueDropZone" class="issue-drop-zone" data-upload-limit="'+soy.$$escapeHtml(e.jiraAttachmentSize)+'" data-upload-size="'+soy.$$escapeHtml(e.uploadLimit)+'"></div>'+(e.description?'<div class="description">'+soy.$$escapeHtml(e.description)+"</div>":"")};;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:drag-and-drop-attachment-javascript-init', location = 'jira-dnd-attachment-module/js/initIssueDropZone.js' */
require(["dndattachment/Parser","jquery","dndattachment/dropzones/IssueDropZone","dndattachment/upload/handler","dndattachment/upload/default/executor","dndattachment/aui","dndattachment/TemporaryAttachments","dndattachment/util/Configuration","dndattachment/util/FileSizeUtil"],function(t,e,n,a,o,i,r,d,s){function u(n,o){var i=n.find(".field-group.file-input-list");if(0!=i.size()&&!(i.find('*[duiType*="'+o+'"]').length>0)){var d=i.find("input[name=filetoconvert]:checked").map(function(t,n){return r.getAttachment(n.value,e(n).siblings("label").text())}).toArray(),u=i.find(".description:last-child").html();i.empty();var c=e(JIRA.Templates.DnDAttachmentPlugin[o]({uploadLimit:s.format(m),jiraAttachmentSize:m,description:u}));t.parse(c.appendTo(i)).then(function(t){null!=t&&(t.loadAttachments(d),a.setCurrentDropZone(t))})}}function c(t,n){var o=function(){u(t.$popupContent,n)};t.$popup&&t.$popup.is(":visible")?o():t.onContentReady(o),e(t).bind("Dialog.hide",function(){a.disconnectCurrentDropZone()})}function p(n){var o=n&&"attachmentmodule"==n.attr("id")&&e(".mod-content:not(.issue-drop-zone)",n);if(o&&o.size()>0){if(0==n.find("#add-attachments-link").length)return;o.addClass("issue-drop-zone");var i=e(JIRA.Templates.DnDAttachmentPlugin.AttachmentsDropZone({uploadLimit:s.format(m),jiraAttachmentSize:m}));t.parse(i.prependTo(o)).then(function(t){l&&l.disconnectContainer(),l=t,a.setAttachmentDropZone(t)})}}if(n.prototype.isSupportedBrowser()){var l,m=d.getWRM("upload-limit"),f=function(){JIRA.Dialogs.attachFile&&c(JIRA.Dialogs.attachFile,"AttachFilesDropZone");var t=["create-issue-dialog","create-subtask-dialog","edit-issue-dialog"],n=function(e,n,a){_.contains(t,n.attr("id"))&&c(a,"CreateIssueDropZone")};e(i).on("Dialog.show",n),JIRA.Dialog.current&&n(null,JIRA.Dialog.current.$popup,JIRA.Dialog.current),JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED,function(t,e,n){u(e,"CreateIssueDropZone"),p(e)});var r=e("form#issue-create, form#issue-edit");r.size()>0&&u(r,"CreateIssueDropZone"),a.initialize(),a.registerExecutor(o),p(e("#attachmentmodule"));var d="issue-drop-zone-document__dragover";e(document).on("dragover dragenter",function(){e("body").addClass(d)}),e(document).on("dragleave drop dropHandled",function(){e("body").removeClass(d)})};e.isReady?f():i.$(f),e.event.props?e.event.props.push("dataTransfer"):e.event.addProp("dataTransfer")}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/IssueEditorWrapper.js' */
define("jira-agile/rapid/ui/detail/inlineedit/issue-editor-wrapper",["underscore","jquery","require"],function(e,i,n){"use strict";function t(){if(!w){w=new E,w.fieldsLoader._getFieldsData=d,w.viewIssueData.fetch=r,w.saveInProgressManager.saveIssue=l,w.issueController.show=function(){},w.canDismissComment=function(){return!0};var e={};i(GH).unbind(v("QuickEdit.fieldChange")).bind(v("QuickEdit.fieldChange"),function(i,n){e[n.fieldId]=n.fieldChangeData}),w.on("saveSuccess",function(n){var t=n.savedFieldIds[0];b(t,y.getReloadReasonForChangedField(t)),i(GH).trigger("issueUpdated",{issueId:n.issueId,source:"detailView",fieldId:t,fieldChanges:e});var r=GH.RapidViewConfig.currentData.data.estimationStatistic.fieldId===t?"estimateStatisticField":t;AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.inlineedit.submit",data:{changedField:r}})})}}function r(e,n){var t;t=a(n)?s():_;var r=new i.Deferred;return r.resolve(t),r.promise()}function s(){var e={};return e.fields=[],e.issue={id:R(),key:G(),isEditable:!0,operations:{linkGroups:[]}},e.panels={leftPanels:[],rightPanels:[],infoPanels:[]},c(e),e}function a(i){if(!i.issueEntity||!_)return!0;var n=i.issueEntity;return A!==n.key||!e.isEqual(M?M:null,n.viewIssueQuery?n.viewIssueQuery:null)}function l(i,n,t,r,s){var a=e.extend(s||{},{dataFilter:function(e){M=null;var i=JSON.parse(e);return i=c(i),JSON.stringify(i)}}),l=t[0],u=l;S.isTimeTrackingField(l)&&(S.specifyWhichFieldToSave(l,r,V.getEditsInProgress()),u=S.getServerFieldId());var d=w.saveInProgressManager;d.triggerBeforeSaving();var o,f,g=e.extend(r,{issueId:i,atl_token:atl_token(),singleFieldEdit:!0,fieldsToForcePresent:[u],skipScreenCheck:!0,rapidViewId:GH.DetailsView.rapidViewId}),v=e.extend({type:"POST",url:AJS.contextPath()+"/secure/DetailsViewAjaxIssueAction.jspa?decorator=none",headers:{"X-SITEMESH-OFF":!0},error:function(e){d._handleSaveError(i,n,t,e)},success:function(e,r,s,a){f=a.data,"string"==typeof f?d._handleHtmlResponse(i,n,t,f):(h.transformFieldHtml(f),S.isTimeTrackingField(t[0])&&(f.fields=S.removeOtherTrackingField(t[0],f.fields)),d.triggerSaveSuccess(i,n,t,f)),I(n,t)},complete:function(){d.removeSaveInProgress(o),JIRA.trigger(C.INLINE_EDIT_SAVE_COMPLETE)},data:g},a);o=JIRA.SmartAjax.makeRequest(v),d.addSaveInProgress(o),d.triggerSavingStarted(i,t,g)}function u(){D||(D=new k,D.on("refineViewer",function(e){e.preventDefault(),w.once("loadComplete",function(e,i){i.issueId===R()&&b(null,y.ATTACHMENTS_CHANGED)}),M=e.query,w.updateIssueWithQuery(e.query)}),D.capture(T))}function d(e,n){var t=new i.Deferred;return setTimeout(function(){if(w){var i=j();i&&i.done(function(i){t.resolve(o(i,e,n))})}},0),t.promise()}function o(e,i,n){var t=h.transformFieldHtml({fields:e});return{issueId:i,issueKey:n,fields:t.fields}}function c(e){return e&&e.panels&&(e.panels.infoPanels=[],e.panels.leftPanels=[],e.panels.rightPanels=[]),A=e.issue.key,_=e,e}function f(){D&&D.destroy(),D=null}function g(){w&&w.close(),i(GH).unbind(v("QuickEdit.fieldChange")),w=null}function v(e){return e+"."+p}function I(e,i){var n=void 0;if(GH.RapidBoard.State.isWorkMode()?n=GH.GridDataController.getModel().data.issues[e]:GH.RapidBoard.State.isPlanMode()&&(n=GH.BacklogModel.getIssueData(e)),n){var t=[];i.forEach(function(e){t.push({name:e})}),GH.RapidBoard.sendIssueUpdatedTrackEvent(n,t)}}var p="agileIssueEditorEventNamespace",m=n("jira/util/data/meta"),E=n("jira/components/issueeditor"),h=n("jira/components/issueviewer/legacy/issuefieldutil"),k=n("jira/components/issueviewer/linkscapturer"),S=n("jira-agile/rapid/ui/detail/inlineedit/timetracking-fields-helper"),y=n("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"),C=n("jira/util/events/types"),F=n("jira/featureflags/feature-manager"),P=(n("jira-agile/features/feature-flags"),function(){return F.isFeatureEnabled("cbb.heritage")}),w=null,D=null,T=null,H=null,b=null,j=null,R=null,G=null,A=null,_=null,M=null,V={init:function(e){T=e.$detailContainer,H=e.getRapidViewIdCallback,b=e.loadIssueDetailCallback,j=e.getInlineEditableFieldsCallback,R=e.getIssueIdCallback,G=e.getIssueKeyCallback,t(),u()},loadIssueToEditor:function(){m.set("server-view-issue-is-editable",!0);var e=n("jira-agile/rapid/deferred-resources-loader");e.handleDeferredResourceImport(P()&&!w,function(){return w.loadIssue({id:R(),key:G()})})},triggerFieldUpdate:function(i,n){var t=w.editIssueController,r=e.find(t.getFields().models,function(e){return e.id===i});r&&(t.getIssueEventBus().triggerPanelRendered(r.id,n),r.triggerUpdateRequired())},hasEditsInProgress:function(){return this.getEditsInProgress().length>0},getEditsInProgress:function(){var i=w.editIssueController;return e.union(i.getDirtyEditsInProgress(),i.getEditsInProgress())},destroy:function(){A=null,_=null,M=null,H=null,b=null,j=null,R=null,G=null,f(),g()},getWrappedIssueEditor:function(){return w},_getFieldsData:d,getIssueAttachmentQuery:function(){return M}};return V});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/DetailViewInlineEditor.js' */
define("jira-agile/rapid/ui/detail/inlineedit/issue-detail-view-inline-editor",["require"],function(e){"use strict";function i(){t(),n(),a(),r(),E.unbind(u(h.ISSUE_REFRESHED)),E.bind(u(h.ISSUE_REFRESHED),g.debounce(l,0))}function t(){w.off(u("click")).on(u("click"),"#commentmodule .issue-activity-sort-link",function(e){e.preventDefault();var i=f(e.currentTarget).attr("href");f.get(i).done(function(){b(null,T.COMMENTS_CHANGED)})}),JIRA.bind(h.NEW_CONTENT_ADDED,function(e,i,t){t===JIRA.CONTENT_ADDED_REASON.panelRefreshed&&"commentmodule"===i.attr("id")&&i.find(".issue-activity-sort-link").off("click")}),E.unbind(u(h.UNLOCK_PANEL_REFRESHING)),E.bind(u(h.UNLOCK_PANEL_REFRESHING),g.throttle(function(e,i){"addcommentmodule"===i&&b(null,T.COMMENTS_CHANGED)},1e3,{trailing:!1}))}function n(){w.off(u("focus")).on(u("focus"),".ghx-estimate input",function(){var e=w.find(".ghx-estimate"),i=e.find(".ghx-estimate-scope-warning");if("ACTIVE"===R()&&0===i.length){i=f('<div class="ghx-estimate-scope-warning"></div>'),i.text("Sprint scope will be affected by this action.");var t=e.find(".ghx-editing");0===t.length&&(t=e.find(".editable-field.active .field-group")),t.append(i)}})}function a(){var i=e("jira/components/issueeditor/eventtypes"),t=e("jira/components/issueeditor/inlineeditutils");E.bind(i.INLINE_EDIT_STARTED,function(e,i,n,a){I.isTimeTrackingField(i)&&(a.find(".error").length||t.BlurTriggers.Default(i,I.getFieldFromContainer(i,a)))})}function r(){E.unbind(u(h.NEW_CONTENT_ADDED)),E.bind(u(h.NEW_CONTENT_ADDED),function(e,i,t){if(t===JIRA.CONTENT_ADDED_REASON.panelRefreshed&&A.indexOf(i.attr("id"))>=0){var n=g.any(i.find(".attachment-content"),function(e){return g.isNull(f(e).data("issue-id"))});n&&(GH.RapidBoard.State.isPlanMode()?b(null,T.ATTACHMENTS_CHANGED):(GH.windowActivityNotifier.trigger("blur"),b(null,T.ATTACHMENTS_CHANGED)))}})}function l(){s(),o()}function s(){_(["wrc!com.atlassian.jira.plugins.jira-workflow-designer:view-issue-page-workflow-designer"],function(){JIRA.WorkflowDesigner.browserIsSupported()&&JIRA.WorkflowDesigner.ViewIssue.replaceViewWorkflowLink(f(document))})}function o(){JIRA.trigger(h.NEW_CONTENT_ADDED,[f("#attachmentmodule"),D.panelRefreshed])}function d(e){e.find("#commentmodule .activitymodule-link.issue-comment-action").attr("target","_blank")}function u(e){return e+"."+c}var c="agileDetailViewInlineEditableEventNamespace",g=e("underscore"),f=e("jquery"),E=e("jira/util/events"),m=e("jira-agile/rapid/ui/detail/inlineedit/dialogsoverrider"),p=e("jira/components/issueviewer/legacy/issuefieldutil"),N=e("jira-agile/rapid/ui/detail/inlineedit/issue-editor-wrapper"),D=e("jira/util/events/reasons"),I=e("jira-agile/rapid/ui/detail/inlineedit/timetracking-fields-helper"),T=e("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"),A=["attachment_thumbnails","file_attachments"],h=e("jira/util/events/types"),_=e("wrm/require"),w=null,v=null,b=null,C=null,k=null,R=null,S={init:function(e){N.init(e),w=e.$detailContainer,v=e.getRapidViewIdCallback,b=e.loadIssueDetailCallback,C=e.getIssueIdCallback,k=e.getIssueKeyCallback,R=e.getIssueSprintStatusCallback,m.init(b),i()},loadIssueToEditor:N.loadIssueToEditor,triggerFieldUpdate:N.triggerFieldUpdate,getFieldSelector:p.getFieldSelector,hasEditsInProgress:N.hasEditsInProgress,getEditsInProgress:N.getEditsInProgress,getIssueAttachmentQuery:N.getIssueAttachmentQuery,_issueEditorWrapper:N,fixUpDetailView:d,destroy:function(){v=null,b=null,C=null,k=null,R=null,m.destroy(),N.destroy()},registerListenersForTab:function(e,i){switch(e){case"comment":d(i),t();break;case"header":n(),a();break;case"attachment":r(),o();break;case"details":N.loadIssueToEditor()}}};return S});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/DialogsOverrider.js' */
define("jira-agile/rapid/ui/detail/inlineedit/dialogsoverrider",["require","jquery","jira/util/events","jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason"],function(i,e,n,t){"use strict";function a(i){return d.DIALOG_OVERRIDE_LIST.indexOf(i)!==-1}var d={};d.DIALOG_OVERRIDE_LIST=["delete-attachment-dialog","delete-issue-link-dialog","edit-comment","delete-comment-dialog","assign-to-me-link-handler","assign-dialog","link-issue-dialog","attach-screenshot-dialog"];var o=null;return d.init=function(d){"function"!=typeof o&&(o=function(e,n,o){AJS.dim();var l=o&&a(o.options.id);l&&(o._performRedirect=function(){this.redirected=!1},o.options.onDialogFinished=function(){var e=i("jira-agile/rapid/ui/detail/details-model");d(null,t.REASON_FOR_DIALOG[o.options.id]),AJS.$(GH).trigger("issueUpdated",{issueId:e.viewData.id,source:"detailView"}),o.hide()})},n.bind("Dialog.show",o),n.bind("Dialog.hide",function(i,n,t){e(".aui-blanket").remove()}))},d.destroy=function(){n.unbind("Dialog.show",o),o=null},d});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/TimeTrackingFieldsHelper.js' */
define("jira-agile/rapid/ui/detail/inlineedit/timetracking-fields-helper",["require"],function(e){"use strict";function i(e){return e===o?l:e===l?o:void 0}function t(e){return e===o?T:e===l?g:void 0}var n,r=e("underscore"),a=e("jquery"),c=e("jira/components/issueviewer/legacy/issuefieldutil"),l="timeoriginalestimate",o="timeestimate",s="timetracking_targetsubfield",u=[l,o],d="timetracking",g="timetracking_originalestimate",T="timetracking_remainingestimate",m={_visibleForTesting:{ORIGINAL_TIME_ESTIMATE:l,REMAINING_TIME_ESTIMATE:o,TARGET_FIELD_PARAM_NAME:s,ORIGINAL_ESTIMATE_FORM_PARAM_ID:g,REMAINING_ESTIMATE_FORM_PARAM_ID:T}};return m.getFieldFromContainer=function(e,i){if(this.isTimeTrackingField(e))return i.find("#"+t(e))},m.specifyWhichFieldToSave=function(e,l,o){var u,d=a(c.getFieldSelector(e)),g=a(c.getFieldSelector(i(e)));if(0!==g.length)u=0!==g.find(".ghx-fa").length;else{var T=this.getFieldFromContainer(i(e),d);u=r.isEmpty(T.val())}u&&!r.contains(o,i(e))?delete l[t(i(e))]:(l[s]=t(e),n=!0)},m.removeOtherTrackingField=function(e,t){return n?r.reject(t,function(t){return m.isTimeTrackingField(e)&&t.id===i(e)}):t},m.getServerFieldId=function(){return d},m.isTimeTrackingField=function(e){return r.contains(u,e)},m});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/EditableDetailsViewReloader.js' */
define("jira-agile/rapid/ui/detail/inlineedit/details-view-reloader",["jquery","underscore","jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason","jira-agile/rapid/ui/detail/details-model","jira-agile/rapid/ui/detail/details-field-renderer","jira/analytics/web-client"],function(e,t,a,i,n,d){"use strict";function r(e,t,a){var d=i.viewData;if(d)if("comment"===t&&"COMMENT"===e.defaultTabs[0].tabId&&o(e.defaultTabs[0],d),i.replaceUpdatedTabs(e),a&&c.hasEditsInProgress())c.renderDetailsSingleField(a);else{var r=c.getContainer();if("header"===t)n.renderDetailsHeaderFields(i.viewData,r,c.opts);else{var s={tabs:{defaultTabs:e.defaultTabs},trackingStatisticFieldId:i.viewData.trackingStatisticFieldId};n.updateTabsContent(s,r),c.registerListenersForTab(t,r)}GH.DetailsViewScrollTracker.afterDetailsViewLoaded({issueId:i.viewData.id})}}function s(e){var a=new AJS.$.Deferred,i={rapidViewId:c.rapidViewId,issueIdOrKey:c.selectedIssueKey,loadSubtasks:c.opts.showSubtaskTab};return"attachment"!==e||t.isUndefined(c.getAttachmentViewQuery)||(i=t.extend(i,c.getAttachmentViewQuery())),GH.Ajax.get({url:"/xboard/issue/details/"+e,data:i},"detailView/"+e).done(function(e){a.resolveWith(null,[e])}),a.promise()}function o(t,a){var i=a.tabs.defaultTabs.find(function(e){return"COMMENT"===e.tabId});if(i&&!(t.totalComments<=i.totalComments)){var n=e(t.sections[0].html).find(".activity-comment"),r=/comment\-(\d*)$/.exec(n[n.length-1].id)[1],s=/comment\-(\d*)$/.exec(n[0].id)[1],o=Math.max(s,r),c=e(t.sections[1].html).find("[name='add-comment']")[0].href,l=/\?.*id=(\d*)$/.exec(c)[1],u={objectType:"issue",objectId:l,containerType:"project",attributes:{projectType:"software",boardId:GH.DetailsView.rapidViewId,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics()},action:"created",actionSubject:"comment",actionSubjectId:o,source:GH.RapidBoard.State.isPlanMode()?"backlogScreen":"boardScreen"};d.sendTrackEvent(u)}}var c=GH.DetailsView,l=["details","header","description"],u={};u[a.HEADER_FIELD_CHANGED]=l,u[a.DETAILS_FIELD_CHANGED]=l,u[a.LINKED_ISSUES_CHANGED]=l,u[a.LINKED_ISSUE_CREATED_AND_COMMENTED]=t.union(l,["comment"]),u[a.DESCRIPTION_CHANGED]=l,u[a.ATTACHMENTS_CHANGED]=["attachment"],u[a.COMMENTS_CHANGED]=["comment"],u[a.SUBTASKS_CHANGED]=t.union(["sub_tasks"],l),u[a.VERSION_PANEL_CHANGED]=l,u[a.EPIC_PANEL_CHANGED]=l,u[a.ISSUE_ASSIGNED_AND_COMMENTED]=t.union(l,["comment"]);var E={reload:function(t,a){var i=u[t];if(i){var n={},d=void 0;i.forEach(function(e){var t=s(e);"details"!==e?n[e]=t:d=t});var o=[];Object.keys(n).forEach(function(e){var t=n[e];o.push(t.done(function(t){return r(t,e,a)}))}),d&&e.when.apply(e,o).done(function(){d.done(function(e){return r(e,"details",a)})})}}};return E});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-inline-editable', location = 'jira-agile-module/includes/js/rapid/ui/detail/editable/EditableDetailsViewReloadReason.js' */
define("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason",["require"],function(E){"use strict";var D=E("underscore"),_=E("jira-agile/rapid/ui/detail/details-model"),A={HEADER_FIELD_CHANGED:"HEADER_FIELD_CHANGED",DETAILS_FIELD_CHANGED:"DETAILS_FIELD_CHANGED",DESCRIPTION_CHANGED:"DESCRIPTION_CHANGED",LINKED_ISSUES_CHANGED:"LINKED_ISSUES_CHANGED",LINKED_ISSUE_CREATED_AND_COMMENTED:"LINKED_ISSUE_CREATED_AND_COMMENTED",ATTACHMENTS_CHANGED:"ATTACHMENTS_CHANGED",COMMENTS_CHANGED:"COMMENTS_CHANGED",SUBTASKS_CHANGED:"SUBTASKS_CHANGED",VERSION_PANEL_CHANGED:"VERSION_PANEL_CHANGED",EPIC_PANEL_CHANGED:"EPIC_PANEL_CHANGED",ISSUE_ASSIGNED_AND_COMMENTED:"ISSUE_ASSIGNED_AND_COMMENTED"},N={description:A.DESCRIPTION_CHANGED,summary:A.HEADER_FIELD_CHANGED,timeestimate:A.HEADER_FIELD_CHANGED,timeoriginalestimate:A.HEADER_FIELD_CHANGED};return D.extend(A,{REASON_FOR_DIALOG:{"delete-attachment-dialog":A.ATTACHMENTS_CHANGED,"attach-screenshot-dialog":A.ATTACHMENTS_CHANGED,"delete-issue-link-dialog":A.LINKED_ISSUES_CHANGED,"edit-comment":A.COMMENTS_CHANGED,"delete-comment-dialog":A.COMMENTS_CHANGED,"link-issue-dialog":A.LINKED_ISSUE_CREATED_AND_COMMENTED,"delete-issue-dialog":A.SUBTASKS_CHANGED,"assign-to-me-link-handler":A.DETAILS_FIELD_CHANGED,"assign-dialog":A.ISSUE_ASSIGNED_AND_COMMENTED},getReloadReasonForChangedField:function(E){var D=N[E];return D?D:_.isFieldInSection(E,"estimate")||_.isFieldInSection(E,"tracking")?A.HEADER_FIELD_CHANGED:A.DETAILS_FIELD_CHANGED}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-cards', location = 'jira-agile-module/includes/js/rapid/ui/work/Card.soy' */
// This file was automatically generated from Card.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.card.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.card == 'undefined') { GH.tpl.rapid.card = {}; }


GH.tpl.rapid.card.card = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-issue ghx-newcard js-detailview js-issue' + ((opt_data.issue.parentKey) ? ' ghx-issue-subtask' : ' js-parent-drag') + ((! opt_data.isRankable) ? ' ghx-not-rankable' : '') + ((opt_data.issue.done) ? ' ghx-done' : '') + ((opt_data.selectedIssueKeys[opt_data.issue.key]) ? ' ghx-selected' + ((opt_data.mainSelectedIssue == opt_data.issue.key) ? ' ghx-selected-primary' : '') : '') + ((opt_data.issue.flagged) ? ' ghx-flagged' : '') + ((opt_data.issue.color) ? ' ghx-card-color-enabled' : '') + ' ghx-type-' + soy.$$escapeHtml(opt_data.issue.typeId) + '" data-issue-id="' + soy.$$escapeHtml(opt_data.issue.id) + '" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '"><section class="ghx-summary" title="' + soy.$$escapeHtml(opt_data.issue.summary) + '" data-tooltip="' + soy.$$escapeHtml(opt_data.issue.summary) + '">' + soy.$$escapeHtml(opt_data.issue.summary) + '</section>' + ((opt_data.showEpic && opt_data.issue.epicField) ? '<section><div class="ghx-row ghx-highlighted-field">' + GH.tpl.field.epicLink.renderEpicLink({field: opt_data.issue.epicField}) + '</div></section>' : '');
  if (opt_data.issue.extraFields) {
    output += '<section class="ghx-extra-fields">';
    var extraFieldList49 = opt_data.issue.extraFields;
    var extraFieldListLen49 = extraFieldList49.length;
    for (var extraFieldIndex49 = 0; extraFieldIndex49 < extraFieldListLen49; extraFieldIndex49++) {
      var extraFieldData49 = extraFieldList49[extraFieldIndex49];
      output += '<div class="ghx-row">' + GH.tpl.extraFields.renderExtraField({extraField: extraFieldData49}) + '</div>';
    }
    output += '</section>';
  }
  output += '<section class="ghx-stat-fields"><div class="ghx-row ghx-stat-1">' + ((opt_data.issue.typeUrl) ? '<span class="ghx-field ghx-field-icon" data-tooltip="' + soy.$$escapeHtml(opt_data.issue.typeName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '" alt="' + soy.$$escapeHtml(opt_data.issue.typeName) + '"></span>' : '') + ((opt_data.issue.flagged) ? '<span class="ghx-field ghx-flag-priority"><span class="aui-icon aui-icon-small" title="' + soy.$$escapeHtml('Flagged') + '"></span></span>' : (opt_data.issue.priorityUrl) ? '<span class="ghx-field ghx-field-icon" data-tooltip="' + soy.$$escapeHtml(AJS.format('{0} priority',opt_data.issue.priorityName)) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '" alt="' + soy.$$escapeHtml(AJS.format('{0} priority',opt_data.issue.priorityName)) + '"></span>' : '');
  var stat__soy79 = opt_data.issue.trackingStatistic ? opt_data.issue.trackingStatistic : opt_data.issue.estimateStatistic;
  output += ((stat__soy79 && stat__soy79.statFieldId != 'issueCount') ? '<span class="ghx-field">' + GH.tpl.rapid.card.statisticsValue({stat: stat__soy79, statLabel: opt_data.statLabel}) + '</span>' : '') + ((opt_data.issue.timeInColumn) ? '<span class="ghx-field">' + GH.tpl.rapid.card.daysInColumn({days: opt_data.issue.timeInColumn.days}) + '</span>' : '') + GH.tpl.rapid.card.renderCardAvatar(opt_data) + '</div><div class="ghx-row ghx-stat-2">' + GH.tpl.rapid.card.renderCardAvatar(opt_data) + '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '" aria-label="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-tooltip="' + soy.$$escapeHtml(opt_data.issue.key) + '" tabindex="-1" class="ghx-key"><span class="ghx-issuekey-pkey js-key-link" aria-hidden="true">' + soy.$$escapeHtml(opt_data.displayIssueKey.pkey) + '</span><span class="ghx-issuekey-number js-key-link" aria-hidden="true">' + soy.$$escapeHtml(opt_data.displayIssueKey.number) + '-</span></a></div></section>' + ((opt_data.issue.color != null) ? '<div class="ghx-grabber" style="background-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"></div>' : '<div class="ghx-grabber ghx-grabber-transparent"></div>') + '<div class="ghx-move-count"><b></b></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.card.card.soyTemplateName = 'GH.tpl.rapid.card.card';
}


GH.tpl.rapid.card.statisticsValue = function(opt_data, opt_ignored) {
  var output = '';
  var tooltip__soy120 = '' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.stat.statFieldValue.text + ' ' + opt_data.statLabel) : soy.$$escapeHtml('Unestimated'));
  output += '<aui-badge class="ghx-estimate" data-tooltip="' + soy.$$escapeHtml(tooltip__soy120) + '">' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.stat.statFieldValue.text) : '-') + '</aui-badge>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.card.statisticsValue.soyTemplateName = 'GH.tpl.rapid.card.statisticsValue';
}


GH.tpl.rapid.card.renderCardAvatar = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issue.assigneeName) ? '<span class="ghx-field">' + GH.tpl.avatar.renderIssueAvatar({issue: opt_data.issue, tooltipHtml: soy.$$escapeHtml('Assignee') + ': ' + soy.$$escapeHtml(opt_data.issue.assigneeName)}) + '</span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.card.renderCardAvatar.soyTemplateName = 'GH.tpl.rapid.card.renderCardAvatar';
}


GH.tpl.rapid.card.daysInColumn = function(opt_data, opt_ignored) {
  var output = '';
  var tooltip__soy147 = '' + soy.$$escapeHtml(AJS.format('{0,choice,0#{0} days|1#{0} day|1\x3c{0} days} in this column',opt_data.days));
  var icon__soy149 = '' + ((opt_data.days >= 20) ? 'more-then-20' : (opt_data.days >= 12) ? 'more-then-12' : (opt_data.days >= 8) ? 'more-then-8' : (opt_data.days >= 5) ? 'more-then-5' : (opt_data.days >= 3) ? 'more-then-3' : (opt_data.days >= 2) ? 'more-then-2' : '');
  output += (opt_data.days >= 1) ? '<div class="ghx-days ' + soy.$$escapeHtml(icon__soy149) + '" data-tooltip="' + soy.$$escapeHtml(tooltip__soy147) + '"></div>' : '';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.card.daysInColumn.soyTemplateName = 'GH.tpl.rapid.card.daysInColumn';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-cards', location = 'jira-agile-module/includes/js/rapid/ui/plan/Card.soy' */
// This file was automatically generated from Card.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.planissuelist.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.planissuelist == 'undefined') { GH.tpl.planissuelist = {}; }


GH.tpl.planissuelist.renderIssueList = function(opt_data, opt_ignored) {
  var output = '';
  var issueList3 = opt_data.issues;
  var issueListLen3 = issueList3.length;
  for (var issueIndex3 = 0; issueIndex3 < issueListLen3; issueIndex3++) {
    var issueData3 = issueList3[issueIndex3];
    if (issueData3.showMore) {
      output += GH.tpl.sprintbacklogview.renderShowAllContainer({issuesNotShown: issueData3.issuesNotShown});
    } else {
      output += (issueData3.subTasks) ? (issueData3.fakeParent) ? '<div class="ghx-parent-newcard ghx-parent-group js-fake-parent js-parent-drag" data-fake-parent-issue-key="' + soy.$$filterNoAutoescape(issueData3.key) + '">' : '<div class="ghx-parent-newcard ghx-parent-group js-parent-drag ghx-subtasks-expandable ' + ((issueData3.expanded) ? 'ghx-subtasks-expanded' : '') + '" role="listitem" aria-label="' + soy.$$escapeHtml(issueData3.key) + ' ' + soy.$$escapeHtml(issueData3.summary) + '" data-issue-id="' + soy.$$filterNoAutoescape(issueData3.id) + '" data-issue-key="' + soy.$$filterNoAutoescape(issueData3.key) + '" >' : '';
      if (! issueData3.fakeParent) {
        var subTaskCount__soy35 = '' + ((issueData3.subTasks) ? soy.$$escapeHtml(issueData3.subTasks.length) : '0');
        var epicLabel__soy41 = '' + ((! opt_data.isbacklogDataV2Enabled) ? (issueData3.epic) ? soy.$$escapeHtml(opt_data.epics[issueData3.epic]) : 'null' : (issueData3.epic) ? (opt_data.epics && opt_data.epics[issueData3.epic]) ? soy.$$escapeHtml(opt_data.epics[issueData3.epic]) : soy.$$escapeHtml({epicLabel: issueData3.epicField.text, epicColor: issueData3.epicField.epicColor, key: issueData3.epicField.epicKey}) : 'null');
        output += GH.tpl.planissuelist.renderIssue({issue: issueData3, isOrphanedSubtask: issueData3.fakeParent, subTasksCount: subTaskCount__soy35, epic: epicLabel__soy41, selectedIssueKeys: opt_data.issueRenderData.selectedIssueKeys, mainSelectedIssue: opt_data.issueRenderData.mainSelectedIssue, statLabel: opt_data.statLabel, estimationEnabled: opt_data.estimationEnabled, isRankable: opt_data.isRankable, hiddenIssues: opt_data.issueRenderData.hiddenIssues, showEpic: opt_data.showEpic, isAgility: opt_data.isAgility});
      }
      if (issueData3.subTasks) {
        output += '<div class="ghx-subtask-group">';
        var subTaskList75 = issueData3.subTasks;
        var subTaskListLen75 = subTaskList75.length;
        for (var subTaskIndex75 = 0; subTaskIndex75 < subTaskListLen75; subTaskIndex75++) {
          var subTaskData75 = subTaskList75[subTaskIndex75];
          output += GH.tpl.planissuelist.renderIssue({issue: subTaskData75, isOrphanedSubtask: issueData3.fakeParent, subTasksCount: 0, epic: null, selectedIssueKeys: opt_data.issueRenderData.selectedIssueKeys, mainSelectedIssue: opt_data.issueRenderData.mainSelectedIssue, statLabel: opt_data.statLabel, estimationEnabled: opt_data.estimationEnabled, isRankable: opt_data.isRankable, hiddenIssues: opt_data.issueRenderData.hiddenIssues, showEpic: opt_data.showEpic, isAgility: opt_data.isAgility});
        }
        output += '</div>';
      }
      output += (issueData3.subTasks) ? '</div>' : '';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssueList.soyTemplateName = 'GH.tpl.planissuelist.renderIssueList';
}


GH.tpl.planissuelist.renderIssueCount = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-issue-count">';
  var numVisibleIssues__soy97 = opt_data.issueListStats.visibleCount;
  var numTotalIssues__soy98 = opt_data.issueListStats.statisticsFieldValue ? opt_data.issueListStats.statisticsFieldValue : opt_data.issueListStats.totalCount;
  output += GH.tpl.planissuelist.renderVisibleIssueCount({numVisibleIssues: numVisibleIssues__soy97, numTotalIssues: numTotalIssues__soy98}) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssueCount.soyTemplateName = 'GH.tpl.planissuelist.renderIssueCount';
}


GH.tpl.planissuelist.renderVisibleIssueCount = function(opt_data, opt_ignored) {
  return '' + ((opt_data.numVisibleIssues == opt_data.numTotalIssues) ? soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.numTotalIssues)) : soy.$$escapeHtml(AJS.format('{1} of {0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues} visible',opt_data.numTotalIssues,opt_data.numVisibleIssues)) + '<a class="ghx-reset js-clear-all-filters" title="' + soy.$$escapeHtml('Issues are currently filtered. Click to clear all filters on this board.') + '">' + soy.$$escapeHtml('Clear all filters') + '</a>');
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderVisibleIssueCount.soyTemplateName = 'GH.tpl.planissuelist.renderVisibleIssueCount';
}


GH.tpl.planissuelist.renderIssue = function(opt_data, opt_ignored) {
  var output = '';
  var hasEpicLabel__soy115 = opt_data.epic && opt_data.epic.epicLabel || opt_data.issue.epicField;
  var hasVersionOrEpic__soy116 = opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0 || hasEpicLabel__soy115;
  output += '<div class="js-issue ghx-backlog-card ghx-newcard js-sortable' + ((opt_data.issue.parentKey) ? ' ghx-issue-subtask' : ' js-parent-drag') + ' ghx-issue-compact' + ((! opt_data.isRankable) ? ' ghx-not-rankable' : '') + ((opt_data.issue.done) ? ' ghx-done' : '') + ((opt_data.selectedIssueKeys[opt_data.issue.key]) ? ' ghx-selected' + ((opt_data.mainSelectedIssue == opt_data.issue.key) ? ' ghx-selected-primary' : '') : '') + ' ghx-type-' + soy.$$escapeHtml(opt_data.issue.typeId) + ((opt_data.hiddenIssues[opt_data.issue.key]) ? ' ghx-filtered' : '') + ((opt_data.issue.flagged) ? ' ghx-flagged' : '') + ((opt_data.issue.parentKey || opt_data.issue.parentId) ? ' ghx-subtask' : '') + ((opt_data.issue.shouldIndentTop) ? ' ghx-subtask-indent-top' : '') + ((opt_data.issue.color == null) ? ' ghx-no-card-color' : '') + ((opt_data.isAgility) ? ' agility-simplified-issue' : '') + '" data-issue-id="' + soy.$$escapeHtml(opt_data.issue.id) + '" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" ><div class="ghx-issue-content"><div class="ghx-row ghx-plan-main-fields">' + ((opt_data.issue.subTasks) ? '<a class="ghx-card-expander ghx-iconfont aui-icon aui-icon-small"></a>' : '<span class="ghx-backlog-card-expander-spacer"></span>') + ((opt_data.issue.typeUrl) ? '<span class="ghx-type items-spacer" title="' + soy.$$escapeHtml(opt_data.issue.typeName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '" alt="' + soy.$$escapeHtml(opt_data.issue.typeName) + '"></span>' : '') + '<div class="ghx-summary" data-tooltip="' + soy.$$escapeHtml(opt_data.issue.summary) + '"><span class="ghx-inner">' + soy.$$escapeHtml(opt_data.issue.summary) + '</span></div></div><div class="ghx-row ghx-end ghx-items-container">';
  var extraClass__soy180 = opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0 && (hasEpicLabel__soy115 || opt_data.isOrphanedSubtask) ? 'ghx-label-double' : 'ghx-label-single';
  output += (! opt_data.isAgility) ? (opt_data.subTasksCount > 0) ? GH.tpl.planissuelist.renderSubTasksCount({count: opt_data.subTasksCount}) : '' : '';
  if (! opt_data.isAgility) {
    if (hasVersionOrEpic__soy116 || ! opt_data.issue.extraFields) {
      if (opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0) {
        var extraClasses__soy193 = ['ghx-label-version', 'ghx-label', extraClass__soy180];
        var extraAttributes__soy194 = {title: opt_data.issue.fixVersionsUI.formattedVersions};
        if (opt_data.issue.fixVersionsUI.versions.length > 1) {
          var text__soy197 = soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions.length) + ' ' + soy.$$escapeHtml('Versions');
          output += GH.tpl.field.issueLabel.renderLabel({extraClasses: extraClasses__soy193, text: text__soy197, extraAttributes: extraAttributes__soy194}) + ' ';
        } else {
          output += GH.tpl.field.issueLabel.renderLabel({extraClasses: extraClasses__soy193, text: opt_data.issue.fixVersionsUI.versions[0].name, extraAttributes: extraAttributes__soy194}) + ' ';
        }
      }
      output += (opt_data.showEpic) ? (opt_data.epic && opt_data.epic.epicLabel) ? GH.tpl.field.epicLink.renderEpicLinkFromIssue({epic: opt_data.epic, extraClasses: 'ghx-label ' + extraClass__soy180}) + ' ' : (opt_data.issue.epicField) ? GH.tpl.field.epicLink.renderEpicLink({field: opt_data.issue.epicField, extraClasses: 'ghx-label ' + extraClass__soy180}) + ' ' : '' : '';
    }
  }
  output += ((opt_data.isOrphanedSubtask) ? GH.tpl.field.issueLabel.renderOrphanedSubtaskLabel({parentKey: opt_data.issue.parentKey, extraClasses: 'ghx-label ghx-orphaned-subtask ' + extraClass__soy180}) + ' ' : '') + '<span class="ghx-end ghx-items-container">' + GH.tpl.planissuelist.renderAvatarAndEstimate(opt_data) + '</span></div>';
  if (! opt_data.isAgility) {
    if (opt_data.issue.extraFields) {
      output += '<div class="ghx-plan-extra-fields ghx-plan-extra-fields-' + soy.$$escapeHtml(opt_data.issue.extraFields.length) + ' ghx-row">';
      var extraFieldList245 = opt_data.issue.extraFields;
      var extraFieldListLen245 = extraFieldList245.length;
      for (var extraFieldIndex245 = 0; extraFieldIndex245 < extraFieldListLen245; extraFieldIndex245++) {
        var extraFieldData245 = extraFieldList245[extraFieldIndex245];
        output += ((! (extraFieldIndex245 == 0)) ? '<span class="ghx-extra-field-seperator">&middot;</span>' : '') + GH.tpl.extraFields.renderExtraField({extraField: extraFieldData245});
      }
      output += '</div>';
    }
  }
  output += '</div>' + ((opt_data.issue.color != null) ? '<div class="ghx-grabber" style="background-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"></div>' : '<div class="ghx-grabber ghx-grabber-transparent"></div>') + '<div class="ghx-move-count"><b></b></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderIssue.soyTemplateName = 'GH.tpl.planissuelist.renderIssue';
}


GH.tpl.planissuelist.renderAvatarAndEstimate = function(opt_data, opt_ignored) {
  return GH.tpl.avatar.renderIssueAvatar({issue: opt_data.issue, tooltipHtml: soy.$$escapeHtml('Assignee') + ': ' + soy.$$escapeHtml(opt_data.issue.assigneeName)}) + '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '" title="' + soy.$$escapeHtml(opt_data.issue.key) + '" class="ghx-key js-key-link">' + soy.$$escapeHtml(opt_data.issue.key) + '</a>' + ((opt_data.issue.flagged) ? '<span class="ghx-flag ghx-flag-priority"><span class="aui-icon" title="' + soy.$$escapeHtml('Flagged') + '"></span></span>' : (opt_data.issue.priorityUrl) ? '<span class="ghx-priority" title="' + soy.$$escapeHtml(opt_data.issue.priorityName) + '"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '" alt="' + soy.$$escapeHtml(opt_data.issue.priorityName) + '"></span>' : '') + ((! opt_data.isAgility) ? (opt_data.estimationEnabled) ? GH.tpl.planissuelist.renderStatisticsValue({stat: opt_data.issue.estimateStatistic, label: opt_data.statLabel}) : '' : '');
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderAvatarAndEstimate.soyTemplateName = 'GH.tpl.planissuelist.renderAvatarAndEstimate';
}


GH.tpl.planissuelist.renderStatisticsValue = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.stat && opt_data.stat.statFieldId != 'issueCount') {
    var badgetext__soy301 = '' + ((opt_data.stat.statFieldValue && opt_data.stat.statFieldValue.text) ? soy.$$escapeHtml(opt_data.stat.statFieldValue.text) : '-');
    output += aui.badges.badge({extraClasses: ['ghx-estimate-badge'], text: badgetext__soy301, extraAttributes: {title: opt_data.label}, extraClasses: ['ghx-statistic-badge']});
  } else {
    output += aui.badges.badge({text: '', extraClasses: ['ghx-spacer', 'ghx-statistic-badge']});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderStatisticsValue.soyTemplateName = 'GH.tpl.planissuelist.renderStatisticsValue';
}


GH.tpl.planissuelist.renderSubTasksCount = function(opt_data, opt_ignored) {
  return '<span class="ghx-sub-tasks-count">' + soy.$$escapeHtml(AJS.format('{0} {0,choice,1#sub-task|1\x3csub-tasks}',opt_data.count)) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.planissuelist.renderSubTasksCount.soyTemplateName = 'GH.tpl.planissuelist.renderSubTasksCount';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:software-feedback-collector', location = 'jira-agile-module/includes/js/bridge/software-feedback-collector.js' */
!function(){var e=void 0,n=new Promise(function(n){e=n});n.done=function(e){return this.then(e)},define("jira-agile/bridge/software-feedback-collector/init",function(){return function(n){return e(n)}}),define("jira-agile/bridge/software-feedback-collector",function(){return n})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:software-feedback-collector', location = 'jira-agile-module/includes/js/rapid/ui/SimpleBoardSidebarController.js' */
!function(){"use strict";var e=require("jira-agile/bridge/software-feedback-collector"),r=["com.pyxis.greenhopper.jira:project-sidebar-simple-feedback","com.pyxis.greenhopper.jira:global-sidebar-simple-feedback"];require("jquery");e.then(function(e){AJS.Meta.get("is-agility-board")&&JIRA.API.getSidebar().then(function(i){i.on(i.events.BEFORE_NAVIGATE,function(i){r.includes(i.target.getId())&&e.openFeedbackCollector()},!0)})})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/browser-metrics/BrowserMetricsUtil.js' */
define("jira-agile/browser-metrics/browser-metrics-util",["require"],function(r){var e=r("jira-agile/rapid/events"),i=new e,n={};return i.triggerBefore=function(r,e){e&&(n[e]=!0),i.trigger(r)},i.triggerAfter=function(r,e){e&&!n[e]||(delete n[e],i.trigger(r))},i.performanceMark=function(r){window.performance&&window.performance.mark(r)},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/analytics/board-data-update.js' */
define("jira-agile/rapid/analytics/board-data-udpate",["jira/analytics/web-client"],function(t){return function(a,i){t.sendOperationalEvent({source:"activeSprint",actionSubject:"boardView",action:"updated",attributes:{initiator:a,forceConsistency:i}})}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/TraceUtils.js' */
define("jira-agile/rapid/trace-utils",["require","jira/featureflags/feature-manager"],function(e,n){var t={s:{}},a={},i=function(){return n.isFeatureEnabled("jsw.classic.rapidboards.trace.util")};a.startSpan=function(e,n){i()&&(t.s[e]={k:e,ts:(new Date).getTime()},n&&r(e,n))},a.endSpan=function(e,n){if(i()){t.s[e]||(t.s[e]={k:e});var a=t.s[e];a.te=(new Date).getTime(),n&&r(e,n)}},a.log=function(e,n){i()&&(t.s[e]={k:e,ts:(new Date).getTime(),te:(new Date).getTime()},n&&r(e,n))};var r=function(e,n){if(i()){var a=t.s[e];a&&(a.l=Object.assign(a.l||{},n))}};return a.appendSpanLog=function(e,n){if(i()){var a=t.s[e];a&&a.l?a.l=Object.assign(a.l,n):r(e,n)}},a.getTrace=function(){return i()?t:{}},a.flushTrace=function(){t.s={}},a.isKeyPresent=function(e){if(i())return t.s.hasOwnProperty(e)},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/const/PageMode.js' */
define("jira-agile/rapid/const/PageMode",function(){return Object.freeze({PLAN:"plan",WORK:"work",REPORT:"report"})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/work/QuickFiltersBridge.js' */
define("jira-agile/rapid/work/quick-filters-bridge",[],function(){function e(){return new Promise(function(e){return GH.bridge&&GH.bridge.FilterBridge?e(!0):i()?void t.then(function(){e(!0)}):e(!1)})}function i(){return!GH.gadget}var n={},r=void 0,t=new Promise(function(e){r=e});return n.isReactFiltersEnabled=function(){return e()},n.onBridgeLoad=function(){r(!0)},n.resizeLayout=function(){GH&&GH.Layout&&GH.Layout.fireDelayedWindowResize&&GH.Layout.fireDelayedWindowResize()},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/gh-IssueDialogUtil.js' */
define("jira-agile/dialog/issue-dialog-util",["jira/dialog/dialog-register","jquery"],function(e,s){return s.extend(e,{getDefaultAjaxOptions:function(){var e=JIRA.IssueNavigator.getSelectedIssueId(),s=this.options.url||this.$activeTrigger.attr("href")||this.$activeTrigger.data("url");if(/id=\{0\}/.test(s)){if(!e)return!1;s=s.replace(/(id=\{0\})/,"id="+e)}return{data:{decorator:"dialog",inline:"true"},url:s}},storeCurrentIssueIdOnSucessfulSubmit:function(){GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.ISSUE_UPDATE_ACTION),JIRA.IssueNavigator.setIssueUpdatedMsg({issueMsg:this.options.issueMsg,issueId:this.issueId,issueKey:this.issueKey}),this.issueId=null,this.issueKey=null,GH.IssueOperationShortcuts.clearOverrideSelectedIssue()}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/configuration/RapidBoardSkeleton.soy' */
// This file was automatically generated from RapidBoardSkeleton.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.board.skeleton.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.board == 'undefined') { GH.tpl.board = {}; }
if (typeof GH.tpl.board.skeleton == 'undefined') { GH.tpl.board.skeleton = {}; }


GH.tpl.board.skeleton.renderRapidBoardHeaderSkeleton = function(opt_data, opt_ignored) {
  return '<div class="gh-skeleton gh-skeleton-h1"></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.skeleton.renderRapidBoardHeaderSkeleton.soyTemplateName = 'GH.tpl.board.skeleton.renderRapidBoardHeaderSkeleton';
}


GH.tpl.board.skeleton.renderIconButtonSkeleton = function(opt_data, opt_ignored) {
  return '<div class="gh-skeleton gh-skeleton-icon-button"></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.skeleton.renderIconButtonSkeleton.soyTemplateName = 'GH.tpl.board.skeleton.renderIconButtonSkeleton';
}


GH.tpl.board.skeleton.renderIconButtonSkeletonWithId = function(opt_data, opt_ignored) {
  return '<div class="gh-skeleton gh-skeleton-icon-button" ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.skeleton.renderIconButtonSkeletonWithId.soyTemplateName = 'GH.tpl.board.skeleton.renderIconButtonSkeletonWithId';
}


GH.tpl.board.skeleton.renderRapidBoardOperationsSkeleton = function(opt_data, opt_ignored) {
  return '<div class="gh-skeleton gh-skeleton-operations"></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.skeleton.renderRapidBoardOperationsSkeleton.soyTemplateName = 'GH.tpl.board.skeleton.renderRapidBoardOperationsSkeleton';
}


GH.tpl.board.skeleton.renderSkeletonBlock = function(opt_data, opt_ignored) {
  return '<div class="gh-skeleton gh-skeleton-block ' + ((opt_data.className) ? soy.$$escapeHtml(opt_data.className) : '') + '" ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' ' + ((opt_data.width) ? ' width="' + soy.$$escapeHtml(opt_data.width) + '"' : '') + '></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.skeleton.renderSkeletonBlock.soyTemplateName = 'GH.tpl.board.skeleton.renderSkeletonBlock';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/RapidBoard.soy' */
// This file was automatically generated from RapidBoard.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.board.x.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.board == 'undefined') { GH.tpl.board = {}; }
if (typeof GH.tpl.board.x == 'undefined') { GH.tpl.board.x = {}; }


GH.tpl.board.x.renderNoViewsAnonymous = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml('No boards are currently available.') + '</p><p><span class="aui-icon icon-generic"></span>' + soy.$$filterNoAutoescape(AJS.format('Boards may be visible if you {0}log in{1}.','<a href="' + opt_data.loginUrl + '">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderNoViewsAnonymous.soyTemplateName = 'GH.tpl.board.x.renderNoViewsAnonymous';
}


GH.tpl.board.x.renderNoViews = function(opt_data, opt_ignored) {
  return '<div class="aui-message info ghx-notify"><p><span class="aui-icon icon-generic"></span>' + soy.$$escapeHtml('No boards are currently available.') + '</p><p><span class="aui-icon icon-generic"></span>' + soy.$$filterNoAutoescape(AJS.format('{0}Create a new board{1}.','<a class="js-view-action-create">','</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderNoViews.soyTemplateName = 'GH.tpl.board.x.renderNoViews';
}


GH.tpl.board.x.renderRapidBoard = function(opt_data, opt_ignored) {
  return '<div id="ghx-header" class="contains-breadcrumbs"><div class="ghx-top-header ' + ((opt_data.isExperimentalSkeletonEnabled == true) ? 'ghx-expermental-top-header' : '') + '"><div id="ghx-modes-tools"><div id="ghx-refresh-board" ' + ((opt_data.isExperimentalSkeletonEnabled == true) ? 'class="aui-mr1"' : '') + '></div><div id="ghx-automation" ' + ((opt_data.isExperimentalSkeletonEnabled == true) ? 'class="aui-mr1"' : '') + '>' + ((opt_data.isExperimentalSkeletonEnabled == true && opt_data.isWorkMode == true) ? GH.tpl.board.skeleton.renderIconButtonSkeleton(null) : '') + '</div><div id="ghx-header-dynamic-append-zone"></div><div id="ghx-megaphone"></div><div id="ghx-share">' + ((opt_data.isExperimentalSkeletonEnabled == true && opt_data.isWorkMode == true) ? GH.tpl.board.skeleton.renderIconButtonSkeleton(null) : '') + '</div><span id="ghx-view-pluggable">' + ((opt_data.isExperimentalSkeletonEnabled == true && opt_data.isWorkMode == true) ? GH.tpl.board.skeleton.renderIconButtonSkeleton(null) : '') + '</span><div id="ghx-view-tools"></div></div>' + ((opt_data.isExperimentalSkeletonEnabled == true) ? GH.tpl.board.skeleton.renderRapidBoardHeaderSkeleton(null) : '') + '<div id="ghx-view-selector"></div></div></div><div id="ghx-content-main" class="ghx-content-main"><div id="ghx-errors"></div><div id="ghx-rabid"><div id="ghx-operations">' + ((opt_data.isExperimentalSkeletonEnabled == true) ? GH.tpl.board.skeleton.renderRapidBoardOperationsSkeleton(null) : '') + '</div><div id="ghx-plan"></div><div id="ghx-report" class="ghx-chart"></div><div class="ghx-work-wrapper"><div id="ghx-work" class="ghx-work"></div></div></div></div><div class="adg-throbber"><span class="adg-throbber-container"><span class="adg-throbber-spinner" size="48"><svg class="adg-throbber-svg" focusable="false" height="48" size="48" viewBox="0 0 48 48" width="48" xmlns="http://www.w3.org/2000/svg" ><circle cx="24" cy="24" r="21.5"></circle></svg></span></span></div>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderRapidBoard.soyTemplateName = 'GH.tpl.board.x.renderRapidBoard';
}


GH.tpl.board.x.renderSprintGoal = function(opt_data, opt_ignored) {
  return '' + ((opt_data.goal) ? '<div class="ghx-sprint-goal"><span title="' + soy.$$escapeHtml(opt_data.goal) + '">' + soy.$$escapeHtml(opt_data.goal) + '</span></div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderSprintGoal.soyTemplateName = 'GH.tpl.board.x.renderSprintGoal';
}


GH.tpl.board.x.renderToolSections = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList59 = opt_data.sections;
  var sectionListLen59 = sectionList59.length;
  for (var sectionIndex59 = 0; sectionIndex59 < sectionListLen59; sectionIndex59++) {
    var sectionData59 = sectionList59[sectionIndex59];
    output += '<div class="ghx-view-section ' + soy.$$escapeHtml(sectionData59.cssClass) + '">' + ((sectionData59.id == 'board-tools-section') ? aui.buttons.button({text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-more', iconText: sectionData59.label, extraClasses: 'ghx-actions-tools', extraAttributes: {'aria-expanded': false}, id: sectionData59.id + '-button'}) : aui.buttons.button({text: sectionData59.label, extraClasses: 'ghx-actions-tools ghx-dropdown-trigger', id: sectionData59.id + '-button'})) + '<div class="aui-list" id="' + soy.$$escapeHtml(sectionData59.id) + '-content" style="display: none;"></div></div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderToolSections.soyTemplateName = 'GH.tpl.board.x.renderToolSections';
}


GH.tpl.board.x.renderSectionContent = function(opt_data, opt_ignored) {
  var output = '';
  var subItemList83 = opt_data.subItems;
  var subItemListLen83 = subItemList83.length;
  for (var subItemIndex83 = 0; subItemIndex83 < subItemListLen83; subItemIndex83++) {
    var subItemData83 = subItemList83[subItemIndex83];
    output += GH.tpl.board.x.renderSubItem({subItem: subItemData83, isFirst: subItemIndex83 == 0, isLast: subItemIndex83 == subItemListLen83 - 1});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderSectionContent.soyTemplateName = 'GH.tpl.board.x.renderSectionContent';
}


GH.tpl.board.x.renderSubItem = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.subItem.type == 'section') {
    output += '<ul id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" class="aui-list-section ' + soy.$$escapeHtml(opt_data.subItem.cssClass) + ' ' + ((opt_data.isFirst) ? ' aui-first' : '') + ((opt_data.isLast) ? ' aui-last' : '') + '">';
    var subItemList104 = opt_data.subItem.subItems;
    var subItemListLen104 = subItemList104.length;
    for (var subItemIndex104 = 0; subItemIndex104 < subItemListLen104; subItemIndex104++) {
      var subItemData104 = subItemList104[subItemIndex104];
      output += '<li class="aui-list-item">' + GH.tpl.board.x.renderSubItem({subItem: subItemData104, isFirst: subItemIndex104 == 0, isLast: subItemIndex104 == subItemListLen104 - 1}) + '</li>';
    }
    output += '</ul>';
  } else if (opt_data.subItem.type == 'webItem') {
    output += '<a role="button" href="' + soy.$$escapeHtml(opt_data.subItem.url) + '" ' + ((opt_data.subItem.id) ? 'id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" ' : '') + 'class="aui-list-item-link ' + soy.$$escapeHtml(opt_data.subItem.cssClass) + '">' + soy.$$escapeHtml(opt_data.subItem.label) + '</a>';
  } else if (opt_data.subItem.type == 'webPanel') {
    output += '<div ' + ((opt_data.subItem.id) ? 'id="' + soy.$$escapeHtml(opt_data.subItem.id) + '" ' : '') + 'class="' + soy.$$escapeHtml(opt_data.subItem.cssClass) + '">' + soy.$$filterNoAutoescape(opt_data.subItem.html) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderSubItem.soyTemplateName = 'GH.tpl.board.x.renderSubItem';
}


GH.tpl.board.x.renderWelcomeProjectMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('You have created a Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,'/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectMessageKanban';
}


GH.tpl.board.x.renderWelcomeProjectMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('You have created a Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,'/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectMessageScrum';
}


GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('You have created a sample Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a sample project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,'/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectSampleMessageKanban';
}


GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('You have created a sample Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e and a sample project \x3ca href\x3d\x22{2}\x22\x3e{3}\x3c/a\x3e.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name,'/plugins/servlet/project-config/' + opt_data.project.key,opt_data.project.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeProjectSampleMessageScrum';
}


GH.tpl.board.x.renderWelcomeViewMessageKanban = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('Kanban board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeViewMessageKanban.soyTemplateName = 'GH.tpl.board.x.renderWelcomeViewMessageKanban';
}


GH.tpl.board.x.renderWelcomeViewMessageScrum = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('Scrum board \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderWelcomeViewMessageScrum.soyTemplateName = 'GH.tpl.board.x.renderWelcomeViewMessageScrum';
}


GH.tpl.board.x.renderCreateViewMessage = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('View \x3ca href\x3d\x22{0}\x22\x3e{1}\x3c/a\x3e has been created.','/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView.id,opt_data.rapidView.name)) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.board.x.renderCreateViewMessage.soyTemplateName = 'GH.tpl.board.x.renderCreateViewMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/state/RapidBoardUrlState.js' */
!function(){"use strict";function e(e,a){if(a.rapidView=GH.RapidBoard.UrlState.normalizeNumberParam(e.rapidView),a.projectKey=GH.RapidBoard.UrlState.normalizeStringParam(e.projectKey,null),e.mode===d.WORK){var t=GH.RapidBoard.UrlState.normalizeStringParam(e.modal,null);"detail"===t?a.issueModalOpened=!0:a.issueModalOpened=!1}var r=GH.RapidBoard.UrlState.normalizeStringParam(e[i.PARAM_NAME],null);null!==r&&(a.tab=r);var o=e.mode,l=GH.RapidBoard.UrlState.normalizeBooleanParam(e.useStoredSettings,!1);if(!l||""!==o){GH.RapidBoard.State.isLoadingKanPlanWhileItDisabled(o)&&(o=d.WORK),a.mode=o||d.WORK;var n=GH.RapidBoard.UrlState.normalizeStringParam(e.view,"");a.detailOpened="detail"===n}}function a(e,a){switch(delete a.rapidView,delete a.selectedProjectKey,delete a.projectKey,delete a.chart,_.isUndefined(e.tab)||(a[i.PARAM_NAME]=e.tab),e.mode){case d.WORK:e.detailOpened&&(a.view="detail"),e.issueModalOpened&&(a.modal="detail");break;case d.PLAN:e.detailOpened&&(a.view="detail")}}var d=require("jira-agile/rapid/const/PageMode"),i=require("jira-agile/rapid/ui/SPConfig"),t=require("jira/featureflags/feature-manager"),r=t.isFeatureEnabled("endeavour.rapidboard.pretty-url");GH.RapidBoardUrlState={},GH.RapidBoardUrlState.self="RapidBoardUrlState",GH.RapidBoardUrlState.isApplicable=function(e){return!0},GH.RapidBoardUrlState.getNormalizedFromUrl=function(a,t){if(r)e(a,t);else{t.rapidView=GH.RapidBoard.UrlState.normalizeNumberParam(a.rapidView),delete t.projectKey;var o=GH.RapidBoard.UrlState.normalizeStringParam(a.projectKey,null);if(null!==o&&(t.projectKey=o),GH.RapidBoard.State.getMode()===d.WORK){var l=GH.RapidBoard.UrlState.normalizeStringParam(a.modal,null);"detail"===l?t.issueModalOpened=!0:t.issueModalOpened=!1}var n=GH.RapidBoard.UrlState.normalizeStringParam(a[i.PARAM_NAME],null);null!==n&&(t.tab=n);var p=GH.RapidBoard.UrlState.normalizeStringParam(a.view,""),s=GH.RapidBoard.UrlState.normalizeBooleanParam(a.useStoredSettings,!1);if(s&&""===p)return;switch(GH.RapidBoard.State.isLoadingKanPlanWhileItDisabled(p)&&(p="detail"),p){case"reporting":t.mode=d.REPORT,t.sprintSupportEnabled=GH.RapidBoard.State.isScrumBoard();break;case"planning":t.mode=d.PLAN,t.detailOpened=!0;break;case"planning.nodetail":t.mode=d.PLAN,t.detailOpened=!1;break;case"detail":t.mode=d.WORK,t.detailOpened=!0;break;case"":default:t.mode=d.WORK,t.detailOpened=!1}}},GH.RapidBoardUrlState.toUrl=function(e,t){if(r)a(e,t);else switch(_.isUndefined(e.rapidView)||(t.rapidView=e.rapidView),delete t.projectKey,_.isUndefined(e.projectKey)||(t.projectKey=e.projectKey),_.isUndefined(e.tab)||(t[i.PARAM_NAME]=e.tab),e.mode){case d.WORK:e.detailOpened&&(t.view="detail"),e.issueModalOpened&&(t.modal="detail");break;case d.REPORT:t.view="reporting";break;case d.PLAN:e.detailOpened?t.view="planning":t.view="planning.nodetail"}},GH.RapidBoardUrlState.getNormalizedFromInternal=function(e){e.rapidView=GH.RapidBoard.State.getRapidViewId(),e.mode=GH.RapidBoard.State.getMode(),delete e.projectKey;var a=GH.RapidBoard.State.getProjectKey();_.isUndefined(a)||(e.projectKey=a),e.mode===d.WORK?(e.detailOpened=GH.RapidBoard.State.isDetailsViewOpened(),e.issueModalOpened=GH.RapidBoard.State.isIssueModalOpened()):e.mode===d.PLAN?e.detailOpened=GH.RapidBoard.State.isDetailsViewPlanOpened():e.mode===d.REPORT&&(e.sprintSupportEnabled=GH.RapidBoard.State.isScrumBoard()),GH.RapidBoard.State.isConfigOpen()&&(e.tab=GH.RapidBoard.State.getSelectedConfigTab())},GH.RapidBoardUrlState.updateInternalFromNormalized=function(e){_.isUndefined(e.rapidView)||GH.RapidBoard.State.setRapidViewId(e.rapidView);var a=e.mode,i=e.detailOpened,t=require("jira-agile/rapid/deferred-resources-loader");_.isUndefined(a)||GH.RapidBoard.State.setMode(e.mode),GH.RapidBoard.State.setProjectKey(e.projectKey),_.isUndefined(i)||(a===d.PLAN?t.handleDeferredResourceImport(!GH.PlanController||!GH.DetailsView,function(){GH.PlanController.setDetailViewOpenedState(e.detailOpened)}):GH.WorkController.setDetailViewOpenedState(e.detailOpened)),GH.RapidBoard.State.setSelectedConfigTab(e.tab);var r=e.issueModalOpened;a!==d.WORK||_.isUndefined(r)||GH.RapidBoard.State.setWorkIssueModalOpened(!!r)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/VersionsModel.js' */
GH.VersionsModel=function(e){this.projects=e,this.fixVersions=void 0,this.canCreateVersion=!1},GH.VersionsModel.prototype.setProjects=function(e){this.projects=e},GH.VersionsModel.prototype.updateRawData=function(e){this.canCreateVersion=e.canCreateVersion,this.fixVersions=GH.VersionsModel.buildFixVersions(e,this.projects)},GH.VersionsModel.prototype.isValid=function(){return!!this.fixVersions},GH.VersionsModel.prototype.getVersions=function(){return this.fixVersions},GH.VersionsModel.prototype.getProjects=function(){return this.projects},GH.VersionsModel.prototype.canUserCreateVersion=function(){return this.canCreateVersion},GH.VersionsModel.prototype.getVersionsForIds=function(e){var r=_.chain(e).filter(function(e){return _.has(this.fixVersions,e)},this).map(function(e){return this.fixVersions[e]},this).value();return this.getFixVersionFromArray(r)},GH.VersionsModel.prototype.getUnreleasedVersionsForIds=function(e){var r=_.chain(e).filter(function(e){return _.has(this.fixVersions,e)},this).map(function(e){return this.fixVersions[e]},this).where({released:!1}).value();return this.getFixVersionFromArray(r)},GH.VersionsModel.prototype.getVersion=function(e){return _.has(this.fixVersions,e)?this.fixVersions[e]:null},GH.VersionsModel.prototype.getFixVersionFromArray=function(e){var r=_.sortBy(e,function(e){return e.sequence}),o={};return o.versions=r,o.formattedVersions=_.map(r,this.getToolTip).join(", "),o},GH.VersionsModel.prototype.getToolTip=function(e){return e.released?e.name+" (released)":e.name},GH.VersionsModel.prototype.sort=function(e,r){return e.project?e.project.key===r.project.key?e.sequence-r.sequence:e.project.key<r.project.key?-1:1:e.sequence-r.sequence},GH.VersionsModel.prototype.getUnreleasedVersionList=function(){return _.chain(_.toArray(this.fixVersions)).where({released:!1}).value().sort(this.sort)},GH.VersionsModel.prototype.getAllVersions=function(){return _.chain(_.toArray(this.fixVersions)).value().sort(this.sort)},GH.VersionsModel.prototype.containsId=function(e){return _.has(this.fixVersions,e)},GH.VersionsModel.prototype.isEmpty=function(){return _.isEmpty(this.fixVersions)},GH.VersionsModel.prototype.hasMultiProjects=function(){return this.projects.length>1},GH.VersionsModel.prototype.updateVersion=function(e){return!_.isUndefined(this.fixVersions[e.id])&&(this.fixVersions[e.id]=e,!0)},GH.VersionsModel.buildFixVersions=function(e,r){var o={};return _.each(e.versionsPerProject,function(e,s){s=parseInt(s,10),_.each(e,function(e){var t=_.findWhere(r,{id:s});void 0!==t&&(o[e.id]=_.clone(e),o[e.id].project=t)})}),o};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/VersionsDataService.js' */
!function(e,n){function r(){}var i=require("jira-agile/rapid/ajax");r.prototype={getVersionsModel:function(n){return i.get({url:"/xboard/plan/backlog/versions.json",data:{rapidViewId:n}},"versionsList").andThen(function(n){var r=new e(n.projects);return r.updateRawData(n.versionData),r})},getSimpleVersions:function(e){return this.getVersionsModel(e).andThen(function(e){return n.map(e.getAllVersions(),function(e){return{id:e.id,name:e.project?e.project.key+": "+e.name:e.name}})})},versionExists:function(e,r){return n.some(e,function(e){return e.id===r})}},GH.VersionsDataService=r,GH.versionsDataService=new r}(GH.VersionsModel,_);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/SprintsDataService.js' */
!function(r){function t(){}var n=require("jira-agile/rapid/ajax");t.prototype={getSimpleSprints:function(r){return n.get({url:"/sprintquery/"+r,data:{includeFutureSprints:!1}},"getSimpleSprints").andThen(function(r){return r.sprints})}},GH.SprintsDataService=t,GH.sprintsDataService=new t}(_);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/EpicsDataService.js' */
!function(e){"use strict";function n(){}var t=null,i=require("jira-agile/rapid/ajax");n.prototype={getEpics:function(e){return i.get({url:"/xboard/plan/backlog/epics.json",data:{rapidViewId:e}},"epicsList").andThen(function(e){return t=e.supportsPages,e.epics})},getSimpleEpics:function(n){return this.getEpics(n).andThen(function(n){return e.map(n,function(e){return{id:e.key,name:e.epicLabel?e.key+": "+e.epicLabel:"unlabelled"+"-"+e.key,linkedPagesCount:e.linkedPagesCount}})})},epicExists:function(n,t){return e.some(n,function(e){return e.id===t})},supportsPages:function(){if(null===t)throw"epic data has not been loaded yet";return t}},GH.EpicsDataService=n,GH.epicsDataService=new n}(_);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/BoardDataLoader.js' */
define("jira-agile/rapid/board-data-loader",["require"],function(){"use strict";var a=this,e=require("jira/featureflags/feature-manager"),r=require("jira-agile/rapid/wrm-spa-utils"),t=require("jira-agile/rapid/trace-utils"),i="all-data-promise",n="initial-data",o="GH_SPA_RESOURCES_READY",d="GH_SPA_RB_READY",s=require("jira-agile/rapid/const/PageMode"),l=require("wrm/data"),p="work-all-data",u="plan-all-data",c=function(){return e.isFeatureEnabled("jsw.classic.remove.allData.board.settings")},f=function(){return e.isFeatureEnabled("jsw.classic.board.api-calls.modern-frontend")&&GH.RapidBoard.loadData},S={},g=function(a){t.endSpan("boardDataPromiseSPA",{spaData:"success"}),c()&&GH.RapidBoard.State.isConfigOpen()||e.isFeatureEnabled("jsw.classic.browser-metrics.issueNo")||GH.WorkController&&GH.WorkController.updateBoardState(a)},m=function(a,e){var r=!GH.RapidBoard.State.isFirstLoad()&&_.isEqual(GH.RapidBoard.UrlState.getNormalizedRapidBoardState(),GH.RapidBoard.UrlState.getNormalizedUrlState());GH.RapidBoard.loadData({isRefresh:r,deferred:e,mode:a}),e.done(function(a){return g(a)}).fail(function(){return t.endSpan("boardDataPromiseSPA",{spaData:"fail"})})},b=function(a,e){window.addEventListener(o,function s(){if(window.removeEventListener(o,s),t.startSpan("boardDataPromiseSPA",{mode:a}),f())m(a,e);else{var r=GH.spa[n][i];r.then(function(a){g(a),e.resolveWith(this,[a])},function(a){t.endSpan("boardDataPromiseSPA",{spaData:"fail"})})}}),r.sendEventToSpa(d)};return S.loadData=function(e,r){if(!GH.gadget&&GH.spa&&GH.RapidBoard.State.isFirstLoad()){var i=AJS.$.Deferred();return b(e,i),GH.RapidBoard.State.changeFirstLoadState(),i}if(GH.RapidBoard.State.isFirstLoad()&&!GH.gadget){var n=S.getModeKey(e),o=AJS.$.Deferred();t.startSpan("bigPipeKey",{mode:e});var d=function(){r().done(function(e,r){t.endSpan("bigPipeKey",{success:!0,xhr:r}),o.resolveWith(a,[e])}).fail(function(e,r){t.endSpan("bigPipeKey",{success:!1,xhr:r,data:e}),o.rejectWith(a,[e,r])})};return l.claim(n,function(e){e?(t.endSpan("bigPipeKey",{claim:!0}),o.resolveWith(a,[e])):d()},d),GH.RapidBoard.State.changeFirstLoadState(),setTimeout(function(){performance.getEntriesByName&&performance.getEntriesByName("bigPipe.ghx-page-load-big-pipe.error").length>0&&d()},0),o.promise()}return t.startSpan("bigPipeKeyFallback",{mode:e}),r()},S.getModeKey=function(a){return a===s.WORK?p:u},S});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/OnboardingPlaceholders.js' */
GH.planOnboarding={renderOnboarding:function(){},refresh:function(){},hide:function(){}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/ADG3SoyTemplateFlag.js' */
!function(){GH.tpl||(GH.tpl={})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/configuration/SPConfigController.js' */
define("jira-agile/rapid/ui/SPConfigController",["jira-agile/rapid/ui/SPConfigView","jira-agile/rapid/configuration/ConfigContextLoader","jira/container-api"],function(i,a,o){var e=!1,n={};return n.init=function(o){e=!1,i.prepareConfigView(o),a.getContext().then(function(){GH.RapidBoard.Config.init(),GH.RapidBoard.Config.Columns.on(GH.RapidBoard.Config.Columns.BACKLOG_COLUMN_STATUS_UPDATE,function(){GH.RapidBoard.ViewController.sidebarController.updateSidebar(o.id)},"full-page-load-handler")})},n.isOpen=function(){return i.isOpen()},n.openConfig=function(i){i&&GH.RapidBoard.State.setStoredSelectedConfigTab(i),GH.RapidBoard.State.openConfig(),GH.RapidBoard.State.pushState(),GH.RapidBoard.reload()},n.closeConfig=function(a){e?n.fullPageBackToBoard():(i.disposeConfigView(),GH.RapidBoard.State.closeConfig(),GH.RapidBoard.State.pushState())},n.fullPageBackToBoard=function(){var i=GH.RapidBoard.State.getRapidViewId(),a=AJS.contextPath()+"/secure/RapidBoard.jspa?rapidView="+i+"&useStoredSettings=true";o.navigate(a,function(){window.location.href=a})},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/configuration/SPConfigView.js' */
define("jira-agile/rapid/ui/SPConfigView",["jquery","jira/atlaskit/breadcrumbs"],function(e,r){var a={};return a.renderSpinner=function(){var r=e("<div></div>").addClass("ghx-throbber");e("#ghx-content-main").append(r),setTimeout(function(){return r.spin("large")},1e3)},a.prepareConfigView=function(r){e("#ghx-rabid").empty(),this.renderTitle({model:r,isLoading:!0}),this.renderSpinner()},a.disposeConfigView=function(){var r=require("jira/featureflags/feature-manager");e("body").removeClass("ghx-board-configure"),e("#gh").html(GH.tpl.board.x.renderRapidBoard({isWorkMode:!1,isExperimentalSkeletonEnabled:r.isFeatureEnabled("jsw_classic_boards_experimental_loading_skeleton_dpgxz")})),e("#ghx-operations").append(GH.tpl.viewcontroller.renderOperationsBar())},a.isOpen=function(){return e("body").hasClass("ghx-board-configure")},a.renderTitle=function(e){var a=e.model,i=e.isLoading;AJS.$("#ghx-header").html(GH.tpl.rapid.view.renderConfigurationHeader({name:a.name,rapidViewId:a.id})),r.isEnabled()&&r.render();var n=function(e){AJS.trigger("analyticsEvent",{name:"gh.config.back.to.board"}),i||(e.preventDefault(),GH.RapidBoard.ViewController.setMode(GH.RapidBoard.State.getMode()))};AJS.$("#back-to-board").off("click",n),AJS.$("#back-to-board").on("click",n)},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/work/ReleaseVersionTrigger.js' */
define("jira-agile/rapid/ui/work/release-version-trigger",["jquery","underscore","jira-agile/rapid/events","jira-agile/rapid/global-events","jira-agile/tooltip","require","jira-agile/rapid/deferred-resources-loader","jira-agile/rapid/const/PageMode"],function(e,r,i,n,a,o,t,s){"use strict";function l(e){var r=e.find("#ghx-button-release-version-list"),i=e.find("#ghx-release-version-list");a.tipsify({selector:r,gravity:"e"}),r.on("click",function(){a.hide(r)}),i.on({"aui-dropdown2-show":function(){a.disable(r)},"aui-dropdown2-hide":function(e){a.enable(r)}})}function d(r){e("#ghx-release-version-list").find("a").off("click",g),r.find("#ghx-release-version-list a").on("click",g)}function g(e){var r=AJS.$(e.target).closest("a"),i=r.data("version");p.trigger(p.RELEASE_VERSION,i)}function u(){var e=f.getModel(),i=v.getVersionModel(),n=e.getDoneColumn(),a=e.getIssuesDataForColumn(n.id),o=i.getProjects().length>1,t=r.uniq(r.flatten(a.map(function(e){return e.fixVersions}))),s=i.getUnreleasedVersionsForIds(t).versions,l=r.find(a,function(e){return 0===e.fixVersions.length});return{canRelease:f.canRelease,anythingToRelease:!(!l&&!s.length),versions:s,hasIssuesWithoutVersion:l,hasMultipleProjects:o,doneColumnName:n.name,deferBatchParsed:c()}}function c(){return GH.RapidBoard.State.getMode()===s.WORK&&t.getDeferBatchParsed()}var f,v;n.on("pre-initialization",function(){f=GH.GridDataController,v=GH.VersionController});var h,p=new i;return p.RELEASE_VERSION="release-version",p.remove=function(){h&&h.length&&h.remove()},p.render=function(){this.remove();var r=u();if(h=e(GH.tpl.rapid.work.releaseVersionTrigger.renderReleaseVersionPicker(r)),!c())return h;var i=o("jira-agile/rapid/ui/dialog/release-existing-version-dialog");return i.init(),d(h),l(h),JIRA.trace("gh.release.version.trigger.rendered"),h},p});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/work/ReleaseVersionTrigger.soy' */
// This file was automatically generated from ReleaseVersionTrigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.work.releaseVersionTrigger.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.work == 'undefined') { GH.tpl.rapid.work = {}; }
if (typeof GH.tpl.rapid.work.releaseVersionTrigger == 'undefined') { GH.tpl.rapid.work.releaseVersionTrigger = {}; }


GH.tpl.rapid.work.releaseVersionTrigger.renderReleaseVersionPicker = function(opt_data, opt_ignored) {
  var output = '';
  var tooltip__soy3 = '' + ((! opt_data.anythingToRelease) ? soy.$$escapeHtml('There are no issues to be released') : (! opt_data.canRelease) ? soy.$$escapeHtml('You must be a project administrator or Jira administrator to release versions.') : soy.$$escapeHtml(AJS.format('Release a version from the {0} column',opt_data.doneColumnName)));
  output += '<div id="ghx-release"><!-- Trigger --><button id="ghx-button-release-version-list" aria-owns="ghx-release-version-list" aria-haspopup="true" class="aui-button aui-style-default aui-dropdown2-trigger "' + ((! opt_data.canRelease || ! opt_data.anythingToRelease || ! opt_data.deferBatchParsed) ? 'aria-disabled="true" ' : '') + 'data-tooltip="' + soy.$$escapeHtml(tooltip__soy3) + '">' + soy.$$escapeHtml('Release') + '</button><!-- Dropdown --><div id="ghx-release-version-list" class="ghx-release-version-list aui-style-default aui-dropdown2">' + ((opt_data.hasIssuesWithoutVersion) ? '<div class="aui-dropdown2-section"><ul><li class="aui-list-item"><a class="aui-list-item-link" data-version="">' + soy.$$escapeHtml('New version') + '</a></li></ul></div>' : '');
  if (opt_data.versions.length > 0) {
    output += '<div class="aui-dropdown2-section"><ul>';
    var versionList28 = opt_data.versions;
    var versionListLen28 = versionList28.length;
    for (var versionIndex28 = 0; versionIndex28 < versionListLen28; versionIndex28++) {
      var versionData28 = versionList28[versionIndex28];
      output += '<li class="aui-list-item"><a data-version="' + soy.$$escapeHtml(versionData28.id) + '" class="aui-list-item-link"><div class="flex-group"><div class="flex-item"><span>' + soy.$$escapeHtml(versionData28.name) + '</span></div>' + ((opt_data.hasMultipleProjects && versionData28.project) ? '<div class="flex-item"><span class="ghx-project-key">' + soy.$$escapeHtml(versionData28.project.key) + '</span></div>' : '') + '</div></a></li>';
    }
    output += '</ul></div>';
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.work.releaseVersionTrigger.renderReleaseVersionPicker.soyTemplateName = 'GH.tpl.rapid.work.releaseVersionTrigger.renderReleaseVersionPicker';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/plan/SprintConfig.js' */
define("jira-agile/rapid/ui/plan/sprint-config",[],function(){"use strict";var i={};return i.sprintConfig=void 0,i.setSprintConfig=function(n){i.sprintConfig=n},i.getSprintConfig=function(){return i.sprintConfig},i.getSprintFieldId=function(){return i.getSprintConfig().sprintFieldId},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/RapidViewConfig.js' */
var _extends=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i[r]=a[r])}return i};!function(i){var e=!1,a=(require("wrm/data"),require("underscore")),r=(require("jira/analytics/web-client"),require("jira/featureflags/feature-manager")),n=r.isFeatureEnabled("jsw.classic.board.api-calls.modern-frontend"),o=require("jira/util/safe-logger"),t="config-data";i.RapidViewConfig={},i.RapidViewConfig.currentData={},i.RapidViewConfig.getRapidViewKey=function(i){return i?"rapidViewConfig-"+i:null},i.RapidViewConfig.fetchSPAConfiguration=function(e,r){a.isNull(e)?e={viewId:null,fromLocalStorage:!0}:a.isObject(e)||(e={viewId:e,fromLocalStorage:!1});var n=e.viewId,d=e.fromLocalStorage;if(i.RapidViewConfig.currentData.promise&&!r&&i.RapidViewConfig.currentData.id===n)return i.RapidViewConfig.currentData.promise;var p=i.RapidViewConfig.getRapidViewKey(n);if(n&&window.GH.spa[t]&&window.GH.spa[t].key===p){var f=AJS.$.Deferred();if(i.RapidViewConfig.currentData={id:n,promise:f.promise(),data:null},!r){var g=window.GH.spa[t][p];return g.then(function(e){var a=e.data;i.RapidViewConfig.handleData(a),f.resolve(a.currentViewConfig).promise()})["catch"](function(e){i.RapidViewConfig.handleRapidLoadError(e,e.statusText)}),i.RapidViewConfig.currentData.promise}var s=window.GH.spa[t].update;return window.GH.spa[t].refresh({url:"/rest/greenhopper/1.0/xboard/config.json",query:{returnDefaultBoard:d,rapidViewId:n},key:window.GH.spa[t].key}).then(function(e){var a=null;e&&e.currentViewConfig&&(a=i.RapidViewConfig.getRapidViewKey(e.currentViewConfig.id)),s(function(i){return _extends({},i,{data:e})}),window.GH.spa[t].key===a&&(i.RapidViewConfig.handleData(e),AJS.$("#ghx-issue-fragment").trigger("rapid-view-configuration-updated")),f.resolve(e.currentViewConfig).promise()})["catch"](function(e){i.RapidViewConfig.handleRapidLoadError(e,e.statusText)}),i.RapidViewConfig.currentData.promise}o.safeError("rapidViewConfig","Data missing for a given view id from spa "+n+", old View id "+i.RapidViewConfig.currentData.id)},i.RapidViewConfig.fetchConfiguration=function(r,o){a.isNull(r)?r={viewId:null,fromLocalStorage:!0}:a.isObject(r)||(r={viewId:r,fromLocalStorage:!1});var t=r.viewId,d=r.fromLocalStorage;if(n)return i.RapidViewConfig.fetchSPAConfiguration(r,o);if(!e){e=!0;var p=window.SPA_RAPIDBOARD_CONFIG;if(p){if(delete window.SPA_RAPIDBOARD_CONFIG,200!==p.status||!p.response){var f=AJS.$.Deferred();return p.addEventListener("load",function(){var e=JSON.parse(p.response);i.RapidViewConfig.handleData(e),f.resolve(e.currentViewConfig).promise()}),i.RapidViewConfig.currentData={id:t,promise:f.promise(),data:null},i.RapidViewConfig.currentData.promise}var g=JSON.parse(p.response);i.RapidViewConfig.handleData(g),i.RapidViewConfig.currentData.promise=AJS.$.Deferred().resolve(g.currentViewConfig).promise()}}if(o||i.RapidViewConfig.currentData.id!==t){var s={returnDefaultBoard:d};t&&(s.rapidViewId=t);var u=i.Ajax.get({url:"/xboard/config.json",data:s,deferErrorHandling:!0},"rapidViewConfig");u.done(function(e){i.RapidViewConfig.handleData(e),AJS.$("#ghx-issue-fragment").trigger("rapid-view-configuration-updated")}),i.RapidViewConfig.currentData={id:t,promise:u.pipe(function(i){return i.currentViewConfig},i.RapidViewConfig.handleRapidLoadError),data:null}}return i.RapidViewConfig.currentData.promise},i.RapidViewConfig.handleRapidLoadError=function(e,a){404===a.status&&i.RapidBoard.gotoManageViewsPage("?showFlag=jsw.board-not-found")},i.RapidViewConfig.handleData=function(e){i.RapidViewConfig.storeGlobalConfig(e.globalConfig),i.RapidViewConfig.currentData.id=e.currentViewConfig.id,i.RapidViewConfig.currentData.data=e.currentViewConfig,i.RapidViewConfig.canManageSprints=e.currentViewConfig.canManageSprints,i.RapidViewConfig.canEdit=e.currentViewConfig.canEdit,i.RapidViewConfig.kanPlanEnabled=e.currentViewConfig.kanPlanEnabled,i.RapidViewConfig.isBoardAdmin=e.currentViewConfig.isBoardAdmin,i.RapidViewConfig.canManageSprints=e.currentViewConfig.canManageSprints,i.RapidViewConfig.modifySprintSupport()},i.RapidViewConfig.storeGlobalConfig=function(e){i.NumberFormat.groupingSeparator=e.numberGroupingSeparator,i.NumberFormat.decimalSeparator=e.numberDecimalSeparator,i.TimeFormat.timeTrackingConfigOpts=e.timeTrackingConfig,i.TimeFormat.dateTimePickerFormat=e.dateTimePickerFormat,i.TimeFormat.dateFormat=e.dateFormat,i.TimeFormat.userTimeZoneLabel=e.userTimeZoneLabel,i.TimeFormat.useISO8601WeekNumbers=e.useISO8601WeekNumbers,i.RapidBoard.parallelSprints=e.parallelSprints,i.EpicConfig.setEpicConfig(e.epicConfig),i.SprintConfig.setSprintConfig(e.sprintConfig),i.UserData.setGlobalConfig(e),i.Config.setSampleDataAvailable(e.isSampleDataAvailable)},i.RapidViewConfig.modifySprintSupport=function(){var e=AJS.$("body");e.removeClass("ghx-days-in-column-disabled ghx-days-in-column-enabled ghx-sprint-support ghx-no-sprint-support"),i.RapidBoard.State.isScrumBoard()?e.addClass("ghx-sprint-support"):e.addClass("ghx-no-sprint-support"),i.RapidViewConfig.currentData.data.showDaysInColumn?e.addClass("ghx-days-in-column-enabled"):e.addClass("ghx-days-in-column-disabled")}}(GH);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/WrmSpaUtils.js' */
define("jira-agile/rapid/wrm-spa-utils",["require","jira/featureflags/feature-manager"],function(e,n){var r=n.isFeatureEnabled("endeavour.rapidboard.pretty-url"),t="GH_SPA_SPINNER_SHOW",i="GH_SPA_SPINNER_HIDE",a=function(){return!0},d=function(){return r},u=function(e,n){var r=document.createEvent("Event");r.initEvent(e,!0,!0),n&&(r.mode=n),window.dispatchEvent(r)},o=function(e){u(t,e)},s=function(e){u(i,e)},E=function(){return!!GH.spa};return{sendEventToSpa:u,sendSpinnerShowEvent:o,sendSpinnerHideEvent:s,isWrmRapidboardsEnabled:a,isPrettyUrlsEnabled:d,isRapidboardsActive:E}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/configuration/ConfigContextLoader.js' */
define("jira-agile/rapid/configuration/ConfigContextLoader",["wrm/require","jira/featureflags/feature-manager","jira-agile/rapid/const/PageMode"],function(e,r,i){var a=void 0;return{prefetch:function(){var o="com.pyxis.greenhopper.jira:gh-rapid-config";GH.RapidBoard.ViewController.getMode()===i.WORK?o=r.isFeatureEnabled("jsw.classic.lightweight.frontend.defer-board-settings")?"com.pyxis.greenhopper.jira:gh-rapid-config-lwf-board-deferred":"com.pyxis.greenhopper.jira:gh-rapid-config-lwf-board":r.isFeatureEnabled("jsw.classic.keto")&&GH.RapidBoard.ViewController.getMode()===i.PLAN&&(o="com.pyxis.greenhopper.jira:gh-rapid-config-backlog"),a&&!a.isRejected()||(a=e(["wrc!"+o]))},getContext:function(){return this.prefetch(),a.fail(function(){GH.Notification.showError("We\'re having trouble contacting the server. Refresh the page and try again.")}),a}}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/extra-fields/ExtraFieldsHelper.js' */
define("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper",["require"],function(e){"use strict";var t=e("underscore"),r={epiclink:function(e){return GH.EpicConfig.getEpicNameString(e.text,e.epicKey)},html:function(e){return e.html&&"&nbsp;"!==e.html?(e.useSoyNoAutoescape=!0,e.html):""}},n=function(e){return e.html||e.text},i={prepareExtraFields:function(e){t.each(e,function(e){var t=r[e.renderer]||n;e.renderedContent=t(e)})}};return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/extra-fields/ExtraFields.soy' */
// This file was automatically generated from ExtraFields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.extraFields.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.extraFields == 'undefined') { GH.tpl.extraFields = {}; }


GH.tpl.extraFields.renderExtraField = function(opt_data, opt_ignored) {
  var output = '';
  var contentOrNone__soy3 = opt_data.extraField.renderedContent || 'None';
  var tooltip__soy4 = '' + ((opt_data.extraField.useSoyNoAutoescape) ? soy.$$escapeHtml(opt_data.extraField.label) + ': ' + soy.$$filterNoAutoescape(contentOrNone__soy3) : soy.$$escapeHtml(opt_data.extraField.label) + ': ' + soy.$$escapeHtml(contentOrNone__soy3));
  output += '<span class="ghx-extra-field ' + ((! opt_data.extraField.renderedContent) ? 'ghx-fa' : '') + '" data-tooltip="' + soy.$$escapeHtml(tooltip__soy4) + '"><span class="ghx-extra-field-content">' + ((opt_data.extraField.useSoyNoAutoescape) ? soy.$$filterNoAutoescape(contentOrNone__soy3) : soy.$$escapeHtml(contentOrNone__soy3)) + '</span></span>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.extraFields.renderExtraField.soyTemplateName = 'GH.tpl.extraFields.renderExtraField';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/version/VersionController.js' */
GH.VersionController={},GH.VersionController.model=null,function(){var e=require("jira-agile/rapid/analytics-tracker");GH.VersionController.analytics=new e("gh.rapidboard.versions","versionCount","")}(),GH.VersionController.init=function(){GH.VersionController.model=new GH.VersionsModel([]);var e=require("jira-agile/rapid/const/PageMode"),r=require("jira/featureflags/feature-manager"),o=require("jira-agile/rapid/deferred-resources-loader"),n=r.isFeatureEnabled("jsw.classic.keto");o.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===e.WORK||n&&GH.RapidBoard.State.getMode()===e.PLAN,function(){var e=AJS.$(GH);e.bind(GH.VersionQuickCreate.EVENT_VERSION_CREATED,function(e,r){GH.VersionController.handleVersionCreated(r.createdVersion)}),GH.VersionView.init()})},GH.VersionController.setProjects=function(e){GH.VersionController.model&&GH.VersionController.model.setProjects(e)},GH.VersionController.setVersions=function(e){GH.VersionController.model&&GH.VersionController.model.updateRawData(e)},GH.VersionController.getVersionModel=function(){return GH.VersionController.model},GH.VersionController.registerVersionsCount=function(){var e=GH.VersionController.model,r=e.getUnreleasedVersionList().length;GH.VersionController._triggerVersionCount(r)},GH.VersionController._triggerVersionCount=_.once(function(e){GH.VersionController.analytics.trigger(e)}),GH.VersionController.getFilteredVersionId=function(){return GH.BoardState.getPerViewValue("planSelectedVersion",null)},GH.VersionController.setFilteredVersionId=function(e){GH.BoardState.setPerViewValue("planSelectedVersion",e)},GH.VersionController.hasFilteredVersion=function(){return null!=GH.VersionController.getFilteredVersionId()},GH.VersionController.validateSelectedVersion=function(){var e=GH.VersionController.getVersionModel(),r=GH.VersionController.getFilteredVersionId(),o=GH.PlanIssueListFiltering.isNoneVersionFilterId(r)&&!e.isEmpty()||e.containsId(r);o||(GH.VersionController.setFilteredVersionId(void 0),GH.RapidBoard.UrlState.replaceState())},GH.VersionController.setIssuesVersion=function(e,r){var o=[];_.isEmpty(r)||(_.each(r,function(r){o.push(r.fixVersions),r.fixVersions=[e]}),GH.BacklogController.updateIssues(r));var n=_.pluck(r,"key");GH.VersionController.setIssuesVersionOnServer(e,n).done(function(){GH.Notification.showSuccess("Selection successfully added to the version"),r.forEach(function(r,n){var i=[];o[n].forEach(function(r){r!==e&&i.push({name:"fixVersions",oldValId:r,newValId:e})}),i.length>0&&GH.RapidBoard.sendIssueUpdatedTrackEvent(r,i)}),GH.PlanController.isActive()&&(GH.BacklogController.updateVersionData(),GH.VersionController._reloadDetailsView(GH.PlanController))}).fail(function(){GH.PlanController.isActive()&&GH.BacklogController.loadData()})},GH.VersionController.clearIssuesVersion=function(e){if(!_.isEmpty(e)){var r=[];if(_.each(e,function(e){e.fixVersions&&e.fixVersions.length>0&&(e.fixVersions=[],r.push(e))}),!_.isEmpty(r)){GH.BacklogController.updateIssues(r);var o=_.pluck(e,"key");GH.VersionController.clearIssuesVersionOnServer(o).done(function(){GH.Notification.showSuccess("Selection successfully removed from all versions"),GH.PlanController.isActive()?(GH.BacklogController.updateVersionData(),GH.VersionController._reloadDetailsView(GH.PlanController)):GH.WorkController.isActive()&&GH.VersionController._reloadDetailsView(GH.WorkController)}).fail(function(){GH.PlanController.isActive()&&GH.BacklogController.loadData()})}}},GH.VersionController.updateVersion=function(e,r,o,n){var i=GH.VersionController.getVersionModel(),t=i.getVersion(e),l=_.keys(r),s={};return _.each(l,function(e){s[e]=t[e]||void 0}),_.extend(t,r),i.updateVersion(t),GH.BacklogView.draw(),GH.VersionController._reloadDetailsView(GH.PlanController),n(),GH.VersionController.updateVersionOnServer(t,o).fail(function(){_.extend(t,s),i.updateVersion(t),GH.BacklogView.draw(),GH.VersionController._reloadDetailsView(GH.PlanController)})},GH.VersionController.updateVersionOnServer=function(e,r){return GH.Ajax.post({url:"/versions/"+e.id,data:{id:e.id,projectId:e.project.id,name:e.name,description:e.description,releaseDate:e.releaseDateFormatted,startDate:e.startDateFormatted},errorContextMap:r})},GH.VersionController.setIssuesVersionOnServer=function(e,r){return GH.Ajax.put({url:"/xboard/issue/fixversion/set",data:{issueKeys:r,versionId:e}})},GH.VersionController.clearIssuesVersionOnServer=function(e){return GH.Ajax.put({url:"/xboard/issue/fixversion/clear",data:{issueKeys:e}})},GH.VersionController.handleVersionCreated=function(e){GH.BacklogController.visible&&setTimeout(function(){GH.VersionController.handleVersionCreatedImpl(e)},0)},GH.VersionController.handleVersionCreatedImpl=function(e){GH.BacklogController.updateVersionData().done(function(){GH.VersionView.renderNewVersions([e])})},GH.VersionController._reloadDetailsView=function(e){var r=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");e.reloadDetailView(r.VERSION_PANEL_CHANGED)},GH.VersionController.registerCreateVersionDialog=function(){var e=require("jira/featureflags/feature-manager"),r=require("jira-agile/rapid/deferred-resources-loader"),o=function(){return e.isFeatureEnabled("jsw.classic.keto")},n=AJS.$("#ghx-version-column");n.find(".js-create-version").click(function(){o()&&!GH.VersionQuickCreate&&GH.Dialog.dim(),r.triggerOnDemandResourceLoadWithCondition(o()&&!GH.VersionQuickCreate,["wrc!gh-rapid-lwf-board-deferred"],"backlog",function(){GH.VersionQuickCreate.showDialog()},function(){GH.Dialog.undim()})})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ops/IssueSelectionManager.js' */
!function(){"use strict";var e=require("jira/featureflags/feature-manager"),t=function(){return e.isFeatureEnabled("cbb.heritage")},s=void 0;t()||(s=require("jira/viewissue/comment/comment-form")),GH.IssueSelectionManagerModel={isIssueValid:function(e){return!1},getIssueIndex:function(e){return-1},canAddToSelection:function(e,t){return!1},getIssueRange:function(e,t){return[e,t]}},GH.IssueSelectionManager=function(e,t){this.model=e,this.selectedIssuesStateKey=t,this.lastNonShiftSelectedKey=void 0,this.lastShiftSelectedKey=void 0},GH.IssueSelectionManager.prototype.validateCurrentSelection=function(){var e=this.getSelectedIssueKeys(),t=e.slice(0).reverse(),s=[];return _.each(t,function(e){this.model.isIssueValid(e)&&(0===s.length||this.model.canAddToSelection(s,e))&&s.push(e)},this),s.reverse(),!_.isEqual(e,s)&&(this.storeSelectedIssueStack(s),!0)},GH.IssueSelectionManager.prototype.selectIssue=function(e){var t=e?[e]:[];this._replaceSelectedIssueKeys(t),this._setLastNonShiftSelectedKey(e)},GH.IssueSelectionManager.prototype.getSelectedIssueKeys=function(){return GH.BoardState.getPerViewValue(this.selectedIssuesStateKey,[])},GH.IssueSelectionManager.prototype.storeSelectedIssueStack=function(e){GH.BoardState.setPerViewValue(this.selectedIssuesStateKey,e)},GH.IssueSelectionManager.prototype.getSelectedIssuesInOrder=function(){var e=this.getSelectedIssueKeys();return _.sortBy(e,this.model.getIssueIndex.bind(this.model))},GH.IssueSelectionManager.prototype.isInSelection=function(e){var t=this.getSelectedIssueKeys();return _.contains(t,e)},GH.IssueSelectionManager.prototype.hasSelection=function(){var e=this.getSelectedIssueKeys();return!_.isEmpty(e)},GH.IssueSelectionManager.prototype._addToSelection=function(e){if(!this.isInSelection(e)){var t=this.getSelectedIssueKeys();t.push(e),this.storeSelectedIssueStack(t)}},GH.IssueSelectionManager.prototype._addSelectedIssueKeys=function(e){var t=this;_.each(e,function(e){t._addToSelection(e)})},GH.IssueSelectionManager.prototype._removeFromSelection=function(e){var t=this.getSelectedIssueKeys();t=_.without(t,e),this.storeSelectedIssueStack(t)},GH.IssueSelectionManager.prototype.removeSelectedIssueKeys=function(e){var t=this;_.each(e,function(e){t._removeFromSelection(e)})},GH.IssueSelectionManager.prototype._replaceSelectedIssueKeys=function(e){this._clearSelectedIssueKeys(),this._addSelectedIssueKeys(e)},GH.IssueSelectionManager.prototype._clearSelectedIssueKeys=function(){this.storeSelectedIssueStack([])},GH.IssueSelectionManager.prototype.getSelectedIssueKey=function(){var e=this.getSelectedIssueKeys(),t=e[e.length-1];return t||null},GH.IssueSelectionManager.prototype._getLastNonShiftSelectedKey=function(){if(!this.lastNonShiftSelectedKey){var e=this.getSelectedIssueKey();if(e&&this.model.isIssueValid(e))return this._setLastNonShiftSelectedKey(e),e}return this.lastNonShiftSelectedKey},GH.IssueSelectionManager.prototype._setLastNonShiftSelectedKey=function(e){this.lastNonShiftSelectedKey=e,this.lastShiftSelectedKey=void 0},GH.IssueSelectionManager.prototype._getLastShiftSelectedKey=function(){return this.lastShiftSelectedKey},GH.IssueSelectionManager.prototype._setLastShiftSelectedKey=function(e){this.lastShiftSelectedKey=e},GH.IssueSelectionManager.prototype.handleIssueClick=function(e,t){var s=GH.MouseUtils.isMetaPressed(e),i=GH.IssueSelectionManager.getMultiSelectType(e);if(!this.model.isIssueValid(t))return!1;if(!GH.IssueSelectionManager.canChangeIssueSelection())return!1;if(i&&!this.model.canAddToSelection(this.getSelectedIssueKeys(),t))return!1;if(i)if(i===GH.IssueSelectionManager._META_MULTI_SELECT)this.isInSelection(t)?this.removeSelectedIssueKeys([t]):this._addSelectedIssueKeys([t]),this._setLastNonShiftSelectedKey(t);else{var n=this._getLastNonShiftSelectedKey(),o=this.getSelectedIssueKeys();if(0!==o.length&&n&&this.model.isIssueValid(n)){var a=this.model.getIssueRange(n,t);if(s){var c=[],r=this._getLastShiftSelectedKey();r&&(c=this.model.getIssueRange(n,r)||[],c=_.without(c,a)),this.removeSelectedIssueKeys(c),this._addSelectedIssueKeys(a)}else this._replaceSelectedIssueKeys(a)}else this.selectIssue(t);this._setLastShiftSelectedKey(t)}else this.selectIssue(t);return!0},GH.IssueSelectionManager._NO_MULTI_SELECT=0,GH.IssueSelectionManager._META_MULTI_SELECT=1,GH.IssueSelectionManager._SHIFT_MULTI_SELECT=2,GH.IssueSelectionManager.getMultiSelectType=function(e){var t=GH.MouseUtils.isMetaPressed(e),s=GH.MouseUtils.isShiftPressed(e),i=GH.IssueSelectionManager._NO_MULTI_SELECT;return s?i=GH.IssueSelectionManager._SHIFT_MULTI_SELECT:t&&!s&&(i=GH.IssueSelectionManager._META_MULTI_SELECT),i},GH.IssueSelectionManager.canChangeIssueSelection=function(){t()&&(s=require("jira/viewissue/comment/comment-form"));var e=s.handleBrowseAway();return!(e&&!window.confirm(e))||(s.focus(),!1)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/plan/XflowPlanSprintBridge.js' */
define("jira-agile/rapid/ui/plan/xflow-plan-sprint-bridge",["jira-agile/rapid/ui/plan/xflow-plan-sprint-element"],function(e){var n={},i={},l=null,t=1e4,r=function(){return"number"==typeof l},a=function(){r()&&clearTimeout(l)},o=new Promise(function(e){return n.onBridgeLoad=e});n.render=function(n,l,t){return o.then(function(r){var a=function(n){var a=require("jira-agile/rapid/ui/plan/sprint-view"),o=require("jira-agile/rapid/ui/plan/plan-view"),u=a.getSprintIdForElement(n),d=i[u];if(d&&d.element===n)return d.xflowPlanSprintElement;d&&d.xflowPlanSprintElement!==n&&d.xflowPlanSprintElement.finalize();var g=new e(n,r,{showLinkedPages:l,linkedPagesCount:t,toggleWillChangeDisable:o.toggleWillChangeDisable});return i[u]={xflowPlanSprintElement:g,element:n},g};a(n).render()})};var u=function(){AJS.$("body").append('<style id="xflow-hide-linked">.ghx-linked { visibility: hidden; }')},d=function(){AJS.$("#xflow-hide-linked").remove()};return n.hideOriginalLinkedPages=function(){a(),u()},n.showOriginalLinkedPages=function(){a(),d()},n.tentativelyHideOriginalLinkedPages=function(){r()||(u(),l=setTimeout(function(){d(),AJS.trigger("analyticsEvent",{name:"grow0.xflow.tentatively.hide.original.linked.pages.timeout"})},t))},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/plan/XflowPlanSprintElement.js' */
define("jira-agile/rapid/ui/plan/xflow-plan-sprint-element",["underscore"],function(e){var t=AJS.$,n=function(n,i,o){this.element=n,this.api=i;var r={showLinkedPages:!1,linkedPagesCount:0,isLinkedPagesDialogOpen:!1,openLinkedPagesFunction:t.noop};this.state=e.extend({},r,o),this.observer=null,this.observeAnchorElement()};return n.prototype._unhideElement=function(){t(this.element).removeClass("hidden")},n.prototype.render=function(){var t=this,n=e.extend(this.state,{openLinkedPagesFunction:function(){return t.openSprintLinkedPagesDialog()}});this.api.render(this._getReactAppElement(),function(){return t._unhideElement()},n)},n.prototype.openSprintLinkedPagesDialog=function(){var e=this,t=require("jira-agile/rapid/ui/plan/sprint-view");t.showSprintLinkedPagesDialog(this._getDialogAnchorElement(),{gravity:"n",offsetX:-100,offsetY:10,hideCallback:function(){e.setState({isLinkedPagesDialogOpen:!1})}}),this.setState({isLinkedPagesDialogOpen:!0})},n.prototype._getReactAppElement=function(){return this.element.querySelector(".xflow-plan-sprint-app")},n.prototype._getDialogAnchorElement=function(){return this.element.querySelector(".xflow-plan-sprint-app-linked-pages-trigger")},n.prototype.observeAnchorElement=function(){var e=this,t=new MutationObserver(function(){var t=require("jira-agile/rapid/ui/plan/sprint-view"),n=t.getSprintIdForElement(e.element),i=GH.PageIssueLinksModel.model[n];i&&e.setState({linkedPagesCount:i.length})});this.observer=t.observe(this._getDialogAnchorElement(),{childList:!0})},n.prototype.setState=function(t){var n=e.extend({},this.state,t);e.isEqual(n,this.state)||(this.state=n,this.render())},n.prototype.finalize=function(){this.observer&&"function"==typeof this.observer.disconnect&&this.observer.disconnect()},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/ShareButtonBridge.js' */
!function(){var i=void 0,n=new Promise(function(n){return i=n});define("jira-agile/rapid/ui/share-button/bridge",function(){return function(n){return i(n)}}),define("jira-agile/rapid/ui/share-button/api",function(){return n})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/RefreshBoardButtonBridge.js' */
!function(){var r=void 0,i=new Promise(function(i){return r=i});define("jira-agile/rapid/ui/refresh-board-button/bridge",function(){return function(i){return r(i)}}),define("jira-agile/rapid/ui/refresh-board-button/api",function(){return i})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/AutomationButtonBridge.js' */
!function(){var i=void 0,n=new Promise(function(n){return i=n});define("jira-agile/rapid/ui/automation-menu/bridge",function(){return function(n){return i(n)}}),define("jira-agile/rapid/ui/automation-menu/api",function(){return n})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/InsightsBridge.js' */
!function(){var i=void 0,n=new Promise(function(n){return i=n});define("jira-agile/rapid/ui/insights/bridge",function(){return function(n){return i(n)}}),define("jira-agile/rapid/ui/insights/api",function(){return n})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/MegaphoneButtonBridge.js' */
!function(){var n=void 0,i=new Promise(function(i){return n=i});define("jira-agile/rapid/ui/megaphone-button/bridge",function(){return function(i){return n(i)}}),define("jira-agile/rapid/ui/megaphone-button/api",function(){return i})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/AlertChartBridge.js' */
!function(){var i=void 0,r=new Promise(function(r){return i=r});define("jira-agile/rapid/ui/alert-chart/bridge",function(){return function(r){return i(r)}}),define("jira-agile/rapid/ui/alert-chart/api",function(){return r})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/OpsgenieSprintReportBannerBridge.js' */
!function(){var n=void 0,i=new Promise(function(i){return n=i});define("jira-agile/rapid/ui/opsgenie-sprint-report-banner/bridge",function(){return function(i){return n(i)}}),define("jira-agile/rapid/ui/opsgenie-sprint-report-banner/api",function(){return i})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/ConfluenceSprintRetrosButtonBridge.js' */
!function(){var n=void 0,r=new Promise(function(r){return n=r});define("jira-agile/rapid/ui/confluence-sprint-report-retros-button/bridge",function(){return function(r){return n(r)}}),define("jira-agile/rapid/ui/confluence-sprint-report-retros-button/api",function(){return r})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/bento/bento-issue-api.js' */
!function(){var n=void 0,i=new Promise(function(i){n=i});i.done=function(n){return this.then(n)},define("jira-agile/rapid/ui/bento/bridge",function(){return function(i){n(i)}}),define("jira-agile/rapid/ui/bento/api",function(){return i})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/bento/bento-features.js' */
define("jira-agile/rapid/ui/bento/bento-features",["jira/featureflags/feature-manager","jira-agile/features/feature-flags"],function(e,a){"use strict";var n=function(){return"true"===AJS.$('meta[name="ghx-user-bento-enabled"]').attr("content")},t=function(){return n()},r=function(){var e=GH.RapidBoard.State.isScrumBoard()||GH.RapidBoard.State.isKanbanBoard();return e&&n()&&t()},i=function(){return n()&&r()&&"sidebar"===GH.BoardState.getGlobalValue("ghx-issue-fragment-view-mode")},o=function(){return n()&&r()&&"modal"===GH.BoardState.getGlobalValue("ghx-issue-fragment-view-mode")};return{isBentoEnabled:n,isBentoInBacklogEnabled:t,isBentoSidebarOnBoardEnabled:r,isUsingBentoSidebarOnBoard:i,isUsingBentoModalOnBoard:o}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/epic/EpicView.soy' */
// This file was automatically generated from EpicView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.epic.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.epic == 'undefined') { GH.tpl.epic = {}; }


GH.tpl.epic.renderShell = function(opt_data, opt_ignored) {
  return '' + GH.tpl.epic.renderEpicPanel(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.epic.renderShell.soyTemplateName = 'GH.tpl.epic.renderShell';
}


GH.tpl.epic.renderEpicPanel = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-group"><div class="ghx-classification-header"><div class="ghx-actions">' + ((opt_data.canCreateIssue) ? aui.buttons.button({extraClasses: ['aui-button-link', 'js-create-epic'], text: 'Create epic'}) + '<span class="ghx-divider">|</span>' : '') + '<div class="ghx-close js-epic-toggle" title="' + soy.$$escapeHtml('Hide epics panel') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-remove-label"></span></div></div><h2>' + soy.$$escapeHtml('Epics') + '</h2></div><div class="ghx-progress-indicator ghx-initial"></div><div class="ghx-classification-scrollview"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPanel.soyTemplateName = 'GH.tpl.epic.renderEpicPanel';
}


GH.tpl.epic.renderEpics = function(opt_data, opt_ignored) {
  var output = GH.tpl.epic.renderAllEpics(opt_data) + '<div class="ghx-classification-cards">';
  var epicKeyList22 = opt_data.epicKeys;
  var epicKeyListLen22 = epicKeyList22.length;
  for (var epicKeyIndex22 = 0; epicKeyIndex22 < epicKeyListLen22; epicKeyIndex22++) {
    var epicKeyData22 = epicKeyList22[epicKeyIndex22];
    output += GH.tpl.epic.renderEpic({issue: opt_data.epics[epicKeyData22], isEpicExpanded: opt_data.isEpicExpandedByKey[epicKeyData22], isEpicSelected: opt_data.selectedEpicKey == epicKeyData22, canEditEpics: opt_data.canEditEpics, canMarkAsDone: opt_data.canMarkAsDone, canCreateIssue: opt_data.canCreateIssue, colors: opt_data.colors, showPages: opt_data.showPages, isLoadEpicPageLinksOnDemandEnabled: opt_data.isLoadEpicPageLinksOnDemandEnabled, showEstimates: opt_data.showEstimates, isTriggerSPAForEpicLink: opt_data.isTriggerSPAForEpicLink});
  }
  output += '</div>' + ((opt_data.epicKeys.length > 0) ? GH.tpl.epic.renderEpicPending(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpics.soyTemplateName = 'GH.tpl.epic.renderEpics';
}


GH.tpl.epic.renderEpic = function(opt_data, opt_ignored) {
  return '<div class="js-sortable ghx-classification-item' + ((opt_data.isEpicExpanded) ? ' ghx-open' : ' ghx-closed') + ((opt_data.isEpicSelected) ? ' ghx-selected' : '') + '" data-epic-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-epic-id="' + soy.$$escapeHtml(opt_data.issue.id) + '" ><div class="ghx-inner"><div class="ghx-expander js-epic-details-toggle" title="' + soy.$$escapeHtml('Hide/show epic information') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + GH.tpl.inlineeditfield.renderRemoteTriggeredTextView({fieldName: 'epicLabel', fieldValue: opt_data.issue.originalEpicLabel, displayValue: opt_data.issue.epicLabel}) + '</span><span id="dd-trigger-' + soy.$$escapeHtml(opt_data.issue.key) + '" class="ghx-swatch js-epic-actions ' + soy.$$escapeHtml(opt_data.issue.epicColor) + '"></span></h3><div id="dd-content-' + soy.$$escapeHtml(opt_data.issue.key) + '" class="aui-list ghx-href-fix-list js-epic-actions-list" data-epic-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-epic-id="' + soy.$$escapeHtml(opt_data.issue.id) + '">' + ((opt_data.canEditEpics) ? '<h5>' + soy.$$escapeHtml('Color') + '</h5><ul class="aui-list-section aui-first"><li class="aui-list-item ghx-epic-palette">' + GH.tpl.epic.renderEpicPalette(opt_data) + '</li></ul>' : '') + '<ul class="aui-list-section aui-last">' + ((opt_data.canEditEpics) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-edit-epic-label">' + soy.$$escapeHtml('Edit name') + '</a></li>' : '') + '<li class="aui-list-item">' + GH.tpl.epic.renderEpicIssueLink({issueKey: opt_data.issue.key}) + '</li>' + ((opt_data.canEditEpics && opt_data.canMarkAsDone) ? '<li class="aui-list-item"><a role="button" class="aui-list-item-link js-mark-epic-done">' + soy.$$escapeHtml('Mark as Done') + '</a></li>' : '') + '</ul></div></div><div class="ghx-expanded"><div class="ghx-summary">' + ((opt_data.isTriggerSPAForEpicLink) ? '<a role="button" class="js-epic-key-link" title="' + soy.$$escapeHtml('View epic details') + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a>' : '<a role="button" class="js-epic-key-link" title="' + soy.$$escapeHtml('View epic details') + '" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issue.key) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a>') + ' ' + soy.$$escapeHtml(opt_data.issue.summary) + '</div><div class="aui-group js-epic-issues-count"><div class="aui-item">' + soy.$$escapeHtml('Issues') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.totalIssueCount}) + '</div></div><div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Completed') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.done}) + '</div></div>' + ((opt_data.showEstimates) ? ((! opt_data.issue.isIssueCountStatistic) ? '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Unestimated') + '</div><div class="aui-item">' + aui.badges.badge({text: opt_data.issue.epicStats.notEstimated}) + '</div></div>' : '') + '<div class="aui-group"><div class="aui-item">' + soy.$$escapeHtml('Estimate') + '</div><div class="aui-item">' + aui.badges.badge({extraAttributes: {title: opt_data.issue.epicStats.estimateStatisticName}, text: opt_data.issue.epicStats.estimateTotal}) + '</div></div>' : '') + '<div class="aui-group">' + ((opt_data.canCreateIssue) ? aui.buttons.button({extraAttributes: {title: 'Create and assign an issue to this epic'}, extraClasses: ['aui-button-link', 'js-create-epic-issue'], text: 'Create issue in epic'}) : '') + ((opt_data.showPages) ? '<div>' + GH.tpl.component.linkedpages.renderTrigger({linkedPagesCount: opt_data.issue.linkedPagesCount, title: 'Create and view pages linked to this epic', isLoadEpicPageLinksOnDemandEnabled: opt_data.isLoadEpicPageLinksOnDemandEnabled}) + '</div>' : '') + '</div></div><div class="ghx-subheader"><ul class="ghx-classification-progress" title="' + soy.$$escapeHtml(AJS.format('{0} ({1} {2} {3} {4})',AJS.format('{0}% of {1} done',opt_data.issue.epicStats.percentageCompleted,opt_data.issue.epicStats.isIssueCountStatistic ? 'issues' : 'estimated work'),opt_data.issue.epicStats.estimateDone,'of',opt_data.issue.epicStats.estimateTotal,opt_data.issue.epicStats.isIssueCountStatistic ? '' : opt_data.issue.epicStats.estimateStatisticName)) + '" ><li class="ghx-implemented" style="width:' + soy.$$escapeHtml(opt_data.issue.epicStats.percentageCompleted) + '%;"></li></ul></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpic.soyTemplateName = 'GH.tpl.epic.renderEpic';
}


GH.tpl.epic.renderAllEpics = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-all ' + ((opt_data.isAllSelected) ? ' ghx-selected' : '') + '"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + soy.$$escapeHtml('All issues') + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderAllEpics.soyTemplateName = 'GH.tpl.epic.renderAllEpics';
}


GH.tpl.epic.renderEpicPending = function(opt_data, opt_ignored) {
  return '<div class="ghx-classification-item ghx-classification-pending' + ((opt_data.isNoneSelected) ? ' ghx-selected' : '') + '" data-epic-key="none"><div class="ghx-inner"><div class="ghx-header"><h3 class="ghx-name"><span class="js-epic-name" role="button">' + soy.$$escapeHtml('Issues without epics') + '</span></h3></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPending.soyTemplateName = 'GH.tpl.epic.renderEpicPending';
}


GH.tpl.epic.renderEpicIssueLink = function(opt_data, opt_ignored) {
  return '<a role="button" class="aui-list-item-link" href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issueKey) + '">' + soy.$$escapeHtml('View epic details') + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicIssueLink.soyTemplateName = 'GH.tpl.epic.renderEpicIssueLink';
}


GH.tpl.epic.renderEpicPalette = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-swatches">';
  var colorList194 = opt_data.colors;
  var colorListLen194 = colorList194.length;
  for (var colorIndex194 = 0; colorIndex194 < colorListLen194; colorIndex194++) {
    var colorData194 = colorList194[colorIndex194];
    output += '<li class="ghx-swatch js-change-epic-color ' + soy.$$escapeHtml(colorData194) + '" data-color-id="' + soy.$$escapeHtml(colorData194) + '">e</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicPalette.soyTemplateName = 'GH.tpl.epic.renderEpicPalette';
}


GH.tpl.epic.renderMarkEpicAsDoneDialog = function(opt_data, opt_ignored) {
  return ((opt_data.numIncompleteIssues > 0) ? GH.tpl.rapid.notification.renderAuiMessage({type: 'warning', icon: true, messageHtml: true, message: '' + soy.$$escapeHtml(AJS.format('{0,choice,1#1 issue is|1\x3c{0,number} issues are} not yet completed in this epic',opt_data.numIncompleteIssues))}) : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format('The epic {0}{1}{2} will be marked as Done. It will no longer be displayed in the Epics panel of the Backlog, but can be viewed in the {3}Epic Report{4}.','<b>',opt_data.epicName,'</b>','<a href="' + GH.Ajax.CONTEXT_PATH + '/secure/RapidBoard.jspa?rapidView=' + opt_data.rapidView + '&view=reporting&chart=epicReport&epic=' + opt_data.epicKey + '">','</a>')) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.epic.renderMarkEpicAsDoneDialog.soyTemplateName = 'GH.tpl.epic.renderMarkEpicAsDoneDialog';
}


GH.tpl.epic.getEpicNameString = function(opt_data, opt_ignored) {
  return '' + ((opt_data.epicLabel) ? soy.$$escapeHtml(opt_data.epicLabel) : soy.$$escapeHtml('unlabelled') + '-' + soy.$$escapeHtml(opt_data.epicKey));
};
if (goog.DEBUG) {
  GH.tpl.epic.getEpicNameString.soyTemplateName = 'GH.tpl.epic.getEpicNameString';
}


GH.tpl.epic.getEpicNameStringNoAutoescape = function(opt_data, opt_ignored) {
  return '' + ((opt_data.epicLabel) ? soy.$$filterNoAutoescape(opt_data.epicLabel) : soy.$$escapeHtml('unlabelled') + '-' + soy.$$escapeHtml(opt_data.epicKey));
};
if (goog.DEBUG) {
  GH.tpl.epic.getEpicNameStringNoAutoescape.soyTemplateName = 'GH.tpl.epic.getEpicNameStringNoAutoescape';
}


GH.tpl.epic.renderEpicsError = function(opt_data, opt_ignored) {
  return '' + GH.tpl.epic.renderAllEpics(opt_data) + GH.tpl.plancontroller.renderErrorBlock({errorText: 'We\x27re having trouble retrieving your epics'}) + GH.tpl.epic.renderEpicPending(opt_data);
};
if (goog.DEBUG) {
  GH.tpl.epic.renderEpicsError.soyTemplateName = 'GH.tpl.epic.renderEpicsError';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/work/EventualConsistencyExperience.js' */
!function(){var a=require("jira/analytics/web-client");GH.ECX={INTERACTION_TYPE:{UNKNOWN:"unknown",COMMON:{ISSUE_FLAG:"common.issue_flag",ISSUE_SPLIT:"common.issue_split",START_SPRINT_DIALOG:"common.start_sprint.dialog"},BACKLOG:{INITIAL_LOAD:"backlog.initial_load",INITIAL_LOAD_SPA:"backlog.initial_load.spa_transition",INITIAL_LOAD_FULL:"backlog.initial_load.full_page_load",ISSUE_CREATE_INLINE:"backlog.issue_create.inline",ISSUE_CREATE_DIALOG:"backlog.issue_create.dialog",ISSUE_RANK:"backlog.issue_rank",QUICK_FILTERS_CHANGE:"backlog.quick_filters_change"},BOARD:{BENTO_MODAL_CLOSED:"board.bento_modal_closed",BENTO_SPRINT_PICKER_CLICKED:"board.bento_sprint_picker_clicked",INITIAL_LOAD:"board.initial_load",INITIAL_LOAD_SPA:"board.initial_load.spa_transition",INITIAL_LOAD_FULL:"board.initial_load.full_page_load",ISSUE_CREATE:"board.issue_create",ISSUE_UPDATE:"board.issue_update",ISSUE_UPDATE_ACTION:"board.issue_update_action",ISSUE_UPDATE_BENTO:"board.issue_update_bento",ISSUE_RANK:"board.rank_issue",ISSUE_RANK_ACTION:"board.issue_rank_action",ISSUE_REMOVE_FROM_SPRINT:"board.issue_remove_from_sprint",QUICK_FILTERS_CHANGE:"board.quick_filters_change",RELEASE_VERSION:"board.kanban.release"},REPORT:{INITIAL_LOAD_SPA:"report.initial_load.spa_transition",INITIAL_LOAD_FULL:"report.initial_load.full_page_load"},UNKNOWN_DESTINATION:{INITIAL_LOAD_SPA:"unknown.initial_load.spa_transition",INITIAL_LOAD_FULL:"unknown.initial_load.full_page_load"}}};var _=!1,i=GH.ECX.INTERACTION_TYPE.UNKNOWN,o=0;GH.ECX.shouldForceConsistency=function(){return a.sendOperationalEvent({source:"classicBoard",actionSubject:"boardData",action:"updated",attributes:{type:i,forceConsistency:_}}),i=GH.ECX.INTERACTION_TYPE.UNKNOWN,!!_&&(_=!1,!0)},GH.ECX.markUserInteraction=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GH.ECX.INTERACTION_TYPE.UNKNOWN,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=(new Date).getTime();if(i=e,a.sendOperationalEvent({source:"classicBoard",actionSubject:"interaction",action:"marked",attributes:{type:e,requiresConsistency:n,forceConsistency:_}}),n&&(_=!0),o>0){Math.floor((t-o)/1e3)}return o=t,t}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/QuickFilters.js' */
!function(){"use strict";var t=require("jira-agile/rapid/analytics-tracker");GH.Components||(GH.Components={}),GH.Components.QuickFilters=function(t){this.stateParamName=t},GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY="assignee = currentUser()",GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY="updatedDate >= -1d",GH.Components.QuickFilters.events=new GH.Events,GH.Components.QuickFilters.analytics=new t("gh.rapidboard.quickFilters"),GH.Components.QuickFilters.prototype.stateParamName="activeQuickFilters",GH.Components.QuickFilters.prototype.rapidViewConfig={},GH.Components.QuickFilters.prototype.setRapidViewConfig=function(t){this.rapidViewConfig=t,this.validateActiveFilters()},GH.Components.QuickFilters.prototype.getActiveQuickFilters=function(){return GH.BoardState.getPerViewValue(this.stateParamName,[])},GH.Components.QuickFilters.prototype.setActiveQuickFilters=function(t){GH.BoardState.setPerViewValue(this.stateParamName,t)},GH.Components.QuickFilters.prototype.validateActiveFilters=function(){var t=this.getActiveQuickFilters(),e=this,i=_.filter(t,function(t){return _.find(e.rapidViewConfig.quickFilters,function(e){return t===e.id})});t.length!==i.length&&(this.setActiveQuickFilters(i),GH.RapidBoard.State.pushState())},GH.Components.QuickFilters.prototype.getQuickFilters=function(){var t=this.getActiveQuickFilters();return _.map(this.rapidViewConfig.quickFilters,function(e){return e.isActive=_.contains(t,e.id),e})},GH.Components.QuickFilters.prototype.clearFilters=function(){var t=this.getActiveQuickFilters();return 0!==t.length&&(this.setActiveQuickFilters([]),AJS.$(".ghx-controls-filters .ghx-active").removeClass("ghx-active"),!0)},GH.Components.QuickFilters.prototype.quickExpanderLayout=function(t){var e="#js-"+t.mode+"-quickfilters",i=AJS.$(e),r=AJS.$(i).find("dt"),s=i.find(".ghx-quickfilter-trigger"),n=s.outerWidth(),o=s.height()+parseInt(r.css("marginBottom"),10)+1;s.css({display:"none"}),i.css({"padding-right":""}),i[0]&&i[0].scrollHeight>o&&(s.css({display:""}),i.attr("aria-expanded")&&"false"!==i.attr("aria-expanded")||i.css({"padding-right":n}))}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/SearchFilter.js' */
GH.Components||(GH.Components={}),GH.Components.SearchFilter=function(e){this.searchQueryCallback=e,this.regexReserved=new RegExp("[.*+?|()\\[\\]{}\\\\]","g")},GH.Components.SearchFilter.prototype._queryToRegex=function(e){var t;return t=_.isEmpty(e)?".*":_.map(e.split(" "),function(e){return"(?=.*("+e+"))"}).join(""),new RegExp(t,"i")},GH.Components.SearchFilter.prototype.clearLastSearch=function(){this.lastSearch=""},GH.Components.SearchFilter.prototype.stopEdit=function(e){var t=e.find("#ghx-backlog-search-input");t.blur()},GH.Components.SearchFilter.prototype.searchQuery=function(){var e=AJS.$.trim(AJS.$("#ghx-backlog-search-input").val());if(e!==this.lastSearch)if(this.lastSearch=e,""===e)this.searchQueryCallback(null);else{var t;try{t=this._queryToRegex(e),this.searchQueryCallback(t)}catch(r){t=this._queryToRegex(e.replace(this.regexReserved,"\\$&")),this.searchQueryCallback(t)}}};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/PresentationMode.js' */
!function(){"use strict";GH.PresentationMode={},GH.PresentationMode.NORMAL_MODE="normal",GH.PresentationMode.COMPACT_MODE="compact",GH.PresentationMode.PROJECTOR_MODE="projector",GH.PresentationMode.allModes=[GH.PresentationMode.NORMAL_MODE,GH.PresentationMode.COMPACT_MODE,GH.PresentationMode.PROJECTOR_MODE],GH.PresentationMode.mode=GH.PresentationMode.NORMAL_MODE,GH.PresentationMode.enabled=!1,GH.PresentationMode.init=function(){var e=this,t=GH.PresentationMode.getStoredMode();this.mode=GH.PresentationMode.validateMode(t),this.enabled=!0;var n=function(t){t.isCollapsed(!0)||e.setPresentationMode(GH.PresentationMode.NORMAL_MODE)};if(this.mode===GH.PresentationMode.COMPACT_MODE){JIRA.API.getSidebar().then(n);var o=require("jira/container-api");o.APIs.getNavigationAPI().then(n)}this._updateBodyClasses(),this.registerEventsHandler()},GH.PresentationMode.isHeaderHidden=function(){return this.mode===GH.PresentationMode.COMPACT_MODE||this.mode===GH.PresentationMode.PROJECTOR_MODE},GH.PresentationMode.isNormalMode=function(){return this.mode===GH.PresentationMode.NORMAL_MODE},GH.PresentationMode.isProjectorMode=function(){return this.mode===GH.PresentationMode.PROJECTOR_MODE},GH.PresentationMode.toggleNormalAndCompact=function(){GH.PresentationMode.iterateThroughPresentationModes([GH.PresentationMode.NORMAL_MODE,GH.PresentationMode.COMPACT_MODE])},GH.PresentationMode.validateMode=function(e){return _.contains(GH.PresentationMode.allModes,e)?e:GH.PresentationMode.NORMAL_MODE},GH.PresentationMode.setPresentationMode=function(e){GH.PresentationMode.enabled&&(e=GH.PresentationMode.validateMode(e),this.mode=e,GH.PresentationMode.setStoredMode(e),this._updateUI())},GH.PresentationMode.iterateThroughPresentationModes=function(e){var t=_.indexOf(e,this.mode);t+=1,t%=e.length,GH.PresentationMode.setPresentationMode(e[t])},GH.PresentationMode._registerClickHandler=function(e){var t=this;AJS.$(".js-toggle-fullscreen",e).unbind("click.presentationMode").bind("click.presentationMode",function(e){t.toggleNormalAndCompact(),t.fireAnalytics(),e.preventDefault()})},GH.PresentationMode.registerEventsHandler=function(){var e=this;GH.ViewActions.on("boardToolsRendered",function(t){var n=AJS.$("#"+t.sectionId+"-content");GH.PresentationMode._registerClickHandler(n),e.updateMenus()},this);var t=function(){e.mode===GH.PresentationMode.COMPACT_MODE&&e.setPresentationMode(GH.PresentationMode.NORMAL_MODE)};JIRA.API.getSidebar().then(function(e){return e.on(e.events.SIDEBAR_EXPAND_END,t,!0)});var n=require("jira/container-api");n.APIs.getNavigationAPI().then(function(e){return e.onExpand(t)})},GH.PresentationMode._updateUI=function(){AJS.$("body").click(),this._updateBodyClasses(),GH.RapidBoard.ViewController.handleResizeEvent(),this.updateMenus(),this.updateGlobalSidebar(),AJS.$(window).resize()},GH.PresentationMode.updateGlobalSidebar=function(){var e=this,t=function(t){switch(e.mode){case GH.PresentationMode.COMPACT_MODE:t.collapse(!0);break;case GH.PresentationMode.NORMAL_MODE:t.expand(!0)}};JIRA.API.getSidebar().then(t);var n=require("jira/container-api");n.APIs.getNavigationAPI().then(t)},GH.PresentationMode.updateMenus=function(){var e=this.isHeaderHidden()?"Show menus":"Hide menus";AJS.$(".js-toggle-fullscreen").empty().append(document.createTextNode(e))},GH.PresentationMode._updateBodyClasses=function(){var e=AJS.$("body");this.isHeaderHidden()?e.addClass("ghx-header-compact"):e.removeClass("ghx-header-compact"),this.isProjectorMode()?e.addClass("ghx-contrast-high"):e.removeClass("ghx-contrast-high")},GH.PresentationMode.fireAnalytics=function(){var e=GH.RapidBoard.State.getMode(),t=e?e:"board",n=this.isHeaderHidden()?"hide":"show";AJS.trigger("analyticsEvent",{name:"jira-software."+t+".boardmenu.click."+n+"-menus"})},GH.PresentationMode.getStoredMode=function(){return GH.storage.get("gh.presentation.mode",!0)},GH.PresentationMode.setStoredMode=function(e){GH.storage.put("gh.presentation.mode",e,!0)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/ViewActions.js' */
!function(){"use strict";var e=require("jquery"),i=require("jira-agile/rapid/const/PageMode"),t=require("jira-agile/rapid/work/quick-filters-bridge"),o=require("jira/featureflags/feature-manager"),n=require("jira/analytics/web-client"),a=require("jira-agile/rapid/ui/bento/bento-features"),s=require("jira-agile/rapid/deferred-resources-loader"),r=function(){return o.isFeatureEnabled("jsw_classic_boards_experimental_loading_skeleton_dpgxz")},c=function(){return o.isFeatureEnabled("cbb.heritage")};GH.ViewActions={},GH.Events(GH.ViewActions),GH.ViewActions.currentViewId=void 0,GH.ViewActions.currentViewName=void 0,GH.ViewActions.currentMode=i.WORK,GH.ViewActions.processData=function(e){return function(i){var t=!1;i&&(GH.ViewActions.currentViewId=i.id,GH.ViewActions.currentViewName=i.name,GH.ViewActions.canEdit=i.canEdit,t=i.canEdit),e(),GH.ViewActions.setView(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName,t)}},GH.ViewActions.initViewActions=GH.ViewActions.processData(e.noop),GH.ViewActions.shouldHideMenu=function(){return GH.RapidBoard.State.isAgilityBoard()},GH.ViewActions.refreshBoardTools=function(){function n(i){function t(e){return e.replace(/(!|"|#|\$|%|&|'|\(|\)|\*|\+|,|\.|\/|:|;|<|=|>|\?|@|\[|\\|\]|\^|`|\{|\||\}|~)/g,"\\$1")}function o(t){t[0].bind("showLayer",_.once(function(){var o=e(GH.tpl.board.x.renderSectionContent(i));e("#"+s).html(o),GH.ViewActions.trigger("boardToolsRendered",{sectionId:n,dropdown:t})}))}var n=t(i.id),a=n+"-button",s=n+"-content";try{var r=GH.ViewActions.registerDropdown(a,s);o(r)}catch(c){console.error("Error rendering dropdown for section"+i.id+":"+c.message)}}r()?GH.RapidBoard.State.getMode()!=i.WORK&&e("#ghx-view-pluggable").css("visibility","hidden"):e("#ghx-view-pluggable").css("visibility","hidden"),GH.ViewActions.shouldHideMenu()||GH.ViewActions.currentViewId&&GH.Ajax.get({url:"/xboard/toolSections",data:{mode:GH.ViewActions.mode,rapidViewId:GH.ViewActions.currentViewId,selectedProjectKey:GH.RapidBoard.projectKey},deferErrorHandling:!1}).then(function(i){var o=GH.tpl.board.x.renderToolSections(i),a=e("#ghx-view-pluggable");a.html(o),_.each(i.sections,function(e){n(e)}),t.isReactFiltersEnabled().then(function(){a.css("visibility","visible")})}),o.isFeatureEnabled("jsw.classic.delay.toolSections")||GH.ReleaseVersionTrigger.remove()},GH.ViewActions.registerDropdown=function(i,t){var o=require("jira/ajs/dropdown/dropdown"),n=e("#"+i),a=e("#"+t);return n.click(_.wrap(function(){e(window).resize();var i=a.is(":visible");n.attr("aria-expanded",i);var t=GH.RapidBoard.State.getMode()||"board";AJS.trigger("analyticsEvent",{name:"jira-software."+t+".boardmenu.click."+(i?"open":"closed")})},_.defer)),"board-tools-section-button"==i&&(n.on("keydown",function(e){9==e.which&&!e.shiftKey&&n.hasClass("active")&&(a.find("ul > li > a:visible").first().focus(),e.preventDefault())}),a.on("keydown","ul > li > a:visible:first",function(e){9==e.which&&e.shiftKey&&n.click().focus()}),a.on("keydown","ul > li > a:visible:last",function(e){9!=e.which||e.shiftKey||n.click().focus()})),o.create({trigger:n,content:a,alignment:AJS.RIGHT,width:"auto"})},GH.ViewActions.renderOnConfiguration=GH.ViewActions.processData(e.noop),GH.ViewActions.renderOnManage=GH.ViewActions.processData(function(){e("#ghx-modes-tools").html(GH.tpl.viewactions.renderManageViewActions())}),GH.ViewActions.setView=function(i,t,o){e("#ghx-modes-tools").find(".aui-button.js-view-action-create").attr("disabled","disabled"),i&&e(".js-view-action-configure").removeClass("disabled"),GH.UserData.hasUser()&&GH.UserData.userConfig.canCreateBoard&&(GH.UserData.userConfig.canCreateProject||GH.UserData.userConfig.hasProjectsAccessible||GH.UserData.userConfig.hasFiltersAccessible)&&e("#ghx-modes-tools").find(".aui-button.js-view-action-create").removeAttr("disabled")},GH.ViewActions.setMode=function(e){e!==GH.ViewActions.mode&&(GH.ViewActions.mode=e),e&&s.handleDeferredResourceImport(c()&&!GH.DetailsView,function(){GH.ViewActions.refreshBoardTools()})},GH.ViewActions.adjustButtonsToMode=function(t){var o=e(".js-view-actions-plan"),n=e(".js-view-actions-work"),a=e(".js-view-actions-report"),s=e(".js-view-actions-print"),r=e(".js-open-alert-settings");switch(o.hide(),n.hide(),a.hide(),s.hide(),r.hide(),t){case i.PLAN:o.show(),GH.RapidBoard.State.isKanbanBoard()&&e([".js-view-action-toggle-releases-column",".js-view-action-toggle-epics-column",".js-view-action-toggle-epics-lozenge"].join(",")).hide(),s.show().find("a").removeClass("disabled");break;case i.WORK:GH.ViewActions.enableShowDetailIfIssueSelected(),GH.ViewActions.updateDetailViewModeSwitch(),n.show(),s.show().find("a").removeClass("disabled");break;case i.REPORT:a.show(),GH.SprintReportGrowthUtils.hasOpsgenie()&&GH.RapidBoard.State.getChartType()===GH.SprintRetrospectiveController.id&&(window.JIRA.isAdmin()||GH.ViewActions.canEdit)&&r.show()}},GH.ViewActions.setSwimlanes=function(i){var t=e(".js-view-actions-work");i?t.find(".js-swimlane-action").removeClass("disabled"):t.find(".js-swimlane-action").addClass("disabled")},GH.ViewActions.setVersionsPanelVisible=function(i){var t=e(".js-view-action-toggle-releases-column");i?t.text("Hide versions panel"):t.text("Show versions panel")},GH.ViewActions.setEpicsPanelVisible=function(i){var t=e(".js-view-action-toggle-epics-column");i?t.text("Hide epics panel"):t.text("Show epics panel")},GH.ViewActions.setEpicLozengesVisible=function(i){var t=e(".js-view-action-toggle-epics-lozenge");i?t.text("Hide epic labels"):t.text("Show epic labels")},GH.ViewActions.setDetailViewVisible=function(i){var t=e(".js-view-action-toggle-detail-view");i?t.text("Hide detail view"):t.text("Show detail view")},GH.ViewActions.updateDetailViewModeSwitch=function(){var i=e(".js-view-action-switch-detail-view-mode");if(a.isBentoSidebarOnBoardEnabled()){var t=a.isUsingBentoSidebarOnBoard()?"Open issues in dialog":"Open issues in sidebar";i.text(t)}else i.hide()},GH.ViewActions.createdDropdownOnConfigurationPage=function(){e("#js-view-actions").after(GH.tpl.viewactions.renderConfigurationViewActions()),e("#board-tools-section-content").hide();var i=GH.ViewActions.registerDropdown("js-view-actions","board-tools-section-content");GH.ViewActions.bindBoardToolsClickEvents(i)},GH.ViewActions.afterBoardToolsLoaded=function(t){"board-tools-section"===t.sectionId&&(GH.ViewActions.bindBoardToolsClickEvents(t.dropdown),e(t.dropdown[0]).bind("showLayer",GH.ViewActions.enableShowDetailIfIssueSelected),e(t.dropdown[0]).bind("showLayer",GH.ViewActions.enableShowEpicLozenge),GH.ViewActions.enableShowDetailIfIssueSelected(),GH.ViewActions.enableShowEpicLozenge(),GH.ViewActions.setView(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName,GH.ViewActions.canEdit),GH.ViewActions.adjustButtonsToMode(GH.ViewActions.mode),s.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===i.WORK,function(){GH.PlanView.updateViewActions()}),e("#board-tools-section-content li.aui-list-item > a").each(function(i,t){t=e(t),t.hasClass("disabled")?t.attr("aria-disabled",!0).attr("data-href",t.attr("href")).removeAttr("href"):(t.removeAttr("aria-disabled"),t.attr("data-href")&&t.attr("href",t.attr("data-href")).removeAttr("data-href"))}))},GH.ViewActions.bindBoardToolsClickEvents=function(i){e("#board-tools-section-content .aui-list-item a").bind("click",function(t){var o=e(this);return o.hasClass("disabled")?(t.stopPropagation(),!1):void e(i).hide()}),e("#board-tools-section-content .js-view-action-toggle-detail-view").bind("click",function(e){var i=void 0;GH.WorkController.isActive()?(GH.WorkController.toggleDetailsView(),i=GH.WorkController.isDetailsViewOpened()?"show":"hide"):GH.PlanController.isActive()&&(GH.PlanController.toggleDetailsView(),i=GH.PlanController.isDetailsViewOpened()?"show":"hide"),e.preventDefault();var t=GH.RapidBoard.State.getMode()||"board";AJS.trigger("analyticsEvent",{name:"jira-software."+t+".boardmenu.click."+i+"-detail-view"})}),e("#board-tools-section-content .js-view-action-switch-detail-view-mode").bind("click",function(e){if(GH.WorkController.isActive()){var i=void 0;a.isUsingBentoSidebarOnBoard()?(GH.WorkView.setAndShowDetailViewInModalMode(),i="modal"):(GH.WorkView.setAndShowDetailViewInSidebarMode(),i="sidebar"),GH.ViewActions.updateDetailViewModeSwitch(),AJS.trigger("analyticsEvent",{name:"jira-software.work.boardmenu.click.switch-detail-view-mode",data:{viewMode:i}})}e.preventDefault()}),e("#board-tools-section-content .js-view-action-configure").bind("click",function(e){var i=require("jira-agile/rapid/ui/SPConfigController");e.preventDefault(),i.openConfig()}),e("#board-tools-section-content .js-view-action-create").bind("click",function(e){e.preventDefault(),AJS.trigger("analyticsEvent",{name:"jira-software.meatballs.boardmenu.click.create-board"})}),e("#board-tools-section-content .js-view-action-print-cards").bind("click",function(e){GH.ViewActions.printCards(),e.preventDefault(),AJS.trigger("analyticsEvent",{name:"jira-software."+(GH.RapidBoard.State.getMode()||"board")+".boardmenu.click.print-cards"})}),e("#board-tools-section-content .js-open-alert-settings").bind("click",function(e){e.preventDefault();var i="/plugins/servlet/project-config/"+GH.RapidBoard.projectKey+"/opsgenie";window.location.href=i,n.sendUIEvent({source:GH.SprintRetrospectiveController.id,action:"clicked",actionSubject:"button",actionSubjectId:"openOpsgenieSettingsPage"})})},GH.ViewActions.showCopyBoardDialog=function(e,i){this.copyBoardDialog||(this.copyBoardDialog=GH.Dialog.create({id:"copy-board-dialog",width:450,height:250}),this.copyBoardDialog.addHeader("Copy board"),this.copyBoardDialog.addPanel("",AJS.format("<p>{0}</p>","When copying a board, the source board\'s settings will be used for the new board, with both boards using the same filter.\u003cbr\u003e\u003cbr\u003e As administrator of the new board, you can modify the settings as needed."),"panel-body"),this.copyBoardDialog.addButton("Confirm",function(t){this.copyBoardDialog.hide(),GH.ViewActions.actionCopy(e,i)}.bind(this)),this.copyBoardDialog.addLink("Cancel",function(e){this.copyBoardDialog.hide()}.bind(this),"#")),this.copyBoardDialog.show(),n.sendPageEvent("copyBoardModal")},GH.ViewActions.actionDelete=function(){GH.ViewActions.currentViewId&&GH.RapidBoard.DeleteDialog.showDeleteDialog(GH.ViewActions.currentViewId,GH.ViewActions.currentViewName)},GH.ViewActions.actionCopy=function(e,i){e||(e=GH.ViewActions.currentViewId,i=GH.ViewActions.currentViewName),GH.RapidBoard.copyRapidViewAndGotoConfiguration(e,i)},GH.ViewActions.printCards=function(){GH.ViewActions.currentViewId&&GH.RapidBoard.printCardsInRapidBoard()},GH.ViewActions.enableShowDetailIfIssueSelected=function(){if(GH.WorkController&&GH.WorkController.isActive()){var i=e(".js-view-actions-work");GH.ViewActions.setDetailViewVisible(GH.WorkController.isDetailsViewOpened()),GH.WorkSelectionController.getSelectedIssueKey()?i.find(".js-view-action-toggle-detail-view").removeClass("disabled"):i.find(".js-view-action-toggle-detail-view").addClass("disabled")}else GH.PlanController.isActive()&&GH.ViewActions.setDetailViewVisible(GH.PlanController.isDetailsViewOpened())},GH.ViewActions.enableShowEpicLozenge=function(){GH.ViewActions.setEpicLozengesVisible(GH.RapidBoard.State.getEpicShownOnRapidBoard())},GH.ViewActions.toggleEpicsShowOnRapidBoard=function(){GH.RapidBoard.State.getEpicShownOnRapidBoard()?(GH.RapidBoard.State.setEpicShownOnRapidBoard(!1),GH.ViewActions.setEpicLozengesVisible(!1)):(GH.RapidBoard.State.setEpicShownOnRapidBoard(!0),GH.ViewActions.setEpicLozengesVisible(!0))},GH.ViewActions.on("boardToolsRendered",GH.ViewActions.afterBoardToolsLoaded),GH.ViewActions.loadBoardSettingWhenAllDataFails=function(){GH.RapidBoard.State.getMode()!==i.WORK||GH.RapidBoard.State.isConfigOpen()||0!==e("#board-tools-section-button").length&&"none"!==e("#board-tools-section-button").css("display")||GH.ViewActions.setMode(GH.RapidBoard.State.getMode())}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/component/ViewActions.soy' */
// This file was automatically generated from ViewActions.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.viewactions.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.viewactions == 'undefined') { GH.tpl.viewactions = {}; }


GH.tpl.viewactions.renderManageViewActions = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({extraClasses: ['js-view-action-create'], text: 'Create board'});
};
if (goog.DEBUG) {
  GH.tpl.viewactions.renderManageViewActions.soyTemplateName = 'GH.tpl.viewactions.renderManageViewActions';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-1', location = 'jira-agile-module/includes/js/rapid/ui/detail/DetailsViewOpts.js' */
!function(){"use strict";GH.DetailsViewOpts={}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-details-field-resources', location = 'jira-agile-module/includes/js/rapid/ui/detail/DetailsModel.js' */
define("jira-agile/rapid/ui/detail/details-model",["require"],function(e){"use strict";function t(e,t){return i.find(e.tabs.defaultTabs,function(e){return e.tabId.toLowerCase()===t.toLowerCase()})}var i=e("underscore"),s=GH.RapidBoard,n=(e("jira/featureflags/feature-manager"),e("jira-agile/features/feature-flags"),/\?id=\d+/),a={};return a.TAB_SECTIONS={details:["details","people","dates"],description:["description"]},a.FIELD_SECTION_PRESETS={assignee:"people",created:"dates",components:"details",description:"description",fixVersions:"details",issuekey:"header",labels:"details",reporter:"people",summary:"header",status:"details",updated:"dates",versions:"details",votes:"people"},a.fieldErrorSelectors={},a.fieldCategories={timetracking:["timeestimate","timeoriginalestimate","aggregatetimeestimate","aggregatetimeestimate_subtasks"]},a.issueIdToKeyCache={},a.getIssueKeyForId=function(e){return this.issueIdToKeyCache[e]||!1},a.viewData=null,a.clearViewData=function(){this.viewData=null},a.setViewData=function(e){this.issueIdToKeyCache[e.id]=e.key,this.processFields(e),this.applyOperationUrlPatches(e),this.filterIssueOperations(e),this.viewData=e},a.getViewField=function(e){var i=t(this.viewData,"HEADER");return i.fields.find(function(t){return t.id===e})},a.isFieldInSection=function(e,t){var s=this.fieldSections[t];return!i.isUndefined(s)&&i.any(s,function(t){return t===e})},a.getPrimaryEstimateStatisticField=function(){return 0!==this.fieldSections.estimate.length&&this.getFieldsForSection("estimate")[0]},a.getFieldsForSection=function(e){var t=this.fieldSections[e];return i.isUndefined(t)?[]:i.map(t,function(e){return this.getViewField(e)}.bind(this))},a.getErrorSelectorForField=function(e){return this.fieldErrorSelectors[e]||!1},a.processFields=function(e){this.fieldSections={header:[],estimate:[],details:[],people:[],dates:[],links:[],description:[]};var t=e.primaryStatisticFieldId||"",s=e.trackingStatisticFieldId||"",n=i.findWhere(e.tabs.defaultTabs,{tabId:"HEADER"});i.forEach(n.fields,function(e){if(e&&e.id)if(e.id===t)this.fieldSections.estimate.push(e.id);else if(e.id!==s&&"aggregatetimeestimate"!==e.id&&"aggregatetimeestimate_subtasks"!==e.id){var i=this.FIELD_SECTION_PRESETS[e.id];i=i||e.category||"details","unsupported"!==i&&this.fieldSections[i].push(e.id)}}.bind(this))},a.applyOperationUrlPatches=function(e){var t=s.getCurrentPageReturnUrl(),n=AJS.$("#atlassian-token").attr("content");e.operations&&i.each(e.operations.sections,function(e){i.each(e.operations,function(e){e.url=this.patchIssueOperationUrl(e.url,t,n),e.label=this.patchRankOperationName(e.styleClass,e.label)}.bind(this))}.bind(this))},a.patchRankOperationName=function(e,t){return"issueaction-greenhopper-rank-top-operation"===e?"Send to top":"issueaction-greenhopper-rank-bottom-operation"===e?"Send to bottom":t},a.patchIssueOperationUrl=function(e,t,i){var s="";e.indexOf("#")!==-1&&(s=e.substring(e.indexOf("#")),e=e.substring(0,e.indexOf("#"))),e+=e.indexOf("?")<0?"?":"&",e+="returnUrl="+t;var a="atl_token="+i;return e.indexOf(a)<0&&(e=e.replace("atl_token=",a)),e.indexOf("WorkflowUIDispatcher.jspa")>-1&&(e=e.replace(n,"?id={0}")),e+s},a.filterIssueOperations=function(e){var t=["view-voters","greenhopper-planningboard-operation","greenhopper-taskboard-operation","attach-screenshot","toggle-issue/detailswatch-issue","manage-watchers","move-issue","edit-labels","issue-to-subtask","clone-issue","toggle-vote-issue","greenhopper-rapidboard-operation"],n=["opsbar-transitions"],r=[];i.each(e.operations.sections,function(e){var s=i.find(n,function(t){return t===e.groupId});if(!s){var o=i.reject(e.operations,function(e){var s=i.find(t,function(t){return t===e.id});return i.isString(s)});a.renameWatchIssueId(o),o.length>0&&r.push({operations:o})}});for(var o,d,l=0;l<r.length;l++){var u=r[l];i.isUndefined(o)||(1===u.operations.length?(i.isUndefined(d)&&1===o.operations.length&&(d=o),i.isUndefined(d)||(d.operations=d.operations.concat(u.operations),u.operations=[])):u.operations.length>1&&(d=void 0)),o=u}r=i.reject(r,function(e){return 0===e.operations.length}),e.operations.filteredSections=r,s.State.isScrumBoard()&&e.editable&&e.sprint&&!e.isSubtask&&this.addRemoveFromSprintOperation(e.operations),this.addFlagOperation(e.operations,!e.flagged)},a.renameWatchIssueId=function(e){i.find(e,function(e){if("toggle-watch-issue"===e.id)return e.id="gh-toggle-watch-issue",!0})},a.addRemoveFromSprintOperation=function(e){return e.filteredSections.push({operations:[{id:"removeIssueFromSprint",label:"Remove from sprint",styleClass:"issueaction-remove-issue-from-sprint js-remove-issue-from-sprint",title:"Removes this issue from the current sprint",url:""}]}),e},a.addFlagOperation=function(e,t){t?e.filteredSections.push({operations:[{id:"flagIssueAndComment",label:"Add flag",styleClass:"issueaction-flag-and-comment js-flag-issue-and-comment",title:"Add flag",url:""}]}):e.filteredSections.push({operations:[{id:"unflagIssueAndComment",label:"Remove flag",styleClass:"issueaction-unflag-and-comment js-unflag-issue-and-comment",title:"Remove flag",url:""}]})},a.hasIssueOperation=function(e){return i.find(this.viewData.operations.sections,function(t){return i.find(t.operations,function(t){return t.id===e})})},a.getInlineEditableFields=function(){var e=this,i=AJS.$.Deferred();return GH.DetailsView.getExtraTabsAttributes().done(function(s){var n=s?t({tabs:s},"DETAILS").inlineEditableFields:null;i.resolveWith(e,[n])}),i.promise()},a.getTimeTrackingFields=function(){var e=this.getViewField("timeestimate");if(!e)return null;var t=this.getViewField("aggregatetimeestimate"),i=this.getViewField("aggregatetimeestimate_subtasks");return{currentIssueRemainingEstimateField:e,aggregateRemainingField:t,aggregateRemainingSubtaskField:i}},a.replaceUpdatedTabs=function(e){this.viewData.tabs.defaultTabs=i.map(this.viewData.tabs.defaultTabs,function(t){var s=i.findWhere(e.defaultTabs,{tabId:t.tabId});return s?s:t})},a});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-details-field-resources', location = 'jira-agile-module/includes/js/rapid/ui/detail/DetailsFieldRenderer.js' */
define("jira-agile/rapid/ui/detail/details-field-renderer",["underscore","jira-agile/tooltip","jira-agile/rapid/ui/detail/details-model"],function(e,t,i){"use strict";function a(e,t){var i=t.find("#"+e.tabId+"-nav"),a=AJS.$(GH.tpl.detailview.renderTabNavigation({tab:e}));a&&i.replaceWith(a)}var n=GH.RapidViewConfig,s={};return s.renderFields=function(t,a,n){this.renderDetailsHeaderFields(t,a,n);var s=[{fieldsSelector:"details"},{fieldsSelector:"people",title:"People"},{fieldsSelector:"dates",title:"Dates"}],r=e.reduce(s,function(e,t){var a=i.getFieldsForSection(t.fieldsSelector);return a.length>0&&e.push({title:t.title,fields:a}),e},[]),d=a.find("#ghx-detail-nav"),l=a,u=this.buildTabs(t,r);this.renderTabs(t,l,d,u),this.initTabTooltips(l)},s.renderDetailsHeaderFields=function(e,t,a){var n=i.getViewField("issuekey"),s=i.getViewField("summary"),r=t.find("#ghx-detail-head"),d=r.find(".ghx-key"),l=this.renderField(e,n);d.empty(),d.append(l);var u=t.attr("data-issueid");this.renderJiraLink(e,n,r,u);var o=this.renderField(e,s);r.find(".ghx-detail-summary").empty().append(o),this.renderEstimationAndTimeTracking(e,r);var c=a.showLogWorkTrigger&&i.hasIssueOperation("log-work");this.renderLogWorkTrigger(e,r,c)},s.renderEstimationAndTimeTracking=function(e,t){var a=t.find(".ghx-statistic-group"),n=i.getPrimaryEstimateStatisticField(),s=i.getTimeTrackingFields();n||s?(this.renderEstimateStatisticField(n,e,a),s?this.renderTimeTrackingFields(s,e,a):a.find(".ghx-remaining-group").remove()):a.empty()},s.buildTabs=function(e){var t=[];return e.tabs.defaultTabs.length>0&&this._addTabs(t,e.tabs.defaultTabs,e),t},s._addTabs=function(t,i,a){e.each(i,function(e){"HEADER"!==e.tabId&&t.push({tabId:e.tabId,sections:[]})}.bind(this)),e.each(i,function(i){var n="THIRD_PARTY_TAB"!==i.tabId,s=e.findWhere(t,{tabId:i.tabId});s&&("SUB_TASKS"===i.tabId?this.addSubtaskTab(s.sections,i,a.trackingStatisticFieldId,a.key):i.sections&&e.each(i.sections,function(t){if(t.providerKey&&(t.iconURL||t.iconFont||n)){var a;a=n?t.providerKey.split(":")[1]:"ghx-tab-"+t.providerKey,t.titleCount=this._getTitleCount(t,i);var r=e.extend(t,{id:a.replace(/\./g,"-").replace(/:/g,"-"),title:t.label,hasTitleCount:!e.isUndefined(t.titleCount),thirdPartyTab:!n,isLazyLoading:!1,subpanelHtmls:[]});s.sections.push(r)}}.bind(this)))}.bind(this))},s.addSubtaskTab=function(t,a,n,s){if(a.subtaskEntries){var r,d=!!e.find(a.subtaskEntries,function(e){return e.canEdit||e.canDelete}),l=!e.isUndefined(n);if(l){var u=i.getViewField("aggregatetimeestimate_subtasks");u&&(r=u.html)}t.push({id:"subtasks",title:"Sub-Tasks",titleCount:a.subtaskEntries.length,hasTitleCount:!0,subtasks:a.subtaskEntries,canCreateSubtask:i.hasIssueOperation("create-subtask"),showActionsColumn:d,showTrackingField:l,trackingFieldSum:r,parentIssueKey:s,iconFont:"jira-completed-task"})}},s.renderSubtaskAsHtmlNode=function(t){var i=e.first(t.subtasks),a=i&&i.status.statusCategory;return AJS.$(GH.tpl.detailview.renderSubtasks({subtasks:t.subtasks,canCreateSubtask:t.canCreateSubtask,showActionsColumn:t.showActionsColumn,showTrackingField:t.showTrackingField,trackingFieldSum:t.trackingFieldSum,statusCategoriesAvailable:a}))},s.renderSections=function(t,i){var a=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:t.title}));i.append(a),e.each(t.sections,function(e){this.renderSection(i,e,t.viewData)}.bind(this))},s.renderSection=function(t,i,a){var n,s=AJS.$(GH.tpl.detailview.renderTabSection({renderTitle:!e.isUndefined(i.title),title:i.title}));if(i.fields){if(0===i.fields.length)return;n=s.find(".ghx-tab-section-content"),e.each(i.fields,function(e){var t=this.renderField(a,e);n.append(t)}.bind(this)),t.append(s)}else if(i.issueLinks){n=s.find(".ghx-tab-section-content");var r=GH.tpl.detailview.issuelinks.renderIssueLinks({issueLinkTypeEntries:i.issueLinks.issueLinkTypeEntries,canLink:i.issueLinks.canLink});n.replaceWith(r),t.append(s)}},s.renderField=function(e,t){var i=AJS.$(GH.tpl.detailview.renderFieldStructure({issueDetails:e,field:t})),a=this.renderFieldContent(t);return i.find("dd").html(a),i},s.renderLogWorkTrigger=function(e,t,i){var a=t.find("#ghx-log-work-container");i?a.css({display:""}):a.css({display:"none"})},s.renderJiraLink=function(e,t,i,a){var n=i.find(".js-view-in-jira"),s=GH.tpl.detailview.renderIssueLink({issueKey:t.text});n.find("dd").html(s),n.on("mousedown",function(e){if(1===e.which||2===e.which){var t=e.which-1;AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open.full.issue",data:{pageMode:GH.RapidBoard.State.getMode(),issueId:a,middleClick:t}})}})},s.renderFieldContent=function(e){var t;if("description"===e.id)return t=GH.tpl.detailview.renderDescriptionHtmlView({field:e});if(e.id===n.currentData.data.estimationStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});if(e.id===n.currentData.data.trackingStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});if("aggregatetimeestimate"===e.id&&"timeestimate"===n.currentData.data.trackingStatistic.fieldId)return t=GH.tpl.detailview.renderTextEstimateView({field:e});switch(e.renderer){case"html":t=GH.tpl.detailview.renderHtmlView({field:e});break;case"date":t=GH.tpl.detailview.renderDateView({field:e});break;case"epiclink":t=GH.tpl.field.epicLink.renderEpicLink({field:e,removableIfAllowed:!0});break;case"status":t=GH.tpl.status.renderText({status:e.statusEntry});break;case"text":default:t=GH.tpl.detailview.renderTextView({field:e})}return t},s.initTabTooltips=function(e){var i=".ghx-detail-nav-menu a";return t.tipsify({context:e,selector:i,gravity:"e"}),e.find(i)},s.renderTabs=function(e,t,i,a){var n=AJS.$(GH.tpl.detailview.renderTabs({tabs:a})),s=AJS.$(GH.tpl.detailview.renderTabMenuStructure({tabs:a}));t.append(s),i.append(n),this.renderTabsContent(a,t.find(".ghx-detail-nav-menu"),i)},s.updateTabsContent=function(e,t){var i=this.buildTabs(e),a=t.find("#ghx-detail-nav");this.renderTabsContent(i,t.find(".ghx-detail-nav-menu"),a)},s.renderTabsContent=function(t,i,n){e.each(t,function(t){a(t,i);var s=n.find("#"+t.tabId);s.empty(),e.each(t.sections,function(e){e.subtasks?s.append(this.renderSubtasks(e)):s.append(this.renderTab(e))}.bind(this))}.bind(this))},s.renderSubtasks=function(t){var i=this.renderSubtaskAsHtmlNode(t),a={links:[],groups:[]};return t.canCreateSubtask&&t.subtasks.length>0&&a.links.push({id:"createSubtask",title:"Create Sub-Task",label:"Create Sub-Task",styleClass:"icon issueaction-create-subtask aui-icon aui-icon-small aui-iconfont-add issueaction-aui-icon"}),AJS.$.extend(t,{html:e.map(i,function(e){return AJS.$("<DIV></DIV>").append(AJS.$(e).clone()).html()}).join(""),headerLinks:a,renderHeader:!0,subpanelHtmls:[]}),this.renderTab(t)},s.renderTab=function(e){var t=[];if(e.headerLinks){var i=AJS.$(JIRA.Components.IssueViewer.Templates.Body.issuePanel({html:e.html,id:e.id,label:e.title,renderHeader:e.renderHeader,headerLinks:e.headerLinks,subpanelHtmls:e.subpanelHtmls}));i.addClass("ghx-detail-section"),t=i}else{var a=AJS.$(GH.tpl.detailview.renderTabTitle({tabTitle:e.title}));t.append(a),t.append(AJS.$(e.html))}return e.thirdPartyTab||e.iconFont||e.iconURL||t.addClass("ghx-no-tab-menu"),e.tabIconId?t.attr("ghx-tab-icon-id",e.tabIconId):e.iconFont||e.iconURL||t.addClass("ghx-hidden-tab"),t},s._getTitleCount=function(t,i){var a;if(e.isUndefined(t.titleCount))switch(i.tabId){case"ATTACHMENT":a=i.totalCount;break;case"COMMENT":a=i.totalComments}else a=t.titleCount;return a},s.renderEstimateStatisticField=function(t,i,a){if(t){var n=e.extend({},t,{dataTooltip:t.label,label:"Estimate"});this.renderStatisticFields([n],".js-estimate",i,a)}else a.find(".js-estimate").remove()},s.renderTimeTrackingFields=function(t,i,a){var n=[];if(n.push(e.extend({},t.currentIssueRemainingEstimateField,{dataTooltip:t.currentIssueRemainingEstimateField.label,label:"Remaining"})),t.aggregateRemainingField){var s=GH.tpl.detailview.renderAggregateRemainingEstimateTooltip({data:[{label:"Parent",value:t.currentIssueRemainingEstimateField.text},{label:t.aggregateRemainingSubtaskField?t.aggregateRemainingSubtaskField.label:null,value:t.aggregateRemainingSubtaskField?t.aggregateRemainingSubtaskField.text:null}]});n.push(e.extend({},t.aggregateRemainingField,{dataTooltip:s,label:"Remaining sum"}))}this.renderStatisticFields(n,".js-remainings",i,a)},s.renderStatisticFields=function(t,i,a,n){var s=n.find(i);s.empty(),e.each(t,function(t){var i=this.renderField(a,t);s.append(i),e.isUndefined(t.text)?s.addClass("ghx-empty"):s.removeClass("ghx-empty")}.bind(this))},s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-details-field-resources', location = 'jira-agile-module/includes/js/rapid/ui/detail/DetailsView.js' */
var _extends=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};!function(){"use strict";function e(e,i){o.disable(AJS.$("[data-tooltip][data-field-id="+i+"]"))}function i(e,i){o.enable(AJS.$("[data-tooltip][data-field-id="+i+"]"))}function t(){return GH.DetailsView.getContainer().find("#addcomment").hasClass("active")}function a(e){return"none"===e.css("display")?0:e.width()}var s=function(e){try{return require(e)}catch(i){return}},n=require("aui/tabs"),r=require("jira-agile/rapid/analytics-tracker"),l=require("jira/analytics/web-client"),o=require("jira-agile/tooltip"),d=require("jira/ajs/dropdown/dropdown"),c=require("jira/util/events"),u=s("jira/components/issueeditor/eventtypes"),w=require("jira-agile/rapid/ui/detail/details-model"),D=require("jira-agile/rapid/ui/detail/details-field-renderer"),g=require("jira/featureflags/feature-manager"),H=require("jira-agile/rapid/deferred-resources-loader"),V=function(){return g.isFeatureEnabled("jsw.classic.keto")},G=function(){return GH.DetailsView.opts.wantsBentoInBacklog&&GH.DetailsView.opts.wantsBentoInBacklog()};GH.DetailsView=new GH.Events,GH.DetailsView._InlineEditor=require("jira-agile/rapid/ui/detail/inlineedit/issue-detail-view-inline-editor"),GH.DetailsView._Reloader=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reloader"),GH.DetailsView.minWidth=440,GH.DetailsView.API_EVENT_DETAIL_VIEW_UPDATED="GH.DetailView.updated",GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED="GH.DetailView.closed",GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED="GH.DetailView.update.started",GH.DetailsView.selectedIssueKey=void 0,GH.DetailsView.rapidViewId=void 0,GH.DetailsView.rapidViewConfig=void 0,GH.DetailsView.containerSelector=void 0,GH.DetailsView.TAB_SUBTASKS="subtasks",GH.DetailsView.$lastSectionSpacer=void 0,GH.DetailsView.opts={canClose:!0,showActionsCog:!0,showSubtaskTab:!0,showLogWorkTrigger:!1,updateSizeHandler:function(){}},GH.DetailsView.analytics=new r("gh.issueaction.issuedetail"),GH.DetailsView.triggerAnalyticsOpenDetailView=function(){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open"}),GH.DetailsView.analytics.openDetailViewTime=Date.now()},GH.DetailsView.triggerAnalyticsCloseDetailView=function(){var e=GH.DetailsView.analytics.openDetailViewTime,i=Date.now();!e||i-e>3e3?AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.close"}):AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.dismiss"}),GH.DetailsView.analytics.openDetailViewTime=null},GH.DetailsView.triggerAnalyticsEventForAction=function(e,i){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail."+e,data:i})},GH.DetailsView.init=function(){AJS.$(document).bind("tabSelect",GH.DetailsView.handleTabSelection),AJS.$(document).delegate(".js-detailclose","click",function(e){GH.DetailsView.closeHandler&&(GH.DetailsView.closeHandler(e),GH.DetailsView.triggerAnalyticsCloseDetailView())})},GH.DetailsView.getMode=function(){return GH.RapidBoard.ViewController.getMode()},GH.DetailsView.setContainerSelector=function(e){GH.DetailsView.containerSelector=e,e&&AJS.$(e).addClass("gh-editable-detail-view")},GH.DetailsView.setOptions=function(e){GH.DetailsView.opts=e,GH.DetailsView.closeHandler=GH.DetailsView.opts.closeHandler},GH.DetailsView.getContainer=function(){return GH.DetailsView.containerSelector?AJS.$(GH.DetailsView.containerSelector):AJS.$()},GH.DetailsView._getContentContainer=function(){return GH.DetailsView.getContainer().find(".ghx-detail-contents")},GH.DetailsView._getIssueElement=function(){return GH.DetailsView.getContainer().find(".ghx-detail-issue")},GH.DetailsView._replaceUpdatedFields=function(e,i,t){function a(e){return!_.contains(GH.DetailsView.getEditsInProgress(),e)}function s(e){return _.contains(["timeestimate","timeoriginalestimate"],e)}GH.DetailsView._replaceField(e,i,t),"timeoriginalestimate"===t&&a("timeestimate")&&GH.DetailsView._replaceField(e,i,"timeestimate"),"timeestimate"===t&&a("timeoriginalestimate")&&GH.DetailsView._replaceField(e,i,"timeoriginalestimate"),s(t)&&GH.DetailsView._replaceField(e,i,"aggregatetimeestimate")},GH.DetailsView._replaceField=function(e,i,t){var a=GH.DetailsView._InlineEditor.getFieldSelector(t),s=e.find(a),n=i.find(a);0===n.length?s.closest("li, dl").remove():(s.replaceWith(n),GH.DetailsView._InlineEditor.triggerFieldUpdate(t,e,n))},GH.DetailsView._setIssueElement=function(e,i){var t=GH.DetailsView._getIssueElement();return 0===t.length?void GH.DetailsView._getContentContainer().prepend(e):void(i&&GH.DetailsView.hasEditsInProgress()?GH.DetailsView._replaceUpdatedFields(t,e,i):t.replaceWith(e))},GH.DetailsView.setRapidViewId=function(e){GH.DetailsView.rapidViewId=e},GH.DetailsView.setRapidViewConfig=function(e){GH.DetailsView.rapidViewConfig=e,GH.DetailsView.opts.showLogWorkTrigger&&(GH.DetailsView.opts.showLogWorkTrigger=!_.isUndefined(e.trackingStatistic)&&e.trackingStatistic.isEnabled)},GH.DetailsView.setSelectedIssueKey=function(e){GH.DetailsView.selectedIssueKey=e},GH.DetailsView.getSelectedIssueKey=function(){return GH.DetailsView.selectedIssueKey},GH.DetailsView.clearSelectedIssueKey=function(){GH.DetailsView.selectedIssueKey=void 0};var h=function(e,i,t){if(e.key===GH.DetailsView.selectedIssueKey&&(w.setViewData(e),!_.isUndefined(i)&&_.isFunction(i)&&i(t),GH.DetailsView.currentPromise=void 0,(GH.RapidBoard.State.isPlanMode()||GH.DetailsView._getIsUsingBentoSidebarOnBoard())&&(GH.DetailsView.makeResizable(),AJS.$("#ghx-issue-fragment").on("initialize-resize-handle",function(){GH.DetailsView.makeResizable()})),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()&&!GH.RapidBoard.State.isPlanMode()||GH.BacklogView&&GH.BacklogView.checkBacklogWidth(),!G()&&!GH.DetailsView._getIsUsingBentoSidebarOnBoard())){var a=Date.now()-GH.DetailsView.analytics.startLoadTime,s=JIRA.API&&JIRA.API.Projects;AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.load",data:{loadingTimeMs:a,issueId:e.id,projectId:s&&s.getCurrentProjectId(),projectType:s&&s.getCurrentProjectType(),analyticsSource:GH.RapidBoard.State.getMode()}}),S(e)}};GH.DetailsView._loadDetailsView=h;var f=function(e){var i={1:"UNDEFINED",2:"TODO",4:"IN_PROGRESS",3:"DONE"};return i[e]||"UNDEFINED"},p=function(){return{analyticsSource:GH.RapidBoard.State.isPlanMode()?"software-backlog-issue":"simple-software-board"}},I=function(e){var i=JIRA.API&&JIRA.API.Projects,t=GH.RapidBoard.State.isPlanMode(),a=t?GH.BacklogModel.getIssueData(e):GH.GridDataController.getModelPromise().then(function(i){return i.getIssueDataByKey(e)});return GH.Util.promiseCast(a).then(function(e){return e?{analyticsSource:t?"software-backlog-issue":"software-issue",boardId:GH.RapidViewConfig.currentData.data.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),statusCategory:f(e.status.statusCategory.id),statusCategoryId:e.status.statusCategory.id,issueTypeId:e.typeId,nextGenProject:i&&"true"===i.isCurrentProjectSimplified(),newIssueToggleValue:GH.RapidBoard.State.isNewIssueViewEnabled()?"ON":"OFF"}:{}})},S=function(e){var i=JIRA.API&&JIRA.API.Projects,t=I(e.key);return GH.Util.promiseCast(t).then(function(t){var a={objectType:"issue",objectId:e.id,containerType:"project",containerId:i&&i.getCurrentProjectId(),attributes:_extends({projectType:"software",designVersion:"v1-legacy"},t,p()),action:"viewed",actionSubject:"issue",actionSubjectId:e.id,source:GH.RapidBoard.State.isPlanMode()?"backlogScreen":"boardScreen"};l.sendTrackEvent(a)})},m=function(){var e=GH.DetailsView.getContainer();if(0===e.find("#ghx-detail-contents").length){if(!G()&&!GH.DetailsView._getIsUsingBentoSidebarOnBoard()){var i=GH.tpl.detailview.renderIssueDetailsSkeleton();e.empty().append(i)}e.width(GH.DetailsView.getWidth()),GH.DetailsView.initTooltips(),GH.DetailsView.triggerAnalyticsOpenDetailView()}return GH.DetailsView.selectedIssueKey?(GH.RapidBoard.ViewController.handleResizeEvent(),void GH.DetailsView._initInlineEditor()):void GH.DetailsView._getIssueElement().remove()};GH.DetailsView.show=function(e,i){e||w.clearViewData(),m(),GH.DetailsView.preloadPromise?(GH.DetailsView.showSpinner("load-content-spinner"),GH.DetailsView.preloadPromise.done(function(e){h(e,GH.DetailsView.renderDetails)}).always(function(){GH.DetailsView.preloadPromise=void 0,GH.DetailsView.hideSpinner("load-content-spinner")})):(GH.DetailsView.trigger("before:render"),GH.DetailsView.load(null,e,i))},GH.DetailsView.reload=GH.DetailsView.show.bind(GH.DetailsView),GH.DetailsView.getWidth=function(){var e=GH.RapidBoard.State.getDetailViewWidth(),i=e*GH.DetailsView._getTotalWidth(),t=Math.max(i,GH.DetailsView.minWidth);return Math.min(GH.DetailsView.getMaxWidth(),t)},GH.DetailsView.initTooltips=function(){var t=[".ghx-statistic-group [data-tooltip]"];o.tipsify({selector:t.join(", "),context:"#ghx-detail-contents",html:!0});var a=function(){return g.isFeatureEnabled("cbb.heritage")};H.handleDeferredResourceImport(a()&&!u,function(){u=require("jira/components/issueeditor/eventtypes"),c.bind(u.INLINE_EDIT_STARTED,e),c.bind(u.BEFORE_INLINE_EDIT_CANCEL,i),c.bind(u.INLINE_EDIT_SAVE_COMPLETE,i)})},GH.DetailsView.hide=function(){AJS.$("#ghx-issue-fragment").trigger("hide-detail-view"),GH.DetailsView.currentPromise&&GH.DetailsView.currentPromise.abort&&GH.DetailsView.currentPromise.abort(),GH.DetailsView.getContainer().empty(),AJS.$("#gh").removeClass("js-ghx-detail-loading").removeClass("js-ghx-detail-loaded"),AJS.$(GH).trigger(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED),GH.RapidBoard.ViewController.handleResizeEvent(),GH.DetailsView._InlineEditor.destroy()},GH.DetailsView.resizeLastSectionSpacer=function(){var e,i=AJS.$("#js-detail-nav-content"),t=i.find(".ghx-detail-section"),a=0;e=i.data("$lastSectionSpacer"),e&&(a=e.height());var s=i.height(),n=t.last(),r=n.height()-a;if(s>r){e||i.data("$lastSectionSpacer",e=AJS.$("<div>",{css:{clear:"both"}}).appendTo(n));var l=AJS.$.browser.msie?0:40;e.height(s-r-l)}},GH.DetailsView.selectNavItem=function(e){var i=_.debounce(function(e){GH.DetailsView.triggerAnalyticsEventForAction("scroll",{sectionId:e})},150),t=AJS.$(".ghx-detail-nav-menu .ghx-detail-nav-item"),a=t.filter(".ghx-selected");a.find("a").attr("href")!=="#"+e&&i(e),a.removeClass("ghx-selected");var s=AJS.$("#"+e),n=s.attr("ghx-tab-icon-id");n&&(e=n),t.find("a").filter(function(){return this.hash==="#"+e}).closest(".ghx-detail-nav-item").addClass("ghx-selected")},GH.DetailsView.updateSize=function(){GH.DetailsView.opts.updateSizeHandler(),GH.DetailsView.resizeLastSectionSpacer(),GH.DetailsView.getContainer().width(GH.DetailsView.getWidth()),GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()&&!GH.RapidBoard.State.isPlanMode()||GH.BacklogView&&GH.BacklogView.checkBacklogWidth(),AJS.$("#ghx-detail-view").agileResizable("option","maxWidth",GH.DetailsView.getMaxWidth())},GH.DetailsView.getFixedElement=function(){return{element:GH.DetailsView.getContainer(),resizeCallback:GH.DetailsView.updateSize}},GH.DetailsView.load=function(e,i,t){if(G()||GH.DetailsView._getIsUsingBentoSidebarOnBoard()){var a=i?"refresh-backlog-issue":"show-backlog-issue",s=GH.DetailsView.selectedIssueKey,n={issueKey:s};AJS.$("#ghx-issue-fragment").trigger(a,n),c.trigger("modify-issue-view-via-external-action",{issueKey:s,externalAction:t}),GH.DetailsView.loadContent(e),(g.isFeatureEnabled("jsw.lightbulb.backlog.classic.insights-button-enabled")||g.isFeatureEnabled("jira.insights.classic.board.insights-button-enabled"))&&(GH.RapidBoard.ViewController.insightsOpen=!1)}else AJS.$("#gh").addClass("js-ghx-detail-loading").removeClass("js-ghx-detail-loaded"),i?e?GH.DetailsView._Reloader.reload(i,e):GH.DetailsView._Reloader.reload(i):GH.DetailsView.loadContent(e,GH.DetailsView.renderDetails)},GH.DetailsView.hasEditsInProgress=function(){return GH.DetailsView.getEditsInProgress().length>0||t()},GH.DetailsView.getEditsInProgress=function(){var e=GH.DetailsView._InlineEditor&&GH.DetailsView._InlineEditor.getEditsInProgress();return e||[]};var v=function(){return{rapidViewId:GH.DetailsView.rapidViewId,issueIdOrKey:GH.DetailsView.selectedIssueKey}},b=function(e){return GH.Ajax.get({url:"/xboard/issue/details.json",data:e},"detailView")};GH.DetailsView.preloadData=function(){g.isFeatureEnabled("jsw.lightbulb.backlog.classic.insights-button-enabled")||g.isFeatureEnabled("jira.insights.classic.board.insights-button-enabled")?GH.DetailsView.preloadPromise=GH.DetailsView.selectedIssueKey?b(v()):null:GH.DetailsView.preloadPromise=b(v())},GH.DetailsView.loadContent=function(e,i){GH.DetailsView.analytics.startLoadTime=Date.now(),e||GH.DetailsView.showSpinner("load-content-spinner");var t=v();return g.isFeatureEnabled("jsw.lightbulb.backlog.classic.insights-button-enabled")&&!t.issueIdOrKey||g.isFeatureEnabled("jira.insights.classic.board.insights-button-enabled")&&!t.issueIdOrKey?void GH.DetailsView.hideSpinner("load-content-spinner"):(GH.DetailsView._InlineEditor.getIssueAttachmentQuery()&&(t=_.extend(t,GH.DetailsView._InlineEditor.getIssueAttachmentQuery())),GH.DetailsView.currentPromise=b(t),void GH.DetailsView.currentPromise.done(function(t){h(t,i,e)}).always(function(){GH.DetailsView.hideSpinner("load-content-spinner")}))},GH.DetailsView.getExtraTabsAttributes=function(){return GH.Ajax.get({url:"/xboard/issue/details/extraTabsAttributes",data:v()},"extraTabsAttributes")},GH.DetailsView.showSpinner=function(e){AJS.$(".ghx-detail-view-blanket").show().spin("large").attr("spinnerOwnerId",e?e:"")},GH.DetailsView.hideSpinner=function(e){var i=AJS.$(".ghx-detail-view-blanket");e&&i.attr("spinnerOwnerId")!==e||i.hide().spin(!1).attr("spinnerOwnerId","")},GH.DetailsView.getMaxWidth=function(){return Math.max(GH.DetailsView.minWidth,GH.DetailsView._getTotalWidth()/2)},GH.DetailsView.getBacklogElementWidth=function(){return a(AJS.$("#ghx-backlog"))},GH.DetailsView.getWorkPoolElementWidth=function(){return a(AJS.$("#ghx-pool"))},GH.DetailsView.getDetailViewElementWidth=function(){return a(AJS.$("#ghx-detail-view"))},GH.DetailsView._getTotalWidth=function(){var e=GH.DetailsView.getDetailViewElementWidth();return GH.RapidBoard.State.isPlanMode()?e+GH.DetailsView.getBacklogElementWidth():GH.RapidBoard.State.isWorkMode()&&GH.DetailsView._getIsUsingBentoSidebarOnBoard()?e+GH.DetailsView.getWorkPoolElementWidth():e},GH.DetailsView.makeResizable=function(){AJS.$("#ghx-detail-view").agileResizable("destroy");var e;e=!GH.RapidBoard.State.isBacklogRenderingImprovementEnabled()||GH.RapidBoard.State.isPlanMode()?GH.BacklogView.checkBacklogWidth:AJS.$.noop,AJS.$("#ghx-detail-view").agileResizable({handles:{w:AJS.$("#js-sizer")},resize:e,stop:GH.DetailsView.storeWidth,maxWidth:GH.DetailsView.getMaxWidth(),minWidth:GH.DetailsView.minWidth}),G()||GH.DetailsView._getIsUsingBentoSidebarOnBoard()||o.tipsify({selector:"#js-sizer",gravity:"e"})},GH.DetailsView.storeWidth=function(){var e=GH.DetailsView.getDetailViewElementWidth(),i=e<=GH.DetailsView.minWidth?0:e/GH.DetailsView._getTotalWidth();GH.RapidBoard.State.setDetailViewWidth(i);var t=function(e){return e>=GH.DetailsView.minWidth&&e<=500},a=function(e){return e>500&&e<=600},s=function(e){return e>600};GH.DetailsView.triggerAnalyticsEventForAction("resize",{targetWidth:t(e)?"small":a(e)?"medium":s(e)?"large":"",isNewDetailView:G(),width:e})},GH.DetailsView.renderDetailsSingleField=function(e){var i=w.viewData,t=AJS.$(GH.tpl.detailview.renderIssueDetails({issueDetails:i,canClose:GH.DetailsView.opts.canClose,showActionsCog:GH.DetailsView.opts.showActionsCog&&GH.UserData.hasUser()}));D.renderFields(i,t,GH.DetailsView.opts),GH.DetailsView._setIssueElement(t,e)},GH.DetailsView.renderDetails=function(){AJS.$(GH).trigger(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED);var e=w.viewData,i=AJS.$(GH.tpl.detailview.renderIssueDetails({issueDetails:e,canClose:GH.DetailsView.opts.canClose,showActionsCog:GH.DetailsView.opts.showActionsCog&&GH.UserData.hasUser()}));D.renderFields(e,i,GH.DetailsView.opts),GH.DetailsView.registerAllListeners(i),GH.DetailsView._setIssueElement(i),GH.DetailsView.updateSize(),AJS.$(".js-epic-remove").find(".aui-icon-close").addClass("aui-icon aui-icon-small aui-iconfont-remove-label ghx-iconfont"),AJS.$("#gh").removeClass("js-ghx-detail-loading").addClass("js-ghx-detail-loaded"),H.handleDeferredResourceImport(V()&&!GH.DetailsViewScrollTracker,function(){GH.DetailsViewScrollTracker.init({onSelectedNavChanged:GH.DetailsView.selectNavItem}),GH.DetailsViewScrollTracker.afterDetailsViewLoaded({issueId:e.id})}),GH.DetailsView.trigger("after:render"),JIRA.trigger(GH.DetailsView.API_EVENT_DETAIL_VIEW_UPDATED,{issueId:e.id,issueKey:e.key,rapidViewId:GH.DetailsView.rapidViewId,mode:GH.DetailsView.getMode()}),GH.DetailsView._postRenderDetails(i)},GH.DetailsView.registerAllListeners=function(e){if(e.find("#ghx-detail-head .aui-list").length>0){var i=d.create({trigger:e.find("#ghx-detail-head .ghx-actions"),content:e.find("#ghx-detail-head .aui-list"),alignment:AJS.RIGHT}),t=function a(){AJS.$(i).each(function(e,i){i.hide(),i.layerController.$content&&i.layerController.$content.remove()}),AJS.$(GH).unbind(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED,a),AJS.$(GH).unbind(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED,a)};AJS.$(GH).bind(GH.DetailsView.EVENT_DETAIL_VIEW_CLOSED,t),AJS.$(GH).bind(GH.DetailsView.EVENT_DETAIL_VIEW_UPDATE_STARTED,t)}e.find("#ghx-more-actions").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.showOperationsDialog()}),e.find(".js-issueaction-container-cog .js-issueaction").click(function(e){var i=AJS.$(e.currentTarget).attr("id");GH.DetailsView.analytics.trigger(i)}),e.find(".js-create-attachment").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.attachFilesSelectedIssue()}),GH.DetailsView.registerListenersForSubtask(e),e.find(".js-link-issue").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.linkSelectedIssue()}),e.find(".js-remove-issue-from-sprint").click(function(e){e.preventDefault();var i=w.viewData;if(i){var t=i.key;GH.IssueActions.removeIssuesFromSprint(GH.DetailsView.rapidViewId,t)}}),e.find(".js-flag-issue-and-comment").click(function(e){e.preventDefault(),GH.DetailsView.flagCurrentIssue(!0)}),e.find(".js-unflag-issue-and-comment").click(function(e){e.preventDefault(),GH.DetailsView.flagCurrentIssue(!1)}),GH.DetailsView.registerHeaderFieldsListeners(e),e.find("#ghx-detail-head .ghx-actions").click(function(){AJS.trigger("analytics",{name:"gh.issueaction.issuedetail.open.more.actions"})})},GH.DetailsView.registerListenersForSubtask=function(e){e.find(".js-create-subtask").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.createSubtask()}),e.find(".js-edit-subtask").click(function(e){e.preventDefault(),GH.DetailsView.setSubtaskIssueOverwrite(AJS.$(this))&&GH.IssueOperationShortcuts.editSelectedIssue()}),e.find(".js-delete-subtask").click(function(e){e.preventDefault(),GH.DetailsView.setSubtaskIssueOverwrite(AJS.$(this))&&GH.IssueOperationShortcuts.deleteSelectedIssue()})},GH.DetailsView.registerHeaderFieldsListeners=function(e){e.find(".js-log-work").click(function(e){e.preventDefault(),GH.IssueOperationShortcuts.logWorkOnSelectedIssue()})},GH.DetailsView.setSubtaskIssueOverwrite=function(e){var i=e.closest(".js-issue-dropdown"),t=i.attr("data-issue-key"),a=parseInt(i.attr("data-issue-id"),10);return!(!t||!a)&&(GH.IssueOperationShortcuts.setOverrideSelectedIssue({id:a,key:t}),!0)},GH.DetailsView.handleTabSelection=function(e,i){if(0!==i.pane.parents("#ghx-detail-nav").length){var t=i.pane.attr("id");GH.DetailsViewScrollTracker.setSelectedTab(t)}},GH.DetailsView.setTab=function(e){var i=AJS.$("a[href=#"+e+"]");i.length>0&&n.change(i)},GH.DetailsView.renderDetailsHeader=function(){var e=w.viewData,i=AJS.$("#ghx-detail-issue");D.renderDetailsHeaderFields(e,i,GH.DetailsView.opts),GH.DetailsView.registerHeaderFieldsListeners(i),GH.DetailsView.updateSize(),AJS.$("#gh").removeClass("js-ghx-detail-loading").addClass("js-ghx-detail-loaded")},GH.DetailsView.hasCurrentError=function(){var e=AJS.$("#ghx-detail-issue");return e.find(".ghx-error").text().length>0},GH.DetailsView.flagCurrentIssue=function(e){function i(){AJS.$(GH).trigger("issueUpdated",{issueId:t.id,source:"detailView"}),GH.DetailsView.reload()}var t=w.viewData;t&&GH.IssueFlagAndCommentAction.execute(t.key,e,i);var a=e?"gh.issue.ctx.menu.action.flag":"gh.issue.ctx.menu.action.unflag";AJS.trigger("analytics",{name:a,data:{selectedIssueCount:1}})},GH.DetailsView._initInlineEditor=function(){GH.DetailsView._InlineEditor.init({$detailContainer:GH.DetailsView.getContainer(),getRapidViewIdCallback:function(){return GH.DetailsView.rapidViewId},loadIssueDetailCallback:GH.DetailsView.load,getInlineEditableFieldsCallback:function(){var e=w;return e.viewData&&e.viewData.editable?w.getInlineEditableFields():[]},getIssueIdCallback:function(){return w.viewData.id},getIssueKeyCallback:function(){return w.viewData.key},getIssueSprintStatusCallback:function(){return w.viewData.sprint?w.viewData.sprint.state:null}})},GH.DetailsView._postRenderDetails=function(e){GH.DetailsView._InlineEditor.fixUpDetailView(e),GH.DetailsView._InlineEditor.loadIssueToEditor()},GH.DetailsView.getAttachmentViewQuery=function(){return GH.DetailsView._InlineEditor.getIssueAttachmentQuery()},GH.DetailsView.registerListenersForTab=function(e,i){GH.DetailsView._InlineEditor.registerListenersForTab(e,i),"sub_tasks"===e&&GH.DetailsView.registerListenersForSubtask(i)},GH.DetailsView._getIsUsingBentoSidebarOnBoard=function(){var e=require("jira/featureflags/feature-manager"),i=function(){return e.isFeatureEnabled("cbb.heritage")};return i()?GH.DetailsViewOpts.isUsingBentoSidebarOnBoard:GH.DetailsView.opts.isUsingBentoSidebarOnBoard}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-details-field-resources', location = 'jira-agile-module/includes/js/rapid/ui/detail/DetailsView.soy' */
// This file was automatically generated from DetailsView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.detailview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.detailview == 'undefined') { GH.tpl.detailview = {}; }


GH.tpl.detailview.renderIssueDetailsBody = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-detail-head" class="ghx-detail-head js-issue-fields"><div class="ghx-controls">';
  if (opt_data.showActionsCog) {
    var tooltip__soy6 = '' + soy.$$escapeHtml('Actions (Type . to access issue actions)');
    output += aui.buttons.button({extraAttributes: {title: tooltip__soy6}, extraClasses: ['ghx-actions', 'aui-button-compact'], text: '', iconClass: 'ghx-iconfont aui-icon-small aui-iconfont-more', iconText: tooltip__soy6, iconType: 'aui'}) + GH.tpl.detailview.renderIssueOperationsForCog(opt_data);
  }
  output += ((opt_data.canClose) ? '<div class="ghx-detail-close js-detailclose" title="' + soy.$$escapeHtml('Close detail ( T )') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-close-dialog">' + soy.$$escapeHtml('Close detail ( T )') + '</span></div>' : '') + '</div><div class="ghx-group"><span class="ghx-project-avatar"><img src="' + soy.$$escapeHtml(opt_data.issueDetails.projectAvatarUrl) + '" title="' + soy.$$escapeHtml(opt_data.issueDetails.projectName) + '" /></span><span id="js-sizer" class="ghx-sizer ui-resizable-handle ui-resizable-w" data-tooltip="' + soy.$$escapeHtml('Resize Detail View') + '"><span class="ghx-icon ghx-icon-sizer"></span></span><div class="ghx-key-group"><div class="ghx-project">' + soy.$$escapeHtml(opt_data.issueDetails.projectName) + '</div><div class="ghx-key js-view-in-jira"></div></div><div class="ghx-detail-summary"></div></div>' + GH.tpl.detailview.renderStatisticGroup(null) + '</div><div id="ghx-detail-nav" class="ghx-detail-nav js-issue-fields"></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetailsBody.soyTemplateName = 'GH.tpl.detailview.renderIssueDetailsBody';
}


GH.tpl.detailview.renderLogWorkTrigger = function(opt_data, opt_ignored) {
  return '<dl id="ghx-log-work-container"><dt class="ghx-detail-term"></dt><dd class="ghx-detail-description"><a role="button" class="ghx-trigger js-log-work">' + soy.$$escapeHtml('Log work') + '</a></dd></dl>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderLogWorkTrigger.soyTemplateName = 'GH.tpl.detailview.renderLogWorkTrigger';
}


GH.tpl.detailview.renderIssueOperationsForCog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list hidden js-issueaction-container-cog" data-issuekey="' + soy.$$escapeHtml(opt_data.issueDetails.key) + '">';
  var sectionList43 = opt_data.issueDetails.operations.filteredSections;
  var sectionListLen43 = sectionList43.length;
  for (var sectionIndex43 = 0; sectionIndex43 < sectionListLen43; sectionIndex43++) {
    var sectionData43 = sectionList43[sectionIndex43];
    output += '<ul class="aui-list-section ' + ((sectionIndex43 == 0) ? 'aui-first' : '') + '">';
    var operationList49 = sectionData43.operations;
    var operationListLen49 = operationList49.length;
    for (var operationIndex49 = 0; operationIndex49 < operationListLen49; operationIndex49++) {
      var operationData49 = operationList49[operationIndex49];
      output += '<li class="aui-list-item"><a id="' + soy.$$escapeHtml(operationData49.id) + '" title="' + soy.$$escapeHtml(operationData49.title) + '" class="aui-list-item-link js-issueaction ' + soy.$$escapeHtml(operationData49.styleClass) + '" href="' + soy.$$escapeHtml(operationData49.url) + '" >' + soy.$$escapeHtml(operationData49.label) + '</a></li>';
    }
    output += '</ul>';
  }
  output += '<ul class="aui-list-section aui-last"><li class="aui-list-item"><a id="ghx-more-actions" title="' + soy.$$escapeHtml('More Actions\u2026') + '" class="aui-list-item-link js-issueaction" href="#" >' + soy.$$escapeHtml('More Actions\u2026') + '</a></li></ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueOperationsForCog.soyTemplateName = 'GH.tpl.detailview.renderIssueOperationsForCog';
}


GH.tpl.detailview.renderTabSection = function(opt_data, opt_ignored) {
  return '<div class="ghx-tab-section">' + ((opt_data.renderTitle) ? '<h4>' + soy.$$escapeHtml(opt_data.title) + '</h4>' : '') + '<div class="ghx-tab-section-content"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabSection.soyTemplateName = 'GH.tpl.detailview.renderTabSection';
}


GH.tpl.detailview.renderTabTitle = function(opt_data, opt_ignored) {
  return '<div class="ghx-header"><h3>' + soy.$$escapeHtml(opt_data.tabTitle) + '</h3></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabTitle.soyTemplateName = 'GH.tpl.detailview.renderTabTitle';
}


GH.tpl.detailview.renderIssueLink = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.issueKey) + '" title="' + soy.$$escapeHtml('View this issue') + '">' + soy.$$escapeHtml(opt_data.issueKey) + '</a>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueLink.soyTemplateName = 'GH.tpl.detailview.renderIssueLink';
}


GH.tpl.detailview.renderTextView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? soy.$$escapeHtml(opt_data.field.text) : '<span class="ghx-fa">' + ((opt_data.field.type == 'number') ? '&nbsp;' : soy.$$escapeHtml('None')) + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextView.soyTemplateName = 'GH.tpl.detailview.renderTextView';
}


GH.tpl.detailview.renderTextEstimateView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? soy.$$escapeHtml(opt_data.field.text) : '<span class="ghx-fa">' + soy.$$escapeHtml('Unestimated') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTextEstimateView.soyTemplateName = 'GH.tpl.detailview.renderTextEstimateView';
}


GH.tpl.detailview.renderHtmlView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.html) ? soy.$$filterNoAutoescape(opt_data.field.html) : '<span class="ghx-fa">' + soy.$$escapeHtml('None') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderHtmlView.soyTemplateName = 'GH.tpl.detailview.renderHtmlView';
}


GH.tpl.detailview.renderDescriptionHtmlView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.html) ? soy.$$filterNoAutoescape(opt_data.field.html) : '<span class="ghx-fa">' + soy.$$escapeHtml('There is no description content') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDescriptionHtmlView.soyTemplateName = 'GH.tpl.detailview.renderDescriptionHtmlView';
}


GH.tpl.detailview.renderDateView = function(opt_data, opt_ignored) {
  return '' + ((opt_data.field.text) ? GH.tpl.detailview.renderDate({value: opt_data.field.text, displayValue: opt_data.field.html}) : '<span class="ghx-fa">' + soy.$$escapeHtml('None') + '</span>');
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDateView.soyTemplateName = 'GH.tpl.detailview.renderDateView';
}


GH.tpl.detailview.renderDate = function(opt_data, opt_ignored) {
  return '<span class="date user-tz"><time datetime="' + soy.$$escapeHtml(opt_data.value) + '" title="' + soy.$$escapeHtml(opt_data.displayValue) + '">' + soy.$$escapeHtml(opt_data.displayValue) + '</time></span>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderDate.soyTemplateName = 'GH.tpl.detailview.renderDate';
}


GH.tpl.detailview.renderSubtasksEmpty = function(opt_data, opt_ignored) {
  return '<p class="ghx-fa">' + soy.$$escapeHtml('There are no sub-tasks') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderSubtasksEmpty.soyTemplateName = 'GH.tpl.detailview.renderSubtasksEmpty';
}


GH.tpl.detailview.renderIssueDetailsSkeleton = function(opt_data, opt_ignored) {
  return '<div id="ghx-detail-contents" class="ghx-detail-contents issue-container"><div class="ghx-detail-view-blanket"></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetailsSkeleton.soyTemplateName = 'GH.tpl.detailview.renderIssueDetailsSkeleton';
}


GH.tpl.detailview.renderIssueDetails = function(opt_data, opt_ignored) {
  return '<div id="ghx-detail-issue" class="ghx-detail-issue issue-body-content" data-issueid="' + soy.$$escapeHtml(opt_data.issueDetails.id) + '" data-issuekey="' + soy.$$escapeHtml(opt_data.issueDetails.key) + '">' + GH.tpl.detailview.renderIssueDetailsBody(opt_data) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderIssueDetails.soyTemplateName = 'GH.tpl.detailview.renderIssueDetails';
}


GH.tpl.detailview.renderStatisticGroup = function(opt_data, opt_ignored) {
  return '<div class="ghx-statistic-group"><div class="ghx-detail-statistic ghx-estimate js-estimate"></div><div class="ghx-remaining-group"><div class="ghx-detail-statistic ghx-remainings js-remainings"></div>' + GH.tpl.detailview.renderLogWorkTrigger(null) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderStatisticGroup.soyTemplateName = 'GH.tpl.detailview.renderStatisticGroup';
}


GH.tpl.detailview.renderAggregateRemainingEstimateTooltip = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.data) {
    output += '<div class="ghx-aggregatetimeestimate-tooltip">';
    var rowList172 = opt_data.data;
    var rowListLen172 = rowList172.length;
    for (var rowIndex172 = 0; rowIndex172 < rowListLen172; rowIndex172++) {
      var rowData172 = rowList172[rowIndex172];
      output += (rowData172) ? '<div><span>' + soy.$$escapeHtml(rowData172.label) + ': </span><span>' + soy.$$escapeHtml(rowData172.value ? rowData172.value : '-') + '</span></div>' : '';
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderAggregateRemainingEstimateTooltip.soyTemplateName = 'GH.tpl.detailview.renderAggregateRemainingEstimateTooltip';
}


GH.tpl.detailview.renderTabMenuStructure = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-detail-nav-menu"><ul>';
  var tabList184 = opt_data.tabs;
  var tabListLen184 = tabList184.length;
  for (var tabIndex184 = 0; tabIndex184 < tabListLen184; tabIndex184++) {
    var tabData184 = tabList184[tabIndex184];
    output += GH.tpl.detailview.renderTabNavigation({tab: tabData184});
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabMenuStructure.soyTemplateName = 'GH.tpl.detailview.renderTabMenuStructure';
}


GH.tpl.detailview.renderTabNavigation = function(opt_data, opt_ignored) {
  var output = '';
  var sectionList190 = opt_data.tab.sections;
  var sectionListLen190 = sectionList190.length;
  for (var sectionIndex190 = 0; sectionIndex190 < sectionListLen190; sectionIndex190++) {
    var sectionData190 = sectionList190[sectionIndex190];
    output += (sectionData190.iconFont || sectionData190.iconURL) ? '<li id="' + soy.$$escapeHtml(opt_data.tab.tabId) + '-nav" class="ghx-detail-nav-item ' + ((sectionData190.isLazyLoading) ? 'disabled' : '') + '"><a href="#' + soy.$$escapeHtml(sectionData190.id) + '" data-tooltip="' + ((sectionData190.toolTip) ? soy.$$escapeHtml(sectionData190.toolTip) : soy.$$escapeHtml(sectionData190.title)) + '">' + ((sectionData190.thirdPartyTab) ? (sectionData190.iconFont) ? '<span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(sectionData190.iconFont) + '">' + soy.$$escapeHtml(sectionData190.title) + '</span>' : '<span class="ghx-icon ghx-icon-thirdparty" style="background-image:url(\'' + soy.$$escapeHtml(sectionData190.iconURL) + '\');">' + soy.$$escapeHtml(sectionData190.title) + '</span>' : '<span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-' + soy.$$escapeHtml(sectionData190.iconFont) + '">' + soy.$$escapeHtml(sectionData190.title) + '</span>') + ((sectionData190.hasTitleCount && sectionData190.titleCount > 0) ? '<aui-badge>' + soy.$$escapeHtml(sectionData190.titleCount) + '</aui-badge>' : '') + '</a></li>' : '';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabNavigation.soyTemplateName = 'GH.tpl.detailview.renderTabNavigation';
}


GH.tpl.detailview.renderTabs = function(opt_data, opt_ignored) {
  var output = '<div id="js-detail-nav-content" class="ghx-detail-nav-content">';
  var tabList238 = opt_data.tabs;
  var tabListLen238 = tabList238.length;
  for (var tabIndex238 = 0; tabIndex238 < tabListLen238; tabIndex238++) {
    var tabData238 = tabList238[tabIndex238];
    output += '<div id="' + soy.$$escapeHtml(tabData238.tabId) + '">';
    var sectionList242 = tabData238.sections;
    var sectionListLen242 = sectionList242.length;
    for (var sectionIndex242 = 0; sectionIndex242 < sectionListLen242; sectionIndex242++) {
      var sectionData242 = sectionList242[sectionIndex242];
      output += '<div id="' + soy.$$escapeHtml(sectionData242.id) + '" class="ghx-detail-section"></div>';
    }
    output += '</div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderTabs.soyTemplateName = 'GH.tpl.detailview.renderTabs';
}


GH.tpl.detailview.renderFieldStructure = function(opt_data, opt_ignored) {
  var output = '';
  var isAgileInlineEdit__soy251 = opt_data.field.id == 'timeoriginalestimate' || opt_data.field.id == 'timeestimate';
  output += '<dl class="ghx-detail-list"><dt class="ghx-detail-term ghx-fieldtype-' + soy.$$escapeHtml(opt_data.field.type) + ' ghx-fieldname-' + soy.$$escapeHtml(opt_data.field.id) + '"' + ((opt_data.field.dataTooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.field.dataTooltip) + '"' : 'title="' + soy.$$escapeHtml(opt_data.field.tooltip ? opt_data.field.tooltip : opt_data.field.label) + '"') + '>' + soy.$$escapeHtml(opt_data.field.label) + ':</dt><dd id="' + soy.$$escapeHtml(opt_data.field.id) + '-val" class="ghx-detail-description ghx-fieldtype-' + soy.$$escapeHtml(opt_data.field.type) + ' ghx-fieldname-' + soy.$$escapeHtml(opt_data.field.id) + '"' + ((opt_data.issueDetails.editable && opt_data.field.editable) ? 'tabindex="0"' : '') + ' data-field-id="' + soy.$$escapeHtml(opt_data.field.id) + '"' + ((opt_data.field.dataTooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.field.dataTooltip) + '"' : 'title="' + soy.$$escapeHtml(opt_data.field.tooltip ? opt_data.field.tooltip : opt_data.field.label) + '"') + '></dd></dl>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderFieldStructure.soyTemplateName = 'GH.tpl.detailview.renderFieldStructure';
}


GH.tpl.detailview.renderSubtasks = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-container">';
  if (opt_data.subtasks.length == 0) {
    output += GH.tpl.detailview.renderSubtasksEmpty(null);
  } else {
    var issueList297 = opt_data.subtasks;
    var issueListLen297 = issueList297.length;
    for (var issueIndex297 = 0; issueIndex297 < issueListLen297; issueIndex297++) {
      var issueData297 = issueList297[issueIndex297];
      output += '<div class="ghx-subtask js-subtask-issue' + ((issueData297.done) ? ' ghx-done' : '') + '"><div class="ghx-top-row">' + ((issueData297.type && issueData297.type.url) ? '<span class="ghx-type" title="' + soy.$$escapeHtml(issueData297.type.name) + '"><img src="' + soy.$$escapeHtml(issueData297.type.url) + '"></span>' : '') + '<span class="ghx-key"><a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(issueData297.key) + '" title="' + soy.$$escapeHtml('View this issue') + '" class="js-detailview ghx-key">' + soy.$$escapeHtml(issueData297.key) + '</a></span><span class="ghx-status ' + ((! issueData297.status.statusCategory) ? 'ghx-center' : '') + '">' + GH.tpl.status.renderIcon({status: issueData297.status, maxWidth: 'short'}) + '</span>' + ((opt_data.showTrackingField) ? '<span class="ghx-estimate ghx-right ghx-nowrap"><div title="' + soy.$$escapeHtml('Remaining Estimate') + '">' + GH.tpl.detailview.renderTextView({field: issueData297.trackingField}) + '</div></span>' : '') + '<span class="ghx-sub-avatar">' + ((issueData297.assignee) ? '<span id="issue_summary_assignee_admin" class="user-hover" rel="' + soy.$$escapeHtml(issueData297.assignee.id) + '">' + ((! issueData297.assignee.avatar) ? '<a class="user-hover ghx-sub-avatar" rel="' + soy.$$escapeHtml(issueData297.assignee.id) + '" href="' + soy.$$escapeHtml("") + '/secure/ViewProfile.jspa?name=' + soy.$$escapeHtml(issueData297.assignee.id) + '">' + soy.$$escapeHtml(issueData297.assignee.name) + '</a>' : '<img class="user-hover ghx-sub-avatar" src="' + soy.$$escapeHtml(issueData297.assignee.avatar) + '"' + ((issueData297.assignee.name) ? 'alt="' + soy.$$escapeHtml(issueData297.assignee.name) + '" title="' + soy.$$escapeHtml('Assignee') + ': ' + soy.$$escapeHtml(issueData297.assignee.name) + '"' : 'alt=""') + '>') + '</span>' : '') + '</span>' + ((opt_data.showActionsColumn) ? '<button href="#js-issue-dropdown-' + soy.$$escapeHtml(issueData297.id) + '" aria-owns="js-issue-dropdown-' + soy.$$escapeHtml(issueData297.id) + '" aria-haspopup="true"  class="aui-button ghx-actions aui-button-subtle aui-button-compact aui-dropdown2-trigger aui-dropdown2-trigger-arrowless"><span class="aui-icon ghx-iconfont aui-icon-small aui-iconfont-more"></span></button><!-- Dropdown --><div id="js-issue-dropdown-' + soy.$$escapeHtml(issueData297.id) + '" class="js-issue-dropdown aui-style-default aui-dropdown2" data-issue-key="' + soy.$$escapeHtml(issueData297.key) + '" data-issue-id="' + soy.$$escapeHtml(issueData297.id) + '"><ul class="aui-list-truncate">' + ((issueData297.canEdit) ? '<li><a class="js-edit-subtask" title="' + soy.$$escapeHtml('Edit') + '">' + soy.$$escapeHtml('Edit') + '</a></li>' : '') + ((issueData297.canDelete) ? '<li><a class="js-delete-subtask" title="' + soy.$$escapeHtml('Delete') + '">' + soy.$$escapeHtml('Delete') + '</a></li>' : '') + '</ul></div>' : '') + '</div><div class="ghx-summary" title="' + soy.$$escapeHtml('Summary') + '">' + soy.$$escapeHtml(issueData297.summary) + '</div></div>';
    }
    output += (opt_data.subtasks.length > 0 && opt_data.showTrackingField && opt_data.trackingFieldSum) ? '<div class="ghx-estimate-sum ' + soy.$$escapeHtml(opt_data.showActionsColumn ? 'ghx-actions-padding' : '') + ' ghx-nowrap" title="' + soy.$$escapeHtml('Remaining sum') + '">&Sigma; ' + soy.$$escapeHtml(opt_data.trackingFieldSum) + '</div>' : '';
  }
  output += '</div>' + ((opt_data.canCreateSubtask && opt_data.subtasks.length == 0) ? '<div class="ghx-controls"><button class="aui-button js-create-subtask">' + soy.$$escapeHtml('Create Sub-Task') + '</button></div>' : '');
  return output;
};
if (goog.DEBUG) {
  GH.tpl.detailview.renderSubtasks.soyTemplateName = 'GH.tpl.detailview.renderSubtasks';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-dialog-resources', location = 'jira-agile-module/includes/js/gh-IssueActionsDialog.js' */
define("jira-agile/dialog/issue-actions",["jira/ajs/select/queryable-dropdown-select","jira/dialog/dialog","jira/ajs/list/group-descriptor","jira/ajs/list/item-descriptor","jira/ajs/ajax/smart-ajax","jira/focus/set-focus","jquery"],function(t,e,i,s,n,a,o){var r="unified-attach-file-wrapper",d=JIRA.IssueNavigator,l=JIRA.Issue;return e.extend({_getDefaultOptions:function(){return o.extend(this._super(),{cached:!1,id:"issue-actions-dialog",widthClass:"small"})},_setContent:function(t,i){if(t?this._super(t,i):this._super(o(["<form id='issue-actions-dialog-form' class='aui ajs-dirty-warning-exempt issue-actions-dialog-form'>","<div class='form-body'>","<div id='issueactions-suggestions' class='aui-list'></div>","<div class='description'>","Begin typing for available operations or press down to see all","</div>","</div>","</form>"].join("")),!0),e.current===this){var s=new a.FocusConfiguration;s.context=this.get$popup()[0],s.parentElementSelectors=[".form-body"],a.pushConfiguration(s),a.triggerFocus()}},_attachFileHandler:function(t){t.preventDefault(),this.hide(),o("#attach-file").click()},_formatActionsResponse:function(t){function e(t){return GH.RapidBoard.getCurrentPageReturnUrl()}function n(n){var a=new i({label:"Workflow"});return o(n).each(function(){a.addItem(new s({href:contextPath+"/secure/WorkflowUIDispatcher.jspa?id={0}&action="+this.action+"&atl_token="+t.atlToken+"&returnUrl="+e(t.key),label:this.name,styleClass:"issueaction-workflow-transition"}))}),a}function a(n){var a=new i({label:"Actions"});return o(n).each(function(){var i=e(t.key),n=this.name,o=require("jira-agile/rapid/ui/detail/details-model");o.patchRankOperationName&&(n=o.patchRankOperationName(this.styleClass,this.name));var d=this.url.indexOf("?")===-1?"?":"&",l=this.url+d+"returnUrl="+i,c=this.styleClass;"unified-attach-file"===this.styleClass&&(c=r),a.addItem(new s({href:l,label:n,styleClass:c}))}),a}var d=[];return t&&(t.actions&&0!==t.actions.length&&d.push(n(t.actions)),t.operations&&0!==t.operations.length&&d.push(a(t.operations))),d},decorateContent:function(){var e=this,i=this,s=d.getSelectedIssueKey(),a=l.getIssueId()||d.getSelectedIssueId();s?this.addHeading("Operations"+": <span>"+s+"</span>"):this.addHeading("Operations"),this.queryControl=new t({id:"issueactions",element:this.$content.find("#issueactions-suggestions"),ajaxOptions:{minQueryLength:1,dataType:"json",url:AJS.format(contextPath+"/rest/api/1.0/issues/{0}/ActionsAndOperations?atl_token={1}",a,atl_token()),formatResponse:function(t){return e._formatActionsResponse(t)}},showDropdownButton:!0,loadOnInit:!0}),this.queryControl._handleServerError=function(t){var e=n.buildSimpleErrorContent(t),s=401===t.status?"warning":"error";i._setContent(o('<div class="ajaxerror"><div class="aui-message '+s+'"><p>'+e+"</p></div></div>"),!1),i._addCloseLink()},this._attachFileHandler=this._attachFileHandler.bind(this),o("body").on("click","."+r,this._attachFileHandler),this.timeoutId=void 0,this._addCloseLink()},_addCloseLink:function(){var t,e,i,s=this;e=o('<div class="buttons-container form-footer"></div>').appendTo(this.get$popupContent()),i=o('<div class="buttons"/>').appendTo(e),t=o("<a href='#' class='cancel' id='aui-dialog-close'>"+"Close"+"</a>"),t.appendTo(i,this.get$popupContent()).click(function(t){s.hide(),t.preventDefault()}),this.get$popupContent().append(e)},hide:function(t){return this._super(t)!==!1&&(o("body").off("click","."+r,this._attachFileHandler),void a.popConfiguration())}})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-dialog-resources', location = 'jira-agile-module/includes/js/gh-LinkIssueDialog.js' */
!function(){"use strict";var e=require("jquery"),t=require("jira-agile/dialog/issue-dialog-util");GH.LinkIssueDialog={},GH.LinkIssueDialog.create=function(){function n(t,n){var i=!1;return e.each(n,function(e,n){if(n.id===t)return n.isSelected=!0,i=!0,!1}),i||(n[0].isSelected=!0),n}function i(t){var n=e.Deferred();return JIRA.SmartAjax.makeRequest({url:contextPath+"/rest/viewIssue/1/remoteIssueLink/linkType?issueId="+t,complete:function(e,t,i){i.successful?n.resolve(i.data):n.reject(JIRA.SmartAjax.buildDialogErrorContent(i))}}),n.promise()}function s(t){var n=e.Deferred(),i=JIRA.Dialogs.getDefaultAjaxOptions.call(t);return i.complete=function(e,t,i){i.successful?n.resolve(i.data):n.reject(JIRA.SmartAjax.buildDialogErrorContent(i))},JIRA.SmartAjax.makeRequest(i),n.promise()}function u(e){return e.$activeTrigger.attr("id")}return function(r,o,a,l){return a=a||t.storeCurrentIssueIdOnSucessfulSubmit,new GH.FormDialog({id:"link-issue-dialog",trigger:r,onSuccessfulSubmit:a,issueMsg:"thanks_issue_linked",widthClass:"large",stacked:!0,content:function(t){var r=this,a=l||JIRA.Issue.getIssueId()||JIRA.IssueNavigator.getSelectedIssueId();s(r).done(function(s){i(a).done(function(i){var a=o||u(r);i=n(a,i),t(JIRA.Templates.LinkIssue.dialog({linkTypes:i,tabContent:s})),e.each(i,function(t,n){var i;n.isSelected===!0&&(i="[name='"+n.focusedFieldName+"']",0===e(i).length&&(i="#"+n.id),r._focusFirstField(i))})}).fail(function(e){t(e)})}).fail(function(e){t(e)})},formatSubmitResponseContent:function(e){return this.get$popupContent().find(".dialog-pane").html(e),this.get$popupContent().html()},onContentRefresh:function(){this.bindAnchorsToDialog(this.get$popupContent().find(".dialog-menu-item "))}})}}()}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-dialog-resources', location = 'jira-agile-module/includes/js/gh-InitDialogs.js' */
AJS.$(function(){require(["jira/dialog/dialog-register","jira-agile/dialog/issue-actions","jira-agile/dialog/labels-dialog","jira-agile/rapid/ui/bento/bento-features","jira/dialog/screenshot-window","jira/dialog/form-dialog","jira/dialog/dialog","jquery","aui/tabs"],function(e,s,t,i,o,n,a,r,u){function l(e){}var c,d=JIRA.IssueNavigator,g=JIRA.Issue,f=["deleteIssueLink","editComment","deleteComment"];for(var h in e)if(e.hasOwnProperty(h)){if(f.indexOf(h)>=0)continue;c=e[h],c._unassignEvents&&c.options.trigger&&c._unassignEvents("trigger",c.options.trigger)}r(document).undelegate("a.issueaction-workflow-transition","click"),r("a.issueaction-attach-screenshot").die("click"),e.keyboardShortcuts=new n({id:"keyboard-shortcuts-dialog",trigger:"#keyshortscuthelp",widthClass:"large",onContentRefresh:function(){var e=this.get$popupContent();r("a.submit-link",e).click(function(s){s.preventDefault(),r("form",e).submit()})}}),document.getElementById("dashboard")?(e.deleteDashboard=new n({type:"ajax"}),r(document).delegate("#delete_dashboard","click",function(s){s.stopPropagation(),s.preventDefault(),e.deleteDashboard.$activeTrigger=r("#delete_dashboard"),e.deleteDashboard.init({type:"ajax",id:"delete-dshboard",ajaxOptions:{url:e.deleteDashboard.$activeTrigger.attr("href")},targetUrl:"input[name=targetUrl]"}),e.deleteDashboard.show()})):(e.assignToMe=new GH.FormDialog({id:"assign-to-me-link-handler",trigger:"a.issueaction-assign-to-me",ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned"}),e.linkIssue=GH.LinkIssueDialog.create("a.issueaction-link-issue"),e.deleteIssue=new GH.FormDialog({id:"delete-issue-dialog",trigger:"a.issueaction-delete-issue",targetUrl:"#delete-issue-return-url",ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_deleted",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),e.cloneIssue=new GH.FormDialog({id:"clone-issue-dialog",trigger:"a.issueaction-clone-issue",handleRedirect:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_cloned",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),e.assignIssue=new GH.FormDialog({id:"assign-dialog",trigger:"a.issueaction-assign-issue",ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_assigned",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),e.logWork=new GH.FormDialog({id:"log-work-dialog",trigger:"a.issueaction-log-work",handleRedirect:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_worklogged",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow();this.get$popupContent()}}),e.attachFile=new GH.FormDialog({id:"attach-file-dialog",trigger:"a.issueaction-attach-file",handleRedirect:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),i.isBentoEnabled()||(e.attachScreenshotDialog=new GH.FormDialog({id:"attach-screenshot-dialog",trigger:"a.issueaction-attach-screenshot-html5",handleRedirect:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_attached",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}})),e.attachScreenshot=new o({id:"attach-screenshot-window",trigger:"a.issueaction-attach-screenshot"}),e.comment=new GH.FormDialog({id:"comment-add-dialog",trigger:"a.issueaction-comment-issue",handleRedirect:!0,widthClass:"large",ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_commented",onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),e.editLabels=new t({id:"edit-labels-dialog",trigger:"a.issueaction-edit-labels,a.edit-labels",autoClose:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_labelled",labelsProvider:l,onContentRefresh:function(){r(".overflow-ellipsis").textOverflow()}}),e.issueActions=new s,AJS.namespace("jira.app.issueActionsPopup",null,e.issueActions),r(document).delegate("a.issueaction-workflow-transition","click",function(s){s.preventDefault();var t=/action=(\d+)/.exec(this.href.slice(this.href.indexOf("?")));if(t){var i="workflow-transition-"+t[1]+"-dialog",o=r(this);e[i]||(e[i]=new GH.FormDialog({id:i,url:o.attr("href"),transitionActionId:t[1],trigger:'a[href*="'+t[0]+'"].issueaction-workflow-transition',widthClass:"large",handleRedirect:!0,ajaxOptions:e.getDefaultAjaxOptions,onSuccessfulSubmit:e.storeCurrentIssueIdOnSucessfulSubmit,issueMsg:"thanks_issue_transitioned",onContentRefresh:function(){u.setup()}}),e[i].show())}}),r.each(e,function(e,s){s instanceof a&&r(s).bind("beforeShow",function(){if("keyboardShortcuts"!==e)return d.isRowSelected()||void 0!==g.getIssueId()})}))})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ui/epic/EpicConfig.js' */
GH.EpicConfig={},GH.EpicConfig.epicConfig=void 0,GH.EpicConfig.setEpicConfig=function(i){GH.EpicConfig.epicConfig=i},GH.EpicConfig.getStoryIssueTypeId=function(){return GH.EpicConfig.epicConfig.storyIssueTypeId},GH.EpicConfig.getStoryIssueTypeName=function(){return GH.EpicConfig.epicConfig.storyIssueTypeName},GH.EpicConfig.getEpicIssueTypeId=function(){return GH.EpicConfig.epicConfig.epicIssueTypeId},GH.EpicConfig.getEpicIssueTypeName=function(){return GH.EpicConfig.epicConfig.epicIssueTypeName},GH.EpicConfig.getEpicLabelFieldId=function(){return GH.EpicConfig.epicConfig.epicLabelFieldId},GH.EpicConfig.getEpicStatusFieldId=function(){return GH.EpicConfig.epicConfig.epicStatusFieldId},GH.EpicConfig.getEpicStatusDoneValueId=function(){return GH.EpicConfig.epicConfig.epicStatusDoneValueId},GH.EpicConfig.getEpicLinkFieldName=function(){return GH.EpicConfig.epicConfig.epicLinkFieldName},GH.EpicConfig.getEpicLinkFieldId=function(){return GH.EpicConfig.epicConfig.epicLinkFieldId},GH.EpicConfig.canMarkEpicAsDone=function(){return!_.isUndefined(GH.EpicConfig.epicConfig.epicStatusDoneValueId)},GH.EpicConfig.getEpicColorFieldId=function(){return GH.EpicConfig.epicConfig.epicColorFieldId},GH.EpicConfig.getEpicNameString=function(i,e){return i||"unlabelled"+"-"+e};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ui/BoardHeader.js' */
!function(){var a=require("jira/container-api");GH.RapidBoard.BoardHeader={},GH.RapidBoard.BoardHeader.init=function(){GH.RapidBoard.BoardHeader._originalPageTitle=document.title},GH.RapidBoard.BoardHeader.update=function(a){GH.RapidBoard.BoardHeader.updatePageTitle(a)},GH.RapidBoard.BoardHeader.updatePageTitle=function(e){var d=e.name+" - "+GH.RapidBoard.BoardHeader._originalPageTitle;a.titleChange(d)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ui/ViewController.js' */
!function(){"use strict";var e=function(e){try{return require(e)}catch(r){return}};GH.RapidBoard.ViewController=new GH.Events;var r=require("jira/util/safe-logger"),o=require("jira-agile/rapid/analytics-tracker"),t=require("jira/analytics/web-client"),i=require("jira/util/data/meta"),a=require("jira-agile/tooltip"),n=require("jira-agile/rapid/const/PageMode"),l=require("jira-agile/rapid/work/quick-filters-bridge"),d=require("jira/featureflags/feature-manager"),s=function(){return d.isFeatureEnabled("cbb.heritage")},p=e("jira-agile/rapid/ui/SPConfigController"),c=require("jira-agile/rapid/ui/share-button/api"),u=require("jira/util/top-same-origin-window"),g=require("jira-agile/rapid/ui/automation-menu/api"),h=require("jira-agile/rapid/ui/insights/api"),H=require("jira-agile/rapid/deferred-resources-loader"),G=require("jira-agile/rapid/wrm-spa-utils"),R=require("jira-agile/rapid/ui/refresh-board-button/api"),f=require("jira-agile/rapid/ui/megaphone-button/api"),w=require("jira-agile/rapid/trace-utils"),C=function(){return d.isFeatureEnabled("jsw.classic.keto")},S=function(){return d.isFeatureEnabled("jsw.classic.log.legacy.fe.rapidboard.errors")},b=function(){return d.isFeatureEnabled("jira.insights.button.insight-button-selected-enabled")},B=d.getFlagResultObject("jsw.classic.rapid.board.refresh.button").value,m=d.getFlagResultObject("jsw-classic-work-data-poller-backoff").value,k=function(){return d.isFeatureEnabled("jsw.classic.remove.allData.board.settings")},V=function(){return d.isFeatureEnabled("jsw_classic_boards_experimental_loading_skeleton_dpgxz")};GH.RapidBoard.ViewController.analytics=new o("gh.assignedWork.tooltip"),GH.RapidBoard.ViewController.hasSideBar=!1,GH.RapidBoard.ViewController.hasSubnavigator=!1,GH.RapidBoard.ViewController.insightsOpen=!1,GH.RapidBoard.ViewController.shouldShowSubnavigator=function(){return GH.RapidBoard.ViewController.hasSideBar&&GH.RapidBoard.ViewController.hasSubnavigator},GH.RapidBoard.ViewController.init=function(){function e(e){var r=e.$tip,o=r.children(".tipsy-inner").get(0);o.scrollHeight>o.clientHeight&&r.addClass("ghx-extra-field-tipsy-truncated")}GH.RapidBoard.ViewController.hasSideBar=JIRA.API.getSidebar&&i.get("sidebar-enabled"),GH.RapidBoard.ViewController.hasSubnavigator=JIRA.Projects&&"function"==typeof JIRA.Projects.Subnavigator;var r=function(){return d.isFeatureEnabled("cbb.heritage")};H.handleDeferredResourceImport(r()&&!GH.DetailsView,function(){GH.Dialog.registerDialog(".js-view-find",GH.Dialog.FindView.openFindExistingViewDialog)}),AJS.$("#ghx-rabid").css({display:"none"}),AJS.$("#ghx-operations").append(GH.tpl.viewcontroller.renderOperationsBar()),[{selector:".ghx-avatar-img[data-tooltip]",className:"ghx-tipsy-left ghx-avatar-tipsy",html:!0},{selector:".ghx-issue [data-tooltip]:not(.ghx-summary)"},{selector:".ghx-issue .ghx-summary[data-tooltip]"},{selector:".ghx-backlog .ghx-summary[data-tooltip]"},{selector:".ghx-swimlane .ghx-heading[data-tooltip]"}].forEach(function(e){a.tipsify(_.defaults(e,{className:"ghx-tipsy-left",context:document,html:!1})).on("show",function(e){e.$element.closest(".ghx-assigned-work-stats").length&&GH.RapidBoard.ViewController.analytics.trigger("show")})});var o=a.tipsify({selector:".js-issue:not(.ui-sortable-helper) .ghx-extra-field",context:document,html:!0,className:"ghx-extra-field-tipsy ghx-tipsy-left"});if(o.on("show",e),GH.RapidBoard.ViewController.sidebarController=new GH.RapidBoard.SidebarController,GH.RapidBoard.ViewController.initSidebarActions(),AJS.$(GH).bind(GH.RapidBoard.UrlState.HISTORY_CHANGED,GH.RapidBoard.ViewController.updateModeUrls),GH.IssueOperationShortcuts.init(),H.handleDeferredResourceImport(s()&&!GH.DetailsView,function(){GH.DetailsView.init()}),GH.PresentationMode.init(),GH.RapidBoard.State.isKanbanBoard()){var t;H.handleDeferredResourceImport(C()&&GH.RapidBoard.State.getMode()===n.PLAN||GH.RapidBoard.State.getMode()===n.WORK,function(){t=require("jira-agile/rapid/ui/kanplan/kanplan-acknowledge"),t.init()})}if(AJS.$(GH).bind(GH.Layout.EVENT_DELAYED_RESIZE,GH.RapidBoard.ViewController.handleResizeEvent),AJS.$(document).on("aui-message-close",GH.RapidBoard.ViewController.handleResizeEvent),AJS.$(window).on("confluence.header-resized",GH.RapidBoard.ViewController.handleResizeEvent),GH.RapidBoard.ViewController.handleResizeEvent(),AJS.$(document).on("click",".manage-sprint-permission-help",function(e){e.preventDefault(),window.open({"url":"https://confluence.atlassian.com/display/AdminJIRACloud/Managing+project+permissions","isLocal":false}.url,"_blank")}),S())try{A()}catch(l){}};var A=function(){window.addEventListener("error",function(e){try{(n&&(GH.RapidBoard.State.getMode()===n.PLAN||GH.RapidBoard.State.getMode()===n.WORK)||GH.RapidBoard.State.isConfigOpen())&&r.safeError("classic.rapidboard",e.error.message||"Failed to retrieve error message",{error:e.error.stack,mode:GH.RapidBoard.State.isConfigOpen()?"config":GH.RapidBoard.State.getMode()})}catch(o){}return!1})};GH.RapidBoard.ViewController.initSidebarActions=function(){GH.RapidBoard.ViewController.sidebarController.interceptSidebarItems(),GH.RapidBoard.ViewController.sidebarController.reactToSidebarSizeChange()},GH.RapidBoard.ViewController.update=function(e){GH.Notification.clear(),C()?H.handleDeferredResourceImport(C()&&GH.RapidBoard.State.getMode()===n.PLAN||GH.RapidBoard.State.getMode()===n.WORK,function(){GH.SprintRetrospectiveView.clearDialog()}):GH.RapidBoard.State.getMode()===n.WORK?H.actionOnDeferParsingComplete(function(){GH.SprintRetrospectiveView.clearDialog()}):GH.SprintRetrospectiveView&&GH.SprintRetrospectiveView.clearDialog(),GH.RapidBoard.ViewController.showRapidView(e),AJS.$("#ghx-rabid").css({display:""})},GH.RapidBoard.ViewController.showRapidView=function(r){if(AJS.$("#ghx-errors").empty(),GH.RapidBoard.ViewController.updateModeUrls(),GH.RapidBoard.ViewController.updateTabSelector(r),H.handleDeferredResourceImport(!GH.PlanController,function(){GH.PlanController.setRapidView(r)}),H.handleDeferredResourceImport(C()&&!GH.WorkController,function(){GH.WorkController.setRapidView(r)}),C()?H.handleDeferredResourceImport(C()&&!GH.ReportController||!GH.ReportController,function(){GH.ReportController&&GH.ReportController.setRapidView(r)}):GH.ReportController?GH.ReportController.setRapidView(r):(H.actionOnDeferParsingComplete(function(){GH.ReportController.setRapidView(r)}),GH.ReportController&&GH.ReportController.setRapidView(r)),GH.RapidBoard.State.isConfigOpen()){s()&&(p=e("jira-agile/rapid/ui/SPConfigController")),GH.WorkController&&GH.WorkController.hide(),GH.PlanController&&GH.PlanController.hide();var o=d.isFeatureEnabled("jsw.classic.keto");o&&GH.RapidBoard.State.getMode()===n.PLAN?x(GH.RapidBoard.State.getMode()===n.PLAN,["wrc!gh-rapid-backlog-deferred"],r):GH.RapidBoard.State.getMode()===n.WORK?x(GH.RapidBoard.State.getMode()===n.WORK,["wrc!gh-rapid-lwf-board-deferred"],r):(GH.ReportController.hide(),p.init(r))}else GH.RapidBoard.ViewController.setMode(GH.RapidBoard.ViewController.getMode(),!0);GH.PersistentMessages.WelcomeMessage.renderMessage(),GH.PersistentMessages.CreateViewMessage.renderMessage()};var x=function(e,r,o){H.triggerOnDemandResourceLoadWithCondition(e,r,"ViewController",function(){GH.ReportController.hide(),p.init(o)})};GH.RapidBoard.ViewController.validModes={plan:!0,work:!0,report:!0},GH.RapidBoard.ViewController.displayedMode=void 0,GH.RapidBoard.ViewController.updateTabSelector=function(e){var r=e.sprintSupportEnabled,o=GH.RapidBoard.ViewController.getTabLabels(r);AJS.$("#plan-toggle").attr({"data-tooltip":o.plan.tooltip,disabled:!r}).text(o.plan.label),AJS.$("#work-toggle").attr({"data-tooltip":o.work.tooltip}).text(o.work.label)},GH.RapidBoard.ViewController.showErrorPanelDragAndDrop=function(e,r){if(GH.Notification.Handler.setCustomNotificationHandler(null),GH.Notification.Handler.setCustomDivStyleHandler(function(){return{left:50,bottom:50}}),r&&r.hasGlobalErrors()){var o=GH.tpl.rapid.notification.renderErrorMessages({errors:r.getGlobalErrors()});GH.Notification.showError(AJS.format("{0,choice,1#Issue|1\u003cIssues} {1} couldn\'\'t be moved.",e.length,e),o)}else GH.Notification.showError(AJS.format("{0,choice,1#Issue|1\u003cIssues} {1} couldn\'\'t be moved.",e.length,e),"Check your network connection, refresh the page and try again.");GH.Notification.Handler.removeCustomHandlers()},GH.RapidBoard.ViewController.showErrorRefreshBoard=function(){GH.Notification.Handler.setCustomNotificationHandler(null),GH.Notification.Handler.setCustomDivStyleHandler(function(){return{left:50,bottom:50}}),GH.Notification.showError("Board couldn\'t be updated",AJS.format("We couldn\'\'t update {0} board. Try again later.",document.getElementById("ghx-board-name").innerHTML)),GH.Notification.Handler.removeCustomHandlers()},GH.RapidBoard.ViewController.getTabLabels=function(e,r){var o=void 0;o=e?"simple":r?"scrum":"kanban";var t="gh.rapid.pool.link."+o+".label",i="gh.rapid.pool.link."+o+".tip";return{plan:{label:r?"Backlog":"Backlog",tooltip:r?"Backlog ( 1 )":"The Backlog is not currently available on Kanban boards"},work:{label:AJS.I18n.getText(t),tooltip:AJS.I18n.getText(i)}}},GH.RapidBoard.ViewController.getMode=function(){return GH.RapidBoard.State.getMode()},GH.RapidBoard.ViewController.chooseApplicableMode=function(e){var r=GH.RapidBoard.State.isAgilityBoard(),o=GH.RapidBoard.State.isPlanModeAvailable(),t=e===n.PLAN&&!o;if(r){var i=e===n.WORK,a=e===n.REPORT&&!GH.RapidBoard.State.isAgilityReportsEnabled();if(i)return o?n.PLAN:n.REPORT;if(a)return n.PLAN;if(t)return n.REPORT}else if(t)return n.WORK;return e};var v=function(e){return l.isReactFiltersEnabled().then(function(r){setTimeout(function(){r&&(V()?(AJS.$("#ghx-operations > .gh-skeleton").remove(),AJS.$("#ghx-quick-filters").show()):AJS.$("#ghx-quick-filters").show(),AJS.$(e).hide(),GH.Layout.fireDelayedWindowResize())},0)})},P=function(e,r,o){var t=document.querySelector("#ghx-share"),i=r||"board",a=o||i;if(t){var n=AJS.Meta.get("cloud-id"),l=u(window,!1);c.then(function(r){r.render(t,{productId:"jira",subProductId:"jira-software",triggerButtonStyle:GH.RapidBoard.State.isPlanMode()?"icon-with-text":"icon-only",shareLink:l&&l.location.href,objectAri:"ari:cloud:jira:"+n+":board/"+GH.RapidBoard.State.getRapidViewId(),shareTitle:e,shareContentType:i},a)})["catch"](function(e){console.log("ShareButton render failed",e)})}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"boardScreen",r=document.querySelector("#ghx-automation");if(r){AJS.Meta.get("cloud-id");g.then(function(o){o.render(r,e)})["catch"](function(e){console.log("AutomationButton render failed",e)})}},E=function(){var e=document.querySelector("#ghx-automation");e&&g.then(function(r){r.unmount(e)})},O=400,T=function(e){switch(e){case n.PLAN:return GH.PlanController.isDetailsViewOpened();case n.WORK:return GH.WorkController.isDetailsViewOpened();default:throw new Error("detail view is only supported in either backlog or board mode. But current mode: "+e)}},W=function Z(){var e=GH.DetailsView.getContainer(),r=GH.RapidBoard.ViewController.getMode();GH.RapidBoard.ViewController.insightsOpen?(T(r)?GH.DetailsView.updateSize():e.css({display:"none"}),GH.RapidBoard.ViewController.insightsOpen=!1):(T(r)||(e.css({display:""}),GH.DetailsView.load(null,!1)),GH.RapidBoard.ViewController.insightsOpen=!0,GH.DetailsView.getContainer().width(O)),AJS.$("#ghx-issue-fragment").trigger("insights-button-toggled",{isInsightsPanelOpen:GH.RapidBoard.ViewController.insightsOpen,onClose:Z,rapidViewId:GH.DetailsView.rapidViewId,mode:r}),b()&&D()},y={onToggle:W,isInsightsPanelOpen:!1},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"boardScreen",r=document.querySelector("#ghx-controls-buttons"),o=Object.assign(y);b()&&(o.isInsightsPanelOpen=M()),r&&h.then(function(t){t.render(r,e,o)})["catch"](function(e){console.log("InsightsButton render failed",e)})},J=function(){var e=document.querySelector("#ghx-controls-buttons");e&&h.then(function(r){r.unmount(e)})},j=function(){return GH.WorkController.sprintData&&GH.WorkController.sprintData.sprints&&GH.WorkController.sprintData.sprints.length>0},N=function(e){GH.RapidBoard.ViewController.insightsOpen=e},L=function(){return N(!1)},M=function(){return!!GH.RapidBoard.ViewController.insightsOpen};GH.RapidBoard.ViewController.isInsightsPanelOpen=M,GH.RapidBoard.ViewController.resetInsightPanelOpen=function(){L(),D()},GH.RapidBoard.ViewController.mountOrUnmountInsightButton=function(e){var r=GH.RapidBoard.State.getMode();r===n.PLAN&&d.isFeatureEnabled("jsw.lightbulb.backlog.classic.insights-button-enabled")&&GH.RapidBoard.State.isScrumBoard&&GH.RapidBoard.State.isScrumBoard()||r===n.WORK&&d.isFeatureEnabled("jira.insights.classic.board.insights-button-enabled")&&GH.RapidBoard.State.isScrumBoard&&GH.RapidBoard.State.isScrumBoard()&&j()?(b()?e&&L():GH.RapidBoard.ViewController.insightsOpen=!1,D()):(b()&&L(),J())};var q=function(e){return new Promise(function(r,o){m&&m.backoffRequired===!0?GH.Poller.addPollerWithBackoff("WorkPoller",function(){return GH.WorkController.checkForUpdates(!1,GH.WorkDataLoader.LOAD_INITIATOR.POLLING)},GH.WorkDataLoader.NEW_DATA_WITH_CHANGES,m):GH.Poller.addPoller("WorkPoller",function(){return GH.WorkController.checkForUpdates(!1,GH.WorkDataLoader.LOAD_INITIATOR.POLLING)});var t=GH.WorkController.checkForUpdates(e);t.done(function(){GH.WorkController.hasDataChanged(GH.WorkDataLoader.currentData.data)&&GH.WorkController.applyLoadedData(),GH.WorkController.latestBoardRefreshedTime=Date.now(),r()}),t.fail(o)})},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"boardScreen";GH.WorkController.latestBoardRefreshedTime=Date.now();var r=document.querySelector("#ghx-refresh-board");r&&R.then(function(o){o.render(r,{getLatestBoardRefreshedTime:function(){return GH.WorkController.latestBoardRefreshedTime},getUpdates:q,onError:GH.RapidBoard.ViewController.showErrorRefreshBoard},e)})["catch"](function(e){console.log("RefreshBoardButton render failed",e)})},F=function(){var e=document.querySelector("#ghx-refresh-board");e&&R.then(function(r){r.unmount(e)})},U=function(e,r){var o=document.querySelector("#ghx-megaphone");o&&f.then(function(t){"unmount"===e&&t.unmount(o),"render"===e&&t.render(o,{sourceComponent:"jira-board-"+r})})["catch"](function(e){console.log("MegaphonButton render failed",e)})},K=function(e){U("render",e)},z=function(e){U("unmount",e)},X=function(e){try{var r=GH.ECX.INTERACTION_TYPE.UNKNOWN_DESTINATION;switch(e){case n.PLAN:r=GH.ECX.INTERACTION_TYPE.BACKLOG;break;case n.WORK:r=GH.ECX.INTERACTION_TYPE.BOARD;break;case n.REPORT:r=GH.ECX.INTERACTION_TYPE.REPORT}GH.RapidBoard.State.isFirstLoad()?GH.ECX.markUserInteraction(r.INITIAL_LOAD_FULL,!1):GH.ECX.markUserInteraction(r.INITIAL_LOAD_SPA,!0)}catch(o){AJS.trigger("analyticsEvent",{name:"jira.agile.board.ViewController.initialLoad.MarkUserInteractionError",data:{errorMsg:o.toString()}})}},Y=function(){var e=GH.RapidViewConfig.currentData.data;t.sendTrackEvent({containerType:e.locationType,containerId:JIRA.API&&JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectId(),objectType:"board",objectId:e.id,source:"boards",actionSubject:"backlogToBacklog",actionSubjectId:e.id,action:"transition",attributes:{boardId:GH.RapidViewConfig.currentData.data.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics()}})};GH.RapidBoard.ViewController.setMode=function(r,o){if(s()&&(p=e("jira-agile/rapid/ui/SPConfigController")),o=!!o,X(r),GH.SprintRetrospectiveView&&GH.SprintRetrospectiveView.clearDialog(),GH.RapidBoard.ViewController.validModes[r]){var t=r;if(r=GH.RapidBoard.ViewController.chooseApplicableMode(r),GH.RapidBoard.ViewController.displayedMode!==r){if(GH.RapidBoard.ViewController.trigger("before:navigate",{mode:r}),d.isFeatureEnabled("jsw.classic.track.backlog.movement.boardswitch")&&o&&GH.RapidBoard.State.isFirstLoad()===!1&&t===r&&r===n.PLAN&&Y(),GH.RapidBoard.State.setMode(r),b()&&GH.RapidBoard.ViewController.mountOrUnmountInsightButton(!0),p&&p.isOpen())return p.closeConfig(),void GH.RapidBoard.refreshBoardData(!0);switch(GH.RapidBoard.ViewController.updateSelector(),GH.Notification.clearBoardUpdatedMessage(),GH.LinkedPagesController&&GH.LinkedPagesController.hideCurrentDialog(),GH.RapidBoard.ViewController.hasSideBar&&GH.RapidBoard.ViewController.sidebarController.setSidebarState(r),r){case n.PLAN:V()&&GH.RapidBoard.ViewController.clearSkeletons(),GH.WorkController&&GH.WorkController.hide(),GH.ReleaseVersionTrigger&&GH.ReleaseVersionTrigger.remove(),GH.ReportController&&GH.ReportController.hide(),AJS.$("#ghx-report,#ghx-controls-report").hide(),AJS.$("#ghx-quick-filters").hide(),AJS.$("#ghx-plan,#ghx-controls-plan").show(),v("#ghx-controls-plan"),AJS.$("body").addClass("ghx-loading-backlog"),AJS.$(".adg-throbber").show(),require("jira-agile/rapid/wrm-spa-utils").sendSpinnerShowEvent("plan"),AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta,#ghx-modes-tools .favourite-btn").hide(),H.triggerOnDemandResourceLoadWithCondition(!GH.PlanController,["wrc!gh-rapid-lwf-board-deferred"],"backlog",function(){GH.PlanController.init(),GH.WorkController&&GH.WorkController.hide(),require("jira/inline-issue-create/agile/initialiser").init(),GH.ReleaseVersionTrigger&&GH.ReleaseVersionTrigger.remove(),AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta,#ghx-modes-tools .favourite-btn").hide(),GH.PlanController.show()});break;case n.REPORT:V()&&GH.RapidBoard.ViewController.clearSkeletons(),GH.ReportController.init(),GH.PlanController.hide(),GH.WorkController.hide(),AJS.$("#ghx-plan,#ghx-controls-plan").hide(),AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta,#ghx-modes-tools .favourite-btn").hide(),AJS.$("#ghx-quick-filters").hide(),AJS.$("#ghx-report,#ghx-controls-report").show(),GH.ReportController.show();break;case n.WORK:default:w.startSpan("work-controller-init"),C()?GH.WorkController&&GH.WorkController.init():GH.WorkController.init(),w.endSpan("work-controller-init"),w.startSpan("plan-controller-hide"),GH.PlanController&&GH.PlanController.hide(),w.endSpan("plan-controller-hide"),w.startSpan("report-controller-hide"),GH.ReportController&&GH.ReportController.hide(),w.endSpan("report-controller-hide"),AJS.$("#ghx-plan,#ghx-controls-plan").hide(),AJS.$("#ghx-report,#ghx-controls-report").hide(),AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta,#ghx-modes-tools .favourite-btn").show(),AJS.$("#ghx-quick-filters").hide(),w.startSpan("init-quick-filter"),v("#ghx-controls-work"),w.endSpan("init-quick-filter"),C()?GH.WorkController&&GH.WorkController.show():GH.WorkController.show(),H.triggerOnDemandResourceLoadWithCondition(C()&&!GH.WorkController,["wrc!gh-rapid-lwf-board-deferred"],"backlog",function(){GH.WorkController.init(),w.endSpan("work-controller-init"),AJS.$("#ghx-work,#ghx-controls-work,.ghx-sprint-meta,#ghx-modes-tools .favourite-btn").show(),w.startSpan("init-quick-filter"),v("#ghx-controls-work"),w.endSpan("init-quick-filter"),GH.WorkController.show(),"enabled-without-text"===B&&$()})}if(r===n.REPORT){var i=d.isFeatureEnabled("jira.share_button.reports.experiment"),a=GH.ReportController.getCurrentChart();i&&a&&a.name&&a.id&&P(a.name,"report",a.id)}else{var l=GH.RapidViewConfig.currentData;l&&l.data&&l.data.name&&P(l.data.name,"board")}r===n.WORK||r===n.PLAN?K(r):z(),r===n.WORK?I():E(),b()||GH.RapidBoard.ViewController.mountOrUnmountInsightButton(),"enabled-without-text"===B&&H.handleDeferredResourceImport(C()&&!GH.WorkController,function(){r===n.WORK?$():F()}),o?GH.RapidBoard.State.replaceState():GH.RapidBoard.State.pushState()}}},GH.RapidBoard.ViewController.preload=function(e){switch(GH.RapidBoard.ViewController.getMode()){case n.PLAN:return Promise.resolve();case n.REPORT:return Promise.resolve();default:return k()&&GH.RapidBoard.State.isConfigOpen()&&!GH.RapidBoard.State.isFirstLoad()?Promise.resolve():new Promise(function(r,o){GH.WorkController.preload(e).done(r,o)})}},GH.RapidBoard.ViewController.updateSelector=function(){AJS.$(".js-mode-selector .aui-button").removeClass("active");var e=GH.RapidBoard.State.getMode();AJS.$("#"+e+"-toggle").addClass("active")},GH.RapidBoard.ViewController.viewByMode={work:"detail",plan:"planning",report:"reporting"},GH.RapidBoard.ViewController.updateModeUrls=function(){var e=GH.RapidBoard.State.getRapidViewId();_.forEach(GH.RapidBoard.ViewController.validModes,function(r,o){var t=GH.RapidBoard.getRapidBoardPageUrl(e,GH.RapidBoard.ViewController.viewByMode[o]);AJS.$("#"+o+"-toggle").attr("href",t)})},GH.RapidBoard.ViewController.updateContentContainer=function(){GH.RapidBoard.ViewController.handleResizeEvent()},GH.RapidBoard.ViewController.handleResizeEvent=function(){GH.RapidBoard.ViewController.updateContentAreaHeight(),GH.PlanView&&GH.PlanView.updateFixedElementPositioning(),C()?GH.WorkView&&GH.WorkView.updateFixedElementPositioning():GH.WorkView.updateFixedElementPositioning(),GH.RapidBoard.ViewController.hasSideBar&&JIRA.API.getSidebar().then(function(e){e.reflow(!0)})},GH.RapidBoard.ViewController.updateContentAreaHeight=function(){var e=GH.RapidBoard.ViewController.contentContainers();if(e.size()){var r=GH.Layout.getWindowHeight()-2,o=e.offset();o&&o.top&&(r-=o.top),e.css({height:r})}},GH.RapidBoard.ViewController.contentContainers=function(){var e=AJS.$("#ghx-work, #ghx-plan, #ghx-report, #ghx-plan-group");return e.filter(function(){return"none"!==this.style.display})},GH.RapidBoard.ViewController.collectPrintablePlanIssues=function(){return GH.PlanController.collectPrintableIssues()},GH.RapidBoard.ViewController.collectPrintableWorkIssues=function(){return GH.WorkController.collectPrintableIssues()},GH.RapidBoard.ViewController.hasTransitionedToAnotherRoute=function(e){return e.href.indexOf("/RapidBoard.jspa")===-1||(!(!G.isPrettyUrlsEnabled()||G.isRapidboardsActive())||new RegExp("[?&]config=([^&#]+)").test(e.href))},V()&&(GH.RapidBoard.ViewController.clearSkeletons=function(){AJS.$("#ghx-header .gh-skeleton").remove(),AJS.$("#ghx-content-main .gh-skeleton").remove()})}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ui/SidebarController.js' */
GH.RapidBoard.SidebarController=function(e){"use strict";function r(){}function a(e){return e.find("a").attr("href").indexOf("RapidBoard.jspa")>-1}function n(e,r){switch(e){case"plan":case"work":return!0;case"report":return a(r);default:return!1}}function i(e,r){var a=m[r]||[],n=a.some(function(r){var a=e.getItem(r,!0);if(a)return a.select(),!0});"report"!==r||n||o(e)}function o(e){var r=e.getGroup(f,!0)||e.getGroup(j,!0);r||(r=e.getGroup(h,!0)),r&&r.links&&r.links.length&&r.links.some(function(r){if(r.url){var a=t(r.url),n=t(window.location.href.replace(/^.*\/\/[^\/]+/,""));if(n.chart&&a.chart===n.chart){var i=e.getItem(r.id,!0);if(i)return i.select(),!0}}})}function t(e){var r=e.split("?");try{return 1===r.length?{}:JSON.parse('{"'+r[1].replace(/#.*$/,"").replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,r){return""===e?r:decodeURIComponent(r)})}catch(a){return{}}}function p(e,r){i(e,r)}function s(r){r.on(r.events.BEFORE_NAVIGATE,function(r){var a=r.target,i=a.getId(),o=AJS.$(document.getElementById(i)),t=b[i];n(t,o)&&(e.setMode(t),r.preventDefault())},!0)}function c(e){e.on(e.events.DATA,function(){var r=GH.RapidBoard.State.getMode();p(e,r)},!0)}function d(e){e.on(e.events.SCOPE_SWITCHER_BEFORE_NAVIGATE,function(e,r){var a=r.id;e.preventDefault(),u.send({name:"jira.frontend.fe.navigation.scope-switcher.link.click",properties:{pageMode:GH.RapidBoard.State.getMode()}}),GH.RapidBoard.loadNewBoard(a)},!0)}var u=require("jira/analytics"),l=require("jira-agile/rapid/const/PageMode"),g=require("jira/container-api").APIs.getNavigationAPI,b={"com.pyxis.greenhopper.jira:project-sidebar-work-scrum":"work","com.pyxis.greenhopper.jira:project-sidebar-work-kanban":"work","com.pyxis.greenhopper.jira:global-sidebar-work-scrum":"work","com.pyxis.greenhopper.jira:global-sidebar-work-kanban":"work","com.pyxis.greenhopper.jira:user-container-sidebar-work-kanban":"work","com.pyxis.greenhopper.jira:user-container-sidebar-work-scrum":"work","com.pyxis.greenhopper.jira:project-sidebar-plan-scrum":"plan","com.pyxis.greenhopper.jira:project-sidebar-plan-kanban":"plan","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum":"plan","com.pyxis.greenhopper.jira:global-sidebar-plan-kanban":"plan","com.pyxis.greenhopper.jira:user-container-sidebar-plan-scrum":"plan","com.pyxis.greenhopper.jira:user-container-sidebar-plan-kanban":"plan","com.pyxis.greenhopper.jira:global-sidebar-report":"report","com.atlassian.jira.jira-projects-plugin:report-page":"report","com.pyxis.greenhopper.jira:user-container-sidebar-report":"report"},m={plan:["com.pyxis.greenhopper.jira:project-sidebar-plan-scrum","com.pyxis.greenhopper.jira:global-sidebar-plan-scrum","com.pyxis.greenhopper.jira:project-sidebar-plan-kanban","com.pyxis.greenhopper.jira:global-sidebar-plan-kanban","com.pyxis.greenhopper.jira:user-container-sidebar-plan-scrum","com.pyxis.greenhopper.jira:user-container-sidebar-plan-kanban","com.pyxis.greenhopper.jira:project-sidebar-simple-backlog"],work:["com.pyxis.greenhopper.jira:project-sidebar-work-scrum","com.pyxis.greenhopper.jira:project-sidebar-work-kanban","com.pyxis.greenhopper.jira:global-sidebar-work-scrum","com.pyxis.greenhopper.jira:global-sidebar-work-kanban","com.pyxis.greenhopper.jira:user-container-sidebar-work-scrum","com.pyxis.greenhopper.jira:user-container-sidebar-work-kanban"],report:["com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:global-sidebar-report","com.pyxis.greenhopper.jira:user-container-sidebar-report","com.pyxis.greenhopper.jira:project-sidebar-simple-reports"]},f="report_agile_sidebar_links",j="report_agile_sidebar_links_without_label",h="uc_report_agile_sidebar_links";return r.prototype={constructor:r,interceptSidebarItems:function(){JIRA.API.getSidebar().done(function(e){s(e),d(e),c(e)})},reselectSidebarItem:function(){JIRA.API.getSidebar().done(function(e){var r=GH.RapidBoard.State.getMode();i(e,r)})},setSidebarState:function(e){JIRA.API.getSidebar().done(function(r){p(r,e)}),g().then(function(r){if("function"==typeof r.setView){var a=r.isInProjectContext(),n=r.viewIds,i=a?n.SOFTWARE:n.USER,o=a?n.SOFTWARE_REPORTS:n.USER_REPORTS;switch(e){case l.WORK:case l.PLAN:r.setView(i);break;case l.REPORT:r.setView(o)}}})},reactToSidebarSizeChange:function(){JIRA.API.getSidebar().then(function(e){GH.Layout.fireDelayedWindowResize(),e.on("expand-end",function(){GH.Layout.fireDelayedWindowResize()},!0),e.on("collapse-end",function(){GH.Layout.fireDelayedWindowResize()},!0)}),g().then(function(e){GH.Layout.fireDelayedWindowResize(),e.onExpandEnd(function(){GH.Layout.fireDelayedWindowResize()}),e.onCollapseEnd(function(){GH.Layout.fireDelayedWindowResize()})})},removePlanMenuItem:function(e){this.updateSidebar(e)},updateSidebar:function(e){JIRA.API.getSidebar().then(function(r){return r.updateData({rapidView:e},!0)}),g().then(function(e){return e.updateData()})}},r}(GH.RapidBoard.ViewController);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ui/ViewController.soy' */
// This file was automatically generated from ViewController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.viewcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.viewcontroller == 'undefined') { GH.tpl.viewcontroller = {}; }


GH.tpl.viewcontroller.renderOperationsBar = function(opt_data, opt_ignored) {
  return '<div id="ghx-controls"><div id="ghx-controls-plan" class="ghx-controls-plan ghx-controls-list"></div><div id="ghx-controls-work" class="ghx-controls-work ghx-controls-list"></div><div id="ghx-quick-filters"></div><div id="ghx-controls-report" class="ghx-controls-report"></div></div><div id="ghx-controls-buttons"></div>';
};
if (goog.DEBUG) {
  GH.tpl.viewcontroller.renderOperationsBar.soyTemplateName = 'GH.tpl.viewcontroller.renderOperationsBar';
}


GH.tpl.viewcontroller.renderErrors = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message error"><p class="title"><span class="aui-icon icon-error"></span><strong>' + soy.$$escapeHtml('There was an error loading this page') + '</strong></p><ul>';
  var errorList8 = opt_data.errors;
  var errorListLen8 = errorList8.length;
  for (var errorIndex8 = 0; errorIndex8 < errorListLen8; errorIndex8++) {
    var errorData8 = errorList8[errorIndex8];
    output += '<li>' + soy.$$filterNoAutoescape(errorData8.message) + '</li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.viewcontroller.renderErrors.soyTemplateName = 'GH.tpl.viewcontroller.renderErrors';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ui/work/IssueListUtil.js' */
GH.IssueListUtil={},GH.IssueListUtil.calculateGroupData=function(e){var n={fakeParents:{},beginGroups:{},endGroups:{}};return _.each(e,function(e){GH.IssueListUtil._calculateGroupData(n,e)}),n},GH.IssueListUtil.issueListToTree=function(e){var n=[];return e=e.map(function(e){return Object.assign({},e)}),_.each(e,function(t,a){if(t.parentKey){var s=n.find(function(e){return e.key===t.parentKey});s||(s=e.find(function(e){return e.key===t.parentKey}),s||(s={key:t.parentKey,fakeParent:!0},n.push(s))),s.subTasks||(s.subTasks=[]),s.subTasks.push(t)}else n.push(t)}),n},GH.IssueListUtil.applyExpandedState=function(e,n){e.forEach(function(e){n.includes(e.key)&&(e.expanded=!0)})},GH.IssueListUtil._calculateGroupData=function(e,n){var t=null,a=null,s=n[n.length-1];_.each(n,function(n){n.parentId?(t?t.parentId!==n.parentId?(e.endGroups[t.id]=!0,e.beginGroups[n.id]=!0,e.fakeParents[n.id]=!0):n.id===s.id?(e.endGroups[n.id]=!0,e.fakeParents[n.id]=!0):e.fakeParents[t.id]&&(e.fakeParents[n.id]=!0):(a&&a.id===n.parentId?e.beginGroups[a.id]=!0:e.fakeParents[n.id]=!0,e.beginGroups[n.id]=!0),t=n):t&&(e.endGroups[t.id]=!0,t=null),a=n})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/WindowActivityNotifier.js' */
!function(i,o,r){function t(){r(this),this._bindFocusBlur()}t.prototype={_bindFocusBlur:function(){var r=this,t=!1,n=o.debounce(function(i){t||(i?r.trigger("focus"):r.trigger("blur"))},200),a=o.partial(n,!0),u=o.partial(n,!1);i(window).on({"focus.rapidboardSpa":a,"blur.rapidboardSpa":u,"unload.rapidboardSpa":function(){t=!0,r.trigger("unload")}})}},GH.WindowActivityNotifier=t,GH.windowActivityNotifier=new t}(AJS.$,_,GH.Events);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ops/KeyboardShortcuts.js' */
!function(){"use strict";var e=require("jquery"),o=require("jira-agile/rapid/const/PageMode"),t=require("jira-agile/rapid/ui/bento/bento-features"),r=require("jira/analytics/web-client"),n=function(e,o){function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}var n="unknown";GH.ReportController&&GH.ReportController.visible?n=GH.ReportController.getCurrentChart().id+"Screen":GH.PlanController&&GH.PlanController.isActive()?n="backlogScreen":GH.WorkController&&GH.WorkController.isActive()&&(n="boardScreen");var s="keyboardShortcut";r.sendUIEvent({source:n,action:"pressed",actionSubject:s,actionSubjectId:o+t(s),attributes:{key:e}})};GH.Shortcut={focusBoardSearch:function(e){},newIssue:function(o){s()||e("#create_link").click()},toggleBox:function(e){},editIssuePriority:function(e){},projector:function(e){n(e,"projector"),GH.PresentationMode.iterateThroughPresentationModes(GH.PresentationMode.allModes)},viewIssue:function(e){a(GH.IssueOperationShortcuts.viewSelectedIssue,null,{key:e,type:"viewIssue"})},editIssue:function(e){a(GH.IssueOperationShortcuts.editSelectedIssue,null,{key:e,type:"editIssue"})},assignIssue:function(e){var o={type:"EDIT_FIELD",payload:{fieldId:"assignee"}};a(GH.IssueOperationShortcuts.assignSelectedIssue,o,{key:e,type:"assignIssue"})},assignIssueToMe:function(e){i()||(n(e,"assignToMe"),GH.IssueOperationShortcuts.assignSelectedIssueToMe())},commentIssue:function(e){var o={type:"ADD_COMMENT"};a(GH.IssueOperationShortcuts.commentSelectedIssue,o,{key:e,type:"commentIssue"})},editIssueLabels:function(e){var o={type:"EDIT_FIELD",payload:{fieldId:"labels"}};a(GH.IssueOperationShortcuts.editSelectedIssueLabels,o,{key:e,type:"editIssueLabels"})},showOperationsDialog:function(e){var o=require("jira-agile/rapid/deferred-resources-loader"),t=require("jira/featureflags/feature-manager"),r=function(){return t.isFeatureEnabled("cbb.heritage")};s()||(n(e,"showOperationsDialog"),o.handleDeferredResourceImport(r()&&!GH.DetailsView,function(){GH.IssueOperationShortcuts.showOperationsDialog()}))},sendToTop:function(e,o){GH.WorkController.isActive()?s()||(n(o,"sendToTop"),GH.WorkKBShortcuts.sendToTop(e)):GH.PlanController.isActive()&&(n(o,"sendToTop"),GH.PlanKBShortcuts.sendToTop(e))},sendToBottom:function(e,o){GH.WorkController.isActive()?s()||(n(o,"sendToBottom"),GH.WorkKBShortcuts.sendToBottom(e)):GH.PlanController.isActive()&&(n(o,"sendToBottom"),GH.PlanKBShortcuts.sendToBottom(e))},nextIssue:function(e){GH.WorkController.isActive()?s()||(n(e,"nextIssue"),GH.WorkKBNavigation.selectNextIssue()):GH.PlanController.isActive()&&(n(e,"nextIssue"),GH.BacklogSelectionController.selectNextIssue())},previousIssue:function(e){GH.WorkController.isActive()?s()||(n(e,"previousIssue"),GH.WorkKBNavigation.selectPreviousIssue()):GH.PlanController.isActive()&&(n(e,"previousIssue"),GH.BacklogSelectionController.selectPreviousIssue())},nextBox:function(e){GH.WorkController.isActive()&&(s()||(n(e,"nextColumn"),GH.WorkKBNavigation.selectNextColumn()))},previousBox:function(e){GH.WorkController.isActive()&&(s()||(n(e,"previousColumn"),GH.WorkKBNavigation.selectPreviousColumn()))},toggleSwimlanes:function(e){GH.WorkController.isActive()&&(n(e,"toggleSwimlanes"),GH.WorkKBNavigation.toggleSwimlanes())},planMode:function(e){l()||(GH.RapidBoard.State.isPlanModeAvailable()?s()||(n(e,"setPlanMode"),GH.RapidBoard.ViewController.setMode(o.PLAN)):this.workMode())},workMode:function(e){l()||s()||(n(e,"setWorkMode"),GH.RapidBoard.ViewController.setMode(o.WORK))},reportMode:function(e){l()||s()||(n(e,"setReportMode"),GH.RapidBoard.ViewController.setMode(o.REPORT))},toggleIssue:function(e){n(e,"toggleDetailsView"),GH.WorkController.isActive()?GH.WorkController.toggleDetailsView():GH.PlanController.isActive()&&GH.PlanController.toggleDetailsView()}},e(document).bind("keydown");var s=function(){return GH.WorkController.isActive()&&GH.RapidBoard.State.isNewIssueViewEnabled()&&GH.WorkView.isIssueModalOpened()},i=function(){var e=GH.WorkController.isActive()&&GH.RapidBoard.State.isNewIssueViewEnabled()&&GH.WorkController.isDetailsViewOpened(),o=GH.PlanController.isActive()&&t.isBentoInBacklogEnabled()&&GH.PlanController.isDetailsViewOpened();return e||o},l=function(){return GH.RapidBoard.State.isAgilityBoard()},a=function(e,o,r){GH.WorkController.isActive()&&GH.RapidBoard.State.isNewIssueViewEnabled()?!GH.WorkController.isDetailsViewOpened()&&GH.WorkSelectionController.getSelectedIssueKey()&&(GH.WorkController.toggleDetailsView(o),n(r.key,r.type)):GH.PlanController.isActive()&&t.isBentoInBacklogEnabled()?!GH.PlanController.isDetailsViewOpened()&&GH.IssueOperationShortcuts.getSelectedIssueKey()&&(GH.PlanController.toggleDetailsView(o),n(r.key,r.type)):(e(),n(r.key,r.type))}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ops/IssueOperationShortcuts.js' */
!function(){"use strict";var e=require("jira-agile/rapid/analytics-tracker"),t=require("jira/container-api");GH.IssueOperationShortcuts={},GH.IssueOperationShortcuts.overrideSelectedIssue=void 0,GH.IssueOperationShortcuts.analytics=function(t){return new e("gh.issueaction."+t)},GH.IssueOperationShortcuts.init=function(){GH.IssueOperationShortcuts.bindEnter(),AJS.$(document).delegate(".js-issueaction-container-dot .js-issueaction","click",function(e){var t=AJS.$(e.currentTarget).attr("id");GH.IssueOperationShortcuts.trackKeyboardShortcuts(t)}),AJS.$(document).delegate("#issueactions-suggestions a.aui-list-item-link","click",function(e){var t=AJS.$(e.currentTarget).attr("class");if(t.indexOf("issueaction-")>=0){var s=t.replace(/.*issueaction-([a-z0-9_-]+).*/,"$1");GH.IssueOperationShortcuts.trackDotDialogAction(s)}}),AJS.bind("remove.dialog",function(){GH.IssueOperationShortcuts.bindEnter()})},GH.IssueOperationShortcuts.bindEnter=function(){AJS.$(document).bind("keydown",function(e){if("13"===e.keyCode){var t=e.target;void 0!==t&&"HTML"!==t.nodeName&&"BODY"!==t.nodeName&&t!==document||GH.IssueOperationShortcuts.viewSelectedIssue()}})},GH.IssueOperationShortcuts.setOverrideSelectedIssue=function(e){GH.IssueOperationShortcuts.overrideSelectedIssue=e},GH.IssueOperationShortcuts.clearOverrideSelectedIssue=function(){GH.IssueOperationShortcuts.overrideSelectedIssue=void 0},GH.IssueOperationShortcuts.isOverrideSelectedIssueActive=function(){return!!GH.IssueOperationShortcuts.overrideSelectedIssue},GH.IssueOperationShortcuts.getSelectedIssueKey=function(){return GH.IssueOperationShortcuts.overrideSelectedIssue?GH.IssueOperationShortcuts.overrideSelectedIssue.key:GH.WorkController.isActive()?GH.WorkSelectionController.getSelectedIssueKey():GH.PlanController.isActive()?GH.BacklogSelectionController.getSelectedIssueKey():void 0},GH.IssueOperationShortcuts.getSelectedIssueId=function(){if(GH.IssueOperationShortcuts.overrideSelectedIssue)return GH.IssueOperationShortcuts.overrideSelectedIssue.id;if(GH.WorkController.isActive()){var e=GH.WorkSelectionController.getSelectedIssueKey();if(e){var t=GH.GridDataController.getModel();return t&&t.getIssueIdForKey(e)}}else if(GH.PlanController.isActive()){var e=GH.BacklogSelectionController.getSelectedIssueKey();if(e){var t=GH.BacklogModel;return t&&t.getIssueIdForKey(e)}}},GH.IssueOperationShortcuts.viewSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();if(e){GH.IssueOperationShortcuts.trackKeyboardShortcuts("open-issue");var s=GH.Ajax.CONTEXT_PATH+"/browse/"+e;t.navigate(s,function(){window.location.href=s})}},GH.IssueOperationShortcuts.editSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueId();e&&AJS.$("a.issueaction-edit-issue").trigger("click")},GH.IssueOperationShortcuts.assignSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-assign-issue").trigger("click")},GH.IssueOperationShortcuts.assignSelectedIssueToMe=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-assign-to-me").trigger("click")},GH.IssueOperationShortcuts.commentSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();if(e){var t=AJS.$("#ghx-detail-view #addcomment a[name=add-comment]");t.length>0?t.trigger("click"):AJS.$(".js-issueaction-container-dot a.issueaction-comment-issue").trigger("click")}},GH.IssueOperationShortcuts.attachFilesSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-attach-file").trigger("click")},GH.IssueOperationShortcuts.editSelectedIssueLabels=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-edit-labels").trigger("click")},GH.IssueOperationShortcuts.copyIssueLink=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();if(e){var t=window.location.protocol+"//"+window.location.host,s=document.getElementById("gh-ctx-menu-copy-to-clipboard");s.value=t+GH.Ajax.CONTEXT_PATH+"/browse/"+e;var o=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);s.select(),document.execCommand("copy"),o&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(o)),s.value=""}},GH.IssueOperationShortcuts.deleteSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueId();e&&AJS.$(".js-issueaction-container-dot a.issueaction-delete-issue").trigger("click")},GH.IssueOperationShortcuts.linkSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueId();e&&AJS.$(".js-issueaction-container-dot a.issueaction-link-issue").trigger("click")},GH.IssueOperationShortcuts.createSubtask=function(){var e=AJS.$("#atlassian-token").attr("content"),t=GH.Ajax.CONTEXT_PATH+"/secure/CreateSubTaskIssue!default.jspa?parentIssueId={0}&atl_token="+e+"&returnUrl=",s='<a href="'+t+'" class="issueaction-create-subtask" style="display:none"></a>',o=AJS.$(s);AJS.$("#gh").append(o),o.click(),o.remove()},GH.IssueOperationShortcuts.logWorkOnSelectedIssue=function(){var e=GH.IssueOperationShortcuts.getSelectedIssueKey();e&&AJS.$(".js-issueaction-container-dot a.issueaction-log-work").trigger("click")},GH.IssueOperationShortcuts.showOperationsDialog=function(){var e=require("jira/dialog/dialog-register"),t=GH.IssueOperationShortcuts.getSelectedIssueKey();t&&e.issueActions.show()},GH.IssueOperationShortcuts.trackKeyboardShortcuts=function(e){GH.IssueOperationShortcuts.analytics("keyboardshortcuts").trigger(e)},GH.IssueOperationShortcuts.trackDotDialogAction=function(e){GH.IssueOperationShortcuts.analytics("dotdialog").trigger(e)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkKBShortcuts.js' */
GH.WorkKBShortcuts={},GH.WorkKBShortcuts.sendToTop=function(o){GH.WorkRanking.sendToTop(o)},GH.WorkKBShortcuts.sendToBottom=function(o){GH.WorkRanking.sendToBottom(o)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ui/component/ContextMenu.js' */
!function(){"use strict";GH.ContextMenu=function(t){this.actionGroups=t.actionGroups,this.dropdown=null},GH.ContextMenu.menuSelector="#gh-ctx-menu",GH.ContextMenu.contentSelector="#gh-ctx-menu-content",GH.ContextMenu.triggerSelector="#gh-ctx-menu-trigger",GH.ContextMenu.prototype._executeContextAction=function(t){var e=this._findActionById(t);e.actionFn()},GH.ContextMenu.prototype._findActionById=function(t){var e=[];return _.each(this.actionGroups,function(t){e=e.concat(t.actions)}),_.find(e,function(e){return e.id===t})},GH.ContextMenu.prototype.showAt=function(t){if(!_.isUndefined(t)&&!_.isNull(t)){this._initDropdown();var e=t.pageX,n=t.pageY,o=AJS.$(GH.ContextMenu.contentSelector),r=o.height();GH.Util.UI.isVisibleY(n+r)||(n-=r),this._positionDropdownAt(e,n),this.dropdown.show()}},GH.ContextMenu.prototype._positionDropdownAt=function(t,e){AJS.$(GH.ContextMenu.triggerSelector).offset({left:t,top:e})},GH.ContextMenu.prototype._initDropdown=function(){var t=require("jira/ajs/dropdown/dropdown");AJS.$(GH.ContextMenu.menuSelector).remove();var e=GH.tpl.contextmenu.renderContextMenu({ctxActionGroups:this.actionGroups});AJS.$("#gh").append(e);var n=this,o=AJS.$(GH.ContextMenu.contentSelector);o.click(function(t){var e=AJS.$(t.target).closest(".js-context-menu-action"),o=e.attr("data-ctx-action");_.isUndefined(o)||o===!1||(n._executeContextAction(o),t.preventDefault())});var r={content:o,trigger:AJS.$(GH.ContextMenu.triggerSelector),alignment:AJS.LEFT};this.dropdown=t.create(r)[0];var i=this.dropdown.layerController._validateClickToClose,c=function(t){return 2!==t.button&&(!i||i.apply(this,arguments))};this.dropdown.layerController._validateClickToClose=c},GH.ContextMenu.prototype.hide=function(){this.dropdown&&this.dropdown.hide(),AJS.$(GH.ContextMenu.menuSelector).remove(),AJS.$(GH.ContextMenu.contentSelector).remove(),AJS.$(GH.ContextMenu.triggerSelector).remove(),AJS.$(GH.ContextMenu.triggerSelector+"_drop").remove()}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ui/component/ContextMenu.soy' */
// This file was automatically generated from ContextMenu.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.contextmenu.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.contextmenu == 'undefined') { GH.tpl.contextmenu = {}; }


GH.tpl.contextmenu.renderContextMenu = function(opt_data, opt_ignored) {
  var output = '<div id="gh-ctx-menu" class="aui-dd-parent"><div id="gh-ctx-menu-trigger" class="aui-dd-trigger" style="width:1px; height:1px; position:absolute;"></div><div id="gh-ctx-menu-content" class="aui-list">';
  var ctxActionGroupList4 = opt_data.ctxActionGroups;
  var ctxActionGroupListLen4 = ctxActionGroupList4.length;
  for (var ctxActionGroupIndex4 = 0; ctxActionGroupIndex4 < ctxActionGroupListLen4; ctxActionGroupIndex4++) {
    var ctxActionGroupData4 = ctxActionGroupList4[ctxActionGroupIndex4];
    output += GH.tpl.contextmenu.renderContextActionGroup({ctxActionGroup: ctxActionGroupData4, isLast: ctxActionGroupIndex4 == ctxActionGroupListLen4 - 1});
  }
  output += '</div><textarea id="gh-ctx-menu-copy-to-clipboard" value="" readonly></textarea></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextMenu.soyTemplateName = 'GH.tpl.contextmenu.renderContextMenu';
}


GH.tpl.contextmenu.renderContextActionGroup = function(opt_data, opt_ignored) {
  var output = ((opt_data.ctxActionGroup.label) ? '<h5>' + soy.$$escapeHtml(opt_data.ctxActionGroup.label) + '</h5>' : '') + '<ul class="aui-list-section aui-first ' + ((opt_data.isLast) ? 'aui-last' : '') + '">';
  var ctxActionList21 = opt_data.ctxActionGroup.actions;
  var ctxActionListLen21 = ctxActionList21.length;
  for (var ctxActionIndex21 = 0; ctxActionIndex21 < ctxActionListLen21; ctxActionIndex21++) {
    var ctxActionData21 = ctxActionList21[ctxActionIndex21];
    output += GH.tpl.contextmenu.renderContextAction({ctxAction: ctxActionData21});
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextActionGroup.soyTemplateName = 'GH.tpl.contextmenu.renderContextActionGroup';
}


GH.tpl.contextmenu.renderContextAction = function(opt_data, opt_ignored) {
  var output = '<li id="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '-container" class="aui-list-item"><a  data-ctx-action="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '" id="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '" class="aui-list-item-link js-context-menu-action" title="' + soy.$$escapeHtml(opt_data.ctxAction.label) + '"' + ((opt_data.ctxAction.href != null) ? 'href="' + soy.$$escapeHtml(opt_data.ctxAction.href) + '"' : 'href="#"') + '>' + soy.$$escapeHtml(opt_data.ctxAction.label);
  if (opt_data.ctxAction.shortcut) {
    output += '<span class="ghx-shortcut">';
    var keyList48 = opt_data.ctxAction.shortcut.keys;
    var keyListLen48 = keyList48.length;
    for (var keyIndex48 = 0; keyIndex48 < keyListLen48; keyIndex48++) {
      var keyData48 = keyList48[keyIndex48];
      output += (keyIndex48 == 0) ? soy.$$escapeHtml(keyData48) : '<span class="ghx-separator">' + soy.$$escapeHtml(opt_data.ctxAction.shortcut.separator) + '</span><span class="ghx-monospace">' + soy.$$escapeHtml(keyData48) + '</span>';
    }
    output += '</span>';
  }
  output += '</a></li>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextAction.soyTemplateName = 'GH.tpl.contextmenu.renderContextAction';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/state/RapidBoardState.js' */
!function(){"use strict";var a=require("jira-agile/rapid/const/PageMode"),t=require("jira-agile/rapid/ui/SPConfig"),e=require("jira/featureflags/feature-manager"),d=require("jira-agile/rapid/ajax"),r=require("wrm/data"),i=require("jira-agile/rapid/deferred-resources-loader"),o="ISSUE_BOARD_EXPANDED_LIST_KEY",n="newIssueViewEnabled",s="activeQuickFilters",p="planQuickFilters",u="workSprintFilters",S=e.isFeatureEnabled("endeavour.rapidboard.pretty-url"),l=function(){return e.isFeatureEnabled("jsw.classic.keto")},B=function(){return e.isFeatureEnabled("jsw.classic.board.api-calls.modern-frontend")};GH.RapidBoard.State={},GH.RapidBoard.State.data={};var H=!0;GH.RapidBoard.State._storedMode=null,GH.RapidBoard.State._storedBoardSettings=null,GH.RapidBoard.State.setDataValue=function(a,t){_.isUndefined(t)||_.isNull(t)?delete GH.RapidBoard.State.data[a]:GH.RapidBoard.State.data[a]=t},GH.RapidBoard.State.getDataValue=function(a){return GH.RapidBoard.State.data[a]},GH.RapidBoard.State.getMode=function(){return GH.RapidBoard.State.getDataValue("mode")||a.WORK},GH.RapidBoard.State.getStoredMode=function(){if(!GH.RapidBoard.State._storedMode){var t=r.claim("stored-mode");GH.RapidBoard.State._storedMode=t?t.mode:a.WORK}return GH.RapidBoard.State._storedMode},GH.RapidBoard.State.isPlanMode=function(){return GH.RapidBoard.State.getMode()===a.PLAN},GH.RapidBoard.State.isWorkMode=function(){return GH.RapidBoard.State.getMode()===a.WORK},GH.RapidBoard.State.setMode=function(a){B()&&GH.RapidBoard.State.getMode()!==a&&GH.RapidBoard.State.setLoadDataClaimed(!0),GH.RapidBoard.State.setDataValue("mode",a),GH.storage.put("gh.mode",a),GH.RapidBoard.State._storedMode!==a&&GH.RapidBoard.State._submitUpdateStoreMode(a)},GH.RapidBoard.State._submitUpdateStoreMode=function(a){d.put({url:"/userData/storeMode?mode="+a}),GH.RapidBoard.State._storedMode=a},GH.RapidBoard.State.getLastCardPrintingSize=function(){return GH.storage.get("gh.card.printing.size")||"small"},GH.RapidBoard.State.setLastCardPrintingSize=function(a){GH.storage.put("gh.card.printing.size",a)},GH.RapidBoard.State.isNewIssueViewEnabled=function(){return"true"===AJS.$('meta[name="ghx-user-bento-enabled"]').attr("content")},GH.RapidBoard.State.setNewIssueViewEnabled=function(a){GH.RapidBoard.State.setDataValue(n,a)},GH.RapidBoard.State.getProjectKey=function(){return GH.RapidBoard.State.getDataValue("projectKey")||void 0},GH.RapidBoard.State.setProjectKey=function(a){GH.RapidBoard.State.setDataValue("projectKey",a)};var G=function(a){return{key:a,set:function(t){return GH.RapidBoard.State.setDataValue(a,t)},get:function(){var t=GH.RapidBoard.State.getDataValue(a);return void 0===t||null===t?void 0:t},reset:function(){return GH.RapidBoard.State.setDataValue(a,null)}}};GH.RapidBoard.State.numberOfIssues=new G("numberOfIssues"),GH.RapidBoard.State.numberOfVersions=new G("numberOfVersions"),GH.RapidBoard.State.numberOfEpics=new G("numberOfEpics"),GH.RapidBoard.State.numberOfProjects=new G("numberOfProjects"),GH.RapidBoard.State.numberOfCustomFields=new G("numberOfCustomFields"),GH.RapidBoard.State.numberOfSubtasks=new G("numberOfSubtasks"),GH.RapidBoard.State.oldDoneIssuesCutoff=new G("oldDoneIssuesCutoff"),GH.RapidBoard.State.jqsInJsw=new G("jqsInJsw"),e.isFeatureEnabled("jsw.backlog.browser-metrics.backlog.issue.count.browser.metrics")&&(GH.RapidBoard.State.numberOfBacklogIssues=new G("numberOfBacklogIssues")),GH.RapidBoard.State.isDetailsViewOpened=function(){return GH.RapidBoard.State.getDataValue("detailViewWork")||!1},GH.RapidBoard.State.isIssueModalOpened=function(){return GH.RapidBoard.State.getDataValue("issueModalWork")||!1},GH.RapidBoard.State.isDetailsViewPlanOpened=function(){return GH.RapidBoard.State.getBoardSetting(null,"detailViewPlan",!0)||!1},GH.RapidBoard.State.getStoredDetailViewOpened=function(){return GH.storage.get("gh.detailViewWork")||!1},GH.RapidBoard.State.setWorkViewDetailsViewOpened=function(a){GH.RapidBoard.State.setDataValue("detailViewWork",a||!1),GH.storage.put("gh.detailViewWork",a||!1)},GH.RapidBoard.State.setWorkIssueModalOpened=function(a){GH.RapidBoard.State.setDataValue("issueModalWork",a||!1)},GH.RapidBoard.State.setPlanViewDetailsViewOpened=function(a){GH.RapidBoard.State.setBoardSetting("detailViewPlan",a||!1)},GH.RapidBoard.State.setEpicShownOnRapidBoard=function(a){GH.storage.put("gh.epicShownOnRapidBoard."+GH.RapidBoard.State.getRapidViewId(),a)},GH.RapidBoard.State.getEpicShownOnRapidBoard=function(){var a=GH.storage.get("gh.epicShownOnRapidBoard."+GH.RapidBoard.State.getRapidViewId());return!!_.isNull(a)||a},GH.RapidBoard.State.setNonWorkingDaysShown=function(a,t){GH.storage.put("gh.nonWorkingDaysShown."+a,t)},GH.RapidBoard.State.getNonWorkingDaysShown=function(a){var t=GH.storage.get("gh.nonWorkingDaysShown."+a);return!!_.isNull(t)||t},GH.RapidBoard.State.setQuickFiltersExpanded=function(a){GH.storage.put("gh.quickFiltersExpanded",a)},GH.RapidBoard.State.getQuickFiltersExpanded=function(){var a=GH.storage.get("gh.quickFiltersExpanded");return!_.isNull(a)&&a},GH.RapidBoard.State.setDetailViewWidth=function(a){GH.storage.put("gh.detailViewWidth",a)},GH.RapidBoard.State.getDetailViewWidth=function(){var a=GH.storage.get("gh.detailViewWidth");return _.isNull(a)?0:a},GH.RapidBoard.State.getCycleTimeCalculationType=function(){var a=GH.RapidBoard.State.getDataValue("cycleTimeCalculationType");return _.isUndefined(a)&&(a=GH.storage.get("gh.cycleTimeCalculationType"),_.isNull(a))?(GH.RapidBoard.State.setCycleTimeCalculationType(GH.ControlChart.CYCLE_TIME_CALCULATION_TOTAL),GH.ControlChart.CYCLE_TIME_CALCULATION_TOTAL):a},GH.RapidBoard.State.setCycleTimeCalculationType=function(a){GH.RapidBoard.State.setDataValue("cycleTimeCalculationType",a),GH.storage.put("gh.cycleTimeCalculationType",a)},GH.RapidBoard.State.getStoredChartIntroState=function(){return GH.storage.get("gh.charts.intro")!==!1},GH.RapidBoard.State.setChartIntroState=function(a){GH.storage.put("gh.charts.intro",a)},GH.RapidBoard.State.isChartViewOpened=function(){return GH.RapidBoard.State.getMode()===a.REPORT},GH.RapidBoard.State.getRapidViewId=function(){var a=GH.RapidBoard.State.getDataValue("rapidViewId");return _.isUndefined(a)&&(a=GH.RapidBoard.State.getMostRecentRapidViewId()),a},GH.RapidBoard.State.getRapidViewIdWithInfo=function(){var a={};return a.viewId=GH.RapidBoard.State.getDataValue("rapidViewId"),a.fromLocalStorage=!1,_.isUndefined(a.viewId)&&(a.viewId=GH.RapidBoard.State.getMostRecentRapidViewId(),a.fromLocalStorage=!0),a},GH.RapidBoard.State.getMostRecentRapidViewId=function(){return GH.storage.get("gh.latestRapidViewId")},GH.RapidBoard.State.setRapidViewId=function(a){B()&&GH.RapidBoard.State.getRapidViewId()!==a&&GH.RapidBoard.State.setLoadDataClaimed(!0),GH.RapidBoard.State.setDataValue("rapidViewId",a),GH.storage.put("gh.latestRapidViewId",a)},GH.RapidBoard.State.getSelectedIssueKey=function(){return GH.RapidBoard.State.getDataValue("selectedIssueKey")||null},GH.RapidBoard.State.getStoredSelectedIssueKey=function(){return GH.storage.get("gh.selectedIssueKey")||null},GH.RapidBoard.State.setSelectedIssueKey=function(a){GH.RapidBoard.State.setDataValue("selectedIssueKey",a),GH.storage.put("gh.selectedIssueKey",a)},GH.RapidBoard.State.setLoadDataClaimed=function(a){GH.RapidBoard.State.setDataValue("claimLoadData",a)},GH.RapidBoard.State.isLoadDataClaimed=function(){return GH.RapidBoard.State.getDataValue("claimLoadData")||!1};var R=function(){return GH.RapidBoard.State.isAgilityBoard()?null:GH.RapidBoard.State.getDataValue("selectedConfigTab")||null};GH.RapidBoard.State.isConfigOpen=function(){return Boolean(R())},GH.RapidBoard.State.getSelectedConfigTab=R;var g=function(){return GH.storage.get("selectedConfigTab")||t.INITIAL_TAB};GH.RapidBoard.State.getStoredSelectedConfigTab=g,GH.RapidBoard.State.setStoredSelectedConfigTab=function(a){GH.storage.put("selectedConfigTab",a)};var c=function(a){return GH.RapidBoard.State.setDataValue("selectedConfigTab",a)};GH.RapidBoard.State.openConfig=function(){return c(g())},GH.RapidBoard.State.setSelectedConfigTab=c,GH.RapidBoard.State.closeConfig=function(){return c(null)},GH.RapidBoard.State.setChartType=function(a){var t=GH.RapidBoard.State.getBoardSettings();_.isUndefined(a)||_.isNull(a)?delete t.chartType:t.chartType=a,GH.RapidBoard.State.setBoardSettings(t)},GH.RapidBoard.State.getChartType=function(){return GH.RapidBoard.State.getBoardSettings().chartType||""},GH.RapidBoard.State.getRetrospectiveSprintId=function(){return GH.RapidBoard.State.getBoardSettings().retrospectiveSprintId||!1},GH.RapidBoard.State.setRetrospectiveSprintId=function(a){return GH.RapidBoard.State.setBoardSetting("retrospectiveSprintId",a)},GH.RapidBoard.State.addIssueKeyToExpanded=function(a){var t=GH.RapidBoard.State.getBoardSetting(null,o)||[];return t.includes(a)||t.push(a),GH.RapidBoard.State.setBoardSetting(o,t)},GH.RapidBoard.State.removeIssueKeyFromExpanded=function(a){var t=GH.RapidBoard.State.getBoardSetting(null,o)||[];return t.includes(a)&&t.splice(t.indexOf(a),1),GH.RapidBoard.State.setBoardSetting(o,t)},GH.RapidBoard.State.getExpandedIssueKeys=function(){return GH.RapidBoard.State.getBoardSetting(null,o)||[]},GH.RapidBoard.State.setTimeFrame=function(a){var t=GH.RapidBoard.State.getBoardSettings();_.isUndefined(a)||_.isNull(a)?delete t.timeFrame:t.timeFrame=a,GH.RapidBoard.State.setBoardSettings(t)},GH.RapidBoard.State.getTimeFrame=function(){var a=GH.RapidBoard.State.getBoardSettings().timeFrame;return _.isUndefined(a)||_.isNull(a)?7:a},GH.RapidBoard.State.getBoardSettings=function(a){(_.isUndefined(a)||_.isNull(a))&&(a=GH.RapidBoard.State.getRapidViewId());var t=a||"00000";return GH.RapidBoard.State.getDataValue("boardSettings."+t)||f(t)};var f=function(a){var t=GH.storage.get("gh.boardSettings."+a);return t=t?t:{},t||(t={},GH.RapidBoard.State.setDataValue("boardSettings."+a,t)),GH.RapidBoard.State._storedBoardSettings||(GH.RapidBoard.State._storedBoardSettings=r.claim("stored-board-settings"),GH.RapidBoard.State._storedBoardSettings=GH.RapidBoard.State._storedBoardSettings?GH.RapidBoard.State._storedBoardSettings:{}),_.extend(t,w(GH.RapidBoard.State._storedBoardSettings))};GH.RapidBoard.State.setBoardSettings=function(a,t){var e=GH.RapidBoard.State.getRapidViewId();if(e&&(GH.RapidBoard.State.setDataValue("boardSettings."+e,a),GH.storage.put("gh.boardSettings."+e,a),t)){var d={activeQuickFilters:a[s],workSprintFilters:a[u],planQuickFilters:a[p]};_.isEqual(d,GH.RapidBoard.State._storedBoardSettings)||GH.RapidBoard.State._submitBoardSettingsRequest(d)}},GH.RapidBoard.State._submitBoardSettingsRequest=function(a){d.put({url:"/userData/boardSettings?rapidViewId="+GH.RapidBoard.State.getRapidViewId(),data:a}),GH.RapidBoard.State._storedBoardSettings=w(a)};var w=function(a){return JSON.parse(JSON.stringify(a))};GH.RapidBoard.State.isSwimlaneCollapsed=function(a){var t=GH.RapidBoard.State.getBoardSettings().collapsedSwimlanes||[];return t.indexOf(a)>-1},GH.RapidBoard.State.setSwimlaneCollapsed=function(a,t){var e=GH.RapidBoard.State.getBoardSettings(),d=e.collapsedSwimlanes||[];if(t)d.indexOf(a)<0&&(d.push(a),e.collapsedSwimlanes=d);else{var r=d.indexOf(a);if(r<0)return;d.splice(r,1),d.length>0?e.collapsedSwimlanes=d:delete e.collapsedSwimlanes}GH.RapidBoard.State.setBoardSettings(e)},GH.RapidBoard.State.getBoardSetting=function(a,t,e){var d=GH.RapidBoard.State.getBoardSettings(a)[t];return void 0!==d?d:e},GH.RapidBoard.State.setBoardSetting=function(a,t){var e=GH.RapidBoard.State.getBoardSettings();void 0!==t?e[a]=t:delete e[a];var d=[s,p,u].includes(a);GH.RapidBoard.State.setBoardSettings(e,d)},GH.RapidBoard.State.getNumberArrayBoardSetting=function(a,t,e){var d=GH.RapidBoard.State.getBoardSettings(a)[t]||e;return _.isArray(d)?d:[]},GH.RapidBoard.State.setNumberArrayBoardSetting=function(a,t){var e=GH.RapidBoard.State.getBoardSettings();if(void 0!==t){if(!_.isArray(t))return;e[a]=t}else delete e[a];GH.RapidBoard.State.setBoardSettings(e)},GH.BoardState={},GH.BoardState.setGlobalValue=function(a,t){GH.RapidBoard.State.setDataValue(a,t),GH.storage.put("gh."+a,t)},GH.BoardState.getGlobalValue=function(a,t){return GH.RapidBoard.State.getDataValue(a)||GH.storage.get("gh."+a)||t},GH.BoardState.setPerViewValue=function(a,t){GH.RapidBoard.State.setBoardSetting(a,t)},GH.BoardState.getPerViewValue=function(a,t){return GH.RapidBoard.State.getBoardSetting(null,a,t)},GH.RapidBoard.State.pushState=function(){GH.RapidBoard.UrlState.pushState()},GH.RapidBoard.State.replaceState=function(){GH.RapidBoard.UrlState.replaceState()},GH.RapidBoard.State.initializeState=function(){GH.RapidBoard.State.setSelectedIssueKey(GH.RapidBoard.State.getStoredSelectedIssueKey()),GH.RapidBoard.State.setWorkViewDetailsViewOpened(GH.RapidBoard.State.getStoredDetailViewOpened());var t=GH.RapidBoard.State.getStoredMode();t!==a.PLAN||GH.RapidBoard.State.isPlanModeAvailable()||(t=a.WORK),GH.RapidBoard.State.setMode(t),GH.RapidBoard.State.setChartIntroState(GH.RapidBoard.State.getStoredChartIntroState());var e=[GH.RapidBoardUrlState];i.handleDeferredResourceImport(l()&&!GH.WorkUrlState,function(){e.push(GH.WorkUrlState),GH.RapidBoard.UrlState.setHandlers(e)}),i.handleDeferredResourceImport(l()&&!GH.PlanUrlState,function(){e.push(GH.PlanUrlState),GH.RapidBoard.UrlState.setHandlers(e)}),i.handleDeferredResourceImport(l()&&!GH.ReportUrlState,function(){e.push(GH.ReportUrlState),GH.RapidBoard.UrlState.setHandlers(e)}),GH.RapidBoard.UrlState.setHandlers(e),GH.RapidBoard.UrlState.hasUrlState()&&GH.RapidBoard.UrlState.loadState();var d=GH.RapidBoard.State.isLoadingKanPlanWhileItDisabled();GH.RapidBoard.UrlState.replaceState(d),GH.RapidBoard.UrlState.init()},GH.RapidBoard.State.isPlanModeAvailable=function(){return!GH.RapidBoard.State.isIssueListBacklog()&&(GH.RapidBoard.State.isScrumBoard()||GH.RapidViewConfig.kanPlanEnabled)},GH.RapidBoard.State.isLoadingKanPlanWhileItDisabled=function(a){var t=GH.RapidBoard.UrlState.getCurrentUrlState();return a=a?a:GH.RapidBoard.UrlState.normalizeStringParam(t[S?"mode":"view"],""),!!_.isString(a)&&(a.indexOf("planning")>-1&&!GH.RapidBoard.State.isPlanModeAvailable())},GH.RapidBoard.State.isScrumBoard=function(){return GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.sprintSupportEnabled},GH.RapidBoard.State.isIssueListBacklog=function(){return GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.isIssueListBacklog},GH.RapidBoard.State.isKanbanBoard=function(){return GH.RapidViewConfig.currentData.data&&!GH.RapidViewConfig.currentData.data.sprintSupportEnabled},GH.RapidBoard.State.isAgilityBoard=function(){return GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.isSimpleBoard},GH.RapidBoard.State.isAgilityReportsEnabled=function(){return GH.RapidBoard.State.isAgilityBoard()&&GH.RapidViewConfig.currentData.data&&GH.RapidViewConfig.currentData.data.isReportsEnabled},GH.RapidBoard.State.getBoardType=function(){return GH.RapidBoard.State.isAgilityBoard()?"simple":GH.RapidBoard.State.isScrumBoard()?"scrum":GH.RapidBoard.State.isKanbanBoard()?"kanban":void 0},GH.RapidBoard.State.getBoardTypeForAnalytics=function(){return GH.RapidBoard.State.isAgilityBoard()?"Agility":GH.RapidBoard.State.isScrumBoard()?"Scrum":GH.RapidBoard.State.isKanbanBoard()?"Kanban":void 0},GH.RapidBoard.State.showEpicAsPanel=function(){return!!_.isUndefined(GH.RapidViewConfig.currentData.data.showEpicAsPanel)||GH.RapidViewConfig.currentData.data.showEpicAsPanel},GH.RapidBoard.State.changeFirstLoadState=function(){H=!1},GH.RapidBoard.State.isFirstLoad=function(){return H},GH.RapidBoard.State.isBacklogRenderingImprovementEnabled=function(){return e.isFeatureEnabled("jsw.backlog.render.performance.improvement")},GH.RapidBoard.State.isCollapsibleBacklogEnabled=function(){return e.isFeatureEnabled("jsw.collapsible.backlog")}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-keto-common-resources-set-2', location = 'jira-agile-module/includes/js/rapid/ui/print/CardPrintingController.js' */
define("jira-agile/rapid/ui/print/card-printing-controller",["require"],function(){"use strict";function e(e){return GH.RapidBoard.State.isCollapsibleBacklogEnabled()?g(e):l(e)}function r(e,r){return n.map(r,function(r){return n.extend({cardPrintingCategory:e},r)})}function i(e){var r=[],i=n.filter(e.sprintIssues,function(e){return n.size(e.issues)>0}),t=n.map(i,function(e){return{id:e.sprintId.toString(),label:e.sprintName}});return(n.size(t)>1||1===n.size(t)&&!n.isEmpty(e.backlogIssues))&&(r.push([{id:d,label:"Backlog"},{id:p,label:"All issues"}]),r.push(t)),r}var n=require("underscore"),t=(require("jquery"),require("jira-agile/rapid/ui/plan/backlog-model")),a=require("jira/featureflags/feature-manager"),s=require("jira-agile/rapid/deferred-resources-loader"),u=require("jira-agile/rapid/const/PageMode"),o=function(){return a.isFeatureEnabled("jsw.classic.keto")},p="all",d="backlog",c={printSelectedIssues:function(e){s.handleDeferredResourceImport(o()&&GH.RapidBoard.State.getMode()===u.PLAN,function(){var r=require("jira-agile/rapid/ui/print/card-printing-view");r.showPrintScreen({issues:e.issues,epics:e.epics,actionContext:{triggeredFrom:"contextMenu",viewMode:e.viewMode,boardType:e.boardType}})})},printBoardPlanView:function(r){var n=require("jira-agile/rapid/ui/print/card-printing-view");n.showPrintScreen({issues:e(r),filterItems:i(r),selectedItem:p,epics:r.epics,actionContext:{triggeredFrom:"boardMenu",viewMode:r.viewMode,boardType:r.boardType}})},printBoardWorkView:function(e){var r=require("jira-agile/rapid/ui/print/card-printing-view");r.showPrintScreen({issues:e.issues,actionContext:{triggeredFrom:"boardMenu",viewMode:e.viewMode,boardType:e.boardType}})}},l=function(e){var i=[];return n.each(e.sprintIssues,function(e){i.push.apply(i,r("sprint-"+e.sprintId,e.issues))}),i.push.apply(i,r("backlog",e.backlogIssues)),i},g=function(e){var i=[];return n.each(e.sprintIssues,function(e){e.sprintId===t.BACKLOG_ID?i.push.apply(i,r(t.BACKLOG_ID,e.issues)):i.push.apply(i,r("sprint-"+e.sprintId,e.issues))}),i};return c});;
;
/* module-key = 'jira.webresources:favourite-button', location = '/includes/jira/favourite-button/favourite-button-constants.js' */
define("jira/favourite-button/constants",[],function(){var a={BOARDS:{id:"boards",backendUrlPart:"BOARDS",analytics:{source:"boardScreen",actionSubject:"board"}},FILTERS:{id:"filters",backendUrlPart:"FILTERS",analytics:{source:"filterScreen",actionSubject:"filter"}},DASHBOARDS:{id:"dashboards",backendUrlPart:"DASHBOARDS",analytics:{source:"dashboardScreen",actionSubject:"dashboard"}}},r={STARRED:"starred",UNSTARRED:"unstarred"};return{FAVOURITE_ITEM_TYPES:a,TRACK_ANALYTICS_ACTIONS:r}});;
;
/* module-key = 'jira.webresources:favourite-button', location = '/includes/jira/favourite-button/favourite-button-api.js' */
define("jira/favourite-button/api",["jquery","jira/featureflags/feature-manager"],function(t,e){"use strict";function r(e,r,n){var a=new t.Deferred;return t.ajax({url:r,type:e.toUpperCase(),contentType:"application/json",data:n,dataType:"json",timeout:o}).done(function(t){a.resolve(t)}).fail(function(t,e){a.reject({error:t.status,textStatus:e})}),a.promise()}function n(t,e){return AJS.contextPath()+"/rest/internal/2/favourites/"+t.backendUrlPart+"/"+e}function a(t,e){var a=n(t,e);return r("get",a)}function i(t,e,a){var i=n(t,e);if(!a)return r("delete",i);i=AJS.contextPath()+"/rest/internal/2/favourites";var o={entity:{id:e,type:t.id.toLowerCase()},beforeEntityPosition:null};return r("post",i,o)}var o=15e3;return{getIsFavourite:a,updateIsFavourite:i}});;
;
/* module-key = 'jira.webresources:favourite-button', location = 'includes/jira/favourite-button/FavouriteButton.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.FavouriteButton&&(JIRA.Templates.FavouriteButton={}),JIRA.Templates.FavouriteButton.renderFavouriteButton=function(t,e){return""+aui.buttons.button({text:"",iconType:"aui",iconClass:"favourite-btn-icon aui-icon-small favourite-btn-icon--"+(t.isFavourite?"star":"unstar"),extraClasses:["favourite-btn aui-button-subtle "+(null==t.isFavourite?"favourite-btn--no-value":"")]})};;
;
/* module-key = 'jira.webresources:favourite-button', location = '/includes/jira/favourite-button/FavouriteButton.js' */
define("jira/favourite-button/favourite-button",["jquery","jira/favourite-button/constants","jira/favourite-button/api","jira/featureflags/feature-manager","jira/container-api"],function(t,e,i,n,o){function a(){AJS.flag({type:"error",close:"auto",title:"Something\'s gone wrong",body:"You cannot star items right now due to an error."})}var s,r=require("jira/analytics/web-client"),u=o.APIs.getFavouriteAPI,v=require("jira/util/data/meta"),c=function(e){this.entityType=e.entityType,null!=e.entityId&&(this.entityId=e.entityId.toString()),this.favouriteButtonElement=t(),this.isFavourite=e.isFavouriteInitialValue;var i=e.onUpdateCallbacks||{};this.onOptimisticUpdate=i.onOptimisticUpdate||t.noop,this.onUpdateRequestSuccess=i.onUpdateRequestSuccess||t.noop,this.onUpdateRequestError=i.onUpdateRequestError||t.noop,this._isFavouriteButtonEnabled()&&this._init()};return c.prototype._init=function(){var e=this;this.analyticsEventProps=t.extend({},this.entityType.analytics,{actionSubjectId:this.entityId}),void 0===this.isFavourite&&i.getIsFavourite(this.entityType,this.entityId).then(function(t){e._setIsFavourite(t)}).fail(function(){e._setIsFavourite(!1)})},c.prototype._isLoggedIn=function(){return!!v.get("remote-user")},c.prototype._isFavouriteButtonEnabled=function(){return this._isLoggedIn()&&null!=this.entityId&&this.entityType},c.prototype._sendStarringAnalyticsEvent=function(t){var i=t?e.TRACK_ANALYTICS_ACTIONS.STARRED:e.TRACK_ANALYTICS_ACTIONS.UNSTARRED;this._sendTrackAnalyticsEvent(i)},c.prototype._sendTrackAnalyticsEvent=function(e){r.sendTrackEvent(t.extend({},this.analyticsEventProps,{action:e}))},c.prototype._sendUIButtonClickedAnalyticsEvent=function(){r.sendUIEvent(t.extend({},this.analyticsEventProps,{action:"clicked",actionSubject:"button",actionSubjectId:"starButton"}))},c.prototype._setIsFavourite=function(t){var e=this.favouriteButtonElement.find(".favourite-btn-icon");this.isFavourite=t,void 0!==this.isFavourite&&this.favouriteButtonElement.removeClass("favourite-btn--no-value"),t?e.removeClass("favourite-btn-icon--unstar").addClass("favourite-btn-icon--star"):e.removeClass("favourite-btn-icon--star").addClass("favourite-btn-icon--unstar")},c.prototype._sendUpdateToJiraFrontend=function(t){var e=this;u().then(function(i){i.changeFavourite({id:e.entityId,type:e.entityType.id,value:t}).then(function(){e._sendStarringAnalyticsEvent(t)})})},c.prototype._onValueFromJiraFrontend=function(t){var e=t[this.entityType.id],i=e&&e[this.entityId];if(i){this.isUpdateRequestInProgress=i.pending;var n=i.value;this.isFavourite!==n&&(this._setIsFavourite(n),this.onOptimisticUpdate(n))}},c.prototype._updateIsFavourite=function(t){var e=this;this.isUpdateRequestInProgress||(this.isUpdateRequestInProgress=!0,this._setIsFavourite(t),this.onOptimisticUpdate(t),this._sendUIButtonClickedAnalyticsEvent(),u().then(function(){e._sendUpdateToJiraFrontend(t)},function(){i.updateIsFavourite(e.entityType,e.entityId,t).then(function(){e.isUpdateRequestInProgress=!1,e._sendStarringAnalyticsEvent(t),e.onUpdateRequestSuccess(t)}).fail(function(){e.isUpdateRequestInProgress=!1,a();var i=!t;e._setIsFavourite(i),e.onUpdateRequestError(t)})}))},c.prototype.setAnalyticsEventProps=function(e){this._isFavouriteButtonEnabled()&&(this.analyticsEventProps=t.extend(!0,this.analyticsEventProps,e))},c.prototype.onClick=function(t){var e=!this.isFavourite;this._updateIsFavourite(e),t.stopPropagation(),t.preventDefault(),this.favouriteButtonElement.blur()},c.prototype.render=function(){if(this._isFavouriteButtonEnabled()){this.favouriteButtonElement=AJS.$(JIRA.Templates.FavouriteButton.renderFavouriteButton({isFavourite:this.isFavourite}));var t=this;return this.favouriteButtonElement.tooltip({gravity:"n",title:function(){return t.isFavourite?"Unstar":"Star"}}).on("click",this.onClick.bind(this)),u().then(function(e){s||(s=t._onValueFromJiraFrontend.bind(t),e.registerFavouriteChangeCallback(s))}),this.favouriteButtonElement}},c.prototype.onUnmount=function(){if(this._isFavouriteButtonEnabled()){u().then(function(t){t.unregisterFavouriteChangeCallback(s),s=void 0})}},c.prototype.remove=function(){this._isFavouriteButtonEnabled()&&(this.onUnmount(),this.favouriteButtonElement.length&&this.favouriteButtonElement.remove())},c});;
;
/* module-key = 'jira.webresources:have-i-seen-it', location = '/js/featureflags/have-i-seen-it.js' */
define("jira/featureflags/have-i-seen-it",["exports"],function(e){var t="/gateway/api/flag/my",n=function(e,t,n,a){200!=t.status?AJS.log(e+" Response was had a status of '"+t.status+"' saying '"+t.statusText+"'"):AJS.log("There was an error processing the response. Error was '"+n+"'")},a=function(e){var a=AJS.$.Deferred(),s=a.promise(),r=AJS.$.get(t+"?flagKey="+e);return r.done(function(e){a.resolve(e.status)}),r.error(function(e,t,a){n("Failed to get have seen it.",e,t,a)}),s},s=function(e){AJS.$.ajax({type:"POST",url:t,contentType:"application/json",data:JSON.stringify({flagKey:e}),dataType:"json",error:function(e,t,a){n("Failed to set message as seen it",e,t,a)}})},r=function(e,t,n){return e+"-"+t+"."+n};e.setAsSeenIt=function(e,t,n){s(r(e,t,n))},e.haveISeenIt=function(e,t,n){return a(r(e,t,n))}});;
;
/* module-key = 'jira.webresources:project-property-service', location = '/js/service/project-property-service.js' */
define("jira/service/project-property-service",["exports"],function(e){var r=function(e,r){return"/rest/api/2/project/"+e+"/properties/"+r},t=function(e,r,t,s){404!==r.status&&(200!==r.status?AJS.log(e+" Response was had a status of '"+r.status+"' saying '"+r.statusText+"'"):AJS.log("There was an error processing the response. Error was '"+t+"'"))},s=function(e,s,o){var n=AJS.$.Deferred(),a=n.promise(),i=AJS.$.get(r(e,s));return i.done(function(e){n.resolve(e.value)}),i.error(function(e,r,s){t("Failed to get project property.",e,r,s),404===e.status?n.resolve(o):n.reject(s)}),a};e.getProperty=s});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/TraceUtilsHelper.js' */
define("jira-agile/rapid/trace-utils-helper",["require","jira/featureflags/feature-manager"],function(e,n){var r={},a=function(){return n.isFeatureEnabled("jsw.classic.rapidboards.trace.util.detail")},t=new Set;return r.hasUserChangedRoute=function(){return t.size>1},r.flushTrace=function(){t.clear()},r.additionalDebugAttributesForWorkController=function(){if(a()){var e=AJS.$("#ghx-work"),n=e.find(".ghx-sad-columns .ghx-column"),r=e.find(".ghx-no-active-sprint-message"),i=e.find(".ghx-issue");return t.add(window.location.href),{issueNumBackend:GH.RapidBoard.State.numberOfIssues.get(),numEmptyBoards:r.length,numEmptyColumns:n.length,numIssues:i.length,url:window.location.href}}},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/RetryUtils.js' */
define("jira-agile/rapid/retry-utils",["require","jira/featureflags/feature-manager"],function(e,r){function a(e,r,i){var t=e();0!==r&&t!==!0&&setTimeout(function(){a(e,r-1,i)},i)}var i={};return i.retryDelay=function(e,r,i,t){e===!0?a(r,i,t):a(r,1,500)},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReleaseExistingVersionDialog.soy' */
// This file was automatically generated from ReleaseExistingVersionDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.ReleaseExistingVersionDialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.ReleaseExistingVersionDialog == 'undefined') { GH.tpl.dialogs.ReleaseExistingVersionDialog = {}; }


GH.tpl.dialogs.ReleaseExistingVersionDialog.invisibleIssuePartial = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('{0,choice,1#This issue|1\x3cThese issues} will no longer be visible on your board if you release \x3cstrong\x3e{1}\x3c/strong\x3e.',typeof (opt_data.issuesCount) === 'number' ? opt_data.issuesCount : soy.$$escapeHtml(opt_data.issuesCount),typeof (opt_data.versionName) === 'number' ? opt_data.versionName : soy.$$escapeHtml(opt_data.versionName)))) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.ReleaseExistingVersionDialog.invisibleIssuePartial.soyTemplateName = 'GH.tpl.dialogs.ReleaseExistingVersionDialog.invisibleIssuePartial';
}


GH.tpl.dialogs.ReleaseExistingVersionDialog.issueUnreleasedVersionVisible = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml('Note that any issues in other unreleased versions will still be visible on your board.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.ReleaseExistingVersionDialog.issueUnreleasedVersionVisible.soyTemplateName = 'GH.tpl.dialogs.ReleaseExistingVersionDialog.issueUnreleasedVersionVisible';
}


GH.tpl.dialogs.ReleaseExistingVersionDialog.mayRemoveUnresolvedIssues = function(opt_data, opt_ignored) {
  return '<div class="description">' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('Releasing \x3cstrong\x3e{0}\x3c/strong\x3e may remove {1,choice,1#this issue|1\x3cthese issues} from your board.',typeof (opt_data.versionName) === 'number' ? opt_data.versionName : soy.$$escapeHtml(opt_data.versionName),typeof (opt_data.issuesCount) === 'number' ? opt_data.issuesCount : soy.$$escapeHtml(opt_data.issuesCount)))) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.ReleaseExistingVersionDialog.mayRemoveUnresolvedIssues.soyTemplateName = 'GH.tpl.dialogs.ReleaseExistingVersionDialog.mayRemoveUnresolvedIssues';
}


GH.tpl.dialogs.ReleaseExistingVersionDialog.willRemoveUnresolvedIssues = function(opt_data, opt_ignored) {
  return '<div class="description">' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('Releasing \x3cstrong\x3e{0}\x3c/strong\x3e will remove these issues from your board.',typeof (opt_data.versionName) === 'number' ? opt_data.versionName : soy.$$escapeHtml(opt_data.versionName)))) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.ReleaseExistingVersionDialog.willRemoveUnresolvedIssues.soyTemplateName = 'GH.tpl.dialogs.ReleaseExistingVersionDialog.willRemoveUnresolvedIssues';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/BoardDataCacheService.js' */
define("jira-agile/rapid/ui/board-data-cache-service",["require"],function(){"use strict";var e=1440,r=60*e*1e3,t={};return t.storeData=function(r,t){t.createdTime=(new Date).getTime();var a=LZString.compressToUTF16(JSON.stringify(t));return lscache.flushExpired(),lscache.set(r,a,e)},t.getData=function(e){try{var r=LZString.decompressFromUTF16(lscache.get(e)),a=JSON.parse(r);return t._isDataExpired(a)?null:a}catch(i){return null}},t._isDataExpired=function(e){if(!e.createdTime)return!0;var t=(new Date).getTime();return t-e.createdTime>=r},t});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/SwimlaneStalker.js' */
!function(){GH.SwimlaneStalker={};var e=400;require("jira/featureflags/feature-manager");GH.SwimlaneStalker._poolStalker=function(){var e=AJS.$("#ghx-column-header-group");if(e.length>0){var i=AJS.$("#ghx-pool"),r=l(e);GH.SwimlaneView.withStickyHeaders||i.css({"padding-top":r});var o=t(i,e,r);i.off("scroll.swimlaneStalker").on("scroll.swimlaneStalker",o),o(a)}},GH.SwimlaneStalker.poolStalker=GH.SwimlaneStalker._poolStalker;var a="positionImmediately",l=function(e){var a=AJS.$("#ghx-swimlane-header-stalker"),l=e.outerHeight();return GH.SwimlaneView.withStickyHeaders?l:a.is(":visible")?l-a.outerHeight():l};GH.SwimlaneStalker.repositionColumnHeaders=function(){var e=AJS.$("#ghx-pool"),i=AJS.$("#ghx-column-header-group"),r=l(i),o=t(e,i,r);o(a)},GH.SwimlaneStalker.createPoolStalker=function(e,a){var l=AJS.$("#ghx-swimlane-header-stalker"),t=AJS.$("#ghx-pool .ghx-swimlane .ghx-swimlane-header");if(i(a),t.length){var r=AJS.$("#ghx-swimlane-header-stalker").outerHeight(),o=void 0;if(_.each(t,function(e,a){return e=AJS.$(e),(0===a||e.position().top<=r)&&void(o=e)}),o){var n=o.clone(),s=o.parent();l.toggleClass("ghx-closed",s.hasClass("ghx-closed")),l.empty().append(n)}}};var t=function(e,l,t){var s=AJS.$("#ghx-swimlane-header-stalker"),h=AJS.$("#ghx-pool .ghx-swimlane-header"),S=e.find(".ghx-columns");return function(d){if(GH.SwimlaneView.withStickyHeaders){GH.SwimlaneStalker.createPoolStalker(e,l);var c=e.scrollTop();0!==c&&s.trigger("test.show.swimlane.stalker"),AJS.$("#ghx-pool").addClass("ghx-hide-first-swimlane-header")}else{d===a?(i(l,e),o(l,e,S),r(l,e)):(n(l,e,S),r(l,e));var w=e.scrollTop();if(0===w)return void s.hide();if(s.show(),s.trigger("test.show.swimlane.stalker"),!h.length)return;var g=void 0;if(_.each(h,function(e){return e=AJS.$(e),e.position().top<=t&&void(g=e)}),!g)return;var p=g.clone(),m=g.parent();s.toggleClass("ghx-closed",m.hasClass("ghx-closed")),s.empty().append(p)}}};GH.SwimlaneStalker._createPoolScrollHandler=t;var i=function(e,a){GH.SwimlaneView.withStickyHeaders?e.addClass("ghx-sticky"):e.css({position:"absolute",top:a.scrollTop()+"px",left:0,width:"auto"})},r=_.debounce(i,e),o=function(e,a,l){if(!GH.SwimlaneView.withStickyHeaders){var t=l.width(),i=a.offset();e.css({position:"fixed",top:i.top,left:i.left,width:t})}},n=_.debounce(o,e,!0)}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/ActiveSprintEmptyView.js' */
define("jira-agile/rapid/ui/work/ActiveSprintEmptyView",["require","jquery","jira-agile/rapid/ui/SPConfigController"],function(e,i,t){"use strict";function r(e,t,r,a,d,f){var g,v,E;d?(v=GH.RapidBoard.getRapidViewConfigurationUrl(r,"filter"),g=GH.tpl.rapid.activesprintemptyview.tooManyIssues):a?(v=GH.RapidBoard.getRapidViewConfigurationUrl(r,"columns"),g=GH.tpl.rapid.activesprintemptyview.noMappedColumns):e?(v=AJS.format(n,r),g=GH.tpl.rapid.activesprintemptyview.noActiveSprint,E=l):t?(v=AJS.format(o,r),g=GH.tpl.rapid.activesprintemptyview.clearAllFilters,E=p):(v=AJS.format(s,r),g=GH.tpl.rapid.activesprintemptyview.noIssue,E=c),this.linkAddr=v,this.view=i(g({linkAddr:v,boardSettingClass:"board-settings-link"})),this.secondLineView=this.view.find("p"),this.ctaLink=this.secondLineView.find("a:not(.board-settings-link)").click(E),this.rapidViewId=r,this.secondLineView.find("a.board-settings-link").click(u.bind(this)),this.ctaLinkHandler=E,GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,this._reloadView,this),i(f).append(this.view)}var a=AJS.contextPath(),n=a+"/secure/RapidBoard.jspa?rapidView={0}&view=planning.nodetail",o=a+"/secure/RapidBoard.jspa?rapidView={0}",s=a+"/secure/CreateIssue!default.jspa",d={HIDDEN:"hidden",DASHBOARD_MODE:"dashboard-mode",NO_MAPPED_COLUMNS_MODE:"no-mapped-columns-mode"},l=function(e){e.preventDefault(),GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_PLAN_MODE)},p=function(e){e.preventDefault(),GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_ALL_FILTERS_CLEARING)},u=function(e){e.preventDefault(),t.openConfig("columns")},c=function(i){var t=e("jira/featureflags/feature-manager"),r=function(){return t.isFeatureEnabled("cbb.heritage")},a=e("jira-agile/rapid/deferred-resources-loader");a.handleDeferredResourceImport(r()&&!GH.DetailsView,function(){if(i.preventDefault(),t.isFeatureEnabled("project.config.pce.modern.global-issue-create.trigger")){var r=e("jira/util/events");r.trigger("openIssueCreateDialog",{payload:{target:i.target}})}else{var a=e("quick-edit/init/create");a.initIssueDialog({target:i.target})}})};return r.prototype.handleOnDashboardMode=function(){this.view.addClass(d.DASHBOARD_MODE)},r.prototype.handleNoMappedColumnsMode=function(){this.view.addClass(d.NO_MAPPED_COLUMNS_MODE)},r.prototype._reloadView=function(e){e&&this.secondLineView.removeClass(d.HIDDEN)},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/ActiveSprintEmptyView.soy' */
// This file was automatically generated from ActiveSprintEmptyView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.activesprintemptyview.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.activesprintemptyview == 'undefined') { GH.tpl.rapid.activesprintemptyview = {}; }


GH.tpl.rapid.activesprintemptyview.noMappedColumns = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: 'Statuses are not mapped to the board columns', contentHtml: AJS.format('Check the \x3ca href\x3d\x22{0}\x22 class\x3d\x22{1}\x22\x3eboard settings\x3c/a\x3e',opt_data.linkAddr,opt_data.boardSettingClass)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noMappedColumns.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noMappedColumns';
}


GH.tpl.rapid.activesprintemptyview.tooManyIssues = function(opt_data, opt_ignored) {
  return '<div class="ghx-no-active-sprint-message"><div class="ghx-no-active-sprint-content ghx-too-many-issues"><div class="ghx-issue-limit-exceeded-icon"></div><h3>' + soy.$$escapeHtml('Too many issues are trying to load') + '</h3><p class="hidden">' + soy.$$escapeHtml('It will take you eons to scroll through mountains of issues.') + ' <a href="' + soy.$$escapeHtml(opt_data.linkAddr) + '" class="' + soy.$$escapeHtml(opt_data.boardSettingClass) + '">' + soy.$$escapeHtml('Update board filter') + '</a></p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.tooManyIssues.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.tooManyIssues';
}


GH.tpl.rapid.activesprintemptyview.noActiveSprint = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: 'There are no active sprints', contentHtml: AJS.format('Start sprints in the \x3ca href\x3d\x22{0}\x22\x3eBacklog\x3c/a\x3e',opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noActiveSprint.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noActiveSprint';
}


GH.tpl.rapid.activesprintemptyview.clearAllFilters = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: 'Issues are currently filtered', contentHtml: AJS.format('\x3ca href\x3d\x22{0}\x22\x3eClear all filters\x3c/a\x3e',opt_data.linkAddr)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.clearAllFilters.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.clearAllFilters';
}


GH.tpl.rapid.activesprintemptyview.noIssue = function(opt_data, opt_ignored) {
  return '' + GH.tpl.rapid.activesprintemptyview.emptyMessage({heading: 'No issues here', contentHtml: AJS.format('\x3ca href\x3d\x22{0}\x22\x3eCreate an issue\x3c/a\x3e or check the \x3ca class\x3d\x22{1}\x22\x3eboard settings\x3c/a\x3e',opt_data.linkAddr,opt_data.boardSettingClass)});
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.noIssue.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.noIssue';
}


GH.tpl.rapid.activesprintemptyview.emptyMessage = function(opt_data, opt_ignored) {
  return '<div class="ghx-no-active-sprint-message"><div class="ghx-no-active-sprint-content"><div class="ghx-no-active-sprint-icon"></div><h3>' + soy.$$escapeHtml(opt_data.heading) + '</h3><p class="hidden">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</p></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.activesprintemptyview.emptyMessage.soyTemplateName = 'GH.tpl.rapid.activesprintemptyview.emptyMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/SwimlaneView.js' */
var _slicedToArray=function(){function e(e,a){var i=[],l=!0,n=!1,t=void 0;try{for(var s,r=e[Symbol.iterator]();!(l=(s=r.next()).done)&&(i.push(s.value),!a||i.length!==a);l=!0);}catch(o){n=!0,t=o}finally{try{!l&&r["return"]&&r["return"]()}finally{if(n)throw t}}return i}return function(a,i){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return e(a,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(){"use strict";function e(){GH.ReleaseVersionTrigger.on(GH.ReleaseVersionTrigger.RELEASE_VERSION,function(e){if(e){var a=require("jira-agile/rapid/ui/dialog/release-existing-version-dialog");a.show(e)}else GH.SwimlaneView.openReleaseVersionDialog()},GH.SwimlaneView)}var a=require("jira-agile/tooltip"),i=require("jira-agile/browser-metrics/browser-metrics-util"),l=require("jira-agile/rapid/deferred-resources-loader"),n=require("jira-agile/rapid/const/PageMode"),t=require("jira-agile/rapid/trace-utils"),s=require("jira-agile/rapid/trace-utils-helper");GH.SwimlaneView={},GH.SwimlaneView.visible=!1,GH.SwimlaneView.detailViewColumnId=!1,GH.SwimlaneView.rapidViewData={},GH.SwimlaneView.NARROW_CARD_WIDTH=200,GH.SwimlaneView.XTRA_NARROW_CARD_WIDTH=150,GH.SwimlaneView.init=function(){AJS.$(document).on("click keydown","#ghx-pool .ghx-swimlane .ghx-swimlane-header .js-expander",GH.SwimlaneView.toggleCollapsedHandler),AJS.$(document).on("click","#ghx-swimlane-header-stalker .ghx-swimlane-header .js-expander",GH.SwimlaneView.floatingDockToggleCollapsedHandler),AJS.$(document).on("click",".js-view-action-expand-all",function(e){GH.SwimlaneView.expandAll(e),AJS.trigger("analyticsEvent",{name:"jira-software."+(GH.RapidBoard.State.getMode()||"board")+".boardmenu.click.expand-all-swimlanes"})}),AJS.$(document).on("click",".js-view-action-collapse-all",function(e){GH.SwimlaneView.collapseAll(e),AJS.trigger("analyticsEvent",{name:"jira-software."+(GH.RapidBoard.State.getMode()||"board")+".boardmenu.click.collapse-all-swimlanes"})}),GH.RapidBoard.State.getMode()===n.WORK?l.actionOnDeferParsingComplete(function(){AJS.$(GH).bind(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED,function(){GH.WorkDataLoader.clearEtag(),GH.WorkController.reload()})}):AJS.$(GH).bind(GH.Dialogs.ReleaseVersionDialog.EVENT_VERSION_RELEASED,function(){GH.WorkDataLoader.clearEtag(),GH.WorkController.reload()}),AJS.$(document).on("click","button.js-sync",function(){GH.WorkController.analytics.trigger("movetodonebutton.clicked");var e=AJS.$(this).closest(".ghx-swimlane-header").attr("data-issue-key"),a=GH.GridDataController.getModel().getIssueDataByKey(e);GH.WorkController.resolveParentTask(a)}),AJS.$(document).delegate(".ghx-show-old-link","click",GH.SwimlaneView.handleShowOldDoneIssuesClick)},GH.SwimlaneView.show=function(){t.startSpan("swimlane-view-show",{start:s.additionalDebugAttributesForWorkController()}),GH.SwimlaneView.visible=!0,GH.SwimlaneView.renderSwimlanes(),t.endSpan("swimlane-view-show",{end:s.additionalDebugAttributesForWorkController()})},GH.SwimlaneView.hide=function(){GH.SwimlaneView.visible=!1},GH.SwimlaneView.setRapidView=function(e){GH.SwimlaneView.rapidViewData=e},GH.SwimlaneView.setRapidViewConfig=function(e){GH.SwimlaneView.rapidViewConfig=e},GH.SwimlaneView.withStickyHeaders=function(){var e=document.createElement("a"),a=e.style;return a.cssText="position:sticky;position:-webkit-sticky;position:-ms-sticky;",a.position.indexOf("sticky")!==-1}(),GH.SwimlaneView.withStickyHeaders?GH.SwimlaneView.renderSwimlanes=function(){t.startSpan("swimlane-view-render-swimlanes",{start:s.additionalDebugAttributesForWorkController(),withStickyHeaders:!0});var e=AJS.$("#ghx-pool-column");if(!(e.length<1)){e.hide();var i=GH.GridDataController.getModel();e.css({position:"relative"});var l=i.getColumns(),n=GH.tpl.rapid.swimlane.renderColumnsHeader({columns:l,statistics:GH.GridDataController.getStatistics()}),r=AJS.$("#ghx-column-header-group"),o=[];o.push(n);var d=AJS.$("#ghx-pool");GH.SwimlaneStalker.createPoolStalker(d,r),GH.SwimlaneStalker.poolStalker();var w=i.hasSwimlanes();w?d.addClass("ghx-has-swimlanes"):d.removeClass("ghx-has-swimlanes");var m=i.isParentChildStrategy();m?d.addClass("ghx-parent-child"):d.removeClass("ghx-parent-child");var g=GH.SwimlaneView.getCalculatedDisplayIssueKeys(),S=i.getSwimlanes(),u=i.getCells(),c=i.getIssues(),p=i.getGroupData(),H=_.filter(S,function(e){var a=i.getSwimlaneIssueCount(e.id);return m&&!e.defaultSwimlane||a>0});_.each(H,function(e,a){var n=i.getSwimlaneIssueCount(e.id),t=w&&GH.RapidBoard.State.isSwimlaneCollapsed(e.id);o.push(GH.tpl.rapid.swimlane.renderSwimlane({columns:l,swimlane:e,swimlaneStrategy:i.getSwimlaneStrategy(),swimlaneTitle:GH.SwimlaneView.getSwimlaneTitle(e,n),cells:u,issues:c,index:a,collapsed:t,issueCount:n,groupData:p,displayIssueKeys:g,selectedIssueKeys:GH.SwimlaneView.getSelectedKeysMap(),mainSelectedIssue:GH.WorkSelectionController.getSelectedIssueKey(),statLabel:GH.SwimlaneView.getStatisticLabel(),isRankable:GH.RankingModel.canUserRank(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),isLastSwimlane:a===H.length-1}))});var G=0===H.length;d.toggleClass("ghx-no-issues",G),G&&o.push(GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns({columns:l})),o.push(GH.tpl.rapid.swimlane.renderEndOfPool({rendered:(new Date).getTime()})),d[0].innerHTML=o.join(""),H.length||GH.SwimlaneView.renderActiveSprintEmptyMsg(d),GH.SwimlaneView.setBusted(d),GH.SwimlaneView.registerReleaseActionEvents(),a.tipsify({context:d,selector:".ghx-column-headers .ghx-xtra-narrow-card h2"}),r.addClass("ghx-sticky"),d.addClass("ghx-hide-first-swimlane-header"),e.show(),t.endSpan("swimlane-view-render-swimlanes",{end:s.additionalDebugAttributesForWorkController(),hasNoIssues:G})}}:GH.SwimlaneView.renderSwimlanes=function(){t.startSpan("swimlane-view-render-swimlanes");var e=AJS.$("#ghx-pool");if(!(e.length<1)){GH.SwimlaneStalker.poolStalker(),e.hide();var i=GH.GridDataController.getModel(),l=i.hasSwimlanes();l?e.addClass("ghx-has-swimlanes"):e.removeClass("ghx-has-swimlanes");var n=i.isParentChildStrategy();n?e.addClass("ghx-parent-child"):e.removeClass("ghx-parent-child");var r=i.getColumns(),o=[GH.tpl.rapid.swimlane.renderColumnsHeader({columns:r,statistics:GH.GridDataController.getStatistics()})],d=GH.SwimlaneView.getCalculatedDisplayIssueKeys(),w=i.getSwimlanes(),m=i.getCells(),g=i.getIssues(),S=i.getGroupData(),u=_.filter(w,function(e){var a=i.getSwimlaneIssueCount(e.id);return n&&!e.defaultSwimlane||a>0});_.each(u,function(e,a){var n=i.getSwimlaneIssueCount(e.id),t=l&&GH.RapidBoard.State.isSwimlaneCollapsed(e.id);o.push(GH.tpl.rapid.swimlane.renderSwimlane({columns:r,swimlane:e,swimlaneStrategy:i.getSwimlaneStrategy(),swimlaneTitle:GH.SwimlaneView.getSwimlaneTitle(e,n),cells:m,issues:g,index:a,collapsed:t,issueCount:n,groupData:S,displayIssueKeys:d,selectedIssueKeys:GH.SwimlaneView.getSelectedKeysMap(),mainSelectedIssue:GH.WorkSelectionController.getSelectedIssueKey(),statLabel:GH.SwimlaneView.getStatisticLabel(),isRankable:GH.RankingModel.canUserRank(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard(),isLastSwimlane:a===u.length-1}))});var c=0===u.length;e.toggleClass("ghx-no-issues",c),c&&o.push(GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns({columns:r})),o.push(GH.tpl.rapid.swimlane.renderEndOfPool({rendered:(new Date).getTime()})),e[0].innerHTML=o.join(""),u.length||GH.SwimlaneView.renderActiveSprintEmptyMsg(e),GH.SwimlaneView.setBusted(e),GH.SwimlaneView.registerReleaseActionEvents(),e.show(),a.tipsify({context:e,selector:".ghx-column-headers .ghx-xtra-narrow-card h2"}),t.endSpan("swimlane-view-render-swimlanes",{end:s.additionalDebugAttributesForWorkController(),hasNoIssues:c})}},GH.SwimlaneView.renderActiveSprintEmptyMsg=function(e){var a=GH.UserData.hasUser(),i=GH.SwimlaneView.rapidViewData.sprintSupportEnabled&&!GH.WorkControls.hasSprints(),l=GH.WorkControls.getActiveQuickFilterCount(),n=GH.RapidBoard.State.getRapidViewId(),t=GH.GridDataController.isIssueLimitExceeded(),s=require("jira-agile/rapid/ui/work/ActiveSprintEmptyView"),r=new s(i,l,n,(!1),t,e);a&&(i||l?GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,!0):GH.RapidViewConfig.fetchConfiguration(n).done(function(e){GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,e.canEdit)})),GH.WorkController.setActiveSprintEmptyMsg(r)},GH.SwimlaneView.rerenderCellOfIssue=function(e){var a=GH.GridDataController.getModel().getIssuePositionByKey(e);a&&GH.SwimlaneView.rerenderCell(a.swimlaneId,a.columnId)},GH.SwimlaneView.rerenderCell=function(e,a){var i=GH.GridDataController.getModel(),l={swimlane:i.getSwimlaneById(e),column:i.getColumnById(a),cells:i.getCells(),issues:i.getIssues(),groupData:i.getGroupData(),displayIssueKeys:GH.SwimlaneView.getCalculatedDisplayIssueKeys(),selectedIssueKeys:GH.SwimlaneView.getSelectedKeysMap(),mainSelectedIssue:GH.WorkSelectionController.getSelectedIssueKey(),statLabel:GH.SwimlaneView.getStatisticLabel(),isRankable:GH.RankingModel.canUserRank(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard()},n=GH.tpl.rapid.swimlane.renderIssueColumn(l),t=AJS.$(n),s=AJS.$("#ghx-pool").find('.ghx-swimlane[swimlane-id="'+e+'"]').find(".ghx-columns").find('.ghx-column[data-column-id="'+a+'"]');s.replaceWith(t),GH.WorkDragAndDrop.initDraggables(AJS.$("#ghx-pool"))},GH.SwimlaneView.getSelectedKeysMap=function(){var e=GH.WorkSelectionController.getSelectedIssueKeys(),a={};return _.each(e,function(e){a[e]=!0}),a},GH.SwimlaneView.getIssueCountLabel=function(e,a){return e.parentKey?AJS.format("{0,choice,0#0 sub-tasks|1#1 sub-task|1\u003c{0,number} sub-tasks}",a):AJS.format("{0,choice,0#0 issues|1#1 issue|1\u003c{0,number} issues}",a)},GH.SwimlaneView.getSwimlaneTitle=function(e,a){var i=GH.SwimlaneView.getIssueCountLabel(e,a);if(e.parentKey){var l=GH.GridDataController.getModel().getIssueDataByKey(e.parentKey);l&&(i+=" - "+l.summary)}else e.description?i+=" - "+e.description:e.query&&(i+=" - "+e.query);return i},GH.SwimlaneView.registerReleaseActionEvents=_.once(function(){GH.UserData.hasUser()&&(GH.SwimlaneView.rapidViewData.sprintSupportEnabled||e())}),GH.SwimlaneView.openReleaseVersionDialog=function(){var e=GH.RapidBoard.State.getRapidViewId(),a=GH.GridDataController.getModel().getDoneColumn();GH.RapidBoard.State.getMode()===n.WORK?l.getDeferBatchParsed()?GH.Dialogs.ReleaseVersionDialog.showDialog(e,a.id):l.actionOnDeferParsingComplete(function(){GH.Dialogs.ReleaseVersionDialog.showDialog(e,a.id)}):GH.Dialogs.ReleaseVersionDialog.showDialog(e,a.id)},GH.SwimlaneView.setBusted=function(e){GH.GridDataController.hasBustedColumns()?AJS.$(e).addClass("ghx-busted"):AJS.$(e).removeClass("ghx-busted")},GH.SwimlaneView.getCalculatedDisplayIssueKeys=function(e){var a=GH.GridDataController.getModel(),i=function(e){var a=e.split("-"),i=_slicedToArray(a,2),l=i[0],n=i[1];return{pkey:l,number:n}},l={};return e?l[e]=i(e):Object.keys(a.getIssues()).forEach(function(e){l[e]=i(e)}),l},GH.SwimlaneView.rerenderIssue=function(e){var a=GH.GridDataController.getModel(),i=a.getIssueDataByKey(e);if(i){GH.SwimlaneView.rerenderIssueCard(i),GH.SwimlaneView.updateSwimlaneHeader(i),GH.SwimlaneView.rerenderFakeParents(i);var l=AJS.$('.ghx-issue[data-issue-key="'+i.key+'"]'),n=l.parents(".ghx-column");GH.SwimlaneView.updateIssueLayoutAccording2Size(l,n.width())}},GH.SwimlaneView.rerenderFakeParents=function(e){if(!e.parentKey){var a=AJS.$('.js-fake-parent[data-issue-key="'+e.key+'"]');if(!(a.length<1)){var i=a.find(".ghx-parent-stub");i.attr("title",e.key+"  "+e.summary);var l=i.find(".ghx-summary");l.text(e.summary)}}},GH.SwimlaneView.rerenderIssueCard=function(e){var a=AJS.$('.js-issue[data-issue-key="'+e.key+'"]');if(a.length>0){var i=GH.SwimlaneView.getCalculatedDisplayIssueKeys(e.key),l=AJS.$(GH.tpl.rapid.card.card({issue:e,displayIssueKey:i[e.key],selectedIssueKeys:GH.SwimlaneView.getSelectedKeysMap(),statLabel:GH.SwimlaneView.getStatisticLabel(),showEpic:GH.RapidBoard.State.getEpicShownOnRapidBoard()}));a.replaceWith(l),GH.WorkDragAndDrop.registerSingleCardDraggable(l)}},GH.SwimlaneView.columnWidthChanged=function(){var e=AJS.$("#ghx-pool").find(":not(.ghx-collapsed-column).ghx-column"),a=e.width();GH.SwimlaneView.updateIssueLayoutAccording2Size(e,a),JIRA.trace("gh.column.width.changed")},GH.SwimlaneView.updateIssueLayoutAccording2Size=function(e,a){var i=a<=GH.SwimlaneView.NARROW_CARD_WIDTH,l=a<=GH.SwimlaneView.XTRA_NARROW_CARD_WIDTH;e.toggleClass("ghx-narrow-card",i),e.toggleClass("ghx-xtra-narrow-card",l)},GH.SwimlaneView.updateSwimlaneHeader=function(e){var a=GH.GridDataController.getModel(),i=a.getParentSwimlaneByIssueKey(e.key);i&&(AJS.$(".ghx-swimlane").each(function(){var l=AJS.$(this);if(l.attr("swimlane-id")===i.id){var n=a.getSwimlaneIssueCount(i.id),t=GH.SwimlaneView.getSwimlaneTitle(i,n),s=GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent({swimlane:i,swimlaneTitle:t,swimlaneStrategy:a.getSwimlaneStrategy(),parent:e,issueCount:n}),r=l.find(".ghx-swimlane-header");r.html(s),e.flagged?r.addClass("ghx-flagged"):r.removeClass("ghx-flagged")}}),GH.SwimlaneStalker.repositionColumnHeaders())},GH.SwimlaneView.handleResizeEvent=function(){GH.SwimlaneView.visible&&GH.SwimlaneView.columnWidthChanged()},GH.SwimlaneView.getFloatingHeader=function(){return AJS.$("#ghx-swimlane-header-stalker .ghx-swimlane-header")},GH.SwimlaneView.floatingDockToggleCollapsedHandler=function(e){if(GH.SwimlaneView.withStickyHeaders){var a=GH.SwimlaneView.getFloatingHeader(),i=a.data("swimlane-id"),l=AJS.$("#ghx-pool").find(".ghx-swimlane [data-swimlane-id="+i+"] .js-expander");GH.SwimlaneView.toggleCollapsedHandler.call(l,e)}else{var a=GH.SwimlaneView.getFloatingHeader(),i=a.data("swimlane-id"),l=a.parents("#ghx-pool").find(".ghx-swimlane [data-swimlane-id="+i+"] .js-expander");GH.SwimlaneView.toggleCollapsedHandler.call(l,e)}},GH.SwimlaneView.toggleCollapsedHandler=function(e){if("keydown"===e.type){if(13!==e.keyCode&&32!==e.keyCode)return;e.preventDefault()}var a=AJS.$(this),i=a.closest(".ghx-swimlane"),l=!i.hasClass("ghx-closed");a.attr("aria-expanded",!l),GH.SwimlaneView.setCollapsed(i,l)},GH.SwimlaneView.setCollapsed=function(e,a){var i=parseInt(e.attr("swimlane-id"),10),l=GH.SwimlaneView.getFloatingHeader();if(e.toggleClass("ghx-closed",a),i===l.data("swimlane-id")){var n=l.parents("#ghx-swimlane-header-stalker");n.toggleClass("ghx-closed",a)}GH.SwimlaneView.setCollapsedState(i,a),GH.Layout.fireDelayedWindowResize()},GH.SwimlaneView.setCollapsedById=function(e,a){AJS.$(".ghx-swimlane").each(function(){var i=AJS.$(this);i.attr("swimlane-id")===e&&i.hasClass("ghx-closed")!==a&&GH.SwimlaneView.setCollapsed(i,a)})},GH.SwimlaneView.collapseAll=function(e){return i.triggerBefore("before:collapseAllSwimlanes","collapseAllSwimlanes"),(!e||!AJS.$(e.target).closest("li").hasClass("disabled"))&&(AJS.$(".ghx-swimlane").addClass("ghx-closed").each(function(){GH.SwimlaneView.setCollapsed(AJS.$(this),!0)}),void i.triggerAfter("after:collapseAllSwimlanes","collapseAllSwimlanes"))},GH.SwimlaneView.expandAll=function(e){return i.triggerBefore("before:expandAllSwimlanes","expandAllSwimlanes"),(!e||!AJS.$(e.target).closest("li").hasClass("disabled"))&&(AJS.$(".ghx-swimlane").removeClass("ghx-closed").each(function(){GH.SwimlaneView.setCollapsed(AJS.$(this),!1)}),void i.triggerAfter("after:expandAllSwimlanes","expandAllSwimlanes"))},GH.SwimlaneView.toggleAllSwimlanes=function(){var e=GH.GridDataController.getModel();if(!e.hasSwimlanes())return!1;var a=e.getSwimlanes(),i=!0;_.any(a,function(e){if(!GH.RapidBoard.State.isSwimlaneCollapsed(e.id)){var a=!e.issueIds||e.issueIds.length>0;if(a)return i=!1,!0}}),i?GH.SwimlaneView.expandAll():GH.SwimlaneView.collapseAll()},GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey=function(e){var a=GH.GridDataController.getModel(),i=a.getSwimlaneIdByIssueKey(e),l=a.hasSwimlanes(),n=l&&GH.RapidBoard.State.isSwimlaneCollapsed(i);return!!n&&(GH.SwimlaneView.setCollapsedById(i,!1),!0)},GH.SwimlaneView.setSwimlaneCollapsedStateForIssueKey=function(e,a){var i=GH.GridDataController.getModel(),l=i.getSwimlaneIdByIssueKey(e),n=i.hasSwimlanes(),t=n&&GH.RapidBoard.State.isSwimlaneCollapsed(l);t!==a&&GH.SwimlaneView.setCollapsedState(l,a)},GH.SwimlaneView.setCollapsedState=function(e,a){GH.RapidBoard.State.setSwimlaneCollapsed(e,a)},GH.SwimlaneView.getStatisticLabel=function(){return GH.SwimlaneView.rapidViewConfig.trackingStatistic&&GH.SwimlaneView.rapidViewConfig.trackingStatistic.isEnabled?GH.SwimlaneView.rapidViewConfig.trackingStatistic.name:GH.SwimlaneView.rapidViewConfig.estimationStatistic.name},GH.SwimlaneView.handleShowOldDoneIssuesClick=function(){AJS.trigger("analytics",{name:"gh.workmode.fast.kanban.old.issue.link.click",data:{boardId:GH.RapidBoard.State.data.rapidViewId}})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/SwimlaneView.soy' */
// This file was automatically generated from SwimlaneView.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.swimlane.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.swimlane == 'undefined') { GH.tpl.rapid.swimlane = {}; }


GH.tpl.rapid.swimlane.renderSwimlane = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-swimlane' + ((opt_data.index == 0) ? ' ghx-first' : '') + ((opt_data.collapsed) ? ' ghx-closed' : '') + '" swimlane-id="' + soy.$$escapeHtml(opt_data.swimlane.id) + '" >';
  if (! (opt_data.index == 0 && opt_data.swimlane.defaultSwimlane)) {
    var parent__soy15 = opt_data.issues[opt_data.swimlane.parentKey];
    var lastColumn__soy16 = opt_data.columns[opt_data.columns.length - 1];
    var parentOutOfSync__soy17 = opt_data.swimlane.parentOutOfSync;
    output += '<div class="ghx-swimlane-header' + ((opt_data.swimlane.defaultSwimlane) ? ' ghx-swimlane-default' : '') + ((parent__soy15 && parent__soy15.done) ? ' ghx-done' : '') + ((parent__soy15 && parent__soy15.flagged) ? ' ghx-flagged' : '') + ((parent__soy15 && parentOutOfSync__soy17) ? ' ghx-out-of-sync' : '') + ((opt_data.selectedIssueKeys[opt_data.swimlane.parentKey]) ? ' ghx-selected' : '') + '"' + ((parent__soy15) ? 'data-issue-key="' + soy.$$filterNoAutoescape(parent__soy15.key) + '" data-issue-id="' + soy.$$filterNoAutoescape(parent__soy15.id) + '" aria-label="' + soy.$$escapeHtml(AJS.format('Swimlane for {0}',opt_data.swimlaneStrategy + ': ' + parent__soy15.key + ' ' + parent__soy15.summary)) + '" role="group"' : 'aria-label="' + soy.$$escapeHtml(AJS.format('Swimlane for {0}',opt_data.swimlaneStrategy + ': ' + opt_data.swimlane.name)) + '"') + ((opt_data.swimlaneStrategy == 'story') ? 'tabindex="0"' : '') + ' data-swimlane-id="' + soy.$$escapeHtml(opt_data.swimlane.id) + '" >' + GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent({swimlane: opt_data.swimlane, swimlaneTitle: opt_data.swimlaneTitle, swimlaneStrategy: opt_data.swimlaneStrategy, parent: parent__soy15, issueCount: opt_data.issueCount}) + ((parent__soy15 && parentOutOfSync__soy17) ? ' <div class="ghx-bandaid"><button class="aui-button js-sync">' + soy.$$escapeHtml(AJS.format('Move to {0}',lastColumn__soy16.name)) + '</button></div>' : '') + '</div>';
  }
  output += GH.tpl.rapid.swimlane.renderIssueColumns(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderSwimlane.soyTemplateName = 'GH.tpl.rapid.swimlane.renderSwimlane';
}


GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent = function(opt_data, opt_ignored) {
  return '<div role="button" tabindex="0" class="ghx-expander js-expander" aria-expanded="true" title="' + soy.$$escapeHtml('Toggle swimlane visibility') + '"><span class="ghx-iconfont aui-icon aui-icon-small aui-iconfont-expanded"></span></div><div class="ghx-heading" data-tooltip="' + soy.$$escapeHtml(opt_data.swimlaneTitle) + '">' + ((opt_data.swimlane.avatarUrl) ? '<span class="ghx-swimlane-avatar" title="' + soy.$$escapeHtml(opt_data.swimlane.name) + '"><img src="' + soy.$$escapeHtml(opt_data.swimlane.avatarUrl) + '"></span>' : '') + ((opt_data.parent) ? '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.parent.key) + '" role="button" class="ghx-parent-key js-detailview">' + soy.$$escapeHtml(opt_data.swimlane.name) + '</a>' : (opt_data.swimlaneStrategy == 'project') ? '<a href="' + soy.$$escapeHtml(GH.Ajax.CONTEXT_PATH) + '/browse/' + soy.$$escapeHtml(opt_data.swimlane.name) + '" role="button">' + soy.$$escapeHtml(opt_data.swimlane.name) + '</a>' : '<span role="button">' + soy.$$escapeHtml(opt_data.swimlane.name) + '</span>') + '<span class="ghx-info">' + ((opt_data.parent) ? GH.tpl.status.renderText({status: opt_data.parent.status}) : '') + '<span class="ghx-description">' + ((opt_data.swimlane.parentKey) ? soy.$$escapeHtml(AJS.format('{0,choice,0#0 sub-tasks|1#1 sub-task|1\x3c{0,number} sub-tasks}',opt_data.issueCount)) : soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|1\x3c{0,number} issues}',opt_data.issueCount))) + '</span></span>' + ((opt_data.parent) ? '<span class="ghx-summary"><span class="aui-lozenge aui-lozenge-current">' + soy.$$escapeHtml('Flagged') + '</span>' + soy.$$escapeHtml(opt_data.parent.summary) + '</span>' : (opt_data.swimlaneStrategy == 'project') ? '<span>' + soy.$$escapeHtml(opt_data.swimlane.description) + '</span>' : '') + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent.soyTemplateName = 'GH.tpl.rapid.swimlane.renderSwimlaneHeaderContent';
}


GH.tpl.rapid.swimlane.renderStalkerSwimlane = function(opt_data, opt_ignored) {
  return '<div id="ghx-swimname"><b class="ghx-flip"></b><b class="ghx-flop"></b><h2><span class="ghx-swimlane-icon"></span><span class="ghx-name"></span><span class="ghx-qty"></span><span class="ghx-summary"></span></h2></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderStalkerSwimlane.soyTemplateName = 'GH.tpl.rapid.swimlane.renderStalkerSwimlane';
}


GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-columns ghx-sad-columns">';
  var columnList144 = opt_data.columns;
  var columnListLen144 = columnList144.length;
  for (var columnIndex144 = 0; columnIndex144 < columnListLen144; columnIndex144++) {
    var columnData144 = columnList144[columnIndex144];
    output += '<li class="ghx-column' + ((columnData144.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((columnData144.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-id="' + soy.$$escapeHtml(columnData144.id) + '" ></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns.soyTemplateName = 'GH.tpl.rapid.swimlane.renderEmptySwimlaneColumns';
}


GH.tpl.rapid.swimlane.renderColumnsHeader = function(opt_data, opt_ignored) {
  var output = '<div id="ghx-column-header-group" class="ghx-column-header-group' + ((opt_data.statistics.fieldConfigured) ? ' ghx-has-stats' : '') + ' ghx-fixed"><ul id="ghx-column-headers" class="ghx-column-headers">';
  var columnList163 = opt_data.columns;
  var columnListLen163 = columnList163.length;
  for (var columnIndex163 = 0; columnIndex163 < columnListLen163; columnIndex163++) {
    var columnData163 = columnList163[columnIndex163];
    output += '<li class="ghx-column' + ((columnData163.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((columnData163.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-id="' + soy.$$escapeHtml(columnData163.id) + '" ><div class="ghx-column-header-flex"><div class="ghx-column-header-flex-1"><h2 data-tooltip="' + soy.$$escapeHtml(columnData163.name) + '">' + soy.$$escapeHtml(columnData163.name) + '</h2>' + ((opt_data.statistics.fieldConfigured) ? GH.tpl.rapid.swimlane.renderColumnCount({column: columnData163}) : '') + '</div>' + ((opt_data.statistics.fieldConfigured) ? '<div class="ghx-limits">' + GH.tpl.rapid.swimlane.renderColumnConstraints({column: columnData163}) + '</div>' : '') + '</div></li>';
  }
  output += '</ul><div id="ghx-swimlane-header-stalker"></div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnsHeader.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnsHeader';
}


GH.tpl.rapid.swimlane.renderColumnCount = function(opt_data, opt_ignored) {
  return '<div class="ghx-qty">' + ((opt_data.column.stats.hidden > 0) ? soy.$$escapeHtml(AJS.format('{0} of {1}',opt_data.column.stats.visible,opt_data.column.stats.visible + opt_data.column.stats.hidden)) : soy.$$escapeHtml(opt_data.column.stats.visible)) + '</div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnCount.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnCount';
}


GH.tpl.rapid.swimlane.renderColumnConstraints = function(opt_data, opt_ignored) {
  return '' + ((opt_data.column.min || opt_data.column.min == 0) ? '<span class="ghx-constraint ghx-busted ghx-busted-min" title="' + soy.$$escapeHtml('Minimum Constraint') + '">' + soy.$$escapeHtml('Min') + ' ' + soy.$$escapeHtml(opt_data.column.min) + '</span>' : '') + ((opt_data.column.max || opt_data.column.max == 0) ? '<span class="ghx-constraint ghx-busted ghx-busted-max" title="' + soy.$$escapeHtml('Maximum Constraint') + '">' + soy.$$escapeHtml('Max') + ' ' + soy.$$escapeHtml(opt_data.column.max) + '</span>' : '');
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderColumnConstraints.soyTemplateName = 'GH.tpl.rapid.swimlane.renderColumnConstraints';
}


GH.tpl.rapid.swimlane.renderIssueColumns = function(opt_data, opt_ignored) {
  var output = '<ul class="ghx-columns">';
  var columnList221 = opt_data.columns;
  var columnListLen221 = columnList221.length;
  for (var columnIndex221 = 0; columnIndex221 < columnListLen221; columnIndex221++) {
    var columnData221 = columnList221[columnIndex221];
    output += GH.tpl.rapid.swimlane.renderIssueColumn({swimlane: opt_data.swimlane, column: columnData221, cells: opt_data.cells, issues: opt_data.issues, groupData: opt_data.groupData, displayIssueKeys: opt_data.displayIssueKeys, selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic, isLastSwimlane: opt_data.isLastSwimlane});
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssueColumns.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssueColumns';
}


GH.tpl.rapid.swimlane.renderIssueColumn = function(opt_data, opt_ignored) {
  return '<li class="ghx-column' + ((opt_data.column.minBusted) ? ' ghx-busted ghx-busted-min' : '') + ((opt_data.column.maxBusted) ? ' ghx-busted ghx-busted-max' : '') + '" data-column-id="' + soy.$$escapeHtml(opt_data.column.id) + '" ><div class="ghx-wrap-issue">' + GH.tpl.rapid.swimlane.renderIssues({issueKeys: opt_data.cells[opt_data.swimlane.id][opt_data.column.id], issues: opt_data.issues, groupData: opt_data.groupData, displayIssueKeys: opt_data.displayIssueKeys, selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic}) + ((opt_data.isLastSwimlane && ((opt_data.column == null) ? null : opt_data.column.limitJql)) ? GH.tpl.rapid.swimlane.renderShowOldIssuesPanel({searchUrl: opt_data.column.limitJql}) : '') + '</div></li>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssueColumn.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssueColumn';
}


GH.tpl.rapid.swimlane.renderShowOldIssuesPanel = function(opt_data, opt_ignored) {
  return '<div class="ghx-show-old"><p class="ghx-show-old-description">' + soy.$$escapeHtml('We\x27re only showing recently modified issues.') + '</p><a class="ghx-show-old-link" href="' + soy.$$escapeHtml(opt_data.searchUrl) + '"><span class="aui-icon aui-icon-small aui-iconfont-search">Search</span>' + soy.$$escapeHtml('Looking for an older issue?') + '</a></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderShowOldIssuesPanel.soyTemplateName = 'GH.tpl.rapid.swimlane.renderShowOldIssuesPanel';
}


GH.tpl.rapid.swimlane.renderIssues = function(opt_data, opt_ignored) {
  var output = '';
  var issueKeyList272 = opt_data.issueKeys;
  var issueKeyListLen272 = issueKeyList272.length;
  for (var issueKeyIndex272 = 0; issueKeyIndex272 < issueKeyListLen272; issueKeyIndex272++) {
    var issueKeyData272 = issueKeyList272[issueKeyIndex272];
    var issue__soy273 = opt_data.issues[issueKeyData272];
    if (opt_data.groupData.beginGroups[issue__soy273.id]) {
      if (! issue__soy273.parentId) {
        output += '<div class="ghx-parent-group js-parent-drag" role="listitem" tabindex="0" aria-label="' + soy.$$escapeHtml(issue__soy273.key) + ' ' + soy.$$escapeHtml(issue__soy273.summary) + '" data-issue-id="' + soy.$$filterNoAutoescape(issue__soy273.id) + '" data-issue-key="' + soy.$$filterNoAutoescape(issue__soy273.key) + '">';
      } else {
        var parentIssue__soy290 = opt_data.issues[issue__soy273.parentKey];
        output += ((opt_data.groupData.fakeParents[issue__soy273.id] && parentIssue__soy290) ? '<div class="ghx-parent-group js-fake-parent js-parent-drag" data-issue-key="' + soy.$$filterNoAutoescape(parentIssue__soy290.key) + '">' + ((opt_data.groupData.drawFakeParents) ? '<div class="ghx-parent-stub" title="' + soy.$$filterNoAutoescape(parentIssue__soy290.key) + ' &mdash; ' + soy.$$escapeHtml(parentIssue__soy290.summary) + '"><div class="ghx-group"><span class="ghx-key">' + soy.$$filterNoAutoescape(parentIssue__soy290.key) + '</span><span class="ghx-summary">' + soy.$$escapeHtml(parentIssue__soy290.summary) + '</span></div></div>' : '') : '') + '<div class="ghx-subtask-group">';
      }
    }
    output += GH.tpl.rapid.card.card({issue: issue__soy273, displayIssueKey: opt_data.displayIssueKeys[issue__soy273.key], selectedIssueKeys: opt_data.selectedIssueKeys, mainSelectedIssue: opt_data.mainSelectedIssue, statLabel: opt_data.statLabel, isRankable: opt_data.isRankable, showEpic: opt_data.showEpic});
    if (opt_data.groupData.endGroups[issue__soy273.id]) {
      output += '</div>';
      var parentIssue__soy322 = opt_data.issues[issue__soy273.parentKey];
      output += (! opt_data.groupData.fakeParents[issue__soy273.id] || parentIssue__soy322) ? '</div>' : '';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderIssues.soyTemplateName = 'GH.tpl.rapid.swimlane.renderIssues';
}


GH.tpl.rapid.swimlane.renderEndOfPool = function(opt_data, opt_ignored) {
  return '<span id="js-pool-end" data-rendered="' + soy.$$escapeHtml(opt_data.rendered) + '"></span>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.swimlane.renderEndOfPool.soyTemplateName = 'GH.tpl.rapid.swimlane.renderEndOfPool';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/SprintTrigger.js' */
define("jira-agile/rapid/ui/work/sprint-meta-trigger",["jquery","jira-agile/rapid/work/work-controls"],function(t,e){var i={},r=require("jira-agile/rapid/deferred-resources-loader"),n=require("jira-agile/rapid/const/PageMode"),o=void 0;return i.remove=function(){t(".ghx-sprint-meta").remove()},i.mapState=function(t){r.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===n.WORK,function(){o=require("jira-agile/rapid/ui/plan/backlog-model")});var e=1===t.sprints.length?t.sprints[0].id:t.getActiveSprintFilters()[0],i=t.getSprintById(e),a=!t.hasSprints()||!e||!i.canUpdateSprint,p=t.getTooltipCompleteSprintBtn(i,o&&o.complexQuery());return{activeSprintId:e,activeSprint:i,isDisabled:a,tooltipText:p}},i.render=function(){var t=e.sprintfilters,r=i.mapState(t),n=r.activeSprintId,o=r.activeSprint,a=r.isDisabled,p=r.tooltipText,l=AJS.$(GH.tpl.component.sprintfilters.renderSprintMeta({sprint:o,isDisabled:a,tooltipText:p}));return l.find(".time").tooltip({html:!0,title:function(){return GH.tpl.component.sprintfilters.renderSprintDatesTooltip({sprint:o})}}),l.find(".complete-sprint-container").tooltip({html:!0,title:"data-tooltip"}),l.find(".js-complete-sprint").on("click",function(t){t.preventDefault(),GH.Dialogs.CompleteSprintDialog.showDialog(GH.RapidBoard.State.getRapidViewId(),n)}),l},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/ModeToolTriggers.js' */
define("jira-agile/rapid/ui/work/mode-tools-controller",["require","jquery","jira-agile/rapid/ui/work/release-version-trigger","jira-agile/rapid/ui/work/sprint-meta-trigger","jira/featureflags/feature-manager","jira-agile/rapid/work/work-controls","jira-agile/rapid/deferred-resources-loader"],function(e,r,a,i,t,n,o){function d(e){var t=e.workMode,n=e.hasUser;if(i.remove(),a.remove(),s&&s.remove(),n){var d=r(c);switch(t){case f:d.prepend(a.render());break;case l:o.handleDeferredResourceImport(g()&&!GH.DetailsView,function(){d.prepend(i.render())})}o.handleDeferredResourceImport(g()&&!GH.DetailsView,function(){u(d,t)})}}function u(r,a){var i=GH.RapidBoard.State.getRapidViewId(),t=e("jira/favourite-button/constants"),n=e("jira/favourite-button/favourite-button");i!==p&&(s=new n({entityId:i,entityType:t.FAVOURITE_ITEM_TYPES.BOARDS})),s.setAnalyticsEventProps({attributes:{boardType:a}}),r.prepend(s.render()),p=i}var s,p,c="#ghx-header-dynamic-append-zone",l="sprint",f="kanban",g=function(){return t.isFeatureEnabled("cbb.heritage")};return{render:d,SPRINT:l,KANBAN:f}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/CompleteSprintDialog.js' */
define("jira-agile/rapid/ui/dialog/complete-sprint-dialog",["require"],function(e){"use strict";function t(e,t){var i=t.success,n=Boolean(e.incompleteIssuesDestination===String(h.NEW_SPRINT_ID)),s={};if(n&&(s.timeout=h.NEW_SPRINT_MESSAGE_TIMEOUT),g.showSuccess(m.dialogs.completesprint.renderSuccessMessage(i),s),n){var a=AJS.$("#gh-complete-new-sprint-link");a.click(function(){GH.RapidBoard.ViewController.setMode(p.PLAN),g.clear()})}}function i(t){var i=e("jira-agile/rapid/ui/component/sprint-select");t.defaultIncompleteIssueDestination&&(t.incompleteIssuesDestination=t.defaultIncompleteIssueDestination.id),h.sprintSelect=new i,h.sprintSelect.initDropdown(),h.sprintSelect.on("change",s.bind(null,t))}function n(e){var t=e.incompleteIssues+e.partiallyCompleteIssues>0;return t&&(e.hasDestinationSprints||e.canCreateSprint)}function s(e,t){t?(e.incompleteIssuesDestination=t,a()):o()}function a(){h.$completeButton.enable(!0)}function o(){h.$completeButton.enable(!1)}function l(e){var t={completeIssues:e.completeIssues,totalIncompleteIssues:e.incompleteIssues+e.partiallyCompleteIssues,unfinishedParentsWithFinishedSubtasks:e.unfinishedParentsWithFinishedSubtasks?e.unfinishedParentsWithFinishedSubtasks.length:0,hasDestinationSprints:e.hasDestinationSprints,incompleteIssueDestinations:e.incompleteIssueDestinations,shouldShowSprintSelector:n(e),defaultIncompleteIssueDestination:e.defaultIncompleteIssueDestination};return t}var r=e("jquery"),p=e("jira-agile/rapid/const/PageMode"),d=e("jira-agile/rapid/ajax"),u=e("jira-agile/rapid/deferred-resources-loader"),c=GH.Dialog,g=GH.Notification,m=GH.tpl,h={};return h.sprintSelect=null,h.EVENT_SPRINT_COMPLETED="sprintCompleted",h.BACKLOG_ID=-1,h.NEW_SPRINT_ID=-2,h.NEW_SPRINT_MESSAGE_TIMEOUT=1e4,h.analyticsMetaData=function(e){AJS.trigger("analyticsEvent",{name:"gh.sprint.complete",data:e})},h.showDialog=function(e,t){GH.Dialog.dim(),d.get({url:"/sprint/"+t+"/complete",data:{rapidViewId:e,sprintId:t}},"completesprintdialog").done(h.renderDialog).fail(GH.Dialog.undim)},h.renderDialog=function(e){var t=void 0!==e.finishedParentsWithUnfinishedSubtasks&&e.finishedParentsWithUnfinishedSubtasks.length>0,s=c.create({width:630,height:300,id:"ghx-dialog-complete-sprint",analyticsPageName:"completeSprintModal"});if(s.addHeader(AJS.format("Complete sprint: {0}",e.sprint.name)),s.addPanel("","panel"),t)s.getCurrentPanel().html(m.dialogs.completesprint.renderCanNotCompleteSprintDialog({issues:e.finishedParentsWithUnfinishedSubtasks}));else{new Calendar;s.getCurrentPanel().html(m.dialogs.completesprint.renderCompleteSprintDialog({model:l(e)})),s.addButton("Complete",function(){s.disableControls(),s.showSpinner(),h.complete(s,e)},"aui-button ghx-complete-button"),h.$completeButton=r("#ghx-dialog-complete-sprint").find(".ghx-complete-button"),n(e)&&i(e)}c.addCancelButton(s),r(".aui-dialog").addClass("ghx-dialog"),s.show(),GH.Dialog.Spinner.hide(),r("#ghx-release-name").focus()},h.complete=function(e,i){d.put({url:"/sprint/"+i.sprint.id+"/complete",data:{rapidViewId:i.rapidViewId,sprintId:i.sprint.id,incompleteIssuesDestination:i.incompleteIssuesDestination},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date"}}).done(function(n){h.analyticsMetaData({sprintId:i.sprint.id,completeIssueCount:i.completeIssues,incompleteIssueCount:i.incompleteIssues,partiallyCompleteIssueCount:i.partiallyCompleteIssues}),e.dispose(),GH.Dialog.triggerHideEvent(),t(i,n),GH.RapidBoard.State.getMode()===p.WORK?u.triggerOnDemandResourceLoad(["wrc!gh-rapid-lwf-board-deferred"],"completeSprint",function(){r(GH).trigger(h.EVENT_SPRINT_COMPLETED,i.sprint.id)}):r(GH).trigger(h.EVENT_SPRINT_COMPLETED,i.sprint.id)}).fail(function(){e.hideSpinner(),e.enableControls()})},h}),AJS.namespace("GH.Dialogs.CompleteSprintDialog",null,require("jira-agile/rapid/ui/dialog/complete-sprint-dialog"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/CompleteSprintDialog.soy' */
// This file was automatically generated from CompleteSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.completesprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.completesprint == 'undefined') { GH.tpl.dialogs.completesprint = {}; }


GH.tpl.dialogs.completesprint.renderCompleteSprintDialog = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('{1,choice,0#{0} issues were |1#{0} issue was|2#{0} issues were} done','<strong>' + opt_data.model.completeIssues + '</strong>',opt_data.model.completeIssues)) + ((opt_data.model.totalIncompleteIssues > 0 && opt_data.model.unfinishedParentsWithFinishedSubtasks > 0) ? '<br/>' + ((opt_data.model.totalIncompleteIssues == opt_data.model.unfinishedParentsWithFinishedSubtasks) ? soy.$$filterNoAutoescape(AJS.format('{0} {1,choice,1#issue was|2#issues were} incomplete (and had all of {1,choice,1#its|2#their} sub-tasks complete)','<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues)) : soy.$$filterNoAutoescape(AJS.format('{0} {1,choice,1#issue was|2#issues were} incomplete ({2} of which had all of {3,choice,1#its|2#their} sub-tasks complete)','<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues,'<strong>' + opt_data.model.unfinishedParentsWithFinishedSubtasks + '</strong>',opt_data.model.unfinishedParentsWithFinishedSubtasks))) : (opt_data.model.totalIncompleteIssues > 0) ? '<br/>' + soy.$$filterNoAutoescape(AJS.format('{0} {1,choice,0#issues were|1#issue was|2#issues were} incomplete','<strong>' + opt_data.model.totalIncompleteIssues + '</strong>',opt_data.model.totalIncompleteIssues)) : '') + '</p><p>' + ((opt_data.model.shouldShowSprintSelector) ? soy.$$escapeHtml('Select where all the incomplete issues should be moved:') : soy.$$escapeHtml('Incomplete issues will be moved to the backlog')) + '</p>' + ((opt_data.model.shouldShowSprintSelector) ? GH.tpl.component.sprintselect.renderSingleSelect({items: opt_data.model.incompleteIssueDestinations, selectedItem: opt_data.model.defaultIncompleteIssueDestination}) : '') + '<p class="ghx-description">' + soy.$$escapeHtml('Sub-tasks are not included in the total(s) above, and are always included in the same sprint as their parent issue.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completesprint.renderCompleteSprintDialog.soyTemplateName = 'GH.tpl.dialogs.completesprint.renderCompleteSprintDialog';
}


GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog = function(opt_data, opt_ignored) {
  var output = '<div><p>' + soy.$$escapeHtml('Sprint cannot be completed as there are incomplete subtasks on the following issues:') + '</p><ul>';
  var issueKeyList39 = opt_data.issues;
  var issueKeyListLen39 = issueKeyList39.length;
  for (var issueKeyIndex39 = 0; issueKeyIndex39 < issueKeyListLen39; issueKeyIndex39++) {
    var issueKeyData39 = issueKeyList39[issueKeyIndex39];
    output += '<li>' + soy.$$escapeHtml(issueKeyData39) + '</li>';
  }
  output += '<ul></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog.soyTemplateName = 'GH.tpl.dialogs.completesprint.renderCanNotCompleteSprintDialog';
}


GH.tpl.dialogs.completesprint.renderSuccessMessage = function(opt_data, opt_ignored) {
  return '<span>' + ((opt_data.newSprintName) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format('\x27\x27{0}\x27\x27 successfully completed and new \x3ca id\x3d\x22gh-complete-new-sprint-link\x22\x3e\x27\x27{1}\x27\x27\x3c/a\x3e created in the backlog',typeof (opt_data.completedSprintName) === 'number' ? opt_data.completedSprintName : soy.$$escapeHtml(opt_data.completedSprintName),typeof (opt_data.newSprintName) === 'number' ? opt_data.newSprintName : soy.$$escapeHtml(opt_data.newSprintName)))) : soy.$$escapeHtml('Sprint successfully completed')) + '</span>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completesprint.renderSuccessMessage.soyTemplateName = 'GH.tpl.dialogs.completesprint.renderSuccessMessage';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReopenSprintDialog.js' */
GH.Dialogs.ReopenSprintDialog={},GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED="sprintReopened",GH.Dialogs.ReopenSprintDialog.analyticsMetaData=function(e){AJS.trigger("analyticsEvent",{name:"gh.sprint.reopen",data:e})},GH.Dialogs.ReopenSprintDialog.showDialog=function(e,i){GH.Dialog.dim(),GH.Ajax.get({url:"/sprint/"+i+"/reopen",data:{rapidViewId:e,sprintId:i}},"reopensprintdialog").done(GH.Dialogs.ReopenSprintDialog.renderDialog).fail(GH.Dialog.undim)},GH.Dialogs.ReopenSprintDialog.renderDialog=function(e){var i=GH.Dialog.create({width:630,height:270,id:"ghx-dialog-reopen-sprint",analyticsPageName:"reopenSprintModal"});if(i.addHeader("Reopen sprint"),i.addPanel("","panel"),0!==e.issuesMovedBack){new Calendar;i.getCurrentPanel().html(GH.tpl.dialogs.reopensprint.renderReopenSprintDialog({model:e})),i.addButton("Reopen",function(){i.disableControls(),i.showSpinner(),GH.Dialogs.ReopenSprintDialog.complete(i,e)},"aui-button")}else i.getCurrentPanel().html(GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog({model:e}));GH.Dialog.addCancelButton(i),AJS.$(".aui-dialog").addClass("ghx-dialog"),i.show(),GH.Dialog.Spinner.hide(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.ReopenSprintDialog.complete=function(e,i){GH.Ajax.put({url:"/sprint/"+i.sprint.id+"/reopen",data:{rapidViewId:i.rapidViewId,sprintId:i.sprint.id},errorContextMap:{name:"#ghx-release-name",releaseDate:"#ghx-release-date"}}).done(function(n){GH.Dialogs.ReopenSprintDialog.analyticsMetaData({sprintId:i.sprint.id,issuesMovedBack:i.issuesMovedBack,completedIssuesNotMovedBack:i.completedIssuesNotMovedBack,incompleteIssuesNotMovedBack:i.incompleteIssuesNotMovedBack}),e.dispose(),GH.Dialog.triggerHideEvent(),GH.Notification.showSuccess(n.success.message),AJS.$(GH).trigger(GH.Dialogs.ReopenSprintDialog.EVENT_SPRINT_REOPENED,i.sprint.id)}).fail(function(){e.hideSpinner(),e.enableControls()})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ReopenSprintDialog.soy' */
// This file was automatically generated from ReopenSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.reopensprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.reopensprint == 'undefined') { GH.tpl.dialogs.reopensprint = {}; }


GH.tpl.dialogs.reopensprint.renderReopenSprintDialog = function(opt_data, opt_ignored) {
  return '<h4>' + soy.$$escapeHtml(opt_data.model.sprint.name) + '</h4><div class="issue-moved-back">' + soy.$$filterNoAutoescape(AJS.format('{1,choice,0#{0} issues|1#{0} issue|2#{0} issues} will be moved back to the sprint you\x27\x27re reopening.','<strong>' + opt_data.model.issuesMovedBack + '</strong>',opt_data.model.issuesMovedBack)) + '</div>' + GH.tpl.dialogs.reopensprint.reopenDetails_(opt_data) + '<p class="ghx-description">' + soy.$$escapeHtml('Sub-tasks are not included in the total(s) above, and are always included in the same sprint as their parent issue.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.renderReopenSprintDialog.soyTemplateName = 'GH.tpl.dialogs.reopensprint.renderReopenSprintDialog';
}


GH.tpl.dialogs.reopensprint.reopenDetails_ = function(opt_data, opt_ignored) {
  return '' + ((opt_data.model.completedIssuesNotMovedBack > 0) ? '<div class="completed-issue-not-moved-back">' + soy.$$filterNoAutoescape(AJS.format('{1,choice,0#{0} issues are|1#{0} issue is|2#{0} issues are} already completed in another sprint, and cannot be moved back.','<strong>' + opt_data.model.completedIssuesNotMovedBack + '</strong>',opt_data.model.completedIssuesNotMovedBack)) + '</div>' : '') + ((opt_data.model.incompleteIssuesNotMovedBack > 0) ? '<div class="incompleted-issue-not-moved-back">' + soy.$$filterNoAutoescape(AJS.format('{1,choice,0#{0} issues are|1#{0} issue is|2#{0} issues are} part of another active sprint, and cannot be moved back.','<strong>' + opt_data.model.incompleteIssuesNotMovedBack + '</strong>',opt_data.model.incompleteIssuesNotMovedBack)) + '</div>' : '');
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.reopenDetails_.soyTemplateName = 'GH.tpl.dialogs.reopensprint.reopenDetails_';
}


GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog = function(opt_data, opt_ignored) {
  return '<div><p>' + soy.$$escapeHtml('Reopening the sprint is not possible because there are no issues in this sprint.') + '</p><p>' + GH.tpl.dialogs.reopensprint.reopenDetails_(opt_data) + '</p></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog.soyTemplateName = 'GH.tpl.dialogs.reopensprint.renderCanNotReopenSprintDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/CompleteParentDialog.js' */
GH.Dialogs.CompleteParentDialog={},GH.Dialogs.CompleteParentDialog.EVENT_PARENT_COMPLETED="parentCompleted",GH.Dialogs.CompleteParentDialog.showDialog=function(e,t,o){GH.Dialog.dim(),GH.Dialogs.CompleteParentDialog.renderDialog(e,t,o.name)},GH.Dialogs.CompleteParentDialog.renderDialog=function(e,t,o){var a=GH.Dialog.create({width:500,height:250,id:"ghx-dialog-complete-parent"});a.addHeader(AJS.format("Update Parent Issue",e.key)),a.addPanel("","panel"),a.getCurrentPanel().html(GH.tpl.dialogs.completeparent.renderCompleteParentDialog({issue:e,transitions:t,columnName:AJS.escapeHTML(String(o))})),t.length>0?(a.addButton("Update",function(){a.disableControls(),1===t.length?GH.Dialogs.CompleteParentDialog.complete(a,e,t[0].id):GH.Dialogs.CompleteParentDialog.complete(a,e,AJS.$(".js-complete-parent").find("input:checked").val())},"aui-button"),GH.Dialog.addCancelButton(a)):a.addButton("Acknowledge",function(){a.disableControls(),a.dispose(),GH.Dialog.triggerHideEvent()},"aui-button"),AJS.$(".aui-dialog").addClass("ghx-dialog"),a.show(),GH.Dialog.Spinner.hide(),AJS.$("#ghx-release-name").focus()},GH.Dialogs.CompleteParentDialog.complete=function(e,t,o){GH.IssueOperationShortcuts.setOverrideSelectedIssue(t),e.dispose(),GH.Dialog.triggerHideEvent(),GH.WorkDragAndDrop.executeWorkflowTransition(t.id,o)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/CompleteParentDialog.soy' */
// This file was automatically generated from CompleteParentDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.completeparent.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.completeparent == 'undefined') { GH.tpl.dialogs.completeparent = {}; }


GH.tpl.dialogs.completeparent.renderCompleteParentDialog = function(opt_data, opt_ignored) {
  var output = '<form class="aui">';
  if (opt_data.transitions.length > 1) {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format('All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.',opt_data.issue.key,opt_data.columnName)) + '<br/>' + soy.$$escapeHtml('To update this parent issue to match, select a transition:') + '</p><fieldset class="group js-complete-parent">';
    var transitionList12 = opt_data.transitions;
    var transitionListLen12 = transitionList12.length;
    for (var transitionIndex12 = 0; transitionIndex12 < transitionListLen12; transitionIndex12++) {
      var transitionData12 = transitionList12[transitionIndex12];
      output += '<div class="radio"><input type="radio" name="transition" id="' + soy.$$escapeHtml(transitionData12.id) + '" value="' + soy.$$escapeHtml(transitionData12.id) + '" ' + ((transitionIndex12 == 0) ? 'checked="checked"' : '') + '><label for="' + soy.$$escapeHtml(transitionData12.id) + '">' + soy.$$escapeHtml(transitionData12.name) + '</label></div>';
    }
    output += '</fieldset>';
  } else if (opt_data.transitions.length == 1) {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format('All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.',opt_data.issue.key,opt_data.columnName)) + '<br/>' + soy.$$escapeHtml('Do you want to update this parent issue to match?') + '</p>';
  } else {
    output += '<p>' + soy.$$filterNoAutoescape(AJS.format('All sub-tasks for parent issue \x3cstrong\x3e{0}\x3c/strong\x3e are now \x3cstrong\x3e{1}\x3c/strong\x3e.',opt_data.issue.key,opt_data.columnName)) + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('However, the parent issue cannot be moved into the \x3cstrong\x3e{0}\x3c/strong\x3e column as there are no matching transitions.',opt_data.columnName)) + '</p>';
  }
  output += '</form>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.completeparent.renderCompleteParentDialog.soyTemplateName = 'GH.tpl.dialogs.completeparent.renderCompleteParentDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ConvertWorkflow.js' */
GH.Dialogs.ConvertWorkflow={},GH.Dialogs.ConvertWorkflow.EVENT_WORKFLOW_CONVERTED="workflowConverted",GH.Dialogs.ConvertWorkflow.statusSelect=void 0,function(){var o=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.ConvertWorkflow.analytics=new o("gh.config.simplify.workflow.dialog.change")}(),GH.Dialogs.ConvertWorkflow.showDialog=function(o){GH.Dialog.dim(),GH.Ajax.get({url:"/workflow/convert.json",data:{rapidViewId:o}},"convertWorkflow").done(GH.Dialogs.ConvertWorkflow.renderDialog).fail(GH.Dialog.undim),GH.Dialogs.ConvertWorkflow.analytics.trigger("start")},GH.Dialogs.ConvertWorkflow.renderDialog=function(o){var e=function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("cancel")},t=GH.Dialog.create({width:575,height:300,id:"ghx-dialog-convert-workflow",onCancelFn:e}),r=o.numIssuesToMigrate&&o.numIssuesToMigrate>0;GH.Dialogs.ConvertWorkflow.renderDialogIntroPage(t,o),GH.Dialogs.ConvertWorkflow.renderStatusResolutionDonePage(t,o,r),r&&GH.Dialogs.ConvertWorkflow.renderDialogIssuesUpdatePage(t,o),GH.Dialogs.ConvertWorkflow.renderDialogProgressPage(t,o),AJS.$(".aui-dialog").addClass("ghx-dialog"),t.gotoPage(0),t.gotoPanel(0),t.show(),t.updateHeight(),AJS.$(".aui-blanket").empty()},GH.Dialogs.ConvertWorkflow.renderDialogIntroPage=function(o,e){o.addHeader("Simplify workflow"),o.addPanel("",GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro({projectName:AJS.escapeHTML(String(e.projectName)),workflowSchemeName:AJS.escapeHTML(String(e.workflowSchemeName)),adminWorkflowUrl:GH.Ajax.CONTEXT_PATH+"/plugins/servlet/project-config/"+e.projectKey+"/workflows",simplifyWorkflowLearnMoreUrl:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+the+Simplified+Workflow","isLocal":false}.url})),o.addButton("Next",function(){o.nextPage(),_.each(e.statuses,function(o){o.resolutionDoneCandidate&&GH.Dialogs.ConvertWorkflow.statusSelect.addItem(new AJS.ItemDescriptor({value:o.id,label:o.name}))}),o.updateHeight()},"ghx-dialog-convert-next aui-button"),GH.Dialog.addCancelButton(o)},GH.Dialogs.ConvertWorkflow.renderStatusResolutionDonePage=function(o,e,t){o.addPage(),o.addHeader("Simplify workflow"),o.addPanel("",GH.tpl.dialogs.convertworkflow.renderStatusResolution({urls:{simplifiedWorkflow:{"url":"https://confluence.atlassian.com/display/JIRASOFTWARECLOUD/Using+the+Simplified+Workflow","isLocal":false}.url}}));var r=AJS.$("#ghx-resolution-done-statuses-select");GH.Dialogs.ConvertWorkflow.statusSelect=new AJS.MultiSelect({element:r,width:350,itemAttrDisplayed:"label",suggestions:function(){return _.map(e.statuses,function(o){return new AJS.ItemDescriptor({value:o.id,label:o.name})})}}),AJS.$("#ghx-resolution-done-statuses-select-multi-select").keydown(function(o){if(13==o.keyCode&&!GH.Dialogs.ConvertWorkflow.statusSelect.suggestionsVisible)return o.preventDefault(),!1}),t?o.addButton("Next",function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("showWarning"),o.nextPage(),o.updateHeight()},"ghx-dialog-convert-next aui-button"):GH.Dialogs.ConvertWorkflow.addSimplifyButton(o,e),GH.Dialog.addCancelButton(o)},GH.Dialogs.ConvertWorkflow.renderDialogIssuesUpdatePage=function(o,e){o.addPage(),o.addHeader("Simplify workflow");var t=GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues({projectName:AJS.escapeHTML(String(e.projectName)),workflowSchemeName:AJS.escapeHTML(String(e.workflowSchemeName)),numIssuesToMigrate:GH.NumberFormat.format(e.numIssuesToMigrate)});o.addPanel("",t),GH.Dialogs.ConvertWorkflow.addSimplifyButton(o,e),GH.Dialog.addCancelButton(o)},GH.Dialogs.ConvertWorkflow.renderDialogProgressPage=function(o,e){o.addPage(),o.addHeader("Simplify workflow");var t=GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress({});o.addPanel("",t),GH.Dialogs.ConvertWorkflow.addAcknowledgeButton(o,e)},GH.Dialogs.ConvertWorkflow.addSimplifyButton=function(o,e){o.addButton("Simplify",function(){GH.Dialogs.ConvertWorkflow.analytics.trigger("simplify"),o.nextPage(),o.updateHeight(),o.disableControls(),GH.Dialogs.ConvertWorkflow.submit(o,e)},"aui-button")},GH.Dialogs.ConvertWorkflow.addAcknowledgeButton=function(o,e){o.addButton("Acknowledge",function(){o.disableControls(),o.dispose(),AJS.$(GH).trigger(GH.Dialogs.ConvertWorkflow.EVENT_WORKFLOW_CONVERTED)},"aui-button")},GH.Dialogs.ConvertWorkflow.submit=function(o,e){var t=AJS.$("#ghx-resolution-done-statuses-select"),r=t.val();GH.Ajax.post({url:"/workflow/convert.json",data:{projectKey:e.projectKey,resolutionDoneStatusIds:r}}).done(function(e){GH.Dialogs.ConvertWorkflow.handleConversionResult(o,e)}).fail(o.enableControls)},GH.Dialogs.ConvertWorkflow.handleConversionResult=function(o,e){var t=e.success.numIssuesToMigrate,r=e.success.taskId,n=function(e){GH.Dialogs.ConvertWorkflow.analytics.trigger("complete");var t=AJS.$("#ghx-convert-workflow-progress");if(t.find(".ghx-current-progress").css({width:"100%"}),o.enableControls(),e.successful)t.append(GH.Notification.auiMessage({title:"Workflow migration complete.",type:"success"}));else{var r=GH.Ajax._convertJiraErrors(e.errorCollection).getGlobalErrors();t.append(GH.Notification.auiMessage({title:"Workflow migration did not complete successfully.",type:"error",messageHtml:!0,message:GH.tpl.rapid.notification.renderErrorMessages({errors:r})}))}o.updateHeight()};t&&0!=t?r&&GH.Dialogs.ConvertWorkflow.getTaskStatus(r,n):n({finished:!0,successful:!0})},GH.Dialogs.ConvertWorkflow.getTaskStatus=function(o,e){GH.Ajax.get({url:"/configuration/jiraTask/"+o+".json"}).done(function(t){if(t.finished)console.log("Workflow migration finished. Successful? "+t.successful),e(t);else{console.log("Workflow migration progress: "+t.progress);var r=AJS.$("#ghx-convert-workflow-progress");r.find(".ghx-current-progress").css({width:""+t.progress+"%"}),setTimeout(function(){GH.Dialogs.ConvertWorkflow.getTaskStatus(o,e)},2e3)}})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ConvertWorkflow.soy' */
// This file was automatically generated from ConvertWorkflow.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.convertworkflow.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.convertworkflow == 'undefined') { GH.tpl.dialogs.convertworkflow = {}; }


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$filterNoAutoescape(AJS.format('Simplifying the workflow for project {0}{1}{2} will make it managed by Jira Software. This will allow Project Administrators to add and remove steps from the workflow by configuring the columns of the board.','<b>',opt_data.projectName,'</b>')) + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('The original workflow and scheme for this project will be copied and not modified. You can revert this change by re-associating the workflow scheme {0}{1}{2} to this project using Jira\x27\x27s {3}administration interface{4}.','<b>',opt_data.workflowSchemeName,'</b>','<a href="' + opt_data.adminWorkflowUrl + '">','</a>')) + '</p><p>' + soy.$$escapeHtml('The simplified workflow will:') + '<ul><li>' + soy.$$escapeHtml('allow free movement of issues between any column') + '</li><li>' + soy.$$escapeHtml('remove all transition conditions, validators, post functions and screens') + '</li></ul></p><p>' + soy.$$filterNoAutoescape(AJS.format('Read {0}the documentation{1} for more information.','<a href="' + opt_data.simplifyWorkflowLearnMoreUrl + '">','</a>')) + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIntro';
}


GH.tpl.dialogs.convertworkflow.renderStatusResolution = function(opt_data, opt_ignored) {
  return '<p class="description">' + soy.$$filterNoAutoescape(AJS.format('Choose statuses that will trigger the {0}resolution{1} to be set to \x22Done\x22.','<a href="' + opt_data.urls.simplifiedWorkflow + '">','</a>')) + '</p><div class="aui-item"><form class="aui"><fieldset><div class="field-group" id="ghx-status-picker"><label for="ghx-resolution-done-statuses-select">' + soy.$$escapeHtml('Statuses for \x27Done\x27') + '<span class="aui-icon icon-required"></span></label><select id="ghx-resolution-done-statuses-select" multiple="multiple" class="hidden"></select><div id="ghx-resolution-done-statuses-error"></div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderStatusResolution.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderStatusResolution';
}


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning"><p><span class="aui-icon icon-warning"></span>' + soy.$$filterNoAutoescape(AJS.format('{0}Note{1}: You are about to change all {2} issues in project {0}{3}{1}.','<b>','</b>',opt_data.numIssuesToMigrate,opt_data.projectName)) + '</p></div><p>' + soy.$$filterNoAutoescape('This process can take a long time, and therefore it is advisable to perform this operation when the system is under \x3cstrong\x3elow load\x3c/strong\x3e. Please ensure that you contact a System Administrator to create an XML backup of your data before proceeding.') + '</p><p>' + soy.$$filterNoAutoescape(AJS.format('If the process fails or Jira is shutdown before the process completes, you can attempt to associate the workflow scheme {0} with project {1} again.',opt_data.workflowSchemeName,opt_data.projectName)) + '</p><p>' + soy.$$filterNoAutoescape('If the process fails again, please contact a System Administrator so they can restore from backup to ensure that issues in the project remain in a consistent state.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogIssues';
}


GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress = function(opt_data, opt_ignored) {
  return '<div id="ghx-convert-workflow-progress"><div class="ghx-progress-bar"><div class="ghx-current-progress" style="width: 1%;"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress.soyTemplateName = 'GH.tpl.dialogs.convertworkflow.renderConvertWorkflowDialogProgress';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/CreateStatus.js' */
!function(){"use strict";var t=require("jira/featureflags/feature-manager"),a=require("jira-agile/rapid/deferred-resources-loader"),e=function(){return t.isFeatureEnabled("cbb.heritage")};GH.Dialogs.CreateStatus={},GH.Dialogs.CreateStatus.dialog=null,GH.Dialogs.CreateStatus.EVENT_STATUS_CREATED="statusCreated",GH.Dialogs.CreateStatus.statusCategoryPicker=null,GH.Dialogs.CreateStatus.statusNamePicker=null,GH.Dialogs.CreateStatus.statusNameChangedTimeout=null,function(){var t=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.CreateStatus.analytics=new t("gh.config.add.status.dialog.change")}(),GH.Dialogs.CreateStatus.showDialog=function(t){GH.Dialogs.CreateStatus.renderDialog(t),GH.Dialogs.CreateStatus.analytics.trigger("start")},GH.Dialogs.CreateStatus.renderDialog=function(t){var s=function(){GH.Dialogs.CreateStatus.analytics.trigger("cancel")},r=GH.Dialogs.CreateStatus.dialog=GH.Dialog.create({width:575,height:200,id:"ghx-dialog-create-status",onCancelFn:s});r.addHeader("Add status"),r.addPanel("","panel");var i=AJS.$(GH.tpl.dialogs.createstatus.renderCreateStatusDialog({}));r.getCurrentPanel().html(i);var o=function(){return r.disableControls(),GH.Dialogs.CreateStatus.submit(r,t),!1};r.addButton("Add",o,"aui-button"),i.submit(o),GH.Dialog.addCancelButton(r),GH.Dialogs.CreateStatus.registerStatusCategoryControls(r),AJS.$(".aui-dialog").addClass("ghx-dialog"),r.show(),AJS.$(".aui-blanket").empty(),a.handleDeferredResourceImport(e()&&!GH.Dialog,function(){GH.Dialogs.CreateStatus.registerStatusNameField()}),AJS.$("#ghx-status-name-field").focus()},GH.Dialogs.CreateStatus.registerStatusNameField=function(){var t=require("jira/ajs/select/single-select");GH.Dialogs.CreateStatus.statusNamePicker=new t({removeOnUnSelect:!1,element:"#ghx-status-name",submitInputVal:!0,userEnteredOptionsMsg:"New Status",ajaxOptions:{url:GH.Ajax.buildBareRestUrl("/rest/api/2/status"),query:!0,formatResponse:function(t){var a=new AJS.GroupDescriptor({weight:0,label:"Existing Statuses"});return _.each(t,function(t){a.addItem(new AJS.ItemDescriptor({value:t.name,label:t.name,html:AJS.escapeHTML(String(t.name))}))}),[a]}}})},GH.Dialogs.CreateStatus.bindStatusNameEvents=function(){var t=AJS.$("#ghx-status-name-field");AJS.$("#ghx-status-name").change(GH.Dialogs.CreateStatus.handleStatusNameChanged);var a=GH.RapidBoard.Browsers.isInputEventSupported();t.on(a?"input":"keypress",function(){clearTimeout(GH.Dialogs.CreateStatus.statusNameChangedTimeout),GH.Dialogs.CreateStatus.statusNameChangedTimeout=setTimeout(GH.Dialogs.CreateStatus.handleStatusNameChanged,275)})},GH.Dialogs.CreateStatus.handleStatusNameChanged=function(){var t,a=AJS.$("#ghx-status-name-field").val()||"",e=AJS.$.trim(a.toLowerCase());t=a?AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")):AJS.$.Deferred().resolve([]),t.done(function(t){var a=_.find(t,function(t){return t.name.toLowerCase()===e});a?(GH.Dialogs.CreateStatus.statusCategoryPicker.disableWithValue(a.statusCategory.id),GH.Dialogs.CreateStatus.addStatusExistsErrors()):(GH.Dialogs.CreateStatus.statusCategoryPicker.enableWithValueIfDisabled(GH.StatusCategoryPicker.defaultStatusCategoryId),GH.Dialogs.CreateStatus.clearErrors())})},GH.Dialogs.CreateStatus.addStatusExistsErrors=function(){AJS.$("#js-status-category-error").text("The category for the existing status with this name will be used")},GH.Dialogs.CreateStatus.clearErrors=function(){AJS.$("#js-status-category-error").text("Helps identify where an issue is in its lifecycle")},GH.Dialogs.CreateStatus.registerStatusCategoryControls=function(){GH.Dialogs.CreateStatus.fetchStatusCategoryConfig().done(function(t){t&&GH.Dialogs.CreateStatus.renderStatusCategoryPicker().done(function(){GH.Dialogs.CreateStatus.dialog.updateHeight()})})},GH.Dialogs.CreateStatus.renderStatusCategoryPicker=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/statuscategory")).then(function(t){var a=_.reject(t,function(t){return"undefined"===t.key});AJS.$("#js-status-category-picker-container").html(GH.tpl.dialogs.createstatus.renderCategoryPicker()),GH.Dialogs.CreateStatus.bindStatusNameEvents(),GH.Dialogs.CreateStatus.statusCategoryPicker=GH.StatusCategoryPicker.build({element:AJS.$("#ghx-status-category-picker"),statusCategories:a})})},GH.Dialogs.CreateStatus.fetchStatusCategoryConfig=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")).andThen(function(t){return _.find(t,function(t){return _.isObject(t.statusCategory)})})},GH.Dialogs.CreateStatus.submit=function(t,a){clearTimeout(GH.Dialogs.CreateStatus.statusNameChangedTimeout);var e=AJS.$("#ghx-status-name").val()||[],s=AJS.$("#ghx-status-category-picker").val(),r={rapidViewId:a,name:AJS.$.trim(e.pop()),statusCategoryId:parseInt(s,10)||GH.StatusCategoryPicker.defaultStatusCategoryId};GH.Ajax.post({url:"/workflow/status/create.json",data:r,errorContextMap:{name:"#ghx-status-name"}}).done(function(a){GH.Dialogs.CreateStatus.analytics.trigger("complete"),t.dispose(),AJS.$(GH).trigger(GH.Dialogs.CreateStatus.EVENT_STATUS_CREATED,a.success)}).fail(function(){GH.Dialogs.CreateStatus.dialog.updateHeight(),t.enableControls()})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/CreateStatus.soy' */
// This file was automatically generated from CreateStatus.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.createstatus.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.createstatus == 'undefined') { GH.tpl.dialogs.createstatus = {}; }


GH.tpl.dialogs.createstatus.renderCreateStatusDialog = function(opt_data, opt_ignored) {
  return '<form class="aui"><fieldset><div class="field-group"><label for="ghx-status-name">' + soy.$$escapeHtml('Name') + ':<span class="aui-icon icon-required"></span></label><select id="ghx-status-name"></select></div></fieldset><div id="js-status-category-picker-container"></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.createstatus.renderCreateStatusDialog.soyTemplateName = 'GH.tpl.dialogs.createstatus.renderCreateStatusDialog';
}


GH.tpl.dialogs.createstatus.renderCategoryPicker = function(opt_data, opt_ignored) {
  return '<fieldset><div class="field-group"><label for="ghx-status-category">' + soy.$$escapeHtml('Category') + ':<span class="aui-icon icon-required"></span></label><select id="ghx-status-category-picker" class="hidden"></select><div id="js-status-category-error" class="description">' + soy.$$escapeHtml('Helps identify where an issue is in its lifecycle') + '</div></div></fieldset>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.createstatus.renderCategoryPicker.soyTemplateName = 'GH.tpl.dialogs.createstatus.renderCategoryPicker';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/AddColumn.js' */
GH.Dialogs.AddColumn={},GH.Dialogs.AddColumn.EVENT_COLUMN_ADDED="columnAdded",GH.Dialogs.AddColumn.statusCategoryPicker=null,GH.Dialogs.AddColumn.statusNameChangedTimeout=null,function(){var a=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.AddColumn.analytics=new a("gh.config.add.column.dialog.change")}(),GH.Dialogs.AddColumn.showDialog=function(a,t){var o={rapidViewId:a,alsoAddStatus:t};GH.Dialogs.AddColumn.renderDialog(o),GH.Dialogs.AddColumn.analytics.trigger("start")},GH.Dialogs.AddColumn.renderDialog=function(a){var t=function(){GH.Dialogs.AddColumn.analytics.trigger("cancel")},o=GH.Dialogs.AddColumn.dialog=GH.Dialog.create({width:575,height:200,id:"ghx-dialog-add-column",onCancelFn:t});o.addHeader("Add column"),o.addPanel("","panel");var e=AJS.$(GH.tpl.dialogs.addcolumn.renderAddColumnDialog({}));o.getCurrentPanel().html(e);var n=function(){return o.disableControls(),GH.Dialogs.AddColumn.submit(o,a),!1};o.addButton("Add",n,"aui-button"),e.submit(n),GH.Dialog.addCancelButton(o),GH.Dialogs.AddColumn.registerStatusCategoryControls(),AJS.$(".aui-dialog").addClass("ghx-dialog"),o.show(),AJS.$(".aui-blanket").empty(),AJS.$("#ghx-column-name").focus()},GH.Dialogs.AddColumn.submit=function(a,t){clearTimeout(GH.Dialogs.AddColumn.statusNameChangedTimeout);var o=AJS.$("#ghx-column-name").val(),e=AJS.$("#ghx-status-category-picker").val(),n={rapidViewId:t.rapidViewId,name:AJS.$.trim(o),alsoAddStatus:t.alsoAddStatus,statusCategoryId:parseInt(e,10)||GH.StatusCategoryPicker.defaultStatusCategoryId};GH.Ajax.post({url:"/rapidviewconfig/columns",data:n,errorContextMap:{name:"#ghx-column-name"}}).done(function(t){GH.Dialogs.AddColumn.analytics.trigger("complete"),a.dispose(),AJS.$(GH).trigger(GH.Dialogs.AddColumn.EVENT_COLUMN_ADDED,t.success)}).fail(function(){GH.Dialogs.AddColumn.dialog.updateHeight(),a.enableControls()})},GH.Dialogs.AddColumn.handleColumnNameChanged=function(){var a,t=AJS.$("#ghx-column-name").val()||"",o=AJS.$.trim(t.toLowerCase());a=t?AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")):AJS.$.Deferred().resolve([]),a.done(function(a){var t=_.find(a,function(a){return a.name.toLowerCase()===o});t?(GH.Dialogs.AddColumn.statusCategoryPicker.disableWithValue(t.statusCategory.id),GH.Dialogs.AddColumn.addStatusExistsErrors()):(GH.Dialogs.AddColumn.statusCategoryPicker.enableWithValueIfDisabled(GH.StatusCategoryPicker.defaultStatusCategoryId),GH.Dialogs.AddColumn.clearErrors())})},GH.Dialogs.AddColumn.addStatusExistsErrors=function(){AJS.$("#js-status-category-error").text("The category for the existing status with this name will be used")},GH.Dialogs.AddColumn.clearErrors=function(){AJS.$("#js-status-category-error").text("Helps identify where an issue is in its lifecycle")},GH.Dialogs.AddColumn.registerStatusCategoryControls=function(){GH.Dialogs.AddColumn.fetchStatusCategoryConfig().done(function(a){a&&GH.Dialogs.AddColumn.renderStatusCategoryPicker().done(function(){GH.Dialogs.AddColumn.dialog.updateHeight()})})},GH.Dialogs.AddColumn.renderStatusCategoryPicker=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/statuscategory")).then(function(a){var t=_.reject(a,function(a){return"undefined"===a.key});AJS.$("#js-status-category-picker-container").html(GH.tpl.dialogs.createstatus.renderCategoryPicker()),GH.Dialogs.AddColumn.bindColumnNameEvents(),GH.Dialogs.AddColumn.statusCategoryPicker=GH.StatusCategoryPicker.build({element:AJS.$("#ghx-status-category-picker"),statusCategories:t})})},GH.Dialogs.AddColumn.fetchStatusCategoryConfig=function(){return AJS.$.get(GH.Ajax.buildBareRestUrl("/rest/api/2/status")).andThen(function(a){return _.find(a,function(a){return _.isObject(a.statusCategory)})})},GH.Dialogs.AddColumn.bindColumnNameEvents=function(){var a=AJS.$("#ghx-column-name"),t=GH.RapidBoard.Browsers.isInputEventSupported();a.on(t?"input":"keypress",function(){clearTimeout(GH.Dialogs.AddColumn.statusNameChangedTimeout),GH.Dialogs.AddColumn.statusNameChangedTimeout=setTimeout(GH.Dialogs.AddColumn.handleColumnNameChanged,275)})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/AddColumn.soy' */
// This file was automatically generated from AddColumn.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.addcolumn.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.addcolumn == 'undefined') { GH.tpl.dialogs.addcolumn = {}; }


GH.tpl.dialogs.addcolumn.renderAddColumnDialog = function(opt_data, opt_ignored) {
  return '<form class="aui"><fieldset><div class="field-group"><label for="ghx-column-name">' + soy.$$escapeHtml('Name') + ':<span class="aui-icon icon-required"></span></label><input class="text" type="text" maxlength="30" id="ghx-column-name" value=""></div></fieldset><div id="js-status-category-picker-container"></div></form>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.addcolumn.renderAddColumnDialog.soyTemplateName = 'GH.tpl.dialogs.addcolumn.renderAddColumnDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/RemoveStatus.js' */
GH.Dialogs.RemoveStatus={},GH.Dialogs.RemoveStatus.EVENT_STATUS_REMOVED="statusRemoved",function(){var t=require("jira-agile/rapid/analytics-tracker");GH.Dialogs.RemoveStatus.analytics=new t("gh.config.remove.status.dialog.change")}(),GH.Dialogs.RemoveStatus.showDialog=function(t,a){GH.Dialog.dim(),GH.Ajax.get({url:"/workflow/status/remove.json",data:{rapidViewId:t,statusId:a}},"removeStatusDialog").done(GH.Dialogs.RemoveStatus.renderDialog).fail(GH.Dialog.undim),GH.Dialogs.RemoveStatus.analytics.trigger("start")},GH.Dialogs.RemoveStatus.renderDialog=function(t){var a=function(){GH.Dialogs.RemoveStatus.analytics.trigger("cancel")},e=GH.Dialog.create({width:575,height:250,id:"ghx-dialog-remove-status",onCancelFn:a});e.addHeader("Remove status"),e.addPanel("","panel");var i=AJS.escapeHTML(String(t.statusName)),s="",o="";if(t.isInitialStatus){var l=AJS.escapeHTML(String(t.newInitialStatusName));s=AJS.format("{0} is the initial status for project {1}.",t.statusName,t.projectName),o=AJS.format("Any issues which are created in this project will now default to status {0}{1}{2}.","<b>",l,"</b>")}e.getCurrentPanel().html(GH.tpl.dialogs.removestatus.renderRemoveStatusDialog({statusName:i,isInitialStatus:t.isInitialStatus,newInitialStatusTitle:s,newInitialStatusDesc:o})),e.addButton("Remove",function(){e.disableControls(),GH.Dialogs.RemoveStatus.submit(e,t)},"aui-button"),GH.Dialog.addCancelButton(e),AJS.$(".aui-dialog").addClass("ghx-dialog"),e.show(),e.updateHeight()},GH.Dialogs.RemoveStatus.submit=function(t,a){var e={statusId:a.statusId,workflowName:a.workflowName,isInitialStatus:!1};a.isInitialStatus&&(e.isInitialStatus=a.isInitialStatus,e.newInitialStatusId=a.newInitialStatusId),GH.Ajax.post({url:"/workflow/status/remove.json",data:e}).done(function(e){GH.Dialogs.RemoveStatus.analytics.trigger("complete"),t.dispose(),AJS.$(GH).trigger(GH.Dialogs.RemoveStatus.EVENT_STATUS_REMOVED,a.statusId)}).fail(t.enableControls)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/RemoveStatus.soy' */
// This file was automatically generated from RemoveStatus.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.removestatus.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.removestatus == 'undefined') { GH.tpl.dialogs.removestatus = {}; }


GH.tpl.dialogs.removestatus.renderRemoveStatusDialog = function(opt_data, opt_ignored) {
  return ((opt_data.isInitialStatus) ? GH.tpl.rapid.notification.renderAuiMessage({type: 'info', title: opt_data.newInitialStatusTitle, message: opt_data.newInitialStatusDesc, messageHtml: true, icon: true}) : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format('Are you sure you want to remove status {0}{1}{2} from the current workflow?','<b>',opt_data.statusName,'</b>')) + '</p><p>' + soy.$$escapeHtml('This will not affect any other workflows that use this status.') + '</p>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.removestatus.renderRemoveStatusDialog.soyTemplateName = 'GH.tpl.dialogs.removestatus.renderRemoveStatusDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/RemoveIssuesFromSprintDialog.soy' */
// This file was automatically generated from RemoveIssuesFromSprintDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.removeissuesfromsprint.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.removeissuesfromsprint == 'undefined') { GH.tpl.dialogs.removeissuesfromsprint = {}; }


GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog = function(opt_data, opt_ignored) {
  var output = '<div class="aui-message warning"><p class="title"><span class="aui-icon icon-warning"></span>' + soy.$$escapeHtml('Sprint scope will be affected by this action.') + '</p></div>';
  var changeList6 = opt_data.changes;
  var changeListLen6 = changeList6.length;
  for (var changeIndex6 = 0; changeIndex6 < changeListLen6; changeIndex6++) {
    var changeData6 = changeList6[changeIndex6];
    output += GH.tpl.dialogs.issuemovedialog.renderChange({change: changeData6});
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog.soyTemplateName = 'GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/RemoveIssuesFromSprintDialog.js' */
GH.RemoveIssuesFromSprintDialog={},GH.RemoveIssuesFromSprintDialog.Analytics={},function(){var e=require("jira-agile/rapid/analytics-tracker");GH.RemoveIssuesFromSprintDialog.Analytics.remove=new e("gh.sprint.issue.remove")}(),GH.RemoveIssuesFromSprintDialog.constructDialog=function(e,i){var n=GH.Dialog.create({width:600,height:250,id:"ghx-remove-issues-from-sprint",onCancelFn:function(n){i.reject(e)}}),t=_.reduce(e.changes,function(e,i){return e+i.issueKeys.length},0);n.addHeader(AJS.format("Move {0,choice,1# issue|2\u003c issues}",t)),n.addPanel("","panel");var o=GH.tpl.dialogs.removeissuesfromsprint.renderRemoveIssuesFromSprintsDialog(e);n.getCurrentPanel().html(o);var s="Confirm";n.addButton(s,function(){n.disableControls(),n.dispose(),i.resolve(e)},"aui-button"),GH.Dialog.addCancelButton(n),n.show(),n.updateHeight(),AJS.$("#"+n.id).find(".dialog-button-panel .button-panel-cancel-link").focus()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/IssueMoveDialog.soy' */
// This file was automatically generated from IssueMoveDialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.dialogs.issuemovedialog.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.dialogs == 'undefined') { GH.tpl.dialogs = {}; }
if (typeof GH.tpl.dialogs.issuemovedialog == 'undefined') { GH.tpl.dialogs.issuemovedialog = {}; }


GH.tpl.dialogs.issuemovedialog.renderChange = function(opt_data, opt_ignored) {
  return '' + ((opt_data.change.issueKeys.length > 0) ? '<p>' + GH.tpl.dialogs.issuemovedialog.renderMoveMessage({issueKeys: opt_data.change.issueKeys, fromSprint: opt_data.change.currentSprint, toSprint: opt_data.change.targetSprint}) + '</p>' : '') + ((opt_data.change.doneIssueKeys.length > 0) ? '<p>' + GH.tpl.dialogs.issuemovedialog.renderRemoveMessage({issueKeys: opt_data.change.doneIssueKeys}) + '</p>' : '');
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderChange.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderChange';
}


GH.tpl.dialogs.issuemovedialog.renderRemoveMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issuesHtml__soy18 = '' + GH.tpl.dialogs.issuemovedialog.renderIssues(opt_data);
  output += soy.$$filterNoAutoescape(AJS.format('{0} {1,choice,1# is|2\x3c are} done and will be removed and only appear in reports.',issuesHtml__soy18,opt_data.issueKeys.length));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderRemoveMessage.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderRemoveMessage';
}


GH.tpl.dialogs.issuemovedialog.renderMoveMessage = function(opt_data, opt_ignored) {
  var output = '';
  var issuesHtml__soy24 = '' + GH.tpl.dialogs.issuemovedialog.renderIssues(opt_data);
  var fromSprintHtml__soy27 = '' + GH.tpl.dialogs.issuemovedialog.renderSprintBacklog({sprint: opt_data.fromSprint});
  var toSprintHtml__soy30 = '' + GH.tpl.dialogs.issuemovedialog.renderSprintBacklog({sprint: opt_data.toSprint});
  output += soy.$$filterNoAutoescape(AJS.format('{0} will be moved from {1} to {2}.',issuesHtml__soy24,fromSprintHtml__soy27,toSprintHtml__soy30));
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderMoveMessage.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderMoveMessage';
}


GH.tpl.dialogs.issuemovedialog.renderSprintBacklog = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.sprint) {
    var sprintHtml__soy38 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.sprint.name});
    output += soy.$$filterNoAutoescape(AJS.format('sprint {0}',sprintHtml__soy38));
  } else {
    output += soy.$$escapeHtml('the backlog');
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderSprintBacklog.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderSprintBacklog';
}


GH.tpl.dialogs.issuemovedialog.renderIssues = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issueKeys.length == 1) {
    var firstHtml__soy48 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    output += soy.$$filterNoAutoescape(AJS.format('{0}',firstHtml__soy48));
  } else if (opt_data.issueKeys.length == 2) {
    var firstHtml__soy54 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    var secondHtml__soy57 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[1]});
    output += soy.$$filterNoAutoescape(AJS.format('{0} and {1}',firstHtml__soy54,secondHtml__soy57));
  } else if (opt_data.issueKeys.length > 2) {
    var firstHtml__soy63 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[0]});
    var secondHtml__soy66 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys[1]});
    var moreCountHtml__soy69 = '' + GH.tpl.dialogs.issuemovedialog.emphasis({value: opt_data.issueKeys.length - 2});
    output += soy.$$filterNoAutoescape(AJS.format('{0}, {1} and {2} more {3,choice,1# issue|2\x3c issues}',firstHtml__soy63,secondHtml__soy66,moreCountHtml__soy69,opt_data.issueKeys.length - 2));
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.renderIssues.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.renderIssues';
}


GH.tpl.dialogs.issuemovedialog.emphasis = function(opt_data, opt_ignored) {
  return '<strong>' + soy.$$escapeHtml(opt_data.value) + '</strong>';
};
if (goog.DEBUG) {
  GH.tpl.dialogs.issuemovedialog.emphasis.soyTemplateName = 'GH.tpl.dialogs.issuemovedialog.emphasis';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/dialog/ConfirmDialog.js' */
GH.ConfirmDialog={},GH.ConfirmDialog.create=function(n,a){var t={header:"Confirmation",content:"Are you sure?",contentEscaping:!0,onConfirmFn:function(){},onCancelFn:function(){},width:433,height:184,analyticsPageName:void 0},e=_.defaults(a,t),i=GH.Dialog.create({id:n,width:e.width,height:e.height,closeOnOutsideClick:!1,onCancelFn:e.onCancelFn,analyticsPageName:e.analyticsPageName});i.addHeader(e.header);var o;return o=e.contentEscaping?AJS.$("<div />").text(e.content):AJS.$("<div />").html(e.content),i.addPanel("",o,"ghx-confirm-dialog-panel"),i.addButton("Confirm",function(n){n.dispose(),e.onConfirmFn()},"aui-button"),GH.Dialog.addCancelButton(i),AJS.$("#"+i.id).addClass("ghx-dialog"),i};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkDataCacheService.js' */
define("jira-agile/rapid/ui/work/work-data-cache-service",["require"],function(){"use strict";var a=(require("jira-agile/rapid/ajax"),require("jira-agile/rapid/ui/board-data-cache-service")),r={};r.storeData=function(r){if(r.issuesData){var i=r.rapidViewId,t=e(i);a.storeData(t,r)}},r.getData=function(r){var i=e(r);return a.getData(i)};var e=function(a){var r=GH.UserData.getUserName();return"gh.work.data."+r+"."+a};return r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkController.js' */
function _toConsumableArray(e){if(Array.isArray(e)){for(var r=0,o=Array(e.length);r<e.length;r++)o[r]=e[r];return o}return Array.from(e)}var _slicedToArray=function(){function e(e,r){var o=[],t=!0,n=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(t=(i=l.next()).done)&&(o.push(i.value),!r||o.length!==r);t=!0);}catch(s){n=!0,a=s}finally{try{!t&&l["return"]&&l["return"]()}finally{if(n)throw a}}return o}return function(r,o){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){"use strict";function e(e,r,o){if(GH.WorkDataLoader.markDirty(),GH.WorkDataLoader.clearEtag(),D.isFeatureEnabled("jsw.classic.board.drag-and-drop.change-error-message"))GH.RapidBoard.ViewController.showErrorPanelDragAndDrop(r,o);else if(e&&4!==e.readyState){if("timeout"===e.statusText)return void GH.Notification.showError(null,AJS.format("We\'\'re trying to move your {0,choice,1#issue|1\u003cissues}, but the server isn\'\'t talking to us. Please refresh the page and try again.",r.length));GH.Notification.showError(null,"We\'re having trouble moving issues right now. Check your network connection, refresh the page and try again.")}GH.WorkController.reload()}function r(){L.handleDeferredResourceImport(q()&&!GH.DetailsView,function(){return GH.WorkView.detailViewOpen&&GH.DetailsView.hasEditsInProgress()})}function o(e,r,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e&&(r.issuesData.issues=GH.WorkController.getFilteredIssues(r.issuesData.issues),o&&d()),D.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&N.triggerAfter("after:boardSearchFilter","boardSearchFilter"),t(r,n)}function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];GH.GridDataController.setData(e),GH.CallbackManager.executeCallbacks(GH.WorkController.CALLBACK_POOL_LOADED),GH.WorkController.setSprintData(e),e.sprintsData?GH.WorkControls.setSprintData(e.sprintsData.sprints,e.sprintsData.canManageSprints):GH.WorkControls.setSprintData([],!1),GH.VersionController.setProjects(e.issuesData.projects),GH.VersionController.setVersions(e.versionData),GH.WorkController.initializeSelection(),GH.WorkController.updateUI(e,r),S.prefetch(),b.trace("gh.rapid.view.rendered");var o=D.getFlagResultObject("jsw-classic-work-data-poller-backoff").value;o&&o.backoffRequired===!0?GH.Poller.addPollerWithBackoff("WorkPoller",function(){return GH.WorkController.checkForUpdates(!1,GH.WorkDataLoader.LOAD_INITIATOR.POLLING)},GH.WorkDataLoader.NEW_DATA_WITH_CHANGES,o):GH.Poller.addPoller("WorkPoller",function(){return GH.WorkController.checkForUpdates(!1,GH.WorkDataLoader.LOAD_INITIATOR.POLLING)})}function n(e,r,o,t,n,a){var i=Ae(),l=null;if(GH.spa&&(l=GH.spa.slaUtil(i,I.WORK)),null!==l&&"success"===l.state)404!==i&&De();else if(void 0===i||null===i){var s=te;if(GH.WorkController.sla.globalErrors.hasNonScriptError()&&(s=ne),_.startSpan("work-controller-check-board-and-fire-failed-sla",{start:F.additionalDebugAttributesForWorkController()}),F.hasUserChangedRoute())return f.sendOperationalEvent({source:"workModeNavigation",actionSubject:"workModeNavigationFailure",action:"navigated-away",attributes:{reason:ie,numEmptyBoards:e.length,numColumns:r.length,numIssues:o.length,numEmptyColumns:t.length,haveFiltersApplied:n}}),void me();Ee(we(s,rapidboard,a,oe+"-unknown")),_.endSpan("work-controller-check-board-and-fire-failed-sla",{end:F.additionalDebugAttributesForWorkController()})}else if(i>=500){var d=GH.WorkController.recordSqlExceptionInReasonIfPresent(i),u=_slicedToArray(d,2),c=u[0],k=u[1];Ee({reason:c,statusCode:i,errorMessage:k,debugAttributes:Se(i)})}me()}function a(){var e=GH.WorkController.rapidViewData.id,r=!0;_.startSpan("work-controller-init-filters-bridge-get-data",{start:F.additionalDebugAttributesForWorkController()});var o=GH.WorkDataLoader.getData(e);o.done(function(e){_.endSpan("work-controller-init-filters-bridge-get-data",{end:F.additionalDebugAttributesForWorkController()}),s(e.issuesData.issues)}),GH.WorkController.unsubscribeQuickFilterUpdate&&GH.WorkController.unsubscribeQuickFilterUpdate(),GH.WorkController.unsubscribeQuickFilterUpdate=GH.bridge.FilterBridge.on("update",function(e){var o=GH.WorkControls.getActiveQuickFilterIds();GH.WorkController.activeFilters=Object.assign({},e,{searchText:e.searchText.trim()}),GH.WorkControls.setActiveQuickFilterIds(e.quickFilterList),o.length===e.quickFilterList.length&&r||GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.QUICK_FILTERS_CHANGE,!D.isFeatureEnabled("moonwalk.eventually-consistent.board-quick-filters")),GH.RapidBoard.State.pushState(),o.length===e.quickFilterList.length&&r?GH.WorkController.initialData&&(e.searchText&&D.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&N.triggerBefore("before:boardSearchFilter","boardSearchFilter"),O?GH.WorkController.setPoolDataNew(GH.WorkController.initialData,!0):GH.WorkController.setPoolData(GH.WorkController.initialData)):(D.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&N.triggerBefore("before:boardQuickFilter","boardQuickFilter"),_.log("work-controller-filter-bridge-on-update-get-data",{log:F.additionalDebugAttributesForWorkController()}),GH.WorkController.reload(),r=!0),!GH.RapidBoard.State.isKanbanBoard()&&e.selectedSprint&&GH.RapidBoard.WorkSubnavigatorContextProvider.selectedItem()!==e.selectedSprint&&GH.RapidBoard.WorkSubnavigatorContextProvider.selectionHandler(e.selectedSprint),i()}),GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_ISSUE_DATA_RELOADED,function(){r=!1,d()}),GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_ISSUE_CREATED,function(){r=!1,d()}),GH.WorkRanking.on(GH.WorkRanking.events.RANK_CHANGE,function(){r=!1}),GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_ALL_FILTERS_CLEARING,function(){GH.bridge.FilterBridge.clearAllFilters()})}function i(){var e=GH.RapidViewConfig.currentData.data,r=GH.WorkControls.quickfilters.getQuickFilters().filter(function(e){return e.isActive}).map(function(e){return e.query});r.length>0&&f.sendTrackEvent({containerType:e.locationType,containerId:JIRA.API&&JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectId(),objectType:"board",objectId:e.id,source:"boardScreen",actionSubject:"quickFilter",actionSubjectId:"applyQuickfilter",action:"applied",attributes:{boardId:e.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),quickFiltersAppliedCount:r.length,onlyMyIssuesQuickFilterApplied:r.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY)>-1,recentlyUpdatedQuickFilterApplied:r.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY)>-1,customQuickFilterApplied:r.some(function(e){return e!==GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY&&e!==GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY})}})}function l(){var e=GH.RapidBoard.WorkSubnavigatorContextProvider.selectedItem(),r=GH.RapidBoard.WorkSubnavigatorContextProvider.itemList().reduce(function(e,r){return e.concat(r)},[]).map(function(r){return{id:r.id,name:r.label,isActive:r.id===e}});GH.bridge.FilterBridge.loadSprintPicker(r)}function s(){GH.bridge.FilterBridge.reset(),d(),GH.RapidBoard.updateMultilineQuickFilterToggledState()}function d(){var e=GH.WorkControls.quickfilters.getQuickFilters().map(function(e){return _extends({},e,{id:parseInt(e.id,10)})});GH.bridge.FilterBridge.loadQuickFilterList(e),G(),p(),GH.WorkController.isSprintSupportEnabled()&&l()}function u(){var e=GH.GridDataController.getModel();return Object.values(e.getIssues())}function c(){var e=m.getUserConfig();if(e)return{id:e.accountId,name:e.displayName,avatarUrl:e.avatarUrl}}function k(e,r){var o=c();o&&e.findIndex(function(e){return e.id===o.id})===-1&&(o.isActive=!!r.assigneeList&&r.assigneeList.indexOf(o.id)>-1,e.push(o)),e.findIndex(function(e){return e.id===le})===-1&&e.push({id:le,name:"Unassigned",isActive:!!r.assigneeList&&r.assigneeList.indexOf(le)>-1})}function C(){var e=GH.WorkController.activeFilters,r=u(),o=r.map(function(r){var o=r.assigneeAccountId||le;return{id:o,name:r.assigneeName||"Unassigned",avatarUrl:r.avatarUrl,isActive:!!e.assigneeList&&e.assigneeList.indexOf(o)>-1}}).reduce(function(e,r){return e.find(function(e){return r.id===e.id})?e:e.concat(r)},[]);return k(o,e),o}function G(){var e=C();GH.bridge.FilterBridge.loadAssigneeList(e)}function p(){var e=GH.WorkController.activeFilters;e.searchText&&GH.bridge.FilterBridge.loadSearchText(e.searchText)}function H(e,r){return e&&e.search(new RegExp(r,"i"))>-1}function g(){var e=require("jira-agile/rapid/ui/work/mode-tools-controller");e.render({hasUser:GH.UserData.hasUser(),workMode:GH.WorkController.isSprintSupportEnabled()?e.SPRINT:e.KANBAN})}var f=require("jira/analytics/web-client"),W=require("jira-agile/rapid/analytics-tracker"),I=require("jira-agile/rapid/const/PageMode"),w=require("jira-agile/rapid/work/quick-filters-bridge"),h=require("jira-agile/rapid/global-events"),S=(require("jira-agile/features/feature-flags"),require("jira-agile/rapid/configuration/ConfigContextLoader")),b=require("jira/util/logger"),D=require("jira/featureflags/feature-manager"),E=require("jira-agile/rapid/ui/bento/api"),A=require("jira-agile/rapid/ui/bento/bento-features"),m=require("jira-agile/rapid/user-data"),v=require("underscore"),T=require("jquery"),R=require("jira/util/top-same-origin-window"),N=require("jira-agile/browser-metrics/browser-metrics-util"),O=D.isFeatureEnabled("jsw.board.load.pool.data.refactor"),y=D.isFeatureEnabled("jsw.check.for.updates.call.delay"),_=require("jira-agile/rapid/trace-utils"),F=require("jira-agile/rapid/trace-utils-helper"),V=require("jira-agile/rapid/retry-utils"),L=require("jira-agile/rapid/deferred-resources-loader"),B="jira-agile/rapid/ui/kanplan/KanPlanOnboardingController",P=require("jira-agile/rapid/ui/sla/global-errors"),U=(require("jira-agile/rapid/analytics/board-data-udpate"),D.getFlagResultObject("jsw.classic.rapid.board.refresh.button").value),j=D.isFeatureEnabled("jsw.classic.common.sla.utils"),x=D.isFeatureEnabled("jsw.classic.common.sla.utils.legacy"),M=D.isFeatureEnabled("jsw.classic.auto.refresh.board"),q=function(){return D.isFeatureEnabled("cbb.heritage")},K=function(){return D.isFeatureEnabled("jira.insights.button.insight-button-selected-enabled")},Q={NEXT_GEN:"NEXTGEN",CLASSIC:"CLASSIC"},Y={NEXT_GEN_AND_CLASSIC:"NEXT_GEN_AND_CLASSIC",NEXT_GEN_ONLY:"NEXT_GEN_ONLY",CLASSIC_ONLY:"CLASSIC_ONLY",UNKNOWN:"UNKNOWN"},X=function(e){try{return require(e)}catch(r){return}},J=X(B),z=function(){return R(window).document},$=void 0,Z=void 0;h.on("pre-initialization",function(){Z=require("jira-agile/rapid/ui/work/work-transition-service"),$=require("jira-agile/rapid/ui/work/work-data-cache-service")});var ee=30,re=25,oe="board-critical-data-failed",te="board-critical-data-failed-unknown-reason",ne="board-critical-data-failed-with-frontend-error",ae="board-critical-data-failed-with-status-code",ie="board-critical-data-failed-due-to-route-changed";GH.WorkController=new GH.Events,GH.WorkController.viewData=void 0,GH.WorkController.activeFilters={},GH.WorkController.initialData=null,GH.WorkController.currentViewConfig={},GH.WorkController.isVisible=!1,GH.WorkController.unsubscribeQuickFilterUpdate=null,GH.WorkController.lastSeenRapidBoardId=null,GH.WorkController.latestBoardRefreshedTime=null,GH.WorkController.CALLBACK_POOL_RENDERED="gh.work.pool.rendered",GH.WorkController.CALLBACK_POOL_LOADED="gh.work.pool.loaded",GH.WorkController.EVENT_NAMES={ON_PLAN_MODE:"OnPlanMode",ON_ALL_FILTERS_CLEARING:"OnAllFiltersClearing",ON_RELOAD_EMPTY_STATE_VIEW:"OnReloadEmptyStateMessage",ON_ISSUE_DATA_RELOADED:Symbol("ON_ISSUE_DATA_RELOADED"),ON_ISSUE_CREATED:Symbol("ON_ISSUE_CREATED")},GH.WorkController.TRANSITION="transition",GH.WorkController.QUICK_EDIT="quickEdit",GH.WorkController.FIX_VERSIONS_FIELD_ID="fixVersions",GH.WorkController.sla={},GH.WorkController.sla.task="viewBoard",GH.WorkController.sla.analyticsSource="board",GH.WorkController.sla.application="jira-software",GH.WorkController.sla.latestErrorStatusCode=null,GH.WorkController.sla.setPoolDataNewFlow=null,GH.WorkController.sla.sqlException=null,GH.WorkController.sla.globalErrors=null,GH.WorkController.analytics=new W("gh.workmode");var le="UNASSIGNED_USER_ID",se=function(){ue(),window.addEventListener("error",function(e){try{I&&GH.RapidBoard.State.getMode()===I.WORK&&GH.WorkController.sla.globalErrors.recordError(e)}catch(r){}return!1})},de=function(){return ue()},ue=function(){GH.WorkController.sla.globalErrors=new P(re)},ce=function(){AJS.$("#ghx-issue-fragment").trigger("board-refreshInsightsPanel")},ke=function(e,r){v.delay(function(){GH.SwimlaneView.columnWidthChanged(),GH.WorkView.updateDetailViewVisibilityAndSize(),GH.WorkController.ensureSelectionExpanded(),D.isFeatureEnabled("jsw.classic.browser-metrics.issueNo")||GH.WorkController.updateBoardState(e),GH.CallbackManager.executeCallbacks(GH.WorkController.CALLBACK_POOL_RENDERED),GH.WorkDragAndDrop.initDraggables(T("#ghx-pool")),GH.RapidBoard.ViewController.updateContentContainer(),GH.WorkView.scrollIssueToView(),O&&e&&r&&he(),e&&r&&(GH.WorkController.cacheIssuesMetadata(e),D.isFeatureEnabled("jsw.classic.delay.toolSections")&&GH.ViewActions.setMode(I.WORK)),y&&Z.checkForUpdates(),e&&$.storeData(e),K()&&GH.RapidBoard.ViewController.isInsightsPanelOpen()&&ce()})},Ce=function(){return"object"===_typeof(window.GADGET)&&"boolean"==typeof window.GADGET.boardInitialized};GH.WorkController.init=v.once(function(){_.startSpan("work-control-init",{start:F.additionalDebugAttributesForWorkController()}),GH.WorkControls.init(),_.endSpan("work-control-init",{end:F.additionalDebugAttributesForWorkController()}),GH.WorkKBNavigation.init(),GH.WorkView.init(),GH.SwimlaneView.init(),GH.WorkSelectionController.init(),GH.WorkDragAndDrop.init(),GH.VersionController.init(),T(GH).bind("issueSelected",GH.WorkController.handleIssueSelectionEvent),T(GH.WorkControls.quickfilters).bind("quickFilterChange",function(){GH.WorkController.isVisible&&GH.WorkController.reload()}),T(GH.WorkControls.sprintfilters).bind("sprintFilterChange",function(){GH.WorkController.isVisible&&(GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.QUICK_FILTERS_CHANGE,!D.isFeatureEnabled("moonwalk.eventually-consistent.board-quick-filters")),GH.WorkController.reload())}),T("#ghx-issue-fragment").on("close",function(e,r){var o=function(){GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.BENTO_MODAL_CLOSED),GH.WorkController.checkForUpdates(!0)};if(D.isFeatureEnabled("moonwalk-bento-unnecessary-fetch-calls-in-boards-removal"))r&&void 0!==r.forceRefresh?r.forceRefresh&&o():o(),GH.RapidBoard.State.setWorkIssueModalOpened(!1),GH.RapidBoard.State.pushState();else{GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.BENTO_MODAL_CLOSED);var t=!0;GH.RapidBoard.State.setWorkIssueModalOpened(!1),GH.RapidBoard.State.pushState(),GH.WorkController.checkForUpdates(t)}}),T("#ghx-issue-fragment").on("refresh-sprints-on-board",function(e,r){GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.BENTO_SPRINT_PICKER_CLICKED),GH.WorkControls.setActiveSprintFilterIds(r.sprintIds),GH.WorkController.reload(),GH.RapidBoard.State.pushState()}),T(GH).bind("issueCreated",GH.WorkController.handleIssueCreatedEvent),T(GH).bind("issueUpdated",GH.WorkController.handleIssueUpdatedEvent),A.isBentoSidebarOnBoardEnabled()&&T("#ghx-issue-fragment").on("issue-updated",function(e,r){var o={type:"issueUpdated"},t={issueKey:r.issueKey,fieldId:r.fieldId,source:"detailView"};GH.WorkController.handleIssueUpdatedEvent(o,t)}),T(GH).bind("issuesRemovedFromSprint",GH.WorkController.handleIssuesRemovedFromSprint),y||T(GH).bind("workModeUIReady",function(){Z.checkForUpdates()}),L.handleDeferredResourceImport(!J,function(){J=require(B),J.init()}),GH.WorkController.on("after:render",function(e,r){ke(e,r)});try{se()}catch(e){}}),GH.WorkController.setRapidView=function(e){GH.WorkController.rapidViewData=e,GH.SwimlaneView.setRapidView(GH.WorkController.rapidViewData)},GH.WorkController.isSprintSupportEnabled=function(){return GH.WorkController.rapidViewData.sprintSupportEnabled};var Ge=function(){w.isReactFiltersEnabled().then(function(e){e&&a()})};GH.WorkController.show=function(){if(GH.WorkController.rapidViewData)return GH.WorkController.isVisible=!0,GH.WorkView.show(),L.handleDeferredResourceImport(q()&&!GH.DetailsView,function(){GH.DetailsView.setRapidViewId(GH.WorkController.rapidViewData.id)}),GH.WorkController.loadRapidViewConfig(!0,GH.WorkDataLoader.LOAD_INITIATOR.INITIAL_LOAD).done(function(){y||(He(),fe()),Ge(),GH.WorkController.showIssueModalIfNeeded(),A.isUsingBentoSidebarOnBoard()&&GH.RapidBoard.State.isWorkMode()&&GH.RapidBoard.State.isDetailsViewOpened()&&AJS.$("#ghx-issue-fragment").trigger("detail-view-ready",GH.WorkSelectionController.getSelectedIssueKey()),y&&pe()}).always(function(){O||he()}).fail(function(){O&&(y?v.delay(function(){he()}):he())})};var pe=function(){v.delay(function(){He(),fe()})};GH.WorkController.hide=function(){GH.Poller.removePoller("WorkPoller"),GH.SwimlaneView.hide(),GH.WorkView.hide(),L.handleDeferredResourceImport(q()&&!GH.DetailsView,function(){GH.DetailsView.hide()}),GH.WorkController.isVisible=!1,GH.WorkDataLoader.markDirty(),L.handleDeferredResourceImport(!J,function(){J=require(B),J.hide()}),GH.WorkController.unsubscribeQuickFilterUpdate&&GH.WorkController.unsubscribeQuickFilterUpdate()},GH.WorkController.isActive=function(){return GH.WorkController.isVisible},GH.WorkController.loadRapidViewConfig=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GH.WorkDataLoader.LOAD_INITIATOR.UNKNOWN,o=new T.Deferred,t=function(t){if(_.endSpan("rapidviewconfig-fetchconfig",{end:F.additionalDebugAttributesForWorkController()}),GH.WorkController.isVisible){GH.WorkController.currentViewConfig=t;var n=GH.WorkController.initializeWorkMode(e,r);n.done(function(){o.resolveWith(this)}),n.fail(function(){o.rejectWith(this)})}};return _.startSpan("rapidviewconfig-fetchconfig",{start:F.additionalDebugAttributesForWorkController()}),GH.RapidViewConfig.fetchConfiguration(GH.WorkController.rapidViewData.id).done(t),o.promise()},GH.WorkController.initializeWorkMode=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GH.WorkDataLoader.LOAD_INITIATOR.UNKNOWN;if(GH.WorkController.currentViewConfig.columns&&!(GH.WorkController.currentViewConfig.columns.length<0))return GH.WorkControls.setRapidViewConfig(GH.WorkController.currentViewConfig),GH.SwimlaneView.setRapidViewConfig(GH.WorkController.currentViewConfig),L.handleDeferredResourceImport(q()&&!GH.DetailsView,function(){GH.DetailsView.setRapidViewConfig(GH.WorkController.currentViewConfig)}),_.startSpan("workcontrols-rendercontrols",{start:F.additionalDebugAttributesForWorkController()}),GH.WorkControls.renderControls(),_.endSpan("workcontrols-rendercontrols",{end:F.additionalDebugAttributesForWorkController()}),GH.WorkView.hideLoadingFilter(),GH.WorkController.configureUI(),L.handleDeferredResourceImport(q()&&!GH.DetailsView,function(){GH.WorkView.detailViewOpen&&(GH.DetailsView.preloadData(),GH.WorkController.openDetailsView(GH.DetailsView.getSelectedIssueKey()))}),_.startSpan("work-controller-init-work-mode-load-pool-data",{start:F.additionalDebugAttributesForWorkController()}),GH.WorkController.loadPoolData(e,r).done(function(){_.endSpan("work-controller-init-work-mode-load-pool-data",{end:F.additionalDebugAttributesForWorkController()}),y||Z.preloadData()})},GH.WorkController.optimisticallyTransition=function(r,o,t,n,a){var i=GH.RapidBoard.State.getRapidViewId(),l={rapidViewId:i,issueKeys:r,targetColumn:a,selectedTransitionId:o},s=GH.WorkController.submitTransitionAndRank(l);return GH.WorkController.moveIssuesTo(r,n,a),s.done(function(){r.forEach(function(e){GH.WorkController.handleIssueUpdatedEvent({},{issueId:GH.GridDataController.getModel().getIssueIdForKey(e),source:GH.WorkController.TRANSITION})}),GH.Dialog.createParentCompletedCheckCallback(r[0])()}).fail(function(o,t){return e(t,r,o)})},GH.WorkController.moveIssuesTo=function(e,r,o){GH.GridDataController.getModel().moveIssuesToColumn(e,r,o),GH.WorkView.skipNextDetailViewUpdate(),GH.WorkController.updateUI()},GH.WorkController.submitTransitionAndRank=function(e){return GH.Ajax.put({url:"/xboard/transitionAndRank",data:e,timeout:1e3*ee})},GH.WorkController._rollbackOnFailure=e,GH.WorkController.preload=function(e){return _.log("work-controller-preload",{log:F.additionalDebugAttributesForWorkController()}),GH.WorkDataLoader.getData(e,GH.WorkDataLoader.LOAD_INITIATOR.INITIAL_LOAD)},GH.WorkController.reload=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GH.WorkDataLoader.LOAD_INITIATOR.UNKNOWN;return GH.WorkDataLoader.markDirty(),GH.Notification.clearBoardUpdatedMessage(),_.log("work-controller-reload-load-pool-data",{log:F.additionalDebugAttributesForWorkController()}),GH.WorkController.loadPoolData(!1,e)},GH.WorkController.loadPoolData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GH.WorkDataLoader.LOAD_INITIATOR.UNKNOWN;GH.WorkView.showLoadingPool();var o=GH.WorkController.rapidViewData.id,t=GH.WorkDataLoader.getData(o,r);return t.done(function(r){GH.WorkController.setPoolData(r,!1,e)}).then(function(){D.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&N.triggerAfter("after:boardQuickFilter","boardQuickFilter")}),t.fail(GH.WorkController.handleInvalidSprint),t.fail(function(){GH.WorkView.hideLoadingPool()}),t},GH.WorkController.handleInvalidSprint=function(e,r,o,t){_.startSpan("work-controller-handle-request-failure",{start:F.additionalDebugAttributesForWorkController(),res:e,xhr:r});var n=e.error&&e.error.errors&&e.error.errors[0]&&e.error.errors[0].message;GH.WorkController.sla.latestErrorStatusCode=r&&r.status,r&&r.getResponseHeader("sql-exception")&&(GH.WorkController.sla.sqlException=r.getResponseHeader("sql-exception")),GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),n&&n==="Sprint does not exist"?GH.WorkControls.sprintfilters.validateActiveSprints():n&&n==="This board has no columns with a mapped status."?GH.WorkController.renderNoMappedColumnsMsg():GH.Ajax.handleGlobalErrors(e,o,t),_.endSpan("work-controller-handle-request-failure",{end:F.additionalDebugAttributesForWorkController()})},GH.WorkController.checkForUpdates=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GH.WorkDataLoader.LOAD_INITIATOR.UNKNOWN;if(!(window.location.href.indexOf("/RapidBoard.jspa")===-1||GH.RapidBoard.ViewController.hasTransitionedToAnotherRoute(window.location)||GH.PlanController&&GH.PlanController.isActive())){var t=GH.WorkController.rapidViewData.id,n=GH.WorkDataLoader.checkForUpdates(t,o);return n.done(function(o){e&&!r()?o===GH.WorkDataLoader.NEW_DATA_WITH_CHANGES?GH.WorkController.applyLoadedData():o===GH.WorkDataLoader.NEW_DATA_NO_CHANGE&&GH.WorkController.reloadDetailView():o===GH.WorkDataLoader.NEW_DATA_WITH_CHANGES&&(M?GH.WorkController.applyLoadedData():GH.WorkController.showBoardUpdatedMessage())}),n.fail(function(e){var r=e.error&&e.error.errors&&e.error.errors[0]&&e.error.errors[0].message;r&&r==="Sprint does not exist"&&GH.Notification.showWarnings("Sorry, either the sprint\'s been deleted, or you don\'t have permission to view it.",{autoHide:!1,preRendered:!0})}),n}},GH.WorkController.showBoardUpdatedMessage=function(){GH.Notification.showBoardUpdatedMessage().done(function(){GH.WorkController.applyLoadedData(),"enabled-without-text"===U&&(GH.WorkController.latestBoardRefreshedTime=Date.now())})},GH.WorkController.applyLoadedData=function(){var e=GH.WorkController.rapidViewData.id;_.startSpan("work-controller-apply-loaded-data",{start:F.additionalDebugAttributesForWorkController()});var r=GH.WorkDataLoader.getData(e);return r.done(function(e){_.endSpan("work-controller-apply-loaded-data",{end:F.additionalDebugAttributesForWorkController()}),GH.WorkController.setPoolData(e),GH.Notification.clearBoardUpdatedMessage()}),r},GH.WorkController.hasDataChanged=function(e){return GH.GridDataController.hasDataChanged(e)},GH.WorkController.validateAssigneeList=function(){var e=C().map(function(e){var r=e.id;return r}),r=GH.WorkController.activeFilters.assigneeList||[],o=r&&r.filter(function(r){return e.includes(r)});return o.length===r.length?{isValid:!0,newAssigneeList:o}:{isValid:!1,newAssigneeList:o}},GH.WorkController.setPoolData=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(O)return GH.WorkController.setPoolDataNew(e,!1,o);if(GH.WorkController.isVisible){_.startSpan("work-controller-set-pool-data",{start:F.additionalDebugAttributesForWorkController(),isFiltered:r,isFullPageLoad:o});var t=!1;if(e!==GH.WorkController.initialData&&(GH.WorkController.initialData=e,D.isFeatureEnabled("jsw.classic.browser-metrics.issueNo")&&GH.WorkController.updateBoardState(e),t=!0),w.isReactFiltersEnabled().then(function(o){o&&(e.issuesData.issues=GH.WorkController.getFilteredIssues(e.issuesData.issues),r||(_.log("work-controller-set-pool-data-quick-filter-bridge",{log:F.additionalDebugAttributesForWorkController()}),GH.WorkController.setPoolData(e,!0),D.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&N.triggerAfter("after:boardSearchFilter","boardSearchFilter")),t&&d())}),GH.GridDataController.setData(e),GH.CallbackManager.executeCallbacks(GH.WorkController.CALLBACK_POOL_LOADED),GH.WorkController.setSprintData(e),e.sprintsData?GH.WorkControls.setSprintData(e.sprintsData.sprints,e.sprintsData.canManageSprints):GH.WorkControls.setSprintData([],!1),GH.VersionController.setProjects(e.issuesData.projects),GH.VersionController.setVersions(e.versionData),GH.WorkController.initializeSelection(),_.startSpan("work-controller-set-pool-data-update-ui",{start:F.additionalDebugAttributesForWorkController()}),GH.WorkController.updateUI(e,o),_.endSpan("work-controller-set-pool-data-update-ui",{end:F.additionalDebugAttributesForWorkController()}),S.prefetch(),b.trace("gh.rapid.view.rendered"),!Ce()){var n=D.getFlagResultObject("jsw-classic-work-data-poller-backoff").value;n&&n.backoffRequired===!0?GH.Poller.addPollerWithBackoff("WorkPoller",function(){return GH.WorkController.checkForUpdates(!1,GH.WorkDataLoader.LOAD_INITIATOR.POLLING)},GH.WorkDataLoader.NEW_DATA_WITH_CHANGES,n):GH.Poller.addPoller("WorkPoller",function(){return GH.WorkController.checkForUpdates(!1,GH.WorkDataLoader.LOAD_INITIATOR.POLLING)})}_.endSpan("work-controller-set-pool-data",{end:F.additionalDebugAttributesForWorkController()})}},GH.WorkController.setPoolDataNew=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(GH.WorkController.isVisible){var a=!1;e!==GH.WorkController.initialData&&(GH.WorkController.initialData=e,D.isFeatureEnabled("jsw.classic.browser-metrics.issueNo")&&GH.WorkController.updateBoardState(e),a=!0);var i=GH.WorkController.activeFilters,l=i&&(i.assigneeList&&i.assigneeList.length>0||i.issueTypeList&&i.issueTypeList.length>0||i.searchText&&i.searchText.length>0);GH.GridDataController.setData(e),l?(GH.WorkController.sla.setPoolDataNewFlow="haveFiltersApplied",w.isReactFiltersEnabled().then(function(r){o(r,e,a,n)})):r?(GH.WorkController.sla.setPoolDataNewFlow="fromReactFilter",o(!0,e,a,n)):(GH.WorkController.sla.setPoolDataNewFlow="defaultElse",e.issuesData.issues=GH.WorkController.getFilteredIssues(e.issuesData.issues),t(e,n))}},GH.WorkController.updateBoardState=function(e){if(e&&e.versionData&&e.versionData.versionsPerProject&&e.issuesData&&e.issuesData.issues&&e.issuesData.projects){var r=Object.getOwnPropertyNames(e.versionData.versionsPerProject).map(function(r){return e.versionData.versionsPerProject[r].length}).reduce(function(e,r){return e+r},0),o=e.issuesData.issues.filter(function(e){return null!=e.parentId});GH.RapidBoard.State.numberOfIssues.set(e.issuesData.issues.length),GH.RapidBoard.State.numberOfSubtasks.set(o.length),GH.RapidBoard.State.numberOfProjects.set(e.issuesData.projects.length),GH.RapidBoard.State.numberOfVersions.set(r),GH.RapidBoard.State.oldDoneIssuesCutoff.set(e.oldDoneIssuesCutoff),GH.RapidBoard.State.numberOfEpics.reset(),GH.RapidBoard.State.jqsInJsw.set(e.jqsInJsw)}},GH.WorkController.setSprintData=function(e){GH.WorkController.sprintData=e.sprintsData,GH.RapidBoard.ViewController.mountOrUnmountInsightButton()},GH.WorkController.cacheIssuesMetadata=function(e){E.done(function(r){if(r&&r.fetchIssues&&e&&e.issuesData&&e.issuesData.issues){var o=e.issuesData.issues.filter(function(e){return!e.hidden}).map(function(e){var r=e.key;return r});o&&o.length>0&&r.fetchIssues(o)}})},GH.WorkController.initializeSelection=function(){GH.WorkKBNavigation.initCurrentPosition(),GH.WorkSelectionController.validateCurrentSelection()},GH.WorkController.ensureSelectionExpanded=function(){var e=GH.WorkSelectionController.getSelectedIssueKey();e&&GH.SwimlaneView.setSwimlaneCollapsedStateForIssueKey(e,!1)},GH.WorkController.updateUI=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];GH.WorkController.configureUI(),GH.WorkController.renderUI(),T(GH).trigger("workModeUIReady"),GH.WorkController.trigger("after:render",e,r)},GH.WorkController.configureUI=function(){var e=GH.WorkSelectionController.getSelectedIssueKey(),r=GH.WorkController.isDetailsViewOpened();!e&&r&&(r=!1),K()&&!r&&GH.RapidBoard.ViewController.isInsightsPanelOpen()&&(r=!0),GH.WorkView.configureUI(!!r&&e),GH.WorkController.setDetailViewOpenedState(r)},GH.WorkController.renderUI=function(){var e=void 0;e=q()?GH.DetailsViewOpts.isUsingBentoSidebarOnBoard:GH.DetailsView.opts.isUsingBentoSidebarOnBoard,GH.RapidBoard.State.isNewIssueViewEnabled()&&!e&&(K()?GH.RapidBoard.ViewController.isInsightsPanelOpen()||GH.WorkController.closeDetailsView():GH.WorkController.closeDetailsView()),_.startSpan("work-controller-render-ui",{start:F.additionalDebugAttributesForWorkController()}),GH.WorkController.renderModeTools(),GH.WorkControls.drawSprints(),GH.WorkView.renderPoolAndDetailView();var r=GH.GridDataController.getModel();L.handleDeferredResourceImport(!J,function(){J=require(B),J.update(r)}),GH.WorkControls.updateSwimlaneOptions(r.hasSwimlanes()),_.endSpan("work-controller-render-ui",{end:F.additionalDebugAttributesForWorkController()})},GH.WorkController.renderModeTools=function(){g(),GH.RapidBoard.State.getMode()===I.WORK&&(L.getDeferBatchParsed()?g():L.actionOnDeferParsingComplete(g))},GH.WorkController.setDetailViewOpenedState=function(e){GH.RapidBoard.State.setWorkViewDetailsViewOpened(e||!1),e?T("#ghx-detail-view").css({display:""}):T("#ghx-detail-view").css({display:"none"})},GH.WorkController.isDetailsViewOpened=function(){return!A.isBentoEnabled()||A.isUsingBentoSidebarOnBoard()?GH.RapidBoard.State.isDetailsViewOpened():GH.WorkView.isIssueModalOpened()},GH.WorkController.getStatisticField=function(){return GH.WorkController.currentViewConfig.statisticConfig.typeId},GH.WorkController.toggleDetailsView=function(e){if(!A.isBentoEnabled()||A.isUsingBentoSidebarOnBoard())if(GH.WorkController.isDetailsViewOpened())GH.WorkController.closeDetailsView();else{var r=GH.WorkSelectionController.getSelectedIssueKey();GH.WorkController.openDetailsView(r,e)}else GH.RapidBoard.State.isNewIssueViewEnabled()&&(GH.WorkView.isIssueModalOpened()?GH.WorkView.closeIssueModal():GH.WorkSelectionController.getSelectedIssueKey()&&GH.WorkView.displayIssueModal({},e))},GH.WorkController.openDetailsView=function(e,r){
K()&&GH.RapidBoard.ViewController.resetInsightPanelOpen();var o=void 0;if(o=q()?GH.DetailsViewOpts.isUsingBentoSidebarOnBoard:GH.DetailsView.opts.isUsingBentoSidebarOnBoard,(!GH.RapidBoard.State.isNewIssueViewEnabled()||o)&&e){var t=GH.WorkSelectionController.getSelectedIssueKey(),n=!1;t&&t==e||(n=!0,GH.WorkSelectionController.selectIssue(e,{pushState:!1})),GH.WorkController.isDetailsViewOpened()?GH.WorkController.updateDetailViewIssue(e,r):(n=!0,GH.WorkController.setDetailViewOpenedState(!0),GH.WorkView.openOrCloseDetailView(e,r)),n&&GH.RapidBoard.State.pushState()}},GH.WorkController.closeDetailsView=function(){L.handleDeferredResourceImport(q()&&!GH.DetailsView,function(){GH.DetailsView.hasCurrentError()}),GH.WorkController.isDetailsViewOpened()&&(GH.WorkController.setDetailViewOpenedState(!1),GH.RapidBoard.State.pushState(),GH.WorkView.openOrCloseDetailView(!1))},GH.WorkController.reloadDetailView=function(e){!A.isBentoEnabled()&&GH.WorkController.isDetailsViewOpened()&&L.handleDeferredResourceImport(q()&&!GH.DetailsView,function(){GH.DetailsView.reload(e)})},GH.WorkController.updateDetailViewIssue=function(e,r){GH.WorkController.isDetailsViewOpened()&&(K()&&GH.RapidBoard.ViewController.resetInsightPanelOpen(),L.handleDeferredResourceImport(q()&&!GH.DetailsView,function(){GH.DetailsView.setSelectedIssueKey(e),GH.DetailsView.show(null,r)}))},GH.WorkController.issueModalApi=function(){return E},GH.WorkController.showIssueModalIfNeeded=function(){var e=void 0;if(e=q()?GH.DetailsViewOpts.isUsingBentoSidebarOnBoard:GH.DetailsView.opts.isUsingBentoSidebarOnBoard,GH.WorkSelectionController.getSelectedIssueKey()&&GH.RapidBoard.State.isNewIssueViewEnabled()&&!GH.WorkView.isIssueModalOpened()&&!e){var r=GH.RapidBoard.UrlState.getCurrentUrlState().modal;if("detail"===r){var o=require("jira/container-api"),t=require("jira/util/safe-logger"),n=function(){return E.done(function(){return GH.WorkView.displayIssueModal({loadedWithInitialPageLoad:!0})})};if(o.getIsIframe()){var a=1,i=function l(){return o.APIs.getNavigationAPI().then(n)["catch"](function(e){t.safeError("rapidboard","Failed to load NavigationAPI before opening Bento on try #"+a),setTimeout(l,100*a++)})};i()}else n()}}},GH.WorkController.toggleEpicsShowOnWorkboard=function(){GH.ViewActions.toggleEpicsShowOnRapidBoard(),GH.WorkController.updateUI(),AJS.trigger("analyticsEvent",{name:"jira-software.work.boardmenu.click."+(GH.RapidBoard.State.getEpicShownOnRapidBoard()?"show":"hide")+"-epic-lables"})},GH.WorkController.handleIssueSelectionEvent=function(e,r){var o=GH.WorkSelectionController.getSelectedIssueKey();GH.WorkController.isDetailsViewOpened()&&(o?GH.WorkController.updateDetailViewIssue(o):GH.WorkController.closeDetailsView())},GH.WorkController.resolveParentTask=function(e){GH.WorkController.isVisible&&GH.Ajax.get({url:"/xboard/issue/subtasksInFinalColumn.json",data:{issueId:e.id,rapidViewId:GH.WorkController.rapidViewData.id}},"subtaskCompletionCheck").done(function(r){GH.WorkController.loadTransitions(e,r)}).fail(GH.WorkView.hideLoadingPool)},GH.WorkController.loadTransitions=function(e,r){GH.WorkController.isVisible&&r.subtasksInFinalColumn&&GH.Ajax.get({url:"/xboard/issue/transitions.json",data:{issueId:e.id}},"loadTransitions").done(function(r){var o=GH.GridDataController.getModel(),t=v.last(o.data.columns);if(t){for(var n=[],a=0;a<r.transitions.length;a++)for(var i=0;i<t.statusIds.length;i++)t.statusIds[i]==r.transitions[a].targetStatus&&n.push(r.transitions[a]);GH.Dialogs.CompleteParentDialog.showDialog(e,n,t)}})},GH.WorkController.handleIssueUpdatedEvent=function(e,r){if(GH.WorkController.isVisible){GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.ISSUE_UPDATE);var o=!1,t=!1,n=r.issueKey?GH.GridDataController.getModel().getIssueIdForKey(r.issueKey):parseInt(r.issueId,10);if(r.fieldChanges){GH.WorkDataLoader.markDirty();var a=r.fieldChanges[GH.SprintConfig.getSprintFieldId()];a&&a.original!=a.updated&&(o=!0),r.fieldId===GH.WorkController.FIX_VERSIONS_FIELD_ID&&(t=!0)}if(r.source!==GH.WorkController.QUICK_EDIT&&r.source!==GH.WorkController.TRANSITION||(GH.WorkDataLoader.markDirty(),t=!0),o)GH.WorkController.reload(GH.WorkDataLoader.LOAD_INITIATOR.INTERACTION_ISSUE_UPDATE_SPRINT_EDIT);else{if(GH.WorkController.loadIssue(n).done(function(){t&&GH.WorkController.updateVersionData()}),r.source===GH.WorkController.QUICK_EDIT){var i=GH.GridDataController.getModel().getIssueDataById(n);if(i&&i.parentId){var l=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");GH.WorkController.reloadDetailView(l.SUBTASKS_CHANGED)}else GH.WorkController.reloadDetailView()}if(r.source===GH.WorkController.TRANSITION){var s=require("jira-agile/rapid/ui/detail/inlineedit/details-view-reload-reason");GH.WorkController.reloadDetailView(s.DETAILS_FIELD_CHANGED)}}}},GH.WorkController.loadIssue=function(e){return GH.Ajax.get({url:"/xboard/work/issue.json",data:{rapidViewId:GH.RapidBoard.State.getRapidViewId(),issueId:e}},"loadIssue."+e).done(function(e){var r=GH.GridDataController.getModel();r&&(GH.WorkController.sendTrackEventOnIssueLoaded(r.data.issues[e.key],e),r.updateIssueData(e),E.done(function(r){r&&r.updateIssueData&&r.updateIssueData(e)}),GH.WorkDragAndDrop.isIssueBeingDragged(e.key)||(GH.SwimlaneView.rerenderIssue(e.key),b.trace("gh.work.issue.updated"+e.key)),GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_ISSUE_DATA_RELOADED,e))})},GH.WorkController.sendTrackEventOnIssueLoaded=function(e,r){var o=[];if(e.status.id!=r.status.id&&o.push({name:"status",oldValId:e.status.id,newValId:r.status.id}),e.status.statusCategory.id!=r.status.statusCategory.id&&o.push({name:"statusCategory",oldValId:e.status.statusCategory.id,newValId:r.status.statusCategory.id,oldValName:e.status.statusCategory.key,newValName:r.status.statusCategory.key}),o.length>0){var t=GH.GridDataController.getModel().data.issues[e.key];GH.RapidBoard.sendIssueUpdatedTrackEvent(t,o)}},GH.WorkController.handleIssueCreatedEvent=function(e,r){GH.WorkController.isVisible&&(GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.ISSUE_CREATE),setTimeout(function(){GH.WorkController.reloadAndSelectCreatedIssues(r,GH.WorkDataLoader.LOAD_INITIATOR.INTERACTION_ISSUE_CREATE)},0))},GH.WorkController.reloadAndSelectCreatedIssues=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GH.WorkDataLoader.LOAD_INITIATOR.UNKNOWN,o=e.issues,t=v.map(o,function(e){return e.issueKey}),n=GH.WorkController.reload(r),a=GH.Ajax.get({url:"/xboard/issue/matchesBoard",data:{rapidViewId:GH.WorkController.rapidViewData.id,issueIdsOrKeys:t}}).andThen(function(e){return e.issueIdsOrKeys&&e.issueIdsOrKeys.length===t.length},function(){return T.Deferred().resolve(!1)});return T.when(n,a).done(function(r,o){GH.WorkController._issueCreatedCallback(t,e,o),GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_ISSUE_CREATED)})},GH.WorkController.updateVersionData=function(){if(!GH.WorkController.isVisible)return(new T.Deferred).resolve();var e={rapidViewId:GH.WorkController.rapidViewData.id};return GH.Ajax.get({url:"/xboard/work/versions",data:e}).done(function(e){GH.WorkController.isVisible&&GH.WorkController.setVersionData(e.versionData)})},GH.WorkController.setVersionData=function(e){GH.VersionController.setVersions(e),GH.WorkController.renderModeTools()},GH.WorkController._issueCreatedCallback=function(e,r,o){var t=[],n=GH.GridDataController.getModel();v.each(e,function(e){n.isIssueValid(e)&&t.push(e)});var a=A.isBentoEnabled()&&r.isSubtask;if(!a){var i=!1;v.isEmpty(t)||(i=v.last(t),GH.WorkSelectionController.selectIssue(i));var l=i&&GH.WorkSelectionController.isInSelection(i);if(AJS.trigger("analyticsEvent",{name:"jira-software.board.issue.stats",data:{issueLandedOnTheBoard:l}}),!l){var s=v.extend({},GH.WorkController.sprintData,{issuesMatch:o}),d=require("jira/container-api");D.isFeatureEnabled("issue-create-flag-api")?d.APIs.getFlagsAPI().then(function(e){e.showIssueCreatedFlag(r.issues,s)}):GH.RapidBoard.QuickCreate.showCreatedIssuesMessage(r,s),T(".js-add-new-issue-to-sprint",z()).unbind("click"),T(".js-add-new-issue-to-sprint",z()).click(GH.WorkController.addNewIssueToSprint)}}},GH.WorkController.addNewIssueToSprint=function(e){GH.WorkController.trigger("before:addNewIssueToSprint"),GH.Notification.clear(),GH.WorkController.analytics.trigger("addtosprintaftercreate");var r=T(e.target),o=r.attr("data-sprint-id"),t=r.attr("data-issue-keys").split(","),n=GH.GridDataController.getModel(),a=v.last(n.data.order);GH.RankController.sprintRankIssues(GH.RankingModel.getRankCustomFieldId(),t,o,null,a).done(function(e){GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.ISSUE_RANK_ACTION);var r=GH.WorkController.reload(GH.WorkDataLoader.LOAD_INITIATOR.INTERACTION_ISSUE_UPDATE_ADD_TO_SPRINT);r.done(function(){n=GH.GridDataController.getModel();var e=!1,r=!1;v.each(t,function(o){n.isIssueValid(o)?e=o:r=!0}),e&&GH.WorkSelectionController.selectIssue(e),r&&GH.Notification.showSuccess(AJS.format("Your {0,choice,1#issue has|1\u003cissues have} been added to the sprint but {0,choice,1#it is|1\u003cone or more are} not currently visible.",t.length),{timeout:1e4}),GH.WorkController.trigger("after:addNewIssueToSprint")})}).fail(function(){GH.WorkController.trigger("after:addNewIssueToSprint")})},GH.WorkController.handleIssuesRemovedFromSprint=function(e,r){GH.WorkController.isVisible&&(GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.ISSUE_REMOVE_FROM_SPRINT),GH.WorkController.reload(GH.WorkDataLoader.LOAD_INITIATOR.INTERACTION_ISSUE_UPDATE_REMOVE_FROM_SPRINT))},GH.WorkController.changeModeToPlan=function(){GH.RapidBoard.ViewController.setMode(I.PLAN)},GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_PLAN_MODE,GH.WorkController.changeModeToPlan),GH.WorkController.clearAllFiltersAndReload=function(){var e=GH.WorkControls.quickfilters;e&&(e.clearFilters(),GH.RapidBoard.State.pushState()),GH.WorkController.reload()},GH.WorkController.on(GH.WorkController.EVENT_NAMES.ON_ALL_FILTERS_CLEARING,GH.WorkController.clearAllFiltersAndReload),GH.WorkController.renderNoMappedColumnsMsg=function(){var e=T(".ghx-no-active-sprint-message");if(!(e.length>0)){var r=T("#ghx-work");if(!(r.length<1)){var o=require("jira-agile/rapid/ui/work/ActiveSprintEmptyView"),t=GH.RapidBoard.State.getRapidViewId(),n=new o((!1),(!1),t,(!0),(!1),r);GH.RapidViewConfig.fetchConfiguration(t).done(function(e){GH.WorkController.trigger(GH.WorkController.EVENT_NAMES.ON_RELOAD_EMPTY_STATE_VIEW,e.canEdit)}),n.handleNoMappedColumnsMode(),GH.WorkController.setActiveSprintEmptyMsg(n)}}},GH.WorkController.handleEmptyMessageInDashboard=function(){v.isUndefined(GH.WorkController.activeSprintEmptyMsg)||GH.WorkController.activeSprintEmptyMsg.handleOnDashboardMode()},GH.WorkController.setActiveSprintEmptyMsg=function(e){GH.WorkController.activeSprintEmptyMsg=e},GH.WorkController.collectPrintableIssues=function(){return{issues:GH.GridDataController.collectPrintableIssues(),viewMode:I.WORK,boardType:GH.WorkControls.getBoardType()}};var He=function(){if(GH.RapidBoard.State.getMode()===I.WORK){var e=GH.GridDataController.getModel(),r=e.getIssues(),o=e.getSubtasks(),t=GH.RapidBoard.State.getBoardTypeForAnalytics(),n=A.isBentoEnabled()&&!A.isBentoSidebarOnBoardEnabled();f.sendScreenEvent("boardScreen",null,{boardType:t,isIssueDetailVisible:GH.WorkController.isDetailsViewOpened(),isModal:n,isNewIssueView:A.isBentoEnabled()}),AJS.trigger("analyticsEvent",{name:"jira-software.work.show",data:{boardId:GH.RapidViewConfig.currentData.id,boardType:GH.RapidBoard.State.getBoardType(),subtaskCount:o.length,standardIssueCount:v.size(r)-o.length}})}},ge=function(){var e=GH.VersionController.getVersionModel().getProjects(),r=v.countBy(e,function(e){return e.isSimplified?Q.NEXT_GEN:Q.CLASSIC});return r[Q.NEXT_GEN]>0&&r[Q.CLASSIC]>0?Y.NEXT_GEN_AND_CLASSIC:r[Q.NEXT_GEN]>0?Y.NEXT_GEN_ONLY:r[Q.CLASSIC]>0?Y.CLASSIC_ONLY:Y.UNKNOWN},fe=function(){var e=GH.RapidViewConfig.currentData.data,r=GH.GridDataController.model.data.swimlaneIssueMapping,o=Object.keys(r),t=o.filter(function(e){return r[e].length>0}),n=GH.GridDataController.model.data.columns.filter(function(e){return null!=e.max}),a=Object.values(GH.GridDataController.model.data.issues).length,i=Object.values(GH.GridDataController.model.data.issues).filter(function(e){return null!=e.parentId}),l=Object.values(GH.GridDataController.model.data.issues).filter(function(e){return 1==e.hidden}),s=GH.RapidBoard.WorkSubnavigatorContextProvider.itemList(),d=Object.values(GH.GridDataController.model.data.issues),u=[].concat(_toConsumableArray(new Set(d.map(function(e){return e.projectId})))),c=GH.WorkControls.quickfilters.getQuickFilters().filter(function(e){return e.isActive}).map(function(e){return e.query}),k=GH.WorkControls.quickfilters.getQuickFilters().map(function(e){return e.query}),C=e.columns.reduce(function(e,r){return e+r.statusIds.length},0),G=e.columns.filter(function(e){return e.statusIds.length>1}).length;GH.Util.promiseCast(Ie()).then(function(r){f.sendTrackEvent({containerType:e.locationType,containerId:JIRA.API&&JIRA.API.Projects&&JIRA.API.Projects.getCurrentProjectId(),objectType:"board",objectId:e.id,source:"boardScreen",actionSubject:"board",actionSubjectId:e.id,action:"viewed",attributes:_extends({boardId:e.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),numIssues:a,numSubtasks:i.length,numFiltered:l.length,numColumns:e.columns.length,hasHorizontalScrollbar:!1,hasFilteredIssues:l.length>0,hasColumnLimits:n.length>0,hasSwimlanes:e.swimlanes.length>0,numSwimlanes:e.swimlanes.length,numVisibleSwimlanes:t.length,numProjects:u.length,issueResultProjectIds:u,hasMultipleActiveSprints:s&&s.length>1,quickFiltersAppliedCount:c.length,onlyMyIssuesQuickFilterApplied:c.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY)>-1,recentlyUpdatedQuickFilterApplied:c.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY)>-1,quickFiltersConfiguredCount:k.length,onlyMyIssuesQuickFilterConfigured:k.indexOf(GH.Components.QuickFilters.ONLY_MY_ISSUES_FILTER_QUERY)>-1,recentlyUpdatedQuickFilterConfigured:k.indexOf(GH.Components.QuickFilters.RECENTLY_UPDATED_FILTER_QUERY)>-1,planModeCardLayoutCount:e.planModeExtraFieldIds.length,workModeCardLayoutCount:e.workModeExtraFieldIds.length,swimlaneStrategy:e.swimlaneStrategy,swimlaneQueryCount:e.swimlanes.length,hasMultipleStatusesPerColumn:C>e.columns.length,numStatuses:C,numStatusesByColumn:e.columns.map(function(e){return e.statusIds.length}),minStatusesByColumn:e.columns.reduce(function(e,r){return Math.min(e,r.statusIds.length)},C),maxStatusesByColumn:e.columns.reduce(function(e,r){return Math.max(e,r.statusIds.length)},0),avgStatusesByColumn:C/e.columns.length,numColumnsWithMultipleStatuses:G,numColumnsWithSingleStatus:e.columns.length-G},r,{is_SIMPLE_ROADMAP_enabled:e.isRoadmapEnabled,is_SIMPLE_ROADMAP_crossProject:e.isRoadmapCrossProject,projectTypeMix:ge()})})})},We=function(e){var r=Object.keys(e.workflowToTransitions||{}),o=r.map(function(r){return e.workflowToTransitions[r]||[]}).reduce(function(e,r){return e.concat.apply(e,_toConsumableArray(r))},[]),t=function(e){return o.filter(e).length},n=function(o,t,n){return r.reduce(function(r,t){return o(r,n?e.workflowToTransitions[t].filter(n).length:e.workflowToTransitions[t].length)},t)},a=function(e){return!e.isGlobal&&e.isInitial},i=function(e){return!e.isGlobal&&!e.isInitial},l=o.length,s=t(a),d=t(i);return{hasNonGlobalCustomTransitions:d>0,numGlobalTransitions:t(function(e){return e.isGlobal}),numNonGlobalInitialTransitions:s,numNonGlobalCustomTransitions:d,numNonGlobalTransitions:s+d,numTransitionsWithScreen:t(function(e){return e.hasScreen}),numTransitionsWithConditions:t(function(e){return e.hasConditions}),numTransitionsWithValidators:t(function(e){return e.hasValidators}),numTransitions:l,numWorkflows:Object.keys(e.workflowToTransitions||{}).length,minTransitionsPerWorkflow:n(Math.min,l),maxTransitionsPerWorkflow:n(Math.max,0),minNonGlobalCustomTransitionsPerWorkflow:n(Math.min,l,i),maxNonGlobalCustomTransitionsPerWorkflow:n(Math.max,0,i)}},Ie=function(){var e=void 0,r=Z.checkForUpdates();return GH.Util.promiseCast(r).then(function(r){e=[];var o=r.projectAndIssueTypeToWorkflow;return Object.keys(o).forEach(function(r){var t=Object.values(o[r]);e.push({projectId:r,workflowCount:[].concat(_toConsumableArray(new Set(t))).length})}),_extends({projectIdToWorkflowCount:e},We(r))})["catch"](function(){})},we=function(e,r,o,t){return{reason:e,statusCode:"[unknown]",errorMessage:t,numEmptyBoards:rapidBoard.find(".ghx-no-active-sprint-message").length,numColumns:rapidBoard.find(".ghx-swimlane.ghx-first .ghx-columns .ghx-column").length,numIssues:rapidBoard.find(".ghx-issue").length,numEmptyColumns:rapidBoard.find(".ghx-sad-columns .ghx-column").length,haveFiltersApplied:!!o&&(o.assigneeList&&o.assigneeList.length>0||o.issueTypeList&&o.issueTypeList.length>0||o.searchText&&o.searchText.length>0),haveQuickFiltersApplied:!!GH.WorkControls.quickfilters&&GH.WorkControls.quickfilters.getQuickFilters().filter(function(e){return e.isActive}).length>0,debugAttributes:Se(Ae())}},he=function(){if(!GH.WorkController.isActive())return void me();if(j&&x)return void n(a,r,o,t,l,i);var e=AJS.$("#ghx-work"),r=e.find(".ghx-swimlane.ghx-first .ghx-columns .ghx-column"),o=e.find(".ghx-issue"),t=e.find(".ghx-sad-columns .ghx-column"),a=e.find(".ghx-no-active-sprint-message"),i=GH.WorkController.activeFilters,l=i&&(i.assigneeList&&i.assigneeList.length>0||i.issueTypeList&&i.issueTypeList.length>0||i.searchText&&i.searchText.length>0),s=GH.WorkControls.quickfilters&&GH.WorkControls.quickfilters.getQuickFilters().filter(function(e){return e.isActive}).length>0;if(1===a.length)De();else if(r.length>0&&(o.length>0||l||s))De();else if(t.length>0&&0===o.length)De();else{var d=Ae();if(void 0===d||null===d){var u=te;if(GH.WorkController.sla.globalErrors.hasNonScriptError()&&(u=ne),D.isFeatureEnabled("jsw.classic.rapidboards.trace.util.unknownerror.statusnullorundefined")&&f.sendOperationalEvent({source:"workcontroller",actionSubject:"fire-statuscode-null",action:"fire-board-sla",attributes:{reason:"statusnullorundefined",numEmptyBoards:a.length,numColumns:r.length,numIssues:o.length,numEmptyColumns:t.length,haveFiltersApplied:l}}),_.startSpan("work-controller-check-board-and-fire-failed-sla",{start:F.additionalDebugAttributesForWorkController()}),F.hasUserChangedRoute()&&D.isFeatureEnabled("jsw.classic.rapidboards.trace.util.unknownerror"))return f.sendOperationalEvent({source:"workModeNavigation",actionSubject:"workModeNavigationFailure",action:"navigated-away",attributes:{reason:ie,numEmptyBoards:a.length,numColumns:r.length,numIssues:o.length,numEmptyColumns:t.length,haveFiltersApplied:l}}),void me();D.isFeatureEnabled("jsw.classic.rapidboards.trace.util.unknownerror-retry")?V.retryDelay(GH.RapidBoard.State.numberOfIssues.get()>0&&!GH.WorkController.sla.globalErrors.hasNonScriptError(),function(){return Ee(we(u,rapidboard,i,oe+"-unknown"))},3,500):Ee(we(u,rapidboard,i,oe+"-unknown")),_.endSpan("work-controller-check-board-and-fire-failed-sla",{end:F.additionalDebugAttributesForWorkController()})}else if(400===d||401===d||403===d)De({statusCode:d});else if(404===d);else if(d>400&&d<500)De({statusCode:d});else if(d>=500){var c=GH.WorkController.recordSqlExceptionInReasonIfPresent(d),k=_slicedToArray(c,2),C=k[0],G=k[1];Ee({reason:C,statusCode:d,errorMessage:G,debugAttributes:Se(d)})}}me()};GH.WorkController.recordSqlExceptionInReasonIfPresent=function(e){var r=ae,o=oe+"-"+e;if(GH.WorkController.sla.sqlException){var t=GH.WorkController.sla.sqlException.toLowerCase().split("_").join("-");r=oe+"-"+t,o=oe+"-"+e+"-"+t}return[r,o]};var Se=function(e,r){try{var o=GH.WorkController.sla.globalErrors?GH.WorkController.sla.globalErrors.getAllErrors()||[]:[];return{origin:"WorkController",statusCode:e?e:"unknown",userAgent:navigator?navigator.userAgent:"unknown",isTransition:GH.RapidBoard.State?GH.RapidBoard.State.isFirstLoad():"unknown",isSPA:!0,issueNumBackend:GH.RapidBoard.State.numberOfIssues.get(),isRefactorPoolFlag:O,failSource:r,setPoolDataNewFlow:GH.WorkController.sla.setPoolDataNewFlow,windowErrors:o,tracerLogs:_.getTrace(),href:window.location.href,referrer:document.referrer}}catch(t){return{}}},be=function(){return D.isFeatureEnabled("jsw.pollinator.tenants")};GH.WorkController.fireSlaEvent=function(e,r,o){var t=GH.RapidViewConfig.currentData.data;f.sendOperationalEvent({source:"ui",actionSubject:"ui",action:e,attributes:_extends({task:r,analyticsSource:GH.WorkController.sla.analyticsSource,application:GH.WorkController.sla.application,edition:GH.Util.getEdition(GH.WorkController.sla.application),taskId:t.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),isClassic:!0,synthetic:be()},o)})};var De=function(e){if(D.isFeatureEnabled("jsw.classic.work.sla-metric.drag-and-drop"))return void GH.WorkController.fireSlaEvent("taskSuccess","viewBoard",e);var r=GH.RapidViewConfig.currentData.data;f.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskSuccess",attributes:_extends({task:GH.WorkController.sla.task,analyticsSource:GH.WorkController.sla.analyticsSource,application:GH.WorkController.sla.application,edition:GH.Util.getEdition(GH.WorkController.sla.application),taskId:r.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),isClassic:!0,version:"20190912",synthetic:be()},e)})},Ee=function(e){if(GH.RapidBoard.ViewController.hasTransitionedToAnotherRoute(window.location))return!0;if(D.isFeatureEnabled("jsw.classic.work.sla-metric.drag-and-drop"))return _.startSpan("work-controller-fire-view-board-dnd-failed-sla",{start:F.additionalDebugAttributesForWorkController()}),GH.WorkController.fireSlaEvent("taskFail","viewBoard",e),_.endSpan("work-controller-fire-view-board-dnd-failed-sla",{end:F.additionalDebugAttributesForWorkController()}),!0;_.startSpan("work-controller-fire-view-board-failed-sla",{start:F.additionalDebugAttributesForWorkController()});var r=GH.RapidViewConfig.currentData.data;return f.sendOperationalEvent({source:"ui",actionSubject:"ui",action:"taskFail",attributes:_extends({task:GH.WorkController.sla.task,analyticsSource:GH.WorkController.sla.analyticsSource,application:GH.WorkController.sla.application,edition:GH.Util.getEdition(GH.WorkController.sla.application),taskId:r.id,boardType:GH.RapidBoard.State.getBoardTypeForAnalytics(),isClassic:!0,version:"20190912",synthetic:be()},e)}),_.endSpan("work-controller-fire-view-board-failed-sla",{end:F.additionalDebugAttributesForWorkController()}),!1},Ae=function(){return _.log("work-controller-get-latest-error-code-for-sla-event",{log:F.additionalDebugAttributesForWorkController()}),GH.WorkController.sla.latestErrorStatusCode},me=function(){try{_.startSpan("work-controller-clear-sla-data",{start:F.additionalDebugAttributesForWorkController()}),GH.WorkController.sla.latestErrorStatusCode=null,GH.WorkController.sla.setPoolDataNewFlow=null,_.endSpan("work-controller-clear-sla-data",{end:F.additionalDebugAttributesForWorkController()})}finally{F.flushTrace(),_.flushTrace(),de()}};GH.WorkController.getFilteredIssues=function(e){var r=GH.WorkController.activeFilters,o=[].concat(_toConsumableArray(e));if(r){var t=GH.WorkController.lastSeenRapidBoardId!==GH.WorkController.initialData.rapidViewId;if(t){var n=GH.WorkController.validateAssigneeList(),a=n.isValid,i=n.newAssigneeList;a||(GH.WorkController.activeFilters.assigneeList=i,GH.RapidBoard.State.replaceState()),GH.WorkController.lastSeenRapidBoardId=GH.WorkController.initialData.rapidViewId}if(r.assigneeList&&r.assigneeList.length>0){var l=r.assigneeList.includes(le);e=e.filter(function(e){return!(!l||e.assigneeAccountId)||r.assigneeList.indexOf(e.assigneeAccountId)!==-1})}r.issueTypeList&&r.issueTypeList.length>0&&(e=e.filter(function(e){return r.issueTypeList.indexOf(e.typeId)!==-1})),r.searchText&&r.searchText.length>0&&(e=e.filter(function(e){return H(e.assigneeName,r.searchText)||H(e.summary,r.searchText)||H(e.key,r.searchText)||H(e.typeName,r.searchText)}));var s={};e.forEach(function(e){s[e.key]=!0}),o.forEach(function(e){e.hiddenByClientFilter&&(e.hidden=!1,e.hiddenByClientFilter=!1),e.hidden||s[e.key]||(e.hidden=!0,e.hiddenByClientFilter=!0)})}return _.log("work-controller-get-filtered-issues",{log:F.additionalDebugAttributesForWorkController(),numIssues:o.length}),o}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkController.soy' */
// This file was automatically generated from WorkController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.workcontroller.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.workcontroller == 'undefined') { GH.tpl.workcontroller = {}; }


GH.tpl.workcontroller.renderSkeleton = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div id="ghx-pool-column" class="' + ((opt_data.additionalClass) ? soy.$$escapeHtml(opt_data.additionalClass) : '') + '"><div id="ghx-pool" data-skate-ignore></div></div><div id="ghx-detail-view" class="ghx-detail-view"></div>';
};
if (goog.DEBUG) {
  GH.tpl.workcontroller.renderSkeleton.soyTemplateName = 'GH.tpl.workcontroller.renderSkeleton';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkDataLoader.js' */
function _toConsumableArray(a){if(Array.isArray(a)){for(var r=0,e=Array(a.length);r<a.length;r++)e[r]=a[r];return e}return Array.from(a)}!function(){GH.WorkDataLoader={},GH.WorkDataLoader.NEW_DATA_WITH_CHANGES="new data with changes",GH.WorkDataLoader.NEW_DATA_NO_CHANGE="new data no change",GH.WorkDataLoader.NO_DATA_CHANGE="no data change",GH.WorkDataLoader.currentData=void 0,GH.WorkDataLoader.loadingData=void 0;var a=require("jira-agile/rapid/board-data-loader"),r=require("jira-agile/rapid/const/PageMode"),e=require("underscore"),t=require("jira/featureflags/feature-manager"),o=require("jira-agile/rapid/trace-utils"),i=require("jira-agile/rapid/global-events"),d=require("jira-agile/rapid/analytics/board-data-udpate"),n=void 0;i.on("pre-initialization",function(){n=require("jira-agile/rapid/ui/work/work-data-cache-service")}),GH.WorkDataLoader.getData=function(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GH.WorkDataLoader.LOAD_INITIATOR.UNKNOWN;return GH.WorkDataLoader.getDataForViewId(a,!1,r).promise},GH.WorkDataLoader.markDirty=function(){GH.WorkDataLoader.currentData&&(GH.WorkDataLoader.currentData.dirty=!0),GH.WorkDataLoader.loadingData&&(GH.WorkDataLoader.loadingData.dirty=!0)},GH.WorkDataLoader.clearEtag=function(){GH.WorkDataLoader.currentData&&GH.WorkDataLoader.currentData.data&&delete GH.WorkDataLoader.currentData.data.etagData.etag},GH.WorkDataLoader.getDataForViewId=function(a,r){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GH.WorkDataLoader.LOAD_INITIATOR.UNKNOWN;if(!r&&GH.WorkDataLoader.isDataUpToDate(GH.WorkDataLoader.currentData,a))return GH.WorkDataLoader.currentData;if(GH.WorkDataLoader.isDataUpToDate(GH.WorkDataLoader.loadingData,a))return GH.WorkDataLoader.loadingData;var t=void 0===GH.WorkDataLoader.currentData,i=GH.WorkDataLoader.currentData?GH.WorkDataLoader.currentData.data:n.getData(a),d=!!i&&i.etagData.etag,D=GH.WorkDataLoader.load(a,d,!1,e),l=new AJS.$.Deferred;return D.requestPromise.done(function(r){var n=this;if(o.isKeyPresent("bigPipeKeyFallback")&&o.endSpan("bigPipeKeyFallback"),GH.WorkDataLoader.loadingData===D){GH.WorkDataLoader.currentData=GH.WorkDataLoader.loadingData;var u=r.etagData.etag===d;u&&(r=i);var c=e===GH.WorkDataLoader.LOAD_INITIATOR.POLLING;s(r,t,u,c),GH.WorkDataLoader.currentData.data=r,GH.WorkDataLoader.loadingData=void 0,r.issuesData?l.resolveWith(this,[r]):(o.startSpan("work-data-loader-getDataForViewId-reload"),GH.WorkDataLoader.load(a,null).requestPromise.done(function(a){o.endSpan("work-data-loader-getDataForViewId-reload"),GH.WorkDataLoader.currentData.data=a,l.resolveWith(n,[a])}))}}),D.requestPromise.fail(l.reject),D.promise=l.promise(),GH.WorkDataLoader.loadingData=D,GH.WorkDataLoader.loadingData};var s=function(a,r,e,t){var o=!a.issuesData||!a.issuesData.issues,i=o?0:a.issuesData.issues.length;AJS.trigger("analyticsEvent",{name:"jira-software.work.data.cache",data:{isFirstLoad:r,isHit:e,isInvalidData:o,isPolling:t,issueCount:i}})};GH.WorkDataLoader.isLoadingData=function(){return GH.WorkDataLoader.loadingData&&"pending"===GH.WorkDataLoader.loadingData.promise.state()},GH.WorkDataLoader.checkForUpdates=function(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GH.WorkDataLoader.LOAD_INITIATOR.UNKNOWN,e=AJS.$.Deferred();if(GH.WorkDataLoader.isLoadingData())e.resolveWith(this,["ignore"]);else{var i=GH.WorkDataLoader.currentData.data.etagData.etag;o.startSpan("work-data-loader-check-for-updates");var d=GH.WorkDataLoader.getDataForViewId(a,!0,r);d.promise.done(function(a){o.endSpan("work-data-loader-check-for-updates"),a.etagData.etag===i?e.resolveWith(this,[GH.WorkDataLoader.NO_DATA_CHANGE]):GH.WorkController.hasDataChanged(a)?(e.resolveWith(this,[GH.WorkDataLoader.NEW_DATA_WITH_CHANGES]),t.isFeatureEnabled("jsw.classic.board.api-calls.modern-frontend")&&GH.RapidBoard.updateData&&GH.RapidBoard.updateData(a)):e.resolveWith(this,[GH.WorkDataLoader.NEW_DATA_NO_CHANGE])}),d.promise.fail(e.reject)}return e.promise()},GH.WorkDataLoader.isDataUpToDate=function(a,r){if(o.startSpan("workDataLoader-isDataUpToDate",{dirty:!a||!!a.dirty}),!a||a.dirty)return o.endSpan("workDataLoader-isDataUpToDate"),!1;if(a.promise&&a.promise.isRejected())return o.appendSpanLog("workDataLoader-isDataUpToDate",{loadedFailed:!0}),o.endSpan("workDataLoader-isDataUpToDate"),!1;var e=GH.WorkDataLoader.areRequestParamsUpToDate(a,r);return o.appendSpanLog("workDataLoader-isDataUpToDate",{areRequestParamsUpToDate:e}),o.endSpan("workDataLoader-isDataUpToDate"),e},GH.WorkDataLoader.areRequestParamsUpToDate=function(a,r){var t=GH.WorkControls.getActiveQuickFilterIds(),o=GH.WorkControls.getActiveSprintIds();return a.viewId===r&&e.isEqual(a.activeQuickFilters,t)&&e.isEqual(a.activeSprints,o)};var D=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={};i.viewId=e,i.activeQuickFilters=GH.WorkControls.getActiveQuickFilterIds().slice(),i.activeSprints=GH.WorkControls.getActiveSprintIds().slice();var d={rapidViewId:e,selectedProjectKey:GH.RapidBoard.projectKey};return t&&(d.etag=t),i.activeQuickFilters&&i.activeQuickFilters.length>0&&!o&&(d.activeQuickFilters=i.activeQuickFilters),i.activeSprints&&i.activeSprints.length>0&&(d.activeSprints=i.activeSprints),i.requestPromise=a.loadData(r.WORK,function(){return GH.WorkDataLoader.submitLoadAllDataRequestLegacy(i,d)}),i},l=function(e,o){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:GH.WorkDataLoader.LOAD_INITIATOR.UNKNOWN,s=[].concat(_toConsumableArray(GH.WorkControls.getActiveQuickFilterIds())),D=[].concat(_toConsumableArray(GH.WorkControls.getActiveSprintIds())),l={rapidViewId:e,selectedProjectKey:GH.RapidBoard.projectKey};s&&s.length>0&&!i&&(l.activeQuickFilters=s),D&&D.length>0&&(l.activeSprints=D),o&&(l.etag=o),l.forceConsistency=GH.ECX.shouldForceConsistency();var u=a.loadData(r.WORK,function(){return d(n,l.forceConsistency),t.isFeatureEnabled("jsw.classic.pir.split.poll.endpoint")&&GH.WorkDataLoader.LOAD_INITIATOR.POLLING===n?GH.WorkDataLoader.submitPollAllDataRequest(l):GH.WorkDataLoader.submitLoadAllDataRequest(l)});return{viewId:e,activeQuickFilters:s,activeSprints:D,requestPromise:u}};GH.WorkDataLoader.LOAD_INITIATOR={UNKNOWN:"unknown",POLLING:"polling",INITIAL_LOAD:"initial_load",INTERACTION_ISSUE_CREATE:"interaction.issue_create",INTERACTION_ISSUE_UPDATE_SPRINT_EDIT:"interaction.issue_update.sprint_edit",INTERACTION_ISSUE_UPDATE_ADD_TO_SPRINT:"interaction.issue_update.add_to_sprint",INTERACTION_ISSUE_UPDATE_REMOVE_FROM_SPRINT:"interaction.issue_update.remove_from_sprint"},GH.WorkDataLoader.load=function(a,r,e,o){return t.isFeatureEnabled("moonwalk.eventually-consistent.board-update-analytics")?l(a,r,e,o):D(a,r,e)},GH.WorkDataLoader.submitLoadAllDataRequestLegacy=function(a,r){var e="/xboard/work/allData.json",o=AJS.$.extend({},r);return o.forceConsistency=GH.ECX.shouldForceConsistency(),t.isFeatureEnabled("jsw.classic.display.board.settings.when.failure")?c(e,o):k(e,o)},GH.WorkDataLoader.submitPollAllDataRequest=function(a){return c("/xboard/work/poll.json",a)},GH.WorkDataLoader.submitLoadAllDataRequest=function(a){if(t.isFeatureEnabled("jsw.classic.board.api-calls.modern-frontend")&&GH.RapidBoard.loadData&&(GH.RapidBoard.State.isFirstLoad()||GH.RapidBoard.State.isLoadDataClaimed()))return u();var r="/xboard/work/allData.json";return t.isFeatureEnabled("jsw.classic.display.board.settings.when.failure")?c(r,a):k(r,a)};var u=function(){var a=AJS.$.Deferred(),e=!GH.RapidBoard.State.isFirstLoad()&&!GH.RapidBoard.State.isLoadDataClaimed();return GH.RapidBoard.loadData({isRefresh:e,deferred:a,mode:r.WORK}),a.fail(function(){GH.ViewActions.loadBoardSettingWhenAllDataFails()}).always(function(){GH.RapidBoard.State.setLoadDataClaimed(!1)}),a.promise()},c=function(a,r){return GH.Ajax.get({url:a,data:r,deferErrorHandling:!0},"workAllData").fail(function(a){GH.ViewActions.loadBoardSettingWhenAllDataFails()})},k=function(a,r){return GH.Ajax.get({url:a,data:r,deferErrorHandling:!0},"workAllData")}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkView.js' */
!function(){var e=require("jira/featureflags/feature-manager"),i=function(){return e.isFeatureEnabled("cbb.heritage")},o=require("jira-agile/rapid/deferred-resources-loader"),r=function(){return e.isFeatureEnabled("jira.insights.button.insight-button-selected-enabled")};GH.WorkView={},GH.WorkView.isVisible=!1,GH.WorkView.detailViewOpen=!1,GH.WorkView.isRendering=!1,GH.WorkView.init=function(){AJS.$(GH).bind(GH.Layout.EVENT_DELAYED_RESIZE,GH.WorkView.handleResizeEvent),AJS.$(document).on("click",".js-view-actions-work .js-view-action-toggle-epics-lozenge",GH.WorkController.toggleEpicsShowOnWorkboard)};var t=require("jira/util/events"),n=require("jira-agile/rapid/wrm-spa-utils");GH.WorkView.show=function(){var r=require("jira-agile/rapid/ui/bento/bento-features");GH.WorkView.isVisible=!0,GH.WorkView.showLoading();var t="";t=e.isFeatureEnabled("jsw.classic.board.horizontal-scroll")?GH.tpl.workcontroller.renderSkeleton({additionalClass:"ghx-flexible-board"}):GH.tpl.workcontroller.renderSkeleton({}),AJS.$("#ghx-work").empty().append(t),o.handleDeferredResourceImport(i()&&!GH.DetailsView,function(){GH.DetailsView.setContainerSelector("#ghx-detail-view"),GH.DetailsView.setOptions({canClose:!0,showActionsCog:!0,showSubtaskTab:!0,showLogWorkTrigger:!0,updateSizeHandler:GH.WorkView.updateDetailViewSize,closeHandler:GH.WorkController.closeDetailsView})});var n=r.isUsingBentoSidebarOnBoard();i()?GH.DetailsViewOpts.isUsingBentoSidebarOnBoard=n:GH.DetailsView.opts.isUsingBentoSidebarOnBoard=n,r.isBentoSidebarOnBoardEnabled()&&(AJS.$("#ghx-issue-fragment").on("hide-backlog-issue",function(){r.isUsingBentoSidebarOnBoard()&&GH.WorkController.closeDetailsView()}),AJS.$("#ghx-issue-fragment").on("issue.details.view.switch-to-modal",function(){r.isUsingBentoSidebarOnBoard()&&GH.WorkView.setAndShowDetailViewInModalMode()}),AJS.$("#ghx-issue-fragment").on("issue.details.view.switch-to-sidebar",function(){r.isUsingBentoSidebarOnBoard()||GH.WorkView.setAndShowDetailViewInSidebarMode()})),GH.RapidBoard.State.isKanbanBoard()&&GH.WorkView.showKanPlanAcknowledge()},GH.WorkView.getFirstColumnHeader=function(){return AJS.$(AJS.$("#ghx-column-headers .ghx-column").get(0))},GH.WorkView.hide=function(){GH.WorkView.isVisible=!1,GH.WorkView.hideLoading(),AJS.$("#ghx-detail-view").css({display:"none"}),AJS.$("#ghx-work").empty(),GH.WorkView.hideKanPlanAcknowledge()},GH.WorkView.configureUI=function(e){o.handleDeferredResourceImport(i()&&!GH.DetailsView,function(){GH.WorkView.detailViewOpen=!!e,GH.DetailsView.setSelectedIssueKey(e)})},GH.WorkView.renderPoolAndDetailView=function(){GH.WorkView.isRendering=!0,GH.WorkView.hideLoadingPool(),GH.SwimlaneView.show(),GH.WorkView.isRendering=!1},GH.WorkView.scrollIssueToView=function(){var e=GH.WorkSelectionController.getSelectedIssueKey();e&&GH.WorkSelectionController.gotoIssue(e)},GH.WorkView.setAndShowDetailViewInModalMode=function(){GH.WorkController.closeDetailsView(),GH.BoardState.setGlobalValue("ghx-issue-fragment-view-mode","modal"),i()?GH.DetailsViewOpts.isUsingBentoSidebarOnBoard=!1:GH.DetailsView.opts.isUsingBentoSidebarOnBoard=!1;var e=GH.WorkSelectionController.getSelectedIssueKey();e&&GH.WorkView.displayIssueModal()},GH.WorkView.setAndShowDetailViewInSidebarMode=function(){GH.WorkView.closeIssueModal(),GH.BoardState.setGlobalValue("ghx-issue-fragment-view-mode","sidebar"),i()?GH.DetailsViewOpts.isUsingBentoSidebarOnBoard=!0:GH.DetailsView.opts.isUsingBentoSidebarOnBoard=!0;var e=GH.WorkSelectionController.getSelectedIssueKey();e&&GH.WorkController.openDetailsView(e)},GH.WorkView.openOrCloseDetailView=function(e,i){GH.WorkView.configureUI(e),GH.WorkView.toggleDetailViewVisibility(),GH.WorkView.updateDetailView(i)},GH.WorkView.displayIssueModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.skipStateUpdate,o=e.loadedWithInitialPageLoad,r=arguments[1];GH.WorkController.issueModalApi().done(function(e){var i=GH.RapidBoard.State.getBoardType(),n=GH.RapidViewConfig.currentData.id,a=GH.WorkSelectionController.getSelectedIssueKey(),s={issueKey:a,isLoadedWithPage:o,boardType:i,boardId:n};e&&e.show?e.show(s):AJS.$("#ghx-issue-fragment").trigger("show",s),t.trigger("modify-issue-view-via-external-action",{issueKey:a,externalAction:r})}),i||(GH.RapidBoard.State.setWorkIssueModalOpened(!0),GH.RapidBoard.State.pushState())},GH.WorkView.isIssueModalOpened=function(){return AJS.$("#ghx-issue-fragment").hasClass("software-issue-app-opened")},GH.WorkView.closeIssueModal=function(){GH.WorkController.issueModalApi().done(function(e){e&&e.close?e.close():AJS.$("#ghx-issue-fragment").trigger("hide")})},GH.WorkView.updateFixedElementPositioning=function(){GH.WorkView.isVisible&&(GH.WorkControls.resizeQuickFilters(),o.handleDeferredResourceImport(i()&&!GH.DetailsView,function(){GH.DetailsView.updateSize()}),GH.SwimlaneStalker.poolStalker())},GH.WorkView.updateAllSizings=function(){GH.WorkView.updateDetailViewVisibilityAndSize()},GH.WorkView.updateDetailView=function(e){return GH.WorkView.skipDetailsView?void delete GH.WorkView.skipDetailsView:(o.handleDeferredResourceImport(i()&&!GH.DetailsView,function(){GH.WorkView.detailViewOpen?GH.DetailsView.show(null,e):GH.DetailsView.hide()}),GH.SwimlaneStalker.poolStalker(),void GH.SwimlaneView.columnWidthChanged())},GH.WorkView.skipNextDetailViewUpdate=function(){GH.WorkView.skipDetailsView=!0},GH.WorkView.getEstimatedColumnWidth=function(){o.handleDeferredResourceImport(i()&&!GH.DetailsView,function(){var e=AJS.$("#ghx-work").width(),i=GH.WorkView.detailViewOpen?GH.DetailsView.minWidth:0,o=GH.GridDataController.getModel(),r=o.getColumns().length,t=10*(r+1)+20,n=Math.floor((e-i-t)/r);return n})},GH.WorkView.getIssueKeyDimensions=function(){var e=AJS.$("#ghx-pool .js-issue:visible").eq(0),i=parseInt(e.find(".js-key-link").css("font-size"),10),o=e.find(".ghx-issue-fields").width()||e.find(".ghx-stat-fields .ghx-stat-2").width();return{availableWidth:o,approxCharacterWidth:i?.7*i:null}},GH.WorkView.updateMinHeightsSettings=function(){GH.WorkView.detailViewOpen?(AJS.$("#ghx-work").addClass("ghx-has-detail"),AJS.$("#ghx-detail-view").css({display:""})):(AJS.$("#ghx-detail-view").css({display:"none"}),AJS.$("#ghx-work").removeClass("ghx-has-detail"))},GH.WorkView.getBand=function(){var e=GH.WorkView.getEstimatedColumnWidth();return e<=126?1:e<=165?2:3},GH.WorkView.toggleDetailViewVisibility=function(){var e=void 0;e=i()?GH.DetailsViewOpts.isUsingBentoSidebarOnBoard:GH.DetailsView.opts.isUsingBentoSidebarOnBoard;var o=require("jira-agile/rapid/deferred-resources-loader");o.handleDeferredResourceImport(!GH.DetailsView&&i(),function(){var i=GH.DetailsView.getContainer(),o=GH.WorkView.detailViewOpen;r()&&(o=GH.RapidBoard.ViewController.isInsightsPanelOpen()||GH.WorkView.detailViewOpen),o?(e&&AJS.$("#ghx-pool-column").addClass("ghx-pool-column-compact"),i.css({display:""}),GH.DetailsView.updateSize()):(AJS.$("#ghx-pool-column").removeClass("ghx-pool-column-compact"),i.css({display:"none"}))});var t=AJS.$("#ghx-pool"),n=GH.WorkView.getBand();t.toggleClass("ghx-band-1",1===n).toggleClass("ghx-band-2",2===n).toggleClass("ghx-band-3",3===n)},GH.WorkView.updateDetailViewVisibilityAndSize=function(){var e=require("jira-agile/rapid/deferred-resources-loader");e.handleDeferredResourceImport(!GH.DetailsView&&i(),function(){GH.WorkView.toggleDetailViewVisibility()})},GH.WorkView.updateDetailViewSize=function(){var e=void 0;if(e=i()?GH.DetailsViewOpts.isUsingBentoSidebarOnBoard:GH.DetailsView.opts.isUsingBentoSidebarOnBoard){var o=AJS.$("#ghx-detail-issue");if(o.length>0){var r=o.outerHeight(),t=AJS.$("#ghx-detail-head"),n=t.outerHeight(),a=AJS.$("#js-detail-nav-content");a.css({height:r-n-13})}}},GH.WorkView.showLoading=function(){AJS.$("body").addClass("ghx-loading-pool ghx-loading-quickfilter")},GH.WorkView.hideLoading=function(){AJS.$("body").removeClass("ghx-loading-pool ghx-loading-quickfilter")},GH.WorkView.hideLoadingFilter=function(){AJS.$("body").removeClass("ghx-loading-quickfilter")},GH.WorkView.showLoadingPool=function(){AJS.$("body").addClass("ghx-loading-pool"),AJS.$(".adg-throbber").show(),n.sendSpinnerShowEvent("work")},GH.WorkView.hideLoadingPool=function(){AJS.$("body").removeClass("ghx-loading-pool"),AJS.$(".adg-throbber").hide(),n.sendSpinnerHideEvent("work")},GH.WorkView.handleResizeEvent=function(){GH.WorkView.isVisible&&GH.GridDataController.getModel()&&(GH.WorkView.isRendering||(GH.WorkView.updateAllSizings(),GH.SwimlaneView.handleResizeEvent(),GH.SwimlaneStalker.poolStalker()))},function(){var e,i=require("jira-agile/rapid/deferred-resources-loader"),o="jira-agile/rapid/ui/kanplan/kanplan-acknowledge",r=function(e){try{return require(e)}catch(i){return}};e=r(o),GH.WorkView.showKanPlanAcknowledge=function(){i.handleDeferredResourceImport(!e,function(){e=require(o),e.show()})},GH.WorkView.hideKanPlanAcknowledge=function(){i.handleDeferredResourceImport(!e,function(){e=require(o),e.hide()})}}()}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkControls.js' */
define("jira-agile/rapid/work/work-controls",["jquery","jira-agile/rapid/const/PageMode","jira-agile/rapid/work/quick-filters-bridge","jira/featureflags/feature-manager","jira-agile/rapid/deferred-resources-loader"],function(e,i,t,r,n){var o=function(){return r.isFeatureEnabled("jsw.classic.keto")},s={};return s.rapidViewConfig={},s.quickfilters=void 0,s.sprintfilters=void 0,s.init=function(){s.quickfilters=new GH.Components.QuickFilters("activeQuickFilters"),s.sprintfilters=new GH.Components.SprintFilters("workSprintFilters"),GH.Components.sprintFiltersInit(),s.sprintfilters.initializeInlineEdits(),e(document).delegate("#ghx-complete-sprint","click",s.openCompleteSprintDialog),n.handleDeferredResourceImport(o()&&!GH.Dialogs.CompleteSprintDialog,function(){e(GH).bind(GH.Dialogs.CompleteSprintDialog.EVENT_SPRINT_COMPLETED,function(t,r){e("#ghx-modes-tools .ghx-sprint-meta").remove(),GH.ReportController.selectChart("sprintRetrospective"),GH.RapidBoard.ViewController.setMode(i.REPORT),GH.SprintRetrospectiveController.sprintPicker.storeSelectedItemId(r),GH.SprintRetrospectiveController.tryMarkSprintForRetroDialog(r),GH.RapidBoard.ViewController.sidebarController.updateSidebar()})}),e(GH).bind(GH.Components.EVENT_SPRINT_UPDATED,s.handleSprintUpdated)},s.setRapidViewConfig=function(e){s.rapidViewConfig=e,s.quickfilters.setRapidViewConfig(e),s.sprintfilters.setRapidViewConfig(e)},s.hasSprints=function(){return s.sprintfilters.hasSprints()},s.getBoardType=function(){return s.hasSprints()?"scrum":"kanban"},s.setSprintData=function(e,i){this.canManageSprints=i,s.sprintfilters.setSprintData(e,i),s.sprintfilters.validateActiveSprints()},s.drawSprints=function(){GH.RapidBoard.ViewController.shouldShowSubnavigator()&&GH.RapidBoard.SubnavigatorController.render(),GH.WorkController.isSprintSupportEnabled()&&s.sprintfilters.drawSprints()},s.handleSprintUpdated=function(e,i){s.sprintfilters.updateSprintData(i.id,i)},s.getActiveQuickFilterIds=function(){return s.quickfilters.getActiveQuickFilters()},s.getActiveQuickFilterCount=function(){return s.getActiveQuickFilterIds().length},s.setActiveQuickFilterIds=function(e){s.quickfilters.setActiveQuickFilters(e)},s.getActiveSprintIds=function(){return s.sprintfilters.getActiveSprintFilters()},s.setActiveSprintFilterIds=function(e){s.sprintfilters.setActiveSprintFilters(e)},s.renderControls=function(){var n=e("#ghx-controls-work");n.empty(),s.rapidViewConfig.sprintSupportEnabled&&!GH.RapidBoard.ViewController.shouldShowSubnavigator()&&n.append(s.sprintfilters.renderComponent());var o=document.getElementById("ghx-quick-filters");t.isReactFiltersEnabled().then(function(e){e&&o&&(GH.bridge.FilterBridge.unmount(o),GH.bridge.FilterBridge.render(o))}),r.isFeatureEnabled("jsw.classic.delay.toolSections")?GH.ReleaseVersionTrigger.remove():GH.ViewActions.setMode(i.WORK),GH.ViewActions.setSwimlanes(!1)},s.updateSwimlaneOptions=function(e){GH.ViewActions.setSwimlanes(e)},s.openCompleteSprintDialog=function(i){i.preventDefault();var t=e(this);if(!t.hasClass("ghx-disabled")){var r=parseInt(t.attr("data-sprint-id"),10),n=s.sprintfilters.getSprintById(r);if(n){s.sprintfilters.removeDialog();var o=GH.RapidBoard.State.getRapidViewId();GH.Dialogs.CompleteSprintDialog.showDialog(o,n.id)}}},s.resizeQuickFilters=function(){s.quickfilters.quickExpanderLayout({mode:i.WORK})},s}),AJS.namespace("GH.WorkControls",null,require("jira-agile/rapid/work/work-controls"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkUrlState.js' */
!function(){"use strict";var e=require("jira-agile/rapid/const/PageMode");GH.WorkUrlState={},GH.WorkUrlState.self="WorkUrlState",GH.WorkUrlState.isApplicable=function(r){return!r.mode||r.mode===e.WORK},GH.WorkUrlState.getNormalizedFromUrl=function(e,r){r.selectedIssue=GH.RapidBoard.UrlState.normalizeStringParam(e.selectedIssue,null),r.sprint=GH.RapidBoard.UrlState.normalizeNumberArrayParam(e.sprint),r.quickFilter=GH.RapidBoard.UrlState.normalizeNumberArrayParam(e.quickFilter),r.search=GH.RapidBoard.UrlState.normalizeStringParam(e.search,""),r.assignee=GH.RapidBoard.UrlState.normalizeStringArrayParam(e.assignee,[])},GH.WorkUrlState.toUrl=function(e,r){e.selectedIssue&&(r.selectedIssue=e.selectedIssue),e.sprint.length>0&&(r.sprint=e.sprint),e.quickFilter.length>0&&(r.quickFilter=e.quickFilter),e.search&&(r.search=encodeURIComponent(e.search)),e.assignee&&(r.assignee=e.assignee.map(function(e){return encodeURIComponent(e)}))},GH.WorkUrlState.getNormalizedFromInternal=function(e){GH.WorkController.init(),e.quickFilter=GH.WorkControls.getActiveQuickFilterIds(),e.sprint=GH.WorkControls.getActiveSprintIds(),e.selectedIssue=GH.WorkSelectionController.getSelectedIssueKey(),e.search=GH.WorkController.activeFilters.searchText||"",e.assignee=GH.WorkController.activeFilters.assigneeList||[]},GH.WorkUrlState.updateInternalFromNormalized=function(e){var r=GH.RapidBoard.UrlState.getCurrentUrlState(),t=GH.RapidBoard.UrlState.normalizeBooleanParam(r.useStoredSettings,!1);GH.WorkController.init(),t||(GH.WorkSelectionController.setIssueFromUrlState(e.selectedIssue),GH.WorkControls.setActiveQuickFilterIds(e.quickFilter),GH.WorkControls.setActiveSprintFilterIds(e.sprint),GH.WorkController.activeFilters.searchText=e.search,e.assignee&&(GH.WorkController.activeFilters.assigneeList=e.assignee))}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/SprintSelect.js' */
define("jira-agile/rapid/ui/component/sprint-select",["require"],function(e){var t=e("jquery"),i=e("jira/ajs/select/single-select"),n=e("jira-agile/rapid/events"),r=function(){n(this),this.singleSelect=void 0};return r.prototype.initDropdown=function(){var e=this,n=function(){e.trigger("change",this.value)},r=t("#ghx-sprint-select");this.singleSelect=new i({element:r,itemAttrDisplayed:"label"}),r.on("change",n),r.on("unselect",n),t("#ghx-sprint-select-form").submit(function(){return!1})},r});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/SprintSelect.soy' */
// This file was automatically generated from SprintSelect.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintselect.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintselect == 'undefined') { GH.tpl.component.sprintselect = {}; }


GH.tpl.component.sprintselect.renderSingleSelect = function(opt_data, opt_ignored) {
  return '<div><form id="ghx-sprint-select-form" class="aui ghx-sprint-select"><div class="field-group"><label>' + soy.$$escapeHtml('Move to') + '</label>' + GH.tpl.component.sprintselect.renderSelectElement({items: opt_data.items, selectedItem: opt_data.selectedItem, id: 'ghx-sprint-select', cssClass: 'hidden'}) + '</div></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintselect.renderSingleSelect.soyTemplateName = 'GH.tpl.component.sprintselect.renderSingleSelect';
}


GH.tpl.component.sprintselect.renderSelectElement = function(opt_data, opt_ignored) {
  var output = '<select ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' ' + ((opt_data.cssClass) ? 'class="' + soy.$$escapeHtml(opt_data.cssClass) + '"' : '') + '><option value="' + soy.$$escapeHtml(opt_data.selectedItem.id) + '" selected>' + soy.$$escapeHtml(opt_data.selectedItem.name) + '</option>';
  var itemList30 = opt_data.items;
  var itemListLen30 = itemList30.length;
  for (var itemIndex30 = 0; itemIndex30 < itemListLen30; itemIndex30++) {
    var itemData30 = itemList30[itemIndex30];
    output += (itemData30.id != opt_data.selectedItem.id) ? '<option value="' + soy.$$escapeHtml(itemData30.id) + '">' + soy.$$escapeHtml(itemData30.name) + '</option>' : '';
  }
  output += '</select>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintselect.renderSelectElement.soyTemplateName = 'GH.tpl.component.sprintselect.renderSelectElement';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/lib/jquery/flot/jquery.flot.js' */
!function(t){t.color={},t.color.make=function(e,i,n,o){var a={};return a.r=e||0,a.g=i||0,a.b=n||0,a.a=null!=o?o:1,a.add=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]+=e;return a.normalize()},a.scale=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]*=e;return a.normalize()},a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"},a.normalize=function(){function t(t,e,i){return e<t?t:e>i?i:e}return a.r=t(0,parseInt(a.r),255),a.g=t(0,parseInt(a.g),255),a.b=t(0,parseInt(a.b),255),a.a=t(0,a.a,1),a},a.clone=function(){return t.color.make(a.r,a.b,a.g,a.a)},a.normalize()},t.color.extract=function(e,i){var n;do{if(n=e.css(i).toLowerCase(),""!=n&&"transparent"!=n)break;e=e.parent()}while(!t.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==n&&(n="transparent"),t.color.parse(n)},t.color.parse=function(i){var n,o=t.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return o(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return o(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return o(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return o(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return o(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return o(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var a=t.trim(i).toLowerCase();return"transparent"==a?o(255,255,255,0):(n=e[a]||[0,0,0],o(n[0],n[1],n[2]))};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){function e(e,o,a,r){function l(t,e){e=[kt].concat(e);for(var i=0;i<t.length;++i)t[i].apply(this,e)}function s(){for(var e=0;e<r.length;++e){var i=r[e];i.init(kt),i.options&&t.extend(!0,rt,i.options)}}function c(e){var i;for(t.extend(!0,rt,e),null==rt.xaxis.color&&(rt.xaxis.color=rt.grid.color),null==rt.yaxis.color&&(rt.yaxis.color=rt.grid.color),null==rt.xaxis.tickColor&&(rt.xaxis.tickColor=rt.grid.tickColor),null==rt.yaxis.tickColor&&(rt.yaxis.tickColor=rt.grid.tickColor),null==rt.grid.borderColor&&(rt.grid.borderColor=rt.grid.color),null==rt.grid.tickColor&&(rt.grid.tickColor=t.color.parse(rt.grid.color).scale("a",.22).toString()),i=0;i<Math.max(1,rt.xaxes.length);++i)rt.xaxes[i]=t.extend(!0,{},rt.xaxis,rt.xaxes[i]);for(i=0;i<Math.max(1,rt.yaxes.length);++i)rt.yaxes[i]=t.extend(!0,{},rt.yaxis,rt.yaxes[i]);for(rt.xaxis.noTicks&&null==rt.xaxis.ticks&&(rt.xaxis.ticks=rt.xaxis.noTicks),rt.yaxis.noTicks&&null==rt.yaxis.ticks&&(rt.yaxis.ticks=rt.yaxis.noTicks),rt.x2axis&&(rt.xaxes[1]=t.extend(!0,{},rt.xaxis,rt.x2axis),rt.xaxes[1].position="top"),rt.y2axis&&(rt.yaxes[1]=t.extend(!0,{},rt.yaxis,rt.y2axis),rt.yaxes[1].position="right"),rt.grid.coloredAreas&&(rt.grid.markings=rt.grid.coloredAreas),rt.grid.coloredAreasColor&&(rt.grid.markingsColor=rt.grid.coloredAreasColor),rt.lines&&t.extend(!0,rt.series.lines,rt.lines),rt.points&&t.extend(!0,rt.series.points,rt.points),rt.bars&&t.extend(!0,rt.series.bars,rt.bars),null!=rt.shadowSize&&(rt.series.shadowSize=rt.shadowSize),i=0;i<rt.xaxes.length;++i)x(ht,i+1).options=rt.xaxes[i];for(i=0;i<rt.yaxes.length;++i)x(mt,i+1).options=rt.yaxes[i];for(var n in bt)rt.hooks[n]&&rt.hooks[n].length&&(bt[n]=bt[n].concat(rt.hooks[n]));l(bt.processOptions,[rt])}function u(t){at=f(t),g(),v()}function f(e){for(var i=[],n=0;n<e.length;++n){var o=t.extend(!0,{},rt.series);null!=e[n].data?(o.data=e[n].data,delete e[n].data,t.extend(!0,o,e[n]),e[n].data=o.data):o.data=e[n],i.push(o)}return i}function h(t,e){var i=t[e+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function m(){return t.grep(ht.concat(mt),function(t){return t})}function d(t){var e,i,n={};for(e=0;e<ht.length;++e)i=ht[e],i&&i.used&&(n["x"+i.n]=i.c2p(t.left));for(e=0;e<mt.length;++e)i=mt[e],i&&i.used&&(n["y"+i.n]=i.c2p(t.top));return void 0!==n.x1&&(n.x=n.x1),void 0!==n.y1&&(n.y=n.y1),n}function p(t){var e,i,n,o={};for(e=0;e<ht.length;++e)if(i=ht[e],i&&i.used&&(n="x"+i.n,null==t[n]&&1==i.n&&(n="x"),null!=t[n])){o.left=i.p2c(t[n]);break}for(e=0;e<mt.length;++e)if(i=mt[e],i&&i.used&&(n="y"+i.n,null==t[n]&&1==i.n&&(n="y"),null!=t[n])){o.top=i.p2c(t[n]);break}return o}function x(e,i){return e[i-1]||(e[i-1]={n:i,direction:e==ht?"x":"y",options:t.extend(!0,{},e==ht?rt.xaxis:rt.yaxis)}),e[i-1]}function g(){var e,i=at.length,n=[],o=[];for(e=0;e<at.length;++e){var a=at[e].color;null!=a&&(--i,"number"==typeof a?o.push(a):n.push(t.color.parse(at[e].color)))}for(e=0;e<o.length;++e)i=Math.max(i,o[e]+1);var r=[],l=0;for(e=0;r.length<i;){var s;s=rt.colors.length==e?t.color.make(100,100,100):t.color.parse(rt.colors[e]);var c=l%2==1?-1:1;s.scale("rgb",1+c*Math.ceil(l/2)*.2),r.push(s),++e,e>=rt.colors.length&&(e=0,++l)}var u,f=0;for(e=0;e<at.length;++e){if(u=at[e],null==u.color?(u.color=r[f].toString(),++f):"number"==typeof u.color&&(u.color=r[u.color].toString()),null==u.lines.show){var m,d=!0;for(m in u)if(u[m]&&u[m].show){d=!1;break}d&&(u.lines.show=!0)}u.xaxis=x(ht,h(u,"x")),u.yaxis=x(mt,h(u,"y"))}}function v(){function e(t,e,i){e<t.datamin&&e!=-x&&(t.datamin=e),i>t.datamax&&i!=x&&(t.datamax=i)}var i,n,o,a,r,s,c,u,f,h,d=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,x=Number.MAX_VALUE;for(t.each(m(),function(t,e){e.datamin=d,e.datamax=p,e.used=!1}),i=0;i<at.length;++i)r=at[i],r.datapoints={points:[]},l(bt.processRawData,[r,r.data,r.datapoints]);for(i=0;i<at.length;++i){r=at[i];var g=r.data,v=r.datapoints.format;if(v||(v=[],v.push({x:!0,number:!0,required:!0}),v.push({y:!0,number:!0,required:!0}),(r.bars.show||r.lines.show&&r.lines.fill)&&(v.push({y:!0,number:!0,required:!1,defaultValue:0}),r.bars.horizontal&&(delete v[v.length-1].y,v[v.length-1].x=!0)),r.datapoints.format=v),null==r.datapoints.pointsize)for(r.datapoints.pointsize=v.length,c=r.datapoints.pointsize,s=r.datapoints.points,insertSteps=r.lines.show&&r.lines.steps,r.xaxis.used=r.yaxis.used=!0,n=o=0;n<g.length;++n,o+=c){h=g[n];var b=null==h;if(!b)for(a=0;a<c;++a)u=h[a],f=v[a],f&&(f.number&&null!=u&&(u=+u,isNaN(u)?u=null:u==1/0?u=x:u==-(1/0)&&(u=-x)),null==u&&(f.required&&(b=!0),null!=f.defaultValue&&(u=f.defaultValue))),s[o+a]=u;if(b)for(a=0;a<c;++a)u=s[o+a],null!=u&&(f=v[a],f.x&&e(r.xaxis,u,u),f.y&&e(r.yaxis,u,u)),s[o+a]=null;else if(insertSteps&&o>0&&null!=s[o-c]&&s[o-c]!=s[o]&&s[o-c+1]!=s[o+1]){for(a=0;a<c;++a)s[o+c+a]=s[o+a];s[o+1]=s[o-c+1],o+=c}}}for(i=0;i<at.length;++i)r=at[i],l(bt.processDatapoints,[r,r.datapoints]);for(i=0;i<at.length;++i){r=at[i],s=r.datapoints.points,c=r.datapoints.pointsize;var k=d,y=d,T=p,M=p;for(n=0;n<s.length;n+=c)if(null!=s[n])for(a=0;a<c;++a)u=s[n+a],f=v[a],f&&u!=x&&u!=-x&&(f.x&&(u<k&&(k=u),u>T&&(T=u)),f.y&&(u<y&&(y=u),u>M&&(M=u)));if(r.bars.show){void 0==r.bars.barLeft&&(r.bars.barLeft="left"==r.bars.align?0:-r.bars.barWidth/2);var w=r.bars.barLeft;r.bars.horizontal?(y+=w,M+=w+r.bars.barWidth):(k+=w,T+=w+r.bars.barWidth)}e(r.xaxis,k,T),e(r.yaxis,y,M)}t.each(m(),function(t,e){e.datamin==d&&(e.datamin=null),e.datamax==p&&(e.datamax=null)})}function b(i,n){var o=document.createElement("canvas");return o.className=n,o.width=pt,o.height=xt,i||t(o).css({position:"absolute",left:0,top:0}),t(o).appendTo(e),o.getContext||(o=window.G_vmlCanvasManager.initElement(o)),o.getContext("2d").save(),o}function k(){if(pt=e.width(),xt=e.height(),pt<=0||xt<=0)throw"Invalid dimensions for plot, width = "+pt+", height = "+xt}function y(t){t.width!=pt&&(t.width=pt),t.height!=xt&&(t.height=xt);var e=t.getContext("2d");e.restore(),e.save()}function T(){var i,n=e.children("canvas.base"),o=e.children("canvas.overlay");0==n.length||0==o?(e.html(""),e.css({padding:0}),"static"==e.css("position")&&e.css("position","relative"),k(),lt=b(!0,"base"),st=b(!1,"overlay"),i=!1):(lt=n.get(0),st=o.get(0),i=!0),ut=lt.getContext("2d"),ft=st.getContext("2d"),ct=t([st,lt]),i&&(e.data("plot").shutdown(),kt.resize(),ft.clearRect(0,0,pt,xt),ct.unbind(),e.children().not([lt,st]).remove()),e.data("plot",kt)}function M(){rt.grid.hoverable&&(ct.mousemove(G),ct.mouseleave(_)),rt.grid.clickable&&ct.click(J),l(bt.bindEvents,[ct])}function w(){Tt&&clearTimeout(Tt),ct.unbind("mousemove",G),ct.unbind("mouseleave",_),ct.unbind("click",J),l(bt.shutdown,[ct])}function C(t){function e(t){return t}var i,n,o=t.options.transform||e,a=t.options.inverseTransform;"x"==t.direction?(i=t.scale=gt/Math.abs(o(t.max)-o(t.min)),n=Math.min(o(t.max),o(t.min))):(i=t.scale=vt/Math.abs(o(t.max)-o(t.min)),i=-i,n=Math.max(o(t.max),o(t.min))),o==e?t.p2c=function(t){return(t-n)*i}:t.p2c=function(t){return(o(t)-n)*i},a?t.c2p=function(t){return a(n+t/i)}:t.c2p=function(t){return n+t/i}}function S(i){function n(n,o){return t('<div style="position:absolute;top:-10000px;'+o+'font-size:smaller"><div class="'+i.direction+"Axis "+i.direction+i.n+'Axis">'+n.join("")+"</div></div>").appendTo(e)}var o,a,r,l=i.options,s=i.ticks||[],c=[],u=l.labelWidth,f=l.labelHeight;if("x"==i.direction){if(null==u&&(u=Math.floor(pt/(s.length>0?s.length:1))),null==f){for(c=[],o=0;o<s.length;++o)a=s[o].label,a&&c.push('<div class="tickLabel" style="float:left;width:'+u+'px">'+a+"</div>");c.length>0&&(c.push('<div style="clear:left"></div>'),r=n(c,"width:10000px;"),f=r.height(),r.remove())}}else if(null==u||null==f){for(o=0;o<s.length;++o)a=s[o].label,a&&c.push('<div class="tickLabel">'+a+"</div>");c.length>0&&(r=n(c,""),null==u&&(u=r.children().width()),null==f&&(f=r.find("div.tickLabel").height()),r.remove())}null==u&&(u=0),null==f&&(f=0),i.labelWidth=u,i.labelHeight=f}function z(e){var i=e.labelWidth,n=e.labelHeight,o=e.options.position,a=e.options.tickLength,r=rt.grid.axisMargin,l=rt.grid.labelMargin,s="x"==e.direction?ht:mt,c=t.grep(s,function(t){return t&&t.options.position==o&&t.reserveSpace});t.inArray(e,c)==c.length-1&&(r=0),null==a&&(a="full");var u=t.grep(s,function(t){return t&&t.reserveSpace}),f=0==t.inArray(e,u);f||"full"!=a||(a=5),isNaN(+a)||(l+=+a),"x"==e.direction?(n+=l,"bottom"==o?(dt.bottom+=n+r,e.box={top:xt-dt.bottom,height:n}):(e.box={top:dt.top+r,height:n},dt.top+=n+r)):(i+=l,"left"==o?(e.box={left:dt.left+r,width:i},dt.left+=i+r):(dt.right+=i+r,e.box={left:pt-dt.right,width:i})),e.position=o,e.tickLength=a,e.box.padding=l,e.innermost=f}function A(t){"x"==t.direction?(t.box.left=dt.left,t.box.width=gt):(t.box.top=dt.top,t.box.height=vt)}function W(){var e,i=m();if(t.each(i,function(t,e){e.show=e.options.show,null==e.show&&(e.show=e.used),e.reserveSpace=e.show||e.options.reserveSpace,F(e)}),allocatedAxes=t.grep(i,function(t){return t.reserveSpace}),dt.left=dt.right=dt.top=dt.bottom=0,rt.grid.show){for(t.each(allocatedAxes,function(t,e){I(e),U(e),N(e,e.ticks),S(e)}),e=allocatedAxes.length-1;e>=0;--e)z(allocatedAxes[e]);var n=rt.grid.minBorderMargin;if(null==n)for(n=0,e=0;e<at.length;++e)n=Math.max(n,at[e].points.radius+at[e].points.lineWidth/2);for(var o in dt)dt[o]+=rt.grid.borderWidth,dt[o]=Math.max(n,dt[o])}gt=pt-dt.left-dt.right,vt=xt-dt.bottom-dt.top,t.each(i,function(t,e){C(e)}),rt.grid.show&&(t.each(allocatedAxes,function(t,e){A(e)}),O()),B()}function F(t){var e=t.options,i=+(null!=e.min?e.min:t.datamin),n=+(null!=e.max?e.max:t.datamax),o=n-i;if(0==o){var a=0==n?1:.01;null==e.min&&(i-=a),null!=e.max&&null==e.min||(n+=a)}else{var r=e.autoscaleMargin;null!=r&&(null==e.min&&(i-=o*r,i<0&&null!=t.datamin&&t.datamin>=0&&(i=0)),null==e.max&&(n+=o*r,n>0&&null!=t.datamax&&t.datamax<=0&&(n=0)))}t.min=i,t.max=n}function I(e){var i,o=e.options;i="number"==typeof o.ticks&&o.ticks>0?o.ticks:.3*Math.sqrt("x"==e.direction?pt:xt);var a,r,l,s,c,u,f,h=(e.max-e.min)/i;if("time"==o.mode){var m={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,year:525949.2*60*1e3},d=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]],p=0;null!=o.minTickSize&&(p="number"==typeof o.tickSize?o.tickSize:o.minTickSize[0]*m[o.minTickSize[1]]);for(var c=0;c<d.length-1&&!(h<(d[c][0]*m[d[c][1]]+d[c+1][0]*m[d[c+1][1]])/2&&d[c][0]*m[d[c][1]]>=p);++c);a=d[c][0],l=d[c][1],"year"==l&&(u=Math.pow(10,Math.floor(Math.log(h/m.year)/Math.LN10)),f=h/m.year/u,a=f<1.5?1:f<3?2:f<7.5?5:10,a*=u),e.tickSize=o.tickSize||[a,l],r=function(t){var e=[],i=t.tickSize[0],o=t.tickSize[1],a=new Date(t.min),r=i*m[o];"second"==o&&a.setUTCSeconds(n(a.getUTCSeconds(),i)),"minute"==o&&a.setUTCMinutes(n(a.getUTCMinutes(),i)),"hour"==o&&a.setUTCHours(n(a.getUTCHours(),i)),"month"==o&&a.setUTCMonth(n(a.getUTCMonth(),i)),"year"==o&&a.setUTCFullYear(n(a.getUTCFullYear(),i)),a.setUTCMilliseconds(0),r>=m.minute&&a.setUTCSeconds(0),r>=m.hour&&a.setUTCMinutes(0),r>=m.day&&a.setUTCHours(0),r>=4*m.day&&a.setUTCDate(1),r>=m.year&&a.setUTCMonth(0);var l,s=0,c=Number.NaN;do if(l=c,c=a.getTime(),e.push(c),"month"==o)if(i<1){a.setUTCDate(1);var u=a.getTime();a.setUTCMonth(a.getUTCMonth()+1);var f=a.getTime();a.setTime(c+s*m.hour+(f-u)*i),s=a.getUTCHours(),a.setUTCHours(0)}else a.setUTCMonth(a.getUTCMonth()+i);else"year"==o?a.setUTCFullYear(a.getUTCFullYear()+i):a.setTime(c+r);while(c<t.max&&c!=l);return e},s=function(e,i){var n=new Date(e);if(null!=o.timeformat)return t.plot.formatDate(n,o.timeformat,o.monthNames);var a=i.tickSize[0]*m[i.tickSize[1]],r=i.max-i.min,l=o.twelveHourClock?" %p":"";return a<m.minute?fmt="%h:%M:%S"+l:a<m.day?r<2*m.day?fmt="%h:%M"+l:fmt="%b %d %h:%M"+l:a<m.month?fmt="%b %d":a<m.year?r<m.year?fmt="%b":fmt="%b %y":fmt="%y",t.plot.formatDate(n,fmt,o.monthNames)}}else{var x=o.tickDecimals,g=-Math.floor(Math.log(h)/Math.LN10);null!=x&&g>x&&(g=x),u=Math.pow(10,-g),f=h/u,f<1.5?a=1:f<3?(a=2,f>2.25&&(null==x||g+1<=x)&&(a=2.5,++g)):a=f<7.5?5:10,a*=u,null!=o.minTickSize&&a<o.minTickSize&&(a=o.minTickSize),e.tickDecimals=Math.max(0,null!=x?x:g),e.tickSize=o.tickSize||a,r=function(t){var e,i=[],o=n(t.min,t.tickSize),a=0,r=Number.NaN;do e=r,r=o+a*t.tickSize,i.push(r),++a;while(r<t.max&&r!=e);return i},s=function(t,e){return t.toFixed(e.tickDecimals)}}if(null!=o.alignTicksWithAxis){var v=("x"==e.direction?ht:mt)[o.alignTicksWithAxis-1];if(v&&v.used&&v!=e){var b=r(e);if(b.length>0&&(null==o.min&&(e.min=Math.min(e.min,b[0])),null==o.max&&b.length>1&&(e.max=Math.max(e.max,b[b.length-1]))),r=function(t){var e,i,n=[];for(i=0;i<v.ticks.length;++i)e=(v.ticks[i].v-v.min)/(v.max-v.min),e=t.min+e*(t.max-t.min),n.push(e);return n},"time"!=e.mode&&null==o.tickDecimals){var k=Math.max(0,-Math.floor(Math.log(h)/Math.LN10)+1),y=r(e);y.length>1&&/\..*0$/.test((y[1]-y[0]).toFixed(k))||(e.tickDecimals=k)}}}e.tickGenerator=r,t.isFunction(o.tickFormatter)?e.tickFormatter=function(t,e){return""+o.tickFormatter(t,e)}:e.tickFormatter=s}function U(e){var i=e.options.ticks,n=[];null==i||"number"==typeof i&&i>0?n=e.tickGenerator(e):i&&(n=t.isFunction(i)?i({min:e.min,max:e.max}):i);var o,a;for(e.ticks=[],o=0;o<n.length;++o){var r=null,l=n[o];"object"==typeof l?(a=+l[0],l.length>1&&(r=l[1])):a=+l,null==r&&(r=e.tickFormatter(a,e)),isNaN(a)||e.ticks.push({v:a,label:r})}}function N(t,e){t.options.autoscaleMargin&&e.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,e[0].v)),null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v)))}function L(){ut.clearRect(0,0,pt,xt);var t=rt.grid;t.show&&t.backgroundColor&&P(),t.show&&!t.aboveData&&H();for(var e=0;e<at.length;++e)l(bt.drawSeries,[ut,at[e]]),Y(at[e]);l(bt.draw,[ut]),t.show&&t.aboveData&&H()}function D(t,e){var n,o,a,r,l=m();for(i=0;i<l.length;++i)if(n=l[i],n.direction==e&&(r=e+n.n+"axis",t[r]||1!=n.n||(r=e+"axis"),t[r])){o=t[r].from,a=t[r].to;break}if(t[r]||(n="x"==e?ht[0]:mt[0],o=t[e+"1"],a=t[e+"2"]),null!=o&&null!=a&&o>a){var s=o;o=a,a=s}return{from:o,to:a,axis:n}}function P(){ut.save(),ut.translate(dt.left,dt.top),ut.fillStyle=ot(rt.grid.backgroundColor,vt,0,"rgba(255, 255, 255, 0)"),ut.fillRect(0,0,gt,vt),ut.restore()}function H(){var e;ut.save(),ut.translate(dt.left,dt.top);var i=rt.grid.markings;if(i){if(t.isFunction(i)){var n=kt.getAxes();n.xmin=n.xaxis.min,n.xmax=n.xaxis.max,n.ymin=n.yaxis.min,n.ymax=n.yaxis.max,i=i(n)}for(e=0;e<i.length;++e){var o=i[e],a=D(o,"x"),r=D(o,"y");null==a.from&&(a.from=a.axis.min),null==a.to&&(a.to=a.axis.max),null==r.from&&(r.from=r.axis.min),null==r.to&&(r.to=r.axis.max),a.to<a.axis.min||a.from>a.axis.max||r.to<r.axis.min||r.from>r.axis.max||(a.from=Math.max(a.from,a.axis.min),a.to=Math.min(a.to,a.axis.max),r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),a.from==a.to&&r.from==r.to||(a.from=a.axis.p2c(a.from),a.to=a.axis.p2c(a.to),r.from=r.axis.p2c(r.from),r.to=r.axis.p2c(r.to),a.from==a.to||r.from==r.to?(ut.beginPath(),ut.strokeStyle=o.color||rt.grid.markingsColor,ut.lineWidth=o.lineWidth||rt.grid.markingsLineWidth,ut.moveTo(a.from,r.from),ut.lineTo(a.to,r.to),ut.stroke()):(ut.fillStyle=o.color||rt.grid.markingsColor,ut.fillRect(a.from,r.to,a.to-a.from,r.from-r.to))))}}for(var n=m(),l=rt.grid.borderWidth,s=0;s<n.length;++s){var c,u,f,h,d=n[s],p=d.box,x=d.tickLength;if(d.show&&0!=d.ticks.length){for(ut.strokeStyle=d.options.tickColor||t.color.parse(d.options.color).scale("a",.22).toString(),ut.lineWidth=1,"x"==d.direction?(c=0,u="full"==x?"top"==d.position?0:vt:p.top-dt.top+("top"==d.position?p.height:0)):(u=0,c="full"==x?"left"==d.position?0:gt:p.left-dt.left+("left"==d.position?p.width:0)),d.innermost||(ut.beginPath(),f=h=0,"x"==d.direction?f=gt:h=vt,1==ut.lineWidth&&(c=Math.floor(c)+.5,u=Math.floor(u)+.5),ut.moveTo(c,u),ut.lineTo(c+f,u+h),ut.stroke()),ut.beginPath(),e=0;e<d.ticks.length;++e){var g=d.ticks[e].v;f=h=0,g<d.min||g>d.max||"full"==x&&l>0&&(g==d.min||g==d.max)||("x"==d.direction?(c=d.p2c(g),h="full"==x?-vt:x,"top"==d.position&&(h=-h)):(u=d.p2c(g),f="full"==x?-gt:x,"left"==d.position&&(f=-f)),1==ut.lineWidth&&("x"==d.direction?c=Math.floor(c)+.5:u=Math.floor(u)+.5),ut.moveTo(c,u),ut.lineTo(c+f,u+h))}ut.stroke()}}l&&(ut.lineWidth=l,ut.strokeStyle=rt.grid.borderColor,ut.strokeRect(-l/2,-l/2,gt+l,vt+l)),ut.restore()}function O(){e.find(".tickLabels").remove();for(var t=['<div class="tickLabels" style="font-size:smaller">'],i=m(),n=0;n<i.length;++n){var o=i[n],a=o.box;if(o.show){t.push('<div class="'+o.direction+"Axis "+o.direction+o.n+'Axis" style="color:'+o.options.color+'">');for(var r=0;r<o.ticks.length;++r){var l=o.ticks[r];if(!(!l.label||l.v<o.min||l.v>o.max)){var s,c={};"x"==o.direction?(s="center",c.left=Math.round(dt.left+o.p2c(l.v)-o.labelWidth/2),"bottom"==o.position?c.top=a.top+a.padding:c.bottom=xt-(a.top+a.height-a.padding)):(c.top=Math.round(dt.top+o.p2c(l.v)-o.labelHeight/2),"left"==o.position?s="right":(c.left=a.left+a.padding,s="left")),c.width=o.labelWidth;var u=["position:absolute","text-align:"+s];for(var f in c)u.push(f+":"+c[f]+"px");t.push('<div class="tickLabel" style="'+u.join(";")+'">'+l.label+"</div>")}}t.push("</div>")}}t.push("</div>"),e.append(t.join(""))}function Y(t){t.lines.show&&j(t),t.bars.show&&V(t),t.points.show&&R(t)}function j(t){function e(t,e,i,n,o){var a=t.points,r=t.pointsize,l=null,s=null;ut.beginPath();for(var c=r;c<a.length;c+=r){var u=a[c-r],f=a[c-r+1],h=a[c],m=a[c+1];if(null!=u&&null!=h){if(f<=m&&f<o.min){if(m<o.min)continue;u=(o.min-f)/(m-f)*(h-u)+u,f=o.min}else if(m<=f&&m<o.min){if(f<o.min)continue;h=(o.min-f)/(m-f)*(h-u)+u,m=o.min}if(f>=m&&f>o.max){if(m>o.max)continue;u=(o.max-f)/(m-f)*(h-u)+u,f=o.max}else if(m>=f&&m>o.max){if(f>o.max)continue;h=(o.max-f)/(m-f)*(h-u)+u,m=o.max}if(u<=h&&u<n.min){if(h<n.min)continue;f=(n.min-u)/(h-u)*(m-f)+f,u=n.min}else if(h<=u&&h<n.min){if(u<n.min)continue;m=(n.min-u)/(h-u)*(m-f)+f,h=n.min}if(u>=h&&u>n.max){if(h>n.max)continue;f=(n.max-u)/(h-u)*(m-f)+f,u=n.max}else if(h>=u&&h>n.max){if(u>n.max)continue;m=(n.max-u)/(h-u)*(m-f)+f,h=n.max}u==l&&f==s||ut.moveTo(n.p2c(u)+e,o.p2c(f)+i),l=h,s=m,ut.lineTo(n.p2c(h)+e,o.p2c(m)+i)}}ut.stroke()}function i(t,e,i){for(var n=t.points,o=t.pointsize,a=Math.min(Math.max(0,i.min),i.max),r=0,l=!1,s=1,c=0,u=0;;){if(o>0&&r>n.length+o)break;r+=o;var f=n[r-o],h=n[r-o+s],m=n[r],d=n[r+s];if(l){if(o>0&&null!=f&&null==m){u=r,o=-o,s=2;continue}if(o<0&&r==c+o){ut.fill(),l=!1,o=-o,s=1,r=c=u+o;continue}}if(null!=f&&null!=m){if(f<=m&&f<e.min){if(m<e.min)continue;h=(e.min-f)/(m-f)*(d-h)+h,f=e.min}else if(m<=f&&m<e.min){if(f<e.min)continue;d=(e.min-f)/(m-f)*(d-h)+h,m=e.min}if(f>=m&&f>e.max){if(m>e.max)continue;h=(e.max-f)/(m-f)*(d-h)+h,f=e.max}else if(m>=f&&m>e.max){if(f>e.max)continue;d=(e.max-f)/(m-f)*(d-h)+h,m=e.max}if(l||(ut.beginPath(),ut.moveTo(e.p2c(f),i.p2c(a)),l=!0),h>=i.max&&d>=i.max)ut.lineTo(e.p2c(f),i.p2c(i.max)),ut.lineTo(e.p2c(m),i.p2c(i.max));else if(h<=i.min&&d<=i.min)ut.lineTo(e.p2c(f),i.p2c(i.min)),ut.lineTo(e.p2c(m),i.p2c(i.min));else{var p=f,x=m;h<=d&&h<i.min&&d>=i.min?(f=(i.min-h)/(d-h)*(m-f)+f,h=i.min):d<=h&&d<i.min&&h>=i.min&&(m=(i.min-h)/(d-h)*(m-f)+f,d=i.min),h>=d&&h>i.max&&d<=i.max?(f=(i.max-h)/(d-h)*(m-f)+f,h=i.max):d>=h&&d>i.max&&h<=i.max&&(m=(i.max-h)/(d-h)*(m-f)+f,d=i.max),f!=p&&ut.lineTo(e.p2c(p),i.p2c(h)),ut.lineTo(e.p2c(f),i.p2c(h)),ut.lineTo(e.p2c(m),i.p2c(d)),m!=x&&(ut.lineTo(e.p2c(m),i.p2c(d)),ut.lineTo(e.p2c(x),i.p2c(d)))}}}}ut.save(),ut.translate(dt.left,dt.top),ut.lineJoin="round";var n=t.lines.lineWidth,o=t.shadowSize;if(n>0&&o>0){ut.lineWidth=o,ut.strokeStyle="rgba(0,0,0,0.1)";var a=Math.PI/18;e(t.datapoints,Math.sin(a)*(n/2+o/2),Math.cos(a)*(n/2+o/2),t.xaxis,t.yaxis),ut.lineWidth=o/2,e(t.datapoints,Math.sin(a)*(n/2+o/4),Math.cos(a)*(n/2+o/4),t.xaxis,t.yaxis)}ut.lineWidth=n,ut.strokeStyle=t.color;var r=X(t.lines,t.color,0,vt);r&&(ut.fillStyle=r,i(t.datapoints,t.xaxis,t.yaxis)),n>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis),ut.restore()}function R(t){function e(t,e,i,n,o,a,r,l){for(var s=t.points,c=t.pointsize,u=0;u<s.length;u+=c){var f=s[u],h=s[u+1];null==f||f<a.min||f>a.max||h<r.min||h>r.max||(ut.beginPath(),f=a.p2c(f),h=r.p2c(h)+n,"circle"==l?ut.arc(f,h,e,0,o?Math.PI:2*Math.PI,!1):l(ut,f,h,e,o),ut.closePath(),i&&(ut.fillStyle=i,ut.fill()),ut.stroke())}}ut.save(),ut.translate(dt.left,dt.top);var i=t.points.lineWidth,n=t.shadowSize,o=t.points.radius,a=t.points.symbol;if(i>0&&n>0){var r=n/2;ut.lineWidth=r,ut.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,o,null,r+r/2,!0,t.xaxis,t.yaxis,a),ut.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,o,null,r/2,!0,t.xaxis,t.yaxis,a)}ut.lineWidth=i,ut.strokeStyle=t.color,e(t.datapoints,o,X(t.points,t.color),0,!1,t.xaxis,t.yaxis,a),ut.restore()}function E(t,e,i,n,o,a,r,l,s,c,u,f){var h,m,d,p,x,g,v,b,k;u?(b=g=v=!0,x=!1,h=i,m=t,p=e+n,d=e+o,m<h&&(k=m,m=h,h=k,x=!0,g=!1)):(x=g=v=!0,b=!1,h=t+n,m=t+o,d=i,p=e,p<d&&(k=p,p=d,d=k,b=!0,v=!1)),m<l.min||h>l.max||p<s.min||d>s.max||(h<l.min&&(h=l.min,x=!1),m>l.max&&(m=l.max,g=!1),d<s.min&&(d=s.min,b=!1),p>s.max&&(p=s.max,v=!1),h=l.p2c(h),d=s.p2c(d),m=l.p2c(m),p=s.p2c(p),r&&(c.beginPath(),c.moveTo(h,d),c.lineTo(h,p),c.lineTo(m,p),c.lineTo(m,d),c.fillStyle=r(d,p),c.fill()),f>0&&(x||g||v||b)&&(c.beginPath(),c.moveTo(h,d+a),x?c.lineTo(h,p+a):c.moveTo(h,p+a),v?c.lineTo(m,p+a):c.moveTo(m,p+a),g?c.lineTo(m,d+a):c.moveTo(m,d+a),b?c.lineTo(h,d+a):c.moveTo(h,d+a),c.stroke()))}function V(t){function e(e,i,n,o,a,r,l){for(var s=e.points,c=e.pointsize,u=0;u<s.length;u+=c)null!=s[u]&&E(s[u],s[u+1],s[u+2],i,n,o,a,r,l,ut,t.bars.horizontal,t.bars.lineWidth)}ut.save(),ut.translate(dt.left,dt.top),ut.lineWidth=t.bars.lineWidth,ut.strokeStyle=t.color;var i=t.bars.barLeft,n=t.bars.fill?function(e,i){return X(t.bars,t.color,e,i)}:null;e(t.datapoints,i,i+t.bars.barWidth,0,n,t.xaxis,t.yaxis),ut.restore()}function X(e,i,n,o){var a=e.fill;if(!a)return null;if(e.fillColor)return ot(e.fillColor,n,o,i);var r=t.color.parse(i);return r.a="number"==typeof a?a:.4,r.normalize(),r.toString()}function B(){if(e.find(".legend").remove(),rt.legend.show){for(var i,n,o=[],a=!1,r=rt.legend.labelFormatter,l=0;l<at.length;++l)i=at[l],n=i.label,n&&(l%rt.legend.noColumns==0&&(a&&o.push("</tr>"),o.push("<tr>"),a=!0),r&&(n=r(n,i)),o.push('<td class="legendColorBox"><div style="border:1px solid '+rt.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+i.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+n+"</td>"));if(a&&o.push("</tr>"),0!=o.length){var s='<table style="font-size:smaller;color:'+rt.grid.color+'">'+o.join("")+"</table>";if(null!=rt.legend.container)t(rt.legend.container).html(s);else{var c="",u=rt.legend.position,f=rt.legend.margin;null==f[0]&&(f=[f,f]),"n"==u.charAt(0)?c+="top:"+(f[1]+dt.top)+"px;":"s"==u.charAt(0)&&(c+="bottom:"+(f[1]+dt.bottom)+"px;"),"e"==u.charAt(1)?c+="right:"+(f[0]+dt.right)+"px;":"w"==u.charAt(1)&&(c+="left:"+(f[0]+dt.left)+"px;");var h=t('<div class="legend">'+s.replace('style="','style="position:absolute;'+c+";")+"</div>").appendTo(e);if(0!=rt.legend.backgroundOpacity){var m=rt.legend.backgroundColor;null==m&&(m=rt.grid.backgroundColor,m=m&&"string"==typeof m?t.color.parse(m):t.color.extract(h,"background-color"),m.a=1,m=m.toString());var d=h.children();t('<div style="position:absolute;width:'+d.width()+"px;height:"+d.height()+"px;"+c+"background-color:"+m+';"> </div>').prependTo(h).css("opacity",rt.legend.backgroundOpacity)}}}}}function q(t,e,i){var n,o,a=rt.grid.mouseActiveRadius,r=a*a+1,l=null;for(n=at.length-1;n>=0;--n)if(i(at[n])){var s=at[n],c=s.xaxis,u=s.yaxis,f=s.datapoints.points,h=s.datapoints.pointsize,m=c.c2p(t),d=u.c2p(e),p=a/c.scale,x=a/u.scale;if(c.options.inverseTransform&&(p=Number.MAX_VALUE),u.options.inverseTransform&&(x=Number.MAX_VALUE),s.lines.show||s.points.show)for(o=0;o<f.length;o+=h){var g=f[o],v=f[o+1];if(null!=g&&!(g-m>p||g-m<-p||v-d>x||v-d<-x)){var b=Math.abs(c.p2c(g)-t),k=Math.abs(u.p2c(v)-e),y=b*b+k*k;y<r&&(r=y,l=[n,o/h])}}if(s.bars.show&&!l){var T=s.bars.barLeft,M=T+s.bars.barWidth;for(o=0;o<f.length;o+=h){var g=f[o],v=f[o+1],w=f[o+2];null!=g&&(at[n].bars.horizontal?m<=Math.max(w,g)&&m>=Math.min(w,g)&&d>=v+T&&d<=v+M:m>=g+T&&m<=g+M&&d>=Math.min(w,v)&&d<=Math.max(w,v))&&(l=[n,o/h])}}}return l?(n=l[0],o=l[1],h=at[n].datapoints.pointsize,{datapoint:at[n].datapoints.points.slice(o*h,(o+1)*h),dataIndex:o,series:at[n],seriesIndex:n}):null}function G(t){rt.grid.hoverable&&Q("plothover",t,function(t){return 0!=t.hoverable})}function _(t){rt.grid.hoverable&&Q("plothover",t,function(t){return!1})}function J(t){Q("plotclick",t,function(t){return 0!=t.clickable})}function Q(t,i,n){var o=ct.offset(),a=i.pageX-o.left-dt.left,r=i.pageY-o.top-dt.top,l=d({left:a,top:r});l.pageX=i.pageX,l.pageY=i.pageY;var s=q(a,r,n);if(s&&(s.pageX=parseInt(s.series.xaxis.p2c(s.datapoint[0])+o.left+dt.left),s.pageY=parseInt(s.series.yaxis.p2c(s.datapoint[1])+o.top+dt.top)),rt.grid.autoHighlight){for(var c=0;c<yt.length;++c){var u=yt[c];u.auto!=t||s&&u.series==s.series&&u.point[0]==s.datapoint[0]&&u.point[1]==s.datapoint[1]||tt(u.series,u.point)}s&&Z(s.series,s.datapoint,t)}e.trigger(t,[l,s])}function $(){Tt||(Tt=setTimeout(K,30))}function K(){Tt=null,ft.save(),ft.clearRect(0,0,pt,xt),ft.translate(dt.left,dt.top);var t,e;for(t=0;t<yt.length;++t)e=yt[t],e.series.bars.show?nt(e.series,e.point):it(e.series,e.point);ft.restore(),l(bt.drawOverlay,[ft])}function Z(t,e,i){if("number"==typeof t&&(t=at[t]),"number"==typeof e){var n=t.datapoints.pointsize;e=t.datapoints.points.slice(n*e,n*(e+1))}var o=et(t,e);o==-1?(yt.push({series:t,point:e,auto:i}),$()):i||(yt[o].auto=!1)}function tt(t,e){null==t&&null==e&&(yt=[],$()),"number"==typeof t&&(t=at[t]),"number"==typeof e&&(e=t.data[e]);var i=et(t,e);i!=-1&&(yt.splice(i,1),$())}function et(t,e){for(var i=0;i<yt.length;++i){var n=yt[i];if(n.series==t&&n.point[0]==e[0]&&n.point[1]==e[1])return i}return-1}function it(e,i){var n=i[0],o=i[1],a=e.xaxis,r=e.yaxis;if(!(n<a.min||n>a.max||o<r.min||o>r.max)){var l=e.points.radius+e.points.lineWidth/2;ft.lineWidth=l,ft.strokeStyle=t.color.parse(e.color).scale("a",.5).toString();var s=1.5*l,n=a.p2c(n),o=r.p2c(o);ft.beginPath(),"circle"==e.points.symbol?ft.arc(n,o,s,0,2*Math.PI,!1):e.points.symbol(ft,n,o,s,!1),ft.closePath(),ft.stroke()}}function nt(e,i){ft.lineWidth=e.bars.lineWidth,ft.strokeStyle=t.color.parse(e.color).scale("a",.5).toString();var n=t.color.parse(e.color).scale("a",.5).toString(),o=e.bars.barLeft;E(i[0],i[1],i[2]||0,o,o+e.bars.barWidth,0,function(){return n},e.xaxis,e.yaxis,ft,e.bars.horizontal,e.bars.lineWidth)}function ot(e,i,n,o){if("string"==typeof e)return e;for(var a=ut.createLinearGradient(0,n,0,i),r=0,l=e.colors.length;r<l;++r){var s=e.colors[r];if("string"!=typeof s){var c=t.color.parse(o);null!=s.brightness&&(c=c.scale("rgb",s.brightness)),null!=s.opacity&&(c.a*=s.opacity),s=c.toString()}a.addColorStop(r/(l-1),s)}return a}var at=[],rt={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:!1},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1},shadowSize:3},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},hooks:{}},lt=null,st=null,ct=null,ut=null,ft=null,ht=[],mt=[],dt={left:0,right:0,top:0,bottom:0},pt=0,xt=0,gt=0,vt=0,bt={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},kt=this;kt.setData=u,kt.setupGrid=W,kt.draw=L,kt.getPlaceholder=function(){return e},kt.getCanvas=function(){return lt},kt.getPlotOffset=function(){return dt},kt.width=function(){return gt},kt.height=function(){return vt},kt.offset=function(){var t=ct.offset();return t.left+=dt.left,t.top+=dt.top,t},kt.getData=function(){return at},kt.getAxes=function(){var e={};return t.each(ht.concat(mt),function(t,i){i&&(e[i.direction+(1!=i.n?i.n:"")+"axis"]=i)}),e},kt.getXAxes=function(){return ht},kt.getYAxes=function(){return mt},kt.c2p=d,kt.p2c=p,kt.getOptions=function(){return rt},kt.highlight=Z,kt.unhighlight=tt,kt.triggerRedrawOverlay=$,kt.pointOffset=function(t){return{left:parseInt(ht[h(t,"x")-1].p2c(+t.x)+dt.left),
top:parseInt(mt[h(t,"y")-1].p2c(+t.y)+dt.top)}},kt.shutdown=w,kt.resize=function(){k(),y(lt),y(st)},kt.hooks=bt,s(kt),c(a),T(),u(o),W(),L(),M();var yt=[],Tt=null}function n(t,e){return e*Math.floor(t/e)}t.plot=function(i,n,o){var a=new e(t(i),n,o,t.plot.plugins);return a},t.plot.version="0.7",t.plot.plugins=[],t.plot.formatDate=function(t,e,i){var n=function(t){return t=""+t,1==t.length?"0"+t:t},o=[],a=!1,r=!1,l=t.getUTCHours(),s=l<12;null==i&&(i=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),e.search(/%p|%P/)!=-1&&(l>12?l-=12:0==l&&(l=12));for(var c=0;c<e.length;++c){var u=e.charAt(c);if(a){switch(u){case"h":u=""+l;break;case"H":u=n(l);break;case"M":u=n(t.getUTCMinutes());break;case"S":u=n(t.getUTCSeconds());break;case"d":u=""+t.getUTCDate();break;case"m":u=""+(t.getUTCMonth()+1);break;case"y":u=""+t.getUTCFullYear();break;case"b":u=""+i[t.getUTCMonth()];break;case"p":u=s?"am":"pm";break;case"P":u=s?"AM":"PM";break;case"0":u="",r=!0}u&&r&&(u=n(u),r=!1),o.push(u),r||(a=!1)}else"%"==u?a=!0:o.push(u)}return o.join("")}}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/lib/jquery/flot/jquery.flot.fillbetween.js' */
!function(e){function n(e){function n(e,n){var l;for(l=0;l<n.length;++l)if(n[l].id==e.fillBetween)return n[l];return"number"==typeof e.fillBetween?(l=e.fillBetween,l<0||l>=n.length?null:n[l]):null}function l(e,l,i){if(null!=l.fillBetween){var t=n(l,e.getData());if(t){for(var s,f,o,u,p,r,h,a=i.pointsize,g=i.points,w=t.datapoints.pointsize,c=t.datapoints.points,v=[],B=l.lines.show,b=a>2&&i.format[2].y,d=B&&l.lines.steps,y=!0,k=0,z=0;;){if(k>=g.length)break;if(h=v.length,null==g[k]){for(m=0;m<a;++m)v.push(g[k+m]);k+=a}else if(z>=c.length){if(!B)for(m=0;m<a;++m)v.push(g[k+m]);k+=a}else if(null==c[z]){for(m=0;m<a;++m)v.push(null);y=!0,z+=w}else{if(s=g[k],f=g[k+1],u=c[z],p=c[z+1],r=0,s==u){for(m=0;m<a;++m)v.push(g[k+m]);r=p,k+=a,z+=w}else if(s>u){if(B&&k>0&&null!=g[k-a]){for(o=f+(g[k-a+1]-f)*(u-s)/(g[k-a]-s),v.push(u),v.push(o),m=2;m<a;++m)v.push(g[k+m]);r=p}z+=w}else{if(y&&B){k+=a;continue}for(m=0;m<a;++m)v.push(g[k+m]);B&&z>0&&null!=c[z-w]&&(r=p+(c[z-w+1]-p)*(s-u)/(c[z-w]-u)),k+=a}y=!1,h!=v.length&&b&&(v[h+2]=r)}if(d&&h!=v.length&&h>0&&null!=v[h]&&v[h]!=v[h-a]&&v[h+1]!=v[h-a+1]){for(m=0;m<a;++m)v[h+a+m]=v[h+m];v[h+1]=v[h-a+1]}}i.points=v}}}e.hooks.processDatapoints.push(l)}var l={series:{fillBetween:null}};e.plot.plugins.push({init:n,options:l,name:"fillbetween",version:"1.0"})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/lib/jquery/flot/jquery.flot.stack.js' */
!function(n){function s(n){function s(n,s){for(var t=null,i=0;i<s.length&&n!=s[i];++i)s[i].stack==n.stack&&(t=s[i]);return t}function t(n,t,i){if(null!=t.stack){var l=s(t,n.getData());if(l){for(var o,e,f,u,r,a,p,h=i.pointsize,c=i.points,g=l.datapoints.pointsize,k=l.datapoints.points,v=[],z=t.lines.show,b=t.bars.horizontal,d=h>2&&(b?i.format[2].x:i.format[2].y),y=z&&t.lines.steps,D=!0,j=b?1:0,w=b?0:1,x=0,Q=0;;){if(x>=c.length)break;if(p=v.length,null==c[x]){for(m=0;m<h;++m)v.push(c[x+m]);x+=h}else if(Q>=k.length){if(!z)for(m=0;m<h;++m)v.push(c[x+m]);x+=h}else if(null==k[Q]){for(m=0;m<h;++m)v.push(null);D=!0,Q+=g}else{if(o=c[x+j],e=c[x+w],u=k[Q+j],r=k[Q+w],a=0,o==u){for(m=0;m<h;++m)v.push(c[x+m]);v[p+w]+=r,a=r,x+=h,Q+=g}else if(o>u){if(z&&x>0&&null!=c[x-h]){for(f=e+(c[x-h+w]-e)*(u-o)/(c[x-h+j]-o),v.push(u),v.push(f+r),m=2;m<h;++m)v.push(c[x+m]);a=r}Q+=g}else{if(D&&z){x+=h;continue}for(m=0;m<h;++m)v.push(c[x+m]);z&&Q>0&&null!=k[Q-g]&&(a=r+(k[Q-g+w]-r)*(o-u)/(k[Q-g+j]-u)),v[p+w]+=a,x+=h}D=!1,p!=v.length&&d&&(v[p+2]+=a)}if(y&&p!=v.length&&p>0&&null!=v[p]&&v[p]!=v[p-h]&&v[p+1]!=v[p-h+1]){for(m=0;m<h;++m)v[p+h+m]=v[p+m];v[p+1]=v[p-h+1]}}i.points=v}}}n.hooks.processDatapoints.push(t)}var t={series:{stack:null}};n.plot.plugins.push({init:s,options:t,name:"stack",version:"1.2"})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/lib/jquery/flot/jquery.flot.selection.js' */
!function(e){function t(t){function o(e){h.active&&(a(e),t.getPlaceholder().trigger("plotselecting",[r()]))}function n(t){1==t.which&&(document.body.focus(),void 0!==document.onselectstart&&null==x.onselectstart&&(x.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),void 0!==document.ondrag&&null==x.ondrag&&(x.ondrag=document.ondrag,document.ondrag=function(){return!1}),l(h.first,t),h.active=!0,m=function(e){i(e)},e(document).one("mouseup",m))}function i(e){return m=null,void 0!==document.onselectstart&&(document.onselectstart=x.onselectstart),void 0!==document.ondrag&&(document.ondrag=x.ondrag),h.active=!1,a(e),g()?s():(t.getPlaceholder().trigger("plotunselected",[]),t.getPlaceholder().trigger("plotselecting",[null])),!1}function r(){if(!g())return null;var o={},n=h.first,i=h.second;return e.each(t.getAxes(),function(e,t){if(t.used){var r=t.c2p(n[t.direction]),s=t.c2p(i[t.direction]);o[e]={from:Math.min(r,s),to:Math.max(r,s)}}}),o}function s(){var e=r();t.getPlaceholder().trigger("plotselected",[e]),e.xaxis&&e.yaxis&&t.getPlaceholder().trigger("selected",[{x1:e.xaxis.from,y1:e.yaxis.from,x2:e.xaxis.to,y2:e.yaxis.to}])}function c(e,t,o){return t<e?e:t>o?o:t}function l(e,o){var n=t.getOptions(),i=t.getPlaceholder().offset(),r=t.getPlotOffset();e.x=c(0,o.pageX-i.left-r.left,t.width()),e.y=c(0,o.pageY-i.top-r.top,t.height()),"y"==n.selection.mode&&(e.x=e==h.first?0:t.width()),"x"==n.selection.mode&&(e.y=e==h.first?0:t.height())}function a(e){null!=e.pageX&&(l(h.second,e),g()?(h.show=!0,t.triggerRedrawOverlay()):d(!0))}function d(e){h.show&&(h.show=!1,t.triggerRedrawOverlay(),e||t.getPlaceholder().trigger("plotunselected",[]))}function u(e,o){var n,i,r,s,c=t.getAxes();for(var l in c)if(n=c[l],n.direction==o&&(s=o+n.n+"axis",e[s]||1!=n.n||(s=o+"axis"),e[s])){i=e[s].from,r=e[s].to;break}if(e[s]||(n="x"==o?t.getXAxes()[0]:t.getYAxes()[0],i=e[o+"1"],r=e[o+"2"]),null!=i&&null!=r&&i>r){var a=i;i=r,r=a}return{from:i,to:r,axis:n}}function f(e,o){var n,i=t.getOptions();"y"==i.selection.mode?(h.first.x=0,h.second.x=t.width()):(n=u(e,"x"),h.first.x=n.axis.p2c(n.from),h.second.x=n.axis.p2c(n.to)),"x"==i.selection.mode?(h.first.y=0,h.second.y=t.height()):(n=u(e,"y"),h.first.y=n.axis.p2c(n.from),h.second.y=n.axis.p2c(n.to)),h.show=!0,t.triggerRedrawOverlay(),!o&&g()&&s()}function g(){var e=5;return Math.abs(h.second.x-h.first.x)>=e&&Math.abs(h.second.y-h.first.y)>=e}var h={first:{x:-1,y:-1},second:{x:-1,y:-1},show:!1,active:!1},x={},m=null;t.clearSelection=d,t.setSelection=f,t.getSelection=r,t.hooks.bindEvents.push(function(e,t){var i=e.getOptions();null!=i.selection.mode&&(t.mousemove(o),t.mousedown(n))}),t.hooks.drawOverlay.push(function(t,o){if(h.show&&g()){var n=t.getPlotOffset(),i=t.getOptions();o.save(),o.translate(n.left,n.top);var r=e.color.parse(i.selection.color);o.strokeStyle=r.scale("a",.8).toString(),o.lineWidth=1,o.lineJoin="round",o.fillStyle=r.scale("a",.4).toString();var s=Math.min(h.first.x,h.second.x),c=Math.min(h.first.y,h.second.y),l=Math.abs(h.second.x-h.first.x),a=Math.abs(h.second.y-h.first.y);o.fillRect(s,c,l,a),o.strokeRect(s,c,l,a),o.restore()}}),t.hooks.shutdown.push(function(t,i){i.unbind("mousemove",o),i.unbind("mousedown",n),m&&e(document).unbind("mouseup",m)})}e.plot.plugins.push({init:t,options:{selection:{mode:null,color:"#e8cfac"}},name:"selection",version:"1.1"})}(jQuery);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/lib/jquery/flot/jquery.flot.mouseenterexit.js' */
!function(e){function t(e){e.hooks.bindEvents.push(function(e,t){var n=function(t){e.getOptions().mouseEnterExitEvents&&(e.mouseEntered||(e.mouseEntered=!0,e.getPlaceholder().trigger("flotMouseEnter",e)))},o=function(t){e.getOptions().mouseEnterExitEvents&&e.mouseEntered&&(e.mouseEntered=!1,e.getPlaceholder().trigger("flotMouseLeave",e))};t.mousemove(n),t.mouseleave(o)})}var n={mouseEnterExitEvents:!1};AJS.$.plot.plugins.push({init:t,options:n,name:"gh-mouseenterexit-events",version:"1.0"})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/lib/jquery/flot/jquery.flot.multi.js' */
!function(o){function a(o){function a(s,o,a,r){o.bars.show&&n.push(o)}function r(o,a,r){if(a.bars.show&&void 0==a.bars.barLeft){if(0==p)for(var t=0;t<n.length;t++)p+=n[t].bars.barWidth;for(var i=0,u=0;u<n.length&&(s=n[u],s!=a);u++)i+=s.bars.barWidth;a.bars.barLeft=i-p/2}}function t(s,o){o.multiplebars&&(i=o.multiplebars,n=[],p=0,s.hooks.processRawData.push(a),s.hooks.processDatapoints.push(r))}var i=!1,n=[],p=0;o.hooks.processOptions.push(t)}var r={multiplebars:!1};o.plot.plugins.push({init:a,options:r,name:"multiplebars",version:"0.1"})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/lib/lzstring.js' */
var LZString=function(){function o(o,r){if(!t[o]){t[o]={};for(var n=0;n<o.length;n++)t[o][o.charAt(n)]=n}return t[o][r]}var r=String.fromCharCode,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",t={},i={compressToBase64:function(o){if(null==o)return"";var r=i._compress(o,6,function(o){return n.charAt(o)});switch(r.length%4){default:case 0:return r;case 1:return r+"===";case 2:return r+"==";case 3:return r+"="}},decompressFromBase64:function(r){return null==r?"":""==r?null:i._decompress(r.length,32,function(e){return o(n,r.charAt(e))})},compressToUTF16:function(o){return null==o?"":i._compress(o,15,function(o){return r(o+32)})+" "},decompressFromUTF16:function(o){return null==o?"":""==o?null:i._decompress(o.length,16384,function(r){return o.charCodeAt(r)-32})},compressToUint8Array:function(o){for(var r=i.compress(o),n=new Uint8Array(2*r.length),e=0,t=r.length;t>e;e++){var s=r.charCodeAt(e);n[2*e]=s>>>8,n[2*e+1]=s%256}return n},decompressFromUint8Array:function(o){if(null===o||void 0===o)return i.decompress(o);for(var n=new Array(o.length/2),e=0,t=n.length;t>e;e++)n[e]=256*o[2*e]+o[2*e+1];var s=[];return n.forEach(function(o){s.push(r(o))}),i.decompress(s.join(""))},compressToEncodedURIComponent:function(o){return null==o?"":i._compress(o,6,function(o){return e.charAt(o)})},decompressFromEncodedURIComponent:function(r){return null==r?"":""==r?null:(r=r.replace(/ /g,"+"),i._decompress(r.length,32,function(n){return o(e,r.charAt(n))}))},compress:function(o){return i._compress(o,16,function(o){return r(o)})},_compress:function(o,r,n){if(null==o)return"";var e,t,i,s={},p={},u="",c="",a="",l=2,f=3,h=2,d=[],m=0,v=0;for(i=0;i<o.length;i+=1)if(u=o.charAt(i),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=f++,p[u]=!0),c=a+u,Object.prototype.hasOwnProperty.call(s,c))a=c;else{if(Object.prototype.hasOwnProperty.call(p,a)){if(a.charCodeAt(0)<256){for(e=0;h>e;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=a.charCodeAt(0),e=0;8>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;h>e;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=a.charCodeAt(0),e=0;16>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}l--,0==l&&(l=Math.pow(2,h),h++),delete p[a]}else for(t=s[a],e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;l--,0==l&&(l=Math.pow(2,h),h++),s[c]=f++,a=String(u)}if(""!==a){if(Object.prototype.hasOwnProperty.call(p,a)){if(a.charCodeAt(0)<256){for(e=0;h>e;e++)m<<=1,v==r-1?(v=0,d.push(n(m)),m=0):v++;for(t=a.charCodeAt(0),e=0;8>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}else{for(t=1,e=0;h>e;e++)m=m<<1|t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t=0;for(t=a.charCodeAt(0),e=0;16>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1}l--,0==l&&(l=Math.pow(2,h),h++),delete p[a]}else for(t=s[a],e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;l--,0==l&&(l=Math.pow(2,h),h++)}for(t=2,e=0;h>e;e++)m=m<<1|1&t,v==r-1?(v=0,d.push(n(m)),m=0):v++,t>>=1;for(;;){if(m<<=1,v==r-1){d.push(n(m));break}v++}return d.join("")},decompress:function(o){return null==o?"":""==o?null:i._decompress(o.length,32768,function(r){return o.charCodeAt(r)})},_decompress:function(o,n,e){var t,i,s,p,u,c,a,l,f=[],h=4,d=4,m=3,v="",w=[],A={val:e(0),position:n,index:1};for(i=0;3>i;i+=1)f[i]=i;for(p=0,c=Math.pow(2,2),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;switch(t=p){case 0:for(p=0,c=Math.pow(2,8),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;l=r(p);break;case 1:for(p=0,c=Math.pow(2,16),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;l=r(p);break;case 2:return""}for(f[3]=l,s=l,w.push(l);;){if(A.index>o)return"";for(p=0,c=Math.pow(2,m),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;switch(l=p){case 0:for(p=0,c=Math.pow(2,8),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;f[d++]=r(p),l=d-1,h--;break;case 1:for(p=0,c=Math.pow(2,16),a=1;a!=c;)u=A.val&A.position,A.position>>=1,0==A.position&&(A.position=n,A.val=e(A.index++)),p|=(u>0?1:0)*a,a<<=1;f[d++]=r(p),l=d-1,h--;break;case 2:return w.join("")}if(0==h&&(h=Math.pow(2,m),m++),f[l])v=f[l];else{if(l!==d)return null;v=s+s.charAt(0)}w.push(v),f[d++]=s+v.charAt(0),h--,s=v,0==h&&(h=Math.pow(2,m),m++)}}};return i}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/lib/lscache.js' */
!function(n,e){"function"==typeof define&&define.amd?define([],e):"undefined"!=typeof module&&module.exports?module.exports=e():n.lscache=e()}(this,function(){function n(){var n="__lscachetest__",t=n;if(void 0!==h)return h;try{u(n,t),c(n),h=!0}catch(r){h=!!e(r)}return h}function e(n){return!!(n&&"QUOTA_EXCEEDED_ERR"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name||"QuotaExceededError"===n.name)}function t(){return void 0===d&&(d=null!=window.JSON),d}function r(n){return n+g}function o(){return Math.floor((new Date).getTime()/w)}function i(n){return localStorage.getItem(p+y+n)}function u(n,e){localStorage.removeItem(p+y+n),localStorage.setItem(p+y+n,e)}function c(n){localStorage.removeItem(p+y+n)}function a(n){for(var e=new RegExp("^"+p+y+"(.*)"),t=localStorage.length-1;t>=0;--t){var o=localStorage.key(t);o=o&&o.match(e),o=o&&o[1],o&&o.indexOf(g)<0&&n(o,r(o))}}function f(n){var e=r(n);c(n),c(e)}function l(n){var e=r(n),t=i(e);if(t){var u=parseInt(t,m);if(o()>=u)return c(n),c(e),!0}}function s(n,e){E&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+n),e&&window.console.warn("lscache - The error was: "+e.message))}var h,d,p="lscache-",g="-cacheexpiration",m=10,w=6e4,v=Math.floor(864e13/w),y="",E=!1,S={set:function(l,h,d){if(!n())return!1;if("string"!=typeof h){if(!t())return!1;try{h=JSON.stringify(h)}catch(p){return!1}}try{u(l,h)}catch(p){if(!e(p))return s("Could not add item with key '"+l+"'",p),!1;var g,w=[];a(function(n,e){var t=i(e);t=t?parseInt(t,m):v,w.push({key:n,size:(i(n)||"").length,expiration:t})}),w.sort(function(n,e){return e.expiration-n.expiration});for(var y=(h||"").length;w.length&&y>0;)g=w.pop(),s("Cache is full, removing item with key '"+l+"'"),f(g.key),y-=g.size;try{u(l,h)}catch(p){return s("Could not add item with key '"+l+"', perhaps it's too big?",p),!1}}return d?u(r(l),(o()+d).toString(m)):c(r(l)),!0},get:function(e){if(!n())return null;if(l(e))return null;var r=i(e);if(!r||!t())return r;try{return JSON.parse(r)}catch(o){return r}},remove:function(e){n()&&f(e)},supported:function(){return n()},flush:function(){n()&&a(function(n){f(n)})},flushExpired:function(){n()&&a(function(n){l(n)})},setBucket:function(n){y=n},resetBucket:function(){y=""},enableWarnings:function(n){E=n}};return S});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/SprintFilters.js' */
GH.Components||(GH.Components={}),GH.Components.sprintFiltersInit=function(){GH.InlineDialog.registerInlineDialogHacks("sprintDialog",{disregardClickSelectors:[".calendar",".js-edit-sprintName-trigger",".js-edit-startDate-trigger",".js-edit-endDate-trigger"]})},GH.Components.SPRINT_NAME_MAX_LENGTH=30,GH.Components.EVENT_SPRINT_UPDATED="sprintUpdated",GH.Components.SprintFilters=function(t){this.stateParamName=t},GH.Components.SprintFilters.prototype.stateParamName="workSprintFilters",GH.Components.SprintFilters.prototype.rapidViewConfig={},GH.Components.SprintFilters.prototype.setRapidViewConfig=function(t){this.rapidViewConfig=t},GH.Components.SprintFilters.prototype.getActiveSprintFilters=function(){return GH.BoardState.getPerViewValue(this.stateParamName,[])},GH.Components.SprintFilters.prototype.setActiveSprintFilters=function(t){GH.BoardState.setPerViewValue(this.stateParamName,t)},GH.Components.SprintFilters.prototype.renderComponent=function(){return AJS.$(GH.tpl.component.sprintfilters.renderSprintSelector())},GH.Components.SprintFilters.prototype.setSprintData=function(t){this.sprints=t||[]},GH.Components.SprintFilters.prototype.getSprintData=function(){return this.sprints},GH.Components.SprintFilters.prototype.validateActiveSprints=function(){var t=this.getActiveSprintFilters(),i=[];_.each(t,function(t){this.getSprintById(t)&&i.push(t)},this),_.isEqual(t,i)||(this.setActiveSprintFilters(i),GH.RapidBoard.State.replaceState(),AJS.$(this).trigger("sprintFilterChange"))},GH.Components.SprintFilters.prototype.hasSprints=function(t){return this.sprints.length>0},GH.Components.SprintFilters.prototype.getSprintById=function(t){return _.find(this.sprints,function(i){return i.id===t})},GH.Components.SprintFilters.prototype.updateSprintData=function(t,i){var e=!1;if(this.sprints)for(var n=0;n<this.sprints.length;n++)this.sprints[n].id==t&&(this.sprints[n]=i,e=!0);e&&GH.RapidBoard.State.isWorkMode()&&this.drawSprints()},GH.Components.SprintFilters.prototype.getTooltipCompleteSprintBtn=function(t,i){return this.hasSprints()?t?t.canUpdateSprint?"":i?"Only a Jira administrator can start or complete this sprint. Try selecting a project in your current board filter.":AJS.format("You need the {0}Manage sprints permission{1} to start or complete this sprint",'<a class="manage-sprint-permission-help" href="#">',"</a>"):"You can only complete one sprint at a time":"There are no active sprints to complete"},GH.Components.SprintFilters.prototype.drawSprints=function(){var t=this,i=AJS.$(".ghx-controls-work .js-sprint-info"),e=this.getActiveSprintFilters(),n={};if(_.each(e,function(t){n[t]=!0}),i.html(GH.tpl.component.sprintfilters.renderSprints({sprints:this.sprints,activeSprintMap:n})),this.sprints.length>1&&i.find(".js-toggle-sprint").click(function(i){var e=AJS.$(this);t.toggleActiveSprintFilterButton(i,e)}),GH.RapidBoard.ViewController.hasSideBar){var r=1===this.sprints.length?this.sprints[0].id:this.getActiveSprintFilters()[0],a=this.getSprintById(r);r&&AJS.$("#ghx-header").append(GH.tpl.board.x.renderSprintGoal({goal:a.goal}))}else i.find(".js-sprint-trigger").click(function(i){var e=AJS.$(this);t.openSprintDialog(e)})},GH.Components.SprintFilters.prototype.toggleActiveSprintFilterButton=function(t,i){t.preventDefault();var e=parseInt(i.parents(".js-sprintfilter").attr("data-sprint-id"),10);this.toggleActiveSprintFilter(e),AJS.$(this).trigger("sprintFilterChange")},GH.Components.SprintFilters.prototype.updateButtonStates=function(){var t=this.getActiveSprintFilters();AJS.$.each(AJS.$(".js-sprint-info").find(".js-sprintfilter"),function(i,e){var n=AJS.$(e),r=parseInt(n.attr("data-sprint-id"),10);_.contains(t,r)?n.addClass("ghx-active"):n.removeClass("ghx-active")})},GH.Components.SprintFilters.prototype.toggleActiveSprintFilter=function(t){var i=this.getActiveSprintFilters(),e=[];0!==i.length&&i[0]===t||e.push(t),this.setActiveSprintFilters(e),GH.RapidBoard.State.pushState()},GH.Components.SprintFilters.prototype.removeDialog=function(){GH.InlineDialog.remove("sprintDialog")},GH.Components.SprintFilters.prototype.openSprintDialog=function(t){this.removeDialog();var i=parseInt(t.parents(".js-sprintfilter").attr("data-sprint-id"),10),e=this.getSprintById(i);this.analytics("open");var n={fadeTime:0,noBind:!0,width:400,cacheContent:!1,hideDelay:6e4},r=this,a=GH.InlineDialog.create("sprintDialog",t,function(t,i,n){r.renderSprintDialog(t,e,n)},n);a.show()},GH.Components.SprintFilters.prototype.analytics=function(t,i){var e=require("jira-agile/rapid/analytics-tracker");new e("gh.edit.sprint.inlinedialog.work.change").trigger(t,i)},GH.Components.SprintFilters.prototype.renderSprintDialog=function(t,i,e){t.html(GH.tpl.component.sprintfilters.renderSprintDetails({sprint:i,canUpdateSprint:i.canUpdateSprint})),t.closest(".aui-inline-dialog").addClass("ghx-inline-dialog"),t.parent().hide(),e()},GH.Components.SprintFilters.prototype.createGetInlineEditDataFunction=function(){var t=this;return function(i,e){GH.RapidBoard.Util.InlineEditable.submitActiveEdits();var n=GH.RapidBoard.Util.InlineEditable.defaultFieldData(i);return"sprintName"===n.fieldName&&(n.maxLength=GH.Components.SPRINT_NAME_MAX_LENGTH,n.cssClass="medium-field"),n.sprintId=parseInt(i.parents(".js-sprint-details").attr("data-sprint-id"),10),n.sprintData=_.clone(t.getSprintById(n.sprintId)),n.sprintFiltersComponent=t,n}},GH.Components.SprintFilters.prototype.initializeInlineEdits=function(){var t=this,i=function(t){var i=t.editElement.val();return!!GH.Validation.notBlank(t.editElement,"Sprint name is required")&&(!!GH.Validation.maxLength(t.editElement,GH.Components.SPRINT_NAME_MAX_LENGTH,AJS.format("Sprint name must be shorter than {0} characters.",GH.Components.SPRINT_NAME_MAX_LENGTH))&&(t.sprintData.name=i,t.newValue=i,!0))},e=function(t){var i=t.editElement.find("input").val();return!!GH.Validation.notBlank(t.editElement.find("input"),"You must specify an end date for the sprint.",t.editElement)&&(t.sprintData.startDate=i,t.newValue=i,!0)},n=function(t){var i=t.editElement.find("input").val();return!!GH.Validation.notBlank(t.editElement.find("input"),"You must specify an end date for the sprint.",t.editElement)&&(t.sprintData.endDate=i,t.newValue=i,!0)},r=function(i){var e=_.clone(t.getSprintById(i.sprintId));_.isEqual(e,i.sprintData)||(t.submitSprintData(i.sprintData),t.analytics("update",i.fieldName)),GH.RapidBoard.Util.InlineEditable.updateView(i)},a=function(t){GH.Validation.clearContextualErrors(".ghx-sprint-active[data-sprint-id="+t.sprintId+"]"),GH.RapidBoard.Util.InlineEditable.cancelActiveEdits()};GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-sprintName-trigger",{getData:this.createGetInlineEditDataFunction(),validate:i,save:r}),GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-startDate-trigger",{getData:this.createGetInlineEditDataFunction(),renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:e,preEdit:a,save:r}),GH.RapidBoard.Util.InlineEditable.register("#inline-dialog-sprintDialog .js-edit-endDate-trigger",{getData:this.createGetInlineEditDataFunction(),renderEdit:GH.RapidBoard.Util.InlineEditable.renderDatePickerInlineEdit,activate:GH.RapidBoard.Util.InlineEditable.datePickerActivate,validate:n,preEdit:a,save:r})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/SprintFilters.soy' */
// This file was automatically generated from SprintFilters.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.sprintfilters.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.sprintfilters == 'undefined') { GH.tpl.component.sprintfilters = {}; }


GH.tpl.component.sprintfilters.renderSprintSelector = function(opt_data, opt_ignored) {
  return '<dl id="ghx-controls-sprint" class="ghx-controls-filters ghx-controls-sprint js-sprint-info">' + GH.tpl.component.sprintfilters.renderNoneActive(null) + '</dl>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintSelector.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintSelector';
}


GH.tpl.component.sprintfilters.renderNoneActive = function(opt_data, opt_ignored) {
  return '<dt>' + soy.$$escapeHtml('Sprint') + ':</dt><dd><span class="ghx-fa">' + soy.$$escapeHtml('No active sprints') + '</span></dd>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderNoneActive.soyTemplateName = 'GH.tpl.component.sprintfilters.renderNoneActive';
}


GH.tpl.component.sprintfilters.renderSprints = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.sprints.length == 0) {
    output += GH.tpl.component.sprintfilters.renderNoneActive(null);
  } else {
    output += '<dt>' + ((opt_data.sprints.length < 2) ? soy.$$escapeHtml('Sprint') + ':' : soy.$$escapeHtml('Sprints') + ':') + '</dt>';
    var sprintList26 = opt_data.sprints;
    var sprintListLen26 = sprintList26.length;
    for (var sprintIndex26 = 0; sprintIndex26 < sprintListLen26; sprintIndex26++) {
      var sprintData26 = sprintList26[sprintIndex26];
      output += '<dd data-sprint-id="' + soy.$$escapeHtml(sprintData26.id) + '" class="ghx-sprint "><a data-sprint-id="' + soy.$$escapeHtml(sprintData26.id) + '" role="button" class="' + ((opt_data.activeSprintMap[sprintData26.id]) ? ' ghx-active' : '') + ((opt_data.sprints.length < 2) ? ' ghx-solo' : '') + ' js-sprintfilter "><span class="ghx-name js-toggle-sprint" role="button">' + soy.$$escapeHtml(sprintData26.name) + '</span><span class="ghx-trigger js-sprint-trigger" role="button"><span class="ghx-icon ghx-icon-drop"></span></span></a></dd>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprints.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprints';
}


GH.tpl.component.sprintfilters.renderSprintDetails = function(opt_data, opt_ignored) {
  return '<div class="js-sprint-details ghx-sprint-details ghx-inline-dialog-content" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.id) + '"><form class="aui"><fieldset><div class="field-group"><label for="ghx-sprint-name">' + soy.$$escapeHtml('Sprint name') + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'sprintName', fieldValue: opt_data.sprint.name, displayValue: opt_data.sprint.name}) + '</div><div class="field-group"><label for="ghx-sprint-start-date">' + soy.$$escapeHtml('Start Date') + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'startDate', fieldValue: opt_data.sprint.startDate, displayValue: opt_data.sprint.startDate}) + '<span id="ghx-sprint-start-date-error"></span></div><div class="field-group"><label for="ghx-sprint-end-date">' + soy.$$escapeHtml('End date') + ':</label>' + GH.tpl.inlineeditfield.renderBasicTextView({canEdit: opt_data.canUpdateSprint, fieldName: 'endDate', fieldValue: opt_data.sprint.endDate, displayValue: opt_data.sprint.endDate}) + '<span id="ghx-sprint-end-date-error"></span></div><div class="group"><div class="radio"><button id="ghx-complete-sprint" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint.id) + '"' + ((! opt_data.canUpdateSprint) ? ' disabled title="' + soy.$$escapeHtml('You must have the Manage sprints permission to complete a sprint') + '"' : '') + ' class="aui-button">' + soy.$$escapeHtml('Complete sprint\u2026') + '</button></div></div></fieldset></form></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintDetails.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintDetails';
}


GH.tpl.component.sprintfilters.renderSprintMeta = function(opt_data, opt_ignored) {
  return '<div class="ghx-sprint-meta" data-sprint-id="' + soy.$$escapeHtml(opt_data.sprint ? opt_data.sprint.id : '') + '">' + ((opt_data.sprint) ? '<span class="time">' + aui.icons.icon({useIconFont: true, size: 'small', icon: 'time'}) + '<span class="days-left">' + soy.$$escapeHtml(AJS.format('{0} {0,choice,0#days|1#day|2#days} remaining',opt_data.sprint.daysRemaining)) + '</span></span>' : '') + '<div class="complete-sprint-container"' + ((opt_data.tooltipText) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipText) + '"' : 'data-tooltip=""') + '>' + aui.buttons.button({text: 'Complete sprint', extraClasses: 'js-complete-sprint ' + (opt_data.isDisabled ? ' disabled' : ''), id: 'ghx-complete-sprint', isDisabled: opt_data.isDisabled}) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintMeta.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintMeta';
}


GH.tpl.component.sprintfilters.renderSprintDatesTooltip = function(opt_data, opt_ignored) {
  return '<div class="ghx-sprint-dates"><p>' + soy.$$escapeHtml('Start Date') + ' <b>' + soy.$$escapeHtml(opt_data.sprint.startDate) + '</b></p><p>' + soy.$$escapeHtml('Projected End Date') + ' <b>' + soy.$$escapeHtml(opt_data.sprint.endDate) + '</b></p></div>';
};
if (goog.DEBUG) {
  GH.tpl.component.sprintfilters.renderSprintDatesTooltip.soyTemplateName = 'GH.tpl.component.sprintfilters.renderSprintDatesTooltip';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/StatusCategoryPicker.js' */
GH.StatusCategoryPicker=function(){function e(e){var r=require("jira/featureflags/feature-manager"),n=require("jira-agile/rapid/deferred-resources-loader"),o=function(){return r.isFeatureEnabled("cbb.heritage")},u={statusCategoryPicker:null,options:_.defaults({},e,a)};return n.handleDeferredResourceImport(o()&&!GH.Dialog,function(){t(u),s(u)}),i(u)}function t(e){e.options.element.html(GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions({statusCategories:e.options.statusCategories,selectedStatusCategoryId:e.options.selectedStatusCategoryId}))}function s(e){var t=require("jira/ajs/select/single-select");e.statusCategoryPicker=t.extend({_hasIcon:function(){return!0},setSelection:function(e){t.fn.setSelection.call(this,e),this.$container.find(".fake-ss-icon").remove(),this.$container.append(r(e).css({position:"absolute",left:"6px",top:"50%",marginTop:"-8px",boxSizing:"border-box"}).addClass("fake-ss-icon aui-ss-entity-icon"))},setSelectionByValue:function(e){var t=_.find(this.suggestionsHandler.model.getAllDescriptors(),function(t){return t.properties.value==e});t&&this.setSelection(t)},disableWithValue:function(e){this.setSelectionByValue(e),this.disable()},enableWithValueIfDisabled:function(e){this.disabled&&(this.enable(),this.setSelectionByValue(e))}}),e.statusCategoryPicker.fn._renders.entityIcon=function(e){return AJS.$()}}function r(e){var t=_.omit(AJS.$.extend({},e.model().data()),"descriptor"),s=AJS.$(JIRA.Template.Util.Issue.Status.issueStatus({issueStatus:{name:e.label(),statusCategory:t},isCompact:!0}));return s.removeClass("jira-issue-status-lozenge-tooltip").removeAttr("title").removeAttr("data-tooltip"),s}function i(e){var t=new e.statusCategoryPicker(e.options),s=t.listController._renders.suggestion;return t.listController._renders.suggestion=function(e){var t=s.apply(this,arguments);return t.find("a").prepend("&nbsp;").prepend(r(e)),t},t}var n=4,a={width:250,itemAttrDisplayed:"label",errorMessage:"",removeOnUnSelect:!1,statusCategories:[],selectedStatusCategoryId:n};return{build:e,defaultStatusCategoryId:n}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/StatusCategoryPicker.soy' */
// This file was automatically generated from StatusCategoryPicker.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.component.statuscategorypicker.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.component == 'undefined') { GH.tpl.component = {}; }
if (typeof GH.tpl.component.statuscategorypicker == 'undefined') { GH.tpl.component.statuscategorypicker = {}; }


GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions = function(opt_data, opt_ignored) {
  var output = '';
  var statusCategoryList3 = opt_data.statusCategories;
  var statusCategoryListLen3 = statusCategoryList3.length;
  for (var statusCategoryIndex3 = 0; statusCategoryIndex3 < statusCategoryListLen3; statusCategoryIndex3++) {
    var statusCategoryData3 = statusCategoryList3[statusCategoryIndex3];
    output += '<option value="' + soy.$$escapeHtml(statusCategoryData3.id) + '" data-self="' + soy.$$escapeHtml(statusCategoryData3.self) + '" data-id="' + soy.$$escapeHtml(statusCategoryData3.id) + '" data-key="' + soy.$$escapeHtml(statusCategoryData3.key) + '" data-color-name="' + soy.$$escapeHtml(statusCategoryData3.colorName) + '"' + ((opt_data.selectedStatusCategoryId == statusCategoryData3.id) ? 'selected="selected"' : '') + '>' + soy.$$escapeHtml(statusCategoryData3.name) + '</option>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions.soyTemplateName = 'GH.tpl.component.statuscategorypicker.renderStatusCategoryPickerOptions';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/detail/DetailsViewScrollTracker.js' */
define("jira-agile/rapid/ui/detail/details-view-scroll-tracker",["underscore","jquery","require","jira/util/data/meta"],function(e,i,n,t){"use strict";function a(n){w=i("#js-detail-nav-content"),T=i(".ghx-detail-nav-menu"),D=e.isFunction(n.onSelectedNavChanged)?n.onSelectedNavChanged:function(){},j.init({beforeScroll:f,afterScroll:s}),b=!0,s(),T.delegate("a",{"click.scrollTracking":c}),i(document).on("click",'.aui-message-success a[href="'+t.get("viewissue-permlink")+'"]',function(e){e.preventDefault(),o("attachmentmodule",!0)})}function r(e){e.issueId!==y||V?(o(h()),V=!1):I>=0&&u(I),y=e.issueId}function l(e){k(e),V=!0}function c(e){e.preventDefault();var i=this.hash.replace("#","");o(i,!0),v("go.to.section",{sectionId:i})}function o(e,n){var t=i("#"+e);t.length>0&&(g(e),I=j.scrollToSection(e,n))}function u(e){j.scrollTo(e);var i=j.getCurrentSection();i&&g(i)}function s(){w.bind({"scroll.scrollTracking":function(){b=!0}}),C=setInterval(function(){d()},40)}function d(){if(b){b=!1,I=j.getScrollPosition();var e=j.getCurrentSection();e&&g(e)}}function f(){clearInterval(C),w.unbind("scroll.scrollTracking")}function g(e){D(e),k(e)}function v(e,i){AJS.trigger("analytics",{name:p+"."+e,data:i})}function h(){return S.get("gh.detailViewWork")||null}function k(e){S.put("gh.detailViewWork",e)}var S,p="gh.issueaction.issuedetail",m=n("jira-agile/rapid/global-events"),j=n("jira-agile/rapid/ui/detail/details-view-scroll-tracker/scroller");m.on("pre-initialization",function(){S=GH.storage});var w,T,b,C,I,y,D,V,q={init:a,afterDetailsViewLoaded:r,setSelectedTab:l,_testing_only:{navMenuClick:c}};return q});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/detail/DetailsViewScroller.js' */
define("jira-agile/rapid/ui/detail/details-view-scroll-tracker/scroller",["jquery"],function(t){"use strict";var i,o,e,n={};return n.init=function(n){o=n.beforeScroll,e=n.afterScroll,i=t("#js-detail-nav-content")},n.scrollToSection=function(i,o){var e=t("#"+i);return this.scrollTo(this.getScrollPosition()+e.position().top,o)},n.scrollTo=function(t,n){return o(),i.animate({scrollTop:t},n?"fast":0,function(){setTimeout(e,0)}),t},n.getScrollPosition=function(){return i.scrollTop()},n.getCurrentSection=function(){var t,o=i.find(".ghx-detail-section").not(".ghx-hidden-tab");if(i.length>0&&i[0].scrollHeight-this.getScrollPosition()===i.height())t=o[o.length-1];else for(var e=0;e<o.length;e++){var n=o.eq(e);if(n.position().top+n.height()>0){t=n[0];break}}return t?t.id:null},n});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkSelectionController.js' */
GH.WorkSelectionController={},GH.WorkSelectionController.OPT_NO_SCROLL={scrollToView:!1},GH.WorkSelectionController.selectionDataModel={},GH.WorkSelectionController.selectionManager=void 0,GH.WorkSelectionController.init=function(){GH.WorkSelectionController.initSelectionManager(),AJS.$(document).delegate("#ghx-pool .js-issue","click",GH.WorkSelectionController.handleIssueClick),AJS.$(document).delegate("#ghx-pool .js-issue","focus",GH.WorkSelectionController.handleFocus),AJS.$(document).delegate("#ghx-pool .js-issue","contextmenu",GH.WorkSelectionController.handleIssueContextMenu),AJS.$(document).delegate(".ghx-swimlane-header","click",GH.WorkSelectionController.handleSwimlaneClick),AJS.$(document).delegate(".ghx-swimlane-header","focus",GH.WorkSelectionController.handleFocus),AJS.$(document).delegate(".ghx-swimlane-header","contextmenu",GH.WorkSelectionController.handleSwimlaneContextMenu),AJS.$(document).delegate("#ghx-pool .js-issue a.ghx-key","mousedown",GH.WorkSelectionController.handleIssueLinkMiddleClick)},GH.WorkSelectionController.initSelectionManager=function(){GH.WorkSelectionController.selectionDataModel={isIssueValid:function(e){return GH.GridDataController.getModel().isIssueValid(e)},getIssueIndex:function(e){return GH.GridDataController.getModel().getIssueIndexByKey(e)},canAddToSelection:function(e,o){return GH.WorkSelectionController.canAddToSelection(e,o)},getIssueRange:function(e,o){return GH.RankingModel.getRankableIssuesRange(e,o)}},GH.WorkSelectionController.selectionManager=new GH.IssueSelectionManager(GH.WorkSelectionController.selectionDataModel,"work.selectedIssues")},GH.WorkSelectionController.validateCurrentSelection=function(){var e=GH.WorkSelectionController.selectionManager.validateCurrentSelection();e&&(!GH.WorkSelectionController.selectionManager.hasSelection()&&GH.WorkController.isDetailsViewOpened()&&GH.RapidBoard.State.setWorkViewDetailsViewOpened(!1),GH.RapidBoard.State.replaceState(),GH.WorkSelectionController.updateUIAndState())},GH.WorkSelectionController.gotoIssue=function(e){if(e){var o=GH.WorkSelectionController.getSelectedIssueKey();if(e!==o)GH.WorkSelectionController.selectIssue(e);else{var t=AJS.$(".ghx-columns").find('.js-issue[data-issue-key="'+e+'"]');0===t.length&&(t=AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e+"']")),0!==t.length&&GH.WorkSelectionController._scrollToView(t)}}},GH.WorkSelectionController.focusOnIssue=function(e){var o=AJS.$(".ghx-columns").find('.js-issue[data-issue-key="'+e+'"]');0===o.length&&(o=AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e+"']")),0!==o.length&&o.focus()},GH.WorkSelectionController.selectIssue=function(e,o){var t={pushState:!0,scrollToView:!0};o=_.extend(t,o),GH.WorkSelectionController.selectionManager.selectIssue(e),o.pushState&&GH.RapidBoard.State.pushState(),o.dontUpdateUI||GH.WorkSelectionController._updateSelectionUI(o.scrollToView?e:null)},GH.WorkSelectionController.handleSwimlaneClick=function(e){if(!AJS.$(e.target).parents().andSelf().is(".js-expander")){var o=GH.WorkSelectionController.getIssueKey(AJS.$(this));if(o)GH.WorkSelectionController.handleIssueClick.call(this,e);else{var t=parseInt(AJS.$(this).attr("data-swimlane-id"),10),l=GH.GridDataController.getModel(),n=l.getSwimlaneById(t),r=l.getColumns();_.find(r,function(e){return o=l.getIssueKeyForColumnAtIndex(n.id,e.id,0),!!o}),o&&GH.WorkSelectionController.selectIssue(o)}}},GH.WorkSelectionController.handleIssueClick=function(e){var o=GH.WorkSelectionController.getIssueKey(AJS.$(this)),t=AJS.$(e.target).hasClass("js-key-link"),l=!GH.MouseUtils.openInSameTab(e);return!(!t||!l)||(e.preventDefault(),void GH.WorkSelectionController.handleIssueSelectionEvent(e,o,!0))},GH.WorkSelectionController.handleIssueLinkMiddleClick=function(e){var o=e&&(2===e.which||4===e.button);if(o){var t=GH.WorkSelectionController.getIssueId($(this));AJS.trigger("analytics",{name:"jira-software.work.issuecard.open.full.issue",data:{issueId:t}})}},GH.WorkSelectionController.handleSwimlaneContextMenu=function(e){var o=AJS.$(e.target).closest(".ghx-swimlane-header").attr("data-issue-key");if(o){var t=GH.WorkSelectionController.isInSelection(o);t||GH.WorkSelectionController.handleSwimlaneClick.call(this,e),GH.WorkContextMenuController.showContextMenuAt(e,{swimlane:!0})}},GH.WorkSelectionController.handleIssueContextMenu=function(e){var o=GH.WorkSelectionController.getIssueKey(AJS.$(this)),t=GH.WorkSelectionController.isInSelection(o);t||GH.WorkSelectionController.selectIssue(o),GH.WorkContextMenuController.showContextMenuAt(e,{})},GH.WorkSelectionController.handleIssueSelectionEvent=function(e,o,t){var l=GH.MouseUtils.getMetaKeys(e),n=GH.WorkSelectionController.selectionManager.handleIssueClick(l,o),r=GH.IssueSelectionManager.getMultiSelectType(l);if(r&&(t=!1),n){var i=void 0,s=require("jira/featureflags/feature-manager");i=s.isFeatureEnabled("cbb.heritage")?GH.DetailsViewOpts.isUsingBentoSidebarOnBoard:GH.DetailsView.opts.isUsingBentoSidebarOnBoard,GH.WorkSelectionController._updateSelectionUI(o),GH.WorkController.trigger("before:openDetailView"),!GH.RapidBoard.State.isNewIssueViewEnabled()||i?GH.WorkSelectionController.handleIssueSelectionForSidebarOrADV(t,o):GH.WorkSelectionController.handleIssueSelectionForModal(t)}},GH.WorkSelectionController.handleIssueSelectionForSidebarOrADV=function(e,o){var t=require("jira-agile/rapid/ui/bento/bento-features");e&&!GH.WorkController.isDetailsViewOpened()&&GH.WorkSelectionController.selectionManager.hasSelection()?GH.WorkController.openDetailsView(o):GH.RapidBoard.State.replaceState(),e&&t.isUsingBentoSidebarOnBoard()&&AJS.trigger("analyticsEvent",{name:"jira-software.work.issuecard.open",data:{viewMode:"sidebar"}})},GH.WorkSelectionController.handleIssueSelectionForModal=function(e){var o=require("jira-agile/rapid/ui/bento/bento-features");e&&GH.RapidBoard.State.setWorkIssueModalOpened(!0),GH.RapidBoard.State.replaceState(),e&&(GH.WorkView.displayIssueModal({skipStateUpdate:!0}),o.isBentoSidebarOnBoardEnabled()&&AJS.trigger("analyticsEvent",{name:"jira-software.work.issuecard.open",data:{viewMode:o.isUsingBentoModalOnBoard()?"modal":"default"}}))},GH.WorkSelectionController.handleFocus=function(e){var o=GH.WorkSelectionController.getIssueKey(AJS.$(this)),t=GH.WorkSelectionController.isInSelection(o);t||GH.WorkSelectionController.handleIssueSelectionEvent(e,o,!1)},GH.WorkSelectionController.updateUIAndState=function(){GH.WorkSelectionController._updateSelectionUI(),GH.RapidBoard.State.pushState()},GH.WorkSelectionController._updateSelectionUI=function(e){var o=null;AJS.$(".js-issue, .ghx-swimlane-header, #ghx-swimname").removeClass("ghx-selected ghx-selected-primary").each(function(t,n){var r=AJS.$(n),i=r.attr("data-issue-key");i&&(GH.WorkSelectionController.isInSelection(i)&&(r.addClass("ghx-selected"),i===l&&r.addClass("ghx-selected-primary")),null!==e&&i===e&&(o=r))}),o&&!o.hasClass("ghx-swimlane-header")&&GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(e),o&&GH.WorkSelectionController._scrollToView(o);var t=GH.WorkSelectionController.getSelectedIssueKey(),l=GH.GridDataController.getModel().isIssueValid(t)?t:void 0;AJS.$(GH).trigger("issueSelected",l)},GH.WorkSelectionController._scrollToView=function(e){var o=AJS.$("#ghx-pool"),t=AJS.$("#ghx-column-header-group"),l=t[0].getBoundingClientRect(),n=o[0].getBoundingClientRect(),r=e[0].getBoundingClientRect();GH.ScrollUtils.scrollElementToViewPort(o,{top:l.bottom,bottom:n.bottom},r)},GH.WorkSelectionController.ensureIssueSelected=function(e,o){GH.WorkSelectionController.selectionManager.isInSelection(o)||(GH.WorkSelectionController.canAddToSelection(GH.WorkSelectionController.getSelectedIssueKeys(),o)?GH.WorkSelectionController.handleIssueSelectionEvent(e,o):GH.WorkSelectionController.selectIssue(o,GH.WorkSelectionController.OPT_NO_SCROLL))},GH.WorkSelectionController.getSelectedIssueKeys=function(){return GH.WorkSelectionController.selectionManager.getSelectedIssueKeys()},GH.WorkSelectionController.getSelectedIssueKey=function(){return GH.WorkSelectionController.selectionManager.getSelectedIssueKey()},GH.WorkSelectionController.isInSelection=function(e){return GH.WorkSelectionController.selectionManager.isInSelection(e)},GH.WorkSelectionController.setIssueFromUrlState=function(e){GH.WorkSelectionController.selectionManager.selectIssue(e)},GH.WorkSelectionController.getSelectedIssuesInOrder=function(){return GH.WorkSelectionController.selectionManager.getSelectedIssuesInOrder()},GH.WorkSelectionController.canAddToSelection=function(e,o){if(_.isEmpty(e))return!0;var t=_.first(e);return GH.RankingModel.canIssuesBeRankedTogether(t,o)},GH.WorkSelectionController.getIssueId=function(e){return e.closest(".js-issue, .ghx-issue-filtered, .ghx-parent-group, .ghx-swimlane-header").attr("data-issue-id")},GH.WorkSelectionController.getIssueKey=function(e){return e.closest(".js-issue, .ghx-issue-filtered, .ghx-parent-group, .ghx-swimlane-header").attr("data-issue-key")};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/GridDataController.js' */
GH.GridDataController={},GH.GridDataController.model=void 0,GH.GridDataController.modelPromise=new Promise(function(e){var a=!1;GH.GridDataController.resolveModelPromise=function(){a||(a=!0,e())}}),GH.GridDataController.swimlaneStrategy="custom",GH.GridDataController.statistics={},GH.GridDataController.canRelease=!1,GH.GridDataController.hasDataChanged=function(e){var a=GH.GridDataController.calculateGridDataModel(e);return!GH.GridDataController.model||GH.GridDataController.model.isModelDifferent(a)},GH.GridDataController.setData=function(e){GH.GridDataController.statistics=e.statistics,GH.GridDataController.canRelease=e.issuesData.canRelease,GH.RankingModel.setOrderData(e.orderData),GH.GridDataController.hasBulkChangePermission=e.issuesData.hasBulkChangePermission;var a=require("jira-agile/browser-metrics/browser-metrics-util");a.performanceMark("before:calculateGridModel");var t=GH.GridDataController.calculateGridDataModel(e);a.performanceMark("after:calculateGridModel"),GH.GridDataController.model=t,GH.GridDataController.resolveModelPromise()},GH.GridDataController.calculateGridDataModel=function(e){var a=GH.GridSwimlanesData.calculateSwimlanesData(e.issuesData,e.swimlanesData),t=[],r={},l=e.issuesData.isIssueLimitExceeded;_.each(e.issuesData.issues,function(e){t.push(e.key),r[e.key]=e}),_.each(e.issuesData.missingParents,function(e){r[e.key]=e});var o=GH.GridColumnsData.calculateColumnsData(e.issuesData,e.columnsData,e.statistics),i=o.columns,n=o.columnIssueMapping,s={};s.anyColumnBusted=o.anyColumnBusted;var d=[],G={};return _.each(a.swimlanes,function(e){G[e.id]=e.issueKeys.filter(function(e){return r[e]&&!r[e].hidden}),delete e.issueKeys,d.push(e)}),s.swimlanesType=a.type,new GH.GridDataModel(i,n,d,G,r,t,s,e.swimlanesData.swimlaneStrategy,l)},GH.GridDataController.getStatistics=function(){return GH.GridDataController.statistics},GH.GridDataController.getModel=function(){return GH.GridDataController.model},GH.GridDataController.getModelPromise=function(){return GH.GridDataController.modelPromise.then(function(){return GH.GridDataController.model})},GH.GridDataController.hasBustedColumns=function(){return GH.GridDataController.model.data.variables.anyColumnBusted},GH.GridDataController.getSwimlanesType=function(){return GH.GridDataController.model.data.variables.swimlanesType},GH.GridDataController.isIssueLimitExceeded=function(){return!(!GH.GridDataController.getModel()||!GH.GridDataController.getModel().data)&&GH.GridDataController.getModel().data.isIssueLimitExceeded},GH.GridDataController.collectPrintableIssues=function(){var e=GH.GridDataController.getModel(),a=[];return _.each(e.getSwimlanes(),function(t){_.each(e.getColumns(),function(r){var l=e.getCells()[t.id][r.id];l&&a.push.apply(a,l)})}),_.map(a,function(a){return e.getIssues()[a]})};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/RankingModel.js' */
GH.RankingModel={},GH.RankingModel.orderData={rankable:!1,rankCustomFieldId:void 0},GH.RankingModel.setOrderData=function(e){GH.RankingModel.orderData=e},GH.RankingModel.isRankable=function(){return GH.RankingModel.orderData.rankable},GH.RankingModel.canUserRank=function(){if(!GH.RankingModel.orderData.rankable)return!1;var e=!1;return _.each(GH.RankingModel.orderData.canRankPerProject,function(n){e=e||n.canRank}),e},GH.RankingModel.canUserRankIssue=function(e){if(!GH.RankingModel.isRankable())return!1;var n=e.substr(0,e.indexOf("-")),a=!1;return _.each(GH.RankingModel.orderData.canRankPerProject,function(e){e.projectKey==n&&(a=e.canRank)}),a},GH.RankingModel.getRankCustomFieldId=function(){return GH.RankingModel.isRankable()?GH.RankingModel.orderData.rankCustomFieldId:null},GH.RankingModel.isRankable=function(){return GH.RankingModel.orderData.rankable},GH.RankingModel.getFirstRankableIssueKeyInColumn=function(e){var n=GH.GridDataController.getModel(),a=n._getIssuePositionAndDataByKey(e);if(a.isSwimlane)return!1;var t=n.getIssuesDataForCell(a.swimlaneId,a.columnId),r=!!a.issue.parentKey,i=_.find(t,function(n){return!r||GH.RankingModel.canIssuesBeRankedTogether(n.key,e)});return!!i&&(r?i.key:i.parentKey?i.parentKey:i.key)},GH.RankingModel.getLastRankableIssueKeyInColumn=function(e){var n=GH.GridDataController.getModel(),a=n._getIssuePositionAndDataByKey(e);if(a.isSwimlane)return!1;var t=n.getIssuesDataForCell(a.swimlaneId,a.columnId),r=!!a.issue.parentKey,i=!1;return _.each(t,function(n){r?GH.RankingModel.canIssuesBeRankedTogether(n.key,e)&&(i=n.key):i=n.parentKey?n.parentKey:n.key}),i},GH.RankingModel.canIssuesBeRankedTogether=function(e,n){var a=GH.GridDataController.getModel(),t=a._getIssuePositionAndDataByKey(e),r=a._getIssuePositionAndDataByKey(n);return!(!t||!r)&&(!t.isSwimlane&&!r.isSwimlane&&(t.swimlaneId==r.swimlaneId&&(t.columnId==r.columnId&&(!t.issue.parentKey&&!r.issue.parentKey||t.issue.parentKey==r.issue.parentKey))))},GH.RankingModel.getRankableIssuesRange=function(e,n){if(!GH.RankingModel.canIssuesBeRankedTogether(e,n))return[];var a=GH.GridDataController.getModel();if(e==n)return[e];var t=a._getIssuePositionAndDataByKey(e),r=a._getIssuePositionAndDataByKey(n);if(t.isSwimlane||r.isSwimlane)return[];var i=[];i.push(e);var o,s,u=a.getIssuesDataForCell(t.swimlaneId,t.columnId),l=t.issueIndex,d=r.issueIndex;if(d>l)for(o=l+1;o<=d;o++)s=u[o],GH.RankingModel.canIssuesBeRankedTogether(e,s.key)&&i.push(s.key);else for(o=l-1;o>=d;o--)s=u[o],GH.RankingModel.canIssuesBeRankedTogether(e,s.key)&&i.push(s.key);return i},GH.RankingModel.getBestFitSelectionAfterRank=function(e){var n=GH.RankingModel.getNextIssueAfterSendToBottom(e);return n||(n=GH.RankingModel.getPreviousIssueAfterSendToBottom(e)),n},GH.RankingModel.getNextIssueAfterSendToBottom=function(e){var n=_.last(e),a=GH.GridDataController.getModel(),t=a.getNextIssueKey(n);if(!t)return!1;var r=a.getIssueDataByKey(n),i=a.getIssueDataByKey(t);if(r.parentKey)return t;for(;i.parentKey&&i.parentKey==n;){if(t=a.getNextIssueKey(t),!t)return!1;i=a.getIssueDataByKey(t)}return t},GH.RankingModel.getPreviousIssueAfterSendToBottom=function(e){var n=_.first(e),a=GH.GridDataController.getModel(),t=a.getPreviousIssueKey(n);if(!t)return!1;var r=a.getIssueDataByKey(n),i=a.getIssueDataByKey(t);if(r.parentKey)return t;for(;i.parentKey;){if(t=a.getPreviousIssueKey(t),!t)return!1;i=a.getIssueDataByKey(t)}return t},GH.RankingModel.reorderIssues=function(e,n,a){var t=GH.GridDataController.getModel();e=GH.RankingModel.getParentAndChildrenKeys(e);var r,i=t.getOrder();if(a)r=_.indexOf(i,a);else if(r=_.indexOf(i,n),r++,GH.RankingModel.isRankable())for(;r<i.length;){var o=t.getIssueDataByKey(i[r]);if(!o||o.parentKey!==n)break;r++}var s=i.slice(0,r),u=i.slice(r);s=GH.RankingModel.withoutArray(s,e),u=GH.RankingModel.withoutArray(u,e);var l=_.flatten([s,e,u]);t.updateOrder(l)},GH.RankingModel.getParentAndChildrenKeys=function(e){var n=GH.GridDataController.getModel(),a=n.getOrder(),t=[];return _.each(e,function(e){t.push(e);var r=n.getIssueDataByKey(e);if(r&&!r.parentKey){var i=_.indexOf(a,e);if(!(i<0))for(var o=i+1;o<a.length;o++){var s=n.getIssueDataByKey(a[o]);if(s.parentKey!=r.key)break;t.push(s.key)}}}),t},GH.RankingModel.withoutArray=function(e,n){var a=e;return _.each(n,function(e){a=_.without(a,e)}),a};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/GridDataModel.js' */
!function(){function e(e,i){var n=Object.keys(e),s=Object.keys(i);if(!t.isEqual(n,s))return!1;var a=n.some(function(n){return!t.isEqual(e[n].slice(0).sort(),i[n].slice(0).sort())});return!a}var t=require("underscore"),i=require("jira-agile/rapid/ui/component/extra-fields/ExtraFieldsHelper"),n=require("jira-agile/browser-metrics/browser-metrics-util");GH.GridDataModel=function(e,t,i,n,s,a,r,o,u){var d=this.data={};d.columns=e,d.columnIssueMapping=t,d.swimlanes=i,d.swimlaneIssueMapping=n,d.issues=s,d.order=a,d.variables=r,d.swimlaneStrategy=o,d.isIssueLimitExceeded=u,this.buildCache(),this.preprocessIssues()},GH.GridDataModel.prototype.isModelDifferent=function(i){return!t.isEqual(this.data.order,i.data.order)||(!t.isEqual(this.data.issues,i.data.issues)||(!t.isEqual(this.data.swimlaneIssueMapping,i.data.swimlaneIssueMapping)||!e(this.data.columnIssueMapping,i.data.columnIssueMapping)))},GH.GridDataModel.prototype.buildCache=function(){n.performanceMark("before:swimlaneModelCache");var e=this.data,i=this.cache={};i.bySwimlaneThenColumn=[];var s=this;t.each(e.swimlanes,function(n){var a=e.swimlaneIssueMapping[n.id];i.bySwimlaneThenColumn[n.id]=[],t.each(e.columns,function(t){var r=e.columnIssueMapping[t.id],o=s.fastIntersect(r,a);o=s.fastIntersect(e.order,o),i.bySwimlaneThenColumn[n.id][t.id]=o})}),n.performanceMark("after:swimlaneModelCache")},GH.GridDataModel.prototype.fastIntersect=function(e,t){for(var i=e.length,n=t.length,s=e.slice(0).sort(),a=t.slice(0).sort(),r=[],o=0,u=0;o<i&&u<n;){var d=s[o],l=a.indexOf(d,u);l>-1&&(r.push(d),u=l+1),o++}for(var p=[],m=0;m<i;m++)r.indexOf(e[m])>-1&&p.push(e[m]);return p},GH.GridDataModel.prototype.preprocessIssues=function(){var e=this;t.each(this.data.issues,function(t){e.preprocessIssue(t)})},GH.GridDataModel.prototype.preprocessIssue=function(e){this.computeTimeInColumnForIssue(e),i.prepareExtraFields(e.extraFields)},GH.GridDataModel.prototype.computeTimeInColumnForIssue=function(e){var t=864e5;e.timeInColumn&&(e.timeInColumn.days=Math.floor((e.timeInColumn.cumulativeDurationInColumn+(new Date).getTime()-e.timeInColumn.enteredCurrentStatusTime)/t))},GH.GridDataModel.prototype.updateIssueData=function(e){this.preprocessIssue(e),this.data.issues[e.key]=e},GH.GridDataModel.prototype.updateOrder=function(e){this.data.order=e,this.buildCache()},GH.GridDataModel.prototype.getGroupData=function(){var e=[],i=this;t.each(i.data.swimlanes,function(n){t.each(i.data.columns,function(t){e.push(i.getIssuesDataForCell(n.id,t.id))})});var n=GH.IssueListUtil.calculateGroupData(e);return n.drawFakeParents=!this.isParentChildStrategy(),n},GH.GridDataModel.prototype.getIssuesDataForCell=function(e,t){var i=this.cache.bySwimlaneThenColumn[e];if(!i)return!1;var n=i[t];return!!n&&this.getIssueDataByKeys(n)},GH.GridDataModel.prototype.getIssuesDataForColumn=function(e){var t=this.data.columnIssueMapping[e];return!!t&&this.getIssueDataByKeys(t)},GH.GridDataModel.prototype.getIssueDataByKeys=function(e){var i=[],n=this.data.issues;return t.each(e,function(e){var t=n[e];t&&i.push(t)}),i},GH.GridDataModel.prototype.getCells=function(){return this.cache.bySwimlaneThenColumn},GH.GridDataModel.prototype.getIssues=function(){return this.data.issues},GH.GridDataModel.prototype.getColumns=function(){return this.data.columns},GH.GridDataModel.prototype.getSwimlanes=function(){return this.data.swimlanes},GH.GridDataModel.prototype.getOrder=function(){return this.data.order},GH.GridDataModel.prototype.getSwimlaneById=function(e){return t.find(this.data.swimlanes,function(t){return t.id==e})},GH.GridDataModel.prototype.getColumnById=function(e){return t.find(this.data.columns,function(t){return t.id==e})},GH.GridDataModel.prototype.getFirstColumn=function(){return t.first(this.data.columns)},GH.GridDataModel.prototype.getDoneColumn=function(){return t.last(this.data.columns)},GH.GridDataModel.prototype.getSwimlaneIdByIssueKey=function(e){var i=!1;return t.each(this.data.swimlaneIssueMapping,function(n,s){t.indexOf(n,e)>-1&&(i=parseInt(s,10))}),i},GH.GridDataModel.prototype.getColumnIdByIssueKey=function(e){var i=!1;return t.each(this.data.columnIssueMapping,function(n,s){t.indexOf(n,e)>-1&&(i=parseInt(s,10))}),i},GH.GridDataModel.prototype.getIssueDataByKey=function(e){return this.data.issues[e]},GH.GridDataModel.prototype.getIssueDataById=function(e){return t.findWhere(this.data.issues,{id:e})},GH.GridDataModel.prototype.getIssueIdForKey=function(e){var t=this.getIssueDataByKey(e);return!!t&&t.id},GH.GridDataModel.prototype.isIssueValid=function(e){var t=this.data.issues[e];return!!t&&!t.hidden},GH.GridDataModel.prototype.hasSwimlanes=function(){var e=this,i=e.isParentChildStrategy();return t.any(e.getSwimlanes(),function(t){return(i||e.getSwimlaneIssueCount(t.id)>0)&&!t.defaultSwimlane})},GH.GridDataModel.prototype.getSwimlaneIssueCount=function(e){return this.data.swimlaneIssueMapping[e].length},GH.GridDataModel.prototype.getColumnIssueCount=function(e){return this.data.columnIssueMapping[e].length},GH.GridDataModel.prototype.isParentChildStrategy=function(){return"parentChild"==this.data.variables.swimlanesType},GH.GridDataModel.prototype.getParentSwimlaneByIssueKey=function(e){return!!this.isParentChildStrategy()&&(t.find(this.data.swimlanes,function(t){if(t.parentKey==e)return!0})||!1)},GH.GridDataModel.prototype._getIssuePositionAndDataByKey=function(e){var i=this.data.issues[e];if(!i)return!1;var n=!1;if(this.isParentChildStrategy()&&t.each(this.data.swimlanes,function(t){t.parentKey==e&&(n=t)}),n)return{isSwimlane:!0,swimlaneId:n.id,columnId:t.first(this.getColumns()).id,issueIndex:-1,issue:i};var s=this.getSwimlaneIdByIssueKey(e);if(!s)return!1;var a=this.getColumnIdByIssueKey(e),r=-1;if(s&&a){var o=this.cache.bySwimlaneThenColumn[s][a];r=t.indexOf(o,e)}return{swimlaneId:s,columnId:a,issueIndex:r,issue:i}},GH.GridDataModel.prototype.getIssueIndexByKey=function(e){var t=this._getIssuePositionAndDataByKey(e);return!!t&&t.issueIndex},GH.GridDataModel.prototype.getNextIssueKey=function(e,i){var n=this._getIssuePositionAndDataByKey(e);if(!n)return!1;i&&(n.columnId=i);var s=this,a=s.getCells(),r=!1,o=!1;return t.find(s.getSwimlanes(),function(e){var t;if(e.id==n.swimlaneId)r=!0,t=n.issueIndex+1;else{if(!r)return!1;if(e.parentKey)return o=e.parentKey,!0;t=0}var i=s.hasSwimlanes();return(!i||!GH.RapidBoard.State.isSwimlaneCollapsed(e.id))&&(o=a[e.id][n.columnId][t],!!o)}),o||!1},GH.GridDataModel.prototype.getPreviousIssueKey=function(e,i){var n=this._getIssuePositionAndDataByKey(e);if(!n)return!1;i&&(n.columnId=i);var s=this,a=s.getCells(),r=!1,o=!1,u=s.getSwimlanes().slice(0).reverse();return t.find(u,function(i){if(i.id!=n.swimlaneId&&!r)return!1;if(r=!0,i.id==n.swimlaneId)return i.parentKey!=e&&(0==n.issueIndex&&i.parentKey?(o=i.parentKey,!0):(o=a[i.id][n.columnId][n.issueIndex-1],!!o));var u=s.hasSwimlanes()&&GH.RapidBoard.State.isSwimlaneCollapsed(i.id);return!u&&a[i.id][n.columnId].length>0?(o=t.last(a[i.id][n.columnId]),!!o):!!i.parentKey&&(o=i.parentKey,!0)}),o||!1},GH.GridDataModel.prototype.getIssueKeyForColumnAtIndex=function(e,i,n){var s=this.cache.bySwimlaneThenColumn[e][i];return!t.isEmpty(s)&&(n<0?s[0]:n>=s.length?t.last(s):s[n])},GH.GridDataModel.prototype.getFirstIssueKey=function(){var e=this.getSwimlanes(),i=this.getColumns(),n=this.getCells(),s=this.hasSwimlanes(),a=!1;return t.find(i,function(i){return t.find(e,function(e){if(s&&GH.RapidBoard.State.isSwimlaneCollapsed(e.id))return!1;var r=n[e.id][i.id];return!t.isEmpty(r)&&(a=t.first(r),!0)}),a}),a},GH.GridDataModel.prototype.getLastIssueKey=function(){var e=this.getSwimlanes().slice().reverse(),i=this.getColumns(),n=this.getCells(),s=this.hasSwimlanes(),a=!1;return t.find(i,function(i){return t.find(e,function(e){if(s&&GH.RapidBoard.State.isSwimlaneCollapsed(e.id))return!1;var r=n[e.id][i.id];return!t.isEmpty(r)&&(a=t.last(r),!0)}),a}),a},GH.GridDataModel.prototype.getIssueKeyInPreviousColumn=function(e,t){var i=this._getIssuePositionAndDataByKey(e);if(!i)return!1;if(i.isSwimlane)return!1;for(var n=this._getPreviousColumn(i.columnId);n;){var s=this.getIssueKeyForColumnAtIndex(i.swimlaneId,n.id,t);if(s)return s;n=this._getPreviousColumn(n.id)}return!1},GH.GridDataModel.prototype._getPreviousColumn=function(e){for(var t=this.getColumns(),i=t.length-1;i>0;i--)if(t[i].id==e)return t[i-1];return!1},GH.GridDataModel.prototype.getIssueKeyInNextColumn=function(e,t){var i=this._getIssuePositionAndDataByKey(e);if(!i)return!1;if(i.isSwimlane)return!1;for(var n=this._getNextColumn(i.columnId);n;){var s=this.getIssueKeyForColumnAtIndex(i.swimlaneId,n.id,t);if(s)return s;n=this._getNextColumn(n.id)}return!1},GH.GridDataModel.prototype._getNextColumn=function(e){for(var t=this.getColumns(),i=0;i<t.length-1;i++)if(t[i].id==e)return t[i+1];return!1},GH.GridDataModel.prototype.getIssuePositionByKey=function(e){var t=this._getIssuePositionAndDataByKey(e);if(t)return{swimlaneId:t.swimlaneId,columnId:t.columnId,position:t.issueIndex}},GH.GridDataModel.prototype.getIssueKeyAtPosition=function(e){if(e&&void 0!==e.swimlaneId&&void 0!==e.columnId&&void 0!==e.position){for(var i,n,s,a,r=this.getSwimlanes(),o=0,u=r.length;o<u;o++)if(r[o].id==e.swimlaneId){i=r[o],o+1<u&&(a=r[o+1]);break}if(i&&(n=this.getColumnById(e.columnId))){var d=this.cache.bySwimlaneThenColumn[e.swimlaneId][e.columnId];return s=d[e.position],s?s:a?this.getIssueKeyAtPosition({swimlaneId:a.id,columnId:e.columnId,position:0}):t.last(d)}}},GH.GridDataModel.prototype.moveIssueToColumn=function(e,t,i){this.moveIssuesToColumn([e],t,i)},GH.GridDataModel.prototype.moveIssuesToColumn=function(e,i,n){var s=this,a=this.data.columnIssueMapping;if(!a[i]||!a[n])return!1;var r=0;if(e.forEach(function(e){a[i]=t.without(a[i],e),a[n].push(e);var o=s.getIssueDataByKey(e);r+=GH.GridColumnsData.getIssueStatsValue(o)}),r>0){var o=this.getColumnById(i),u=this.getColumnById(n);o.stats.visible-=r,u.stats.visible+=r,this.data.variables.anyColumnBusted=GH.GridColumnsData.computeBusted(this.getColumns())}this.buildCache()},GH.GridDataModel.prototype.removeEpicFromIssues=function(e){var i=[],n=this.getIssueDataByKeys(e);return t.each(n,function(e){e.epic&&(delete e.epic,i.push(e))}),i},GH.GridDataModel.prototype.getSwimlaneStrategy=function(){return this.data.swimlaneStrategy},GH.GridDataModel.prototype.getSubtasks=function(){return t.filter(this.data.issues,function(e){return!t.isUndefined(e.parentId)})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/GridSwimlanesData.js' */
GH.GridSwimlanesData={},GH.GridSwimlanesData.calculateSwimlanesData=function(e,a){var i=[];switch(a.swimlaneStrategy){case"parentChild":i=GH.GridSwimlanesData.calculateParentChildSwimlanes(e,a.parentSwimlanesData);break;case"assignee":i=GH.GridSwimlanesData.calculateAssigneeSwimlanes(e,!1);break;case"assigneeUnassignedFirst":i=GH.GridSwimlanesData.calculateAssigneeSwimlanes(e,!0);break;case"custom":i=GH.GridSwimlanesData.calculateCustomSwimlanes(e,a.customSwimlanesData);break;case"epic":i=GH.GridSwimlanesData.calculateEpicSwimlanes(e,a.epicSwimlanesData);break;case"project":i=GH.GridSwimlanesData.calculateProjectSwimlanes(e);break;case"none":default:i=GH.GridSwimlanesData.calculateNoneSwimlanes(e)}return{type:a.swimlaneStrategy,swimlanes:i,rapidViewId:a.rapidViewId}},GH.GridSwimlanesData.calculateCustomSwimlanes=function(e,a){var i=e.issues,n=a.swimlanes;return GH.GridSwimlanesData.calculateSwimlaneIssueKeys(i,n),n},GH.GridSwimlanesData.calculateSwimlaneIssueKeys=function(e,a){var i;_.each(a,function(a){a.issueKeys=[],_.isEmpty(a.issueIds)||(i||(i={},_.each(e,function(e){i[e.id]=e.key})),_.each(a.issueIds,function(e){a.issueKeys.push(i[e])}))})},GH.GridSwimlanesData.calculateParentChildSwimlanes=function(e,a){var i={},n=a.parentIssueIds,s=[],t={};e.issues.forEach(function(e){e.parentId&&!e.hidden?(s.push(e.parentId),t[e.parentId]||(t[e.parentId]=[]),t[e.parentId].push(e.key)):(e.hidden||s.push(e.id),i[e.id]=e)}),_.each(e.missingParents,function(e){i[e.id]=e}),s=_.uniq(s,!0);var r=_.intersection(s,n),u=1,c=[];_.each(r,function(e){var n=t[e]||[],s=i[e],r=_.contains(a.doneCandidates,e),l={id:u++,name:s.key,description:s.summary,defaultSwimlane:!1,parentKey:s.key,query:"",issueKeys:n,avatarUrl:s.typeUrl,parentOutOfSync:r};r&&GH.WorkController.analytics.trigger("movetodonebutton.shown"),c.push(l)});var l=_.filter(s,function(e){return!_.include(n,e)}),m=l.map(function(e){return i[e]}).filter(function(e){return e&&!e.hidden}).map(function(e){return e.key}),d={id:u++,name:"Other Issues",description:"",defaultSwimlane:!0,query:"",issueKeys:m};return c.push(d),c},GH.GridSwimlanesData.calculateAssigneeSwimlanes=function(e,a){var i={},n=[];_.each(e.issues,function(e){e.hidden||(e.assignee?(i[e.assignee]=i[e.assignee]||[],i[e.assignee].push(e)):n.push(e.key))});var s=1,t=[];if(_.each(i,function(e){var a=e[0].assigneeName,i={id:s++,name:a,lowercaseName:a.toLowerCase(),description:a,defaultSwimlane:!1,query:"",issueKeys:_.map(e,function(e){return e.key})};t.push(i)}),t.sort(GH.GridSwimlanesData.swimlaneNameComparator),!_.isEmpty(n)){var r={id:s++,name:"Unassigned",description:"",defaultSwimlane:!1,query:"",issueKeys:n};a?t.splice(0,0,r):t.push(r)}return t},GH.GridSwimlanesData.calculateEpicSwimlanes=function(e,a){var i={},n=[],s={},t=[];_.each(e.issues,function(e){e.hidden||(e.epic?(i[e.epic]=i[e.epic]||[],i[e.epic].push(e.key),s[e.key]=e.epic):e.parentKey?t.push(e):e.typeId!==GH.EpicConfig.getEpicIssueTypeId()&&n.push(e.key))}),_.each(t,function(e){var a=s[e.parentKey];a?i[a].push(e.key):n.push(e.key)});var r=[],u=1;if(_.each(a.epics,function(e){var n=GH.EpicConfig.getEpicNameString(a.epicNames[e],e),s={id:u++,name:n,lowercaseName:n.toLowerCase(),description:n,defaultSwimlane:!1,query:"",issueKeys:i[e]||[]};r.push(s)}),!_.isEmpty(n)){var c={id:u++,name:"Issues without epics",description:"",defaultSwimlane:!0,query:"",issueKeys:n};r.push(c)}return r},GH.GridSwimlanesData.calculateProjectSwimlanes=function(e){var a=[];_.each(e.issues,function(e){e.hidden||(a[e.projectId]=a[e.projectId]||[],a[e.projectId].push(e.key))});var i=[],n=1;return _.each(e.projects,function(e){var s={id:n++,name:e.key,lowercaseName:e.key,description:e.name,defaultSwimlane:!1,query:"",avatarUrl:e.avatarUrl,issueKeys:a[e.id]||[]};s.issueKeys.length>0&&i.push(s)}),i.sort(GH.GridSwimlanesData.swimlaneNameComparator),i},GH.GridSwimlanesData.calculateNoneSwimlanes=function(e){var a={id:1,name:"None",description:"None",defaultSwimlane:!0,query:"",issueKeys:e.issues.filter(function(e){return!e.hidden}).map(function(e){return e.key})};return[a]},GH.GridSwimlanesData.swimlaneNameComparator=function(e,a){return e.lowercaseName.localeCompare(a.lowercaseName)};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/GridColumnsData.js' */
GH.GridColumnsData={},GH.GridColumnsData.Constraints={ISSUE_COUNT_EXCL_SUBS:"issueCountExclSubs",ISSUE_COUNT:"issueCount",NONE:"none"},GH.GridColumnsData.calculateColumnsData=function(n,t,u){var s=t.columns,a=GH.GridColumnsData.getColumnIssueMapping(n,s),i=!!u.fieldConfigured&&GH.GridColumnsData.computeBusted(s),e={columns:s,columnIssueMapping:a,anyColumnBusted:i};return e},GH.GridColumnsData.getColumnIssueMapping=function(n,t){var u={},s={},a={};return _.each(t,function(n){u[n.id]=[],a[n.id]={visible:0,hidden:0},_.each(n.statusIds,function(t){s[t]=n.id})}),_.each(n.issues,function(n){var t=s[n.statusId];if(u[t]){var i=GH.GridColumnsData.getIssueStatsValue(n);n.hidden?a[t].hidden+=i:(u[t].push(n.key),a[t].visible+=i)}}),_.each(t,function(n){n.stats=a[n.id]}),u},GH.GridColumnsData.getIssueStatsValue=function(n){var t=Boolean(n.parentId),u=n.columnStatistic&&n.columnStatistic.statFieldId;return u===GH.GridColumnsData.Constraints.ISSUE_COUNT_EXCL_SUBS?t?0:1:u===GH.GridColumnsData.Constraints.ISSUE_COUNT?1:0},GH.GridColumnsData.computeBusted=function(n){var t=!1;return _.each(n,function(n){var u=n.stats.visible+n.stats.hidden;n.minBusted="undefined"!=typeof n.min&&n.min>u,n.maxBusted="undefined"!=typeof n.max&&n.max<u,t=t||n.minBusted||n.maxBusted}),t},GH.GridColumnsData.getColumnIdForStatus=function(n,t){var u=_.find(n,function(n){return _.find(n.statusIds,function(n){if(n==t)return!0})});return!!u&&u.id};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ops/JiraBridge.js' */
JIRA.IssueNavigator.getSelectedIssueKey=function(){return GH.IssueOperationShortcuts.getSelectedIssueKey()},JIRA.IssueNavigator.getSelectedIssueId=function(){return GH.IssueOperationShortcuts.getSelectedIssueId()},JIRA.Issue.getIssueId=JIRA.IssueNavigator.getSelectedIssueId,JIRA.Issue.getIssueKey=JIRA.IssueNavigator.getSelectedIssueKey,JIRA.Issues.Api.getSelectedIssueId=JIRA.IssueNavigator.getSelectedIssueId,JIRA.Issues.Api.getSelectedIssueKey=JIRA.IssueNavigator.getSelectedIssueKey;;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkKBNavigation.js' */
GH.WorkKBNavigation={},GH.WorkKBNavigation.currentIndex=0,GH.WorkKBNavigation.currentColumn=0,GH.WorkKBNavigation.currentSwimlane=0,GH.WorkKBNavigation.columnChange=!1,GH.WorkKBNavigation.init=function(){AJS.$(GH).bind("issueSelected",function(e,o){GH.WorkKBNavigation.adaptCurrentPosition(o)})},GH.WorkKBNavigation.initCurrentPosition=function(){var e=GH.WorkSelectionController.getSelectedIssueKey();e?GH.WorkKBNavigation.setCurrentPosition(e,!0,!1):GH.WorkKBNavigation.resetCurrentPosition()},GH.WorkKBNavigation.adaptCurrentPosition=function(e){GH.WorkKBNavigation.columnChange?(GH.WorkKBNavigation.columnChange=!1,GH.WorkKBNavigation.setCurrentPosition(e,!1,!0)):GH.WorkKBNavigation.setCurrentPosition(e,!1,!1)},GH.WorkKBNavigation.setCurrentPosition=function(e,o,i){if(e){var n=GH.GridDataController.getModel()._getIssuePositionAndDataByKey(e);if(n)return i||(GH.WorkKBNavigation.currentIndex=n.issueIndex),!o&&n.isSwimlane||(GH.WorkKBNavigation.currentColumn=n.columnId),void(GH.WorkKBNavigation.currentSwimlane=n.swimlaneId)}GH.WorkKBNavigation.resetCurrentPosition()},GH.WorkKBNavigation.resetCurrentPosition=function(){GH.WorkKBNavigation.currentIndex=0,GH.WorkKBNavigation.currentColumn=0,GH.WorkKBNavigation.currentSwimlane=0},GH.WorkKBNavigation.selectNextIssue=function(){if(GH.WorkController.isActive()){var e=GH.WorkSelectionController.getSelectedIssueKey(),o=GH.GridDataController.getModel();if(e){if(!GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(e)){var i=o.getNextIssueKey(e,GH.WorkKBNavigation.currentColumn);i&&GH.WorkSelectionController.focusOnIssue(i)}}else{var n=o.getFirstIssueKey();n&&GH.WorkSelectionController.focusOnIssue(n)}}},GH.WorkKBNavigation.selectPreviousIssue=function(){if(GH.WorkController.isActive()){var e=GH.WorkSelectionController.getSelectedIssueKey(),o=GH.GridDataController.getModel();if(e){if(!GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(e)){var i=o.getPreviousIssueKey(e,GH.WorkKBNavigation.currentColumn);i&&GH.WorkSelectionController.focusOnIssue(i)}}else{var n=o.getLastIssueKey();n&&GH.WorkSelectionController.focusOnIssue(n)}}},GH.WorkKBNavigation.selectNextColumn=function(){if(GH.WorkController.isActive()){var e=GH.WorkSelectionController.getSelectedIssueKey();if(!e)return void GH.WorkKBNavigation.selectNextIssue();var o=GH.GridDataController.getModel(),i=o.isIssueValid(e);if(!i)return void GH.WorkKBNavigation.selectNextIssue();if(!GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(e)){var n=o.getIssueKeyInNextColumn(e,GH.WorkKBNavigation.currentIndex);n&&(GH.WorkKBNavigation.columnChange=!0,GH.WorkSelectionController.focusOnIssue(n))}}},GH.WorkKBNavigation.selectPreviousColumn=function(){if(GH.WorkController.isActive()){var e=GH.WorkSelectionController.getSelectedIssueKey();if(!e)return void GH.WorkKBNavigation.selectNextIssue();var o=GH.GridDataController.getModel(),i=o.isIssueValid(e);if(!i)return void GH.WorkKBNavigation.selectNextIssue();if(!GH.SwimlaneView.ensureSwimlaneExpandedForIssueKey(e)){var n=o.getIssueKeyInPreviousColumn(e,GH.WorkKBNavigation.currentIndex);n&&(GH.WorkKBNavigation.columnChange=!0,GH.WorkSelectionController.focusOnIssue(n))}}},GH.WorkKBNavigation.toggleSwimlanes=function(){GH.SwimlaneView.toggleAllSwimlanes()};;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkTransitionService.js' */
function _toConsumableArray(r){if(Array.isArray(r)){for(var n=0,t=Array(r.length);n<r.length;n++)t[n]=r[n];return t}return Array.from(r)}define("jira-agile/rapid/ui/work/work-transition-service",["require"],function(){"use strict";var r=require("underscore"),n=require("jquery"),t=require("jira-agile/rapid/ajax"),e=require("jira/featureflags/feature-manager"),i={};i.dataPromise=n.Deferred(),i.data=null,i.checkForUpdates=function(){var n=a();return!this.dataPromise.isRejected()&&r.isEqual(n,this.dataPromise.projectIds)||i.preloadData(n),this.dataPromise},i.preloadData=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a();this.dataPromise=t.get({url:"/xboard/work/transitions.json",data:{projectId:r}},"workTransitionService").done(function(r){i.data=r}),this.dataPromise.projectIds=r};var a=function(){var r=GH.VersionController.getVersionModel();return r.getProjects().map(function(r){return r.id}).sort()};i.getValidTransitionsForIssue=function(r){return t.get({bareUrl:t.buildBareRestUrl("/rest/api/2/issue/"+r+"/transitions")}).fail(t.handleGlobalErrors)},i.queryTransitionForColumn=function(r,t,e){var i=this,a=n.Deferred();return p().done(function(){var n=[];r.forEach(function(r){var e=m(r);n.push(h(e,t))});var s=void 0;i._filterAvailableTransitionsForIssue(r,n,e).done(function(n){s=o(r,n,t),a.resolve(s)}).fail(a.reject)}).fail(a.reject),a};var o=function(n,t,e){var i=void 0;if(1===n.length){var a=t[0];i=r.isEmpty(a)||s(t)?f(AJS.format("Something isn\'\'t letting us move {0} to {1}. Ask your project administrator to check the workflow settings and transition conditions.",n[0],e.name)):a}else if(c(t))i=f(AJS.format("Unable to transition multiple issues to {0}. The transition screen is not supported when transitioning multiple issues.",e.name));else if(l(t)){var o=t[0];i=r.isEmpty(o)?f(AJS.format("Unable to transition the issues to {0}. Check if all transition conditions are met when moving multiple issues.",e.name)):o}else i=d(t)?[{}]:f(AJS.format("Unable to transition issues to {0}. Check if the issues you\'\'re transitioning have the same set of transitions.",e.name));return i},s=function(r){return r.every(function(r){return r.every(function(r){return r.isInvalid})})},u=function(r){return r.some(function(r){return r.some(function(r){return r.hasConditions})})},f=function(r){return[{error:r}]},c=function(r){return r.some(function(r){return r.some(function(r){return r.hasScreen})})},d=function(r){return r.every(function(r){return 1===r.length})},l=function(n){var t=n[0];return n.every(function(n){return r.isEqual(n,t)})};i._filterAvailableTransitionsForIssue=function(r,n,t){var e=u(n)&&1===r.length,i=AJS.$.Deferred();return e?(t.done(function(r){i.resolve(v(n,r))}).fail(function(){i.reject()}),i.promise()):i.resolve(n)};var v=function(r,n){var t=n.transitions,e=r[0],i=new Set;t.map(function(r){return Number(r.id)}).forEach(function(r){return i.add(r)});var a=e.map(function(r){var n=Object.assign({},r);return i.has(n.transitionId)||(n.isInvalid=!0),n});return[a]};i.getTransitionById=function(n,t){var e=I(n);return r.find(this.data.workflowToTransitions[e],function(r){return r.transitionId===Number(t)})},i.hasAnyTransitionHasScreen=function(r,n){return r.some(function(r){var t=i.getTransitionById(r,n);return t.hasScreen})};var m=function(n){var t=I(n),e=i.data.workflowToTransitions[t];if(r.isUndefined(e))return[];var a=g(n);return e.filter(function(n){return!n.isInitial&&(r.isUndefined(n.fromStatusId)||n.fromStatusId===Number(a.statusId))})},h=function(r,n){if(e.isFeatureEnabled("jsw.thor.status-in-column-not-in-order"))return n.statusIds.reduce(function(n,t){return n.push.apply(n,_toConsumableArray(r.filter(function(r){return t===String(r.toStatusId)}))),n},[]);var t=[];return r.forEach(function(r){n.statusIds.forEach(function(n){Number(n)===r.toStatusId&&t.push(r)})}),t},p=function(){return i.checkForUpdates()},g=function(r){var n=GH.GridDataController.getModel();return n.getIssueDataByKey(r)},I=function(r){var n=g(r),t=i.data.projectAndIssueTypeToWorkflow[n.projectId];return t[n.typeId]};return i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkDragAndDrop.js' */
!function(){function r(r,e){return!!e&&!o.hasAnyTransitionHasScreen(r,e)}var o=require("jira-agile/rapid/ui/work/work-transition-service"),e=require("jira-agile/rapid/analytics-tracker"),n=require("underscore"),a=require("jira/featureflags/feature-manager"),t=(require("jira-agile/features/feature-flags"),require("jira-agile/rapid/events")),i=require("jira/util/events"),s=require("jira/util/events/types"),l=require("jira-agile/browser-metrics/browser-metrics-util");GH.WorkDragAndDrop=new t,GH.WorkDragAndDrop.currentDragElement=null,GH.WorkDragAndDrop.cancel=!1,GH.WorkDragAndDrop.enabled=!1,GH.WorkDragAndDrop.skipNextRank=!1,GH.WorkDragAndDrop.analytics={dragAndDrop:new e("gh.rapidboard.work.dragAndDrop"),ranking:new e("gh.rapidboard.rankissues")},GH.WorkDragAndDrop.init=function(){GH.WorkDragAndDrop.enabled=!0},GH.WorkDragAndDrop.initDraggables=function(r){GH.WorkDragAndDrop.enabled&&setTimeout(function(){GH.WorkDragAndDrop._registerDraggables(r)},0)},GH.WorkDragAndDrop._registerDraggables=function(r){var o=GH.RankingModel.canUserRank();r.find(".ghx-columns").each(function(r,e){var n=AJS.$(e);o?n.find(".ghx-column").on("mousedown",function(){document.activeElement&&document.activeElement.blur()}).agileSortable({revert:0,zIndex:3e3,start:GH.WorkDragAndDrop.issueDragStart,stop:GH.WorkDragAndDrop.issueDragStop,items:".js-parent-drag",cancel:".js-fake-parent, .ghx-parent-group > .ghx-subtask-group",update:GH.WorkDragAndDrop.updateIssueHandler}).find(".ghx-subtask-group").agileSortable({revert:0,zIndex:3e3,start:function(r,o){GH.WorkDragAndDrop.issueDragStart.apply(this,[r,o]);var e=AJS.$(o.item).parent();e.children().length>2&&e.addClass("ghx-contain")},stop:function(r,o){GH.WorkDragAndDrop.issueDragStop.apply(this,[r,o]),AJS.$(o.item).parent().removeClass("ghx-contain")},items:".ghx-issue-subtask",update:GH.WorkDragAndDrop.updateIssueHandler}):GH.WorkDragAndDrop._initIssueCardsDraggable(n.find(".js-issue"),n)})},GH.WorkDragAndDrop.registerSingleCardDraggable=function(r){var o=GH.RankingModel.canUserRank();if(!o){var e=r.closest(".ghx-columns");GH.WorkDragAndDrop._initIssueCardsDraggable(r,e)}},GH.WorkDragAndDrop._initIssueCardsDraggable=function(r,o){r.draggable({revert:!0,revertDuration:0,zIndex:3e3,containment:o,start:GH.WorkDragAndDrop.issueDragStart,stop:GH.WorkDragAndDrop.issueDragStop})},GH.WorkDragAndDrop.updateIssueHandler=function(r,o){if(GH.WorkDragAndDrop.skipNextRank)return void AJS.$(this).agileSortable("cancel");if(!GH.WorkDragAndDrop.cancel){var e=AJS.$(o.item),n=GH.WorkSelectionController.getSelectedIssuesInOrder(),a=GH.WorkSelectionController.getIssueKey(e.prev(".js-issue, .ghx-parent-group")),t=GH.WorkSelectionController.getIssueKey(e.next(".js-issue, .ghx-parent-group"));GH.WorkDragAndDrop.analytics.ranking.trigger("dragAndDrop",n.length),GH.WorkRanking.rankIssues(n,a,t)}},GH.WorkDragAndDrop.issueDragStart=function(r,o){GH.WorkDragAndDrop.cancel=!1,GH.WorkDragAndDrop.skipNextRank=!1,GH.WorkContextMenuController.hideContextMenu();var e=!!o.item,n=e?AJS.$(o.item):AJS.$(this);AJS.$(o.placeholder).height(n.height());var a=AJS.$(this);AJS.$(document).bind("keydown.dragAndDrop",function(r){27===r.keyCode&&(GH.WorkDragAndDrop.cancel=!0,e?a.agileSortable("cancel"):a.draggable("cancel"),GH.WorkDragAndDrop.analytics.dragAndDrop.trigger("cancel"))}),GH.WorkDragAndDrop.currentDragElement=n;var t=(GH.WorkSelectionController.getIssueId(n),GH.WorkSelectionController.getIssueKey(n));GH.WorkSelectionController.ensureIssueSelected(r,t),GH.WorkDragAndDrop.droppablesReady=!1,AJS.$(".ghx-column").agileDroppable("destroy");var i=GH.WorkSelectionController.getSelectedIssueKeys();GH.WorkDragAndDrop.initDropZoneOverlay(n),GH.WorkDragAndDrop.initDropZones(t),i.length>1&&(n.hasClass("ghx-parent-group")?n.children(".js-issue").addClass("ghx-move-main").find(".ghx-move-count > b").text(i.length):n.addClass("ghx-move-main").find(".ghx-move-count > b").text(i.length)),GH.WorkDragAndDrop.analytics.dragAndDrop.trigger("start","issueCount",i.length)},GH.WorkDragAndDrop.issueDragStop=function(r,o){AJS.$(document).unbind("keydown.dragAndDrop");var e=o.item?AJS.$(o.item):AJS.$(this);if(e.hasClass("ghx-parent-group")?e.children(".js-issue").removeClass("ghx-move-main"):e.removeClass("ghx-move-main"),GH.WorkDragAndDrop.destroyDropZoneOverlay(),GH.WorkDragAndDrop.cleanTransitionClasses(),GH.WorkDragAndDrop.currentDragElement=null,!GH.WorkDragAndDrop.cancel&&!GH.RankingModel.isRankable()){var n=Math.abs(o.position.left),a=Math.abs(o.position.top);n<35&&a>50&&GH.WorkDragAndDrop.showNotRankableWarning()}GH.WorkDragAndDrop.droppablesReady=!1,GH.WorkDragAndDrop.analytics.dragAndDrop.trigger("complete")},GH.WorkDragAndDrop.showNotRankableWarning=function(){var r=GH.RapidBoard.getRapidViewConfigurationUrl(GH.WorkController.rapidViewData.id,"filter"),o='<a href="'+r+'">',e="</a>",n=AJS.format("Ranking is disabled, as the Filter Query for this board is not ordered by ascending Rank. Please check your {0}filter configuration{1}.",o,e);GH.Notification.showWarning(n)},GH.WorkDragAndDrop.isIssueBeingDragged=function(r){var o=GH.WorkDragAndDrop.currentDragElement;if(o){var e=AJS.$(o).data("issue-key");return r===e}},GH.WorkDragAndDrop.issueDropped=function(o,e){if(!GH.WorkDragAndDrop.cancel){var n=GH.WorkSelectionController.getSelectedIssueKeys();GH.WorkDragAndDrop.trigger("before:transitionAndRankIssue",{selectedIssueNo:n.length}),l.performanceMark("before:transitionAndRankIssueUI");var t=void 0,d=AJS.$(this),g=d.attr("target-transition-id"),p=parseInt(d.attr("target-transition-status"),10),D=GH.RapidBoard.State.getRapidViewId(),u=d.closest(".ghx-target-option").data("column-id"),c=e.draggable.closest(".ghx-column").data("column-id");if(r(n,g))t=GH.WorkController.optimisticallyTransition(n,g,p,c,u),l.performanceMark("transitionMethod: optimisticTransition"),l.performanceMark("after:transitionAndRankIssueUI"),t.always(function(){GH.WorkDragAndDrop.trigger("after:transitionAndRankIssue")});else if(n.length>1){var k={rapidViewId:D,issueKeys:n,targetColumn:u,selectedTransitionId:g,mode:GH.RapidBoard.State.getMode()};t=GH.WorkController.submitTransitionAndRank(k).always(function(){GH.WorkController.reload().done(function(){l.performanceMark("transitionMethod: fullPageReload"),l.performanceMark("after:transitionAndRankIssueUI"),GH.WorkDragAndDrop.trigger("after:transitionAndRankIssue")})})}else{var A=GH.WorkSelectionController.getIssueId(AJS.$(this));GH.WorkDragAndDrop.executeWorkflowTransition(A,g,p),t=AJS.$.Deferred().resolve()}a.isFeatureEnabled("jsw.classic.work.sla-metric.drag-and-drop")&&(t.done(function(r,o){GH.WorkController.fireSlaEvent("taskSuccess","dragAndDropBoard")}),t.fail(function(r,o){var e=o&&o.status;void 0===e||null===e||429===e||e>=500?GH.WorkController.fireSlaEvent("taskFail","dragAndDropBoard",{statusCode:o}):e>=400&&e<500&&GH.WorkController.fireSlaEvent("taskSuccess","dragAndDropBoard")})),AJS.trigger("analyticsEvent",{name:"gh.rapidboard.transitionissues.dragAndDrop",data:{issueCount:n.length,boardId:D,fromColumn:c,toColumn:u,totalColumns:GH.GridDataController.getModel().getColumns().length}}),GH.WorkDragAndDrop.skipNextRank=!0,t.done(function(){var r=GH.DetailsView.getSelectedIssueKey(),o=n.indexOf(r)!==-1;o&&i.trigger(s.REFRESH_ISSUE_PAGE,[r])})}},GH.WorkDragAndDrop._shouldUseOptimisticTranstion=r,GH.WorkDragAndDrop.dropzoneOverlay=null,GH.WorkDragAndDrop.initDropZoneOverlay=function(r){var o=GH.GridDataController.getModel(),e=o.getColumns(),n=parseInt(r.closest(".ghx-column").attr("data-column-id"),10),a=AJS.$(GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay({columns:e,sourceColumnId:n}));GH.WorkDragAndDrop.dropzoneOverlay=a;var t=r.closest(".ghx-swimlane");t.addClass("ghx-drag-in-progress"),t.append(a),GH.WorkDragAndDrop.positionDropZoneOverlay()},GH.WorkDragAndDrop.positionDropZoneOverlayGridLayout=function(){var r=GH.WorkDragAndDrop.currentDragElement,o=r.closest(".ghx-columns"),e=$("#ghx-pool-column"),n=o.position().top,a=r.closest(".ghx-swimlane").position().top,t=e.scrollTop(),i=t-a;i=i>0?i:0;var s=n+i,l=o.height(),d=$("#ghx-pool-column").height()-$("#ghx-column-header-group").height(),g=d-s+t,p=n+l,D=p-s,u=Math.min(l,g,D),c=u<1?"hidden":"";$(".ghx-zone-overlay").css({top:s,height:u,visibility:c})},GH.WorkDragAndDrop.gridLayoutOn=function(){var r=a.isFeatureEnabled("jsw.classic.board.horizontal-scroll");return r&&window.CSS&&window.CSS.supports&&window.CSS.supports("display","grid")},GH.WorkDragAndDrop.positionDropZoneOverlay=function(){if(GH.WorkDragAndDrop.gridLayoutOn())GH.WorkDragAndDrop.positionDropZoneOverlayGridLayout(),AJS.$("#ghx-pool-column").bind("scroll.overlayResizer",GH.WorkDragAndDrop.positionDropZoneOverlayGridLayout);else{var r=AJS.$(".ghx-zone-overlay"),o=r.prev(".ghx-columns"),e=AJS.$("#ghx-pool"),n=e.scrollTop(),a=o.position().top,t=a+n,i=e.children(".ghx-swimlane").first().children(".ghx-columns").position(),s=i.top+n,l=a-s;l<0&&(t-=l);var d=o.height(),g=d,p=AJS.$(window).height(),D=p-e.offset().top-t+n;g>D&&(g=D);var u=a+d+n,c=u-t;g>c&&(g=c);var k=g<1?"hidden":"";r.css({top:t,height:g,visibility:k}),AJS.$("#ghx-pool").bind("scroll.overlayResizer",GH.WorkDragAndDrop.positionDropZoneOverlay)}},GH.WorkDragAndDrop.initDropZones=function(r,e){var a=GH.WorkDragAndDrop.currentDragElement;if(a&&GH.WorkSelectionController.getIssueKey(a)==r&&GH.WorkDragAndDrop.dropzoneOverlay){var t=GH.GridDataController.getModel(),i=AJS.$(".ghx-column-headers"),s=GH.WorkDragAndDrop.dropzoneOverlay.find(".ghx-zone-table"),l=o.getValidTransitionsForIssue(r);s.each(function(r,e){var a=AJS.$(e),s=a.data("column-id"),d=t.getColumnById(s);if(d){var g=void 0,p=GH.WorkSelectionController.getSelectedIssueKeys();GH.WorkDragAndDrop.setupLoadingDropZoneForColumn(a),g=o.queryTransitionForColumn(p,d,l),g.done(function(r){if(!n.isEmpty(r)){var o=i.children(".ghx-column[data-id="+s+"]");a.addClass("ghx-target-option"),o.addClass("ghx-target-option"),GH.WorkDragAndDrop.setupDropZonesForColumn(a,o,r),GH.WorkDragAndDrop.forceDroppablesReload()}}).fail(function(){GH.WorkDragAndDrop.destroyDropZoneOverlay(),GH.WorkDragAndDrop.cleanTransitionClasses()})}})}},GH.WorkDragAndDrop.getTransitionsForColumn=function(r,o){for(var e=AJS.$.Deferred(),n=[],a=0;a<r.transitions.length;a++)for(var t=0;t<o.statusIds.length;t++)o.statusIds[t]==r.transitions[a].targetStatus&&n.push(r.transitions[a]);return e.resolve(n)},GH.WorkDragAndDrop.setupLoadingDropZoneForColumn=function(r){var o=AJS.$(GH.tpl.rapid.workdraganddrop.renderLoadingDropZone());r.append(o)},GH.WorkDragAndDrop.setupDropZonesForColumn=function(r,o,e){r.empty(),n.each(e,function(o){if(!o.isInvalid){var n=AJS.$(GH.tpl.rapid.workdraganddrop.renderDropZone({transition:o,singleTransition:1===e.length}));r.append(n)}});var a={accept:".js-issue, .ghx-parent-group",hoverClass:"ghx-target-hover",over:function(){r.addClass("ghx-target-hover"),o.addClass("ghx-target-hover")},out:function(){r.find(".ghx-drop-zone.ghx-target-hover").length<1&&(r.removeClass("ghx-target-hover"),o.removeClass("ghx-target-hover"))},tolerance:"pointer"};n.isUndefined(e[0].error)?a.drop=GH.WorkDragAndDrop.issueDropped:a.drop=function(){GH.WorkDragAndDrop.destroyDropZoneOverlay(),GH.WorkDragAndDrop.cleanTransitionClasses(),GH.Notification.showInfo(e[0].error)},r.children().agileDroppable(a)},GH.WorkDragAndDrop.destroyDropZoneOverlay=function(){GH.WorkDragAndDrop.dropzoneOverlay&&(GH.WorkDragAndDrop.dropzoneOverlay.remove(),GH.WorkDragAndDrop.dropzoneOverlay=null,AJS.$("#ghx-pool").unbind("scroll.overlayResizer"),GH.WorkDragAndDrop.gridLayoutOn()&&($("#ghx-pool").off("scroll.overlayResizer"),$("#ghx-pool-column").off("scroll.overlayResizer")))},GH.WorkDragAndDrop.cleanTransitionClasses=function(){AJS.$(".ghx-column").removeClass("ghx-target-option").removeClass("ghx-target-hover"),AJS.$(".ghx-swimlane").removeClass("ghx-drag-in-progress")},GH.WorkDragAndDrop.forceDroppablesReload=function(){var r=AJS.$.ui.ddmanager,o=r.current;o&&(r.prepareOffsets(o,null),r.drag(o,null)),GH.WorkDragAndDrop.droppablesReady=!0},GH.WorkDragAndDrop.executeWorkflowTransition=function(r,o,e){GH.WorkDragAndDrop.transitionTargetStatus=e;var n=AJS.$("#atlassian-token").attr("content");a.isFeatureEnabled("jsw.classic.xsrf-from-cookie")&&(n=getCookieValue("atlassian.xsrf.token"));var t=GH.Ajax.CONTEXT_PATH+"/secure/WorkflowUIDispatcher.jspa?id={0}&action="+o+"&atl_token="+n+"&returnUrl=",i='<a href="'+t+'" class="issueaction-workflow-transition" style="display:none"></a>',s=AJS.$(i);AJS.$("#gh").append(s),s.click(),s.remove()},GH.WorkDragAndDrop.transitionTargetStatus=void 0}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkDragAndDrop.soy' */
// This file was automatically generated from WorkDragAndDrop.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.workdraganddrop.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.workdraganddrop == 'undefined') { GH.tpl.rapid.workdraganddrop = {}; }


GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay = function(opt_data, opt_ignored) {
  var output = '<div class="ghx-zone-overlay"><div class="ghx-zone-overlay-table">';
  var columnList4 = opt_data.columns;
  var columnListLen4 = columnList4.length;
  for (var columnIndex4 = 0; columnIndex4 < columnListLen4; columnIndex4++) {
    var columnData4 = columnList4[columnIndex4];
    output += (columnData4.id == opt_data.sourceColumnId) ? '<div class="ghx-zone-overlay-column ghx-empty"></div>' : '<div class="ghx-zone-overlay-column ' + ((columnData4.maxBusted) ? 'ghx-busted-max' : '') + ' ' + ((columnData4.minBusted) ? 'ghx-busted-min' : '') + ' ' + ((columnData4.collapsed) ? 'ghx-collapsed-column' : '') + '"><div class="ghx-zone-table" data-column-id="' + soy.$$escapeHtml(columnData4.id) + '"></div></div>';
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay.soyTemplateName = 'GH.tpl.rapid.workdraganddrop.renderDropZoneOverlay';
}


GH.tpl.rapid.workdraganddrop.renderDropZone = function(opt_data, opt_ignored) {
  return '' + ((opt_data.transition.error) ? '<div class="ghx-zone-row ghx-undroppable-column"><div class="ghx-undroppable-message"></div></div>' : '<div class="ghx-zone-row" ' + ((opt_data.transition.transitionId) ? 'target-transition-id="' + soy.$$escapeHtml(opt_data.transition.transitionId) + '"' : '') + ' target-transition-status="' + soy.$$escapeHtml(opt_data.transition.toStatusId) + '"><div class="ghx-zone-cell">' + ((! opt_data.singleTransition) ? '<h2>' + soy.$$escapeHtml(opt_data.transition.name) + '</h2>' : '') + '</div></div>');
};
if (goog.DEBUG) {
  GH.tpl.rapid.workdraganddrop.renderDropZone.soyTemplateName = 'GH.tpl.rapid.workdraganddrop.renderDropZone';
}


GH.tpl.rapid.workdraganddrop.renderLoadingDropZone = function(opt_data, opt_ignored) {
  return '<div class="ghx-zone-row"><div class="ghx-zone-cell ghx-loading-cell"><h2>' + soy.$$escapeHtml('Loading...') + '</h2></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.workdraganddrop.renderLoadingDropZone.soyTemplateName = 'GH.tpl.rapid.workdraganddrop.renderLoadingDropZone';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkRanking.js' */
!function(){var e=require("jira-agile/rapid/events"),r=require("jira-agile/rapid/analytics-tracker"),n=require("jira-agile/browser-metrics/browser-metrics-util"),o=require("jira/featureflags/feature-manager");GH.WorkRanking=new e,GH.WorkRanking.events={RANK_CHANGE:Symbol("RANK_CHANGE")},GH.WorkRanking.analytics=new r("gh.rapidboard.rankissues"),GH.WorkRanking.sendToTop=function(e){if(GH.WorkController.isActive()){var r=GH.WorkSelectionController.getSelectedIssueKey();if(r&&GH.RankingModel.canUserRankIssue(r)){var n=GH.RankingModel.getFirstRankableIssueKeyInColumn(r);if(n){var o=GH.WorkSelectionController.getSelectedIssuesInOrder();GH.WorkRanking.analytics.trigger("sendToTop"+(e?e:""),o.length);var a=GH.RankingModel.getBestFitSelectionAfterRank(o),s=function(){GH.Notification.showSuccess("Issue has been re-ranked to the top of its column.")};GH.WorkRanking.rankIssues(o,null,n,s),a&&GH.WorkSelectionController.gotoIssue(a)}}}},GH.WorkRanking.sendToBottom=function(e){if(GH.WorkController.isActive()){var r=GH.WorkSelectionController.getSelectedIssueKey();if(r&&GH.RankingModel.canUserRankIssue(r)){var n=GH.RankingModel.getLastRankableIssueKeyInColumn(r);if(n){var o=GH.WorkSelectionController.getSelectedIssuesInOrder();GH.WorkRanking.analytics.trigger("sendToBottom"+(e?e:""),o.length);var a=GH.RankingModel.getBestFitSelectionAfterRank(o),s=function(){GH.Notification.showSuccess("Issue has been re-ranked to the bottom of its column.")};GH.WorkRanking.rankIssues(o,n,null,s),a&&GH.WorkSelectionController.gotoIssue(a)}}}},GH.WorkRanking.rankIssues=function(e,r,a,s){GH.WorkRanking.trigger("before:workRankIssue",{selectedIssueNo:e.length}),n.performanceMark("before:workRankIssueUI"),GH.RankingModel.reorderIssues(e,r,a),GH.SwimlaneView.rerenderCellOfIssue(a||r),n.performanceMark("after:workRankIssueUI"),GH.WorkRanking.trigger(GH.WorkRanking.events.RANK_CHANGE,e,r,a),GH.ECX.markUserInteraction(GH.ECX.INTERACTION_TYPE.BOARD.ISSUE_RANK);var t={issueKeys:e,rankAfterKey:r,rankBeforeKey:a,customFieldId:GH.RankingModel.getRankCustomFieldId()},i=function(e){var r=GH.RankController.getErrorRankResultFromResponse(e);r?(GH.Notification.showWarning(r.errors[0]),GH.WorkController.reload().done(function(){GH.WorkRanking.trigger("after:workRankIssue")})):(e.success.rankableChanges.map(function(e){if(e.wasChanged){var r=GH.GridDataController.getModel().data.issues[e.issueKey];GH.RapidBoard.sendIssueUpdatedTrackEvent(r,[{name:"customfield_"+GH.RankingModel.getRankCustomFieldId()}])}}),_.isFunction(s)&&s(e),GH.WorkRanking.trigger("after:workRankIssue"))},k=function(e,r){o.isFeatureEnabled("jsw.classic.board.drag-and-drop.change-error-message")&&GH.RapidBoard.ViewController.showErrorPanelDragAndDrop(e,r),GH.WorkController.reload().done(function(){GH.WorkRanking.trigger("after:workRankIssue")})};GH.Ajax.put({url:"/rank",data:t}).done(i).fail(function(r){k(e,r)})}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/DurationsTimer.js' */
!function(t,i){function s(s){i(this),this._durations=s.slice(),this._accumulatedDuration=0,s.length&&(t.on("focus",this.start,this).on("blur",this.pause,this).on("unload",this.pause,this),this.start())}s.prototype={start:function(){if(this._timeout)return this;var t=this._durations[0]-this._accumulatedDuration;if(t<0)return this._tick(),this;var i=this;return this._timeoutStart=new Date,this._timeout=setTimeout(function(){i._clearTimeout(),i._accumulatedDuration+=new Date-i._timeoutStart,i._tick()},t),this},pause:function(){return this._timeout&&(this._clearTimeout(),this._accumulatedDuration+=new Date-this._timeoutStart),this},destroy:function(){return this._clearTimeout(),t.off(this),this},_tick:function(){this.trigger("tick",this._durations[0]),this._durations.shift(),this._durations.length?this.start():this.destroy()},_clearTimeout:function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=null)}},GH.DurationsTimer=s}(GH.windowActivityNotifier,GH.Events);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ops/Poller.js' */
GH.Poller=function(n){function o(){m||(m=!0,_.each(d,e))}function t(){m&&(m=!1,_.each(d,h))}function e(n){null!=n.timeout&&(clearTimeout(n.timeout),n.timeout=null)}function l(n,o){if(n||null!=o.timeout){var t=_.partial(r,o),e=o.handler.call(o.context,n);return e&&e.done?void e.done(t):void t()}}function i(n,o){if(n||null!=o.timeout){var t=_.partial(r,o),e=o.handler.call(o.context,n);e&&e.done&&e.done(function(n){a(n,o,t)})}}function a(n,o,t){n===o.backoffResetCondition?p(o):o.interval>=o.maxBackoffInterval?o.interval=o.maxBackoffInterval:(o.pollingCount++,o.interval+=o.pollingCount%o.thresholdPollCount===0?o.pollingOffset:0),t()}function r(n){var o=n.backoffRequired===!0?_.partial(i,!1,n):_.partial(l,!1,n);n.timeout&&clearTimeout(n.timeout),m||(n.timeout=setTimeout(o,n.interval))}var f=3e4,u=2,c=9e5,v=3e4,d={},m=!1,h=function(n){n.backoffRequired===!0?(p(n),i(!0,n)):l(!0,n)},p=function(n){n.pollingCount=0,n.interval=n.originalInterval};return{init:function(){n.on("focus",t).on("blur",o).on("unload",o)},addPoller:function(n,o,t,e){"function"==typeof o&&(e=t,t=o,o=f),this.removePoller(n);var l={id:n,interval:o,handler:t,context:e};d[n]=l,m||r(l)},addPollerWithBackoff:function(n,o,t,e,l){this.removePoller(n);var i={id:n,interval:e.interval||f,originalInterval:e.interval||f,handler:o,context:l,pollingCount:0,thresholdPollCount:e.thresholdPollCount||u,pollingOffset:e.pollingOffset||v,maxBackoffInterval:e.maxBackoffInterval||c,backoffRequired:e.backoffRequired,backoffResetCondition:t};d[n]=i,m||r(i)},removePoller:function(n){var o=d[n];o&&(e(o),delete d[n])},removeAll:o,pollingInterval:a}}(GH.windowActivityNotifier);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/ContextMenu.js' */
!function(){"use strict";GH.ContextMenu=function(t){this.actionGroups=t.actionGroups,this.dropdown=null},GH.ContextMenu.menuSelector="#gh-ctx-menu",GH.ContextMenu.contentSelector="#gh-ctx-menu-content",GH.ContextMenu.triggerSelector="#gh-ctx-menu-trigger",GH.ContextMenu.prototype._executeContextAction=function(t){var e=this._findActionById(t);e.actionFn()},GH.ContextMenu.prototype._findActionById=function(t){var e=[];return _.each(this.actionGroups,function(t){e=e.concat(t.actions)}),_.find(e,function(e){return e.id===t})},GH.ContextMenu.prototype.showAt=function(t){if(!_.isUndefined(t)&&!_.isNull(t)){this._initDropdown();var e=t.pageX,n=t.pageY,o=AJS.$(GH.ContextMenu.contentSelector),r=o.height();GH.Util.UI.isVisibleY(n+r)||(n-=r),this._positionDropdownAt(e,n),this.dropdown.show()}},GH.ContextMenu.prototype._positionDropdownAt=function(t,e){AJS.$(GH.ContextMenu.triggerSelector).offset({left:t,top:e})},GH.ContextMenu.prototype._initDropdown=function(){var t=require("jira/ajs/dropdown/dropdown");AJS.$(GH.ContextMenu.menuSelector).remove();var e=GH.tpl.contextmenu.renderContextMenu({ctxActionGroups:this.actionGroups});AJS.$("#gh").append(e);var n=this,o=AJS.$(GH.ContextMenu.contentSelector);o.click(function(t){var e=AJS.$(t.target).closest(".js-context-menu-action"),o=e.attr("data-ctx-action");_.isUndefined(o)||o===!1||(n._executeContextAction(o),t.preventDefault())});var r={content:o,trigger:AJS.$(GH.ContextMenu.triggerSelector),alignment:AJS.LEFT};this.dropdown=t.create(r)[0];var i=this.dropdown.layerController._validateClickToClose,c=function(t){return 2!==t.button&&(!i||i.apply(this,arguments))};this.dropdown.layerController._validateClickToClose=c},GH.ContextMenu.prototype.hide=function(){this.dropdown&&this.dropdown.hide(),AJS.$(GH.ContextMenu.menuSelector).remove(),AJS.$(GH.ContextMenu.contentSelector).remove(),AJS.$(GH.ContextMenu.triggerSelector).remove(),AJS.$(GH.ContextMenu.triggerSelector+"_drop").remove()}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/component/ContextMenu.soy' */
// This file was automatically generated from ContextMenu.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.contextmenu.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.contextmenu == 'undefined') { GH.tpl.contextmenu = {}; }


GH.tpl.contextmenu.renderContextMenu = function(opt_data, opt_ignored) {
  var output = '<div id="gh-ctx-menu" class="aui-dd-parent"><div id="gh-ctx-menu-trigger" class="aui-dd-trigger" style="width:1px; height:1px; position:absolute;"></div><div id="gh-ctx-menu-content" class="aui-list">';
  var ctxActionGroupList4 = opt_data.ctxActionGroups;
  var ctxActionGroupListLen4 = ctxActionGroupList4.length;
  for (var ctxActionGroupIndex4 = 0; ctxActionGroupIndex4 < ctxActionGroupListLen4; ctxActionGroupIndex4++) {
    var ctxActionGroupData4 = ctxActionGroupList4[ctxActionGroupIndex4];
    output += GH.tpl.contextmenu.renderContextActionGroup({ctxActionGroup: ctxActionGroupData4, isLast: ctxActionGroupIndex4 == ctxActionGroupListLen4 - 1});
  }
  output += '</div><textarea id="gh-ctx-menu-copy-to-clipboard" value="" readonly></textarea></div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextMenu.soyTemplateName = 'GH.tpl.contextmenu.renderContextMenu';
}


GH.tpl.contextmenu.renderContextActionGroup = function(opt_data, opt_ignored) {
  var output = ((opt_data.ctxActionGroup.label) ? '<h5>' + soy.$$escapeHtml(opt_data.ctxActionGroup.label) + '</h5>' : '') + '<ul class="aui-list-section aui-first ' + ((opt_data.isLast) ? 'aui-last' : '') + '">';
  var ctxActionList21 = opt_data.ctxActionGroup.actions;
  var ctxActionListLen21 = ctxActionList21.length;
  for (var ctxActionIndex21 = 0; ctxActionIndex21 < ctxActionListLen21; ctxActionIndex21++) {
    var ctxActionData21 = ctxActionList21[ctxActionIndex21];
    output += GH.tpl.contextmenu.renderContextAction({ctxAction: ctxActionData21});
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextActionGroup.soyTemplateName = 'GH.tpl.contextmenu.renderContextActionGroup';
}


GH.tpl.contextmenu.renderContextAction = function(opt_data, opt_ignored) {
  var output = '<li id="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '-container" class="aui-list-item"><a  data-ctx-action="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '" id="' + soy.$$escapeHtml(opt_data.ctxAction.id) + '" class="aui-list-item-link js-context-menu-action" title="' + soy.$$escapeHtml(opt_data.ctxAction.label) + '"' + ((opt_data.ctxAction.href != null) ? 'href="' + soy.$$escapeHtml(opt_data.ctxAction.href) + '"' : 'href="#"') + '>' + soy.$$escapeHtml(opt_data.ctxAction.label);
  if (opt_data.ctxAction.shortcut) {
    output += '<span class="ghx-shortcut">';
    var keyList48 = opt_data.ctxAction.shortcut.keys;
    var keyListLen48 = keyList48.length;
    for (var keyIndex48 = 0; keyIndex48 < keyListLen48; keyIndex48++) {
      var keyData48 = keyList48[keyIndex48];
      output += (keyIndex48 == 0) ? soy.$$escapeHtml(keyData48) : '<span class="ghx-separator">' + soy.$$escapeHtml(opt_data.ctxAction.shortcut.separator) + '</span><span class="ghx-monospace">' + soy.$$escapeHtml(keyData48) + '</span>';
    }
    output += '</span>';
  }
  output += '</a></li>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.contextmenu.renderContextAction.soyTemplateName = 'GH.tpl.contextmenu.renderContextAction';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/work/WorkContextMenuController.js' */
!function(){"use strict";var e=require("jira-agile/rapid/analytics-tracker"),t=require("jira-agile/rapid/const/PageMode"),n=require("jira/analytics/web-client"),o=require("jira/util/events"),s=require("jira/util/events/types");GH.WorkContextMenuController={},GH.WorkContextMenuController.ctxMenu=null,GH.WorkContextMenuController.Analytics={},GH.WorkContextMenuController.Analytics.show=new e("gh.issue.ctx.menu.show"),GH.WorkContextMenuController.Analytics.action=new e("gh.issue.ctx.menu.action"),GH.WorkContextMenuController.showContextMenuAt=function(e,t){if(GH.WorkContextMenuController.hideContextMenu(),!(AJS.$(e.target).closest("a").length>0)){var n=GH.WorkContextMenuController.resolveContext(t),o={actionGroups:GH.WorkContextMenuController.resolveActionsForContext(n)};GH.WorkContextMenuController.ctxMenu=new GH.ContextMenu(o),GH.WorkContextMenuController.ctxMenu.showAt(e),e.preventDefault(),AJS.$(GH.ContextMenu.menuSelector).focus(),GH.WorkContextMenuController.Analytics.show.trigger(n.type,"selectedIssuesCount",n.selectedIssues.length)}},GH.WorkContextMenuController.resolveContext=function(e){var t=GH.WorkSelectionController.getSelectedIssuesInOrder(),n=_.extend({selectedIssues:t},e);n.type=GH.WorkControls.getBoardType();var o=!1,s=GH.GridDataController.getModel().getIssueDataByKeys(t);return n.selectedIssuesData=s,n.flaggedIssuesCount=_.where(s,{flagged:!0}).length,_.every(s,function(e){return!e.parentId||(o=!0,!1)}),n.hasSubtasks=o,n.hasBulkChangePermission=GH.GridDataController.hasBulkChangePermission,n},GH.WorkContextMenuController.resolveActionsForContext=function(e){function r(e,t,n){if(t){var e=GH.GridDataController.getModel().getIssueDataByKeys(e);_.each(e,function(e){e.flagged=n,n?AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e.key+"']").addClass("ghx-flagged"):AJS.$("#ghx-pool").find(".ghx-swimlane-header[data-issue-key='"+e.key+"']").removeClass("ghx-flagged")})}else GH.WorkController.reload();var r=GH.DetailsView.getSelectedIssueKey(),i=e.indexOf(r)!==-1;i&&o.trigger(s.REFRESH_ISSUE_PAGE,[r])}var i=[],a=[],l=AJS.$(".ghx-swimlane-header").length>1,u=GH.WorkContextMenuController.getSendToTopAction(e,l?"Top of Swimlane":"Top of Column"),c=GH.WorkContextMenuController.getSendToBottomAction(e,l?"Bottom of Swimlane":"Bottom of Column");if(i.push({label:"Send to",actions:[u,c]}),"scrum"===e.type&&!e.hasSubtasks&&!e.swimlane){var g={id:"ghx-issue-ctx-action-remove-from-sprint",name:"remove from sprint",label:"Remove from sprint",actionFn:function(){GH.IssueActions.removeIssuesFromSprint(GH.WorkController.rapidViewData.id,e.selectedIssues),GH.WorkContextMenuController.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}};a.push(g)}if(1===e.selectedIssues.length){var d={id:"ghx-issue-ctx-action-copy-issue-link",name:"copy issue link",label:"Copy issue link",actionFn:function(){GH.IssueOperationShortcuts.copyIssueLink(),GH.Notification.showSuccess("Issue link copied!"),n.sendUIEvent({source:"boardScreen",actionSubject:"dropdownItem",action:"clicked",actionSubjectId:"copyIssueLink",attributes:{nextGenProject:!1}})}};a.push(d);var x={id:"ghx-issue-ctx-action-delete",name:"delete",label:"Delete",actionFn:function(){GH.IssueOperationShortcuts.deleteSelectedIssue(),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.delete"})}};a.push(x)}var h=void 0;if(h=e.flaggedIssuesCount!==e.selectedIssues.length?{id:"ghx-issue-ctx-action-flag-and-comment",name:"flag-and-comment",label:"Add flag",actionFn:function(){GH.IssueFlagAndCommentAction.execute(e.selectedIssues,!0,function(){r(e.selectedIssues,e.swimlane,!0)}),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.flag",data:{selectedIssueCount:e.selectedIssues.length}})}}:{id:"ghx-issue-ctx-action-unflag-and-comment",name:"unflag-and-comment",label:"Remove flag",actionFn:function(){GH.IssueFlagAndCommentAction.execute(e.selectedIssues,!1,function(){r(e.selectedIssues,e.swimlane,!1)}),AJS.trigger("analytics",{name:"gh.issue.ctx.menu.action.unflag",data:{selectedIssueCount:e.selectedIssues.length}})}},a.push(h),!e.swimlane){var C={id:"ghx-issue-ctx-action-view-in-navigator",name:"view in navigator",label:"View in Issue Navigator",actionFn:function(){GH.IssueActions.viewInIssueNavigator(e.selectedIssues),GH.WorkContextMenuController.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}};e.selectedIssues.length>1&&a.push(C);var p={id:"ghx-issue-ctx-action-bulk-change",name:"bulk change",label:"Bulk Change",actionFn:function(){GH.IssueActions.bulkChange(e.selectedIssues),GH.WorkContextMenuController.Analytics.action.trigger(this.name,"selectedIssuesCount",e.selectedIssues.length)}};e.hasBulkChangePermission&&e.selectedIssues.length>1&&a.push(p)}var I=function(e){var n=_.map(e,function(e){return GH.GridDataController.getModel().getIssues()[e]});return{issues:n,viewMode:t.WORK,boardType:GH.WorkControls.getBoardType()}};if(e.selectedIssues.length>0){var m={id:"ghx-issue-ctx-action-print-cards",name:"print cards",label:AJS.format("Print selected {0,choice,1# card|1\u003c cards}",e.selectedIssues.length),actionFn:function(){var t=require("jira-agile/rapid/ui/print/card-printing-controller");t.printSelectedIssues(I(e.selectedIssues))}};a.push(m)}return a.length>0&&i.push({label:"Other actions",actions:a}),i},GH.WorkContextMenuController.getSendToTopAction=function(e,t){return{id:"ghx-issue-ctx-action-send-top",name:"send to top of swimlane",label:t,actionFn:function(){GH.WorkRanking.sendToTop("WorkContextMenu")}}},GH.WorkContextMenuController.getSendToBottomAction=function(e,t){return{id:"ghx-issue-ctx-action-send-bottom",name:"send to bottom of swimlane",label:t,actionFn:function(){GH.WorkRanking.sendToBottom("WorkContextMenu")}}},GH.WorkContextMenuController.hideContextMenu=function(){null!=GH.WorkContextMenuController.ctxMenu&&(GH.WorkContextMenuController.ctxMenu.hide(),GH.WorkContextMenuController.ctxMenu=null)}}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/print/card-printing.soy' */
// This file was automatically generated from card-printing.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.rapid.print.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.rapid == 'undefined') { GH.tpl.rapid = {}; }
if (typeof GH.tpl.rapid.print == 'undefined') { GH.tpl.rapid.print = {}; }


GH.tpl.rapid.print.printCardScreen = function(opt_data, opt_ignored) {
  var output = '';
  var hasIssue__soy3 = opt_data.issues && opt_data.issues.length > 0;
  output += '<div id="ghx-print-toolbar">' + ((hasIssue__soy3) ? '<div class="ghx-print-toolbar-left ghx-print-toolbar-item"><span class="ghx-print-toolbar-label">' + soy.$$escapeHtml('Card size') + '</span><span class="ghx-print-card-size-trigger"> </span><span class="ghx-print-card-size-options"> </span><span class="ghx-print-filter-label ghx-print-toolbar-label">' + soy.$$escapeHtml('Select') + '</span><span class="ghx-print-filter-trigger"> </span><span class="ghx-print-filter-options"> </span></div><div class="ghx-print-toolbar-right ghx-print-toolbar-item"><span id="ghx-print-toolbar-issue-count" ' + ((opt_data.warnIssueCount) ? 'class="warning"' : '') + '>' + soy.$$escapeHtml(AJS.format('{0,choice,0#0 issues|1#1 issue|2#{0} issues}',opt_data.issues.length)) + '</span><button id="ghx-print-card-print-btn" class="aui-button aui-button-primary">' + soy.$$escapeHtml('Print') + '</button></div>' : '') + '</div><div class="ghx-print-content-sizing-wrm ghx-print-' + soy.$$escapeHtml(opt_data.cardSize) + '">' + GH.tpl.rapid.print.printCardPageContent(opt_data) + '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardScreen.soyTemplateName = 'GH.tpl.rapid.print.printCardScreen';
}


GH.tpl.rapid.print.printCardPageContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.issues && opt_data.issues.length > 0) ? GH.tpl.rapid.print.printCards(opt_data) : '<div class="aui-message aui-message-warning">' + soy.$$escapeHtml('There is no issue to print') + '</div>');
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardPageContent.soyTemplateName = 'GH.tpl.rapid.print.printCardPageContent';
}


GH.tpl.rapid.print.printCards = function(opt_data, opt_ignored) {
  var output = '';
  var issueList40 = opt_data.issues;
  var issueListLen40 = issueList40.length;
  for (var issueIndex40 = 0; issueIndex40 < issueListLen40; issueIndex40++) {
    var issueData40 = issueList40[issueIndex40];
    output += '<div class="ghx-card ' + ((issueData40.cardPrintingCategory) ? soy.$$escapeHtml(issueData40.cardPrintingCategory) : '') + '">' + GH.tpl.rapid.print.printOneCard({issue: issueData40, epics: opt_data.epics, showEpic: opt_data.showEpic}) + '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCards.soyTemplateName = 'GH.tpl.rapid.print.printCards';
}


GH.tpl.rapid.print.printOneCard = function(opt_data, opt_ignored) {
  return '<div class="ghx-card-content">' + GH.tpl.rapid.print.printCardHeaderRow(opt_data) + '<div class="ghx-card-summary">' + soy.$$escapeHtml(opt_data.issue.summary) + '<span class="ellipsis">&#133;</span><span class="obscurer"> </span></div>' + GH.tpl.rapid.print.printCardExtraFields(opt_data) + GH.tpl.rapid.print.printCardFooterRow(opt_data) + '</div><div class="ghx-card-color" ' + ((opt_data.issue.color != null) ? 'style="border-color:' + soy.$$escapeHtml(opt_data.issue.color) + ';"' : '') + '></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printOneCard.soyTemplateName = 'GH.tpl.rapid.print.printOneCard';
}


GH.tpl.rapid.print.printCardHeaderRow = function(opt_data, opt_ignored) {
  return '<div class="ghx-card-header">' + ((opt_data.issue.typeUrl) ? '<div class="ghx-card-icon"><img src="' + soy.$$escapeHtml(opt_data.issue.typeUrl) + '"></div>' : '') + ((opt_data.issue.flagged) ? '<div class="ghx-card-icon"><div class="aui-icon aui-icon-small aui-iconfont-flag"></div></div>' : (opt_data.issue.priorityUrl) ? '<div class="ghx-card-icon"><img src="' + soy.$$escapeHtml(opt_data.issue.priorityUrl) + '"></div>' : '') + '<div class="ghx-card-key">' + soy.$$escapeHtml(opt_data.issue.key) + '</div><div class="ghx-row-end">' + GH.tpl.avatar.renderIssueAvatar(opt_data) + '</div></div>';
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardHeaderRow.soyTemplateName = 'GH.tpl.rapid.print.printCardHeaderRow';
}


GH.tpl.rapid.print.printCardExtraFields = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.issue.extraFields) {
    output += '<div class="ghx-card-extra-fields">';
    var extraFieldList96 = opt_data.issue.extraFields;
    var extraFieldListLen96 = extraFieldList96.length;
    for (var extraFieldIndex96 = 0; extraFieldIndex96 < extraFieldListLen96; extraFieldIndex96++) {
      var extraFieldData96 = extraFieldList96[extraFieldIndex96];
      output += '<div class="ghx-card-xfield-row"><div class="ghx-card-xfield-label">' + soy.$$escapeHtml(extraFieldData96.label) + '</div><div class="ghx-card-xfield-value">' + ((extraFieldData96.renderedContent) ? (extraFieldData96.useSoyNoAutoescape) ? soy.$$filterNoAutoescape(extraFieldData96.renderedContent) : soy.$$escapeHtml(extraFieldData96.renderedContent) : soy.$$escapeHtml('None')) + '</div></div>';
    }
    output += '</div>';
  }
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardExtraFields.soyTemplateName = 'GH.tpl.rapid.print.printCardExtraFields';
}


GH.tpl.rapid.print.printCardFooterRow = function(opt_data, opt_ignored) {
  var output = '';
  var epic__soy114 = opt_data.epics && opt_data.issue.epic ? opt_data.epics[opt_data.issue.epic] : opt_data.issue.epicField;
  var hasVersion__soy115 = opt_data.issue.fixVersionsUI && opt_data.issue.fixVersionsUI.versions && opt_data.issue.fixVersionsUI.versions.length > 0;
  var hasEpic__soy116 = opt_data.showEpic && epic__soy114;
  var estimation__soy117 = opt_data.issue.estimateStatistic;
  var hasEstimate__soy118 = estimation__soy117 && estimation__soy117.statFieldId != 'issueCount' && estimation__soy117.statFieldValue && estimation__soy117.statFieldValue.text;
  output += '<div class="ghx-card-footer">';
  if (hasVersion__soy115) {
    var lozengeWidthClass__soy122 = hasEpic__soy116 && hasEstimate__soy118 ? 'ghx-card-lozenges-3' : hasEpic__soy116 || hasEstimate__soy118 ? 'ghx-card-lozenges-2' : '';
    output += '<span class="aui-label ghx-card-version ' + soy.$$escapeHtml(lozengeWidthClass__soy122) + '">' + ((opt_data.issue.fixVersionsUI.versions.length > 1) ? soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions.length) + ' ' + soy.$$escapeHtml('Versions') : soy.$$escapeHtml(opt_data.issue.fixVersionsUI.versions[0].name)) + '</span>';
  }
  if (hasEpic__soy116) {
    var lozengeWidthClass__soy136 = hasVersion__soy115 && hasEstimate__soy118 ? 'ghx-card-lozenges-3' : hasVersion__soy115 || hasEstimate__soy118 ? 'ghx-card-lozenges-2' : '';
    output += '<span class="aui-label ' + soy.$$escapeHtml(epic__soy114.epicColor) + ' ' + soy.$$escapeHtml(lozengeWidthClass__soy136) + '">' + ((epic__soy114.epicLabel) ? soy.$$escapeHtml(epic__soy114.epicLabel) : (epic__soy114.text) ? soy.$$escapeHtml(epic__soy114.text) : soy.$$escapeHtml('unlabelled') + '-' + soy.$$escapeHtml(opt_data.issue.epicField.epicKey)) + '</span>';
  }
  if (hasEstimate__soy118) {
    var estimateWidthClass__soy154 = hasVersion__soy115 && hasEpic__soy116 ? 'ghx-card-estimate-3' : hasVersion__soy115 || hasEpic__soy116 ? 'ghx-card-estimate-2' : 'ghx-card-estimate-1';
    output += '<div class="ghx-row-end"><div class="aui-badge ghx-card-estimate ' + soy.$$escapeHtml(estimateWidthClass__soy154) + '">' + soy.$$escapeHtml(estimation__soy117.statFieldValue.text) + '</div></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  GH.tpl.rapid.print.printCardFooterRow.soyTemplateName = 'GH.tpl.rapid.print.printCardFooterRow';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/print/CardPrintingAnalytic.js' */
define("jira-agile/rapid/ui/print/card-printing-analytic",["jquery","jira-agile/rapid/const/PageMode"],function(t,e){"use strict";function i(t){this.context=t}function r(e){var i=e.actionContext;e.AJS.trigger("analytics",{name:n({triggeredFrom:i.triggeredFrom,boardType:i.boardType,viewMode:i.viewMode,cardSize:o.getLastCardPrintingSize()}),data:{issueCount:t(".ghx-card").length-t(".ghx-card-filtered-out").length}})}function n(t){return["gh.cardprinting.",t.triggeredFrom,".",t.boardType,".",t.viewMode,".",t.cardSize,".",a()].join("")}function a(){var e=t("#subnav-trigger-ghx-print-filter-cbx").data("selected-filter-type");return e?e:"notApplicable"}var o=GH.RapidBoard.State;return i.prototype.registerForPrintEvent=function(){if(window.matchMedia){var e=window.matchMedia("print");e.addListener(t.proxy(function(t){t.matches||r(this.context)},this))}window.onafterprint=t.proxy(function(){r(this.context)},this)},i.takeNoteSelectedFilterId=function(e){var i;i=isNaN(e)?e:parseInt(e)===-1?"selected4dev":"sprint",t("#subnav-trigger-ghx-print-filter-cbx").data("selected-filter-type",i)},i});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/ui/print/CardPrintingView.js' */
define("jira-agile/rapid/ui/print/card-printing-view",["underscore","jquery","jira-agile/rapid/ui/print/card-printing-analytic"],function(t,e,i){"use strict";function n(i){var n=GH.tpl.rapid.print.printCardScreen(e.extend({},i,{showEpic:g.getEpicShownOnRapidBoard(),cardSize:g.getLastCardPrintingSize(),warnIssueCount:a(t.size(i.issues))})),d=r();window.cardPrintingContext={filterItems:i.filterItems,selectedItem:i.selectedItem,actionContext:i.actionContext,AJS:AJS};var c=window.open();c.document.write([o(),"<html>","<head>",d,"</head>",'<body id="jira" class="ghx-print-card-body ghx-print-card-body-wrm">',n,'<script type="text/javascript">','   var CardPrintingView = require("jira-agile/rapid/ui/print/card-printing-view");',"   CardPrintingView.initPrintScreen();","   if (window.stop) {","       window.stop();","       }","</script>","</body></html>"].join("")),c.document.close()}function r(){var t=[],i="loaderStylesheet";return e("head").children().each(function(i,n){e(n).is("meta")&&t.push(e(n)[0].outerHTML)}),e("body").children().each(function(n,r){e(r).is("link, meta, script, style")&&r.id!==i&&t.push(e(r)[0].outerHTML)}),e("link[data-wrm-key]").each(function(i,n){t.push(e(n)[0].outerHTML)}),e("#__wrm_injection_point").children().each(function(i,n){e(n).is("style, link, meta, script")&&t.push(e(n)[0].outerHTML)}),e("head").children().each(function(i,n){e(n).is("title, style, base, link, script, noscript")&&t.push(e(n)[0].outerHTML)}),t.join("")}function o(){var t=document.doctype;return["<!DOCTYPE ",t.name,t.publicId?' PUBLIC "'+t.publicId+'"':"",!t.publicId&&t.systemId?" SYSTEM":"",t.systemId?' "'+t.systemId+'"':"",">"].join("")}function a(t){return t>=p}function d(){var t=[{id:"small",label:"Small"},{id:"medium",label:"Medium"},{id:"large",label:"Large"}],i=new JIRA.Projects.Subnavigator({id:"ghx-print-card-size-dropdown",triggerPlaceholder:"#ghx-print-toolbar .ghx-print-card-size-trigger",contentPlaceholder:"#ghx-print-toolbar .ghx-print-card-size-options",itemGroups:t,selectedItem:g.getLastCardPrintingSize(),hideSelectedItem:!0});i.show(),i.on("itemSelected",function(t){t.preventDefault();var i=t.item.id;e(".ghx-print-content-sizing-wrm").removeClass().addClass("ghx-print-content-sizing-wrm ghx-print-"+i),g.setLastCardPrintingSize(i)})}function c(t){e("#ghx-print-toolbar").on("click","#ghx-print-card-print-btn",function(){window.print()}),e("#ghx-print-toolbar-issue-count").tooltip({title:function(){return e("#ghx-print-toolbar-issue-count").hasClass("warning")?"Too many issues? If not, go ahead and print them!":""}});var n=new i({actionContext:t.actionContext,AJS:t.AJS});n.registerForPrintEvent()}function s(n,r){if(t.isEmpty(n))e("#ghx-print-toolbar").find(".ghx-print-filter-label").css("display","none");else{var o=new JIRA.Projects.Subnavigator({id:"ghx-print-filter-cbx",triggerPlaceholder:"#ghx-print-toolbar .ghx-print-filter-trigger",contentPlaceholder:"#ghx-print-toolbar .ghx-print-filter-options",itemGroups:n,selectedItem:r,hideSelectedItem:!0});o.show(),i.takeNoteSelectedFilterId(r),o.on("itemSelected",function(t){t.preventDefault(),e(".ghx-card").addClass("ghx-card-filtered-out");var n=t.item.id,r=".sprint-"+n;"backlog"===n?r=".backlog":"all"===n&&(r=".ghx-card");var o=e(r);o.removeClass("ghx-card-filtered-out"),l(o.length),i.takeNoteSelectedFilterId(n)})}}function l(t){if(e("#ghx-print-toolbar").find(".ghx-print-toolbar-item").css("display",t?"":"none"),t){var i=e("#ghx-print-toolbar-issue-count");i.empty().append(AJS.format("{0,choice,0#0 issues|1#1 issue|2#{0} issues}",t)),a(t)?i.addClass("warning"):i.removeClass("warning")}}var p=400,g=GH.RapidBoard.State,u={showPrintScreen:function(t){n(t)},initPrintScreen:function(){var t=window.opener.cardPrintingContext;window.opener.cardPrintingContext=void 0,d(),s(t.filterItems,t.selectedItem),c(t)}};return u});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-files-keto-deferred', location = 'jira-agile-module/includes/js/rapid/LegacyBoardNamespaces.js' */
AJS.namespace("GH.Dialogs.CompleteSprintDialog",null,require("jira-agile/rapid/ui/dialog/complete-sprint-dialog")),AJS.namespace("GH.DetailsViewScrollTracker",null,require("jira-agile/rapid/ui/detail/details-view-scroll-tracker"));;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:marionette', location = 'jira-view-issue-module/lib/backbone/marionette/backbone.marionette-amd.js' */
define("jira/view-issue-plugin/lib/marionette",["backbone","underscore","atlassian/libs/factories/marionette-2.1.0"],function(e,i,n){return n(i,e)});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'jira-view-issue-module/viewissue/attachment/attachment-contents-view.js' */
define("jira/view-issue-plugin/attachment/attachment-contents-view",["jira/view-issue-plugin/lib/marionette"],function(t){"use strict";return t.ItemView.extend({template:JIRA.Templates.ViewIssue.attachmentContents,initialize:function(t){this.attachment=t.attachment,this.issueId=t.issueId,this.baseUrl=t.baseUrl},serializeData:function(){return{attachment:this.attachment,issueId:this.issueId,baseUrl:this.baseUrl}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'jira-view-issue-module/viewissue/attachment/attachment-contents-view-alias.js' */
define("jira/attachment/attachment-contents-view",["jira/view-issue-plugin/attachment/attachment-contents-view"],function(t){return t});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'jira-view-issue-module/viewissue/attachment/attachment-element.js' */
define("jira/view-issue-plugin/attachment/attachment-element",["jira/util/logger","wrm/context-path","jquery","jira/skate","jira/viewissue/slideshow/slideshow-configuration","jira/view-issue-plugin/lib/marionette","jira/attachment/attachment-contents-view"],function(t,e,n,i,a,o,r){"use strict";function c(i){var a=n(i),c=a.data("attachment-id"),s=a.data("issue-id"),u=e()+"/rest/api/2/attachment/"+c+"/expand/human",l=n.get(u);l.done(function(t){var n=new o.Region({el:a.find(".zip-contents").first()}),i=new r({attachment:t,issueId:s,baseUrl:window.location.protocol+"//"+window.location.host+e()});n.show(i)}),l.error(function(e){t.error(e)})}return i("js-file-attachment",{type:i.type.CLASSNAME,attached:function(e){n(e).find(".expander").one("expandBlock",function(){c(e)}),t.trace("jira.plugins.viewissue.expansion.wired")},events:{"click .attachment-title":function(t,e){if(1===e.which){var n=t.getThumbnailImage();n.length&&(n.click(),e.preventDefault())}}},prototype:{getThumbnailImage:function(){var t=this;return n(".gallery",t)}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:asynchronous-attachment-expansion', location = 'jira-view-issue-module/viewissue/attachment/attachment.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ViewIssue&&(JIRA.Templates.ViewIssue={}),JIRA.Templates.ViewIssue.attachmentContents=function(e,t){for(var a='<ol class="archive-expanded">',s=e.attachment.entries,n=s,l=n.length,i=0;i<l;i++){var r=n[i];a+=JIRA.Templates.ViewIssue.attachmentArchiveEntry(soy.$$augmentMap(e,{entry:r}))}a+=(0==e.attachment.totalEntryCount?'<li><div class="aui-message aui-message-warning" style="display: inline-block"><p>'+soy.$$escapeHtml("This archive is either corrupt, empty or not an archive at all")+".</p></div></li>":"")+'</ol><span class="zip-contents-trailer">'+(s.length<e.attachment.totalEntryCount?'<span class="limit-info">'+soy.$$escapeHtml(AJS.format("Showing {0} of {1} items",s.length,e.attachment.totalEntryCount))+" </span>":"");var m=soy.$$escapeHtml(e.baseUrl)+"/secure/attachment/"+soy.$$escapeHtml(e.attachment.id)+"/";return a+='<a href="'+soy.$$escapeHtml(m)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(e.attachment.mediaType)+":"+soy.$$escapeHtml(e.attachment.name)+":"+soy.$$escapeHtml(m)+'">'+soy.$$escapeHtml("Download Zip")+"</a></span>"},JIRA.Templates.ViewIssue.attachmentArchiveEntry=function(e,t){var a="",s=soy.$$escapeHtml(e.baseUrl)+"/secure/attachmentzip/unzip/"+soy.$$escapeHtml(e.issueId)+"/"+soy.$$escapeHtml(e.attachment.id)+"%5B"+soy.$$escapeHtml(e.entry.index)+"%5D/",n=soy.$$filterNoAutoescape(e.entry.mediaType)+":"+soy.$$filterNoAutoescape(e.entry.path)+":"+soy.$$filterNoAutoescape(s);return a+='<li class="archive-entry" data-entry-index="'+soy.$$escapeHtml(e.entry.index)+'"><div class="attachment-thumb"><a href="'+soy.$$escapeHtml(s)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(n)+'"'+JIRA.Templates.ViewIssue.tagFilePreview({id:e.attachment.id+"/"+e.entry.index,title:e.entry.label,mimeType:e.entry.mediaType})+">"+JIRA.Templates.ViewIssue.renderAttachmentIcon({mimetype:e.entry.mediaType,baseurl:e.baseUrl})+'</a></div><a class="file-path" href="'+soy.$$escapeHtml(s)+'" title="'+soy.$$escapeHtml(e.entry.path)+'" draggable="true" data-downloadurl="'+soy.$$escapeHtml(n)+'"'+JIRA.Templates.ViewIssue.tagFilePreview({id:e.attachment.id+"/"+e.entry.index,title:e.entry.label,mimeType:e.entry.mediaType})+">"+soy.$$escapeHtml(e.entry.label)+'</a><span class="attachment-size">'+soy.$$escapeHtml(e.entry.size)+"</span></li>"};;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:draggableattachment', location = 'jira-view-issue-module/viewissue/initDraggableAttachment.js' */
define("jira/view-issue-plugin/init-draggable-attachment",["jquery"],function(e){e.event.props?e.event.props.push("dataTransfer"):e.event.addProp("dataTransfer"),e("[draggable=true]",".item-attachments").live("dragstart",function(a){var t=e(this),n=a.dataTransfer;n.effectAllowed="copy",n.dropEffect="copy",n.setData("DownloadURL",t.data("downloadurl")),t.find("img").length||n.setDragImage(t.closest("li").find("img:visible")[0],8,8)})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:analytics', location = 'jira-view-issue-module/viewissue/analytics.js' */
define("jira/view-issue-plugin/analytics",["jquery"],function(i){var n=i(document);n.on("click","#subtasks-bulk-operation",function(){AJS.trigger("analyticsEvent",{name:"jira.bulk.move.click.subtasks-bulk-operation"})}),n.on("click","#subtasks-open-issue-navigator",function(){AJS.trigger("analyticsEvent",{name:"jira.bulk.move.click.subtasks-open-issue-navigator"})})});;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics.js' */
define("jira/analytics/analytics",["jquery","jira/ajs/dark-features","jira/analytics"],function(e,r,i){function n(){return e("li.active a.browse-tab").attr("id")}function t(){s.on("click","#project-admin-link",function(){var e=n();i.send({name:"browseproject.administerproject",properties:{selectedtab:e}})}),s.on("click","#browse-projects-create-project",function(){i.send({name:"projects.browse.createProject",properties:{}})}),s.on("click","#no-issues-create-issue",function(){i.send({name:"browseproject.issuesblankslate.createissue",properties:{}})}),s.on("click","a.issue-filter-link",function(){var r=e(this),n=r.attr("id").replace("filter_",""),t=r.attr("data-type");i.send({name:"browse"+t+".issuefilter."+n,properties:{}})}),s.on("click",".issueaction-viewworkflow",function(){var n=e(this).attr("class"),t=n.indexOf("new-workflow-designer")>-1||n.indexOf("jira-workflow-designer-link")>-1,s=t?"new":"old",a=r.isEnabled("casper.VIEW_ISSUE");i.send({name:"issue.viewworkflow",properties:{version:s,newEnabled:a}})})}var s=e(document);return{bindEvents:t}});;
;
/* module-key = 'jira.webresources:jira-analytics', location = '/includes/jira/analytics/analytics-init.js' */
require(["jira/analytics/analytics"],function(n){AJS.toInit(function(){n.bindEvents()})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:attachment-thumbnail', location = 'jira-view-issue-module/viewissue/attachment/attachment-thumbnail.js' */
define("jira/view-issue-plugin/attachment/attachment-thumbnail",["jira/analytics","jira/view-issue-plugin/attachment/image-element","jira/skate"],function(t,e,i){function r(t){var e=c.exec(t);if(null!==e)return e[1]}function n(t,e,i){var r=document.createEvent("CustomEvent");r.initCustomEvent(e,!0,!1,i),t.dispatchEvent(r)}function a(t,i){var r=e.create();return r.setAttribute("alt",i),r.setAttribute("src",t),r.className="hidden",r.addEventListener("error",function(){n(this,"load-error")}),r.addEventListener("load",function(){this.className="",n(this,"load-finished")}),r}var u=3,l=3e3,s=JIRA.Templates.ViewIssue,d="attachment.thumbnail.load.failed",o="attachment.thumbnail.load.retried",c=/\/file\/([\w-]+)\/image/;return i("jira-attachment-thumbnail",{type:i.type.TAG,created:function(t){t.retryCount=0,t.fallbacked=!1},attached:function(t){var e=t.querySelector("img");e&&t.removeChild(e),t.appendChild(a(t.getAttribute("url"),t.getAttribute("filename")))},events:{"load-error":function(t){t.fallbacked||(t.removeChild(e.find(t)),t.retryCount>=u?(t.applyFallback(),t.triggerFailedEvent()):(t.retryCount++,t.retryAttachment()))},"load-finished":function(t){t.retryCount>0&&t.retryCount<u&&t.triggerRetriedEvent()}},prototype:{applyFallback:function(){this.fallbacked=!0,this.getAttribute("jira-url")?this.appendChild(a(this.getAttribute("jira-url"),this.getAttribute("filename"))):this.innerHTML=s.renderAttachmentIcon({mimetype:"default"})},retryAttachment:function(){setTimeout(function(){this.appendChild(a(this.getAttribute("url"),this.getAttribute("filename")))}.bind(this),l)},triggerFailedEvent:function(){var e=r(this.getAttribute("url"));e&&t.send({name:d,properties:{fileId:e}})},triggerRetriedEvent:function(){var e=r(this.getAttribute("url"));e&&t.send({name:o,properties:{retries:this.retryCount,fileId:e}})}}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:attachment-thumbnail', location = 'jira-view-issue-module/viewissue/attachment/image-element.js' */
define("jira/view-issue-plugin/attachment/image-element",{create:function(){return document.createElement("img")},find:function(e){return e.querySelector("img")}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:issuelink-bridge-global-init', location = 'jira-view-issue-module/viewissue/issuelink/linkedissue-modal-bridge.js' */
require(["jquery"],function(e){window.__$linkedIssueBridgePromise=e.Deferred(),define("jira/components/linkedissue/bridge",[],function(){return function(e){window.__$linkedIssueBridgePromise.resolve(e)}}),define("jira/components/linkedissue/bridge/api",["jira/components/analytics-tracker/tracker"],function(n){function i(e){n.trackEvent(o,"linkedissue-modal.load.failed",{errorMessage:e})}function r(){if(null===s){s=e.Deferred();try{window.__$linkedIssueBridgePromise.then(function(e){e.loadResource().then(function(){s.resolve(e)},function(){i("Call to linkedIssueModalApp#loadResource failed"),s.reject()})})}catch(e){var n=e&&e.stack||"An unknown error occurred when loading linkedIssueModalApp bridge";i(n),s.reject()}}return s}var o="viewissue.issuelink",s=null;return{loadResource:r}})});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:issuelink-init', location = 'jira-view-issue-module/viewissue/issuelink/issuelink-init.js' */
define("jira/view-issue-plugin/issuelink/issuelink-init",["jquery","underscore","jira/skate","jira/components/analytics-tracker/tracker","jira/components/linkedissue/bridge/api"],function(e,t,r,i,a){function n(r){return(t.isUndefined(r.which)||null===r.which||1===r.which||0===r.which&&e.browser.msie)&&!(r.metaKey||r.ctrlKey||r.shiftKey||r.altKey&&!e.browser.msie)}function s(){return e("#linked-issue-modal-root").attr("data-project-type")}function o(e,t){i.trackEvent(f,"linkedissue-modal.load.failed",{errorMessage:e,targetIssueId:t})}function u(e,t,r,i){var a=k();if(null!==a){try{a.show({issueId:e,issueKey:t,sourceProjectType:r,targetProjectType:i})}catch(t){var n=t&&t.stack||"Call to linkedIssueModalApp#show threw an exception";return o(n,e),!1}return!0}return o("Show called before linked issue modal available",e),!1}function l(e){return"true"===e.attr(p)}function c(t){var r=e(t.target),a=r.attr(w),o=r.attr(y),c=s(),d=r.attr("data-project-type"),k=n(t),h=l(r);if(c&&d){var p=k?"click":"click.newtab";if(i.trackEvent(f,p,{sourceProjectType:c,targetProjectType:d,targetIssueId:a,showModal:h}),h&&k){var v=u(a,o,c,d);if(v)return!1}}else i.trackEvent(f,"click.missing.project.types",{sourceProjectType:c,targetProjectType:d,targetIssueId:a})}function d(e){return e.find(h+"["+p+'="true"]').size()>0}function k(){if(null!==v)return v;if(null===j){var e=Date.now();j=a.loadResource(),j.then(function(t){v=t;var r=Date.now()-e;i.trackEvent(f,"linkedissue-modal.load",{loadTimeMillis:r})})}return v}var f="viewissue.issuelink",h="a.linked-issue",p="data-show-modal",y="data-issue-key",w="data-issue-id",v=null,j=null;return r("js-linkingmodule-container-skate-target",{type:r.type.CLASSNAME,attached:function(t){var r=e(t);r.on("click",h,c),d(r)&&k()}}),{shouldLoadLinkedIssueModal:d,showLinkedIssueModal:u,handleIssueLinkClicked:c}});;
;
/* module-key = 'com.atlassian.jira.jira-view-issue-plugin:initialiser', location = 'jira-view-issue-module/viewissue/initViewIssue.js' */
require(["jira/view-issue-plugin/attachment/attachment-element","jira/view-issue-plugin/init-draggable-attachment","jira/view-issue-plugin/analytics","jira/view-issue-plugin/attachment/attachment-thumbnail","jira/view-issue-plugin/issuelink/issuelink-init"]);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-lwf-board-common', location = 'jira-agile-module/includes/js/rapid/LegacyBoardNamespaces.js' */
AJS.namespace("GH.Dialogs.CompleteSprintDialog",null,require("jira-agile/rapid/ui/dialog/complete-sprint-dialog")),AJS.namespace("GH.DetailsViewScrollTracker",null,require("jira-agile/rapid/ui/detail/details-view-scroll-tracker"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-lwf-board-common', location = 'jira-agile-module/includes/js/rapid/LegacyNamespaces.js' */
AJS.namespace("GH.ReleaseVersionTrigger",null,require("jira-agile/rapid/ui/work/release-version-trigger")),AJS.namespace("GH.SprintConfig",null,require("jira-agile/rapid/ui/plan/sprint-config")),AJS.namespace("GH.Ajax",null,require("jira-agile/rapid/ajax"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-lwf-board-browser-metrics', location = 'jira-agile-module/includes/js/browser-metrics/BrowserMetricsRegister.js' */
define("jira-agile/browser-metrics/browser-metrics-register",[],function(){"use strict";var r=window["browser-metrics"]||{start:function(){},end:function(){}},e=function(e,t,n,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(r){return{}};e.on(t,function(){var e=arguments,t={key:o,isInitial:!1,reporters:[function(){return s(o)},function(){return e[0]}]};r.start(t),n.on(i,function(){r.end({key:o})})})},t=function(e,t,n,i,o,s){e.on(t,function(){!GH.RapidBoard.ViewController.isBoardLoadMetricsInProgress&&n()&&r.start({key:o,isInitial:!1,ready:i,reporters:function(){return s(o)}})})};return{registerMetricListener:e,registerMetricListenerWithSelector:t}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-lwf-board-browser-metrics', location = 'jira-agile-module/includes/js/browser-metrics/BoardBrowserMetrics.js' */
var _extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}return e};!function(){"use strict";var e=require("jira-agile/browser-metrics/browser-metrics-register"),r=require("jira-agile/rapid/ui/bento/bento-features"),i=require("jira/featureflags/feature-manager"),t=require("jira-agile/browser-metrics/browser-metrics-util"),a=require("jira-agile/rapid/deferred-resources-loader"),n=require("jira-agile/rapid/const/PageMode"),o=i.isFeatureEnabled("jsw.classic.backlog.resolve-epic-callback-nplusone"),s=function(){return i.isFeatureEnabled("jsw.classic.keto")},l=void 0,d=void 0,g=void 0,p=void 0,c="#gh.js-ghx-detail-loaded:not(.browser-metrics-stale)",u=".ghx-split-issue-dialog",f=".flag-and-comment-form-popup-submit",b="jsw.backlog.browser-metrics.backlog.issue.count.browser.metrics",k=function(){return i.isFeatureEnabled("jsw.classic.jqs.integration")&&GH.RapidBoard.State.jqsInJsw.get()},w=function(e){return{issueNo:GH.RapidBoard.State.numberOfIssues.get(),epicNo:GH.RapidBoard.State.numberOfEpics.get(),versionNo:GH.RapidBoard.State.numberOfVersions.get(),projectNo:GH.RapidBoard.State.numberOfProjects.get(),boardType:GH.RapidBoard.State.getBoardType(),boardId:GH.RapidViewConfig.currentData.id,cardColorStrategy:GH.RapidViewConfig.currentData.data.cardColorStrategy,workModeExtraFieldNo:GH.RapidViewConfig.currentData.data.workModeExtraFieldIds.length,planModeExtraFieldNo:GH.RapidViewConfig.currentData.data.planModeExtraFieldIds.length,columnNo:GH.RapidViewConfig.currentData.data.columns.length,swimlaneNo:GH.RapidViewConfig.currentData.data.swimlanes.length,swimlaneStrategy:GH.RapidViewConfig.currentData.data.swimlaneStrategy,daysInColumnEnabled:GH.RapidViewConfig.currentData.data.showDaysInColumn,trackingStatistic:GH.RapidViewConfig.currentData.data.trackingStatistic.id,estimationStatistic:GH.RapidViewConfig.currentData.data.estimationStatistic.id,pageVisible:!(window&&window.document&&window.document.hidden),oldDoneIssuesCutoff:GH.RapidBoard.State.oldDoneIssuesCutoff.get()}},S=i.isFeatureEnabled(b),j=function(e){return _extends({},w(),{backlogIssueCount:S?GH.RapidBoard.State.numberOfBacklogIssues.get():null,isFasterDragAndDropEnabled:i.isFeatureEnabled("jsw.classic.backlog.faster-drag-and-drop")})};GH.RapidBoard.State.getApdexAttributes=function(e){return _extends({},"plan"===e?j():w(),{isBentoIssueExperience:r.isBentoEnabled(),isJqsInJswEnabled:k(),isLoadBulkEpicsEnabled:o})};var m=function(){e.registerMetricListener(g,"before:sprintRankIssue",g,"after:sprintRankIssue","jira.agile.plan.rankIssue",j),e.registerMetricListener(g,"before:kanbanRankIssue",g,"after:kanbanRankIssue","jira.agile.plan.rankIssue",j),e.registerMetricListener(l,"before:rankCreatedIssue",l,"after:rankCreatedIssue","jira.agile.plan.rankCreatedIssue",j),e.registerMetricListener(d,"before:submitMultipleTransitionsDialog",d,"after:submitMultipleTransitionsDialog","jira.agile.plan.submitMultipleTransitionsDialog",j),e.registerMetricListenerWithSelector(GH.PlanController,"before:openDetailView",function(){return!r.isBentoEnabled()},c,"jira.agile.openDetailView",w)},M=function(){l=require("jira-agile/rapid/ui/plan/backlog-controller"),d=require("jira-agile/rapid/ui/plan/kanban-transition-and-rank"),g=require("jira-agile/rapid/ui/plan/plan-drag-and-drop"),p=require("jira-agile/rapid/ui/plan/plan-controller"),m()};a.handleDeferredResourceImport(GH.RapidBoard.State.getMode()===n.WORK,M),e.registerMetricListener(GH.Components.QuickFilters.events,"before:toggle",GH.WorkController,"after:render","jira.agile.quickfilter.toggle",w),s()?a.handleDeferredResourceImport(s()&&GH.RapidBoard.State.getMode()===n.PLAN||GH.RapidBoard.State.getMode()===n.WORK,function(){e.registerMetricListener(GH.SprintRetrospectiveController,"before:renderChart",GH.SprintRetrospectiveController,"after:renderChart","jira.agile.report.sprint",w)}):GH.RapidBoard.State.getMode()===n.WORK?a.actionOnDeferParsingComplete(function(){e.registerMetricListener(GH.SprintRetrospectiveController,"before:renderChart",GH.SprintRetrospectiveController,"after:renderChart","jira.agile.report.sprint",w)}):e.registerMetricListener(GH.SprintRetrospectiveController,"before:renderChart",GH.SprintRetrospectiveController,"after:renderChart","jira.agile.report.sprint",w),s()?a.handleDeferredResourceImport(s()&&(!GH.WorkDragAndDrop||!GH.WorkController||!GH.WorkRanking),function(){e.registerMetricListener(GH.WorkDragAndDrop,"before:issueDropRender",GH.WorkController,"after:render","jira.board.work.transition.issue",w),e.registerMetricListener(GH.WorkController,"before:addNewIssueToSprint",GH.WorkController,"after:addNewIssueToSprint","jira.agile.plan.addNewIssueToSprint",j),e.registerMetricListener(GH.WorkRanking,"before:workRankIssue",GH.WorkRanking,"after:workRankIssue","jira.agile.work.rankIssue",w),e.registerMetricListener(GH.WorkDragAndDrop,"before:transitionAndRankIssue",GH.WorkDragAndDrop,"after:transitionAndRankIssue","jira.agile.work.transitionAndRankIssue",w),e.registerMetricListenerWithSelector(GH.WorkController,"before:openDetailView",function(){return!r.isBentoEnabled()},c,"jira.agile.openDetailView",w)}):(e.registerMetricListener(GH.WorkDragAndDrop,"before:issueDropRender",GH.WorkController,"after:render","jira.board.work.transition.issue",w),e.registerMetricListener(GH.WorkController,"before:addNewIssueToSprint",GH.WorkController,"after:addNewIssueToSprint","jira.agile.plan.addNewIssueToSprint",j),e.registerMetricListener(GH.WorkRanking,"before:workRankIssue",GH.WorkRanking,"after:workRankIssue","jira.agile.work.rankIssue",w),e.registerMetricListener(GH.WorkDragAndDrop,"before:transitionAndRankIssue",GH.WorkDragAndDrop,"after:transitionAndRankIssue","jira.agile.work.transitionAndRankIssue",w),e.registerMetricListenerWithSelector(GH.WorkController,"before:openDetailView",function(){return!r.isBentoEnabled()},c,"jira.agile.openDetailView",w)),e.registerMetricListenerWithSelector(t,"before:splitIssuePopup",function(){return!0},u,"jira.agile.plan.splitIssue.popup",j),e.registerMetricListener(t,"before:splitIssueSubmit",t,"after:splitIssueSubmit","jira.agile.plan.splitIssue.submit",j),e.registerMetricListenerWithSelector(t,"before:addFlagPopup",function(){return!0},f,"jira.agile.plan.addFlag.popup",j),e.registerMetricListenerWithSelector(t,"before:removeFlagPopup",function(){return!0},f,"jira.agile.plan.removeFlag.popup",j),e.registerMetricListener(t,"before:addFlagSubmit",t,"after:addFlagSubmit","jira.agile.plan.addFlag.submit",j),e.registerMetricListener(t,"before:removeFlagSubmit",t,"after:removeFlagSubmit","jira.agile.plan.removeFlag.submit",j),i.isFeatureEnabled("jsw.classic.browser-metrics.filters")&&(e.registerMetricListener(t,"before:backlogQuickFilter",t,"after:backlogQuickFilter","jira.agile.plan.backlogQuickFilter",j),e.registerMetricListener(t,"before:backlogEpicFilter",t,"after:backlogEpicFilter","jira.agile.plan.backlogEpicFilter",j),e.registerMetricListener(t,"before:backlogVersionFilter",t,"after:backlogVersionFilter","jira.agile.plan.backlogVersionFilter",j),e.registerMetricListener(t,"before:backlogSearchFilter",t,"after:backlogSearchFilter","jira.agile.plan.backlogSearchFilter",j),e.registerMetricListener(t,"before:boardQuickFilter",t,"after:boardQuickFilter","jira.agile.work.boardQuickFilter",w),e.registerMetricListener(t,"before:boardSearchFilter",t,"after:boardSearchFilter","jira.agile.work.boardSearchFilter",w)),e.registerMetricListener(t,"before:expandAllSwimlanes",t,"after:expandAllSwimlanes","jira.agile.work.expandAllSwimlanes",w),e.registerMetricListener(t,"before:collapseAllSwimlanes",t,"after:collapseAllSwimlanes","jira.agile.work.collapseAllSwimlanes",w),e.registerMetricListener(t,"before:editSprintSubmit",t,"after:editSprintSubmit","jira.agile.edit.sprint.popup.submit",w),e.registerMetricListener(t,"before:deleteSprintSubmit",t,"after:deleteSprintSubmit","jira.agile.delete.sprint.submit",w),e.registerMetricListener(t,"before:createSprint",t,"after:createSprint","jira.agile.create.sprint",w),e.registerMetricListenerWithSelector(t,"before:sprintEditPopup",function(){return!0},"#ghx-dialog-edit-sprint","jira.agile.edit.sprint.popup.display",w),e.registerMetricListenerWithSelector(t,"before:sprintStartPopup",function(){return!0},"#ghx-dialog-start-sprint","jira.agile.start.sprint.popup.display",w),e.registerMetricListener(t,"before:epicListToggledOpen",t,"after:epicListToggledOpen","jira.agile.plan.epiclist.toggle.open",j),e.registerMetricListener(t,"before:versionListToggledOpen",t,"after:versionListToggledOpen","jira.agile.plan.versionList.toggle.open",j),e.registerMetricListener(t,"before:vsShowAllClicked",t,"after:vsShowAllClicked","jira.agile.plan.vs.show.all.link.clicked",j),e.registerMetricListenerWithSelector(t,"before:epicCreatePopup",function(){return!0},["#create-epic-issue-dialog",".jira-dialog-content-ready"],"jira.agile.epic.create.popup",w),e.registerMetricListener(t,"before:createVersion",t,"after:createVersion","jira.agile.create.version",w),i.isFeatureEnabled("jsw.backlog.browser-metrics.drag.n.drop.ui")&&e.registerMetricListener(t,"before:dragAndDropIssue",t,"after:dragAndDropIssue","jira.agile.plan.dragAndDropIssue",j)}();;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator-lwf-board', location = 'jira-agile-module/includes/js/sidebar/subnavigator/SubnavigatorController.soy' */
// This file was automatically generated from SubnavigatorController.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.subnavigator.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.subnavigator == 'undefined') { GH.tpl.subnavigator = {}; }


GH.tpl.subnavigator.header = function(opt_data, opt_ignored) {
  return '<h1><span id="ghx-board-name" class="subnav-page-header">' + soy.$$escapeHtml(opt_data.headerText) + '</span></h1>';
};
if (goog.DEBUG) {
  GH.tpl.subnavigator.header.soyTemplateName = 'GH.tpl.subnavigator.header';
}


GH.tpl.subnavigator.subnavigator = function(opt_data, opt_ignored) {
  return '<span class="subnav-container"><span id="subnav-title"></span><span id="subnav-board-selector"></span><span id="subnav-trigger"></span><span id="subnav-opts"></span></span>';
};
if (goog.DEBUG) {
  GH.tpl.subnavigator.subnavigator.soyTemplateName = 'GH.tpl.subnavigator.subnavigator';
}
;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator-lwf-board', location = 'jira-agile-module/includes/js/sidebar/subnavigator/WorkSubnavigatorContextProvider.js' */
AJS.namespace("GH.RapidBoard.WorkSubnavigatorContextProvider"),define("jira-agile/subnavigator/work-subnavigator-context-provider",["require","jquery","underscore"],function(r,t,i){var n="all",e="sprintFilterChange",a={id:0,label:"Kanban board"},o={id:0,label:"Active sprints"},s={hasSubnavigator:function(){return!0},header:function(){var t=r("jira-agile/rapid/work/work-controls");return t.rapidViewConfig.name},itemList:function(){if(this._isKanban())return[a];var r=i.map(this._getSprints(),function(r){return{id:r.id.toString(),label:r.name}});return 0===r.length?[o]:1===r.length?r:[r,[{id:n,label:"All sprints"}]]},onLoad:function(){},selectedItem:function(){var t=r("jira-agile/rapid/work/work-controls");if(this._isKanban())return a.id;var i=t.sprintfilters.getActiveSprintFilters()[0];if(i)return i.toString();var e=this._getSprints().length;return 0===e?o.id:1===e?t.sprintfilters.getSprintData()[0].id.toString():n},selectionHandler:function(i){var a=r("jira-agile/rapid/work/work-controls"),o=i===n?a.sprintfilters.getActiveSprintFilters()[0]:parseInt(i,10);a.sprintfilters.toggleActiveSprintFilter(o),t(a.sprintfilters).trigger(e)},getChangeViewText:function(){return "Switch sprint"},analyticEvent:function(r,t){return{name:"jira.project.sidebar.sprint.select",data:{sprintId:r,initialLoad:t}}},_getSprints:function(){var t=r("jira-agile/rapid/work/work-controls");return t.sprintfilters.getSprintData()||[]},_isKanban:function(){var t=r("jira-agile/rapid/work/work-controls");return!t.rapidViewConfig.sprintSupportEnabled}};return s}),AJS.namespace("GH.RapidBoard.WorkSubnavigatorContextProvider",null,require("jira-agile/subnavigator/work-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator-lwf-board', location = 'jira-agile-module/includes/js/sidebar/subnavigator/ReportSubnavigatorContextProvider.js' */
define("jira-agile/subnavigator/report-subnavigator-context-provider",["require","underscore","jira/util/browser"],function(e,t,r){var i=function(t){try{return e(t)}catch(r){return}},o=function(t,r){return t?t:e(r)},a="jira-agile/rapid/ui/chart/report-controller",n=i(a);return{selectionHandler:function(e){if("com.atlassian.jira.jira-projects-plugin:report-page"===e){var t=AJS.contextPath()+"/projects/"+JIRA.API.Projects.getCurrentProjectKey()+"?selectedItem="+e;r.reloadViaWindowLocation(t)}else this._getReportController().selectChart(e),this._storeLastViewedReportLink(e)},header:function(){return this._getReportController().rapidViewConfig.name},hasSubnavigator:function(){return!0},itemList:function(){var e=t.map(this._getReportController().getApplicableCharts(),function(e){return{id:e.id,label:e.name,description:e.tooltip}});return[e,[{id:"com.atlassian.jira.jira-projects-plugin:report-page",label:"All reports",description:"Show the reports overview page, which lists all available reports"}]]},onLoad:function(){var e=this.selectedItem();this._storeLastViewedReportLink(e)},selectedItem:function(){return this._getReportController().getSelectedChart()},getChangeViewText:function(){return "Switch report"},analyticEvent:function(e,t){return{name:"jira.project.sidebar.report.select",data:{reportId:e,initialLoad:t}}},_storeLastViewedReportLink:function(e){var t=this;JIRA.API.getSidebar().done(function(r){if(r.isProjectSidebar(!0)&&JIRA.Projects.Sidebar.Reports){var i=t._getReportController().rapidViewData.id,o=JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key"),a=AJS.contextPath()+"/secure/RapidBoard.jspa?";o&&(a+="projectKey="+o+"&"),a+="rapidView="+i+"&view=reporting&chart="+e+"&useStoredSettings=true",JIRA.Projects.Sidebar.Reports.storeLastViewedReportLink(a,r)}})},_getReportController:function(){return o(n,a)}}}),AJS.namespace("GH.RapidBoard.ReportSubnavigatorContextProvider",null,require("jira-agile/subnavigator/report-subnavigator-context-provider"));;
;
/* module-key = 'com.pyxis.greenhopper.jira:subnavigator-lwf-board', location = 'jira-agile-module/includes/js/sidebar/subnavigator/SubnavigatorController.js' */
AJS.namespace("GH.RapidBoard.SubnavigatorController"),GH.RapidBoard.SubnavigatorController=function(e,t,r,a,i,n,o,d,u){var s=function(){return o.isFeatureEnabled("jsw_classic_boards_experimental_loading_skeleton_dpgxz")},g=function(e){try{return require(e)}catch(t){return}},l=function(e,t){return e?e:require(t)},v={plan:"jira-agile/subnavigator/plan-subnavigator-context-provider",work:"jira-agile/subnavigator/work-subnavigator-context-provider",report:"jira-agile/subnavigator/report-subnavigator-context-provider"},c=g(v.plan),h={contextProviders:{work:e,report:t,plan:c},render:function(){this._getContextProvider().onLoad(),this.setHeader(),this.renderSubnavigator()},setHeader:function(){var e=GH.RapidBoard.State.isAgilityBoard();AJS.$("#ghx-view-selector").children().remove(),AJS.$(".ghx-sprint-goal").remove(),AJS.$("#ghx-view-selector").html(r.header({headerText:this._getContextProvider().header()})),u.isEnabled()&&(u.render(),e||(u.removeItem(u.Items.REPORTS.id),a.getMode()===d.REPORT&&u.insertItem(u.Items.REPORTS)))},renderSubnavigator:function(){var e=this._getContextProvider();if(e.hasSubnavigator()){this.createSubnavigatorPlaceholders();var t=JIRA.Projects.Subnavigator;return this._getSubnavSettings(t,e).then(function(r){var a=new t(r);return a.on("itemSelected",function(t){t.preventDefault(),e.selectionHandler(t.item.id),AJS.trigger("analyticsEvent",e.analyticEvent(t.item.id,!1))}),s()?(AJS.$(".ghx-top-header > .gh-skeleton").remove(),a.show()):a.show(),AJS.trigger("analyticsEvent",e.analyticEvent(e.selectedItem(),!0)),a})}},createSubnavigatorPlaceholders:function(){AJS.$("#ghx-view-selector h1").append(r.subnavigator())},_getContextProvider:function(){var e=a.getMode();return l(this.contextProviders[e],v[e])},_shouldReturnEmptyList:function(){return i.isReactFiltersEnabled().then(function(e){return e&&a.getMode()===d.WORK})},_getSubnavSettings:function(e,t){return h._shouldReturnEmptyList().then(function(r){var i={id:a.getMode(),triggerPlaceholder:r?null:"#subnav-trigger",contentPlaceholder:"#subnav-opts",itemGroups:t.itemList(),selectedItem:t.selectedItem()},n=void 0!==e.prototype._shouldShowTriggerView;return n&&(i.titlePlaceholder="#subnav-title",i.hideSelectedItem=!0,i.changeViewText=t.getChangeViewText()),i})}};return h}(GH.RapidBoard.WorkSubnavigatorContextProvider,GH.RapidBoard.ReportSubnavigatorContextProvider,GH.tpl.subnavigator,GH.RapidBoard.State,require("jira-agile/rapid/work/quick-filters-bridge"),require("jira-agile/features/feature-flags"),require("jira/featureflags/feature-manager"),require("jira-agile/rapid/const/PageMode"),require("jira/atlaskit/breadcrumbs"));;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:analytics', location = 'jira-help-tips-module/util/analytics.js' */
define("jira-help-tips/util/analytics",function(){"use strict";function t(t){return t=""+(t||""),t.replace(/\./g,"-")}function e(){return AJS&&AJS.EventQueue}function i(i,n){if(e()&&n&&n.attributes.id){var r={},u=t(n.attributes.id),a="";n.attributes.eventPrefix&&(a=n.attributes.eventPrefix,"."!==a.charAt(a.length-1)&&(a+=".")),r.name=a+"helptips."+u+"."+i,r.properties={},e().push(r)}}return{clean:t,send:i}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager', location = 'jira-help-tips-module/js/HelpTipManager.js' */
define("jira-help-tips/feature/help-tip-manager",["require"],function(s){var e=s("jquery"),i=s("underscore"),t=s("wrm/context-path"),n=s("wrm/data"),r=t()+"/rest/helptips/1.0/tips",d=n.claim("com.atlassian.plugins.helptips.jira-help-tips:help-tip-manager.JiraHelpTipData"),a={dismissedTipIds:[],sequences:[],loaded:e.Deferred(),url:function(){return r},sync:function(s,i){var t=e.Deferred();return s||(s="get"),i||(i=null),"get"===s&&d&&d.dismissed?t.resolve(d.dismissed):e.ajax(this.url(),{type:s,dataType:"json",contentType:"application/json",data:i&&JSON.stringify(i),processData:!1}).done(function(s){t.resolve(s)}).fail(function(){t.reject()}),t.promise()},fetch:function(){var s=this.sync();return s.done(e.proxy(function(s){e.merge(this.dismissedTipIds,s),this.loaded.resolve()},this)),s.promise()},show:function(s){this.loaded.done(s)},dismiss:function(s){var e=s.attributes.id;e?(this.dismissedTipIds.push(e),this.sync("post",{id:e})):s._dismissed=!0},undismiss:function(s){var i=s.attributes.id;i?(this.dismissedTipIds.splice(e.inArray(i,this.dismissedTipIds),1),this.sync("delete",{id:i})):s._dismissed=!1},isDismissed:function(s){var i=s.attributes.id;return i?e.inArray(i,this.dismissedTipIds)>=0:s._dismissed},clearSequences:function(){this.sequences=[]},hideSequences:function(){i.each(this.sequences,function(s){s.view.dismiss()})},showSequences:function(){if(!this._showStarted){var s=this,t=0;this._showStarted=!0,e.when(this.loaded).done(function(){s.sequences.sort(function(s,e){return s.attributes.weight-e.attributes.weight}),s.sequences=i.filter(s.sequences,function(e){var n=i.indexOf(s.dismissedTipIds,e.attributes.id)===-1;return n&&(e.attributes.position=t++),n}),s.sequences.length>0&&(i.last(s.sequences).attributes.showCloseButton=!0,s.sequences[0].show({force:!0})),s._showStarted=!1})}}};return a});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'jira-help-tips-module/templates/HelpTip.soy.js' */
if("undefined"==typeof AJS)var AJS={};"undefined"==typeof AJS.Templates&&(AJS.Templates={}),"undefined"==typeof AJS.Templates.HelpTip&&(AJS.Templates.HelpTip={}),AJS.Templates.HelpTip.tipContent=function(e,t){return(e.title?'<h2 class="helptip-title">'+soy.$$escapeHtml(e.title)+"</h2>":"")+'<p class="helptip-body">'+soy.$$filterNoAutoescape(e.bodyHtml)+"</p>"+(e.url?'<p><a class="helptip-link" href="'+soy.$$escapeHtml(e.url)+'" target="_blank">'+(e.linkText?soy.$$escapeHtml(e.linkText):soy.$$escapeHtml("Learn more"))+"</a></p>":"")+AJS.Templates.HelpTip.tipFooter(e)},AJS.Templates.HelpTip.tipFooter=function(e,t){return'<form class="tip-footer">'+AJS.Templates.HelpTip.nextButton(e)+AJS.Templates.HelpTip.closeButton(e)+AJS.Templates.HelpTip.sequencePaging(e)+"</form>"},AJS.Templates.HelpTip.nextButton=function(e,t){return""+(e.showNextButton?'<button class="aui-button helptip-next" type="button">'+(e.nextButtonText?soy.$$escapeHtml(e.nextButtonText):soy.$$escapeHtml("Next"))+"</button>":"")},AJS.Templates.HelpTip.closeButton=function(e,t){return""+(e.showCloseButton?'<button class="aui-button '+(e.showNextButton?" aui-button-link ":"")+' helptip-close" type="button">'+(e.closeButtonText?soy.$$escapeHtml(e.closeButtonText):soy.$$escapeHtml("Close"))+"</button>":"")},AJS.Templates.HelpTip.sequencePaging=function(e,t){return""+(e.isSequence&&e.length>1?'<span class="helptip-sequence-paging">'+soy.$$escapeHtml(e.position+1)+"/"+soy.$$escapeHtml(e.length)+"</span>":"")};;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:help-tip', location = 'jira-help-tips-module/js/HelpTip.js' */
define("jira-help-tips/feature/help-tip",["require"],function(i){"use strict";function t(){return!1}function e(){return!0}function s(){return"jira-help-tip-"+d+c++}var n=i("jquery"),o=i("underscore"),h=i("jira-help-tips/feature/help-tip-manager"),l=i("jira-help-tips/util/analytics"),r=i("aui/inline-dialog"),a=AJS.Popups,u=AJS.Templates.HelpTip,c=0,d=(new Date).getTime(),p="jira-help-tip aui-help",f=function(i){var t;this.attributes=n.extend({},i),this.attributes.id||(this.attributes.id=!1),this.attributes.callbacks||(this.attributes.callbacks={}),this.attributes.isSequence&&(this.attributes.weight||(this.attributes.weight=Number.MAX_VALUE),h.sequences.push(this)),this.attributes.body&&(this.attributes.bodyHtml=this.attributes.body,delete this.attributes.body),this.cid=s(),t=this.attributes.anchor,delete this.attributes.anchor,this.view=t?new b(this,t):new m(this)};n.extend(f.prototype,{show:function(i){i=i||{};var t=this,e=n.Deferred();if(this.attributes.callbacks.beforeShow){var s=this.attributes.callbacks.beforeShow();s&&o.isFunction(s.done)?s.done(e.resolve):e.resolve()}else e.resolve();e.done(function(){h.show(function(){t.isDismissed()||(!i.force&&a&&a.DisplayController?a.DisplayController.request({name:t.id,weight:1e3,show:function(){t.view.show()}}):t.view.show(),l.send("shown",t))})})},dismiss:function(){var i=l.clean(arguments[0]||"programmatically");this.view.dismiss(),"close-button"===i&&this.attributes.isSequence&&h.clearSequences(),this.isDismissed()||(h.dismiss(this),l.send("dismissed."+i,this))},isVisible:function(){return this.view.$el.is(":visible")},isDismissed:function(){return h.isDismissed(this)},refresh:function(){this.isDismissed()||this.view.refresh()},hide:function(){this.isDismissed()||this.view.dismiss()},showNextHelpTipInSequence:function(){this.view.clickNext()}});var b=function(i,t){this.initialize(i,t)};n.extend(b.prototype,{initialize:function(i,e){this.model=i,this.anchorSelector=e,this.anchor=n(e),this._initDialog(e),n(document).bind("showLayer",function(e,s,o){"inlineDialog"===s&&o.id===i.cid&&(r.current=null,n(document.body).unbind("click."+i.cid+".inline-dialog-check"),o._validateClickToClose=t,o.hide=t)})},show:function(){this.beforeHide=t,this.popup.show()},refresh:function(){var i=n(this.anchorSelector);i.is(":visible")?i.get(0)!==this.anchor.get(0)?this.changeAnchor(i):this.isVisible()?this.popup.refresh():this.show():this.dismiss()},changeAnchor:function(i){var t=this.isVisible();this.dismiss(),this.$el.remove(),this.anchor=i,this._initDialog(i),t&&this.show()},dismiss:function(){this.beforeHide=e,this._popupHide()},clickNext:function(){var i=n(this.$el).find(".helptip-next");i.length>0&&i.click()},isVisible:function(){return this.$el.is(":visible")},_initDialog:function(i){var e=this,s=this.model;this.popup=r(n(i),s.cid,o.bind(this._createDialog,this),o.extend({container:"#content",noBind:!0,preHideCallback:function(){return e.beforeHide()},calculatePositions:function(i,t,e,s){var o=r.opts.calculatePositions(i,t,e,s),h=n(this.container),l=h.offset();return"auto"!==o.popupCss.left&&(o.popupCss.left-=l.left,o.popupCss.right="auto"),o.popupCss.top-=l.top,o},addActiveClass:!1,initCallback:s.attributes.callbacks.init,hideCallback:s.attributes.callbacks.hide,persistent:!0},s.attributes.inlineDialogOpts)),this._popupHide=this.popup.hide,this.popup.hide=t,this.$el=n(this.popup[0]),this.$el.addClass(p)},_createDialog:function(i,t,e){var s=this,r=h.sequences,a=this.model.attributes.position,c=this.model.attributes.isSequence;i.removeClass("contents"),i.html(n(u.tipContent(o.extend({showNextButton:c&&r.length>1&&a+1<r.length,length:r.length,position:a,showCloseButton:!0},this.model.attributes)))),i.unbind("mouseover mouseout"),i.find(".helptip-link").click(function(){l.send("learn-more.clicked",s.model)}),i.find(".helptip-close").click(function(i){i.preventDefault(),s.model.dismiss("close-button")}),i.find(".helptip-next").click(function(i){i.preventDefault(),s.model.dismiss("next-button");var t=a+1;r[t]&&r[t].show({force:!0})}),e()}});var m=function(i){this.initialize(i)};return n.extend(m.prototype,{initialize:function(){this.$el=n("<div></div>"),this.$el.addClass(p)},show:function(){},dismiss:function(){}}),f});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:initialiser', location = 'jira-help-tips-module/js/initialiser.js' */
define("jira-help-tips/page/initialiser",["jira-help-tips/feature/help-tip-manager","jira/util/users/logged-in-user","underscore"],function(e,i,n){function r(){i.isAnonymous()||e.fetch()}return{init:n.once(r)}});;
;
/* module-key = 'com.atlassian.plugins.helptips.jira-help-tips:common', location = 'jira-help-tips-module/js/legacy.js' */
!function(){"use strict";AJS.namespace("AJS.HelpTip",null,require("jira-help-tips/feature/help-tip")),AJS.namespace("AJS.HelpTip.Manager",null,require("jira-help-tips/feature/help-tip-manager")),require("jira-help-tips/page/initialiser").init()}();;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-header-async', location = 'node_modules/@atlassian/aui/src/js/aui/header-async.js' */
("undefined"===typeof window?global:window).__b85c25eb273a1b11a40084d04bbc6270=function(){var b={};"use strict";Object.defineProperty(b,"__esModule",{value:!0});var a=__906ea2ee8af7ec57662c322a720a678d,c=a&&a.__esModule?a:{"default":a},a=(a=__c1ce1f1e3e613f564fc234ff043570f1)&&a.__esModule?a:{"default":a},a=(0,a.default)("aui-header",{type:a.default.type.CLASSNAME,created:function(a){(0,c.default)(a)}});b.default=a;return b=b["default"]}.call(this);;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'atlassian-nav-links-plugin/appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape('Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml('Application Links') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml('Shortcuts') + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape('Loading\x26hellip;') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.loading.soyTemplateName = 'navlinks.templates.appswitcher.loading';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml('Linked Applications') + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy79 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy79, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList87 = opt_data.list;
  var linkListLen87 = linkList87.length;
  for (var linkIndex87 = 0; linkIndex87 < linkListLen87; linkIndex87++) {
    var linkData87 = linkList87[linkIndex87];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData87.href) + '" title="' + soy.$$escapeHtml(linkData87.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData87.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  var loadingContent__soy98 = '' + navlinks.templates.appswitcher.loading(null);
  var triggerContent__soy100 = '' + navlinks.templates.appswitcher.trigger(null);
  output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy98, extraClasses: 'aui-style-default', extraAttributes: {'data-environment': {}, 'data-is-switcher': 'true'}}, trigger: {showIcon: false, content: triggerContent__soy100, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.suggestionApp = function(opt_data, opt_ignored) {
  var output = '';
  var href__soy106 = opt_data.isBillingSystemEnabled == true ? opt_data.suggestionApp.billingSystemDiscoveryUrl : opt_data.suggestionApp.discoveryUrl;
  output += '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '" href="' + soy.$$escapeHtml(href__soy106) + '" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.suggestionApp.appName) + '-product-icon" title="' + soy.$$escapeHtml(href__soy106) + '" target="_blank"></a><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.suggestionApp.appDesc) + '</div></li>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher.suggestionApp';
}


navlinks.templates.appswitcher.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml('Try other Atlassian apps') + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml('Don\x27t show this again') + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher.suggestionApps';
}


navlinks.templates.appswitcher.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applications.soyTemplateName = 'navlinks.templates.appswitcher.applications';
}


navlinks.templates.appswitcher.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param141 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList149 = opt_data.list;
    var linkListLen149 = linkList149.length;
    for (var linkIndex149 = 0; linkIndex149 < linkListLen149; linkIndex149++) {
      var linkData149 = linkList149[linkIndex149];
      param141 += navlinks.templates.appswitcher.applicationsSectionItem(soy.$$augmentMap(linkData149, {showDescription: opt_data.showDescription}));
    }
    param141 += '</ul>';
    output += aui.dropdown2.section({content: param141});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher.applicationsSection';
}


navlinks.templates.appswitcher.applicationsSectionItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsSectionItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsSectionItem';
}


navlinks.templates.appswitcher.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape('Configure\x26hellip;') + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.adminSection.soyTemplateName = 'navlinks.templates.appswitcher.adminSection';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'atlassian-nav-links-plugin/appswitcher/appswitcher.js' */
var APPSWITCHER_TRIGGER_CLICK = "appswitcher.trigger.click";
var APPSWITCHER_DROPDOWN_SHOW = "appswitcher.dropdown.show";
var APPSWITCHER_DROPDOWN_DISPLAY_ERROR = "appswitcher.dropdown.display.error";
var APPSWITCHER_APP_LINK_CLICK = "appswitcher.app.link.click";
var APPSWITCHER_CONFIGURE_LINK_CLICK = "appswitcher.configure.link.click";

(function ($, NL) {
    var APP_SUGGESTION_KEY = 'isAppSuggestionAvailable';
    var SITE_ADMIN_KEY = 'isSiteAdminUser';
    var USER_ADMIN_KEY = 'isUserAdmin';
    var SWITCHER_SELECTOR = '#app-switcher';

    NL.AppSwitcher = function (options) {
        var ADMIN_EDIT_PATH = AJS.contextPath() + "/plugins/servlet/customize-application-navigator";
        var GLOBAL_BILLING_SYSTEM_DARK_FEATURE_KEY = "unified.usermanagement";
        var that = this;
        this.$dropdown = null;

        options = $.extend({
            dropdownContents: null
        }, options);

        this.getLinks = function () {
            return $.ajax({
                url: AJS.contextPath() + '/rest/menu/latest/appswitcher',
                cache: false,
                dataType: 'json'
            }).done(this.updateDropdown).fail(this.showError);
        };

        this.getDropdown = function () {
            if (!this.$dropdown) {
                this.$dropdown = $(options.dropdownContents);
                this.envData = this.$dropdown.data('environment');
            }
            return this.$dropdown;
        };

        this.updateDropdown = function (data) {
            this.getDropdown().html(navlinks.templates.appswitcher.applications({
                apps: data,
                showAdminLink: this.envData[USER_ADMIN_KEY],
                adminLink: ADMIN_EDIT_PATH
            }));

            this.bindAnalyticsHandlers();
            if (this.envData[APP_SUGGESTION_KEY] === true) {
                this.handleSuggestionApps(data);
            }
        }.bind(this);

        this.bindAnalyticsHandlers = function () {
            $(".app-switcher-trigger").on("click", function () {
                AJS.trigger("analyticsEvent", {name: APPSWITCHER_TRIGGER_CLICK});
            });

            $("#app-switcher").on("aui-dropdown2-show", function () {
                AJS.trigger("analyticsEvent", {name: APPSWITCHER_DROPDOWN_SHOW});
            });

            $('#app-switcher .nav-link').on('click', function () {
                var product = "custom";
                var productLink = $(this).find("a");
                var url = productLink.attr("href");
                var hostname = window.location.hostname;

                if (url.indexOf(hostname + "/wiki") > -1) {
                    product = "confluence";
                } else if (url.indexOf(hostname + "/build") > -1) {
                    product = "bamboo";
                } else if (url.indexOf(hostname) > -1) {
                    product = "jira";
                }

                AJS.trigger("analyticsEvent", {
                    name: APPSWITCHER_APP_LINK_CLICK,
                    data: {product: product}
                });
            });

            $('.nav-link-edit-wrapper').on('click', function () {
                AJS.trigger("analyticsEvent", {name: APPSWITCHER_CONFIGURE_LINK_CLICK});
            })
        };

        this.isBillingSystemEnabled = function () {
            return (this.envData[SITE_ADMIN_KEY] === true) && AJS.DarkFeatures.isEnabled(GLOBAL_BILLING_SYSTEM_DARK_FEATURE_KEY);
        };

        this.handleSuggestionApps = function (data) {

            var installedApps = _.map(data, function (app) {
                return app.applicationType.toLowerCase();
            });

            var $suggestionApps = $("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");
            $suggestionApps.html(navlinks.templates.appswitcher.suggestionApps);

            var apps = $suggestionApps.find('.suggestion-apps');
            var hasSuggestionApps = false;
            _.each(suggestions, function (value) {
                if (!_.contains(installedApps, value.appName)) {
                    hasSuggestionApps = true;
                    apps.append(navlinks.templates.appswitcher.suggestionApp({
                        suggestionApp: value,
                        isBillingSystemEnabled: that.isBillingSystemEnabled()
                    }));
                }
            });

            if (!hasSuggestionApps) return;

            $("#app-switcher").append($suggestionApps);

            $('.app-discovery-suggestion-app').click(function () {
                var $suggestionAppLink = $(this).find("a");
                var eventName;
                if (that.envData[SITE_ADMIN_KEY] === true) {
                    eventName = 'appswitcher.discovery.siteadmin.select.inproduct.';
                } else {
                    eventName = 'appswitcher.discovery.user.select.';
                }
                eventName = eventName + $suggestionAppLink.attr("id").toLowerCase();
                AJS.trigger("analytics", {name: eventName});
            });

            $('.app-discovery-suggestion-app').hover(function () {
                $(this).find("a").removeClass("active").removeClass("aui-dropdown2-active");
            });

            $('.app-discovery-cancel-button').click(function () {
                AJS.trigger("analytics", {name: "appswitcher.discovery.nothanks.button.click"});
                storeUserStorageData(KEY_NO_THANKS, "true");
                $suggestionApps.remove();
            });
        };

        this.showError = function () {
            AJS.trigger("analyticsEvent", {name: APPSWITCHER_DROPDOWN_DISPLAY_ERROR});
            this.getDropdown()
                .html(navlinks.templates.appswitcher.error())
                .off('.appswitcher')
                .on('click.appswitcher', '.app-switcher-retry', $.proxy(that.retryLoading, that));
        }.bind(this);

        this.retryLoading = function (e) {
            this.getDropdown().html(navlinks.templates.appswitcher.loading());
            this.getLinks();
            e && e.stopPropagation();
        };

        $(".app-switcher-trigger").on("click", function () {
            if (!this.$dropdown) {
                this.getLinks();
            }
        }.bind(this));
    };

    var KEY_NO_THANKS = "key-no-thanks";
    var suggestions = [
        {
            appName: "jira",
            appDesc: "Issue & Project Tracking Software",
            discoveryUrl: 'https://www.atlassian.com/software/jira',
            billingSystemDiscoveryUrl: '/admin/billing/addapplication'
        },
        {
            appName: "confluence",
            appDesc: "Collaboration and content sharing",
            discoveryUrl: 'https://www.atlassian.com/software/confluence',
            billingSystemDiscoveryUrl: '/admin/billing/addapplication?product=confluence.ondemand'
        }];

    var storeUserStorageData = function (key, value) {
        $.ajax({
            url: AJS.contextPath() + '/rest/menu/latest/userdata/',
            type: "PUT",
            contentType: "application/json",
            data: JSON.stringify({
                key: key,
                value: value
            })
        });
    };

    $(function () {
        if ($(SWITCHER_SELECTOR).data('is-switcher') === true) {
            new NL.AppSwitcher({
                dropdownContents: SWITCHER_SELECTOR
            });
        }
    })
}(jQuery, window.NL = (window.NL || {})));;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'jira-header-plugin/soy/headerDropdown.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Menu&&(JIRA.Templates.Menu={}),"undefined"==typeof JIRA.Templates.Menu.Dropdowns&&(JIRA.Templates.Menu.Dropdowns={}),JIRA.Templates.Menu.Dropdowns.dropdown2Fragment=function(e,s){for(var t="",a=e.sections,l=a.length,o=0;o<l;o++){var n=a[o],r=n.items&&n.items.length>0;if(r){t+='<div class="aui-dropdown2-section">'+(n.label?"<strong>"+soy.$$escapeHtml(n.label)+"</strong>":"")+"<ul class='aui-list-truncate'"+(n.id?' id="'+soy.$$escapeHtml(n.id)+'"':"")+(n.style?' class="'+soy.$$escapeHtml(n.style)+'"':"")+">";for(var p=n.items,i=p.length,m=0;m<i;m++){var c=p[m];t+=JIRA.Templates.Menu.Dropdowns.dropdown2Item(c)}t+="</ul></div>"}}return t},JIRA.Templates.Menu.Dropdowns.dropdown2Item=function(e,s){var t="<li"+(e.id?' id="'+soy.$$escapeHtml(e.id)+'"':"")+(e.style?' class="'+soy.$$escapeHtml(e.style)+'"':"")+'><a href="'+soy.$$escapeHtml(e.url)+'"'+(e.id?' id="'+soy.$$escapeHtml(e.id)+'_lnk"':"")+(e.title?' title="'+soy.$$escapeHtml(e.title)+'"':"")+' class="'+(e.iconUrl?"aui-icon-container":"")+(e.parameters&&e.parameters.class?" "+soy.$$escapeHtml(e.parameters.class):"")+'"';if(e.parameters)for(var a=soy.$$getMapKeys(e.parameters),l=a.length,o=0;o<l;o++){var n=a[o];t+="class"!=n?" "+soy.$$escapeHtml(n)+'="'+soy.$$escapeHtml(e.parameters[n])+'"':""}return t+=">"+(e.iconUrl?'<img class="icon" src="'+soy.$$escapeHtml(e.iconUrl)+'" />':"")+soy.$$escapeHtml(e.label)+"</a></li>"};;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'jira-header-plugin/js/init-dropdown2.js' */
require(["jira/ajs/ajax/smart-ajax","jira/skate","jira/util/data/meta","wrm/context-path","jquery"],function(a,e,o,n,t){t(document).on("aui-responsive-menu-item-created",function(a){var e=a.originalEvent.detail.originalItem,o=a.originalEvent.detail.newItem,n=!!t(e).find(".aui-dropdown2-ajax").length;n&&t(o).find("a").addClass("aui-dropdown2-ajax")}),e("aui-dropdown2-ajax",{type:e.type.CLASSNAME,attached:function(e){var r=t(document.getElementById(e.getAttribute("aria-controls")));!r.length&&e.hasAttribute("aria-owns")&&"undefined"!=typeof console&&console.warn&&console.warn('Deprecation warning: Since AUI 5.9.4 "aria-owns" attribute has been change for "aria-controls"');var d=r.data("aui-dropdown2-ajax-key");r.on("aui-dropdown2-show.aui-dropdown2-ajax",function(e,t){r.trigger("aui-dropdown2-show-before"),d?(r.empty(),r.addClass("aui-dropdown2-loading"),a.makeRequest({url:n()+"/rest/api/1.0/menus/"+d,data:{inAdminMode:o.getBoolean("in-admin-mode")},dataType:"json",cache:!1,success:function(a){r.removeClass("aui-dropdown2-loading"),r.html(JIRA.Templates.Menu.Dropdowns.dropdown2Fragment(a)),r.trigger("aui-dropdown2-show-after")}})):r.trigger("aui-dropdown2-show-after")}),e.setAttribute("data-dropdown2-loaded",""),t(e).trigger("jira-header-plugin-dropdown2-menu-loaded",{bubbles:!0})},detached:function(a){var e=t(document.getElementById(a.getAttribute("aria-controls")));e.off("aui-dropdown2-show.aui-dropdown2-ajax")}})});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:jira-header', location = 'jira-header-plugin/js/app-switcher-analytics.js' */
require(["jquery"],function(i){i(document).on("aui-dropdown2-show-before","#app-switcher",function(){AJS.trigger("analyticsEvent",{name:"navigation.header.appswitcher.open"})}),i(document).on("click","#app-switcher a, #app-switcher button",function(n){var e,t=i(n.target),a=t.closest("li").index();t.is(".nav-link-edit")?e="configure":t.is(".app-discovery-link")?e=this.id?this.id:"unknown.app.discovery":t.is(".app-discovery-cancel-button")?(e="dont.show",a=0):e="application",AJS.trigger("analyticsEvent",{name:"navigation.header.appswitcher.click",data:{position:a,linkType:e}})}),i(document).on("aui-dropdown2-hide","#app-switcher",function(){AJS.trigger("analyticsEvent",{name:"navigation.header.appswitcher.close"})})});;
;
/* module-key = 'com.atlassian.jira.jira-header-plugin:analytics-header', location = 'jira-header-plugin/js/header-analytics.js' */
require(["jira/util/logger","jquery"],function(n,e){function t(n,e){var t=void 0;return n.forEach(function(n){n.id===e&&(t=n.analyticEventKey)}),t}var i="jira.navigation.header.",o="jira.header.analytics.event",r=function(n,e){return n.some(function(n){return n.id===e})},a=function(e,r,a){var c=t(r,e),u=i+c+a;AJS.EventQueue.push({name:u}),n.trace(o)},c=e(document);c.on("click","#logo",function(){AJS.EventQueue.push({name:i+"home"}),n.trace(o)}),c.on("click","#create_link",function(){AJS.EventQueue.push({name:i+"createissue.click"})});var u=[{id:"home_link-content",analyticEventKey:"dashboards"},{id:"browse_link-content",analyticEventKey:"projects"},{id:"find_link-content",analyticEventKey:"issues"},{id:"greenhopper_menu-content",analyticEventKey:"boards"},{id:"plugins-jira-webitem-main-content",analyticEventKey:"portfolio"},{id:"system-help-menu-content",analyticEventKey:"help"},{id:"system-admin-menu-content",analyticEventKey:"admin"}],d="#system-help-menu-content, #user-options-content, #system-admin-menu-content, #app-switcher",s=u.map(function(n){return"#"+n.id}).join(", ");c.on("aui-dropdown2-show",s,function(){var n=e(this).attr("id");r(u,n)&&a(n,u,".open")}),c.on("aui-dropdown2-hide",s,function(){var n=e(this).attr("id");r(u,n)&&a(n,u,".close")}),c.on("aui-dropdown2-show",d,function(){var n=e(this);n.trigger("aui-dropdown2-show-before"),n.trigger("aui-dropdown2-show-after")});var l=u.reduce(function(n,e){return n+"a.aui-dropdown2-trigger[aria-controls="+e.id+"], "},"");c.on("click",l,function(){var n=this.getAttribute("aria-controls");r(u,n)&&a(n,u,".click")}),c.on("click",".aui-dropdown2 .aui-dropdown2-section a",function(r){var a=e(r.target).closest(s).first();if(null!==a){var c=a.find("a").index(r.target),d=a.attr("id"),l=t(u,d),p=e(this).parents("ul").attr("id"),m={name:i+l+".item.click",properties:{itemIndex:c}};p&&(m.properties.itemType=p),AJS.EventQueue.push(m),n.trace(o)}})});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'atlassian-nav-links-plugin/header/cog.js' */
var NavLinks = (function (NavLinks) {

    NavLinks.ApplicationHeader = function (ApplicationHeader) {

        ApplicationHeader.Cog = (function () {

            var _get = function () {

                var jiraSection = AJS.$("#system-admin-menu-content");
                if (jiraSection.length > 0) {
                    return jiraSection;
                }

                var confluenceSection = AJS.$("#admin-menu-link-content");
                if (confluenceSection.length > 0) {
                    return confluenceSection;
                }

                // Bamboo
                return AJS.$("#bamboo\\.global\\.header-admin\\.menu");
            };

            return {
                getDropdown: _get
            };
        }());
        return ApplicationHeader;
    }(NavLinks.ApplicationHeader || {});

    return NavLinks;
}(NavLinks || {}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'atlassian-nav-links-plugin/adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: 'Other applications', content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'atlassian-nav-links-plugin/adminshortcuts/adminnavlinks.js' */
var NavLinks = (function (NavLinks) {

    var requestInFlight = false;

    NavLinks.AdminShortcuts = (function () {

        var _requestLinks = function () {
            return AJS.$.ajax({
                url: AJS.contextPath() + '/rest/menu/latest/admin',
                cache: false,
                dataType: 'json'
            });
        };

        var trackAnalytics = function () {
            AJS.$("#nl-remote-admin-section").on('click', 'a', function () {
                NL.trackEvent('remoteAdminItemSelected', NL.getCurrentApplication(), $(this).attr('href'));
            });
        };

        return {
            renderLoading: function() {
                var $loading = AJS.$(navlinks.templates.appswitcher.loading());
                NavLinks.ApplicationHeader.Cog.getDropdown().append($loading);
            },
            render: function () {
                if (!AJS.$('#nl-remote-admin-section').length && !requestInFlight) {
                    NavLinks.AdminShortcuts.renderLoading();
                    requestInFlight = true;
                    _requestLinks().done(function (linkData) {

                        // filter links to exclude the local admin link
                        linkData = _.reject(linkData, function (link) {
                            return link['local'] === true;
                        });

                        if (linkData.length) {
                            // if we have remote admin links, render them in a new dropdown section
                            var renderedTemplate = navlinks.templates.adminshortcuts.section({links: linkData});
                            NavLinks.ApplicationHeader.Cog.getDropdown().append(renderedTemplate);

                            trackAnalytics();
                        }
                    }).always(function() {
                        requestInFlight = false;
                        NavLinks.ApplicationHeader.Cog.getDropdown().find('.app-switcher-loading').remove();
                    });
                }
            }
        };
    }());

    return NavLinks;
}(NavLinks || {}));;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts', location = 'atlassian-nav-links-plugin/adminshortcuts/adminshortcuts.js' */
AJS.$(function () {
    if (AJS.DarkFeatures && AJS.DarkFeatures.isEnabled('rotp.admin.shortcuts')) {
        NavLinks.ApplicationHeader.Cog.getDropdown().on(
            "aui-dropdown2-show", function() {
                NavLinks.AdminShortcuts.render();
            }
        );
    }
});;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'atlassian-nav-links-plugin/projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.projectshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.localShortcuts && opt_data.localShortcuts.length > 0) ? navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}) : '') + ((opt_data.remoteShortcuts != null) ? (opt_data.remoteShortcuts.length > 0) ? '<h2 class="projectshortcuts-heading">Related Links</h2>' + navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentMap(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'})) : '' : navlinks.templates.projectshortcuts.dialogLoading(null));
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContent.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContent';
}


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_ignored) {
  return '<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="' + soy.$$escapeHtml(opt_data.logoUrl) + '"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2></div><div class="project-content-wrapper">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.headingWrapper.soyTemplateName = 'navlinks.templates.projectshortcuts.headingWrapper';
}


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output += '<li' + ((shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '') + '>' + navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcuts.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcuts';
}


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcut.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcut';
}


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="projectshortcuts-loading">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogLoading.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogLoading';
}
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'atlassian-nav-links-plugin/projectshortcuts/projectshortcuts.js' */
(function ($, NL) {
    var dialog,
        dialogDataCache = {},
        triggerDataEntityKey = 'key',
        triggerDataEntityName = 'name',
        triggerDataEntityType = 'entity-type';

    function showShortcutsDialog(e) {
        var $trigger = $(this),
            projectKey = $trigger.data(triggerDataEntityKey),
            projectName = $trigger.data(triggerDataEntityName),
            projectEntityType = $trigger.data(triggerDataEntityType);

        if (typeof projectKey === 'undefined') {
            return;
        }

        e.preventDefault();

        dialog = new AJS.Dialog({
            width: 600,
            keypressListener: function (e) {
                if (e.which == jQuery.ui.keyCode.ESCAPE) {
                    dialog.remove();
                }
            },
            id: "project-shortcuts-dialog"
        })
            .addCancel('Close', function () {
                dialog.remove();
            })
            .addPanel('',
                navlinks.templates.projectshortcuts.headingWrapper({
                    title: projectName,
                    logoUrl: getLogoUrl(),
                    contentHtml: navlinks.templates.projectshortcuts.dialogLoading({text: 'Retrieving links'})
                }))
            .show();

        updateDialogHeight(dialog);

        if (!dialogDataCache[projectKey]) {
            dialogDataCache[projectKey] = {
                entity: {
                    title: projectName
                },
                localShortcuts: null,
                remoteShortcuts: null
            };
            getData(AJS.contextPath() + '/rest/project-shortcuts/1.0/local/' + projectKey, {entityType: projectEntityType}).done(updateLocal);
            getData(AJS.contextPath() + '/rest/project-shortcuts/1.0/remote/' + projectKey, {entityType: projectEntityType}).done(updateRemote).fail(function () {
                var $wrapper = dialog.getCurrentPanel().body.find('.project-content-wrapper');
                $wrapper.find('.projectshortcuts-loading').remove();
                AJS.messages.error($wrapper, {
                    body: "Could not retrieve remote project shortcuts",
                    closeable: false
                });
                updateDialogHeight(dialog);
            });
        } else {
            updateShortcutsDialog(dialogDataCache[projectKey]);
        }

        function updateLocal(data) {
            dialogDataCache[projectKey].localShortcuts = data.shortcuts;
            updateShortcutsDialog(dialogDataCache[projectKey]);
        }

        function updateRemote(data) {
            dialogDataCache[projectKey].remoteShortcuts = data.shortcuts;
            updateShortcutsDialog(dialogDataCache[projectKey]);
        }
    }

    function getLogoUrl() {
        return $(".project-shortcut-dialog-trigger img").attr("src");
    }

    function updateShortcutsDialog(data) {
        if (data.localShortcuts) { // Don't update the dialog until we have entity data and local links (stops the dialog from displaying remote links only if remote links has returned first)
            dialog.getCurrentPanel().html(
                navlinks.templates.projectshortcuts.headingWrapper({
                    title: data.entity.title,
                    logoUrl: getLogoUrl(),
                    contentHtml: navlinks.templates.projectshortcuts.dialogContent(data)
                }));

            updateDialogHeight(dialog);
        }
    }

    function truncateDesc(desc) {

        var trunc = 210;
        if (!desc || desc.length <= trunc)
            return desc;

        var i = trunc;
        while (i > 0 && desc.charAt(i) != " ") {
            i--;
        }
        if (i == 0) {
            i = trunc;
        }

        desc = desc.substring(0, i);
        if (desc.length >= i)
            desc = desc + "...";
        return desc;
    }

    /**
     * Since AJS.Dialog's height updating is completely broken we need to do it custom for our dialog
     * @param dialog
     */
    function updateDialogHeight(dialog) {
        var $dialog = dialog.popup.element,
            $body = $dialog.find('.dialog-panel-body'),
            $components = $dialog.find('.dialog-components');

        $body.height('auto');
        $dialog.height($components.outerHeight() - 1);
        $('.aui-shadow').remove();
    }

    function getData(url, data) {
        return $.ajax({
            url: url,
            cache: false,
            data: data,
            dataType: 'json'
        });
    }

    $(document).on('click', '.project-shortcut-dialog-trigger', showShortcutsDialog);
}(jQuery, window.NL = (window.NL || {})));
;
;
/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'atlassian-nav-links-plugin/popups/DisplayController.js' */
AJS.Popups = AJS.Popups || {};

/**
 * Coordinate the display of popup dialogs requested from other functions in the application.
 *
 * Its responsibility is to organise the display of these popups so that that they do not come into conflict with
 * each other.
 */
AJS.Popups.DisplayController = function () {

    var _popupDialogRegistry = [];
    var _renderPerformed = false;
    var _dialogShown = false;

    AJS.toInit(function () {
        setTimeout(function () {
            AJS.Popups.DisplayController.render();
        }, 0);
    });

    return {

        /**
         * Request the display of a popup dialog to this controller.
         *
         * @param popupDialog An {Object} containing a request to display a popup dialog.
         */
        request: function (popupDialog) {
            _popupDialogRegistry.push(popupDialog);
            if (_renderPerformed && _dialogShown === false) {
                this.render();
            }
        },

        /**
         * Renders a popup dialog on screen.
         *
         * If more than one popup has been requested, it will render the one that has the lowest "weight",
         * if no popups have been requested, no dialog will be displayed.
         *
         */
        render: function () {
            _popupDialogRegistry.sort(function (first, second) {
                return first.weight - second.weight;
            });

            _renderPerformed = true;

            if (_popupDialogRegistry.length !== 0) {
                _dialogShown = true;
                _popupDialogRegistry[0].show();
            }
        }
    };
}();;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-web-plugin:issue-link-web-link', location = 'jira-issue-link-web-module/js/issuelink-weblink.js' */
define("jira-issue-link/web-link",["jquery"],function(n){function i(){c.attr("src",""),e.val(""),o.css("background-image",""),r=a(o.val()),r&&(setTimeout(function(){o.addClass("loading")},0),l=setTimeout(function(){o.removeClass("loading")},3e3),c.attr("src",r))}function a(n){var i=n.match(/^([^\/]*\/\/[^\/]+)/)[1];if(i)return i+"/favicon.ico"}var e,o,r,l,c=n("<img>");return c.load(function(){e.val(r),o.css("background-image",'url("'+r+'")'),clearTimeout(l),o.removeClass("loading")}),c.error(function(){clearTimeout(l),o.removeClass("loading")}),{init:function(a){e=n("#web-link-icon-url",a),o=n("#web-link-url",a).bind("change",i),e.val()&&o.css("background-image","url("+e.val()+")")}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-web-plugin:issue-link-web-link', location = 'jira-issue-link-web-module/js/issuelink-weblink-init.js' */
require(["jira-issue-link/web-link","jquery","jira/util/events","jira/util/events/types"],function(i,n,t,e){t.bind(e.NEW_PAGE_ADDED,function(n,t){i.init(t)}),t.bind(e.NEW_CONTENT_ADDED,function(i,t){n(".issue-link").tooltip({gravity:"s"})})});;
;
/* module-key = 'com.atlassian.jconnect.jconnect-plugin:common', location = 'jira-mobile-connect/js/ViewLocation.js' */
(function($) {

    var global = window,
        JSONP_CALLBACK_NAME = "onJMCGMapsLoad";
        mapsCallbacks = [],
        googleLoaderRequested = false,
        googleMapsRequested = false;

    function runMapsCallbacks() {
        var cb;
        while (cb = mapsCallbacks.shift()) {
            cb();
        }
    }

    function loadMapAndRunCallbacks(callback) {
        var isGoogleMapsPresent = global.google.maps && global.google.maps.LatLng;

        if (isGoogleMapsPresent) {
            //Google Maps is here, run all the pending callbacks
            mapsCallbacks.push(callback);
            runMapsCallbacks();

        } else if (googleMapsRequested) {
            //Google Maps is not present but has been requested -> Add the callback to the maps queue,
            //it will be eventually executed by loadMapAndRunCallbacks()
            mapsCallbacks.push(callback);

        } else {
            //Google Maps is not present nor being requested -> Add the callback to the queue and request it
            googleMapsRequested = true;
            mapsCallbacks.push(callback);
            google.load("maps","3", {other_params:'sensor=false', callback: runMapsCallbacks} );
        }
    }

    function runWithGoogleMaps(callback) {
        if (global.google && global.google.load) {
            //Google Loader is present -> Load GMaps and run the callback
            loadMapAndRunCallbacks(callback);

        } else if (googleLoaderRequested) {
            //Google Loader is not present but has been requested -> Add the callback to the maps queue,
            //it will be eventually executed by loadMapAndRunCallbacks()
            mapsCallbacks.push(callback);

        } else {
            // Google Loader is not present nor requested -> Request it and add the callback to the maps queue
            googleLoaderRequested = true;
            global[JSONP_CALLBACK_NAME] = function() {
                loadMapAndRunCallbacks(callback);
            }
            var script = document.createElement("script");
            script.src = "https://www.google.com/jsapi?callback="+JSONP_CALLBACK_NAME;
            script.type = "text/javascript";
            $("body").append(script);
        }
    }

    function toggleMap(mapField) {
        if (mapField.hasClass("open")) {
            hideMap(mapField);
        } else {
            displayMap(mapField)
        }
    }

    function hideMap(mapField) {
        mapField.removeClass("open");
        mapShown = false;
    }

    function displayMap(mapField) {
        var mapDiv = mapField.find(".jConnectMap");

        mapField.addClass("open");
        mapShown = true;
        if (!map) {
            map = new google.maps.Map(mapDiv.get(0), {
                zoom: 8,
                center: geocodedLocation[1].geometry.location,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            new google.maps.Marker({
                map: map,
                position: geocodedLocation[1].geometry.location,
                title: geocodedLocation[1].formatted_address
            });
        }
    }

    var geocodedLocation,
        map,
        mapShown = false;

    JIRA.bind(JIRA.Events.NEW_CONTENT_ADDED, function (e, context, reason) {
        if (reason == "panelRefreshed" || reason == "pageLoad" ) {

            var mapField = $(".jConnectLocation.ready", context),
                anchor = mapField.find("> a"),
                location,
                geocoder;

            if (anchor.length) {
                runWithGoogleMaps(function() {
                    //Only bind events if not previously bound.
                    //As this code is asynchronous, previous check for the class ready was not enough
                    if (mapField.hasClass("ready")) {

                        location = new google.maps.LatLng(anchor.data('lat'), anchor.data('long'));
                        geocoder = new google.maps.Geocoder();
                        geocoder.geocode({
                            latLng: location
                        }, function(results, status) {
                            if (status == google.maps.GeocoderStatus.OK) {
                                geocodedLocation = results;
                                if (results[1]) {
                                    anchor.text(results[1].formatted_address);
                                }
                            }
                        });

                        mapField.removeClass("ready");
                        map = null; // previous map, if created, was replaced with new content
                        if (mapShown) {
                            displayMap(mapField);
                        }
                        anchor.click(function(e) {
                            e.preventDefault();
                            //Event can be attached multiple times. Prevent other handlers to avoid another
                            //call to toggleMap(), which effectively will hide the map
                            e.stopPropagation();
                            toggleMap(mapField);
                        });
                    }
                });
            };
        }
    });

})(AJS.$);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-dnd-attachment-plugin:attachment-menu-link-init', location = 'jira-dnd-attachment-module/js/menu/initAttachmentMenuLink.js' */
require(["jquery","dndattachment/aui","jira/util/events","dndattachment/util/events/types","dndattachment/integration-register","dndattachment/upload/handler"],function(t,n,e,a,i,c){var l="issueaction-attach-file",u=function(t){t.addClass(l),t.click()},r=function(){var n=t('<input type="file" multiple />');n.change(function(t){e.trigger(a.ATTACHMENT_FOR_PAGE_RECEIVED,{files:n[0].files})}),n.click()},s=function(t){return!!t.data("issuekey")},d=function(e){var a=t(e.target);if(n.trigger("analytics",{name:"issue.dnd.attachment.opsbar.attachFiles.linkClick",data:{}}),!a.hasClass(l)){e.preventDefault();var i=t(".issue-drop-zone").length;i&&!s(a)?r():u(a)}},f=function(){t(document).on("click",".unified-attach-file",function(t){var n=i.getAttachmentMenuHandler();"function"==typeof n&&c.isDefaultExecutor({})?n.call(null,t):d.call(null,t)})},o=function(){f()};t.isReady?o():n.$(o)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-administer-notifier', location = 'templates/repository-shortcuts/admin-notifications.soy' */
// This file was automatically generated from admin-notifications.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Software.RepositoryShortcuts.Notification.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Software == 'undefined') { JIRA.Software = {}; }
if (typeof JIRA.Software.RepositoryShortcuts == 'undefined') { JIRA.Software.RepositoryShortcuts = {}; }
if (typeof JIRA.Software.RepositoryShortcuts.Notification == 'undefined') { JIRA.Software.RepositoryShortcuts.Notification = {}; }
if (typeof JIRA.Software.RepositoryShortcuts.Notification.Templates == 'undefined') { JIRA.Software.RepositoryShortcuts.Notification.Templates = {}; }


JIRA.Software.RepositoryShortcuts.Notification.Templates.notifyAdminProjectLinkFragment = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml("") + '/projects/' + soy.$$escapeHtml(opt_data.projectKey) + '" class="repo-shortcuts-notification__show-me-link">' + soy.$$escapeHtml('See request from project admin') + '</a>';
};
if (goog.DEBUG) {
  JIRA.Software.RepositoryShortcuts.Notification.Templates.notifyAdminProjectLinkFragment.soyTemplateName = 'JIRA.Software.RepositoryShortcuts.Notification.Templates.notifyAdminProjectLinkFragment';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-administer-notifier', location = 'js/repository-shortcuts/services/URLMatcher.js' */
"use strict";define("repository-shortcuts/services/url-matcher",[],function(){return{parseUrl:function(t){function s(t,s,e){if(t&&t[1]&&s.indexOf(t[1])===-1&&e.indexOf(t[2])===-1)return{dvcsOrg:t[1],dvcsRepo:t[2]}}function e(){var e=/https:\/\/bitbucket\.org(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["snippets","account","dashboard"],i=["profile"];return s(r,c,i)}function r(){var e=/https:\/\/github\.com(?:\/([^\/\?#]+)(?:\/([^\/\?#]+))?)?/,r=t.match(e),c=["pulls","issues","notifications","explore","integrations","settings","blog","about","site","security"],i=[];return s(r,c,i)}if("string"!=typeof t)throw new Error("parseUrl expects URLs to be strings");return e()?{dvcsType:"bitbucket",dvcsOrg:e().dvcsOrg,dvcsRepo:e().dvcsRepo}:r()?{dvcsType:"github",dvcsOrg:r().dvcsOrg,dvcsRepo:r().dvcsRepo}:{dvcsType:"unsupported"}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-administer-notifier', location = 'js/repository-shortcuts/services/DVCSAccountMatcher.js' */
"use strict";define("repository-shortcuts/services/dvcs-account-matcher",["jquery","underscore","wrm/context-path","repository-shortcuts/services/url-matcher"],function(e,r,t,n){var s=require("jira/featureflags/feature-manager"),i=s.isFeatureEnabled("jsw.classic.reuse-redundant-libs")?window.Promise:require("bluebird/Promise");return{matchUrlAgainstNetwork:function(s){function u(n){var s=t()+"/rest/bitbucket/1.0/repository/summary/find?type="+n.dvcsType+"&orgName="+n.dvcsOrg+"&repoSlug="+n.dvcsRepo;return i.resolve(e.get(s)).then(function(e){return r.extend({},n,e)})["catch"](function(e){return e&&404===e.status?c(n):n})}function c(r){var n=t()+"/rest/bitbucket/1.0/organization/find?name="+r.dvcsOrg+"&type="+r.dvcsType;return i.resolve(e.get(n)).then(function(e){var t=e.dvcsType,n=e.name,s=e.approvalState,i=t===r.dvcsType,u=n===r.dvcsOrg,c="APPROVED"===s;return r.isOrganisationLinked=i&&u&&c,r})["catch"](function(e){return r})}function a(r){var n=t()+"/rest/devinfoadmin/1.0/githubAppDetails";return i.resolve(e.get(n)).then(function(e){var t=e.githubAppInstalled;return t&&(r.isOrganisationLinked=!0,r.isRepositoryLinked=!0),r.githubAppInstalled=t,r})["catch"](function(e){return r})}try{var o=n.parseUrl(s);return"unsupported"===o.dvcsType?i.resolve(o):"github"===o.dvcsType?a(o):o.dvcsRepo?u(o):c(o)}catch(d){return i.reject(d)}}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:repository-shortcuts-administer-notifier', location = 'js/repository-shortcuts/notify-admin.js' */
"use strict";require(["jquery","wrm/context-path","repository-shortcuts/services/dvcs-account-matcher"],function(t,e,r){function o(e){e.forEach(function(e){var o=!0;r.matchUrlAgainstNetwork(e.shortcutUrl).then(function(r){if(o=!r.isRepositoryLinked,o===!0){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.integration-request.show",data:{projectId:e.projectId}});var n="bitbucket"===e.dvcsType?"Bitbucket":"GitHub",i=AJS.format("{0} integration requested",n),a=AJS.flag({type:"info",title:i,body:JIRA.Software.RepositoryShortcuts.Notification.Templates.notifyAdminProjectLinkFragment({projectKey:e.projectKey})});t(a).find(".repo-shortcuts-notification__show-me-link").on("click",function(){AJS.trigger("analyticsEvent",{name:"jira-software.fe.web.notifications.connect-repo.integration-request.show-me.click",data:{projectId:e.projectId}})})}})["catch"](function(t){console.error("Caught Error"+t)})})}var n=require("jira/featureflags/feature-manager"),i=n.isFeatureEnabled("jsw.classic.reuse-redundant-libs")?window.Promise:require("bluebird/Promise"),a="repository-shortcuts-pending-requests",c=localStorage.getItem(a)||Date.now(),s=36e5;c+s<Date.now()&&(i.resolve(t.ajax({type:"POST",url:e()+"/rest/projects/1.0/project/shortcut/pending",data:JSON.stringify({clearPendingFlag:!0}),contentType:"application/json"})).then(function(t){o(t)})["catch"](function(t){console.error(t)}),localStorage.setItem(a,Date.now()))});;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:spa-iframe', location = 'jira-atlaskit-module/js/spa-iframe/handlers/modal-dialog/iframe.js' */
!function(){define("jira/spa-iframe/handlers/modal-dialog/iframe",["jquery","jira/container-api","jira/spa-iframe/handlers/modal-dialog/bindings"],function(t,n,d){function a(){try{var t=window.parent.document.querySelector('[name="'+window.name+'"]').dataset.offset;return JSON.parse(t)}catch(t){return{top:0,right:0,bottom:0,left:0}}}function e(t){s.style.background="transparent",s.style.paddingTop=parseInt(r.paddingTop||0)+t.top+"px",s.style.paddingRight=parseInt(r.paddingRight||0)+t.right+"px",s.style.paddingBottom=parseInt(r.paddingBottom||0)+t.bottom+"px",s.style.paddingLeft=parseInt(r.paddingLeft||0)+t.left+"px"}function o(){s.style.background=r.background,s.style.paddingTop=r.paddingTop,s.style.paddingRight=r.paddingRight,s.style.paddingBottom=r.paddingBottom,s.style.paddingLeft=r.paddingLeft}function i(){l++,1===l&&(n.APIs.modal.modalOpen(),n.APIs.getNavigationAPI().then(function(t){setTimeout(function(){n.setShouldPropagateEvents(!1)}),t.modalOpen(),e(n.getOffset()||a())}))}function p(){setTimeout(function(){l>0&&l--,l<1&&n.APIs.getNavigationAPI().then(function(t){n.setShouldPropagateEvents(!0),t.modalClose(),o(),n.APIs.modal.modalClose()})},300)}function g(){s=document.body,r={background:s.style.background,paddingTop:s.style.paddingTop,paddingRight:s.style.paddingRight,paddingBottom:s.style.paddingBottom,paddingLeft:s.style.paddingLeft},d({onOpen:i,onClose:p})}var s,r,l=0;return function(){t(g)}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:spa-iframe', location = 'jira-atlaskit-module/js/spa-iframe/handlers/index.js' */
!function(){define("jira/spa-iframe/handlers",["jira/spa-iframe/handlers/modal-dialog/iframe"],function(a){return function(){a()}})}();;
;
/* module-key = 'com.atlassian.jira.jira-atlaskit-plugin:spa-iframe', location = 'jira-atlaskit-module/js/spa-iframe/index.js' */
!function(){const r=require("jira/container-api"),e=require("jira/spa-iframe/handlers");r.getIsIframe()&&e()}();;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-internal-constants', location = 'node_modules/@atlassian/aui/src/js/aui/internal/constants.js' */
("undefined"===typeof window?global:window).__fa2d609d3773596cc2b702b68678a39c=function(){var a={};"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.default={INPUT_SUFFIX:"-input"};return a=a["default"]}.call(this);;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-toggle', location = 'node_modules/@atlassian/aui/src/js/aui/toggle.js' */
("undefined"===typeof window?global:window).__1840a42d6d7e6ab244ecf3cf5bcc56cd=function(){function e(a){return a&&a.__esModule?a:{"default":a}}function c(a){return a._input||(a._input=a.querySelector("input"))}function f(a,b){c(b).removeAttribute(a)}function h(a,b,d){c(b).setAttribute(a,d.newValue)}function i(a){return{removed:f.bind(this,a),fallback:h.bind(this,a)}}"use strict";__e573296a636ce4ee054d5d3b9c8823fb;__8a6820c3d0bc5d638a8490d849a5b750;var g=__29fa312a51517f20df339a1900640e1d,d=e(__307d3e18fd611f85395c67cddeb1fe24),
k=e(__8339408c10b0a9052af9f3aad7b3a4e8),l=e(__f52b7059926ab2bdcd0aee12b4bc782b),m=e(__c1ce1f1e3e613f564fc234ff043570f1),n=__fa2d609d3773596cc2b702b68678a39c,j={removed:function(a){f.call(this,"form",a);a._formId=null},fallback:function(a,b){h.call(this,"form",a,b);a._formId=b.newValue}},o={removed:f.bind(void 0,"id"),fallback:function(a,b){c(a).setAttribute("id",""+b.newValue+n.INPUT_SUFFIX)}};(0,m.default)("aui-toggle",{template:(0,l.default)('<input type="checkbox" class="aui-toggle-input">','<span class="aui-toggle-view">',
'<span class="aui-toggle-tick aui-icon aui-icon-small aui-iconfont-success"></span>','<span class="aui-toggle-cross aui-icon aui-icon-small aui-iconfont-close-dialog"></span>',"</span>"),created:function(a){a._input=c(a);a._tick=a.querySelector(".aui-toggle-tick");a._cross=a.querySelector(".aui-toggle-cross");(0,d.default)(a._input).tooltip({title:function(){return this.checked?this.getAttribute("tooltip-on"):this.getAttribute("tooltip-off")},gravity:"s",hoverable:!1});a._input.addEventListener("keydown",
function(b){a.busy&&b.keyCode===AJS.keyCode.SPACE&&b.preventDefault()});-1<navigator.userAgent.toLowerCase().indexOf("firefox")&&a._input.addEventListener("click",function(b){a.busy&&b.preventDefault()})},attached:function(a){(0,k.default)(a).attributeExists("label")},events:{click:function(a,b){!a.disabled&&(!a.busy&&b.target!==a._input)&&a._input.click();(0,g.setBooleanAttribute)(a,"checked",c(a).checked)}},attributes:{id:o,checked:{removed:function(a){f.call(this,"checked",a);c(a).checked=!1},
fallback:function(a,b){h.call(this,"checked",a,b);c(a).checked=!0}},disabled:i("disabled"),form:j,name:i("name"),value:i("value"),"tooltip-on":{value:"On",fallback:function(a,b){c(a).setAttribute("tooltip-on",b.newValue||"On")}},"tooltip-off":{value:"Off",fallback:function(a,b){c(a).setAttribute("tooltip-off",b.newValue||"Off")}},label:{removed:function(a){c(a).removeAttribute("aria-label")},
fallback:function(a,b){c(a).setAttribute("aria-label",b.newValue)}}},prototype:{focus:function(){this._input.focus();return this},get checked(){return this._input.checked},set checked(a){this._input.checked=a;return(0,g.setBooleanAttribute)(this,"checked",a)},get disabled(){return this._input.disabled},set disabled(a){return(0,g.setBooleanAttribute)(this,"disabled",a)},get form(){return document.getElementById(this._formId)},set form(a){j.fallback.call(this,this,{newValue:a||null});return this.form},
get name(){return this._input.name},set name(a){this.setAttribute("name",a);return a},get value(){return this._input.value},set value(a){this.setAttribute("value",null===a?"":a);return a},get busy(){return"true"===this._input.getAttribute("aria-busy")},set busy(a){(0,g.setBooleanAttribute)(this,"busy",a);a?(this._input.setAttribute("aria-busy","true"),this._input.indeterminate=!0,this.checked?((0,d.default)(this._input).addClass("indeterminate-checked"),(0,d.default)(this._tick).spin({zIndex:null})):
(0,d.default)(this._cross).spin({zIndex:null,color:"black"})):((0,d.default)(this._input).removeClass("indeterminate-checked"),this._input.indeterminate=!1,this._input.removeAttribute("aria-busy"),(0,d.default)(this._cross).spinStop(),(0,d.default)(this._tick).spinStop());var b=!!a;this.id&&Array.prototype.forEach.call(document.querySelectorAll('aui-label[for="'+this.id+'"]'),function(a){a.disabled=b});return a}}});return{}}.call(this);;
;
/* module-key = 'com.atlassian.plugin.jslibs:brace-1.1.0-factory', location = 'atlassian-jslibs/factories/brace/1.1.0/brace-1.1.0-factory.js' */
(function(j){define("atlassian/libs/factories/brace-1.1.0",function(){return function(n,g){var c={_:n,Backbone:g};j.call(c);c=c.Brace.noConflict();c.VERSION="1.1.0";return c}})})(function(){var j=this,n=j.Brace,g,c=j._,i=j.Backbone,o=function(a){return c.isArray(a)?c.reduce(a,function(b,a){b[a]=null;return b},{}):a},m=function(a,b){if(!a||null==b||a===String&&c.isString(b)||a===Number&&c.isNumber(b)||a===Boolean&&c.isBoolean(b))return b;if("string"===typeof a||a instanceof String){if(typeof b!==""+
a)throw"The typeof "+b+" is "+typeof b+" but expected it to be "+a;return b}if(c.isArray(a)||a===Array){if(!c.has(b,"length")||b instanceof String||c.has({string:1,"function":1},typeof b)||b instanceof i.Collection)throw"Array type expected, but nonnull, non-Array value provided.";return a===Array||!a[0]?b:c.map(b,c.bind(m,null,a[0]))}if("function"!==typeof a)throw"Invalid expected type "+a+". Should be falsy, String, Array, Backbone.Collection constructor, or function.";return b instanceof a?b:p(a)?
new a(m([a.model],b)):new a(b)},p=function(a,b){return a&&(a.__super__ instanceof(b||i.Collection)||a.__super__===(b||i.Collection).prototype||a===(b||i.Collection))},x=function(a,b){var d={};c.each(a,function(a,c){if(!b[c]||q(a,b[c]))d[c]=a;else if(a&&!q(b[c],a))throw c+" has conflicted type descriptors.";});return d},q=function(a,b){return!b||b===a?!0:!a||"string"===typeof a?!1:a instanceof Array?b===Array||b instanceof Array&&q(a[0],b[0]):"function"!==typeof b?!1:p(b)?p(a,b):a.prototype instanceof
b};g=function(a){var b=a.extend(),d=a.extend;b.extend=function w(a,b){var h,g=c.extend({},a),i;a&&a.mixins&&(i=a.mixins,delete g.mixins);h=d.call(this,g,b);this.prototype.namedEvents&&f.Mixins.applyMixin(h,{namedEvents:this.prototype.namedEvents});this.prototype.namedAttributes&&f.Mixins.applyMixin(h,{namedAttributes:this.prototype.namedAttributes});this.prototype.ignoreUnknownAttributes&&f.Mixins.applyMixin(h,{ignoreUnknownAttributes:this.prototype.ignoreUnknownAttributes});i&&c.each(a.mixins,function(a){f.Mixins.applyMixin(h,
a)});h.prototype.namedEvents&&f.Mixins.applyMixin(h,f.EventsMixinCreator.create(h.prototype.namedEvents));h.prototype.namedAttributes&&(h.prototype.namedAttributes=o(h.prototype.namedAttributes),f.Mixins.applyMixin(h,f.AttributesMixinCreator.create(h.prototype.namedAttributes,h.prototype.idAttribute)));if(h.prototype.toJSON){var j=h.prototype.toJSON;h.prototype.toJSON=function(){var a;a=j.call(this);a=c.isObject(a)?c.reduce(a,function(a,b,d){b&&c.isFunction(b.toJSON)?a[d]=b.toJSON():c.isArray(b)&&
(a[d]=c.map(b,function(a){return a&&c.isFunction(a.toJSON)?a.toJSON():a}));return a},a):a;return a}}h.extend=w;return h};return b};var f={Mixins:{createMethodName:function(a,b){return a+b.charAt(0).toUpperCase()+b.substr(1)},applyMixin:function(a,b){c.forEach(c.keys(b),function(d){var e=a.prototype;if("initialize"===d){var f=e.initialize;e.initialize=function(){f&&f.apply(this,arguments);b.initialize.apply(this,arguments)}}else if("validate"===d){var g=e.validate;e.validate=function(){if(g){var a=
g.apply(this,arguments);if(a)return a}return b.validate.apply(this,arguments)}}else if("defaults"===d){var e=e.defaults||(e.defaults={}),d=b[d],k;for(k in d){if(e.hasOwnProperty(k))throw"Mixin error: class already has default '"+k+"' defined";e[k]=d[k]}}else if("namedAttributes"===d)k=o(e.namedAttributes)||{},d=o(b[d]),e.namedAttributes=c.extend(k,x(d,k));else if("namedEvents"===d){if(!c.isArray(b[d]))throw"Expects events member on mixin to be an array";e.namedEvents||(e.namedEvents=[]);e.namedEvents=
c.uniq(e.namedEvents.concat(b[d]))}else if("ignoreUnknownAttributes"===d)e.hasOwnProperty(d)||(e.ignoreUnknownAttributes=b[d]||!1);else{if(e.hasOwnProperty(d))throw"Mixin error: class already has property '"+d+"' defined";e[d]=b[d]}},this)}}};f.AttributesMixinCreator={create:function(a,b){var d={};a||(a={});c.has(a,"id")||(a.id=null);c.each(a,function(a,b){var c=f.Mixins.createMethodName("set",b);d[c]=function(a,c){return this.set(b,a,c)};c=f.Mixins.createMethodName("get",b);d[c]=function(){return this.get(b)}});
if("string"===typeof b&&"undefined"!==typeof a[b]&&"id"!==b){a.id=a[b];var e=f.Mixins.createMethodName("get",b),g=f.Mixins.createMethodName("set",b);d.getId=function(){return this[e]()};d.setId=function(a,b){return this[g](a,b)}}return d},ensureType:m};f.EventsMixinCreator={create:function(a){var b={};c.each(a,c.bind(function(a){var e=f.Mixins.createMethodName("on",a);b[e]=function(){return this.on.apply(this,[a].concat(c.toArray(arguments)))};e=f.Mixins.createMethodName("trigger",a);b[e]=function(){return this.trigger.apply(this,
[a].concat(c.toArray(arguments)))}},this));return b}};var l=f,r=i.Model,s=g(r),t=r.prototype,u=s.prototype,v=t.set;u.set=function(a,b,d){var e,f=this.namedAttributes;if(!f||null==a)return v.apply(this,arguments);c.isObject(a)?(e=c.clone(a),d=b):(e={},e[a]=b);for(var g in e)if(c.has(e,g)){if(!c.has(f,g)&&!this.ignoreUnknownAttributes)throw"Attribute '"+g+"' does not exist";e[g]=m(f[g],e[g])}return v.call(this,e,d)};var y=t.get;u.get=function(a){if(this.namedAttributes&&!c.has(this.namedAttributes,
a)&&!this.ignoreUnknownAttributes)throw"Attribute '"+a+"' does not exist";return y.apply(this,arguments)};var z=r.prototype.parse;s.prototype.parse=function(a,b){return c.pick(z(a,b),c.keys(this.namedAttributes))};l.Model=s;f.Collection=g(i.Collection);f.View=g(i.View);f.Router=g(i.Router);l=function(){this.initialize.apply(this,arguments)};c.extend(l.prototype,i.Events,{initialize:function(){}});l.extend=i.Model.extend;f.Evented=g(l);g=f;g.noConflict=function(){j.Brace=n;return this};j.Brace=g});;
;
/* module-key = 'com.atlassian.servicedesk.frontend-webpack-plugin:context-common-jsd-entry-chunk', location = 'common-jsd-entry-chunk.bundle.js' */
!function(e){function a(d){if(r[d])return r[d].exports;var t=r[d]={i:d,l:!1,exports:{}};return e[d].call(t.exports,t,t.exports,a),t.l=!0,t.exports}var d=window.sdJsonp;window.sdJsonp=function(r,c,s){for(var n,i,o,f=0,b=[];f<r.length;f++){if(i=r[f],t[i])b.push(t[i][0]);t[i]=0}for(n in c)if(Object.prototype.hasOwnProperty.call(c,n))e[n]=c[n];if(d)d(r,c,s);for(;b.length;)b.shift()();if(s)for(f=0;f<s.length;f++)o=a(a.s=s[f]);return o};var r={},t={51:0};a.e=function(e){function d(){s.onerror=s.onload=null,clearTimeout(n);var a=t[e];if(0!==a){if(a)a[1](new Error("Loading chunk "+e+" failed."));t[e]=void 0}}if(0===t[e])return Promise.resolve();if(t[e])return t[e][2];var r=new Promise(function(a,d){t[e]=[a,d]});t[e][2]=r;var c=document.getElementsByTagName("head")[0],s=document.createElement("script");if(s.type="text/javascript",s.charset="utf-8",s.async=!0,s.timeout=12e4,a.nc)s.setAttribute("nonce",a.nc);s.src=a.p+"context-"+({0:"sd.project.queues",1:"sd.queues.addon",2:"sd.agent.reports.custom",3:"sd.agent.reports.kb.requests.resolved",4:"sd.agent.reports.kb.requests.deflected",5:"sd.agent.organisation",6:"sd.agent.customers",7:"sd.admin.languagesupport",8:"sd.agent.reports.csat",9:"sd.admin.outgoing.email",10:"sd.agent.reports.workload",11:"sd.agent.reports.sla",12:"sd.project.reports",13:"sd.admin.widget.addon.installer",14:"sd.admin.widget",15:"sd.admin.addon",16:"rlabs.objectschema.manage",17:"rlabs.configure",18:"insight.pages.context",19:"jira.view.issue",20:"sd.project.admin",21:"sd.project.admin.registry",22:"sd.project.settings.automation.modules",23:"sd.project.sidebar.content",24:"sd.project.view",25:"atl.dashboard",26:"sd.project.view.registry",27:"jira.heritage.form.dialog",28:"atl.general",29:"sd.project.legacy.issue.view",30:"sd.project.settings.request.forms.workflow.bridge",31:"jira.workflow.view",32:"jira.admin.conf",33:"jira.create.issue",34:"sd.project.queues.legacy.issue.view.bridge",35:"sd.project.report.legacy.issue.view.bridge",36:"jira.view.issue.asset.unlicensed",37:"jira.heritage.form.dialog.asset.unlicensed",38:"sd.project.config.checker.bridge",39:"sd.admin.config",40:"sd.admin.email.requests",41:"jira.create.issue.asset.unlicensed",42:"atl.general.asset.unlicensed",43:"jira.admin",44:"sd.project.queues.bridge",45:"jql.field.renderer.bridge",46:"jira.heritage.sd.sidebar.integration",47:"jql.editor.bridge",48:"sd.agent.unlicensed",49:"asset.tracking.field.config",50:"sd.queues.edit"}[e]||e)+"-"+{0:"8b73c5ef5e9c42b1a429",1:"48ed6096b9fdc3ebd3ec",2:"e2292dffedce55d0ea8c",3:"1c0d38b6023c400cc811",4:"6f073d96d00d5d2aad59",5:"052694852038a5e3e7e0",6:"126d358751b3ff194c54",7:"43b170e897420428d9d7",8:"a0815e840c5afab011cf",9:"131a82d914f7bb5563da",10:"13183a9a0076454ab2ea",11:"f34a3cea9cca4fd53c99",12:"7dc9a4fea315110aea38",13:"69eecc60c2678995a8ca",14:"52ef9c73f5dda7187780",15:"873ce392bb6544c0ed30",16:"943b1e52364f3b63d317",17:"eaad2fcbb826f220a627",18:"4ab2763b1dfd0a92b24e",19:"012fca19d80ebe35f88a",20:"b5200b405530b11b6f70",21:"e38470535a45efc59b2f",22:"707d3426a27561b791c5",23:"51b3ca5a25ec0b8c1821",24:"7b5272a683e1f42095e8",25:"388d579f020b42c2abed",26:"dc5547b2b1b034671324",27:"a2b8de157e478a4e7fb9",28:"9c0237f004093c2c95d4",29:"919587c8e805e7d398d6",30:"0480f86c0640150d90fd",31:"d949724fca83d8e980e6",32:"12a2b6c1acfd8e4623f1",33:"3c8e7a9c659ca34f703c",34:"ff609ee22fa29bb46fef",35:"78a3c1a08f4a0540ed21",36:"d882b04c828d377be98b",37:"4cf701cc7c19362791e2",38:"1384ba9034eab0dd2ad2",39:"c8414611157901fdb09b",40:"2b0980b66720f31d541d",41:"c9a5bf42baa1706aa046",42:"791d95b1c3d594053602",43:"dffad3c4697ae936e2fc",44:"f79eb366d37a55ce2c22",45:"e77955945de982d3e635",46:"15377b12ff5854810aa3",47:"2b4395ac99183df1c58d",48:"eb15fe694d4e6a248370",49:"8ad680a46da510942637",50:"e006c01c13a17f00177a"}[e]+".js?locale=" + __webpack_public_path_locale__;var n=setTimeout(d,12e4);return s.onerror=s.onload=d,c.appendChild(s),r},a.m=e,a.c=r,a.i=function(e){return e},a.d=function(e,d,r){if(!a.o(e,d))Object.defineProperty(e,d,{configurable:!1,enumerable:!0,get:r})},a.n=function(e){var d=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(d,"a",d),d},a.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},a.p="",a.oe=function(e){throw console.error(e),e}}([]);;
;
/* module-key = 'com.atlassian.servicedesk.frontend-webpack-plugin:context-atl.general.asset.unlicensed', location = 'atl.general.asset.unlicensed.bundle.js' */
sdJsonp([42],{0:function(n,t,e){var r,i;r=[e(18)],void 0!==(i=function(n){return n}.apply(t,r))&&(n.exports=i)},1:function(n,t,e){var r;void 0!==(r=function(){return jQuery}.call(t,e,t,n))&&(n.exports=r)},10:function(n,t,e){var r,i;r=[e(30)],void 0!==(i=function(n){return n}.apply(t,r))&&(n.exports=i)},11:function(n,t){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(n){if("object"==typeof window)e=window}n.exports=e},1242:function(n,t,e){e(8),n.exports=e(549)},13:function(n,t,e){var r,i;if(void 0===o)var o={};if(o.table=function(n,t){return"<table"+(n.id?' id="'+soy.$$escapeHtml(n.id)+'"':"")+' class="aui'+o.renderExtraClasses(n)+'"'+o.renderExtraAttributes(n)+">"+(n.columnsContent?soy.$$filterNoAutoescape(n.columnsContent):"")+(n.captionContent?"<caption>"+soy.$$filterNoAutoescape(n.captionContent)+"</caption>":"")+(n.theadContent?"<thead>"+soy.$$filterNoAutoescape(n.theadContent)+"</thead>":"")+(n.tfootContent?"<tfoot>"+soy.$$filterNoAutoescape(n.tfootContent)+"</tfoot>":"")+(!n.contentIncludesTbody?"<tbody>":"")+soy.$$filterNoAutoescape(n.content)+(!n.contentIncludesTbody?"</tbody>":"")+"</table>"},goog.DEBUG)o.table.soyTemplateName="aui.table";r=[],void 0!==(i=function(){return o}.apply(t,r))&&(n.exports=i)},14:function(n,t,e){(function(t,r){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   4.1.0
 */
!function(t,e){!0?n.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function n(n){return"function"==typeof n||"object"==typeof n&&null!==n}function i(n){return"function"==typeof n}function o(n){Y=n}function u(n){V=n}function s(){return function(){return t.nextTick(p)}}function a(){if(void 0!==Q)return function(){Q(p)};else return l()}function c(){var n=0,t=new Z(p),e=document.createTextNode("");return t.observe(e,{characterData:!0}),function(){e.data=n=++n%2}}function f(){var n=new MessageChannel;return n.port1.onmessage=p,function(){return n.port2.postMessage(0)}}function l(){var n=setTimeout;return function(){return n(p,1)}}function p(){for(var n=0;n<J;n+=2){(0,en[n])(en[n+1]),en[n]=void 0,en[n+1]=void 0}J=0}function h(){try{var n=e(16);return Q=n.runOnLoop||n.runOnContext,a()}catch(n){return l()}}function v(n,t){var e=arguments,r=this,i=new this.constructor(y);if(void 0===i[on])z(i);var o=r._state;if(o)!function(){var n=e[o-1];V(function(){return O(o,i,n,r._result)})}();else $(r,i,n,t);return i}function d(n){var t=this;if(n&&"object"==typeof n&&n.constructor===t)return n;var e=new t(y);return j(e,n),e}function y(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function b(n){try{return n.then}catch(n){return cn.error=n,cn}}function w(n,t,e,r){try{n.call(t,e,r)}catch(n){return n}}function _(n,t,e){V(function(n){var r=!1,i=w(e,t,function(e){if(!r)if(r=!0,t!==e)j(n,e);else k(n,e)},function(t){if(!r)r=!0,S(n,t)},"Settle: "+(n._label||" unknown promise"));if(!r&&i)r=!0,S(n,i)},n)}function x(n,t){if(t._state===sn)k(n,t._result);else if(t._state===an)S(n,t._result);else $(t,void 0,function(t){return j(n,t)},function(t){return S(n,t)})}function A(n,t,e){if(t.constructor===n.constructor&&e===v&&t.constructor.resolve===d)x(n,t);else if(e===cn)S(n,cn.error),cn.error=null;else if(void 0===e)k(n,t);else if(i(e))_(n,t,e);else k(n,t)}function j(t,e){if(t===e)S(t,m());else if(n(e))A(t,e,b(e));else k(t,e)}function T(n){if(n._onerror)n._onerror(n._result);C(n)}function k(n,t){if(n._state===un)if(n._result=t,n._state=sn,0!==n._subscribers.length)V(C,n)}function S(n,t){if(n._state===un)n._state=an,n._result=t,V(T,n)}function $(n,t,e,r){var i=n._subscribers,o=i.length;if(n._onerror=null,i[o]=t,i[o+sn]=e,i[o+an]=r,0===o&&n._state)V(C,n)}function C(n){var t=n._subscribers,e=n._state;if(0!==t.length){for(var r=void 0,i=void 0,o=n._result,u=0;u<t.length;u+=3)if(r=t[u],i=t[u+e],r)O(e,r,i,o);else i(o);n._subscribers.length=0}}function E(){this.error=null}function F(n,t){try{return n(t)}catch(n){return fn.error=n,fn}}function O(n,t,e,r){var o=i(e),u=void 0,s=void 0,a=void 0,c=void 0;if(o){if((u=F(e,r))===fn)c=!0,s=u.error,u.error=null;else a=!0;if(t===u)return void S(t,g())}else u=r,a=!0;if(t._state!==un);else if(o&&a)j(t,u);else if(c)S(t,s);else if(n===sn)k(t,u);else if(n===an)S(t,u)}function I(n,t){try{t(function(t){j(n,t)},function(t){S(n,t)})}catch(t){S(n,t)}}function D(){return ln++}function z(n){n[on]=ln++,n._state=void 0,n._result=void 0,n._subscribers=[]}function N(n,t){if(this._instanceConstructor=n,this.promise=new n(y),!this.promise[on])z(this.promise);if(G(t)){if(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length)k(this.promise,this._result);else if(this.length=this.length||0,this._enumerate(),0===this._remaining)k(this.promise,this._result)}else S(this.promise,M())}function M(){return new Error("Array Methods must be provided an Array")}function B(n){return new N(this,n).promise}function L(n){var t=this;if(!G(n))return new t(function(n,t){return t(new TypeError("You must pass an array to race."))});else return new t(function(e,r){for(var i=n.length,o=0;o<i;o++)t.resolve(n[o]).then(e,r)})}function q(n){var t=this,e=new t(y);return S(e,n),e}function H(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function R(n){if(this[on]=D(),this._result=this._state=void 0,this._subscribers=[],y!==n)"function"!=typeof n&&H(),this instanceof R?I(this,n):P()}function U(){var n=void 0;if(void 0!==r)n=r;else if("undefined"!=typeof self)n=self;else try{n=Function("return this")()}catch(n){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=n.Promise;if(t){var e=null;try{e=Object.prototype.toString.call(t.resolve())}catch(n){}if("[object Promise]"===e&&!t.cast)return}n.Promise=R}var K=void 0;if(!Array.isArray)K=function(n){return"[object Array]"===Object.prototype.toString.call(n)};else K=Array.isArray;var G=K,J=0,Q=void 0,Y=void 0,V=function(n,t){if(en[J]=n,en[J+1]=t,2===(J+=2))if(Y)Y(p);else rn()},W="undefined"!=typeof window?window:void 0,X=W||{},Z=X.MutationObserver||X.WebKitMutationObserver,nn="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),tn="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,en=new Array(1e3),rn=void 0;if(nn)rn=s();else if(Z)rn=c();else if(tn)rn=f();else if(void 0===W)rn=h();else rn=l();var on=Math.random().toString(36).substring(16),un=void 0,sn=1,an=2,cn=new E,fn=new E,ln=0;return N.prototype._enumerate=function(){for(var n=this.length,t=this._input,e=0;this._state===un&&e<n;e++)this._eachEntry(t[e],e)},N.prototype._eachEntry=function(n,t){var e=this._instanceConstructor,r=e.resolve;if(r===d){var i=b(n);if(i===v&&n._state!==un)this._settledAt(n._state,t,n._result);else if("function"!=typeof i)this._remaining--,this._result[t]=n;else if(e===R){var o=new e(y);A(o,n,i),this._willSettleAt(o,t)}else this._willSettleAt(new e(function(t){return t(n)}),t)}else this._willSettleAt(r(n),t)},N.prototype._settledAt=function(n,t,e){var r=this.promise;if(r._state===un)if(this._remaining--,n===an)S(r,e);else this._result[t]=e;if(0===this._remaining)k(r,this._result)},N.prototype._willSettleAt=function(n,t){var e=this;$(n,void 0,function(n){return e._settledAt(sn,t,n)},function(n){return e._settledAt(an,t,n)})},R.all=B,R.race=L,R.resolve=d,R.reject=q,R._setScheduler=o,R._setAsap=u,R._asap=V,R.prototype={constructor:R,then:v,catch:function(n){return this.then(null,n)}},R.polyfill=U,R.Promise=R,R})}).call(t,e(15),e(11))},15:function(n,t){function e(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(n){if(f===setTimeout)return setTimeout(n,0);if((f===e||!f)&&setTimeout)return f=setTimeout,setTimeout(n,0);try{return f(n,0)}catch(t){try{return f.call(null,n,0)}catch(t){return f.call(this,n,0)}}}function o(n){if(l===clearTimeout)return clearTimeout(n);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(n);try{return l(n)}catch(t){try{return l.call(null,n)}catch(t){return l.call(this,n)}}}function u(){if(d&&h){if(d=!1,h.length)v=h.concat(v);else y=-1;if(v.length)s()}}function s(){if(!d){var n=i(u);d=!0;for(var t=v.length;t;){for(h=v,v=[];++y<t;)if(h)h[y].run();y=-1,t=v.length}h=null,d=!1,o(n)}}function a(n,t){this.fun=n,this.array=t}function c(){}var f,l,p=n.exports={};!function(){try{if("function"==typeof setTimeout)f=setTimeout;else f=e}catch(n){f=e}try{if("function"==typeof clearTimeout)l=clearTimeout;else l=r}catch(n){l=r}}();var h,v=[],d=!1,y=-1;p.nextTick=function(n){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];if(v.push(new a(n,t)),1===v.length&&!d)i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(n){return[]},p.binding=function(n){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(n){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},16:function(n,t){},167:function(n,t,e){var r,i;if("undefined"==typeof ServiceDesk)window.ServiceDesk={};if(void 0===ServiceDesk.Templates)ServiceDesk.Templates={};if(void 0===ServiceDesk.Templates.Components)ServiceDesk.Templates.Components={};if(void 0===ServiceDesk.Templates.Components.Assets)ServiceDesk.Templates.Components.Assets={};if(void 0===ServiceDesk.Templates.Components.Assets.Field)ServiceDesk.Templates.Components.Assets.Field={};if(ServiceDesk.Templates.Components.Assets.Field.assetLozenge=function(n,t){return'<li class="sd-asset-lozenge" title="'+soy.$$escapeHtml(n.asset.label.value)+'"><span class="sd-asset" title="'+soy.$$escapeHtml(n.asset.label.value)+'">'+("Unknown Asset"==n.asset.label.value?'<span class="sd-asset-value">&nbsp;'+soy.$$escapeHtml("Unknown Asset")+"&nbsp;</span>"+aui.icons.icon({useIconFont:!0,icon:"warning",extraClasses:"aui-iconfont-warning"}):'<span class="sd-asset-value">&nbsp;'+soy.$$escapeHtml(n.asset.label.value)+"</span>")+'</span><button type="button" class="js-remove aui-icon aui-icon-small aui-iconfont-delete" tabindex="-1"></button></li>'},goog.DEBUG)ServiceDesk.Templates.Components.Assets.Field.assetLozenge.soyTemplateName="ServiceDesk.Templates.Components.Assets.Field.assetLozenge";r=[e(41)],void 0!==(i=function(){return ServiceDesk.Templates.Components.Assets.Field}.apply(t,r))&&(n.exports=i)},177:function(n,t,e){var r,i;r=[e(1),e(167),e(91)],void 0!==(i=function(n){var t=ServiceDesk.Templates.Components.Assets.Field.assetLozenge;return function(e){return n(t({asset:e}))}}.apply(t,r))&&(n.exports=i)},178:function(n,t,e){var r,i;r=[e(0),e(1),e(10),e(2),e(36),e(62),e(33),e(31),e(24),e(177),e(88),e(89),e(91)],void 0!==(i=function(n,t,e,r,i,o,u,s,a,c,f,l){var p=o.extend({keys:{Up:function(){return this.keys.Left.apply(this,arguments)},Down:function(){return this.keys.Right.apply(this,arguments)}}}),h=i.extend({init:function(n,t){var e=this;l(n.properties.value,function(n){e.$lozenge=c(n),e._assignEvents("instance",e)._assignEvents("removeButton",e.$lozenge.find(".js-remove")),t(e.$lozenge)})},_events:{instance:{focus:function(){this.$lozenge.addClass("focused")},blur:function(){this.$lozenge.removeClass("focused")},remove:function(){this.$lozenge.remove()}},removeButton:{click:function(){this.trigger("remove")}}}}),v=u.extend({init:function(){this._super.apply(this,arguments),this.$container.addClass("sd-asset-field")},_getTypeOriginAsSerializedType:function(n){return encodeURIComponent((n.appKey+"/"+n.originId).toLowerCase())},_getAssetFieldConfigQueryParamsAsString:function(n,t){var e=this,r="";if(""!==t)r+="prioritizedAssignee="+t+"&";return n.types.forEach(function(n){r+="type="+e._getTypeOriginAsSerializedType(n)+"&"}),r.slice(0,-1)},_getDefaultOptions:function(){for(var n=arguments.length,e=Array(n),r=0;r<n;r++)e[r]=arguments[r];var i=t(e[0].element).data().assetFieldConfig,o=t(e[0].element).data().assetFieldReporterAccountId,u="";if(i)u=this._getAssetFieldConfigQueryParamsAsString(i,o);return t.extend(!0,this._super(),{showDropdownButton:!1,itemGroup:new p,itemAttrDisplayed:"label",errorMessage:!1,matchingStrategy:".*",itemBuilder:function(n){var t=this;return new h(n,function(n){n.appendTo(t.$selectedItemsContainer),t.updateItemsIndent()})},ajaxOptions:{url:AJS.contextPath()+"/rest/assetapi/asset/search?"+u,query:!0,formatResponse:this._formatResponse,headers:{"X-B3-Sampled":"1"}}})},_formatResponse:function(t){return n.map(t.values,function(n){return new s(f(n))})},updateItemsIndent:function(){var n=5,e=this.$selectedItemsContainer.outerHeight()+n+n;if(this.$field.css({paddingLeft:n,paddingTop:e,height:e+20+n}),t.browser.msie&&parseInt(t.browser.version,10)<11)this.$field.val(this.$field.val()+" "),this.$field.val(this.$field.val().replace(/\s$/,""))},keys:{Up:function(){var t=this;if(!this.suggestionsVisible&&this.lozengeGroup.items.length>0&&this.lozengeGroup.index<0)n.defer(n.bind(function(){t.lozengeGroup.shiftFocus(-1)},this))}}});return a("js-request-asset-field",{created:function(n){n.field=new v({element:n})}})}.apply(t,r))&&(n.exports=i)},18:function(n,t,e){var r,i;(function(){function e(n){function t(t,e,r,i,o,u){for(;o>=0&&o<u;o+=n){var s=i?i[o]:o;r=e(r,t[s],s,t)}return r}return function(e,r,i,o){r=A(r,o,4);var u=!E(e)&&x.keys(e),s=(u||e).length,a=n>0?0:s-1;if(arguments.length<3)i=e[u?u[a]:a],a+=n;return t(e,r,i,u,a,s)}}function o(n){return function(t,e,r){e=j(e,r);for(var i=C(t),o=n>0?0:i-1;o>=0&&o<i;o+=n)if(e(t[o],o,t))return o;return-1}}function u(n,t,e){return function(r,i,o){var u=0,s=C(r);if("number"==typeof o)if(n>0)u=o>=0?o:Math.max(o+s,u);else s=o>=0?Math.min(o+1,s):o+s+1;else if(e&&o&&s)return o=e(r,i),r[o]===i?o:-1;if(i!==i)return o=t(v.call(r,u,s),x.isNaN),o>=0?o+u:-1;for(o=n>0?u:s-1;o>=0&&o<s;o+=n)if(r[o]===i)return o;return-1}}function s(n,t){var e=z.length,r=n.constructor,i=x.isFunction(r)&&r.prototype||l,o="constructor";if(x.has(n,o)&&!x.contains(t,o))t.push(o);for(;e--;)if((o=z[e])in n&&n[o]!==i[o]&&!x.contains(t,o))t.push(o)}var a=this,c=a._,f=Array.prototype,l=Object.prototype,p=Function.prototype,h=f.push,v=f.slice,d=l.toString,y=l.hasOwnProperty,m=Array.isArray,g=Object.keys,b=p.bind,w=Object.create,_=function(){},x=function(n){if(n instanceof x)return n;if(!(this instanceof x))return new x(n);else return void(this._wrapped=n)};if(!0){if(void 0!==n&&n.exports)t=n.exports=x;t._=x}else a._=x;x.VERSION="1.8.3";var A=function(n,t,e){if(void 0===t)return n;switch(null==e?3:e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,i){return n.call(t,e,r,i)};case 4:return function(e,r,i,o){return n.call(t,e,r,i,o)}}return function(){return n.apply(t,arguments)}},j=function(n,t,e){if(null==n)return x.identity;if(x.isFunction(n))return A(n,t,e);if(x.isObject(n))return x.matcher(n);else return x.property(n)};x.iteratee=function(n,t){return j(n,t,1/0)};var T=function(n,t){return function(e){var r=arguments.length;if(r<2||null==e)return e;for(var i=1;i<r;i++)for(var o=arguments[i],u=n(o),s=u.length,a=0;a<s;a++){var c=u[a];if(!t||void 0===e[c])e[c]=o[c]}return e}},k=function(n){if(!x.isObject(n))return{};if(w)return w(n);_.prototype=n;var t=new _;return _.prototype=null,t},S=function(n){return function(t){return null==t?void 0:t[n]}},$=Math.pow(2,53)-1,C=S("length"),E=function(n){var t=C(n);return"number"==typeof t&&t>=0&&t<=$};x.each=x.forEach=function(n,t,e){t=A(t,e);var r,i;if(E(n))for(r=0,i=n.length;r<i;r++)t(n[r],r,n);else{var o=x.keys(n);for(r=0,i=o.length;r<i;r++)t(n[o[r]],o[r],n)}return n},x.map=x.collect=function(n,t,e){t=j(t,e);for(var r=!E(n)&&x.keys(n),i=(r||n).length,o=Array(i),u=0;u<i;u++){var s=r?r[u]:u;o[u]=t(n[s],s,n)}return o},x.reduce=x.foldl=x.inject=e(1),x.reduceRight=x.foldr=e(-1),x.find=x.detect=function(n,t,e){var r;if(E(n))r=x.findIndex(n,t,e);else r=x.findKey(n,t,e);if(void 0!==r&&-1!==r)return n[r]},x.filter=x.select=function(n,t,e){var r=[];return t=j(t,e),x.each(n,function(n,e,i){if(t(n,e,i))r.push(n)}),r},x.reject=function(n,t,e){return x.filter(n,x.negate(j(t)),e)},x.every=x.all=function(n,t,e){t=j(t,e);for(var r=!E(n)&&x.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(!t(n[u],u,n))return!1}return!0},x.some=x.any=function(n,t,e){t=j(t,e);for(var r=!E(n)&&x.keys(n),i=(r||n).length,o=0;o<i;o++){var u=r?r[o]:o;if(t(n[u],u,n))return!0}return!1},x.contains=x.includes=x.include=function(n,t,e,r){if(!E(n))n=x.values(n);if("number"!=typeof e||r)e=0;return x.indexOf(n,t,e)>=0},x.invoke=function(n,t){var e=v.call(arguments,2),r=x.isFunction(t);return x.map(n,function(n){var i=r?t:n[t];return null==i?i:i.apply(n,e)})},x.pluck=function(n,t){return x.map(n,x.property(t))},x.where=function(n,t){return x.filter(n,x.matcher(t))},x.findWhere=function(n,t){return x.find(n,x.matcher(t))},x.max=function(n,t,e){var r,i,o=-1/0,u=-1/0;if(null==t&&null!=n){n=E(n)?n:x.values(n);for(var s=0,a=n.length;s<a;s++)if((r=n[s])>o)o=r}else t=j(t,e),x.each(n,function(n,e,r){if((i=t(n,e,r))>u||i===-1/0&&o===-1/0)o=n,u=i});return o},x.min=function(n,t,e){var r,i,o=1/0,u=1/0;if(null==t&&null!=n){n=E(n)?n:x.values(n);for(var s=0,a=n.length;s<a;s++)if((r=n[s])<o)o=r}else t=j(t,e),x.each(n,function(n,e,r){if((i=t(n,e,r))<u||i===1/0&&o===1/0)o=n,u=i});return o},x.shuffle=function(n){for(var t,e=E(n)?n:x.values(n),r=e.length,i=Array(r),o=0;o<r;o++){if((t=x.random(0,o))!==o)i[o]=i[t];i[t]=e[o]}return i},x.sample=function(n,t,e){if(null==t||e){if(!E(n))n=x.values(n);return n[x.random(n.length-1)]}return x.shuffle(n).slice(0,Math.max(0,t))},x.sortBy=function(n,t,e){return t=j(t,e),x.pluck(x.map(n,function(n,e,r){return{value:n,index:e,criteria:t(n,e,r)}}).sort(function(n,t){var e=n.criteria,r=t.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(e<r||void 0===r)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,e,r){var i={};return e=j(e,r),x.each(t,function(r,o){var u=e(r,o,t);n(i,r,u)}),i}};x.groupBy=F(function(n,t,e){if(x.has(n,e))n[e].push(t);else n[e]=[t]}),x.indexBy=F(function(n,t,e){n[e]=t}),x.countBy=F(function(n,t,e){if(x.has(n,e))n[e]++;else n[e]=1}),x.toArray=function(n){if(!n)return[];if(x.isArray(n))return v.call(n);if(E(n))return x.map(n,x.identity);else return x.values(n)},x.size=function(n){if(null==n)return 0;else return E(n)?n.length:x.keys(n).length},x.partition=function(n,t,e){t=j(t,e);var r=[],i=[];return x.each(n,function(n,e,o){(t(n,e,o)?r:i).push(n)}),[r,i]},x.first=x.head=x.take=function(n,t,e){if(null!=n)if(null==t||e)return n[0];else return x.initial(n,n.length-t)},x.initial=function(n,t,e){return v.call(n,0,Math.max(0,n.length-(null==t||e?1:t)))},x.last=function(n,t,e){if(null!=n)if(null==t||e)return n[n.length-1];else return x.rest(n,Math.max(0,n.length-t))},x.rest=x.tail=x.drop=function(n,t,e){return v.call(n,null==t||e?1:t)},x.compact=function(n){return x.filter(n,x.identity)};var O=function(n,t,e,r){for(var i=[],o=0,u=r||0,s=C(n);u<s;u++){var a=n[u];if(E(a)&&(x.isArray(a)||x.isArguments(a))){if(!t)a=O(a,t,e);var c=0,f=a.length;for(i.length+=f;c<f;)i[o++]=a[c++]}else if(!e)i[o++]=a}return i};x.flatten=function(n,t){return O(n,t,!1)},x.without=function(n){return x.difference(n,v.call(arguments,1))},x.uniq=x.unique=function(n,t,e,r){if(!x.isBoolean(t))r=e,e=t,t=!1;if(null!=e)e=j(e,r);for(var i=[],o=[],u=0,s=C(n);u<s;u++){var a=n[u],c=e?e(a,u,n):a;if(t){if(!u||o!==c)i.push(a);o=c}else if(e){if(!x.contains(o,c))o.push(c),i.push(a)}else if(!x.contains(i,a))i.push(a)}return i},x.union=function(){return x.uniq(O(arguments,!0,!0))},x.intersection=function(n){for(var t=[],e=arguments.length,r=0,i=C(n);r<i;r++){var o=n[r];if(!x.contains(t,o)){for(var u=1;u<e&&x.contains(arguments[u],o);u++);if(u===e)t.push(o)}}return t},x.difference=function(n){var t=O(arguments,!0,!0,1);return x.filter(n,function(n){return!x.contains(t,n)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(n){for(var t=n&&x.max(n,C).length||0,e=Array(t),r=0;r<t;r++)e[r]=x.pluck(n,r);return e},x.object=function(n,t){for(var e={},r=0,i=C(n);r<i;r++)if(t)e[n[r]]=t[r];else e[n[r][0]]=n[r][1];return e},x.findIndex=o(1),x.findLastIndex=o(-1),x.sortedIndex=function(n,t,e,r){e=j(e,r,1);for(var i=e(t),o=0,u=C(n);o<u;){var s=Math.floor((o+u)/2);if(e(n[s])<i)o=s+1;else u=s}return o},x.indexOf=u(1,x.findIndex,x.sortedIndex),x.lastIndexOf=u(-1,x.findLastIndex),x.range=function(n,t,e){if(null==t)t=n||0,n=0;e=e||1;for(var r=Math.max(Math.ceil((t-n)/e),0),i=Array(r),o=0;o<r;o++,n+=e)i[o]=n;return i};var I=function(n,t,e,r,i){if(!(r instanceof t))return n.apply(e,i);var o=k(n.prototype),u=n.apply(o,i);if(x.isObject(u))return u;else return o};x.bind=function(n,t){if(b&&n.bind===b)return b.apply(n,v.call(arguments,1));if(!x.isFunction(n))throw new TypeError("Bind must be called on a function");var e=v.call(arguments,2),r=function(){return I(n,r,t,this,e.concat(v.call(arguments)))};return r},x.partial=function(n){var t=v.call(arguments,1),e=function(){for(var r=0,i=t.length,o=Array(i),u=0;u<i;u++)o[u]=t[u]===x?arguments[r++]:t[u];for(;r<arguments.length;)o.push(arguments[r++]);return I(n,e,this,this,o)};return e},x.bindAll=function(n){var t,e,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)e=arguments[t],n[e]=x.bind(n[e],n);return n},x.memoize=function(n,t){var e=function(r){var i=e.cache,o=""+(t?t.apply(this,arguments):r);if(!x.has(i,o))i[o]=n.apply(this,arguments);return i[o]};return e.cache={},e},x.delay=function(n,t){var e=v.call(arguments,2);return setTimeout(function(){return n.apply(null,e)},t)},x.defer=x.partial(x.delay,x,1),x.throttle=function(n,t,e){var r,i,o,u=null,s=0;if(!e)e={};var a=function(){if(s=!1===e.leading?0:x.now(),u=null,o=n.apply(r,i),!u)r=i=null};return function(){var c=x.now();if(!s&&!1===e.leading)s=c;var f=t-(c-s);if(r=this,i=arguments,f<=0||f>t){if(u)clearTimeout(u),u=null;if(s=c,o=n.apply(r,i),!u)r=i=null}else if(!u&&!1!==e.trailing)u=setTimeout(a,f);return o}},x.debounce=function(n,t,e){var r,i,o,u,s,a=function(){var c=x.now()-u;if(c<t&&c>=0)r=setTimeout(a,t-c);else if(r=null,!e)if(s=n.apply(o,i),!r)o=i=null};return function(){o=this,i=arguments,u=x.now();var c=e&&!r;if(!r)r=setTimeout(a,t);if(c)s=n.apply(o,i),o=i=null;return s}},x.wrap=function(n,t){return x.partial(t,n)},x.negate=function(n){return function(){return!n.apply(this,arguments)}},x.compose=function(){var n=arguments,t=n.length-1;return function(){for(var e=t,r=n[t].apply(this,arguments);e--;)r=n[e].call(this,r);return r}},x.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},x.before=function(n,t){var e;return function(){if(--n>0)e=t.apply(this,arguments);if(n<=1)t=null;return e}},x.once=x.partial(x.before,2);var D=!{toString:null}.propertyIsEnumerable("toString"),z=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(n){if(!x.isObject(n))return[];if(g)return g(n);var t=[];for(var e in n)if(x.has(n,e))t.push(e);if(D)s(n,t);return t},x.allKeys=function(n){if(!x.isObject(n))return[];var t=[];for(var e in n)t.push(e);if(D)s(n,t);return t},x.values=function(n){for(var t=x.keys(n),e=t.length,r=Array(e),i=0;i<e;i++)r[i]=n[t[i]];return r},x.mapObject=function(n,t,e){t=j(t,e);for(var r,i=x.keys(n),o=i.length,u={},s=0;s<o;s++)r=i[s],u[r]=t(n[r],r,n);return u},x.pairs=function(n){for(var t=x.keys(n),e=t.length,r=Array(e),i=0;i<e;i++)r[i]=[t[i],n[t[i]]];return r},x.invert=function(n){for(var t={},e=x.keys(n),r=0,i=e.length;r<i;r++)t[n[e[r]]]=e[r];return t},x.functions=x.methods=function(n){var t=[];for(var e in n)if(x.isFunction(n[e]))t.push(e);return t.sort()},x.extend=T(x.allKeys),x.extendOwn=x.assign=T(x.keys),x.findKey=function(n,t,e){t=j(t,e);for(var r,i=x.keys(n),o=0,u=i.length;o<u;o++)if(r=i[o],t(n[r],r,n))return r},x.pick=function(n,t,e){var r,i,o={},u=n;if(null==u)return o;if(x.isFunction(t))i=x.allKeys(u),r=A(t,e);else i=O(arguments,!1,!1,1),r=function(n,t,e){return t in e},u=Object(u);for(var s=0,a=i.length;s<a;s++){var c=i[s],f=u[c];if(r(f,c,u))o[c]=f}return o},x.omit=function(n,t,e){if(x.isFunction(t))t=x.negate(t);else{var r=x.map(O(arguments,!1,!1,1),String);t=function(n,t){return!x.contains(r,t)}}return x.pick(n,t,e)},x.defaults=T(x.allKeys,!0),x.create=function(n,t){var e=k(n);if(t)x.extendOwn(e,t);return e},x.clone=function(n){if(!x.isObject(n))return n;else return x.isArray(n)?n.slice():x.extend({},n)},x.tap=function(n,t){return t(n),n},x.isMatch=function(n,t){var e=x.keys(t),r=e.length;if(null==n)return!r;for(var i=Object(n),o=0;o<r;o++){var u=e[o];if(t[u]!==i[u]||!(u in i))return!1}return!0};var N=function(n,t,e,r){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;if(n instanceof x)n=n._wrapped;if(t instanceof x)t=t._wrapped;var i=d.call(n);if(i!==d.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":if(+n!=+n)return+t!=+t;else return 0==+n?1/+n==1/t:+n==+t;case"[object Date]":case"[object Boolean]":return+n==+t}var o="[object Array]"===i;if(!o){if("object"!=typeof n||"object"!=typeof t)return!1;var u=n.constructor,s=t.constructor;if(u!==s&&!(x.isFunction(u)&&u instanceof u&&x.isFunction(s)&&s instanceof s)&&"constructor"in n&&"constructor"in t)return!1}e=e||[],r=r||[];for(var a=e.length;a--;)if(e[a]===n)return r[a]===t;if(e.push(n),r.push(t),o){if((a=n.length)!==t.length)return!1;for(;a--;)if(!N(n[a],t[a],e,r))return!1}else{var c,f=x.keys(n);if(a=f.length,x.keys(t).length!==a)return!1;for(;a--;)if(c=f[a],!x.has(t,c)||!N(n[c],t[c],e,r))return!1}return e.pop(),r.pop(),!0};if(x.isEqual=function(n,t){return N(n,t)},x.isEmpty=function(n){if(null==n)return!0;if(E(n)&&(x.isArray(n)||x.isString(n)||x.isArguments(n)))return 0===n.length;else return 0===x.keys(n).length},x.isElement=function(n){return!(!n||1!==n.nodeType)},x.isArray=m||function(n){return"[object Array]"===d.call(n)},x.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){x["is"+n]=function(t){return d.call(t)==="[object "+n+"]"}}),!x.isArguments(arguments))x.isArguments=function(n){return x.has(n,"callee")};if("function"!=typeof/./&&"object"!=typeof Int8Array)x.isFunction=function(n){return"function"==typeof n||!1};x.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},x.isNaN=function(n){return x.isNumber(n)&&n!==+n},x.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===d.call(n)},x.isNull=function(n){return null===n},x.isUndefined=function(n){return void 0===n},x.has=function(n,t){return null!=n&&y.call(n,t)},x.noConflict=function(){return a._=c,this},x.identity=function(n){return n},x.constant=function(n){return function(){return n}},x.noop=function(){},x.property=S,x.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},x.matcher=x.matches=function(n){return n=x.extendOwn({},n),function(t){return x.isMatch(t,n)}},x.times=function(n,t,e){var r=Array(Math.max(0,n));t=A(t,e,1);for(var i=0;i<n;i++)r[i]=t(i);return r},x.random=function(n,t){if(null==t)t=n,n=0;return n+Math.floor(Math.random()*(t-n+1))},x.now=Date.now||function(){return(new Date).getTime()};var M={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=x.invert(M),L=function(n){var t=function(t){return n[t]},e="(?:"+x.keys(n).join("|")+")",r=RegExp(e),i=RegExp(e,"g");return function(n){return n=null==n?"":""+n,r.test(n)?n.replace(i,t):n}};x.escape=L(M),x.unescape=L(B),x.result=function(n,t,e){var r=null==n?void 0:n[t];if(void 0===r)r=e;return x.isFunction(r)?r.call(n):r};var q=0;x.uniqueId=function(n){var t=++q+"";return n?n+t:t},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,P={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\u2028|\u2029/g,U=function(n){return"\\"+P[n]};x.template=function(n,t,e){if(!t&&e)t=e;t=x.defaults({},t,x.templateSettings);var r=RegExp([(t.escape||H).source,(t.interpolate||H).source,(t.evaluate||H).source].join("|")+"|$","g"),i=0,o="__p+='";if(n.replace(r,function(t,e,r,u,s){if(o+=n.slice(i,s).replace(R,U),i=s+t.length,e)o+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'";else if(r)o+="'+\n((__t=("+r+"))==null?'':__t)+\n'";else if(u)o+="';\n"+u+"\n__p+='";return t}),o+="';\n",!t.variable)o="with(obj||{}){\n"+o+"}\n";o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var u=new Function(t.variable||"obj","_",o)}catch(n){throw n.source=o,n}var s=function(n){return u.call(this,n,x)},a=t.variable||"obj";return s.source="function("+a+"){\n"+o+"}",s},x.chain=function(n){var t=x(n);return t._chain=!0,t};var K=function(n,t){return n._chain?x(t).chain():t};if(x.mixin=function(n){x.each(x.functions(n),function(t){var e=x[t]=n[t];x.prototype[t]=function(){var n=[this._wrapped];return h.apply(n,arguments),K(this,e.apply(x,n))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=f[n];x.prototype[n]=function(){var e=this._wrapped;if(t.apply(e,arguments),("shift"===n||"splice"===n)&&0===e.length)delete e[0];return K(this,e)}}),x.each(["concat","join","slice"],function(n){var t=f[n];x.prototype[n]=function(){return K(this,t.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},!0)r=[],void 0!==(i=function(){return x}.apply(t,r))&&(n.exports=i)}).call(this)},2:function(n,t,e){var r,i;r=[e(0),e(9),e(26)],void 0!==(i=function(n,t,e){var r=e(n,t);return r.Model.prototype.ignoreUnknownAttributes=!0,r}.apply(t,r))&&(n.exports=i)},24:function(n,t,e){var r,i;r=[e(0),e(10)],void 0!==(i=function(n,t){var e=void 0;return function(){var r=this,i=n.toArray(arguments);return{install:n.once(function(){try{e=t.apply(r,i)}catch(n){console.log("Failed to install skate component, maybe it has already been installed")}return e})}}}.apply(t,r))&&(n.exports=i)},25:function(n,t){n.exports=window.require("atlassian/libs/factories/backbone-1.0.0")},26:function(n,t){n.exports=window.require("atlassian/libs/factories/brace-1.1.0")},30:function(n,t){n.exports=window.require("atlassian/libs/skate-0.12.6")},31:function(n,t){n.exports=window.require("jira/ajs/list/item-descriptor")},33:function(n,t){n.exports=window.require("jira/ajs/select/multi-select")},36:function(n,t){n.exports=window.require("jira/ajs/control")},41:function(n,t,e){var r,i;if(void 0===o)var o={};if(void 0===o.icons)o.icons={};if(o.icons.icon=function(n,t){return"<"+soy.$$escapeHtml(n.tagName?n.tagName:"span")+(n.id?' id="'+soy.$$escapeHtml(n.id)+'"':"")+' class="aui-icon'+(n.useIconFont?" aui-icon-"+soy.$$escapeHtml(n.size?n.size:"small"):"")+" aui"+soy.$$escapeHtml(n.useIconFont?"-iconfont":"-icon")+soy.$$escapeHtml(n.iconFontSet?"-"+n.iconFontSet:"")+"-"+soy.$$escapeHtml(n.icon)+o.renderExtraClasses(n)+'"'+o.renderExtraAttributes(n)+">"+(n.accessibilityText?soy.$$escapeHtml(n.accessibilityText):"")+"</"+soy.$$escapeHtml(n.tagName?n.tagName:"span")+">"},goog.DEBUG)o.icons.icon.soyTemplateName="aui.icons.icon";r=[e(13)],void 0!==(i=function(){return o.icons}.apply(t,r))&&(n.exports=i)},549:function(n,t,e){!function(n,t){n(function(){t.install()})}(e(1),e(178))},62:function(n,t){n.exports=window.require("jira/ajs/select/multi-select/lozenge-group")},8:function(n,t,e){"use strict";n.exports=e(14).polyfill()},88:function(n,t,e){var r,i;r=[],void 0!==(i=function(){return function(n){return{value:n.origin.appKey+"/"+n.origin.originId,label:n.label.value}}}.apply(t,r))&&(n.exports=i)},89:function(n,t,e){var r,i;r=[e(1)],void 0!==(i=function(n){return function(t,e){n.ajax({url:AJS.contextPath()+"/rest/assetapi/asset/"+t,cache:!0,headers:{"X-B3-Sampled":"1"}}).fail(function(){var n=t.split("/");e({origin:{appKey:n[0],originId:n[1]},label:{value:"Unknown Asset"}})}).then(function(n){e&&e(n)})}}.apply(t,r))&&(n.exports=i)},9:function(n,t,e){var r,i;r=[e(0),e(1),e(25)],void 0!==(i=function(n,t,e){return e(n,t)}.apply(t,r))&&(n.exports=i)},91:function(n,t){}},[1242]);;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:lodash-amd', location = 'applinks/internal/lib/lodash-jslibs.js' */
define('applinks/lib/lodash', ['atlassian/libs/underscore-1.5.2'], function(lodash) {
        return lodash;
    });;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/lib-version.js' */
// NOTE: this is in "lib" because it's required by aui-amd.js. This module _cannot_ have any dependencies on non-lib
// modules (like "common")
define('applinks/lib/version', [
    'applinks/lib/lodash'
], function(
    _
) {

    function checkIntValue(value, desc) {
        if (_.isUndefined(value)) {
            return 0;
        } else if (typeof value !== 'number' || isNaN(value)) {
            throw new Error(desc + ': expected a number, was: <' + value + '>');
        } else {
            return Math.floor(value);
        }
    }

    function checkVersionObject(object, desc) {
        if (!object || !(object instanceof Version)) {
            throw new Error(desc + ': expected a Version object, was: <' + object + '>');
        }
        return object;
    }

    function compareInt(intOne, intTwo) {
        return intOne > intTwo ? 1 : intOne == intTwo ? 0 : -1;
    }

    /**
     * Constructs a version object that contains version information and can be compared with other version objects.
     *
     * @param major major version component
     * @param minor minor version component
     * @param bugfix bugfix version component
     * @constructor
     */
    function Version(major, minor, bugfix) {
        this.major = checkIntValue(major, 'major');
        this.minor = checkIntValue(minor, 'minor');
        this.bugfix = checkIntValue(bugfix, 'bugfix');
    }

    /**
     * Constructs a Version by parsing a version string.
     *
     * @param versionString version string to parse, expected to be in the form of <major>.<minor>.<bugfix>
     * @param versionDesc what version does the `versionString` represent
     */
    Version.parse = function(versionString, versionDesc) {
        versionDesc = versionDesc || 'versionString';
        if (!versionString) {
            throw new Error(versionDesc + ': expected a non-empty string');
        }
        var versionSplit = versionString.split('.');
        if (versionSplit.length !== 3) {
            throw new Error(versionDesc + ': expected <major>.<minor>.<bugfix> string, was: <' + versionString + '>');
        }
        return new Version(parseInt(versionSplit[0]), parseInt(versionSplit[1]), parseInt(versionSplit[2]));
    };

    /**
     * Comparator function to sort Version objects.
     *
     * @param versionOne first version object
     * @param versionTwo second version object
     * @returns {Number} comparison result
     * @see Version.compareTo(that)
     */
    Version.comparator = function(versionOne, versionTwo) {
        return checkVersionObject(versionOne, 'versionOne').compareTo(checkVersionObject(versionTwo, 'versionTwo'));
    };

    /**
     * Return -1, 0 or 1 as this Version object represents a version less than, equal to, or greater than `that`.
     *
     * @param that the other version to compare to
     * @returns {Number} comparison result
     */
    Version.prototype.compareTo = function(that) {
        checkVersionObject(that, 'that');
        var majorResult = compareInt(this.major, that.major);
        if (majorResult != 0) {
            return majorResult;
        }
        var minorResult = compareInt(this.minor, that.minor);
        if (minorResult != 0) {
            return minorResult;
        }
        return compareInt(this.bugfix, that.bugfix);
    };

    Version.prototype.greaterThan = function(that) {
        return this.compareTo(that) > 0;
    };

    Version.prototype.greaterThanOrEqual = function(that) {
        return this.compareTo(that) >= 0;
    };

    Version.prototype.lessThan = function(that) {
        return this.compareTo(that) < 0;
    };

    Version.prototype.lessThanOrEqual = function(that) {
        return this.compareTo(that) <= 0;
    };

    Version.prototype.equals = function(that) {
        return this.compareTo(that) == 0;
    };

    Version.prototype.toMinor = function() {
        return new Version(this.major, this.minor);
    };

    Version.prototype.toMajor = function() {
        return new Version(this.major);
    };

    Version.prototype.toString = function() {
        return this.major + '.' + this.minor + '.' + this.bugfix;
    };

    return Version;
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-version-details.js' */
define('applinks/lib/aui-version-details', [
    'applinks/lib/version'
], function(
    Version
) {
    // minimum 5.8.x and 5.9.x AUI versions - lower versions ship with bugs that break some of the Applinks functionality
    var MINIMUM_58_VERSION = new Version(5, 8, 15);
    var MINIMUM_59_VERSION = new Version(5, 9, 13);
    var VERSION_58 = new Version(5, 8);
    var VERSION_59 = new Version(5, 9);

    function checkVersion(version) {
        // must be >= the minimum required 5.8.x version
        if (version.lessThan(MINIMUM_58_VERSION)) {
            throw new Error('AUI version ' + version + ' is too low, you need to upgrade AUI to ' + MINIMUM_58_VERSION +
                ' or ' + MINIMUM_59_VERSION + ' for Applinks to work');
        }
        // if 5.9, must be >= the minimum required 5.9.x version
        if (version.greaterThanOrEqual(VERSION_59) && version.lessThan(MINIMUM_59_VERSION)) {
            throw new Error('AUI version ' + version + ' is too low, you need to upgrade AUI to ' + MINIMUM_59_VERSION +
                ' for Applinks to work');
        }
    }

    function addVersionDetails(AJS) {
        var ajsVersion = Version.parse(AJS.version, 'AUI version');
        checkVersion(ajsVersion);

        AJS.versionDetails = ajsVersion;
        AJS.versionDetails.is58 = ajsVersion.toMinor().equals(VERSION_58);
        AJS.versionDetails.is59 = ajsVersion.toMinor().equals(VERSION_59);

        return AJS;
    }

    return  {
        /**
         * Check AUI version for compatibility with Applinks and add `versionDetails` field.
         */
        addVersionDetails: addVersionDetails
    };
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/console-amd.js' */
define('applinks/lib/console', function() {
    return window.console;
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/jquery-amd.js' */
define('applinks/lib/jquery', function() {
   return window.jQuery;
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/aui-amd.js' */
define('applinks/lib/aui', [
    'applinks/lib/window',
    'applinks/lib/aui-version-details'
], function(
    window,
    VersionDetails
) {
    var AJS = window.AJS;
    if (!AJS) {
        throw new Error('window.AJS not defined, cannot load AUI');
    }

    return VersionDetails.addVersionDetails(AJS);
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/wrm-amd.js' */
/**
 * Define Web resource manager as an AMD dependency. This should also be present in apps using Atlassian Plugins Web
 * Resources framework.
 */
define('applinks/lib/wrm', function() {
   return window.WRM;
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/skate-amd.js' */
define('applinks/lib/skate', function() {
   // window.skate is not exposed as a global from AUI 5.9, this will return undefined with that version or later
   return window.skate;
});
;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-lib', location = 'applinks/internal/lib/window-amd.js' */
/**
 * Define window as AMD module to facilitate unit testing of some modules
 */
define('applinks/lib/window', function() {
    return window;
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-public', location = 'applinks-plugin/js/applinks.public.js' */
// NOTE: this is used outside of Applinks. See atlassian-plugin.xml for more details about the associated restrictions

/**
 * Support code to provide appropriate behavior for HTML elements created by
 * ApplicationLinkUIService; also, public functions that can be used from JS code
 * in other plugins to create the same kinds of HTML elements, in case it's not
 * convenient to do so on the back end.
 */
var ApplinksUtils = ApplinksUtils || (function($) {

    var pendingRequests = {},
        pendingConfirmations = {};
    
    // Provide a well-defined name for the authentication window/tab we create with
    // window.open() - may be useful in debugging, and is used by integration tests.
    // Note, IE8 does not allow this name to contain hyphens or periods.
    var authWindowName = "com_atlassian_applinks_authentication";

    /**
     * This function is basically duplicated from messages.js in AJS, because some products
     * only provide a stub version of messages.js within gadgets.
     */
    function makeCloseable(message) {
        var $icon = $('<span class="aui-icon icon-close"></span>').click(function () {
            message.trigger("messageClose", [this]).remove();
        });
        message.append($icon);
    }

    /**
     * Helper function to get the DOM object of the current iframe.
     * @return {Object} a DOM object, or null if we are not in an iframe
     */
    function getCurrentIframe() {
        if (window === parent.window) {
            return null;
        }
        var ret = null,
            myFrameWindow = window;
        $('iframe', parent.document.body).each(function(index) {
            if (this.contentWindow.window === myFrameWindow) {
                ret = this;
            }
        });
        return ret;
    }

    /**
     * Event handler that is called by the applinks authorization completion servlet.  It triggers
     * the completion function for any pending authorization request that matches the given applink
     * ID, and also redispatches the event to any other iframes in the current window.
     * @param {Object} eventObject  JQuery event object
     * @param {string} applinkId  application link ID
     * @param {boolean} success  true if the request was approved
     * @param {string} authAdminUri  URI of the "OAuth Access Tokens" page (will be displayed in the
     *   confirmation message)
     * @param {boolean} wasRedispatched  true if the event has been retriggered from another frame
     * @param {Object} [messages]
     *      'userError': an error message relevant to a non-admin user,
     *      'adminError': an error message relevant to an admin user,
     *      'adminErrorDetails': a list of details related to the admin message if there is one 
     */
    function onAuthCompletion(eventObject, applinkId, success, authAdminUri, wasRedispatched, messages) {
        if (applinkId in pendingRequests) {
            var request = pendingRequests[applinkId];
            if (success) {
                request.authAdminUri = authAdminUri;
                delete pendingRequests[applinkId];
            }
            completeAuthRequest(request, success, messages);
        }
        if (!wasRedispatched && parent && (parent !== window)) {
            var myWindow = window;
            $('iframe', parent.document.body).each(function(index, frame) {
                var scope = frame.contentWindow;
                if (scope !== myWindow) {
                    if (scope.AJS && scope.AJS.$) {
                        scope.AJS.$(scope.document).trigger('applinks.auth.completion',
                            [applinkId, success, authAdminUri, true, messages]);
                    }
                }
            });
        }
    }
      
    /**
     * Fires the appropriate event when the authorization flow has completed.  On approval, reloads
     * the window/frame unless an event handler calls {@code preventDefault()} on the event.
     * @param {Object} applinkProperties  has the same properties passed to {@link createAuthRequestBanner}
     * @param {boolean} approved  true if the request was approved
     * @param {Object} [messages]
     *      'userError': an error message relevant to a non-admin user,
     *      'adminError': an error message relevant to an admin user,
     *      'adminErrorDetails': a list of details related to the admin message if there is one
     */
    function completeAuthRequest(applinkProperties, approved, messages) {
        var $scope = $(document);
        if (approved) {
            // Temporarily bind an event handler so our handler runs after any other handlers that
            // may exist.
            var defaultApprovalHandler = function (eventObject) {
                if (eventObject.isDefaultPrevented()) {
                    // Don't reload, just show the confirmation message
                    showAuthConfirmationBanner(applinkProperties);
                } else {
                    // Reload, but first save a reminder to make us show a confirmation message
                    // after we've reloaded.
                    registerPendingConfirmation(applinkProperties);
                    document.location.reload(true);
                }
            };
            $scope.bind('applinks.auth.approved', defaultApprovalHandler);
            $scope.trigger('applinks.auth.approved', applinkProperties);
            $scope.unbind('applinks.auth.approved', defaultApprovalHandler);
        } else {
            // There's no default behavior for a request that was denied, but fire an event in case
            // anyone is interested.
            $scope.trigger('applinks.auth.denied', [applinkProperties, messages]);
        }
    }

    /**
     * Used internally to make the applink support code aware of a "please authenticate" message
     * element that has been displayed, by wiring the appropriate event handlers and adding the
     * applink's properties to an internal list of authentication requests.
     * @param $element {Object}  a JQuery object
     * @param applinkProperties {Object}  has the same properties passed to {@link createAuthRequestBanner}
     */
    function initAuthRequest($element, applinkProperties) {
        var $authLink = $element.find("a.applink-authenticate");
        
        if ($element.hasClass('aui-message')) {
            // Workaround for incomplete AJS availability in some products
            makeCloseable($element);
        }
        
        $authLink.click(function(e) {
            window.open(applinkProperties.authUri, authWindowName);
            e.preventDefault();
        });
        
        pendingRequests[applinkProperties.id] = applinkProperties;
        
        return $element;
    }
    
    /**
     * Used internally to ensure that {@link initAuthRequest} is called for every
     * authorisation request element that was generated as HTML from the back end,
     * rather than by calling {@link createAuthRequestBanner} or
     * {@link createAuthRequestInline}.  The parameters of the request are passed
     * from the back end in hidden input elements.
     */
    function initAuthRequestElements() {
        $('.applinks-auth-request').each(function(index) {
            var $e = $(this),
                applinkId = $e.find(".applinkId").val(),
                appName = $e.find(".appName").val(),
                appUri = $e.find(".appUri").val(),
                authUri = $e.find(".authUri").val();
            // Ignore request banners that have already been created (by {@link createAuthRequestBanner} or
            // {@link createAuthRequestInline})
            if (applinkId && authUri) {
                initAuthRequest($e, {
                    id: applinkId,
                    appName: appName,
                    appUri: appUri,
                    authUri: authUri});
            }
        });
    }

    /**
     * Builds a "please authenticate" banner (in a standard AUI message box) containing a link that
     * that will start authorization for an application link that needs credentials.
     * <p>
     * On completion of the authorization flow, a JQuery event will be triggered on the document,
     * with the event type "applinks.auth.approved" or "applinks.auth.denied", and an additional
     * parameter equal to the {@code applinkProperties} parameter that was passed here.
     * <p>
     * If authorization is granted (event "applinks.auth.approved"), the default behavior is for the
     * window or frame to be reloaded; also, a confirmation banner will be displayed either within
     * a &lt;div&gt; element of class "applinks-auth-confirmation-container" if one exists, or at the top of
     * the document otherwise.  Reloading of the window/frame can be disabled by having an event
     * handler call {@code preventDefault()} on the event.
     *
     * @param {Object} applinkProperties contains the following application link properties:
     *   {@code id}: the application link identifier;
     *   {@code appName}: the name of the remote application;
     *   {@code appUri}: the base URI of the remote application;
     *   {@code authUri}: the URI for starting the authorization flow
     * @return {Object} a JQuery object referring to a {@code <div>} element, which has not yet
     *   been inserted anywhere on the page; its class is "applinks-auth-request"
     */
    function createAuthRequestBanner(applinkProperties) {
        var $banner = $('<div class="aui-message warning closeable applinks-auth-request"><p><span class="aui-icon icon-applinks-key"></span></p></div>');
        // Note that we can't just use the AJS.messages.warning() function, because it will put a
        // standard warning icon in the message box and we want a custom icon.
        $banner.append(AJS.format("Additional information may be available, please \u003ca class=\"applink-authenticate\" href=\"{0}\"\u003eauthenticate\u003c/a\u003e with \u003ca href=\"{1}\"\u003e{2}\u003c/a\u003e.",
                                        AJS.escapeHtml(applinkProperties.authUri),
                                        AJS.escapeHtml(applinkProperties.appUri),
                                        AJS.escapeHtml(applinkProperties.appName)));
        initAuthRequest($banner, applinkProperties);
        return $banner;
    }

    /**
     * Builds a "please authenticate" message suitable for displaying inline (in a span
     * with the class "applinks-auth-request"), containing a link that will start authorization.
     * This behaves identically to {@link createAuthRequestBanner}, except it creates a {@code <span>}
     * element instead of a {@code div} and also allows additional text to be displayed.
     * 
     * @param {string} content  optional HTML content to be displayed within the inline
     *   element (e.g. a description of the entity for which authorization is required);
     *   will not be escaped; may be null
     * @param {Object} applinkProperties  see {@link createAuthRequestBanner}
     * @return {Object} a JQuery object referring to a {@code <span>} element, which has not yet
     *   been inserted anywhere on the page; its class is "applinks-auth-request"
     */
    function createAuthRequestInline(content, applinkProperties) {
        var $lozenge = $('<span class="applinks-auth-request"></span>'),
            $contentSpan = $('<span class="applinks-request-description"></span>'),
            message = AJS.format("\u003ca class=\"applink-authenticate\" href=\"{0}\"\u003eAuthenticate\u003c/a\u003e to see additional information.", AJS.escapeHtml(applinkProperties.authUri));
        if (content) {
            $contentSpan.append(content);
            $contentSpan.append(" - ");
        }
        $contentSpan.append(message);
        $lozenge.append($contentSpan);
        initAuthRequest($lozenge, applinkProperties);
        return $lozenge;
    }

    /**
     * Used internally to remember the fact that we have just completed authorizing an
     * applink and are about to refresh the iframe associated with it, so that we can
     * display a confirmation message after the iframe is refreshed.
     */
    function registerPendingConfirmation(applinkProperties) {
        var frame = getCurrentIframe();
        if ((!frame) || (!frame.id)) {
            return;
        }
        if (! parent.ApplinksUtils.pendingConfirmations) {
            parent.ApplinksUtils.pendingConfirmations = { };
        }
        if (!(frame.id in parent.ApplinksUtils.pendingConfirmations)) {
            parent.ApplinksUtils.pendingConfirmations[frame.id] = [];
        }
        parent.ApplinksUtils.pendingConfirmations[frame.id].push(applinkProperties);
        return;
    }

    /**
     * Called after a page load, to see if we've been refreshed due to a successful authorization.
     * If we're in an iframe, a variable will have been set on the parent window to tell us that
     * this happened.  If so, insert a confirmation banner at the top of the iframe.
     */
    function checkForPendingConfirmations() {
        if (parent && parent.ApplinksUtils && parent.ApplinksUtils.pendingConfirmations) {
            var myFrame = getCurrentIframe();
            if (myFrame) {
                if (myFrame.id in parent.ApplinksUtils.pendingConfirmations) {
                    var pendingConfirmations = parent.ApplinksUtils.pendingConfirmations[myFrame.id];
                    delete parent.ApplinksUtils.pendingConfirmations[myFrame.id];
                    for (var i = 0, n = pendingConfirmations.length; i < n; i++) {
                        showAuthConfirmationBanner(pendingConfirmations[i]);
                    }
                }
            }
        }
    }

    /**
     * Displays a confirmation banner.  If an element exists with the class
     * "applinks-auth-confirmation-contianer", it is inserted there, otherwise at the top of the
     * document.
     */
    function showAuthConfirmationBanner(applinkProperties) {
        var scope = $(document),
            banner = $('<div class="aui-message success closeable applinks-auth-confirmation"><p><span class="aui-icon icon-applinks-key-success"></span></p></div>'),
            container = scope.find('div.applinks-auth-confirmation-container');
        if (!container.length) {
            container = scope.find('body');
        }
        banner.append(AJS.format("This application is now using \u003ca href=\"{0}\"\u003e{1}\u003c/a\u003e\'\'s credentials. Revoke access at any time by going to \u003ca href=\"{2}\"\u003eOAuth access tokens\u003c/a\u003e.",
                                        AJS.escapeHtml(applinkProperties.appUri),
                                        AJS.escapeHtml(applinkProperties.appName),
                                        AJS.escapeHtml(applinkProperties.authAdminUri)));
        makeCloseable(banner);
        container.prepend(banner);
        setTimeout(function() {
            banner.fadeOut(1000, function() {
                $(this).remove();
            });
        }, 5000);
    }
    
    /**
     * Initialization function to be called once at document ready time.
     */
    function setup() {
        // If we're in an iframe, set up an object in the parent window that we can use to
        // keep track of state even if the iframe is refreshed.
        if (parent && !(parent === window)) {
            if (! parent.ApplinksUtils) {
                parent.ApplinksUtils = { };
            }
        }
        
        $(document).bind('applinks.auth.completion', onAuthCompletion);

        initAuthRequestElements();
        checkForPendingConfirmations();
    }

    $(document).ready(setup);
    
    return {      
        createAuthRequestBanner: createAuthRequestBanner,
        createAuthRequestInline: createAuthRequestInline
    };
})(AJS.$);
;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/events.js' */
define('applinks/common/events', [
    'applinks/lib/jquery',
    'applinks/lib/lodash',
    'applinks/lib/window',
    'applinks/common/preconditions'
], function(
    $,
    _,
    window,
    Preconditions
) {
    var PREFIX = 'applinks.event.';

    function applinksEvent(eventId) {
        return PREFIX + Preconditions.nonEmptyString(eventId, 'eventId');
    }

    /**
     * Provides common Applinks event IDs and a simple event system facade API. This is a preferred way to subscribe to
     * and raise Applinks-specific events as it does not depend on a specific event bus or event target (such as
     * `document`), as well as facilitates unit testing.
     */
    return {
        PREREADY: applinksEvent('preready'),
        READY: applinksEvent('ready'),

        /**
         * Raised when applinks list is first loaded
         */
        APPLINKS_LOADED: applinksEvent('loaded'),
        /**
         * Raised when applinks list is updated
         */
        APPLINKS_UPDATED: applinksEvent('updated'),

        /**
         * This event is only raised when linking to Atlassian applications
         * Can be consumed by other plugins
         */
        NEW_APPLINK_CREATED: applinksEvent('created'),

        // legacy events
        Legacy: {
            MESSAGE_BOX_DISPLAYED: applinksEvent('message-box-displayed')
        },

        applinksEvent: applinksEvent,

        on: function(events, handler, context) {
            var handlerWithContext = context ? _.bind(handler, context) : handler;
            $(window.document).on(events, handlerWithContext);
        },

        off: function(events, handler) {
            $(window.document).off(events, handler);
        },

        trigger: function(event, data) {
            $(window.document).trigger(event, data);
        }
    }
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/i18n.js' */
define('applinks/common/i18n', [
    'applinks/lib/lodash',
    'applinks/lib/jquery',
    'applinks/lib/wrm',
    'applinks/common/modules',
    'applinks/common/preconditions',
    'applinks/common/products'
], function(
    _,
    $,
    WRM,
    ApplinksModules,
    Preconditions,
    ApplinksProducts
) {
    var getAllEntityTypes = _.memoize(function() {
        var val = WRM.data.claim(ApplinksModules.dataFqn(ApplinksModules.COMMON_EXPORTED, 'entity-types'));
        return Preconditions.hasValue(val, 'entity-types', 'Entity Types data not found');
    });

    var getAllAuthTypes = _.memoize(function() {
        var val = WRM.data.claim(ApplinksModules.dataFqn(ApplinksModules.COMMON_EXPORTED, 'authentication-types'));
        return Preconditions.hasValue(val, 'authentication-types', 'Authentication Types data not found');
    });

    return {
        
        /**
         * @param typeId ID of the application type to resolve
         * @returns {string} resolved i18n-ed type name, or the original `typeId` if there is no mapping
         */
        getApplicationTypeName: function(typeId) {
            return ApplinksProducts.getTypeName(typeId);
        },

        /**
         * @param typeId ID of the entity type to resolve
         * @returns {string} resolved i18n-ed singular entity type name, or the original `typeId` if there is no mapping
         */
        getEntityTypeName: function(typeId) {
            return getAllEntityTypes().singular[typeId] || typeId;
        },

        /**
         * @param typeId ID of the entity type to resolve
         * @returns {string} resolved i18n-ed plural entity type name, or the original `typeId` if there is no mapping
         */
        getPluralizedEntityTypeName: function(typeId) {
            return getAllEntityTypes().plural[typeId] || typeId;
        },

        /**
         * @param type ID of the authentication type to resolve (usually in a form of full class name)
         * @returns {string} resolved i18n-ed authentication type name, or the original `type` if there is no mapping
         */
        getAuthenticationTypeName: function(type) {
            return getAllAuthTypes()[type] || type;
        }
    };
});
;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/modules.js' */
/**
 * Applinks plugin modules core constants and definitions.
 */
define('applinks/common/modules', function() {
    return {
        /**
         * Applinks plugin key
         */
        PLUGIN_KEY: 'com.atlassian.applinks.applinks-plugin',

        // key web resource keys
        COMMON_EXPORTED: 'applinks-common-exported',
        COMMON: 'applinks-common',

        /**
         * Fully qualifies a module name using the plugin key.
         *
         * @param {string} moduleName module name to qualify
         * @returns {string} fully qualified name
         */
        fqn: function(moduleName) {
            return this.PLUGIN_KEY + ':' + moduleName;
        },

        /**
         * Fully qualifies web-resource data using module name and data key.
         *
         * @param {string} moduleName module name
         * @param {string} dataKey key of the data element
         * @returns {string} fully qualified name
         */
        dataFqn: function(moduleName, dataKey) {
            return this.fqn(moduleName) + '.' + dataKey;
        }
    };
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/preconditions.js' */
define('applinks/common/preconditions', [
    'applinks/lib/lodash'
], function(
    _
) {
    function nonEmptyString(value, varName, customMessage) {
        return _checkArgument(
            _.isString(value) && !_.isEmpty(value),
            customMessage,
            _withVarName(varName, ': expected a non-empty string, was: <' + value + '>'),
            value
        );
    }

    function isFunction(value, varName, customMessage) {
        return _checkArgument(
            _.isFunction(value),
            customMessage,
            _withVarName(varName, ': expected a function, was: ' + value),
            value
        );
    }

    function isArray(value, varName, customMessage) {
        return _checkArgument(
            _.isArray(value),
            customMessage,
            _withVarName(varName, ': expected an array, was: ' + value),
            value
        );
    }

    function hasValue(value, varName, customMessage) {
        return _checkArgument(
            value,
            customMessage,
            _withVarName(varName, ': expected a value'),
            value
        );
    }

    function _checkArgument(test, message, defaultMessage, actualValue) {
        var actualMessage = message ? message : defaultMessage;
        if (!test) {
            throw new Error(actualMessage)
        }
        return actualValue || test;
    }

    function _withVarName(varName, msg) {
        return (varName || '[unspecified]') + msg;
    }

    return {
        checkArgument: _.partial(_checkArgument, _, _, '', _),
        nonEmptyString: nonEmptyString,
        isArray: isArray,
        isFunction: isFunction,
        hasValue: hasValue
    };
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-common-exported', location = 'applinks/internal/common/products.js' */
define('applinks/common/products', [
    'applinks/lib/lodash',
    'applinks/lib/wrm',
    'applinks/common/modules',
    'applinks/common/preconditions'
], function(
    _,
    WRM,
    ApplinksModules,
    Preconditions
) {
    var getAllTypes = _.memoize(function() {
        var val = WRM.data.claim(ApplinksModules.dataFqn(ApplinksModules.COMMON_EXPORTED, 'applinks-types'));
        return Preconditions.hasValue(val, 'types', 'Application Types data not found');
    });

    /**
     * @param typeId ID of the application type to resolve
     * @returns {string} resolved i18n-ed type name, or the original `typeId` if there is no mapping
     */
    function getTypeName(typeId) {
        return getAllTypes()[typeId] || typeId;
    }

    /**
     * Map of Atlassian product keys to application type IDs
     */
    return {
        BAMBOO: 'bamboo',
        BITBUCKET: 'stash', // special case, see java class com.atlassian.applinks.application.bitbucket.BitbucketApplicationTypeImpl.TYPE_ID
        CONFLUENCE: 'confluence',
        FECRU: 'fecru',
        JIRA: 'jira',
        REFAPP: 'refapp',
        STASH: 'stash',
        getTypeName: getTypeName
    };
});;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/non-amd/rest-service.js' */
// NOTE: this is used outside of Applinks. See atlassian-plugin.xml for more details about the associated restrictions

(function(AppLinksI18n, ApplinksEvents) {
    /**
     * The triggering of AppLinks initialisation can be customised by setting a function on
     * AJS.AppLinksInitialisationBinder. The binder function should take a single argument which is a zero-arg function to
     * run and should execute this function when appropriate.
     */
    AppLinks = AJS.$.extend(window.AppLinks || {}, {
        Event: {
            NAMESPACE: 'applinks'
        },
        I18n: AppLinksI18n
    });
    AppLinks.Event = AJS.$.extend(window.AppLinks.Event, ApplinksEvents);

    // Is there an overridden initialisation binder?
    if (AJS.AppLinksInitialisationBinder) {
        AppLinks.initialisationBinder = AJS.AppLinksInitialisationBinder;
    } else {
        // The default bind if no specific binder is specified
        AppLinks.initialisationBinder = function(f) {
            AJS.toInit(f);
        }
    }

    AppLinks.initialisationBinder(function() {
        //$ is passed in by AJS.toInit but initilizationBinder can be over loaded by products so that $ is unsafe.
        var $ = AJS.$;
        AppLinks = $.extend(window.AppLinks || {}, {
            failure: function(data) {
                if (data.status == 401) {
                    window.location.reload();
                } else {
                    var message = AppLinks.parseError(data);
                    var errorDivs = $('.page-error');

                    if (errorDivs.length > 0) {
                        errorDivs.html(message).fadeIn('slow');
                    } else {
                        alert('REST request failed: ' + message);
                    }
                }
            },
            jsonRequest: function(url, type, data, success, error) {
                if (data) {
                    data = JSON.stringify(data);
                }
                $(".page-error").fadeOut('fast');
                if (!error) error = AppLinks.failure;
                return jQuery.ajax({
                    url: url,
                    type: type,
                    data: data,
                    dataType: 'json',
                    contentType: "application/json; charset=utf-8",
                    cache: false,
                    success: success,
                    error: error,
                    jsonp: false
                });
            },
            xmlRequest: function(url, type, data, success, error) {
                if (data) {
                    data = JSON.stringify(data);
                }
                $(".page-error").fadeOut('fast');
                if (!error) error = AppLinks.failure;
                return jQuery.ajax({
                    url: url,
                    type: type,
                    data: data,
                    dataType: 'xml',
                    contentType: "application/xml; charset=utf-8",
                    cache: false,
                    success: success,
                    error: error
                });
            },
            parseError: function(errorData) {
                var error;
                try {
                    error = JSON.parse(errorData.responseText);
                } catch (e) {
                    if (errorData.statusText) {
                        return error = errorData.statusText;
                    } else {
                        return errorData;
                    }
                }
                if (error.message) {
                    if ($.isArray(error.message)) {
                        return error.message.join(' ');
                    }
                    return error.message;
                }
                else {
                    return errorData.statusText;
                }
            },
            put: function(url, data, success, error) {
                return AppLinks.jsonRequest(url, 'PUT', data, success, error);
            },
            post: function(url, data, success, error) {
                return AppLinks.jsonRequest(url, 'POST', data, success, error);
            },
            update: function(data, success, error) {
                AppLinks.put(AppLinks.self_link(data), data, success, error);
            },
            get: function(url, success, error) {
                return AppLinks.jsonRequest(url, 'GET', null, success, error);
            },
            getXml: function(url, success, error) {
                return AppLinks.xmlRequest(url, 'GET', null, success, error);
            },
            self_link: function(item) {
                for (var i = 0, _i = item.link.length; i < _i; i++) {
                    var link = item.link[i];
                    if (link.rel == "self") return link.href;
                }

                throw "No self-link found";
            },
            del: function(urlOrObject, success, error) {
                var url;
                if (typeof(urlOrObject) == 'string') url = urlOrObject;
                else url = AppLinks.self_link(urlOrObject);
                return AppLinks.jsonRequest(url, 'DELETE', null, success, error);
            },
            SPI: $.extend({}, {
                API_VERSION: "1.0",
                REST_RESOURCE_URL: AJS.contextPath() + "/rest/applinks/",
                BASE_URL: AJS.contextPath() + "/rest/applinks/1.0",
                OAUTH_REST_RESOURCE_URL: AJS.contextPath() + "/rest/applinks-oauth/",
                OAUTH_BASE_URL: AJS.contextPath() + "/rest/applinks-oauth/1.0",

                /**
                 * Update the API version and associated urls.
                 * @param version
                 */
                setApiVersion: function(version){
                    AppLinks.SPI.API_VERSION = version;
                    AppLinks.SPI.setBaseUrl(AppLinks.SPI.REST_RESOURCE_URL + AppLinks.SPI.API_VERSION);
                },
                setBaseUrl: function(url){
                    AppLinks.SPI.BASE_URL = url;
                },
                setOAuthBaseUrl: function(url){
                    AppLinks.SPI.OAUTH_BASE_URL = url;
                },
                /**
                 * Build a base URL for rest calls using the specified baseUrl.
                 * @param baseUrl
                 * @returns {string}
                 */
                getRemoteRestBaseUrl: function(baseUrl) {
                    return baseUrl + "/rest/applinks/" + AppLinks.SPI.API_VERSION;
                },
                /**
                 * Build a base URL for plugin servlet calls using the specified baseUrl.
                 * @param baseUrl
                 * @returns {string}
                 */
                getRemotePluginServletBaseUrl: function(baseUrl) {
                    return baseUrl + "/plugins/servlet";
                },
                getAllLinks: function(success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink";
                    return AppLinks.get(url, success, failure);
                },
                getAllLinksWithAuthInfo: function(success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/listApplicationlinks";
                    return AppLinks.get(url, success, failure);
                },
                getApplicationLinkState: function(id, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/listApplicationlinkstates/id/" + id;
                    return AppLinks.get(url, success, failure);
                },
                getLinksOfType: function(typeId, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink/type/" + typeId;
                    return AppLinks.get(url, success, failure);
                },
                tryToFetchManifest: function(url, success, failure) {
                    var restUrl = AppLinks.SPI.BASE_URL + '/applicationlinkForm/manifest.json?url=' + encodeURIComponent(url);
                    return AppLinks.get(restUrl, success, failure);
                },
                getManifestFor: function(id, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/manifest/' + id + ".json";
                    return AppLinks.get(url, success, failure);
                },
                getLocalManifest: function(success, failure){
                    var url = AppLinks.SPI.BASE_URL + '/manifest.json';
                    return AppLinks.get(url, success, failure);
                },
                /**
                 * Attempt to get the Manifest of the remote application, via a direct REST call.
                 * Requires CORS enabled on the REST resource.
                 * @param url
                 * @param success
                 * @param failure
                 * @returns {*}
                 */
                getRemoteManifest: function(remoteBaseUrl, success, failure){
                    var remoteManifestUrl = AppLinks.SPI.getRemoteRestBaseUrl(remoteBaseUrl) + '/manifest.json';
                    return AppLinks.get(remoteManifestUrl, success, failure);
                },
                /**
                 * Attempt to get the OAuth Consumer Info of the remote application, via a direct call.
                 * Requires CORS enabled on the REST resource.
                 * @param url
                 * @param success
                 * @param failure
                 * @returns {*}
                 */
                getRemoteOAuthConsumerInfo: function(remoteBaseUrl, success, failure){
                    var remoteManifestUrl = AppLinks.SPI.getRemotePluginServletBaseUrl(remoteBaseUrl) + '/oauth/consumer-info';
                    return AppLinks.getXml(remoteManifestUrl, success, failure);
                },
                getApplinkStatus: function (applinkId, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/status/' + applinkId;
                    return AppLinks.get(url, success, failure);
                },
                createStaticUrlAppLink: function(applicationType, success, failure) {
                    var restUrl = AppLinks.SPI.BASE_URL + '/applicationlinkForm/createStaticUrlAppLink?typeId=' + applicationType;
                    return AppLinks.post(restUrl, null, success, failure);
                },
                createLink: function(applicationLink, username, password, createTwoWayLink, customRpcUrl, rpcUrl, configFormValues, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlinkForm/createAppLink';
                    var data = {
                        applicationLink: applicationLink,
                        username: username,
                        password: password,
                        createTwoWayLink: createTwoWayLink,
                        customRpcURL: customRpcUrl,
                        rpcUrl: rpcUrl,
                        configFormValues: configFormValues
                    };
                    return AppLinks.post(url, data, success, failure);
                },
                verifyTwoWayLinkDetails : function (remoteUrl, rpcUrl, username, password, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlinkForm/details';
                    var data = {
                        username: username,
                        password: password,
                        remoteUrl: remoteUrl,
                        rpcUrl: rpcUrl
                    };
                    return AppLinks.post(url, data, success, failure);
                },
                getApplicationLinkInfo: function (appId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlinkInfo/id/" + appId;
                    return AppLinks.get(url, success, error);
                },
                deleteLink: function(applicationLink, reciprocate, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink/" + applicationLink.id;
                    if (reciprocate) url += "?reciprocate=true";
                    return AppLinks.del(url, success, error);
                },
                makePrimary: function(applicationLink, success) {
                    var url = AppLinks.SPI.BASE_URL + "/applicationlink/primary/" + applicationLink.id;
                    return AppLinks.post(url, null, success);
                },
                relocate: function(applicationLink, newUrl, suppressWarnings, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/relocateApplicationlink/" + applicationLink.id + "?newUrl=" + encodeURIComponent(newUrl) +
                        "&nowarning=" + (suppressWarnings ? "true" : "false");
                    return AppLinks.post(url, null, success, error);
                },
                legacyUpgrade: function(applicationLink, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/upgrade/legacy/" + applicationLink.id;
                    return AppLinks.post(url, null, success, error);
                },
                ualUpgrade: function(applicationLink, body, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/upgrade/ual/" + applicationLink.id;
                    return AppLinks.post(url, body, success, error);
                },
                getEntityTypesForApplicationType: function(applicationType, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/type/entity/" + applicationType;
                    return AppLinks.get(url, success, error);
                },
                getLocalEntitiesWithLinksToApplication: function(applicationLinkId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/localEntitiesWithLinksTo/" + applicationLinkId + ".json";
                    return AppLinks.get(url, success, error);
                },
                getEntityLinksForApplication: function(applicationLinkId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entities/" + applicationLinkId + ".json";
                    AppLinks.get(url, success, error);
                },
                getEntityLinksForApplicationUsingAnonymousAccess: function(applicationLinkId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entities/anonymous/" + applicationLinkId + ".json";
                    return AppLinks.get(url, success, error);
                },
                createNonUalEntityLink: function(localType, localKey, applicationId, remoteTypeId, remoteKey, name, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/" + localType + "/" + localKey + "?reciprocate=false";
                    var data = {
                        applicationId: applicationId,
                        typeId: remoteTypeId,
                        key: remoteKey,
                        name: name,
                        isPrimary: false
                    };
                    return AppLinks.put(url, data, success, error);
                },
                createEntityLink: function(localType, localKey, entity, reciprocate, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/" + localType + "/" + localKey + "?reciprocate=";
                    url += (reciprocate ? "true" : "false");
                    return AppLinks.put(url, entity, success, failure);
                },
                getConfiguredEntityLinks: function(localType, localKey, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/primaryLinks/" + localType + "/" + localKey + ".json";
                    return AppLinks.get(url, success, error);
                },
                deleteEntityLink: function(localTypeId, localKey, entity, reciprocate, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/" + localTypeId + "/" + localKey + "?typeId=" + entity.typeId + "&key=" + encodeURIComponent(entity.key) + "&applicationId=" + entity.applicationId + "&reciprocate=" + reciprocate;
                    return AppLinks.del(url, success, error);
                },
                makePrimaryEntityLink: function(localTypeID, localKey, entity, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/entitylink/primary/" + localTypeID + "/" + localKey + "?typeId=" + entity.typeId + "&key=" + encodeURIComponent(entity.key) + "&applicationId=" + entity.applicationId;
                    return AppLinks.post(url, null, success, error);
                },
                canDeleteAppLink: function(applicationId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/permission/reciprocate-application-delete/" + applicationId;
                    return AppLinks.get(url, success, error);
                },
                canDeleteEntityLink: function(localTypeId, localKey, entity, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/permission/reciprocate-entity-delete/" + entity.applicationId + "/" + localTypeId + "/" + localKey + "/" + entity.typeId + "/" + encodeURIComponent(entity.key);
                    return AppLinks.get(url, success, error);
                },
                canCreateReciprocateEntityLink: function(applicationId, success, error) {
                    var url = AppLinks.SPI.BASE_URL + "/permission/reciprocate-entity-create/" + applicationId;
                    return AppLinks.get(url, success, error);
                },
                processPermissionCode: function(settings) {
                    var config = {
                        noPermission: function() {},
                        missing: function() {},
                        credentialsRequired: function(authUrl) {},
                        authenticationFailed: function(authUrl) {},
                        noAuthentication: function(authUrl) {},
                        noAuthenticationConfigured: function() {},
                        noConnection: function() {},
                        allowed: function() {},
                        unrecognisedCode: function(code) {},
                        updateView: function(message, icon, button) {}
                    };

                    if (!settings) settings = {};

                    settings = $.extend(config, settings);

                    return function(data) {
                        var url = data.url;
                        if (url && !url.startsWith("http://") && !url.startsWith("https://")) {
                            throw "url '" + url + "' is not an http/https url.";
                        }

                        var code = data.code;
                        if (code == "NO_PERMISSION") {
                            settings.noPermission();
                        } else if (code == "MISSING") {
                            settings.missing();
                        } else if (code == "CREDENTIALS_REQUIRED") {
                            settings.credentialsRequired(url);
                        } else if (code == "AUTHENTICATION_FAILED") {
                            settings.authenticationFailed(url);
                        } else if (code == "NO_AUTHENTICATION") {
                            settings.noAuthentication(url);
                        } else if (code == "NO_AUTHENTICATION_CONFIGURED") {
                            settings.noAuthenticationConfigured();
                        } else if (code == "NO_CONNECTION") {
                            settings.noConnection();
                        } else if (code == "ALLOWED") {
                            settings.allowed();
                        } else {
                            settings.unrecognisedCode(data.code);
                        }
                    };
                },
                addAuthenticationTrigger: function(target, authUrl, callbacks) {
                    if (!callbacks) {
                        callbacks = {};
                    }

                    if (typeof callbacks.onSuccess == "undefined") {
                        callbacks.onSuccess = function() {
                            location.reload();
                        }
                    }

                    if (typeof callbacks.onFailure == "undefined") {
                        callbacks.onFailure = function() {
                            return true;
                        }
                    }
                    //Unbind previous click listener, otherwise we might end up opening multiple windows.
                    $(target).unbind('click');
                    $(target).click(function() {
                        if (callbacks.before) {
                            callbacks.before();
                        }
                        AppLinks.authenticateRemoteCredentials(authUrl, callbacks.onSuccess, callbacks.onFailure);
                    });
                },
                showCreateEntityLinkSuggestion: function() {
                    return true;
                },
                getApplicationLink: function(id, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlink/' + id;
                    return AppLinks.get(url, success, failure);
                },
                createApplicationLink: function(id, name, rpcUrl, displayUrl, typeId, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlink';
                    var data = {
                        id: id,
                        name: name,
                        rpcUrl: rpcUrl,
                        displayUrl: displayUrl,
                        typeId: typeId
                    };
                    return AppLinks.put(url, data, success, failure);
                },
// TODO APLDEV-3 extract OAuth creation code into OAuth specific js files in the Oauth plugin.
                createConsumer: function(id, key, name, description, sharedSecret, publicKey, twoLOAllowed, executingTwoLOUser, twoLOImpersonationAllowed, outgoing, success, failure) {
                    var url = AppLinks.SPI.OAUTH_BASE_URL + '/applicationlink/' + id + '/authentication/consumer';
                    var data = {
                        key: key,
                        name: name,
                        description: description,
                        sharedSecret: sharedSecret,
                        publicKey: publicKey,
                        outgoing: outgoing,
                        twoLOAllowed: twoLOAllowed,
                        executingTwoLOUser: executingTwoLOUser,
                        twoLOImpersonationAllowed: twoLOImpersonationAllowed
                    };
                    return AppLinks.put(url, data, success, failure);
                },
                createConsumerAutoConfigure: function(id, twoLOAllowed, executingTwoLOUser, twoLOImpersonationAllowed, success, failure) {
                    var url = AppLinks.SPI.OAUTH_BASE_URL + '/applicationlink/' + id + '/authentication/consumer?autoConfigure=true';
                    var data = {
                        twoLOAllowed: twoLOAllowed,
                        executingTwoLOUser: executingTwoLOUser,
                        twoLOImpersonationAllowed: twoLOImpersonationAllowed
                    };
                    return AppLinks.put(url, data, success, failure);
                },
                registerProvider: function(id, provider, config, success, failure) {
                    var url = AppLinks.SPI.BASE_URL + '/applicationlink/' + id + '/authentication/provider';
                    var data = {
                        config : config,
                        provider : provider
                    };
                    return AppLinks.put(url, data, success, failure);
                }
            }, (window.AppLinks && window.AppLinks.SPI) || {})
        });

        AppLinks.UI = {
            showInfoBox: function(message) {
                $('.aui-message.success').remove();
                AppLinks.UI.createMessage('success', message, 'page-info');
            },
            hideInfoBox: function() {
                $('.aui-message.success').remove();
            },
            showErrorBox: function(message) {
                AppLinks.UI.createMessage('error', message, 'page-error');
            },
            hideErrorBox: function() {
                $('.aui-message.error').remove();
            },
            showWarningBox: function(messages) {
                if ($.isArray(messages) && messages.length > 0) {
                    var ulEl = $("<ul></ul>");
                    $(messages).each(function(index) {
                        ulEl.append($("<li/>", {
                            text: messages[index]
                        }));
                    });
                    var messageEl = $('<div class="page-warning"></div>').append(ulEl);
                    AppLinks.UI.createMessage('warning', messageEl.html(), 'page-warning');
                } else {
                    AppLinks.UI.createMessage('warning', messages, 'page-warning');
                }
            },
            hideWarningBox: function() {
                $('.aui-message.warning').remove();
            },
            shortenString: function(message, maxLength) {
                if (message.length  > maxLength) {
                    message = message.substring(0, maxLength) + "...";
                }
                return message;
            },
            createMessage: function(type, message, cssClass) {
                var messageEl = $('<div class="' + cssClass + '">');
                messageEl.html(message);
                AJS.messages[type](".applinks-message-bar", {
                    title: "",
                    body: messageEl.wrap('<div></div>').parent().html(),
                    closeable: true
                });
                $(document).trigger(AppLinks.Event.Legacy.MESSAGE_BOX_DISPLAYED);
            },
            displayValidationErrorMessages: function (errorClass, rootEl, messages) {
                if ($.isArray(messages)) {
                    $(messages).each(function(i,v) {
                        var d = $('<div class="error applinks-error">');
                        d.text(v);
                        $(rootEl).find("." + errorClass).append(d);
                    });
                } else if(typeof messages != 'undefined'){
                    var d = $('<div class="error applinks-error">');
                    d.text(messages.toString());
                    $(rootEl).find("." + errorClass).append(d);
                }
            },
            displayValidationError: function(errorClass, rootEl, errorFn) {
                return function(xhr) {
                    if (xhr.status == 401) {
                        window.location.reload();
                        return;
                    }

                    $('.applinks-error').remove();
                    $('.loading').remove();
                    var respJSON = xhr.responseText;
                    var respObj = $.parseJSON(respJSON);
                    var messages = respObj.message;
                    if (typeof respObj.fields == "undefined") {
                        AppLinks.UI.displayValidationErrorMessages(errorClass, rootEl, messages);
                    } else {
                        var fields = respObj.fields;
                        $(fields).each(function(index) {
                            var d = $('<div class="error applinks-error" id="' + fields[index] + '-error">');
                            d.text(messages[index]);
                            if ($(rootEl).find('.' + fields[index]).length > 0) {
                                d.insertAfter($(rootEl).find('.' + fields[index]));
                            } else {
                                d.insertAfter($(rootEl).find('.' + errorClass).append(d));
                            }
                        });
                    }
                    $(rootEl).find('.' + errorClass).addClass("fully-populated-errors");
                    if (errorFn) {
                        errorFn();
                    }
                }
            },
            addProtocolToURL : function(url) {
                var newUrl = $.trim(url);
                var tempURL = newUrl.toLowerCase();
                var hasProtocol = false;
                if (tempURL.length >= 7) {
                    if (tempURL.substring(0,7).indexOf('http') != -1) {
                        hasProtocol = true;
                    }
                }
                //default protocol is http
                if (!hasProtocol) {
                    newUrl = 'http://' + newUrl;
                }
                return newUrl;
            },
            /**
             * Similar to the standard Javascript join() method, but nicer in that
             * it uses a different delimiter for the last node (by default "and"),
             * so that:
             * {code}
             * "1, 2 and 3" == prettyJoin(['1', '2', '3'], function(value) {return value;});
             * {code}
             *
             * @param inputArray
             * @param resolveFn
             * @param finalDelimiter
             */
            prettyJoin : function(inputArray, resolveFn, finalDelimiter) {
                if (!finalDelimiter) {
                    finalDelimiter = "and";
                }
                var maxLength = inputArray.length;
                var message = "";
                $.each(inputArray, function(index, value) {
                    if (index == (maxLength - 1) && maxLength > 1) {
                        message += " " + finalDelimiter + "  " + resolveFn(value);
                    } else {
                        message += resolveFn(value);
                        if (index + 2 < maxLength) {
                            message += ", ";
                        }
                    }
                });
                return message;
            },
            showLoadingIcon: function(element) {
                $('<span class="loading">&nbsp;</span>').insertAfter(element);
            },
            hideLoadingIcon: function(element) {
                $(element).next('.loading').remove();
            },
            findUrl: function(text) {
                var url = undefined;
                var lcText = text.toLowerCase();
                var startOfUrl = lcText.indexOf('http:');
                if (startOfUrl == -1) {
                    startOfUrl = lcText.indexOf('https:');
                }
                if (startOfUrl > -1) {
                    var endOfUrl = lcText.indexOf(' ', startOfUrl);
                    if (endOfUrl == -1) {
                        endOfUrl = lcText.length;
                    }
                    url = text.substring(startOfUrl, endOfUrl); // use _case-sensitive_ version to retrieve the actual URL
                }
                return url;
            },
            findApplicationType : function(id) {
                id = id.toLowerCase();
                if (id.indexOf("jira") != -1) {
                    return "jira";
                } else if (id.indexOf("fisheye") != -1) {
                    return "fecru";
                } else if (id.indexOf("confluence") != -1) {
                    return "confluence";
                } else if (id.indexOf("refapp") != -1) {
                    return "refapp";
                } else {
                    return undefined;
                }
            },
            escapeSelector: function(selector) {
                // based on http://samuelsjoberg.com/archive/2009/09/escape-jquery-selectors
                return selector.replace(/([#;&,\.\+\*\~':"\!\^$\[\]\(\)=>\|])/g, "\\$1");
            },
            sanitiseHTML: function(input) {
                var replacements = {
                    "<": "&lt;",
                    '"': "&quot;",
                    "&": "&amp;"
                };
                return input.replace(/[<"&]/g, function(match) {
                    return replacements[match];
                });
            },
            removeCssClass: function(element, prefix) {
                $(element).removeClass( function(index, className) {
                    var classes = className.split(' ');
                    var classToRemove = "";
                    $.each(classes, function(index, value) {
                        if (value.indexOf(prefix) != -1) {
                            classToRemove = value;
                        }
                    });
                    return classToRemove;
                } );
            }
        };

        /**
         * Add jQuery event system to AppLinks.UI namespace.
         */
        (function(){
            var eventBus = $({});
            $.each(['bind', 'unbind', 'trigger'], function(i, current){
                AppLinks.UI[current] = function(){
                    return eventBus[current].apply(eventBus, arguments);
                }
            });
        })();

        $(document).trigger(AppLinks.Event.PREREADY);
        $(document).trigger(AppLinks.Event.READY);
    });
})(require('applinks/common/i18n'), require('applinks/common/events'));
;
;
/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-util-js', location = 'applinks/internal/non-amd/autocomplete.js' */
// NOTE: this is used outside of Applinks. See atlassian-plugin.xml for more details about the associated restrictions

AJS.$(document).bind(AppLinks.Event.READY, function() {
/**
 * TODO: THIS CODE IS COPIED FROM CONFLUENCE and should be part of AUI/AJS.
 * IF AUI comes with the InputDrivenDropDown when can remove this file.
 * https://studio.atlassian.com/browse/AJS-471
 *
 * A simple cache manager that supports a
 * FIFO cache invalidation strategy.
 *
 * @class cacheManager
 * @namespace AJS.Confluence
 * @constructor
 * @param cacheSize the size of the cache before keys are invalidated
 */
AppLinks.autoComplete = {
        cacheManager : function (cacheSize) {
    var cache = {},
        cacheStack = [],
        cacheSize = cacheSize || 30;

    return {
        /**
         * Return the value stored in the cache for the given key
         * @method get
         * @param key {String}
         */
        get: function(key) {
            return cache[key];
        },
        /**
         * Put the given key, value in the cache
         * @method put
         * @param key {String}
         * @param value {Object}
         */
        put: function(key, value) {
            cache[key] = value;
            cacheStack.push(key);
            if (cacheStack.length > cacheSize) {
                delete cache[cacheStack.shift()];
            }
        },
        /**
         * Clear the cache.
         */
        clear : function() {
            cache = {};
            cacheStack = [];
        }
    };
}};


(function($){
    /**
     * Check that all items in the drop down can be displayed - show ellipses at the end of any that
     * are too long. Also remove any unused properties that the dropDown may have stored for each
     * item in the list.
     *
     * @method truncateText
     * @private
     */
    var truncateText = function (dd) {
        AJS.log("InputDrivenDropDown: truncating text");
        var width = dd.$.closest(".aui-dropdown").width(),
            rightPadding = 20; // add some padding so the ellipsis doesn't run over the edge of the box

        $("a span:not(.icon)", dd.$).each(function () {
            var $a = $(this),
                elpss = AJS("var", "&#8230;"),
                elwidth = elpss.width(),
                isLong = false;

            $a.wrapInner($("<em>"));
            $("em", $a).each(function () {
                var $label = $(this);

                $label.show();
                if (this.offsetLeft + this.offsetWidth > width) {
                    var childNodes = this.childNodes,
                        success = false;

                    for (var j = childNodes.length - 1; j >= 0; j--) {
                        var childNode = childNodes[j],
                            truncatedChars = 1,
                            valueAttr = (childNode.nodeType == 3) ? "nodeValue" : "innerHTML",
                            nodeText = childNode[valueAttr];

                        do {
                            if (truncatedChars <= nodeText.length) {
                                childNode[valueAttr] = nodeText.substr(0, nodeText.length - truncatedChars++);
                            } else { // if we cannot fit even one character of the next word, then try truncating the node just previous to this
                                break;
                            }
                        } while (this.offsetLeft + this.offsetWidth + elwidth > width - rightPadding);

                        if (truncatedChars <= nodeText.length) {
                            // we've managed truncate part of the word and fit it in
                            success = true;
                            break;
                        }
                    }

                    if (success) {
                        isLong = true;
                    } else {
                        $label.hide();
                    }
                }
            });
            if (isLong) {
                $a.append(elpss);
                this.elpss = elpss;
            }
        });
    };

    var highlightTokens = function(dd, tokens) {
        if (!tokens.length || !tokens[0]) return;

        AJS.log("InputDrivenDropDown: highlighting tokens");

        // escape regex chars .*+?|()[]{}\ first
        for (var i = 0, ii = tokens.length; i < ii; i++) {
            var token = tokens[i];
            tokens[i] = token ? token.replace(/[\.\*\+\?\|\(\)\[\]{}\\]/g, "\\$") : "";
        }

        var regex = new RegExp("(" + tokens.join("|") + ")", "gi");

        $("li a:not(.dropdown-prevent-highlight) span", dd.$).each(function() {
            var span = $(this),
                html = span.html().replace(regex, "<strong>$1</strong>");
            span.html(html);
        });
    };

    /**
     * Builds and shows the dropdown.
     *
     * @param idd the InputDrivenDropdown
     * @param dropdownData in the form { matrix, query, queryTokens }
     * @private
     */
    var makeDropdown = function (idd, dropdownData) {
        var options = idd.options,
            old_dd = idd.dd;

        if (old_dd) {
            old_dd.hide();
            old_dd.$.remove();
        }

        options.ajsDropDownOptions = options.ajsDropDownOptions || {};
        if (options.ajsDropDownOptions && !options.ajsDropDownOptions.alignment) { // default to left alignment
            options.ajsDropDownOptions.alignment = "left";
        }
        //this needs to be moved into aui
        options.ajsDropDownOptions.selectionHandler = options.ajsDropDownOptions.selectionHandler || function(e, element) {
            if(e.type != "click") {
                e.preventDefault();
                $("a",element).click();
                document.location = $("a",element).attr("href");
            }
        };

        /* Fixing an AUI bug in here:  AJS.dropdown puts the raw 'matrix[i].name' as html, without escaping it !
           The solution is to override their displayHandler
         */
        /**
         * Escape obj.name and return it
         */
        options.ajsDropDownOptions.displayHandler = function (obj) {
            return AJS.escapeHtml(obj.name);
        }

        var dd = idd.dd = new AJS.dropDown(dropdownData.matrix, options.ajsDropDownOptions)[0];

        // could move into dropdown.js in AUI
        if (options.ajsDropDownOptions && options.ajsDropDownOptions.className) {
            dd.$.addClass(options.ajsDropDownOptions.className);
        }

        // place the created drop down using the configured dropdownPlacement function
        // if there is none then use a default behaviour
        if (options.dropdownPlacement) {
            options.dropdownPlacement(dd.$);
        } else {
            AJS.log("No dropdownPlacement function specified. Appending dropdown to the body.");
            $("body").append(dd.$);
        }

        highlightTokens(dd, dropdownData.queryTokens || [dropdownData.query]);
        truncateText(dd);

        if (options.dropdownPostprocess) {
            options.dropdownPostprocess(dd.$);
        }
        dd.show(idd._effect);

        if (typeof options.onShow == "function") {
            options.onShow.call(dd, dd.$);
        }

        return dd;
    };

    /**
     * Provides a controller-agnostic object that listens for controller changes and populates a dropdown
     * via a callback. Most aspects can be customized via the options object parameter.
     * <br>
     * Options are:
     * <li>
     *   getDataAndRunCallback - (required) callback method used to provide data for the dropdown. It must take
     *                          two parameters, user input value and the callback function to execute.
     * </li>
     * <li>
     *   onShow - function to call when the drop-down is displayed
     * </li>
     * <li>
     *   dropdownPlacement - a function that will be called with the drop down and which should place it in the
     *                          correct place on the page. The supplied arguments are 1) the input that issued the
     *                          search, 2) the dropDown to be placed.
     * </li>
     * <li>
     *   ajsDropDownOptions - any options the underlying dropDown component can handle expects
     * </li>
     * <li>
     *   onDeath - callback to run when dropdown dies
     * </li>
     * @class InputDrivenDropDown
     * @namespace AJS
     */
    function InputDrivenDropDown(id, options) {
        this._effect = "appear";
        this._timer = null;

        this.id = id;
        this.options = options;
        this.inactive = false;
        this.busy = false;
        this.cacheManager = AppLinks.autoComplete.cacheManager();
    }

    /**
     * Clears the cache.
     */
    InputDrivenDropDown.prototype.clearCache = function () {
        this.cacheManager.clear();
    };

    /**
     * This method should be called when the user input for this dropdown has changed.
     * It will check the cache before fetching data (via options.getDataAndRunCallback)
     * and displaying the dropdown.
     *
     * @param value {String} the new value of the user input
     * @param force {Boolean} force a change to occur regardless of user input
     */
    InputDrivenDropDown.prototype.change = function (value, force) {
        var t = this;
        if (value != t._value || force) {
            t._value = value;
            t.busy = false;

            clearTimeout(t._timer);

            if (force || (/\S{0,}/).test(value)) {
                var cachedVal = t.cacheManager.get(value);
                if (cachedVal) {
                    makeDropdown(t, cachedVal);
                } else {
                    t.busy = true;
                    t._timer = setTimeout(function () { // delay sending a request to give the user a chance to finish typing their search term(s)
                        t.options.getDataAndRunCallback.call(t, value, t.show);
                    }, 200);
                }
            } else {
                t.dd && t.dd.hide();
            }
        }
    };

    /**
     * Gets the number of visible options in the dropdown.
     */
    InputDrivenDropDown.prototype.dropDownLength = function () {
        return this.dd.links ? this.dd.links.length : 0;
    };
    
    /**
     * Gets the specified menu item from the dropdown list.
     * 
     * @param index {Integer} the 0-based index of the dropdown option list
     */
    InputDrivenDropDown.prototype.dropDownItem = function (index) {
        return this.dropDownLength() > index ? this.dd.links[index] : null;
    };
    
    /**
     * Hides the drop down
     */
    InputDrivenDropDown.prototype.hide = function () {
        this.dd && this.dd.hide();
    };

    /**
     * Hides and removes the drop down from the DOM.
     */
    InputDrivenDropDown.prototype.remove = function () {
        var dd = this.dd;
        if (dd) {
            this.hide();
            dd.$.remove();
        }
        this.inactive = true;
        this.options.onDeath && this.options.onDeath();
    };

    /**
     * Shows the drop down with the given matrix data and query.
     * <br>
     * Matrix property should be an array of arrays, where the sub-arrays represent the different
     * search categories.
     *
     * Expected properties of category sub-array objects are:
     *  - href
     *  - name
     *  - className
     *  - html (optional, replaces href and name)
     *  - icon (optional)
     *
     *
     * @param matrix {Array} matrix to populate the drop down from
     * @param query {String} the user input string that triggered this show
     * @param queryTokens {Array} an array of strings of the query tokens. Use for highlighting search terms.
     */
    InputDrivenDropDown.prototype.show = function (matrix, query, queryTokens) {
        if (this.inactive) {
            AJS.log("Quick search abandoned before server response received, ignoring. " + this);
            return;
        }

        var dropdownData = {
            matrix: matrix,
            query: query,
            queryTokens: queryTokens
        };
        this.cacheManager.put(query, dropdownData);

        makeDropdown(this, dropdownData);
        this.busy = false;
    };

    /**
     * Returns an InputDrivenDropDown. See InputDrivenDropDown for more documentation.
     * @param options {Object} options for the InputDrivenDropDown
     * @constructor
     */
    AppLinks.inputDrivenDropdown = function (options) {
        return new InputDrivenDropDown("inputdriven-dropdown", options);
    };

})(jQuery);
});
;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-applinks-common-plugin:issue-link-applinks', location = 'jira-issue-link-applinks-common-plugin/js/issuelink-applinks.js' */
define("issue-link-app-links/app-links",["jquery","wrm/context-path","jira/util/formatter","aui/message","require"],function(e,n,i,t,a){function s(n,a,s){function l(e){f=u(n,e);var i=f&&f.requireCredentials;return c(i,a),{authenticationRequired:i}}function r(e,i){var t=u(n,e);t&&(t.requireCredentials=i,f&&f.id===e&&c(i,a))}function c(n,i){e(".issue-link-applinks-authentication-message",i).empty(),n?(p(e(".issue-link-applinks-authentication-message",i),i),e(".issue-link-oauth-toggle").hide(),e(".buttons-container input[type=submit]",i).attr("disabled","disabled")):(e(".issue-link-oauth-toggle").show(),e(".buttons-container input[type=submit]",i).removeAttr("disabled"))}function p(n,a){var u={onSuccess:function(){f.requireCredentials=!1,c(!1,a),s.onAuthenticationSuccessCallback&&s.onAuthenticationSuccessCallback(a,f.id,k)},onFailure:function(){s.onAuthenticationFailedCallback&&s.onAuthenticationFailedCallback(a,f.id,k)}},l=AJS.escapeHtml(f.name);if(f.authUrl){var o=e('<div class="aui-message warning closeable shadowed applinks-auth-request"><p><span class="aui-icon icon-applinks-key"></span></p></div>');o.append(i.format("Authorization required to create issue link. Please \u003ca href=\"{0}\" class=\"applink-authenticate\"\u003eauthenticate\u003c/a\u003e with \u003ca href=\"{1}\"\u003e{2}\u003c/a\u003e.",f.authUrl,f.url,l)),e("a",o).addClass("applink-authenticate"),e(".applink-authenticate",o).click(function(e){d(f.authUrl,u.onSuccess,u.onFailure),e.preventDefault()}),n.append(o)}else{var r=i.format("Unable to create a link to \u003ca href=\"{0}\"\u003e{1}\u003c/a\u003e as the application does not have any authentication configured.",f.url,l);t.warning(n,{body:r})}}function h(){o.OAuthCallback||"undefined"!=typeof window.oauthCallback||(o.OAuthCallback=function(){},o.OAuthCallback.prototype.success=function(){this.aouthWindow.close(),this.onSuccess(),delete window.oauthCallback,delete o.OAuthCallback},o.OAuthCallback.prototype.failure=function(){this.aouthWindow.close(),this.onFailure(),delete window.oauthCallback,delete o.OAuthCallback},o.OAuthCallback.prototype.show=function(e,n,i){this.onSuccess=n,this.onFailure=i,this.aouthWindow=window.open(e,"com_atlassian_applinks_authentication")},window.oauthCallback=new o.OAuthCallback)}function d(n,i,t){h(),e(".applinks-error").remove(),window.oauthCallback.show(n,i,t)}var k={},f=null;return e.extend(k,{selectServer:l,setAuthenticationRequired:r})}function u(e,n){var i;if(e.length)for(i=0;i<e.length;i++)if(e[i].id===n)return e[i];return null}function l(i,t,a){var l=i.getCurrentAppId(t),o=e(".issue-link-applinks-application-type",t).val(),r=i.getIssueId(t);e.get(n()+"/rest/issueLinkAppLink/1/appLink/info",{type:o,issueIdOrKey:r},function(n){var o,r=s(n,t,i);if(n&&n.length){var c=u(n,l);c&&(o=e(".issue-link-applinks-authentication-message",t).hasClass("required"),o&&(c.requireCredentials=!0),r.selectServer(l)),a.resolve(t,r)}else a.reject(t)})}var o=window.AppLinks;return{init:function(n,i){var t=e.Deferred(),a=0!==e(".issue-link-applinks-authentication-message",i).length;return a&&n.shouldExecute(i)&&l(n,i,t),t.promise()}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-remote-jira-js', location = 'jira-issue-link-remote-jira-plugin/js/issuelink-jira.js' */
require(["jquery","wrm/context-path","jira/util/events","jira/util/events/types","issue-link-app-links/app-links"],function(e,t,a,r,i){e(function(){var n={getCurrentAppId:function(t){return e("#jira-app-link",t).val()},shouldExecute:function(t){return 0!==e("#jira-app-link",t).length},getIssueId:function(t){return e("input[name=id]",t).val()}},c=function(e,a){e.length&&(e.attr("data-ajax-options.data.app-id",a),a&&""!==a?e.attr("data-ajax-options.url",t()+"/rest/remoteJiraIssueLink/1/remoteJira/picker"):e.attr("data-ajax-options.url",t()+"/rest/api/2/issue/picker"),e.trigger("updateOptions"),e.trigger("clearSelection"))},l=function(t,a){var r=e("#create-reciprocal",a);if(r.length)if(t&&""!==t){var i="true"==e("#create-reciprocal-default",a).val();i?r.attr("checked","checked"):r.removeAttr("checked"),r.removeAttr("disabled"),e("#create-reciprocal-fieldset",a).removeClass("disabled")}else r.attr("checked","checked"),r.attr("disabled","disabled"),e("#create-reciprocal-fieldset",a).addClass("disabled")};a.bind(r.NEW_PAGE_ADDED,function(t,a){var r=e("#jira-issue-keys",a);if(r.length){var s=e("#jira-app-link",a).val();c(r,s),l(s,a)}i.init(n,a).done(function(t,a){e("#jira-app-link",t).change(function(){var i=e(this).val();a.selectServer(i),c(r,i),l(i,t)})})})})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-jira-search-js', location = 'jira-issue-link-remote-jira-plugin/js/issuelink-jira-jqlautocomplete.js' */
define("jira-issue-link-remote-jira/issue-link-jira/jql-autocomplete",["jquery","jira/util/forms","require"],function(e,r,t){return{initialize:function(i){var l=t("jira/autocomplete/jql-autocomplete"),o=t("jira/jql/jql-parser"),n=i.fieldID,a=i.errorID,u=i.autoCompleteUrl,s=i.autoCompleteData,d=i.formSubmitFunction,c=e("#"+n),m=c.length>0&&c[0]==document.activeElement,p=s.visibleFieldNames||[],j=s.visibleFunctionNames||[],f=s.jqlReservedWords||[],q=function(){var e=t("jira/featureflags/feature-manager");return e.isFeatureEnabled("jira.jql.autoselectfirst")},C=l({fieldID:n,parser:o(f),queryDelay:.65,jqlFieldNames:p,jqlFunctionNames:j,minQueryLength:0,allowArrowCarousel:!0,autoSelectFirst:q(),errorID:a,autoCompleteUrl:u});c.unbind("keypress",r.submitOnEnter),d&&c.keypress(function(e){if(null===C.dropdownController||!C.dropdownController.displayed||C.selectedIndex<0)return!(13===e.keyCode&&!e.ctrlKey&&!e.shiftKey)||(d(),!1)}),C.buildResponseContainer(),C.parse(c.text()),C.updateColumnLineCount(),c.click(function(){C.dropdownController.hideDropdown()}),m&&c.select()}}});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-jira-search-js', location = 'jira-issue-link-remote-jira-plugin/templates/dialog/linkjiraissue-search.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.RemoteJiraIssueSearch&&(JIRA.Templates.RemoteJiraIssueSearch={}),JIRA.Templates.RemoteJiraIssueSearch.dialog=function(e,s){return"<h2>"+soy.$$escapeHtml("Find Jira issues")+'</h2><form class="aui search-form" id="remote-jira-simple-search-form" action="#" method="post"><div class="field-group"><label for="link-search-text">'+soy.$$escapeHtml("Search")+':</label><input id="link-search-text" type="text" tabindex="0" class="text" size="50"> <input type="submit" tabindex="0" class="button" id="simple-search-panel-button" value="'+soy.$$escapeHtml("Search")+'"> <a id="advanced-search-toggle" href="#" title="'+soy.$$escapeHtml("Perform a JQL search")+'">'+soy.$$escapeHtml("Advanced Search")+'</a><span id="link-search-loading" class="icon loading throbber hidden"></span></div></form><form class="aui search-form" id="remote-jira-advanced-search-form" action="#" method="post"><div class="field-group"><label for="jql-search-text">'+soy.$$escapeHtml("JQL Search")+'<span id="autocomplete-loading" class="hidden"><span class="icon loading throbber"></span>'+soy.$$escapeHtml("Loading auto-complete")+'</span><span id="autocomplete-failed" class="hidden">'+soy.$$escapeHtml("(auto-complete unavailable)")+'</span></label><div id="jql-search-container"><span id="jql-search-error" class="icon jqlgood"></span><div class="atlassian-autocomplete"><textarea id="jql-search-text" class="text full-width-field" tabindex="0"></textarea></div></div><button class="aui-button aui-button-subtle search-button" id="advanced-search-panel-button" type="submit"><span class="aui-icon aui-icon-small aui-iconfont-search" title="'+soy.$$escapeHtml("Search")+'"></span></button> <a id="simple-search-toggle" href="#" title="'+soy.$$escapeHtml("Perform a plain text search")+'">'+soy.$$escapeHtml("Simple Search")+'</a><span id="link-search-loading" class="icon loading throbber hidden"></span></div></form><div class="message-panel hidden"></div><div id="search-results-table" class="data-table"></div><div class="buttons-container form-footer"><div class="buttons"><button type="button" class="aui-button" id="linkjiraissue-add-selected">'+soy.$$escapeHtml("Add")+'</button><button class="aui-button aui-button-link cancel" href="#" id="remote-jira-link-cancel" title="'+soy.$$escapeHtml("Press Esc to close")+'">'+soy.$$escapeHtml("Close")+"</button></div></div>"},JIRA.Templates.RemoteJiraIssueSearch.resultsTable=function(e,s){var t="";if(e.result.issues.length>0){t+='<table id="remote-jira-searchresult" class="aui"><thead><tr><th class="selection" ><input id="linkjiraissue-select-all" type="checkbox"/></th><th class="type">'+soy.$$escapeHtml("Type")+'</th><th class="key">'+soy.$$escapeHtml("Key")+'</th><th class="summary">'+soy.$$escapeHtml("Summary")+'</th><th class="status">'+soy.$$escapeHtml("Status")+"</th></tr></thead><tbody>";for(var a=e.result.issues,i=a.length,l=0;l<i;l++){var c=a[l];t+='<tr title="'+soy.$$escapeHtml(c.key)+'"><td class="selection" data-key="'+soy.$$escapeHtml(c.key)+'"><input type="checkbox"/></td><td class="type">'+JIRA.Templates.RemoteJiraIssueSearch.issueType({issueType:c.fields.issuetype})+'</td><td class="key" title="'+soy.$$escapeHtml(c.key)+'">'+soy.$$escapeHtml(c.key)+'</td><td class="summary" title="'+soy.$$escapeHtml(c.fields.summary)+'">'+soy.$$escapeHtml(c.fields.summary)+'</td><td class="status">'+JIRA.Templates.RemoteJiraIssueSearch.status({status:c.fields.status})+"</td></tr>"}t+="</tbody></table>"}else t+='<div class="aui-message info"><span class="aui-icon icon-info"></span><p>'+soy.$$escapeHtml("Search returned no results.")+"</p></div>";return t},JIRA.Templates.RemoteJiraIssueSearch.issueType=function(e,s){return'<img src="'+soy.$$escapeHtml(e.issueType.iconUrl)+'" alt="'+soy.$$escapeHtml(e.issueType.name)+'" title="'+soy.$$escapeHtml(e.issueType.name)+" - "+soy.$$escapeHtml(e.issueType.description)+'"/>'},JIRA.Templates.RemoteJiraIssueSearch.status=function(e,s){return""+JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus:e.status})};;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-jira-search-js', location = 'jira-issue-link-remote-jira-plugin/js/remote-jira-issue-search-template.js' */
define("jira-issue-link-remote-jira/dialog/remote-jira-issue-search/templates",[],function(){"use strict";return window.JIRA.Templates.RemoteJiraIssueSearch});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-remote-jira-plugin:issue-link-jira-search-js', location = 'jira-issue-link-remote-jira-plugin/js/issuelink-jira-search.js' */
require(["jquery","wrm/context-path","jira/dialog/form-dialog","jira-issue-link-remote-jira/dialog/remote-jira-issue-search/templates","jira/ajs/ajax/smart-ajax","aui/message","jira/util/formatter","wrm/require","jira-issue-link-remote-jira/issue-link-jira/jql-autocomplete"],function(e,t,r,a,i,s,l,n,o){e(function(){function c(t){var r=e("#jira-app-link").val(),a=v(r);e("#simple-search-panel-button",t).click(function(){e("#search-results-table",t).empty();var r=e("#link-search-text",t).val();return r=e.trim(r),r?j(r,t):s.info("#search-results-table",{body:"Please enter search value.",closeable:!1}),!1}),e("#advanced-search-panel-button",t).click(function(){return d(t),!1}),e("#simple-search-toggle",t).click(function(){return e("#remote-jira-simple-search-form",t).show(),e("#remote-jira-advanced-search-form",t).hide(),!1}),e("#linkjiraissue-add-selected",t).click(function(){e("table tbody tr:visible  td.selection input:checked",t).each(function(){var t=e(this).parent().data("key");e("#jira-issue-keys").trigger("selectOption",[{value:t}])}),e("#link-issue-dialog .error").hide(),x.hide(),e("#link-issue-dialog").show().trigger("multiSelectRevealed"),e("#jira-issue-keys-textarea").focus().select()}),e("#advanced-search-toggle",t).click(function(){e("#remote-jira-advanced-search-form",t).show(),e("#remote-jira-simple-search-form",t).hide();var i=e("#jql-search-text");return i.attr("jql-initialized")||(p(!0,t),n("wr!jira.webresources:jqlautocomplete",function(){a.done(function(e){e.successful?o.initialize({fieldID:"jql-search-text",errorID:"jql-search-error",autoCompleteUrl:u(r),autoCompleteData:e.data,formSubmitFunction:function(){d(t)}}):(f(!1,t),h(!0,t)),p(!1,t),i.attr("jql-initialized",1)})})),i.focus(),!1}),e("#simple-search-toggle",t).trigger("click")}function u(e){return e&&""!==e?y+"/rest/remoteJiraIssueLink/1/remoteJira/autocomplete?appId="+e:""}function d(t){e("#search-results-table",t).empty();var r=e("#jql-search-text",t).val();r=e.trim(r),r?k(r,t):s.info("#search-results-table",{body:"Please enter search value.",closeable:!1})}function m(t,r){e("#link-search-loading",r).toggleClass("hidden",!t)}function p(t,r){e("#autocomplete-loading",r).toggleClass("hidden",!t)}function h(t,r){e("#autocomplete-failed",r).toggleClass("hidden",!t)}function f(t,r){e("#jql-search-error",r).toggleClass("hidden",!t)}function j(t,r){m(!0,r);var a=e("#jira-app-link").val(),i='key = "'+t+'"',s='project = "'+t+'"',l='summary ~ "'+t+'" OR description ~ "'+t+'" OR comment ~ "'+t+'"';g(i,a).done(function(e){e.successful&&e.data.issues.length>0?(m(!1,r),b(e,r)):g(s,a).done(function(e){e.successful&&e.data.issues.length>0?(m(!1,r),b(e,r)):g(l,a).done(function(e){m(!1,r),e.successful?b(e,r):q(e)})})})}function k(t,r){m(!0,r);var a=e("#jira-app-link").val();g(t,a).done(function(e){m(!1,r),e.successful?b(e,r):400===e.status?s.warning("#search-results-table",{body:"Invalid JQL query.",closeable:!1}):q(e)})}function g(t,r){var a,s=e.Deferred();if(r&&""!==r)a=y+"/rest/remoteJiraIssueLink/1/remoteJira/search?jql="+t+"&appId="+r+"&maxResults=10";else{var l=e("#current-issue-key").val();t="("+t+") and key != "+l,a=y+"/rest/api/2/search?jql="+t+"&maxResults=10"}return i.makeRequest({url:a,complete:function(e,t,r){s.resolve(r)}}),s.promise()}function v(t){var r,a,s=e.Deferred();return t&&""!==t?(a=y+"/rest/remoteJiraIssueLink/1/remoteJira/autocompletedata?appId="+t,r=!0):(a=y+"/rest/api/2/jql/autocompletedata",r=!1),i.makeRequest({url:a,complete:function(e,a,l){!l.successful&&r?i.makeRequest({url:y+"/rest/remoteJiraIssueLink/1/remoteJira/autocompletedata/legacy?appId="+t,complete:function(e,t,r){s.resolve(r)}}):s.resolve(l)}}),s.promise()}function b(t,r){var i=a.resultsTable({result:t.data});e("#search-results-table",r).html(i),e("#linkjiraissue-select-all",r).click(function(){var t=e(this).prop("checked");e("tbody tr td.selection input",r).prop("checked",t)}),e("tbody tr",r).click(function(t){if(!e(t.target).is(":checkbox")){var r=e(this).find("td.selection input");r.prop("checked",!r.prop("checked"))}})}function q(e){s.error("#search-results-table",{body:i.buildSimpleErrorContent(e),closeable:!1})}var y=t(),x=new r({id:"remote-jira-search-dialog",trigger:"#link-jira-issue .remote-jira-search-trigger",widthClass:"large",content:function(e){e(a.dialog()),c(this.$popup)},submitHandler:function(t,r){t.preventDefault(),e("#simple-search-panel-button").removeAttr("disabled"),e("#advanced-search-panel-button").removeAttr("disabled"),"remote-jira-simple-search-form"===e(t.target).attr("id")?e("#simple-search-panel-button").click():e("#advanced-search-panel-button").click(),r()}})})});;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:util-resources', location = 'user-provisioning-vertigo-module/js/atlassian/um-utils.js' */
define('user-management/helpers/um-utils', [
    'jquery'
], function (
    $
) {
    var isSiteAdminWRM = WRM.data.claim("com.atlassian.crowd.user-provisioning-plugin:create-users-resources.isSiteAdmin");
    /*
        This is going to have to change when UM moves to a different URL.
        We'll also need to look at usages of this because commumication
        will need to be a bit different, eg. using CORS
     */
    function restBaseUrl() {
        return '/admin';
    }

    return {

        /**
         * @returns A promise which resolves to a boolean.
         */
        isSiteAdmin: function() {
            return $.when(isSiteAdminWRM).promise();
        },
        restBaseUrl: restBaseUrl,
        productName: function() {
            var contextPath = AJS.contextPath();
            var productName = "Unknown";
            if (contextPath === "") {
                productName = "jira";
            } else if (contextPath === "/builds") {
                productName = "bamboo";
            } else if (contextPath === "/wiki") {
                productName = "confluence";
            }
            return productName;
        }
    };
});;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:adminmenu-analytics', location = 'user-provisioning-vertigo-module/js/atlassian/analytics-upp.js' */
require([
    'user-management/helpers/um-utils'
], function(
    umUtils
) {
    var triggerAnalytics = function (name, properties) {
        AJS.trigger("analytics", {
            name: "unified.admin." + name,
            data: properties || {}
        });
    };

    var getProductName = umUtils.productName;

    AJS.$(document)
        .on("click", "#admin-billing-link", function () {
            triggerAnalytics("menu.billing.click", {product:getProductName()});
        })
        .on("click", "#admin-discovernewapps-link", function () {
            triggerAnalytics("menu.addApplications.click", {product:getProductName()});
        })
        .on("click", "#admin-management-link", function () {
            triggerAnalytics("menu.userManagement.click", {product:getProductName()});
        })
        // handle admin menu links from JIRA due to required use of web sections
        .on("click", "#admin_billing_section", function () {
            triggerAnalytics("menu.billing.click", {product:getProductName()});
        })
        .on("click", "#admin_discovernewapps_section", function () {
            triggerAnalytics("menu.addApplications.click", {product:getProductName()});
        })
        .on("click", "#user_management_section", function () {
            triggerAnalytics("menu.userManagement.click", {product:getProductName()});
        })
        .on("click", "#pending-invites-flag .icon-close", function () {
            triggerAnalytics("inproduct.invite.pending.message.dismissed")
        })
    ;

});
;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:create-users-resources', location = 'user-provisioning-vertigo-module/js/atlassian/create-user/request-invite.js' */
/**
 * This module allows external products to request an invite for a user.
 */
define('user-management-common/create-user/request-invite', [
    'jquery',
    'user-management/helpers/um-utils'
], function(
    $,
    umUtils
) {
    function requestInvite(emailAddresses, extraProductId, extraGroups){
        return $.ajax({
            type: 'PUT',
            url: umUtils.restBaseUrl() + '/rest/um/1/requestaccess',
            contentType: 'application/json',
            data: JSON.stringify({
                emailAddresses: emailAddresses,
                extraProductId: extraProductId,
                extraGroups: extraGroups
            })
        });
    }
    return {
        createUser: requestInvite
    };
});;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:create-users-resources', location = 'user-provisioning-vertigo-module/js/atlassian/create-user/pending-invites.js' */
/**
 * This module allows external products to request an invite for a user.
 */
define('user-management-common/create-user/pending-invites', [
    'jquery',
    'user-management-common/flag',
    'user-management-common/create-user/request-invite',
    'user-management/helpers/um-utils'
], function(
    $,
    flag,
    requestInvite,
    umUtils
) {
    var pendingInvites = {};
    pendingInvites.hasCompleted = false;
    var pendingInvitesFlag;
    var INVITES_FLAG_CLOSED_KEY = "uppPendingInvitesFlagClosed";
    var LAST_CHECK_FOR_PENDING_INVITES_TIME = "uppLastCheckForPendingInvitesTime";
    var PENDING_INVITES = "uppLastPendingInvites";
    var ONE_HOUR = (1000 * 60 * 60);

    pendingInvites.flagHasBeenDismissed = function () { //visible for testing
        var dismissed = false;
        var lastClosed = localStorage[INVITES_FLAG_CLOSED_KEY];
        if (lastClosed) {
            dismissed = (new Date().getTime() - lastClosed) < ONE_HOUR; // Show the flag again after one hour
        }
        return dismissed;
    };

    function pendingInviteCount() {
        var deferredCount = $.Deferred();
        if (localStorage[LAST_CHECK_FOR_PENDING_INVITES_TIME] != null && (new Date().getTime() - localStorage[LAST_CHECK_FOR_PENDING_INVITES_TIME]) < ONE_HOUR) {
            deferredCount.resolve(localStorage[PENDING_INVITES]);
        } else {
            $.ajax({
                url: umUtils.restBaseUrl() + '/rest/um/1/user/search?activeFilter=pending&max-results=1',
                dataType: 'json',
                // Revert JIRA's override of jQuery's default. This means the &_=<timestamp>
                // query param is not included on requests
                cache: true
            }).then(function (invites) {
                localStorage[PENDING_INVITES] = invites.length;
                localStorage[LAST_CHECK_FOR_PENDING_INVITES_TIME] = new Date().getTime();
                deferredCount.resolve(invites.length);
            }, deferredCount.reject);
        }

        return deferredCount.promise();
    }

    function showPendingInvitesFlag() {
        pendingInvitesFlag = flag({
            id: 'pending-invites-flag',
            type: 'info',
            isHtml: true,
            body: AJS.format("There are users with pending invites to your Atlassian Cloud. {0}Approve here{1}.", '<a href="/admin/users?activeFilter=pending&src=pending.flag.' + encodeURIComponent(umUtils.productName()) + '">', '</a>')
        });
        $(pendingInvitesFlag).on('um-flag-close', function() {
            localStorage[INVITES_FLAG_CLOSED_KEY] = new Date().getTime();
        });
    }

    pendingInvites.closePendingInvitesFlag = function() {
        if (pendingInvitesFlag != null) {
            pendingInvitesFlag.close();
        }
    };

    pendingInvites.init = function() {
        umUtils.isSiteAdmin().then(function (isSiteAdmin) {
            if (isSiteAdmin && !pendingInvites.flagHasBeenDismissed()) {
                return pendingInviteCount().then(function (inviteCount) {
                    if (inviteCount > 0) {
                        showPendingInvitesFlag();
                    }
                });
            }
        }).always(function() { pendingInvites.hasCompleted = true; })
    };

    return pendingInvites;
});;
;
/* module-key = 'com.atlassian.crowd.user-provisioning-vertigo-plugin:create-users-resources', location = 'user-provisioning-vertigo-module/js/atlassian/create-user-init.js' */
require(['jquery', 'user-management-common/create-user/request-invite', 'user-management-common/create-user/pending-invites'],
function($, requestInvite, pendingInvites) {
    $(pendingInvites.init);
});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/jquery/plugins/avataror/avataror.js' */
jQuery.fn.avataror=function(i){var t=jQuery,e=t(document);this.each(function(){var r=t(this),a=r.find("img").attr("src");r.css({"-moz-border-radius":"10px","-webkit-border-radius":"10px"}),r.html("<p>Loading?</p>");var o={previewSize:48};o.preview=t("<div/>").addClass("avataror-preview").css({border:"solid 1px #000",float:"left",height:o.previewSize+"px",overflow:"hidden",width:o.previewSize+"px",position:"relative",top:"-9999em",left:"-9999em"}),o.preview.prependTo(i.previewElement),o.img=t('<img alt="Avatar Source"/>'),o.img.load(function(){o.image=t("<div/>").css({background:"url('"+a+"') no-repeat",clear:"left",position:"relative","background-size":"cover"}),o.marker=t("<div/>").css({cursor:"move",position:"relative"}),o.dash=t("<div/>"),o.shadow=t("<div/>"),o.dash.add(o.shadow).css({cursor:"move",opacity:.5,left:0,top:0,position:"absolute"}),o.image.append(o.shadow).append(o.dash).append(o.marker),r.append(o.image),o.marker.html("<div></div><div></div><div></div><div></div>"),t("div",o.marker).each(function(i){var e=t(this);e.css({background:"#000",border:"solid 1px #fff",width:"10px",height:"10px",position:"absolute","font-size":"1px"}),e.css(["left","right","right","left"][i],"-6px"),e.css(["top","top","bottom","bottom"][i],"-6px"),e.css("cursor",["nw-resize","ne-resize","se-resize","sw-resize"][i]),e.mousedown(function(t){t.preventDefault(),t.stopPropagation(),o.dragging={x:t.pageX,y:t.pageY,ax:o.x,ay:o.y,w:o.width,h:o.height,i:i+1},o.shadow.hide()})}),o.marker.add(o.image).mousedown(function(i){i.preventDefault(),o.dragging={x:i.pageX,y:i.pageY,ax:o.x,ay:o.y,w:o.width,h:o.height},o.shadow.hide()}),e.mouseup(function(i){o.handleMouseUp(i)}),e.mousemove(function(i){o.dragging&&(o.handleMouseMove(i.pageX,i.pageY),i.preventDefault())}),o.imgwidth=o.img[0].naturalWidth,o.imgheight=o.img[0].naturalHeight,o.imgwidth>500?(o.ratio=o.imgwidth/500,o.imgwidth=500,o.imgheight/=o.ratio):o.ratio=1;var i=+t("#avatar-offsetX").val(),g=+t("#avatar-offsetY").val(),h=+t("#avatar-width").val();if(i+h>o.imgwidth||g+h>o.imgheight){i=h>=o.imgwidth?0:(o.imgwidth-h)/5,g=h>=o.imgheight?0:(o.imgheight-h)/5;var d=Math.min(o.imgwidth,o.imgheight);d<=h&&(h=d)}o.x=i,o.y=g,o.width=h,o.height=h,o.image.css({width:o.imgwidth+"px",height:o.imgheight+"px"}),o.setMarker(),r.css({width:o.imgwidth+"px"}),o.preview.css({position:"static"}),t("p",r).remove(),r.trigger("AvatarImageLoaded"),o.adjustPreview()}),o.img.attr("src",a),o.preview.append(o.img),o.setMarker=function(){o.marker.css("border","dashed 1px #fff"),o.dash.css("border","solid 1px #000"),o.shadow.css("border","solid 1px #000"),o.marker.add(this.dash).css("left",this.x-1+"px"),o.marker.add(o.dash).css("top",o.y-1+"px"),o.shadow.css("border-left-width",o.x+"px"),o.shadow.css("border-right-width",o.imgwidth-o.x-o.width+"px"),o.shadow.css("border-top-width",o.y+"px"),o.shadow.css("border-bottom-width",o.imgheight-o.y-o.height+"px"),o.shadow.css("width",o.width+"px"),o.shadow.css("height",o.height+"px"),o.marker.add(o.dash).css("width",o.width+"px"),o.marker.add(o.dash).css("height",o.height+"px")},o.adjustPreview=function(){o.img.attr("width",o.imgwidth*o.previewSize/o.width),o.img.attr("height",o.imgheight*o.previewSize/o.height),o.img.css("margin-left","-"+o.x*o.previewSize/o.width+"px"),o.img.css("margin-top","-"+o.y*o.previewSize/o.height+"px"),o.preview.select()},o.handleMouseMove=function(i,t){var e=i-o.dragging.x,r=t-o.dragging.y;if(this.dragging.i){var a=o.resizeHandlers[this.dragging.i-1];a(e,r)}else o.x=o.dragging.ax+e,o.y=o.dragging.ay+r,o.x+o.width>o.imgwidth&&(o.x=o.imgwidth-o.width),o.y+o.height>o.imgheight&&(o.y=o.imgheight-o.height),o.x<0&&(o.x=0),o.y<0&&(o.y=0);o.setMarker(),o.adjustPreview()},o.handleMouseUp=function(i){t("#avatar-offsetX").val(Math.floor(o.x*o.ratio)),t("#avatar-offsetY").val(Math.floor(o.y*o.ratio)),t("#avatar-width").val(Math.floor(o.width*o.ratio)),o.dragging=null,o.shadow.show()},o.originX=function(){return o.dragging.ax},o.originY=function(){return o.dragging.ay},o.originBottomX=function(){return o.dragging.ax+o.dragging.w},o.originBottomY=function(){return o.dragging.ay+o.dragging.h},o.originNw=function(){return{x:o.originX(),y:o.originY()}},o.originNe=function(){return{x:o.originBottomX(),y:o.originY()}},o.originSe=function(){return{x:o.originBottomX(),y:o.originBottomY()}},o.originSw=function(){return{x:o.originX(),y:o.originBottomY()}},o.nwHandler=function(i,t){var e=o.originSe(),r={x:o.originX()+i,y:o.originY()+t},a=Math.abs(r.x-e.x),g=Math.abs(r.y-e.y),h=Math.min(a,g);h<20&&(h=20),e.x-h<0&&(h=e.x),e.y-h<0&&(h=e.y),o.x=e.x-h,o.y=e.y-h,o.width=o.height=h},o.neHandler=function(i,t){var e=o.originSw(),r={x:o.originBottomX()+i,y:o.originY()+t},a=Math.abs(r.x-e.x),g=Math.abs(r.y-e.y),h=Math.min(a,g);h<20&&(h=20),e.x+h>o.imgwidth&&(h=o.imgwidth-e.x),e.y-h<0&&(h=e.y),o.y=e.y-h,o.width=o.height=h},o.seHandler=function(i,t){var e=o.originNw(),r={x:o.originBottomX()+i,y:o.originBottomY()+t},a=Math.abs(r.x-e.x),g=Math.abs(r.y-e.y),h=Math.min(a,g);h<20&&(h=20),e.x+h>o.imgwidth&&(h=o.imgwidth-e.x),e.y+h>o.imgheight&&(h=o.imgheight-e.y),o.width=o.height=h},o.swHandler=function(i,t){var e=o.originNe(),r={x:o.originX()+i,y:o.originBottomY()+t},a=Math.abs(r.x-e.x),g=Math.abs(r.y-e.y),h=Math.min(a,g);h<20&&(h=20),e.x-h<0&&(h=e.x),e.y+h>o.imgheight&&(h=o.imgheight-e.y),o.x=e.x-h,o.width=o.height=h},o.resizeHandlers=[o.nwHandler,o.neHandler,o.seHandler,o.swHandler]})};;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/Avatar.js' */
define("jira/ajs/avatarpicker/avatar",["jira/lib/class"],function(t){return t.extend({init:function(t){this._id=t.id,this._isSystemAvatar=t.isSystemAvatar,this._isSelected=t.isSelected,this._urls=t.urls},setUnSelected:function(){this._isSelected=!1},setSelected:function(){this._isSelected=!0},isSelected:function(){return!!this._isSelected},isSystemAvatar:function(){return this._isSystemAvatar},getId:function(){return this._id},getUrl:function(t){return this._urls[t]},toJSON:function(){return{id:this._id,isSystemAvatar:this._isSystemAvatar,isSelected:this._isSelected,urls:this._urls}}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/avatar-sizes.js' */
define("jira/ajs/avatarpicker/avatar/sizes",["exports","jquery"],function(a,e){a.getSizeObjectFromName=function(r){if("object"==typeof r)return r;"string"==typeof r?e.trim(r):"";return a.LARGE.param===r?a.LARGE:a.MEDIUM.param===r?a.MEDIUM:a.SMALL.param===r?a.SMALL:"xsmall"===r?a.SMALL:a.LARGE},a.LARGE={param:"large",height:48,width:48},a.MEDIUM={param:"medium",width:32,height:32},a.SMALL={param:"small",width:16,height:16}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/avatar-factory.js' */
define("jira/ajs/avatarpicker/avatar-factory",["jira/ajs/avatarpicker/avatar","exports"],function(a,t){t.createCustomAvatar=function(t){return t.isSystemAvatar=!1,new a(t)},t.createSystemAvatar=function(t){return t.isSystemAvatar=!0,new a(t)}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarManager.js' */
define("jira/ajs/avatarpicker/avatar-manager",["jira/util/formatter","jira/lib/class","wrm/context-path","jquery"],function(t,r,e,a){var s=e();return r.extend({init:function(t){this.store=t.store,this.ownerId=t.ownerId,this.username=t.username,this.anonymousAvatarId=t.anonymousAvatarId,this.avatarSrcBaseUrl=t.avatarSrcBaseUrl},selectAvatar:function(t,r){return this.store.selectAvatar(t,r)},getById:function(t){return this.store.getById(t)},destroy:function(t,r){this.store.destroy(t,r)},update:function(t,r){this.store.update(t,r)},add:function(t,r){this.store._add(t,r)},getAllSystemAvatars:function(){return this.store.getAllSystemAvatars()},getAllCustomAvatars:function(){return this.store.getAllCustomAvatars()},getSelectedAvatar:function(){return this.store.getSelectedAvatar()},getAllAvatars:function(){return this.store.getAllAvatars()},getAllAvatarsRenderData:function(t){var r,e=this,a=this.getAllAvatars(),s={system:[],custom:[]};for(r=0;r<a.system.length;r++)s.system.push(e.getAvatarRenderData(a.system[r],t));for(r=0;r<a.custom.length;r++)s.custom.push(e.getAvatarRenderData(a.custom[r],t));return s},getAvatarRenderData:function(t,r){var e=t.toJSON();return e.src=this.getAvatarSrc(t,r),e.width=r.width,e.height=r.height,e},refreshStore:function(t){this.store.refresh(t)},getAvatarSrc:function(r,e){return this.store.isTempAvatar(r)?s+"/secure/temporaryavatar?"+a.param({cropped:!0,magic:(new Date).getTime(),size:e.param}):r.getUrl(t.format("{0}x{1}",e.height,e.width))},createTemporaryAvatar:function(t,r){this.store.createTemporaryAvatar(t,r)},createAvatar:function(t,r,e){this.store.createAvatar(t,r,e)},createAvatarFromTemporary:function(t,r){this.store.createAvatarFromTemporary(t,r)},getAnonymousAvatarId:function(){return this.anonymousAvatarId}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = 'includes/ajs/avatarpicker/avatar-manager-factory.js' */
define("jira/ajs/avatarpicker/avatar-manager-factory",["jira/ajs/avatarpicker/avatar-store","jira/ajs/avatarpicker/avatar-manager","wrm/context-path","exports"],function(a,r,e,t){var s=e();t.createUniversalAvatarManager=function(e){var t,v="",n="",p="",l="",c="";if(e.projectId){var o=s+"/rest/api/latest/universal_avatar/type/"+e.avatarType+"/owner/"+e.projectId;t=o;var u=o+"/avatar";v=null,n=o+"/temp",p=o,l=u,c=u}else t=s+"/rest/api/latest/avatar/project/system",n=s+"/rest/api/latest/avatar/project/temporary",l=s+"/rest/api/latest/avatar/project/temporaryCrop";var i=new a({restQueryUrl:t,restUpdateUrl:v,restCreateTempUrl:n,restCreateUrl:p,restUpdateTempUrl:l,restSingleAvatarUrl:c,defaultAvatarId:e.defaultAvatarId});return new r({store:i,ownerId:e.projectId,avatarSrcBaseUrl:s+"/secure/projectavatar"})},t.createProjectAvatarManager=function(a){return a.avatarType="project",t.createUniversalAvatarManager(a)},t.createUserAvatarManager=function(e){var t=s+"/rest/api/latest/user",v=new a({restQueryUrl:t+"/avatars",restUpdateUrl:t+"/avatar",restCreateTempUrl:t+"/avatar/temporary",restUpdateTempUrl:t+"/avatar",restSingleAvatarUrl:t+"/avatar",restParams:{username:e.username},defaultAvatarId:e.defaultAvatarId});return new r({store:v,username:e.username,avatarSrcBaseUrl:s+"/secure/useravatar"})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarStore.js' */
define("jira/ajs/avatarpicker/avatar-store",["jira/util/formatter","jira/ajs/avatarpicker/avatar-util","jira/ajs/avatarpicker/avatar-factory","jira/ajs/ajax/smart-ajax","jira/lib/class","jquery"],function(t,e,r,a,s,i){return s.extend({TEMP_ID:"TEMP",init:function(t){if(!t.restQueryUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restQueryUrl], The rest url for querying avatars (see class description)");if(!t.restCreateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restCreateTempUrl], The rest url for creating a temporary avatar (see class description)");if(!t.restUpdateTempUrl)throw new Error("JIRA.AvatarStore.init: You must specify [restUpdateTempUrl], The rest url for updating a temporary avatar (see class description)");if(!t.defaultAvatarId)throw new Error("JIRA.AvatarStore.init: You must specify [defaultAvatarId] to the contructor so the store knows what to select if you delete the selected one");this.restQueryUrl=t.restQueryUrl,this.restUpdateUrl=t.restUpdateUrl,this.restCreateTempUrl=t.restCreateTempUrl,this.restCreateUrl=t.restCreateUrl,this.restUpdateTempUrl=t.restUpdateTempUrl,this.restSingleAvatarUrl=t.restSingleAvatarUrl,this.restParams=t.restParams||{},this.restParams.atl_token=atl_token(),this.defaultAvatarId=t.defaultAvatarId,this.avatars={system:[],custom:[]}},_buildCompleteUrl:function(e){var r=e;if(this.restParams){var a="";for(var s in this.restParams)a+=t.format("&{0}={1}",encodeURIComponent(s),encodeURIComponent(this.restParams[s]));r+="?"+a.substr(1)}return r},getById:function(t){var e;return i.each(this.avatars.system,function(r,a){if(this.getId()===t)return e=a,!1}),e||i.each(this.avatars.custom,function(r,a){if(this.getId()===t)return e=a,!1}),e},isTempAvatar:function(t){return t.getId()===this.TEMP_ID},_selectAvatar:function(t){var e=this.getSelectedAvatar();e&&e.setUnSelected(),t.setSelected()},selectAvatar:function(t,e){var r=this;if(!t)throw new Error("JIRA.AvatarStore.selectAvatar: Cannot select Avatar that does not exist");this.restUpdateUrl?a.makeRequest({type:"PUT",contentType:"application/json",dataType:"json",url:this._buildCompleteUrl(this.restUpdateUrl),data:JSON.stringify(t.toJSON()),success:function(){r._selectAvatar(t),e.success&&e.success.call(this,t)},error:e.error}):(r._selectAvatar(t),e.success&&e.success.call(this,t))},_destory:function(t){var e=i.inArray(t,this.avatars.custom);if(e===-1)throw new Error("JIRA.AvatarStore._destroy: Cannot remove avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");this.avatars.custom.splice(e,1)},destroy:function(t,e){var r=this;if(e=e||{},!t)throw new Error("JIRA.AvatarStore.destroy: Cannot delete Avatar that does not exist");a.makeRequest({type:"DELETE",url:this.getRestUrlForAvatar(t),success:function(){r._destory(t),t.isSelected()?r.selectAvatar(r.getById(r.defaultAvatarId),e):e.success&&e.success.apply(this,arguments)},error:e.error})},getSelectedAvatar:function(){for(var t=0;t<this.avatars.custom.length;t++)if(this.avatars.custom[t].isSelected())return this.avatars.custom[t];for(t=0;t<this.avatars.system.length;t++)if(this.avatars.system[t].isSelected())return this.avatars.system[t]},_update:function(t){var e=this;if(!this.getById(t.getId()))throw new Error("JIRA.AvatarStore._update: Cannot update avatar ["+t.getId()+"], it might be a system avatar (readonly) or does not exist.");i.each(this.avatars.custom,function(r){this.getId()===t.getId()&&(e.avatars.custom[r]=t)})},update:function(t,e){var r=this;e=e||{},a.makeRequest({type:"PUT",url:this.getRestUrlForAvatar(t),error:e.error,success:function(){r._update(t),e.success&&e.success.apply(this,arguments)}})},_add:function(t){t.isSystemAvatar()?this.avatars.system.push(t):this.avatars.custom.push(t)},createAvatarFromTemporary:function(t,e){var s=this;e=e||{},this.restUpdateTempUrl&&a.makeRequest({type:"POST",url:this._buildCompleteUrl(this.restUpdateTempUrl),data:JSON.stringify(t),contentType:"application/json",dataType:"json",success:function(t){t||(t={id:s.TEMP_ID,isSelected:!0});var a=r.createCustomAvatar(t);s._add(a),e.success&&e.success.call(this,t)},error:e.error})},createTemporaryAvatar:function(t,r){r=i.extend(!0,{},r,{params:this.restParams}),e.uploadTemporaryAvatar(this.restCreateTempUrl,t,r)},createAvatar:function(t,r,a){var s={x:r.cropperOffsetX,y:r.cropperOffsetY,size:r.cropperWidth};a=i.extend(!0,{},a,{params:this.restParams},{params:s}),e.uploadAvatar(this.restCreateUrl,t,a)},_refresh:function(t){var e=this;e.avatars.system=[],e.avatars.custom=[],t.system&&i.each(t.system,function(t,a){e.avatars.system.push(r.createSystemAvatar(a))}),t.custom&&i.each(t.custom,function(t,a){e.avatars.custom.push(r.createCustomAvatar(a))})},refresh:function(t){var e=this,r=this.getById(e.TEMP_ID);t=t||{},a.makeRequest({url:this._buildCompleteUrl(this.restQueryUrl),error:t.error,success:function(a){e._refresh(a),r&&e._add(r),t.success&&t.success.apply(this,arguments)}})},getAllAvatars:function(){return this.avatars},getAllSystemAvatars:function(){return this.avatars.system},getAllCustomAvatars:function(){return this.avatars.custom},getRestUrlForAvatar:function(t){return this._buildCompleteUrl(this.restSingleAvatarUrl+"/"+t.getId())}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/AvatarUtil.js' */
define("jira/ajs/avatarpicker/avatar-util",["jira/util/logger","jira/attachment/inline-attach","jquery"],function(r,e,a){var n={uploadUsingIframeRemoting:function(o,t,i){i=i||{};var s=t.val(),l=new e.Form(new e.FileInput(t,(!1))),u=l.addStaticProgress(s),d=l.cloneFileInput();l.fileSelector.clear();var c=new e.Timer(function(){},this),p=new e.FormUpload({$input:d,url:o,params:a.extend({},i.params,{filename:s,atl_token:window.atl_token()}),scope:this,before:function(){!this.cancelled&&u.start()},success:function(r,e){r.errorMessages&&r.errorMessages.length?l.addErrorWithFileName(r.errorMessages[0],s,n.getErrorTarget(l)):i.success&&i.success(r,e)},error:function(a){r.log(a),this.cancelled||(a.indexOf("SecurityTokenMissing")>=0?l.addError(e.Text.tr("upload.xsrf.timeout",s),n.getErrorTarget(l)):l.addError(e.Text.tr("upload.error.unknown",s),n.getErrorTarget(l)))},after:function(){c.cancel(),u.remove(),this.cancelled||l.enable()}});u.onCancel(function(){p.abort()}),p.upload()},uploadTemporaryUsingFileApi:function(r,n,o){var t=new e.Form(new e.FileInput(n,(!1))),i=n[0].files[0];o=o||{},o.params=a.extend({},o.params,{filename:i.name,size:i.size,atl_token:window.atl_token()}),this.handleFileUpload(r,n,i,t,o)},uploadUsingFileApi:function(r,o,t){var i=a(o),s=new e.Form(new e.FileInput(a(i),(!1)));e.AjaxPresenter.isSupported(i)||s.addError(e.Text.tr("upload.error.unsupported.browser"),n.getErrorTarget(s));var l=o.files[0];this.handleFileUpload(r,i,l,s,t||{})},handleFileUpload:function(r,o,t,i,s){var l,u=i.addProgress(t),d=new e.Timer(function(){l||u.show()}),c=new e.AjaxUpload({file:t,params:a.extend({},s.params),scope:this,url:r,before:function(){o.hide(),!l&&u.start()},progress:function(r){u.progress.$progress.parent().parent().show(),!l&&u.update(r)},success:function(r,e){l||(r.errorMessages&&r.errorMessages.length?(i.addErrorWithFileName(r.errorMessages[0],t.name,n.getErrorTarget(i)),s.error&&s.error(r.errorMessages[0],e)):201===e&&s.success(r,e))},error:function(r,a){a<0?i.addError(r,n.getErrorTarget(i)):i.addError(e.Text.tr("upload.error.unknown",t.name),n.getErrorTarget(i)),s.error&&s.error(r,a)},after:function(){d.cancel(),u.finish().remove(),o.val("").show()}});c.upload(),u.onCancel(function(){c.abort()})},getErrorTarget:function(r){return{$element:r.$form.find(".error")}},uploadTemporaryAvatar:function(r,a,n){e.AjaxPresenter.isSupported(a)?this.uploadTemporaryUsingFileApi(r,a,n):this.uploadUsingIframeRemoting(r,a,n)},uploadAvatar:function(r,e,a){this.uploadUsingFileApi(r,e,a)}};return n});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/ClientFileReader.js' */
define("jira/ajs/avatarpicker/client-file-reader",["jira/attachment/inline-attach","jira/util/formatter","underscore"],function(e,t,i){"use strict";var r=function(e){this.init(e)};return r.prototype.defaults={fileTypeFilter:/^image.*/,fileSizeLimit:10485760},r.prototype.init=function(e){this.options=i.defaults({},e,this.defaults)},r.prototype.readFileAsDataUri=function(e){var t=Array.prototype.slice.call(e,0,1)[0],i=this.validateFile(t);if(i.valid===!1){var r=new Error(i.error);return r.name="ValidationError",Promise.reject(r)}var a=new FileReader,n=new Promise(function(e,t){a.addEventListener("load",function(){e(a.result)}),a.addEventListener("error",function(e){t(e)})});return a.readAsDataURL(t),n},r.prototype.validateFile=function(i){var r="";return this.options.fileTypeFilter.test(i.type)?i.size>this.options.fileSizeLimit&&(r=t.format("The image {0} is too big. The maximum allowed upload size is {1}.",i.name,e.Text.fileSize(this.options.fileSizeLimit))):r="The file content you have provided is not a supported image format. Please try a JPEG, GIF or PNG file.",""===r?{valid:!0}:{valid:!1,error:r}},r});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/avatar-picker.js' */
define("jira/ajs/avatarpicker/avatar-picker",["jira/util/logger","jira/util/formatter","jira/ajs/avatarpicker/client-file-reader","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/ajax/smart-ajax","jira/dialog/dialog","jira/ajs/control","jquery","underscore"],function(a,e,r,t,i,n,o,c,l){return o.extend({defaults:{cropOffline:!1,maxImageDimension:2e3},init:function(a){a=l.defaults(a,this.defaults),this.avatarManager=a.avatarManager,this.avatarRenderer=a.avatarRenderer,this.imageEditor=a.imageEditor,this.size=a.size,this.selectCallback=a.select,this.cropperDialog=null,this.initialSelection=a.initialSelection,this.cropOffline=a.cropOffline,this.maxImageDimension=a.maxImageDimension},render:function(a){var e=this;this.avatarManager.refreshStore({success:function(){e.cropperDialog instanceof n&&(e.cropperDialog.hide(),delete e.cropperDialog),e.element=c('<div id="jira-avatar-picker" />'),e.element.html(JIRA.Templates.AvatarPicker.picker({avatars:e.avatarManager.getAllAvatarsRenderData(e.size)})),e._assignEvents("selectAvatar",e.element.find(".jira-avatar button")),e._assignEvents("deleteAvatar",e.element.find(".jira-delete-avatar")),e._assignEvents("uploader",e.element.find("#jira-avatar-uploader")),e._assignEvents("selectFilePicker",e.element.find("label.jira-avatar-uploader")),e._assignEvents("selectFilePicker",e.element.find("#jira-avatar-uploader-button")),e.$fileErrorContainer=e.element.find(".jira-avatar-upload-form .error"),void 0!==e.initialSelection&&e.getAvatarElById(e.initialSelection).addClass("jira-selected-avatar"),a(e.element),e.element.find("#jira-avatar-uploader-button").addClass("aui-button")},error:function(r,t,i,n){e.appendErrorContent(e.element,n),a(e.element)}})},appendErrorContent:function(a,e){try{var r=JSON.parse(e.data);r&&r.errorMessages?c.each(r.errorMessages,function(e,r){AJS.messages.error(a,{body:AJS.escapeHTML(r),closeable:!1,shadowed:!1})}):a.append(i.buildDialogErrorContent(e,!0))}catch(r){a.append(i.buildDialogErrorContent(e,!0))}},showFileError:function(a){this.$fileErrorContainer.text(a)},clearFileError:function(){this.$fileErrorContainer.text("")},createCropperDialog:function(a,e){var r=this;return new n({id:"project-avatar-cropper",width:560,content:function(t){var i=r.imageEditor.render(e);r.imageEditor.edit({confirm:function(e){r.imageEditor.startProgress(),r.avatarManager.createAvatar(a,e,{success:function(a){r.render(function(){r.selectAvatar(a.id)})},error:function(){r.resetCropping()}})},cancel:r.resetCropping.bind(r)}),t(i)}})},cropLocalFile:function(e){var i,n=this,o=new r;o.readFileAsDataUri(e.files).then(function(a){return i=a,n.validateImage(i)}).then(function(){var a={cropperOffsetX:100,cropperOffsetY:100,cropperWidth:100,url:i};n.cropperDialog=n.createCropperDialog(e,a),n.cropperDialog.bind("dialogContentReady",function(){c(n).trigger(t.LOADED)}),n.cropperDialog.bind("Dialog.hide",function(){c(n).trigger(t.DISMISSED)}),n.cropperDialog.show()}).catch(function(e){"ValidationError"===e.name?n.showFileError(e.message):a.error(e)})},resetCropping:function(){this.cropperDialog&&this.cropperDialog.hide(),this.element.find("#jira-avatar-uploader").val("")},validateImage:function(a){var r=new Image,t=this,i=new Promise(function(a,i){r.onload=function(){if(this.naturalHeight>t.maxImageDimension||this.naturalWidth>t.maxImageDimension){var r=new Error(e.format("The selected image size is too big. The maximum allowed image size is {0}px * {0}px",t.maxImageDimension));r.name="ValidationError",i(r)}else a(this.naturalWidth,this.naturalHeight)},r.onerror=function(){var a=new Error("Cannot read selected image. Please try again or choose a different image.");a.name="ValidationError",i(a)}});return r.src=a,i},uploadTempAvatar:function(e){var r=this;this.avatarManager.createTemporaryAvatar(e,{success:function(a){a.id?r.render(function(){r.selectAvatar(a.id)}):(e.val(""),r.cropperDialog=new n({id:"project-avatar-cropper",width:560,content:function(e){function t(){var a=i.find("input[type=submit]"),e=c("<span class='icon throbber loading'></span>");return a.attr("aria-disabled","true").attr("disabled",""),a.before(e),function(){e.remove(),a.removeAttr("aria-disabled").removeAttr("disabled")}}var i=r.imageEditor.render(a);r.imageEditor.edit({confirm:function(a){var e=t();r.avatarManager.createAvatarFromTemporary(a,{success:function(a){r.render(function(){r.selectAvatar(a.id)})},error:e})}}),i.find(".cancel").click(function(){r.cropperDialog.hide()}),e(i)}}),r.cropperDialog.bind("dialogContentReady",function(){c(r).trigger(t.LOADED)}),r.cropperDialog.bind("Dialog.hide",function(){c(r).trigger(t.DISMISSED)}),r.cropperDialog.show())},error:function(){a.log(arguments)}})},getAvatarElById:function(a){return this.element.find(".jira-avatar[data-id='"+a+"']")},selectAvatar:function(a){var e=this.avatarManager.getById(a),r=this;this.avatarManager.selectAvatar(this.avatarManager.getById(a),{error:function(){},success:function(){r.getAvatarElById(a).remove(),r.selectCallback&&r.selectCallback.call(r,e,r.avatarManager.getAvatarSrc(e,r.size))}})},selectFilePicker:function(){var a=c("#jira-avatar-uploader");a&&a.click()},deleteAvatar:function(a){var r=this;confirm("Are you sure you want to delete avatar?")&&this.avatarManager.destroy(this.avatarManager.getById(a),{error:function(){},success:function(){var e=r.avatarManager.getSelectedAvatar(),t=r.getAvatarElById(a);t.fadeOut(function(){t.remove()}),e.getId()!==a&&(r.getAvatarElById(e.getId()).addClass("jira-selected-avatar"),r.selectCallback.call(r,e,r.avatarManager.getAvatarSrc(e,r.size),!0))}})},_events:{uploader:{change:function(a,e){this.clearFileError(),this.cropOffline?this.cropLocalFile(e[0]):this.uploadTempAvatar(e)}},deleteAvatar:{click:function(a,e){this.deleteAvatar(e.attr("data-id"))}},selectAvatar:{click:function(a,e){"select-avatar-button"===e[0].id&&this.selectAvatar(e.attr("data-id"))}},selectFilePicker:{click:function(a,e){this.selectFilePicker()}}}})});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/avatar-picker-factory.js' */
define("jira/ajs/avatarpicker/avatar-picker-factory",["jira/util/formatter","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jira/ajs/avatarpicker/avatar-manager","jira/ajs/avatarpicker/avatar-manager-factory","jira/ajs/avatarpicker/avatar","jira/ajs/avatarpicker/avatar/sizes","jira/dialog/form-dialog","wrm/context-path","wrm/data","jquery","exports"],function(a,e,t,r,i,c,n,o,v,p,d,l){l.createUniversalAvatarPicker=function(a){return new e({avatarManager:i.createUniversalAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId,avatarType:a.avatarType}),initialSelection:a.initialSelection,imageEditor:new t,size:a.hasOwnProperty("avatarSize")?a.avatarSize:n.LARGE,select:a.select,cropOffline:!0})},l.createProjectAvatarPicker=function(a){return new e({avatarManager:i.createProjectAvatarManager({projectKey:a.projectKey,projectId:a.projectId,defaultAvatarId:a.defaultAvatarId}),imageEditor:new t,size:n.LARGE,select:a.select,cropOffline:!0})},l.createUserAvatarPicker=function(a){return new e({avatarManager:i.createUserAvatarManager({username:a.username,defaultAvatarId:a.defaultAvatarId}),imageEditor:new t,size:n.LARGE,select:a.select})},l.createUniversalAvatarPickerDialog=function(e){var t=e.initialSelection||e.defaultAvatarId,r=new o({trigger:e.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(i){var c,n;n=d('<div id="projectavatar-content-wrapper"/>'),d("<h2 />").text(e.title||"Select a Project Avatar").appendTo(n),c=l.createUniversalAvatarPicker({projectKey:e.projectKey,projectId:e.projectId,defaultAvatarId:e.defaultAvatarId,initialSelection:t,avatarType:e.avatarType,avatarSize:e.avatarSize,select:function(a,i,c){t=String(a.getId()),e.select&&e.select.apply(this,arguments),c||r.hide()}}),c.render(function(a){n.append(a),i(n)})}});r._focusFirstField=function(){}},l.createProjectAvatarPickerDialog=function(e){var t=new o({trigger:e.trigger,id:"project-avatar-picker",width:600,stacked:!0,content:function(r){var i,c;c=d('<div id="projectavatar-content-wrapper"/>'),d("<h2 />").text("Select a Project Avatar").appendTo(c),i=l.createProjectAvatarPicker({projectKey:e.projectKey,projectId:e.projectId,defaultAvatarId:e.defaultAvatarId,select:function(a,r,i){e.select&&e.select.apply(this,arguments),i||t.hide()}}),i.render(function(a){c.append(a),r(c)})}});t._focusFirstField=function(){}}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/avatar-picker-image-editor.js' */
define("jira/ajs/avatarpicker/avatar-picker/image-editor",["jira/ajs/control","jquery"],function(e,t){var a=e.extend({render:function(e){return this.element=t('<div id="avatar-picker-image-editor"/>').html(JIRA.Templates.AvatarPicker.imageEditor(e)),this.element},edit:function(e){var a=this,i=this.element.find(".avataror");e=e||{},i.unbind(),i.bind("AvatarImageLoaded",function(){e.ready&&e.ready()}),i.find("img").load(function(){i.avataror({previewElement:a.element.find(".jira-avatar-cropper-header"),parent:a.element})}),this.element.find("#avataror").submit(function(a){a.preventDefault(),e.confirm&&e.confirm({cropperOffsetX:t("#avatar-offsetX").val(),cropperOffsetY:t("#avatar-offsetY").val(),cropperWidth:t("#avatar-width").val()})}).find(".cancel").click(function(t){t.preventDefault(),e.cancel&&e.cancel()})},startProgress:function(){this.element.find("input[type=submit]").attr("aria-disabled","true").attr("disabled",""),this.element.find(".spinner").spin()},stopProgress:function(){this.element.find("input[type=submit]").removeAttr("aria-disabled").removeAttr("disabled"),this.element.find(".spinner").spinStop()}});return a.LOADED="imageEditorLoaded",a.DISMISSED="imageEditorDismissed",a});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/GravatarUtil.js' */
define("jira/ajs/avatarpicker/gravatar-util",["jquery","exports"],function(a,e){e.showGravatarHelp=function(e){"undefined"!=typeof e&&"undefined"!=typeof e.entry&&(a(".gravatar-signup-text").addClass("hidden"),a(".gravatar-login-text").removeClass("hidden"))},e.displayGravatarHelp=function(){var r=a("#gravatar_json_url");r.length&&a.ajax(r.val(),{dataType:"jsonp",success:e.showGravatarHelp})}});;
;
/* module-key = 'jira.webresources:avatar-picker', location = '/includes/ajs/avatarpicker/initAvatarPicker.js' */
!function(){var a=require("jquery"),r=require("jira/ajs/avatarpicker/avatar/sizes"),e=require("jira/ajs/avatarpicker/avatar-factory"),t=require("jira/ajs/avatarpicker/avatar-manager-factory"),A=require("jira/ajs/avatarpicker/avatar-picker-factory"),c=require("jira/ajs/avatarpicker/gravatar-util");AJS.namespace("JIRA.Avatar",null,require("jira/ajs/avatarpicker/avatar")),AJS.namespace("JIRA.Avatar.createCustomAvatar",null,e.createCustomAvatar),AJS.namespace("JIRA.Avatar.createSystemAvatar",null,e.createSystemAvatar),AJS.namespace("JIRA.Avatar.getSizeObjectFromName",null,r.getSizeObjectFromName),AJS.namespace("JIRA.Avatar.LARGE",null,r.LARGE),AJS.namespace("JIRA.Avatar.MEDIUM",null,r.MEDIUM),AJS.namespace("JIRA.Avatar.SMALL",null,r.SMALL),AJS.namespace("JIRA.AvatarManager",null,require("jira/ajs/avatarpicker/avatar-manager")),AJS.namespace("JIRA.AvatarManager.createUniversalAvatarManager",null,t.createUniversalAvatarManager),AJS.namespace("JIRA.AvatarManager.createProjectAvatarManager",null,t.createProjectAvatarManager),AJS.namespace("JIRA.AvatarManager.createUserAvatarManager",null,t.createUserAvatarManager),AJS.namespace("JIRA.AvatarPicker",null,require("jira/ajs/avatarpicker/avatar-picker")),AJS.namespace("JIRA.AvatarPicker.ImageEditor",null,require("jira/ajs/avatarpicker/avatar-picker/image-editor")),AJS.namespace("JIRA.AvatarPicker.createUniversalAvatarPicker",null,A.createUniversalAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createProjectAvatarPicker",null,A.createProjectAvatarPicker),AJS.namespace("JIRA.AvatarPicker.createUserAvatarPicker",null,A.createUserAvatarPicker),AJS.namespace("JIRA.createUniversalAvatarPickerDialog",null,A.createUniversalAvatarPickerDialog),AJS.namespace("JIRA.createProjectAvatarPickerDialog",null,A.createProjectAvatarPickerDialog),AJS.namespace("JIRA.AvatarStore",null,require("jira/ajs/avatarpicker/avatar-store")),AJS.namespace("JIRA.AvatarUtil",null,require("jira/ajs/avatarpicker/avatar-util")),AJS.namespace("JIRA.GravatarUtil.showGravatarHelp",null,c.showGravatarHelp),a(function(){a("#gravatar_help_params")&&c.displayGravatarHelp()})}();;
;
/* module-key = 'jira.webresources:avatar-picker', location = 'includes/ajs/avatarpicker/AvatarPicker.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.AvatarPicker&&(JIRA.Templates.AvatarPicker={}),JIRA.Templates.AvatarPicker.picker=function(a,t){for(var e='<form class="jira-avatar-upload-form aui top-label" action="#"><input name="id" value="10000" type="hidden" ><input name="pid" value="10000" type="hidden" ><div class="field-group"><button id="jira-avatar-uploader-button" type="button">'+soy.$$escapeHtml("Upload a new avatar")+'</button><input type="file" class="ignore-inline-attach" name="avatar" id="jira-avatar-uploader" style="visibility:hidden;"/><div class="error"></div></div></form><div class="form-body"><ul class="jira-avatars">',i=a.avatars.system,s=i.length,r=0;r<s;r++){var l=i[r];e+='<li class="jira-avatar jira-system-avatar '+(l.isSelected?"jira-selected-avatar":"")+'" title="Select this Avatar" data-id="'+soy.$$escapeHtml(l.id)+'"><button id="select-avatar-button" data-id="'+soy.$$escapeHtml(l.id)+'" class="jira-icon-button" title="'+soy.$$escapeHtml("Select this Avatar")+'"><img id="avatar-'+soy.$$escapeHtml(l.id)+'" src="'+soy.$$escapeHtml(l.src)+'" width="'+soy.$$escapeHtml(l.width)+'" height="'+soy.$$escapeHtml(l.height)+'" alt="'+soy.$$escapeHtml("Select this Avatar")+'"/></button></li>'}for(var c=a.avatars.custom,o=c.length,p=0;p<o;p++){var d=c[p];e+='<li class="jira-avatar jira-custom-avatar '+(d.isSelected?"jira-selected-avatar":"")+'" title="Select this avatar" data-id="'+soy.$$escapeHtml(d.id)+'"><button id="select-avatar-button" data-id="'+soy.$$escapeHtml(d.id)+'" class="jira-icon-button" title="'+soy.$$escapeHtml("Select this Avatar")+'"><img id="avatar-'+soy.$$escapeHtml(d.id)+'" src="'+soy.$$escapeHtml(d.src)+'" width="'+soy.$$escapeHtml(d.width)+'" height="'+soy.$$escapeHtml(d.height)+'" alt="'+soy.$$escapeHtml("Select this Avatar")+'" /></span><button class="jira-delete-avatar jira-icon-button" data-id="'+soy.$$escapeHtml(d.id)+'" title="'+soy.$$escapeHtml("Delete this Avatar")+'">'+soy.$$escapeHtml("Delete this Avatar")+"</button></li>"}return e+="</ul></div>"},JIRA.Templates.AvatarPicker.imageEditor=function(a,t){return'<form id="avataror" class="jira-avatar-cropper-form aui" action="/jira/secure/project/AvatarPicker.jspa"><input type="hidden" name="cropperOffsetX" id="avatar-offsetX" value="'+soy.$$escapeHtml(a.cropperOffsetX)+'"><input type="hidden" name="cropperOffsetY" id="avatar-offsetY" value="'+soy.$$escapeHtml(a.cropperOffsetY)+'"><input type="hidden" name="cropperWidth" id="avatar-width"  value="'+soy.$$escapeHtml(a.cropperWidth)+'"><div class="jira-avatar-cropper-header"><p>'+soy.$$escapeHtml("Please select which part of the uploaded image you wish to use as the avatar.")+'</p></div><div class="form-body"><div class="avataror"><img src="'+soy.$$escapeHtml(a.url)+'" height="300" /></div></div><div class="form-footer buttons-container"><div class="buttons"><span class="icon spinner"></span><input type="submit" class="aui-button aui-button-primary" value="'+soy.$$escapeHtml("Confirm")+'"><a class="aui-button aui-button-link cancel" href="#">'+soy.$$escapeHtml("Cancel")+"</a></div></div></form>"};;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/initAvatarPickerTrigger.js' */
define("jira/admin/init/avatar-picker-trigger",["jira/ajs/layer/layer-constants","jira/util/events","jira/util/events/types","jira/util/events/reasons","jira/ajs/layer/inline-layer","jira/ajs/contentretriever/content-retriever","jira/ajs/avatarpicker/avatar","jira/ajs/avatarpicker/avatar-picker-factory","jira/ajs/avatarpicker/avatar-picker","jira/ajs/avatarpicker/avatar-picker/image-editor","jquery"],function(t,a,e,r,i,n,c,s,v,o,d){"use strict";function f(t){var a=d(".jira-avatar-picker-trigger"),e=d(".jira-avatar-picker-trigger img, img.jira-avatar-picker-trigger",t),r=d(t).find("#avatar-picker-avatar-id"),i=d(t).find("#avatar-picker-iconurl"),n=d(t).find("#avatar-type");""!==n.text()&&s.createUniversalAvatarPickerDialog({trigger:a,title:d(t).find("#avatar-dialog-title").text(),projectId:d(t).find("#avatar-owner-id").text(),projectKey:d(t).find("#avatar-owner-key").text(),defaultAvatarId:d(t).find("#default-avatar-id").text(),initialSelection:r.val(),avatarSize:c.getSizeObjectFromName(d(t).find("#avatar-size").text()),avatarType:n.text(),select:function(t,a){e.attr("src",a),i.val(a),r.val(t.getId())}})}function l(a){var e=d(".jira-inline-avatar-picker-trigger",a);e.length&&new j({offsetTarget:e,projectId:d(a).find("#avatar-owner-id").text(),projectKey:d(a).find("#avatar-owner-key").text(),defaultAvatarId:d(a).find("#default-avatar-id").text(),alignment:t.LEFT,width:420,allowDownsize:!0})}var g=n.extend({init:function(t){this.avatarPicker=t},content:function(t){this.avatarPicker.render(function(a){t(d("<div />").html(a))})},cache:function(){return!1},isLocked:function(){},startingRequest:function(){},finishedRequest:function(){}}),j=i.extend({init:function(t){var a=this;this.avatarPicker=v.createProjectAvatarPicker({projectId:t.projectId,projectKey:t.projectKey,defaultAvatarId:t.defaultAvatarId,select:function(e,r,i){t.select&&t.select.apply(this,arguments),i||a.hide(),a.offsetTarget().attr("src",r),a.offsetTarget().trigger("AvatarSelected")}}),t.contentRetriever=new g(this.avatarPicker),d(this.avatarPicker.imageEditor).bind(o.LOADED,function(){a.setWidth(a.layer().attr("scrollWidth"))}),this._super(t);var e=this.offsetTarget(),r=d("<span class='jira-avatar-picker-trigger'></span>");r.insertBefore(e).append(e),this._assignEvents("offsetTarget",r)},_events:{offsetTarget:{click:function(t){this.show()}}}});a.bind(e.NEW_CONTENT_ADDED,function(t,a,e){e!==r.panelRefreshed&&(f(a),l(a))})});;
;
/* module-key = 'jira.webresources:avatar-picker-trigger', location = '/includes/jira/admin/init/init-avatar-picker.js' */
require("jira/admin/init/avatar-picker-trigger");;
;
/* module-key = 'jira.webresources:croneditor', location = '/includes/js/cron/croneditor.js' */
define("jira/util/cron",["exports"],function(n){n.hideCronEdit=function(n){document.getElementById(n).style.display="none"},n.showCronEdit=function(n){document.getElementById(n).style.display=""},n.toggleFrequencyControl=function(n,i){var e=document.getElementById(n+"interval");0==e.value?switchToOnce(n,i):switchToMany(n,i)},n.switchToOnce=function(n,i){hideCronEdit(n+"runMany"),showCronEdit(n+"runOnce"),i&&(timesOnce[n]=!0)},n.switchToMany=function(n,i){hideCronEdit(n+"runOnce"),showCronEdit(n+"runMany"),i&&(timesOnce[n]=!1)},n.switchToDaysOfMonth=function(n){hideCronEdit(n+"daysOfWeek"),showCronEdit(n+"daysOfMonth"),showCronEdit(n+"freqDiv"),hideCronEdit(n+"innerFreqDiv"),hideCronEdit(n+"advanced"),switchToOnce(n,!1)},n.switchToDaysOfWeek=function(n){showCronEdit(n+"daysOfWeek"),hideCronEdit(n+"daysOfMonth"),showCronEdit(n+"freqDiv"),showCronEdit(n+"innerFreqDiv"),hideCronEdit(n+"advanced"),switchToOriginal(n)},n.switchToDaily=function(n){hideCronEdit(n+"daysOfWeek"),hideCronEdit(n+"daysOfMonth"),showCronEdit(n+"freqDiv"),showCronEdit(n+"innerFreqDiv"),hideCronEdit(n+"advanced"),switchToOriginal(n)},n.switchToAdvanced=function(n){hideCronEdit(n+"daysOfWeek"),hideCronEdit(n+"daysOfMonth"),hideCronEdit(n+"runOnce"),hideCronEdit(n+"runMany"),hideCronEdit(n+"freqDiv"),showCronEdit(n+"advanced")},n.switchToOriginal=function(n){timesOnce[n]?switchToOnce(n,!1):switchToMany(n,!1)}}),AJS.namespace("hideCronEdit",null,require("jira/util/cron").hideCronEdit),AJS.namespace("showCronEdit",null,require("jira/util/cron").showCronEdit),AJS.namespace("toggleFrequencyControl",null,require("jira/util/cron").toggleFrequencyControl),AJS.namespace("switchToOnce",null,require("jira/util/cron").switchToOnce),AJS.namespace("switchToMany",null,require("jira/util/cron").switchToMany),AJS.namespace("switchToDaysOfMonth",null,require("jira/util/cron").switchToDaysOfMonth),AJS.namespace("switchToDaysOfWeek",null,require("jira/util/cron").switchToDaysOfWeek),AJS.namespace("switchToDaily",null,require("jira/util/cron").switchToDaily),AJS.namespace("switchToAdvanced",null,require("jira/util/cron").switchToAdvanced),AJS.namespace("switchToOriginal",null,require("jira/util/cron").switchToOriginal);;
;
/* module-key = 'jira.webresources:field-templates', location = 'includes/jira/field/templates/singleUserPicker.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),"undefined"==typeof JIRA.Templates.Fields.Pickers&&(JIRA.Templates.Fields.Pickers={}),"undefined"==typeof JIRA.Templates.Fields.Pickers.User&&(JIRA.Templates.Fields.Pickers.User={}),JIRA.Templates.Fields.Pickers.User.single=function(e,s){for(var t='<select id="'+soy.$$escapeHtml(e.field.id)+'" name="'+soy.$$escapeHtml(e.field.name)+'" class="single-user-picker js-'+(e.type?soy.$$escapeHtml(e.type):"default-user-picker")+'"'+(e.inputText?' data-input-text="'+soy.$$escapeHtml(e.inputText)+'"':"")+(e.editValue?' data-edit-value="'+soy.$$escapeHtml(e.editValue)+'"':"")+(e.showDropdownButton?' data-show-dropdown-button="true"':"")+(e.userType?' data-user-type="'+soy.$$escapeHtml(e.userType)+'"':"")+(e.containerClass?' data-container-class="'+soy.$$escapeHtml(e.containerClass)+'"':"")+">",a=e.options,l=a.length,o=0;o<l;o++){var i=a[o];if(i.optionGroup){t+='<optgroup id="'+soy.$$escapeHtml(e.field.id)+"-group-"+soy.$$escapeHtml(i.id)+'" label="'+soy.$$escapeHtml(i.display)+'"'+(i.footer?' data-footer-text="'+soy.$$escapeHtml(i.footer)+'"':"")+(i.weight!=-1?' data-weight="'+soy.$$escapeHtml(i.weight)+'"':"")+">";for(var p=i.groupOptions,d=p.length,r=0;r<d;r++){var n=p[r];t+=JIRA.Templates.Fields.Pickers.User.option(n)}t+="</optgroup>"}else t+=JIRA.Templates.Fields.Pickers.User.option(i)}return t+="</select>"},JIRA.Templates.Fields.Pickers.User.option=function(e,s){return"<option "+(e.loggedInUser?'class="current-user" ':"")+(e.selected?'selected="selected" ':"")+'value="'+soy.$$escapeHtml(e.optionName)+'" data-field-text="'+soy.$$escapeHtml(e.displayName)+'" data-field-label="'+soy.$$escapeHtml(e.displayName)+(e.emailAddress?" - "+soy.$$escapeHtml(e.emailAddress):"")+'" data-icon="'+soy.$$escapeHtml(e.avatarURL)+'" >'+soy.$$escapeHtml(e.displayName)+"</option>"};;
;
/* module-key = 'jira.webresources:field-templates', location = 'includes/jira/field/templates/assigneeField.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Fields&&(JIRA.Templates.Fields={}),"undefined"==typeof JIRA.Templates.Fields.Pickers&&(JIRA.Templates.Fields.Pickers={}),"undefined"==typeof JIRA.Templates.Fields.Pickers.User&&(JIRA.Templates.Fields.Pickers.User={}),JIRA.Templates.Fields.Pickers.User.assignee=function(e,s){return""+JIRA.Templates.Fields.Pickers.User.single(soy.$$augmentMap(e,{options:e.assigneeOptions.options,showDropdownButton:!0,userType:"assignee",type:"assignee-picker",containerClass:"long-field"}))+(e.isLoggedInUserAssignable?'<a href="#'+soy.$$escapeHtml(e.field.id)+'" id="assign-to-me-trigger">'+soy.$$escapeHtml("Assign to me")+"</a>":"")+'<fieldset class="hidden parameters"><input type="hidden" title="projectKeys" value="'+soy.$$escapeHtml(e.projectKeys)+'"/>'+(e.issueKey?'<input type="hidden" title="assigneeEditIssueKey" value="'+soy.$$escapeHtml(e.issueKey)+'"/>':"")+(e.actionDescriptorId?'<input type="hidden" title="actionDescriptorId" value="'+soy.$$escapeHtml(e.actionDescriptorId)+'"/>':"")+"</fieldset>"};;
;
/* module-key = 'jira.webresources:field-templates', location = '/includes/jira/field/templates/user-picker-template-wrapper.js' */
define("jira/field/user-picker/templates",[],function(){"use strict";return window.JIRA.Templates.Fields.Pickers.User});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/lib/jquery.dotdotdot-1.5.7.js' */
!function(t){function e(t,e,n){var o=t.children(),i=!1;t.empty();for(var d=0,a=o.length;d<a;d++){var l=o.eq(d);if(t.append(l),n&&t.append(n),r(t,e)){l.remove(),i=!0;break}n&&n.remove()}return i}function n(e,i,d,a,l){var u=e.contents(),f=!1;e.empty();for(var c="table, thead, tbody, tfoot, tr, col, colgroup, object, embed, param, ol, ul, dl, select, optgroup, option, textarea, script, style",s=0,h=u.length;s<h&&!f;s++){var p=u[s],g=t(p);"undefined"!=typeof p&&(e.append(g),l&&e[e.is(c)?"after":"append"](l),3==p.nodeType?r(d,a)&&(f=o(g,i,d,a,l)):f=n(g,i,d,a,l),f||l&&l.remove())}return f}function o(t,e,n,d,u){var f=!1,c=t[0];if("undefined"==typeof c)return!1;for(var s="letter"==d.wrap?"":" ",h=l(c).split(s),p=-1,g=-1,v=0,w=h.length-1;v<=w;){var m=Math.floor((v+w)/2);if(m==g)break;g=m,a(c,h.slice(0,g+1).join(s)+d.ellipsis),r(n,d)?w=g:(p=g,v=g)}if(p==-1||1==h.length&&0==h[0].length){var y=t.parent();t.remove();var b=u?u.length:0;if(y.contents().size()>b){var x=y.contents().eq(-1-b);f=o(x,e,n,d,u)}else{var c=y.prev().contents().eq(-1)[0];if("undefined"!=typeof c){var T=i(l(c),d);a(c,T),y.remove(),f=!0}}}else{var T=i(h.slice(0,p+1).join(s),d);f=!0,a(c,T)}return f}function r(t,e){return t.innerHeight()>e.maxHeight}function i(e,n){for(;t.inArray(e.slice(-1),n.lastCharacter.remove)>-1;)e=e.slice(0,-1);return t.inArray(e.slice(-1),n.lastCharacter.noEllipsis)<0&&(e+=n.ellipsis),e}function d(t){return{width:t.innerWidth(),height:t.innerHeight()}}function a(t,e){t.innerText?t.innerText=e:t.nodeValue?t.nodeValue=e:t.textContent&&(t.textContent=e)}function l(t){return t.innerText?t.innerText:t.nodeValue?t.nodeValue:t.textContent?t.textContent:""}function u(e,n){return"undefined"!=typeof e&&(!!e&&("string"==typeof e?(e=t(e,n),!!e.length&&e):"object"==typeof e&&("undefined"!=typeof e.jquery&&e)))}function f(t){for(var e=t.innerHeight(),n=["paddingTop","paddingBottom"],o=0,r=n.length;o<r;o++){var i=parseInt(t.css(n[o]),10);isNaN(i)&&(i=0),e-=i}return e}function c(t,e){return!!t&&(e="string"==typeof e?"dotdotdot: "+e:["dotdotdot:",e],"undefined"!=typeof window.console&&"undefined"!=typeof window.console.log&&window.console.log(e),!1)}if(!t.fn.dotdotdot){t.fn.dotdotdot=function(o){if(0==this.length)return o&&o.debug===!1||c(!0,'No element found for "'+this.selector+'".'),this;if(this.length>1)return this.each(function(){t(this).dotdotdot(o)});var i=this;i.data("dotdotdot")&&i.trigger("destroy.dot"),i.bind_events=function(){return i.bind("update.dot",function(o,d){o.preventDefault(),o.stopPropagation(),l.maxHeight="number"==typeof l.height?l.height:f(i),l.maxHeight+=l.tolerance,"undefined"!=typeof d&&(("string"==typeof d||d instanceof HTMLElement)&&(d=t("<div />").append(d).contents()),d instanceof t&&(a=d)),v=i.wrapInner('<div class="dotdotdot" />').children(),v.empty().append(a.clone(!0)).css({height:"auto",width:"auto",border:"none",padding:0,margin:0});var u=!1,c=!1;return h.afterElement&&(u=h.afterElement.clone(!0),h.afterElement.remove()),r(v,l)&&(c="children"==l.wrap?e(v,l,u):n(v,i,v,l,u)),v.replaceWith(v.contents()),v=null,t.isFunction(l.callback)&&l.callback.call(i[0],c,a),h.isTruncated=c,c}).bind("isTruncated.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(i[0],h.isTruncated),h.isTruncated}).bind("originalContent.dot",function(t,e){return t.preventDefault(),t.stopPropagation(),"function"==typeof e&&e.call(i[0],a),a}).bind("destroy.dot",function(t){t.preventDefault(),t.stopPropagation(),i.unwatch().unbind_events().empty().append(a).data("dotdotdot",!1)}),i},i.unbind_events=function(){return i.unbind(".dot"),i},i.watch=function(){if(i.unwatch(),"window"==l.watch){var e=t(window),n=e.width(),o=e.height();e.bind("resize.dot"+h.dotId,function(){n==e.width()&&o==e.height()&&l.windowResizeFix||(n=e.width(),o=e.height(),g&&clearInterval(g),g=setTimeout(function(){i.trigger("update.dot")},10))})}else p=d(i),g=setInterval(function(){var t=d(i);p.width==t.width&&p.height==t.height||(i.trigger("update.dot"),p=d(i))},100);return i},i.unwatch=function(){return t(window).unbind("resize.dot"+h.dotId),g&&clearInterval(g),i};var a=i.contents(),l=t.extend(!0,{},t.fn.dotdotdot.defaults,o),h={},p={},g=null,v=null;return h.afterElement=u(l.after,i),h.isTruncated=!1,h.dotId=s++,i.data("dotdotdot",!0).bind_events().trigger("update.dot"),l.watch&&i.watch(),i},t.fn.dotdotdot.defaults={ellipsis:"... ",wrap:"word",lastCharacter:{remove:[" ",",",";",".","!","?"],noEllipsis:[]},tolerance:0,callback:null,after:null,height:null,watch:!1,windowResizeFix:!0,debug:!1};var s=1,h=t.fn.html;t.fn.html=function(t){return"undefined"!=typeof t?this.data("dotdotdot")&&"function"!=typeof t?this.trigger("update",[t]):h.call(this,t):h.call(this)};var p=t.fn.text;t.fn.text=function(e){if("undefined"!=typeof e){if(this.data("dotdotdot")){var n=t("<div />");return n.text(e),e=n.html(),n.remove(),this.trigger("update",[e])}return p.call(this,e)}return p.call(this)}}}(require("jquery"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/soy/ProjectTemplatesList.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ProjectTemplates&&(JIRA.Templates.ProjectTemplates={}),JIRA.Templates.ProjectTemplates.renderProjectTemplates=function(e,t){return""+(0==soy.$$getMapKeys(e.projectTemplates).length?JIRA.Templates.errorMsg({closeable:!1,msg:"No project templates could be found."}):JIRA.Templates.ProjectTemplates.renderTemplates(e))},JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType=function(e,t){var a="";if(0==e.projectTemplatesByType.length)a+=JIRA.Templates.errorMsg({closeable:!1,msg:"No project templates could be found."});else for(var s=e.projectTemplatesByType,p=s.length,l=0;l<p;l++){var m=s[l];a+='<div class="template-group" id="project-template-group-'+soy.$$escapeHtml(m.projectTypeBean.projectTypeKey)+'"><div class="template-group-header"><h6><img class="project-type-icon" src="data:image/svg+xml;base64, '+soy.$$escapeHtml(m.projectTypeBean.icon)+' "/><span>'+soy.$$escapeHtml(m.projectTypeBean.projectTypeDisplayKey)+"</span></h6></div>"+JIRA.Templates.ProjectTemplates.renderTemplates({projectTemplates:m.projectTemplates,projectTypeKey:m.projectTypeBean.projectTypeKey})+"</div>"}return a},JIRA.Templates.ProjectTemplates.renderTemplates=function(e,t){return'<div class="pt-templates-list">'+JIRA.Templates.ProjectTemplates.renderItems(e)+"</div>"},JIRA.Templates.ProjectTemplates.renderItems=function(e,t){var a='<ol class="templates" tabindex="100">',s=4;if(e.projectTemplates.length>s&&"business"==e.projectTypeKey)a+=JIRA.Templates.ProjectTemplates.renderBusinessTemplatesWithViewMoreTemplate({templates:e.projectTemplates,maxItemsWithoutViewMoreLink:s});else for(var p=e.projectTemplates,l=p.length,m=0;m<l;m++){var o=p[m];a+=JIRA.Templates.ProjectTemplates.renderItem({templateItem:o})}return a+="</ol>"},JIRA.Templates.ProjectTemplates.renderItem=function(e,t){return'<li class="template '+(e.additionalClasses?soy.$$escapeHtml(e.additionalClasses):"")+'"'+(e.templateItem.itemModuleCompleteKey?'data-item-module-complete-key="'+soy.$$escapeHtml(e.templateItem.itemModuleCompleteKey)+'"':"")+(e.templateItem.projectTemplateModuleCompleteKey?'data-project-template-module-complete-key="'+soy.$$escapeHtml(e.templateItem.projectTemplateModuleCompleteKey)+'"':"")+(e.templateItem.createProject?'data-create-project="'+soy.$$escapeHtml(e.templateItem.createProject)+'"':"")+(e.templateItem.demoProject?'data-demo-project="'+soy.$$escapeHtml(e.templateItem.demoProject)+'"':"")+(e.templateItem.backgroundIconUrl?'data-background-icon-url="'+soy.$$escapeHtml(e.templateItem.backgroundIconUrl)+'"':"")+(e.templateItem.name?'data-name="'+soy.$$escapeHtml(e.templateItem.name)+'"':"")+(e.templateItem.description?'data-description="'+soy.$$escapeHtml(e.templateItem.description)+'"':"")+(e.templateItem.longDescriptionContent?'data-long-description-content="'+soy.$$escapeHtml(e.templateItem.longDescriptionContent)+'"':"")+(e.templateItem.infoSoyPath?'data-info-soy-path="'+soy.$$escapeHtml(e.templateItem.infoSoyPath)+'"':"")+(e.templateItem.projectTypeKey?'data-project-type="'+soy.$$escapeHtml(e.templateItem.projectTypeKey)+'"':"")+'><img class="template-preview" src="'+soy.$$escapeHtml(e.templateItem.iconUrl)+'" /><div class="template-meta"><div class="template-name">'+soy.$$escapeHtml(e.templateItem.name)+'</div><div class="template-description">'+soy.$$escapeHtml(e.templateItem.description)+"</div></div></li>"},JIRA.Templates.ProjectTemplates.renderBusinessTemplatesWithViewMoreTemplate=function(e,t){for(var a="",s=e.templates.length,p=0;p<s;p++){var l=e.maxItemsWithoutViewMoreLink-1;a+=JIRA.Templates.ProjectTemplates.renderItem({templateItem:e.templates[p],additionalClasses:""+(p>=l?"more-business-templates":"")})}return a+=JIRA.Templates.ProjectTemplates.renderViewMoreBusinessTemplatesItem(null)},JIRA.Templates.ProjectTemplates.renderViewMoreBusinessTemplatesItem=function(e,t){var a="",s="More project templates",p="Choose from other project types, such as content management or recruitment.";return a+='<li id="view-more-business-templates" class="template"><div class="template-preview"></div><div class="template-meta"><div class="template-name">'+soy.$$escapeHtml(s)+'</div><div class="template-description">'+soy.$$escapeHtml(p)+"</div></div></li>"},JIRA.Templates.ProjectTemplates.loadingTemplatesList=function(e,t){return'<div class="wait-container"><img class="wait-icon" src="'+soy.$$escapeHtml(AJS.contextPath())+'/images/icons/wait.gif"><span class="wait-text">'+soy.$$escapeHtml("Loading project templates")+"&hellip;</span></div>"},JIRA.Templates.ProjectTemplates.footerLinks=function(e,t){return'<div class="footer-links">'+(e.projectImportAvailable?'<a class="import-project-trigger button-panel-link" href="'+soy.$$escapeHtml(AJS.contextPath())+'/secure/admin/views/ExternalImport1.jspa">'+soy.$$escapeHtml("Import a project")+"</a>|":"")+'<a class="create-with-shared-config button-panel-link" href="#"><span class="aui-icon aui-icon-create-shared">'+soy.$$escapeHtml("Create with shared configuration")+"</span> "+soy.$$escapeHtml("Create with shared configuration")+"</a>"+(e.showDemoLink&&e.projectImportAvailable?'| <a class="add-demo-project-trigger button-panel-link" href="#">'+soy.$$escapeHtml("Create sample data")+"</a>":"")+"</div>"},JIRA.Templates.ProjectTemplates.addWorkflowsLink=function(e,t){return'<a class="add-workflow-link" href="'+soy.$$escapeHtml(e.baseUrl)+'/plugins/servlet/wfshare-import?src=projecttemplates" tabindex="-1">'+soy.$$escapeHtml("View Marketplace Workflows")+"</a>"};;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/soy/AddProject.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ProjectTemplates&&(JIRA.Templates.ProjectTemplates={}),JIRA.Templates.ProjectTemplates.addProjectForm=function(e,t){var r=""+(e.warnUserUnableToAccessApplication?JIRA.Templates.ProjectTemplates.warnApplicationAccess(e):"");if(e.errors.errorMessages)for(var a=e.errors.errorMessages,o=a.length,i=0;i<o;i++){var s=a[i];r+=JIRA.Templates.errorMsg({closeable:!1,msg:s})}return r+='<div class="add-project-wrapper"><div class="add-project-form-wrapper">'+aui.form.form({content:""+aui.form.fieldset({legendContent:"",content:""+JIRA.Templates.ProjectTemplates.longTextField({id:"name",name:"name",isRequired:!1,maxLength:e.maxNameLength,labelContent:"Name",descriptionText:AJS.format("Max. {0} characters.",e.maxNameLength),value:e.currentName?e.currentName:"",errorTexts:e.errors.errors.projectName?[e.errors.errors.projectName]:[]})+JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon({id:"key",name:"key",isRequired:!1,maxLength:e.maxKeyLength,labelContent:"Key",descriptionText:AJS.format("Max. {0} characters.",e.maxKeyLength),helpTitle:"What\'s a project key?",value:e.currentKey?e.currentKey:"",errorTexts:e.errors.errors.projectKey?[e.errors.errors.projectKey]:[]})+(e.shouldShowLead?JIRA.Templates.ProjectTemplates.projectLeadField({field:e.projectLeadPickerField,isRequired:!1,errorTexts:e.errors.errors.projectLead?[e.errors.errors.projectLead]:[],options:e.leadOptions}):"")+'<input type="hidden" name="keyEdited" id="keyEdited" value="false"><input type="hidden" name="projectTemplateWebItemKey" value="'+soy.$$escapeHtml(e.projectTemplateWebItemKey)+'"><input type="hidden" name="projectTemplateModuleKey" value="'+soy.$$escapeHtml(e.projectTemplateModuleKey)+'"><input type="submit" class="pt-hidden-submit offscreen-left">'}),id:"add-project-form"})+"</div>"+(e.projectTemplateDescriptionContent?'<div class="add-project-description-wrapper"><div class="project-template-title"><h3>'+soy.$$escapeHtml(e.projectTemplateTitle)+'</h3></div><div class="project-template-description">'+soy.$$filterNoAutoescape(e.projectTemplateDescriptionContent)+"</div></div>":"")+"</div>"},JIRA.Templates.ProjectTemplates.keyHelp=function(e,t){return'<div class="project-key-help"><h6>'+soy.$$escapeHtml("PROJECT KEY")+"</h6><p>"+soy.$$filterNoAutoescape("The project key is a unique code that distinguishes a project from another.\u003cbr/\u003eIt also prefixes all issues in the project.")+"</p></div>"},JIRA.Templates.ProjectTemplates.projectLeadField=function(e,t){var r=""+aui.form.label({forField:e.field.name+"-field",isRequired:e.isRequired,content:"Project lead"})+JIRA.Templates.Fields.Pickers.User.single({field:e.field,options:e.options,editValue:e.value})+aui.form.fieldDescription({message:"Enter the username of the project lead."});if(e.errorTexts)for(var a=e.errorTexts,o=a.length,i=0;i<o;i++){var s=a[i];r+=aui.form.fieldError({message:s})}var n=""+aui.form.fieldGroup({content:r});return n},JIRA.Templates.ProjectTemplates.warnApplicationAccess=function(e,t){var r="",a=""+JIRA.Templates.Links.basicHelpLink({url:"/admin/apps",desc:"Update your access",title:"Update your access",isLocal:!1}),o=""+(null!=e.applicationName&&e.applicationName.length>2?soy.$$filterNoAutoescape(AJS.format("Uh-oh. You can create this project, but it won\'\'t be fully functional until you have the right access for {0}. {1} now or contact your site administrator.",e.applicationName,a)):soy.$$filterNoAutoescape(AJS.format("Uh-oh. You can create this project, but it won\'\'t be fully functional until you have the right access for this application. {0} now or contact your site administrator.",a)));return r+=aui.message.hint({id:"project-create-admin-access-error",content:""+soy.$$filterNoAutoescape(o)})},JIRA.Templates.ProjectTemplates.textFieldWithHelpIcon=function(e,t){var r=""+aui.form.label({forField:e.name,isRequired:e.isRequired,content:e.labelContent})+aui.form.input({id:e.id,name:e.name,type:"text",maxLength:e.maxLength,value:e.value})+'<a class="help-lnk" title="'+soy.$$escapeHtml(e.helpTitle)+'" id="'+soy.$$escapeHtml(e.id)+'-help-icon"><span class="aui-icon aui-icon-help">'+soy.$$escapeHtml(e.helpTitle)+"</span></a>"+(e.descriptionText?aui.form.fieldDescription({message:e.descriptionText}):"");if(e.errorTexts)for(var a=e.errorTexts,o=a.length,i=0;i<o;i++){var s=a[i];r+=aui.form.fieldError({message:s})}var n=""+aui.form.fieldGroup({content:r});return n},JIRA.Templates.ProjectTemplates.longTextField=function(e,t){var r=""+aui.form.label({forField:e.name,isRequired:e.isRequired,content:e.labelContent})+aui.form.input({id:e.id,name:e.name,type:"text",maxLength:e.maxLength,value:e.value,extraClasses:"long-field"})+(e.descriptionText?aui.form.fieldDescription({message:e.descriptionText}):"");if(e.errorTexts)for(var a=e.errorTexts,o=a.length,i=0;i<o;i++){var s=a[i];r+=aui.form.fieldError({message:s})}var n=""+aui.form.fieldGroup({content:r});return n},JIRA.Templates.ProjectTemplates.spinner=function(e,t){return"<span id='"+soy.$$escapeHtml(e.id)+"' class='icon throbber loading'></span>"},JIRA.Templates.ProjectTemplates.formatAnchor=function(e,t){return'<a href="'+soy.$$escapeHtml(e.href)+'"'+(e.title?' title="'+soy.$$escapeHtml(e.title)+'"':"")+">"+soy.$$escapeHtml(e.body)+"</a>"};;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/soy/CreateSharedProject.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ProjectTemplates&&(JIRA.Templates.ProjectTemplates={}),JIRA.Templates.ProjectTemplates.createSharedProjectForm=function(e,t){return'<div class="create-shared-project-wrapper"><div class="create-shared-project-form-wrapper">'+aui.form.form({content:""+aui.form.fieldset({content:"<p>"+soy.$$escapeHtml("Select the existing project that you\'d like to share configurations with.")+'<a class="help-lnk" title="'+soy.$$escapeHtml("What will be shared?")+'" id="shared-help-icon"><span class="aui-icon aui-icon-help">'+soy.$$escapeHtml("What will be shared?")+"</span></a></p>"+aui.form.fieldGroup({extraClasses:"project-picker-group",content:""+aui.form.label({forField:"project-picker",isRequired:!1,content:"Choose a project"})+aui.form.input({id:"project-picker",name:"project",type:"text"})+'<div id="project-picker-options" data-suggestions="'+soy.$$escapeHtml(e.projectSuggestions)+'"></div>'})+'<p class="create-shared-info">'+soy.$$escapeHtml("When a configuration is shared with several projects, it means that any changes made to the configuration will affect all the projects.")+"</p>"}),id:"create-shared-project-form"})+"</div></div>"},JIRA.Templates.ProjectTemplates.loading=function(e,t){return'<div><div class="dialog-spinner"></div></div>'},JIRA.Templates.ProjectTemplates.noProjects=function(e,t){return"<p>"+soy.$$escapeHtml("Looks like no other projects exist yet. Please create a brand new project first before trying to share an existing project\'s configuration.")+"</p>"},JIRA.Templates.ProjectTemplates.sharedHelp=function(e,t){return'<div class="shared-help"><p><strong>'+soy.$$escapeHtml("What will be shared?")+"</strong></p><p>"+soy.$$escapeHtml("Configuration refers to the set of schemes used by a project")+"</p><ul><li>"+soy.$$escapeHtml("Permission Scheme")+"</li><li>"+soy.$$escapeHtml("Notification Scheme")+"</li><li>"+soy.$$escapeHtml("Issue Security Scheme")+"</li><li>"+soy.$$escapeHtml("Workflow Scheme")+"</li><li>"+soy.$$escapeHtml("Issue Type Scheme")+"</li><li>"+soy.$$escapeHtml("Issue Type Screen Scheme")+"</li><li>"+soy.$$escapeHtml("Field Configuration Scheme")+"</li></ul></div>"};;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/config.js' */
define("jira/project-templates/config",{model:{}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/project-key-generator.js' */
define("jira/project-templates/project-key-generator",["jquery","underscore"],function(A,e){var R={};return R.IGNORED_WORDS=["THE","A","AN","AS","AND","OF","OR"],R.CHARACTER_MAP={},R.CHARACTER_MAP[199]="C",R.CHARACTER_MAP[231]="c",R.CHARACTER_MAP[252]="u",R.CHARACTER_MAP[251]="u",R.CHARACTER_MAP[250]="u",R.CHARACTER_MAP[249]="u",R.CHARACTER_MAP[233]="e",R.CHARACTER_MAP[234]="e",R.CHARACTER_MAP[235]="e",R.CHARACTER_MAP[232]="e",R.CHARACTER_MAP[226]="a",R.CHARACTER_MAP[228]="a",R.CHARACTER_MAP[224]="a",R.CHARACTER_MAP[229]="a",R.CHARACTER_MAP[225]="a",R.CHARACTER_MAP[239]="i",R.CHARACTER_MAP[238]="i",R.CHARACTER_MAP[236]="i",R.CHARACTER_MAP[237]="i",R.CHARACTER_MAP[196]="A",R.CHARACTER_MAP[197]="A",R.CHARACTER_MAP[201]="E",R.CHARACTER_MAP[230]="ae",R.CHARACTER_MAP[198]="Ae",R.CHARACTER_MAP[244]="o",R.CHARACTER_MAP[246]="o",R.CHARACTER_MAP[242]="o",R.CHARACTER_MAP[243]="o",R.CHARACTER_MAP[220]="U",R.CHARACTER_MAP[255]="Y",R.CHARACTER_MAP[214]="O",R.CHARACTER_MAP[241]="n",R.CHARACTER_MAP[209]="N",R.desiredKeyLength=4,R.maxKeyLength=10,R.getTotalLength=function(A){return A.join("").length},R.removeIgnoredWords=function(C){return e.reject(C,function(e){return A.inArray(e,R.IGNORED_WORDS)!==-1})},R.createAcronym=function(e){var R="";return A.each(e,function(A,e){R+=e.charAt(0)}),R},R.getFirstSyllable=function(A){var e,C=!1;for(e=0;e<A.length;e++)if(R.isVowelOrY(A[e]))C=!0;else if(C)return A.substring(0,e+1);return A},R.isVowelOrY=function(A){return A&&1===A.length&&A.search("[AEIOUY]")!==-1},R.init=function(A,e){R.desiredKeyLength=A,R.maxKeyLength=e},R.generate=function(e){if(e=A.trim(e),!e)return"";for(var C=[],r=0,n=e.length;r<n;r++){var t=R.CHARACTER_MAP[e.charCodeAt(r)];C.push(t?t:e[r])}e=C.join("");var i=[];A.each(e.split(/\s+/),function(A,e){e&&(e=e.replace(/[^a-zA-Z]/g,""),e=e.toUpperCase(),e.length&&i.push(e))}),R.desiredKeyLength&&R.getTotalLength(i)>R.desiredKeyLength&&(i=R.removeIgnoredWords(i));var E;if(0==i.length)E="";else if(1==i.length){var a=i[0];E=R.desiredKeyLength&&a.length>R.desiredKeyLength?R.getFirstSyllable(a):a}else E=R.createAcronym(i);return R.maxKeyLength&&E.length>R.maxKeyLength&&(E=E.substr(0,R.maxKeyLength)),E},R});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/dialog-view.js' */
define("jira/project-templates/dialog-view",["jira/project-templates/dialog-view-impl","jquery"],function(e,i){return new e({el:i(document)})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/dialog-view-impl.js' */
define("jira/project-templates/dialog-view-impl",["require","backbone","underscore"],function(e,t,o){var i=AJS.Dialog,r=AJS.trigger;return t.View.extend({events:{"click   .add-project-trigger":"_onClickAddProject","click   .add-demo-project-trigger":"_onClickAddDemoProject","click   .add-workflow-link":"_onClickViewMarketplaceWorkflows","click   #add-project-dialog .add-demo-project-trigger":"_onCreateProjectAddDemoProjectClick","click   #add-project-dialog .import-project-trigger":"_onClickImportProject","click   #add-project-dialog .create-with-shared-config":"_onClickCreateShared","keydown #add-project-dialog .pt-templates-list":"_onKeydownInTemplatesList"},initialize:function(){JIRA.API&&JIRA.API.getSidebar&&JIRA.API.getSidebar().then(function(e){e.on(e.events.JIRA_SUMMON_CREATE_PROJECT_DIALOG,function(){this.getDialogController().handleProjectTemplateTriggered()}.bind(this),!0)}.bind(this))},draw:function(){var e=new i({width:840,height:400,id:"add-project-dialog",closeOnOutsideClick:!1,keypressListener:o.bind(this._onKeyPressed,this)}),t=e.popup.element;return e.addPage("project-templates-page"),e.addHeader("Create project","add-project-dialog-header"),e.addPanel("ProjectTemplatesListPanel",JIRA.Templates.ProjectTemplates.loadingTemplatesList(),"pt-content"),this._dialog=e,this._$dialogElement=t,e.show(),e},remove:function(){this._dialog&&this._dialog.remove()},showErrorMessage:function(e){this._dialog.getPanel(1,0).html(JIRA.Templates.errorMsg({closable:!1,msg:e}))},get$PTContent:function(){return this.getDialogController().$dialogElement.find(".pt-content")},_onKeyPressed:function(e){var t=27;return!this._dialog||e.keyCode!==t||(this.getDialogController().hideDialogFromNewUser("dismissed"),this._dialog.remove(),!1)},_onKeydownInTemplatesList:function(e){var t=13;return!this._dialog||e.keyCode!==t||(this._$dialogElement.find(".pt-submit-button:visible").click(),!1)},_onClickAddProject:function(e){e.preventDefault(),this.getDialogController().handleProjectTemplateTriggered()},_onCreateProjectAddDemoProjectClick:function(){r("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.create.project.clicked"})},_onClickViewMarketplaceWorkflows:function(){r("analyticsEvent",{name:"jira.project.templates.dialog.create.viewmarketplaceworkflows.clicked"})},_onClickAddDemoProject:function(e){e.preventDefault();var t=this.getDialogController().dialog;t&&t.popup&&t.popup.element&&t.remove(),this.getDialogController().handleDemoProjectTemplateTriggered()},_onClickImportProject:function(e){this.getDialogController().hideDialogFromNewUser("importproject")},_onClickCreateShared:function(e){this.getDialogController().handleCreateShared()},getDialogController:function(){return e("jira/project-templates/dialog-controller")}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/dialog-controller.js' */
define("jira/project-templates/dialog-controller",["jira/project-templates/dialog-view","jira/project-templates/config","jira/ajs/ajax/smart-ajax","jira/util/data/meta","jira/lib/class","jquery","underscore","wrm/data"],function(e,t,a,i,o,r,n,l){function d(e,t){AJS.trigger("analyticsEvent",{name:e,data:t})}var s,c=AJS.contextPath(),m=AJS.isDevMode,p=AJS.log,u=function(){return s||(s=l.claim("com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources.ptAnalyticsData")||{}),s},h=o.extend({WELCOME_REST_URL:c+"/rest/welcome/1.0/show/welcome",onboarding:{isOptimusPrimeOnboarding:!1},initialize:function(){n.bindAll(this,"handleProjectTemplateTriggered","hideDialogFromNewUser"),i.getBoolean("show-welcome-screen")&&this.handleProjectTemplateTriggered()},handleProjectTemplateTriggered:function(e){e&&e.onboarding&&(this.onboarding=e.onboarding),this.demoProject=!1,d("jira.project.templates.dialog.create.show"),this.openWithFirstProjectTemplateOfTypePreSelected()},handleDemoProjectTemplateTriggered:function(e){e&&e.onboarding&&(this.onboarding=e.onboarding),this.demoProject=!0;var t=this.getTemplateController().loadDemoProjectTemplatesData();this.openWithFirstProjectTemplateOfTypePreSelected(null,t),this._addAnalyticsToCreateDemoShow(t)},_addAnalyticsToCreateDemoShow:function(e){e.done(function(e){var t={},a=function(e){return e.projectTemplatesGroupedByType.map(function(e){return e.projectTemplates.map(function(e){return e.itemModuleCompleteKey}).join()}).join()};t.demoSets=a(e),t.instanceCreatedDate=u().instanceCreatedDate,d("jira.project.templates.dialog.create.demo.show",t)}.bind(this))},openWithFirstProjectTemplateOfTypePreSelected:function(a,i){var o=this.onboarding;i=i||this.getTemplateController().loadProjectTemplatesData(),this.dialog=e.draw(),i.fail(n.bind(function(e){this._handleUnknownErrorOfPTRetrieval()},this)),i.done(function(e){this.$dialogElement=this.dialog.popup.element;var i;n.isUndefined(t.model.selectedTemplate)||(i=t.model.selectedTemplate),t.model=e,t.model.selectedTemplate=i,this.getTemplateController().init(e,a,o)}.bind(this))},handleCreateShared:function(){d("jira.project.templates.dialog.create.shared.clicked"),this.demoProject=!1,this.openWithCreateShared()},openWithCreateShared:function(){var e=require("jira/project-templates/create-shared-controller");e.initCreateShared()},callbackWithResize:function(e){return n.bind(n.wrap(e,function(e){e.call(this),this.dialog.updateHeight()}),this)},addPage:function(e){var t=this.dialog.addPage(e.name).page[this.dialog.curpage];this.dialog.addHeader(e.title,"add-project-dialog-header"),this.dialog.addPanel(e.panelName,"","pt-content"),e.backButton&&this._addBackButton(t,{panelName:e.panelName}),this.dialog.addButton(e.submitButtonText,this.callbackWithResize(e.submitButtonCallback),e.submitButtonClass+" pt-submit-button");var a=this.$dialogElement.find("."+e.submitButtonClass);return a.removeClass("button-panel-button").addClass("aui-button aui-button-primary"),a.focus(),this.onboarding.isOptimusPrimeOnboarding||this.dialog.addCancel("Cancel",n.bind(function(e){this.hideDialogFromNewUser("dismissed"),this.dialog.remove()},this)),t},_backButtonOnClickCallback:function(t,a){if(this.onboarding.isOptimusPrimeOnboarding&&"ProjectTemplatesListPanel"===a.panelName){var i=function(){this.dialog.remove()}.bind(this);return i}return n.bind(function(){d(this.demoProject?"jira.project.templates.dialog.demo.back":"jira.project.templates.dialog.create.back");var a=e.get$PTContent();a.css("background-image","none"),this.dialog.prevPage(),t.remove(),this.dialog.page.pop()},this)},_addBackButton:function(e,t){this.dialog.addButton("Back",this.callbackWithResize(this._backButtonOnClickCallback(e,t)),"add-project-back-button");var a=this.$dialogElement.find(".add-project-back-button");a.removeClass("button-panel-button").addClass("aui-button")},_handleUnknownErrorOfPTRetrieval:function(){e.showErrorMessage("An error occurred while trying to contact Jira")},hideDialogFromNewUser:function(e){"dismissed"===e?d(this.demoProject?"jira.project.templates.dialog.demo.dismissed":"jira.project.templates.dialog.create.dismissed"):"importproject"===e?d("jira.project.templates.dialog.import.clicked"):"templateselected"===e&&d(this.demoProject?"jira.project.templates.dialog.demo.templateselected":"jira.project.templates.dialog.create.templateselected"),i.getBoolean("show-welcome-screen")&&r.ajax({url:this.WELCOME_REST_URL+"/"+e,type:"DELETE",success:function(){m&&m()&&p("don't show project template dialog anymore")}})},getTemplateController:function(){return require("jira/project-templates/select-project-template-controller")}});return new h});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/add-project-view.js' */
define("jira/project-templates/add-project-view",["jira/project-templates/add-project-view-impl","jira/project-templates/dialog-view","jquery"],function(e,t,i){return new e({el:i(document),dialogView:t})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/add-project-view-impl.js' */
define("jira/project-templates/add-project-view-impl",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/util/events","jira/util/events/types","require","backbone","jquery","underscore"],function(e,t,n,i,a,r,o,l){var d=AJS.InlineDialog;return r.View.extend({TIMEOUT_MS:100,postDrawCallbacks:[],events:{"submit #add-project-form":"onSubmitForm"},page:void 0,isSubmitting:!1,initialize:function(e){l.bindAll(this,"bindHook")},addPostDrawCallback:function(e){this.postDrawCallbacks.push(e)},prepareDialog:function(t){this.page=e.addPage({name:"add-project",title:t,panelName:"add-project",backButton:!0,submitButtonText:"Submit",submitButtonCallback:this.onSubmitForm.bind(this),submitButtonClass:"add-project-dialog-create-button"})},draw:function(r){function s(e){return e.errors||(e.errors={}),e}this.isSubmitting=!1,e.dialog.gotoPage(this.page.id);var m=r.webItemData.projectTemplateModuleCompleteKey||r.webItemData.itemModuleCompleteKey,c=l.find(t.model.projectTemplatesGroupedByType,function(e){return l.any(e.projectTemplates,function(e){return e.itemModuleCompleteKey===m})}),u=c&&c.applicationInfo||{},p={maxNameLength:t.model.maxNameLength,maxKeyLength:t.model.maxKeyLength,shouldShowLead:t.model.shouldShowProjectLead,projectTemplateWebItemKey:t.model.selectedTemplate||r.webItemData.itemModuleCompleteKey,projectTemplateModuleKey:m,projectTemplateTitle:r.webItemData.name,projectTemplateDescriptionContent:r.webItemData.longDescriptionContent,currentKey:r.currentKey||"",currentName:r.currentName||"",errors:s(r.errors),projectLeadPickerField:{id:"lead",name:"lead"},leadOptions:[{selected:!0,displayName:r.currentUserDisplayName,optionName:r.currentUserName,avatarURL:r.currentUserAvatarUrl}],applicationName:u.applicationName||"",warnUserUnableToAccessApplication:!u.canUserUseApplication},h=JIRA.Templates.ProjectTemplates.addProjectForm(p);if(e.dialog.getPanel(this.page.id,0).html(h),r.webItemData&&r.webItemData.backgroundIconUrl){var f=e.$dialogElement.find(".pt-content");f.css("background-image",'url("'+r.webItemData.backgroundIconUrl+'")')}var g=o("#add-project-form");n.trigger(i.NEW_CONTENT_ADDED,[g]),this.nameElement=e.$dialogElement.find("#name"),this.keyElement=e.$dialogElement.find("#key"),this.keyEditedElement=e.$dialogElement.find("#keyEdited"),this.leadDisplayElement=e.$dialogElement.find("#lead-field"),this.leadValueElement=e.$dialogElement.find("#lead");var b=this.keyElement.parent().find(".aui-icon-help");b.length&&new d(b,"project-key-help-popup",function(e,t,n){e.html(JIRA.Templates.ProjectTemplates.keyHelp()),n()},{width:280,gravity:"w"}),this.keyElement.attr("style","text-transform: uppercase");var E=a("jira/project-templates/add-project-controller");this.nameElement.focus(l.bind(function(e){this.bindHook(e,E.nameTimeout)},this));var y=this;this.nameElement.change(function(e){E.validateName(),y.unbindHook(e)}),this.nameElement.focus(),this.keyElement.focus(l.bind(function(e){var t=o(e.target);t.data("lastValue",t.val()),this.bindHook(e,E.keyTimeout)},this)),this.keyElement.blur(l.bind(function(e){this.unbindHook(e)},this)),this.keyElement.change(function(){E.validateKey(),E.autofillKeyIfNeeded()}),l.isEmpty(this.postDrawCallbacks)||l.each(this.postDrawCallbacks,function(e){e({projectType:r&&r.webItemData&&(r.webItemData.projectTemplateModuleCompleteKey||r.webItemData.itemModuleCompleteKey)})}),e.dialog.updateHeight()},onSubmitForm:function(e){var t=a("jira/project-templates/add-project-controller");return t.submit(),!1},get$SubmitButton:function(){return e.$dialogElement.find(".add-project-dialog-create-button")},get$BackButton:function(){return e.$dialogElement.find(".add-project-back-button")},bindHook:function(e,t){var n=o(e.target),i=l.bind(function(){this.unbindHook(e),t.apply(),n.is(":visible")&&n.data("checkHook",setTimeout(i,this.TIMEOUT_MS))},this);n.data("checkHook")||n.data("checkHook",setTimeout(i,0))},unbindHook:function(e){var t=o(e.target);clearTimeout(t.data("checkHook")),t.removeData("checkHook")},showInlineError:function(e,t){if(!this.isSubmitting){var n=e.parent().find(".error");n.length||(n=o("<div class='error'></div>"),e.parent().append(n)),n.text(t),n.show()}},showInlineErrorForName:function(e){this.showInlineError(this.nameElement,e)},showInlineErrorForKey:function(e){this.showInlineError(this.keyElement,e)},hideInlineError:function(e){e.parent().find(".error").hide()},hideInlineErrorForName:function(){this.hideInlineError(this.nameElement)},hideInlineErrorForKey:function(){this.hideInlineError(this.keyElement)},setName:function(e){this.nameElement.val(e)},getName:function(){return this.nameElement.val()},setKey:function(e){this.keyElement.val(e)},getKey:function(){return this.keyElement.val().toUpperCase()},getLeadDisplayName:function(){return this.leadDisplayElement.val()},getLeadUserName:function(){return this.leadValueElement.val()},getAvatarUrlOfSelectedLead:function(){var t=e.$dialogElement.find("#lead-single-select .aui-ss-entity-icon").css("background-image");if(l.isUndefined(t))return"";var n=t.match(/^url\((.+)\)$/);return n&&n[1]?n[1]:""},setKeyEdited:function(e){this.keyEditedElement.val(e)},getKeyEdited:function(){return this.keyEditedElement.val()},setKeyEdited:function(){var e=this.getKey();this.keyElement.data("lastValue")!==e&&this.keyEditedElement.val(e?"true":"false"),this.keyElement.data("lastValue",e)},hasNameErrors:function(){return this.nameElement.parent().find(".error").size()>0},getAddProjectForm:function(){return o("#add-project-form")},get$FormFields:function(){return e.$dialogElement.find(":input")},enterLoadingState:function(){var e=this.get$SubmitButton();if(e.attr("disabled"))return!1;var t=this.get$BackButton();return e.attr("disabled","disabled"),t.attr("disabled","disabled"),t.before(JIRA.Templates.ProjectTemplates.spinner({id:"addproject-loading"})),this.get$FormFields().attr("disabled","disabled"),this.isSubmitting=!0,!0},hideLoadingState:function(){e.$dialogElement.find("#addproject-loading").remove(),this.get$SubmitButton().removeAttr("disabled"),this.get$BackButton().removeAttr("disabled"),this.get$FormFields().removeAttr("disabled")},avoidDirtyFormWarning:function(){o.fn.removeDirtyWarning&&this.getAddProjectForm().removeDirtyWarning()},hasInlineErrors:function(){return 0!==e.$dialogElement.find(".field-group .error:visible").length}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/add-project-controller.js' */
define("jira/project-templates/add-project-controller",["jira/project-templates/add-project-controller-impl","jquery"],function(e,r){return new e({el:r(document)})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/add-project-controller-impl.js' */
define("jira/project-templates/add-project-controller-impl",["jira/project-templates/add-project-view","jira/project-templates/project-key-generator","jira/project-templates/dialog-controller","jira/project-templates/config","jira/lib/class","jira/analytics/web-client","jira/featureflags/feature-manager","jquery","underscore"],function(e,t,r,a,i,o,s,n,c){var d=AJS.contextPath(),l=AJS.trigger;return i.extend({postProjectCreationCallbacks:[],projectKeyValidationCallbacks:[],projectNamesUpperCased:[],init:function(e){this._window=e.window||window,c.bindAll(this,"projectCreatedHandler","projectValidationFailedHandler","nameTimeout","keyTimeout","submit")},initCreateShared:function(e){this.existingProjectData=e,this._initAddProject("Create with shared configuration")},initProjectTemplate:function(e){this.existingProjectData=void 0,this.webItemData=e,this._initAddProject(e.name)},_initAddProject:function(r){this.desiredKeyLength=4,this.lastKeyValidated="",this._getExistingProjects(),t.init(this.desiredKeyLength,a.model.maxKeyLength),e.prepareDialog(r),e.draw({webItemData:this.webItemData||{},maxKeyLength:a.model.maxKeyLength,maxNameLength:a.model.maxNameLength,currentUserName:a.model.currentUserName,currentUserDisplayName:a.model.currentUserDisplayName,currentUserAvatarUrl:a.model.currentUserAvatarUrl,errors:{}})},_resetProjectLeadValues:function(){a.model.currentUserDisplayName="",a.model.currentUserName="",a.model.currentUserAvatarUrl=""},_hasFullyConfiguredProjectLead:function(){return e.getLeadDisplayName()&&""!=e.getAvatarUrlOfSelectedLead()},submit:function(t){var r;r=this.existingProjectData?{key:e.getKey(),name:e.getName(),lead:e.getLeadUserName()&&e.getLeadUserName()[0]}:jQuery.param(e.getAddProjectForm().serializeArray().map(function(e){return"key"===e.name&&(e.value=e.value.toUpperCase()),e})),e.hasInlineErrors()||e.enterLoadingState()&&(this._hasFullyConfiguredProjectLead()?(a.model.currentUserDisplayName=e.getLeadDisplayName(),a.model.currentUserName=a.model.currentUserDisplayName?e.getLeadUserName():"",a.model.currentUserAvatarUrl=e.getAvatarUrlOfSelectedLead()):this._resetProjectLeadValues(),this.existingProjectData?n.ajax({url:d+"/rest/project-templates/1.0/createshared/"+this.existingProjectData.existingProjectId,type:"POST",contentType:"application/json",data:JSON.stringify(r)}).then(this.projectCreatedHandler,this.projectValidationFailedHandler):n.ajax({url:d+(this.webItemData.demoProject?"/rest/jira-importers-plugin/1.0/demo/create":"/rest/project-templates/1.0/templates"),type:"POST",data:r,headers:{"X-Atlassian-Token":"no-check"}}).then(this.projectCreatedHandler,this.projectValidationFailedHandler))},registerPostProjectCreationCallback:function(e){this.postProjectCreationCallbacks.push(e)},registerProjectKeyValidationCallback:function(e){this.projectKeyValidationCallbacks.push(e)},localStoragePrefix:"jira.projecttemplates.",isSimplified:function(){return"com.pyxis.greenhopper.jira:simplified-project-template"===this.webItemData.projectTemplateModuleCompleteKey},projectCreatedHandler:function(t){this.existingProjectData?l("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.success"}):this.webItemData.demoProject?l("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.success"}):l("analyticsEvent",{name:"jira.project.templates.dialog.create.project.success"});var a={action:"created",source:"createProjectModal",actionSubject:"project",containerType:"project",containerId:String(t.projectId),attributes:{}};this.existingProjectData?(a.attributes.sharedConfigurationProjectId=this.existingProjectData.existingProjectId,a.attributes.createdUsing="sharedConfiguration"):this.webItemData.demoProject?a.attributes.createdUsing="sample":(a.attributes.projectTemplateKey=this.webItemData.projectTemplateModuleCompleteKey,a.attributes.createdUsing="template",a.attributes.projectType=this.webItemData.projectType,a.attributes.simplified=this.isSimplified(),a.attributes.projectAccessLevel=this.isSimplified()?"open":""),o.sendTrackEvent(a),e.avoidDirtyFormWarning();var i=this.localStoragePrefix,s=["confluenceProject","fisheyeProject","crucibleProject","bambooProject"];c.map(s,function(e){t.remoteProjectLinks&&t.remoteProjectLinks[e]&&localStorage.setItem(i+e,t.remoteProjectLinks[e])}),c.isEmpty(this.postProjectCreationCallbacks)?this._window.location=d+t.returnUrl:(r.dialog.addPage("post-project-created-page"),c.each(this.postProjectCreationCallbacks,function(e){e(r.dialog,t.returnUrl,t.projectId,t.projectKey,t.projectName)}))},projectValidationFailedHandler:function(t,r){this.existingProjectData?l("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.create.failure"}):this.webItemData.demoProject?l("analyticsEvent",{name:"jira.project.templates.dialog.create.demo.failure"}):l("analyticsEvent",{name:"jira.project.templates.dialog.create.project.failure"});var i={};if(this.isBadRequest(t))i=JSON.parse(t.responseText);else if(this.isUnDefinedServerSideError(t))i={errorMessages:["Hmm... we couldn\'t create your project due to an unknown error. Try refreshing the page to start again."]};else{if(this.isDefinedServerSideError(t)){var o=JSON.parse(t.responseText);return JIRA.Messages.showReloadErrorMsg(o.message),e.avoidDirtyFormWarning(),void(this._window.location=d+o.returnUrl)}i=this.isTimeoutError(r)?{errorMessages:["Request timeout when creating project"]}:{errorMessages:[AJS.format("Error creating project, {0}",t.responseText)]}}e.draw({webItemData:this.webItemData||{},errors:i,currentName:e.getName(),currentKey:e.getKey(),currentUserDisplayName:a.model.currentUserDisplayName,currentUserName:a.model.currentUserName,currentUserAvatarUrl:a.model.currentUserAvatarUrl}),e.hideLoadingState()},isBadRequest:function(e){return 400===e.status},isUnDefinedServerSideError:function(e){if(500===e.status)try{JSON.parse(e.responseText)}catch(e){return!0}return!1},isDefinedServerSideError:function(e){return 500===e.status&&!c.isUndefined(JSON.parse(e.responseText).message)},isTimeoutError:function(e){return"timeout"===e},_updateAndValidateKey:function(t){e.setKey(t),this.validateKey()},_shouldUpdateKey:function(){return"true"!=e.getKeyEdited()},autofillKeyIfNeeded:function(){if(this._shouldUpdateKey()){var r=t.generate(e.getName());r.length>1?this._updateAndValidateKey(r):e.setKey("")}},_doesProjectNameExists:function(e){var t;for(t in this.projectNamesUpperCased)if(e.toUpperCase()==this.projectNamesUpperCased[t])return!0;return!1},validateName:function(){var t=n.trim(e.getName());if(t)return t.length<a.model.minNameLength?void e.showInlineErrorForName(AJS.format("The project name should be at least {0} characters in length.",a.model.minNameLength)):t.length>a.model.maxNameLength?void e.showInlineErrorForName(AJS.format("The project name must not exceed {0} characters in length.",a.model.maxNameLength)):this._doesProjectNameExists(t)?void e.showInlineErrorForName("A project with that name already exists."):void e.hideInlineErrorForName()},_performKeyValidationChecks:function(t){var r=n.ajax({url:d+"/rest/api/latest/projectvalidate/key?key="+t.toUpperCase()});r.done(c.bind(function(r){if(r.errors&&r.errors.projectKey)e.showInlineErrorForKey(r.errors.projectKey);else{var a=!1;c.each(this.projectKeyValidationCallbacks,function(r){var i=r(t.toUpperCase());i.errors&&i.errors.projectKey&&(a=!0,e.showInlineErrorForKey(i.errors.projectKey))}),a||e.hideInlineErrorForKey()}},this))},validateKey:function(){var t=e.getKey();this.lastKeyValidated!==t&&(t?(this.lastKeyValidated=t,this._performKeyValidationChecks(t)):e.hideInlineErrorForKey())},nameTimeout:function(){this.autofillKeyIfNeeded()},keyTimeout:function(){e.setKeyEdited()},_getExistingProjects:function(){if(this.projectNamesUpperCased.length>0)return this.projectNamesUpperCased;var e=n.ajax({url:d+"/rest/api/latest/project"});e.done(c.bind(function(e){this.projectNamesUpperCased=c.map(e,function(e){return e.name.toUpperCase()})},this))}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/template-info-view.js' */
define("jira/project-templates/template-info-view",["jira/project-templates/dialog-controller","require","backbone","jquery","underscore"],function(t,e,n,a,i){var o=AJS.trigger;return n.View.extend({initialize:function(t){i.bindAll(this,"draw","onNext")},draw:function(e,n){var a=t.addPage({name:"template-info",title:n,panelName:"template-info",backButton:!0,submitButtonText:"Select",submitButtonCallback:this.onNext,submitButtonClass:"template-info-dialog-create-button"}),i=this._nameToObj(e)();t.dialog.getPanel(a.id,0).html(i),t.dialog.gotoPage(a.id)},_nameToObj:function(t){return i.reduce(t.split("."),function(t,e){if(t)return t[e]},window)},onNext:function(t){o("analyticsEvent",{name:"jira.project.templates.dialog.create.templateinfo.next"});var n=e("jira/project-templates/template-info-controller");return n.next(),!1}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/template-info-controller.js' */
define("jira/project-templates/template-info-controller",["jira/project-templates/template-info-view","jira/lib/class","require","underscore"],function(e,t,n,a){var i=t.extend({init:function(e){a.bindAll(this,"initTemplateInfo","next")},initTemplateInfo:function(t){this.projectTemplateData=t;var n=new e;n.draw(t.infoSoyPath,t.name)},next:function(){var e=n("jira/project-templates/select-project-template-controller");e.openAddProjectPage(this.projectTemplateData)}});return new i});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/select-project-template-view.js' */
define("jira/project-templates/select-project-template-view",["jira/project-templates/dialog-controller","jira/project-templates/config","jira/featureflags/feature-manager","require","backbone","jquery","underscore"],function(e,t,i,a,o,r,n){var l=AJS.contextPath(),s=AJS.preventDefault,c=AJS.trigger;return{ROW_LENGTH:2,DIALOG_BODY_CLASS:"select-project-templates-page",DIALOG_WIDTH:800,draw:function(i,o,n){function s(){return d.isProjectTypesEnabled(i)?JIRA.Templates.ProjectTemplates.renderProjectTemplatesGroupedByType({projectTemplatesByType:i.projectTemplatesGroupedByType}):JIRA.Templates.ProjectTemplates.renderProjectTemplates({projectTemplates:i.projectTemplates})}function p(e){return!e.isOptimusPrimeOnboarding||e.isOptimusPrimeOnboarding&&e.hasProjectsInSystem}var d=a("jira/project-templates/select-project-template-controller");this.page=e.addPage({name:this.DIALOG_BODY_CLASS,title:i.demoProjects?"Create project with sample data":"Create project",panelName:"ProjectTemplatesListPanel",backButton:n.isOptimusPrimeOnboarding,submitButtonText:"Next",submitButtonCallback:d.dialogSubmitted,submitButtonClass:"create-project-dialog-create-button"}),e.dialog.getPanel(this.page.id,0).html(s()),t.model.projectCount>=2&&!i.demoProjects&&r(JIRA.Templates.ProjectTemplates.addWorkflowsLink({baseUrl:l})).appendTo(e.$dialogElement.find(".dialog-title"));var m=e.$dialogElement.find(".create-project-dialog-create-button"),u=this;this.getTemplateItems().click(function(){var e=r(this);e.addClass("selected"),u.getTemplateItems().not(this).removeClass("selected")}).dblclick(function(){m.click()}).focus(function(){r(this).click()});var f=this.get$TemplatesContainer();!i.demoProjects&&p(n)&&r(JIRA.Templates.ProjectTemplates.footerLinks({showDemoLink:!0,projectImportAvailable:i.projectImportAvailable})).prependTo(e.$dialogElement.find(".dialog-button-panel")),this.bindKeyboardEvents(f),d.isProjectTypesEnabled(i)?0==i.projectTemplatesGroupedByType.length&&m.attr("disabled","disabled"):0==i.projectTemplates.length&&m.attr("disabled","disabled"),this.focusOnFirstTemplate(f,o),e.dialog.updateHeight(),this.truncateTemplateDescriptions(),this.resizeTemplateWidths();var h=e.$dialogElement.find("#view-more-business-templates");h.click(function(){c("analyticsEvent",{name:"jira.project.templates.dialog.create.more-business-templates.clicked"}),e.$dialogElement.find("#project-template-group-business").addClass("view-more-business-templates-selected"),requestAnimationFrame(function(){e.dialog.updateHeight(),this.resizeTemplateWidths()}.bind(this)),this.focusOnFirstTemplate(this.get$TemplatesContainer())}.bind(this))},get$TemplatesContainer:function(){return e.$dialogElement.find(".templates")},focusOnFirstTemplate:function(e,t){t?this.getFirstTemplateItemOfProjectType(t).click():this.getFirstTemplateItem().click(),setTimeout(function(){e.focus()},0)},getSelectedTemplateData:function(){var t=e.$dialogElement.find(".template.selected");return t.data()},getMoveDeltaForKey:function(e){switch(e){case 37:return-1;case 39:return 1;case 38:return-this.ROW_LENGTH;case 40:return+this.ROW_LENGTH}return 0},bindKeyboardEvents:function(e){e.bind("keydown",n.bind(function(t){var i=this.getMoveDeltaForKey(t.which);if(i)return this.moveSelection(e,i),s(t)},this))},moveSelection:function(e,t){var i=e.find(".template"),a=i.filter(".selected"),o=i.index(a)+t;if(o<i.length&&o>=0){var r=i.eq(o);r.click().focus(),this.scrollToSelectedElement(r)}},scrollToSelectedElement:function(e){var t=r(".dialog-panel-body.pt-content"),i=t.offset().top,a=e.offset().top,o=a+e.height(),n=i+t.height();a<i?t.scrollTop(t.scrollTop()-(i-a)):o>i+t.height()&&t.scrollTop(t.scrollTop()+o-n)},get$NextButton:function(){return e.$dialogElement.find(".create-project-dialog-create-button")},disableNextButton:function(){this.get$NextButton().attr("disabled","disabled")},truncateTemplateDescriptions:function(){var t=AJS.Meta.get("user-locale"),i="word";"ja_JP"===t&&(i="letter"),e.$dialogElement.find(".template-description").each(function(){r(this).dotdotdot({wrap:i,lastCharacter:{remove:[" ",",",";",".","!","?",""],noEllipsis:[]}})})},getTemplatesDialogContainer:function(){return e.$dialogElement.find("."+this.DIALOG_BODY_CLASS).find(".dialog-panel-body.pt-content").get(0)},getFirstTemplateItem:function(){return this.getTemplateItems().first()},getFirstTemplateItemOfProjectType:function(e){return this.getTemplateItems().filter("#project-template-group-"+e+" *").first()},getTemplateItems:function(){return e.$dialogElement.find(".template")},widthOfScrollbarForElement:function(e){var t=e.offsetWidth,i=e.clientWidth;return t-i},widthOfDialogAvailableForTemplateList:function(){var e=this.getTemplatesDialogContainer(),t=this.widthOfScrollbarForElement(e),i=r(e).width()||this.DIALOG_WIDTH;return i-t},widthOfTemplateItem:function(){var e=this.widthOfDialogAvailableForTemplateList()/this.ROW_LENGTH;return e-this.borderWidthOfTemplateItem()},borderWidthOfTemplateItem:function(){var e=this.getFirstTemplateItem().css("border-top-width");return parseInt(e,10)},resizeTemplateWidths:function(){this.getTemplateItems().each(n.bind(function(e,t){r(t).css("width",this.widthOfTemplateItem())},this))}}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/select-project-template-controller.js' */
define("jira/project-templates/select-project-template-controller",["jira/project-templates/select-project-template-view","jira/project-templates/template-info-controller","jira/project-templates/add-project-controller","jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/project-templates/config","wrm/context-path","jquery","underscore"],function(e,t,o,r,a,l,n,i,p){var c=n(),s={init:function(t,o,r){this.onboarding=r,e.draw(t,o,r)},isProjectTypesEnabled:function(e){return null!=e.projectTemplatesGroupedByType},loadProjectTemplatesData:function(){return i.ajax({url:c+"/rest/project-templates/1.0/templates",type:"GET"})},loadDemoProjectTemplatesData:function(){return i.ajax({url:c+"/rest/project-templates/1.0/templates/demo-projects",type:"GET"}).then(function(e){return e.demoProjects=!0,e})},dialogSubmitted:function(){var o=e.getSelectedTemplateData();r.hideDialogFromNewUser("templateselected"),s.raiseAtlassianEvent(o.itemModuleCompleteKey),p.isUndefined(o.infoSoyPath)?s.openAddProjectPage(o):t.initTemplateInfo(o)},openAddProjectPage:function(e){return e?void(e.createProject?(o.initProjectTemplate(e),this.onboarding&&"function"==typeof this.onboarding.handleSuccessfulProjectCreation&&o.registerPostProjectCreationCallback(this.onboarding.handleSuccessfulProjectCreation)):(r.dialog.addPage("blank-template-page"),i("body").trigger(e.itemModuleCompleteKey,r.dialog))):void a.showErrorMessage("An error occurred while trying to contact Jira")},raiseAtlassianEvent:function(e){l.model.selectedTemplate=e,AJS.EventQueue&&AJS.EventQueue.push({name:"projecttemplates.templateselected",properties:{selectedTemplate:e}})}};return s});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/create-shared-view.js' */
define("jira/project-templates/create-shared-view",["jira/project-templates/dialog-controller","jira/project-templates/dialog-view","jira/ajs/select/scrollable-single-select","jira/ajs/select/suggestion-collection-model","require","backbone","jquery"],function(e,t,r,o,a,i,n){"use strict";var l=AJS.InlineDialog,s=AJS.trigger,c=i.View.extend({events:{"submit #create-shared-project-form":"onSubmitForm"},page:void 0,prepareDialog:function(t){var r=a("jira/project-templates/create-shared-controller");this.page=e.addPage({name:"create-shared-project",title:t,panelName:"create-shared-project",backButton:!0,submitButtonText:"Next",submitButtonCallback:r.dialogSubmitted,submitButtonClass:"create-shared-dialog-button"})},draw:function(t){e.dialog.gotoPage(this.page.id);var r=JIRA.Templates.ProjectTemplates.createSharedProjectForm({projectSuggestions:JSON.stringify(t.projectSuggestions)});e.dialog.getPanel(this.page.id,0).html(r),this._createProjectPicker();var o=e.$dialogElement.find("#shared-help-icon");o.length&&new l(o,"shared-project-help-popup",function(e,t,r){e.html(JIRA.Templates.ProjectTemplates.sharedHelp()),r()},{width:330,offsetX:-30}),e.$dialogElement.find(".dialog-button-panel button").removeAttr("disabled")},showProjectMissingError:function(){this._clearFormErrors(),this._getProjectPickerInput().after(aui.form.fieldError({extraClasses:"project-picker-missing-error",message:"Please select an existing project first."}))},drawEmptyInfo:function(){var t=JIRA.Templates.ProjectTemplates.noProjects();e.dialog.getPanel(this.page.id,0).html(t),e.$dialogElement.find(".dialog-button-panel button").hide()},drawError:function(t){e.dialog.getPanel(this.page.id,0).html(JIRA.Templates.errorMsg({closable:!1,msg:t}))},drawLoading:function(){e.dialog.gotoPage(this.page.id);var t=JIRA.Templates.ProjectTemplates.loading();e.dialog.getPanel(this.page.id,0).html(t),e.$dialogElement.find(".dialog-spinner").spin(),e.$dialogElement.find(".dialog-button-panel button").attr("disabled","disabled")},_clearFormErrors:function(){e.$dialogElement.find(".project-picker-missing-error").remove()},_getProjectPickerInput:function(){return e.$dialogElement.find("#project-picker")},onSubmitForm:function(e){this._clearFormErrors();var t=a("jira/project-templates/create-shared-controller");return t.dialogSubmitted(),!1},_getExtraInfoMessage:function(){return e.$dialogElement.find(".create-shared-info")},_createProjectPicker:function(){this._getExtraInfoMessage().hide(),this.projectSelect=new r({element:this._getProjectPickerInput(),revertOnInvalid:!0,pageSize:50,pagingThreshold:100,model:o}),this.projectSelect.$field.focus();var e=this;this._getProjectPickerInput().on("selected",function(t,r){r.value()&&(s("analyticsEvent",{name:"jira.project.templates.dialog.create.shared.project.selected"}),e._getExtraInfoMessage().show())})},getSelectedProject:function(){return this.projectSelect.getSelectedDescriptor()&&this.projectSelect.getSelectedDescriptor().value()}});return new c({el:n(document),dialogView:t})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/create-shared-controller.js' */
define("jira/project-templates/create-shared-controller",["jira/project-templates/create-shared-controller-impl","jquery"],function(e,r){return new e({el:r(document)})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/create-shared-controller-impl.js' */
define("jira/project-templates/create-shared-controller-impl",["jira/project-templates/add-project-controller","jira/project-templates/create-shared-view","jira/lib/class","jquery","underscore"],function(e,t,r,i,a){"use strict";var n=AJS.contextPath();return r.extend({init:function(e){this._window=e.window||window,a.bindAll(this,"dialogSubmitted")},initCreateShared:function(){t.prepareDialog("Create with shared configuration");var e=this;this._getProjectSuggestions().done(function(r){e._hasSuggestions(r)?t.draw({projectSuggestions:r}):t.drawEmptyInfo()}).fail(function(){t.drawError("An error occurred while trying to contact Jira")}),t.drawLoading()},_hasSuggestions:function(e){var t=!1;return i.each(e,function(e,r){r&&r.items&&r.items.length>0&&(t=!0)}),t},_getProjectSuggestions:function(){return i.ajax({url:n+"/rest/project-templates/1.0/createshared"})},dialogSubmitted:function(){var r=t.getSelectedProject();r?e.initCreateShared({existingProjectId:r}):t.showProjectMissingError()}})});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/RemoteProjectsCreatedMessage.js' */
var $=require("jquery");$(function(){function e(e,o){return JIRA.Templates.ProjectTemplates.formatAnchor({href:e,body:o,title:o})}function o(o,t,r,a){var c=[];return c.push("a Jira project"),o&&c.push(e(o,"a Confluence space")),t&&c.push(e(t,"a FishEye repository")),r&&c.push(e(r,"a Crucible project")),a&&c.push(e(a,"a Bamboo project")),c}function t(e,t,r,c){var l="The following entities were created: {0} and {1}.",m=o(e,t,r,c),n=m.pop();return m.length>0?a(l,m.join(", "),n):null}function r(e){var o=$(e).offset();o&&window.scrollTo(o.left,o.top)}var a=AJS.format,c=require("jira/project-templates/add-project-controller"),l=localStorage.getItem(c.localStoragePrefix+"confluenceProject"),m=localStorage.getItem(c.localStoragePrefix+"fisheyeProject"),n=localStorage.getItem(c.localStoragePrefix+"crucibleProject"),s=localStorage.getItem(c.localStoragePrefix+"bambooProject");localStorage.removeItem(c.localStoragePrefix+"confluenceProject"),localStorage.removeItem(c.localStoragePrefix+"fisheyeProject"),localStorage.removeItem(c.localStoragePrefix+"crucibleProject"),localStorage.removeItem(c.localStoragePrefix+"bambooProject");var g;(l||m||n||s)&&(g=t(l,m,n,s),g&&JIRA.Messages.showSuccessMsg(g,{closeable:!0}),r("#project-config-webpanel-summary-settings"))});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/namespace.js' */
AJS.namespace("JPT.AddProjectController",null,require("jira/project-templates/add-project-controller")),AJS.namespace("JPT.AddProjectView",null,require("jira/project-templates/add-project-view")),AJS.namespace("JPT.CreateSharedController",null,require("jira/project-templates/create-shared-controller")),AJS.namespace("JPT.DialogView",null,require("jira/project-templates/dialog-view")),AJS.namespace("JPT.ConfigModel",null,require("jira/project-templates/config")),AJS.namespace("JPT.CreateSharedView",null,require("jira/project-templates/create-shared-view")),AJS.namespace("JPT.DialogController",null,require("jira/project-templates/dialog-controller")),AJS.namespace("JPT.ProjectKeyGenerator",null,require("jira/project-templates/project-key-generator")),AJS.namespace("JPT.SelectProjectTemplateController",null,require("jira/project-templates/select-project-template-controller")),AJS.namespace("JPT.SelectProjectTemplateView",null,require("jira/project-templates/select-project-template-view")),AJS.namespace("JPT.TemplateInfoControllerImpl",null,require("jira/project-templates/template-info-controller")),AJS.namespace("JPT.TemplateInfoView",null,require("jira/project-templates/template-info-view"));;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/project-create-bridge.js' */
!function(){function e(e){n(e)}var n,t=new Promise(function(e){n=e});t.done=function(e){return this.then(e)},define("jira/project-templates/new-project-create/bridge",function(){return e}),define("jira/project-templates/new-project-create",function(){return t})}();;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/project-create-experience.js' */
define("jira/project-templates/project-create-experience",[],function(){return{trigger:function(e){e.preventDefault(),JIRA.API.getSidebar().then(function(e){e.openDrawerForProjectCreate(!0)})}}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/project-create-onboarding-experience.js' */
define("jira/project-templates/project-create-onboarding-experience",["jquery","jira/project-templates/dialog-controller","jira/project-templates/new-project-create"],function(e,r,t){function n(e){AJS.trigger("analyticsEvent",{name:e})}var o="jira.project.templates.onboarding.",a=o+"new-project-create.",c=a+"opened",i=a+"created",l=a+"cancelled",d=a+"load-error";return{trigger:function(o){o.preventDefault(),n(c);var a=e("#onboarding");t.then(function(e){a.hide();var r=document.getElementById("new-project-create");e.renderNewProjectCreate(r,function(e){n(i),window.location.assign(e.returnUrl)},function(){n(l),a.show()})}).catch(function(){n(d),a.show(),r.handleProjectTemplateTriggered()})}}});;
;
/* module-key = 'com.atlassian.jira.project-templates-plugin:project-templates-plugin-resources', location = 'project-templates-module/js/project-create-experience-init.js' */
require(["jquery","jira/project-templates/project-create-experience","jira/project-templates/project-create-onboarding-experience"],function(e,r,c){e(document).ready(function(){e(".trigger-project-create-experience").click(r.trigger),e(document).on("click",".trigger-onboarding-project-create-experience",c.trigger)})});;
;
/* module-key = 'com.atlassian.jira-core-project-templates:jira-core-project-templates-resources', location = 'jira-core-project-templates-module/soy/CoreProjectTemplates.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ProjectTemplates&&(JIRA.Templates.ProjectTemplates={}),"undefined"==typeof JIRA.Templates.ProjectTemplates.CoreTemplates&&(JIRA.Templates.ProjectTemplates.CoreTemplates={}),JIRA.Templates.ProjectTemplates.CoreTemplates.taskManagementInfoDialog=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description:"Create and assign everyday tasks for your team.",projectTemplate:"taskManagement"})},JIRA.Templates.ProjectTemplates.CoreTemplates.projectManagementInfoDialog=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description:"Estimate tasks, predict work volumes, set due dates, and easily report on project progress.",projectTemplate:"projectManagement"})},JIRA.Templates.ProjectTemplates.CoreTemplates.processManagementInfoDialog=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description:"Monitor recurring activities, such as expense approvals, design development, or reporting processes.",projectTemplate:"processManagement"})},JIRA.Templates.ProjectTemplates.CoreTemplates.contentManagementInfoDialog=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description:"Create an issue for each piece of content and manage it through your publishing process.",projectTemplate:"contentManagement",issueTypesHtml:""+JIRA.Templates.ProjectTemplates.CoreTemplates.assetIssueType(null)})},JIRA.Templates.ProjectTemplates.CoreTemplates.recruitmentInfoDialog=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description:"Create an issue for each candidate and manage them through your company\'s hiring process.",projectTemplate:"recruitment",issueTypesHtml:""+JIRA.Templates.ProjectTemplates.CoreTemplates.candidateIssueType(null)})},JIRA.Templates.ProjectTemplates.CoreTemplates.documentApprovalInfoDialog=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description:"Create an issue for each document and manage it though the authoring, review and approval process.",projectTemplate:"documentApproval",issueTypesHtml:""+JIRA.Templates.ProjectTemplates.CoreTemplates.documentIssueType(null)})},JIRA.Templates.ProjectTemplates.CoreTemplates.leadTrackingInfoDialog=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description:"Create an issue for each lead and trace the opportunity through negotiation to conversion.",projectTemplate:"leadTracking",issueTypesHtml:""+JIRA.Templates.ProjectTemplates.CoreTemplates.leadIssueType(null)})},JIRA.Templates.ProjectTemplates.CoreTemplates.procurementInfoDialog=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog({description:"Create an issue for each procurement request and trace it through the approval process to final delivery.",projectTemplate:"procurement",issueTypesHtml:""+JIRA.Templates.ProjectTemplates.CoreTemplates.orderIssueType(null)})},JIRA.Templates.ProjectTemplates.CoreTemplates.templateInfoDialog=function(e,t){return'<div><div class="top-panel"><p>'+soy.$$escapeHtml(e.description)+'</p></div><div class="left-panel"><h6>'+soy.$$escapeHtml("Issue Types")+'</h6><ul class="project-template-issuetype-list">'+(null!=e.issueTypesHtml?soy.$$filterNoAutoescape(e.issueTypesHtml):JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType(null)+JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType(null))+'</ul></div><div class="right-panel"><h6>'+soy.$$escapeHtml("Workflow")+'</h6><div class="workflow '+soy.$$escapeHtml(e.projectTemplate)+'"></div></div></div>'},JIRA.Templates.ProjectTemplates.CoreTemplates.issueType=function(e,t){return'<li><span class="issuetype-list-label"><span class="issuetype-icon '+soy.$$escapeHtml(e.iconKey)+'"></span><span class="issuetype-name">'+soy.$$escapeHtml(e.label)+"</span></span></li>"},JIRA.Templates.ProjectTemplates.CoreTemplates.taskIssueType=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey:"task",label:"Task"})},JIRA.Templates.ProjectTemplates.CoreTemplates.subtaskIssueType=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey:"subtask",label:"Sub-task"})},JIRA.Templates.ProjectTemplates.CoreTemplates.assetIssueType=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey:"asset",label:"Asset"})},JIRA.Templates.ProjectTemplates.CoreTemplates.candidateIssueType=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey:"candidate",label:"Candidate"})},JIRA.Templates.ProjectTemplates.CoreTemplates.documentIssueType=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey:"document",label:"Document"})},JIRA.Templates.ProjectTemplates.CoreTemplates.leadIssueType=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey:"lead",label:"Lead"})},JIRA.Templates.ProjectTemplates.CoreTemplates.orderIssueType=function(e,t){return""+JIRA.Templates.ProjectTemplates.CoreTemplates.issueType({iconKey:"order",label:"Order"})};;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:next-gen-pickers', location = 'jira-issue-navigator-components-module/includes/js/fields/IssueParentMultiselect.js' */
require(["require"],function(e){var t=e("jquery"),r=e("underscore"),s=e("jira/util/events/types"),i=e("jira/ajs/select/suggestions/checkbox-multi-select-suggest-handler"),n=e("jira/components/issue-parent-multiselect-util");JIRA.bind(s.NEW_CONTENT_ADDED,function(e,s){var a=t("#jql",this).val();s.find(".js-issue-checkboxmultiselect").each(function(){var e=i.extend({formatSuggestions:function(e,t){var s=this.model.getDisplayableSelectedDescriptors(),i=function(e){var t;for(t in s)if(s[t].properties.value===e.properties.value.toString())return!1;return!0};return e=r.map(e,function(e){var t=r.filter(e.properties.items,i);return e.properties.items=t,e}),this._super(e,t)}}),t=new AJS.CheckboxMultiSelect({element:this,matchingStrategy:"(^|.*?(.*))({0})(.*)",maxInlineResultsDisplayed:5,content:"ajax",removeOnUnSelect:!0,ajaxOptions:{url:AJS.contextPath()+"/rest/api/3/search",dataType:"json",contentType:"application/json",headers:{"Content-Type":"application/json"},type:"POST",error:function(){t._setSuggestions([])},data:function(e){var t="",r=n.extractProjectKeysFromJql(a);return r.length>0&&(t="project in ("+r+")"),e.length>0&&(t='(summary ~ "'+e+'*" OR key = "'+e+'") AND '+t),JSON.stringify({jql:t.replace(/\sAND\s$/,""),fields:["summary"],validateQuery:!1})},query:!0,minQueryLength:0,formatResponse:function(e){var t=[];if(t.push(new AJS.GroupDescriptor({weight:0,items:[new AJS.ItemDescriptor({highlighted:!0,label:"No Parent",value:"EMPTY",title:"EMPTY"})]})),!e||!e.issues||0===e.total)return t;var s=new AJS.GroupDescriptor({label:"Issues",weight:1});return r.each(e.issues,function(e){s.addItem(new AJS.ItemDescriptor({highlighted:!0,label:e.fields.summary+" - ("+e.key+")",value:e.key,title:e.fields.summary}))}),t.push(s),t}},suggestionsHandler:e})})})});
//# sourceMappingURL=IssueParentMultiselect-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-nav-components:next-gen-pickers', location = 'jira-issue-navigator-components-module/includes/js/fields/issueParentMultiselectUtil.js' */
define("jira/components/issue-parent-multiselect-util",[],function(){"use strict";function e(e){function t(e){var t=/\bproject\s*=\s*(\S+)/i.exec(e);return t?t[1]:null}function n(e){var t=/\bproject\s+in\s+\((.*?)\)/i.exec(e);return t?t[1]:null}return t(e)||n(e)}return{extractProjectKeysFromJql:function(t){return t&&0===t.indexOf("project")?e(t).trim():""}}});
//# sourceMappingURL=issueParentMultiselectUtil-min.js.map
;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-confluence-plugin:issue-link-confluence-js', location = 'jira-issue-link-confluence-plugin/js/issuelink-confluence.js' */
require(["jquery","jira/util/events","jira/util/events/types","issue-link-app-links/app-links"],function(n,e,i,u){var t={getCurrentAppId:function(e){return n("#issue-link-confluence-app-id",e).val()},shouldExecute:function(e){return 0!==n("#confluence-page-link",e).length},getIssueId:function(e){return n("input[name=id]",e).val()}};e.bind(i.NEW_PAGE_ADDED,function(n,e){u.init(t,e)})});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-confluence-plugin:confluence-page-resource', location = 'jira-issue-link-confluence-plugin/templates/dialog/searchresult.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.ConfluencePageSearch&&(JIRA.Templates.ConfluencePageSearch={}),JIRA.Templates.ConfluencePageSearch.result=function(e,a){var s="<h2>"+soy.$$escapeHtml("Find a Confluence page")+'</h2><form class="aui search-form" id="confluence-page-search-form" action="#" method="post"><div class="field-group"><label for="confluence-app-link">'+soy.$$escapeHtml("Server")+":</label>";if(1==e.appLinks.length)s+='<span class="field-value">'+soy.$$escapeHtml(e.appLinks[0].name)+'</span><input id="confluence-app-link" class="hidden" type="hidden" name="appId" value="'+soy.$$escapeHtml(e.appLinks[0].id)+'"/>';else{s+='<select id="confluence-app-link" class="select medium-field" name="appId">';for(var t=e.appLinks,l=t.length,n=0;n<l;n++){var c=t[n];s+='<option value="'+soy.$$escapeHtml(c.id)+'">'+soy.$$escapeHtml(c.name)+"</option>"}s+="</select>"}return s+='</div><div class="issue-link-applinks-authentication-message applinks-message-bar"></div><div class="hidden"><input class="issue-link-applinks-application-type" type="hidden" value="com.atlassian.applinks.api.application.confluence.ConfluenceApplicationType"/></div><div class="issue-link-oauth-toggle field-group"><label for="link-search-text" id="linkSearch-label">'+soy.$$escapeHtml("Search")+':</label><input id="link-search-text" type="text" tabindex="0" class="text" name="linkSearch" size="50" /> <select tabindex="0" class="search-space select" id="search-panel-space"><option value="">'+soy.$$escapeHtml("All Spaces")+'</option></select> <input type="submit" tabindex="0" class="aui-button" id="search-panel-button" value="'+soy.$$escapeHtml("Search")+'"/><span id="link-search-loading" class="icon loading throbber hidden"></span></div><div class="message-panel hidden"></div><div id="search-results-table" class="data-table"></div><div class="buttons-container form-footer"><div class="buttons"><button class="aui-button aui-button-link cancel" id="confluence-link-cancel" title="'+soy.$$escapeHtml("Press Esc to close")+'">'+soy.$$escapeHtml("Close")+"</button></div></div></form>"},JIRA.Templates.ConfluencePageSearch.resultsTable=function(e,a){var s="";if(e.results.length>0){s+='<table id="confluence-searchresult" class="aui"><thead><tr><th width="180px">'+soy.$$escapeHtml("Title")+'</th><th width="550px">'+soy.$$escapeHtml("Excerpt")+"</th></tr></thead><tbody>";for(var t=e.results,l=t.length,n=0;n<l;n++){var c=t[n];s+='<tr title="'+soy.$$escapeHtml(c.title)+'"><td class="title" data-url="'+soy.$$escapeHtml(c.url)+'">'+soy.$$escapeHtml(c.title)+'</td><td class="excerpt">'+soy.$$escapeHtml(c.excerpt)+"</td></tr>"}s+="</tbody></table>"}else s+='<div class="aui-message info"><span class="aui-icon icon-info"></span><p>'+soy.$$escapeHtml("Search returned no results.")+"</p></div>";return s},JIRA.Templates.ConfluencePageSearch.spaceOptions=function(e,a){for(var s='<option value="">'+soy.$$escapeHtml("All Spaces")+"</option>",t=e.spaces,l=t.length,n=0;n<l;n++){var c=t[n];s+='<option value="'+soy.$$escapeHtml(c.key)+'">'+soy.$$escapeHtml(c.name)+"</option>"}return s},JIRA.Templates.ConfluencePageSearch.allSpacesOption=function(e,a){return'<option value="">'+soy.$$escapeHtml("All Spaces")+'</option><option value="" disabled="disabled">'+soy.$$escapeHtml("Loading...")+"</option>"};;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-confluence-plugin:confluence-page-resource', location = 'jira-issue-link-confluence-plugin/templates/dialog/template-wrapper.js' */
define("jira-issue-link-confluence/dialog/searchresult/templates",[],function(){"use strict";return window.JIRA.Templates.ConfluencePageSearch});;
;
/* module-key = 'com.atlassian.jira.jira-issue-link-confluence-plugin:confluence-page-resource', location = 'jira-issue-link-confluence-plugin/js/ConfluencePageSearch.js' */
require(["jquery","wrm/context-path","jira/util/formatter","aui/message","jira/ajs/ajax/smart-ajax","jira-issue-link-confluence/dialog/searchresult/templates","jira/dialog/form-dialog","issue-link-app-links/app-links"],function(e,a,n,t,s,l,r,c){e(function(){function i(a,s){e("#confluence-app-link",a).change(function(){var n=s.selectServer(e(this).val()).authenticationRequired;n||u(a,e(this).val(),s),e("#search-results-table",a).empty(),o(!0,a)}),e("#search-panel-button",a).click(function(){e("#search-results-table",a).empty();var s=e("#link-search-text",a).val();return s=e.trim(s),s?d(s,a):t.info("#search-results-table",{body:"Please enter search value.",closeable:!1}),!1})}function u(r,c,i){e("select#search-panel-space",r).html(l.allSpacesOption());var u=++m;s.makeRequest({url:a()+"/rest/confluenceIssueLink/1/confluence/space?appId="+c,complete:function(a,s,p){if(u===m)if(p.successful){var d=p.data.spaces;e("select#search-panel-space",r).html(l.spaceOptions({spaces:d}))}else if(401===p.status)i.setAuthenticationRequired(c,!0);else{o(!1,r);var f;f=403===p.status?"Content on the Confluence site could not be accessed because the Confluence server\'s \'Remote API\' feature is disabled. The Confluence system administrator must enable this \'Remote API\' feature for Jira to successfully access this content.":"Unable to gather information from the selected Confluence instance.",t.error("#search-results-table",{body:f,closeable:!1})}}})}function o(a,n){a?(e("#link-search-text",n).removeAttr("disabled"),e("#search-panel-space",n).removeAttr("disabled"),e("#search-panel-button",n).removeAttr("disabled")):(e("#link-search-text",n).attr("disabled","disabled"),e("#search-panel-space",n).attr("disabled","disabled"),e("#search-panel-button",n).attr("disabled","disabled"))}function p(a,n){e("#link-search-loading",n).toggleClass("hidden",!a)}function d(r,c){p(!0,c);var i=e("#confluence-app-link",c).val(),u=e("#search-panel-space option:selected",c).val();s.makeRequest({url:a()+"/rest/confluenceIssueLink/1/confluence/search?query="+r+"&appId="+i+"&spaceKey="+u+"&maxResults=10",complete:function(a,s,r){if(p(!1,c),r.successful){var i=r.data.result,u=l.resultsTable({results:i});e("#search-results-table",c).html(u)}else{var o;o=r.hasData?"The Jira server was contacted but has returned an error response. We are unsure of the result of this operation.":"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.",t.error("#search-results-table",{body:o,closeable:!1})}e("#confluence-searchresult tbody tr",c).click(function(){var a=e(this).children().first().data("url");e("#confluence-page-url").val(a),e("#link-issue-dialog .error").hide(),h.hide(),e("#link-issue-dialog").show(),e("#confluence-page-url").focus().select()})}})}function f(a){var n={getCurrentAppId:function(a){return e("#confluence-app-link",a).val()},shouldExecute:function(a){return 0!==e("#confluence-app-link",a).length},onAuthenticationSuccessCallback:function(e,a,n){u(e,a,n)},getIssueId:function(a){return e("#confluence-page-link input[name=id]").val()}};return c.init(n,a.$popup).done(function(e,a){u(e,n.getCurrentAppId(e),a)})}var h=new r({id:"confluence-page-search-dialog",trigger:"#confluence-page-link .confluence-search-trigger",widthClass:"large",height:"565px",content:function(r){var c=this;s.makeRequest({url:a()+"/rest/confluenceIssueLink/1/confluence/applink",complete:function(a,s,u){if(u.successful){var o=u.data.applicationLinks;r(l.result({appLinks:o})),f(c).done(function(a,n){i(a,n),e("#link-search-text",a).focus()})}else t.error("#search-results-table",{body:"The Jira server could not be contacted. This may be a temporary glitch or the server may be down.",closeable:!1}),r()}})},submitHandler:function(a,n){a.preventDefault(),e("#search-panel-button").click().removeAttr("disabled"),n()}}),m=0})});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:client-analytics-runtime', location = 'jira-client-analytics-module/client-analytics/project-api-resolver/project-api-resolver.js' */
define("client-analytics/project-api-resolver/project-api-resolver",["jquery","exports"],function(e,r){r.resolve=function(){return new Promise(function(r,t){window.JIRA&&window.JIRA.API&&window.JIRA.API.getSidebar?JIRA.API.getSidebar().done(function(){var t=JIRA.Issues&&JIRA.Issues.Api&&JIRA.Issues.Api.getSelectedIssueId;r({getCurrentProjectId:JIRA.API.Projects.getCurrentProjectId,getCurrentProjectType:JIRA.API.Projects.getCurrentProjectType,getCurrentIssueId:t||e.noop})}).fail(t):t()})}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:client-analytics-runtime', location = 'jira-client-analytics-module/client-analytics/runtime/client-analytics-runtime.js' */
define("client-analytics/runtime/client-analytics-runtime",["jquery","jira/analytics","client-analytics/project-api-resolver/project-api-resolver","exports"],function(e,t,r,n){function i(e,t){var r=t.trigger.split(" "),n=r[0],i=r[1],c=Object.keys(t.properties||{}).map(function(e){var r=t.properties[e].split(" "),n=r[0],i=r[1];return{analyticEventPropertyName:e,elementAttribute:n,elementSelector:i}});return{analyticEventName:e,trigger:{eventType:n,selector:i},properties:c}}function c(e){return Object.keys(e).map(function(t){var r=e[t].events||{};return Object.keys(r).map(function(e){var n=r[e],c=["jira",t,e].join(".");return i(c,n)})}).reduce(function(e,t){return e.concat(t)},[])}function a(t){var r=e(t.elementSelector),n=u[t.elementAttribute];if(r.length&&n)return n(r)}function o(n){e(document).on(n.trigger.eventType,n.trigger.selector,function(){var e=n.analyticEventName,i={};n.properties.forEach(function(e){var t;t=a(e),t&&(i[e.analyticEventPropertyName]=t)}),r.resolve().then(function(r){var n=r.getCurrentProjectId(),c=r.getCurrentProjectType(),a=r.getCurrentIssueId();n&&(i.projectId=n),c&&(i.projectType=c),a&&(i.issueId=a),t.send({name:e,properties:i})}).catch(function(){t.send({name:e,properties:i})})})}var u={"value.length":function(e){var t=e.val();if(t)return t.length}};n.registerEvents=function(e){var t=c(e);t.forEach(o)}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:client-analytics-runtime-init', location = 'jira-client-analytics-module/client-analytics/client-analytics-init.js' */
require(["jira/analytics/context-provider","client-analytics/runtime/client-analytics-runtime"],function(t,e){var i=t.getContext();i&&e.registerEvents(i.analyticsResource)});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:logging-client', location = 'jira-client-analytics-module/client-analytics/logging-client.js' */
define("jira/analytics/logging-client",["jquery","wrm/context-path"],function(n,t){var a=t()+"/rest/internal/2/log/unsafe/emau";return{logEMAU:function(t,e,r){n.ajax({url:a,contentType:"application/json",type:"POST",data:JSON.stringify({eventData:{url:e,urlParams:r,subproduct:t}})})}}});;
;
/* module-key = 'com.atlassian.jira.jira-client-analytics-plugin:track-emau', location = 'jira-client-analytics-module/client-analytics/track-emau.js' */
require(["jira/analytics/web-client","jira/analytics/logging-client","jquery"],function(n,i,t){t(document).ready(function(){n.startUIViewedEvent(function(n){"jira"===n.product&&i.logEMAU(n.subproduct,window.location.pathname,window.location.search)})})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-globalkeyboardshortcuts', location = 'jira-agile-module/includes/js/gh-globalkeyboardshortcuts.js' */
!function(e){e.namespace("gh.app.globalkeyboardshortcuts");var s=gh.app.globalkeyboardshortcuts;s.findSelectedIssueId=function(){var e;return jira&&jira.app&&jira.app.issuenavigator&&jira.app.issuenavigator.getSelectedIssueId&&(e=jira.app.issuenavigator.getSelectedIssueId()),!e&&jira&&jira.app&&jira.app.issue&&jira.app.issue.getIssueId&&(e=jira.app.issue.getIssueId()),e},s.goToAgile=function(){var e=(contextPath?contextPath:"")+"/secure/RapidBoard.jspa";window.location.href=e},s.followLink=function(s){var t=e(s);t.length>0&&("a"===t[0].nodeName.toLowerCase()||"link"===t[0].nodeName.toLowerCase())&&(t.click(),window.location.href=t.attr("href"))},s.sendToTop=function(e,t,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToTop)return GH.Shortcut.sendToTop(e,o),void s.closeDialogAndPopMessage();if("Action"===e){var a=t||s.findSelectedIssueId();contextPath||(contextPath=""),JIRA.SmartAjax.makeRequest({type:"post",contentType:"application/json",url:contextPath+"/rest/greenhopper/1.0/rank/global/first",data:JSON.stringify({issueId:a}),success:s.handleRankSuccess}),AJS.$(AJS).trigger("gh.global.rankissues",{action:"rankToTop"+(e?e:""),count:1})}},s.sendToBottom=function(e,t,o){if(window.GH&&GH.RapidBoard&&GH.Shortcut&&GH.Shortcut.sendToBottom)return GH.Shortcut.sendToBottom(e,o),void s.closeDialogAndPopMessage();if("Action"===e){var a=t||s.findSelectedIssueId();contextPath||(contextPath=""),JIRA.SmartAjax.makeRequest({type:"post",contentType:"application/json",url:contextPath+"/rest/greenhopper/1.0/rank/global/last",data:JSON.stringify({issueId:a}),success:s.handleRankSuccess}),AJS.$(AJS).trigger("gh.global.rankissues",{action:"rankToBottom"+(e?e:""),count:1})}},s.closeDialogAndPopMessage=function(){JIRA.IssueNavigator.isNavigator()?AJS.reloadViaWindowLocation():(JIRA.Dialog&&JIRA.Dialog.current&&JIRA.Dialog.current.hide(),window.GH?(GH.Message&&GH.Message.showIssueMessage?GH.Message.showIssueMessage():GH.RapidBoard&&GH.Notification&&GH.Notification.showIssueMessage&&GH.Notification.showIssueMessage(),window.Boards&&Boards.refreshAll()):JIRA.IssueNavigator&&JIRA.IssueNavigator.Shortcuts&&JIRA.IssueNavigator.Shortcuts.flashIssueRow&&JIRA.IssueNavigator.Shortcuts.flashIssueRow())},s.handleRankSuccess=function(e,t,o){s.storeSuccessMessage(e.issueId,e.issueKey,"thanks_issue_updated"),s.closeDialogAndPopMessage()},s.storeSuccessMessage=function(e,s,t){var o=JIRA.SessionStorage;o.setItem("selectedIssueId",e),o.setItem("selectedIssueKey",s),o.setItem("selectedIssueMsg",t)},AJS.$(function(){AJS.$(document).delegate(".issueaction-greenhopper-rank-top-operation","click",function(e){e.preventDefault();var t=AJS.$(this).attr("data-issueid");s.sendToTop("Action",t)}),AJS.$(document).delegate(".issueaction-greenhopper-rank-bottom-operation","click",function(e){e.preventDefault();var t=AJS.$(this).attr("data-issueid");s.sendToBottom("Action",t)})})}(AJS.$);;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'jira-agile-module/includes/js/rapid/ui/help/HelpAnalytics.js' */
AJS.$(function(){var e=require("jira-agile/rapid/analytics-tracker"),r=function(r){return new e(r).setAsync(!1)};AJS.$("#gh_view_help").click(function(e){return r("gh.gethelp").trigger("usermenu","docs"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement").click(function(e){return r("gh.myjirahome").trigger("usermenu","enabled"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-enablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-disablement-ondemand").click(function(e){return r("gh.myjirahome").trigger("usermenu","disable"),n(AJS.$(this))}),AJS.$("#greenhopper-my-jira-home-set").click(function(e){return r("gh.myjirahome").trigger("usermenu","set"),n(AJS.$(this))}),AJS.$("#beta_gh\\.configuration\\.rapid\\.removal").click(function(e){var n=AJS.$(this),t=n.attr("checked")?"on":"off";return r("gh.labs.feature").trigger("rapid_removal",t),!0}),AJS.$(document).delegate("#js-classic-link_lnk","click",function(e){return r("gh.agile.menu").trigger("classic"),!0});var n=function(e){return"_blank"==e.attr("target")||(setTimeout('document.location = "'+e.attr("href")+'"',100),!1)}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-help-analytics', location = 'jira-agile-module/includes/js/rapid/Analytics.js' */
"undefined"==typeof GH&&(window.GH={}),function(e,n,a,t){function c(){n(document).on(s,function(e,n){i(n)})}function i(n){var t={},c=n.category;a.isUndefined(n.action)||(c=c+"."+n.action),a.isUndefined(n.label)||(t.label=n.label),a.isUndefined(n.value)||(t.value=n.value),t.searchSessionId=t.searchSessionId||e.Meta.get("search-session-id"),t.searchObjectId=t.searchObjectId||e.Meta.get("search-object-id"),t.searchContainerId=t.searchContainerId||e.Meta.get("search-container-id"),t.searchContentType=t.searchContentType||e.Meta.get("search-content-type"),e.trigger("analytics",{name:c,data:t});var i=require("jira/customevents/trigger-custom-event");i&&i.trigger("legacy-gas-v2-event",c,t)}t.AnalyticsEnabled=!0;var s="gh.analytics.async";c()}(AJS,AJS.$,_,GH);;
;
/* module-key = 'com.pyxis.greenhopper.jira:project-template-resources', location = '/jira-agile-module/projecttemplates/soy/ProjectTemplates.soy' */
// This file was automatically generated from ProjectTemplates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace GH.tpl.projecttemplates.
 */

if (typeof GH == 'undefined') { var GH = {}; }
if (typeof GH.tpl == 'undefined') { GH.tpl = {}; }
if (typeof GH.tpl.projecttemplates == 'undefined') { GH.tpl.projecttemplates = {}; }


GH.tpl.projecttemplates.agilityProjectInfoPage = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml('The setup\x27s simple, which means your team can be up-and-running faster.') + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li></ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('workflow') + '</h6><div class="workflow simple-workflow-screenshot"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.agilityProjectInfoPage.soyTemplateName = 'GH.tpl.projecttemplates.agilityProjectInfoPage';
}


GH.tpl.projecttemplates.kanbanInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to optimize the flow of work in your development project. Add constraints to work-in-progress, analyze how long it takes to complete issues, find bottlenecks in your process, and more. This project includes a Kanban board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'kanban-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.kanbanInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.kanbanInfoPageJira7';
}


GH.tpl.projecttemplates.scrumInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this project to manage your Agile development work. Create a backlog, organise work into sprints, check progress using reports, and more. This project includes a Scrum board, a basic Agile workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon story"></span><span class="issuetype-name">' + soy.$$escapeHtml('Story') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'scrum-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.scrumInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.scrumInfoPageJira7';
}


GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7 = function(opt_data, opt_ignored) {
  return '' + GH.tpl.projecttemplates.templateInfoDialog({description: 'Use this template to track development tasks and bugs. It provides you with a basic workflow and issue type configuration, which you can change later on.', extraIssueTypes: '<li><span class="issuetype-list-label"><span class="issuetype-icon improvement"></span><span class="issuetype-name">' + soy.$$escapeHtml('Improvement') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon newfeature"></span><span class="issuetype-name">' + soy.$$escapeHtml('New Feature') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon epic"></span><span class="issuetype-name">' + soy.$$escapeHtml('Epic') + '</span></span></li>', workflowScreenshotClass: 'basic-development-workflow-screenshot'});
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7.soyTemplateName = 'GH.tpl.projecttemplates.softwareDevelopmentInfoPageJira7';
}


GH.tpl.projecttemplates.templateInfoDialog = function(opt_data, opt_ignored) {
  return '<div><div class="top-panel"><p>' + soy.$$escapeHtml(opt_data.description) + '</p></div><div class="left-panel"><h6>' + soy.$$escapeHtml('Issue Types') + '</h6><ul class="project-template-issuetype-list" ><li><span class="issuetype-list-label"><span class="issuetype-icon bug"></span><span class="issuetype-name">' + soy.$$escapeHtml('Bug') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon task"></span><span class="issuetype-name">' + soy.$$escapeHtml('Task') + '</span></span></li><li><span class="issuetype-list-label"><span class="issuetype-icon subtask"></span><span class="issuetype-name">' + soy.$$escapeHtml('Sub-task') + '</span></span></li>' + soy.$$filterNoAutoescape(opt_data.extraIssueTypes) + '</ul></div><div class="right-panel"><h6>' + soy.$$escapeHtml('workflow') + '</h6><div class="workflow ' + soy.$$escapeHtml(opt_data.workflowScreenshotClass) + '"></div></div></div>';
};
if (goog.DEBUG) {
  GH.tpl.projecttemplates.templateInfoDialog.soyTemplateName = 'GH.tpl.projecttemplates.templateInfoDialog';
}
;
;
/* module-key = 'com.atlassian.jira.plugin.ext.bamboo:bamboo-soy-resources', location = 'templates/plugins/bamboo/components.soy' */
// This file was automatically generated from components.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace bamboo.components.
 */

if (typeof bamboo == 'undefined') { var bamboo = {}; }
if (typeof bamboo.components == 'undefined') { bamboo.components = {}; }


bamboo.components.pageHeader = function(opt_data, opt_ignored) {
  return '' + aui.page.pageHeader({content: '' + ((opt_data.headerImageContent) ? aui.page.pageHeaderImage({content: opt_data.headerImageContent}) : '') + aui.page.pageHeaderMain({content: opt_data.headerMainContent}) + ((opt_data.headerActionsContent) ? aui.page.pageHeaderActions({content: opt_data.headerActionsContent}) : '')});
};
if (goog.DEBUG) {
  bamboo.components.pageHeader.soyTemplateName = 'bamboo.components.pageHeader';
}


bamboo.components.icon = function(opt_data, opt_ignored) {
  return '<span class="bamboo-icon bamboo-icon-' + soy.$$escapeHtml(opt_data.type) + '"' + ((opt_data.text && opt_data.showTitle) ? ' title="' + soy.$$escapeHtml(opt_data.text) + '"' : '') + '>' + ((opt_data.text) ? '<span>' + soy.$$escapeHtml(opt_data.text) + '</span>' : '') + '</span>';
};
if (goog.DEBUG) {
  bamboo.components.icon.soyTemplateName = 'bamboo.components.icon';
}


bamboo.components.buildDetail = function(opt_data, opt_ignored) {
  return '<dl><dt class="' + soy.$$escapeHtml(opt_data.keyClass) + '">' + soy.$$escapeHtml(opt_data.key) + '</dt><dd>' + soy.$$filterNoAutoescape(opt_data.value) + '</dd></dl>';
};
if (goog.DEBUG) {
  bamboo.components.buildDetail.soyTemplateName = 'bamboo.components.buildDetail';
}


bamboo.components.artifacts = function(opt_data, opt_ignored) {
  var output = '<ul id="shared-artifacts">';
  var artifactList42 = opt_data.artifacts;
  var artifactListLen42 = artifactList42.length;
  for (var artifactIndex42 = 0; artifactIndex42 < artifactListLen42; artifactIndex42++) {
    var artifactData42 = artifactList42[artifactIndex42];
    output += bamboo.components.artifactItem(soy.$$augmentMap(artifactData42, {id: artifactData42.name, url: artifactData42.link.href}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.artifacts.soyTemplateName = 'bamboo.components.artifacts';
}


bamboo.components.artifactItem = function(opt_data, opt_ignored) {
  return '<li>' + bamboo.components.icon({type: 'artifact-shared'}) + ' <a class="artifact-link" id="artifact-' + soy.$$escapeHtml(opt_data.id) + '" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</a><span class="filesize">(' + soy.$$escapeHtml(opt_data.prettySizeDescription) + ')</span></li>';
};
if (goog.DEBUG) {
  bamboo.components.artifactItem.soyTemplateName = 'bamboo.components.artifactItem';
}


bamboo.components.labels = function(opt_data, opt_ignored) {
  var output = '<ul class="labels">';
  var labelList65 = opt_data.labels;
  var labelListLen65 = labelList65.length;
  for (var labelIndex65 = 0; labelIndex65 < labelListLen65; labelIndex65++) {
    var labelData65 = labelList65[labelIndex65];
    output += bamboo.components.labelItem(soy.$$augmentMap(labelData65, {url: opt_data.baseBambooUrl + '/browse/label/' + labelData65.name}));
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  bamboo.components.labels.soyTemplateName = 'bamboo.components.labels';
}


bamboo.components.labelItem = function(opt_data, opt_ignored) {
  return '<li><a class="lozenge" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '"><span>' + soy.$$escapeHtml(opt_data.name) + '</span></a></li>';
};
if (goog.DEBUG) {
  bamboo.components.labelItem.soyTemplateName = 'bamboo.components.labelItem';
}


bamboo.components.errorResponseMessage = function(opt_data, opt_ignored) {
  return '' + bamboo.components.auiWarning({body: '' + ((opt_data.errorMessage.messageBody) ? '<p>' + soy.$$escapeHtml(opt_data.errorMessage.messageBody) + '</p>' : (opt_data.errorMessage.oauthCallback) ? '<p><a href="' + soy.$$filterNoAutoescape(opt_data.errorMessage.oauthCallback) + '&amp;redirectUrl=' + soy.$$filterNoAutoescape(opt_data.oAuthDanceReturnUrl) + '">' + soy.$$escapeHtml('bamboo.loginAndApprove') + '</a></p>' : '<p>' + soy.$$escapeHtml(opt_data.errorMessage.message) + '</p>')});
};
if (goog.DEBUG) {
  bamboo.components.errorResponseMessage.soyTemplateName = 'bamboo.components.errorResponseMessage';
}


bamboo.components.auiWarning = function(opt_data, opt_ignored) {
  return '<div class="aui-message warning"><span class="aui-icon icon-warning"></span>' + soy.$$filterNoAutoescape(opt_data.body) + '</div>';
};
if (goog.DEBUG) {
  bamboo.components.auiWarning.soyTemplateName = 'bamboo.components.auiWarning';
}
;
;
/* module-key = 'com.atlassian.jira.ext.calendar:browse-project-tip', location = 'jira-calendar-plugin/com/atlassian/jira/ext/calendar/resources/js/BrowseProjectTip.js' */
require(["jira/util/formatter","jira/util/events","jira/util/events/types","wrm/data","jquery"],function(e,t,a,n,i){AJS.toInit(function(){var r=n.claim("com.atlassian.jira.ext.calendar:tipDataProvider.tip").suppressTip;if(!r){var s="browse-project-calendar-info",o=function(t){if(t.length){var a=i("<div/>");AJS.messages.info(a,{body:e.format("This calendar shows when issues are due to be completed. This is set by the {0} field for an issue.","Due date"),closeable:!0}),a.find(".aui-message").attr("id",s),t.prepend(a)}};t.bind(a.NEW_CONTENT_ADDED,function(e,t,a){var n;n="project-tab"==t.attr("id")?i(".issues-calendar-container",t):i("#project-tab .issues-calendar-container",t),o(n)}),o(i("#project-tab .issues-calendar-container")),AJS.bind("messageClose",function(e,t){t.attr("id")==s&&(AJS.EventQueue&&AJS.EventQueue.push({name:"browseprojectcalendarinfo.closebutton"}),i.ajax({data:{tipKey:"browseProjectCalendarTab",atl_token:atl_token()},type:"POST",url:contextPath+"/rest/calendar-plugin/1.0/suppressedTips"}))})}})});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:sensors', location = 'jira-browser-metrics-frontend/sensors.js' */
require(["internal/browser-metrics","jira/util/events","jira/featureflags/feature-manager"],function(e,i,a,o){var d,t={},r={},l={};t=function(e,i,a){function o(){function e(e){return o.hasOwnProperty(e)?o[e]:null}var o={"browse_link-content":"jira.header.menu.projects","find_link-content":"jira.header.menu.issues","greenhopper_menu-content":"jira.header.menu.agile","home_link-content":"jira.header.menu.dashboards","plugins-jira-webitem-main-content":"jira.header.menu.portfolio","servicedesk-section-content":"jira.header.menu.service-desk","system-admin-menu-content":"jira.header.menu.admin","system-help-menu-content":"jira.header.menu.help","user-options-content":"jira.header.menu.profile"};i.bind("aui-dropdown2-show-before",function(i){var o=i.target,d=e(o&&o.id);d&&a.start({key:d,isInitial:!1,threshold:250})}),i.bind("aui-dropdown2-show-after",function(i){var o=i.target,d=e(o&&o.id);d&&a.end({key:d})})}return e.applicationMenusSensorInit=o,e}(t,i,e),r=function(e){function i(e){var i;if(a.hasOwnProperty(e))return e;for(i=0;i<o.length;i++)if(e.match(o[i].pattern))return o[i].dialogId;return null}e.safeDialogId=i;var a=["about-dialog","add-basicuser-dialog","add-developer-dialog","add-field-configuration-dialog","add-field-configuration-scheme-dialog","add-field-dialog","add-field-screen-dialog","add-field-screen-scheme-dialog","add-incoming-mail-handler-dialog","add-issue-type-dialog","add-issue-type-field-configuration-association-dialog","add-issue-type-screen-scheme-configuration-association-dialog","add-issue-type-screen-scheme-dialog","add-new-issue-type-to-scheme-dialog","add-screen-scheme-item-dialog","add-subtask-type-dialog","add-workflow-dialog","add_workflowscheme-dialog","assign-dialog","assign-issue-types-dialog","assign-to-me-link-handler","attach-file-dialog","attach-screenshot-dialog","auditing-settings-dialog","clone-issue-dialog","comment-add-dialog","configure_wallboard_dialog","confluence-page-search-dialog","copy_classic default workflow-dialog","copy-filter-dialog","copy_jira-dialog","create-issue-dialog","create-issue-dialog.issueType","create-issue-dialog.projectId","create-request-dialog","create-service-desk-dialog","create-status-dialog","create-story-dialog","create-story-dialog.issueType","create-story-dialog.projectId","create-subtask-dialog","create-subtask-dialog.issueType","create-team-dialog","create_user-dialog","credits-dialog","delete-attachment-dialog","delete-comment-dialog","delete-dshboard","delete-filter-dialog","delete-issue-dialog","delete-issue-link-dialog","delete-log-work-dialog","delete-metric","delete-queue","delete-status-dialog","deleteuser_link-dialog","devstatus-branch-detail-dialog","devstatus-build-detail-dialog","devstatus-commit-detail-dialog","devstatus-cta-dialog","devstatus-deployment-detail-dialog","devstatus-pullrequest-detail-dialog","devstatus-review-detail-dialog","discard-draft-dialog","discard_draft_workflow-dialog","edit-attachments-dialog","edit-comment","editgroups_admin-dialog","editgroups_link-dialog","editgroups_sysadmin-dialog","edit-issue-dialog","edit-labels-dialog","edit-log-work-dialog","edit-status-dialog","edituser_link_admin-dialog","edit-workflow-dialog","gh-rapidboard-dialog","inline-issue-create-dialog","invite_user-dialog","issue-actions-dialog","issue-tab-error-dialog","jim-create-project-dialog","keyboard-shortcuts-dialog","link-issue-dialog","log-work-dialog","manage-attachment-dialog","metric-pre-save-dialog","modal-field-view","permission-helper-dialog","project-avatar-cropper","project-avatar-picker","project-config-details-project-category-dialog","project-config-project-edit-dialog","project-config-project-edit-lead-and-default-assignee-dialog","project-email-dialog","publish_draft_workflow-dialog","queue-dirty-edits","QuickCreateIssue.error","QuickCreateIssue.success","QuickCreateSubtask.error","QuickCreateSubtask.success","QuickEdit.error","QuickEdit.success","remote-jira-search-dialog","rename-filter-dialog","report-dirty-edits","save-filter-dialog","sd-add-default-value","sd-add-remove-agent-dialog","sd-remove-field-dialog","server-error-dialog","report-delete-confirm","user-avatar-picker","user-defaults-edit-dialog","versionsMergeDialog","view-workflow-dialog","view-workflow-dialog-project-admin","view-workflow-dialog-workflow-schemes","wait-migrate-dialog","whereismycf-dialog","workflow-text-view"].reduce(function(e,i){return e[i]=!0,e},{}),o=[{dialogId:"component-delete-dialog",pattern:/^component-\d+-delete-dialog$/i},{dialogId:"version-delete-dialog",pattern:/^version-\d+-delete-dialog$/i},{dialogId:"workflow-transition-dialog",pattern:/^workflow-transition-\d+-dialog$/i}];return e}(r),l=function(e,i,a,o){function d(){i.bind("beforeShow",function(e,i){if("string"==typeof i){var d=(0,o.safeDialogId)(i);d&&a.start({key:"jira.dialog.open."+d,isInitial:!1,threshold:1e3})}}),i.bind("dialogContentReady",function(e,i){if("string"==typeof i.options.id&&!i.options.useReadyForInteractionMetric){var d=(0,o.safeDialogId)(i.options.id);d&&a.end({key:"jira.dialog.open."+d})}}),i.bind("dialogContentReadyForInteraction",function(e,i){if("string"==typeof i.options.id&&i.options.useReadyForInteractionMetric){var d=(0,o.safeDialogId)(i.options.id);d&&a.end({key:"jira.dialog.open."+d})}})}return e.dialogsSensorInit=d,e}(l,i,e,r),d=function(e,i){(0,e.applicationMenusSensorInit)(),(0,i.dialogsSensorInit)()}(t,l)});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-browser-metrics:browser-metrics-client', location = 'browser-metrics-client/main.js' */
define("browser-metrics-client",["jira/analytics/web-client"],(function(t){return function(t){function e(e){for(var r,i,o=e[0],a=e[1],s=0,c=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&c.push(n[i][0]),n[i]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);for(u&&u(e);c.length;)c.shift()()}var r={},n={0:0};function i(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(){return Promise.resolve()},i.m=t,i.c=r,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var o=window.webpackJsonpbrowser_metrics_client=window.webpackJsonpbrowser_metrics_client||[],a=o.push.bind(o);o.push=e,o=o.slice();for(var s=0;s<o.length;s++)e(o[s]);var u=a;return i(i.s=51)}([function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){t.exports=r(28)},function(t,e,r){var n=r(29);function i(e,r,o){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=i=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=i=function(t,e,r){var i=n(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(r):o.value}},t.exports.default=t.exports,t.exports.__esModule=!0),i(e,r,o||e)}t.exports=i,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function r(t,e,r,n,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void r(t)}s.done?e(u):Promise.resolve(u).then(n,i)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(32),i=r(33),o=r(20),a=r(34);t.exports=function(t){return n(t)||i(t)||o(t)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(30);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(14).default,i=r(11);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?i(t):e},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(35),i=r(36),o=r(20),a=r(37);t.exports=function(t,e){return n(t)||i(t,e)||o(t,e)||a()},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(39),i=r(21),o=/[T ]/,a=/:/,s=/^(\d{2})$/,u=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],c=/^(\d{4})/,l=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],f=/^-(\d{2})$/,p=/^-?(\d{3})$/,d=/^-?(\d{2})-?(\d{2})$/,h=/^-?W(\d{2})$/,m=/^-?W(\d{2})-?(\d{1})$/,v=/^(\d{2}([.,]\d*)?)$/,g=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,y=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,b=/([Z+-].*)$/,w=/^(Z)$/,O=/^([+-])(\d{2})$/,S=/^([+-])(\d{2}):?(\d{2})$/;function M(t,e,r){e=e||0,r=r||0;var n=new Date(0);n.setUTCFullYear(t,0,4);var i=7*e+r+1-(n.getUTCDay()||7);return n.setUTCDate(n.getUTCDate()+i),n}t.exports=function(t,e){if(i(t))return new Date(t.getTime());if("string"!=typeof t)return new Date(t);var r=(e||{}).additionalDigits;r=null==r?2:Number(r);var _=function(t){var e,r={},n=t.split(o);a.test(n[0])?(r.date=null,e=n[0]):(r.date=n[0],e=n[1]);if(e){var i=b.exec(e);i?(r.time=e.replace(i[1],""),r.timezone=i[1]):r.time=e}return r}(t),T=function(t,e){var r,n=u[e],i=l[e];if(r=c.exec(t)||i.exec(t)){var o=r[1];return{year:parseInt(o,10),restDateString:t.slice(o.length)}}if(r=s.exec(t)||n.exec(t)){var a=r[1];return{year:100*parseInt(a,10),restDateString:t.slice(a.length)}}return{year:null}}(_.date,r),E=T.year,P=function(t,e){if(null===e)return null;var r,n,i,o;if(0===t.length)return(n=new Date(0)).setUTCFullYear(e),n;if(r=f.exec(t))return n=new Date(0),i=parseInt(r[1],10)-1,n.setUTCFullYear(e,i),n;if(r=p.exec(t)){n=new Date(0);var a=parseInt(r[1],10);return n.setUTCFullYear(e,0,a),n}if(r=d.exec(t)){n=new Date(0),i=parseInt(r[1],10)-1;var s=parseInt(r[2],10);return n.setUTCFullYear(e,i,s),n}if(r=h.exec(t))return o=parseInt(r[1],10)-1,M(e,o);if(r=m.exec(t)){o=parseInt(r[1],10)-1;var u=parseInt(r[2],10)-1;return M(e,o,u)}return null}(T.restDateString,E);if(P){var k,x=P.getTime(),A=0;if(_.time&&(A=function(t){var e,r,n;if(e=v.exec(t))return(r=parseFloat(e[1].replace(",",".")))%24*36e5;if(e=g.exec(t))return r=parseInt(e[1],10),n=parseFloat(e[2].replace(",",".")),r%24*36e5+6e4*n;if(e=y.exec(t)){r=parseInt(e[1],10),n=parseInt(e[2],10);var i=parseFloat(e[3].replace(",","."));return r%24*36e5+6e4*n+1e3*i}return null}(_.time)),_.timezone)k=6e4*function(t){var e,r;if(e=w.exec(t))return 0;if(e=O.exec(t))return r=60*parseInt(e[2],10),"+"===e[1]?-r:r;if(e=S.exec(t))return r=60*parseInt(e[2],10)+parseInt(e[3],10),"+"===e[1]?-r:r;return 0}(_.timezone);else{var D=x+A,L=new Date(D);k=n(L);var I=new Date(D);I.setDate(L.getDate()+1);var F=n(I)-n(L);F>0&&(k+=F)}return new Date(x+A+k)}return new Date(t)}},function(t,e,r){var n=r(44);t.exports=function(t){return n(t,{weekStartsOn:1})}},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=r=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){"use strict";(function(e){var n=r(26),i=r(27),o=/^[A-Za-z][A-Za-z0-9+-.]*:[\\/]+/,a=/^([a-z][a-z0-9.+-]*:)?([\\/]{1,})?([\S\s]*)/i,s=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function u(t){return(t||"").toString().replace(s,"")}var c=[["#","hash"],["?","query"],function(t){return t.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],l={hash:1,query:1};function f(t){var r,n=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).location||{},i={},a=typeof(t=t||n);if("blob:"===t.protocol)i=new d(unescape(t.pathname),{});else if("string"===a)for(r in i=new d(t,{}),l)delete i[r];else if("object"===a){for(r in t)r in l||(i[r]=t[r]);void 0===i.slashes&&(i.slashes=o.test(t.href))}return i}function p(t){t=u(t);var e=a.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!(e[2]&&e[2].length>=2),rest:e[2]&&1===e[2].length?"/"+e[3]:e[3]}}function d(t,e,r){if(t=u(t),!(this instanceof d))return new d(t,e,r);var o,a,s,l,h,m,v=c.slice(),g=typeof e,y=this,b=0;for("object"!==g&&"string"!==g&&(r=e,e=null),r&&"function"!=typeof r&&(r=i.parse),e=f(e),o=!(a=p(t||"")).protocol&&!a.slashes,y.slashes=a.slashes||o&&e.slashes,y.protocol=a.protocol||e.protocol||"",t=a.rest,a.slashes||(v[3]=[/(.*)/,"pathname"]);b<v.length;b++)"function"!=typeof(l=v[b])?(s=l[0],m=l[1],s!=s?y[m]=t:"string"==typeof s?~(h=t.indexOf(s))&&("number"==typeof l[2]?(y[m]=t.slice(0,h),t=t.slice(h+l[2])):(y[m]=t.slice(h),t=t.slice(0,h))):(h=s.exec(t))&&(y[m]=h[1],t=t.slice(0,h.index)),y[m]=y[m]||o&&l[3]&&e[m]||"",l[4]&&(y[m]=y[m].toLowerCase())):t=l(t);r&&(y.query=r(y.query)),o&&e.slashes&&"/"!==y.pathname.charAt(0)&&(""!==y.pathname||""!==e.pathname)&&(y.pathname=function(t,e){if(""===t)return e;for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,i=r[n-1],o=!1,a=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),a++):a&&(0===n&&(o=!0),r.splice(n,1),a--);return o&&r.unshift(""),"."!==i&&".."!==i||r.push(""),r.join("/")}(y.pathname,e.pathname)),"/"!==y.pathname.charAt(0)&&y.hostname&&(y.pathname="/"+y.pathname),n(y.port,y.protocol)||(y.host=y.hostname,y.port=""),y.username=y.password="",y.auth&&(l=y.auth.split(":"),y.username=l[0]||"",y.password=l[1]||""),y.origin=y.protocol&&y.host&&"file:"!==y.protocol?y.protocol+"//"+y.host:"null",y.href=y.toString()}d.prototype={set:function(t,e,r){var o=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||i.parse)(e)),o[t]=e;break;case"port":o[t]=e,n(e,o.protocol)?e&&(o.host=o.hostname+":"+e):(o.host=o.hostname,o[t]="");break;case"hostname":o[t]=e,o.port&&(e+=":"+o.port),o.host=e;break;case"host":o[t]=e,/:\d+$/.test(e)?(e=e.split(":"),o.port=e.pop(),o.hostname=e.join(":")):(o.hostname=e,o.port="");break;case"protocol":o.protocol=e.toLowerCase(),o.slashes=!r;break;case"pathname":case"hash":if(e){var a="pathname"===t?"/":"#";o[t]=e.charAt(0)!==a?a+e:e}else o[t]=e;break;default:o[t]=e}for(var s=0;s<c.length;s++){var u=c[s];u[4]&&(o[u[1]]=o[u[1]].toLowerCase())}return o.origin=o.protocol&&o.host&&"file:"!==o.protocol?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(t){t&&"function"==typeof t||(t=i.stringify);var e,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var o=n+(r.slashes?"//":"");return r.username&&(o+=r.username,r.password&&(o+=":"+r.password),o+="@"),o+=r.host+r.pathname,(e="object"==typeof r.query?t(r.query):r.query)&&(o+="?"!==e.charAt(0)?"?"+e:e),r.hash&&(o+=r.hash),o}},d.extractProtocol=p,d.location=f,d.trimLeft=u,d.qs=i,t.exports=d}).call(this,r(18))},function(t,e,r){var n=r(38),i=r(43),o=r(22),a=r(12),s=r(46),u=r(47);var c={M:function(t){return t.getMonth()+1},MM:function(t){return p(t.getMonth()+1,2)},Q:function(t){return Math.ceil((t.getMonth()+1)/3)},D:function(t){return t.getDate()},DD:function(t){return p(t.getDate(),2)},DDD:function(t){return n(t)},DDDD:function(t){return p(n(t),3)},d:function(t){return t.getDay()},E:function(t){return t.getDay()||7},W:function(t){return i(t)},WW:function(t){return p(i(t),2)},YY:function(t){return p(t.getFullYear(),4).substr(2)},YYYY:function(t){return p(t.getFullYear(),4)},GG:function(t){return String(o(t)).substr(2)},GGGG:function(t){return o(t)},H:function(t){return t.getHours()},HH:function(t){return p(t.getHours(),2)},h:function(t){var e=t.getHours();return 0===e?12:e>12?e%12:e},hh:function(t){return p(c.h(t),2)},m:function(t){return t.getMinutes()},mm:function(t){return p(t.getMinutes(),2)},s:function(t){return t.getSeconds()},ss:function(t){return p(t.getSeconds(),2)},S:function(t){return Math.floor(t.getMilliseconds()/100)},SS:function(t){return p(Math.floor(t.getMilliseconds()/10),2)},SSS:function(t){return p(t.getMilliseconds(),3)},Z:function(t){return f(t.getTimezoneOffset(),":")},ZZ:function(t){return f(t.getTimezoneOffset())},X:function(t){return Math.floor(t.getTime()/1e3)},x:function(t){return t.getTime()}};function l(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|]$/g,""):t.replace(/\\/g,"")}function f(t,e){e=e||"";var r=t>0?"-":"+",n=Math.abs(t),i=n%60;return r+p(Math.floor(n/60),2)+e+p(i,2)}function p(t,e){for(var r=Math.abs(t).toString();r.length<e;)r="0"+r;return r}t.exports=function(t,e,r){var n=e?String(e):"YYYY-MM-DDTHH:mm:ss.SSSZ",i=(r||{}).locale,o=u.format.formatters,f=u.format.formattingTokensRegExp;i&&i.format&&i.format.formatters&&(o=i.format.formatters,i.format.formattingTokensRegExp&&(f=i.format.formattingTokensRegExp));var p=a(t);return s(p)?function(t,e,r){var n,i,o=t.match(r),a=o.length;for(n=0;n<a;n++)i=e[o[n]]||c[o[n]],o[n]=i||l(o[n]);return function(t){for(var e="",r=0;r<a;r++)o[r]instanceof Function?e+=o[r](t,c):e+=o[r];return e}}(n,o,f)(p):"Invalid Date"}},function(t,e,r){t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=90)}({17:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n=r(18),i=function(){function t(){}return t.getFirstMatch=function(t,e){var r=e.match(t);return r&&r.length>0&&r[1]||""},t.getSecondMatch=function(t,e){var r=e.match(t);return r&&r.length>1&&r[2]||""},t.matchAndReturnConst=function(t,e,r){if(t.test(e))return r},t.getWindowsVersionName=function(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},t.getMacOSVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},t.getAndroidVersionName=function(t){var e=t.split(".").splice(0,2).map((function(t){return parseInt(t,10)||0}));if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0},t.getVersionPrecision=function(t){return t.split(".").length},t.compareVersions=function(e,r,n){void 0===n&&(n=!1);var i=t.getVersionPrecision(e),o=t.getVersionPrecision(r),a=Math.max(i,o),s=0,u=t.map([e,r],(function(e){var r=a-t.getVersionPrecision(e),n=e+new Array(r+1).join(".0");return t.map(n.split("."),(function(t){return new Array(20-t.length).join("0")+t})).reverse()}));for(n&&(s=a-Math.min(i,o)),a-=1;a>=s;){if(u[0][a]>u[1][a])return 1;if(u[0][a]===u[1][a]){if(a===s)return 0;a-=1}else if(u[0][a]<u[1][a])return-1}},t.map=function(t,e){var r,n=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(r=0;r<t.length;r+=1)n.push(e(t[r]));return n},t.find=function(t,e){var r,n;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(r=0,n=t.length;r<n;r+=1){var i=t[r];if(e(i,r))return i}},t.assign=function(t){for(var e,r,n=t,i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if(Object.assign)return Object.assign.apply(Object,[t].concat(o));var s=function(){var t=o[e];"object"==typeof t&&null!==t&&Object.keys(t).forEach((function(e){n[e]=t[e]}))};for(e=0,r=o.length;e<r;e+=1)s();return t},t.getBrowserAlias=function(t){return n.BROWSER_ALIASES_MAP[t]},t.getBrowserTypeByAlias=function(t){return n.BROWSER_MAP[t]||""},t}();e.default=i,t.exports=e.default},18:function(t,e,r){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=r(91))&&n.__esModule?n:{default:n},o=r(18);function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function t(){}var e,r;return t.getParser=function(t,e){if(void 0===e&&(e=!1),"string"!=typeof t)throw new Error("UserAgent should be a string");return new i.default(t,e)},t.parse=function(t){return new i.default(t).getResult()},e=t,(r=[{key:"BROWSER_MAP",get:function(){return o.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return o.ENGINE_MAP}},{key:"OS_MAP",get:function(){return o.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return o.PLATFORMS_MAP}}])&&a(e,r),t}();e.default=s,t.exports=e.default},91:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n=u(r(92)),i=u(r(93)),o=u(r(94)),a=u(r(95)),s=u(r(17));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(){function t(t,e){if(void 0===e&&(e=!1),null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==e&&this.parse()}var e=t.prototype;return e.getUA=function(){return this._ua},e.test=function(t){return t.test(this._ua)},e.parseBrowser=function(){var t=this;this.parsedResult.browser={};var e=s.default.find(n.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser},e.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},e.getBrowserName=function(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},e.getBrowserVersion=function(){return this.getBrowser().version},e.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},e.parseOS=function(){var t=this;this.parsedResult.os={};var e=s.default.find(i.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os},e.getOSName=function(t){var e=this.getOS().name;return t?String(e).toLowerCase()||"":e||""},e.getOSVersion=function(){return this.getOS().version},e.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},e.getPlatformType=function(t){void 0===t&&(t=!1);var e=this.getPlatform().type;return t?String(e).toLowerCase()||"":e||""},e.parsePlatform=function(){var t=this;this.parsedResult.platform={};var e=s.default.find(o.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform},e.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},e.getEngineName=function(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},e.parseEngine=function(){var t=this;this.parsedResult.engine={};var e=s.default.find(a.default,(function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some((function(e){return t.test(e)}));throw new Error("Browser's test function is not valid")}));return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine},e.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},e.getResult=function(){return s.default.assign({},this.parsedResult)},e.satisfies=function(t){var e=this,r={},n=0,i={},o=0;if(Object.keys(t).forEach((function(e){var a=t[e];"string"==typeof a?(i[e]=a,o+=1):"object"==typeof a&&(r[e]=a,n+=1)})),n>0){var a=Object.keys(r),u=s.default.find(a,(function(t){return e.isOS(t)}));if(u){var c=this.satisfies(r[u]);if(void 0!==c)return c}var l=s.default.find(a,(function(t){return e.isPlatform(t)}));if(l){var f=this.satisfies(r[l]);if(void 0!==f)return f}}if(o>0){var p=Object.keys(i),d=s.default.find(p,(function(t){return e.isBrowser(t,!0)}));if(void 0!==d)return this.compareVersion(i[d])}},e.isBrowser=function(t,e){void 0===e&&(e=!1);var r=this.getBrowserName().toLowerCase(),n=t.toLowerCase(),i=s.default.getBrowserTypeByAlias(n);return e&&i&&(n=i.toLowerCase()),n===r},e.compareVersion=function(t){var e=[0],r=t,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===t[0]||"<"===t[0]?(r=t.substr(1),"="===t[1]?(n=!0,r=t.substr(2)):e=[],">"===t[0]?e.push(1):e.push(-1)):"="===t[0]?r=t.substr(1):"~"===t[0]&&(n=!0,r=t.substr(1)),e.indexOf(s.default.compareVersions(i,r,n))>-1},e.isOS=function(t){return this.getOSName(!0)===String(t).toLowerCase()},e.isPlatform=function(t){return this.getPlatformType(!0)===String(t).toLowerCase()},e.isEngine=function(t){return this.getEngineName(!0)===String(t).toLowerCase()},e.is=function(t,e){return void 0===e&&(e=!1),this.isBrowser(t,e)||this.isOS(t)||this.isPlatform(t)},e.some=function(t){var e=this;return void 0===t&&(t=[]),t.some((function(t){return e.is(t)}))},t}();e.default=c,t.exports=e.default},92:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=/version\/(\d+(\.?_?\d+)+)/i,a=[{test:[/googlebot/i],describe:function(t){var e={name:"Googlebot"},r=i.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/opera/i],describe:function(t){var e={name:"Opera"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/opr\/|opios/i],describe:function(t){var e={name:"Opera"},r=i.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/SamsungBrowser/i],describe:function(t){var e={name:"Samsung Internet for Android"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/Whale/i],describe:function(t){var e={name:"NAVER Whale Browser"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/MZBrowser/i],describe:function(t){var e={name:"MZ Browser"},r=i.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/focus/i],describe:function(t){var e={name:"Focus"},r=i.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/swing/i],describe:function(t){var e={name:"Swing"},r=i.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/coast/i],describe:function(t){var e={name:"Opera Coast"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var e={name:"Opera Touch"},r=i.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/yabrowser/i],describe:function(t){var e={name:"Yandex Browser"},r=i.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/ucbrowser/i],describe:function(t){var e={name:"UC Browser"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/Maxthon|mxios/i],describe:function(t){var e={name:"Maxthon"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/epiphany/i],describe:function(t){var e={name:"Epiphany"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/puffin/i],describe:function(t){var e={name:"Puffin"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/sleipnir/i],describe:function(t){var e={name:"Sleipnir"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/k-meleon/i],describe:function(t){var e={name:"K-Meleon"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/micromessenger/i],describe:function(t){var e={name:"WeChat"},r=i.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/qqbrowser/i],describe:function(t){var e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},r=i.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/msie|trident/i],describe:function(t){var e={name:"Internet Explorer"},r=i.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/\sedg\//i],describe:function(t){var e={name:"Microsoft Edge"},r=i.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/edg([ea]|ios)/i],describe:function(t){var e={name:"Microsoft Edge"},r=i.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/vivaldi/i],describe:function(t){var e={name:"Vivaldi"},r=i.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/seamonkey/i],describe:function(t){var e={name:"SeaMonkey"},r=i.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/sailfish/i],describe:function(t){var e={name:"Sailfish"},r=i.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return r&&(e.version=r),e}},{test:[/silk/i],describe:function(t){var e={name:"Amazon Silk"},r=i.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/phantom/i],describe:function(t){var e={name:"PhantomJS"},r=i.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/slimerjs/i],describe:function(t){var e={name:"SlimerJS"},r=i.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e={name:"BlackBerry"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e={name:"WebOS Browser"},r=i.default.getFirstMatch(o,t)||i.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/bada/i],describe:function(t){var e={name:"Bada"},r=i.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/tizen/i],describe:function(t){var e={name:"Tizen"},r=i.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/qupzilla/i],describe:function(t){var e={name:"QupZilla"},r=i.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var e={name:"Firefox"},r=i.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/electron/i],describe:function(t){var e={name:"Electron"},r=i.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/MiuiBrowser/i],describe:function(t){var e={name:"Miui"},r=i.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/chromium/i],describe:function(t){var e={name:"Chromium"},r=i.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/chrome|crios|crmo/i],describe:function(t){var e={name:"Chrome"},r=i.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/GSA/i],describe:function(t){var e={name:"Google Search"},r=i.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:function(t){var e=!t.test(/like android/i),r=t.test(/android/i);return e&&r},describe:function(t){var e={name:"Android Browser"},r=i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/playstation 4/i],describe:function(t){var e={name:"PlayStation 4"},r=i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/safari|applewebkit/i],describe:function(t){var e={name:"Safari"},r=i.default.getFirstMatch(o,t);return r&&(e.version=r),e}},{test:[/.*/i],describe:function(t){var e=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:i.default.getFirstMatch(e,t),version:i.default.getSecondMatch(e,t)}}}];e.default=a,t.exports=e.default},93:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),a=[{test:[/Roku\/DVP/],describe:function(t){var e=i.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:o.OS_MAP.Roku,version:e}}},{test:[/windows phone/i],describe:function(t){var e=i.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.WindowsPhone,version:e}}},{test:[/windows /i],describe:function(t){var e=i.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),r=i.default.getWindowsVersionName(e);return{name:o.OS_MAP.Windows,version:e,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var e={name:o.OS_MAP.iOS},r=i.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return r&&(e.version=r),e}},{test:[/macintosh/i],describe:function(t){var e=i.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),r=i.default.getMacOSVersionName(e),n={name:o.OS_MAP.MacOS,version:e};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var e=i.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:o.OS_MAP.iOS,version:e}}},{test:function(t){var e=!t.test(/like android/i),r=t.test(/android/i);return e&&r},describe:function(t){var e=i.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),r=i.default.getAndroidVersionName(e),n={name:o.OS_MAP.Android,version:e};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e=i.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),r={name:o.OS_MAP.WebOS};return e&&e.length&&(r.version=e),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e=i.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||i.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||i.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:o.OS_MAP.BlackBerry,version:e}}},{test:[/bada/i],describe:function(t){var e=i.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.Bada,version:e}}},{test:[/tizen/i],describe:function(t){var e=i.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.Tizen,version:e}}},{test:[/linux/i],describe:function(){return{name:o.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:o.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var e=i.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:o.OS_MAP.PlayStation4,version:e}}}];e.default=a,t.exports=e.default},94:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),a=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var e=i.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",r={type:o.PLATFORMS_MAP.mobile,vendor:"Huawei"};return e&&(r.model=e),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(t){var e=t.test(/ipod|iphone/i),r=t.test(/like (ipod|iphone)/i);return e&&!r},describe:function(t){var e=i.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:o.PLATFORMS_MAP.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:o.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var e=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&e>=3},describe:function(){return{type:o.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:o.PLATFORMS_MAP.tv}}}];e.default=a,t.exports=e.default},95:function(t,e,r){"use strict";e.__esModule=!0,e.default=void 0;var n,i=(n=r(17))&&n.__esModule?n:{default:n},o=r(18),a=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:o.ENGINE_MAP.Blink};var e=i.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:o.ENGINE_MAP.EdgeHTML,version:e}}},{test:[/trident/i],describe:function(t){var e={name:o.ENGINE_MAP.Trident},r=i.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:function(t){return t.test(/presto/i)},describe:function(t){var e={name:o.ENGINE_MAP.Presto},r=i.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:function(t){var e=t.test(/gecko/i),r=t.test(/like gecko/i);return e&&!r},describe:function(t){var e={name:o.ENGINE_MAP.Gecko},r=i.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:o.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var e={name:o.ENGINE_MAP.WebKit},r=i.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return r&&(e.version=r),e}}];e.default=a,t.exports=e.default}})},function(t,e){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(19);t.exports=function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){return t instanceof Date}},function(t,e,r){var n=r(12),i=r(13);t.exports=function(t){var e=n(t),r=e.getFullYear(),o=new Date(0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);var a=i(o),s=new Date(0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);var u=i(s);return e.getTime()>=a.getTime()?r+1:e.getTime()>=u.getTime()?r:r-1}},function(e,r){e.exports=t},function(t,e,r){var n=r(31);t.exports=function(t,e){if(null==t)return{};var r,i,o=n(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)r=a[i],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o},t.exports.default=t.exports,t.exports.__esModule=!0},,function(t,e,r){"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty;function i(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function o(t){try{return encodeURIComponent(t)}catch(t){return null}}e.stringify=function(t,e){e=e||"";var r,i,a=[];for(i in"string"!=typeof e&&(e="?"),t)if(n.call(t,i)){if((r=t[i])||null!=r&&!isNaN(r)||(r=""),i=o(i),r=o(r),null===i||null===r)continue;a.push(i+"="+r)}return a.length?e+a.join("&"):""},e.parse=function(t){for(var e,r=/([^=?#&]+)=?([^&]*)/g,n={};e=r.exec(t);){var o=i(e[1]),a=i(e[2]);null===o||null===a||o in n||(n[o]=a)}return n}},function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var i=e&&e.prototype instanceof f?e:f,o=Object.create(i.prototype),a=new M(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return T()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=c(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,a),o}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function f(){}function p(){}function d(){}var h={};h[i]=function(){return this};var m=Object.getPrototypeOf,v=m&&m(m(_([])));v&&v!==e&&r.call(v,i)&&(h=v);var g=d.prototype=f.prototype=Object.create(h);function y(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var n;this._invoke=function(i,o){function a(){return new e((function(n,a){!function n(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}(i,o,n,a)}))}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function _(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return p.prototype=g.constructor=d,d.constructor=p,p.displayName=s(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},y(b.prototype),b.prototype[o]=function(){return this},t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(u(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},y(g),s(g,a,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=_,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){var n=r(1);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){function r(e,n){return t.exports=r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,r(e,n)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if(null==t)return{};var r,n,i={},o=Object.keys(t);for(n=0;n<o.length;n++)r=o[n],e.indexOf(r)>=0||(i[r]=t[r]);return i},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(19);t.exports=function(t){if(Array.isArray(t))return n(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0},function(t,e,r){var n=r(12),i=r(40),o=r(41);t.exports=function(t){var e=n(t);return o(e,i(e))+1}},function(t,e){t.exports=function(t){var e=new Date(t.getTime()),r=e.getTimezoneOffset();return e.setSeconds(0,0),6e4*r+e.getTime()%6e4}},function(t,e,r){var n=r(12);t.exports=function(t){var e=n(t),r=new Date(0);return r.setFullYear(e.getFullYear(),0,1),r.setHours(0,0,0,0),r}},function(t,e,r){var n=r(42);t.exports=function(t,e){var r=n(t),i=n(e),o=r.getTime()-6e4*r.getTimezoneOffset(),a=i.getTime()-6e4*i.getTimezoneOffset();return Math.round((o-a)/864e5)}},function(t,e,r){var n=r(12);t.exports=function(t){var e=n(t);return e.setHours(0,0,0,0),e}},function(t,e,r){var n=r(12),i=r(13),o=r(45);t.exports=function(t){var e=n(t),r=i(e).getTime()-o(e).getTime();return Math.round(r/6048e5)+1}},function(t,e,r){var n=r(12);t.exports=function(t,e){var r=e&&Number(e.weekStartsOn)||0,i=n(t),o=i.getDay(),a=(o<r?7:0)+o-r;return i.setDate(i.getDate()-a),i.setHours(0,0,0,0),i}},function(t,e,r){var n=r(22),i=r(13);t.exports=function(t){var e=n(t),r=new Date(0);return r.setFullYear(e,0,4),r.setHours(0,0,0,0),i(r)}},function(t,e,r){var n=r(21);t.exports=function(t){if(n(t))return!isNaN(t);throw new TypeError(toString.call(t)+" is not an instance of Date")}},function(t,e,r){var n=r(48),i=r(49);t.exports={distanceInWords:n(),format:i()}},function(t,e){t.exports=function(){var t={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};return{localize:function(e,r,n){var i;return n=n||{},i="string"==typeof t[e]?t[e]:1===r?t[e].one:t[e].other.replace("{{count}}",r),n.addSuffix?n.comparison>0?"in "+i:i+" ago":i}}}},function(t,e,r){var n=r(50);t.exports=function(){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e=["January","February","March","April","May","June","July","August","September","October","November","December"],r=["Su","Mo","Tu","We","Th","Fr","Sa"],i=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=["AM","PM"],s=["am","pm"],u=["a.m.","p.m."],c={MMM:function(e){return t[e.getMonth()]},MMMM:function(t){return e[t.getMonth()]},dd:function(t){return r[t.getDay()]},ddd:function(t){return i[t.getDay()]},dddd:function(t){return o[t.getDay()]},A:function(t){return t.getHours()/12>=1?a[1]:a[0]},a:function(t){return t.getHours()/12>=1?s[1]:s[0]},aa:function(t){return t.getHours()/12>=1?u[1]:u[0]}};return["M","D","DDD","d","Q","W"].forEach((function(t){c[t+"o"]=function(e,r){return function(t){var e=t%100;if(e>20||e<10)switch(e%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"}(r[t](e))}})),{formatters:c,formattingTokensRegExp:n(c)}}},function(t,e){var r=["M","MM","Q","D","DD","DDD","DDDD","d","E","W","WW","YY","YYYY","GG","GGGG","H","HH","h","hh","m","mm","s","ss","S","SS","SSS","Z","ZZ","X","x"];t.exports=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);var i=r.concat(e).sort().reverse();return new RegExp("(\\[[^\\[]*\\])|(\\\\)?("+i.join("|")+"|.)","g")}},function(t,e,r){"use strict";r.r(e),r.d(e,"metrics",(function(){return He}));var n,i,o,a,s,u,c=r(0),l=r.n(c),f={getDoneMark:function(){return null},setGetDoneMark:function(t){f.getDoneMark=t}},p={enabled:!1,enable:function(){this.enabled=!0},log:function(){if(this.enabled){for(var t,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];(t=console).log.apply(t,["BM log: "].concat(r))}},logCond:function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];this.enabled&&t&&r.length>1&&this.log.apply(this,r)}},d=r(24),h=r.n(d),m=r(5),v=r.n(m),g=r(7),y=r.n(g),b=r(11),w=r.n(b),O=r(3),S=r.n(O),M=r(8),_=r.n(M),T=r(9),E=r.n(T),P=r(1),k=r.n(P);!function(t){t.PAGE_LOAD="PAGE_LOAD",t.PAGE_SEGMENT_LOAD="PAGE_SEGMENT_LOAD",t.INLINE_RESULT="INLINE_RESULT",t.CUSTOM="CUSTOM",t.WEB_VITALS="WEB_VITALS"}(n||(n={})),function(t){t.PAGE_LOAD="page-load",t.PAGE_SEGMENT_LOAD="page-segment-load",t.INLINE_RESULT="inline-result",t.CUSTOM="custom",t.WEB_VITALS="web-vitals"}(i||(i={})),function(t){t.fmp="fmp",t.tti="tti"}(o||(o={})),function(t){t.fmp="fmp",t.tti="tti"}(a||(a={})),function(t){t.response="response",t.result="result"}(s||(s={})),function(t){t.OFF="OFF",t.IF_PRESENT="IF_PRESENT",t.WAIT_UNTIL_PRESENT="WAIT_UNTIL_PRESENT"}(u||(u={}));var x,A=function(t){var e=t;return Boolean(void 0!==e.result||void 0!==e.response)};!function(t){t.NEVER="never",t.WHEN_FMP="when-fmp",t.WHEN_AVAILABLE="when-available"}(x||(x={}));var D,L,I=r(6),F=r.n(I),j=r(10),N=r.n(j),R=["ssr"],C=new(function(){function t(){var e=this;v()(this,t),l()(this,"observers",[]),l()(this,"broadcast",(function(){e.observers.forEach((function(t){return t()})),e.observers=[]}))}return y()(t,[{key:"start",value:function(){document.addEventListener("visibilitychange",this.broadcast),window.addEventListener("pagehide",this.broadcast)}},{key:"subscribe",value:function(t){this.observers.push(t)}},{key:"unsubscribe",value:function(t){this.observers=this.observers.filter((function(e){return e!==t}))}}]),t}());function B(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function G(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?B(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function V(){return"visible"===document.visibilityState?L.VISIBLE:L.HIDDEN}!function(t){t.NOT_STARTED="not-started",t.STARTED="started",t.FINISHED="finished",t.CANCELLED="cancelled"}(D||(D={})),function(t){t.VISIBLE="visible",t.MIXED="mixed",t.HIDDEN="hidden"}(L||(L={}));var U=function(){function t(e){var r,n=this;v()(this,t),l()(this,"state",D.NOT_STARTED),l()(this,"startTime",null),l()(this,"stopTime",null),l()(this,"marks",{}),l()(this,"onStopCallbacks",[]),l()(this,"custom",null),l()(this,"submetrics",[]),l()(this,"route",null),l()(this,"untilOnStopCallback",null),l()(this,"pageVisibleState",V()),l()(this,"setPageVisibleStateToMixed",(function(){n.pageVisibleState=L.MIXED})),this.config=e,this.key=e.key.replace(/ /gi,"-"),this.type=e.type,null===(r=this.config.timings)||void 0===r||r.forEach((function(t){R.includes(t.key)&&(console.warn("Entry ".concat(t.key," is restricted and has been renamed to custom__").concat(t.key)),t.key="custom__".concat(t.key))}))}return y()(t,[{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startTime,r=void 0===e?window.performance.now():e;this.clear(),p.logCond(!!this.config.debug,this.key,r),this.state=D.STARTED,this.startTime=r,this.pageVisibleState=V(),C.subscribe(this.setPageVisibleStateToMixed),this.watchUntil()}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.stopTime,r=void 0===e?window.performance.now():e;return this.state!==D.STARTED||null===this.startTime?(p.log("metric ".concat(this.config.key," has been stopped while not being started before; current state: ").concat(this.state)),!1):r<this.startTime?(p.log("metric ".concat(this.config.key," has been stopped with stopTime lower than startTime; startTime: ").concat(this.startTime,"; stopTime: ").concat(r)),!1):(this.stopTime=r,this.state=D.FINISHED,this.handleStop(t),C.unsubscribe(this.setPageVisibleStateToMixed),!0)}},{key:"handleStop",value:function(t){var e=this,r=t.customData,n=void 0===r?null:r;n&&(this.custom=G(G({},this.custom),n)),this.config.include&&this.config.include.forEach((function(t){var r=t.getData();r.state===D.FINISHED&&null!==r.start&&r.start>=(e.startTime||0)&&e.addSubMetric(t.getData())})),this.onStopCallbacks.forEach((function(e){(0,N()(e,1)[0])(t)})),this.onStopCallbacks=[],p.logCond(!!this.config.debug,this.key,this.config.debug&&this.getData())}},{key:"mark",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.performance.now();this.marks[t]=e}},{key:"cancel",value:function(){this.state===D.STARTED&&(this.state=D.CANCELLED,this.cancelUntil(),this.onStopCallbacks.forEach((function(t){(0,N()(t,2)[1])()})),this.onStopCallbacks=[],C.unsubscribe(this.setPageVisibleStateToMixed))}},{key:"merge",value:function(t){this.state=t.state,this.pageVisibleState=t.pageVisibleState,this.startTime=t.start,this.stopTime=t.stop,this.marks=G(G({},this.marks),t.marks),this.submetrics=[].concat(F()(this.submetrics),F()(t.submetrics)),this.onStopCallbacks=[].concat(F()(this.onStopCallbacks),F()(t.onStopCallbacks))}},{key:"onStop",value:function(t,e){this.onStopCallbacks.push([t,e])}},{key:"removeOnStopCallback",value:function(t){var e=this.onStopCallbacks.findIndex((function(e){var r=N()(e,1)[0];return t===r}));e>-1&&this.onStopCallbacks.splice(e,1)}},{key:"getData",value:function(){return{key:this.key,state:this.state,start:this.startTime,stop:this.stopTime,marks:this.marks,custom:this.custom,submetrics:this.submetrics,config:this.config,route:this.route,pageVisibleState:this.pageVisibleState,type:this.config.type}}},{key:"getDataToMerge",value:function(){return G(G({},this.getData()),{},{onStopCallbacks:this.onStopCallbacks})}},{key:"addSubMetric",value:function(t){this.submetrics.push(t)}},{key:"watchUntil",value:function(){var t=this;this.config.until&&(this.untilOnStopCallback=function(e){t.stop(e||{})},this.config.until.onStop(this.untilOnStopCallback,(function(){t.cancel()})))}},{key:"cancelUntil",value:function(){this.config.until&&this.config.until.state!==D.CANCELLED&&this.untilOnStopCallback&&this.config.until.removeOnStopCallback(this.untilOnStopCallback)}},{key:"clear",value:function(){this.cancelUntil(),this.state=D.NOT_STARTED,this.startTime=null,this.stopTime=null,this.marks={},this.custom=null,this.submetrics=[],this.route=null,this.pageVisibleState=V()}}]),t}();function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=k()(t);if(e){var i=k()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var z=function(t){_()(r,t);var e=H(r);function r(t){var n;return v()(this,r),n=e.call(this,t),l()(w()(n),"isInitial",!0),l()(w()(n),"explicitTimings",null),n.config=t,n}return y()(r,[{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startTime;void 0===e&&window.performance.now()}},{key:"startPageLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isInitial:!1};this.isInitial=t.isInitial,t.isInitial?S()(k()(r.prototype),"start",this).call(this,{startTime:0}):S()(k()(r.prototype),"start",this).call(this,t),p.logCond(!!this.config.debug,this.key,this.startTime)}},{key:"stopPageLoad",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{stopTime:window.performance.now()};return t.state!==D.STARTED||null===t.start||void 0===e.stopTime?(p.log("meta metric has been stopped while not being started before; current state: ".concat(this.state)),!1):e.stopTime<t.start?(p.log("metric ".concat(this.config.key," has been stopped with stopTime lower than startTime; startTime: ").concat(t.start,"; stopTime: ").concat(e.stopTime)),!1):(this.merge(t),this.stopTime=e.stopTime,this.state=D.FINISHED,this.handleStop(e),!0)}},{key:"handleStop",value:function(t){if(this.config.until){var e=this.config.until.getData();!(r.FMP in this.marks)&&r.FMP in e.marks&&this.markFMP(e.marks.fmp)}S()(k()(r.prototype),"handleStop",this).call(this,t)}},{key:"mark",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.performance.now();t!==r.FMP&&S()(k()(r.prototype),"mark",this).call(this,t,e)}},{key:"merge",value:function(t){S()(k()(r.prototype),"merge",this).call(this,t),this.isInitial=t.isInitial,this.explicitTimings=this.explicitTimings||t.explicitTimings?q(q({},t.explicitTimings),this.explicitTimings):null}},{key:"markFMP",value:function(t){S()(k()(r.prototype),"mark",this).call(this,r.FMP,t)}},{key:"getPageLoadData",value:function(){return{isInitial:this.isInitial,explicitTimings:this.explicitTimings}}},{key:"getData",value:function(){return q(q({},S()(k()(r.prototype),"getData",this).call(this)),this.getPageLoadData())}},{key:"getDataToMerge",value:function(){return q(q({},S()(k()(r.prototype),"getDataToMerge",this).call(this)),this.getPageLoadData())}},{key:"clear",value:function(){this.explicitTimings=null,S()(k()(r.prototype),"clear",this).call(this)}}]),r}(U);function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=k()(t);if(e){var i=k()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}l()(z,"FMP","fmp");var K=new(function(t){_()(r,t);var e=Y(r);function r(){var t;v()(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i)),l()(w()(t),"activePageLoadMetric",null),t}return y()(r,[{key:"startPageLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isInitial:!1,cancelStarted:!1},e=t.cancelStarted,n=h()(t,["cancelStarted"]);(e||this.state!==D.STARTED)&&S()(k()(r.prototype),"startPageLoad",this).call(this,n)}},{key:"setActive",value:function(t){this.activePageLoadMetric=t}},{key:"setDebug",value:function(t){this.config.debug=t}},{key:"isDebugMode",value:function(){return this.config.debug}},{key:"isInitialLoad",value:function(){return this.isInitial}},{key:"clear",value:function(){this.activePageLoadMetric&&this.activePageLoadMetric.cancel(),S()(k()(r.prototype),"clear",this).call(this)}},{key:"include",value:function(t){this.config.include?this.config.include.push(t):this.config.include=[t]}},{key:"experimental__addExplicitTiming",value:function(t,e){null===this.explicitTimings&&(this.explicitTimings={}),this.explicitTimings[t]=e}}]),r}(z))({type:n.PAGE_LOAD,key:"page_load_meta_metric"}),Q=r(2),$=r.n(Q),X=r(4),Z=r.n(X),J=new(function(){function t(){v()(this,t),l()(this,"ttciPromise",null),l()(this,"webVitalsPromises",[]),l()(this,"data",{"metric:ttci":null,"metric:ttfb":null,"metric:fid":null,"metric:fcp":null,"metric:lcp":null,"metric:cls":null})}var e,n,i,o;return y()(t,[{key:"ttciDetermined",value:(o=Z()($.a.mark((function t(){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ttciPromise;case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"webVitalsDetermined",value:(i=Z()($.a.mark((function t(){return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.webVitalsPromises);case 2:return t.abrupt("return",!0);case 3:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"start",value:function(){this.registerTTCI(),this.registerWebVitals()}},{key:"registerWebVitals",value:(n=Z()($.a.mark((function t(){var e,n,i,o,a,s,u=this;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.resolve().then(r.bind(null,53));case 3:e=t.sent,n=e.getCLS,i=e.getFCP,o=e.getFID,a=e.getLCP,s=e.getTTFB,this.webVitalsPromises=[s,o,i,a,n].map((function(t){return new Promise((function(e){t((function(t){var r=t.name,n=t.value,i=r.toLowerCase(),o="cls"===i?parseFloat(n.toFixed(2)):Math.round(n);u.data["metric:".concat(i)]=o,e()}))}))})),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return n.apply(this,arguments)})},{key:"registerTTCI",value:(e=Z()($.a.mark((function t(){var e,n=this;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Promise.resolve().then(r.t.bind(null,54,7));case 3:e=t.sent,this.ttciPromise=e.getFirstConsistentlyInteractive().then((function(t){return n.data["metric:ttci"]="number"==typeof t?Math.round(t):t,!0})),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,this,[[0,7]])}))),function(){return e.apply(this,arguments)})}]),t}()),tt={route:"",setRoute:function(t){this.route=t},getRoute:function(){return this.route}},et=function(t){return t.type===n.PAGE_LOAD},rt=function(t){return t.type===n.PAGE_SEGMENT_LOAD},nt=function(t,e){return et(e)||rt(e)?{"event:initial":e.isInitial}:null},it=function(t){switch(t){case n.CUSTOM:return i.CUSTOM;case n.INLINE_RESULT:return i.INLINE_RESULT;case n.PAGE_LOAD:return i.PAGE_LOAD;case n.PAGE_SEGMENT_LOAD:return i.PAGE_SEGMENT_LOAD;case n.WEB_VITALS:return i.WEB_VITALS;default:return"unknown"}},ot=r(16),at=r.n(ot);function st(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?st(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ct=function(t,e){return Boolean(e.initial)?t?e.initial.threshold:e.transition.threshold:e.threshold},lt=function(t,e,r){return t?r.initial[e]:r.transition[e]},ft=function(t,e){return Boolean(e.initial)?t?e.initial.threshold:e.transition.threshold:e.threshold},pt=function(t,e,r){return t?r.initial[e]:r.transition[e]},dt=function(){return{"pageVisible:value":!document.hidden||!1}};function ht(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var vt=function(){var t=Z()($.a.mark((function t(e,r,n){var i,o,a,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=r.pageVisibleState,a=function(){o=L.MIXED},C.subscribe(a),t.next=5,gt((null===(i=n.webVitals)||void 0===i?void 0:i.timeout)||3e4);case 5:return s=t.sent,C.unsubscribe(a),t.abrupt("return",mt(mt({},s),{},{"pageVisible:state":o},dt()));case 8:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),gt=function(){var t=Z()($.a.mark((function t(e){var r;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,J.ttciDetermined();case 2:return r=new Promise((function(t){return setTimeout(t,e)})),t.next=5,Promise.race([r,J.webVitalsDetermined()]);case 5:return t.abrupt("return",J.data);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),yt=function(t,e){return{"pageVisible:state":e.pageVisibleState}},bt=function(){var t=Z()($.a.mark((function t(e){var r;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:if(!(r=t.sent)){t.next=6;break}return t.abrupt("return",{"ssr:featureFlags":r});case 6:t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),wt=function(){var t=Z()($.a.mark((function t(e,r,n){var i,o,a,s,u;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(i=n.ssr)||void 0===i?void 0:i.getFeatureFlags){t.next=2;break}return t.abrupt("return",null);case 2:if(!((u=(null===(o=e.ssr)||void 0===o?void 0:o.includeFeatureFlags)||(null===(a=n.ssr)||void 0===a?void 0:a.includeFeatureFlags)||x.WHEN_FMP)===x.WHEN_AVAILABLE||(null===(s=e.ssr)||void 0===s?void 0:s.doneAsFmp)&&u===x.WHEN_FMP)){t.next=7;break}return t.next=6,bt(n.ssr.getFeatureFlags);case 6:return t.abrupt("return",t.sent);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),Ot=r(17),St=r.n(Ot),Mt=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=t.timings||[],o=i.reduce((function(t,i){if(i.startMark&&!e.marks[i.startMark])return t;if(i.endMark&&!e.marks[i.endMark])return t;if(null===e.start||null===e.stop)return null;var o=Math.round((void 0!==e.marks[i.startMark]?e.marks[i.startMark]:e.start)-e.start+r),a=Math.round((void 0!==e.marks[i.endMark]?e.marks[i.endMark]:e.stop)-e.start-o+r);return t["".concat(n).concat(i.key)]={startTime:o,duration:a},t}),{});return o},_t=r(14),Tt=r.n(_t),Et=function(t,e,r){if(!r.ssr||!r.ssr.getTimings)return null;var n=r.ssr.getTimings();if(!n)return null;var i=Object.entries(n).reduce((function(t,e){var r;return function(t){return!(!t||"object"!==Tt()(t)||t.startTime<0||t.duration<0)}(e[1])&&(t[(r=e[0],"total"===r?"ssr":"".concat("ssr").concat("/").concat(r))]=function(t){return{startTime:Math.round(t.startTime),duration:Math.round(t.duration)}}(e[1])),t}),{});return i&&0!==Object.keys(i).length?i:null};function Pt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function kt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Pt(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var xt=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.performance,i={},o={};if(n.getEntriesByType("mark").forEach((function(t){if(r.bundleEvalTimings){var n=r.bundleEvalTimings.mapPerformanceMark(t.name);if(n){var a=n.type,s=n.name;"start"===a&&null!==e.start&&t.startTime>=e.start?i[s]=t:"end"===a&&i[s]&&(o[s]={startTime:Math.round(i[s].startTime-e.start),duration:Math.round(t.startTime-i[s].startTime)},delete i[s])}}})),r.bundleEvalTimings&&r.bundleEvalTimings.additionalTimings&&null!==e.start){var a=r.bundleEvalTimings.additionalTimings(e.start);a&&Object.entries(a).forEach((function(t){var e=N()(t,2),r=e[0],n=e[1];o[r]=n}))}return 0===Object.keys(o).length?null:{"timings:bundleEval":o}},At=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return new Promise((function(t){setTimeout((function(){t(xt.apply(void 0,e))}))}))};function Dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var It=["script","link"],Ft=function(t,e,r){return It.includes(t)?void 0!==r&&0!==r||0!==e?0===r&&e>0?"disk":void 0===r?null:"network":"memory":"network"},jt=function(t,e,r){return!It.includes(e)||t.includes("localhost")||t.includes(window.location.hostname)||r(t)},Nt=["script","link","fetch"],Rt=function(){return!1},Ct=function(t){return void 0!==t?{size:t}:null},Bt=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Rt,n=t.name,i=t.duration,o=t.transferSize,a=t.initiatorType,s=t.responseStart,u=Math.round(s-e);if(!jt(n,a,r))return{};if(It.includes(a)){var c=Ft(a,i,o);return c?"network"!==c?{transferType:c}:Lt({ttfb:u,transferType:c},Ct(o)):Lt({ttfb:u},Ct(o))}return Lt({ttfb:u},Ct(o))};function Gt(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Vt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ut,Wt,qt,Ht=[function(t,e,r){return{"event:key":"".concat(r.product,".fe.").concat(it(t.type),".").concat(t.key)}},function(t){return{"event:type":it(t.type)}},function(t,e,r){return{"event:product":"".concat(r.product)}},function(t,e){return e.route?{"event:route":e.route}:null},function(t){return{"event:id":t.key}},function(){return{"event:localHour":parseInt(at()(new Date,"H"),10),"event:localDayOfWeek":parseInt(at()(new Date,"E"),10)}},function(t,e,r){return{"event:region":"".concat(r.region)}},function(t,e,r){return r.app.framework?{"app:framework:name":r.app.framework.name,"app:framework:version":r.app.framework.version}:null},function(t,e,r){var n={"app:web:version":r.app.version.web};return r.app.version.ssr&&(n["app:ssr:version"]=r.app.version.ssr),n},function(){return{"bm:version":3}},function(){if(!St.a.getParser)return null;var t=St.a.getParser(window.navigator.userAgent);return{"telemetry:browser:name":t.getBrowserName(),"telemetry:browser:version":t.getBrowserVersion()}},function(){return navigator.hardwareConcurrency?{"telemetry:cpus":navigator.hardwareConcurrency}:null},function(){return navigator.deviceMemory?{"telemetry:memory":navigator.deviceMemory}:null},function(){return navigator.connection?{"telemetry:network:effectiveType":navigator.connection.effectiveType,"telemetry:network:rtt":navigator.connection.rtt,"telemetry:network:downlink":navigator.connection.downlink}:null},function(t,e){var r={},n=!1;return e.custom&&Object.entries(e.custom).forEach((function(t){var e=N()(t,2),i=e[0],o=e[1];n=!0,r["custom:".concat(i)]=o})),n?r:null},function(t,e,r){var n,i=(null===(n=t.featureFlags)||void 0===n?void 0:n.reduce((function(t,e){return t[e]=r.ffClient.getValue(e),t}),{}))||null;return r.featureFlags&&0!==Object.keys(r.featureFlags).length||i&&0!==Object.keys(i).length?{featureFlags:ut(ut({},i),r.featureFlags)}:null},function(t,e,r){return{hostname:r.hostname}},function(t,e,r){if(!r.custom&&!r.plugins)return null;var n={};return r.custom&&Object.entries(r.custom).forEach((function(t){var e=N()(t,2),i=e[0],o=e[1];n["".concat(r.product,":").concat(i)]=o})),r.plugins&&r.plugins.forEach((function(t){var i=t({start:e.start,stop:e.stop,key:e.key});null!==i&&Object.entries(i).forEach((function(t){var e=N()(t,2),i=e[0],o=e[1];n["".concat(r.product,":").concat(i)]=o}))})),n},function(t,e,r){var i=t.type===n.PAGE_LOAD&&e.explicitTimings||null,o=function(t,e){if(!t.timings&&0===e.submetrics.length)return null;var r=Mt(t,e);return e.submetrics.forEach((function(t){if(null!==t.start&&null!==t.stop){var n="include:".concat(t.config.key);r[n]={startTime:Math.round(t.start-e.start),duration:Math.round(t.stop-t.start)},Object.assign(r,Mt(t.config,t,t.start-e.start,n+"/"))}})),0===Object.keys(r).length?null:r}(t,e),a=t.type===n.PAGE_LOAD&&e.isInitial?Et(0,0,r):null,s=(i||o||a)&&kt(kt(kt({},i),o),a);return s?{"timings:app":s}:null},function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window.performance;if(null===e.start)return null;var i=n.getEntriesByType("resource").filter((function(t){return t.startTime>=e.start}));if(!i.length)return null;var o={};return i.forEach((function(t){if(Nt.includes(t.initiatorType)){var n=t.name,i=t.startTime,a=t.duration,s=t.initiatorType;if(n){var u="fetch"===s?r.resourceTimings.sanitiseEndpoints(n):r.resourceTimings.mapResources(n);o[u]||(o[u]=Lt({startTime:Math.round(i-e.start),duration:Math.round(a),type:s},Bt(t,e.start,r.resourceTimings.hasTimingHeaders)))}}})),{"timings:resource":o}}],zt=[].concat(Ht,[yt,dt,nt,function(t,e,r){if(!function(t){return t.type===n.PAGE_LOAD}(t))throw new Error("Browser Metrics: cannot gather page load data for non-page-load config");var i=e.marks[o.fmp]||e.stop,a={"metric:fmp":Math.round(i-e.start),"metric:tti":Math.round(e.stop-e.start)};if(t.histogram)a["metric:fmp:histogramBuckets"]=lt(e.isInitial,o.fmp,t.histogram),a["metric:tti:histogramBuckets"]=lt(e.isInitial,o.tti,t.histogram);else if(r.histogram){var s=r.histogram;a["metric:fmp:histogramBuckets"]=lt(e.isInitial,o.fmp,s),a["metric:tti:histogramBuckets"]=lt(e.isInitial,o.tti,s)}if(t.slo&&t.slo.fmp){var u=ct(e.isInitial,t.slo.fmp);a["metric:fmp:slo"]=a["metric:fmp"]<=u,a["metric:fmp:slo:threshold"]=u}if(t.slo&&t.slo.tti){var c=ct(e.isInitial,t.slo.tti);a["metric:tti:slo"]=a["metric:tti"]<=c,a["metric:tti:slo:threshold"]=c}return a},At]),Yt=[].concat(F()(zt),[function(){var t={};return performance.getEntriesByType("paint").forEach((function(e){"first-paint"===e.name&&(t["metric:fp"]=Math.round(e.startTime)),"first-contentful-paint"===e.name&&(t["metric:fcp"]=Math.round(e.startTime))})),t},function(){var t=performance.getEntriesByType("navigation");if(0===t.length)return null;var e=t[0];return{"metrics:navigation":{redirectStart:Math.round(e.redirectStart),redirectEnd:Math.round(e.redirectEnd),fetchStart:Math.round(e.fetchStart),domainLookupStart:Math.round(e.domainLookupStart),domainLookupEnd:Math.round(e.domainLookupEnd),connectStart:Math.round(e.connectStart),connectEnd:Math.round(e.connectEnd),secureConnectionStart:Math.round(e.secureConnectionStart),requestStart:Math.round(e.requestStart),responseStart:Math.round(e.responseStart),responseEnd:Math.round(e.responseEnd),encodedBodySize:Math.round(e.encodedBodySize),redirectCount:e.redirectCount,type:e.type,unloadEventEnd:Math.round(e.unloadEventEnd),unloadEventStart:Math.round(e.unloadEventStart)}}},function(t,e,r){return t.ssr&&t.ssr.doneAsFmp&&r.ssr&&r.ssr.getDoneMark&&r.ssr.getDoneMark()?{"ssr:success":!0}:null},wt]),Kt=F()(zt),Qt=[].concat(Ht,[function(t,e,r){var i,s;if(!function(t){return t.type===n.PAGE_SEGMENT_LOAD}(t))throw new Error("Browser Metrics: cannot gather page segment load data for non-page-segment-load config");var c=e.marks[a.fmp]||e.stop,l={"metric:fmp":Math.round(c-e.start),"metric:tti":Math.round(e.stop-e.start)};if(t.histogram)l["metric:fmp:histogramBuckets"]=pt(e.isInitial,a.fmp,t.histogram),l["metric:tti:histogramBuckets"]=pt(e.isInitial,a.tti,t.histogram);else if(r.histogram){var f=r.histogram;l["metric:fmp:histogramBuckets"]=pt(e.isInitial,a.fmp,f),l["metric:tti:histogramBuckets"]=pt(e.isInitial,a.tti,f)}if(null===(i=t.slo)||void 0===i?void 0:i.fmp){var p=ft(e.isInitial,t.slo.fmp);l["metric:fmp:slo"]=l["metric:fmp"]<=p,l["metric:fmp:slo:threshold"]=p}if(null===(s=t.slo)||void 0===s?void 0:s.tti){var d=ft(e.isInitial,t.slo.tti);l["metric:tti:slo"]=l["metric:tti"]<=d,l["metric:tti:slo:threshold"]=d}if(t.includePageLoadTimings===u.IF_PRESENT||t.includePageLoadTimings===u.WAIT_UNTIL_PRESENT){var h=K.getData(),m=null!==h.stop&&null!==h.start?Math.round((h.marks[o.fmp]||h.stop)-h.start):null,v=null!==h.stop&&null!==h.start?Math.round(h.stop-h.start):null;l.pageLoad={fmp:m,tti:v}}return l},yt,dt,nt,At]),$t=[].concat(Ht,[yt,dt,function(t,e,r){var i;if(!function(t){return t.type===n.INLINE_RESULT}(t))return null;var o={"metric:result":Math.round(e.stop-e.start)};if(null===(i=t.histogram)||void 0===i?void 0:i.result)o["metric:result:histogramBuckets"]=t.histogram.result;else if(r.histogram){var a=r.histogram;void 0!==a.result&&(o["metric:result:histogramBuckets"]=a[s.result])}if(t.slo&&A(t.slo)&&t.slo.result&&(o["metric:result:slo"]=o["metric:result"]<=t.slo.result.threshold,o["metric:result:slo:threshold"]=t.slo.result.threshold),e.marks.feedback){var u;if(o["metric:response"]=Math.round((e.marks.feedback||e.stop)-e.start),null===(u=t.histogram)||void 0===u?void 0:u.response)o["metric:response:histogramBuckets"]=t.histogram[s.response];else if(r.histogram){var c=r.histogram;void 0!==c.result&&(o["metric:response:histogramBuckets"]=c[s.response])}t.slo&&A(t.slo)&&t.slo.response&&(o["metric:response:slo"]=o["metric:response"]<=t.slo.response.threshold,o["metric:response:slo:threshold"]=t.slo.response.threshold)}return o}]),Xt=[].concat(Ht,[yt,dt,function(t,e,r){var i,o;if(!function(t){return t.type===n.CUSTOM}(t))return null;var a,s,u={"metric:duration":Math.round(e.stop-e.start)};void 0!==(null===(i=t.slo)||void 0===i?void 0:i.threshold)&&(u["metric:duration:slo"]=u["metric:duration"]<=(null===(a=t.slo)||void 0===a?void 0:a.threshold),u["metric:duration:slo:threshold"]=null===(s=t.slo)||void 0===s?void 0:s.threshold);return(null===(o=t.histogram)||void 0===o?void 0:o.duration)?u["metric:duration:histogramBuckets"]=t.histogram.duration:r.histogram&&(u["metric:duration:histogramBuckets"]=r.histogram.duration),u}]),Zt=[].concat(Ht,[vt]),Jt=function(){var t=Z()($.a.mark((function t(e,r){var i,o,a,s,u,c,l,f;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==r.start&&null!==r.stop){t.next=3;break}return p.log('eventDataProcessor: Metric "'.concat(r.key,'" start or stop are incorrect; start: ').concat(r.start,"; stop: ").concat(r.stop)),t.abrupt("return",null);case 3:i=[],r.config.type===n.PAGE_LOAD&&et(r)&&r.isInitial&&(i=Yt),r.config.type===n.PAGE_LOAD&&et(r)&&!r.isInitial&&(i=Kt),r.config.type===n.PAGE_SEGMENT_LOAD&&rt(r)&&(i=Qt),r.config.type===n.INLINE_RESULT&&(i=$t),r.config.type===n.CUSTOM&&(i=Xt),r.config.type===n.WEB_VITALS&&(i=Zt),o=[],a=Gt(i),t.prev=12,a.s();case 14:if((s=a.n()).done){t.next=22;break}return u=s.value,t.next=18,u(r.config,r,e);case 18:c=t.sent,o.push(c);case 20:t.next=14;break;case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(12),a.e(t.t0);case 27:return t.prev=27,a.f(),t.finish(27);case 30:return t.next=32,Promise.all(o);case 32:return l=t.sent,f={},l.forEach((function(t){null!==t&&Object.keys(t).forEach((function(e){var r=t[e];null!=r&&(f[e]=r)}))})),t.abrupt("return",f);case 36:case"end":return t.stop()}}),t,null,[[12,24,27,30]])})));return function(e,r){return t.apply(this,arguments)}}();!function(t){t.UNCAUGHT="fe.error.uncaught",t.REQUEST="fe.error.request",t.API="fe.error.api",t.GRAPHQL="fe.error.graphql",t.VALIDATION="fe.error.validation",t.INPUT="fe.error.input",t.UNHANDLED_PROMISE_REJECTION="fe.error.unhandledrejection",t.COMPONENT="fe.error.component",t.COMPONENT_BOUNDARY="fe.error.component.boundary",t.COMPONENT_GRAPHQL="fe.error.component.graphql",t.COMPONENT_API="fe.error.component.api"}(Ut||(Ut={})),function(t){t.APDEX="fe.perf.apdex",t.SPEED_INDEX="fe.perf.speedindex",t.TIME_TO_INTERACTIVE="fe.perf.time_to_interactive",t.TIME_TO_INTERACTIVE_SLO="fe.perf.time_to_interactive.slo",t.TIME_TO_FIRST_BYTE="fe.perf.time_to_first_byte",t.FIRST_PAINT="fe.perf.first_paint",t.FIRST_CONTENTFUL_PAINT="fe.perf.first_contentful_paint",t.FIRST_MEANINGFUL_PAINT="fe.perf.first_meaningful_paint",t.FIRST_MEANINGFUL_PAINT_SLO="fe.perf.first_meaningful_paint.slo",t.FIRST_INPUT_DELAY="fe.perf.first_input_delay",t.REQUEST_TIMING="fe.perf.request_timing",t.REQUEST_TIMING_SLO="fe.perf.request_timing.slo",t.RESOURCE_TIMING="fe.perf.resource_timing",t.CACHE_HITS="fe.perf.cache_hits",t.COMPONENT_PREVIEW="fe.perf.component.time_to_preview",t.COMPONENT_INTERACTIVE="fe.perf.component.time_to_interactive",t.COMPONENT_READY="fe.perf.component.time_to_ready",t.COMPONENT_READY_SLO="fe.perf.component.time_to_ready.slo",t.COMPONENT_REQUEST_TIMING="fe.perf.component.request_timing"}(Wt||(Wt={})),function(t){t.TASK_SUCCESS="fe.user.task.success",t.TASK_FAILURE="fe.user.task.failure",t.TASK_DURATION="fe.user.task.duration",t.TASK_TIME_TO_FEEDBACK="fe.user.task.time_to_feedback",t.TASK_TIME_TO_FEEDBACK_SLO="fe.user.task.time_to_feedback.slo",t.TASK_TIME_TO_COMPLETE="fe.user.task.time_to_complete",t.TASK_TIME_TO_COMPLETE_SLO="fe.user.task.time_to_complete.slo"}(qt||(qt={}));var te={error:Ut,performance:Wt,userInteraction:qt};function ee(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function re(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ne={pageLoad:{fmp:{gauge:te.performance.FIRST_MEANINGFUL_PAINT,slo:te.performance.FIRST_MEANINGFUL_PAINT_SLO},tti:{gauge:te.performance.TIME_TO_INTERACTIVE,slo:te.performance.TIME_TO_INTERACTIVE_SLO}},pageSegmentLoad:{fmp:{gauge:te.performance.FIRST_MEANINGFUL_PAINT,slo:te.performance.FIRST_MEANINGFUL_PAINT_SLO},tti:{gauge:te.performance.TIME_TO_INTERACTIVE,slo:te.performance.TIME_TO_INTERACTIVE_SLO}},interaction:{response:{gauge:te.userInteraction.TASK_TIME_TO_FEEDBACK,slo:te.userInteraction.TASK_TIME_TO_FEEDBACK_SLO},result:{gauge:te.userInteraction.TASK_TIME_TO_COMPLETE,slo:te.userInteraction.TASK_TIME_TO_COMPLETE_SLO}},custom:{gauge:te.userInteraction.TASK_DURATION,sloSuccess:te.userInteraction.TASK_SUCCESS,sloFailure:te.userInteraction.TASK_FAILURE}},ie=function(t,e,r){var n="metric:".concat(e),i="metric:".concat(e,":slo"),o="metric:".concat(e,":histogramBuckets"),a=re(re({},r),{},{name:ne.pageLoad[e].gauge,value:t[n]}),s=t[i],u=t[o],c=[];if(void 0!==u){var l=re(re({},a),{},{histogramBuckets:u});c.push(l)}if(void 0!==s){var f=re(re({},a),{},{name:ne.pageLoad[e].slo,value:1,success:s});c.push(f)}return c},oe=function(t,e){var r="metric:".concat(e),n="metric:".concat(e,":slo"),i="metric:".concat(e,":histogramBuckets"),o=r in t&&t[r];if(!o&&"number"!=typeof o)return[];var a={name:ne.interaction[e].gauge,value:o,task:t["event:id"],page:t["event:route"]||""},s=[],u=t[i];if(void 0!==u){var c=re(re({},a),{},{histogramBuckets:u});s.push(c)}if(n in t){var l=re(re({},a),{},{name:ne.interaction[e].slo,value:1,success:!!t[n]});s.push(l)}return s},ae=function(t){if(t["event:type"]===i.PAGE_LOAD||t["event:type"]===i.PAGE_SEGMENT_LOAD){var e=t["event:type"]===i.PAGE_SEGMENT_LOAD?"segment-":"",r={page:"".concat(e).concat(t["event:id"]),isInitial:t["event:initial"],isActiveTab:t["pageVisible:value"]};return[].concat(F()(ie(t,o.fmp,r)),F()(ie(t,o.tti,r)))}if(t["event:type"]===i.INLINE_RESULT){var n=[];return t["metric:response"]&&n.push.apply(n,F()(oe(t,s.response))),n.push.apply(n,F()(oe(t,s.result))),n}return t["event:type"]===i.CUSTOM?function(t){var e=t["metric:duration"];if(!e&&"number"!=typeof e)return[];var r={name:ne.custom.gauge,value:e,task:t["event:id"],page:t["event:route"]||""},n=[],i=t["metric:duration:histogramBuckets"];if(void 0!==i){var o=re(re({},r),{},{histogramBuckets:i});n.push(o)}if("metric:duration:slo"in t){var a=re(re({},r),{},{name:t["metric:duration:slo"]?ne.custom.sloSuccess:ne.custom.sloFailure,value:1});n.push(a)}return n}(t):[]};function se(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ue(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?se(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var ce=function(t,e,r,n){var i,o,a,s=r&&r.custom,u=n&&n.custom,c=(s||u)&&ue(ue({},s),u)||void 0,l=r&&r.plugins,f=n&&n.plugins,p=(l||f)&&[].concat(F()(l||[]),F()(f||[]))||void 0;return Object.freeze(ue(ue({},t),{},{featureFlags:Object.freeze((i=r&&r.featureFlags,o=n&&n.featureFlags,a=[],i&&a.push.apply(a,F()(i)),o&&a.push.apply(a,F()(o)),a).reduce((function(t,r){return t[r]=e.getValue(r),t}),{})),custom:c,plugins:p,histogram:null==n?void 0:n.histogram}))},le=function(){var t=Z()($.a.mark((function t(e){var r,i,o,a,s;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.plugins.featureFlags.client;case 2:return a=t.sent,s={app:e.info.app,product:e.info.product,region:e.info.region,resourceTimings:e.plugins.resourceTimings,bundleEvalTimings:e.plugins.bundleEvalTimings,ffClient:a,hostname:e.info.hostname||window.location.hostname,ssr:e.ssr,webVitals:{enabled:null===(r=e.events[n.WEB_VITALS])||void 0===r?void 0:r.enabled,timeout:null===(i=e.events[n.WEB_VITALS])||void 0===i?void 0:i.timeout}},t.abrupt("return",(o={},l()(o,n.PAGE_LOAD,ce(s,a,e.events.all,e.events[n.PAGE_LOAD])),l()(o,n.PAGE_SEGMENT_LOAD,ce(s,a,e.events.all,e.events[n.PAGE_SEGMENT_LOAD])),l()(o,n.INLINE_RESULT,ce(s,a,e.events.all,e.events[n.INLINE_RESULT])),l()(o,n.CUSTOM,ce(s,a,e.events.all,e.events[n.CUSTOM])),l()(o,n.WEB_VITALS,ce(s,a,e.events.all,e.events[n.WEB_VITALS])),o));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),fe={debug:!1,config:{gasv3:void 0,metal:void 0,configChunk:null,histogram:{}},configure:function(t){this.config.gasv3=t.endpoints.eventPipelineClient,this.config.metal=t.endpoints.metalClient,this.config.configChunk=le(t)},setDebug:function(t){this.debug=t},queue:function(t){var e=this;return Z()($.a.mark((function r(){var n,i,o,a,s,u;return $.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.config.configChunk){r.next=3;break}return e.debug&&console.warn("Submitter is not configured"),r.abrupt("return",null);case 3:return r.next=5,e.config.configChunk;case 5:return n=r.sent,r.next=8,Jt(n[t.config.type],t);case 8:if(null!==(i=r.sent)){r.next=11;break}return r.abrupt("return");case 11:if(void 0===e.config.gasv3){r.next=17;break}return r.next=14,e.config.gasv3;case 14:o=r.sent,a={task:i["event:key"],properties:i},o&&o.sendOperationalEvent({actionSubject:"performance",attributes:a,source:"performance",action:"measured"});case 17:if(void 0===e.config.metal){r.next=22;break}return r.next=20,e.config.metal;case 20:(s=r.sent)&&s.metric&&(u=ae(i))&&u.length>0&&u.forEach((function(t){s.metric.submit(t)}));case 22:case"end":return r.stop()}}),r)})))()}};function pe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var de={init:function(t){var e,r;C.start(),(null===(e=t.events[n.WEB_VITALS])||void 0===e?void 0:e.enabled)&&J.start(),t.debug&&(p.enable(),fe.setDebug(!0),K.setDebug(!0)),fe.configure(t),(null===(r=t.ssr)||void 0===r?void 0:r.getDoneMark)&&f.setGetDoneMark(t.ssr.getDoneMark)},setRoute:function(t){tt.setRoute(t)},startPageLoad:function(t){K.startPageLoad(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({isInitial:!1,cancelStarted:!0},t))},getPageLoadMetric:function(){return K},experimental__addPageLoadTimingFromPerformanceMarks:function(t,e,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!n||K.isInitialLoad()){var i=performance.getEntriesByName(e),o=performance.getEntriesByName(r);if(i.length>0&&o.length>0){if(K.isDebugMode())try{performance.measure(t,e,r)}catch(t){}var a=K.getData();if(null!==a.start){var s=i[i.length-1],u={startTime:Math.round(s.startTime-a.start),duration:Math.round(o[o.length-1].startTime-s.startTime)};K.experimental__addExplicitTiming(t,u)}}}}},he=r(23),me=r.n(he),ve=r(15),ge=r.n(ve);const ye=(0,eval)("window");function be(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}var we=function(t,e){var r;void 0===e&&(e=be);var n,i=[],o=!1;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return o&&r===this&&e(a,i)||(n=t.apply(this,a),o=!0,r=this,i=a),n}};let Oe=null;const Se=we(t=>{const e=document.querySelector(`meta[name="${t}"]`),r=e&&e.getAttribute("content");return void 0!==r?r:null}),Me=we(()=>{const t=ye.featureFlags||Se("ajs-fe-feature-flags");if(null!=t&&""!==t)try{return JSON.parse(t)}catch(t){throw new Error("Can't parse ajs-fe-feature-flags meta")}return{}});function _e(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=k()(t);if(e){var i=k()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var Te=function(t){_()(r,t);var e=_e(r);function r(){return v()(this,r),e.apply(this,arguments)}return y()(r,[{key:"start",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.startTime;S()(k()(r.prototype),"start",this).call(this,{startTime:e}),this.route=tt.getRoute()}},{key:"stop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=S()(k()(r.prototype),"stop",this).call(this,t);return e&&!this.config.virtual&&fe.queue(this.getData()),e}}]),r}(U);function Ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=k()(t);if(e){var i=k()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var Pe=function(t){_()(r,t);var e=Ee(r);function r(t){var i,o=t.key,a=t.route,s=t.startTime,u=t.stopTime,c=t.pageVisibleState;return v()(this,r),(i=e.call(this,{type:n.WEB_VITALS,key:o})).route=a,i.startTime=s,i.stopTime=u,i.state=D.FINISHED,i.pageVisibleState=c,i}return r}(U);function ke(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function xe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=k()(t);if(e){var i=k()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var De=function(t){_()(i,t);var e,r=Ae(i);function i(){return v()(this,i),r.apply(this,arguments)}return y()(i,[{key:"startPageLoad",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isInitial:!1};K.startPageLoad(xe(xe({},t),{},{cancelStarted:"startTime"in t})),this.watchUntil()}},{key:"stop",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.stopTime||window.performance.now(),n=K.getDataToMerge(),i=K.stop(e);if(!i)return!1;if(n.isInitial&&(null===(t=this.config.ssr)||void 0===t?void 0:t.doneAsFmp))if(this.marks[z.FMP])K.markFMP(this.marks[z.FMP]);else{var o=f.getDoneMark();o&&K.markFMP(o)}this.route=tt.getRoute();var a=this.stopPageLoad(n,xe(xe({},e),{},{stopTime:r}));if(!a)return!1;var s=this.getData();return this.config.virtual||fe.queue(s),p.logCond(!!this.config.debug,"page-load","stop",this.getData),this.enqueueWebVitals(),!0}},{key:"mark",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.performance.now();K.mark(t,e)}},{key:"markFMP",value:function(t){K.markFMP(t)}},{key:"getData",value:function(){var t=K.getData();return xe(xe({},S()(k()(i.prototype),"getData",this).call(this)),{},{marks:t.marks,explicitTimings:t.explicitTimings})}},{key:"enqueueWebVitals",value:(e=Z()($.a.mark((function t(){var e,r,i;return $.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.config.virtual&&this.isInitial){t.next=2;break}return t.abrupt("return",!1);case 2:return t.next=4,fe.config.configChunk;case 4:if(null==(r=t.sent)||null===(e=r[n.WEB_VITALS].webVitals)||void 0===e?void 0:e.enabled){t.next=7;break}return t.abrupt("return",!1);case 7:return i=new Pe({key:this.config.key,route:this.route,startTime:this.startTime,stopTime:this.stopTime,pageVisibleState:this.pageVisibleState}),fe.queue(i.getData()),p.logCond(!!this.config.debug,"web-vitals",i.getData),t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})}]),i}(z);function Le(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ie(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=k()(t);if(e){var i=k()(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return E()(this,r)}}var je=function(t){_()(r,t);var e=Fe(r);function r(t){var n;return v()(this,r),n=e.call(this,t),l()(w()(n),"isInitial",!0),n.config=t,n}return y()(r,[{key:"startFromPageLoad",value:function(){var t=K.getData();this.startTime=t.start,this.isInitial=t.isInitial,this.pageVisibleState=t.pageVisibleState,this.state=D.STARTED}},{key:"mark",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.performance.now();t!==r.FMP&&S()(k()(r.prototype),"mark",this).call(this,t,e)}},{key:"markFMP",value:function(t){S()(k()(r.prototype),"mark",this).call(this,r.FMP,t)}},{key:"getPageSegmentLoadData",value:function(){return{isInitial:this.isInitial}}},{key:"getData",value:function(){return Ie(Ie({},S()(k()(r.prototype),"getData",this).call(this)),this.getPageSegmentLoadData())}},{key:"getDataToMerge",value:function(){return Ie(Ie({},S()(k()(r.prototype),"getDataToMerge",this).call(this)),this.getPageSegmentLoadData())}},{key:"merge",value:function(t){S()(k()(r.prototype),"merge",this).call(this,t),this.isInitial=t.isInitial}},{key:"stop",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=K.getData();if(this.config.includePageLoadTimings!==u.WAIT_UNTIL_PRESENT||n.state===D.FINISHED)return S()(k()(r.prototype),"stop",this).call(this,e);var i=performance.now();return n.state===D.STARTED&&K.onStop((function(){S()(k()(r.prototype),"stop",t).call(t,Ie(Ie({},e),{},{stopTime:e.stopTime||i}))}),(function(){t.cancel()})),!0}}]),r}(Te);function Ne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Re(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ne(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}l()(je,"FMP","fmp");var Ce=function(t){return new Te(Re(Re({},t),{},{type:n.INLINE_RESULT}))},Be=function(t){return new Te(Re(Re({},t),{},{type:n.CUSTOM}))};function Ge(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ve(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ge(Object(r),!0).forEach((function(e){l()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Ue={},We=function(t,e){return"".concat(e,"--").concat(t.key)},qe=function(t,e,r){!function(t){if(t.include)throw new Error('"include" is not supported in concurrent actions');if(t.until)throw new Error('"until" is not supported in concurrent actions')}(e),function(t,e){var r=We(t,e);r in Ue||(Ue[r]={})}(e,r);var i=function(t,e,r){var n=We(e,r);if(n in Ue&&Ue[n][String(t)])return Ue[n][String(t)];n in Ue||(Ue[n]={})}(t,e,r);if(i)return i;var o=(r===n.INLINE_RESULT?Ce:Be)(e);return Ue[We(e,r)][String(t)]=o,o},He={pageLoad:function(t){return new De(Re(Re({},t),{},{type:n.PAGE_LOAD}))},pageSegmentLoad:function(t){return new je(Re(Re({},t),{},{type:n.PAGE_SEGMENT_LOAD}))},interaction:Ce,custom:Be,concurrent:{pageSegmentLoad:function(t){return function(e){return qe(e,Ve({},t),n.PAGE_SEGMENT_LOAD)}},interaction:function(t){return function(e){return qe(e,Ve({},t),n.INLINE_RESULT)}},custom:function(t){return function(e){return qe(e,Ve({},t),n.CUSTOM)}}}};const ze={info:{app:{version:{web:function(){if(!Oe)try{Oe=ye.WRM.data.claim("com.atlassian.jira.plugins.jira-browser-metrics:browser-metrics-client.git-commit-id")}catch(t){Oe="unknown"}return Oe}()||"unknown"},framework:{name:"jsp",version:"1.0.0"}},product:"jira",region:Se("ajs-region")||"unknown"},plugins:{resourceTimings:{sanitiseEndpoints:t=>{const e=ge()(t,!0);let r=e.pathname.replace(/\/(\w+)-(\d+)\//i,"/<issue-key>/");if("/rest/gira/1/"===r){const{operation:t}=e.query;t&&(r+="?operation="+t)}return r},mapResources:t=>{const e=ge()(t,!0);let r=e.pathname;if(r.includes("_/download")){const t=e.pathname.match("_/download.*");return 1===t.length?t[0]:r}const n=r.split("/");if(n.length>0){const t=n[n.length-1].split(".");return t.length<4?r:[...t.slice(0,-3),...t.slice(-1)].join(".")}return r},hasTimingHeaders:t=>t.includes("jira-frontend-static")||t.includes("jira-frontend-branch")||t.includes("_download")},featureFlags:{client:Promise.resolve({getValue:t=>{const e=Me()||{},{value:r}=e[t]||{};return r}})}},events:{},endpoints:{eventPipelineClient:Promise.resolve(me.a)},debug:!1};de.init(ze),de.startPageLoad({isInitial:!0})},,function(t,e,r){"use strict";r.r(e),r.d(e,"getCLS",(function(){return d})),r.d(e,"getFCP",(function(){return y})),r.d(e,"getFID",(function(){return T})),r.d(e,"getLCP",(function(){return E})),r.d(e,"getTTFB",(function(){return P}));var n,i,o,a,s=function(t,e){return{name:t,value:void 0===e?-1:e,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},u=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return r.observe({type:t,buffered:!0}),r}}catch(t){}},c=function(t,e){var r=function r(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||(t(n),e&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)},l=function(t){addEventListener("pageshow",(function(e){e.persisted&&t(e)}),!0)},f="function"==typeof WeakSet?new WeakSet:new Set,p=function(t,e,r){var n;return function(){e.value>=0&&(r||f.has(e)||"hidden"===document.visibilityState)&&(e.delta=e.value-(n||0),(e.delta||void 0===n)&&(n=e.value,t(e)))}},d=function(t,e){var r,n=s("CLS",0),i=function(t){t.hadRecentInput||(n.value+=t.value,n.entries.push(t),r())},o=u("layout-shift",i);o&&(r=p(t,n,e),c((function(){o.takeRecords().map(i),r()})),l((function(){n=s("CLS",0),r=p(t,n,e)})))},h=-1,m=function(){return"hidden"===document.visibilityState?0:1/0},v=function(){c((function(t){var e=t.timeStamp;h=e}),!0)},g=function(){return h<0&&(h=m(),v(),l((function(){setTimeout((function(){h=m(),v()}),0)}))),{get timeStamp(){return h}}},y=function(t,e){var r,n=g(),i=s("FCP"),o=u("paint",(function(t){"first-contentful-paint"===t.name&&(o&&o.disconnect(),t.startTime<n.timeStamp&&(i.value=t.startTime,i.entries.push(t),f.add(i),r()))}));o&&(r=p(t,i,e),l((function(n){i=s("FCP"),r=p(t,i,e),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-n.timeStamp,f.add(i),r()}))}))})))},b={passive:!0,capture:!0},w=new Date,O=function(t,e){n||(n=e,i=t,o=new Date,_(removeEventListener),S())},S=function(){if(i>=0&&i<o-w){var t={entryType:"first-input",name:n.type,target:n.target,cancelable:n.cancelable,startTime:n.timeStamp,processingStart:n.timeStamp+i};a.forEach((function(e){e(t)})),a=[]}},M=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var r=function(){O(t,e),i()},n=function(){i()},i=function(){removeEventListener("pointerup",r,b),removeEventListener("pointercancel",n,b)};addEventListener("pointerup",r,b),addEventListener("pointercancel",n,b)}(e,t):O(e,t)}},_=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,M,b)}))},T=function(t,e){var r,o=g(),d=s("FID"),h=function(t){t.startTime<o.timeStamp&&(d.value=t.processingStart-t.startTime,d.entries.push(t),f.add(d),r())},m=u("first-input",h);r=p(t,d,e),m&&c((function(){m.takeRecords().map(h),m.disconnect()}),!0),m&&l((function(){var o;d=s("FID"),r=p(t,d,e),a=[],i=-1,n=null,_(addEventListener),o=h,a.push(o),S()}))},E=function(t,e){var r,n=g(),i=s("LCP"),o=function(t){var e=t.startTime;e<n.timeStamp&&(i.value=e,i.entries.push(t)),r()},a=u("largest-contentful-paint",o);if(a){r=p(t,i,e);var d=function(){f.has(i)||(a.takeRecords().map(o),a.disconnect(),f.add(i),r())};["keydown","click"].forEach((function(t){addEventListener(t,d,{once:!0,capture:!0})})),c(d,!0),l((function(n){i=s("LCP"),r=p(t,i,e),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-n.timeStamp,f.add(i),r()}))}))}))}},P=function(t){var e,r=s("TTFB");e=function(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,e={entryType:"navigation",startTime:0};for(var r in t)"navigationStart"!==r&&"toJSON"!==r&&(e[r]=Math.max(t[r]-t.navigationStart,0));return e}();r.value=r.delta=e.responseStart,r.entries=[e],t(r)}catch(t){}},"complete"===document.readyState?setTimeout(e,0):addEventListener("pageshow",e)}},function(t,e,r){(function(r){var n;!function(){var i="undefined"!=typeof window&&window===this?this:void 0!==r&&null!=r?r:this,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,r){t!=Array.prototype&&t!=Object.prototype&&(t[e]=r.value)};function a(){a=function(){},i.Symbol||(i.Symbol=u)}var s=0;function u(t){return"jscomp_symbol_"+(t||"")+s++}function c(){a();var t=i.Symbol.iterator;t||(t=i.Symbol.iterator=i.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&o(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return l(this)}}),c=function(){}}function l(t){var e=0;return function(t){return c(),(t={next:t})[i.Symbol.iterator]=function(){return this},t}((function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}))}function f(t){c();var e=t[Symbol.iterator];return e?e.call(t):l(t)}function p(t){if(!(t instanceof Array)){t=f(t);for(var e,r=[];!(e=t.next()).done;)r.push(e.value);t=r}return t}var d=0;var h="img script iframe link audio video source".split(" ");function m(t,e){for(var r=(t=f(t)).next();!r.done;r=t.next())if(r=r.value,e.includes(r.nodeName.toLowerCase())||m(r.children,e))return!0;return!1}function v(t,e){if(2<t.length)return performance.now();for(var r=[],n=(e=f(e)).next();!n.done;n=e.next())n=n.value,r.push({timestamp:n.start,type:"requestStart"}),r.push({timestamp:n.end,type:"requestEnd"});for(n=(e=f(t)).next();!n.done;n=e.next())r.push({timestamp:n.value,type:"requestStart"});for(r.sort((function(t,e){return t.timestamp-e.timestamp})),t=t.length,e=r.length-1;0<=e;e--)switch(n=r[e],n.type){case"requestStart":t--;break;case"requestEnd":if(2<++t)return n.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function g(t){t=t||{},this.w=!!t.useMutationObserver,this.u=t.minValue||null,t=window.__tti&&window.__tti.e;var e=window.__tti&&window.__tti.o;this.a=t?t.map((function(t){return{start:t.startTime,end:t.startTime+t.duration}})):[],e&&e.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,function(t,e){var r=XMLHttpRequest.prototype.send,n=d++;XMLHttpRequest.prototype.send=function(i){for(var o=[],a=0;a<arguments.length;++a)o[a-0]=arguments[a];var s=this;return t(n),this.addEventListener("readystatechange",(function(){4===s.readyState&&e(n)})),r.apply(this,o)}}(this.m.bind(this),this.l.bind(this)),function(t,e){var r=fetch;fetch=function(n){for(var i=[],o=0;o<arguments.length;++o)i[o-0]=arguments[o];return new Promise((function(n,o){var a=d++;t(a),r.apply(null,[].concat(p(i))).then((function(t){e(a),n(t)}),(function(t){e(t),o(t)}))}))}}(this.m.bind(this),this.l.bind(this)),function(t){t.c=new PerformanceObserver((function(e){for(var r=(e=f(e.getEntries())).next();!r.done;r=e.next())if("resource"===(r=r.value).entryType&&(t.b.push({start:r.fetchStart,end:r.responseEnd}),b(t,v(t.g,t.b)+5e3)),"longtask"===r.entryType){var n=r.startTime+r.duration;t.a.push({start:r.startTime,end:n}),b(t,n+5e3)}})),t.c.observe({entryTypes:["longtask","resource"]})}(this),this.w&&(this.h=function(t){var e=new MutationObserver((function(e){for(var r=(e=f(e)).next();!r.done;r=e.next())("childList"==(r=r.value).type&&m(r.addedNodes,h)||"attributes"==r.type&&h.includes(r.target.tagName.toLowerCase()))&&t(r)}));return e.observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),e}(this.B.bind(this)))}function y(t){t.i=!0;var e=0<t.a.length?t.a[t.a.length-1].end:0,r=v(t.g,t.b);b(t,Math.max(r+5e3,e))}function b(t,e){!t.i||t.v>e||(clearTimeout(t.j),t.j=setTimeout((function(){var e=performance.timing.navigationStart,r=v(t.g,t.b);e=(window.a&&window.a.A?1e3*window.a.A().C-e:0)||performance.timing.domContentLoadedEventEnd-e;if(t.u)var n=t.u;else performance.timing.domContentLoadedEventEnd?n=(n=performance.timing).domContentLoadedEventEnd-n.navigationStart:n=null;var i=performance.now();null===n&&b(t,Math.max(r+5e3,i+1e3));var o=t.a;5e3>i-r?r=null:r=5e3>i-(r=o.length?o[o.length-1].end:e)?null:Math.max(r,n),r&&(t.s(r),clearTimeout(t.j),t.i=!1,t.c&&t.c.disconnect(),t.h&&t.h.disconnect()),b(t,performance.now()+1e3)}),e-performance.now()),t.v=e)}g.prototype.getFirstConsistentlyInteractive=function(){var t=this;return new Promise((function(e){t.s=e,"complete"==document.readyState?y(t):window.addEventListener("load",(function(){y(t)}))}))},g.prototype.m=function(t){this.f.set(t,performance.now())},g.prototype.l=function(t){this.f.delete(t)},g.prototype.B=function(){b(this,performance.now()+5e3)},i.Object.defineProperties(g.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(p(this.f.values()))}}});var w={getFirstConsistentlyInteractive:function(t){return t=t||{},"PerformanceLongTaskTiming"in window?new g(t).getFirstConsistentlyInteractive():Promise.resolve(null)}};t.exports?t.exports=w:void 0===(n=function(){return w}.apply(e,[]))||(t.exports=n)}()}).call(this,r(18))}])}));;
;
/* module-key = 'jira.webresources:calendar-localisation-moment', location = '/includes/lib/calendar/Calendar-localisation-moment.js' */
define("jira/calendar/localisation-moment",["require"],function(a){"use strict";if("function"==typeof moment&&null!==moment&&"function"==typeof Calendar&&null!==Calendar){var e=moment.langData("jira");null!==e&&"object"==typeof e&&(Calendar._DN=e._weekdays.concat(e._weekdays[0]),Calendar._SDN=e._weekdaysShort.concat(e._weekdaysShort[0]),Calendar._MN=[].concat(e._months),Calendar._SMN=[].concat(e._monthsShort))}}),require("jira/calendar/localisation-moment");;
;
/* module-key = 'jira.webresources:user-message-flags', location = '/includes/jira/admin/admin-flags.js' */
require(["jira/util/logger","wrm/data","jquery","jira/flag"],function(s,a,e,i){"use strict";e(function(){var c=a.claim("jira.webresources:user-message-flags.adminLockout")||{};if(c.noprojects){var n=JIRA.Templates.Flags.Admin,r=n.adminIssueAccessFlagTitle({}),l=n.adminIssueAccessFlagBody({manageAccessUrl:c.manageAccessUrl}),g=i.showWarningMsg(r,l,{dismissalKey:c.flagId});e(g).find("a").on("click",function(){g.dismiss()})}s.trace("admin.flags.done")})});;
;
/* module-key = 'jira.webresources:user-message-flags', location = 'includes/jira/admin/admin-flags.soy.js' */
if("undefined"==typeof JIRA)var JIRA={};"undefined"==typeof JIRA.Templates&&(JIRA.Templates={}),"undefined"==typeof JIRA.Templates.Flags&&(JIRA.Templates.Flags={}),"undefined"==typeof JIRA.Templates.Flags.Admin&&(JIRA.Templates.Flags.Admin={}),JIRA.Templates.Flags.Admin.adminIssueAccessFlagTitle=function(e,s){return""+soy.$$escapeHtml("Your current restrictions")},JIRA.Templates.Flags.Admin.adminIssueAccessFlagBody=function(e,s){var a="";'<a href="'+soy.$$escapeHtml(AJS.contextPath())+"/"+soy.$$escapeHtml(e.manageAccessUrl)+'">';return a+='<p id="admin-noprojects">'+soy.$$escapeHtml("You\'ve logged in as an administrator, but you don\'t have access to any Jira applications. You can perform administration tasks, but you won\'t be able to view or edit issues.")+'</p><p><a href="'+soy.$$escapeHtml(AJS.contextPath())+"/"+soy.$$escapeHtml(e.manageAccessUrl)+'">'+soy.$$escapeHtml("Manage your application access.")+"</a></p>"};;
;
/* module-key = 'jira.webresources:calendar-en', location = '/includes/lib/calendar/lang/calendar-en.js' */
Calendar._DN=new Array("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"),Calendar._SDN=new Array("Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"),Calendar._FD=0,Calendar._MN=new Array("January","February","March","April","May","June","July","August","September","October","November","December"),Calendar._SMN=new Array("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"),Calendar._TT={},Calendar._TT.INFO="About the calendar",Calendar._TT.ABOUT="DHTML Date/Time Selector\n(c) dynarch.com 2002-2005 / Author: Mihai Bazon\nFor latest version visit: http://www.dynarch.com/projects/calendar/\nDistributed under GNU LGPL.  See http://gnu.org/licenses/lgpl.html for details.\n\nDate selection:\n- Use the ,  buttons to select year\n- Use the "+String.fromCharCode(8249)+", "+String.fromCharCode(8250)+" buttons to select month\n- Hold mouse button on any of the above buttons for faster selection.",Calendar._TT.ABOUT_TIME="\n\nTime selection:\n- Click on any of the time parts to increase it\n- or Shift-click to decrease it\n- or click and drag for faster selection.",Calendar._TT.PREV_YEAR="Prev. year (hold for menu)",Calendar._TT.PREV_MONTH="Prev. month (hold for menu)",Calendar._TT.GO_TODAY="Go Today",Calendar._TT.NEXT_MONTH="Next month (hold for menu)",Calendar._TT.NEXT_YEAR="Next year (hold for menu)",Calendar._TT.SEL_DATE="Select date",Calendar._TT.DRAG_TO_MOVE="Drag to move",Calendar._TT.PART_TODAY=" (today)",Calendar._TT.DAY_FIRST="Display %s first",Calendar._TT.WEEKEND="0,6",Calendar._TT.CLOSE="Close",Calendar._TT.TODAY="Today",Calendar._TT.TIME_PART="(Shift-)Click or drag to change value",Calendar._TT.DEF_DATE_FORMAT="%Y-%m-%d",Calendar._TT.TT_DATE_FORMAT="%a, %b %e",Calendar._TT.WK="wk",Calendar._TT.TIME="Time:",Calendar._TT.AM="AM",Calendar._TT.PM="PM",Calendar._TT.am="am",Calendar._TT.pm="pm";;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'gadgets-embedded-plugin/js/rpc.js' */
var gadgets=gadgets||{};gadgets.rpc=function(){var CALLBACK_NAME="__cb";var DEFAULT_NAME="";var FE_G2C_CHANNEL="__g2c_rpc";var FE_C2G_CHANNEL="__c2g_rpc";var services={};var iframePool=[];var relayUrl={};var useLegacyProtocol={};var authToken={};var callId=0;var callbacks={};var setup={};var sameDomain={};var params={};if(gadgets.util){params=gadgets.util.getUrlParameters()}authToken[".."]=params.rpctoken||params.ifpctok||0;function getRelayChannel(){return typeof window.postMessage==="function"?"wpm":typeof document.postMessage==="function"?"dpm":navigator.product==="Gecko"?"fe":"ifpc"}function setupChannel(){if(relayChannel==="dpm"||relayChannel==="wpm"){window.addEventListener("message",function(packet){try{if(packet&&packet.origin&&packet.origin!=="null"&&typeof packet.data==="string"){if(!isRpcRequest(gadgets.json.parse(packet.data))){return }if(packet.origin===location.origin){process(gadgets.json.parse(packet.data))}else{AJS.$.get(AJS.contextPath()+"/rest/whitelist/1/check",{url:packet.origin}).done(function(result){if(result&&result.inbound&&result.inbound===true){process(gadgets.json.parse(packet.data))}else{if(AJS.debug){AJS.log("RPC: request rejected (bad origin): "+(packet&&packet.origin?packet.origin:"undefined origin"))}}}).fail(function(jqXHR,textStatus,errorThrown){AJS.log("RPC: REST "+textStatus,errorThrown)})}}}catch(e){if(AJS.debug){var origin=packet&&packet.origin?packet.origin:"undefined origin";AJS.log("Error processing gadget rpc message from '"+origin+"': "+e)}}},false)}}var relayChannel=getRelayChannel();setupChannel();services[DEFAULT_NAME]=function(){throw new Error("Unknown RPC service: "+this.s)};services[CALLBACK_NAME]=function(callbackId,result){var callback=callbacks[callbackId];if(callback){delete callbacks[callbackId];callback(result)}};function setupFrame(frameId){if(setup[frameId]){return }if(relayChannel==="fe"){try{var frame=document.getElementById(frameId);frame[FE_G2C_CHANNEL]=function(args){process(gadgets.json.parse(args))}}catch(e){}}setup[frameId]=true}function encodeLegacyData(args){var stringify=gadgets.json.stringify;var argsEscaped=[];for(var i=0,j=args.length;i<j;++i){argsEscaped.push(encodeURIComponent(stringify(args[i])))}return argsEscaped.join("&")}function isRpcRequest(request){return request&&typeof request.s==="string"&&typeof request.f==="string"&&request.a instanceof Array}function process(rpc){if(isRpcRequest(rpc)){if(authToken[rpc.f]){if(authToken[rpc.f]!=rpc.t){if(AJS.debug){console.log("Invalid auth token received for operation: "+rpc.s)}return }}if(rpc.c){rpc.callback=function(result){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}var result=(services[rpc.s]||services[DEFAULT_NAME]).apply(rpc,rpc.a);if(rpc.c&&typeof result!="undefined"){gadgets.rpc.call(rpc.f,CALLBACK_NAME,null,rpc.c,result)}}}function callFrameElement(targetId,serviceName,from,rpcData,callArgs){try{if(from!=".."){var fe=window.frameElement;if(typeof fe[FE_G2C_CHANNEL]==="function"){if(typeof fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]!=="function"){fe[FE_G2C_CHANNEL][FE_C2G_CHANNEL]=function(args){process(gadgets.json.parse(args))}}fe[FE_G2C_CHANNEL](rpcData);return }}else{var frame=document.getElementById(targetId);if(typeof frame[FE_G2C_CHANNEL]==="function"&&typeof frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL]==="function"){frame[FE_G2C_CHANNEL][FE_C2G_CHANNEL](rpcData);return }}}catch(e){}callIfpc(targetId,serviceName,from,rpcData,callArgs)}function callIfpc(targetId,serviceName,from,rpcData,callArgs){var relay=gadgets.rpc.getRelayUrl(targetId);if(!relay){throw new Error("No relay file assigned for IFPC")}var src=null;if(useLegacyProtocol[targetId]){src=[relay,"#",encodeLegacyData([from,callId,1,0,encodeLegacyData([from,serviceName,"","",from].concat(callArgs))])].join("")}else{src=[relay,"#",targetId,"&",from,"@",callId,"&1&0&",encodeURIComponent(rpcData)].join("")}emitInvisibleIframe(src)}function emitInvisibleIframe(src){var iframe;for(var i=iframePool.length-1;i>=0;--i){var ifr=iframePool[i];try{if(ifr&&(ifr.recyclable||ifr.readyState==="complete")){ifr.parentNode.removeChild(ifr);if(window.ActiveXObject){iframePool[i]=ifr=null;iframePool.splice(i,1)}else{ifr.recyclable=false;iframe=ifr;break}}}catch(e){}}if(!iframe){iframe=document.createElement("iframe");iframe.style.border=iframe.style.width=iframe.style.height="0px";iframe.style.visibility="hidden";iframe.style.position="absolute";iframe.onload=function(){this.recyclable=true};iframePool.push(iframe)}iframe.src=src;setTimeout(function(){document.body.appendChild(iframe)},0)}function callSameDomain(target,rpc){if(typeof sameDomain[target]==="undefined"){sameDomain[target]=false;var targetEl=null;if(target===".."){targetEl=parent}else{targetEl=frames[target]}try{sameDomain[target]=targetEl.gadgets.rpc.receiveSameDomain}catch(e){}}if(typeof sameDomain[target]==="function"){sameDomain[target](rpc);return true}return false}if(gadgets.config){function init(config){if(config.rpc.parentRelayUrl.substring(0,7)==="http://"){relayUrl[".."]=config.rpc.parentRelayUrl}else{var params=document.location.search.substring(0).split("&");var parentParam="";for(var i=0,param;param=params[i];++i){if(param.indexOf("parent=")===0){parentParam=decodeURIComponent(param.substring(7));break}}relayUrl[".."]=parentParam+config.rpc.parentRelayUrl}useLegacyProtocol[".."]=!!config.rpc.useLegacyProtocol}var requiredConfig={parentRelayUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("rpc",requiredConfig,init)}return{register:function(serviceName,handler){if(serviceName==CALLBACK_NAME){throw new Error("Cannot overwrite callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot overwrite default service:"+" use registerDefault")}services[serviceName]=handler},unregister:function(serviceName){if(serviceName==CALLBACK_NAME){throw new Error("Cannot delete callback service")}if(serviceName==DEFAULT_NAME){throw new Error("Cannot delete default service:"+" use unregisterDefault")}delete services[serviceName]},registerDefault:function(handler){services[""]=handler},unregisterDefault:function(){delete services[""]},call:function(targetId,serviceName,callback,var_args){++callId;targetId=targetId||"..";if(callback){callbacks[callId]=callback}var from="..";if(targetId===".."){from=window.name}var rpc={s:serviceName,f:from,c:callback?callId:0,a:Array.prototype.slice.call(arguments,3),t:authToken[targetId]};if(callSameDomain(targetId,rpc)){return }var rpcData=gadgets.json.stringify(rpc);var channelType=relayChannel;if(useLegacyProtocol[targetId]){channelType="ifpc"}switch(channelType){case"dpm":var targetDoc=targetId===".."?parent.document:frames[targetId].document;targetDoc.postMessage(rpcData);break;case"wpm":var targetWin=targetId===".."?parent:frames[targetId];targetWin.postMessage(rpcData,relayUrl[targetId]);break;case"fe":callFrameElement(targetId,serviceName,from,rpcData,rpc.a);break;default:callIfpc(targetId,serviceName,from,rpcData,rpc.a);break}},getRelayUrl:function(targetId){return relayUrl[targetId]},setRelayUrl:function(targetId,url,opt_useLegacy){relayUrl[targetId]=url;useLegacyProtocol[targetId]=!!opt_useLegacy},setAuthToken:function(targetId,token){authToken[targetId]=token;setupFrame(targetId)},getRelayChannel:function(){return relayChannel},receive:function(fragment){if(fragment.length>4){process(gadgets.json.parse(decodeURIComponent(fragment[fragment.length-1])))}},receiveSameDomain:function(rpc){rpc.a=Array.prototype.slice.call(rpc.a);window.setTimeout(function(){process(rpc)},0)}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'gadgets-embedded-plugin/js/util.js' */
Function.prototype.inherits=function(parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype;this.superClass_=parentCtor.prototype;this.prototype=new tempCtor();this.prototype.constructor=this};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'gadgets-embedded-plugin/js/json.js' */
var gadgets=gadgets||{};gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!(value.propertyIsEnumerable("length"))){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-core-resources', location = 'gadgets-embedded-plugin/js/gadgets-core.js' */
var gadgets=gadgets||{};gadgets.error={};gadgets.error.SUBCLASS_RESPONSIBILITY="subclass responsibility";gadgets.error.TO_BE_DONE="to be done";gadgets.log=function(message){if(window.console&&console.log){console.log(message)}else{var logEntry=document.createElement("div");logEntry.className="gadgets-log-entry";logEntry.innerHTML=message;document.body.appendChild(logEntry)}};gadgets.Extensible=function(){};gadgets.Extensible.prototype.setDependencies=function(dependencies){for(var p in dependencies){this[p]=dependencies[p]}};gadgets.Extensible.prototype.getDependencies=function(name){return this[name]};gadgets.UserPrefStore=function(){};gadgets.UserPrefStore.prototype.getPrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.UserPrefStore.prototype.savePrefs=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.DefaultUserPrefStore=function(){gadgets.UserPrefStore.call(this)};gadgets.DefaultUserPrefStore.inherits(gadgets.UserPrefStore);gadgets.DefaultUserPrefStore.prototype.getPrefs=function(gadget){};gadgets.DefaultUserPrefStore.prototype.savePrefs=function(gadget){};gadgets.GadgetService=function(){};gadgets.GadgetService.prototype.setHeight=function(elementId,height){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setTitle=function(gadget,title){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.GadgetService.prototype.setUserPref=function(id){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.IfrGadgetService=function(){gadgets.GadgetService.call(this);var service=this;gadgets.rpc.register("resize_iframe",function(){service.setHeight.apply(this,arguments)});gadgets.rpc.register("set_pref",function(){service.setUserPref.apply(this,arguments)});gadgets.rpc.register("set_title",function(){service.setTitle.apply(this,arguments)});gadgets.rpc.register("requestNavigateTo",function(){service.requestNavigateTo.apply(this,arguments)})};gadgets.IfrGadgetService.inherits(gadgets.GadgetService);gadgets.IfrGadgetService.prototype.setHeight=function(height){if(height>gadgets.container.maxheight_){height=gadgets.container.maxheight_}var element=document.getElementById(this.f);if(element){element.style.height=height+"px"}};gadgets.IfrGadgetService.prototype.requestNavigateTo=function(view,opt_params){var id=this.getGadgetIdFromModuleId(this.f);var url=this.getUrlForView(view);if(opt_params){var paramStr=JSON.stringify(opt_params);if(paramStr.length>0){url+="&appParams="+encodeURIComponent(paramStr)}}if(url&&document.location.href.indexOf(url)==-1){document.location.href=url}};gadgets.IfrGadgetService.prototype.getUrlForView=function(view){if(view==="canvas"){return"/canvas"}else{if(view==="profile"){return"/profile"}else{return null}}};gadgets.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(moduleId){return parseInt(moduleId.match(/_([0-9]+)$/)[1],10)};gadgets.LayoutManager=function(){};gadgets.LayoutManager.prototype.getGadgetChrome=function(gadget){throw Error(gadgets.error.SUBCLASS_RESPONSIBILITY)};gadgets.StaticLayoutManager=function(){gadgets.LayoutManager.call(this)};gadgets.StaticLayoutManager.inherits(gadgets.LayoutManager);gadgets.StaticLayoutManager.prototype.setGadgetChromeIds=function(gadgetChromeIds){this.gadgetChromeIds_=gadgetChromeIds};gadgets.StaticLayoutManager.prototype.getGadgetChrome=function(gadget){var chromeId=this.gadgetChromeIds_[gadget.id];return chromeId?document.getElementById(chromeId):null};gadgets.FloatLeftLayoutManager=function(layoutRootId){gadgets.LayoutManager.call(this);this.layoutRootId_=layoutRootId};gadgets.FloatLeftLayoutManager.inherits(gadgets.LayoutManager);gadgets.FloatLeftLayoutManager.prototype.getGadgetChrome=function(gadget){var layoutRoot=document.getElementById(this.layoutRootId_);if(layoutRoot){var chrome=document.createElement("div");chrome.className="gadgets-gadget-chrome";chrome.style.cssFloat="left";layoutRoot.appendChild(chrome);return chrome}else{return null}};;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-container-resources', location = 'gadgets-embedded-plugin/js/gadgets-container.js' */
gadgets.Container=function(){this.parentUrl_="http://"+document.location.host;this.country_="ALL";this.language_="ALL";this.view_="default";this.nocache_=1;this.maxheight_=2147483647};gadgets.Container.inherits(gadgets.Extensible);gadgets.Container.prototype.userPrefStore=new gadgets.DefaultUserPrefStore();gadgets.Container.prototype.gadgetService=new gadgets.GadgetService();gadgets.Container.prototype.layoutManager=new gadgets.StaticLayoutManager();gadgets.Container.prototype.setParentUrl=function(url){this.parentUrl_=url};gadgets.Container.prototype.setCountry=function(country){this.country_=country};gadgets.Container.prototype.setNoCache=function(nocache){this.nocache_=nocache};gadgets.Container.prototype.setLanguage=function(language){this.language_=language};gadgets.Container.prototype.setView=function(view){this.view_=view};gadgets.Container.prototype.setMaxHeight=function(maxheight){this.maxheight_=maxheight};gadgets.Container.prototype.getGadgetKey_=function(instanceId){return"gadget_"+instanceId};gadgets.IfrContainer=function(){gadgets.Container.call(this)};gadgets.IfrContainer.inherits(gadgets.Container);gadgets.IfrContainer.prototype.gadgetService=new gadgets.IfrGadgetService();gadgets.IfrContainer.prototype.setParentUrl=function(url){if(!url.match(/^http[s]?:\/\//)){url=document.location.href.match(/^[^?#]+\//)[0]+url}this.parentUrl_=url};gadgets.container=new gadgets.IfrContainer();;
;
/* module-key = 'com.atlassian.gadgets.embedded:gadget-standalone-resources', location = 'gadgets-embedded-plugin/js/gadgets-standalone.js' */
new gadgets.IfrGadgetService();gadgets.IfrGadgetService.prototype.setTitle=function(title){};;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:project-page', location = 'jira-projects-module/sidebar/navigation/items.js' */
AJS.$(function(n){n(document).on("click",'.aui-nav > [aria-expanded] > a.aui-nav-item[href="#"]',function(a){a.preventDefault(),AJS.navigation(n(this).siblings(".aui-nav")).toggle()})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-adg3', location = 'jira-projects-module/sidebar/project-shortcuts/project-shortcuts-analytics.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ProjectShortcuts.Analytics");var t="a.project-shortcuts-group__link",e=!1,i=require("jira/api/projects");JIRA.Projects.Sidebar.ProjectShortcuts.Analytics={initialize:function(){},initShortcutClick:function(c,o){var r=AJS.sidebar(o),n=AJS.$(c),s=this;n.on("click",t,function(c){var o=n.find(t),d=AJS.$(this);i.getCurrentProjectId(),i.getCurrentProjectType();s._triggerAnalyticsEvent("jira.projects.shortcut.clicked",{shortcutId:d.data("shortcutId"),shortcutPosition:d.closest("li").index()+1,shortcutIconName:e?d.find(".aui-icon").data("projectShortcutsIconId"):"",shortcutCount:o.size(),isWithIcons:e,isSidebarCollapsed:r.isCollapsed(),projectId:s.projectId,projectType:s.projectType})})},initDialogActions:function(t){var i=this,c=function(t,c){var o=t.collection.indexOf(t)+1;return{isWithIcons:e,isSave:c,shortcutId:t.get("id"),shortcutPosition:o,shortcutCount:t.collection.size(),projectId:i.projectId,projectType:i.projectType}};t.on("childview:dropdown:click",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.dropdown.clicked",c(e,!1))}),t.on("childview:edit:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.opened",c(e,!1))}),t.on("childview:edit:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.edit.dialog.closed",c(e,o))}),t.on("childview:delete:open",function(t,e){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.opened",c(e))}),t.on("childview:delete:close",function(t,e,o){i._triggerAnalyticsEvent("jira.projects.shortcut.delete.dialog.closed",c(e,o))}),t.on("add:open",function(){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.opened",{isWithIcons:e,projectId:i.projectId,projectType:i.projectType})}),t.on("add:close",function(t){i._triggerAnalyticsEvent("jira.projects.shortcut.add.dialog.closed",{isWithIcons:e,isSave:t,projectId:i.projectId,projectType:i.projectType})})},iconChanged:function(t,e,i){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.changed",{iconName:e,oldIconName:i,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconChangeConfirmed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.confirmed",{oldIconName:t.get("icon"),iconName:e,shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:projectType})},iconPickerOpened:function(t){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.opened",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,projectId:this.projectId,projectType:this.projectType})},iconPickerClosed:function(t,e){this._triggerAnalyticsEvent("jira.projects.shortcut.icon.picker.closed",{shortcutId:t.isNew()?"":t.get("id"),isNew:t.isNew(),cid:t.cid,isSave:e,projectId:this.projectId,projectType:this.projectType})},_triggerAnalyticsEvent:function(t,e){AJS.trigger("analyticsEvent",{name:t,data:e})}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:sidebar-project-shortcuts-adg3', location = 'jira-projects-module/sidebar/project-shortcuts/project-shortcuts-init-adg3.js' */
require(["jira/featureflags/feature-manager","jira/projects/sidebar/projectShortcuts/dialogs/add","jira/api/projects"],function(t,e,r){var o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link.",i="project.shortcut.default.link",n=r.getCurrentProjectKey(),a=r.getCurrentProjectType(),c=r.getCurrentProjectId(),s=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcuts([],{projectKey:n}),d=function(t){t.on(t.events.JIRA_SUMMON_ADD_SHORTCUT_DIALOG,function(t,r){if("com.atlassian.jira.jira-projects-plugin:project-shortcut-type"===r.shortcutTypeId){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.opened",data:{projectId:c,projectType:a}});var o=new e({projectKey:n,collection:s});o.on("dialog:close",function(t){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.add.dialog.closed",data:{isSave:t,projectId:c,projectType:a}})})}},!0)},u=function(t){t.on(t.events.EDIT,function(e){var r=e.target.getId();if(r&&0===r.indexOf(o)){var d=r.substr(o.length),u=t.getItem(r,!0),j=new JIRA.Projects.Sidebar.ProjectShortcuts.Entities.Shortcut({id:d,name:u.name,type:i,url:u.url},{projectKey:n});s.add(j),AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.opened",data:{isSave:!1,shortcutId:j.get("id"),projectId:c,projectType:a}});var l=new JIRA.Projects.Sidebar.ProjectShortcuts.Dialogs.Edit({model:j});l.on("dialog:close",function(t){AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.edit.dialog.closed",data:{isSave:t,shortcutId:j.get("id"),projectId:c,projectType:a}})}),j.on("change",function(){t.replaceItem(r,{id:r,name:j.get("name"),url:j.get("url"),canEdit:!0},!0)}),s.on("remove",function(e){t.deleteItem(o+e.get("id"),!0)})}},!0)},o="com.atlassian.jira.jira-projects-plugin:project.shortcut.default.link.",j="com.atlassian.jira.jira-projects-plugin:source.code.link.",l=function(t){t.on(t.events.BEFORE_NAVIGATE,function(e){var r=e.target.getId(),i=!1,n="";if(r.indexOf(o)>=0?(i=!0,n=o):j.indexOf(j)>=0&&(i=!0,n=j),i){var a={},c=t.findParentOf(r,!0),s=t.getItem(r,!0),d=c.links.filter(function(t){return t.indexOf(n)>=0});a.shortcutId=r.substring(n.length),a.shortcutPosition=d.indexOf(r),a.shortcutIconName=s.icon||"",a.shortcutCount=d.length,a.isWithIcons=!1,AJS.trigger("analyticsEvent",{name:"jira.projects.shortcut.clicked",data:a})}}.bind(this),!0)}.bind(this);JIRA.API.getSidebar().done(function(t){d(t),u(t),l(t)})});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:report-page-assets', location = 'jira-projects-module/page/project/report/analytics.js' */
!function(t){"use strict";AJS.namespace("JIRA.Projects.Report"),JIRA.Projects.Report.Analytics=function(){return new Promise(function(e){require(["jira/analytics/web-client"],function(r){t(".reports .reports__list__report").on("click",function(e){const o=t(this),c=o.attr("data-report-key"),n=o.closest("ul").attr("data-category-key"),i=o.closest("li").prevAll().length+1;AJS.trigger("analyticsEvent",{name:"jira.projects.report.clicked",data:{report:c,category:n,listPosition:i}}),r.sendUIEvent({source:"allReportsScreen",action:"clicked",actionSubject:"button",actionSubjectId:"reportButton",attributes:{report:c,category:n,listPosition:i}})}),e()})})},t(JIRA.Projects.Report.Analytics)}(AJS.$);;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-storage', location = 'jira-projects-module/sidebar/reports/reports-link-storage.js' */
!function(){"use strict";AJS.namespace("JIRA.Projects.Sidebar.Reports"),JIRA.Projects.Sidebar.Reports={storeLastViewedReportLink:function(e,r){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||r&&r.isProjectSidebar(!0)){var t=this._createLastViewedReportKey(r);require("jira/data/local-storage").setItem(t,e),this._setReportsItemLink(e,r)}JIRA.trace("jira.projects.sidebar.reports.link.stored")},restoreLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar(!0)){var r=this._createLastViewedReportKey(e),t=require("jira/data/local-storage").getItem(r);t&&this._setReportsItemLink(t,e)}JIRA.trace("jira.projects.sidebar.reports.link.restored")},removeLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar(!0)){var r=this._createLastViewedReportKey(e);require("jira/data/local-storage").removeItem(r)}JIRA.trace("jira.projects.sidebar.reports.link.remove")},getLastViewedReportLink:function(e){if(JIRA.API.Sidebar&&JIRA.API.Sidebar.isProjectSidebar()||e&&e.isProjectSidebar(!0)){var r=this._createLastViewedReportKey(e),t=require("jira/data/local-storage").getItem(r);if(t)return t}return""},_createLastViewedReportKey:function(e){var r=JIRA.API.Sidebar?JIRA.API.Sidebar.getSelectedScopeFilterId():e?e.getSelectedScopeFilterId(!0):"",t=JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key")||"uc.context",i="last.viewed.report."+t;return r&&(i+="."+r),i},_setReportsItemLink:function(e,r){if(!JIRA.API.Sidebar)return"";var t=JIRA.API.Sidebar.getGroup("sidebar-navigation-panel"),i=t.getItem("com.atlassian.jira.jira-projects-plugin:report-page");"undefined"==typeof i&&(i=t.getItem("com.pyxis.greenhopper.jira:global-sidebar-report")),i&&i.attr("href",e)}}}();;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link', location = 'jira-projects-module/sidebar/reports/reports-link.js' */
define("jira/projects/sidebar/reports/reports-link",["underscore"],function(e){"use strict";AJS.namespace("JIRA.Projects.Sidebar.ReportsLink"),JIRA.Projects.Sidebar.ReportsLink={CONSTANT:{REPORTS_NAVGROUP_IDS:["com.atlassian.jira.jira-projects-plugin:report-page","com.pyxis.greenhopper.jira:user-container-sidebar-report"],COMPARE_PARAMS:["chart","rapidView","view"],AGILE_SECTION_IN_UC_SIDEBAR_ID:"uc_report_agile_sidebar_links",OVERVIEW_PAGE_REGEX:/projects\/.+selectedItem=com.atlassian.jira.jira-projects-plugin:report-page/i},_location:function(){if("undefined"!=typeof window)return window.location},_isSameReport:function(t,r){var i=this._getUrlParams(t),n=this._getUrlParams(r);return e.filter(this.CONSTANT.COMPARE_PARAMS,function(e){return i[e]&&n[e]&&i[e]===n[e]}).length===this.CONSTANT.COMPARE_PARAMS.length},_getUrlParams:function(e){var t=e.split("?");try{return 1===t.length?{}:JSON.parse('{"'+t[1].replace(/#.*$/,"").replace(/&/g,'","').replace(/=/g,'":"')+'"}',function(e,t){return""===e?t:decodeURIComponent(t)})}catch(e){return{}}},handleOverviewPage:function(e){var t=this.CONSTANT.OVERVIEW_PAGE_REGEX.test(this._location().href);t&&JIRA.Projects.Sidebar.Reports.removeLastViewedReportLink(e)},handleNonAgileReports:function(e){var t=this._location().pathname,r=0===t.indexOf(AJS.contextPath()+"/secure/ConfigureReport");if(r){JIRA.Projects.Sidebar.Reports.removeLastViewedReportLink(e);var i=this._location().href.replace(/^.*\/\/[^\/]+/,"");JIRA.Projects.Sidebar.Reports.storeLastViewedReportLink(i,e)}},handleAdg2:function(e){JIRA.Projects.Sidebar.Reports.restoreLastViewedReportLink(e)},handleClickingOnReports:function(t,r){if(e.contains(this.CONSTANT.REPORTS_NAVGROUP_IDS,r.target.getId(!0))){var i=AJS.contextPath(),n=JIRA.API.Projects.getCurrentProjectKey()||AJS.Meta.get("project-key"),o=this._location().href.replace(/^.*\/\/[^\/]+/,""),a=JIRA.Projects.Sidebar.Reports.getLastViewedReportLink(t);if(n){var s=i+"/projects/"+n+"?selectedItem=com.atlassian.jira.jira-projects-plugin:report-page";a=a||s}else{var c=t.getGroup(this.CONSTANT.AGILE_SECTION_IN_UC_SIDEBAR_ID,!0);!a&&c&&c.links&&c.links.length&&(a=c.links[0].url)}a===o||this._isSameReport(a,o)||(r.preventDefault(),this._location().assign(a))}},handleSwitchingBoards:function(e,t){e.preventDefault(),AJS.$.ajax({url:AJS.contextPath()+"/rest/greenhopper/1.0/rapidview/addtohistory",type:"POST",data:JSON.stringify({rapidViewId:t.id}),dataType:"json",contentType:"application/json"}).done(function(){JIRA.Projects.Sidebar.ReportsLink._location().reload()})},handleReportsLink:function(e){this.handleOverviewPage(e),this.handleNonAgileReports(e),this.handleAdg2(e);var t=this;e.on("before:nested",function(r){t.handleClickingOnReports(e,r)},!0);var r=this.CONSTANT.OVERVIEW_PAGE_REGEX.test(this._location().href),i=this._location().pathname,n=0===i.indexOf(AJS.contextPath()+"/secure/ConfigureReport");(r||n)&&e.on("scope-switcher:before:navigate",this.handleSwitchingBoards,!0)}}});;
;
/* module-key = 'com.atlassian.jira.jira-projects-plugin:reports-link-init', location = 'jira-projects-module/sidebar/reports/reports-link-init.js' */
AJS.$(function(){"use strict";require("jira/projects/sidebar/reports/reports-link"),JIRA.API.getSidebar().done(function(e){JIRA.Projects.Sidebar.ReportsLink.handleReportsLink(e)})});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-lwf-board-config-browser-metrics', location = 'jira-agile-module/includes/js/browser-metrics/BrowserMetricsRegister.js' */
define("jira-agile/browser-metrics/browser-metrics-register",[],function(){"use strict";var r=window["browser-metrics"]||{start:function(){},end:function(){}},e=function(e,t,n,i,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(r){return{}};e.on(t,function(){var e=arguments,t={key:o,isInitial:!1,reporters:[function(){return s(o)},function(){return e[0]}]};r.start(t),n.on(i,function(){r.end({key:o})})})},t=function(e,t,n,i,o,s){e.on(t,function(){!GH.RapidBoard.ViewController.isBoardLoadMetricsInProgress&&n()&&r.start({key:o,isInitial:!1,ready:i,reporters:function(){return s(o)}})})};return{registerMetricListener:e,registerMetricListenerWithSelector:t}});;
;
/* module-key = 'com.pyxis.greenhopper.jira:gh-rapid-lwf-board-config-browser-metrics', location = 'jira-agile-module/includes/js/browser-metrics/BoardConfigBrowserMetrics.js' */
!function(){"use strict";var e=require("jira-agile/browser-metrics/browser-metrics-register"),r=(window["browser-metrics"]||{start:function(){},end:function(){}},require("jira/featureflags/feature-manager")),i=r.isFeatureEnabled("jsw.classic.lightweight.frontend.defer-board-settings"),a=function(){return r.isFeatureEnabled("jsw.classic.keto")},n=require("jira-agile/rapid/deferred-resources-loader");require("jira-agile/rapid/const/PageMode");n.handleDeferredResourceImport((i||a())&&!GH.RapidBoard.Config,function(){e.registerMetricListener(GH.RapidBoard.Config.events,"before:renderBoardConfig",GH.RapidBoard.Config.events,"after:renderBoardConfig","jira.agile.board.config")})}();;
;
/* module-key = 'com.atlassian.auiplugin:internal-@atlassian-aui-src-js-aui-expander', location = 'node_modules/@atlassian/aui/src/js/aui/expander.js' */
("undefined"===typeof window?global:window).__1f32101163c43c11907101e4c1c0413f=function(){"use strict";var c=__307d3e18fd611f85395c67cddeb1fe24,d=c&&c.__esModule?c:{"default":c},e=(0,d.default)(document),f=function(a){var b={};b.$trigger=(0,d.default)(a.currentTarget);b.$content=e.find("#"+b.$trigger.attr("aria-controls"));b.triggerIsParent=0!==b.$content.parent().filter(b.$trigger).length;b.$shortContent=b.triggerIsParent?b.$trigger.find(".aui-expander-short-content"):null;b.height=b.$content.css("min-height");
b.isCollapsible=!1!==b.$trigger.data("collapsible");b.replaceText=b.$trigger.attr("data-replace-text");b.replaceSelector=b.$trigger.data("replace-selector");return b},g=function(a){if(a.replaceText){var b=a.replaceSelector?a.$trigger.find(a.replaceSelector):a.$trigger;a.$trigger.attr("data-replace-text",b.text());b.text(a.replaceText)}};e.on({"aui-expander-invoke":function(a){var a=(0,d.default)(a.currentTarget),b=e.find("#"+a.attr("aria-controls")),c=!1!==a.data("collapsible");"true"===b.attr("aria-expanded")&&
c?a.trigger("aui-expander-collapse"):a.trigger("aui-expander-expand")},"aui-expander-expand":function(a){a=f(a);"true"!==a.$content.attr("aria-expanded")&&(a.$content.attr("aria-expanded","true"),a.$trigger.attr("aria-expanded","true"),0<a.$content.outerHeight()&&a.$content.attr("aria-hidden","false"),g(a),a.triggerIsParent&&a.$shortContent.hide(),a.$trigger.trigger("aui-expander-expanded"))},"aui-expander-collapse":function(a){a=f(a);"true"===a.$content.attr("aria-expanded")&&(g(a),a.$content.attr("aria-expanded",
"false"),a.$trigger.attr("aria-expanded","false"),a.triggerIsParent&&a.$shortContent.show(),0===a.$content.outerHeight()&&a.$content.attr("aria-hidden","true"),a.$trigger.trigger("aui-expander-collapsed"))},"click.aui-expander":function(a){(0,d.default)(a.currentTarget).trigger("aui-expander-invoke",a.currentTarget)}},".aui-expander-trigger");return{}}.call(this);;
;
/* module-key = 'com.atlassian.jira.plugins.jira-transition-triggers-plugin:dev-status-common-resources', location = 'jira-transition-triggers-plugin/js/workflow/TriggersPluginBackboneDefine.js' */
Backbone&&!Backbone.define&&(Backbone.define=function(name,ctor){eval("Backbone['Class: "+name+"'] = function() { Backbone['Class: "+name+"'].__ctor.apply(this, arguments); }");var cls=Backbone["Class: "+name];cls.__ctor=ctor,ctor.prototype.name=name,cls.prototype=ctor.prototype,_.extend(cls,ctor),_.each(ctor.prototype,function(t,e){"function"==typeof t&&(t.displayName=name+"."+e)});var context=window,parts=name.split(".");return _.each(parts,function(t,e){e===parts.length-1?context[t]=cls:context=null==context[t]?context[t]={}:context[t]}),cls});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-transition-triggers-plugin:dev-status-common-resources', location = 'jira-transition-triggers-plugin/js/devstatus/FeedbackDialog.js' */
Backbone.define("JIRA.DevStatus.FeedbackDialog",Backbone.Model.extend({properties:["collectorId","summary"],defaults:{summary:"Tell us what you think.",collectorId:"effe8b72"},show:function(){var e=this.get("collectorId");window.ATL_JQ_PAGE_PROPS=window.ATL_JQ_PAGE_PROPS||{},window.ATL_JQ_PAGE_PROPS[e]={fieldValues:{summary:this.get("summary")},triggerFunction:function(e){_.defer(function(){e()})}},AJS.$.getScript(this._collectorUrlFor(e))},_collectorUrlFor:function(e){return"https://jira.atlassian.com/s/d41d8cd98f00b204e9800998ecf8427e/en_UK-7m3tmj-1988229788/6307/131/1.4.8/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector.js?collectorId="+e}}));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/viewissue/devstatus-panel.soy' */
// This file was automatically generated from devstatus-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }


JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon = function(opt_data, opt_ignored) {
  return '' + aui.message.info({content: '' + JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages({errorInstances: opt_data.instances, notConfiguredInstances: opt_data.notConfiguredInstances, showContactAdminForm: opt_data.showContactAdminForm})});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAsInfoWithoutIcon';
}


JIRA.Templates.DevStatus.connectionProblemAsWarning = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({content: '' + JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages({errorInstances: opt_data.instances, notConfiguredInstances: opt_data.notConfiguredInstances, showContactAdminForm: opt_data.showContactAdminForm})});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAsWarning.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAsWarning';
}


JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages = function(opt_data, opt_ignored) {
  return '' + (((! opt_data.errorInstances || opt_data.errorInstances.length == 0) && (! opt_data.notConfiguredInstances || opt_data.notConfiguredInstances.length == 0)) ? '<p class="connection-error">' + soy.$$filterNoAutoescape('JIRA is having difficulty contacting the applications that supply development status information.') + ' ' + JIRA.Templates.DevStatus.contactAdmin(opt_data) + '</p>' : ((opt_data.errorInstances.length > 0) ? '<p class="connection-error">' + JIRA.Templates.DevStatus.connectionProblemMultipleInstances({instances: opt_data.errorInstances}) + ' ' + JIRA.Templates.DevStatus.contactAdmin(opt_data) + '</p>' : '') + ((opt_data.notConfiguredInstances && opt_data.notConfiguredInstances.length > 0) ? '<p class="config-errors">' + JIRA.Templates.DevStatus.configProblem(opt_data) + '</p>' : ''));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages.soyTemplateName = 'JIRA.Templates.DevStatus.connectionAndConfigErrorsMessages';
}


JIRA.Templates.DevStatus.contactAdmin = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + soy.$$filterNoAutoescape(AJS.format('If this condition persists, please contact your {0}JIRA administrators{1}.',opt_data.showContactAdminForm ? '<a id="contact-admin" href="' + "" + '/secure/ContactAdministrators!default.jspa">' : '',opt_data.showContactAdminForm ? '</a>' : ''));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.contactAdmin.soyTemplateName = 'JIRA.Templates.DevStatus.contactAdmin';
}


JIRA.Templates.DevStatus.connectionProblem = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.adminError) {
    output += JIRA.Templates.DevStatus.connectionProblemAdminError(opt_data);
  } else {
    output += '<p class="connection-error">' + ((! opt_data.instances || opt_data.instances.length == 0) ? soy.$$filterNoAutoescape('JIRA is having difficulty contacting the applications that supply development status information.') : JIRA.Templates.DevStatus.connectionProblemMultipleInstances(opt_data)) + ' ';
    var contactAdminAnchor__soy57 = '<a id="contact-admin" href="' + soy.$$escapeHtml("") + '/secure/ContactAdministrators!default.jspa">';
    output += soy.$$filterNoAutoescape(AJS.format('If this condition persists, please contact your {0}JIRA administrators{1}.',opt_data.showContactAdminForm ? contactAdminAnchor__soy57 : '',opt_data.showContactAdminForm ? '</a>' : '')) + '</p>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblem.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblem';
}


JIRA.Templates.DevStatus.connectionProblemAdminError = function(opt_data, opt_ignored) {
  var output = '<p class="connection-error admin-error">' + soy.$$escapeHtml(opt_data.adminError.message) + '</p><p class="configure-applinks-link"><a href="' + soy.$$escapeHtml("") + '/plugins/servlet/applinks/listApplicationLinks">' + soy.$$escapeHtml('Configure Application Links') + '</a></p>';
  if (opt_data.adminError.details) {
    output += '<p class="connection-error"><a id="replace-text-trigger" data-replace-text="' + soy.$$escapeHtml('Hide error details') + '" class="aui-expander-trigger" aria-controls="expander-with-replace-text-content">' + soy.$$escapeHtml('Show error details') + '</a></p><div id="expander-with-replace-text-content" class="aui-expander-content admin-error-details"><ul>';
    var detailList79 = opt_data.adminError.details;
    var detailListLen79 = detailList79.length;
    for (var detailIndex79 = 0; detailIndex79 < detailListLen79; detailIndex79++) {
      var detailData79 = detailList79[detailIndex79];
      output += '<li>' + soy.$$escapeHtml(detailData79) + '</li>';
    }
    output += '</ul></div>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemAdminError.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemAdminError';
}


JIRA.Templates.DevStatus.configProblem = function(opt_data, opt_ignored) {
  var output = '';
  var servers__soy86 = opt_data.notConfiguredInstances;
  output += '<span class="description">';
  var server0__soy88 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[0]});
  if (servers__soy86.length == 1) {
    output += soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}.',server0__soy88));
  } else {
    var server1__soy96 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[1]});
    if (servers__soy86.length == 2) {
      output += soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0} and {1}.',server0__soy88,server1__soy96));
    } else {
      var server2__soy104 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: servers__soy86[2]});
      output += (servers__soy86.length == 3) ? soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}, {1}, and {2}.',server0__soy88,server1__soy96,server2__soy104)) : soy.$$filterNoAutoescape(AJS.format('Couldn\x27\x27t read data from {0}, {1}, {2}, and {3} other {3,choice,1#application|1\x3capplications}.',server0__soy88,server1__soy96,server2__soy104,servers__soy86.length - 3));
    }
  }
  output += '</span> <span class="hints">';
  var helpUrl__soy115 = ({"alt":"Get help!","title":"JIRA Application Development panel displays error - Couldn't read data","url":"https://confluence.atlassian.com/display/JIRAKB/JIRA+Application+Development+panel+displays+error+-+Couldn%27t+read+data"});
  output += soy.$$filterNoAutoescape(AJS.format('Learn {0}about this issue{1} or go to {2}application links{3} to fix it.','<a href="' + helpUrl__soy115.url + '" target="_blank">','</a>','<a href="' + "" + '/plugins/servlet/applinks/listApplicationLinks">','</a>')) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.configProblem.soyTemplateName = 'JIRA.Templates.DevStatus.configProblem';
}


JIRA.Templates.DevStatus.connectionProblemMultipleInstances = function(opt_data, opt_ignored) {
  var output = '';
  var instance0__soy120 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[0]});
  if (opt_data.instances.length == 1) {
    output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0}.',instance0__soy120));
  } else {
    var instance1__soy128 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[1]});
    if (opt_data.instances.length == 2) {
      output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0} and {1}.',instance0__soy120,instance1__soy128));
    } else {
      var instance2__soy136 = '' + JIRA.Templates.DevStatus.connectionProblemSingleInstance({instance: opt_data.instances[2]});
      output += soy.$$filterNoAutoescape(AJS.format('JIRA is having difficulty contacting {0}, {1}, {3,choice,0#and {2}|1#{2}, and another application|1\x3c{2}, and {3} more applications}.',instance0__soy120,instance1__soy128,instance2__soy136,opt_data.instances.length - 3));
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemMultipleInstances.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemMultipleInstances';
}


JIRA.Templates.DevStatus.connectionProblemSingleInstance = function(opt_data, opt_ignored) {
  return '<span class="instance" data-name="' + soy.$$escapeHtml(opt_data.instance.name) + '"><a href="' + soy.$$escapeHtml(opt_data.instance.baseUrl) + '" title="' + soy.$$escapeHtml(opt_data.instance.name) + '">' + soy.$$escapeHtml(opt_data.instance.name) + '</a></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.connectionProblemSingleInstance.soyTemplateName = 'JIRA.Templates.DevStatus.connectionProblemSingleInstance';
}


JIRA.Templates.DevStatus.lastUpdated = function(opt_data, opt_ignored) {
  return '' + ((opt_data.lastUpdated) ? '<dd class="sub-text' + ((opt_data.extraClass) ? ' ' + soy.$$escapeHtml(opt_data.extraClass) : '') + '">' + JIRA.Templates.DevStatus.transitionContainer({content: '<div>' + soy.$$escapeHtml(opt_data.text) + ' <time class="livestamp date user-tz allow-future" ' + ((opt_data.datetimeFormat) ? 'data-datetime-format="' + soy.$$escapeHtml(opt_data.datetimeFormat) + '" ' : '') + 'datetime="' + soy.$$escapeHtml(opt_data.lastUpdated) + '">$' + soy.$$escapeHtml(opt_data.lastUpdated) + '</time></div>'}) + '</dd>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.lastUpdated.soyTemplateName = 'JIRA.Templates.DevStatus.lastUpdated';
}


JIRA.Templates.DevStatus.transitionContainer = function(opt_data, opt_ignored) {
  return '<div class="rolling-container sliding-container"><div class="rolling-content">' + soy.$$filterNoAutoescape(opt_data.content) + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.transitionContainer.soyTemplateName = 'JIRA.Templates.DevStatus.transitionContainer';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/viewissue/devstatus-cta-dialog.soy' */
// This file was automatically generated from devstatus-cta-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Dialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Dialog == 'undefined') { JIRA.Templates.DevStatus.Dialog = {}; }


JIRA.Templates.DevStatus.Dialog.content = function(opt_data, opt_ignored) {
  var output = '<div class="jira-dialog-heading">' + ((opt_data.prompt) ? '<h2>' + soy.$$escapeHtml(opt_data.prompt) + '</h2>' : '') + '</div><div class="jira-dialog-content"><ul class="targets">';
  var remoteAppList10 = opt_data.remoteApps;
  var remoteAppListLen10 = remoteAppList10.length;
  for (var remoteAppIndex10 = 0; remoteAppIndex10 < remoteAppListLen10; remoteAppIndex10++) {
    var remoteAppData10 = remoteAppList10[remoteAppIndex10];
    output += '<li>' + JIRA.Templates.DevStatus.Dialog.remoteApp(remoteAppData10) + '</li>';
  }
  output += '</ul><div class="buttons-container"><div class="buttons"><button class="aui-button aui-button-link cancel" id="aui-dialog-close">' + soy.$$escapeHtml('Cancel') + '</button></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Dialog.content.soyTemplateName = 'JIRA.Templates.DevStatus.Dialog.content';
}


JIRA.Templates.DevStatus.Dialog.remoteApp = function(opt_data, opt_ignored) {
  return '<a class="target ' + ((opt_data.primary) ? 'primary' : '') + '" data-application-type="' + soy.$$escapeHtml(opt_data.applicationType) + '" href="' + soy.$$escapeHtml(opt_data.url) + '">' + ((opt_data.iconUrl) ? '<img class="application-icon" src="' + soy.$$escapeHtml(opt_data.iconUrl) + '">' : '<span class="application-icon ' + soy.$$escapeHtml(opt_data.iconClass) + '"></span>') + '<div class="title" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</div><div class="base-url" title="' + soy.$$escapeHtml(opt_data.baseUrl) + '">' + soy.$$escapeHtml(opt_data.baseUrl) + '</div></a>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Dialog.remoteApp.soyTemplateName = 'JIRA.Templates.DevStatus.Dialog.remoteApp';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-resources', location = 'templates/common/devstatus-common.soy' */
// This file was automatically generated from devstatus-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Common == 'undefined') { JIRA.Templates.DevStatus.Common = {}; }


JIRA.Templates.DevStatus.Common.learnMoreLink = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.devToolsLearnMoreLink) ? ' <a href="' + soy.$$escapeHtml(opt_data.devToolsLearnMoreLink) + '" class="learn-more-link" target="_blank">' + soy.$$escapeHtml('Learn more') + '</a>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Common.learnMoreLink.soyTemplateName = 'JIRA.Templates.DevStatus.Common.learnMoreLink';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/devstatus-analytics.js' */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};define("jira/dev-status/analytics",["require","exports"],function(e,i){var n=e("jira/util/events"),t=e("jira/util/events/types"),a=e("jira/util/data/meta"),l=e("jquery"),c=e("underscore"),r=".edit-permission-link";i.Analytics={fireEvent:function(e,i){var n="devstatus."+e,t="object"!==("undefined"==typeof i?"undefined":_typeof(i))?{}:i;AJS.trigger("analyticsEvent",{name:n,data:t})},fireAgileDevStatusLinkClicked:function(){return i.Analytics.fireEvent("panel.agile.icon.clicked")}},i.SummaryAnalytics={fireSummaryShownEvent:function(e){var n=e.isAssignee,t=e.eventProperties,a=n?"assignee":"nonassignee";return i.Analytics.fireEvent("summary.shown."+a,t)},fireSummaryClickedEvent:function(e,n){var t=a.get("fusion-analytics-new-context-link"),l=".clicked";return t&&(a.set("fusion-analytics-new-context-link",void 0),l+=".newcontext"),i.Analytics.fireEvent(e+".summary"+l,n)},fireDetailTabClicked:function(e,n){return i.Analytics.fireEvent(n+".detail.tab.clicked",{applicationName:e})}},i.BuildsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("builds",e)},fireDetailProjectClicked:function(){return i.Analytics.fireEvent("builds.detail.project.clicked")},fireDetailPlanClicked:function(){return i.Analytics.fireEvent("builds.detail.plan.clicked")},fireDetailBuildClicked:function(){return i.Analytics.fireEvent("builds.detail.build.clicked")}},i.DeploymentsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("deployments",e)},fireDetailProjectClicked:function(){return i.Analytics.fireEvent("deployments.detail.project.clicked")},fireDetailEnvironmentClicked:function(){return i.Analytics.fireEvent("deployments.detail.environment.clicked")},fireDetailReleaseClicked:function(){return i.Analytics.fireEvent("deployments.detail.release.clicked")}},i.CommitsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("commits",e)},fireDetailRepoClicked:function(e){return i.Analytics.fireEvent("commits.detail.repo.clicked",{applicationName:e})},fireDetailCommitClicked:function(e){return i.Analytics.fireEvent("commits.detail.commit.clicked",{applicationName:e})},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"commits")},fireDetailFileExpandedClicked:function(e){return i.Analytics.fireEvent("commits.detail.file.expanded.clicked",{applicationName:e})},fireDetailFilesExpandedClicked:function(e){return i.Analytics.fireEvent("commits.detail.files.expanded.clicked",{applicationName:e})},fireDetailFileClicked:function(e){return i.Analytics.fireEvent("commits.detail.file.clicked",{applicationName:e})},fireDetailReviewsShown:function(e){return i.Analytics.fireEvent("commits.detail.reviews.shown",{applicationName:e})},fireDetailReviewClicked:function(e){return i.Analytics.fireEvent("commits.detail.review.clicked",{applicationName:e})},fireDetailBranchesShown:function(e){return i.Analytics.fireEvent("commits.detail.branches.shown",{applicationName:e})},fireDetailCreateReviewClicked:function(e,n){return i.Analytics.fireEvent("commits.detail.review.create"+(n?".all":""),{applicationName:e})}},i.ReviewsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("reviews",e)},fireDetailReviewClicked:function(){return i.Analytics.fireEvent("reviews.detail.review.clicked")}},i.BranchesAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("branches",e)},_fireDetailClickedEvent:function(e,n){return i.Analytics.fireEvent("branches.detail."+n+".clicked",{applicationName:e})},_fireDetailClickedEventAssignable:function(e,i,n,t){"undefined"!=typeof n&&"undefined"!=typeof t&&(n?e+=".assignee":(e+=".nonassignee",e+=t?".assignable":".nonassignable")),this._fireDetailClickedEvent(i,e)},fireDetailRepoClicked:function(e){this._fireDetailClickedEvent(e,"repo")},fireDetailBranchClicked:function(e){this._fireDetailClickedEvent(e,"branch")},fireDetailPullRequestLozengeClick:function(e){this._fireDetailClickedEvent(e,"pullrequest.lozenge")},fireDetailReviewLozengeClick:function(e){this._fireDetailClickedEvent(e,"review.lozenge")},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"branches")},fireDetailCreatePullRequestClicked:function(e,i,n){this._fireDetailClickedEventAssignable("pullrequest.create",e,i,n)},fireDetailCreateReviewClicked:function(e,i,n){this._fireDetailClickedEventAssignable("review.create",e,i,n)}},i.PullRequestsAnalytics={fireSummaryClickedEvent:function(e){return i.SummaryAnalytics.fireSummaryClickedEvent("pullrequests",e)},fireDetailPullRequestClicked:function(e){return i.Analytics.fireEvent("pullrequests.detail.pullrequest.clicked",{applicationName:e})},fireDetailTabClicked:function(e){return i.SummaryAnalytics.fireDetailTabClicked(e,"pullrequests")}},i.LearnMoreAnalytics={fireLearnMoreEvent:function(e,n){return i.Analytics.fireEvent("learnmore."+e,n)}},i.CtaDialogAnalytics={issueDetails:{},fireCreateBranchEvent:function(e,n){n="object"!==("undefined"==typeof n?"undefined":_typeof(n))?{}:n;var t=l.extend({issueStatus:this.issueDetails.status,issueType:this.issueDetails.type},n);return i.Analytics.fireEvent("createbranch."+e+"."+(this.issueDetails.isAssignee?"assignee":"nonassignee"),t)},_populateIssueDetails:function(e){this.issueDetails={status:""+e.data("issueStatus"),type:""+e.data("issueType"),isAssignee:e.data("isAssignee")}},_initHandler:function(e,i,n,t){if(n&&i.not(document).is(n)){var a=this;i.find(t).on("simpleClick",function(){var e=l(this);a._fireCreateBranchEvent(e)})}},_fireCreateBranchEvent:function(e){this._populateIssueDetails(e);var i="click",n=a.get("fusion-analytics-new-context-link");n&&(a.set("fusion-analytics-new-context-link",void 0),i+=".newcontext"),this.fireCreateBranchEvent(i)},initialize:function(e,a,r){var s=this;n.bind(t.NEW_CONTENT_ADDED,c.bind(function(i,n){this._initHandler(i,n,e,a)},this)),n.bind("GH.DetailView.updated",c.bind(function(i){this._initHandler(i,l(e),e,a)},this)),l(a).on("simpleClick",function(){var e=l(this);s._fireCreateBranchEvent(e)}),l(document).on("click","#"+r+" .jira-dialog-content .target",function(){var e=l(this);s.fireCreateBranchEvent("dialog.click",{title:e.find(".title").attr("title"),applicationType:e.data("applicationType")})}),l(document).on("click","#"+r+" .jira-dialog-content button.cancel",function(){s.fireCreateBranchEvent("dialog.cancel")}),l(document).on("click",".cta-tooltip .cta-learn-more-link",function(){i.LearnMoreAnalytics.fireLearnMoreEvent("click.ctahelptipbranching")})}},i.AdminAnalytics={fireAdminEvent:function(e,n){return i.Analytics.fireEvent("admin."+e,n)},initialize:function(){var e=this,n=l("#project-config-panel-dev-status");n.find(r).on("click",function(){e.fireAdminEvent("editpermissionlink.config."+(l("ul.permissions-list li.devstatus-admin-permission-item").length>0?"withpermissions":"nopermissions"))}),n.find(".learn-more-link").on("click",function(){i.LearnMoreAnalytics.fireLearnMoreEvent("click.adminappvertisementlink")}),n.find("#project-config-applinks-connect").on("click",function(){e.fireAdminEvent("connect")}),n.find(".devstatus-admin-connect-button-option").on("click",function(){var i=l(this).data("key")||"unknown";e.fireAdminEvent("connect."+i)})}},i.AdminSummaryAnalytics={initialize:function(){l("#project-config-webpanel-devstatus-admin-summary-panel").find(r).on("click",function(){i.AdminAnalytics.fireAdminEvent("editpermissionlink.summary.nopermissions")})}}}),function(e){AJS.namespace("JIRA.DevStatus.AdminAnalytics",null,e.AdminAnalytics),AJS.namespace("JIRA.DevStatus.AdminSummaryAnalytics",null,e.AdminSummaryAnalytics),AJS.namespace("JIRA.DevStatus.Analytics",null,e.Analytics),AJS.namespace("JIRA.DevStatus.BranchesAnalytics",null,e.BranchesAnalytics),AJS.namespace("JIRA.DevStatus.BuildsAnalytics",null,e.BuildsAnalytics),AJS.namespace("JIRA.DevStatus.CommitsAnalytics",null,e.CommitsAnalytics),AJS.namespace("JIRA.DevStatus.CtaDialogAnalytics",null,e.CtaDialogAnalytics),AJS.namespace("JIRA.DevStatus.DeploymentsAnalytics",null,e.DeploymentsAnalytics),AJS.namespace("JIRA.DevStatus.LearnMoreAnalytics",null,e.LearnMoreAnalytics),AJS.namespace("JIRA.DevStatus.PullRequestsAnalytics",null,e.PullRequestsAnalytics),AJS.namespace("JIRA.DevStatus.ReviewsAnalytics",null,e.ReviewsAnalytics),AJS.namespace("JIRA.DevStatus.SummaryAnalytics",null,e.SummaryAnalytics)}(require("jira/dev-status/analytics"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/devstatus-rest-duration-analytics.js' */
"use strict";define("jira/dev-status/rest-duration-analytics",["jquery","underscore","jira/dev-status/time-tracking-analytics-event"],function(e,r,t){var n={ISSUE_SUMMARY_EVENT:"issue.summary.fetch.duration",ISSUE_DETAIL_EVENT:"issue.detail.fetch.duration",RR_TAB_EVENT:"release.report.tab.content.fetch.duration",ISSUE_BULK_SUMMARY_EVENT:"issue.bulksummary.fetch.duration",STALE_ISSUE_EVENT:"issue.stale.issue.fetch.duration"},s={},u=function(e){return e.indexOf("rest/dev-status/1.0/")>=0},a=function(e){return e.indexOf("rest/release-report/1.0")>=0},i=function(e){return e&&e.responseText?e.responseText.length:0},E=function(e,t){if(t){r.isArray(t)||(t=[t]);var n={};return e.split("?")[1].split("&").map(function(e){return e.split("=")}).filter(function(e){return r.include(t,e[0])}).reduce(function(e,t){var s=n[t[0]];s?r.isArray(s)?s.push(t[1]):n[t[0]]=[s,t[1]]:n[t[0]]=t[1]},{}),n}},o=function(e){return e.indexOf("issue/detail")>=0?n.ISSUE_DETAIL_EVENT:e.indexOf("issue/summary")>=0?n.ISSUE_SUMMARY_EVENT:e.indexOf("issue/bulksummary")>=0?n.ISSUE_BULK_SUMMARY_EVENT:e.indexOf("issue/stale-issues")>=0?n.STALE_ISSUE_EVENT:e.indexOf("release-report/1.0/tab/content")>=0?n.RR_TAB_EVENT:void 0},c=function(e,n,u){n||(n=[]),r.isArray(n)||(n=[n]),n.push("_");var a=E(e,n),i=new t(o(e),a._,r.extend(a,u));i.start(),s[i.getFullId()]=i},l=function(e){var r=o(e);if(r){var n=E(e,"_");return s[t.generateFullId(r,n?n._:void 0)]}},d=function(e,r){var t=l(e);t&&(t.endAndFire(r),delete s[t.getFullId()])},S=function(e){return e.status>=200&&e.status<300},_=function(e,r,t){c(t.url)},f=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasData:!(!s||!s.summary),hasErrors:!!(s&&s.errors&&s.errors.length)};d(t.url,u)},T=function(e,r,t){c(t.url,["applicationType","dataType"])},h=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasData:!!(s&&s.detail&&s.detail.length),hasErrors:!!(s&&s.errors&&s.errors.length)};d(t.url,u)},v=function(e,t,n){var s=E(n.url,["issueId"]).issueId,u=s?r.isArray(s)?s.length:1:0;c(n.url,[],{issues:u})},I=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),hasErrors:!!(s&&s.errors&&s.errors.length),changedIssues:n&&s.changedIssues?s.changedIssues.length:0,changed:n&&s.changed,devSummaryStale:n&&s.devSummaryStale};d(t.url,u)},U=function(e,r,t){c(t.url)},A=function(e,r,t){var n=S(r),s=n?JSON.parse(r.responseText):void 0,u={successful:n,contentLength:i(r),issues:n&&s?s.length:0};d(t.url,u)},p=function(e,r,t){c(t.url,"selectedTab")},N=function(e,r,t){var n=S(r),s={successful:n,contentLength:i(r)};d(t.url,s)},g={};g[n.ISSUE_DETAIL_EVENT]=T,g[n.ISSUE_SUMMARY_EVENT]=_,g[n.ISSUE_BULK_SUMMARY_EVENT]=v,g[n.STALE_ISSUE_EVENT]=U,g[n.RR_TAB_EVENT]=p;var V={};V[n.ISSUE_DETAIL_EVENT]=h,V[n.ISSUE_SUMMARY_EVENT]=f,V[n.ISSUE_BULK_SUMMARY_EVENT]=I,V[n.STALE_ISSUE_EVENT]=A,V[n.RR_TAB_EVENT]=N;var m=function(e,r,t,n){if(u(n.url)||a(n.url)){var s=e?g:V,i=s[o(n.url)];i&&i(r,t,n)}};e(document).ajaxSend(m.bind(null,!0)),e(document).ajaxComplete(m.bind(null,!1))});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/time-tracking-analytics-event.js' */
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();define("jira/dev-status/time-tracking-analytics-event",["underscore","jquery","jira/dev-status/analytics"],function(t,e,n){return function(){function e(t,n,r){_classCallCheck(this,e),this.category=t,2===arguments.length&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&(r=n,n=void 0),this.id=n,this.data=r||{}}return _createClass(e,[{key:"start",value:function(t){return this.addData(t),this.startTime=window.performance.now(),this}},{key:"end",value:function(t){return this.addData(t),this.endTime=window.performance.now(),this.data.timeElapsed=Math.round(this.endTime-this.startTime),this}},{key:"endAndFire",value:function(t){return this.end(t).fire()}},{key:"fire",value:function(){return n.Analytics.fireEvent(this.category,this.data),this}},{key:"addData",value:function(e){return t.extend(this.data,e),this}},{key:"getFullId",value:function(){return this.constructor.generateFullId(this.category,this.id)}}],[{key:"generateFullId",value:function(t,e){return t+(e?"_"+e:"")}}]),e}()});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-analytics-resources', location = 'js/analytics/AnalyticsModel.js' */
"use strict";define("jira/devstatus/analytics-model",["backbone","underscore","jira/dev-status/rest-duration-analytics"],function(t,e){return t.Model.extend({TO_ANALYTIC_KEY_OVERRIDE:{repository:"commit"},DEV_INFO_TYPES_WITH_INSTANCE_TYPE_DATA:["build"],properties:["issue","summary","instanceType"],initialize:function(t){this.devStatusContainer=t.devStatusContainer,this.devStatusData=t.devStatusData,this._getAllAnalyticData()},getIssue:function(){return this.get("issue")},getSummary:function(){return this.get("summary")},getInstanceType:function(){return this.get("instanceType")},_getAllAnalyticData:function(){this.set("issue",this._getAnalyticIssueData()),this._initListenerToData()},_getAnalyticIssueData:function(){return{isAssignee:this.devStatusContainer.data("is-assignee"),isAssignable:this.devStatusContainer.data("is-assignable"),issueStatus:this.devStatusContainer.data("issue-status"),issueType:this.devStatusContainer.data("issue-type"),issueId:this.devStatusContainer.data("issue-id"),projectId:this.devStatusContainer.data("project-id")}},_getAnalyticSummaryData:function(t){var a=this,s={};return e.each(t.summary,function(t,e){s[a.TO_ANALYTIC_KEY_OVERRIDE[e]||e]=t.overall.count>0}),s},_getAnalyticInstanceTypeData:function(t){var a=this,s={};return e.each(t.summary,function(t,n){a.DEV_INFO_TYPES_WITH_INSTANCE_TYPE_DATA.indexOf(n)>-1&&void 0!==t.byInstanceType&&e.each(t.byInstanceType,function(t,e){s[(a.TO_ANALYTIC_KEY_OVERRIDE[n]||n)+"_"+e+"_count"]=t.count})}),s},_initListenerToData:function(){var t=this;this.devStatusData.on("requestSuccess",function(){t.set("summary",t._getAnalyticSummaryData(t.devStatusData.get("aggregatedData"))),t.set("instanceType",t._getAnalyticInstanceTypeData(t.devStatusData.get("aggregatedData")))})}})}),Backbone.define("JIRA.DevStatus.AnalyticsModel",require("jira/devstatus/analytics-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:fusion-widget-common-clientside', location = 'templates/fusion-widget/fusion-widget-common.soy' */
// This file was automatically generated from fusion-widget-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.FusionWidget.Common.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.FusionWidget == 'undefined') { JIRA.Templates.FusionWidget = {}; }
if (typeof JIRA.Templates.FusionWidget.Common == 'undefined') { JIRA.Templates.FusionWidget.Common = {}; }


JIRA.Templates.FusionWidget.Common.branches = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#branch|1\x3cbranches}','<span class="count">',opt_data.count,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.branches.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.branches';
}


JIRA.Templates.FusionWidget.Common.buildsText = function(opt_data, opt_ignored) {
  var output = '';
  var tagStart__soy6 = '<span class="count">';
  var tagEnd__soy7 = '</span>';
  output += (opt_data.successfulBuildCount > 0) ? (opt_data.failedBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.failedBuildCount,tagEnd__soy7)) : (opt_data.unknownBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds}',tagStart__soy6,opt_data.successfulBuildCount,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds}',tagStart__soy6,opt_data.count,tagEnd__soy7)) : (opt_data.failedBuildCount > 0) ? (opt_data.unknownBuildCount > 0) ? soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.failedBuildCount,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} failing',tagStart__soy6,opt_data.count,tagEnd__soy7)) : soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#build|1\x3cbuilds} incomplete',tagStart__soy6,opt_data.count,tagEnd__soy7));
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.buildsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.buildsText';
}


JIRA.Templates.FusionWidget.Common.buildsIconClass = function(opt_data, opt_ignored) {
  return '' + ((opt_data.failedBuildCount > 0) ? 'aui-iconfont-error' : (opt_data.successfulBuildCount > 0) ? 'aui-iconfont-approve' : (opt_data.unknownBuildCount > 0) ? 'aui-iconfont-devtools-task-cancelled' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.buildsIconClass.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.buildsIconClass';
}


JIRA.Templates.FusionWidget.Common.commits = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#commit|1\x3ccommits}','<span class="count">',opt_data.count,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.commits.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.commits';
}


JIRA.Templates.FusionWidget.Common.deployments = function(opt_data, opt_ignored) {
  var output = '';
  var instanceOne__soy43 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[0], showProjects: opt_data.showProjects});
  var instanceTwo__soy47 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[1], showProjects: opt_data.showProjects});
  var instanceThree__soy51 = '' + JIRA.Templates.FusionWidget.Common.deploymentsInstance({environment: opt_data.topEnvironments[2], showProjects: opt_data.showProjects});
  output += soy.$$filterNoAutoescape(AJS.format('{5}Deployed{6} to {0,choice,1#{1}|2#{1} and {2}|3#{1}, {2} and {3}|3\x3c{1}, {2}, {3}, and {4} more}',opt_data.successfulCount,instanceOne__soy43,instanceTwo__soy47,instanceThree__soy51,opt_data.successfulCount - 3,opt_data.anchorStart,opt_data.anchorEnd));
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.deployments.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.deployments';
}


JIRA.Templates.FusionWidget.Common.deploymentsInstance = function(opt_data, opt_ignored) {
  return '' + ((opt_data.environment) ? '<span class="environment" ' + ((opt_data.showProjects) ? 'title="' + soy.$$escapeHtml(AJS.format('Project: {0}',opt_data.environment.project)) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.environment.title) + '</span>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.deploymentsInstance.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.deploymentsInstance';
}


JIRA.Templates.FusionWidget.Common.pullRequestsText = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#pull request|1\x3cpull requests}','<span class="count">',opt_data.stateCount,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsText';
}


JIRA.Templates.FusionWidget.Common.reviewsText = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format('{0}{1}{2} {1,choice,1#review|1\x3creviews}','<span class="count">',opt_data.stateCount,'</span>'));
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsText.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsText';
}


JIRA.Templates.FusionWidget.Common.reviewsState = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.stateLozenge({isSubtle: opt_data.isSubtle, lozengeClass: opt_data.stateClasses[opt_data.state], text: opt_data.stateText[opt_data.state], classes: opt_data.classes, tooltip: opt_data.tooltip, tooltipClass: opt_data.tooltipClass, tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsState.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsState';
}


JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {OPEN: 'aui-lozenge-complete', MERGED: 'aui-lozenge-success', DECLINED: 'aui-lozenge-error'}, stateText: {OPEN: 'OPEN', MERGED: 'MERGED', DECLINED: 'DECLINED'}, classes: 'pullrequest-state'});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsStateViewIssue';
}


JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {OPEN: 'aui-lozenge-complete', MERGED: 'aui-lozenge-success', DECLINED: 'aui-lozenge-error'}, stateText: {OPEN: 'Under Review', MERGED: 'MERGED', DECLINED: 'DECLINED'}, tooltip: true, tooltipClass: 'fusion-widget-tooltip', tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.pullRequestsStateReleaseReport';
}


JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {REVIEW: 'aui-lozenge-complete', CLOSED: 'aui-lozenge-success', DRAFT: 'aui-lozenge-complete', DEAD: 'aui-lozenge-error', REJECTED: 'aui-lozenge-error', UNKNOWN: 'aui-lozenge-error', APPROVAL: 'aui-lozenge-current', SUMMARIZE: 'aui-lozenge-complete'}, stateText: {REVIEW: 'Open', CLOSED: 'Closed', DRAFT: 'Draft', DEAD: 'Abandoned', REJECTED: 'Rejected', UNKNOWN: 'Unknown', APPROVAL: 'Approval', SUMMARIZE: 'Summarize'}});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue';
}


JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: true, state: opt_data.state, stateClasses: {REVIEW: 'aui-lozenge-complete', CLOSED: 'aui-lozenge-success', DRAFT: 'aui-lozenge-complete', DEAD: 'aui-lozenge-error', REJECTED: 'aui-lozenge-error', UNKNOWN: 'aui-lozenge-error', APPROVAL: 'aui-lozenge-complete', SUMMARIZE: 'aui-lozenge-complete'}, stateText: {REVIEW: 'Under Review', CLOSED: 'Closed', DRAFT: 'Draft', DEAD: 'Abandoned', REJECTED: 'Rejected', UNKNOWN: 'Unknown', APPROVAL: 'Under Review', SUMMARIZE: 'Under Review'}, tooltip: true, tooltipClass: 'fusion-widget-tooltip', tooltipText: opt_data.tooltipText});
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.reviewsStateReleaseReport';
}


JIRA.Templates.FusionWidget.Common.stateLozenge = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge aui-lozenge-overflow ' + ((opt_data.isSubtle) ? 'aui-lozenge-subtle' : '') + ' ' + soy.$$escapeHtml(opt_data.lozengeClass) + ' ' + ((opt_data.tooltip) ? soy.$$escapeHtml(opt_data.tooltipClass) : '') + ' ' + ((opt_data.classes) ? soy.$$escapeHtml(opt_data.classes) : '') + '"' + ((opt_data.tooltip) ? 'data-tooltip="' + soy.$$escapeHtml(opt_data.tooltipText) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.FusionWidget.Common.stateLozenge.soyTemplateName = 'JIRA.Templates.FusionWidget.Common.stateLozenge';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-frame-resources', location = 'templates/common/devstatus-detail-dialog-frame.soy' */
// This file was automatically generated from devstatus-detail-dialog-frame.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.DetailDialogFrame.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.DetailDialogFrame == 'undefined') { JIRA.Templates.DevStatus.DetailDialogFrame = {}; }


JIRA.Templates.DevStatus.DetailDialogFrame.frame = function(opt_data, opt_ignored) {
  return '<div class="jira-dialog-heading devstatus-dialog-heading ' + ((opt_data.tabs.length > 1) ? 'borderless' : '') + '"><h2>' + soy.$$escapeHtml(opt_data.title) + '</h2></div><div class="jira-dialog-content devstatus-dialog-content">' + JIRA.Templates.DevStatus.DetailDialogFrame.applicationTabs(opt_data) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialogFrame.frame.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialogFrame.frame';
}


JIRA.Templates.DevStatus.DetailDialogFrame.applicationTabs = function(opt_data, opt_ignored) {
  var output = '<div class="aui-tabs horizontal-tabs"><ul class="tabs-menu ' + ((opt_data.tabs.length == 1) ? 'hidden' : '') + '" >';
  var tabList18 = opt_data.tabs;
  var tabListLen18 = tabList18.length;
  for (var tabIndex18 = 0; tabIndex18 < tabListLen18; tabIndex18++) {
    var tabData18 = tabList18[tabIndex18];
    output += '<li id="tab-menu-' + soy.$$escapeHtml(tabData18.type) + '" data-application-type="' + soy.$$escapeHtml(tabData18.type) + '" class="menu-item ' + ((! opt_data.initialTab && tabIndex18 == 0 || tabData18.type == opt_data.initialTab) ? ' active-tab' : '') + '"><a  href="#tab-content-' + soy.$$escapeHtml(tabData18.type) + '"><strong>' + soy.$$escapeHtml(tabData18.name) + '</strong><span class="aui-badge devstatus-tab-count">' + soy.$$escapeHtml(tabData18.count) + '</span></a></li>';
  }
  output += '</ul><div class="form-body">';
  var tabList36 = opt_data.tabs;
  var tabListLen36 = tabList36.length;
  for (var tabIndex36 = 0; tabIndex36 < tabListLen36; tabIndex36++) {
    var tabData36 = tabList36[tabIndex36];
    output += '<div class="tabs-pane ' + ((tabIndex36 == 0) ? 'active-pane' : '') + '" id="tab-content-' + soy.$$escapeHtml(tabData36.type) + '"><div class="status-loading"></div><div class="detail-content-container"></div></div>';
  }
  output += '</div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialogFrame.applicationTabs.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialogFrame.applicationTabs';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-instance-picker-view', location = 'js/viewissue/dialog/InstancePickerView.js' */
"use strict";define("jira/devstatus/instance-picker-view",["backbone","jquery","underscore","jira-development-status/util/navigate","jira-development-status/util/sanitize"],function(e,t,s,i,n){return e.View.extend({ARROW_KEY_UP_CODE:38,ARROW_KEY_DOWN_CODE:40,template:JIRA.Templates.DevStatus.Dialog.content,events:{"keydown .jira-dialog-content":"_onTargetKeyboardSelect","focus .target":"_onTargetFocus"},initialize:function(e){this.currentSelected=null,this.link=e.activeTrigger,this.cta=e.cta,this.processTargets=e.processTargets,this.issueId=e.issueId,this.uniqueResultAction=e.uniqueResultAction||function(e){i.navigate(e.url)}},render:function(){var e=this._getIssueId(this.link),i=t.Deferred();return this._fetchTargets(this.cta,e).done(s.bind(function(e){this.processTargets&&(e.remoteApps=this.processTargets(e.remoteApps));var s=this._isUniqueResult(e);if(s)this.uniqueResultAction(s);else{var n=t(this.template(e));i.resolve(n)}},this)).fail(function(e){i.resolve(e)}),i.promise()},_fetchTargets:function(e,s){var i=t.Deferred();return t.ajax({url:contextPath+"/rest/dev-status/1.0/issue/targets?cta="+encodeURIComponent(e)+"&issueId="+encodeURIComponent(s)}).done(function(e){e.remoteApps=n.sanitizeCollection(e.remoteApps,["baseUrl","iconUrl","url"]),i.resolve(e)}).fail(function(e,t){i.reject(JIRA.SmartAjax.buildDialogErrorContent(e).html())}),i.promise()},_getIssueId:function(e){return this.issueId||e&&e.data("issueid")||t("#devstatus-container").data("issue-id")},_isUniqueResult:function(e){return 1===e.remoteApps.length&&e.remoteApps[0]},_toggleEntry:function(e,t,s){var i=e.eq(t);s&&i.focus(),i.addClass("selected"),this.currentSelected=i},_removeSelected:function(){this.currentSelected&&(this.currentSelected.removeClass("selected"),this.currentSelected=null)},_onTargetKeyboardSelect:function(e){if("keydown"===e.type){var t=0;if(e.keyCode===this.ARROW_KEY_UP_CODE?t=-1:e.keyCode===this.ARROW_KEY_DOWN_CODE&&(t=1),0!==t){e.preventDefault();var s=this.$el.find(".target"),i=s.index(this.$el.find(".selected"));i!==-1&&s.eq((i+t)%s.size()).focus()}}},_onTargetFocus:function(e){this._removeSelected(),this._toggleEntry(t(e.target),0,!1)}})}),Backbone.define("JIRA.DevStatus.InstancePickerView",require("jira/devstatus/instance-picker-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'templates/viewissue/devstatus-detail-dialog.soy' */
// This file was automatically generated from devstatus-detail-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.DetailDialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.DetailDialog == 'undefined') { JIRA.Templates.DevStatus.DetailDialog = {}; }


JIRA.Templates.DevStatus.DetailDialog.repositoryHeader = function(opt_data, opt_ignored) {
  return '<div class="repository-header' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><div class="aui-group aui-group-split repository-header-group"><div class="aui-item project-space">' + JIRA.Templates.DevStatus.DetailDialog.projectInfo(opt_data) + '</div>' + ((opt_data.extraContent) ? '<div class="aui-item action-space">' + soy.$$filterNoAutoescape(opt_data.extraContent) + '</div>' : '') + '</div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.repositoryHeader.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.repositoryHeader';
}


JIRA.Templates.DevStatus.DetailDialog.projectInfo = function(opt_data, opt_ignored) {
  return '<div class="project-avatar" ' + ((opt_data.repository.avatarDescription) ? 'title="' + soy.$$escapeHtml(opt_data.repository.avatarDescription) + '"' : '') + '><span class="aui-avatar aui-avatar-small aui-avatar-project ' + ((opt_data.repository.avatar) ? 'fusion-avatar-project' : 'default-avatar-project') + '">' + ((opt_data.repository.avatar) ? '<span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml(opt_data.repository.avatar) + '" /></span>' : '<span class="aui-avatar-inner aui-icon aui-icon-small aui-iconfont-devtools-repository"></span>') + '</span></div><div class="project-info">' + ((opt_data.repository.url) ? '<a class="repository-link" href="' + soy.$$escapeHtml(opt_data.repository.url) + '"' + ((opt_data.showTooltip) ? ' title="' + soy.$$escapeHtml(opt_data.repository.name) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.repository.name) + '</a>' : '<span class="repository-link" ' + ((opt_data.showTooltip) ? ' title="' + soy.$$escapeHtml(opt_data.repository.name) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.repository.name) + '</span>') + '</div><div class="extra-project-info">' + ((opt_data.showParent && opt_data.repository.parent && opt_data.repository.parent.name && opt_data.repository.parent.url) ? '<a class="fork-off" href="' + soy.$$escapeHtml(opt_data.repository.parent.url) + '"><span class="fork-name" title="' + soy.$$escapeHtml(AJS.format('Fork of {0}',opt_data.repository.parent.name)) + '">' + soy.$$escapeHtml(AJS.format('Fork of {0}',opt_data.repository.parent.name)) + '</span></a>' : '') + ((opt_data.extraProjectInfo) ? soy.$$filterNoAutoescape(opt_data.extraProjectInfo) : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.projectInfo.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.projectInfo';
}


JIRA.Templates.DevStatus.DetailDialog.oauthStatus = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-info"></span> ' + soy.$$escapeHtml(opt_data.message) + ' ';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.oauthStatus.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.oauthStatus';
}


JIRA.Templates.DevStatus.DetailDialog.authenticationScreen = function(opt_data, opt_ignored) {
  return '<div class="authentication-problem"><div class="image"></div><h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' + ((opt_data.userError) ? '<p class="user-error">' + soy.$$escapeHtml(opt_data.userError) + '</p>' : '') + ((opt_data.unauthInstances.length > 0) ? '<p>' + soy.$$escapeHtml(AJS.format('Please log in to approve {0,choice,1#this application|1\x3cthese applications}:',opt_data.unauthInstances.length)) + ' <span class="instances"></span></p>' : '') + ((opt_data.otherInstances.length > 0) ? JIRA.Templates.DevStatus.connectionProblemAsWarning({instances: opt_data.otherInstances, showContactAdminForm: opt_data.showContactAdminForm}) : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.authenticationScreen.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.authenticationScreen';
}


JIRA.Templates.DevStatus.DetailDialog.connectionProblemScreen = function(opt_data, opt_ignored) {
  return '<div class="connection-problem"><div class="image"></div><h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' + JIRA.Templates.DevStatus.connectionProblem(opt_data) + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.connectionProblemScreen.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.connectionProblemScreen';
}


JIRA.Templates.DevStatus.DetailDialog.noPermissionToViewAll = function(opt_data, opt_ignored) {
  return '<div class="no-permission-to-view-all"><div class="lock-image"></div><span>' + soy.$$escapeHtml(opt_data.message) + '</span>' + ((opt_data.secondaryMessage) ? ' <span>' + soy.$$escapeHtml(opt_data.secondaryMessage) + '</span>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.noPermissionToViewAll.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.noPermissionToViewAll';
}


JIRA.Templates.DevStatus.DetailDialog.timestamp = function(opt_data, opt_ignored) {
  return '' + ((opt_data.timestamp) ? '<time class="livestamp date user-tz" datetime="' + soy.$$escapeHtml(opt_data.timestamp) + '" data-datetime-format="longAge">' + soy.$$escapeHtml(opt_data.timestamp) + '</time>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.timestamp.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.timestamp';
}


JIRA.Templates.DevStatus.DetailDialog.vcsUser = function(opt_data, opt_ignored) {
  return '<span><div class="vcs-user"><span class="extra-content-in-title ' + ((opt_data.approved) ? 'fade' : '') + '" title="' + soy.$$escapeHtml(opt_data.name) + '"><img class="author-avatar" src="' + soy.$$escapeHtml(opt_data.avatar) + '"/></span>' + ((opt_data.approved) ? '<span class="approved">\u2713</span>' : '') + '</div></span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.vcsUser.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.vcsUser';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'templates/viewissue/build/devstatus-detail-dialog-build.soy' */
// This file was automatically generated from devstatus-detail-dialog-build.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.DetailDialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.DetailDialog == 'undefined') { JIRA.Templates.DevStatus.DetailDialog = {}; }


JIRA.Templates.DevStatus.DetailDialog.build = function(opt_data, opt_ignored) {
  var output = '';
  var jswddProviderList3 = opt_data.jswddProviders;
  var jswddProviderListLen3 = jswddProviderList3.length;
  for (var jswddProviderIndex3 = 0; jswddProviderIndex3 < jswddProviderListLen3; jswddProviderIndex3++) {
    var jswddProviderData3 = jswddProviderList3[jswddProviderIndex3];
    output += JIRA.Templates.DevStatus.DetailDialog.jswddProvidersContent(jswddProviderData3);
  }
  var projectList6 = opt_data.projects;
  var projectListLen6 = projectList6.length;
  for (var projectIndex6 = 0; projectIndex6 < projectListLen6; projectIndex6++) {
    var projectData6 = projectList6[projectIndex6];
    output += JIRA.Templates.DevStatus.DetailDialog.projectContent({project: projectData6, projectIndex: projectIndex6, withArtifactColumn: opt_data.hasArtifacts, applicationType: opt_data.applicationType});
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.build.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.build';
}


JIRA.Templates.DevStatus.DetailDialog.jswddProvidersContent = function(opt_data, opt_ignored) {
  var output = '<div class="detail-builds-container"><div class="builds-header"><div class="project-info"><h2 class="ellipsis"><img src="' + soy.$$escapeHtml(opt_data.provider.logoUrl) + '" alt="' + soy.$$escapeHtml(opt_data.provider.name) + '" title="' + soy.$$escapeHtml(opt_data.provider.name) + '" height="32" style="vertical-align: middle" />&nbsp;<a class="project-link jswdd-provider-link" href="' + soy.$$escapeHtml(opt_data.provider.homeUrl) + '" title="' + soy.$$escapeHtml(opt_data.provider.name) + '">' + soy.$$escapeHtml(opt_data.provider.name) + '</a></h2></div></div><div class="devstatus-detail-table jswdd-builds-table"><table class="aui"><thead><tr><th class="build">Build</th><th class="result cell-type-collapsed">Status</th><th class="timestamp cell-type-collapsed">Last Updated</th></tr></thead><tbody>';
  var buildList27 = opt_data.builds;
  var buildListLen27 = buildList27.length;
  for (var buildIndex27 = 0; buildIndex27 < buildListLen27; buildIndex27++) {
    var buildData27 = buildList27[buildIndex27];
    output += '<tr class="build-row"><td class="build">' + JIRA.Templates.DevStatus.DetailDialog.planOrBuildName({planOrBuild: buildData27, aTagClassName: 'jswdd-build-link'}) + '</td><td class="result">' + JIRA.Templates.DevStatus.DetailDialog.buildIcon({build: buildData27}) + '&nbsp;' + JIRA.Templates.DevStatus.DetailDialog.buildResultNoDuration({build: buildData27}) + '</td><td class="timestamp">' + JIRA.Templates.DevStatus.DetailDialog.timestamp({timestamp: buildData27.lastUpdated}) + '</td></tr>';
  }
  output += '</tbody></table></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.jswddProvidersContent.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.jswddProvidersContent';
}


JIRA.Templates.DevStatus.DetailDialog.projectContent = function(opt_data, opt_ignored) {
  var output = '<div class="detail-builds-container">' + JIRA.Templates.DevStatus.DetailDialog.projectHeader(opt_data) + '<div class="devstatus-detail-table builds-table' + ((opt_data.withArtifactColumn) ? ' builds-table-with-artifact-column' : '') + '"><table class="aui"><thead><tr><th class="plan">' + soy.$$escapeHtml('Plan') + '</th><th class="build cell-type-collapsed">' + soy.$$escapeHtml('Latest build') + '</th><th class="result cell-type-collapsed">' + soy.$$escapeHtml('Result') + '</th><th class="timestamp cell-type-collapsed">' + soy.$$escapeHtml('Completed') + '</th>' + ((opt_data.withArtifactColumn) ? '<th class="actions cell-type-collapsed"></th>' : '') + '</tr></thead><tbody>';
  var planList64 = opt_data.project.plans;
  var planListLen64 = planList64.length;
  for (var planIndex64 = 0; planIndex64 < planListLen64; planIndex64++) {
    var planData64 = planList64[planIndex64];
    var planHasArtifacts__soy65 = planData64.build.artifacts && planData64.build.artifacts.length;
    var uniqueIdSuffix__soy66 = opt_data.projectIndex + '-' + planIndex64;
    output += '<tr class="plan-row' + ((planHasArtifacts__soy65) ? ' merge' : '') + '"><td class="plan">' + JIRA.Templates.DevStatus.DetailDialog.planOrBuildName({planOrBuild: planData64, aTagClassName: 'plan-link'}) + '</td><td class="build">' + JIRA.Templates.DevStatus.DetailDialog.buildIcon({build: planData64.build}) + ' <a class="build-link" href="' + soy.$$escapeHtml(planData64.build.url) + '">' + soy.$$escapeHtml(AJS.format('#{0}',planData64.build.buildNumber)) + '</a></td><td class="result">' + JIRA.Templates.DevStatus.DetailDialog.buildResult({build: planData64.build}) + '</td><td class="timestamp">' + JIRA.Templates.DevStatus.DetailDialog.timestamp({timestamp: planData64.build.finishedDate}) + '</td>' + ((opt_data.withArtifactColumn) ? '<td class="actions">' + ((planHasArtifacts__soy65) ? aui.expander.trigger({id: 'detail-dialog-build-show-artifacts-trigger-' + uniqueIdSuffix__soy66, contentId: 'detail-dialog-build-show-artifacts-content-' + uniqueIdSuffix__soy66, tag: 'a', content: 'Show artifacts', replaceText: 'Hide artifacts'}) : '') + '</td>' : '') + '</tr>' + ((planHasArtifacts__soy65) ? '<tr class="artifacts"><td colspan="5">' + aui.expander.content({id: 'detail-dialog-build-show-artifacts-content-' + uniqueIdSuffix__soy66, content: '' + JIRA.Templates.DevStatus.DetailDialog.artifactsTable({build: planData64.build})}) + '</td></tr>' : '');
  }
  output += '</tbody></table></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.projectContent.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.projectContent';
}


JIRA.Templates.DevStatus.DetailDialog.projectHeader = function(opt_data, opt_ignored) {
  return '<div class="builds-header"><div class="project-info"><h2 class="ellipsis"><a class="project-link" href="' + soy.$$escapeHtml(opt_data.project.url) + '" title="' + soy.$$escapeHtml(opt_data.project.name) + '">' + soy.$$escapeHtml(opt_data.project.name) + '</a></h2></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.projectHeader.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.projectHeader';
}


JIRA.Templates.DevStatus.DetailDialog.planOrBuildName = function(opt_data, opt_ignored) {
  return '<div><span class="plan-name">' + ((opt_data.planOrBuild.isBranch) ? '<a class="' + soy.$$escapeHtml(opt_data.aTagClassName) + '" href="' + soy.$$escapeHtml(opt_data.planOrBuild.url) + '" title="' + soy.$$escapeHtml(opt_data.planOrBuild.name) + ' &rsaquo; ' + soy.$$escapeHtml(opt_data.planOrBuild.branchName) + '">' + soy.$$escapeHtml(opt_data.planOrBuild.name) + '</a> &rsaquo; <span class="aui-icon aui-icon-small aui-iconfont-devtools-branch-small">' + soy.$$escapeHtml(opt_data.planOrBuild.branchName) + '</span><a class="' + soy.$$escapeHtml(opt_data.aTagClassName) + '" href="' + soy.$$escapeHtml(opt_data.planOrBuild.url) + '" title="' + soy.$$escapeHtml(opt_data.planOrBuild.name) + ' &rsaquo; ' + soy.$$escapeHtml(opt_data.planOrBuild.branchName) + '">' + soy.$$escapeHtml(opt_data.planOrBuild.branchName) + '</a>' : '<a class="' + soy.$$escapeHtml(opt_data.aTagClassName) + '" href="' + soy.$$escapeHtml(opt_data.planOrBuild.url) + '" title="' + ((opt_data.planOrBuild.description) ? soy.$$escapeHtml(opt_data.planOrBuild.description) : soy.$$escapeHtml(opt_data.planOrBuild.name)) + '">' + soy.$$escapeHtml(opt_data.planOrBuild.name) + '</a>') + '</span>' + ((opt_data.planOrBuild.disabled) ? '<span class="aui-lozenge aui-lozenge-subtle disabled" title="' + soy.$$escapeHtml('This plan is disabled') + '">' + soy.$$escapeHtml('Disabled') + '</span>' : '') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.planOrBuildName.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.planOrBuildName';
}


JIRA.Templates.DevStatus.DetailDialog.buildResult = function(opt_data, opt_ignored) {
  var output = '';
  if ((opt_data.build.buildState == 'SUCCESS' || opt_data.build.buildState == 'FAILED') && opt_data.build.testSummary) {
    var duration__soy174 = '' + JIRA.Templates.DevStatus.DetailDialog.buildDuration(opt_data);
    output += '<span>' + ((opt_data.build.testSummary.failedTestCount > 0) ? (opt_data.build.testSummary.successfulTestCount) ? soy.$$escapeHtml(AJS.format('{0} of {1} tests failed in {2}',opt_data.build.testSummary.failedTestCount,opt_data.build.testSummary.totalTestCount,duration__soy174)) : soy.$$escapeHtml(AJS.format('{0} {0,choice,1#test|1\x3ctests} failed in {1}',opt_data.build.testSummary.failedTestCount,duration__soy174)) : (opt_data.build.testSummary.successfulTestCount > 0) ? soy.$$escapeHtml(AJS.format('{0} {0,choice,1#test|1\x3ctests} passed in {1}',opt_data.build.testSummary.successfulTestCount,duration__soy174)) : (opt_data.build.buildState == 'SUCCESS') ? soy.$$escapeHtml(AJS.format('Passed in {0}',duration__soy174)) : soy.$$escapeHtml(AJS.format('Failed in {0}',duration__soy174))) + '</span>';
  } else {
    output += JIRA.Templates.DevStatus.DetailDialog.buildStateName({buildState: opt_data.build.buildState});
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.buildResult.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.buildResult';
}


JIRA.Templates.DevStatus.DetailDialog.buildResultNoDuration = function(opt_data, opt_ignored) {
  return '' + (((opt_data.build.buildState == 'SUCCESS' || opt_data.build.buildState == 'FAILED') && opt_data.build.testSummary) ? '<span>' + ((opt_data.build.testSummary.failedTestCount > 0) ? (opt_data.build.testSummary.successfulTestCount) ? soy.$$escapeHtml(AJS.format('{0} of {1} tests failed',opt_data.build.testSummary.failedTestCount,opt_data.build.testSummary.totalTestCount)) : soy.$$escapeHtml(AJS.format('{0} {0,choice,1#test|1\x3ctests} failed',opt_data.build.testSummary.failedTestCount)) : (opt_data.build.testSummary.successfulTestCount > 0) ? soy.$$escapeHtml(AJS.format('{0} {0,choice,1#test|1\x3ctests} passed',opt_data.build.testSummary.successfulTestCount)) : (opt_data.build.buildState == 'SUCCESS') ? soy.$$escapeHtml('Passed') : soy.$$escapeHtml('Failed')) + '</span>' : JIRA.Templates.DevStatus.DetailDialog.buildStateName({buildState: opt_data.build.buildState}));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.buildResultNoDuration.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.buildResultNoDuration';
}


JIRA.Templates.DevStatus.DetailDialog.buildStateName = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.buildState) {
    case 'SUCCESS':
      output += soy.$$escapeHtml('Success');
      break;
    case 'FAILED':
      output += soy.$$escapeHtml('Failed');
      break;
    case 'PENDING':
      output += soy.$$escapeHtml('Pending');
      break;
    case 'IN_PROGRESS':
      output += soy.$$escapeHtml('In progress');
      break;
    case 'CANCELLED':
      output += soy.$$escapeHtml('Cancelled');
      break;
    default:
      output += soy.$$escapeHtml('Build incomplete');
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.buildStateName.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.buildStateName';
}


JIRA.Templates.DevStatus.DetailDialog.buildDuration = function(opt_data, opt_ignored) {
  return '' + ((opt_data.build) ? (opt_data.build.durationInSeconds < 1) ? soy.$$escapeHtml('under 1 second') : (opt_data.build.durationInSeconds < 90) ? soy.$$escapeHtml(AJS.format('{0} {0,choice,1#second|1\x3cseconds}',opt_data.build.durationInSeconds)) : (opt_data.build.durationInSeconds < 5400) ? soy.$$escapeHtml(AJS.format('{0} {0,choice,1#minute|1\x3cminutes}',Math.floor(opt_data.build.durationInSeconds / 60))) : soy.$$escapeHtml(AJS.format('{0} {0,choice,1#hour|1\x3chours}',Math.floor(opt_data.build.durationInSeconds / 60 / 60))) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.buildDuration.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.buildDuration';
}


JIRA.Templates.DevStatus.DetailDialog.buildIcon = function(opt_data, opt_ignored) {
  var output = '';
  var iconClass__soy250 = '' + ((opt_data.build.buildState == 'SUCCESS') ? 'aui-iconfont-approve' : (opt_data.build.buildState == 'FAILED') ? 'aui-iconfont-error' : 'aui-iconfont-devtools-task-cancelled');
  output += '<span class="aui-icon aui-icon-small ' + soy.$$escapeHtml(iconClass__soy250) + '">' + soy.$$escapeHtml(opt_data.build.buildState) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.buildIcon.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.buildIcon';
}


JIRA.Templates.DevStatus.DetailDialog.artifactsTable = function(opt_data, opt_ignored) {
  var output = '';
  var column1Height__soy264 = Math.ceil(opt_data.build.artifacts.length / 3);
  var column2Height__soy265 = Math.ceil((opt_data.build.artifacts.length - 1) / 3);
  var column3Height__soy266 = Math.ceil((opt_data.build.artifacts.length - 2) / 3);
  output += '<div class="build-artifacts-table"><table class="aui"><tbody>';
  var artifactIndexLimit268 = column1Height__soy264;
  for (var artifactIndex268 = 0; artifactIndex268 < artifactIndexLimit268; artifactIndex268++) {
    output += '<tr><td>' + JIRA.Templates.DevStatus.DetailDialog.artifactName({artifact: opt_data.build.artifacts[artifactIndex268]}) + '</td><td>' + ((artifactIndex268 < column2Height__soy265) ? JIRA.Templates.DevStatus.DetailDialog.artifactName({artifact: opt_data.build.artifacts[artifactIndex268 + column1Height__soy264]}) : '') + '</td><td>' + ((artifactIndex268 < column3Height__soy266) ? JIRA.Templates.DevStatus.DetailDialog.artifactName({artifact: opt_data.build.artifacts[artifactIndex268 + column1Height__soy264 + column2Height__soy265]}) : '') + '</td></tr>';
  }
  output += '</tbody></table></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.artifactsTable.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.artifactsTable';
}


JIRA.Templates.DevStatus.DetailDialog.artifactName = function(opt_data, opt_ignored) {
  return '' + ((opt_data.artifact && opt_data.artifact.name) ? (opt_data.artifact.url) ? '<a class="artifact-link" href="' + soy.$$escapeHtml(opt_data.artifact.url) + '">' + soy.$$escapeHtml(opt_data.artifact.name) + '</a>' : soy.$$escapeHtml(opt_data.artifact.name) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.artifactName.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.artifactName';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'templates/viewissue/deployment/devstatus-detail-dialog-deployment.soy' */
// This file was automatically generated from devstatus-detail-dialog-deployment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.DetailDialog.Deployment.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.DetailDialog == 'undefined') { JIRA.Templates.DevStatus.DetailDialog = {}; }
if (typeof JIRA.Templates.DevStatus.DetailDialog.Deployment == 'undefined') { JIRA.Templates.DevStatus.DetailDialog.Deployment = {}; }


JIRA.Templates.DevStatus.DetailDialog.Deployment.deployment = function(opt_data, opt_ignored) {
  var output = '';
  var projectList3 = opt_data.deploymentProjects;
  var projectListLen3 = projectList3.length;
  for (var projectIndex3 = 0; projectIndex3 < projectListLen3; projectIndex3++) {
    var projectData3 = projectList3[projectIndex3];
    output += JIRA.Templates.DevStatus.DetailDialog.Deployment.projectContent({project: projectData3, applicationType: opt_data.applicationType});
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.Deployment.deployment.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.Deployment.deployment';
}


JIRA.Templates.DevStatus.DetailDialog.Deployment.projectContent = function(opt_data, opt_ignored) {
  var output = '<div class="detail-deployments-container">' + JIRA.Templates.DevStatus.DetailDialog.Deployment.projectHeader(opt_data) + '<div class="devstatus-detail-table deployments-table"><table class="aui"><thead><tr><th class="environment">' + soy.$$escapeHtml('Environment') + '</th><th class="status cell-type-collapsed">' + soy.$$escapeHtml('Status') + '</th><th class="release cell-type-collapsed">' + soy.$$escapeHtml('Latest release') + '</th><th class="timestamp cell-type-collapsed">' + soy.$$escapeHtml('Last deployed') + '</th></tr></thead><tbody>';
  var environmentList20 = opt_data.project.environments;
  var environmentListLen20 = environmentList20.length;
  for (var environmentIndex20 = 0; environmentIndex20 < environmentListLen20; environmentIndex20++) {
    var environmentData20 = environmentList20[environmentIndex20];
    output += '<tr class="environment-row"><td class="environment">' + JIRA.Templates.DevStatus.DetailDialog.Deployment.environmentName({environment: environmentData20}) + '</td><td class="status cell-type-collapsed">' + JIRA.Templates.DevStatus.DetailDialog.Deployment.statusLozenge({environment: environmentData20}) + '</td><td class="release">' + ((environmentData20.deployedVersion) ? JIRA.Templates.DevStatus.DetailDialog.Deployment.release({release: environmentData20.deployedVersion}) : '') + '</td><td class="timestamp">' + JIRA.Templates.DevStatus.DetailDialog.timestamp({timestamp: environmentData20.lastDeployed}) + '</td></tr>';
  }
  output += '</tbody></table></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.Deployment.projectContent.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.Deployment.projectContent';
}


JIRA.Templates.DevStatus.DetailDialog.Deployment.projectHeader = function(opt_data, opt_ignored) {
  return '<div class="deployments-header"><div class="project-info"><h2 class="ellipsis"><a class="project-link" href="' + soy.$$escapeHtml(opt_data.project.url) + '" title="' + ((opt_data.project.description) ? soy.$$escapeHtml(opt_data.project.description) : soy.$$escapeHtml(opt_data.project.name)) + '">' + soy.$$escapeHtml(opt_data.project.name) + '</a></h2><div class="ellipsis"><strong class="commit-info">' + soy.$$escapeHtml(AJS.format('Commits were in release {0}',opt_data.project.latestVersions[0].name)) + '</strong></div></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.Deployment.projectHeader.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.Deployment.projectHeader';
}


JIRA.Templates.DevStatus.DetailDialog.Deployment.environmentName = function(opt_data, opt_ignored) {
  return '<a class="environment-link" href="' + soy.$$escapeHtml(opt_data.environment.url) + '" title="' + ((opt_data.environment.description) ? soy.$$escapeHtml(opt_data.environment.description) : soy.$$escapeHtml(opt_data.environment.name)) + '">' + soy.$$escapeHtml(opt_data.environment.name) + '</a>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.Deployment.environmentName.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.Deployment.environmentName';
}


JIRA.Templates.DevStatus.DetailDialog.Deployment.statusLozenge = function(opt_data, opt_ignored) {
  return '' + ((opt_data.environment.status == 'DEPLOYED') ? '<span class="aui-lozenge aui-lozenge-subtle aui-lozenge-success">' + soy.$$escapeHtml('Deployed') + '</span>' : (opt_data.environment.status == 'FAILED') ? '<span class="aui-lozenge aui-lozenge-subtle aui-lozenge-error">' + soy.$$escapeHtml('Failed') + '</span>' : (opt_data.environment.status == 'NOT_DEPLOYED') ? '<span class="aui-lozenge aui-lozenge-subtle">' + soy.$$escapeHtml('Not deployed') + '</span>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.Deployment.statusLozenge.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.Deployment.statusLozenge';
}


JIRA.Templates.DevStatus.DetailDialog.Deployment.release = function(opt_data, opt_ignored) {
  return '' + ((opt_data.release.url) ? '<a class="release-link" href="' + soy.$$escapeHtml(opt_data.release.url) + '" title="' + soy.$$escapeHtml(opt_data.release.name) + '">' + soy.$$escapeHtml(opt_data.release.name) + '</a>' : soy.$$escapeHtml(opt_data.release.name));
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.Deployment.release.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.Deployment.release';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'templates/viewissue/devstatus-detail-dialog-commit.soy' */
// This file was automatically generated from devstatus-detail-dialog-commit.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.DetailDialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.DetailDialog == 'undefined') { JIRA.Templates.DevStatus.DetailDialog = {}; }


JIRA.Templates.DevStatus.DetailDialog.commit = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.canCreateReview) ? '<div class="aui-group aui-group-split"><div class="aui-item"></div><div class="aui-item"><div class="create-review-instance"><a href="#">' + soy.$$escapeHtml('Create review for all commits') + '</a></div></div></div>' : '');
  var repoList8 = opt_data.repositories;
  var repoListLen8 = repoList8.length;
  for (var repoIndex8 = 0; repoIndex8 < repoListLen8; repoIndex8++) {
    var repoData8 = repoList8[repoIndex8];
    output += JIRA.Templates.DevStatus.DetailDialog.commitContent(soy.$$augmentMap(opt_data, {repository: repoData8, repositoryIndex: repoIndex8}));
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.commit.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.commit';
}


JIRA.Templates.DevStatus.DetailDialog.commitContent = function(opt_data, opt_ignored) {
  var output = '<div class="detail-commits-container' + ((opt_data.repository.showReviews) ? ' has-reviews' : '') + ((opt_data.repository.showBranches) ? ' has-branches' : '') + ((opt_data.repository.showFiles) ? ' has-files' : '') + ' ' + ((opt_data.repository.showCreateReview) ? 'has-actions' : '') + '" data-repository-index="' + soy.$$escapeHtml(opt_data.repositoryIndex) + '" >' + JIRA.Templates.DevStatus.DetailDialog.repositoryHeader(soy.$$augmentMap(opt_data, {showParent: true, extraProjectInfo: '' + ((opt_data.repository.showInstance && opt_data.repository.instance) ? '<div class="repository-instance" title="' + soy.$$escapeHtml(opt_data.repository.instance.name) + '">(' + soy.$$escapeHtml(opt_data.repository.instance.name) + ')</div>' : ''), extraContent: '' + ((opt_data.repository.showFiles) ? '<div class="file-expand"><a href="#">' + soy.$$escapeHtml('Show all files') + '</a></div>' : '')})) + '<div class="devstatus-detail-table commits-table"><table class="aui"><thead><tr><th class="author cell-type-collapsed">' + soy.$$escapeHtml('Author') + '</th><th class="changeset cell-type-collapsed">' + soy.$$escapeHtml('Commit') + '</th><th class="message">' + soy.$$escapeHtml('Message') + '</th>' + ((opt_data.repository.showBranches) ? '<th class="branches"></th>' : '') + ((opt_data.repository.showReviews) ? '<th class="reviews">' + soy.$$escapeHtml('Reviews') + '</th>' : '') + '<th class="timestamp">' + soy.$$escapeHtml('Date') + '</th>' + ((opt_data.repository.showFiles) ? '<th class="filecount">' + soy.$$escapeHtml('Files') + '</th>' : '') + ((opt_data.repository.showCreateReview) ? '<th class="commit-actions">' + soy.$$escapeHtml('Actions') + '</th>' : '') + '</tr></thead><tbody>';
  var commitList76 = opt_data.repository.commits;
  var commitListLen76 = commitList76.length;
  for (var commitIndex76 = 0; commitIndex76 < commitListLen76; commitIndex76++) {
    var commitData76 = commitList76[commitIndex76];
    output += '<tr data-changesetid="' + soy.$$escapeHtml(commitData76.id) + '" class="commitrow' + ((commitData76.merge) ? ' merge' : '') + '" data-commit-index="' + soy.$$escapeHtml(commitIndex76) + '"><td class="author">' + JIRA.Templates.DevStatus.DetailDialog.vcsUser(commitData76.author) + '</td><td class="changeset">' + ((commitData76.url) ? '<a class="changesetid" href="' + soy.$$escapeHtml(commitData76.url) + '">' + soy.$$escapeHtml(commitData76.displayId) + '</a>' : '<span class="changesetid">' + soy.$$escapeHtml(commitData76.displayId) + '</span>') + ((commitData76.merge) ? JIRA.Templates.DevStatus.DetailDialog.mergeLozenge(null) : '') + '</td><td class="message"><span class="ellipsis" title="' + soy.$$escapeHtml(commitData76.message) + '">' + soy.$$truncate(soy.$$escapeHtml(commitData76.message), 500, true) + '</span></td>' + JIRA.Templates.DevStatus.DetailDialog.branchesColumn(soy.$$augmentMap(opt_data, {commit: commitData76})) + JIRA.Templates.DevStatus.DetailDialog.reviewColumn(soy.$$augmentMap(opt_data, {commit: commitData76, entryIndex: commitIndex76})) + '<td class="timestamp"><time class="livestamp" datetime="' + soy.$$escapeHtml(commitData76.authorTimestamp) + '" data-datetime-format="longAge"> ' + soy.$$escapeHtml(commitData76.authorTimestamp) + '</time></td>' + ((opt_data.repository.showFiles) ? JIRA.Templates.DevStatus.DetailDialog.filesColumn({count: commitData76.fileCount}) : '') + ((opt_data.repository.showCreateReview) ? JIRA.Templates.DevStatus.DetailDialog.actionsColumn(soy.$$augmentMap(opt_data, {commit: commitData76})) : '') + '</tr>' + ((opt_data.repository.showFiles) ? JIRA.Templates.DevStatus.DetailDialog.filesRow(soy.$$augmentMap(opt_data, {repository: opt_data.repository, commit: commitData76})) : '');
  }
  output += '</tbody></table></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.commitContent.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.commitContent';
}


JIRA.Templates.DevStatus.DetailDialog.mergeLozenge = function(opt_data, opt_ignored) {
  return '<span class="aui-lozenge merge" title="' + soy.$$escapeHtml('This commit is a merge') + '">' + soy.$$escapeHtml('M') + '</span>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.mergeLozenge.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.mergeLozenge';
}


JIRA.Templates.DevStatus.DetailDialog.branchesColumn = function(opt_data, opt_ignored) {
  return '' + ((opt_data.repository.showBranches) ? '<td class="branches">' + ((opt_data.commit.branches && opt_data.commit.branches.totalCount > 0) ? '<span class="branches-link aui-lozenge ref-lozenge"><span class="aui-icon aui-icon-small aui-iconfont-devtools-branch-small">Branch</span></button>' + ((opt_data.commit.branches.totalCount > 1) ? '<span class="branch-count">' + soy.$$escapeHtml(opt_data.commit.branches.totalCount) + '</span>' : '') + '</span>' : '') + '</td>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.branchesColumn.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.branchesColumn';
}


JIRA.Templates.DevStatus.DetailDialog.branchesTooltip = function(opt_data, opt_ignored) {
  var output = '<span class="branch-tooltip">';
  var branchList156 = opt_data.branchData.branches;
  var branchListLen156 = branchList156.length;
  for (var branchIndex156 = 0; branchIndex156 < branchListLen156; branchIndex156++) {
    var branchData156 = branchList156[branchIndex156];
    output += '<div class="branch-name-tooltip">' + soy.$$escapeHtml(branchData156.name) + '</div>';
  }
  output += ((opt_data.branchData.totalCount > opt_data.branchData.branches.length) ? '<div class="branch-tooltip-summary">' + soy.$$escapeHtml(AJS.format('and {0} more',opt_data.branchData.totalCount - opt_data.branchData.branches.length)) + '</div>' : '') + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.branchesTooltip.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.branchesTooltip';
}


JIRA.Templates.DevStatus.DetailDialog.reviewColumn = function(opt_data, opt_ignored) {
  return '' + ((opt_data.repository.showReviews) ? '<td class="reviews">' + ((opt_data.commit.reviews && opt_data.commit.reviews.totalCount > 0) ? '<span data-aui-trigger aria-controls="commit-reviews-tooltip-' + soy.$$escapeHtml(opt_data.entryIndex) + '" class="review-tooltip">' + JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue({state: opt_data.commit.reviews.reviews[0].state}) + '</span><aui-inline-dialog class="detail-dialog-tooltip reviews-dialog" id="commit-reviews-tooltip-' + soy.$$escapeHtml(opt_data.entryIndex) + '" responds-to="hover">' + JIRA.Templates.DevStatus.DetailDialog.reviewsInlineDialog({reviewData: opt_data.commit.reviews}) + '</aui-inline-dialog>' : '') + '</td>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.reviewColumn.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.reviewColumn';
}


JIRA.Templates.DevStatus.DetailDialog.actionsColumn = function(opt_data, opt_ignored) {
  return '<td class="commit-actions">' + ((opt_data.commit.createReviewUrl) ? '<div class="create-review-commit"><a href="' + soy.$$escapeHtml(opt_data.commit.createReviewUrl) + '">' + soy.$$escapeHtml('Create review') + '</a></div>' : '') + '</td>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.actionsColumn.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.actionsColumn';
}


JIRA.Templates.DevStatus.DetailDialog.filesColumn = function(opt_data, opt_ignored) {
  return '<td class="filecount">' + ((opt_data.count > 0) ? '<a href="#" class="extra-content-in-title" title="' + soy.$$escapeHtml('Click to show files') + '">' + ((opt_data.count < 100) ? soy.$$escapeHtml(AJS.format('{0} {0,choice,1#file|1\x3cfiles}',opt_data.count)) : soy.$$escapeHtml(AJS.format('{0}+ files',100))) + '</a>' : '') + '</td>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.filesColumn.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.filesColumn';
}


JIRA.Templates.DevStatus.DetailDialog.filesRow = function(opt_data, opt_ignored) {
  return '<tr class="hidden ' + soy.$$escapeHtml(opt_data.commit.fileCount > 0 && opt_data.commit.files ? 'filerow' : '') + '"><td colspan="5">' + JIRA.Templates.DevStatus.DetailDialog.Commit.Files.fileRow({files: opt_data.commit.files, max: 5}) + JIRA.Templates.DevStatus.DetailDialog.Commit.Files.moreFiles({files: opt_data.commit.files, fileCount: opt_data.commit.fileCount, instanceName: opt_data.repository.name, moreFilesUrl: opt_data.commit.url}) + '</td></tr>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.filesRow.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.filesRow';
}


JIRA.Templates.DevStatus.DetailDialog.reviewsInlineDialog = function(opt_data, opt_ignored) {
  var output = '<table><tbody>';
  var reviewList224 = opt_data.reviewData.reviews;
  var reviewListLen224 = reviewList224.length;
  for (var reviewIndex224 = 0; reviewIndex224 < reviewListLen224; reviewIndex224++) {
    var reviewData224 = reviewList224[reviewIndex224];
    output += '<tr class="inline-review-row"><td class="inline-review-id"><a href="' + soy.$$escapeHtml(reviewData224.url) + '">' + soy.$$escapeHtml(reviewData224.id) + '</a></td><td class="inline-review-state">' + JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue({state: reviewData224.state}) + '</td></tr>';
  }
  output += ((opt_data.reviewData.totalCount > opt_data.reviewData.reviews.length) ? '<tr><td class="inline-review-summary" colspan="2">' + ((opt_data.reviewData.url) ? '<a href="' + soy.$$escapeHtml(opt_data.reviewData.url) + '">' + soy.$$escapeHtml(AJS.format('and {0} more',opt_data.reviewData.totalCount - opt_data.reviewData.reviews.length)) + '</a>' : '<span>' + soy.$$escapeHtml(AJS.format('and {0} more',opt_data.reviewData.totalCount - opt_data.reviewData.reviews.length)) + '</span>') + '</td></tr>' : '') + '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.reviewsInlineDialog.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.reviewsInlineDialog';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'templates/viewissue/commit/devstatus-detail-dialog-commit-files.soy' */
// This file was automatically generated from devstatus-detail-dialog-commit-files.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.DetailDialog.Commit.Files.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.DetailDialog == 'undefined') { JIRA.Templates.DevStatus.DetailDialog = {}; }
if (typeof JIRA.Templates.DevStatus.DetailDialog.Commit == 'undefined') { JIRA.Templates.DevStatus.DetailDialog.Commit = {}; }
if (typeof JIRA.Templates.DevStatus.DetailDialog.Commit.Files == 'undefined') { JIRA.Templates.DevStatus.DetailDialog.Commit.Files = {}; }


JIRA.Templates.DevStatus.DetailDialog.Commit.Files.fileRow = function(opt_data, opt_ignored) {
  var output = '';
  var fileList3 = opt_data.files;
  var fileListLen3 = fileList3.length;
  for (var fileIndex3 = 0; fileIndex3 < fileListLen3; fileIndex3++) {
    var fileData3 = fileList3[fileIndex3];
    output += (fileIndex3 < opt_data.max) ? '<div class="file"><div class="change">' + ((fileData3.linesAdded != null && fileData3.linesRemoved != null) ? '<div class="lines">' + ((fileData3.changeType == 'ADDED') ? '<span class="aui-lozenge added">' + soy.$$escapeHtml('Added') + '</span>' : (fileData3.changeType == 'DELETED') ? '<span class="aui-lozenge removed">' + soy.$$escapeHtml('Deleted') + '</span>' : '<span class="aui-lozenge added count">+' + soy.$$escapeHtml(fileData3.linesAdded) + '</span><span class="aui-lozenge removed count">-' + soy.$$escapeHtml(fileData3.linesRemoved) + '</span>') + '</div>' : '<div class="changetype">' + JIRA.Templates.DevStatus.DetailDialog.Commit.Files.fileChangeLozenge({changeType: fileData3.changeType}) + '</div>') + '</div><div class="filename ellipsis">' + ((fileData3.url) ? '<a href="' + soy.$$escapeHtml(fileData3.url) + '" title="' + soy.$$escapeHtml(fileData3.path) + '">' + soy.$$escapeHtml(fileData3.path) + '</a>' : soy.$$escapeHtml(fileData3.path)) + '</div></div>' : '';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.Commit.Files.fileRow.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.Commit.Files.fileRow';
}


JIRA.Templates.DevStatus.DetailDialog.Commit.Files.moreFiles = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.files.length < opt_data.fileCount) {
    if (opt_data.moreFilesUrl) {
      output += '<a class="more-files-info" href="' + soy.$$escapeHtml(opt_data.moreFilesUrl) + '">' + soy.$$escapeHtml(AJS.format('See more files in {0}',opt_data.instanceName)) + '</a>';
    } else {
      var notShownFileCount__soy56 = opt_data.fileCount - opt_data.files.length;
      output += '<span class="more-files-info">' + soy.$$escapeHtml(AJS.format('and {0} more',notShownFileCount__soy56)) + '</span>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.Commit.Files.moreFiles.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.Commit.Files.moreFiles';
}


JIRA.Templates.DevStatus.DetailDialog.Commit.Files.fileChangeLozenge = function(opt_data, opt_ignored) {
  var output = '';
  var text__soy61 = '';
  switch (opt_data.changeType) {
    case 'ADDED':
      text__soy61 += soy.$$escapeHtml('Added');
      break;
    case 'COPIED':
      text__soy61 += soy.$$escapeHtml('Copied');
      break;
    case 'DELETED':
      text__soy61 += soy.$$escapeHtml('Deleted');
      break;
    case 'MOVED':
      text__soy61 += soy.$$escapeHtml('Moved');
      break;
    default:
      text__soy61 += soy.$$escapeHtml('Modified');
  }
  var class__soy73 = '';
  switch (opt_data.changeType) {
    case 'ADDED':
      class__soy73 += 'success';
      break;
    case 'COPIED':
      class__soy73 += 'current';
      break;
    case 'DELETED':
      class__soy73 += 'error';
      break;
    case 'MOVED':
      class__soy73 += 'moved';
      break;
    default:
      class__soy73 += 'complete';
  }
  output += '<span class="aui-lozenge aui-lozenge-' + soy.$$escapeHtml(class__soy73) + ' aui-lozenge-subtle">' + soy.$$escapeHtml(text__soy61) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.Commit.Files.fileChangeLozenge.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.Commit.Files.fileChangeLozenge';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'templates/viewissue/devstatus-detail-dialog-branch-pullrequest.soy' */
// This file was automatically generated from devstatus-detail-dialog-branch-pullrequest.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.DetailDialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.DetailDialog == 'undefined') { JIRA.Templates.DevStatus.DetailDialog = {}; }


JIRA.Templates.DevStatus.DetailDialog.pullRequest = function(opt_data, opt_ignored) {
  return '<div class="detail-pullrequests-container"><div class="devstatus-detail-table pullrequests-table"><table class="aui"><thead><tr><th class="pullrequest-id">' + soy.$$escapeHtml('ID') + '</th><th class="title">' + soy.$$escapeHtml('Title') + '</th><th class="state">' + soy.$$escapeHtml('Status') + '</th><th class="author">' + soy.$$escapeHtml('Author') + '</th><th class="reviewer">' + soy.$$escapeHtml('Reviewer') + '</th><th class="comment cell-type-collapsed"></th><th class="last-updated">' + soy.$$escapeHtml('Updated') + '</th></tr></thead><tbody>' + JIRA.Templates.DevStatus.DetailDialog.pullRequestEntry(opt_data) + '</tbody></table></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.pullRequest.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.pullRequest';
}


JIRA.Templates.DevStatus.DetailDialog.pullRequestEntry = function(opt_data, opt_ignored) {
  var output = '';
  var pullRequestList19 = opt_data.pullRequests;
  var pullRequestListLen19 = pullRequestList19.length;
  for (var pullRequestIndex19 = 0; pullRequestIndex19 < pullRequestListLen19; pullRequestIndex19++) {
    var pullRequestData19 = pullRequestList19[pullRequestIndex19];
    output += '<tr class="pullrequest-row"><td class="pullrequest-id"><a class="pullrequest-link" href="' + soy.$$escapeHtml(pullRequestData19.url) + '">' + soy.$$escapeHtml(pullRequestData19.id) + '</a></td><td class="title"><a class="pullrequest-link ellipsis" title="' + soy.$$escapeHtml(pullRequestData19.name) + '" href="' + soy.$$escapeHtml(pullRequestData19.url) + '">' + soy.$$escapeHtml(pullRequestData19.name) + '</a></td><td class="state">' + JIRA.Templates.DevStatus.DetailDialog.pullRequestState({status: pullRequestData19.status, isSubtle: true}) + '</td><td class="author"><img class="author-avatar extra-content-in-title" src="' + soy.$$escapeHtml(pullRequestData19.author.avatar) + '" title="' + soy.$$escapeHtml(pullRequestData19.author.name) + '"/></td><td class="reviewer">' + ((pullRequestData19.reviewers && pullRequestData19.reviewers.length != 0) ? JIRA.Templates.DevStatus.DetailDialog.reviewersList(soy.$$augmentMap(pullRequestData19, {countThreshold: opt_data.reviewersThreshold, entryIndex: 'pr' + pullRequestIndex19})) : '') + '</td><td class="comment cell-type-collapsed">' + JIRA.Templates.DevStatus.DetailDialog.commentCount({pullRequest: pullRequestData19}) + '</td><td class="last-updated"><time class="livestamp" data-datetime-format="longAge" datetime="' + soy.$$escapeHtml(pullRequestData19.lastUpdate) + '">' + soy.$$escapeHtml(pullRequestData19.lastUpdate) + '</time></td></tr>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.pullRequestEntry.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.pullRequestEntry';
}


JIRA.Templates.DevStatus.DetailDialog.commentCount = function(opt_data, opt_ignored) {
  return '' + ((opt_data.pullRequest.commentCount) ? '<div class="comment-container"><a class="comment-link" href="' + soy.$$escapeHtml(opt_data.pullRequest.url) + '" title="' + soy.$$escapeHtml('Comments') + '"><span class="aui-icon aui-icon-small aui-iconfont-comment">Comments</span></a><span class="count">' + soy.$$escapeHtml(opt_data.pullRequest.commentCount) + '</span></div>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.commentCount.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.commentCount';
}


JIRA.Templates.DevStatus.DetailDialog.reviewersList = function(opt_data, opt_ignored) {
  var output = '<div class="reviewer-container">';
  var showThreshold__soy65 = opt_data.countThreshold + 1;
  var indexLimit66 = Math.min(opt_data.countThreshold, opt_data.reviewers.length);
  for (var index66 = 0; index66 < indexLimit66; index66++) {
    output += JIRA.Templates.DevStatus.DetailDialog.vcsUser(opt_data.reviewers[index66]);
  }
  output += ((opt_data.reviewers.length == showThreshold__soy65) ? JIRA.Templates.DevStatus.DetailDialog.vcsUser(opt_data.reviewers[opt_data.countThreshold]) : (opt_data.reviewers.length > showThreshold__soy65) ? '<span data-aui-trigger aria-controls="extrareviewers-tooltip-' + soy.$$escapeHtml(opt_data.entryIndex) + '" class="aui-badge extrareviewers-tooltip">' + soy.$$escapeHtml(opt_data.reviewers.length - opt_data.countThreshold) + '</span><aui-inline-dialog class="detail-dialog-tooltip extrareviewers-dialog" id="extrareviewers-tooltip-' + soy.$$escapeHtml(opt_data.entryIndex) + '" responds-to="hover">' + JIRA.Templates.DevStatus.DetailDialog.extraReviewersTooltip({reviewers: opt_data.extraReviewers}) + '</aui-inline-dialog>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.reviewersList.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.reviewersList';
}


JIRA.Templates.DevStatus.DetailDialog.branch = function(opt_data, opt_ignored) {
  return '<div class="detail-branches-container"><div class="devstatus-detail-table branches-table"><table class="aui"><thead><tr><th class="repository">' + soy.$$escapeHtml('Repository') + '</th><th class="branch">' + soy.$$escapeHtml('Branch') + '</th>' + ((opt_data.features.lastCommitId) ? '<th class="changeset cell-type-collapsed">' + soy.$$escapeHtml('Last commit') + '</th>' : '') + ((opt_data.features.lastCommitTimestamp) ? '<th class="last-updated cell-type-collapsed">' + soy.$$escapeHtml('Last modified') + '</th>' : '') + ((opt_data.features.pullRequests) ? '<th class="pullrequest">' + soy.$$escapeHtml('Pull request') + '</th>' : '') + ((opt_data.features.reviews) ? '<th class="review">' + soy.$$escapeHtml('Review') + '</th>' : '') + ((opt_data.features.pullRequests || opt_data.features.reviews) ? '<th class="action">' + soy.$$escapeHtml('Action') + '</th>' : '') + '</tr></thead><tbody>' + JIRA.Templates.DevStatus.DetailDialog.branchEntry(opt_data) + '</tbody></table></div></div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.branch.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.branch';
}


JIRA.Templates.DevStatus.DetailDialog.branchEntry = function(opt_data, opt_ignored) {
  var output = '';
  var branchList119 = opt_data.branches;
  var branchListLen119 = branchList119.length;
  for (var branchIndex119 = 0; branchIndex119 < branchListLen119; branchIndex119++) {
    var branchData119 = branchList119[branchIndex119];
    output += '<tr class="branch-row"><td class="repository">' + JIRA.Templates.DevStatus.DetailDialog.repositoryHeader(soy.$$augmentMap(opt_data, {repository: branchData119.repository, showTooltip: true})) + '</td><td class="branch">' + JIRA.Templates.DevStatus.DetailDialog.branchLozenge(branchData119) + '</td>' + ((opt_data.features.lastCommitId) ? '<td class="changeset cell-type-collapsed">' + ((branchData119.lastCommit && branchData119.lastCommit.displayId) ? (branchData119.lastCommit.url) ? '<a class="changeset-link changesetid" href="' + soy.$$escapeHtml(branchData119.lastCommit.url) + '">' + soy.$$escapeHtml(branchData119.lastCommit.displayId) + '</a>' : '<span class="changeset-link changesetid">' + soy.$$escapeHtml(branchData119.lastCommit.displayId) + '</span>' : '') + '</td>' : '') + ((opt_data.features.lastCommitTimestamp) ? '<td class="last-updated cell-type-collapsed">' + ((branchData119.lastCommit && branchData119.lastCommit.authorTimestamp) ? JIRA.Templates.DevStatus.DetailDialog.timestamp({timestamp: branchData119.lastCommit.authorTimestamp}) : '') + '</td>' : '') + ((opt_data.features.pullRequests) ? '<td class="pullrequest">' + JIRA.Templates.DevStatus.DetailDialog.pullRequestStatusForBranch(soy.$$augmentMap(branchData119.pullRequestState, {entryIndex: branchIndex119})) + '</td>' : '') + ((opt_data.features.reviews) ? '<td class="review">' + JIRA.Templates.DevStatus.DetailDialog.reviewStatusForBranch({reviewData: branchData119.reviews, entryIndex: branchIndex119}) + '</td>' : '') + ((opt_data.features.pullRequests || opt_data.features.reviews) ? '<td class="action">' + ((branchData119.createPullRequestUrl && branchData119.createPullRequestUrl.length > 0) ? '<a class="create-pullrequest-link" href="' + soy.$$escapeHtml(branchData119.createPullRequestUrl) + '">' + soy.$$escapeHtml('Create pull request') + '</a>' : '') + ((branchData119.createReviewUrl && branchData119.createReviewUrl.length > 0) ? '<a class="create-review-link" href="' + soy.$$escapeHtml(branchData119.createReviewUrl) + '">' + soy.$$escapeHtml('Create review') + '</a>' : '') + '</td>' : '') + '</tr>';
  }
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.branchEntry.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.branchEntry';
}


JIRA.Templates.DevStatus.DetailDialog.pullRequestStatusForBranch = function(opt_data, opt_ignored) {
  return '' + ((opt_data.total > 0) ? '<span data-aui-trigger aria-controls="pullrequest-tooltip-' + soy.$$escapeHtml(opt_data.entryIndex) + '" class="pullrequest-tooltip">' + JIRA.Templates.DevStatus.DetailDialog.pullRequestState({status: opt_data.status, isSubtle: true}) + '</span><aui-inline-dialog class="detail-dialog-tooltip pullrequest-dialog" id="pullrequest-tooltip-' + soy.$$escapeHtml(opt_data.entryIndex) + '" responds-to="hover">' + JIRA.Templates.DevStatus.DetailDialog.pullRequestToolTip({pullRequests: opt_data.data}) + '</aui-inline-dialog>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.pullRequestStatusForBranch.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.pullRequestStatusForBranch';
}


JIRA.Templates.DevStatus.DetailDialog.reviewStatusForBranch = function(opt_data, opt_ignored) {
  return '' + ((opt_data.reviewData && opt_data.reviewData.totalCount > 0) ? '<span data-aui-trigger aria-controls="reviews-tooltip-' + soy.$$escapeHtml(opt_data.entryIndex) + '" class="review-tooltip">' + JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue({state: opt_data.reviewData.reviews[0].state}) + '</span><aui-inline-dialog class="detail-dialog-tooltip reviews-dialog" id="reviews-tooltip-' + soy.$$escapeHtml(opt_data.entryIndex) + '" responds-to="hover">' + JIRA.Templates.DevStatus.DetailDialog.reviewsInlineDialog(opt_data) + '</aui-inline-dialog>' : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.reviewStatusForBranch.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.reviewStatusForBranch';
}


JIRA.Templates.DevStatus.DetailDialog.pullRequestSingle = function(opt_data, opt_ignored) {
  return '<a class="pullrequest-link' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" href="' + soy.$$escapeHtml(opt_data.url) + '" ><span>' + soy.$$escapeHtml(opt_data.id) + ' ' + soy.$$escapeHtml(opt_data.name) + '</span></a>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.pullRequestSingle.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.pullRequestSingle';
}


JIRA.Templates.DevStatus.DetailDialog.extraReviewersTooltip = function(opt_data, opt_ignored) {
  var output = '<div class="reviewer"><div class="reviewer-container"><table><tbody>';
  var reviewerList229 = opt_data.reviewers;
  var reviewerListLen229 = reviewerList229.length;
  for (var reviewerIndex229 = 0; reviewerIndex229 < reviewerListLen229; reviewerIndex229++) {
    var reviewerData229 = reviewerList229[reviewerIndex229];
    output += '<tr><td class="reviewer-avatar">' + JIRA.Templates.DevStatus.DetailDialog.vcsUser(reviewerData229) + '</td><td class="reviewer-name"><span title="' + soy.$$escapeHtml(reviewerData229.name) + '">' + soy.$$escapeHtml(reviewerData229.name) + '</span></td></tr>';
  }
  output += '</tbody></table></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.extraReviewersTooltip.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.extraReviewersTooltip';
}


JIRA.Templates.DevStatus.DetailDialog.pullRequestToolTip = function(opt_data, opt_ignored) {
  var output = '<table><tbody>';
  var pullRequestList241 = opt_data.pullRequests;
  var pullRequestListLen241 = pullRequestList241.length;
  for (var pullRequestIndex241 = 0; pullRequestIndex241 < pullRequestListLen241; pullRequestIndex241++) {
    var pullRequestData241 = pullRequestList241[pullRequestIndex241];
    output += '<tr><td class="pullrequest-name">' + JIRA.Templates.DevStatus.DetailDialog.pullRequestSingle(pullRequestData241) + '</td><td class="lozenge">' + JIRA.Templates.DevStatus.DetailDialog.pullRequestState({status: pullRequestData241.status, isSubtle: true}) + '</td></tr>';
  }
  output += '</tbody></table>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.pullRequestToolTip.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.pullRequestToolTip';
}


JIRA.Templates.DevStatus.DetailDialog.pullRequestState = function(opt_data, opt_ignored) {
  return '' + JIRA.Templates.FusionWidget.Common.reviewsState({isSubtle: opt_data.isSubtle, state: opt_data.status, stateClasses: {OPEN: 'aui-lozenge-complete', MERGED: 'aui-lozenge-success', DECLINED: 'aui-lozenge-error'}, stateText: {OPEN: 'OPEN', MERGED: 'MERGED', DECLINED: 'DECLINED'}, classes: 'pullrequest-state'});
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.pullRequestState.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.pullRequestState';
}


JIRA.Templates.DevStatus.DetailDialog.branchLozenge = function(opt_data, opt_ignored) {
  return '<div class="branch-name"><span class="aui-icon aui-icon-small aui-iconfont-devtools-branch-small"></span>' + ((opt_data.url) ? '<a class="branch-link' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" href="' + soy.$$escapeHtml(opt_data.url) + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</a>' : '<span class="branch-link' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" title="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.name) + '</span>') + '</div>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.branchLozenge.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.branchLozenge';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'templates/viewissue/devstatus-detail-dialog-review.soy' */
// This file was automatically generated from devstatus-detail-dialog-review.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.DetailDialog.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.DetailDialog == 'undefined') { JIRA.Templates.DevStatus.DetailDialog = {}; }


JIRA.Templates.DevStatus.DetailDialog.review = function(opt_data, opt_ignored) {
  var output = '<div class="devstatus-detail-table detail-reviews-container"><div class="devstatus-detail-table reviews-table"><table class="aui"><thead><tr><th class="review cell-type-collapsed">' + soy.$$escapeHtml('ID') + '</th><th class="title">' + soy.$$escapeHtml('Title') + '</th><th class="state cell-type-collapsed">' + soy.$$escapeHtml('Status') + '</th><th class="author cell-type-collapsed">' + soy.$$escapeHtml('Author') + '</th><th class="reviewer cell-type-collapsed">' + soy.$$escapeHtml('Reviewers') + '</th><th class="comment cell-type-collapsed"></th><th class="timestamp">' + soy.$$escapeHtml('Date') + '</th></tr></thead><tbody>';
  var reviewList16 = opt_data.reviews;
  var reviewListLen16 = reviewList16.length;
  for (var reviewIndex16 = 0; reviewIndex16 < reviewListLen16; reviewIndex16++) {
    var reviewData16 = reviewList16[reviewIndex16];
    output += '<tr data-id="' + soy.$$escapeHtml(reviewData16.id) + '" class="review-row"><td class="review"><a href="' + soy.$$escapeHtml(reviewData16.url) + '" class="review-link">' + soy.$$escapeHtml(reviewData16.id) + '</a></td><td class="title"><span class="ellipsis" title="' + soy.$$escapeHtml(reviewData16.title) + '">' + soy.$$escapeHtml(reviewData16.title) + '</span></td><td class="state">' + JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue({state: reviewData16.state}) + '</td><td class="author">' + ((reviewData16.author) ? JIRA.Templates.DevStatus.DetailDialog.vcsUser(reviewData16.author) : '') + '</td><td class="reviewer">' + JIRA.Templates.DevStatus.DetailDialog.reviewersList(soy.$$augmentMap(reviewData16, {countThreshold: opt_data.reviewersThreshold, extraReviewers: reviewData16.extraReviewers, entryIndex: 'review' + reviewIndex16})) + '</td><td class="comment cell-type-collapsed">' + JIRA.Templates.DevStatus.DetailDialog.commentCount({pullRequest: {commentCount: reviewData16.commentCount, url: reviewData16.url}}) + '</td><td class="timestamp">' + JIRA.Templates.DevStatus.Review.reviewDate(soy.$$augmentMap(reviewData16, {lastUpdated: reviewData16.lastModified, showUpdatedText: false})) + '</td></tr>';
  }
  output += '</tbody></table></div></div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.DetailDialog.review.soyTemplateName = 'JIRA.Templates.DevStatus.DetailDialog.review';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'templates/viewissue/review/devstatus-panel-review.soy' */
// This file was automatically generated from devstatus-panel-review.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.DevStatus.Review.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }
if (typeof JIRA.Templates.DevStatus == 'undefined') { JIRA.Templates.DevStatus = {}; }
if (typeof JIRA.Templates.DevStatus.Review == 'undefined') { JIRA.Templates.DevStatus.Review = {}; }


JIRA.Templates.DevStatus.Review.summaryPanel = function(opt_data, opt_ignored) {
  return '<dl><dt>' + JIRA.Templates.DevStatus.transitionContainer({content: '<div class="summary-content"><a class="summary" href="#" title="' + soy.$$escapeHtml(AJS.format('Reviews related to {0}',opt_data.issueKey)) + '">' + JIRA.Templates.FusionWidget.Common.reviewsText(opt_data) + '</a> ' + JIRA.Templates.FusionWidget.Common.reviewsStateViewIssue(opt_data) + '</div>'}) + '</dt>' + JIRA.Templates.DevStatus.Review.reviewDate(soy.$$augmentMap(opt_data, {showUpdatedText: true})) + '</dl>';
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.summaryPanel.soyTemplateName = 'JIRA.Templates.DevStatus.Review.summaryPanel';
}


JIRA.Templates.DevStatus.Review.reviewDate = function(opt_data, opt_ignored) {
  return '' + ((opt_data.dueDate && ! opt_data.completed) ? JIRA.Templates.DevStatus.lastUpdated({text: 'Due', lastUpdated: opt_data.dueDate, extraClass: opt_data.overDue ? 'overdue' : undefined, datetimeFormat: 'fullAge'}) : (opt_data.lastUpdated) ? JIRA.Templates.DevStatus.lastUpdated({text: opt_data.showUpdatedText ? 'Updated' : '', lastUpdated: opt_data.lastUpdated, datetimeFormat: 'fullAge'}) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.DevStatus.Review.reviewDate.soyTemplateName = 'JIRA.Templates.DevStatus.Review.reviewDate';
}
;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'js/util/Helpers.js' */
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("jira-development-status/util/helpers",["underscore"],function(t){var e=function(){return soydata.VERY_UNSAFE?soydata.VERY_UNSAFE.ordainSanitizedHtml:function(t){return new soydata.SanitizedHtml(t)}};return{getContextPath:AJS.contextPath,copyAndMarkStringPropertiesAsSanitised:function n(o){var r=e(),i=Array.isArray(o)?[]:{};return t.each(t.keys(o),function(e){var y=o[e];y&&("string"==typeof y?i[e]=r(y):"object"===("undefined"==typeof y?"undefined":_typeof(y))?t.keys(y).length>0&&(i[e]=n(y)):i[e]=y)}),i}}});;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'js/viewissue/dialog/CreateReviewFormDialog.js' */
"use strict";define("jira/devstatus/create-review-form-dialog",["backbone","jquery","require","underscore","jira/dialog/form-dialog","jira-development-status/util/WRM","jira/dev-status/util/url","jira-development-status/util/navigate"],function(e,i,t,a,n,r,s,c){return e.View.extend({initialize:function(e){this.linkSelector=e.linkSelector,this.applicationType=e.applicationType,this.instances=e.instances,this.issueId=e.issueId,this.dialog.instance=this},renderSuccess:function(){i(".create-review-instance a").attr("href",s.getCreateReviewDetailUrl(this.applicationType))},_processTargets:function(e){var i=this,t=a.map(e,function(e){var t=a.find(i.instances,function(i){return i.applicationLinkId===e.applicationLinkId});return t?a.extend({},e,t):null});return a.sortBy(a.filter(t,a.identity),"name")},dialog:new n({id:"devstatus-cta-create-review-dialog",trigger:".create-review-instance a",width:560,content:function(e){var a=this.instance,n=this;r.requireDetailDialogResources(function(){var r=t("jira/devstatus/instance-picker-view");n.pickerView=new r({el:n.$popup,activeTrigger:n.$activeTrigger,cta:"devstatus.cta.createreview",issueId:a.issueId,processTargets:function(e){return n.instance._processTargets.call(n.instance,e)},uniqueResultAction:function(e){JIRA.DevStatus.CommitsAnalytics.fireDetailCreateReviewClicked(a.applicationType,!0),c.navigate(e.url)}}),n.pickerView.render().always(function(t){e(t),i(n.$popup).find(".primary.target").eq(0).focus(),i(".target").click(function(e){JIRA.DevStatus.CommitsAnalytics.fireDetailCreateReviewClicked(a.applicationType,!0)})})})},autoClose:!0})})}),Backbone.define("JIRA.DevStatus.CreateReviewFormDialog",require("jira/devstatus/create-review-form-dialog"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'js/viewissue/dialog/BaseDetailDialogView.js' */
"use strict";define("jira/devstatus/base-detail-dialog-view",["backbone","jquery","underscore","jira-development-status/util/dev-status-local-storage","jira-development-status/util/applinks-utils"],function(t,e,n,i,a){return t.View.extend({frameEvents:{"click .menu-item":"_doTabClick"},frameTemplate:JIRA.Templates.DevStatus.DetailDialogFrame.frame,oauthStatusTemplate:JIRA.Templates.DevStatus.DetailDialog.oauthStatus,authenticationTemplate:JIRA.Templates.DevStatus.DetailDialog.authenticationScreen,connectionProblemTemplate:JIRA.Templates.DevStatus.DetailDialog.connectionProblemScreen,connectionProblemWarningTemplate:JIRA.Templates.DevStatus.connectionProblemAsWarning,noPermissionToViewAllTemplate:JIRA.Templates.DevStatus.DetailDialog.noPermissionToViewAll,oauthDanceFailedTemplate:JIRA.Templates.DevStatus.DetailDialog.oauthDanceFailed,initialize:function(t){this.options=n.defaults({},t,{width:560,model:new JIRA.DevStatus.BaseDetailDialogModel(t)}),this.model=this.options.model,this._initFetchHandlers(),this._initFormDialog()},renderSuccess:function(t,e){return this},shouldRefreshOnTabSwitch:function(t){return!1},getTitle:function(t,e){return console.warn("Unimplemented getTitle() function",this),e},getOAuthMessageInFooter:function(t){return AJS.format("You might be able to see more information by authenticating with the following {0,choice,1#application|1\u003capplications}:",t.length)},getOAuthMessageInCanvas:function(){return "Authenticate to see related development information"},getConnectionMessageInCanvas:function(){return "Unable to retrieve development information"},getNoPermissionToViewAllMessageInCanvas:function(){return "Unable to retrieve development information"},getContactAdmistratorsOrLoginMessageInCanvas:function(){return JIRA.Users.LoggedInUser.isAnonymous()?"You might be able to view more by authenticating with JIRA.":"Please contact your administrator."},hasData:function(t){return t.length>0},show:function(){this.dialog.show()},hide:function(){this.dialog.hide()},_escapeSpecialCharacters:function(t){return t&&t.replace(/([^0-9a-zA-Z\-_])/g,"\\$1")},_getPane:function(t){return t?this.$el.find("#tab-content-"+this._escapeSpecialCharacters(t)):e()},getContentContainer:function(t){return this._getPane(t||this._getActiveApplicationType()).find(".detail-content-container")},_doTabClick:function(t){t.preventDefault();var e=this._getActiveApplicationType();i.setItem(this._getTabStorageId(),e),this.model.switchTab(e,this.shouldRefreshOnTabSwitch(e)),this._activateTab(e),this.analytics&&this.analytics.fireDetailTabClicked(e)},_redirectToLoginIf401:function(t){return!(!t||401!==t.status)&&(JIRA.DevStatus.Navigate.redirectToLogin(),!0)},_initFetchHandlers:function(){this.model.on("fetchRequested",this._showLoadingIndicator,this),this.model.on("fetchSucceeded",this._handleFetchSucceeded,this),this.model.on("fetchFailed",this._handleFetchFailed,this)},_handleFetchSucceeded:function(t,e){this._hideLoadingIndicator(t);var n=e.detail&&this.hasData(e.detail);n&&this.renderSuccess(t,e.detail),this._renderError(t,e.errors,n),this._postRender()},_handleFetchFailed:function(t,e){this._hideLoadingIndicator(t),this._redirectToLoginIf401(e)||this._renderError(t,[],!1,!0)},_initAuthenticationCallbacks:function(){this._patchAJSIconsForAppLinks();var t=this,n=function(e,n){t.model.oauthStatusChanged(n.appType),t.model.fetchAuthenticationStatuses(),e.preventDefault()},i=function(t){var e=null;return t.id&&t.appUri&&t.appName&&t.appType&&(e={applicationLinkId:t.id,baseUrl:t.appUri,name:t.appName,type:t.appType}),e},a=function(e,n){var a=[i(e)],o=require("jira-development-status/util/helpers"),s=o.copyAndMarkStringPropertiesAsSanitised(n),r=function(){JIRA.isAdmin()?t._renderConnectionError(t.model._getCurrentApplicationType(),a,{message:s.adminError,details:s.adminErrorDetails}):t._renderConnectionError(t.model._getCurrentApplicationType(),a)},c=function(){t._renderAuthenticationError(t.model._getCurrentApplicationType(),a,[],s.userError)};s.adminError?r():s.userError&&c()},o=function(n,i,o){o&&a(i,o),e.ajax(AJS.contextPath()+"/rest/auth/1/session").promise().fail(function(e){t._redirectToLoginIf401(e)})},s=e(document);s.bind("applinks.auth.approved",n),s.bind("applinks.auth.denied",o),e(this.dialog).bind("Dialog.beforeHide",function(){s.unbind("applinks.auth.approved",n),s.unbind("applinks.auth.denied",o),t.model.off(null,null,t),t.instanceListPopup&&t.instanceListPopup.remove()}),e('<div class="applinks-auth-confirmation-container hidden"></div>').appendTo(this.$el)},_initRemoveInlineDialogsOnDialogClose:function(){e(this.dialog).bind("Dialog.beforeHide",function(){return e(".detail-dialog-tooltip").remove()})},_initFetchAuthenticationHandlers:function(){this.model.on("fetchAuthRequested",this._showLoadingIndicator,this),this.model.on("fetchAuthSucceeded",this._handleAuthSucceeded,this),this.model.on("fetchAuthFailed",this._handleAuthFailed,this)},_handleAuthSucceeded:function(t){var e=n.filter(t,function(t){return t.configured&&!t.authenticated&&t.source&&t.source.applicationLinkId}),i=this._getOAuthStatusDiv();e.length>0&&!JIRA.Users.LoggedInUser.isAnonymous()?(i.html(this.oauthStatusTemplate({message:this.getOAuthMessageInFooter(e)})),this._renderUnauthInstancesInFooter(e),i.show()):i.hide()},_handleAuthFailed:function(t){this._redirectToLoginIf401(t),this._getOAuthStatusDiv().hide()},_renderUnauthInstancesInFooter:function(t){var i=this._getOAuthStatusDiv(),a=n.map(n.pluck(t,"source"),this._createOAuthInstanceDiv);if(a.length>0&&(i.append(a[0]),a.length>1&&(i.append(", "),i.append(a[1]),a.length>2))){i.append(" ");var o=e('<span class="more-instances"><a href="#">'+"... more"+"</a></span>");i.append(o);var s=e('<ul class="instance-list"></ul>');n.each(a.slice(2),function(t){s.append(e('<li class="instance-in-popup"></li>').append(t))}),AJS.InlineDialog(o,"instance-list-popup",function(t,e,n){return t.html(s),n(),!1},{width:150,offsetX:-100,onTop:!0})}},_createOAuthInstanceDiv:function(t){var n=a.createAuthRequestInline(null,{id:t.applicationLinkId,authUri:AJS.contextPath()+"/plugins/servlet/applinks/oauth/login-dance/authorize?applicationLinkID="+encodeURIComponent(t.applicationLinkId),appUri:t.baseUrl,appName:t.name,appType:t.type});return e('<span class="instance"></span>').append(n.find("a.applink-authenticate").text(t.name))},_patchAJSIconsForAppLinks:function(){AJS.icons=AJS.icons||{},AJS.icons.addIcon=AJS.icons.addIcon||{},AJS.icons.addIcon.init=AJS.icons.addIcon.init||function(){}},_getOAuthStatusDiv:function(){var t=this.$el.find(".buttons-container .oauth-status");return t.length?t:e('<div class="oauth-status" />').appendTo(this.$el.find(".buttons-container.form-footer"))},_renderError:function(t,e,i,a){var o=n.groupBy(e,function(t){var e=t.error;return"unauthorized"===e||"incapable"===e?e:"others"}),s=n.pluck(o.unauthorized,"instance"),r=n.pluck(o.others,"instance");s.length>0&&this.model.fetchAuthenticationStatuses(),i?r.length>0&&this._renderConnectionErrorBeforeData(t,r):s.length>0?this._renderAuthenticationError(t,s,r):a||r.length>0?this._renderConnectionError(t,r):this._renderNoPermissionToViewAllWarning(t)},_renderConnectionErrorBeforeData:function(t,e){this.getContentContainer(t).prepend(this.connectionProblemWarningTemplate({instances:e,showContactAdminForm:this.options.showContactAdminForm}))},_renderConnectionError:function(t,e,n){this.getContentContainer(t).html(this.connectionProblemTemplate({instances:e,adminError:n,showContactAdminForm:this.options.showContactAdminForm,title:this.getConnectionMessageInCanvas()}))},renderNoPermissionToViewAllWarningAtBottom:function(t,e){var n=this.model.get("tabs")[t]||{},i=this.model.get("contentMap")[t]||{};e<n.count&&(0===(i.errors||[]).length||JIRA.Users.LoggedInUser.isAnonymous())&&this.getContentContainer(t).append(this._getNoPermissionToViewAllHtml())},_getNoPermissionToViewAllHtml:function(){return this.noPermissionToViewAllTemplate({message:this.getNoPermissionToViewAllMessageInCanvas(),secondaryMessage:this.getContactAdmistratorsOrLoginMessageInCanvas()})},_renderNoPermissionToViewAllWarning:function(t){this.getContentContainer(t).html(this._getNoPermissionToViewAllHtml())},_renderAuthenticationError:function(t,e,i,a){var o=this.getContentContainer(t);o.html(this.authenticationTemplate({unauthInstances:e,title:this.getOAuthMessageInCanvas(),otherInstances:i,showContactAdminForm:this.options.showContactAdminForm,userError:a}));var s=n.map(e,this._createOAuthInstanceDiv),r=o.find(".instances");n.each(s,function(t,e){0!==e&&r.append(", "),r.append(t)})},_initFormDialog:function(){var t=this;this.dialog=new JIRA.FormDialog({id:this.options.id,width:this.options.width,content:function(e){t.setElement(this.$popup),t.delegateEvents(n.extend({},t.frameEvents,t.events)),t._renderFrame(),t._initAuthenticationCallbacks(),t._initFetchAuthenticationHandlers(),t.model.fetchAuthenticationStatuses();var a=i.getItem(t._getTabStorageId());t._tabHasContent(a)&&t._activateTab(a),t.model.switchTab(t._getActiveApplicationType()),t._initRemoveInlineDialogsOnDialogClose(),e()},autoClose:!0})},_postRender:function(){this.$el.find(".extra-content-in-title").tooltip(),this.dialog._positionInCenter(),this.$el.find(".active-pane a:eq(0)").focus()},_getActiveApplicationType:function(){return this.$el.find(".menu-item.active-tab").data("applicationType")},_getStorageRef:function(){var t=this.options.issueKey.split("-")[0];return t+"-"+this.options.type},_getTabStorageId:function(){return"stored-tab-"+this._getStorageRef()},_tabHasContent:function(t){return this.$el.find("#tab-menu-"+this._escapeSpecialCharacters(t)).length>0},_activateTab:function(t){var e=this._escapeSpecialCharacters(t);this.$el.find(".menu-item.active-tab").toggleClass("active-tab"),this.$el.find(".tabs-pane.active-pane").toggleClass("active-pane"),this.$el.find("#tab-menu-"+e).toggleClass("active-tab"),this.$el.find("#tab-content-"+e).toggleClass("active-pane")},_showLoadingIndicator:function(t){var e=this._getPane(t);e._removeClass("ready"),e.addClass("loading");var n=e.find(".status-loading");n.spin("large"),n.show()},_hideLoadingIndicator:function(t){var e=this._getPane(t);e.addClass("ready");var n=e.find(".status-loading");n&&(e.removeClass("loading"),n.hide(),n.spinStop())},_renderFrame:function(){this.$el.html(this.frameTemplate({title:this.getTitle(this.options.count,this.options.issueKey),tabs:this._convertTabsForSoy(),initialTab:this.options.initialTab})),this.options.height&&this.$el.find(".form-body").css("min-height",this.options.height)},_convertTabsForSoy:function(){return n.chain(this.model.get("tabs")).map(function(t,e){return n.extend({type:e},t)}).sortBy(function(t){return t.type}).value()},_sortReviewsByStatus:function(t){var e=["REVIEW","APPROVAL","SUMMARIZE","REJECTED","CLOSED"];return n.chain(t).filter(function(t){return n.contains(e,t.state)}).sortBy(function(t){return n.indexOf(e,t.state)}).value()}})}),Backbone.define("JIRA.DevStatus.BaseDetailDialogView",require("jira/devstatus/base-detail-dialog-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'js/viewissue/dialog/BaseDetailDialogModel.js' */
"use strict";define("jira/devstatus/base-detail-dialog-model",["backbone","jquery","underscore"],function(t,e,s){return t.Model.extend({TAB_PREFIX:"#tab-menu-",PANE_PREFIX:"#tab-content-",properties:["tabs","contentMap","oauthStatuses","selectedTab","selectedPane"],namedEvents:["fetchRequested","fetchFailed","fetchSucceeded","fetchAuthRequested","fetchAuthFailed","fetchAuthSucceeded"],initialize:function(t){this.issueKey=t.issueKey,this.issueId=t.issueId,this.type=t.dataType,this.set("contentMap",{}),this.set("tabs",t.tabs)},switchTab:function(t,e){this.set("selectedTab",this.TAB_PREFIX+t),this.set("selectedPane",this.PANE_PREFIX+t),(null==this.get("contentMap")[t]||e)&&this._fetchContents(t)},_fetchContents:function(t){this.trigger("fetchRequested",t),this._handleFetch(t,e.ajax({url:AJS.contextPath()+"/rest/dev-status/1.0/issue/detail",data:{issueId:this.issueId,applicationType:t,dataType:this.type}}).promise())},_handleFetch:function(t,e){var s=this;e.done(function(e){s._fireSuccessResult(t,e)}).fail(function(e,i){s._fireFailResult(t,e)})},_fireSuccessResult:function(t,e){this._updateContents(t,e),this.trigger("fetchSucceeded",t,e)},_fireFailResult:function(t,e){this._updateContents(t),this.trigger("fetchFailed",t,e)},_updateContents:function(t,e){this.get("contentMap")[t]=e},fetchAuthenticationStatuses:function(){var t=s.keys(this.get("tabs")||{});if(!s.isEmpty(t)){var i=this;e.ajax({url:AJS.contextPath()+"/rest/dev-status/1.0/provider/auth-status",data:{applicationType:t}}).promise().done(function(t){t&&t.data?(i._updateOAuthStatuses(t.data),i.trigger("fetchAuthSucceeded",t.data)):(i._updateOAuthStatuses(),i.trigger("fetchAuthFailed",null,t))}).fail(function(t,e){i._updateOAuthStatuses(),i.trigger("fetchAuthFailed",t)})}},oauthStatusChanged:function(t){if(s.has(this.get("tabs"),t)){var e=this._getCurrentApplicationType();e===t?this._fetchContents(e):this.get("contentMap")[t]=null}},_getCurrentApplicationType:function(){var t=this.get("selectedTab");return t?t.slice(this.TAB_PREFIX.length):null},_updateOAuthStatuses:function(t){this.set("oauthStatuses",t)}})}),Backbone.define("JIRA.DevStatus.BaseDetailDialogModel",require("jira/devstatus/base-detail-dialog-model"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'js/viewissue/dialog/build/DetailDialogBuildView.js' */
"use strict";define("jira/devstatus/detail-dialog-build-view",["underscore","jira/devstatus/base-detail-dialog-view","jira-development-status/util/sanitize"],function(t,e,n){var i="jswddBuildsData";return e.extend({template:JIRA.Templates.DevStatus.DetailDialog.build,events:{"click a.project-link":"_onClickProjectLink","click a.plan-link":"_onClickPlanLink","click a.build-link":"_onClickBuildLink"},initialize:function(n){this.analytics=JIRA.DevStatus.BuildsAnalytics,e.prototype.initialize.call(this,t.extend({type:"build",width:1e3,height:400},n))},renderSuccess:function(t,e){var n=this._flattenObjectsArray(e,"projects"),a=this._flattenObjectsArray(e,i),s=this._transformJswddBuildsData(a),r=this.getContentContainer(t);return r.html(this.template({applicationType:t,jswddProviders:s,projects:this.sortProjectsAndPlans(n),hasArtifacts:this.hasArtifacts(n)})),this.renderNoPermissionToViewAllWarningAtBottom(t,this.getProjectsBuildCount(n)+this.getJswddBuildCount(a)),JIRA.DevStatus.Date.addTooltip(r),this},getTitle:function(t,e){return AJS.format("{1}: {0} {0,choice,1#build|1\u003cbuilds}",t,e)},getOAuthMessageInFooter:function(t){return AJS.format("You might be able to see more builds by authenticating with the following {0,choice,1#application|1\u003capplications}:",t.length)},getOAuthMessageInCanvas:function(){return "Authenticate to see related builds"},getConnectionMessageInCanvas:function(){return "Unable to retrieve build information"},getNoPermissionToViewAllMessageInCanvas:function(){return "You don\'t have access to view all related builds."},hasData:function(t){return this._flattenObjectsArray(t,"projects").length+this._flattenObjectsArray(t,i).length>0},sortProjectsAndPlans:function(e){return e=t.sortBy(e,function(e){return t.last(t.sortBy(e.plans,function(t){return t.build.finishedDate})).build.finishedDate}).reverse(),t.each(e,function(e){e.plans=t.sortBy(e.plans,function(t){return t.build.finishedDate}).reverse()}),e},hasArtifacts:function(e){return t.any(e,function(e){return t.any(e.plans,function(t){return t.build&&t.build.artifacts&&t.build.artifacts.length})})},getProjectsBuildCount:function(e){return t.union.apply(null,t.map(e,function(e){return t.pluck(e.plans,"key")})).length},getJswddBuildCount:function(e){return t.chain(e).map(function(t){return t.builds.length}).reduce(function(t,e){return t+e},0).value()},_onClickProjectLink:function(){JIRA.DevStatus.BuildsAnalytics.fireDetailProjectClicked()},_onClickPlanLink:function(){JIRA.DevStatus.BuildsAnalytics.fireDetailPlanClicked()},_onClickBuildLink:function(){JIRA.DevStatus.BuildsAnalytics.fireDetailBuildClicked()},_transformJswddBuildsData:function(e){var n=this._flattenObjectsArray(e,"providers"),i=this._flattenObjectsArray(e,"builds");return t.chain(n).map(function(e){var n=t.chain(i).filter(function(t){return t.providerId===e.id}).map(this._transformJswddBuild).value();return{provider:this._sanitizeJswddProvider(e),builds:n}}.bind(this)).filter(function(t){return t.builds&&t.builds.length}).value()},_transformJswddBuild:function(e){var n=t.clone(e);return n.name=e.displayName?e.displayName:e.pipelineId+"-"+e.buildNumber,n.buildState="SUCCESSFUL"===e.state?"SUCCESS":"FAILED"===e.state?"FAILED":e.state,e.testInfo&&(n.testInfo=t.clone(e.testInfo),n.testSummary={totalTestCount:e.testInfo.totalNumber,successfulTestCount:e.testInfo.numberPassed,failedTestCount:e.testInfo.numberFailed}),n},_sanitizeJswddProvider:function(e){var i=t.clone(e);return i.homeUrl=n.sanitizeUrl(i.homeUrl),i},_flattenObjectsArray:function(e,n){return t.reduce(e,function(t,e){return t.concat(e[n]||[])},[])}})}),Backbone.define("JIRA.DevStatus.DetailDialogBuildView",require("jira/devstatus/detail-dialog-build-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'js/viewissue/dialog/deployment/DetailDialogDeploymentView.js' */
"use strict";define("jira/devstatus/detail-dialog-deployment-view",["underscore","jira/devstatus/base-detail-dialog-view"],function(e,t){return t.extend({template:JIRA.Templates.DevStatus.DetailDialog.Deployment.deployment,events:{"click a.project-link":"_onClickProjectLink","click a.environment-link":"_onClickEnvironmentLink","click a.release-link":"_onClickReleaseLink"},initialize:function(n){this.analytics=JIRA.DevStatus.DeploymentsAnalytics,t.prototype.initialize.call(this,e.extend({type:"deployment",width:1e3,height:400},n))},renderSuccess:function(t,n){var i=e.reduce(n,function(e,t){return e.concat(t.deploymentProjects||[])},[]),o=this.getContentContainer(t);return o.html(this.template({applicationType:t,deploymentProjects:this.sortProjects(i)})),this.renderNoPermissionToViewAllWarningAtBottom(t,this.getEnvironmentCount(i)),JIRA.DevStatus.Date.addTooltip(o),this},getTitle:function(e,t){return AJS.format("{1}: {0} {0,choice,1#deployment|1\u003cdeployments}",e,t)},getOAuthMessageInFooter:function(e){return AJS.format("You might be able to see more deployments by authenticating with the following {0,choice,1#application|1\u003capplications}:",e.length)},getOAuthMessageInCanvas:function(){return "Authenticate to see related deployments"},getConnectionMessageInCanvas:function(){return "Unable to retrieve deployment information"},getNoPermissionToViewAllMessageInCanvas:function(){return "You don\'t have access to view all related deployments."},hasData:function(t){return e.reduce(t,function(e,t){return e.concat(t.deploymentProjects||[])},[]).length>0},sortProjects:function(t){return e.sortBy(t,function(t){return e.last(e.sortBy(t.environments,function(e){return new Date(e.lastDeployed||0).getTime()})).lastDeployed}).reverse()},getEnvironmentCount:function(t){return e.union.apply(null,e.map(t,function(t){return e.pluck(t.environments,"environmentId")})).length},_onClickProjectLink:function(){JIRA.DevStatus.DeploymentsAnalytics.fireDetailProjectClicked()},_onClickEnvironmentLink:function(){JIRA.DevStatus.DeploymentsAnalytics.fireDetailEnvironmentClicked()},_onClickReleaseLink:function(){JIRA.DevStatus.DeploymentsAnalytics.fireDetailReleaseClicked()}})}),Backbone.define("JIRA.DevStatus.DetailDialogDeploymentView",require("jira/devstatus/detail-dialog-deployment-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'js/viewissue/dialog/DetailDialogCommitView.js' */
"use strict";define("jira/devstatus/detail-dialog-commit-view",["jquery","underscore","jira/devstatus/base-detail-dialog-view","jira/util/data/meta","jira-development-status/util/sanitize","jira/featureflags/feature-manager"],function(e,t,i,n,s,a){return i.extend({template:JIRA.Templates.DevStatus.DetailDialog.commit,events:{"click a.repository-link":"_onClickRepositoryLink","click a.changesetid":"_onClickChangesetId","click .filecount a":"_onClickFiles","click .file-expand a":"_onClickExpand","click .create-review-commit a":"_onClickCreateReview","mouseenter .review-tooltip":"_onHoverReviewsTooltip","click .detail-dialog-tooltip a":"_onClickReview","click .filename a":"_onClickFile"},initialize:function(e){this.analytics=JIRA.DevStatus.CommitsAnalytics,this.issueId=e.issueId;var s,a=n.get("fusion-open-detail-dialog");JIRA.DevStatus.URL.isCreateReviewDetailDialogLink(a)&&(s=JIRA.DevStatus.URL.getCreateReviewDetailDialogApplicationType(a)),i.prototype.initialize.call(this,t.extend({type:"commit",width:1e3,height:400,initialTab:s},e))},concatResults:function(e){return t.reduce(e,function(e,i){var n=i.repositories||[];return t.each(n,function(e){e.showInstance=i._instance&&!i._instance.singleInstance,e.instance=i._instance}),e.concat(n)},[])},_clipEllipsis:function(){function t(e){return e.outerWidth()}this.$el.find(".detail-content-container .file .ellipsis").each(function(i,n){var s=e(n),a=t(s);if(0!=a){var o=s.find("a");if(t(o)>a)for(var r=o.text();t(o)>a;)r=r.slice(1),o.text(""+r)}})},renderSuccess:function(e,t){var i=this.concatResults(t),n=this.getContentContainer(e);this.transformedRepositories=this.transformRepositories(i);var s=this.setupCreateReviewDialog(this.transformedRepositories);return n.html(this.template({applicationType:e,repositories:this.transformedRepositories,canCreateReview:s})),this.renderNoPermissionToViewAllWarningAtBottom(e,this.getUniqueCommitCount(i)),JIRA.DevStatus.Date.addTooltip(n),this.setupBranchesTooltip(),this.createReviewDialog&&this.createReviewDialog.renderSuccess(),this},setupCreateReviewDialog:function(e){var i=t.chain(e).filter(function(e){return e.showCreateReview}).pluck("instance").value(),s=!1;if(i.length){var a=require("jira/devstatus/create-review-form-dialog");this.createReviewDialog=new a({analytics:this.analytics,applicationType:this._getActiveApplicationType(),issueId:this.issueId,instances:i}),s=!0}var o=n.get("fusion-open-detail-dialog");return JIRA.DevStatus.URL.isCreateReviewDetailDialogLink(o)&&JIRA.DevStatus.URL.getCreateReviewDetailDialogApplicationType(o)===this._getActiveApplicationType()&&(n.set("fusion-open-detail-dialog",void 0),s&&this.createReviewDialog.dialog.show()),s},setupBranchesTooltip:function(){var t=this;e(".branches-link").tooltip({title:function(){var i=t._getCommitDetails(e(this)).branches;return JIRA.DevStatus.CommitsAnalytics.fireDetailBranchesShown(t._getActiveApplicationType()),JIRA.Templates.DevStatus.DetailDialog.branchesTooltip({branchData:i})},html:!0})},getTitle:function(i,n){var s=t.chain(this.model.get("tabs")).map(function(e){return e.count}).reduce(function(e,t){return e+t},0).value(),a=Math.max(s-i,0);return e.trim(AJS.format("{1}: {0} unique {0,choice,1#commit|1\u003ccommits}{2,choice,0# |0\u003c (and {2} duplicates)}",i,n,a))},getOAuthMessageInFooter:function(e){return AJS.format("You might be able to see more commits by authenticating with the following {0,choice,1#application|1\u003capplications}:",e.length)},getOAuthMessageInCanvas:function(){return "Authenticate to see related commits"},getConnectionMessageInCanvas:function(){return "Unable to retrieve commit information"},getNoPermissionToViewAllMessageInCanvas:function(){return "You don\'t have access to view all related commits."},hasData:function(e){return this.concatResults(e).length>0},transformRepositories:function(e){e=this._sanitizeRepositories(e),e=this.sortRepositoriesAndCommits(e);var i=this,n=[["reviews","showReviews"],["branches","showBranches"],["files","showFiles"],["createReviewUrl","showCreateReview"]];return t.each(n,function(t){e=i._setRepositoryFromFromCommitField(e,t[0],t[1])}),e=this.prepareReviews(e)},_setRepositoryFromFromCommitField:function(e,i,n){return t.each(e,function(e){e[n]=null!=t.find(e.commits,function(e){return null!=e[i]})}),e},prepareReviews:function(e){var i=this;return t.each(e,function(e){t.each(e.commits,i._orderCommitReviews,i)}),e},_orderCommitReviews:function(e){e.reviews&&e.reviews.reviews&&(e.reviews.reviews=this._sortReviewsByStatus(e.reviews.reviews))},sortRepositoriesAndCommits:function(e){return e=t.sortBy(e,function(e){return e.name.toLowerCase()}),t.each(e,function(e){e.commits=t.sortBy(e.commits,"authorTimestamp").reverse()}),e},getUniqueCommitCount:function(e){return t.union.apply(null,t.map(e,function(e){return t.filter(t.pluck(e.commits,"id"),function(e){return e})})).length},_getRepoDetails:function(e){return this.transformedRepositories[parseInt(e.parents(".detail-commits-container").data("repository-index"))]},_getCommitDetails:function(e){return this._getRepoDetails(e).commits[parseInt(e.parents("tr").data("commit-index"))]},_onClickRepositoryLink:function(){JIRA.DevStatus.CommitsAnalytics.fireDetailRepoClicked(this._getActiveApplicationType())},_onClickChangesetId:function(){JIRA.DevStatus.CommitsAnalytics.fireDetailCommitClicked(this._getActiveApplicationType())},_onClickExpand:function(t){t.preventDefault();var i=this._getFileExpand(e(t.target));i.toggle(i.getRows())&&JIRA.DevStatus.CommitsAnalytics.fireDetailFilesExpandedClicked(this._getActiveApplicationType()),this._clipEllipsis()},_onClickFiles:function(t){t.preventDefault();var i=this._getFileExpand(e(t.target)).toggle(e(t.target).closest(".commitrow").next(".filerow"));this._clipEllipsis(),i&&JIRA.DevStatus.CommitsAnalytics.fireDetailFileExpandedClicked(this._getActiveApplicationType())},_onClickCreateReview:function(){JIRA.DevStatus.CommitsAnalytics.fireDetailCreateReviewClicked(this._getActiveApplicationType(),!1)},_onClickReview:function(){JIRA.DevStatus.CommitsAnalytics.fireDetailReviewClicked(this._getActiveApplicationType())},_onHoverReviewsTooltip:function(){JIRA.DevStatus.CommitsAnalytics.fireDetailReviewsShown(this._getActiveApplicationType())},_onClickFile:function(){JIRA.DevStatus.CommitsAnalytics.fireDetailFileClicked(this._getActiveApplicationType())},_getFileExpand:function(e){function t(e){return e.length>e.filter(".hidden").length}var i=e.closest(".detail-commits-container");return{getRows:function(){return i.find(".filerow")},toggle:function(e){var i=t(e);return e.toggleClass("hidden",i),this._updateExpandLabel(),!i},_updateExpandLabel:function(){i.find(".file-expand a").text(t(this.getRows())?"Hide files":"Show all files")}}},_sanitizeRepositories:function(e){return t.map(e,function(e){var i=s.sanitizeObject(e,["url"]);return i.hasOwnProperty("commits")&&(i.commits=t.map(i.commits,function(e){var t=s.sanitizeObject(e,["url","createReviewUrl"]);return t.hasOwnProperty("files")&&(t.files=s.sanitizeCollection(t.files,["url"])),t.hasOwnProperty("reviews")&&(t.reviews=s.sanitizeObject(t.reviews,["url"]),t.reviews.hasOwnProperty("reviews")&&(t.reviews.reviews=s.sanitizeCollection(t.reviews.reviews,["url"]))),t})),i})}})}),Backbone.define("JIRA.DevStatus.DetailDialogCommitView",require("jira/devstatus/detail-dialog-commit-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'js/viewissue/dialog/DetailDialogBranchView.js' */
"use strict";define("jira/devstatus/detail-dialog-branch-view",["jquery","underscore","jira/devstatus/base-detail-dialog-view","jira-development-status/util/sanitize","jira/featureflags/feature-manager"],function(t,e,i,n,a){return i.extend({template:JIRA.Templates.DevStatus.DetailDialog.branch,STATE_ORDER:["OPEN","MERGED","DECLINED"],events:{"click a.repository-link":"_onClickRepositoryLink","click a.branch-link":"_onClickBranchLink","click a.create-pullrequest-link":"_onClickCreatePullRequestLink","click a.create-review-link":"_onClickCreateReviewLink","mouseenter .pullrequest-tooltip":"_onHoverPullRequestsToolTip","mouseenter .review-tooltip":"_onHoverReviewsToolTip"},initialize:function(t){this.analyticIssueData=t.analyticIssueData||{},this.analytics=JIRA.DevStatus.BranchesAnalytics,i.prototype.initialize.call(this,e.extend({},t,{type:"branch",width:1e3,height:400,dataType:"pullrequest"}))},renderSuccess:function(t,e){var i=this._sortBranchesByName(this._removeWithNoRepos(this._extractAllBranches(e)));i=this._sanitizeBranches(i);var a=this._extractAllPullRequests(e);a=n.sanitizeCollection(a,["url"]),this._populatePullRequestStateByBranch(i,a),this._prepareBranchReviews(i);var s=this._getBranchFeatures(i),r=this._getBranchCount(i),l=this.getContentContainer(t);return r>0?(l.html(this.template({applicationType:t,branches:i,features:s,branchCount:r})),JIRA.DevStatus.Date.addTooltip(l)):l.empty(),this.renderNoPermissionToViewAllWarningAtBottom(t,r),this},getTitle:function(t,e){return AJS.format("{1}: {0} {0,choice,1#branch|1\u003cbranches}",t,e)},getOAuthMessageInFooter:function(t){return AJS.format("You might be able to see more branches by authenticating with the following {0,choice,1#application|1\u003capplications}:",t.length)},getOAuthMessageInCanvas:function(){return "Authenticate to see related branches"},getConnectionMessageInCanvas:function(){return "Unable to retrieve branch information"},getNoPermissionToViewAllMessageInCanvas:function(){return "You don\'t have access to view all related branches."},hasData:function(t){return this._removeWithNoRepos(this._extractAllBranches(t)).length>0},_extractAllBranches:function(t){return e.compact(e.flatten(e.pluck(t,"branches")))},_getBranchFeatures:function(t){return{pullRequests:null!=e.find(t,function(t){return t.createPullRequestUrl||t.pullRequestState&&t.pullRequestState.total}),lastCommitId:null!=e.find(t,function(t){return t.lastCommit&&t.lastCommit.displayId}),lastCommitTimestamp:null!=e.find(t,function(t){return t.lastCommit&&t.lastCommit.authorTimestamp}),reviews:null!=e.find(t,function(t){return t.createReviewUrl||t.reviews&&t.reviews.totalCount})}},_removeWithNoRepos:function(t){return e.filter(t,function(t){return t.repository})},_prepareBranchReviews:function(t){var i=this._sortReviewsByStatus;e.each(t,function(t){t.reviews&&t.reviews.reviews&&(t.reviews.reviews=i(t.reviews.reviews))})},_extractAllPullRequests:function(t){return e.flatten(e.compact(e.pluck(t,"pullRequests")))},_sortBranchesByName:function(t){return e.sortBy(t,function(t){return t.repository.name+t.name})},_onClickRepositoryLink:function(){this.analytics.fireDetailRepoClicked(this._getActiveApplicationType())},_onClickBranchLink:function(){this.analytics.fireDetailBranchClicked(this._getActiveApplicationType())},_onClickCreatePullRequestLink:function(){this.analytics.fireDetailCreatePullRequestClicked(this._getActiveApplicationType(),this.analyticIssueData.isAssignee,this.analyticIssueData.isAssignable)},_onClickCreateReviewLink:function(){this.analytics.fireDetailCreateReviewClicked(this._getActiveApplicationType(),this.analyticIssueData.isAssignee,this.analyticIssueData.isAssignable)},_onHoverPullRequestsToolTip:function(){this.analytics.fireDetailPullRequestLozengeClick(this._getActiveApplicationType())},_onHoverReviewsToolTip:function(){this.analytics.fireDetailReviewLozengeClick(this._getActiveApplicationType())},_getBranchCount:function(t){return t.length},_populatePullRequestStateByBranch:function(t,i){var n=this;return e.each(t,function(t){var a=e.filter(i,function(e){return e.source.url===t.url});t.pullRequestState=n._summarisePullRequestState(a)}),t},_sortPullRequestsByStatus:function(t){return e.sortBy(t,function(t){return("OPEN"===t.status?"2":"MERGED"===t.status?"1":"0")+t.lastUpdated}).reverse()},_getFirstStatusWithCount:function(t){return e.find(this.STATE_ORDER,function(e){return t[e]})},_summarisePullRequestState:function(t){var i=e.groupBy(t,function(t){return t.status});return{status:this._getFirstStatusWithCount(i),data:this._sortPullRequestsByStatus(t),total:e.size(t)}},_sanitizeBranches:function(t){return e.map(t,function(t){var e=n.sanitizeObject(t,["url","createPullRequestUrl","createReviewUrl"]);return e.hasOwnProperty("repository")&&(e.repository=n.sanitizeObject(e.repository,["url"])),e.hasOwnProperty("lastCommit")&&(e.lastCommit=n.sanitizeObject(e.lastCommit,["url"])),e})}})}),Backbone.define("JIRA.DevStatus.DetailDialogBranchView",require("jira/devstatus/detail-dialog-branch-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'js/viewissue/dialog/DetailDialogPullRequestView.js' */
"use strict";define("jira/devstatus/detail-dialog-pull-request-view",["underscore","jira/devstatus/base-detail-dialog-view","jira-development-status/util/sanitize","jira/featureflags/feature-manager"],function(e,t,i,n){return t.extend({template:JIRA.Templates.DevStatus.DetailDialog.pullRequest,events:{"click a.pullrequest-link":"_onClickPullRequestLink"},initialize:function(i){this.analytics=JIRA.DevStatus.PullRequestsAnalytics,t.prototype.initialize.call(this,e.extend({type:"pullrequest",width:1e3,height:400},i))},renderSuccess:function(t,n){var s=this._removeAuthorFromReviewers(this._extractAllPullRequests(n)),r=i.sanitizeCollection(s,["url"]),l=this._getSortedPullRequestsByDate(r),u=e.size(l),a=this.getContentContainer(t);return u>0?(a.html(this.template({pullRequests:l,pullRequestCount:u,reviewersThreshold:this.options.reviewersThreshold})),JIRA.DevStatus.Date.addTooltip(a)):a.empty(),this.renderNoPermissionToViewAllWarningAtBottom(t,u),this},getTitle:function(e,t){return AJS.format("{1}: {0} {0,choice,1#pull request|1\u003cpull requests}",e,t)},getOAuthMessageInFooter:function(e){return AJS.format("You might be able to see more pull requests by authenticating with the following {0,choice,1#application|1\u003capplications}:",e.length)},getOAuthMessageInCanvas:function(){return "Authenticate to see related pull requests"},getConnectionMessageInCanvas:function(){return "Unable to retrieve pull request information"},getNoPermissionToViewAllMessageInCanvas:function(){return "You don\'t have access to view all related pull requests."},hasData:function(e){return this._extractAllPullRequests(e).length>0},_extractAllPullRequests:function(t){return e.compact(e.flatten(e.pluck(t,"pullRequests")))},_removeAuthorFromReviewers:function(t){return e.map(t,function(t){if(t.reviewers&&t.author){var i=e.filter(t.reviewers,function(e){return e.name!=t.author.name});if(t.reviewers.length==i.length)return t;var n=e.clone(t);return n.reviewers=i,n}return t})},_sortReviewers:function(t){var i=this.options.reviewersThreshold;e.each(t,function(t,n){e.size(t.reviewers)>0&&(t.reviewers=e.sortBy(e.filter(t.reviewers,function(e){return e.name}),function(e){return e.approved?"0"+e.name:"1"+e.name}),t.reviewers.length>i+1&&(t.extraReviewers=t.reviewers.slice(i)))})},_getSortedPullRequestsByDate:function(t){return this._sortReviewers(t),e.sortBy(t,"lastUpdate").reverse()},_onClickPullRequestLink:function(){this.analytics.fireDetailPullRequestClicked(this._getActiveApplicationType())}})}),Backbone.define("JIRA.DevStatus.DetailDialogPullRequestView",require("jira/devstatus/detail-dialog-pull-request-view"));;
;
/* module-key = 'com.atlassian.jira.plugins.jira-development-integration-plugin:devstatus-dialog-all-resources', location = 'js/viewissue/dialog/DetailDialogReviewView.js' */
"use strict";define("jira/devstatus/detail-dialog-review-view",["underscore","jira/devstatus/base-detail-dialog-view","jira-development-status/util/sanitize","jira/featureflags/feature-manager"],function(e,t,i,a){return t.extend({template:JIRA.Templates.DevStatus.DetailDialog.review,events:{"click a.review-link":"_onClickReviewLink","click a.comment-link":"_onClickReviewLink"},initialize:function(i){this.analytics=JIRA.DevStatus.ReviewsAnalytics,this.finalStates=["REJECTED","CLOSED"],this.nonFinalStates=["REVIEW","APPROVAL","SUMMARIZE"],this.validStates=e.union(this.finalStates,this.nonFinalStates),t.prototype.initialize.call(this,e.extend({type:"review",width:1e3,height:400},i))},_updateReviewers:function(t){return t.reviewers=e.chain(t.reviewers).filter(function(i){return!(i&&t.author&&t.author.name&&i.name)||!e.isEqual(i.name,t.author.name)}).sortBy(function(e){return(e.complete?"0":"1")+e.name}).map(function(e){return e.approved=e.complete,e}).value(),t.moderator&&!e.isEqual(t.moderator,t.author)&&(t.reviewers=[e.extend(t.moderator,{name:"Moderator:"+" "+t.moderator.name})].concat(t.reviewers)),t},_updateReview:function(t){return function(i){return i.state&&i.dueDate&&e.contains(t,i.state)&&delete i.dueDate,i.dueDate&&moment(i.dueDate).isBefore(moment())&&(i.overDue=!0),i}},_addExtraReviewers:function(e){return function(t){return t.reviewers&&(t.extraReviewers=t.reviewers.slice(e)),t}},_reviewCompare:function(e,t){return e.dueDate&&!t.dueDate?-1:!e.dueDate&&t.dueDate?1:e.dueDate&&t.dueDate?e.dueDate.localeCompare(t.dueDate):e.lastModified&&t.lastModified?t.lastModified.localeCompare(e.lastModified):0},_mergeInstanceData:function(e,t){return e.concat(t.reviews||[])},_prepareReviews:function(t){var i=this;return e.chain(t).reduce(this._mergeInstanceData,[]).filter(function(t){return t.state=t.state&&t.state.toUpperCase(),e.contains(i.validStates,t.state)}).map(e.compose(this._addExtraReviewers(this.options.reviewersThreshold),this._getSanitizedReview,this._updateReviewers,this._updateReview(this.finalStates))).sort(this._reviewCompare).value()},renderSuccess:function(e,t){var i=this._prepareReviews(t),a=this.getContentContainer(e);return i.length>0?(a.html(this.template({applicationType:e,reviews:i,reviewersThreshold:this.options.reviewersThreshold})),JIRA.DevStatus.Date.addTooltip(a)):a.empty(),this.renderNoPermissionToViewAllWarningAtBottom(e,i.length),this},getTitle:function(e,t){return AJS.format("{1}: {0} {0,choice,1#review|1\u003creviews}",e,t)},getNoPermissionToViewAllMessageInCanvas:function(){return "You don\'t have access to view all related reviews."},getOAuthMessageInCanvas:function(){return "Authenticate to see related reviews"},getOAuthMessageInFooter:function(e){return AJS.format("You might be able to see more reviews by authenticating with the following {0,choice,1#application|1\u003capplications}:",e.length)},getConnectionMessageInCanvas:function(){return "Unable to retrieve review information"},hasData:function(t){return e.flatten(e.pluck(t,"reviews"),!0).length>0},_onClickReviewLink:function(){this.analytics.fireDetailReviewClicked()},_getSanitizedReview:function(e){return i.sanitizeObject(e,["url"])}})}),Backbone.define("JIRA.DevStatus.DetailDialogReviewView",require("jira/devstatus/detail-dialog-review-view"));;;try{window.performance.mark('greenhopper-rapid-non-gadget-lwf-board,gh-rapid-lwf-board,jira.global,atl.general,jira.general,atl.global,com.pyxis.greenhopper.jira,gh-rapid-config-lwf-board-deferred,jira.webresources,com.atlassian.jira.plugins.jira-development-integration-plugin_batch_file_eval:end');} catch(e){};