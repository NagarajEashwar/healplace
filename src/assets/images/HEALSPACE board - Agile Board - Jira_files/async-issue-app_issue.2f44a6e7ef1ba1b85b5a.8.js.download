try{window.performance.mark("async-issue-app~issue.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-issue-app~issue"],{"./src/packages/issue-create/find-field/src/async.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),r=s("./src/packages/platform/ui/error-boundary/src/main.js");const o=Object(i.e)((()=>s.e("async-issue-config-find-field").then(s.bind(null,"./src/packages/issue-create/find-field/src/index.js"))),{ssr:!1,moduleId:"./src/packages/issue-create/find-field/src/index.js"});t.a=e=>a.a.createElement(r.a,{id:"async.jira.issue-config.find-field",packageName:"jiraIssueConfigFindField"},a.a.createElement(i.a,{fallback:a.a.createElement(a.a.Fragment,null)},a.a.createElement(o,e)))},"./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a
})),s.d(t,"c",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"d",(function(){return o}));const n="issue",a={comment:"comment",worklog:"worklog",description:"description",environment:"environment",customfield:"customfield",issue:n},i="DESC",r={FILENAME:"FILENAME",CREATED:"CREATED",FILESIZE:"FILESIZE",MIMETYPE:"MIMETYPE"},o=r.CREATED},"./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return p}));var n=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),a=s("./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c={isDownloading:!1,isFetching:!1,error:null,totalCount:void 0,deletableCount:void 0,visibleAttachments:[]
},l=()=>"\n  query attachmentsQuery($issueKey: String, $startAt: Long, $maxResults: Long, $orderField: AttachmentsOrderField, $orderDirection: OrderDirection) {\n    viewIssue(issueKey: $issueKey) {\n        attachments(startAt: $startAt, maxResults: $maxResults, orderField: $orderField, orderDirection: $orderDirection) {\n            nodes {\n                id\n                filename\n                mimetype\n                mediaApiFileId\n                createdDate\n                filesize\n                parentName\n                parentId\n                author {\n                    accountId\n                }\n                isParentCommentJsdInternal\n            }\n            totalCount\n            deletableCount\n        }\n    }\n  }",u={startAt:0,maxResults:6,orderField:a.d,orderDirection:a.c},d=async(e,t,s)=>{var a,i;const o=r(r({},u),s),c=await Object(n.d)(`${t}/rest/gira/1/`,{body:JSON.stringify({query:l(),variables:r({issueKey:e},o)})
}),d=null==c||null===(a=c.data)||void 0===a||null===(i=a.viewIssue)||void 0===i?void 0:i.attachments;return d&&d.nodes&&void 0!==d.totalCount?c.data.viewIssue.attachments:null},p=async(e,t)=>Object(n.a)(`${e}/rest/api/2/attachment/${t}`)},"./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return j})),s.d(t,"a",(function(){return v}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/ui/flags/src/services/index.js"),i=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),r=s("./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),c=s("./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js"),l=s("./src/packages/issue/attachments/issue-attachments-base/src/services/index.js")
;const u=(e,t)=>e.issueAttachments[t]||c.c,d=Object(o.a)(l.a,{selector:(e,t)=>u(e,t).isFetching}),p=Object(o.a)(l.a,{selector:(e,t)=>u(e,t).error}),m=Object(o.a)(l.a,{selector:e=>e.meta.orderDirection}),b=Object(o.a)(l.a,{selector:e=>e.meta.orderField}),f=Object(o.a)(l.a,{selector:(e,t)=>u(e,t).totalCount}),g=Object(o.a)(l.a,{selector:(e,t)=>u(e,t).deletableCount}),h=Object(o.a)(l.a,{selector:e=>e.meta.startAt}),y=Object(o.a)(l.a,{selector:(e,t)=>u(e,t).visibleAttachments}),O=Object(o.a)(l.a,{selector:null}),j=()=>{const[,e]=O(),t=Object(i.a)(),{showFlag:s}=Object(a.f)(),{setOrderDirection:o,setOrderField:c,setTotalCount:l,setDeletableCount:u,setVisibleAttachments:d,addNewAttachments:p,deleteAttachment:m,getAttachments:b,refreshAttachments:f}=e,g=Object(n.useCallback)((async(e,n,a)=>{try{await m(e,n,t,a)}catch{s({type:"error",title:r.a.deleteFailedTitle,description:r.a.deleteFailedDescription})}}),[m,t,s]);return[null,{setOrderDirection:o,setOrderField:c,setTotalCount:l,
setDeletableCount:u,setVisibleAttachments:d,addNewAttachments:p,getAttachments:Object(n.useCallback)((async(e,s)=>{await b(e,t,s)}),[t,b]),deleteAttachment:g,refreshAttachments:Object(n.useCallback)((async(e,s)=>{await f(e,t,s)}),[t,f])}]},v=(e,t)=>{const[,s]=j(),[a]=d(e),[i]=p(e),[r]=m(),[o]=b(),[c]=h(),[l]=f(e),[u]=g(e),[O]=y(e),{getAttachments:v}=s;Object(n.useEffect)((()=>{void 0!==l||a||i||v(e,t)}),[i,v,e,a,t,l]);return[{error:i,meta:{orderDirection:r,orderField:o,startAt:c},value:{attachments:O,totalCount:l||0,deletableCount:u||0},loading:a},s]}},"./src/packages/issue/attachments/issue-attachments-base/src/services/index.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return D}));var a={};n.r(a),n.d(a,"setIsDownloading",(function(){return x})),n.d(a,"setDeleteAllDialogOpen",(function(){return I})),n.d(a,"setIsFetching",(function(){return p})),n.d(a,"setOrderDirection",(function(){return b})),n.d(a,"setOrderField",(function(){return f})),n.d(a,"setStartAt",(function(){
return y})),n.d(a,"setTotalCount",(function(){return g})),n.d(a,"setDeletableCount",(function(){return h})),n.d(a,"setVisibleAttachments",(function(){return O})),n.d(a,"addNewAttachments",(function(){return j})),n.d(a,"getAttachments",(function(){return v})),n.d(a,"deleteAttachment",(function(){return E})),n.d(a,"refreshAttachments",(function(){return k}));var i=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=n("./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js"),o=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),c=n("./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:u(u({},a.issueAttachments),{},{[e]:u(u({},a.issueAttachments[e]||c.c),{},{isFetching:t})})})},m=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:u(u({},a.issueAttachments),{},{[e]:u(u({},a.issueAttachments[e]||c.c),{},{error:t})})})},b=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:u(u({},n),{},{orderDirection:e})})},f=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:u(u({},n),{},{orderField:e})})},g=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:u(u({},a.issueAttachments),{},{
[e]:u(u({},a.issueAttachments[e]||c.c),{},{totalCount:t})})})},h=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:u(u({},a.issueAttachments),{},{[e]:u(u({},a.issueAttachments[e]||c.c),{},{deletableCount:t})})})},y=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:u(u({},n),{},{startAt:e})})},O=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:u(u({},a.issueAttachments),{},{[e]:u(u({},a.issueAttachments[e]||c.c),{},{visibleAttachments:t})})})},j=(e,t)=>({setState:s,getState:n})=>{const a=n(),i=a.issueAttachments[e]?a.issueAttachments[e].visibleAttachments:[],r=a.issueAttachments[e]&&a.issueAttachments[e].totalCount||0,o=t.concat(i),l=r+t.length;s({issueAttachments:u(u({},a.issueAttachments),{},{[e]:u(u({},a.issueAttachments[e]||c.c),{},{visibleAttachments:o,totalCount:l})})})},v=(t,s,n)=>async({dispatch:a})=>{a(p(t,!0)),a(m(t,null));try{const e=await Object(c.b)(t,s,n);if(e)a(g(t,e.totalCount)),
"number"==typeof e.deletableCount&&a(h(t,e.deletableCount)),a(O(t,e.nodes)),a(b((null==n?void 0:n.orderDirection)||r.c)),a(f((null==n?void 0:n.orderField)||r.d)),a(y((null==n?void 0:n.startAt)||0));else{const e="Failed to fetch issue attachments";a(m(t,new Error(e))),o.a.safeErrorWithoutCustomerData("issue.attachments.fetch-attachments",e)}}catch(e){a(m(t,e)),o.a.safeErrorWithoutCustomerData("issue.attachments.fetch-attachments",e.toString())}a(p(t,!1))},E=(e,t,s,n)=>async({dispatch:a,getState:i})=>{const r=i().issueAttachments[e],{totalCount:o,visibleAttachments:l}=r;if(void 0!==o){a(O(e,l.filter((e=>e.id!==t)))),a(g(e,o-1));try{await Object(c.a)(s,t),a(v(e,s,n))}catch(u){throw a(v(e,s,n)),u}}},k=(e,t,s)=>({dispatch:n,getState:a})=>{const i=a(),r=i.issueAttachments[e],{startAt:o}=i.meta,{isFetching:c}=r;(!c||s&&s.startAt!==o)&&n(v(e,t,s))};function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function S(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach((function(t){C(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function C(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const I=e=>({getState:t,setState:s})=>{const{meta:n}=t();s({meta:S(S({},n),{},{isDeleteAllDialogOpen:e})})};function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function P(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?T(Object(s),!0).forEach((function(t){_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const x=(e,t)=>({setState:s,getState:n})=>{const a=n();s({issueAttachments:P(P({},a.issueAttachments),{},{[e]:P(P({},a.issueAttachments[e]),{},{isDownloading:t})})})},D=Object(i.a)({name:"issue-attachments",initialState:{issueAttachments:{},meta:{orderDirection:r.c,orderField:r.d,startAt:0,isDeleteAllDialogOpen:!1}},actions:a})},"./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({gotIt:{id:"issue-attachments-base.services.got-it",defaultMessage:"Got it"},tryAgain:{
id:"issue-attachments-base.services.try-again",defaultMessage:"Try again"},downloadStartTitle:{id:"issue-attachments-base.services.download-start-title",defaultMessage:"Downloading attachments"},downloadStartDescription:{id:"issue-attachments-base.services.download-start-description",defaultMessage:"This might take a while. When we\u2019re done, your attachments will be in a zip file on your device."},downloadFailedTitle:{id:"issue-attachments-base.services.download-failed-title",defaultMessage:"We couldn\u2019t download your attachments"},downloadFailedDescription:{id:"issue-attachments-base.services.download-failed-description",defaultMessage:"We didn\u2019t finish downloading your attachments for {issueKey}. Check your connection and then try again."},downloadFailedExceedFileSizeDescription:{id:"issue-attachments-base.services.download-failed-exceed-file-size-description",
defaultMessage:"The total size of {issueKey}'s attachments is too large to download. Try downloading each attachment individually."},deleteFailedTitle:{id:"issue-attachments-base.services.delete-failed-title",defaultMessage:"Attachment could not be deleted"},deleteFailedDescription:{id:"issue-attachments-base.services.delete-failed-description",defaultMessage:"There was a connection problem and the attachment was not successfully deleted. Try checking your network connection."}})},"./src/packages/issue/attachments/issue-attachments-table/src/ui/empty/assets/cloud.svg":function(e,t,s){e.exports=s.p+"assets/cloud.45c69da8a128cc239c19035695bab30d.8.svg"},"./src/packages/issue/attachments/issue-attachments-table/src/ui/error/assets/search.svg":function(e,t,s){e.exports=s.p+"assets/search.1cc781b7e8848ea0f1d2dc40004f854f.8.svg"},"./src/packages/issue/base-components/base-select/src/ui/format-option-label/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return g}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./node_modules/@atlaskit/theme/dist/es2019/constants.js"),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const u=r.default.div(["display:flex;align-items:center;"]),d=r.default.div(["flex-direction:column;display:flex;width:100%;"]),p=r.default.div(["margin-right:","px;display:flex;"],l.e),m=r.default.div([""]),b=r.default.div(["font-size:","px;color:",";"],o.fontSizeSmall,c.a.N300),f=e=>{const{option:{label:t,iconUrl:s,description:n},optionContext:r}=e;return a.a.createElement(u,null,Boolean(s)&&a.a.createElement(p,null,a.a.createElement(i.a,{appearance:"square",size:"xsmall",src:s,borderColor:"transparent"
})),a.a.createElement(d,null,a.a.createElement(m,null,t),"menu"===r&&Boolean(n)&&a.a.createElement(b,null,n)))};f.displayName="SelectOptionWithAvatarAndDescription";const g=(e,{context:t})=>a.a.createElement(f,{option:e,optionContext:t});g.displayName="formatOptionLabel"},"./src/packages/issue/base-components/base-select/src/ui/styled.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"f",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=(s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"));function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=n.default.span(["display:flex;align-items:center;"]),l=n.default.span(["display:flex;padding-right:","px;"],a.e),u=n.default.span(["display:flex;"]),d=Object(n.default)(c)(["justify-content:center;"]),p={menuPortal:e=>r(r({},e),{},{zIndex:a.f.modal})},m=n.default.div(["",";"],(e=>"top"===e.errorMessagePosition?`margin-bottom: ${.75*a.e}px;`:""))},"./src/packages/issue/base-components/base-select/src/ui/utils.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const i=(e,t)=>"string"==typeof e&&e.toLowerCase().includes(t),r=(e,t)=>{if(e.data&&!0===e.data.__isNew__)return!0;const s=t.trim().toLowerCase();return!("string"!=typeof e.label||!i(e.label,s))||!(!e.data||!e.data.filterValues)&&e.data.filterValues.some((e=>i(e,s)))},o=(e,...t)=>{const s=e||{};if(0===t.length)return s;const i=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},s);return t.forEach((e=>{e&&Object.keys(e).forEach((t=>{const s=i[t],n=e[t];i[t]=s?(e,...t)=>n(s(e,...t),...t):n}))})),i}},"./src/packages/issue/ecosystem-service/src/services/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return d}));var n={};s.r(n),s.d(n,"setEcosystem",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const r=e=>({setState:t})=>{e&&t(e)},o=Object(a.a)({name:"issue-view-layout-ecosystem-service",initialState:{activityPanels:{},canInstallAddons:!1,contentPanels:{},backgroundScripts:[],ecosystemOnDate:0,glances:{},operations:[]},actions:n}),c=Object(i.a)(o),l=Object(i.a)(o,{selector:null}),u=()=>{const[e]=c();return[e.glances]},d=()=>{const[,{setEcosystem:e}]=l();return[void 0,{setEcosystem:e}]}},
"./src/packages/issue/epic-color/src/common/constants.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"k",(function(){return o})),s.d(t,"j",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"i",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"e",(function(){return p})),s.d(t,"f",(function(){return m})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"a",(function(){return g}));var n=s("./node_modules/lodash/invert.js"),a=s.n(n),i=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const r={PURPLE:i.a.P200,BLUE:i.a.B200,GREEN:i.a.G200,TEAL:i.a.T200,YELLOW:i.a.Y200,ORANGE:i.a.R200,GREY:i.a.N200,DARK_PURPLE:i.a.P400,DARK_BLUE:i.a.B400,DARK_GREEN:i.a.G400,DARK_TEAL:i.a.T400,DARK_YELLOW:i.a.Y400,DARK_ORANGE:i.a.R400,DARK_GREY:i.a.N700},o=a()(r),c={purple:"PURPLE",dark_purple:"DARK_PURPLE",blue:"BLUE",dark_blue:"DARK_BLUE",green:"GREEN",dark_green:"DARK_GREEN",teal:"TEAL",dark_teal:"DARK_TEAL",
yellow:"YELLOW",dark_yellow:"DARK_YELLOW",orange:"ORANGE",dark_orange:"DARK_ORANGE",grey:"GREY",dark_grey:"DARK_GREY"},l=a()(c),u={"ghx-label-1":"DARK_GREY","ghx-label-2":"DARK_YELLOW","ghx-label-3":"YELLOW","ghx-label-4":"DARK_BLUE","ghx-label-5":"DARK_TEAL","ghx-label-6":"GREEN","ghx-label-7":"PURPLE","ghx-label-8":"DARK_PURPLE","ghx-label-9":"ORANGE","ghx-label-10":"BLUE","ghx-label-11":"TEAL","ghx-label-12":"GREY","ghx-label-13":"DARK_GREEN","ghx-label-14":"DARK_ORANGE"},d=a()(u),p={color_1:"DARK_GREY",color_2:"DARK_YELLOW",color_3:"YELLOW",color_4:"DARK_BLUE",color_5:"DARK_TEAL",color_6:"GREEN",color_7:"PURPLE",color_8:"DARK_PURPLE",color_9:"ORANGE",color_10:"BLUE",color_11:"TEAL",color_12:"GREY",color_13:"DARK_GREEN",color_14:"DARK_ORANGE"},m=a()(p),b={"ghx-label-1":"color_1","ghx-label-2":"color_2","ghx-label-3":"color_3","ghx-label-4":"color_4","ghx-label-5":"color_5","ghx-label-6":"color_6","ghx-label-7":"color_7","ghx-label-8":"color_8","ghx-label-9":"color_9",
"ghx-label-10":"color_10","ghx-label-11":"color_11","ghx-label-12":"color_12","ghx-label-13":"color_13","ghx-label-14":"color_14"},f={color_1:"grey",color_2:"yellow",color_3:"yellowLight",color_4:"blue",color_5:"teal",color_6:"greenLight",color_7:"purpleLight",color_8:"purple",color_9:"redLight",color_10:"blueLight",color_11:"tealLight",color_12:"greyLight",color_13:"green",color_14:"red"},g={PURPLE:{primary:i.a.P200,secondary:i.a.P500,text:i.a.P500,textBackground:i.a.P50,border:i.a.P400,line:i.a.P300,primaryGradient:i.a.P75,hasContrastSecondaryGradient:!0},BLUE:{primary:i.a.B200,secondary:i.a.B500,text:i.a.B500,textBackground:i.a.B50,border:i.a.B400,line:i.a.B300,primaryGradient:i.a.B75,hasContrastSecondaryGradient:!0},GREEN:{primary:i.a.G200,secondary:i.a.G500,text:i.a.G500,textBackground:i.a.G50,border:i.a.G400,line:i.a.G300,primaryGradient:i.a.G75,hasContrastSecondaryGradient:!0},TEAL:{primary:i.a.T200,secondary:i.a.T500,text:i.a.T500,textBackground:i.a.T50,border:i.a.T400,
line:i.a.T300,primaryGradient:i.a.T75,hasContrastSecondaryGradient:!0},YELLOW:{primary:i.a.Y200,secondary:i.a.Y500,text:i.a.Y500,textBackground:i.a.Y50,border:i.a.Y400,line:i.a.Y300,primaryGradient:i.a.Y75,hasContrastSecondaryGradient:!0},ORANGE:{primary:i.a.R200,secondary:i.a.R500,text:i.a.R500,textBackground:i.a.R50,border:i.a.R400,line:i.a.R300,primaryGradient:i.a.R75,hasContrastSecondaryGradient:!0},GREY:{primary:i.a.N200,secondary:i.a.N500,text:i.a.N500,textBackground:i.a.N30,border:i.a.N700,line:i.a.N500,primaryGradient:i.a.N50,hasContrastSecondaryGradient:!0},DARK_PURPLE:{primary:i.a.P400,secondary:i.a.P200,text:i.a.N0,textBackground:i.a.P400,border:i.a.P100,line:i.a.P300,primaryGradient:i.a.P100,hasContrastSecondaryGradient:!1},DARK_BLUE:{primary:i.a.B400,secondary:i.a.B200,text:i.a.N0,textBackground:i.a.B400,border:i.a.B200,line:i.a.B100,primaryGradient:i.a.B100,hasContrastSecondaryGradient:!1},DARK_GREEN:{primary:i.a.G400,secondary:i.a.G200,text:i.a.N0,
textBackground:i.a.G400,border:i.a.G200,line:i.a.G300,primaryGradient:i.a.G200,hasContrastSecondaryGradient:!1},DARK_TEAL:{primary:i.a.T400,secondary:i.a.T200,text:i.a.N0,textBackground:i.a.T400,border:i.a.T200,line:i.a.T300,primaryGradient:i.a.T100,hasContrastSecondaryGradient:!1},DARK_YELLOW:{primary:i.a.Y400,secondary:i.a.Y200,text:i.a.N0,textBackground:i.a.Y400,border:i.a.Y200,line:i.a.Y300,primaryGradient:i.a.Y100,hasContrastSecondaryGradient:!1},DARK_ORANGE:{primary:i.a.R400,secondary:i.a.R200,text:i.a.N0,textBackground:i.a.R400,border:i.a.R100,line:i.a.R300,primaryGradient:i.a.R100,hasContrastSecondaryGradient:!1},DARK_GREY:{primary:i.a.N700,secondary:i.a.N300,text:i.a.N0,textBackground:i.a.N500,border:i.a.N100,line:i.a.N500,primaryGradient:i.a.N100,hasContrastSecondaryGradient:!1}}},"./src/packages/issue/epic-color/src/common/types.js":function(e,t,s){"use strict";s.d(t,"g",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"e",(function(){return i})),
s.d(t,"f",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"h",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"a",(function(){return u}));const n="PURPLE",a="BLUE",i="GREEN",r="GREY",o={PURPLE:n,DARK_PURPLE:"DARK_PURPLE",BLUE:a,DARK_BLUE:"DARK_BLUE",GREEN:i,DARK_GREEN:"DARK_GREEN",TEAL:"TEAL",DARK_TEAL:"DARK_TEAL",YELLOW:"YELLOW",DARK_YELLOW:"DARK_YELLOW",ORANGE:"ORANGE",DARK_ORANGE:"DARK_ORANGE",GREY:r,DARK_GREY:"DARK_GREY"},c={SERVER_PURPLE:"purple",SERVER_DARK_PURPLE:"dark_purple",SERVER_BLUE:"blue",SERVER_DARK_BLUE:"dark_blue",SERVER_GREEN:"green",SERVER_DARK_GREEN:"dark_green",SERVER_TEAL:"teal",SERVER_DARK_TEAL:"dark_teal",SERVER_YELLOW:"yellow",SERVER_DARK_YELLOW:"dark_yellow",SERVER_ORANGE:"orange",SERVER_DARK_ORANGE:"dark_orange",SERVER_GREY:"grey",SERVER_DARK_GREY:"dark_grey"},l={GHX_LABEL_1:"ghx-label-1",GHX_LABEL_2:"ghx-label-2",GHX_LABEL_3:"ghx-label-3",GHX_LABEL_4:"ghx-label-4",GHX_LABEL_5:"ghx-label-5",GHX_LABEL_6:"ghx-label-6",
GHX_LABEL_7:"ghx-label-7",GHX_LABEL_8:"ghx-label-8",GHX_LABEL_9:"ghx-label-9",GHX_LABEL_10:"ghx-label-10",GHX_LABEL_11:"ghx-label-11",GHX_LABEL_12:"ghx-label-12",GHX_LABEL_13:"ghx-label-13",GHX_LABEL_14:"ghx-label-14"},u={AGILE_COLOR_1:"color_1",AGILE_COLOR_2:"color_2",AGILE_COLOR_3:"color_3",AGILE_COLOR_4:"color_4",AGILE_COLOR_5:"color_5",AGILE_COLOR_6:"color_6",AGILE_COLOR_7:"color_7",AGILE_COLOR_8:"color_8",AGILE_COLOR_9:"color_9",AGILE_COLOR_10:"color_10",AGILE_COLOR_11:"color_11",AGILE_COLOR_12:"color_12",AGILE_COLOR_13:"color_13",AGILE_COLOR_14:"color_14"}},"./src/packages/issue/epic-color/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"c",(function(){return d})),s.d(t,"a",(function(){return p})),s.d(t,"k",(function(){return m})),s.d(t,"h",(function(){return b})),s.d(t,"f",(function(){return f})),s.d(t,"j",(function(){return g})),s.d(t,"i",(function(){return h})),s.d(t,"e",(function(){return y})),s.d(t,"d",(function(){return O})),
s.d(t,"g",(function(){return v}));var n=s("./node_modules/lodash/invert.js"),a=s.n(n),i=s("./src/packages/issue/epic-color/src/common/constants.js"),r=s("./src/packages/issue/epic-color/src/common/types.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=e=>{if(null==e)return r.d.PURPLE;if(e in r.d)return e;const t=i.j[e];if(t)return t
;const s=i.e[e];if(s)return s;const n=i.i[e];return n||r.d.PURPLE},d=e=>{if(null==e)return r.h.SERVER_PURPLE;if(e in r.h)return e;const t=i.h[e];if(t)return t;const s=i.h[i.e[e]];if(s)return s;const n=i.h[i.i[e]];return n||r.h.SERVER_PURPLE},p=e=>{if(null===e)return i.g[r.d.PURPLE];if(e in r.c)return e;const t=i.g[e];if(t)return t;const s=i.g[i.j[e]];if(s)return s;const n=i.g[i.e[e]];return n||i.g[r.d.PURPLE]},m=(e,t)=>{const s=c(c({},i.a),t);return(t?Object.keys(t).concat(Object.keys(r.d)):Object.keys(r.d)).reduce(((t,n)=>c(c({},t),{},{[n]:e(s[n])})),{})},b=e=>i.d[e]||i.d.PURPLE,f=e=>a()(i.d)[e]||"PURPLE",g=e=>""!==e&&null!=e&&i.j[e]?i.j[e]:"PURPLE",h=e=>i.h[e],y=e=>""!==e&&null!=e&&i.i[e]?i.i[e]:"PURPLE",O=e=>i.g[e],j=m((e=>e.primary)),v=()=>[{label:"purple",value:j[r.d.PURPLE]},{label:"blue",value:j[r.d.BLUE]},{label:"green",value:j[r.d.GREEN]},{label:"teal",value:j[r.d.TEAL]},{label:"yellow",value:j[r.d.YELLOW]},{label:"orange",value:j[r.d.ORANGE]},{label:"grey",value:j[r.d.GREY]
},{label:"darkPurple",value:j[r.d.DARK_PURPLE]},{label:"darkBlue",value:j[r.d.DARK_BLUE]},{label:"darkGreen",value:j[r.d.DARK_GREEN]},{label:"darkTeal",value:j[r.d.DARK_TEAL]},{label:"darkYellow",value:j[r.d.DARK_YELLOW]},{label:"darkOrange",value:j[r.d.DARK_ORANGE]},{label:"darkGrey",value:j[r.d.DARK_GREY]}]},"./src/packages/issue/fields/assignee/src/common/assets/add.png":function(e,t,s){e.exports=s.p+"assets/add.cb4b04e861ca3b9ce2a2c8032dde1c45.8.png"},"./src/packages/issue/fields/assignee/src/common/ui/read-view/popover/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),r=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),o=s("./src/packages/platform/controllers/intl/src/index.js"),c=s("./src/packages/issue/fields/assignee/src/common/utils.js"),l=s("./node_modules/react-intl/lib/index.es.js"),u=Object(l.h)({assigneeTooltip:{
id:"issue-field-assignee.common.read-view.popover.assignee-tooltip",defaultMessage:"Assignee: {name}"}}),d=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const m=d.default.div(["width:","px;height:","px;padding:0;box-sizing:border-box;cursor:default;"],3.5*p.e,3.5*p.e),b=({value:e})=>{const t=Object(o.c)(),s=Object(c.c)(t),n=e||s,l="__UNASSIGNED_ID__"===n.accountId?n.displayName:t.formatMessage(u.assigneeTooltip,{name:n.displayName}),d=Object(c.d)(n);return a.a.createElement(m,null,a.a.createElement(r.a,{content:l},a.a.createElement(i.a,{size:"small",src:d,name:l,borderColor:"transparent"})))};b.displayName="AssigneePickerView";t.a=b},"./src/packages/issue/fields/assignee/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"e",(function(){
return u})),s.d(t,"d",(function(){return d})),s.d(t,"g",(function(){return p}));var n=s("./src/packages/issue/fields/assignee/src/messages.js"),a=s("./src/packages/issue/fields/assignee/src/common/assets/add.png"),i=s.n(a);const r=({formatMessage:e})=>({accountId:"__UNASSIGNED_ID__",displayName:e(n.a.unassignedOption),avatarUrls:{}}),o=({formatMessage:e})=>({accountId:"__AUTOMATIC_ID__",displayName:e(n.a.automaticOption),avatarUrls:{}}),c=({formatMessage:e},t)=>({accountId:"__INVITE_PEOPLE_ID__",displayName:e(t?n.a.invitePeopleOptionAdmin:n.a.invitePeopleOption),avatarUrls:{"48x48":i.a}}),l=({accountId:e,displayName:t,avatarUrls:s})=>({id:e||"",name:t,avatarUrl:s["48x48"]}),u=({id:e,name:t,avatarUrl:s})=>({accountId:e,displayName:t,avatarUrls:{"48x48":s}}),d=({avatarUrls:e})=>e["48x48"],p=(e,t,s)=>({accountId:e,displayName:t,avatarUrls:{"48x48":s}})},"./src/packages/issue/fields/assignee/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),
s.d(t,"b",(function(){return i}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jira-feature-flag-client.js");const a=()=>Object(n.a)().getVariantValue("invite.from.assign",{default:"not-enrolled",oneOf:["not-enrolled","control","variation"],shouldTrackExposureEvent:!1}),i=()=>"variation"===a()},"./src/packages/issue/fields/assignee/src/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({unassignedOption:{id:"issue-field-assignee.unassigned-option",defaultMessage:"Unassigned"},automaticOption:{id:"issue-field-assignee.automatic-option",defaultMessage:"Automatic"},assignToMe:{id:"issue-field-assignee.assign-to-me",defaultMessage:"Assign to me"},searchForAssignee:{id:"issue-field-assignee.search-for-assignee",defaultMessage:"Search for assignee"},invitePeopleOption:{id:"issue-field-assignee.invite-people-option",defaultMessage:"Add teammate to Jira"},invitePeopleOptionAdmin:{
id:"issue-field-assignee.invite-people-option-admin",defaultMessage:"Invite teammate to Jira"}})},"./src/packages/issue/fields/assignee/src/services/assignee-options/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return b}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),i=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),r=s("./src/packages/platform/controllers/tenant-context/src/components/is-admin/index.js"),o=s("./src/packages/platform/services/user/src/main.js"),c=s("./src/packages/issue/fields/assignee/src/common/utils.js"),l=s("./src/packages/issue/fields/assignee/src/feature-flags.js"),u=s("./src/packages/issue/fields/assignee/src/messages.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable
}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=(e,t,s,d,m,b,f)=>{const[g,h]=Object(n.useState)(!1),y=Object(r.a)(),O=Object(c.c)(s),j=Object(c.a)(s),v=Object(c.f)(e||O),[{data:E}]=Object(o.b)(),{createAnalyticsEvent:k}=Object(i.a)(),w=E?p(p({},Object(c.f)(E)),{},{publicName:s.formatMessage(u.a.assignToMe)}):null,S=void 0===m||""===m,C=S?Boolean(null==e?void 0:e.accountId):O.displayName.toLowerCase().startsWith((m||"").toLowerCase());let I=!1
;!0===f&&(I=S?Boolean("__AUTOMATIC_ID__"!==(null==e?void 0:e.accountId)):j.displayName.toLowerCase().startsWith((m||"").toLowerCase()));const T=null!==w&&v.id===w.id,P=t.some((e=>null!==w&&e.accountId===w.id)),_=S?!T&&(d||P):P,x=t.filter((e=>!(S&&e.accountId===v.id||null!==w&&e.accountId===w.id))).map(c.f),D=[];!0===b&&!S&&x.length<3&&(g||(h(!0),((e,t,s)=>{if(null==e)return;const n=e({action:"exposed",actionSubject:"feature"}),i={fieldId:"assignee",flagKey:"invite.from.assign",value:Object(l.a)(),userRole:s?"admin":"basic",suggestionsCount:t,source:"assigneeField"};Object(a.b)(n,"feature exposed",i)})(k,x.length,y)),Object(l.b)()&&(((e,t,s)=>{if(null==e)return;const n=e({action:"rendered",actionSubject:"inviteItem"}),i={fieldId:"assignee",userRole:s?"admin":"basic",suggestionsCount:t,source:"assigneeField"};Object(a.h)(n,"inviteItem rendered",i)})(k,x.length,y),D.push(Object(c.f)(Object(c.b)(s,y)))))
;const A=[...C?[Object(c.f)(O)]:[],...I?[Object(c.f)(j)]:[],..._&&null!==w?[w]:[],...x,...D];return[v,A]}},"./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");t.a=({issueKey:e,onSuccess:t,onFailure:s})=>{const n=o.c,[c]=Object(i.a)(e,n),l=a()(c,"schema.type","user"),[{value:u,error:d},{saveValue:p,resetError:m}]=Object(r.a)({fieldKey:n,issueKey:e,fieldType:l,initialValue:null,onSuccess:t,onFailure:s});return[{value:u,error:d,fieldConfig:c},{saveValue:p,resetError:m}]}},"./src/packages/issue/fields/assignee/src/services/users-query/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");t.a=e=>{const[t,s]=Object(n.useState)([]),[r,o]=Object(n.useState)(void 0),[c,l]=Object(n.useState)(!1),u=Object(n.useRef)(""),d=Object(n.useCallback)(((t="")=>{if(["",null,void 0].includes(e))return Promise.resolve([]);const n=`${e||""}${t}`;return l(!0),u.current=t,r&&o(void 0),Object(i.a)(n).then((e=>{t===u.current&&s(e)})).catch((e=>{t===u.current&&o(e),a.h.safeErrorWithoutCustomerData("issue.fields.assigne","Failed to fetch users",e)})).finally((()=>l(!1)))}),[e,r]);return[{data:t,error:r,loading:c},d]}},"./src/packages/issue/fields/assignee/src/ui/popover/main.js":function(e,t,s){"use strict";s.r(t)
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),c=s("./src/packages/issue/fields/assignee/src/common/ui/read-view/popover/main.js"),l=s("./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js"),u=s("./node_modules/lodash/debounce.js"),d=s.n(u),p=s("./node_modules/@atlaskit/user-picker/dist/es2019/components/PopupUserPicker.js"),m=s("./src/packages/platform/controllers/intl/src/index.js"),b=s("./src/packages/invite-people-drawer/src/controllers/index.js"),f=s("./src/packages/issue/fields/assignee/src/common/utils.js"),g=s("./src/packages/issue/fields/assignee/src/feature-flags.js"),h=s("./src/packages/issue/fields/assignee/src/messages.js"),y=s("./src/packages/issue/fields/assignee/src/services/assignee-options/index.js"),O=s("./src/packages/issue/fields/assignee/src/services/users-query/index.js"),j=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),v=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const E="rgba(9, 30, 66, 0.36)",k=j.default.button(["display:block;background:transparent;border:0;outline:0;padding:0;margin:0;border-radius:50%;box-shadow:0 0 0 2px transparent;& > div{cursor:pointer;}span:first-of-type::after{opacity:",";background-color:",";}&:active{box-shadow:0 0 0 2px transparent !important;}&:focus,&:focus-within{box-shadow:0 0 0 2px ",";}&:hover span:first-of-type::after{opacity:1;background-color:",";}"],(({active:e})=>e?1:0),(({active:e})=>e?E:"transparent"),v.a.B100,E),w=({shouldPreloadAssignToMe:e=!1,autoCompleteUrl:t,value:s=null,onFocus:i,onBlur:r,onChange:o,searchDebounceTimeout:l=300,enablePeopleInvite:u=!0})=>{const j=Object(m.c)(),v=Object(n.useRef)({previousQuery:void 0}).current,[{data:E,loading:w},S]=Object(O.a)(t||""),[C,I]=Object(y.a)(s,E,j,e,v.previousQuery,u),[,{openDrawer:T}]=Object(b.c)(),P=Object(n.useMemo)((()=>d()((e=>{e!==v.previousQuery&&S(e),v.previousQuery=e}),l)),[S,l,v.previousQuery]),_=Object(n.useCallback)((e=>{null==i||i(e),
E&&E.length||S()}),[i,E,S]),x=Object(n.useCallback)((e=>{null==r||r(e),v.previousQuery=void 0}),[r,v]),D=Object(n.useCallback)(((e,t)=>{if(!e||Array.isArray(e))return;if(Object(g.b)()&&u&&"__INVITE_PEOPLE_ID__"===e.id)return T("assignee"),void(null==o||o(s,t));const n="__UNASSIGNED_ID__"===e.id?null:E.find((({accountId:t})=>t===e.id))||Object(f.e)(e);null==o||o(n,t)}),[u,o,T,E,s]);return a.a.createElement(p.a,{fieldId:null,placeholder:j.formatMessage(h.a.searchForAssignee),isLoading:w,options:I,target:({ref:e,isOpen:t})=>a.a.createElement(k,{innerRef:e,active:t},a.a.createElement(c.a,{value:s})),value:C,onFocus:_,onBlur:x,onChange:D,onInputChange:P})};w.displayName="AssigneePickerEdit";var S=w;function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function I(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const T=Object(r.a)("assigneePickerEdit",{onChange:"changed"})(S);t.default=e=>{let{issueKey:t,onChange:s,onMount:r}=e,u=I(e,["issueKey","onChange","onMount"]);const[d]=Object(i.a)(t,o.c),[{value:p},{saveValue:m}]=Object(l.a)({issueKey:t}),{autoCompleteUrl:b,isEditable:f=!1}=d||{};Object(n.useEffect)((()=>{null==r||r()}),[]);const g=Object(n.useCallback)(((e,t,n)=>{null==s||s(e,t),m(e,null,n)}),[s,m]);return f?a.a.createElement(T,C({autoCompleteUrl:b,value:p,onChange:g},u)):a.a.createElement(c.a,{value:p})}},"./src/packages/issue/fields/cascading-select-custom-field/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r})),
s.d(t,"c",(function(){return o})),s.d(t,"d",(function(){return c}));var n=s("./node_modules/lodash/memoize.js"),a=s.n(n);const i=e=>{if(!e)return null;const{id:t,value:s,child:n}=e;return{value:t,label:s,child:n&&{value:n.id,label:n.value}}},r=a()((e=>e.map((({id:e,value:t})=>({value:e,label:t}))))),o=a()((e=>e.reduce(((e,{id:t,children:s})=>(e[t]=s?r(s):[],e)),{}))),c=e=>{if(!e)return null;const{label:t,value:s}=e,n=e.child||void 0;return{id:s,value:t,child:n&&{id:n.value,value:n.label}}}},"./src/packages/issue/fields/cascading-select-custom-field/src/ui/cascading-select-view/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/form/dist/es2019/Messages.js"),r=s("./node_modules/@atlaskit/select/dist/es2019/Select.js"),o=s("./src/packages/platform/controllers/intl/src/index.js"),c=s("./src/packages/issue/base-components/base-select/src/ui/styled.js"),l=s("./node_modules/react-intl/lib/index.es.js"),u=Object(l.h)({
noOptionsSelected:{id:"issue-field-cascading-select.cascading-select-view.no-options-selected",defaultMessage:"None"},errorMessage:{id:"issue-field-cascading-select.cascading-select-view.error-message",defaultMessage:"The value could not be saved"}}),d=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const m=d.default.div(["display:flex;flex-direction:",";"],(e=>e.areOptionsOnSameRow?"row":"column")),b=d.default.div(["flex-basis:0;flex-grow:1;"]),f=Object(d.default)(b)(["margin-top:",";margin-left:",";"],(e=>e.areOptionsOnSameRow?0:p.e/2+"px"),(e=>e.areOptionsOnSameRow?p.e/2+"px":0)),g=(e,t)=>!e||0===t.length;function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.a=e=>{const{value:t,allowedValues:s,allowedChildValues:l,onChange:d,isInvalid:p=!1,areOptionsOnSameRow:h=!1,autoFocus:O=!0,onCloseMenuOnScroll:j,isDropdownMenuFixedAndLayered:v}=e,E=Object(o.c)(),[k,w]=(e=>{if(!e)return[null,null];const{label:t,value:s}=e;return[{label:t,value:s},e.child||null]})(t),[S,C]=Object(n.useState)(k),[I,T]=Object(n.useState)(w),[P,_]=Object(n.useState)(k&&l[k.value]||[]),[x,D]=Object(n.useState)(g(t,P)),A=Object(n.useRef)(null)
;return a.a.createElement(a.a.Fragment,null,p&&a.a.createElement(i.a,null,E.formatMessage(u.errorMessage)),a.a.createElement(m,{areOptionsOnSameRow:h},a.a.createElement(b,null,a.a.createElement(r.a,{defaultValue:k,value:S,options:s,onChange:(e,{action:s},n)=>{switch(T(null),s){case"select-option":d(e,null,n),C(e),_(l[e.value]||[]),D(g(t,P)),A&&A.current&&A.current.focus();break;case"clear":d(null,null,n),C(null),_([])}},isClearable:!0,autoFocus:O,openMenuOnFocus:!0,placeholder:E.formatMessage(u.noOptionsSelected),closeMenuOnScroll:j,menuPosition:!0===v?"fixed":void 0,styles:!0===v?c.f:void 0})),P.length>0&&a.a.createElement(f,{areOptionsOnSameRow:h},a.a.createElement(r.a,{defaultValue:w,value:I,options:P,onChange:(e,{action:t},s)=>{switch(t){case"select-option":d(y(y({},S),{},{child:e}),null,s),T(e);break;case"clear":d(S,null,s),T(null)}},isClearable:!0,autoFocus:x,openMenuOnFocus:!0,placeholder:E.formatMessage(u.noOptionsSelected),ref:A,closeMenuOnScroll:j,
menuPosition:!0===v?"fixed":void 0,styles:!0===v?c.f:void 0}))))}},"./src/packages/issue/fields/cascading-select-custom-field/src/ui/main.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),o=s("./src/packages/platform/controllers/intl/src/index.js"),c=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),l=s("./src/packages/issue/fields/components/field-heading/src/styled.js"),u=s("./src/packages/issue/fields/components/field-pin/src/index.js"),d=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js"),p=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),m=s("./src/packages/issue/fields/cascading-select-custom-field/src/common/utils.js"),b=s("./src/packages/issue/fields/cascading-select-custom-field/src/ui/cascading-select-view/main.js"),f=s("./node_modules/react-intl/lib/index.es.js"),g=Object(f.h)({noOptionsSelected:{
id:"issue-field-cascading-select.no-options-selected",defaultMessage:"None"}});const h=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["z-index:300;position:relative;"]);function y(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const O=(e,t)=>e&&e.child?`${e.label} - ${e.child.label}`:e?e.label:t.formatMessage(g.noOptionsSelected),j=e=>{
const{label:t,isEditable:s,isMobile:f,allowedValues:g,areOptionsOnSameRow:j,showPinButton:v,onCloseMenuOnScroll:E,isDropdownMenuFixedAndLayered:k}=e,w=y(e,["label","isEditable","isMobile","allowedValues","areOptionsOnSameRow","showPinButton","onCloseMenuOnScroll","isDropdownMenuFixedAndLayered"]),S=Object(o.c)(),[{value:C,error:I},{saveValue:T}]=Object(c.a)(w),[P,_]=Object(n.useState)(Object(m.a)(C)),[x,D]=Object(n.useState)(Object(m.a)(C)),[A,L]=Object(n.useState)(!1),[M,R]=Object(n.useState)(O(P,S)),[N,F]=Object(n.useState)([]),[U,V]=Object(n.useState)({}),K=Object(n.useCallback)((e=>{R(O(e,S))}),[S]),W=()=>{L(!1),_(x)},B=async e=>{_(e)};return Object(n.useEffect)((()=>{K(P)}),[P,K]),Object(n.useEffect)((()=>{I&&L(!0)}),[I]),Object(n.useEffect)((()=>{_(Object(m.a)(C))}),[C]),a.a.createElement(l.d,null,a.a.createElement(l.b,null,a.a.createElement(l.c,null,t),!0===v&&a.a.createElement(u.a,{fieldId:w.fieldKey,label:t})),a.a.createElement(l.g,{isEditing:A},a.a.createElement(r.a,{
onEscape:W},a.a.createElement(i.a,{isLabelHidden:!0,label:t,readView:(()=>P?a.a.createElement("div",null,M):a.a.createElement(d.b,null,M))(),editView:s?(()=>a.a.createElement(h,null,a.a.createElement(b.a,{value:P,onCloseMenuOnScroll:E,isDropdownMenuFixedAndLayered:k,allowedValues:N,allowedChildValues:U,onChange:B,isInvalid:!!I,areOptionsOnSameRow:j,isEditable:s})))():null,onConfirm:e=>{T(Object(m.d)(P),null,e),L(!1),K(P),Object(p.h)(e,"cascadingSelect",{hasChild:!(!P||!P.child||null==P.child),isEmpty:!P}),D(P)},onCancel:W,onEditRequested:()=>{F(Object(m.b)(g)),V(Object(m.c)(g)),L(!0)},isEditing:A,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!f}))))};j.displayName="CascadingSelectInlineEditView",j.defaultProps={initialValue:null,isMobile:!1,areOptionsOnSameRow:!1,fieldType:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"};t.a=j},"./src/packages/issue/fields/components/error-flag/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),r=s("./src/packages/platform/ui/flags/src/ui/index.js");const o=({error:e,title:t,description:s})=>{if(!e)return null;if(e instanceof i.a){const n=e.message||e.errors&&e.errors[0]&&e.errors[0].error||s;return a.a.createElement(r.a,{flag:{type:"warning",title:t,description:n}})}return a.a.createElement(r.a,{flag:{type:"error",title:t,description:s}})};o.displayName="ErrorFlag"},"./src/packages/issue/fields/components/field-heading/src/styled.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return o})),s.d(t,"d",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"i",(function(){return m})),s.d(t,"c",(function(){return f})),s.d(t,"f",(function(){return g})),s.d(t,"e",(function(){return h})),s.d(t,"b",(function(){return O})),s.d(t,"a",(function(){return j}))
;var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),r=s("./src/packages/issue/fields/components/field-pin/src/styled.js")
;const o=Object(n.keyframes)(["from{opacity:0;}to{opacity:1;}"]),c=Object(n.keyframes)(["from{opacity:1;}to{opacity:0;}"]),l=Object(n.css)(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),u=n.default.div(["display:flex;flex-wrap:wrap;margin-bottom:","px;word-break:break-word;"],2*i.e),d=n.default.div(["& > div > div > div > div > div > div{min-height:","px;}& > div > div > div > div > div > div > div{"," ","}flex-grow:1;width:","%;box-sizing:border-box;"],4*i.e,(e=>e.isEditing?"":`padding: 0 0 0 ${.75*i.e}px;`),(e=>!e.isEditing&&e.fixedHeight?`height: ${4*i.e}px`:""),66.67),p=Object(n.css)(["","{visibility:hidden;animation:"," 0.15s linear forwards;}:hover ","{visibility:visible;animation:"," 0.15s linear forwards;}"],r.a,c,r.a,o),m=Object(n.css)([""," position:relative;flex-grow:1;box-sizing:border-box;padding-right:","px;min-width:","px;width:","%;padding-top:","px;max-width:","px;line-height:1;"],p,3*i.e,15*i.e,33.33,i.e,22.5*i.e),b=Object(n.css)([""," margin-bottom:","px !important;display:flex;align-items:center;"],p,.5*i.e),f=n.default.h2(["box-sizing:border-box;font-weight:500;",";color:",";"],a.d.h200(),a.a.N800),g=n.default.h2(["font-weight:500;",";",";color:",";"],l,a.d.h200(),a.a.N800),h=n.default.div(["",""],b),y=Object(n.css)(["","{display:inline;}","{display:inline;position:absolute;}"],f,r.a),O=n.default.div([""," ",""],m,y),j=n.default.div(["height:","px;margin-left:","px;margin-right:-","px;margin-top:-","px;position:relative;"],3*i.e,.25*i.e,.25*i.e,.5*i.e)
;i.e,i.e},"./src/packages/issue/fields/components/field-pin/src/assets/pin-unfilled.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const r=e=>a.a.createElement("svg",i({},e,{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),a.a.createElement("path",{fill:"currentColor",
d:"M3.58176938,7.87928392 L8.11122851,12.4014141 L8.25734637,12.2555315 L8.18428744,12.1825901 C7.49835823,11.4978426 7.49835823,10.387565 8.18428744,9.70273982 L10.299184,7.5911928 C10.8579797,7.03331193 11.6995968,6.9299201 12.363196,7.28100178 L12.563933,7.08062671 L8.9111421,3.43373045 L8.71048291,3.63410553 C9.06208387,4.29665994 8.95852537,5.13692246 8.39972959,5.6948111 L6.28483307,7.80634258 C5.59890386,8.4911678 4.48684425,8.4911678 3.80093838,7.80634258 L3.72787945,7.73340123 L3.58176938,7.87928392 Z M5.48118484,7.00402665 L7.59615917,4.8924874 C7.83821064,4.65079444 7.83821064,4.25893086 7.59615917,4.01723789 L7.45004131,3.87135521 C7.28867366,3.71023174 7.28867366,3.44898677 7.45004131,3.28785554 L8.61890638,2.12084842 C8.78035183,1.95971719 9.04201017,1.95971719 9.20337782,2.12084842 L13.8789159,6.78887687 C14.0403614,6.9500081 14.0403614,7.21125308 13.8789159,7.37238431 L12.7100508,8.53940696 C12.5486832,8.70051489 12.2870249,8.70051489 12.1255794,8.53940696 L11.9794615,8.39352427 C11.7374101,8.1517847 11.3448837,8.1517847 11.1028322,8.39352427 L8.98785786,10.5050169 C8.74580639,10.7467565 8.74580639,11.1385735 8.98785786,11.380313 L9.5723293,11.9638438 C9.73369695,12.1249517 9.73369695,12.3861889 9.5723293,12.5472968 L8.40346423,13.7143583 C8.24201878,13.8754662 7.98036044,13.8754662 7.81899279,13.7143583 L5.48655339,11.3856729 L2.99050556,13.8776413 C2.91355638,13.9544666 2.80936765,13.9978896 2.70054953,13.9985111 L2.4264735,14 C2.20319639,14.0012299 2.01931974,13.8252074 2.01121246,13.6024217 L2.00027307,13.3019562 C1.99610272,13.1873785 2.03985249,13.0762963 2.12104205,12.9951986 L4.60988514,10.5103768 L2.26677088,8.17104929 C2.10537989,8.00994136 2.10537989,7.74862648 2.26677088,7.58752632 L3.4356593,6.42051921 C3.59705028,6.25938797 3.85870862,6.25938797 4.02009961,6.42051921 L4.60454771,7.00402665 C4.8466303,7.24571961 5.23912559,7.24571961 5.48118484,7.00402665 Z"
}));r.displayName="PinUnfilled",t.a=r},"./src/packages/issue/fields/components/field-pin/src/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return k})),s.d(t,"a",(function(){return w}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/platform/ui/flags/src/services/index.js"),o=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),c=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),l=s("./node_modules/@atlaskit/icon/cjs/index.js"),u=s.n(l),d=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),p=s("./src/packages/platform/controllers/intl/src/index.js");function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const b=e=>a.a.createElement("svg",m({},e,{
xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),a.a.createElement("path",{fill:"currentColor",
d:"M5.48121736,7.00404408 L7.59617451,4.89248498 C7.83826329,4.65078605 7.83826329,4.2589269 7.59617451,4.01722797 L7.45004745,3.8713518 C7.28862892,3.71022438 7.28862892,3.44898234 7.45004745,3.28784713 L8.61890792,2.12084557 C8.78032645,1.95971814 9.04199766,1.95971814 9.20333816,2.12084557 L13.8789361,6.78886738 C14.0403546,6.94999481 14.0403546,7.21123684 13.8789361,7.37239542 L12.7100756,8.53937361 C12.5486571,8.70053219 12.2869859,8.70053219 12.1255674,8.53937361 L11.9795183,8.39348187 C11.7374295,8.15178294 11.3449227,8.15178294 11.102834,8.39348187 L8.9878534,10.5050565 C8.74576463,10.7467555 8.74576463,11.1385523 8.9878534,11.3802512 L9.57236166,11.9638182 C9.73370217,12.1248989 9.73370217,12.3861487 9.57236166,12.5473073 L8.40342317,13.7142855 C8.24208266,13.8754441 7.98041145,13.8754441 7.81899293,13.7142855 L5.48655377,11.3856258 L2.99050379,13.8776251 C2.91356278,13.9544266 2.8093702,13.9978903 2.70055118,13.9985135 L2.42647516,14 C2.20319644,14.0012397 2.01932444,13.8251258 2.0112106,13.6023547 L2.00027253,13.3019252 C1.99610639,13.187346 2.03985869,13.076272 2.12104386,12.9951864 L4.60989281,10.5103532 L2.26677303,8.17102227 C2.10538571,8.00986368 2.10538571,7.74861386 2.26677303,7.58753317 L3.43565691,6.42050825 C3.59705203,6.25938082 3.85871544,6.25938082 4.02010275,6.42050825 L4.6045486,7.00404408 C4.84663737,7.245743 5.23912858,7.245743 5.48121736,7.00404408 Z"
}));b.displayName="PinFilled";var f=b,g=s("./src/packages/issue/fields/components/field-pin/src/assets/pin-unfilled.js"),h=s("./node_modules/react-intl/lib/index.es.js"),y=Object(h.h)({pinField:{id:"issue-field-pin.pin-field",defaultMessage:"Pin to top"},unpinField:{id:"issue-field-pin.unpin-field",defaultMessage:"Unpin"},fieldPinned:{id:"issue-field-pin.field-pinned",defaultMessage:"{fieldLabel} pinned to top."},errorTooManyPinnedTitle:{id:"issue-field-pin.error-too-many-pinned-title",defaultMessage:"Too many pinned fields"},errorTooManyPinnedText:{id:"issue-field-pin.error-too-many-pinned-text",defaultMessage:"You've reached the maximum number of fields you can pin in this project. Please unpin a field first, to pin this field to the top"}}),O=s("./src/packages/issue/fields/components/field-pin/src/styled.js");const j=Object(n.memo)((e=>{const{isPinned:t=!1,onClick:s}=e,{formatMessage:n}=Object(p.c)(),i=n(t?y.unpinField:y.pinField),r=t?f:g.a,o=t?O.b:O.c;return a.a.createElement(O.a,{
"data-test-id":"issue-field-pin.field-pin",onClick:s},a.a.createElement(d.a,{content:i},a.a.createElement(o,{className:"issue-details-pin-icon-wrapper"},a.a.createElement(u.a,{label:i,glyph:r}))))}));j.displayName="FieldPin";var v=j,E=s("./src/packages/issue/fields/components/field-pin/src/utils.js");const k=e=>{const{issueKey:t,fieldId:s,label:n="",contextItemCategories:i}=e,[l,u]=Object(E.e)(t),{createAnalyticsEvent:d}=Object(o.a)(),{showFlag:p}=Object(r.f)();if(!t)return null;const m=Object(E.c)(l,s);return a.a.createElement(v,{onClick:()=>{const e=[...l];let t=-1;m?(t=e.indexOf(s),e.splice(t,1)):e.push(s);const a=u(e);(({isPinned:e,newPinnedFieldLength:t,pinnedFieldPosition:n,setPinSuccess:a,savedFieldIdLength:r})=>{if(void 0===i)return;const{primary:o,secondary:l}=i,u=o.concat(l).findIndex((({id:e})=>e===s)),p=u>=o.length,m={isPinned:e,newPinnedFieldCount:t,totalFieldCount:o.length+l.length,originalPinnedFieldPosition:u,pinnedFieldPosition:n,isUnderShowMore:p,setPinSuccess:a,
savedFieldIdLength:r},b=d({action:"clicked",actionSubject:"button",actionSubjectId:"pinnedFieldButton"});Object(c.h)(b,"pinnedFields",m)})({isPinned:!m,newPinnedFieldLength:e.length,pinnedFieldPosition:m?t:e.indexOf(s),setPinSuccess:a,savedFieldIdLength:Object(E.b)(e).length}),m||p(a?{type:"success",title:[y.fieldPinned,{fieldLabel:n}]}:{title:y.errorTooManyPinnedTitle,description:y.errorTooManyPinnedText,type:"error"})},isPinned:m})};k.displayName="UnconnectedFieldPin";const w=Object(i.connect)((e=>({issueKey:Object(E.d)(e),contextItemCategories:Object(E.a)(e)})),{})(k)},"./src/packages/issue/fields/components/field-pin/src/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const r=n.default.div(["cursor:pointer;margin-left:","px;flex-shrink:0;"],.25*i.e),o=n.default.div(["color:",";&:hover{color:",";}"],a.a.Y300,a.a.Y200),c=n.default.div(["color:",";&:hover{color:",";}"],a.a.N80,a.a.N800)},"./src/packages/issue/fields/components/field-pin/src/utils.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"e",(function(){return b})),s.d(t,"f",(function(){return f}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/issue/user-preferences-services/src/main.js");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const l="jira.user.issue.details.pinned-fields",u=e=>{const t=e.context.issueKey;return Object(i.l)(null!=t?t:"")},d=e=>e.context.contextItemCategories,p=(e,t)=>!(!e||!Array.isArray(e||!t))&&e.includes(t),m=e=>0===e.filter((e=>"string"==typeof e&&""!==e)).length?"null":e.join(","),b=e=>{const t=(e=>e?`${l}.${e}`:l)((e=>Object(i.r)((e||"").split("-")[0]))(e)),[s,n]=Object(r.b)(t);return[(e=>null==e||""===e||"null"===e?[]:e.trim().split(","))(s),e=>{const t=m(e);return e.length>0?!(t.length>255)&&(n.setValue(t),!0):(n.deleteValue(),!0)}]},f=e=>t=>{const{issueKey:s}=t,n=c(t,["issueKey"]),[i]=b(s);return a.a.createElement(e,o({},n,{pinnedFields:i}))}},
"./src/packages/issue/fields/components/inline-edit/src/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),o=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function l(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const u=Object(o.a)("EnterEscapeHandler",{onEnter:"entered",onEscape:"escaped"})(r.a),d=Object(o.a)("EscapeHandler",{onEscape:"escaped"})(r.a),p=e=>{const{actionSubject:t,isEditable:s,isEditing:r=!1,readView:o=null,editView:p=null,onEnter:m,onEscape:b,onConfirm:f,onCancel:g,onEdit:h}=e,y=l(e,["actionSubject","isEditable","isEditing","readView","editView","onEnter","onEscape","onConfirm","onCancel","onEdit"]),O=Object(n.useCallback)(((e,s)=>e.update({action:s,actionSubject:t})),[t]),j=Object(n.useCallback)(((e,t)=>{m&&m(O(t,"entered"))}),[m,O]),v=Object(n.useCallback)(((e,t)=>{b&&b(O(t,"escaped"))}),[b,O]),E=Object(n.useCallback)((e=>{h&&h(O(e,"focused"))}),[h,O]),k=Object(n.useCallback)((e=>{f&&f(O(e,"confirmed"))}),[f,O]),w=Object(n.useCallback)((e=>{g&&g(O(e,"canceled"))}),[g,O]),S=Object(n.useCallback)((()=>null===p?null:m?a.a.createElement(u,{onEnter:j,onEscape:v},p):a.a.createElement(d,{
onEscape:v},p)),[p,m,j,v]);return a.a.createElement("div",null,a.a.createElement(i.a,c({label:"",isEditing:r,readView:o,editView:!0===s?S():null,onConfirm:k,onCancel:w,onEditRequested:E},y)))};p.displayName="FieldInlineEditStateLess",p.defaultProps={actionSubject:"fieldInlineEdit",disableEditViewFieldBase:!0,isEditable:!1,isEditing:!1,isConfirmOnBlurDisabled:!1,isCompact:!0,isLabelHidden:!0,shouldConfirmOnEnter:!0},t.a=Object(n.memo)(p)},"./src/packages/issue/fields/components/timestamp/src/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./node_modules/lodash/noop.js"),l=s.n(c),u=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js")),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),p=s("./src/packages/platform/controllers/intl/src/index.js")
;var m=s("./src/packages/issue/user-preferences-services/src/main.js"),b=s("./src/packages/platform/utils/datetime/src/index.js"),f=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),g=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),h=s("./src/packages/platform/services/user/src/main.js");const y=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.span(["cursor:",";",";",";"],(({canSwitchDisplaySetting:e})=>e?"pointer":"default"),(({extraStyles:e})=>e.always),(({canSwitchDisplaySetting:e,extraStyles:{whenDisplaySettingSwitchable:t}})=>e?t:""));y.displayName="TimestampWrapper";const O=e=>(e=>(Date.now()-new Date(e))/864e5)(e)<8?"RELATIVE":"ABSOLUTE",j=e=>{
const{value:t,extraStyles:s={},timeZone:r,tooltipPosition:c="top"}=e,[{data:j}]=Object(h.b)(),v=j?j.timeZone:void 0,E=(()=>Object(d.b)("issue.details.timezone-refactoring",!1))()?v||Object(b.a)():null!=r?r:Object(b.a)(),k="RELATIVE"===O(t),{createAnalyticsEvent:w}=Object(f.a)(),{formatDate:S}=Object(p.c)(),[C,{setValue:I}]=Object(m.b)("jira.user.issue.details.timestamp-display-setting"),T=o()(C)||""===C?"RELATIVE":C,P=Object(n.useMemo)((()=>S(t,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZone:E})),[S,E,t]),_=Object(n.useCallback)((()=>{const e=w({action:"clicked",actionSubject:"button"});Object(g.h)(e,"absoluteTimeButton"),I("RELATIVE").catch((e=>{d.h.safeErrorWithoutCustomerData("issue.fields.components.timestamp","Failed to set timestamp display to RELATIVE",e)}))}),[w,I]),x=Object(n.useCallback)((()=>{const e=w({action:"clicked",actionSubject:"button"});Object(g.h)(e,"relativeTimeButton"),I("ABSOLUTE").catch((e=>{
d.h.safeErrorWithoutCustomerData("issue.fields.components.timestamp","Failed to set timestamp display to ABSOLUTE",e)}))}),[w,I]),D=Object(n.useCallback)((e=>a.a.createElement(y,{canSwitchDisplaySetting:e,onClick:e?_:l.a,extraStyles:s},P)),[s,P,_]),A=Object(n.useCallback)((()=>a.a.createElement(y,{canSwitchDisplaySetting:!0,onClick:x,extraStyles:s},a.a.createElement(u.a,{tag:"span",content:P,position:c},a.a.createElement(i.e,{value:t})))),[s,P,x,c,t]);return k&&"RELATIVE"===T?A():D(k)};j.displayName="TimestampView";var v=j;t.a=v},"./src/packages/issue/fields/components/user-picker/src/main.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/debounce.js"),r=s.n(i),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsEvents.js"),u=s("./node_modules/@atlaskit/user-picker/dist/es2019/components/UserPicker.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),p=s("./src/packages/invite-people-drawer/src/controllers/index.js"),m=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jira-feature-flag-client.js");const f=()=>Object(b.a)().getVariantValue("invite.from.assign",{default:"not-enrolled",oneOf:["control","not-enrolled","variation"],shouldTrackExposureEvent:!1}),g=()=>"variation"===f();function h(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){j(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const v={id:"USER_PICKER_EMPTY",name:""
},E=(e,t)=>null!=e&&(null==t||""===t||e.toLowerCase().includes(t.toLowerCase()));class k extends n.Component{constructor(...e){super(...e),this.state={suggestions:[],isDropdownVisible:!0,wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1,query:null},this.wasUnmounted=!1,this.invitePeopleExposeEventFired=!1,this.onChange=e=>{if(!e||Array.isArray(e)||this.isCurrentValue(e))return;const t=e.id,s=this.props.initialOptions.find((e=>e.id===t));s?this.props.onChange(s.id?s:null):"USER_PICKER_EMPTY"===t?this.props.onChange(null):g()&&!0===this.props.enablePeopleInvite&&"__INVITE_PEOPLE_ID__"===t?Object(p.b)("assignee",{createAnalyticsEvent:this.props.createAnalyticsEvent}):this.props.onChange(e)},this.onSuggestionSelect=(e,t)=>{this.setState({suggestions:[],wasFocused:!1,isLoading:!1,wasCleared:!1,wasQueryCleared:!1}),this.onChange(Array.isArray(e)?null:e),this.props.onSelection(t)},this.onBlur=()=>{this.setState({suggestions:[],isDropdownVisible:!1,wasFocused:!1,isLoading:!1,
wasQueryCleared:!1}),this.state.wasCleared?this.onSuggestionSelect(v):this.props.onCancel()},this.onFocus=e=>{this.setState({isDropdownVisible:!0,isLoading:!0,wasFocused:!0,wasCleared:!1}),this.requestSuggestions(e)},this.onQueryChange=(e,t)=>{this.setState({wasFocused:!1,isLoading:!0,query:e||"",wasQueryCleared:!e}),this.debouncedRequestSuggestion(t)},this.onClear=()=>{this.setState({wasCleared:!0}),this.onChange(v)},this.getEmptyValue=()=>this.props.emptyOption?O(O({},this.props.emptyOption),{},{id:"USER_PICKER_EMPTY"}):null,this.getInvitePeopleValue=()=>this.props.invitePeopleOption?O(O({},this.props.invitePeopleOption),{},{id:"__INVITE_PEOPLE_ID__"}):null,this.getInitialAndEmptyOptionSuggestions=()=>{const{initialOptions:e,emptyOption:t}=this.props,{wasFocused:s,wasQueryCleared:n}=this.state,a=s&&e.length>0,i=t&&!a&&n,r=this.getEmptyValue();return[...a?e:[],...!0===i&&r?[r]:[]]},this.debouncedRequestSuggestion=r()((e=>this.requestSuggestions(e)),300),this.requestSuggestions=e=>{
const{onDataRequest:t,fetchSuggestions:s}=this.props,{query:n}=this.state;t(null===n);const a=n||"";return s(a,e).then((e=>this.handleSuggestions(e,a))).catch((()=>[]))},this.isMatchingQuery=e=>{const{query:t,isLoading:s}=this.state,{displayName:n,name:a}=e;return!s||E(n,t)||E(a,t)},this.getSuggestions=()=>{const{createAnalyticsEvent:e,enablePeopleInvite:t,fieldId:s}=this.props,{query:n,isLoading:a}=this.state,i=n||"",r=this.getInitialAndEmptyOptionSuggestions(),o=r.map((e=>e.id)),c=this.state.suggestions.filter((e=>!o.includes(e.id)&&this.isMatchingQuery(e))),l=[...r,...c],u=this.getInvitePeopleValue(),p=[];return!a&&!0===t&&u&&i&&l.length<=2&&(this.invitePeopleExposeEventFired||(((e,t,s)=>{if(null==e)return;const n=e({action:"exposed",actionSubject:"feature"}),a={fieldId:t,flagKey:"invite.from.assign",value:f(),userRole:"true"===Object(d.d)("ajs-is-admin")?"admin":"basic",suggestionsCount:s,source:"assigneeField"};Object(m.b)(n,"feature exposed",a)})(e,s,l.length),
this.invitePeopleExposeEventFired=!0),g()&&(((e,t,s)=>{if(null==e)return;const n=e({action:"rendered",actionSubject:"inviteItem"}),a={fieldId:t,userRole:"true"===Object(d.d)("ajs-is-admin")?"admin":"basic",suggestionsCount:s,source:"assigneeField"};Object(m.h)(n,"inviteItem rendered",a)})(e,s,l.length),p.push(u))),[...l,...p].map((e=>{const{displayName:t}=e,s=h(e,["displayName"]);return t?O(O({},s),{},{publicName:t}):s}))},this.handleSuggestions=(e,t)=>{const{isDropdownVisible:s,query:n}=this.state,a=t===(n||"");if(this.wasUnmounted||!s||!a)return;const i=this.state.wasFocused?e.filter((e=>!this.isCurrentValue(e))):e;this.setState({isLoading:!1,suggestions:i}),this.props.onDataLoaded(null===n,i.length)}}componentWillUnmount(){this.wasUnmounted=!0,this.debouncedRequestSuggestion.cancel()}isCurrentValue(e){return e?this.props.value?e.id===this.props.value.id:"USER_PICKER_EMPTY"===e.id:null===this.props.value}render(){const e=this.getSuggestions(),t=this.props.value||this.getEmptyValue()
;return a.a.createElement(u.a,{value:t,options:e,open:this.state.isDropdownVisible,fieldId:this.props.fieldId,menuMinWidth:this.props.menuMinWidth,menuPortalTarget:this.props.portalElement,width:this.props.width,appearance:"compact",isClearable:!!this.props.value,isDisabled:this.props.isDisabled,placeholder:this.props.placeholder,isLoading:this.state.isLoading&&this.state.isDropdownVisible,onBlur:this.onBlur,onClear:this.onClear,onFocus:this.onFocus,onInputChange:this.onQueryChange,onSelection:this.onSuggestionSelect})}}k.displayName="UserPickerView",k.displayName="UserPickerView",k.defaultProps={isDisabled:!1,value:null,initialOptions:[],emptyOption:null,invitePeopleOption:null,enablePeopleInvite:!1,width:void 0,menuMinWidth:void 0,portalElement:void 0,fetchSuggestions:()=>Promise.resolve([]),onChange:c.a,onCancel:c.a,onSelection:c.a,onDataRequest:c.a,onDataLoaded:c.a};t.a=Object(l.a)()(k)},
"./src/packages/issue/fields/date-time-custom-field/src/services/use-date-time-field/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));s("./node_modules/react/index.js"),s("./node_modules/react-magnetic-di/lib/esm/index.js");var n=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),a=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const i=({issueKey:e,fieldKey:t,onSuccess:s})=>{var i;const[r]=Object(n.a)(e,t),o=null!==(i=null==r?void 0:r.schema.type)&&void 0!==i?i:"datetime",[{loading:c,value:l,error:u},{saveValue:d,resetError:p}]=Object(a.a)({fieldKey:t,issueKey:e,fieldType:o,initialValue:null,onSuccess:s});return[{loading:c,value:l,error:u,fieldConfig:r},{saveValue:d,resetError:p}]}},"./src/packages/issue/fields/date-time-custom-field/src/ui/edit/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,"DateTimeFieldEditView",(function(){return g}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/isNaN.js"),r=s.n(i),o=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./node_modules/@atlaskit/datetime-picker/dist/es2019/components/DateTimePicker.js")),c=s("./src/packages/platform/utils/constants/src/datetimepicker-available-times.js"),l=s("./src/packages/compatibility/src/main.js"),u=s("./src/packages/issue/format-date/src/common/utils.js"),d=s("./src/packages/platform/services/user-current/src/main.js"),p=s("./src/packages/platform/controllers/tenant-context/src/components/locale/index.js"),m=s("./node_modules/moment-timezone/index.js"),b=s.n(m);const f=(e,t,s,n)=>{const a=b.a.tz(e,n);return a.isValid()&&null!=e&&""!==e?{dateValue:a.format("YYYY-MM-DD"),timeValue:a.format("HH:mm"),zoneValue:a.format("ZZ")}:{dateValue:t,timeValue:s,zoneValue:b()().tz(n).format("ZZ")}},g=({autoFocus:e,isDisabled:t,isInvalid:s,timeZone:i,onParseValue:m=f,value:b,onChange:g,datePickerSelectProps:h={}})=>{
const y=Object(p.a)(),{data:{user:{timeZone:O=null}}}=Object(d.b)(),j=void 0!==i?i:O,v=Object(n.useCallback)((e=>{const t=Object(l.a)(null!=e?e:"");r()(Date.parse(t))?null==g||g(null):null==g||g(t)}),[g]),E=Object(n.useCallback)(((e,t,s,n)=>m(e,t,s,null!=j?j:n)),[m,j]),k=Object(u.a)(y);return a.a.createElement(o.a,{locale:k,autoFocus:e,defaultIsOpen:!1,isDisabled:t,isInvalid:s,value:b||"",onChange:v,timeIsEditable:!0,parseValue:null!=j?E:void 0,timePickerSelectProps:{formatCreateLabel:e=>e,filterOption:(e,t)=>!t||e.value===t||e.label===t},times:c.a,datePickerSelectProps:h})};g.displayName="DateTimeFieldEditView"},"./src/packages/issue/fields/date-time-custom-field/src/ui/main.js":function(e,t,s){"use strict";s.r(t),s.d(t,"ACTION_SUBJECT",(function(){return g})),s.d(t,"DateTimeField",(function(){return h}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/utils/types/src/general.js")),r=s("./src/packages/issue/fields/components/error-flag/src/main.js"),o=s("./src/packages/issue/fields/components/inline-edit/src/main.js"),c=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),l=s("./src/packages/issue/fields/date-time-custom-field/src/services/use-date-time-field/index.js"),u=s("./src/packages/issue/fields/date-time-custom-field/src/ui/edit/index.js"),d=s("./node_modules/react-intl/lib/index.es.js"),p=Object(d.h)({errorTitle:{id:"issue-field-date-time.error-title",defaultMessage:"We couldn't set the date"},errorMessage:{id:"issue-field-date-time.error-message",defaultMessage:"Check your connection, then give it another try."}}),m=s("./src/packages/issue/fields/date-time-custom-field/src/ui/view/index.js");function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const g="dateTimeFieldInlineEdit",h=e=>{var t;let{fieldKey:s,issueKey:d,timeZone:h,isEditing:y,onFormatDateTime:O,onParseValue:j,onCancel:v,onEdit:E,onEscape:k,onConfirm:w,onEnter:S,onUpdate:C,readView:I,editView:T,noValueText:P}=e,_=f(e,["fieldKey","issueKey","timeZone","isEditing","onFormatDateTime","onParseValue","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText"]);const[x,D]=Object(n.useState)(!1),A=Object(n.useCallback)((e=>{null==C||C(e),D(!1)
}),[C]),[{value:L,error:M,fieldConfig:R},{saveValue:N,resetError:F}]=Object(l.a)({issueKey:Object(i.l)(d),fieldKey:s,onSuccess:A}),[U,V]=Object(n.useState)(L),K=null!==(t=null==R?void 0:R.isEditable)&&void 0!==t&&t;Object(n.useEffect)((()=>{M&&D(!0),x||V(L)}),[M,x,L]);const W=Object(n.useCallback)((e=>{U!==L?N(U,null,e):D(!1),Object(c.h)(e)}),[N,U,L]),B=Object(n.useCallback)((e=>{F(),D(!1),V(L),Object(c.h)(e)}),[F,L]),H=Object(n.useCallback)((e=>{B(e),null==v||v(e)}),[v,B]),$=Object(n.useCallback)((e=>{W(e),null==w||w(e)}),[w,W]),G=Object(n.useCallback)((e=>{D(!0),Object(c.h)(e),null==E||E(e)}),[E]),q=Object(n.useCallback)((e=>{B(e),null==k||k(e)}),[k,B]),z=Object(n.useCallback)((e=>{F(),V(e)}),[F,V]);return a.a.createElement(a.a.Fragment,null,null!=M&&a.a.createElement(r.a,{error:M,title:p.errorTitle,description:p.errorMessage}),a.a.createElement(o.a,b({areActionButtonsHidden:!0,actionSubject:g,isEditable:K,isEditing:null!=y?y:x,
readView:(()=>void 0!==I?I:a.a.createElement(m.DateTimeFieldReadView,{timeZone:h,value:L,noValueText:P,onFormatDateTime:O}))(),editView:K?(()=>void 0!==T?T:a.a.createElement(u.DateTimeFieldEditView,{value:U,onChange:z,isInvalid:!!M,onParseValue:j,timeZone:h}))():null,onCancel:H,onConfirm:$,onEdit:G,onEscape:q},_)))}},"./src/packages/issue/fields/date-time-custom-field/src/ui/view/index.js":function(e,t,s){"use strict";s.r(t),s.d(t,"DateTimeFieldReadView",(function(){return p}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/controllers/intl/src/index.js")),r=s("./src/packages/issue/format-date/src/main.js"),o=s("./node_modules/react-intl/lib/index.es.js"),c=Object(o.h)({defaultNoValueText:{id:"issue-field-date-time.default-no-value-text",defaultMessage:"None"}}),l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),u=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const d=l.default.span(["color:",";"],u.a.N200),p=({timeZone:e,value:t,noValueText:s,onFormatDateTime:n})=>{const{formatMessage:o}=Object(i.c)(),{formatDateTime:l}=Object(r.a)(e);return null==t||""===t?a.a.createElement(d,null,null!=s?s:o(c.defaultNoValueText)):n?n(t):l(t)}},"./src/packages/issue/fields/date/src/ui/view/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/controllers/intl/src/index.js")),r=s("./src/packages/issue/format-date/src/main.js"),o=s("./node_modules/react-intl/lib/index.es.js"),c=Object(o.h)({defaultNoValueText:{id:"issue-field-date.default-no-value-text",defaultMessage:"None"}}),l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),u=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const d=l.default.span(["color:",";"],u.a.N200),p=({value:e,noValueText:t,onFormatDate:s})=>{
const{formatMessage:n}=Object(i.c)(),{formatDateOnly:o}=Object(r.a)();return null==e||""===e?a.a.createElement(d,null,null!=t?t:n(c.defaultNoValueText)):s?s(e):o(e)}},"./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return E}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/noop.js"),i=s.n(a),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),c=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),l=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),u=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js");const d=()=>Object(o.b)("jsw.nextgen.search-field.changeboarding-board",!1),p=()=>Object(o.b)("jsw.nextgen.search-field.changeboarding",!1)
;var m=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),b=s("./src/packages/platform/observability/browser-metrics/src/index.js"),f=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const g=(e,t)=>({fields:{[e]:t}}),h=async(e,t,s,n)=>Object(f.e)(`${n}/rest/api/3/issue/${e}/`,{body:JSON.stringify(g(t,s))}),y=async(e,t,s,n)=>{const a={update:{[t]:[{operation:"add",value:s}]}};return Object(f.e)(`${n}/rest/api/3/issue/${e}/`,{body:JSON.stringify(a)})},O=async(e,t,s,n)=>{const a={update:{[t]:[{operation:"remove",value:s}]}};return Object(f.e)(`${n}/rest/api/3/issue/${e}/`,{body:JSON.stringify(a)})},j=(e,t)=>{const s=Object(b.b)(),n={key:"issue-field.save-value",reporters:[()=>({fieldKey:e,fieldType:t})]};return s.start(n),{stop:()=>s.stop(n),cancel:()=>s.cancel(n.key)}},v=()=>Promise.resolve(),E=e=>{
const t=Object(u.a)(),{issueKey:s,fieldKey:a,fieldType:b,initialValue:f,saveField:g=h,addValuesToField:E=y,removeValuesFromField:k=O,onSubmit:w=i.a,onSuccess:S=i.a,onFailure:C=i.a}=e,[I,{setFieldValue:T}]=Object(m.b)({issueKey:s,fieldKey:a}),P=void 0!==I?I:f,[_,x]=Object(n.useState)(null),[D,A]=Object(n.useState)(!1),L=Object(n.useCallback)((()=>x(null)),[x]);if((()=>Object(o.b)("jira-use-edit-field-refactor",!1))()){const e=Object(n.useCallback)((async(e,n,i,u,m,f)=>{const g={editOperationType:n,fieldKey:a,fieldType:b,isBoardSearchFieldChangeboardingEnabled:d(),isBacklogSearchFieldChangeboardingEnabled:p()},h=j(Object(o.i)(a)(a),Object(o.i)(b)(b));A(!0),x(null);try{w(P,i,m,f),T(s,a,u),await e(s,a,i,t),S(i),h.stop(),Object(l.f)(f,"field updated",g),Object(l.b)(f,"field updateSucceeded",g)}catch(y){C(y,i),T(s,a,P),x(y);const e=y instanceof c.a;e||o.h.safeErrorWithoutCustomerData("issue-field.save-value",`Failed to update field ${a} of type ${b}`,new r.a({event:y,type:"update",
category:"issue",app:"issue-field",eventNameSuffix:"issue.error"})),h.cancel(),Object(l.b)(f,"field updateFailed",{fieldKey:a,fieldType:b,isValidationError:e,isClientFetchError:Object(c.c)(y)})}A(!1)}),[a,b,w,P,T,s,t,S,C]),i=Object(n.useCallback)((async(t,s,n)=>{await e(g,"set",t,t,s,n)}),[e,g]),u=Object(n.useCallback)((async(t,s,n,a)=>{await e(E,"add",t,s,n,a)}),[e,E]),m=Object(n.useCallback)((async(t,s,n,a)=>{await e(k,"remove",t,s,n,a)}),[e,k]);return[{value:P,loading:D,error:_},{saveValue:i,addValues:u,removeValues:m,resetError:L}]}const M=Object(n.useCallback)((async(e,n,i)=>{const u={fieldKey:a,fieldType:b,isBoardSearchFieldChangeboardingEnabled:d(),isBacklogSearchFieldChangeboardingEnabled:p()},m=j(Object(o.i)(a)(a),Object(o.i)(b)(b));A(!0),x(null);try{w(P,e,n,i),T(s,a,e),await g(s,a,e,t),S(e),m.stop(),Object(l.f)(i,"field updated",u),Object(l.b)(i,"field updateSucceeded",u)}catch(f){C(f,e),T(s,a,P),x(f);const t=f instanceof c.a
;t||o.h.safeErrorWithoutCustomerData("issue-field.save-value",`Failed to update field ${a} of type ${b}`,new r.a({event:f,type:"update",category:"issue",app:"issue-field",eventNameSuffix:"issue.error"})),m.cancel(),Object(l.b)(i,"field updateFailed",{fieldKey:a,fieldType:b,isValidationError:t,isClientFetchError:Object(c.c)(f)})}A(!1)}),[a,b,w,P,T,s,g,t,S,C]);return[{value:P,loading:D,error:_},{saveValue:M,addValues:v,removeValues:v,resetError:L}]}},"./src/packages/issue/fields/field-base/src/services/field-config-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return C})),s.d(t,"b",(function(){return I})),s.d(t,"c",(function(){return T}))
;var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),i=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),r=s("./node_modules/reselect/lib/index.js"),o=s("./node_modules/lodash/merge.js"),c=s.n(o),l=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),u=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}
function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b={setIssueConfig:(e,t)=>({setState:s})=>{s({[e]:t})},setIssuesConfig:e=>({setState:t})=>{t(e.reduce(((e,t)=>p(p({},e),t)),{}))},mergeIssueConfig:(e,t)=>({setState:s,getState:n})=>{s({[e]:c()({},n()[e],t)})},mergeIssuesConfig:e=>({setState:t,getState:s})=>{const n=e.reduce(((e,t)=>p(p({},e),t)),{});t(c()({},s(),n))}},f=Object(l.a)({name:"issue-field-config",initialState:{},actions:b}),g=Object(r.createSelector)(((e,t)=>e[t.issueKey]),(e=>e)),h=Object(u.a)(f,{selector:g}),y=Object(r.createSelector)(((e,t)=>e[t.issueKey]),((e,t)=>t.fieldKey),((e,t)=>null==e?e:e[t]?e[t]:null)),O=Object(u.a)(f,{selector:y}),j=Object(u.a)(f,{selector:null});function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}
function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=()=>'\n  query fieldConfigurationQuery($issueKey: String) {\n    issue(issueIdOrKey: $issueKey, latestVersion: true, screen: "view") {\n      fields {\n        key\n        schema {\n          type\n          custom\n          customId\n          system\n          renderer\n        }\n        autoCompleteUrl\n        allowedValues\n        operations\n        required\n        editable\n        title\n      }\n    }\n  }',S=async(e,t)=>{const s=await Object(a.d)(`${t}/rest/graphql/1/`,{body:JSON.stringify({
query:w(),variables:{issueKey:e}})});return s&&s.data&&s.data.issue&&s.data.issue.fields?s.data.issue.fields.reduce(((e,t)=>E(E({},e),{},{[t.key]:{autoCompleteUrl:t.autoCompleteUrl,allowedValues:t.allowedValues,isEditable:t.editable,isRequired:t.required,schema:t.schema,title:t.title}})),{}):null},C=(()=>{const e=new Set;return(t,s)=>{const[a,{setIssueConfig:r}]=O({issueKey:t,fieldKey:s}),o=Object(i.a)(),c=Object(n.useCallback)((async()=>{e.add(t);const s=await S(t,o);r(t,s),e.delete(t)}),[o,t,r]);return Object(n.useEffect)((()=>{void 0!==a||e.has(t)||c()}),[t,a,c]),[a]}})(),I=()=>{const[,e]=j();return[null,Object(n.useMemo)((()=>({setIssueConfig:(t,s)=>e.setIssueConfig(t,s),setIssuesConfig:t=>e.setIssuesConfig(t),mergeIssueConfig:(t,s)=>e.mergeIssueConfig(t,s),mergeIssuesConfig:t=>e.mergeIssuesConfig(t)})),[e])]},T=(()=>{const e=new Set;return t=>{const[s,{setIssueConfig:a}]=h({issueKey:t}),r=Object(i.a)(),o=Object(n.useCallback)((async()=>{e.add(t);const s=await S(t,r);a(t,s),
e.delete(t)}),[r,t,a]);return Object(n.useEffect)((()=>{void 0===s&&o()}),[t,s,o]),[s]}})()},"./src/packages/issue/fields/field-base/src/services/field-value-service/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return f})),s.d(t,"d",(function(){return g})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return y})),s.d(t,"e",(function(){return j}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/merge.js"),i=s.n(a),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),c=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p={setFieldValue:(e,t,s)=>({setState:n,getState:a})=>{n({[e]:u(u({},a()[e]),{},{[t]:s})})},getFieldValue:(e,t)=>({getState:s})=>s()[e]&&s()[e][t],setIssue:(e,t)=>({setState:s})=>{s({[e]:t})},mergeIssue:(e,t)=>({setState:s,getState:n})=>{s({[e]:i()({},n()[e],t)})},setIssues:e=>({setState:t})=>{const s={};e.forEach((e=>{Object.assign(s,e)})),t(s)},mergeIssues:e=>({setState:t,getState:s})=>{const n={};e.forEach((e=>{Object.assign(n,e)})),t(i()({},s(),n))}},m=Object(r.a)({name:"issue-fields",initialState:{},actions:p}),b=(e,{issueKey:t,fieldKey:s})=>e[t]&&e[t][s],f=Object(o.a)(m,{selector:b
}),g=Object(o.a)(m,{selector:(e,t)=>e[t]}),h=Object(o.a)(m,{selector:(e,{issueKeys:t,fieldKey:s})=>(t||[]).map((t=>b(e,{fieldKey:s,issueKey:t})))}),y=Object(c.a)(m,{selector:b}),O=Object(o.a)(m,{selector:null}),j=()=>{const[,e]=O();return[null,Object(n.useMemo)((()=>({setIssue:(t,s)=>e.setIssue(t,s),setFieldValue:(t,s,n)=>e.setFieldValue(t,s,n),getFieldValue:(t,s)=>e.getFieldValue(t,s),mergeIssue:(t,s)=>e.mergeIssue(t,s),setIssues:t=>e.setIssues(t),mergeIssues:t=>e.mergeIssues(t)})),[e])]}},"./src/packages/issue/fields/labels/src/ui/edit/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/debounce.js"),r=s.n(i),o=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/select/dist/es2019/CreatableSelect.js")),c=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),l=s("./src/packages/platform/controllers/intl/src/index.js"),u=s("./src/packages/issue/base-components/base-select/src/ui/styled.js"),d=s("./src/packages/issue/base-components/base-select/src/ui/utils.js"),p=s("./node_modules/react-intl/lib/index.es.js"),m=Object(p.h)({empty:{id:"issue-field-labels.edit.empty",defaultMessage:"No matches found"},failedFetch:{id:"issue-field-labels.edit.failed-fetch",defaultMessage:"Search failed. Please try again."},placeholder:{id:"issue-field-labels.edit.placeholder",defaultMessage:"Select label"},createNewItem:{id:"issue-field-labels.edit.create-new-item",defaultMessage:"New label"},loading:{id:"issue-field-labels.edit.loading",defaultMessage:"Searching..."},recent:{id:"issue-field-labels.edit.recent",defaultMessage:"Recent labels"},all:{id:"issue-field-labels.edit.all",defaultMessage:"All labels"}});const b=e=>{
const[t,s]=Object(n.useState)(!1),[i,p]=Object(n.useState)(!1),[b,f]=Object(n.useState)(),[g,h]=Object(n.useState)(),[y,O]=Object(n.useState)(!1),{formatMessage:j}=Object(l.c)(),v=Object(n.useRef)(""),{fetchSuggestionsOnMount:E=!0,autoCompleteUrl:k,autoFocus:w,onChange:S,onFocus:C,onBlur:I,spacing:T,value:P,options:_,cachedOptions:x=[],formatCreateLabel:D,noOptionsMessage:A,loadingMessage:L,onCloseMenuOnScroll:M,isDropdownMenuFixedAndLayered:R,isInvalid:N=!1}=e,F=Object(n.useCallback)(((e,t)=>{if(v.current===t){const s=e.suggestions?e.suggestions.map((e=>({label:e.label,value:e.label}))):[];f(s),""===t&&h(s)}}),[]),U=Object(n.useCallback)((()=>a.a.createElement(u.b,null,j(m.failedFetch))),[j]),V=Object(n.useCallback)((async(e="")=>{try{const t=await Object(c.b)(`${k}${e}`);s(!1),F(t,e)}catch(t){s(!1),O(!0),f([{label:U(),value:"",isDisabled:!0}])}}),[k,U,F]);Object(n.useMemo)((()=>{E&&(_||g?_&&!g?(h(_),f(_)):(v.current="",s(!0),V()):(s(!0),V()))}),[]);const K=Object(n.useMemo)((()=>[{
label:j(m.recent),options:x},{label:j(m.all),options:b||[]}]),[x,j,b]),W=Object(n.useCallback)(r()(V,300),[]),B=Object(n.useCallback)((e=>`${e} (${void 0!==D?D:j(m.createNewItem)})`),[D,j]),H=Object(n.useCallback)((()=>void 0!==A?A:j(m.empty)),[j,A]),$=Object(n.useCallback)((()=>void 0!==L?L:j(m.loading)),[j,L]),G=Object(n.useCallback)(((e,t)=>!!y||Object(d.a)(e,t||"")),[y]),q=Object(n.useCallback)((e=>{W.cancel(),O(!1),e?(v.current=e,s(!0),W(e)):(v.current="",s(!1),f(g))}),[W,g]),z=Object(n.useCallback)((e=>{p(!0),!1===E&&(s(!0),V("")),C&&C(e)}),[E,C,V]),Y=Object(n.useCallback)((e=>{p(!1),I&&I(e)}),[I]);return a.a.createElement(o.a,{isMulti:!0,autoFocus:w,options:K,value:P,menuIsOpen:i,onBlur:Y,menuPosition:!0===R?"fixed":void 0,styles:!0===R?u.f:void 0,onFocus:z,noOptionsMessage:H,closeMenuOnScroll:M,loadingMessage:$,placeholder:j(m.placeholder),onInputChange:q,onChange:S,spacing:T,isLoading:i&&t,filterOption:G,formatCreateLabel:B,validationState:!0===N?"error":null})}
;b.displayName="LabelsEdit";t.a=b},"./src/packages/issue/fields/labels/src/ui/edit/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>e.map((({value:e})=>e)),a=e=>e?e.map((e=>({value:e,label:e}))):[]},"./src/packages/issue/fields/message-custom-field/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,fieldKey:t})=>{const[s]=Object(i.a)(e,t),n=a()(s,"schema.type","string"),[{value:o,error:c}]=Object(r.a)({fieldKey:t,issueKey:e,fieldType:n,initialValue:null});return[{value:o,error:c,fieldConfig:s}]}},"./src/packages/issue/fields/number/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}))
;var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,fieldKey:t,onSuccess:s,onFailure:n})=>{const[o]=Object(i.a)(e,t),c=a()(o,"schema.type","number"),[{value:l,error:u},{saveValue:d,resetError:p}]=Object(r.a)({fieldKey:t,issueKey:e,fieldType:c,initialValue:null,onSuccess:s,onFailure:n});return[{value:l,error:u,fieldConfig:o},{saveValue:d,resetError:p}]}},"./src/packages/issue/fields/number/src/ui/async.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-async-component/commonjs/index.js"),r=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),o=s("./src/packages/platform/ui/error-boundary/src/main.js"),c=s("./src/packages/issue/fields/number/src/ui/view/main.js");Object(i.asyncComponent)({
resolve:()=>s.e("async-number-inline-edit-view").then(s.bind(null,"./src/packages/issue/fields/number/src/ui/main.js")),name:"AsyncIssueNumberField",LoadingComponent:c.a,ErrorComponent:c.a});const l=({children:e,fallback:t,packageName:s,onError:n})=>a.a.createElement(o.a,{id:"issue-number-field",packageName:s,render:()=>t,onError:n},a.a.createElement(r.a,{fallback:t},e));l.displayName="IssueNumberFieldBoundary"},"./src/packages/issue/fields/number/src/ui/main.js":function(e,t,s){"use strict";s.r(t),s.d(t,"actionSubject",(function(){return w}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/get.js"),r=s.n(i),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/issue/fields/components/error-flag/src/main.js"),l=s("./src/packages/issue/fields/components/inline-edit/src/main.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),d=s("./src/packages/issue/fields/number/src/services/index.js"),p=s("./node_modules/@atlaskit/field-text/FieldTextStateless.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const f=m.default.div(["width:","px;cursor:auto;"],8.5*b.e);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{}
;var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const y=Object(n.memo)((e=>{const{isInvalid:t=!1,type:s,defaultValue:n}=e,i=h(e,["isInvalid","type","defaultValue"]),r=null===n?"":Number(n);return a.a.createElement(f,null,a.a.createElement(p.a,g({appearance:"subtle",autoFocus:!0,compact:!0,isLabelHidden:!0,isInvalid:t,shouldFitContainer:!0,type:s,value:r},i)))}));var O=s("./node_modules/react-intl/lib/index.es.js"),j=Object(O.h)({errorTitle:{id:"issue-field-number.error-title",defaultMessage:"We couldn't set the story point value"},errorMessage:{id:"issue-field-number.error-message",defaultMessage:"Check your connection, then give it another try."}
}),v=s("./src/packages/issue/fields/number/src/ui/view/main.js");function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function k(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const w="numberInlineEdit";t.default=Object(n.memo)((e=>{
const{fieldKey:t,issueKey:s,onCancel:i,onEdit:p,onEscape:m,onConfirm:b,onEnter:f,onUpdate:g,readView:h,editView:O,noValueText:S,onMount:C}=e,I=k(e,["fieldKey","issueKey","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText","onMount"]),[T,P]=Object(n.useState)(!1),[{value:_,error:x,fieldConfig:D},{saveValue:A,resetError:L}]=Object(d.a)({issueKey:Object(o.l)(s),fieldKey:t,onSuccess:e=>{g&&g(e),P(!1)}}),M=r()(D,"schema.type","number"),[R,N]=Object(n.useState)(_),F=!!D&&D.isEditable;Object(n.useEffect)((()=>{x&&P(!0),T||N(_)}),[x,T,_]),Object(n.useEffect)((()=>{null==C||C()}),[]);const U=Object(n.useCallback)((e=>{R!==_?A(R,null,e):P(!1),Object(u.h)(e)}),[A,R,_]),V=Object(n.useCallback)((e=>{L(),P(!1),N(_),Object(u.h)(e)}),[L,_]),K=Object(n.useCallback)((e=>{V(e),i&&i(e)}),[i,V]),W=Object(n.useCallback)((e=>{U(e),b&&b(e)}),[b,U]),B=Object(n.useCallback)((e=>{P(!0),Object(u.h)(e),p&&p(e)}),[p]),H=Object(n.useCallback)((e=>{V(e),m&&m(e)
}),[m,V]),$=Object(n.useCallback)((e=>{U(e),f&&f(e)}),[f,U]),G=Object(n.useCallback)((e=>{L();const t=""===e.target.value?null:parseFloat(Number(e.target.value).toFixed(3));N(t)}),[L,N]);return a.a.createElement(a.a.Fragment,null,x&&a.a.createElement(c.a,{error:x,title:j.errorTitle,description:j.errorMessage}),a.a.createElement(l.a,E({actionSubject:w,isEditable:F,isEditing:T,readView:(()=>void 0!==h?h:a.a.createElement(v.a,{isEditable:F,value:_}))(),editView:F?(()=>void 0!==O?O:a.a.createElement(y,{defaultValue:R,onChange:G,type:M,isInvalid:!!x}))():null,onCancel:K,onConfirm:W,onEdit:B,onEscape:H,onEnter:$},I)))}))},"./src/packages/issue/fields/number/src/ui/view/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const c=r.default.div(["cursor:pointer;&:hover > span{color:",";background-color:",";}"],o.a.N800,o.a.N90),l=r.default.div(["border:2px solid transparent;"]),u=({isEditable:e,value:t})=>{if(void 0===t)return null;const s=null===t?"-":t.toString(),n=a.a.createElement(i.a,null,s),r=e?a.a.createElement(c,null,n):n;return a.a.createElement(l,null,r)};u.displayName="NumberView"},"./src/packages/issue/fields/original-estimate/src/ui/view/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js");const r=({value:e})=>a.a.createElement(i.a,null,e);r.displayName="OriginalEstimateView",t.a=r},"./src/packages/issue/fields/resolution/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=e=>({id:e.value,name:e.label}),a=e=>({value:e.id,label:e.name
}),i=(e,t)=>e?t.reduce(((t,s)=>(s.id!==e.id&&t.push(a(s)),t)),[]):(e=>e.map((e=>a(e))))(t)},"./src/packages/issue/fields/resolution/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return P}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/ui/flags/src/services/index.js")),r=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),o=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),c=s("./src/packages/issue/fields/resolution/src/common/utils.js"),l=s("./node_modules/react-intl/lib/index.es.js"),u=Object(l.h)({editResolutionFailedTitle:{id:"issue-field-resolution.edit-resolution-failed-title",defaultMessage:"We couldn't update {issueKey}'s resolution"},editResolutionFailedDescription:{id:"issue-field-resolution.edit-resolution-failed-description",defaultMessage:"Check your connection, then try again."}
}),d=s("./src/packages/issue/fields/resolution/src/services/main.js"),p=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),m=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),b=s.n(m),f=s("./node_modules/@atlaskit/select/dist/es2019/PopupSelect/PopupSelect.js"),g=s("./node_modules/@atlaskit/icon/glyph/check.js"),h=s.n(g),y=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),O=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),j=s("./src/packages/platform/controllers/intl/src/index.js"),v=Object(l.h)({readViewMessage:{id:"issue-field-resolution.read.read-view-message",defaultMessage:"You cannot edit the resolution field"},unresolvedResolution:{id:"issue-field-resolution.read.unresolved-resolution",defaultMessage:"Unresolved"}}),E=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),k=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const w=25*k.e,S=E.default.div(["padding:",";display:flex;align-items:center;height:","px;"],(e=>e.addPadding?`0 ${2*k.e}px 0 12px`:0),4*k.e),C=E.default.span(["color:",";display:block;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:","px;",";"],(e=>e.isDarkText?y.a.N500:y.a.N90),w,(e=>e.isDisabled?":hover { cursor: not-allowed; }":"")),I=({value:e,isLabelClickEnabled:t})=>{const{formatMessage:s}=Object(j.c)(),n=e,i=(null==e?void 0:e.name)||s(v.unresolvedResolution),r=n?a.a.createElement(h.a,{size:"medium",label:i,primaryColor:y.a.G400}):null;return a.a.createElement(S,{addPadding:!t},r,(e=>{const i=a.a.createElement(C,{isDisabled:!t,isDarkText:t||!!n},e);return t?i:a.a.createElement(O.a,{content:s(v.readViewMessage),position:"top"},i)})(i))};I.displayName="ResolutionReadView";const T=({value:e=null,allowedOptions:t,onChange:s})=>a.a.createElement(f.a,{options:t||[],value:e,target:({ref:t})=>a.a.createElement(p.a,{ref:t,iconAfter:a.a.createElement(b.a,{label:"open"
}),appearance:"subtle"},a.a.createElement(I,{value:e?Object(c.b)(e):null,isLabelClickEnabled:!0})),onChange:s,isSearchable:!1,searchThreshold:99999});T.displayName="ResolutionEditView";const P=({issueKey:e})=>{const{showFlag:t}=Object(i.f)(),{createAnalyticsEvent:s}=Object(r.a)(),l=Object(n.useCallback)((()=>{t({type:"error",title:[u.editResolutionFailedTitle,{issueKey:e}],description:u.editResolutionFailedDescription})}),[e,t]),[{value:p,fieldConfig:m},{saveValue:b}]=Object(d.a)({issueKey:e,onFailure:l}),{allowedValues:f=[],isEditable:g=!1}=m||{},h=Object(n.useMemo)((()=>p?Object(c.c)(p):null),[p]),y=Object(n.useMemo)((()=>Object(c.a)(p,f)),[f,p]),O=g&&y.length>=1,j=Object(n.useCallback)((e=>{const t=Object(c.b)(e),n=s({action:"changed",actionSubject:"select"});Object(o.h)(n,"resolutionField"),b(t,null,n)}),[s,b]);return null==m?null:O?a.a.createElement(T,{onChange:j,allowedOptions:y,value:h}):a.a.createElement(I,{value:p,isLabelClickEnabled:!1})}},
"./src/packages/issue/fields/resolution/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js")),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,onFailure:t})=>{const[s]=Object(i.a)(e,"resolution"),n=a()(s,"schema.type","resolution"),[{error:o,value:c,loading:l},{resetError:u,saveValue:d}]=Object(r.a)({fieldType:n,issueKey:e,initialValue:null,fieldKey:"resolution",onFailure:t});return[{error:o,value:c,loading:l,fieldConfig:s},{resetError:u,saveValue:d}]}},"./src/packages/issue/fields/security-level/src/common/ui/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}))
;var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const i=n.default.div(["display:flex;align-items:center;color:",";"],(e=>e.isActive?a.a.N0:e.hasSecurityLevel?a.a.R400:null))},"./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return k})),s.d(t,"a",(function(){return S})),s.d(t,"c",(function(){return C}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),r=s("./node_modules/@atlaskit/icon/cjs/index.js"),o=s.n(r),c=s("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),l=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),u=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const d={1:"default",2:"default",3:"success",4:"inprogress"},p={default:l.a.N40,success:l.a.G50,
inprogress:l.a.B50},m={default:l.a.N500,success:l.a.G500,inprogress:l.a.B500},b={default:l.a.N70,success:l.a.G400,inprogress:l.a.B400},f={default:l.a.N800,success:l.a.N0,inprogress:l.a.N0},g=u.default.span(["display:flex;align-items:center;> div{display:flex;line-height:initial;outline:0;> span{padding:2px 0;vertical-align:text-bottom;color:",";background-color:",";",";}}"],(e=>m[d[e.statusCategoryId]]),(e=>p[d[e.statusCategoryId]]),(e=>e.hasHoverState?`&:hover {\n                        color: ${f[d[e.statusCategoryId]]};\n                        background-color: ${b[d[e.statusCategoryId]]};\n                    }`:"")),h=u.default.div(["display:flex;align-items:center;"]);function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?y(Object(s),!0).forEach((function(t){j(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function v(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
const k="issue.fields.status.common.ui.status-lozenge.",w=e=>a.a.createElement("svg",E({},e,{width:"13",height:"13",viewBox:"5 5 13 13"}),a.a.createElement("path",{d:"M8.292 10.293a1.009 1.009 0 0 0 0 1.419l2.939 2.965c.218.215.5.322.779.322s.556-.107.769-.322l2.93-2.955a1.01 1.01 0 0 0 0-1.419.987.987 0 0 0-1.406 0l-2.298 2.317-2.307-2.327a.99.99 0 0 0-1.406 0z",fill:"currentColor",fillRule:"evenodd"}));w.displayName="customChevronDownGlyph";const S=({status:{name:e,statusCategory:t},isEditable:s,hasHoverState:n,targetRef:i,shouldShowDropdownIndication:r})=>a.a.createElement(g,{hasHoverState:n,statusCategoryId:t.id},a.a.createElement("div",{ref:i,"data-test-id":`${k}${t.id}`},!0===s||!0===r?(()=>a.a.createElement(c.a,null,a.a.createElement(h,null,e,a.a.createElement(o.a,{glyph:w,label:""}))))():a.a.createElement(c.a,null,e)));S.displayName="StatusLozenge";const C=e=>{
const{ariaLabel:t,error:s,isEditable:n,isOpen:r,targetRef:o}=e,c=v(e,["ariaLabel","error","isEditable","isOpen","targetRef"]);return a.a.createElement(i.a,{ref:o,appearance:"subtle","aria-label":t,"aria-expanded":r,isDisabled:!n,theme:(e,t)=>{const{buttonStyles:a,spinnerStyles:i}=e(t);return{buttonStyles:O(O(O({},a),{},{backgroundColor:"transparent",margin:0,width:"auto",height:"auto",padding:0,border:`2px solid ${s?l.a.R300:"transparent"}`,borderRadius:"5px"},!0===n?void 0:{cursor:"auto"}),{},{outline:0,boxShadow:`0 0 0 2px ${!0===r?l.a.B100:"transparent"}`,"& > span":{margin:0},"&:focus, &:focus-within":{boxShadow:`0 0 0 2px ${l.a.B100}`}}),spinnerStyles:i}}},a.a.createElement(S,E({},c,{isEditable:n})))};C.displayName="WrappedStatusLozenge"},"./src/packages/issue/fields/status/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"e",(function(){return d})),s.d(t,"c",(function(){
return p}));var n=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),a=s("./src/packages/platform/utils/constants/src/status-categories.js");const i=(e,t)=>e.to.id===t&&!0===e.isLooped,r=Object(n.a)(((e,t)=>e.filter((e=>!i(e,t)&&!((e,t)=>e.isGlobal&&e.to.id===t)(e,t))))),o=e=>e.every((e=>e.isGlobal)),c=(e,t)=>r(e||[],t),l=Object(n.a)(((e,t)=>(e||[]).filter((e=>i(e,t))))),u=Object(n.a)((e=>e.map((e=>({label:e.to.name,value:e.id,transition:e}))))),d=e=>u(e),p=(e,t,s)=>({id:e,name:t,statusCategory:{id:a.StatusCategoryIds[s]||a.StatusCategoryIds[a.StatusCategoryTypes.UNDEFINED],name:t}})},"./src/packages/issue/fields/status/src/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={TIME_TO_RENDER_OPTIONS:"jira.fe.issue.fields.status.time-to.render-options",TIME_TO_APPLY_SELECTED_OPTION:"jira.fe.issue.fields.status.time-to.reflect-selected",TIME_TO_CANCEL_DROPDOWN:"jira.fe.issue.fields.status.time-to.cancel-dropdown",
TIME_TO_OPEN_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.open-transition-screen",TIME_TO_CONFIRM_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.confirm-transition-screen",TIME_TO_CANCEL_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.cancel-transition-screen",TIME_TO_ERROR_TRANSITION_SCREEN:"jira.fe.issue.fields.status.time-to.error-transition-screen"}},"./src/packages/issue/fields/status/src/services/experience-descriptions/index.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return u}));var a=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),i=n("./src/packages/platform/utils/types/src/application.js"),r=n("./src/packages/platform/utils/types/src/edition.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=(t,s,n,o,l,u)=>{let d=null,p=null;if(null!==o)try{const{appEditions:e}=Object(a.f)();d=Object(i.e)(o),p=Object(r.f)(d,e)}catch(e){}const m={};return null!=l&&(m.errorMessage=l),null!=u&&(m.traceId=u),{experience:"transitionIssue",wasExperienceSuccesful:t,analyticsSource:n,application:d,edition:p,additionalAttributes:c(c({},m),{},{method:s})}}},"./src/packages/issue/fields/status/src/services/status-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return R}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./src/packages/platform/observability/browser-metrics/src/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/transition-screen-legacy-dialog/index.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),p=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),m=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),b=s("./src/packages/platform/ui/flags/src/ui/with-flag-service/index.js"),f=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),g=s("./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js"),h=s("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),y=s("./src/packages/issue/workflow-transitions-services/src/main.js"),O=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),j=s("./src/packages/issue/fields/status/src/constants.js"),v=s("./src/packages/issue/fields/status/src/services/experience-descriptions/index.js"),E=s("./node_modules/react-intl/lib/index.es.js")
;const k=Object(E.h)({title:{id:"issue-field-status.services.flags.transition-failed-error.main.title",defaultMessage:"We couldn't update the status"},description:{id:"issue-field-status.services.flags.transition-failed-error.main.description",defaultMessage:"Check your network connection, then try reloading the issue."}});var w=()=>({type:"error",title:k.title,description:k.description,isAutoDismiss:!0});const S=Object(E.h)({title:{id:"issue-field-status.services.flags.validation-error.main.title",defaultMessage:"Transition failed"}});var C=e=>({type:"warning",title:S.title,description:{id:"issue-field.status.services.flags.validation-error.main.description",defaultMessage:e},isAutoDismiss:!0});function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function T(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function P(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?T(Object(s),!0).forEach((function(t){_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):T(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const x=Object(o.b)(),D="#issue-workflow-transition-submit",A=(e,t,s)=>{const n=document.querySelector(e);n&&n.removeEventListener(t,s)};class L extends n.Component{static getDerivedStateFromProps(e,t){return t.loading||!e.value?null:{value:e.value}}constructor(e){super(e),this.componentDidUpdate=e=>{
this.props.initialValue&&e.initialValue&&e.initialValue.id!==this.props.initialValue.id&&this.props.initialValue.id!==this.state.value.id&&this.setState({loading:!1,value:this.props.initialValue})},this.isDialogOpened=!1,this.isDialogConfirmPressed=!1,this.onDialogContentReady=()=>{setTimeout((()=>{this.isDialogOpened?Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_ERROR_TRANSITION_SCREEN}):Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_OPEN_TRANSITION_SCREEN}),this.bindDialogFormHandlers(),this.isDialogOpened=!0,this.isDialogConfirmPressed=!1}))},this.bindDialogFormHandlers=()=>{((e,t,s)=>{A(e,t,s);const n=document.querySelector(e);n&&n.addEventListener(t,s)})(D,"click",this.onClickDialogConfirm)},this.unbindDialogFormHandlers=()=>{A(D,"click",this.onClickDialogConfirm)},this.handleBeforeDialogHide=()=>{this.isDialogOpened&&!this.isDialogConfirmPressed&&(this.cancelScreenBrowserMetricsEvents(),Object(o.c)().markStartOfInteraction({key:j.a.TIME_TO_CANCEL_TRANSITION_SCREEN}),
setTimeout((()=>{Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_CANCEL_TRANSITION_SCREEN})}))),this.unbindDialogFormHandlers(),this.isDialogOpened=!1,this.isDialogConfirmPressed=!1},this.cancelScreenBrowserMetricsEvents=()=>{[j.a.TIME_TO_ERROR_TRANSITION_SCREEN,j.a.TIME_TO_CONFIRM_TRANSITION_SCREEN,j.a.TIME_TO_OPEN_TRANSITION_SCREEN].forEach((e=>{Object(o.c)().cancel({key:e},!0)}))},this.onClickDialogConfirm=()=>{Object(o.c)().markStartOfInteraction({key:j.a.TIME_TO_CONFIRM_TRANSITION_SCREEN,cancelExisting:!0}),Object(o.c)().markStartOfInteraction({key:j.a.TIME_TO_ERROR_TRANSITION_SCREEN,cancelExisting:!0}),this.isDialogConfirmPressed=!0},this.resetError=()=>this.setState({error:null}),this.submit=(e,t)=>{const s=this.state.value,n=e.to;this.setState({loading:!0,value:n}),this.props.onSubmit(s,n,{transition:e},t)},this.success=({status:e,event:t,viaDialog:s=!1})=>{this.setState({loading:!1,lastSavedValue:e}),
this.props.fieldValueActions.setFieldValue(this.props.issueKey,"status",e),this.props.onSuccess(e,s,t),Object(O.f)(t,"statusField transitioned","statusField"),Object(u.a)(Object(v.a)(!0,"POST","Issue View Status Service",this.props.projectType)),s&&Object(o.c)().markTimeToFinishTask({key:j.a.TIME_TO_CONFIRM_TRANSITION_SCREEN})},this.failure=(e,t)=>{this.setState({error:e,loading:!1,value:this.state.lastSavedValue||this.props.value||this.props.initialValue}),this.props.onFailure();const s=e instanceof p.a;s?this.props.flagService.showFlag(C(e.message)):this.props.flagService.showFlag(w()),Object(O.b)(t,"statusField postTransitionFailed",{validationError:s,message:e.message}),Object(h.a)(e)?Object(u.a)(Object(v.a)(!1,"POST","Issue View Status Service",this.props.projectType,e.message,e.traceId)):Object(u.a)(Object(v.a)(!0,"POST","Issue View Status Service",this.props.projectType))},this.cancel=()=>{this.setState({loading:!1,value:this.props.value||this.props.initialValue}),
this.props.onEditCancel(),this.props.workflowTransitionsActions.setTransitionInProgress(!1)},this.transitionStatus=async(e,t)=>{const{issueKey:s,baseUrl:n}=this.props,a=e.to;this.submit(e,t);try{e.hasScreen?new l.a({baseUrl:n,issueKey:s,transitionId:e.id}).onDialogSuccess((()=>this.success({status:a,event:t,viaDialog:!0}))).onDialogCancel((()=>this.cancel())).show():(x.start({key:"issue-field.status.post-transition"}),await Object(m.d)(`${n}/rest/api/2/issue/${s}/transitions`,{body:JSON.stringify({transition:e})}),x.stop({key:"issue-field.status.post-transition"}),this.success({status:a,event:t}))}catch(i){x.cancel("issue-field.status.post-transition"),d.a.safeErrorWithoutCustomerData("issue-field.status.post-transition",i),this.failure(i,t)}},this.api={transitionStatus:this.transitionStatus,resetError:this.resetError};const t=e.value||e.initialValue;if(null==t)throw new Error("Either value or initialValue prop is required.");this.state={value:t,lastSavedValue:t,loading:!1,error:null}}
componentDidMount(){Object(c.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({bind:e})=>{e("dialogContentReady",this.onDialogContentReady),e("Dialog.beforeHide",this.handleBeforeDialogHide)})).catch(r.a),Object(g.a)("dialogContentReady",this.onDialogContentReady),Object(g.a)("Dialog.beforeHide",this.handleBeforeDialogHide)}componentWillUnmount(){Object(c.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({unbind:e})=>{e("dialogContentReady",this.onDialogContentReady),e("Dialog.beforeHide",this.handleBeforeDialogHide)})).catch(r.a),Object(g.b)("dialogContentReady",this.onDialogContentReady),Object(g.b)("Dialog.beforeHide",this.handleBeforeDialogHide),this.unbindDialogFormHandlers(),this.isDialogOpened=!1}render(){return this.props.children(P(P({},this.state),this.api))}}L.displayName="StatusService",L.defaultProps={onSubmit:r.a,onSuccess:r.a,onFailure:r.a,onEditStart:r.a,onEditCancel:r.a};const M=e=>{const[,t]=Object(y.a)()
;return a.a.createElement(f.a,{issueKey:e.issueKey,fieldKey:"status"},((s,n)=>a.a.createElement(L,I({value:s},e,{fieldValueActions:n,workflowTransitionsActions:t}))))};M.displayName="StatusWithValueService";const R=Object(b.a)(M)},"./src/packages/issue/fields/status/src/services/status-transitions-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");const a=e=>Object(n.a)(`/rest/api/2/issue/${e}/transitions?sortByOpsBarAndStatus=true`)},"./src/packages/issue/fields/status/src/services/transitions-query/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/ui/error-boundary/src/main.js"),r=s("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),o=s("./src/packages/issue/fields/status/src/services/transitions-query/main.js")
;const c=e=>a.a.createElement(i.a,{id:"issue.fields.status.transitions-query"},a.a.createElement(r.a,{id:"fields.status.transitions-query",packageName:"jiraIssueFieldStatus",sendToPrivacyUnsafeSplunk:!0},a.a.createElement(o.a,e)));c.displayName="WrappedTransitionsQuery"},"./src/packages/issue/fields/status/src/services/transitions-query/main.js":function(t,s,n){"use strict";n.d(s,"b",(function(){return C})),n.d(s,"a",(function(){return _}));var a=n("./node_modules/react/index.js"),i=n.n(a),r=(n("./node_modules/react-magnetic-di/lib/esm/index.js"),
n("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js")),o=n("./src/packages/platform/observability/browser-metrics/src/index.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),l=n("./src/packages/platform/utils/fetch/src/utils/as-json.js"),u=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),d=n("./src/packages/issue/issue-view/src/common/util/errors/index.js"),p=n("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),m=n("./src/packages/issue/workflow-transitions-services/src/main.js"),b=n("./src/packages/issue/workflow-transitions-services/src/context.js"),f=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),g=n("./src/packages/issue/fields/status/src/services/experience-descriptions/index.js");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j=e=>y(y({id:parseInt(e.id,10),name:e.name,hasScreen:e.hasScreen,isGlobal:e.isGlobal,isInitial:e.isInitial,isConditional:e.isConditional},"boolean"==typeof e.isLooped&&{isLooped:e.isLooped}),{},{to:{id:parseInt(e.to.id,10),name:e.to.name,description:"",statusCategory:{id:e.to.statusCategory.id}},from:null}),v=e=>y(y({id:String(e.id),name:e.name,hasScreen:e.hasScreen,
isGlobal:e.isGlobal,isInitial:e.isInitial,isConditional:e.isConditional},"boolean"==typeof e.isLooped&&{isLooped:e.isLooped}),{},{to:{id:String(e.to.id),name:e.to.name,statusCategory:{id:e.to.statusCategory.id}}});function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){w(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const S=Object(o.b)(),C=(e,t)=>`${e}/rest/api/2/issue/${t}/transitions?sortByOpsBarAndStatus=true`,I=(e,t,s,n)=>{const a="string"==typeof s?Object(g.a)(e,"GET","Issue View BaseTransitionsQuery",t||null,s,n):Object(g.a)(e,"GET","Issue View BaseTransitionsQuery",t||null);Object(c.a)(a)},T=t=>{const{status:s,issueKey:n,baseUrl:i,projectType:r,preFetch:o,createAnalyticsEvent:c,isSaving:b}=t,[g,h]=Object(m.c)(),y=Object(a.useRef)(!1),[O]=Object(u.d)(n),E=Object(a.useCallback)((async t=>{if(!y.current){y.current=!0,h({loading:!0,error:null});try{S.start({key:"issue-field.status.fetch-transitions"});const e=((e=[])=>e.filter((e=>!!e.to&&!!e.to.statusCategory)))((await Object(l.a)(C(i,n))).transitions);S.stop({key:"issue-field.status.fetch-transitions"}),Object(f.g)(t,"statusField transitionsFetched","statusField",{count:e.length}),I(!0,r),h({data:e.map(j),loading:!1,error:null})}catch(e){S.cancel("issue-field.status.fetch-transitions"),
Object(d.a)("issue-field.status.fetch-transitions",e.toString(),e,{}),Object(p.a)(e)?I(!1,r,`${e.name||""} ${e.message}`.trim(),e.traceId):I(!0,r),h({data:null,loading:!1,error:e})}y.current=!1}}),[i,n,r,h,O]);return Object(a.useEffect)((()=>{!0===o&&c&&E(c({}))}),[n,o,c,h,E]),Object(a.useEffect)((()=>{b?h({data:null}):!b&&!0===o&&c&&E(c({}))}),[b,s,o,c,h,E]),t.children(k(k({},g),{},{data:g.data?g.data.map(v):null,fetch:E}))},P=e=>i.a.createElement(b.a,{scope:e.issueKey},i.a.createElement(T,e));P.displayName="ScopedTransitionsQuery";const _=Object(r.a)()(P)},"./src/packages/issue/fields/status/src/services/use-status-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js")),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");const c=({issueKey:e,onSuccess:t,onFailure:s})=>{const[n]=Object(i.a)(e,o.v),c=a()(n,"scheme.type",o.v),[{value:l,loading:u,error:d},{saveValue:p,resetError:m}]=Object(r.a)({fieldKey:o.v,issueKey:e,fieldType:c,initialValue:null,onSuccess:t,onFailure:s});return[{value:l,loading:u,error:d,fieldConfig:n},{saveValue:p,resetError:m}]}},"./src/packages/issue/fields/status/src/ui/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return Ot}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./src/packages/platform/ui/error-boundary/src/main.js"),c=s("./src/packages/platform/ui/error-boundary/src/index.js"),l=s("./src/packages/platform/utils/types/src/general.js"),u=s("./src/packages/platform/services/providers-container-context/src/index.js"),d=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),p=s("./src/packages/issue/fields/status/src/services/status-service/main.js"),m=s("./src/packages/issue/fields/status/src/services/transitions-query/index.js"),b=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),g=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),h=s("./src/packages/platform/utils/constants/src/project-types.js")
;const y=({key:e,havePermission:t})=>"VIEW_READONLY_WORKFLOW"===e&&t||"ADMINISTER"===e&&t,O=({key:e,havePermission:t})=>"VIEW_READONLY_WORKFLOW"===e&&t;function j(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function v(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?j(Object(s),!0).forEach((function(t){E(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):j(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function E(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const k=(e,t)=>`\n    query nextGenViewWorkflowQuery {\n        permissions(issueKey:"${e}", keys:["VIEW_READONLY_WORKFLOW", "ADMINISTER"]) {\n            key\n            havePermission\n        }\n        viewIssue(issueKey: "${e}") {\n            fields {\n                ... on IssueTypeField {\n                    fieldKey\n                    id\n                }\n            }\n        }\n        ${t?`project(projectKey: "${t}") {\n            projectId\n            simplified\n            type\n        }`:""}\n    }\n`,w=(e,t,s,n)=>Object(g.a)((e=>`${e}/rest/gira/latest/`)(e),{method:"POST",body:JSON.stringify({query:k(t,s)})}).then((e=>(({data:e},t)=>{if(!e||!e.permissions||!e.viewIssue)return;const{permissions:s,project:n,viewIssue:a}=e,i=!0===(n&&n.simplified||t)?y:O,r=a.fields.find((e=>"issuetype"===e.fieldKey)),o={hasPermission:s.some(i),issueTypeId:Object(l.n)(r?r.id:"")};return n&&(o.projectId=Object(l.q)(String(n.projectId)),o.projectType=Object(h.j)(n.type),
o.isSimplified=n.simplified),o})(e,n)));class S extends n.Component{constructor(e){super(e),this.fetch=async()=>{const{baseUrl:e,projectKey:t,issueKey:s,isSimplified:n}=this.props;this.request();try{const a=await w(e,s,t,n);this.success(a)}catch(a){f.a.safeErrorWithoutCustomerData("issue-field.status.fetch-view-workflow",a),this.failure(a)}},this.request=()=>{this.setState({error:void 0,loading:!0,data:void 0})},this.success=e=>{this.setState({loading:!1,data:e})},this.failure=e=>{this.setState({error:e,loading:!1})},this.state={data:void 0,loading:!1,error:void 0}}render(){return this.props.children(v(v({},this.state),{},{fetch:this.fetch}))}}function C(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function I(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function T(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?I(Object(s),!0).forEach((function(t){P(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):I(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}S.displayName="ViewWorkflowService";const _={data:void 0,loading:!1,error:void 0,fetch:()=>Promise.resolve()},x=e=>{
const{ViewWorkflowService:t,ContainerContextSubscriber:s,baseUrl:n,issueKey:i,children:r}=e,o=i?Object(b.a)(i):null;return i&&o?a.a.createElement(s,null,(({data:e})=>{const s=((e,t)=>{if(!e||!e.project)return;const s=e.project;return s.key===t?{projectId:Object(l.q)(s.id.toString()),projectType:s.type,isSimplified:s.isSimplified}:void 0})(e,o);return a.a.createElement(t,{baseUrl:n,issueKey:i,projectKey:s?void 0:o,isSimplified:s&&s.isSimplified},(e=>{let{data:t}=e,n=C(e,["data"]);const a=s||t?T(T({},s),t):void 0;return r(T({data:a},n))}))})):r(T({},_))};x.displayName="ViewWorkflowContextService",x.defaultProps={ViewWorkflowService:S}
;var D=x,A=s("./node_modules/react-intl/lib/index.es.js"),L=s("./node_modules/@atlaskit/select/dist/es2019/PopupSelect/PopupSelect.js"),M=s("./src/packages/platform/observability/browser-metrics/src/index.js"),R=s("./src/packages/common-legacy-do-not-add-anything-new/src/blanket/index.js"),N=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),F=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),U=s("./src/packages/issue/fields/status/src/common/ui/status-lozenge/main.js"),V=s("./src/packages/issue/fields/status/src/common/utils.js"),K=s("./src/packages/issue/fields/status/src/constants.js"),W=s("./src/packages/issue/fields/status/src/ui/status-view/messages.js"),B=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),H=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),$=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const G=H.default.div(["padding:","px;text-align:center;"],$.e),q=()=>a.a.createElement(G,null,a.a.createElement(B.a,null));q.displayName="LoadingSpinner";var z=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),Y=s.n(z),Q=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const J=Object(H.keyframes)(["to{box-shadow:0 0 0 10px rgba(0,0,0,0);}"]),Z=H.default.div(["display:inline-flex;border-radius:3px;box-shadow:0 0 0 0 ",";animation:",";"],Q.a.G400,(e=>e.shouldShow?`${J} 1.45s cubic-bezier(0.5, 0, 0, 1)`:"none"));class X extends n.Component{constructor(...e){super(...e),this.state={shouldShow:!1}}componentDidUpdate(e){e.status.statusCategory.id!==this.props.status.statusCategory.id&&this.setState({shouldShow:3===this.props.status.statusCategory.id})}render(){return a.a.createElement(Z,{shouldShow:this.state.shouldShow},this.props.children)}}X.displayName="Pulse"
;var ee=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js"),te=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js");const se=e=>`\n    &:not(:active), &:disabled {\n        background: ${e.background} !important;\n        color: ${e.color} !important;\n    }\n    \n    &:hover:not(:active) {\n        background: ${e.backgroundHover} !important;\n        color: ${e.color} !important;\n    }\n`,ne={default:{background:Q.a.N20A,backgroundHover:Q.a.N30A,color:Q.a.N400},todo:{background:Q.a.N40,backgroundHover:Q.a.N50,color:Q.a.N800},inProgress:{background:Q.a.B400,backgroundHover:Q.a.B500,color:Q.a.N0},done:{background:Q.a.G400,backgroundHover:Q.a.G500,color:Q.a.N0}},ae=Object(ee.a)(te.a,{target:"elro8wh0"})("font-weight:600;",(e=>!e.isSelected&&se(ne.default)),";"),ie=Object(ee.a)(te.a,{target:"elro8wh1"})("font-weight:600;",(e=>!e.isSelected&&se(ne.todo)),";"),re=Object(ee.a)(te.a,{target:"elro8wh2"
})("font-weight:600;",(e=>!e.isSelected&&se(ne.inProgress)),";"),oe=Object(ee.a)(te.a,{target:"elro8wh3"})("font-weight:600;",(e=>!e.isSelected&&se(ne.done)),";"),ce=e=>{const{ariaLabel:t,isEditable:s,isOpen:n,status:i,targetRef:r,statusButtonRef:o}=e,c=(e=>{switch(e){case 2:return ie;case 3:return oe;case 4:return re;default:return ae}})(i.statusCategory.id);return a.a.createElement("div",{ref:r},a.a.createElement(X,{status:i},a.a.createElement(c,{ref:o,"aria-label":t,"aria-expanded":n,isDisabled:!s,iconAfter:a.a.createElement(Y.a,{label:""})},i.name)))};ce.displayName="StatusButton";var le=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),ue=s.n(le),de=s("./src/packages/platform/controllers/intl/src/index.js"),pe=Object(A.h)({globalTransition:{id:"issue-field-status.status-view.transition.with-label.global-transition",defaultMessage:"Transition to"}})
;const me=H.default.div(["display:flex;"]),be=H.default.span(["flex-grow:1;"]),fe=H.default.span(["flex-shrink:0;display:flex;"]),ge=H.default.div(["display:inline-flex;align-items:center;"]),he=e=>{const t=Object(de.c)();return a.a.createElement(me,null,a.a.createElement(be,null,((e,t)=>e.isGlobal?e.name!==e.to.name?e.name:t.formatMessage(pe.globalTransition):e.name)(e.transition,t)),a.a.createElement(fe,null,a.a.createElement(ge,null,a.a.createElement(ue.a,{label:"",size:"small"})),a.a.createElement(U.a,{status:e.transition.to})))};he.displayName="TransitionWithLabel";const ye=e=>a.a.createElement(U.a,{status:e.transition.to});ye.displayName="TransitionWithoutLabel";const Oe=e=>e.hasLabel?a.a.createElement(he,{transition:e.transition}):a.a.createElement(ye,{transition:e.transition}),je=Object(N.a)("statusField",{onOpen:"openDropdown",onChange:"transitionSelected"})(L.a);class ve extends n.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.onChildWrapperRefUpdate=e=>{
this.childWrapperRef=e},this.wasChanged=!1,this.onChange=(e,t,s)=>{const{hasScreen:n}=e.transition;this.wasChanged=!0,Object(M.c)().markStartOfInteraction({key:K.a.TIME_TO_APPLY_SELECTED_OPTION,cancelExisting:!0}),n&&Object(M.c)().markStartOfInteraction({key:K.a.TIME_TO_OPEN_TRANSITION_SCREEN,cancelExisting:!0}),Object(F.h)(s,"transitionSelectedStatusField",{hasScreen:n}),this.props.onChange(e.transition,s)},this.onOpen=e=>{Object(M.c)().markStartOfInteraction({key:K.a.TIME_TO_RENDER_OPTIONS,cancelExisting:!0}),Object(F.h)(e,"openDropdownStatusField"),this.props.onOpen(e),this.setState({isOpen:!0})},this.onClose=()=>{this.wasChanged||Object(M.c)().markStartOfInteraction({key:K.a.TIME_TO_CANCEL_DROPDOWN,cancelExisting:!0}),this.wasChanged=!1,this.props.onClose(),this.setState({isOpen:!1})},this.childWrapperRef=void 0}componentDidUpdate(e,t){const{transitions:s,isSaving:n}=this.props,{isOpen:a}=this.state
;!0===e.isSaving&&!1===n&&this.childWrapperRef&&this.childWrapperRef.children.length>0&&this.childWrapperRef.children[0].focus();const i=!t.isOpen&&a,r=null===e.transitions&&s;i&&!s&&Object(M.c)().markTimeToFeedback({key:K.a.TIME_TO_RENDER_OPTIONS}),(i&&s||a&&r)&&setTimeout((()=>{Object(M.c)().markTimeToFinishTask({key:K.a.TIME_TO_RENDER_OPTIONS})}));t.isOpen&&!a&&setTimeout((()=>{Object(M.c)().markTimeToFinishTask({key:K.a.TIME_TO_APPLY_SELECTED_OPTION}),Object(M.c)().markTimeToFinishTask({key:K.a.TIME_TO_CANCEL_DROPDOWN})}))}componentWillUnmount(){Object.keys(K.a).forEach((e=>{Object(M.c)().cancel({key:K.a[e]},!0)}))}renderLozenge({isEditable:e,isSaving:t,error:s,targetRef:n}){const{intl:{formatMessage:i},value:r}=this.props;return t?a.a.createElement(R.a,{border:!1},a.a.createElement(U.c,{targetRef:n,status:r,error:s})):a.a.createElement(U.c,{ariaLabel:i(W.a.changeStatus),error:s,hasHoverState:!0,isEditable:e,isOpen:this.state.isOpen,status:r,targetRef:n})}
renderButton({isEditable:e,isSaving:t,targetRef:s}){const{intl:{formatMessage:n},value:i,statusButtonRef:r}=this.props,o=a.a.createElement(ce,{ariaLabel:`${i.name} - ${n(W.a.changeStatus)}`,isEditable:e,isOpen:this.state.isOpen,status:i,targetRef:s,statusButtonRef:r});return t?a.a.createElement(R.a,null,o):o}renderWithFocusWrapper(e){return a.a.createElement("div",{ref:this.onChildWrapperRefUpdate},e)}renderTarget({isEditable:e,isSaving:t,error:s,targetRef:n}){const{appearance:i,value:r}=this.props;if(r){if("lozenge"===i)return this.renderWithFocusWrapper(this.renderLozenge({isEditable:e,isSaving:t,error:s,targetRef:n}));if("button"===i)return this.renderWithFocusWrapper(this.renderButton({isEditable:e,isSaving:t,targetRef:n}))}return a.a.createElement("div",null)}render(){const{footer:e,isLoading:t,isEditable:s,isSaving:n,error:i,value:r,intl:{formatMessage:o},transitions:c}=this.props,l=null!=c,u=Object(V.a)(c,r.id),d=Object(V.d)(u||[]);return n||!s?this.renderTarget({isSaving:n,
isEditable:s,error:i}):a.a.createElement(je,{noOptionsMessage:()=>o(l?W.a.noPermission:W.a.cannotLoadTransitions),formatOptionLabel:e=>a.a.createElement(Oe,{transition:e.transition,hasLabel:!d}),options:Object(V.e)(u||[]),target:({ref:e})=>this.renderTarget({isEditable:s,isSaving:n,error:i,targetRef:e}),isLoading:t,isDisabled:!s,searchThreshold:99999,onChange:this.onChange,onOpen:this.onOpen,onClose:this.onClose,closeMenuOnSelect:!0,components:{LoadingMessage:()=>a.a.createElement(q,null)},popperProps:{modifiers:[{name:"offset",options:{offset:[0,8]}},{name:"preventOverflow",options:{padding:5,rootBoundary:"document"}}],strategy:"fixed"},footer:e})}}ve.displayName="StatusView",ve.defaultProps={isEditable:!0,isSaving:!1,onChange:r.a,onOpen:r.a,onClose:r.a}
;var Ee=Object(A.i)(ve),ke=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),we=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),Se=s("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),Ce=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),Ie=Object(A.h)({errorMessage:{id:"issue-field-status.common.view-workflow.error.error-message",defaultMessage:"Couldn\u2019t find the workflow."},tryAgain:{id:"issue-field-status.common.view-workflow.error.try-again",defaultMessage:"Try again"}});const Te=H.default.div(["height:","px;border-top:2px solid ",";display:flex;align-items:center;padding:0 ","px;justify-content:center;"],6*$.e,Q.a.N40,1.5*$.e),Pe=H.default.div(["display:flex;flex-grow:1;height:100%;"]),_e=H.default.div(["margin-right:","px;"],$.e);function xe(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function De(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(s),!0).forEach((function(t){Ae(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xe(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ae(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Le extends n.Component{constructor(...e){super(...e),this.onRetry=(e,t)=>{Object(F.h)(t,"retryViewWorkflowButton"),this.props.onRetry(e)}}render(){const{intl:{formatMessage:e}}=this.props;return a.a.createElement(we.a,{sourceName:"viewWorkflowError",sourceType:Se.f
},a.a.createElement(Te,null,a.a.createElement(_e,null,e(Ie.errorMessage)),a.a.createElement(Pe,null,a.a.createElement(ke.a,{appearance:"link",spacing:"none",onClick:this.onRetry,theme:(e,t)=>{const s=e(t);return De(De({},s),{},{buttonStyles:De(De({},s.buttonStyles),{},{alignItems:"center"})})}},e(Ie.tryAgain))),a.a.createElement(Ce.b,null)))}}Le.displayName="Error";var Me=Object(A.i)(Le),Re=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),Ne=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/create-event.js"),Fe=s("./src/packages/platform/ui/flags/src/ui/subscriber/index.js"),Ue=s("./src/packages/wrm/src/async-wrm.js"),Ve=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),Ke=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js"),We=Object(A.h)({viewWorkflow:{id:"issue-field-status.common.view-workflow.button.view-workflow",defaultMessage:"View workflow"}})
;const Be=H.default.div(["height:","px;border-top:2px solid ",";"],6*$.e,Q.a.N40),He=H.default.div(["display:flex;flex-grow:1;height:100%;"]);function $e(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ge(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(s),!0).forEach((function(t){qe(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$e(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ze=({content:e,children:t})=>e?a.a.createElement(Ve.a,{tag:"span",content:e
},t):t,Ye=({isDisabled:e,isLoading:t,isInitialLoading:s,onClick:n,onMount:i,tooltipContent:r})=>{const o=Object(de.c)(),c=!0===e&&!s;return a.a.createElement(Be,null,a.a.createElement(Ke.a,{onMount:i}),a.a.createElement(ze,{content:r},a.a.createElement(He,null,a.a.createElement(ke.a,{testId:"issue-field-status.common.ui.view-workflow.button.view-workflow",shouldFitContainer:!0,appearance:"subtle",spacing:"none",isDisabled:e,isLoading:t,onClick:n,theme:(e,t)=>{const s=e(t);return Ge(Ge({},s),{},{buttonStyles:Ge(Ge({},s.buttonStyles),{},{alignItems:"center",textAlign:"left",color:c?Q.a.N70:Q.a.N900,padding:`0 ${1.5*$.e}px`})})}},o.formatMessage(We.viewWorkflow)))))};Ye.displayName="ViewWorkflowButton";var Qe=Ye,Je=Object(A.h)({noPermission:{id:"issue-field-status.common.view-workflow.no-permission",defaultMessage:"You don't have permission to view this workflow."},loading:{id:"issue-field-status.common.view-workflow.loading",
defaultMessage:"Looks like your connection is slow. We\u2019re still finding this workflow."}}),Ze=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsEvents.js"),Xe=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const et=e=>{if(e.data&&e.data.viewIssue&&e.data.viewIssue.workflow)return{workflowName:e.data.viewIssue.workflow.name,currentStepId:e.data.viewIssue.workflow.step.id};throw new Error("TransformError")};function tt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function st(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(s),!0).forEach((function(t){nt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tt(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function nt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class at extends n.Component{constructor(...e){super(...e),this.state={data:void 0,error:void 0,loading:!1},this.load=async()=>{this.onLoading();const{baseUrl:e,issueKey:t}=this.props;try{this.fireAnalytics();const s=await((e,t)=>Object(Xe.d)(`${e}/rest/gira/1/`,{body:JSON.stringify({query:"\nquery classicViewWorkflowQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        workflow {\n            name\n            step {\n                id\n            }\n        }\n    }\n}\n",variables:{issueKey:t}})}).then(et))(e,t);this.onLoadSucceeded(s)}catch(s){f.a.safeErrorWithoutCustomerData("issue-field.status.classic-view-workflow-service.fetch","Failed to fetch classic view workflow data.",{errorReason:s.message&&"TransformError"===s.message?"transform":"fetch"}),
this.onLoadFailed(s)}}}componentDidMount(){!0===this.props.shouldLoadOnMount&&this.load()}onLoading(){this.setState({data:void 0,error:void 0,loading:!0})}onLoadSucceeded(e){this.setState({data:e,error:void 0,loading:!1})}onLoadFailed(e){this.setState({data:void 0,error:e,loading:!1})}fireAnalytics(){const e=this.props.createAnalyticsEvent({action:"requested"});Object(F.b)(e,"classicViewWorkflowData requested")}render(){return this.props.children(st(st({},this.state),{},{retry:this.load}))}}at.displayName="ClassicViewWorkflowService",at.defaultProps={shouldLoadOnMount:!0};const it=Object(Ze.a)()(at),rt=Object(A.h)({title:{id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.title",defaultMessage:"We couldn't load the workflow"},description:{id:"issue-field-status.view-workflow.classic.flags.errors.load-modal-error.description",defaultMessage:"Check your connection, then try reloading the page."}});var ot=()=>({type:"error",title:rt.title,description:rt.description
});class ct extends n.Component{constructor(...e){super(...e),this.state={isLoadingModal:!1,isRefetching:!1,isModalMounted:!1},this.modalApi=void 0,this.onClick=(e,t,s,n)=>{Object(F.h)(e,"viewWorkflowTrigger",{isSimplifiedProject:!1}),this.modalApi&&s&&n&&(this.setState({isLoadingModal:!0,isRefetching:!1}),this.modalApi.then((e=>{e.showDialog(s,n),window.dispatchEvent(Object(Ne.a)("resize")),this.setState({isModalMounted:!0})})).catch((()=>{t&&t(ot()),this.setState({isLoadingModal:!1})})))},this.onRetry=(e,t)=>(e.stopPropagation(),this.setState({isRefetching:!0}),t().then((()=>this.setState({isRefetching:!1})))),this.onMount=e=>{const{hasPermission:t}=this.props;Object(F.b)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!1})}}componentDidMount(){const e="workflow-designer/view-classic-project-workflow";this.modalApi=Object(Re.a)({name:e,tentatives:0,shouldLogError:!1
}).catch((()=>(Object(Ue.a)(["wr!com.atlassian.jira.plugins.jira-workflow-designer:view-issue-page-workflow-designer"]),Object(Re.a)({name:e}))))}getTooltipMessage(e){const{isServiceRefetching:t,intl:s,hasPermission:n}=this.props;return t||e?s.formatMessage(Je.loading):n?"":s.formatMessage(Je.noPermission)}render(){const{isServiceLoading:e,isServiceRefetching:t,issueKey:s,baseUrl:n,hasPermission:i,FlagServiceSubscriber:r,ClassicViewWorkflowService:o}=this.props,{isLoadingModal:c,isModalMounted:l,isRefetching:u}=this.state,d=c&&!l,p=!i||d,m=d||t||u;return a.a.createElement(r,null,(({showFlag:t})=>a.a.createElement(o,{issueKey:s,baseUrl:n,shouldLoadOnMount:i},(({data:s,error:n,loading:i,retry:r})=>{if(n)return a.a.createElement(Me,{onRetry:e=>{this.onRetry(e,r)}});const o=s?s.workflowName:null,c=s?s.currentStepId:null;return a.a.createElement(Qe,{onMount:this.onMount,tooltipContent:this.getTooltipMessage(e||i),isDisabled:p||i,isLoading:m,isInitialLoading:e||i,
onClick:(e,s)=>this.onClick(s,t,o,c)})}))))}}ct.displayName="ViewWorkflowClassic",ct.defaultProps={ClassicViewWorkflowService:it,FlagServiceSubscriber:Fe.a};var lt=Object(A.i)(ct);class ut extends n.Component{constructor(...e){super(...e),this.state={isLoadingModal:!1},this.onMount=e=>{const{hasPermission:t}=this.props;Object(F.b)(e,"viewWorkflowTrigger mounted",{hasViewWorkflowPermission:t,isSimplifiedProject:!0})},this.onClick=(e,t)=>{Object(F.h)(t,"viewWorkflowTrigger",{isSimplifiedProject:!0}),this.setState({isLoadingModal:!0});const{issueTypeId:s=Object(l.n)(""),projectId:n=Object(l.q)(""),onOpenModal:a}=this.props;a(s,n)}}getTooltipMessage(){const{isServiceLoading:e,isServiceRefetching:t,hasPermission:s,intl:n}=this.props;return e||t?n.formatMessage(Je.loading):!0!==s?n.formatMessage(Je.noPermission):""}render(){
const{isServiceLoading:e,isServiceRefetching:t,hasPermission:s,isModalMounted:n}=this.props,{isLoadingModal:i}=this.state,r=i&&!n,o=!0!==s||r,c=t||r,l=this.getTooltipMessage();return a.a.createElement(Qe,{onMount:this.onMount,tooltipContent:l,isDisabled:o,isLoading:c,isInitialLoading:e,onClick:this.onClick})}}ut.displayName="ViewWorkflowSimplified",ut.defaultProps={hasPermission:!1};var dt=Object(A.i)(ut);class pt extends n.Component{constructor(...e){super(...e),this.state={isWorkflowServiceRefetching:!1},this.onWorkflowServiceRefetch=async(e,t)=>{e.stopPropagation(),this.setState({isWorkflowServiceRefetching:!0}),await t(),this.setState({isWorkflowServiceRefetching:!1})}}render(){const{baseUrl:e,issueKey:t,isModalMounted:s,onOpenModal:n,workflowServiceApi:i}=this.props,{isWorkflowServiceRefetching:r}=this.state,{data:o,loading:c,error:l,fetch:u}=i;if(l)return a.a.createElement(Me,{onRetry:e=>{this.onWorkflowServiceRefetch(e,u)}});if(!o)return null
;const{isSimplified:d,projectId:p,issueTypeId:m,hasPermission:b}=o;return!0===d?a.a.createElement(dt,{projectId:p,issueTypeId:m,isModalMounted:s,hasPermission:b,isServiceLoading:c,isServiceRefetching:r,onOpenModal:n}):a.a.createElement(lt,{baseUrl:e,issueKey:t,hasPermission:b,isServiceLoading:c,isServiceRefetching:r})}}pt.displayName="ViewWorkflow";var mt=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),bt=s("./src/packages/platform/ui/modal/src/index.js");const ft=({children:e,packageName:t})=>a.a.createElement(bt.a,{id:"workflow-readonly-modal",metricKey:"WORKFLOW_READONLY_MODAL_LOAD_START_MARK_KEY",packageName:t},e);ft.displayName="WorkflowReadonlyModalBoundary";const gt=Object(mt.f)((()=>s.e("async-issue-workflow-readonly-modal").then(s.bind(null,"./src/packages/issue/workflow-readonly-modal/src/index.js"))),{moduleId:"./src/packages/issue/workflow-readonly-modal/src/index.js"});class ht extends n.Component{constructor(...e){super(...e),this.state={shouldMountWorkflow:!1}}
static getDerivedStateFromProps(e,t){return{shouldMountWorkflow:t.shouldMountWorkflow||e.isOpen}}render(){const{issueKey:e,issueTypeId:t,baseUrl:s,locale:n,cloudId:i,projectId:r,isOpen:o,onModalMounted:c,onClose:l}=this.props,{shouldMountWorkflow:u}=this.state;return u&&a.a.createElement(ft,{packageName:"issue"},a.a.createElement(gt,{onMounted:c,issueKey:e,issueTypeId:t,baseUrl:s,locale:n,isOpen:o,cloudId:i,projectId:r,onClose:l}))}}ht.displayName="WorkflowModal";var yt=ht;class Ot extends n.Component{constructor(...e){super(...e),this.state={isWorkflowModalOpen:!1,isWorkflowModalMounted:!1,issueTypeId:Object(l.n)(""),projectId:Object(l.q)("")},this.statusButtonRef=Object(n.createRef)(),this.onOpenModal=(e,t)=>{this.setState({isWorkflowModalOpen:!0,issueTypeId:e,projectId:t})},this.onCloseModal=()=>{this.setState({isWorkflowModalOpen:!1},(()=>{var e;null!==(e=this.statusButtonRef)&&void 0!==e&&e.current&&this.statusButtonRef.current.focus()}))},this.onModalMounted=()=>{this.setState({
isWorkflowModalMounted:!0})}}componentDidMount(){const{onMount:e}=this.props;null==e||e()}render(){const{issueKey:e,projectType:t,isEditable:s,isOptimistic:n,initialValue:i,appearance:r,onSubmit:l,onSuccess:u,onFailure:d,onEditStart:b,onEditCancel:f,value:g,TenantContextSubscriber:h,ContainerContextSubscriber:y,preFetchTransitions:O,ViewWorkflowContextService:j}=this.props;return a.a.createElement(h,null,(({tenantContext:h})=>h?a.a.createElement(p.a,{value:g,projectType:t,initialValue:i,issueKey:e,baseUrl:h.baseUrl,onSubmit:l,onSuccess:u,onFailure:d,onEditStart:b,onEditCancel:f},(({value:i,loading:l,transitionStatus:u,error:d,resetError:p})=>a.a.createElement(m.a,{issueKey:e,baseUrl:h.baseUrl,status:i,isSaving:l,preFetch:O,projectType:t},(({data:t,loading:m,fetch:g})=>a.a.createElement(j,{ContainerContextSubscriber:y,baseUrl:h.baseUrl,issueKey:e},(y=>a.a.createElement(a.a.Fragment,null,a.a.createElement(Ee,{statusButtonRef:this.statusButtonRef,value:i,isEditable:s,isLoading:m||l,
isSaving:!0!==n&&l,appearance:r,transitions:t,onOpen:e=>{b(),g(e);!0!==(y.data&&void 0!==y.data.hasPermission)&&y.fetch(),p()},onClose:f,onChange:u,error:d,footer:a.a.createElement(o.a,{id:"issue-field-view-workflow"},a.a.createElement(pt,{baseUrl:h.baseUrl,issueKey:e,workflowServiceApi:y,onOpenModal:this.onOpenModal,isModalMounted:this.state.isWorkflowModalMounted}))}),a.a.createElement(c.b,null,a.a.createElement(yt,{onModalMounted:this.onModalMounted,issueKey:e,issueTypeId:this.state.issueTypeId,baseUrl:h.baseUrl,locale:h.locale,cloudId:h.cloudId,projectId:this.state.projectId,isOpen:this.state.isWorkflowModalOpen,onClose:this.onCloseModal}))))))))):null))}}Ot.displayName="StatusField",Ot.defaultProps={isOptimistic:!0,TenantContextSubscriber:d.b,ContainerContextSubscriber:u.a,ViewWorkflowContextService:D,preFetchTransitions:!1,projectType:null,onEditStart:r.a,onEditCancel:r.a,onSubmit:r.a,onSuccess:r.a,onFailure:r.a,onMount:r.a}},
"./src/packages/issue/fields/status/src/ui/status-view/actions/main.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/issue/issue-context-service/src/main.js")),c=s("./src/packages/issue/project-context-service/src/main.js"),l=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),u=s("./src/packages/issue/fields/status/src/common/utils.js"),d=s("./src/packages/issue/fields/status/src/services/status-service/main.js"),p=s("./src/packages/issue/fields/status/src/services/transitions-query/index.js"),m=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),b=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),f=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),g=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),h=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js");const y=Object(b.a)("button",{onClick:"clicked"})(m.a),O=e=>{
const{createAnalyticsEvent:t}=Object(f.a)();return a.a.createElement(a.a.Fragment,null,a.a.createElement(y,{onClick:(s,n)=>{const a=t({action:"clicked",actionSubject:"button"});Object(g.h)(a,"loopActionsButton"),e.onClick(e.transition,n)}},e.transition.name),a.a.createElement(h.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"loopActions",attributes:{controlType:"button"}}))}
;var j=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),v=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),E=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),k=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),w=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),S=s.n(w),C=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),I=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),T=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),P=s("./src/packages/platform/controllers/intl/src/index.js"),_=s("./node_modules/react-intl/lib/index.es.js"),x=Object(_.h)({actions:{id:"issue-field-status.status-view.actions.actions-menu.actions",defaultMessage:"Actions"}}),D=s("./node_modules/styled-components/dist/styled-components.browser.esm.js")
;const A=D.default.span(["padding-right:","px;"],.75*T.e),L=D.default.div(["margin-right:-","px;"],T.e);function M(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function R(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?M(Object(s),!0).forEach((function(t){N(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):M(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function N(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function F(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t)
;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const U=Object(b.a)("dropdownItem",{onClick:"clicked"})(v.a),V=e=>{const{transitions:t,onSelect:s}=e,{createAnalyticsEvent:i}=Object(f.a)(),{formatMessage:r}=Object(P.c)(),[o,c]=Object(n.useState)(!1);if(0===t.length)return null;return a.a.createElement(a.a.Fragment,null,a.a.createElement(E.a,{trigger:a.a.createElement(j.a,{appearance:"subtle",isSelected:o,iconAfter:a.a.createElement(L,null,a.a.createElement(S.a,{label:""})),theme:(e,t)=>{const s=e(t),{buttonStyles:n}=s;return R(R({},F(s,["buttonStyles"])),{},{buttonStyles:R(R({},n),{},{padding:`0 ${T.e/2}px 0 ${T.e}px`,margin:`0 ${T.e/2}px 0 ${T.e/2}px`,backgroundColor:o?C.a.N400:C.a.N20,"&:hover":{backgroundColor:o?C.a.N500:C.a.N30,padding:`0 ${T.e/2}px 0 ${T.e}px`},"&:active":{backgroundColor:o?C.a.N500:C.a.B50,padding:`0 ${T.e/2}px 0 ${T.e}px`}})
})}},a.a.createElement(A,null,r(x.actions))),isOpen:o,onOpenChange:()=>{c(!o)}},a.a.createElement(k.a,null,t.map((e=>a.a.createElement(I.a,{key:e.id,content:e.name},a.a.createElement(U,{onClick:(t,n)=>((e,t,n)=>{const a=i({action:"clicked",actionSubject:"dropdown"});Object(g.h)(a,"loopActionsMenu"),s(e,n)})(e,0,n)},e.name)))))),a.a.createElement(h.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"loopActions",attributes:{controlType:"menu"}}))},K=Object(D.keyframes)(["0%{opacity:0;max-height:0;}50%{max-height:","px;}100%{opacity:1;}"],5*T.e),W=D.default.div(["display:inline-flex;overflow:hidden;animation-duration:0.5s;animation-iteration-count:1;animation-name:",";animation-timing-function:linear;white-space:nowrap;text-overflow:ellipsis;"],(e=>e.animationEnabled?K:"none")),B=({initialStatusValue:e,onSubmit:t,onSuccess:s})=>{const i=Object(o.g)(),m=Object(l.a)(),b=Object(o.i)(),f=Object(c.k)(b),[g,h]=Object(n.useState)(!1);return a.a.createElement(d.a,{projectType:f||null,
issueKey:i,baseUrl:m,onSubmit:t,onSuccess:(...e)=>{h(!0),s(...e)},onFailure:r.a,onEditStart:r.a,onEditCancel:r.a,initialValue:e},(({value:e,loading:t,transitionStatus:s})=>a.a.createElement(p.a,{issueKey:i,baseUrl:m,status:e,isSaving:t,preFetch:!0,projectType:f},(({data:t})=>{const n=Object(u.b)(t,e.id);return 0===n.length?null:1===n.length?a.a.createElement(W,{animationEnabled:g},a.a.createElement(O,{transition:n[0],onClick:s})):a.a.createElement(W,{animationEnabled:g},a.a.createElement(V,{transitions:n,onSelect:s}))}))))};B.displayName="Actions";t.a=B},"./src/packages/issue/fields/status/src/ui/status-view/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({noPermission:{id:"issue-field-status.status-view.no-permission",defaultMessage:"You don't have permission to transition this issue"},cannotLoadTransitions:{id:"issue-field-status.status-view.cannot-load-transitions",
defaultMessage:"We couldn't load the statuses and transitions"},changeStatus:{id:"issue-field-status.status-view.change-status",defaultMessage:"Change status"}})},"./src/packages/issue/fields/summary/src/services/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js");const o=({issueKey:e,onSuccess:t,onFailure:s})=>{const[n]=Object(i.a)(e,"summary"),o=a()(n,"schema.type","string"),[{value:c,error:l},{saveValue:u,resetError:d}]=Object(r.a)({fieldKey:"summary",issueKey:e,fieldType:o,initialValue:null,onSuccess:t,onFailure:s});return[{value:c,error:l,fieldConfig:n},{saveValue:u,resetError:d}]}},"./src/packages/issue/fields/voters/src/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({
fetchVotersListFailedTitle:{id:"issue-field-voters.fetch-voters-list-failed-title",defaultMessage:"We couldn't load the voters list"},fetchVotersListFailedDescription:{id:"issue-field-voters.fetch-voters-list-failed-description",defaultMessage:"Check your connection, then give it another try."},updateVoteFailedTitle:{id:"issue-field-voters.update-vote-failed-title",defaultMessage:"We couldn't update your vote status"},updateVoteFailedDescription:{id:"issue-field-voters.update-vote-failed-description",defaultMessage:"Check your connection, then try clicking vote again."},addVoteLabel:{id:"issue-field-voters.add-vote-label",defaultMessage:"Vote for this issue"},removeVoteLabel:{id:"issue-field-voters.remove-vote-label",defaultMessage:"Remove Vote"},voteOptionsTooltip:{id:"issue-field-voters.vote-options-tooltip",defaultMessage:"Vote options"},emptyVotersMessage:{id:"issue-field-voters.empty-voters-message",defaultMessage:"No one has voted for this issue"},votersListLabel:{
id:"issue-field-voters.voters-list-label",defaultMessage:"Voted for this issue"}})},"./src/packages/issue/fields/voters/src/services/voters-list-service/context.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return p}));var n={};s.r(n),s.d(n,"setVoters",(function(){return o})),s.d(n,"setLoggedInUserAction",(function(){return c}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/container.js");const o=e=>({setState:t})=>{t({voters:e})},c=e=>({setState:t})=>{t({loggedInUserAction:e})},l=Object(a.a)({name:"issue-voters",initialState:{voters:[],loggedInUserAction:void 0},actions:n}),u=Object(i.a)(l,{selector:e=>e.voters}),d=Object(i.a)(l,{selector:e=>e.loggedInUserAction}),p=Object(r.a)(l)},
"./src/packages/issue/fields/voters/src/services/voters-list-service/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return j}));var n=s("./node_modules/react/index.js"),a=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/services/common/src/use-service/index.js")),i=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),r=s("./src/packages/platform/ui/flags/src/services/index.js"),o=s("./src/packages/issue/issue-context-service/src/main.js"),c=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),l=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),u=s("./src/packages/platform/services/user/src/main.js"),d=s("./src/packages/issue/fields/voters/src/messages.js"),p=s("./src/packages/issue/fields/voters/src/services/voters-list-service/context.js");const m="ADDED",b="REMOVED";var f=s("./src/packages/platform/utils/types/src/general.js");const g=e=>({
id:Object(f.a)(e.accountId),displayName:e.displayName,avatarUrl:e.avatarUrls&&e.avatarUrls["48x48"]});function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const j=()=>{
const[{data:e}]=Object(u.b)(),[t,{setVoters:s}]=Object(p.c)(),[f,{setLoggedInUserAction:h}]=Object(p.b)(),O=Object(l.a)(),j=Object(o.g)(),{showFlag:v}=Object(r.f)(),[E,{setFieldValue:k}]=Object(c.b)({issueKey:j,fieldKey:"votes"}),[w,S]=Object(n.useState)(!1),C=Object(n.useCallback)((()=>Object(i.b)(`${O}/rest/api/3/issue/${j}/votes`)),[O,j]),{loading:I,error:T,data:P,fetch:_}=Object(a.a)(C),x=Object(n.useMemo)((()=>P&&P.voters?P.voters.map(g):t),[P]);Object(n.useEffect)((()=>{P&&P.voters&&(s(x),S(!0))}),[P,s,x]);const D=Object(n.useMemo)((()=>{const t=e?g(e):null;switch(f){case m:return((e,t)=>t&&-1===e.findIndex((e=>e.id===t.id))?[...e,t].sort(((e,t)=>e.displayName.localeCompare(t.displayName))):e)(x,t);case b:return((e,t)=>t?e.filter((e=>e.id!==t.id)):e)(x,t);default:return x}}),[e,f,x]);Object(n.useEffect)((()=>{T&&v({type:"error",title:d.a.fetchVotersListFailedTitle,description:d.a.fetchVotersListFailedDescription})}),[T,v]),Object(n.useEffect)((()=>{if(w&&E.votes!==D.length){
const e=void 0===f;k(j,"votes",y(y({},E),{},{votes:D.length,hasVoted:e?E.hasVoted:f===m}))}S(!1)}),[w]);const A=Object(n.useCallback)((()=>{h(m)}),[h]),L=Object(n.useCallback)((()=>{h(b)}),[h]),M=Object(n.useCallback)((()=>{I||_()}),[_,I]),R=Object(n.useMemo)((()=>({setLoggedInUserActionVote:A,setLoggedInUserActionUnvote:L,refreshVoters:M})),[A,M,L]);return[{voters:D,isFetching:I,error:T},R]}},"./src/packages/issue/fields/voters/src/ui/button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),r=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/icon/glyph/like.js")),o=s.n(r),c=s("./src/packages/issue/issue-context-service/src/main.js"),l=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),u=s("./node_modules/@atlassian/react-transitive-number/index.js"),d=s.n(u),p=s("./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const f=m.default.span(["display:flex;align-items:center;",""],(e=>e.hasVoted&&!e.isSelected?`color: ${b.a.B500};`:"")),g=m.default.span(["display:flex;"]),h=m.default.span(["min-width:",";"],(e=>e.hasVoters?"15px":"0")),y=({isSelected:e=!1})=>{const t=Object(c.g)(),[{hasVoted:s,votes:n}]=Object(l.b)({issueKey:t,fieldKey:"votes"});return a.a.createElement(f,{hasVoted:s,isSelected:e},a.a.createElement(g,null,s?a.a.createElement(p.a,{label:"",size:"medium"}):a.a.createElement(o.a,{label:"",
size:"medium"})),a.a.createElement(h,{hasVoters:0!==n},a.a.createElement(d.a,null,0!==n?n:"")))};y.displayName="VoteIcon";var O=y,j=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js");const v=Object(m.default)(j.a)(["&&{padding:0 4px;align-items:center;}"]),E=({onClick:e,tooltip:t=null,isSelected:s=!1,isDisabled:n=!1})=>a.a.createElement(i.a,{content:t,position:"top"},a.a.createElement(v,{onClick:e,isSelected:s,appearance:"subtle",spacing:"default","aria-label":t,"aria-expanded":s,isDisabled:n},a.a.createElement(O,{isSelected:s})));E.displayName="VoteButton";t.a=E},"./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/cjs/index.js"),r=s.n(i);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e
}).apply(this,arguments)}const c=e=>a.a.createElement("svg",o({},e,{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"}),a.a.createElement("defs",null,a.a.createElement("path",{id:"like-filled-a",
d:"M4.00029867,12.0000031 L4.00029867,19.0000031 C3.99379083,19.2619469 4.0938648,19.5154845 4.27800285,19.7035645 C4.46214091,19.8916445 4.71487577,19.9984685 4.97933941,20.0000031 L5.99875297,20.0000031 L5.99875297,11.0000031 L4.97933941,11.0000031 C4.71487577,11.0015345 4.46214091,11.1083586 4.27800285,11.2964386 C4.0938648,11.4845186 3.99379083,11.7380562 4.00029867,12.0000031 Z M19.2814088,11.0400031 C18.7031035,10.3648275 17.8537454,9.97663317 16.959972,9.97900342 L14.3256459,9.97900342 C14.3660187,9.79800348 14.4063915,9.61900354 14.4366711,9.4470036 C14.9514245,6.5130046 14.4366711,5.44700497 13.9320109,4.85300517 C13.4705845,4.31076256 12.7907146,3.99849428 12.0748615,4 C10.5305357,4.05274499 9.2630356,5.22781051 9.10745966,6.75100452 C8.71382472,8.59000389 8.6532655,8.75100384 8.13851212,9.47600359 L7.37142865,10.5650032 C7.13702441,10.900368 7.01037109,11.2980817 7.00807332,11.7060028 L7.00807332,17.9790007 C7.0094101,18.5107601 7.22390249,19.0202137 7.60436426,19.3952867 C7.98482603,19.7703597 8.50009148,19.9803277 9.03680723,19.9790426 L16.2837274,19.9790426 C17.7690249,19.9867984 19.0398298,18.9240081 19.2814088,17.4720009 L19.9576535,13.4720022 C20.1064636,12.6021375 19.8588502,11.7116379 19.2814088,11.0400031 Z"
})),a.a.createElement("g",{fillRule:"evenodd"},a.a.createElement("use",{fill:"currentColor",xlinkHref:"#like-filled-a"}),a.a.createElement("path",{fill:"inherit",d:"M17.2829545,17.140001 C17.2013522,17.6232979 16.7783039,17.9768163 16.2837274,17.9750077 L9.03680723,17.9750077 L9.03680723,11.7060028 L9.8038907,10.6170032 C10.5252697,9.572607 10.9727451,8.36664508 11.105914,7.1080044 C11.1422788,6.56547046 11.3606605,5.89943888 12.0748615,6.00000478 C12.7890625,6.10057068 12.6501741,7.91600412 12.4382168,9.10000372 C12.2228565,10.0810361 11.9326853,11.0444672 11.5702013,11.9820027 L16.959972,11.9740027 C17.2574249,11.9729101 17.5402185,12.1018688 17.7328364,12.3264423 C17.9254544,12.5510157 18.0082813,12.848334 17.9591992,13.1390023 L17.2829545,17.140001 Z"})));c.displayName="likeIconFilled";const l=({size:e,label:t,secondaryColor:s="#B3D4FF"})=>a.a.createElement(r.a,{glyph:c,size:e,label:t,secondaryColor:s});l.displayName="LikeIconFilled",t.a=l},
"./src/packages/issue/fields/voters/src/ui/vote-toggle/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/icon/glyph/like.js")),r=s.n(i),o=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),c=s("./src/packages/platform/controllers/intl/src/index.js"),l=s("./src/packages/issue/fields/voters/src/messages.js"),u=s("./node_modules/lodash/get.js"),d=s.n(u),p=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),m=s("./src/packages/platform/ui/flags/src/services/index.js"),b=s("./src/packages/platform/utils/types/src/general.js"),f=s("./src/packages/issue/issue-context-service/src/main.js"),g=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),h=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),y=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),O=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),j=s("./src/packages/issue/fields/voters/src/services/voters-list-service/main.js");function v(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=()=>{const e=Object(f.g)(),[,{setLoggedInUserActionVote:t,setLoggedInUserActionUnvote:s}]=Object(j.a)(),[a]=Object(g.a)(e,"votes"),i=d()(a,"schema.type","votes"),{showFlag:r}=Object(m.f)(),{createAnalyticsEvent:o}=Object(y.a)(),c=Object(n.useCallback)(((e,n)=>{r({type:"error",title:l.a.updateVoteFailedTitle,
description:l.a.updateVoteFailedDescription}),n.hasVoted?s():t()}),[r,s,t]),[{value:u,error:v},{saveValue:k,resetError:w}]=Object(h.a)({fieldKey:"votes",issueKey:e,fieldType:i,initialValue:{hasVoted:!1,votes:0},saveField:(t,s,n,a)=>(({issueKey:e,newValue:t,baseUrl:s})=>t.hasVoted?Object(p.d)(`${s}/rest/api/3/issue/${e}/votes`):Object(p.a)(`${s}/rest/api/3/issue/${e}/votes`))({issueKey:e,newValue:n,baseUrl:Object(b.b)(a)}),onFailure:c}),S=Object(n.useCallback)(((e=!1)=>{const n=!u.hasVoted,a=o({action:"clicked",actionSubject:"button"});Object(O.h)(a,n?"voteAdded":"voteRemoved",{viewMode:e?"showVotersList":"hideVotersList"}),n?t():s(),k(((e,t)=>E(E({},t),{},e?{votes:t.votes+1,hasVoted:!0}:{votes:t.votes-1,hasVoted:!1}))(n,u),null,a)}),[u,o,t,s,k]);return[{value:u,error:v,fieldConfig:a},{toggleValue:S,resetError:w}]}
;var S=s("./src/packages/issue/fields/voters/src/ui/button/index.js"),C=s("./src/packages/issue/fields/voters/src/ui/like-icon-filled/index.js"),I=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),T=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js");const P=Object(I.default)(T.a)(["&&&{padding:8px 12px 7px;}"]),_=({onClick:e,isDropdownItem:t=!1,disableVotingProps:s={isDisabled:!1}})=>{const{isDisabled:i,tooltips:u}=s,{formatMessage:d}=Object(c.c)(),[{value:p},{toggleValue:m}]=w(),{buttonLabel:b,disabledTooltip:f}=Object(n.useMemo)((()=>p.hasVoted?{buttonLabel:d(l.a.removeVoteLabel),disabledTooltip:null==u?void 0:u.removeVote}:{buttonLabel:d(l.a.addVoteLabel),disabledTooltip:null==u?void 0:u.addVote}),[u,d,p.hasVoted]),g=Object(n.useCallback)((()=>{null==e||e(),m(t)}),[t,e,m]);return t?a.a.createElement(o.a,{content:i&&void 0!==f?f:null},a.a.createElement(P,{elemBefore:p.hasVoted?a.a.createElement(r.a,{label:"",size:"medium"
}):a.a.createElement(C.a,{label:"",size:"medium"}),onClick:g,isDisabled:i},b)):a.a.createElement(S.a,{tooltip:i?f:b,onClick:g,isDisabled:i})};_.displayName="VoteToggle";t.a=_},"./src/packages/issue/forge-service/src/services/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return d}));var n={};s.r(n),s.d(n,"setForge",(function(){return r}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const r=e=>({setState:t})=>{t(e)},o=Object(a.a)({name:"issue-view-layout-forge-apps-service",initialState:{customField:[],issueAction:[],issueActivity:[],issueGlance:[],issuePanel:[],activeAction:null,customFieldType:[]},actions:n}),c=Object(i.a)(o),l=Object(i.a)(o,{selector:null}),u=()=>{const[e]=c();return[e.issueGlance]},d=()=>{const[,e]=l();return[void 0,e]}},"./src/packages/issue/format-date/src/common/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){
return r})),s.d(t,"b",(function(){return o}));var n=s("./src/packages/platform/utils/constants/src/supported-locales.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const i="en-US",r=e=>{if("string"!=typeof e)return a.h.safeErrorWithoutCustomerData("jira-issue-format-date.standardize-locale",`Invalid input type for locale was passed in: ${e}. Falling back to en-US.`),i;const t=e.replace("_","-");switch(t){case"en":return"en-US";case"en-UK":return"en-GB";default:return n.a.includes(e)||a.h.safeWarnWithoutCustomerData("jira-issue-format-date.standardize-locale",`Discovered unsupported locale: ${e}. This value was not modified, but its use may lead to unpredictable behaviour for formatting.`),t}},o=e=>{try{return Intl.DateTimeFormat(i,{timeZone:e}),e}catch(t){
return void a.h.safeErrorWithoutCustomerData("jira-issue-format-date.verify-time-zone",`Invalid timeZone: ${String(e)}. Date time formatting cannot be performed with this value. Falling back to undefined`,t)}}},"./src/packages/issue/format-date/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),s("./src/packages/platform/services/user-current/src/main.js")),i=s("./src/packages/platform/controllers/tenant-context/src/components/locale/index.js");const r={day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0},o={day:"2-digit",month:"short",year:"numeric"};var c=s("./src/packages/issue/format-date/src/common/utils.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s
}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{DateTimeFormat:p}=Intl,m=e=>{const{data:{user:{timeZone:t}}}=Object(a.b)(),s=null!=e?e:t,l=Object(i.a)(),d=Object(c.a)(l),m=Object(c.b)(s),b=Object(n.useMemo)((()=>new p(d,u(u({},r),{},{timeZone:m}))),[d,m]),f=Object(n.useMemo)((()=>new p(d,u(u({},o),{},{timeZone:"UTC"}))),[d]);return{formatDateTime:Object(n.useCallback)((e=>{const t="string"==typeof e?new Date(e):e;return b.format(t)}),[b]),formatDateOnly:Object(n.useCallback)((e=>f.format(new Date(e))),[f])}}},
"./src/packages/issue/issue-actions/activity-feed/src/messages.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./node_modules/react-intl/lib/index.es.js");const a=Object(n.h)({allActivity:{id:"issue-activity-feed.all-activity",defaultMessage:"All"},comments:{id:"issue-activity-feed.comments",defaultMessage:"Comments"},history:{id:"issue-activity-feed.history",defaultMessage:"History"},worklog:{id:"issue-activity-feed.worklog",defaultMessage:"Work log"},activity:{id:"issue-activity-feed.activity",defaultMessage:"Activity"},filterBy:{id:"issue-activity-feed.filter-by",defaultMessage:"Show:"},polarisData:{id:"issue-activity-feed.polaris-data",defaultMessage:"Data"}})},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/assets/Error.svg":function(e,t,s){e.exports=s.p+"assets/Error.be0d40cfbcd6c064b92b9530fd4cf3ce.8.svg"},
"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),r=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/components/subscriber.js"),o=s("./node_modules/react-intl/lib/index.es.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),d=s("./node_modules/lodash/countBy.js"),p=s.n(d),m=s("./node_modules/lodash/isEmpty.js"),b=s.n(m),f=s("./node_modules/@atlaskit/icon/glyph/check.js"),g=s.n(f),h=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),y=s.n(h),O=s("./node_modules/@atlaskit/icon/glyph/unlock.js"),j=s.n(O),v=s("./node_modules/@atlaskit/select/dist/es2019/PopupSelect/PopupSelect.js"),E=s("./node_modules/react-select/dist/chunk-80640036.browser.esm.js"),k=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),w=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),S=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),C=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),I=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js"),T=Object(o.h)({
publicTooltip:{id:"issue-comment-base.comment.comment-visibility.button.public-tooltip",defaultMessage:"Visible to all users"},optionsTooltip:{id:"issue-comment-base.comment.comment-visibility.button.options-tooltip",defaultMessage:"Only visible to {value}"}}),P=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const _=P.default.div(["display:flex;align-items:center;",";"],(e=>e.removeIconMargin?`margin: 0 ${-S.e/2}px;`:null)),x=P.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:250px;"]);function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function A(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function L(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?A(Object(s),!0).forEach((function(t){M(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):A(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function M(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function R(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const N=(e,t)=>{const s=e(t),{buttonStyles:n}=s,a=R(s,["buttonStyles"]);return L({buttonStyles:L(L({},n),{},{maxWidth:"300px"})},a)
},F=({selectedOption:e,isSelected:t})=>{const s="public"===e.type,n=s?j.a:y.a,i=s?a.a.createElement(o.c,T.publicTooltip):a.a.createElement(o.c,D({},T.optionsTooltip,{values:{value:e.value}}));return a.a.createElement(w.a,{content:i,position:"left"},a.a.createElement(I.a,{spacing:"default",theme:N,isSelected:t,shouldFitContainer:!0,iconBefore:a.a.createElement(_,{removeIconMargin:!s},a.a.createElement(n,{label:""}))},!s&&a.a.createElement(x,null,e.value)))};F.displayName="TargetButton";var U=F,V=s("./src/packages/platform/controllers/intl/src/index.js"),K=Object(o.h)({errorMessage:{id:"issue-comment-base.comment.comment-visibility.error-image.error-message",defaultMessage:"We couldn't load the visibility options"}}),W=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/assets/Error.svg"),B=s.n(W)
;const H=P.default.div(["width:","px;"],25*S.e),$=P.default.div(["width:","px;height:","px;margin:12px 0;background:center no-repeat url(",");"],10*S.e,10*S.e,B.a),G=P.default.div(["display:flex;flex-direction:column;align-items:center;"]),q=P.default.p(["color:",";text-align:center;"],k.a.N200),z=()=>{const e=Object(V.c)();return a.a.createElement(H,null,a.a.createElement(G,null,a.a.createElement($,null),a.a.createElement(q,null,e.formatMessage(K.errorMessage))))};z.displayName="ErrorImage";var Y=z,Q=Object(o.h)({visibleToAllUsers:{id:"issue-comment-base.comment.comment-visibility.visible-to-all-users",defaultMessage:"Visible to all users"},projectRolesLabel:{id:"issue-comment-base.comment.comment-visibility.project-roles-label",defaultMessage:"Project roles"},groupsLabel:{id:"issue-comment-base.comment.comment-visibility.groups-label",defaultMessage:"Groups"}
}),J=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),Z=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/view/utils.js");function X(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ee(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?X(Object(s),!0).forEach((function(t){te(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):X(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function te(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const se=(e,t,s)=>e.filter((e=>e.type===s)).map((e=>ee(ee({},e),{},{selected:!!e&&Object(Z.a)(e,t)}))),ne=e=>({
label:"",options:[ee(ee({},J.a),{},{selected:"public"===e.type})]});var ae=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js");const ie=P.default.div(["display:flex;justify-content:center;align-items:center;height:","px;"],18*S.e),re=()=>a.a.createElement(ie,null,a.a.createElement(ae.a,null));re.displayName="LoadingSpinner";const oe=P.default.div(["display:flex;justify-content:left;align-items:center;"]),ce=P.default.span(["padding:0 5px 0 0;flex-shrink:0;max-height:","px;"],3*S.e),le=P.default.span(["margin-left:","px;max-height:","px;"],S.e/2,3*S.e),ue=P.default.div(["font-size:11px;font-weight:initial;padding-top:4px;"]),de=P.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),pe=P.default.div(["display:flex;justify-content:center;padding:","px;"],2*S.e),me=P.default.div(["min-width:","px;margin-left:","px;"],4.5*S.e,S.e/2);function be(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function fe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?be(Object(s),!0).forEach((function(t){ge(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):be(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ge(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const he="commentVisibilityView",ye=({label:e})=>e&&a.a.createElement(ue,null,e),Oe={container:e=>fe(fe({},e),{},{paddingBottom:"0",paddingTop:"0"}),group:e=>fe(fe({},e),{},{paddingBottom:"4px",paddingTop:"0"}),option:(e,{data:{selected:t},isFocused:s})=>{const n=s?k.a.N20:e.backgroundColor,a=t?k.a.B50:n;return fe(fe({},e),{},{backgroundColor:a})}},je=()=>({placement:"bottom-end",modifiers:[{
name:"offset",options:{offset:[0,S.e]}},{name:"setZIndex",enabled:!0,phase:"read",fn:({state:e})=>{var t;return fe(fe({},e),{},{styles:fe(fe({},e.styles),{},{popper:fe(fe({},null===(t=e.styles)||void 0===t?void 0:t.popper),{},{zIndex:S.f.modal})})})}},{name:"preventOverflow",options:{padding:5,escapeWithReference:!0}}]}),ve=Object(C.a)("commentVisibilitySelect",{onOpen:"opened",onChange:"changed"})(v.a),Ee=({value:e,selected:t,isPublic:s})=>{const n=s?j.a:y.a;return a.a.createElement(w.a,{content:e,delay:2e3},a.a.createElement(oe,null,a.a.createElement(ce,null,a.a.createElement(n,{label:""})),a.a.createElement(de,null,e),a.a.createElement(le,null,t?a.a.createElement(g.a,{primaryColor:k.a.B500,label:""}):null)))};Ee.displayName="OptionLabel";const ke=({isLoading:e,options:t,initialValue:s,onChange:i,error:r,intl:{formatMessage:o}})=>{
const c=e||r,[d,m]=Object(n.useState)(s),[f,g]=Object(n.useState)(!1),h=Object(n.useCallback)((()=>g(!0)),[]),y=Object(n.useCallback)((()=>g(!1)),[]),O="public"===s.type;if((c||b()(t))&&O)return null;const j=c||null==t?((e,t,s)=>{const n=[ne(t)];if(e){const a=e.type===t.type&&e.value===t.value;n.push({label:"group"===e.type?s(Q.groupsLabel):s(Q.projectRolesLabel),options:[ee(ee({},e),{},{selected:a})]})}return n})(s,d,o):((e,t,s)=>[ne(s),{label:t(Q.projectRolesLabel),options:se(e,s,"role")},{label:t(Q.groupsLabel),options:se(e,s,"group")}])(t,o,d),v=c?{MenuList:e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(E.z.MenuList,e,e.children),a.a.createElement(pe,null,r?a.a.createElement(Y,null):a.a.createElement(re,null)))}:void 0;return a.a.createElement(a.a.Fragment,null,a.a.createElement(l.a,{onMount:e=>Object(u.b)(e,"commentVisibilitySelect rendered")}),a.a.createElement(me,null,a.a.createElement(ve,{onClose:y,onOpen:e=>{h();const s=p()(t,"type");Object(u.h)(e,he,{
roleCount:s.role||0,groupCount:s.group||0,totalCount:null==t?1:t.length+1})},maxMenuWidth:300,minMenuWidth:175,maxMenuHeight:340,formatOptionLabel:({type:e,value:t,selected:s})=>{const n="public"===e;return a.a.createElement(Ee,{isPublic:n,selected:s,value:n?o(Q.visibleToAllUsers):t})},popperProps:je(),components:v,styles:Oe,formatGroupLabel:ye,options:j,target:({ref:e})=>a.a.createElement("div",{ref:e},a.a.createElement(U,{selectedOption:d,isSelected:f})),isLoading:e,error:r,onChange:(e,t,s)=>{(e=>{i(e),m(e)})((({type:e,value:t})=>({type:e,value:t}))(e)),Object(u.h)(s,he)},isSearchable:null!=t&&t.length+1>30,searchThreshold:30})))};var we=Object(c.a)([o.i])((e=>a.a.createElement(a.a.Fragment,null,a.a.createElement(l.a,{onMount:t=>{Object(u.b)(t,"commentVisibilitySelect mounted",{isLoading:e.isLoading})}}),a.a.createElement(ke,e))));const Se=({initialValue:e,onChange:t})=>a.a.createElement(r.a,null,(({loading:s,error:n,data:i})=>a.a.createElement(we,{initialValue:e,onChange:t,
isLoading:s,error:n,options:i?i.commentVisibilities:null})));Se.displayName="CommentVisibilitySelect";t.a=Object(i.a)()(Se)},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/components/subscriber.js":function(e,t,s){"use strict";var n=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js"),a=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/store.js");t.a=Object(n.a)(a.a,{displayName:"CommentVisibilitiesSubscriber"})},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/store.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),i=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),r=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),o=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js");const c=async(e,t)=>{const{errors:s,data:n}=await Object(r.a)(e).query({query:"\nquery CommentVisibilitiesQuery($issueKey: String!) {\n    viewIssue(issueKey: $issueKey) {\n        commentVisibilities {\n            type\n            value\n        }\n    }\n}\n",variables:{issueKey:t}});if(s)throw new Error("GraphqlErrorResponse");if(n&&n.viewIssue&&n.viewIssue.commentVisibilities){return(e=>e.map(o.f))(n.viewIssue.commentVisibilities)}throw new Error("GraphqlNullData")};var l={fetch:()=>async({getState:e,setState:t},{issueKey:s,baseUrl:n,createAnalyticsEvent:r})=>{const o=e()
;if(!(o.loading||o.error||o.data)){t({loading:!0,error:null,data:null});try{const e=await c(n,s);t({loading:!1,error:null,data:{commentVisibilities:e}}),((e,t)=>{const s=e({action:"fetched"}),n={totalCount:t.length,roleCount:t.filter((e=>"role"===e.type)).length,groupCount:t.filter((e=>"group"===e.type)).length};Object(i.c)(s,"commentVisibilities fetched",n)})(r,e)}catch(l){(e=>{const t="GraphqlErrorResponse"===e.message||"GraphqlNullData"===e.message?e.message:"other";Object(a.a)("issue.fetch.comment-visibilities","An error occurred attempting to fetch comment visibilities from gira",e,{errorReason:t})})(l),t({loading:!1,error:l,data:null})}}}};t.a=Object(n.a)({name:"issue-view-comment-visibilities",initialState:{data:null,loading:!1,error:null},actions:l})},"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/view/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t)=>e.value===t.value&&e.type===t.type},
"./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["flex:1 1 100%;min-width:0;input{font:inherit;}"])},"./src/packages/issue/issue-context-service/src/main.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return L})),s.d(t,"g",(function(){return M})),s.d(t,"f",(function(){return R})),s.d(t,"i",(function(){return N})),s.d(t,"a",(function(){return F})),s.d(t,"e",(function(){return U})),s.d(t,"k",(function(){return V})),s.d(t,"c",(function(){return K})),s.d(t,"l",(function(){return W})),s.d(t,"b",(function(){return B})),s.d(t,"h",(function(){return H})),s.d(t,"j",(function(){return $})),s.d(t,"m",(function(){return G}));var n={};s.r(n),s.d(n,"setIssueContext",(function(){return m})),s.d(n,"mergeIssueContext",(function(){return b})),s.d(n,"getMaxTokenLength",(function(){return f})),
s.d(n,"getIsLoadedWithPage",(function(){return g})),s.d(n,"getBackButtonUrl",(function(){return h})),s.d(n,"getIsSpaEnabled",(function(){return y})),s.d(n,"getIssueKey",(function(){return O}));var a=s("./node_modules/react/index.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),c=s("./node_modules/react-sweet-state/lib/esm/components/container.js"),l=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const m=e=>({setState:t})=>{t(e)},b=e=>({getState:t,setState:s})=>{s(d(d({},t()),e))},f=()=>({getState:e})=>e().maxTokenLength,g=()=>({getState:e})=>e().isLoadedWithPage,h=()=>({getState:e})=>e().backButtonUrl,y=()=>({getState:e})=>e().isSpaEnabled,O=()=>({getState:e})=>e().issueKey,j={issueKey:Object(i.l)(""),issueId:void 0,isModal:!1,maxTokenLength:0,isLoadedWithPage:!1,rapidViewMap:void 0,estimationStatistic:void 0,isLoading:!1,viewMode:void 0,analyticsSource:void 0,backButtonUrl:void 0,boardId:void 0,boardType:void 0,isSpaEnabled:!1,loginRedirectUrl:void 0,onIssueKeyChange:void 0,rapidViewId:void 0,viewScreenId:void 0},v=Object(r.a)({name:"issue-context",
initialState:j,actions:n}),E=(Object(o.a)(v,{selector:e=>e}),Object(o.a)(v,{selector:e=>e.issueKey})),k=Object(o.a)(v,{selector:e=>e.issueId}),w=Object(o.a)(v,{selector:e=>e.isModal}),S=Object(o.a)(v,{selector:e=>e.viewScreenId}),C=Object(o.a)(v,{selector:e=>void 0!==e.analyticsSource?new l.a(e.analyticsSource):void 0}),I=Object(o.a)(v,{selector:e=>e.rapidViewMap}),T=(Object(o.a)(v,{selector:e=>e.maxTokenLength}),Object(o.a)(v,{selector:e=>e.isLoadedWithPage}),Object(o.a)(v,{selector:e=>e.estimationStatistic})),P=(Object(o.a)(v,{selector:e=>e.isLoading}),Object(o.a)(v,{selector:e=>e.viewMode})),_=Object(o.a)(v,{selector:e=>e.backButtonUrl}),x=(Object(o.a)(v,{selector:e=>e.boardId}),Object(o.a)(v,{selector:e=>e.boardType}),Object(o.a)(v,{selector:e=>e.isSpaEnabled}),Object(o.a)(v,{selector:e=>e.loginRedirectUrl}),Object(o.a)(v,{selector:e=>e.onIssueKeyChange})),D=Object(o.a)(v,{selector:e=>e.rapidViewId}),A=(Object(c.a)(v),Object(o.a)(v,{selector:null})),L=()=>{const[e]=w();return e
},M=()=>{const[e]=E();return e},R=()=>{const[e]=k();return e},N=()=>{const[e]=E();return Object(i.r)(e.split("-")[0])},F=()=>{const[e]=C();return e},U=()=>{const[,{setIssueContext:e,mergeIssueContext:t,getMaxTokenLength:s,getIsLoadedWithPage:n,getBackButtonUrl:i,getIsSpaEnabled:r,getIssueKey:o}]=A();return[void 0,Object(a.useMemo)((()=>({setIssueContext:e,mergeIssueContext:t,getMaxTokenLength:s,getIsLoadedWithPage:n,getBackButtonUrl:i,getIsSpaEnabled:r,getIssueKey:o})),[e,t,s,n,i,r,o])]},V=()=>{const[e]=I();return e},K=()=>{const[e]=T();return e},W=()=>{const[e]=P();return e},B=()=>{const[e]=_();return e},H=()=>{const[e]=x();return e},$=()=>{const[e]=D();return e},G=()=>{const[e]=S();return e}},"./src/packages/issue/issue-context-service/src/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n="VIEW_MODE_MODAL",a="VIEW_MODE_SIDEBAR"},
"./src/packages/issue/issue-fetch-services-common/src/common/utils/permalinks.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const n={COMMENTS:"focusedCommentId",WORKLOG:"focusedWorklogId"},a=e=>{if(!n[e])return null;return(()=>{let e=window.location.search.slice(1);const t={};if(e){e=e.split("#")[0];const s=e.split("&");for(let e=0;e<s.length;e+=1){const n=s[e].split("="),a=n[0],i=void 0===n[1]||decodeURIComponent(n[1]);t[a]=i}}return t})()[n[e]]}},"./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>65536},"./src/packages/issue/issue-fetch-services-common/src/feature-flags.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return d}));let n=null;const a=()=>(n||(n=(()=>{
const e=document.querySelector('meta[name="ajs-fe-feature-flags"]'),t=null==e?void 0:e.getAttribute("content"),s=window.featureFlags;return s?JSON.parse(s):null!=t?JSON.parse(t):null})()||(()=>{var e;return null!==(e=window.ssr__feFeatureFlags)&&void 0!==e?e:null})()||{}),n),i=(e,t=!1)=>{const s=a();return s[e]?!!s[e].value:t},r=()=>i("issue.details.stop-fetch-preview",!1),o=()=>i("issue.details.bento-9478-activity-sort-order-revision",!1),c=()=>i("shpl-113-sort-issue-under-epic",!1),l=()=>i("issue.details.pinned-fields-click-through-banner",!1),u=()=>i("issue.details.bento-9421-fix-time-tracking-format",!1),d=()=>i("collapse-nextgen-issuetype-hierarchy-fe-reads-y",!1)},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/activity-sort-order/index.js":function(e,t,s){"use strict";t.a=()=>"activitySortOrder"},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/attachments/index.js":function(e,t,s){
"use strict";t.a=()=>"attachments(orderDirection: DESC, orderField: CREATED, maxResults: 6) {\n            nodes {\n              id\n              filename\n              mimetype\n              mediaApiFileId\n              createdDate\n              filesize\n              parentName\n              author {\n                  accountId\n              }\n              parentId\n              isParentCommentJsdInternal\n            }\n            totalCount\n            deletableCount\n          }\n    "},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/comments/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/common/utils/permalinks.js");t.a=({maxResults:e,startAt:t,orderBy:s,commentAmount:a})=>{const i=Object(n.a)("COMMENTS"),r=null!=i?`, commentId: ${i}`:""
;return`\n        comments (first: ${t}${""===r&&null!=e?`, maxResults: ${e}`:""}${null!=s?`, orderBy: "${s}"`:""}${r}${""!==r&&null!=a?`, commentAmount: ${a}`:""}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                visibility {\n                    type\n                    value\n                }\n                created\n                updated\n                jsdPublic\n                bodyAdf\n            }\n            totalCount\n            startIndex\n        }\n    `}},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/ecosystem/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}))
;const n=()=>`\n    ecosystem {\n      operations {\n        name\n        url: href\n        icon {\n          url\n        }\n        tooltip\n        styleClass\n      }\n      contentPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        icon {\n          url\n        }\n        tooltip\n        type\n        showByDefault\n        manuallyAddedToIssue\n      }\n      activityPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n      }\n      backgroundScripts {\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        shouldReloadOnRefresh\n      }\n      ecoSystemOnDate\n      contentPanelsCustomised\n      ${(()=>"forge {\n        panels {\n          id\n          instances {\n            id\n            collapsed\n            added\n          }\n        }\n      }")()}\n    }\n`,a=()=>"\n      ... on GlancesField {\n        fieldKey\n        value {\n          name\n          status\n          iframe {\n            addonKey\n            moduleKey\n            options\n          }\n          icon {\n            url\n          }\n          content\n          type\n        }\n      }\n"
},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-key/index.js":function(e,t,s){"use strict";t.a=()=>"\n    ... on IssueKeyField {\n        fieldKey\n        stringValue\n    }\n"},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-sections/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n}))
;const n=()=>`\n  ${(()=>"\nfragment groupItems on GroupSectionItem {\n    ... on FieldSectionItem {\n      id\n    }\n    ... on PanelSectionItem {\n      id\n    }\n    ... on EcosystemSectionItem {\n      id\n    }\n    ... on ForgeSectionItem {\n      id\n    }\n  }")()}\n  ${(()=>"\n  fragment sectionItems on SectionItem {\n    type: __typename\n    ... on FieldSectionItem {\n      id\n    }\n    ... on TabLayout {\n      id\n      name\n      items {\n        ... on FieldSectionItem {\n          id\n        }\n      }\n    }\n    ... on PanelSectionItem {\n      id\n    }\n    ... on EcosystemSectionItem {\n      id\n    }\n    ... on ForgeSectionItem {\n      id\n    }\n    ... on GroupLayout {\n      id\n      name\n      items {\n        ...groupItems\n      }\n    }\n  }")()}\n  ${(()=>"\nfragment section on Section {\n    items {\n      ...sectionItems\n    }\n  }\n  ")()}\n  `
;t.a=()=>"\n  issueSections {\n    templateKey: __typename\n    ... on PrimarySecondaryContextSections {\n      contentSection {\n        ...section\n      }\n      primaryContextSection {\n        ...section\n      }\n      secondaryContextSection {\n        ...section\n      }\n    }\n    ... on JsdSections {\n      requestPortalSection {\n        ...section\n      }\n      contentSection {\n        ...section\n      }\n      primaryContextSection {\n        ...section\n      }\n      secondaryContextSection {\n        ...section\n      }\n    }\n  }\n  "},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/jira-settings/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/feature-flags.js")
;t.a=()=>`\n        jiraSettings {\n          ${(()=>`\n          timeTracking {\n            isTimeTrackingEnabled\n            hoursPerDay\n            daysPerWeek\n            defaultUnit\n            ${Object(n.c)()?"format":""}\n          }\n    `)()}\n          ${(()=>"\n          subtasks {\n            enabled\n          }\n    ")()}\n          issueLinkTypes {\n            id\n            name\n            inward\n            outward\n          }\n          newIssueViewTransitionSettings {\n            shouldDelayChangeboarding\n            newIssueViewTransitionLockingStatus\n         }\n        }\n    `},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/layout/index.js":function(e,t,s){"use strict";t.a=()=>"\n    layoutItems {\n        location\n        category\n        items {\n        itemId\n        type\n        }\n    }\n"},
"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/licensed-products/index.js":function(e,t,s){"use strict";t.a=()=>"\n    licensedProducts {\n        name\n        status\n    }\n"},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/media-context/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js")
;t.a=()=>`mediaContext(issueKey: $issueKey) {\n    userToken {\n      token\n      id\n      issueId\n      tokenDurationInMins\n    }\n    uploadToken {\n      __typename\n      ... on MediaUploadToken {\n        endpointUrl\n        token\n        targetCollection\n        tokenDurationInMins\n        clientId\n      }\n      ... on FailedMediaUploadToken {\n        error\n      }\n    }\n    readToken(maxTokenLength: ${Object(n.a)()}) {\n      clientId\n      endpointUrl\n      tokensWithFiles {\n        files {\n          issueId\n          attachmentId\n          attachmentMediaApiId\n        }\n        token\n      }\n      tokenLifespanInSeconds\n    }\n  }`},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/my-preferences/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/feature-flags.js")
;t.a=e=>`\n    myPreferences(keys: [\n        "jira.user.issue.changeboarding.lastinteracted",\n        "jira.user.issue.clickthrough-banner.lastinteracted",\n        "jira.user.issue.attachment.view",\n        "jira.user.issue.details.pinned-fields.${e}",\n        "jira.user.issue.details.timestamp-display-setting",\n        ${Object(n.d)()?'"jira.user.issue.pinned-fields-banner.lastinteracted",':""}\n        "jira.user.issue.cross-join-via-epic-touchpoint.dismissed"\n    ])\n`},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/permissions/index.js":function(e,t,s){"use strict"
;t.a=()=>`\n    permissions(issueKey:$issueKey, keys:["${(()=>["ADMINISTER","ADMINISTER_PROJECTS","ASSIGN_ISSUES","EDIT_ISSUES","SCHEDULE_ISSUES","ADD_COMMENTS","DELETE_ALL_COMMENTS","DELETE_OWN_COMMENTS","EDIT_ALL_COMMENTS","EDIT_OWN_COMMENTS","CREATE_ISSUES","DELETE_ISSUES","MOVE_ISSUES","MODIFY_REPORTER","CREATE_ATTACHMENTS","DELETE_ALL_ATTACHMENTS","DELETE_OWN_ATTACHMENTS","WORK_ON_ISSUES","ASSIGNABLE_USER","LINK_ISSUES","VIEW_VOTERS_AND_WATCHERS","MANAGE_WATCHERS","EDIT_ALL_WORKLOGS","EDIT_OWN_WORKLOGS","DELETE_ALL_WORKLOGS","DELETE_OWN_WORKLOGS","USER_PICKER","VIEW_DEV_TOOLS","SERVICEDESK_AGENT","RESOLVE_ISSUES","CREATE_SUBTASK","CLONE_ISSUE"])().join('","')}"]) {\n        key\n        havePermission\n    }\n`},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/project/index.js":function(e,t,s){"use strict"
;t.a=()=>"\n    project(projectKey: $projectKey) {\n        id\n        newIssueViewLockedIn\n        issueTypes {\n            id\n            name\n            iconUrl\n            subtask\n        }\n    }\n"},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/remote-links/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>"\n    remoteLinks {\n        isLinkingEnabled\n        remoteLinkedIssues {\n            preview {\n                id\n                issueId\n                globalId\n                href\n                applicationType\n                applicationName\n                relationship\n                title\n            }\n        }\n    }            \n"},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/worklogs/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/common/utils/permalinks.js")
;t.a=({startAt:e,orderBy:t,worklogAmount:s})=>{const a=null!=t?`, orderBy: "${t}"`:"",i=Object(n.a)("WORKLOG");if(null==i)return"";return`\n        worklogs (startAt: ${e}${a}${`, worklogId: ${i}`}${null!=s?`, worklogAmount: ${s}`:""}) {\n            nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                created\n                started\n                updated\n                comment\n                timeSpent\n                timeSpentSeconds\n            }\n            totalCount\n            startIndex\n        }\n    `}},"./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return O})),s.d(t,"d",(function(){return j})),
s.d(t,"b",(function(){return v})),s.d(t,"c",(function(){return E}))
;var n=s("./src/packages/issue/issue-fetch-services-common/src/feature-flags.js"),a=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/media-context/index.js"),i=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/comments/index.js"),r=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/worklogs/index.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/ecosystem/index.js"),c=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-key/index.js"),l=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/attachments/index.js"),u=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/layout/index.js"),d=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/issue-sections/index.js"),p=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/remote-links/index.js"),m=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/licensed-products/index.js"),b=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/jira-settings/index.js"),f=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/permissions/index.js"),g=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/my-preferences/index.js"),h=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/project/index.js"),y=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/gira-fragments/activity-sort-order/index.js")
;const O="issueViewInteractiveQuery",j=e=>`${e}/rest/gira/1/`,v=e=>`\nquery ${O}($issueKey: String!, $projectKey: String)  {\n        ${Object(a.a)()}\n        viewIssue(issueKey: $issueKey) {\n            ${Object(n.f)()?"issueId":""}\n            ${Object(i.a)({maxResults:5,startAt:0,orderBy:Object(n.a)()?"-created":void 0,commentAmount:Math.floor(5)})}\n            ${Object(r.a)({startAt:0,worklogAmount:Math.floor(5)})}  \n            ${Object(o.a)()}\n            fields {\n                __typename\n                    ${Object(o.b)()}\n                    ${Object(n.f)()?Object(c.a)():""}\n            }\n            ${Object(l.a)()}\n            ${Object(u.a)()}            \n            ${Object(d.a)()}     \n            ${Object(p.a)()}\n        }\n        ${Object(m.a)()}\n        ${Object(b.a)()}\n        ${Object(f.a)()}\n        ${Object(g.a)(e)}\n        ${Object(h.a)()}\n        ${Object(y.a)()}\n    }\n    ${Object(d.b)()}\n    \n`,E=(e,t)=>({method:"POST",
body:JSON.stringify({query:v(t),variables:{issueKey:e,projectKey:t}})})},"./src/packages/issue/issue-fetch-services-common/src/services/issue-graphql-data/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./src/packages/issue/issue-fetch-services-common/src/feature-flags.js");const a=(e,...t)=>{let s="";return t.forEach(((t,n)=>{s+=e[n],s+=t.toString()})),s+=e[e.length-1],s};var i=(e,t)=>a`query {
        issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
            id
            viewScreenId 
            fields {
                key
                title
                editable
                required
                autoCompleteUrl
                allowedValues
                content
                renderedContent
                schema {
                    custom
                    system
                    ${(()=>"configuration {\n        key\n        value\n    }\n    ")()}
                    items
                    type
                    renderer
                }
                configuration
            }
            expandAssigneeInSubtasks
            expandAssigneeInIssuelinks
            expandTimeTrackingInSubtasks
            ${Object(n.e)()?"expandSystemDateTimesForChildIssues":""}
            systemFields {
                descriptionAdf {
                    value
                }
                ${(()=>"environmentAdf {\n        value\n    }")()}
            }
            customFields {
                textareaAdf {
                    key
                    value
                }
            }            
            ${(()=>"tabs {\n        id\n        name\n        items {\n            id\n            type\n        }\n    }")()}
            ${(()=>"\n    isHybridAgilityProject\n    ")()}
            ${(()=>"\n    agile {\n        epic {\n          key\n        },\n    }")()}
        }
        project(projectIdOrKey: "${t}") {
            id
            name
            key
            projectTypeKey
            simplified
            avatarUrls {
                key
                value
            }
            ${Object(n.b)()?"":(()=>"issueTypeHierarchy {\n        baseLevelId\n        levels {\n            id\n            aboveLevelId\n            belowLevelId\n        }\n    }\n    ")()}
        }
    }`;const r=e=>`${e}/rest/graphql/1/`,o=(e,t)=>({method:"POST",body:JSON.stringify({query:i(e,t)})})},"./src/packages/issue/issue-fetch-services/src/common/utils/client.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");let a=null;const i=e=>(a||(a=(e=>({query:({query:t,variables:s})=>Object(n.a)(`${e}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:t,variables:s})})}))(e)),a)},"./src/packages/issue/issue-fetch-services/src/common/utils/get-project-data.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=e=>Object(n.r)(e.split("-")[0])},"./src/packages/issue/issue-fetch-services/src/services/issue-forge-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}))
;var n=s("./src/packages/forge/forge-ui/src/utils/fetch-modules/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const i=()=>Object(a.b)("forge_custom_field_types_qwxh8",!1),r=async(e,t)=>{const s=["jira:issueAction","jira:issueGlance","jira:issuePanel","jira:issueActivity","jira:customField",...i()?["jira:customFieldType"]:[]],a=Object(n.a)(e,t,s),r=await a,[o,c,l,u,d,p]=r;return{issueAction:o,issueGlance:c,issuePanel:l,issueActivity:u,customField:d,customFieldType:p}}},"./src/packages/issue/issue-fetch-services/src/services/issue-gira-data/index.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),a=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),i=s("./src/packages/issue/issue-fetch-services/src/common/utils/get-project-data.js");t.a=async(e,t)=>{const s=Object(i.a)(t),r={issueKey:t,projectKey:s};return await Object(a.a)(e).query({
query:Object(n.b)(s),variables:r})}},"./src/packages/issue/issue-fetch-services/src/services/issue-graphql-data/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),a=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-graphql-data/index.js");const i=(e,t,s)=>Object(n.a)(Object(a.b)(e),Object(a.a)(t,s))},"./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));s("./node_modules/rxjs/Observable.js");var n=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");const i=(e,t,s)=>`${e}/rest/api/2/attachment/read/issue/${t}/credentials?maxTokenLength=${s}`
;var r=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),o=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const c=(e,t,s,a)=>Object(n.a)(i(e,t,s),{perf:r.i,headersProcessor:a&&a(r.i.key)}).catch((e=>{throw new o.a(e,i("{baseUrl}","{issueKey}","{maxTokenLength}"))})),l=(e,t,s,n)=>Object(a.a)(i(e,t,s),{perf:r.i,headersProcessor:n&&n(r.i.key)})},"./src/packages/issue/issue-fetch-services/src/services/issue-media-upload-permissions/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json.js");const i=(e,t)=>`${e}/rest/api/2/attachment/upload/issue/${t}/credentials`;var r=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const o=(e,t)=>Object(n.a)(i(e,t)).catch((e=>{throw new r.a(e,i("{baseUrl}","{issueKey}"))
})),c=(e,t)=>Object(a.a)(i(e,t))},"./src/packages/issue/issue-glance/src/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return I}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),r=s.n(i),o=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),u=s("./src/packages/issue/fields/components/field-heading/src/styled.js"),d=s("./src/packages/issue/fields/components/field-pin/src/index.js"),p=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const f=p.default.div(["position:relative;overflow:hidden;display:flex;border-radius:5px;margin:0 0 0 -","px;&:hover{background:",";cursor:pointer;}&:focus{box-shadow:0 0 0 2px ",";outline:0;background:",";}height:","px;align-items:center;"],b.e,m.a.N20,m.a.B100,m.a.N20,4*b.e),g=p.default.div(["overflow:hidden;margin:","px 0 ","px ","px;height:","px;width:","px;align-items:center;"],b.e,b.e,b.e,3*b.e,3*b.e),h=Object(p.default)(g)(["margin:0 0 0 ","px;padding-left:","px;padding-right:","px;"],b.e,.25*b.e,.25*b.e),y=p.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;padding-left:","px;line-height:inherit;"],b.e),O=p.default.div(["position:absolute;right:0;width:","px;height:","px;background-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,"," 25%);"],7*b.e,5*b.e,m.a.N20),j=p.default.div(["position:absolute;right:0;margin:6px ","px ","px;height:26px;width:26px;background:",";color:",";border-radius:50%;align-items:center;padding:2px 0 0 2px;"],b.e,b.e/2,m.a.N30,m.a.N60),v=Object(p.keyframes)(["0%{right:-28px;}100%{right:0;}"]),E=p.default.div(["position:absolute;animation:"," 0.15s ease-in-out;"],v)
;function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function w(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function S(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?w(Object(s),!0).forEach((function(t){C(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):w(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function C(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class I extends n.Component{constructor(...e){super(...e),this.state={isHovering:!1},
this.handleOpenGlancePanel=()=>{const{onClickPayload:e,title:t,onOpenPanel:s}=this.props;s(S(S({},e),{},{title:t}))},this.eventHandlers={onClick:this.handleOpenGlancePanel,onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})}}render(){const{title:e,Icon:t,content:s,showPinButton:n,itemId:i}=this.props,p=s.length<=170?s:`${s.substring(0,170).trim()}\u2026`;return a.a.createElement(u.d,null,e&&a.a.createElement(u.b,null,a.a.createElement(u.c,null,e),!0===n&&a.a.createElement(d.a,{fieldId:i,label:e})),a.a.createElement(u.g,{fixedHeight:!0},a.a.createElement(o.a,{content:p},a.a.createElement(l.a,{onEnter:this.handleOpenGlancePanel},a.a.createElement(f,k({tabIndex:"0"},this.eventHandlers),t&&a.a.createElement(h,null,a.a.createElement(t,null)),a.a.createElement(y,null,s),this.state.isHovering&&a.a.createElement(c.a,{mountAnimation:E
},a.a.createElement(O,null,a.a.createElement(j,null,a.a.createElement(r.a,{size:"medium",label:""})))))))))}}I.displayName="Glance",I.displayName="Glance",I.defaultProps={Icon:null}},"./src/packages/issue/issue-scroll/src/services/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return p}));var n={};s.r(n),s.d(n,"setScrollTarget",(function(){return r})),s.d(n,"getScrollTargetId",(function(){return o}));var a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js");const r=e=>({setState:t})=>{t({scrollTarget:e})},o=e=>({getState:t})=>{const s=t();return s.scrollTarget&&s.scrollTarget.type===e&&s.scrollTarget.id||null},c=Object(i.a)({name:"issue-scroll",initialState:{scrollTarget:null},actions:n}),l=Object(a.a)(c,{selector:e=>e.scrollTarget}),u=Object(a.a)(c,{selector:null}),d=()=>{const[e,{setScrollTarget:t,getScrollTargetId:s}]=l();return[{scrollTarget:e},{
setScrollTarget:t,getScrollTargetId:s}]},p=()=>{const[,{setScrollTarget:e,getScrollTargetId:t}]=u();return[void 0,{setScrollTarget:e,getScrollTargetId:t}]}},"./src/packages/issue/issue-scroll/src/services/types.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=Object.freeze({COMMENT:"COMMENT",WORKLOG:"WORKLOG"})},"./src/packages/issue/issue-tabs/src/services/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return p}));var n={};s.r(n),s.d(n,"setIssueTabs",(function(){return o}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/store/create.js");const o=(e,t)=>({setState:s})=>{s({[String(e)]:t})},c=Object(r.a)({name:"issue-tabs",initialState:{},actions:n}),l=Object(i.a)(c,{selector:(e,t)=>e[String(t)]||{}}),u=Object(i.a)(c,{selector:null}),d=e=>{const[t]=l(e);return[{issueTabs:t}]},p=()=>{const[,e]=u()
;return[null,Object(a.useMemo)((()=>({setIssueTabs:(t,s)=>e.setIssueTabs(t,s)})),[e])]}},"./src/packages/issue/issue-view-layout-templates/components/item-list/src/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return y}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/issue/issue-context-service/src/main.js")),r=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),o=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),l=s("./src/packages/issue/issue-view-layout/src/services/main.js"),u=s("./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js"),d=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),p=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var f=({id:e,type:t,area:s,payload:r={}})=>{
const f=Object(u.a)(),g=Object(i.g)(),[,{setIssueViewLayoutContextPanel:h}]=Object(l.a)(),{createAnalyticsEvent:y}=Object(d.a)(),O=Object(n.useCallback)((s=>{Object(p.h)(y({}),"contextPanel viewed","issueContextPanel",{contextPanelKey:e,contextPanelType:t,tabItemsCount:s.tabItems?s.tabItems.length:0}),h(g,{payload:s,title:null==s?void 0:s.title,type:t,key:e})}),[y,e,t,h,g]);if(f[t]){const n=f[t].item;return a.a.createElement(n,b({},r,{key:e,fieldId:e,area:s,onOpenPanel:O}))}const j=(()=>Object(m.b)("issue.details.log-field-type-when-matching-component-not-available",!1))()?`Could not find a matching component for "${e}" of type "${t}"`:`Could not find a matching component for "${e}"`;return c.a.safeErrorWithoutCustomerData("issue.views.issue-base.context",j,new o.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null},g=s("./src/packages/issue/issue-view-layout-templates/utils/src/index.js"),h=s("./src/packages/servicedesk/common/src/global-spotlight-target/index.js")
;const y=({items:e,area:t})=>{const s=Object(i.g)(),[n]=Object(r.c)(s);return e.map((e=>{if("CustomItem"===e.type)return a.a.createElement("div",{key:e.id},e.item);if(null==n)return null;const{type:s,id:i}=Object(g.a)(n[e.id],e);if((()=>Object(m.b)("issue.details.fix.use-primary-secondary-hook.layout-items",!1))()&&Object(g.b)({type:s,id:i}))return null;const r=e.globalRef?e.globalRef:"";let o={};(()=>{Object(m.b)("issue.details.layout-flow-fix",!1)})()?"ecosystemGlance"!==e.type&&"forgeGlance"!==e.type||(o=e.payload):o=e.payload||{};const c=a.a.createElement(f,{key:i,id:i,type:s,area:t,payload:o});return r?a.a.createElement(h.a,{id:r,key:i},c):c}))}},"./src/packages/issue/issue-view-layout-templates/utils/src/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}))
;var n=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),a=s("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js"),i=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");const r=(e,t)=>{const{id:s}=t,r=(t.type,t.type);if("TabLayout"===r||"ecosystemGlance"===r||"forgeGlance"===r)return{type:r,id:s};if(Object(i.c)().includes(s))return{id:s,type:s};const o=Object(a.b)(e);if(null!==o)return{type:o,id:s};const c=(null==e?void 0:e.schema)||{},l=null!==c.system?c.system:"";return{type:Object(n.a)(c.custom)||l||c.type,id:s}},o=e=>{switch(e.type){case"ecosystemGlance":case"forgeGlance":case"com.pyxis.greenhopper.jira:gh-epic-status":case"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":case"assignee":case"reporter":case"description":case"environment":case"duedate":case"priority":case"labels":case"components":case"com.pyxis.greenhopper.jira:gh-sprint":
case"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":case"com.pyxis.greenhopper.jira:gh-epic-link":case"fixVersions":case"versions":case"timetracking":case"timeoriginalestimate":case"com.atlassian.jira.plugin.system.customfieldtypes:labels":case"com.atlassian.jira.plugin.system.customfieldtypes:textfield":case"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":case"com.atlassian.jira.plugin.system.customfieldtypes:url":case"com.atlassian.jira.plugin.system.customfieldtypes:float":case"com.pyxis.greenhopper.jira:jsw-story-points":case"com.atlassian.jira.plugin.system.customfieldtypes:select":case"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":case"com.atlassian.jira.plugin.system.customfieldtypes:version":case"com.atlassian.jira.plugin.system.customfieldtypes:textarea":case"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":case"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":
case"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":case"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":case"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":case"com.atlassian.jira.plugin.system.customfieldtypes:people":case"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":case"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":case"com.atlassian.jira.plugin.system.customfieldtypes:datetime":case"com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team":case"com.atlassian.teams:rm-teams-custom-field-team":case"com.atlassian.jpo:jpo-custom-field-parent":case"com.atlassian.jpo:jpo-custom-field-baseline-start":case"com.atlassian.jpo:jpo-custom-field-baseline-end":case"com.pyxis.greenhopper.jira:jsw-issue-color":case"com.atlassian.servicedesk:vp-origin":case"com.atlassian.servicedesk.approvals-plugin:sd-approvals":
case"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":case"com.atlassian.servicedesk:sd-request-participants":case"com.atlassian.servicedesk:sd-customer-organizations":case"number":case"string":case"option2":case"array":case"datetime":case"com.atlassian.servicedesk.assets-plugin:assetfield":case"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype":case"com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list":case"com.atlassian.jira.plugins.cmdb:cmdb-object-cftype":case"com.atlassian.servicedesk:sd-request-feedback":case"user":case"group-list":case"array-string":case"com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield":case"com.atlassian.jira.plugin.system.customfieldtypes:project":case"forgeCustomField":case"KNOWLEDGE_BASE":case"SLA_PANEL":case"devSummary":case"releases":case"ASSET_ONBOARDING":case"LINKED_ALERTS":
case"com.atlassian.jira.modules.servicemanagement.responders-entity:responders-entity-field-cftype":case"com.atlassian.jira.toolkit:message":case"com.atlassian.jira.toolkit:viewmessage":case"com.pyxis.greenhopper.jira:gh-epic-label":return!1;default:return!0}}},"./src/packages/issue/issue-view-layout/src/services/main.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return j})),s.d(t,"e",(function(){return v})),s.d(t,"c",(function(){return E})),s.d(t,"b",(function(){return k})),s.d(t,"a",(function(){return w}));var n={};s.r(n),s.d(n,"setIssueViewLayout",(function(){return d})),s.d(n,"setIssueViewLayoutGlance",(function(){return p})),s.d(n,"setIssueViewLayoutContextPanel",(function(){return m}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function u(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}
const d=(e,t)=>({getState:s,setState:n})=>{const{templateKey:a}=t,i=u(t,["templateKey"]);n({[String(e)]:c(c({},s()[String(e)]),{},{templateKey:a,sections:i})})},p=(e,t)=>({getState:s,setState:n})=>{n({[String(e)]:c(c({},s()[String(e)]),{},{glance:t})})},m=(e,t)=>({getState:s,setState:n})=>{n({[String(e)]:c(c({},s()[String(e)]),{},{contextPanel:t})})},b=Object(i.a)({name:"issue-view-layout-service",initialState:{},actions:n}),f=Object(r.a)(b,{selector:(e,t)=>{var s;return(null===(s=e[String(t)])||void 0===s?void 0:s.sections)||{}}}),g=Object(r.a)(b,{selector:(e,t)=>{var s;return(null===(s=e[String(t)])||void 0===s?void 0:s.templateKey)||"default"}}),h=Object(r.a)(b,{selector:(e,t)=>{var s;return null===(s=e[String(t)])||void 0===s?void 0:s.glance}}),y=Object(r.a)(b,{selector:(e,t)=>{var s;return null===(s=e[String(t)])||void 0===s?void 0:s.contextPanel}}),O=Object(r.a)(b,{selector:null}),j=e=>{const[t]=f(e);return[t]},v=e=>{const[t]=g(e);return[t]},E=e=>{const[t]=h(e);return[t]},k=e=>{
const[t]=y(e);return[t]},w=()=>{const[,e]=O();return[null,{setIssueViewLayout:Object(a.useCallback)(((t,s)=>{e.setIssueViewLayout(t,s)}),[e]),setIssueViewLayoutGlance:Object(a.useCallback)(((t,s)=>{e.setIssueViewLayoutGlance(t,s)}),[e]),setIssueViewLayoutContextPanel:Object(a.useCallback)(((t,s)=>{e.setIssueViewLayoutContextPanel(t,s)}),[e])}]}},"./src/packages/issue/issue-view/src/actions/activity-feed-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l}));var n=s("./src/packages/issue/issue-actions/activity-feed/src/messages.js");const a={key:"JSDComments",type:"JSDComments",name:n.a.comments.defaultMessage},i={key:"Comments",type:"Comments",name:n.a.comments.defaultMessage},r=e=>({type:"SELECT_ACTIVITY_ITEM",payload:e}),o=e=>({type:"SELECT_INITIAL_ACTIVITY_ITEM",payload:e}),c=e=>({
type:"SELECT_ACTIVITY_SORT_ORDER",payload:e}),l=e=>({type:"UPDATE_ACTIVITY_SORT_ORDER_REQUEST",payload:e})},"./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=(e,t)=>({type:"APPLINK_AUTHENTICATION_REQUEST",payload:e,meta:{analyticsEvent:t}}),a=()=>({type:"APPLINK_AUTHENTICATION_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"i",(function(){return u})),s.d(t,"g",(function(){return d})),s.d(t,"j",(function(){return p}));const n=()=>({type:"SHOW_ASSIGN_ISSUE_PARENT_MODAL"}),a=()=>({type:"HIDE_ASSIGN_ISSUE_PARENT_MODAL"}),i=()=>({
type:"FETCH_ISSUE_PARENTS_REQUEST"}),r=(e=[])=>({type:"FETCH_ISSUE_PARENTS_SUCCESS",payload:e}),o=()=>({type:"FETCH_ISSUE_PARENTS_FAILURE"}),c=(e,t)=>({type:"SET_PARENT_REQUEST",payload:{issues:e,parentId:t}}),l=(e,t,s)=>({type:"SET_PARENT_OPTIMISTIC",payload:{issues:e,parentIssue:t,requestPromise:s}}),u=e=>({type:"UNSET_PARENT_REQUEST",payload:{issues:e}}),d=(e,t)=>({type:"SET_PARENT_SUCCESS",payload:{parentIssue:e,oldParentIdsByIssueIds:t}}),p=e=>({type:"UNSET_PARENT_SUCCESS",payload:{oldParentIdsByIssueIds:e}})},"./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c}));const n=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_BEGIN",payload:e}),a=e=>({type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_END",payload:e}),i=e=>({
type:"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR",payload:e}),r=e=>({type:"ATTACHMENT_JIRA_CREATE_SUCCESS",payload:e}),o=(e,t)=>({type:"ATTACHMENT_JIRA_CREATE_FAILURE",payload:{attachment:e,statusCode:t}}),c=e=>({type:"MEDIA_PICKER_ERROR",payload:e})},"./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=()=>({type:"ATTACHMENT_PICKER_POPUP_OPEN_SUCCESS"}),a=()=>({type:"ATTACHMENT_PICKER_POPUP_CLOSE_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/card-cover-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"c",(function(){return o}));const n=e=>({type:"CARD_COVER_FETCH_SUCCESS",payload:{cardCover:e}}),a=()=>({type:"CARD_COVER_FETCH_FAILURE"}),i=(e,t)=>({type:"CARD_COVER_UPDATE_REQUEST",payload:{currentAttachmentId:e,
attachmentId:t}}),r=()=>({type:"CARD_COVER_UPDATE_SUCCESS"}),o=e=>({type:"CARD_COVER_UPDATE_FAILURE",payload:{attachmentId:e}})},"./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"d",(function(){return u}));const n=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST",payload:e}),a=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST_SUCCESS",payload:e}),i=e=>({type:"PROJECT_ISSUE_TYPES_REQUEST_FAILURE",payload:e}),r=(e,t,s,n,a)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST",payload:{issueKey:e,issueId:t,currentType:s,targetType:n,analyticsEvent:a}}),o=(e,t)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS",payload:{issueKey:e,targetTypeName:t,fieldId:"issuetype"}}),c=e=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_FAILURE",
payload:e}),l=(e,t,s)=>({type:"SIMPLE_CHANGE_ISSUE_TYPE_NOT_ALLOWED",payload:{issueId:e,currentType:t,targetType:s}}),u=e=>({type:"SHOW_ISSUE_TYPE_LIST",payload:e})},"./src/packages/issue/issue-view/src/actions/clone-modal-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=()=>({type:"SHOW_CLONE_MODAL"}),a=()=>({type:"HIDE_CLONE_MODAL"})},"./src/packages/issue/issue-view/src/actions/comment-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"B",(function(){return r})),s.d(t,"y",(function(){return o})),s.d(t,"D",(function(){return c})),s.d(t,"A",(function(){return l})),s.d(t,"C",(function(){return u})),s.d(t,"z",(function(){return d})),s.d(t,"x",(function(){return p})),s.d(t,"s",(function(){return m})),s.d(t,"r",(function(){return b})),s.d(t,"o",(function(){return f})),s.d(t,"n",(function(){return g})),s.d(t,"q",(function(){
return h})),s.d(t,"p",(function(){return y})),s.d(t,"u",(function(){return O})),s.d(t,"v",(function(){return j})),s.d(t,"t",(function(){return v})),s.d(t,"d",(function(){return E})),s.d(t,"i",(function(){return k})),s.d(t,"k",(function(){return w})),s.d(t,"j",(function(){return S})),s.d(t,"l",(function(){return C})),s.d(t,"m",(function(){return I})),s.d(t,"g",(function(){return T})),s.d(t,"h",(function(){return P})),s.d(t,"f",(function(){return _})),s.d(t,"G",(function(){return x})),s.d(t,"e",(function(){return D})),s.d(t,"w",(function(){return A})),s.d(t,"E",(function(){return L})),s.d(t,"F",(function(){return M}));const n=()=>({type:"ADD_COMMENT_FORM_EXPAND"}),a=()=>({type:"ADD_COMMENT_FORM_COLLAPSE"}),i=()=>({type:"ADD_COMMENT_FORM_CANCEL"}),r=(e,t,s)=>({type:"SAVE_COMMENT_RETRY",payload:{optimisticId:e,createdDate:t,isNewComment:s}}),o=e=>({type:"SAVE_COMMENT_EDIT",payload:{optimisticId:e}}),c=(e,t)=>({type:"SAVE_COMMENT_SUCCESS_WITH_PASTED_CONTENT",payload:{comment:e,
pastedContent:t}}),l=(e,t)=>({type:"SAVE_COMMENT_REQUEST",payload:{comment:e,analyticsEvent:t,updatedField:"comment"}}),u=(e,t,s,n,a)=>({type:"SAVE_COMMENT_SUCCESS",payload:{fieldId:"comment",comment:e,optimisticId:t,isNewComment:s,analyticsEvent:n},meta:a}),d=e=>({type:"SAVE_COMMENT_FAILURE",payload:e}),p=e=>({type:"SAVE_COMMENT_CANCEL",payload:{optimisticId:e}}),m=()=>({type:"FETCH_OLDER_COMMENTS_REQUEST"}),b=()=>({type:"FETCH_NEWER_COMMENTS_REQUEST"}),f=e=>({type:"FETCH_LATEST_COMMENTS_SUCCESS",payload:e}),g=()=>({type:"FETCH_LATEST_COMMENTS_FAILURE"}),h=e=>({type:"FETCH_MORE_COMMENTS_SUCCESS",payload:e}),y=()=>({type:"FETCH_MORE_COMMENTS_FAILURE"}),O=e=>({type:"FETCH_SORTED_COMMENTS_REQUEST",payload:e}),j=e=>({type:"FETCH_SORTED_COMMENTS_SUCCESS",payload:e}),v=()=>({type:"FETCH_SORTED_COMMENTS_FAILURE"}),E=(e,t)=>({type:"CHANGE_COMMENT_VISIBILITY",payload:{id:e,isInternal:t}}),k=(e,t)=>({type:"EDIT_COMMENT_BEGIN",payload:{id:e,isInternal:t}}),w=e=>({type:"EDIT_COMMENT_COLLAPSE",
payload:{id:e,fieldId:"comment"}}),S=e=>({type:"EDIT_COMMENT_CANCEL",payload:{id:e,fieldId:"comment"}}),C=(e,t)=>({type:"EDIT_COMMENT_UPDATE",payload:{id:e,value:t,fieldId:"comment"}}),I=(e,t)=>({type:"EDIT_COMMENT_VISIBILITY",payload:{id:e,visibility:t}}),T=(e,t)=>({type:"DELETE_COMMENT_REQUEST",payload:{id:e,analyticsEvent:t,updatedField:"comment"}}),P=e=>({type:"DELETE_COMMENT_SUCCESS",payload:{id:e,fieldId:"comment"}}),_=e=>({type:"DELETE_COMMENT_FAILURE",payload:e}),x=e=>({type:"SHOW_DELETE_COMMENT_MODAL",payload:e}),D=()=>({type:"DELETE_COMMENT_CANCEL"}),A=(e,t)=>({type:"PASTED_INTO_COMMENT_FORM",payload:{id:e,pastedContent:t}}),L=e=>({type:"SET_COMMENT_ATTACHMENT_IN_PROGRESS",payload:{isInProgress:e}}),M=e=>({type:"SET_COMMENT_SCROLL_STATUS",payload:{status:e}})},"./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"b",(function(){return i})),
s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"e",(function(){return d}));const n=()=>({type:"LINK_CONFLUENCE_PAGE_CLICKED"}),a=()=>({type:"LINK_CONFLUENCE_PAGE_CLOSED"}),i=()=>({type:"CREATE_CONFLUENCE_PAGE_LINK_MODIFIED"}),r=(e,t)=>({type:"CREATE_CONFLUENCE_PAGE_LINK_REQUEST",payload:{pageHref:e},meta:{analyticsEvent:t}}),o=e=>({type:"CREATE_CONFLUENCE_PAGE_LINK_SUCCESS",payload:{confluencePageLink:e}}),c=e=>({type:"CREATE_CONFLUENCE_PAGE_LINK_FAILED",payload:{errorMessage:e}}),l=e=>({type:"DELETE_CONFLUENCE_PAGE_LINK_REQUEST",payload:{globalId:e}}),u=()=>({type:"DELETE_CONFLUENCE_PAGE_LINK_SUCCESS"}),d=()=>({type:"DELETE_CONFLUENCE_PAGE_LINK_FAILED"})},"./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){
return i})),s.d(t,"h",(function(){return r})),s.d(t,"i",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"f",(function(){return d}));const n=e=>({type:"ADD_CONTENT_PANEL_REQUEST",payload:e}),a=e=>({type:"ADD_CONTENT_PANEL_SUCCESS",payload:e}),i=e=>({type:"ADD_CONTENT_PANEL_FAILURE",payload:e}),r=e=>({type:"REMOVE_CONTENT_PANEL_REQUEST",payload:e}),o=e=>({type:"REMOVE_CONTENT_PANEL_SUCCESS",payload:e}),c=e=>({type:"REMOVE_CONTENT_PANEL_FAILURE",payload:e}),l=e=>({type:"CONTENT_PANEL_SELECTED",payload:e}),u=e=>({type:"CONTENT_PANEL_UNSELECT",payload:e}),d=()=>({type:"CONTENT_PANELS_CUSTOMISED_SUCCESS"})},"./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=(e,t)=>({type:"ECOSYSTEM_SHOW_GLANCE",payload:{appKey:e,moduleKey:t}}),a=()=>({type:"ECOSYSTEM_HIDE_GLANCE"})},
"./src/packages/issue/issue-view/src/actions/editor-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return i}));const n=()=>({type:"EDITOR_CHANGE_FAILURE"}),a=()=>({type:"EDITOR_EXPANDED_FAILURE"}),i=()=>({type:"EDITOR_SAVE_FAILURE"})},"./src/packages/issue/issue-view/src/actions/external-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"d",(function(){return u}));var n=s("./src/packages/issue/issue-view/src/actions/comment-actions.js");const a="EDIT_FIELD",i=e=>({type:a,payload:{fieldId:e}}),r="ADD_COMMENT",o=()=>({type:r}),c="ASSIGN_TO_ME",l=()=>({type:c}),u=e=>{switch(e.type){case r:return Object(n.c)();case c:return(()=>({type:"ASSIGN_TO_ME_EXTERNAL"}))();case a:return(e=>({type:"FIELD_EDIT_REQUEST_EXTERNAL",payload:{fieldId:e}}))(e.payload.fieldId);default:
throw new Error(`Unhandled external action type: ${e.type}`)}}},"./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return i}));const n=()=>({type:"FETCH_CONFLUENCE_APP_LINKS_REQUEST"}),a=e=>({type:"FETCH_CONFLUENCE_APP_LINKS_SUCCESS",payload:e.applicationLinks}),i=()=>({type:"FETCH_CONFLUENCE_APP_LINKS_FAILED"})},"./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"b",(function(){return i}));const n=()=>({type:"FETCH_JIRA_APP_LINKS_REQUEST"}),a=e=>({type:"FETCH_JIRA_APP_LINKS_SUCCESS",payload:e}),i=()=>({type:"FETCH_JIRA_APP_LINKS_FAILED"})},"./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),
s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=()=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST"}),a=e=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_SUCCESS",payload:e}),i=()=>({type:"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_FAILED"})},"./src/packages/issue/issue-view/src/actions/forge-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"i",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"h",(function(){return d}));const n=e=>({type:"FETCH_FORGE_SUCCESS",payload:e}),a=e=>({type:"FORGE_ISSUE_ACTION_EXEC",payload:e}),i=()=>({type:"FORGE_ISSUE_ACTION_RENDERED"}),r=()=>({type:"FORGE_ISSUE_ACTION_CLOSE"}),o=e=>({type:"FORGE_ISSUE_PANEL_ADDED",payload:e}),c=e=>({type:"FORGE_NEW_ISSUE_PANEL_UNTRACK",payload:e}),l=e=>({
type:"FORGE_ISSUE_PANEL_REMOVED",payload:e}),u=e=>({type:"FORGE_ISSUE_PANEL_UPDATE_REQUEST",payload:e}),d=e=>({type:"FORGE_ISSUE_PANEL_UPDATED",payload:e})},"./src/packages/issue/issue-view/src/actions/issue-delete-actions.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return n})),s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return o}));const n=()=>({type:"OPEN_DELETE_ISSUE_MODAL"}),a=()=>({type:"CLOSE_DELETE_ISSUE_MODAL"}),i=(e,t)=>({type:"DELETE_ISSUE_REQUEST",payload:{issueKey:e,analyticsEvent:t}}),r=e=>({type:"DELETE_ISSUE_SUCCESS",payload:e}),o=(e,t)=>({type:"DELETE_ISSUE_FAILURE",payload:{issueKey:e,error:t}})},"./src/packages/issue/issue-view/src/actions/issue-links-actions.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return n})),s.d(t,"j",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"d",(function(){return o})),
s.d(t,"n",(function(){return c})),s.d(t,"p",(function(){return l})),s.d(t,"m",(function(){return u})),s.d(t,"o",(function(){return p})),s.d(t,"l",(function(){return m})),s.d(t,"i",(function(){return b})),s.d(t,"h",(function(){return f})),s.d(t,"a",(function(){return g})),s.d(t,"b",(function(){return h})),s.d(t,"g",(function(){return y})),s.d(t,"q",(function(){return O})),s.d(t,"c",(function(){return j}));const n=e=>({type:"FETCH_LINKED_ISSUES_SUCCESS",payload:e}),a=e=>({type:"FETCH_LINKED_ISSUES_FAILURE",payload:e}),i=(e,t)=>({type:"DELETE_LINKED_ISSUE_REQUEST",payload:{linkedIssueId:e,analyticsEvent:t}}),r=(e,t)=>({type:"DELETE_LINKED_ISSUE_SUCCESS",payload:e,meta:t}),o=e=>({type:"DELETE_LINKED_ISSUE_FAILURE",payload:e}),c=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_REQUEST",payload:{newIssueLinks:e,analyticsEvent:s,requestAnalyticsEvent:t}}),l=(e,t)=>({type:"SAVE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e,analyticsEvent:t}}),u=(e,t,s)=>({type:"SAVE_LINKED_ISSUE_FAILURE",payload:{
optimisticId:e,error:t,analyticsEvent:s}}),d="SAVE_LINKED_ISSUE_RETRY",p=(e,t,s)=>({type:d,payload:{optimisticId:e,analyticsEvent:s,requestAnalyticsEvent:t}}),m=e=>({type:"SAVE_LINKED_ISSUE_CANCEL",payload:e}),b=(e,t,s,n)=>({type:"FETCH_LINKED_ISSUES_DATA_SUCCESS",payload:{issueLinks:e,linkedIssues:t,optimisticIds:s,optimisticLinks:n}}),f=(e,t)=>({type:"FETCH_LINKED_ISSUES_DATA_FAILURE",payload:{optimisticIds:e,error:t}}),g=()=>({type:"ADD_ISSUE_LINK_CLICKED"}),h=()=>({type:"ADD_ISSUE_LINK_CLOSED"}),y=()=>({type:"FETCH_CREATE_LINKED_ISSUE_PERMISSION_REQUEST"}),O=e=>({type:"SET_CREATE_LINKED_ISSUE_PERMISSION",payload:{canCreateLinkedIssue:e}}),j=e=>({type:"CREATE_LINKED_ISSUE_SUCCESS",payload:{newIssueLinks:e}})},"./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}))
;const n=({fromIssueKey:e,toIssueKey:t})=>({type:"NAVIGATE_TO_NEW_ISSUE",payload:{fromIssueKey:e,toIssueKey:t}}),a=(e,t)=>({type:"NAVIGATE_TO_PROJECT",payload:{projectUrl:e,pushAction:t}}),i=e=>({type:"NAVIGATE_TO_SPRINT",payload:{sprintId:e}}),r=e=>({type:"LOAD_NEW_ISSUE",payload:{issueKey:e}}),o=(e,t)=>({type:"LOAD_RECENT_ISSUE",payload:{issueKey:e,issueState:t}})},"./src/packages/issue/issue-view/src/actions/issue-remote-data-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i}));const n=e=>({type:"FETCH_ISSUE_REMOTE_DATA_REQUEST",payload:e}),a=e=>({type:"FETCH_ISSUE_REMOTE_DATA_SUCCESS",payload:e}),i=()=>({type:"FETCH_ISSUE_REMOTE_DATA_FAILURE"})},"./src/packages/issue/issue-view/src/actions/login-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=()=>({type:"LOGIN"}),a=e=>({type:"LOGIN_SUCCESSFUL",payload:e})},
"./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=({issueKeys:e,issueIds:t})=>({type:"PREFETCH_ISSUES",payload:{issueKeys:e||[],issueIds:t||[]}})},"./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return a})),s.d(t,"a",(function(){return i})),s.d(t,"f",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"g",(function(){return l})),s.d(t,"d",(function(){return u}));const n=(e,t)=>({type:"DELETE_REMOTE_LINKED_ISSUE_REQUEST",payload:{globalId:e,analyticsEvent:t}}),a=e=>({type:"DELETE_REMOTE_LINKED_ISSUE_SUCCESS",payload:e}),i=e=>({type:"DELETE_REMOTE_LINKED_ISSUE_FAILURE",payload:e}),r=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_REQUEST",payload:{saveRemoteIssueLinkPayload:e,requestAnalyticsEvent:t,analyticsEvent:s}}),o=(e,t,s)=>({
type:"SAVE_REMOTE_LINKED_ISSUE_SUCCESS",payload:{optimisticId:e,saveRemoteLinkResponse:t,analyticsEvent:s}}),c=(e,t,s,n)=>({type:"SAVE_REMOTE_LINKED_ISSUE_FAILURE",payload:{optimisticId:e,error:s,analyticsEvent:n,remoteIssueKey:t}}),l=(e,t,s)=>({type:"SAVE_REMOTE_LINKED_ISSUE_RETRY",payload:{optimisticId:e,requestAnalyticsEvent:t,analyticsEvent:s}}),u=e=>({type:"SAVE_REMOTE_LINKED_ISSUE_CANCEL",payload:e})},"./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=e=>({type:"SHARE_AS_COMMENT",payload:{value:e}}),a=()=>({type:"CLEAR_SHARED_AS_COMMENT_VALUES"})},"./src/packages/issue/issue-view/src/actions/web-links-actions.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return a})),s.d(t,"j",(function(){return i})),s.d(t,"c",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"d",(function(){return l})),
s.d(t,"h",(function(){return u})),s.d(t,"i",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"f",(function(){return b}));var n=s("./src/packages/platform/utils/types/src/general.js");const a=()=>({type:"SHOW_CREATE_WEB_LINK_FORM"}),i=()=>({type:"HIDE_CREATE_WEB_LINK_FORM"}),r=(e,t,s)=>({type:"CREATE_WEB_LINK_REQUEST",payload:{optimisticId:Object(n.v)(`optimistic-web-link-${Date.now()}`),href:e,linkText:t,iconUrl:s}}),o=(e,t)=>({type:"CREATE_WEB_LINK_SUCCESS",payload:{optimisticId:e,webLink:t}}),c=e=>({type:"CREATE_WEB_LINK_FAILED",payload:{optimisticId:e}}),l=e=>({type:"CREATE_WEB_LINK_RETRY",payload:{optimisticId:e}}),u=e=>({type:"DELETE_WEB_LINK_REQUEST",payload:{id:e}}),d=e=>({type:"DELETE_WEB_LINK_SUCCESS",payload:{id:e}}),p=e=>({type:"DELETE_WEB_LINK_FAILED",payload:{id:e}}),m=e=>({type:"CANCEL_FAILED_WEB_LINK_DELETION",payload:{id:e}}),b=e=>({type:"DELETE_OPTIMISTIC_WEB_LINK",payload:{id:e}})},
"./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),r=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),o=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),c=s("./node_modules/react/index.js"),l=s.n(c),u=s("./node_modules/react-intl/lib/index.es.js"),d=s("./node_modules/lodash/noop.js"),p=s.n(d),m=s("./node_modules/@atlaskit/tabs/dist/es2019/components/Tabs.js"),b=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),f=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),g=Object(u.h)({replyToCustomer:{
id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.reply-to-customer-button",defaultMessage:"Reply to customer"},addInternalNote:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.add-internal-note-button",defaultMessage:"Add internal note"},loadingAttachments:{id:"issue.views.issue-base.activity.comment.comment-editor-view.servicedesk-comment-editor-view.loading-attachments",defaultMessage:"Loading attachments\u2026"}}),h=s("./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js"),y=s("./node_modules/@atlaskit/icon/glyph/attachment.js"),O=s.n(y),j=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),v=s("./src/packages/platform/controllers/intl/src/index.js"),E=Object(u.h)({addAttachmentLabel:{id:"issue.label-for-add-attachment-button",defaultMessage:"Add attachment"}
}),k=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),w=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const S=k.default.span(["padding:","px;"],w.e/2),C=k.default.div(["margin-left:auto;margin-right:","px;"],w.e),I=e=>{const{onClick:t,isCommentAttachmentInProgress:s}=e,{formatMessage:n}=Object(v.c)();return l.a.createElement(C,null,l.a.createElement(j.a,{content:n(E.addAttachmentLabel),position:"bottom"},l.a.createElement(f.a,{spacing:"none",appearance:"subtle-link",isLoading:s,iconBefore:l.a.createElement(S,null,l.a.createElement(O.a,{size:"medium",label:n(E.addAttachmentLabel)})),externalId:"attachment",onClick:t})))};I.displayName="AttachmentPicker";var T=I,P=Object(r.a)([Object(n.connect)((e=>({isCommentAttachmentInProgress:Object(o.x)(e)})),(e=>({onClick:()=>{e(Object(h.b)())}})))])(T),_=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const x=k.default.div(["white-space:nowrap;border:1px solid ",";height:","px;box-sizing:border-box;padding:","px 0;border-radius:","px;display:flex;align-items:center;"],_.a.N40,5*w.e,w.e/2,w.a),D=k.default.div(["padding:0 ","px;"],w.e);class A extends c.Component{renderReplyToCustomer(){const{onReplyToCustomer:e,intl:{formatMessage:t}}=this.props;return l.a.createElement(l.a.Fragment,null," / ",l.a.createElement(f.a,{appearance:"link",onClick:e},t(g.replyToCustomer)))}render(){const{onAddInternalNote:e,isCommentAttachmentInProgress:t,intl:{formatMessage:s},isPublicCommentAllowed:n}=this.props;return l.a.createElement(x,null,t?l.a.createElement(D,null,s(g.loadingAttachments)):l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{appearance:"link",onClick:e},s(g.addInternalNote)),n&&this.renderReplyToCustomer()),l.a.createElement(P,null))}}A.displayName="CollapsedEditorView";var L=Object(u.i)(A),M=Object(r.a)([Object(b.a)({onReplyToCustomer:"onReplyToCustomer",
onAddInternalNote:"onAddInternalNote"}),Object(n.connect)((e=>({isCommentAttachmentInProgress:Object(o.x)(e)})),{})])(L);const R=k.default.div(["margin:0 -","px ","px;"],w.e,2*w.e),N="internal",F={public:{id:"public",label:l.a.createElement(u.c,g.replyToCustomer),content:l.a.createElement("div",null)},internal:{id:N,label:l.a.createElement(u.c,g.addInternalNote),content:l.a.createElement("div",null)}};class U extends c.Component{constructor(...e){super(...e),this.onReplyToCustomer=()=>{this.props.onCommentVisibilityChange(!1),this.expandEditor()},this.onAddInternalNote=()=>{this.props.onCommentVisibilityChange(!0),this.expandEditor()},this.onTabSelect=e=>{this.props.onCommentVisibilityChange(e.id===N)},this.expandEditor=()=>{const{isExpanded:e,onExpanded:t}=this.props;e||t&&t()}}getExpandedView(){const{isInternal:e,isPublicCommentAllowed:t,children:s}=this.props,n=t&&!e?F.public:F.internal,a=t?[F.internal,F.public]:[F.internal]
;return l.a.createElement(l.a.Fragment,null,l.a.createElement(R,null,l.a.createElement(m.a,{tabs:a,selected:n,onSelect:this.onTabSelect})),s)}getCollapsedView(){return l.a.createElement(M,{onReplyToCustomer:this.onReplyToCustomer,onAddInternalNote:this.onAddInternalNote,isPublicCommentAllowed:this.props.isPublicCommentAllowed})}render(){const{isExpanded:e}=this.props;return e?this.getExpandedView():this.getCollapsedView()}}U.displayName="ServiceDeskCommentEditorContainer",U.defaultProps={isExpanded:!1,isInternal:!1,isPublicCommentAllowed:!1,onExpanded:p.a,onCommentVisibilityChange:p.a};var V=Object(u.i)(U);function K(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function W(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?K(Object(s),!0).forEach((function(t){B(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):K(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function B(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function H(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}t.a=Object(r.a)([Object(n.connect)(((e,t)=>({isInternal:Object(o.C)(t.commentId)(e),isPublicCommentAllowed:Object(i.f)(e)})),((e,t)=>({onCommentVisibilityChange:s=>{e(Object(a.d)(t.commentId,s))}})),((e,t,s)=>{const{commentId:n}=s;return W(W(W({},H(s,["commentId"])),e),t)}))])(V)},
"./src/packages/issue/issue-view/src/activity/common/component/feed-skeleton/view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),r=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js"),c=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js"),d=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js")
;const p=Object(c.default)(d.a)(["flex-direction:column;width:100%;"]),m=Object(c.default)(i.a)(["display:flex;"]),b=Object(c.default)(r.a)(["width:9px;flex-shrink:0;"]),f=Object(c.default)(r.a)(["height:22px;"]),g=Object(c.default)(u.a)(["background-position:-2px -2px;border-bottom:","px solid white;flex-shrink:0;"],4*l.e),h=a.a.createElement(a.a.Fragment,null,a.a.createElement(g,null),a.a.createElement(b,null),a.a.createElement(i.a,null,a.a.createElement(i.a,{paddingTop:1,paddingBottom:5},a.a.createElement(o.a,{fontSize:14,lineHeight:16,intrusion:250})),a.a.createElement(i.a,{paddingTop:4,paddingBottom:0},a.a.createElement(o.a,{fontSize:24,lineHeight:24,intrusion:0})),a.a.createElement(f,null)));t.a=()=>a.a.createElement(p,null,a.a.createElement(r.b,null),a.a.createElement(m,{paddingTop:0,paddingBottom:0},h),a.a.createElement(m,{paddingTop:0,paddingBottom:0},h))},"./src/packages/issue/issue-view/src/activity/common/component/load-more-button/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--next/dist/es2019/loading-button.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const c=r.default.div(["margin:","px 0;"],2*o.e),l=({onClick:e,isDisabled:t,isLoading:s,numberToLoad:n,children:r})=>n<=0?null:a.a.createElement(c,null,a.a.createElement(i.a,{onClick:e,isDisabled:t,isLoading:s,shouldFitContainer:!0},r));l.displayName="LoadMoreButton";var u=l;t.a=u},"./src/packages/issue/issue-view/src/activity/common/styles/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"f",(function(){return u})),s.d(t,"a",(function(){return d}))
;var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const r=n.default.span(["font-weight:500;"]);r.displayName="Emphasise";const o=n.default.span(["grid-row:1;margin-left:","px;white-space:nowrap;"],.5*i.e);o.displayName="GridContainer";const c=n.default.div(["margin:","px 0;"],3*i.e);n.default.span(["margin-left:","px;"],i.e).displayName="TimestampContainer";const l=n.default.span(["margin-left:-","px;display:grid;"],i.e/2),u=n.default.span(["display:grid;"]);u.displayName="GridContentContainer";const d={always:Object(n.css)(["color:",";"],a.a.N500),whenDisplaySettingSwitchable:Object(n.css)([":hover{color:inherit;}"])}},"./src/packages/issue/issue-view/src/activity/worklog/state/selectors.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){
return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js");const r=Object(n.createSelector)(a.H,(e=>e.worklog)),o=Object(n.createSelector)(i.i,(e=>e.remainingEstimateSeconds||0)),c=Object(n.createSelector)(r,(e=>e.loadingStage)),l=Object(n.createSelector)(r,(e=>e.highlightedWorklogId))},"./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/react/index.js"),a=s("./node_modules/lodash/noop.js"),i=s.n(a),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),o=s("./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js");class c extends n.Component{constructor(...e){super(...e),this.state={stackIndex:0},this.incrementStackIndex=()=>{this.setState({
stackIndex:this.state.stackIndex+1})},this.decrementStackIndex=()=>{this.setState({stackIndex:this.state.stackIndex-1})}}componentDidMount(){Object(r.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({bind:e})=>{e("beforeShow",this.incrementStackIndex),e("Dialog.hide",this.decrementStackIndex)})).catch(i.a),Object(o.a)("show",this.incrementStackIndex),Object(o.a)("hide",this.decrementStackIndex)}componentWillUnmount(){Object(r.a)({name:"jira/util/events",wrmKeys:"wrc!jira.webresources:jira-events"}).then((({unbind:e})=>{e("beforeShow",this.incrementStackIndex),e("Dialog.hide",this.decrementStackIndex)})).catch(i.a),Object(o.b)("show",this.incrementStackIndex),Object(o.b)("hide",this.decrementStackIndex)}render(){return this.props.children(this.state.stackIndex)}}c.displayName="AuiModalStackIndex"},"./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return a})),
s.d(t,"a",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"h",(function(){return l})),s.d(t,"i",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"e",(function(){return p}));const n="ISSUE_DETAILS",a={key:"FETCH_FIELD_DATA",prefix:n},i={key:"FETCH_INITIAL_COMMENTS",prefix:n},r={key:"FETCH_ISSUE_LINK_TYPES",prefix:n},o={key:"FETCH_SUBTASK_TYPES",prefix:n},c={key:"FETCH_LOAD_CONTEXT",prefix:n},l={key:"FETCH_USER_AUTH",prefix:n},u={key:"FETCH_VIEW_CONTEXT",prefix:n},d={key:"FETCH_ECOSYSTEM_EXTENSIONS",prefix:n},p={key:"FETCH_ISSUE_PROPERTIES",prefix:n}},"./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d}))
;var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),a=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js");function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=[a.g,a.a,a.e,a.d,a.i,a.f,a.c,a.b,a.h];let l;const u=()=>{c.forEach((e=>{
const t=`BEGIN_${e.prefix}_${e.key}`,s=`END_${e.prefix}_${e.key}`;n.default.clearMarks&&(n.default.clearMarks(t),n.default.clearMarks(s))})),l=null},d=()=>(l||(l=(()=>c.reduce(((e,t)=>{const s=`BEGIN_${t.prefix}_${t.key}`,a=`END_${t.prefix}_${t.key}`,i=Object(n.timeBetweenMarks)(s,a);if(null!=i&&i>0){const o=r(r({},e),{},{[`${t.key}_NETWORK`]:i});return n.default.clearMarks&&(n.default.clearMarks(s),n.default.clearMarks(a)),o}return e}),{}))()),l)},"./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"a",(function(){return u}));const n=()=>({type:"FETCH_ISSUE_REQUEST"}),a=e=>({type:"FETCH_ISSUE_SUCCESS",payload:e}),i=e=>({type:"FETCH_ISSUE_FAILURE",payload:e}),r=()=>({
type:"REFRESH_ISSUE_REQUEST"}),o=e=>({type:"REFRESH_ISSUE_SUCCESS",payload:e}),c=()=>({type:"REFRESH_ECOSYSTEM_REQUEST"}),l=e=>({type:"REFRESH_ECOSYSTEM_SUCCESS",payload:e}),u=()=>({type:"FETCH_FORGE_REQUEST"})},"./src/packages/issue/issue-view/src/common/actions/worklog-actions.js":function(e,t,s){"use strict";s.d(t,"j",(function(){return n})),s.d(t,"k",(function(){return a})),s.d(t,"J",(function(){return i})),s.d(t,"K",(function(){return r})),s.d(t,"I",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"n",(function(){return l})),s.d(t,"o",(function(){return u})),s.d(t,"i",(function(){return d})),s.d(t,"F",(function(){return p})),s.d(t,"H",(function(){return m})),s.d(t,"G",(function(){return b})),s.d(t,"m",(function(){return f})),s.d(t,"l",(function(){return g})),s.d(t,"O",(function(){return h})),s.d(t,"P",(function(){return y})),s.d(t,"N",(function(){return O})),s.d(t,"L",(function(){return j})),s.d(t,"p",(function(){return v})),s.d(t,"d",(function(){return E})),
s.d(t,"v",(function(){return k})),s.d(t,"w",(function(){return w})),s.d(t,"u",(function(){return S})),s.d(t,"b",(function(){return C})),s.d(t,"r",(function(){return I})),s.d(t,"c",(function(){return T})),s.d(t,"s",(function(){return P})),s.d(t,"q",(function(){return _})),s.d(t,"t",(function(){return x})),s.d(t,"M",(function(){return D})),s.d(t,"g",(function(){return A})),s.d(t,"C",(function(){return L})),s.d(t,"E",(function(){return M})),s.d(t,"B",(function(){return R})),s.d(t,"e",(function(){return N})),s.d(t,"x",(function(){return F})),s.d(t,"y",(function(){return U})),s.d(t,"f",(function(){return V})),s.d(t,"z",(function(){return K})),s.d(t,"A",(function(){return W})),s.d(t,"h",(function(){return B})),s.d(t,"D",(function(){return H}));const n="state.FETCH_WORKLOGS_REQUEST",a="state.FETCH_WORKLOGS_REQUEST_INITIAL",i=(e,t,s)=>({type:a,payload:{baseUrl:e,issueKey:t},meta:{analyticsEvent:s}}),r=(e,t,s)=>({type:"state.FETCH_WORKLOGS_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,
totalWorklogs:s}}),o=()=>({type:"state.FETCH_WORKLOGS_FAILURE"}),c="state.ADD_WORKLOG_REQUEST",l=(e,t)=>({type:c,payload:{values:e},meta:{analyticsEvent:t}}),u=(e,t,s)=>({type:"state.ADD_WORKLOG_SUCCESS",payload:{worklogId:e,timeTracking:t},meta:s}),d="state.FETCH_SURROUNDING_WORKLOGS_BY_ID",p=e=>({type:d,payload:{worklogId:e}}),m=(e,t,s,n)=>({type:"state.FETCH_WORKLOGS_BY_ID_SUCCESS",payload:{sortedWorklogIds:e,worklogs:t,startIndex:s,totalWorklogs:n}}),b=()=>({type:"state.FETCH_WORKLOGS_BY_ID_FAILURE"}),f=()=>({type:"state.ADD_WORKLOG_FAILURE"}),g="state.UPDATE_TIME_REMAINING_REQUEST",h=(e,t)=>({type:g,payload:{timeRemaining:e},meta:{analyticsEvent:t}}),y=e=>({type:"state.UPDATE_TIME_REMAINING_SUCCESS",payload:{timeRemaining:e}}),O=()=>({type:"state.UPDATE_TIME_REMAINING_FAILURE"}),j=(e,t)=>({type:"state.OPEN_MODAL",payload:{modalType:e,worklogId:t}}),v=()=>({type:"state.CLOSE_MODAL"}),E="state.EDIT_WORKLOG_REQUEST",k=(e,t,s)=>({type:E,payload:{worklogId:e,values:t},meta:{
analyticsEvent:s}}),w=(e,t,s,n)=>({type:"state.EDIT_WORKLOG_SUCCESS",payload:{worklogs:e,worklogId:t,timeTrackingDeltas:s},meta:n}),S=()=>({type:"state.EDIT_WORKLOG_FAILURE"}),C="state.DELETE_WORKLOG_REQUEST",I=(e,t,s,n)=>({type:C,payload:{worklogId:e,timeRemaining:t,isAdjustTimeRemainingChecked:s},meta:{analyticsEvent:n}}),T="state.DELETE_WORKLOG_SUCCESS",P=(e,t)=>({type:T,payload:{worklogId:e,timeTrackingDeltas:t}}),_=()=>({type:"state.DELETE_WORKLOG_FAILURE"}),x=()=>({type:"state.DISPOSE_WORKLOG_APP"}),D=e=>({type:"SET_WORKLOG_SCROLL_STATUS",payload:{status:e}}),A="state.FETCH_SORTED_WORKLOGS_REQUEST",L=()=>({type:A}),M=e=>({payload:e,type:"state.FETCH_SORTED_WORKLOGS_SUCCESS"}),R=()=>({type:"state.FETCH_SORTED_WORKLOGS_FAILURE"}),N="state.FETCH_NEWER_SORTED_WORKLOGS_REQUEST",F=()=>({type:N}),U=e=>({type:"state.FETCH_NEWER_SORTED_WORKLOGS_SUCCESS",payload:e}),V="state.FETCH_OLDER_SORTED_WORKLOGS_REQUEST",K=()=>({type:V}),W=e=>({type:"state.FETCH_OLDER_SORTED_WORKLOGS_SUCCESS",
payload:e}),B="state.FETCH_SORTED_WORKLOGS_RETRY",H=()=>({type:B})},"./src/packages/issue/issue-view/src/common/component/date-time/view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/lodash/isNaN.js"),o=s.n(r),c=s("./node_modules/@atlaskit/datetime-picker/dist/es2019/components/DateTimePicker.js"),l=s("./src/packages/platform/utils/constants/src/datetimepicker-available-times.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/date-messages.js"),d=s("./src/packages/compatibility/src/main.js");class p extends n.Component{constructor(...e){super(...e),this.onChange=e=>{const t=Object(d.a)(e);this.props.onChange(o()(Date.parse(t))?null:t)},this.parseValue=(e,t,s)=>this.props.parseValue(e,t,s,this.props.timeZone)}render(){const{autoFocus:e,isDisabled:t,value:s,timeZone:n,intl:{formatMessage:i}}=this.props;return a.a.createElement(c.a,{autoFocus:e,isDisabled:t,
value:s||"",onChange:this.onChange,timeIsEditable:!0,parseValue:n?this.parseValue:void 0,datePickerSelectProps:{placeholder:i(u.a.placeholderDate)},timePickerSelectProps:{formatCreateLabel:e=>e,filterOption:(e,t)=>!t||e.value===t||e.label===t},times:l.a})}}p.displayName="DateTimeFieldView",p.defaultProps={isDisabled:!1,value:void 0,autoFocus:!1},t.a=Object(i.i)(p)},"./src/packages/issue/issue-view/src/common/component/editor/async.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),r=s("./src/packages/platform/ui/error-boundary/src/main.js"),o=s("./src/packages/issue/issue-view/src/common/component/renderer/index.js");const c=({defaultValue:e,mediaContext:t})=>a.a.createElement(o.a,{mediaContext:t,adf:e});c.displayName="IssueEditorReadonly";const l=({children:e,fallback:t,packageName:s})=>a.a.createElement(r.a,{id:"issue-editor",
packageName:s,render:()=>t},a.a.createElement(i.a,{fallback:t},e));l.displayName="IssueEditorBoundary"},"./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/isFunction.js"),r=s.n(i),o=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}t.a=(e,t,s)=>{const i=r()(e)?e:()=>e||null;class d extends n.Component{constructor(e){super(e),this.startTime=void 0,this.mountTime=void 0,
this.startTime=c.default.now()}componentDidMount(){this.mountTime=c.default.now()}componentWillUnmount(){const e=c.default.now(),t=e-this.startTime,n=this.mountTime-this.startTime,a=e-this.mountTime;t>0&&this.props.onWillUnmount(t,n,a,s)}render(){return i()}}d.displayName="LoadingWrapper",d.defaultProps={onWillUnmount:()=>{}};const p=Object(o.a)((e=>({onWillUnmount:(t,s,n,a)=>e("loading-component",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({duration:t,initializationTime:s,mountingTime:n},a||{}))})))(d);return a.a.createElement(p,{externalId:t})}},"./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js":function(e,t,s){"use strict"
;s.d(t,"a",(function(){return a}));s("./node_modules/lodash/clamp.js");const n={minute:"m",hour:"h",day:"d",week:"w"},a=e=>n[e]||n.minute},"./src/packages/issue/issue-view/src/common/component/logged-time/view.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./src/packages/time-tracking-formatter/src/main.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),l=s("./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js"),u=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),d=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const m=u.default.div(["width:100%;display:flex;"]),b=u.default.div(["flex-grow:1;margin-top:","px;"],p.e/4),f=u.default.small(["color:",";display:flex;justify-content:space-between;margin-top:0;font-size:","px;flex-wrap:wrap;"],d.a.N500,p.d),g=u.default.span(["margin-right:","px;"],p.e/2),h=u.default.span(["cursor:pointer;"]),y=u.default.span(["font-weight:normal;"]);class O extends n.Component{constructor(...e){super(...e),this.getTimeRemainingText=()=>{if(!this.props.value.remainingTime)return null;const e=this.secondsToTimeString(this.props.value.remainingTime);return a.a.createElement(h,null,a.a.createElement(i.c,{id:"issue.log-time.remaining-time",defaultMessage:"{time} remaining",values:{time:a.a.createElement(y,null,e)}}))},this.secondsToTimeString=e=>{const{config:t,intl:s}=this.props,{daysPerWeek:n,hoursPerDay:a}=this.props.config;return Object(o.isFixTimeTrackingFormatEnabled)()?Object(r.a)(e,{workingHoursPerDay:t.hoursPerDay,workingDaysPerWeek:t.daysPerWeek,
timeFormat:t.format||"pretty",defaultUnit:t.defaultUnit},s):Object(c.a)(n,a)(e)}}getTimeLoggedText(){if(this.props.value&&this.props.value.loggedTime){const e=this.secondsToTimeString(this.props.value.loggedTime);return a.a.createElement(i.c,{id:"issue.log-time.time-logged",defaultMessage:"{time} logged",values:{time:a.a.createElement(y,{"data-testid":"issue.issue-view.common.logged-time.value"},e)}})}return a.a.createElement(i.c,{id:"issue.log-time.no-time-logged",defaultMessage:"No time logged"})}render(){const{config:e,isDone:t,isCompact:s,value:n,estimatedTime:i}=this.props;return a.a.createElement(m,null,a.a.createElement(b,null,a.a.createElement(l.a,{value:n,estimatedTime:i,config:e,isDone:t,isCompact:s}),a.a.createElement(f,null,a.a.createElement(g,null,this.getTimeLoggedText()),this.getTimeRemainingText())))}}O.displayName="LoggedTime",O.defaultProps={isCompact:!0,isDone:!1};t.a=Object(i.i)(O)},
"./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return f}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),r=s("./node_modules/@atlaskit/icon/glyph/check-circle.js"),o=s.n(r),c=s("./node_modules/@atlaskit/icon/glyph/link.js"),l=s.n(c),u=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/field-copy-text/index.js"),p=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const b=p.default.div(["padding-top:","px;opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(","px,0);padding-left:","px;display:flex;align-items:flex-end;",";&:focus{opacity:1;transform:translate(0,0);}"],m.e/4,-m.e,m.e/2,(e=>e.isVisible&&"\n        opacity: 1;\n        transform: translate(0, 0);\n    "));class f extends n.Component{constructor(...e){super(...e),this.state={isCopied:!1},this.onCopySuccess=e=>{this.setState({isCopied:e})},this.onCopyReset=()=>{this.setState({isCopied:!1})}}render(){const{id:e,label:t,fullIssueUrl:s,isVisible:n,onCopyClick:r}=this.props,{isCopied:c}=this.state;return a.a.createElement(b,{isVisible:n,className:"issue_view_permalink_button_wrapper"},a.a.createElement(d.a,{id:e,label:t,tooltipDelay:0,tooltipLabel:t,tooltipLabelPosition:"top",shouldFitContainer:!0,value:s,hideFieldText:!0,remountOnChange:!0,onCopyClick:r,onClickChange:e=>this.onCopySuccess(e),onCopyReset:this.onCopyReset},a.a.createElement(i.a,{
appearance:"subtle-link",iconBefore:c?a.a.createElement(o.a,{label:"",primaryColor:u.a.G500,size:"small"}):a.a.createElement(l.a,{size:"small",label:t}),spacing:"none"})))}}f.displayName="PermalinkButton"},"./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js");const a=e=>{const[t,s,a]=((e=!1)=>{const[t,s]=Object(n.useState)(e);return[t,()=>{s(!0)},()=>{s(!1)}]})(e.defaultIsVisible);return e.children({isVisible:t,show:s,hide:a})};a.defaultProps={defaultIsVisible:!1};t.a=a},"./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react/index.js"),i=s.n(a),r=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),o=s("./src/packages/time-tracking-formatter/src/main.js"),c=s("./src/packages/issue/issue-view/src/feature-flags.js"),l=s("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),u=Object(n.h)({underOriginalEstimate:{id:"issue.log-time.under-original-estimated-time-tooltip",defaultMessage:"{time} under original estimate"},overOriginalEstimate:{id:"issue.log-time.over-original-estimated-time-tooltip",defaultMessage:"{time} over original estimate"}}),d=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),p=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const b=p.default.div(["padding:","px;background-color:transparent;border-radius:3px;",";&:hover{background-color:",";}"],m.e/2,(e=>e.hasPointerCursor?"cursor: pointer;":""),r.a.N60),f=p.default.div(["background-color:",";border-radius:","px;display:flex;height:","px;overflow:hidden;width:100%;",";"],r.a.N40,m.e/2,(e=>e.isCompact?m.e/2:m.e),(e=>e.hasPointerCursor?"cursor: pointer;":""));class g extends a.Component{renderProgressBar(){return this.props.shouldHighlightOnHover?i.a.createElement(b,{hasPointerCursor:!!this.props.tooltip},i.a.createElement(f,{isCompact:this.props.isCompact,hasPointerCursor:!!this.props.tooltip},this.props.children)):i.a.createElement(f,{isCompact:this.props.isCompact,hasPointerCursor:!!this.props.tooltip},this.props.children)}render(){return this.props.tooltip?i.a.createElement(d.a,{content:this.props.tooltip},this.renderProgressBar()):this.renderProgressBar()}}g.displayName="ProgressBar",g.defaultProps={isCompact:!0,shouldHighlightOnHover:!1,children:null,
tooltip:null};const h=p.default.div(["background-color:",";flex-shrink:0;width:",";transition:width 0.3s ease;&:first-child{border-top-left-radius:","px;border-bottom-left-radius:","px;}&:last-child{border-top-right-radius:","px;border-bottom-right-radius:","px;}"],(e=>e.color),(e=>e.width),m.e/2,m.e/2,m.e/2,m.e/2);class y extends a.Component{render(){const{color:e,proportion:t}=this.props,s=t>0?100*t+"%":"0";return i.a.createElement(h,{color:e,width:s})}}y.displayName="ProgressBarSegment",y.defaultProps={color:r.a.B400,proportion:0};const O=(e,t)=>{const{loggedTime:s,remainingTime:n}=e;return s&&void 0!==t?s+(n||0)-t:0};class j extends a.Component{constructor(...e){super(...e),this.secondsToTimeString=e=>{const{config:t,intl:s}=this.props,{daysPerWeek:n,hoursPerDay:a}=this.props.config;return Object(c.isFixTimeTrackingFormatEnabled)()?Object(o.a)(e,{workingHoursPerDay:t.hoursPerDay,workingDaysPerWeek:t.daysPerWeek,timeFormat:t.format||"pretty",defaultUnit:t.defaultUnit
},s):Object(l.a)(n,a)(e)}}getTooltip(){const{value:e,estimatedTime:t}=this.props,s=O(e,t);return 0===s?null:s>0?this.props.intl.formatMessage(u.overOriginalEstimate,{time:this.secondsToTimeString(s)}):this.props.intl.formatMessage(u.underOriginalEstimate,{time:this.secondsToTimeString(-s)})}render(){const{value:e,estimatedTime:t,shouldHighlightOnHover:s}=this.props,{loggedTime:n=0}=e,a=((e,t=0)=>{const{loggedTime:s=0,remainingTime:n=0}=e;return Math.max(t,s+n)})(e,t),o=Math.max(O(e,t),0),c=a?(n-o)/a:0,l=a?o/a:0;return i.a.createElement(g,{tooltip:this.getTooltip(),isCompact:this.props.isCompact,shouldHighlightOnHover:s},i.a.createElement(y,{color:this.props.isDone?r.a.G300:r.a.B400,proportion:c}),i.a.createElement(y,{color:r.a.Y300,proportion:l}))}}j.displayName="ProgressTracker",j.defaultProps={isCompact:!0,isDone:!1,shouldHighlightOnHover:!1,value:{loggedTime:0}};t.a=Object(n.i)(j)},"./src/packages/issue/issue-view/src/common/component/renderer/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/with-link-actions/index.js"),i=s("./src/packages/issue/media-provider/src/controllers/with-media-provider/index.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./node_modules/react/index.js"),c=s.n(o),l=s("./node_modules/@atlaskit/adf-schema/dist/es2019/schema/default-schema.js"),u=s("./node_modules/@atlaskit/editor-common/dist/es2019/provider-factory/provider-factory.js"),d=s("./node_modules/@atlaskit/renderer/dist/es2019/ui/Renderer/index.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/services/emoji.js"),f=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),g=s("./src/packages/issue/issue-view/src/feature-flags.js"),h=s("./src/packages/issue/issue-view/src/media-feature-flags.js"),y=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js")
;class O extends o.PureComponent{constructor(e){super(e),this.onInlineCardClicked=(e,t)=>{const{linkActions:s}=this.props,n=e||window.event;n.preventDefault();const a=n.metaKey||0!==n.button;Object(m.a)(t,a,s.push)},this.onMentionClicked=(e,t,s)=>{const{linkActions:n,mentionEncoder:a}=this.props;if(a){s.stopPropagation();const t=s,i=t.metaKey||0!==t.button;Object(m.a)(a(e),i,n.push)}},this.onContentSelected=e=>{e.target instanceof window.Element&&!Object(p.a)(e.target,e.currentTarget)&&!this.checkForMedia(e.target,e.currentTarget)||e.stopPropagation()},this.checkForMedia=(e,t)=>!(!e||e===t)&&(!(!e.className.includes("rich-media-item")&&!e.className.includes("MediaGroup")&&"media-viewer-popup"!==e.getAttribute("data-testid"))||this.checkForMedia(e.parentElement,t)),this.dataProviders=void 0,this.eventHandlers=void 0,this.isEmpty=()=>this.isAdfValueEmpty(),this.isAdfValueEmpty=()=>{const{adf:e}=this.props;return!e||Object(f.g)(e)}
;const{mediaProvider:t,mentionProvider:s,contextIdentifier:n}=this.props;this.dataProviders=new u.a,this.dataProviders.setProvider("mediaProvider",t),this.dataProviders.setProvider("mentionProvider",Promise.resolve(s)),this.dataProviders.setProvider("emojiProvider",Object(b.b)(this.props.cloudId,this.props.loggedInUserAccountId)),n&&this.dataProviders.setProvider("contextIdentifierProvider",Promise.resolve(n)),this.eventHandlers={mention:{onClick:this.onMentionClicked},smartCard:{onClick:this.onInlineCardClicked}}}render(){const{adf:e}=this.props;return this.isEmpty()?c.a.createElement(y.b,null,this.props.placeholder):c.a.createElement("div",{onClick:this.onContentSelected,onKeyPress:this.onContentSelected,role:"presentation"},c.a.createElement(d.a,{schema:l.a,document:Object(f.h)(e),dataProviders:this.dataProviders,eventHandlers:this.eventHandlers,allowAltTextOnImage:!0,media:{allowLinking:!0,featureFlags:Object(h.a)()},
analyticsEventSeverityTracking:Object(g.getTTRSeverityTrackingConfiguration)(),unsupportedContentLevelsTracking:Object(g.getUnsupportedContentLevelsTrackingConfiguration)()}))}}O.displayName="Renderer",O.displayName="Renderer",O.defaultProps={adf:void 0,placeholder:void 0,mentionEncoder:()=>""};const j=Object(n.connect)((e=>({cloudId:Object(r.i)(e),loggedInUserAccountId:Object(r.a)(e)})),{})(O),v=Object(i.a)(Object(a.a)(j));t.a=v},"./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"a",(function(){return u}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const r=n.default.div(["display:flex;align-items:baseline;flex-wrap:nowrap;justify-content:",";"],(e=>e.leftAlign?"normal":"space-between")),o=n.default.div(["display:flex;justify-content:flex-start;align-items:baseline;max-width:100%;"]),c=n.default.h2(["",";line-height:","px;color:",";overflow-wrap:break-word;min-width:0;"],a.d.h400(),3*i.e,a.a.heading),l=n.default.div(["display:flex;align-items:center;",";"],(e=>e.leftAlign?`margin-left: ${i.e}px`:"")),u=n.default.div(["",";margin-left:","px;margin-top:0;flex-shrink:0;"],a.d.h100(),i.e)},"./src/packages/issue/issue-view/src/common/constants/flags.js":function(e,t,s){"use strict";s.d(t,"i",(function(){return n})),s.d(t,"j",(function(){return a})),s.d(t,"k",(function(){return i})),s.d(t,"l",(function(){return r})),s.d(t,"t",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"p",(function(){return l})),s.d(t,"D",(function(){return u})),s.d(t,"e",(function(){return d})),s.d(t,"O",(function(){return p})),
s.d(t,"y",(function(){return m})),s.d(t,"L",(function(){return b})),s.d(t,"K",(function(){return f})),s.d(t,"E",(function(){return g})),s.d(t,"a",(function(){return h})),s.d(t,"M",(function(){return y})),s.d(t,"z",(function(){return O})),s.d(t,"A",(function(){return j})),s.d(t,"C",(function(){return v})),s.d(t,"c",(function(){return E})),s.d(t,"m",(function(){return k})),s.d(t,"B",(function(){return w})),s.d(t,"g",(function(){return S})),s.d(t,"f",(function(){return C})),s.d(t,"o",(function(){return I})),s.d(t,"b",(function(){return T})),s.d(t,"N",(function(){return P})),s.d(t,"w",(function(){return _})),s.d(t,"v",(function(){return x})),s.d(t,"s",(function(){return D})),s.d(t,"r",(function(){return A})),s.d(t,"F",(function(){return L})),s.d(t,"G",(function(){return M})),s.d(t,"H",(function(){return R})),s.d(t,"n",(function(){return N})),s.d(t,"q",(function(){return F})),s.d(t,"h",(function(){return U})),s.d(t,"I",(function(){return V})),s.d(t,"J",(function(){return K})),
s.d(t,"u",(function(){return W})),s.d(t,"x",(function(){return B}))
;const n="COMMENT_ADD_ERROR_GENERIC",a="COMMENT_ADD_ERROR_INVALID",i="COMMENT_CONTENT_EXCEEDED_ERROR",r="COMMENT_DELETE_ERROR",o="EDITOR_ERROR",c="ATTACHMENT_ADD_ERROR",l="DELETE_LINKED_ISSUE_ERROR",u="REMOTE_LINK_VALIDATION_ERROR",d="ATTACHMENT_DELETE_ERROR",p="WATCH_TOGGLE_UPDATE_ERROR",m="FETCH_WATCHERS_ERROR",b="STOP_WATCHING_SUCCESS",f="START_WATCHING_SUCCESS",g="REMOVE_WATCHER_ERROR",h="ADD_WATCHER_ERROR",y="SUBTASKS_REORDER_ERROR_GENERIC",O="FLAGGED_ADD_UPDATE_ERROR",j="FLAGGED_REMOVE_UPDATE_ERROR",v="LOG_WORK_CONFIRM_ERROR",E="ASSIGN_TO_ME_SUCCESS",k="CREATE_CHILD_ISSUE_ERROR",w="LINK_CHILD_ISSUE_ERROR",S="CHANGE_ISSUE_TYPE_SUCCESS",C="CHANGE_ISSUE_TYPE_ERROR",I="DELETE_ISSUE_ERROR",T="ADD_WORKLOG_FAILURE",P="UPDATE_TIME_REMAINING_FAILURE",_="EDIT_WORKLOG_SUCCESS",x="EDIT_WORKLOG_FAILURE",D="DELETE_WORKLOG_SUCCESS",A="DELETE_WORKLOG_FAILURE",L="RICH_CONTENT_FIELD_CONFIRM_ERROR",M="RICH_CONTENT_FIELD_MAXIMUM_LENGTH_EXCEEDED_ERROR",R="RICH_CONTENT_FIELD_REQUIRED_ERROR",N="DELETE_CONFLUENCE_PAGE_LINK_FAILED",F="DELETE_WEB_LINK_FAILED",U="CLICKTHROUGH_BANNER_DISMISS_SUCCESS",V="SAVE_APPROVAL_ANSWER_ERROR",K="SAVE_APPROVAL_ANSWER_SUCCESS",W="EDIT_EPIC_COLOUR_ERROR",B="FETCH_JIRA_APP_LINKS_ERROR"
},"./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"c",(function(){return l})),s.d(t,"b",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"a",(function(){return m})),s.d(t,"f",(function(){return j}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}
return e}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const o=e=>{const t=e.reduce(((e,t)=>{e[t.appKey]||(e[t.appKey]={total:0,status:{}});const s=e[t.appKey];if(s.total+=1,t.status&&t.status.type){const e=s.status[t.status.type];s.status[t.status.type]=e>0?e+1:1}else{const e=s.status["N/A"];s.status["N/A"]=e>0?e+1:1}return e}),{}),s=JSON.stringify(t);return{total:e.length,data:Object(n.i)(s)(s)}},c=(e,t,s)=>{const a=s?s.type:"",i=Object(n.i)(e,t,a);return{appKey:i(e),moduleKey:i(t),statusType:i(a)}},l=(e,t)=>{let s=0;const a=e.reduce(((e,n)=>{e[n.appKey]||(e[n.appKey]={total:0,totalOnPage:0});const a=e[n.appKey];a.total+=1;const i=`${n.appKey}_${n.moduleKey}`;return t.includes(i)&&(a.totalOnPage+=1,s+=1),e}),{}),i=JSON.stringify(a);return{totalOnPage:s,total:e.length,data:Object(n.i)(i)(i)}},u=(e,t)=>{const s=Object(n.i)(e,t);return{appKey:s(e),moduleKey:s(t)}},d=(e,t)=>u(e,t),p=(e,t,s)=>i(i({},u(e,t)),{},{
event:Object(n.i)(s)(s)}),m=(e,t)=>u(e,t),b=e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name}))),f=e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type}))),g=e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,type:e.type,showByDefault:e.showByDefault}))),h=e=>e.map((e=>({name:e.name}))),y=e=>"WEB_PANEL"===e.type,O=e=>"ISSUE_MODULE"===e.type,j=(e=[],t=[],s=[],a=[],i=0)=>{const r={glances:f(e),contentPanels:g(t),activityPanels:b(s),operations:h(a)},o=Object.keys(r).reduce(((e,t)=>r[t]&&r[t].length?e+r[t].length:e),0),c=JSON.stringify(r);return{totalGlances:e.filter(O).length,totalLegacyGlances:e.filter(y).length,totalContentPanels:t.filter(O).length,totalLegacyContentPanels:t.filter(y).length,totalActivityPanels:s.length,totalOperations:a.length,totalCustomIssueFields:i,totalModules:o,data:Object(n.i)(c)(c)}}},"./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js":function(e,t,s){"use strict"
;s.d(t,"b",(function(){return n})),s.d(t,"a",(function(){return a}));const n=(e,t=0)=>{const s=e.lastIndexOf("-"),n=e.substr(s+1);return/^\d+$/.test(n)&&n.length>=t?e.substr(0,s):e},a=e=>{const t=e.match(/^(.*)-(\w+)-(\d+)$/);if(null==t)return null;const[,s,n,a]=t;return{extensionId:s,id:n,added:Number(a)}}},"./src/packages/issue/issue-view/src/common/legacy/aui-dialog-event.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/lodash/noop.js"),a=s.n(n),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/deferred-globals.js");const r=()=>window.AJS&&window.AJS.dialog2,o=(e,t)=>{Object(i.b)().then((()=>((e,t)=>{r()&&window.AJS.dialog2.on(e,t)})(e,t))).catch(a.a)},c=(e,t)=>{Object(i.b)().then((()=>((e,t)=>{r()&&window.AJS.dialog2.off(e,t)})(e,t))).catch(a.a)}},"./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js":function(e,t,s){"use strict";s.d(t,"c",(function(){
return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=()=>({type:"FETCH_UPLOAD_CONTEXT_REQUEST"}),a=e=>({type:"FETCH_UPLOAD_CONTEXT_SUCCESS",payload:e}),i=e=>({type:"FETCH_UPLOAD_CONTEXT_FAILURE",payload:{error:e}}),r=()=>({type:"CHECK_UPLOAD_CONTEXT"})},"./src/packages/issue/issue-view/src/common/messages/drafts.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({draftIndicator:{id:"issue.draft-indicator-for-multiline-field",defaultMessage:"Unsaved changes"}})},"./src/packages/issue/issue-view/src/common/messages/flags.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({commentWorklogAttachmentFetchFailedTitle:{id:"issue.comment-worklog-attachment-fetch-failed-title",defaultMessage:"We couldn't find the {field}"},commentWorklogAttachmentFetchFailedDescription:{
id:"issue.comment-worklog-attachment-fetch-failed-description",defaultMessage:"Reload the issue, then give it another try."}})},"./src/packages/issue/issue-view/src/common/messages/time.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(i.h)({logWork:{id:"issue.common.messages.time.log-work",defaultMessage:"Log work"},timeInputPlaceholder:{id:"issue.common.messages.time.time-input-placeholder",defaultMessage:"e.g. 2w 4d 6h 45m"},exampleFormat:{id:"issue.common.messages.time.time-input-format-tooltip.example",defaultMessage:"Use the format: {formatExample}"},weeks:{id:"issue.common.messages.time.time-input-format-tooltip.weeks",defaultMessage:"{w} = weeks"},days:{id:"issue.common.messages.time.time-input-format-tooltip.days",defaultMessage:"{d} = days"},hours:{id:"issue.common.messages.time.time-input-format-tooltip.hours",defaultMessage:"{h} = hours"},minutes:{
id:"issue.common.messages.time.time-input-format-tooltip.minutes",defaultMessage:"{m} = minutes"}});const r=a.a.createElement(i.c,{id:"issue.common.messages.time.time-invalid-message",defaultMessage:"You need to log time in the format {timeString}.",values:{timeString:a.a.createElement("b",null,"2w 4d 6h 45m")}})},"./src/packages/issue/issue-view/src/common/metrics/context/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/issue-view/src/common/metrics/index.js");const i=e=>t=>{e&&e.onReadyForUser&&e.onReadyForUser();const{isInitialRender:s,lastTransitionStartTime:n}=t;s&&Object(a.i)(!0),Object(a.e)({isInitialRender:s,lastTransitionStartTime:n})},r=e=>t=>{e&&e.onInteractive&&e.onInteractive(),Object(a.d)(t)},o=e=>({onPreviewRendered:i(e),onInteractive:r(e)});let c=null;const l=e=>(c=Object(n.createContext)(o(e)),
c),u=()=>c||Object(n.createContext)(o())},"./src/packages/issue/issue-view/src/common/metrics/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return Q})),s.d(t,"a",(function(){return J})),s.d(t,"g",(function(){return Z})),s.d(t,"f",(function(){return X})),s.d(t,"c",(function(){return ee})),s.d(t,"d",(function(){return te})),s.d(t,"h",(function(){return se})),s.d(t,"e",(function(){return ne})),s.d(t,"i",(function(){return ae}))
;var n=s("./node_modules/uuid/index.js"),a=s.n(n),i=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),r=s("./src/packages/platform/utils/constants/src/analytics-marks.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),l=s("./src/packages/platform/observability/event-delay-controller/src/main.js"),u=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/performance-marks-tools/index.js"),d=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/mark-product-start/index.js"),p=s("./src/packages/platform/observability/track-all-changes-sampling/src/main.js"),m=s("./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js"),b=s("./src/packages/issue/issue-view/src/utils/performance-analytics/index.js"),f=s("./node_modules/reselect/lib/index.js"),g=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const h=Object(f.createSelector)((e=>e.timing),g.r,((e,t)=>t?void 0:e.server));var y=s("./node_modules/lodash/isFunction.js"),O=s.n(y),j=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),v=s("./src/packages/issue/issue-view/src/feature-flags.js");function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function k(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){w(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const S=()=>Object.keys(v).reduce(((e,t)=>O()(v[t])?k(k({},e),{},{[String(t)]:new j.a(v[t]())}):e),{});var C=s("./src/packages/platform/utils/permalinks/src/index.js"),I=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),T=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),P=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),_=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),x=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),D=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");function A(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function L(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const M=e=>Object.values(Object(D.s)(e)).filter((e=>"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect"===e.schema.custom)),R=e=>{const t=M(e);return 0===t.length?0:t.reduce(((e,t)=>e+((e=>0===e.length?0:Object.values(e).reduce(((e,t)=>{var s;return e+((null==t||null===(s=t.children)||void 0===s?void 0:s.length)||1)}),0))(t.allowedValues)||1)),0)},N=(e,t)=>()=>{const s=e.getState(),{permalinkType:n}=Object(C.b)()||{},a=Object(D.q)("children-issues")(s),i=t?t.getUserPreferenceValue("jira.user.issue.attachment.view"):null;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?A(Object(s),!0).forEach((function(t){L(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):A(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({visibleContextItem:Object(T.j)(s).length,conditionallyVisibleContextItems:Object(T.a)(s).length,
visibleContentItems:Object(T.i)(s).length,ecosystemGlances:Object(I.m)(s).length,ecosystemContentPanels:Object(I.b)(s).length,ecosystemActivityPanels:Object(I.a)(s).length,ecosystemOperations:Object(I.q)(s).length,ecosystemCustomsFields:Object(T.b)(s).length,childIssues:a?a.value.length:0,linkIssueCount:Object(_.b)(s),subtaskCount:Object(x.d)(s).length,commentsTotalCount:Object(P.K)(s),hasCommentPermalink:"Comments"===n,cascadingSelectCount:M(s).length,cascadingSelectOptionsTotalCount:R(s)},null!=i?{attachmentView:i}:{})};var F=s("./src/packages/platform/utils/constants/src/analytics-sources.js");class U{constructor(e){this.immutableState=void 0,this.isLoadedWithPage=void 0,this.hasLoadedEditor=!1,this.startTime=Math.floor(performance.now()),this.previewEnd=void 0,this.fmp=void 0,this.interactiveEnd=void 0,this.trueInteractiveEnd=void 0,this.immutableState=e,this.isLoadedWithPage=e.isLoadedWithPage}lazyMetricsProps(){return this.immutableState.lazyMetricsProps}getDataProvider(){
return this.immutableState.dataProvider}getIsFullIssue(){return"full-issue"===this.immutableState.analyticsSource}getIsLoadedWithPage(){return this.immutableState.isLoadedWithPage}setIsLoadedWithPage(e){this.isLoadedWithPage=e}getIsSPA(){return this.immutableState.isSPA}getIsRecentIssue(){return this.immutableState.isRecentIssue}getRecentIssuesCount(){return this.immutableState.recentIssuesCount}getAnalyticsSource(){return Object(j.c)(...F.b)(this.immutableState.analyticsSource)}getCorrelationId(){return this.immutableState.correlationId}getIssueScaleabilityReporter(){return this.immutableState.issueScaleabilityReporter}getStartTime(){return this.startTime}setPreviewEnd(e){this.previewEnd=null===e?0:Math.floor(e)}getPreviewEnd(){return this.previewEnd}setFMP(e){this.fmp=null===e?0:Math.floor(e)}getFMP(){return this.fmp}setInteractiveEnd(e){this.interactiveEnd=e}getInteractiveEnd(){return this.interactiveEnd}setTrueInteractiveEnd(e){this.trueInteractiveEnd=Math.floor(e)}
getTrueInteractiveEnd(){return Math.floor(this.trueInteractiveEnd)}getHasLoadedEditor(){return this.hasLoadedEditor}getIsInitial(){return this.getIsFullIssue()&&!this.getIsSPA()}getLocation(){const{route:e}=this.immutableState,t=null==e?void 0:e.name;return new j.a(t||"")}}var V=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),K=s("./src/packages/issue/issue-context-service/src/types.js");var W=(e=null)=>Object(c.i)("sidebar","modal","default")((e=>{switch(e){case K.a:return"modal";case K.b:return"sidebar";default:return null}})(e)||(()=>window.localStorage&&window.localStorage.getItem("gh.ghx-issue-fragment-view-mode")||"default")().replace(/"/g,""));const B=Object(f.createSelector)(V.e,V.J,V.w,((e,t,s)=>({analyticsKey:new j.a(e),viewMode:W(t),issueId:new j.a(s)})));function H(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?H(Object(s),!0).forEach((function(t){G(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):H(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function G(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const q="issue.metrics";let z;const Y=e=>{try{Object(o.setMark)(e)}catch(t){c.h.safeErrorWithoutCustomerData(q,"Setting performance mark failed",new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t}))}},Q=()=>{Y("ISSUE_FRAGMENT_READY_MARK")},J=e=>{try{const{isLoadedWithPage:t,isSPA:s,isRecentIssue:n,recentIssuesCount:i,dataProvider:r,analyticsSource:o,store:c,route:l}=e;z=new U({isLoadedWithPage:t,isSPA:s,isRecentIssue:n,
analyticsSource:o,recentIssuesCount:i,correlationId:a.a.v4(),lazyMetricsProps:()=>B(c.getState()),timingDataReporter:()=>$($({},h(c.getState())),Object(m.b)()),issueScaleabilityReporter:N(c,e.userPreferenceActions),dataProvider:r,route:l}),b.b.mark("metrics_init")}catch(t){c.h.safeErrorWithoutCustomerData(q,"Failed to initialise issue metrics",new i.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t}))}},Z=()=>{Y("ISSUE_START_RENDERING_MARK"),b.b.mark("ISSUE_START_RENDERING_MARK")},X=()=>{Y("ISSUE_START_FETCHING_DATA"),b.b.mark("ISSUE_START_FETCHING_DATA")},ee=()=>{Y("ISSUE_FETCHED_MARK"),b.b.mark("ISSUE_FETCHED_MARK")},te=({lastTransitionTime:e})=>{const t=z.getIsFullIssue();if(z.setInteractiveEnd(performance.now()),z){const s=e||z.getStartTime();z.getIsFullIssue()&&Object(u.d)("product",d.b,!0),b.b.stop({stopTime:z.getInteractiveEnd(),customData:$($($($({},z.getIssueScaleabilityReporter()()),S()),t?{}:{embeddedIssueFMP:Math.floor(z.getFMP()),
embeddedIssueTTI:Math.floor(z.getInteractiveEnd()-s),analyticsSource:z.getAnalyticsSource()}),{isBentoRecentIssue:z.getIsRecentIssue(),bentoRecentIssuesCount:z.getRecentIssuesCount(),correlationId:z.getCorrelationId()})}),t||Object(p.b)()&&Object(l.c)()}},se=(e=!1)=>{e||(b.a.start({startTime:performance.now()}),Object(p.b)()&&Object(l.b)()),b.b.start()},ne=({isInitialRender:e,lastTransitionStartTime:t})=>{const s=(()=>{const e=Object(o.getMark)(r.SPA_SSR_RENDERED_MARK);return null!=e?Math.floor(e.startTime):null})(),n=performance.now(),a=z.getStartTime();let i=0;i=z.getIsFullIssue()?e?s:n-(t||a):n-a,b.b.mark("ISSUE_PREVIEW_RENDERED"),z.setFMP(i),z.setPreviewEnd(n),Y("ISSUE_PREVIEW_RENDERED")},ae=e=>{z&&z.setIsLoadedWithPage(e)}},"./src/packages/issue/issue-view/src/common/model/comment-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={type:"public",value:""}},"./src/packages/issue/issue-view/src/common/model/linked-issue-type.js":function(e,t,s){
"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));const n="INWARD",a="OUTWARD",i="BOTH",r=e=>{switch(e.toUpperCase()){case n:return n;case a:return a;case i:default:return i}},o={[n]:n,[a]:a,[i]:i}},"./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"b",(function(){return l}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js");const a=Object(n.b)("issue-changeboarding"),i="banner-seen-times",r="banner-first-seen-timestamp",o=()=>a.get(i)||0,c=e=>a.set(i,e),l=e=>a.set(r,e)},"./src/packages/issue/issue-view/src/common/service/issue/child-issue-transformer-new.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return p})),s.d(t,"b",(function(){return m}))
;var n=s("./node_modules/lodash/find.js"),a=s.n(n),i=s("./src/packages/platform/utils/constants/src/status-categories.js"),r=s("./src/packages/issue/issue-view/src/feature-flags.js"),o=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function l(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,
enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p=(e,t)=>{const{fields:s}=e,n=a()(s,(e=>"issuetype"===e.schema.system)),l=a()(s,(e=>"priority"===e.schema.system)),d=a()(s,(e=>"summary"===e.schema.system)),p=a()(s,(e=>"status"===e.schema.system)),m=a()(s,(e=>"assignee"===e.schema.system)),b=m?(e=>{if(null!=e){const{avatarUrl:t,displayName:s}=Object(c.c)(e);return{assigneeUrl:t,assigneeDisplayName:s}}return{assigneeUrl:null,assigneeDisplayName:null}})(m.value):{},f=a()(s,(e=>"com.pyxis.greenhopper.jira:jsw-story-points"===e.schema.custom)),g=a()(s,(e=>"timetracking"===e.schema.system)),h=a()(s,(e=>"created"===e.schema.system)),y=a()(s,(e=>"updated"===e.schema.system));return u(u(u(u({id:e.id,issueLink:Object(o.f)(t,e.key),issueTypeIconUrl:n&&n.value.iconUrl,issueTypeName:n&&n.value.name,issuePriorityUrl:l&&l.value&&l.value.iconUrl||void 0,issuePriorityName:l&&l.value&&l.value.name||void 0,issueKey:e.key,issueSummary:d&&d.value,
statusCategory:p&&p.value&&Object(i.statusCategoryForId)(p.value.statusCategory.id),statusCategoryId:p&&p.value&&p.value.statusCategory.id,statusName:p&&p.value&&p.value.name||void 0,statusId:p&&p.value&&p.value.id||void 0,estimateFieldId:f&&f.key||void 0,estimateValue:f&&f.value||void 0,assigneeDisplayName:b.assigneeDisplayName,assigneeUrl:b.assigneeUrl,isLoading:!1,issueTimeTracking:g&&g.value||void 0},!Object(r.isStateRefactorInChildIssuesPanelEnabled)()&&h&&h.content&&{created:h.content}),Object(r.isStateRefactorInChildIssuesPanelEnabled)()&&h&&h.value&&{created:new Date(h.value)}),!Object(r.isStateRefactorInChildIssuesPanelEnabled)()&&y&&y.content&&{updated:y.content}),Object(r.isStateRefactorInChildIssuesPanelEnabled)()&&y&&y.value&&{updated:new Date(y.value)})},m=(e=[],t)=>e?e.map((e=>p(e,t))):[]},"./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return d})),s.d(t,"h",(function(){return p})),
s.d(t,"g",(function(){return m})),s.d(t,"f",(function(){return b})),s.d(t,"a",(function(){return f})),s.d(t,"b",(function(){return g})),s.d(t,"c",(function(){return h})),s.d(t,"d",(function(){return y}));var n=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/transform-to-iso-string.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),o=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/gira/util.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const u="-created",d=e=>({id:e.id,author:e.author?Object(l.c)(e.author):null,updateAuthor:e.updateAuthor?Object(l.c)(e.updateAuthor):null,bodyAdf:e.body,bodyHtml:void 0,visibility:e.visibility,createdDate:Object(a.a)(e.created),
updatedDate:e.updated?Object(a.a)(e.updated):null,edited:!!e.updated&&e.updated!==e.created,isInternal:!e.jsdPublic}),p=({id:e,author:t,updateAuthor:s,visibility:n,created:i,updated:o,bodyAdf:c,renderedBody:u,jsdPublic:d})=>({id:e,author:t?Object(l.b)(t):null,updateAuthor:s?Object(l.b)(s):null,visibility:n,createdDate:Object(a.a)(i),updatedDate:o?Object(a.a)(o):null,edited:!!o&&o!==i,bodyAdf:Object(r.a)(c),bodyHtml:u,isInternal:!d}),m=e=>({comments:e.data.issueComments.nodes.map((e=>p(e))),totalComments:e.data.issueComments.totalCount}),b=({type:e,value:t})=>{switch(e?e.toLowerCase():null){case"group":return{value:t,type:"group"};case"role":return{value:t,type:"role"};default:{const s=`transformCommentVisibility: unknown comment visibility type received '${e}'`;return i.h.safeErrorWithoutCustomerData("issue.transform.comment",s,new n.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(s)})),{value:t,type:"role"}}}},f=e=>{
const t=e.author?e.author.id:null,s=e.updateAuthor?e.updateAuthor.id:null;return{id:e.id,authorId:t,updateAuthorId:s,bodyAdf:e.bodyAdf,bodyHtml:e.bodyHtml,createdDate:e.createdDate,updatedDate:e.updatedDate,edited:e.edited,visibility:e.visibility?b(e.visibility):o.a,isInternal:e.isInternal}},g=(e,t,s,n)=>{const{comments:a}=e,i=a.filter((e=>e.author)).map((e=>e.author)),r=Math.max("FETCH_NEWER_COMMENTS_REQUEST"===n?s-a.length:s,0);return{users:Object(c.b)(i,"id"),comments:Object(c.b)(a.map(f),"id"),loadedComments:t+a.length,commentsStartIndex:r,totalComments:e.totalComments}},h=(e,t,s,n,a)=>{const{comments:i}=e,r=i.filter((e=>e.author)).map((e=>e.author));let o;return o="FETCH_NEWER_COMMENTS_REQUEST"===n?Math.max("NEWEST_FIRST"===a?s-i.length:s,0):Math.max("NEWEST_FIRST"===a?s:s-i.length,0),{users:Object(c.b)(r,"id"),comments:Object(c.b)(i.map(f),"id"),loadedComments:t+i.length,commentsStartIndex:o,totalComments:e.totalComments}},y=(e,t,s,n,a)=>{
const{comments:i}=e,r=i.filter((e=>e.author)).map((e=>e.author));let o;return o="FETCH_NEWER_COMMENTS_REQUEST"===n?Math.max(a===u?s-i.length:s,0):Math.max(a===u?s:s-i.length,0),{users:Object(c.b)(r,"id"),comments:Object(c.b)(i.map(f),"id"),loadedComments:t+i.length,commentsStartIndex:o,totalComments:e.totalComments}}},"./src/packages/issue/issue-view/src/common/service/issue/customer-request-type-server.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const a=async(e,t,s)=>{if(!t)throw new Error("Issue ID not available");return Object(n.d)(((e,t)=>`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-types/`)(e,t),{body:JSON.stringify({rtId:s})})}},"./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return f}));const r=(e,t)=>t.includes("http")?t:e+t,o=(e,t)=>{if(t&&"icon"===t.type){const s=a({},t);return s.value.label=r(e,t.value.label),s}return t},c=(e,t)=>{const s=Object.keys(t)[0];return a(a({},e),{},{[s]:a(a({},t[s]),e[s])})},l=e=>"string"==typeof e?JSON.parse(e):e,u=(e=[])=>e.map((e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,
appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options),icon:e.icon&&{url:e.icon.url},label:{type:"text",value:e.content||e.name},status:o(l(e.iframe.options).origin,e.status),type:e.type}}}))).reduce(c,{}),d=(e=[])=>e.map((e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options),icon:e.icon&&{url:e.icon.url},tooltip:e.tooltip,type:e.type,showByDefault:!!e.showByDefault}}}))).reduce(c,{}),p=(e=[])=>e.map((({iframe:e,shouldReloadOnRefresh:t})=>({appKey:e.addonKey,moduleKey:e.moduleKey,options:l(e.options),shouldReloadOnRefresh:t}))),m=(e=[])=>e.map((e=>({[e.iframe.addonKey]:{[e.iframe.moduleKey]:{name:e.name,appKey:e.iframe.addonKey,moduleKey:e.iframe.moduleKey,options:l(e.iframe.options)}}}))).reduce(c,{}),b=(e=[])=>e.map((e=>({name:e.name,url:e.url,tooltip:e.tooltip,styleClass:e.styleClass}))),f=e=>({glances:u(e.glances),contentPanels:d(e.contentPanels),
backgroundScripts:p(e.backgroundScripts),operations:b(e.operations),activityPanels:m(e.activityPanels),ecosystemOnDate:e.ecoSystemOnDate,canInstallAddons:e.canInstallAddons||!1})},"./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"d",(function(){return p})),s.d(t,"c",(function(){return m}));var n=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js"),a=s("./src/packages/platform/utils/permalinks/src/index.js"),i=s("./src/packages/platform/utils/permalinks/src/constants.js");const r=(e,t,s)=>`\n    comments (first: ${t}, maxResults: ${e}, orderBy: "${s}", ${(()=>{const{hasPermalink:e,permalinkId:t}=Object(a.a)(i.a);return e?`commentId: ${t}`:""
})()}) {\n        nodes {\n            id\n            author {\n                accountId\n                displayName\n                avatarUrl\n            }\n            updateAuthor {\n                accountId\n                displayName\n                avatarUrl\n            }\n            visibility {\n                type\n                value\n            }\n            created\n            updated\n            renderedBody\n            jsdPublic\n            bodyAdf\n        }\n        totalCount\n        startIndex\n    }\n`;function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=()=>r(5,0,"-created"),d=e=>{const{comments:t}=e;if(!t)return{users:{},comments:{},totalComments:0,commentsStartIndex:0,loadedComments:0};const{totalCount:s,startIndex:a}=t,i={data:{issueComments:t}};return c(c({},Object(n.b)(Object(n.g)(i),0,a)),{},{totalComments:s,commentsStartIndex:a})},p=(e,t,s,a,i)=>{const{comments:r}=e;if(!r)return{users:{},comments:{},totalComments:0,commentsStartIndex:0,loadedComments:0};const{totalCount:o}=r,l={data:{issueComments:r}};return c(c({},Object(n.c)(Object(n.g)(l),t,s,a,i)),{},{totalComments:o})},m=(e,t,s,a,i)=>{const{comments:r}=e;if(!r)return{users:{},comments:{},totalComments:0,commentsStartIndex:0,loadedComments:0}
;const{totalCount:o}=r,l={data:{issueComments:r}};return c(c({},Object(n.d)(Object(n.g)(l),t,s,a,i)),{},{totalComments:o})}},"./src/packages/issue/issue-view/src/common/service/issue/gira/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return re})),s.d(t,"a",(function(){return ce})),s.d(t,"b",(function(){return le}))
;var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/platform/utils/fetch/src/utils.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),c=s("./src/packages/issue/issue-fetch-services/src/services/issue-gira-data/index.js"),l=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js"),u=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js"),d=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js")
;var p=s("./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js"),m=s("./node_modules/lodash/flatten.js"),b=s.n(m),f=s("./node_modules/lodash/isNumber.js"),g=s.n(f),h=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),y=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),O=s("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/gira/util.js");function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){k(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=e=>{if(!e.ecosystem||!e.fields)return{ecosystem:{},issueContentPanels:[],forgeIssueProperties:{collapsedPanels:[]}};const{ecosystem:t}=e,s=Object(j.a)(e.fields,"GlancesField"),n=s?s.value.map((e=>E(E({},e),{},{status:e.status?JSON.parse(e.status):null}))):[],{forgeCollapsedPanels:a,forgePanelsKeys:i}=(e=>{const t=e.forge?b()((e.forge.panels||[]).map((e=>{const{id:t,instances:s}=e;return(Array.isArray(s)?s:[]).filter((({added:e})=>g()(e))).map((({added:e,id:s,collapsed:n})=>({key:Object(h.f)(t,s,e),collapsed:n||!1})))}))):[];return{forgeCollapsedPanels:t.filter((({collapsed:e})=>e)).map((({key:e})=>e)),forgePanelsKeys:t.map((({key:e})=>e))}
})(t),r=t?(t.contentPanels||[]).filter((e=>e.manuallyAddedToIssue)).map((e=>`${e.iframe.addonKey}_${Object(y.b)(e.iframe.moduleKey)}`)):[],o=t.contentPanelsCustomised?["issue.content.panel.customised.flag"]:[],c={contentPanels:t.contentPanels||[],operations:t.operations||[],activityPanels:t.activityPanels||[],backgroundScripts:t.backgroundScripts||[],ecoSystemOnDate:t.ecoSystemOnDate||0,contentPanelsCustomised:t.contentPanelsCustomised};return{ecosystem:Object(O.b)(E(E({},c),{},{glances:n,canInstallAddons:!1})),issueContentPanels:[...i,...r,...o],forgeIssueProperties:{collapsedPanels:a}}
},S=()=>"\n      timeTracking {\n        isTimeTrackingEnabled\n        hoursPerDay\n        daysPerWeek\n        defaultUnit\n      }\n",C=({shouldRefreshComments:e}={})=>`\n    query issueViewDynamicQuery($issueKey: String!) {\n        viewIssue(issueKey: $issueKey) {\n            ${!0===e?Object(p.a)():""}  \n            ${(()=>(()=>`\n    ecosystem {\n      operations {\n        name\n        url: href\n        icon {\n          url\n        }\n        tooltip\n        styleClass\n      }\n      contentPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        icon {\n          url\n        }\n        tooltip\n        type\n        showByDefault\n        manuallyAddedToIssue\n      }\n      activityPanels {\n        name\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n      }\n      backgroundScripts {\n        iframe {\n          addonKey\n          moduleKey\n          options\n        }\n        shouldReloadOnRefresh\n      }\n      ecoSystemOnDate\n      contentPanelsCustomised \n      ${(()=>"forge {\n        panels {\n          id\n          instances {\n            id\n            collapsed\n            added\n          }\n        }\n      }")()}\n    }\n`)())()}\n            fields {\n                __typename \n                    ${(()=>"\n  ... on GlancesField {\n    fieldKey\n    value {\n      name\n      status\n      iframe {\n        addonKey\n        moduleKey\n        options\n      }\n      icon {\n        url\n      }\n      content\n      type\n    }\n  }\n")()}\n            }\n        }\n        ${(()=>`\n    jiraSettings {\n      ${S()}\n      issueLinkTypes {\n        id\n        name\n        inward\n        outward\n      }\n    }\n`)()}\n        ${(()=>"\n    licensedProducts {\n        name\n        status\n    }\n")()}\n        activitySortOrder\n    }\n`
;function I(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function T(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?I(Object(s),!0).forEach((function(t){P(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):I(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function P(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _={isTimeTrackingEnabled:!1,daysPerWeek:5,hoursPerDay:8,defaultUnit:"minute",format:"pretty"},x=e=>({timeTrackingConfiguration:e.timeTracking||_});function D(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function A(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?D(Object(s),!0).forEach((function(t){L(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):D(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function L(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const M={CONTENT_VISIBLE:"visible",CONTENT_REQUEST:"request"},R={CONTEXT_PRIMARY:"primary",CONTEXT_SECONDARY:"secondary"},N={primary:[],secondary:[]},F=({itemId:e,type:t})=>({id:e,type:t}),U=e=>e.layoutItems.reduce(((e,{category:t,items:s})=>{const n=R[t];return void 0!==n?A(A({},e),{},{[`${n}`]:s.map(F)}):e}),N),V={visible:[],request:void 0},K=e=>e.layoutItems?e.layoutItems.reduce(((e,{category:t,items:s})=>{const n=M[t]
;return void 0!==n?A(A({},e),{},{[`${n}`]:s.map(F)}):e}),V):V;var W=s("./src/packages/platform/utils/types/src/license-state.js");function B(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function H(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?B(Object(s),!0).forEach((function(t){$(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):B(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const G=(e=[],t)=>{const s=e.find((e=>e.name===t));switch(s&&s.status){case"ACTIVE":return W.a;case"SUSPENDED":return W.c;case"EXPIRED":return W.b;default:return W.d}
},q=(e=[])=>({licensedProducts:e.reduce(((e,t)=>H(H({},e),{},{[t.name]:"ACTIVE"===t.status})),{}),licenseStates:{core:G(e,"jira-core"),software:G(e,"jira-software"),serviceDesk:G(e,"jira-servicedesk")}});var z=s("./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js");var Y=s("./src/packages/issue/project-permissions-service/src/context.js"),Q=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js");function J(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Z(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?J(Object(s),!0).forEach((function(t){X(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):J(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function X(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var ee=s("./src/packages/rich-content/src/common/adf-parsing-utils.js");const te=e=>{const{accountId:t,displayName:s=null,avatarUrl:n=null}=e;return{accountId:t,displayName:s,avatarUrl:n}},se=e=>{const t=e.map((e=>(e=>{const{id:t,author:s,updateAuthor:n,created:a,updated:i,started:r,comment:o,timeSpent:c}=e,l=i!==a;return{id:t,author:s?te(s):null,updateAuthor:l&&n?te(n):null,updated:l?i:null,started:r,timeSpent:c,comment:Object(ee.a)(o)}})(e)));return{worklogs:Object(j.b)(t,"id")}};s("./src/packages/platform/utils/permalinks/src/index.js");function ne(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ae(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(s),!0).forEach((function(t){ie(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ne(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ie(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const re=e=>{const{activitySortOrder:t,viewIssue:s,licensedProducts:n,jiraSettings:a,permissions:i,myPreferences:r,mediaContext:o,project:c}=e;return ae(ae(ae(ae(ae(ae(ae(ae(ae(ae(ae(ae({},(e=>({attachments:e.attachments}))(s)),Object(p.b)(s)),(e=>{const{worklogs:t}=e;if(!t)return{worklogs:{},sortedWorklogIds:[],totalWorklogs:0,worklogsStartIndex:0};const{totalCount:s,startIndex:n,nodes:a}=t,{worklogs:i}=se(a);return{worklogs:i,sortedWorklogIds:a.map((e=>e.id)),totalWorklogs:s,worklogsStartIndex:n}})(s)),w(s)),q(n)),(e=>{
const t=x(e),s=((e={issueLinkTypes:[]})=>{const t=[];return e.issueLinkTypes.forEach((e=>t.push(...(({id:e,inward:t,outward:s})=>{const n=[];return t&&t===s?n.push({id:e,label:t,direction:"BOTH"}):(n.push({id:e,label:t,direction:"INWARD"}),n.push({id:e,label:s,direction:"OUTWARD"})),n})(e)))),{issueLinkTypes:t}})({issueLinkTypes:e.issueLinkTypes||[]}),n=(e=>({subtasksConfiguration:e.subtasks}))(e),a=(e=>({newIssueViewTransitionSettings:e.newIssueViewTransitionSettings}))(e);return{jiraSettings:T(T(T(T({},t),s),n),a)}})(a)),(e=>e&&0!==e.length?Object(Q.d)({permissions:e.reduce(((e,t)=>Z(Z({},e),{},{[t.key]:t})),{})}):{permissions:Y.a})(i)),(e=>e?{myPreferences:e}:Object.freeze({}))(r)),(e=>({issueTypes:e?e.issueTypes:[],newIssueViewLockedIn:Boolean(e&&e.newIssueViewLockedIn)}))(c)),{},{contextItemsCategories:U(s),contentItemsCategories:K(s),issueSections:s.issueSections},(e=>e?Object(z.a)(e):{})(o)),(e=>{const{remoteLinks:t}=e;return t?{remoteLinks:t}:{remoteLinks:{isLinkingEnabled:!1,
remoteLinkedIssues:[]}}})(s)),{},{activitySortOrder:t})},oe=e=>{let t=0;const s=e=>e.path?e.path.join("."):e.locations?e.locations.map((e=>`line ${e.line}, column ${e.column}`)).join("&"):(t+=1,`error without path or location: ${t}`),n=e.reduce(((e,t)=>ae(ae({},e),{},{[s(t)]:t.message})),{});return new a.a({eventNameSuffix:"issue.error.gira",type:"fetch",app:"issue",event:n})},ce=async(e,t,s)=>{const a=Object(d.a)(s,(()=>n.Observable.fromPromise(Object(c.a)(e,t)))).toPromise(),{data:l,errors:p}=await a;if(!l){const e=p?JSON.stringify(oe(p)):"No data returned from graphql call";throw new u.a(new Error(e),o.a)}if(l&&p&&i.h.safeErrorWithoutCustomerData("issue.fetch.gira","Failed to fetch some data from gira",oe(p)),!l.viewIssue)throw new u.a(new r.a(404,"Call to gira returned empty viewIssue"),o.a);return re(l)},le=async(e,t,s)=>{const n=await Object(l.a)(e).query({query:C(s),variables:{issueKey:t}}),{data:a,errors:r}=n;if(!a){
const e=r?JSON.stringify(oe(r)):"No data returned from graphql call for dynamic data";throw new Error(e)}return a&&r&&i.h.safeErrorWithoutCustomerData("issue.fetch.gira.dynamic","Failed to fetch some data from gira for dynamic data fetch",oe(r)),(e=>{const{viewIssue:t,licensedProducts:s,jiraSettings:n,activitySortOrder:a}=e;return ae(ae(ae(ae(ae({},t&&t.comments?Object(p.b)(t):{}),q(s)),w(t)),x(n)),{},{activitySortOrder:a})})(a)}},"./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o}));const n=e=>e.length>0?e[0].token:null,a=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:n(e.tokensWithFiles),areTokenPermissionsUpToDate:!0,tokenLifespanInMs:1e3*e.tokenLifespanInSeconds,tokenIssueTimestamp:Date.now()-1e4,collection:null
}),i=e=>null!=e.clientId&&null!=e.endpointUrl&&null!=e.token&&null!=e.tokenDurationInMins&&null!=e.targetCollection?{clientId:e.clientId,serviceHost:e.endpointUrl,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,collection:e.targetCollection,tokenIssueTimestamp:Date.now()-1e4}:null!=e.error?{error:e.error}:null,r=e=>({clientId:e.id,token:e.token,tokenLifespanInMs:60*Number(e.tokenDurationInMins)*1e3,tokenIssueTimestamp:Date.now()-1e4}),o=({readToken:e,uploadToken:t,userToken:s})=>({viewContext:e?a(e):null,uploadContext:t?i(t):null,userAuth:s?r(s):null})},"./src/packages/issue/issue-view/src/common/service/issue/gira/util.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));const r=(e,t)=>e.find((e=>e.__typename===t)),o=(e,t)=>e.reduce(((e,s)=>a(a({},e),{},{[s[t]]:s})),{})},"./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return C})),s.d(t,"a",(function(){return I})),s.d(t,"b",(function(){return T})),s.d(t,"d",(function(){return P}))
;var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),r=s("./src/packages/platform/utils/types/src/general.js"),o=s("./src/packages/issue/issue-fetch-services-common/src/services/issue-gira-data/index.js"),c=s("./src/packages/issue/issue-view/src/feature-flags.js"),l=s("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js"),u=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),b=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const f=(e,t)=>[e.retry(2),t.retry(2)]
;var g=s("./src/packages/issue/issue-view/src/common/service/issue/gira/index.js"),h=s("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js"),y=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js"),O=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js");function v(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function E(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?v(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):v(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}
function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const w=(e,t,s)=>a.a`query {
        issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
            id
            ${(e=>e?"":"viewScreenId")(s)}
            fields {
                key
                title
                editable
                required
                autoCompleteUrl
                allowedValues
                content
                renderedContent
                schema {
                    custom
                    system
                    ${(()=>"configuration {\n        key\n        value\n    }\n    ")()}
                    items
                    type
                    renderer
                }
                configuration
            }
            expandAssigneeInSubtasks
            expandAssigneeInIssuelinks
            expandTimeTrackingInSubtasks
            ${Object(c.isSortingIssuesUnderEpicEnabled)()?"expandSystemDateTimesForChildIssues":""}
            systemFields {
                descriptionAdf {
                    value
                }
                ${(()=>"environmentAdf {\n        value\n    }")()}
            }
            customFields {
                textareaAdf {
                    key
                    value
                }
            }            
            ${(()=>"tabs {\n        id\n        name\n        items {\n            id\n            type\n        }\n    }")()}
            ${(()=>"\n    agile {\n        epic {\n          key\n        },\n    }")()}
        }
        project(projectIdOrKey: "${t}") {
            id
            name
            key
            projectTypeKey
            simplified
            avatarUrls {
                key
                value
            }
            ${Object(c.isCollapseNextGenIssueTypeHierarchyEnabled)()?"":(()=>"issueTypeHierarchy {\n        baseLevelId\n        levels {\n            id\n            aboveLevelId\n            belowLevelId\n        }\n    }\n    ")()}
        }
    }`,S=(e,t,s,n,a)=>Object(u.a)(a,(()=>Object(i.a)(Object(O.d)(e),((e,t,s)=>({method:"POST",body:JSON.stringify({query:w(e,t,s)})}))(t,s,n)))).catch((e=>{throw new l.a(e,Object(O.d)(Object(r.b)("{baseUrl}")))})).map((e=>((e,t)=>{if(t.errors){const s=t.errors[0],n=new b.a(s.message);throw m.h.safeErrorWithoutCustomerData(e,"getGraphQlData: Error present in GraphQL response",new p.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:n})),n}return t.data})("issue.fetch.issue-fetch-server",e))).map((t=>Object(y.c)(t,e))),C=(e,t)=>{const s=Object(d.f)(e),a=Object(d.x)(e),i=Object(d.C)(e),r=Object(d.n)(e);return n.Observable.zip(...f(n.Observable.fromPromise(Object(g.b)(s,a,t)),S(s,a,i,r)),((e,t)=>E(E({},e),t)))},I=(e,t)=>{const s=Object(d.f)(e),a=Object(d.x)(e),i=Object(d.C)(e),r=Object(d.n)(e),c=n.Observable.fromPromise(Object(g.a)(s,a,t&&t.issueGiraData)).catch((e=>{throw new l.a(e,o.a)
})),u=S(s,a,i,r,t&&t.issueGraphqlData),p=Object(d.r)(e),m=Object(d.o)(e),b=!(p||m)?f(c,u):((e,t,s)=>[e.retry(2),t.retry(2),s.retry(2)])(c,u,Object(j.a)(s,i));return n.Observable.zip(...b,((e,t)=>E(E(E({},e),t),{},{issue:E(E({},t.issue),{},{contextItemsCategories:e.contextItemsCategories,contentItemsCategories:e.contentItemsCategories})})))},T=(e,t,s)=>n.Observable.from(t).bufferCount(50).flatMap((t=>((e,t,s)=>Object(i.a)(Object(O.o)(e),{method:"POST",body:JSON.stringify({jql:t,fields:s})}).map(y.b))(e,`key in (${t.join(",")})`,s))).reduce(((e,t)=>[...e,...t]),[]),P=(e,t)=>Object(i.a)(Object(O.g)(e,t)).map((t=>t.fields.issuelinks&&Object(h.b)(e,t.fields.issuelinks)))},"./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return b})),s.d(t,"a",(function(){return f}))
;var n=s("./node_modules/lodash/get.js"),a=s.n(n),i=s("./src/packages/platform/utils/constants/src/index.js"),r=s("./src/packages/platform/utils/types/src/general.js"),o=s("./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}
return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const{statusCategoryForId:m}=i.a,b=(e,t=[])=>{let s={},n={};t&&t.filter(Boolean).forEach((({id:t,inwardIssue:i,outwardIssue:o,type:u})=>{let p,b,f=null;if(i?(b="inward",f=u.inward,p=i):o&&(b="outward",f=u.outward,p=o),f&&null!=p){const i={id:Object(r.j)(t),linkedIssueKey:p.key,direction:b,typeName:f,typeId:u.id};s=d(d({},s),{},{[t]:i});const o=((e,t)=>{const{id:s,key:n,fields:i}=e;return{id:s,issueKey:n,issueLink:Object(c.f)(t,e.key),issueSummary:i.summary,statusCategory:m(a()(e.fields,"status.statusCategory.id")),statusCategoryId:a()(e.fields,"status.statusCategory.id"),statusName:i.status&&i.status.name,statusId:i.status&&i.status.id,issuePriorityUrl:a()(i,"priority.iconUrl",null),issuePriorityName:a()(i,"priority.name",null),issueTypeIconUrl:a()(i,"issuetype.iconUrl",null),issueTypeName:a()(i,"issuetype.name",null),
assigneeDisplayName:i.assignee?Object(l.c)(i.assignee).displayName:null,assigneeUrl:i.assignee?Object(l.c)(i.assignee).avatarUrl:null}})(p,e);n=d(d({},n),{},{[o.issueKey]:o})}}));const i=s?Object.values(s).map((({linkedIssueKey:e})=>e)):[];return{issueLinks:s,linkedIssueKeys:i,linkedIssues:n}},f=e=>e.map((e=>{const{id:t,type:s}=e;return{id:t,type:s,inwardIssue:e.inwardIssue?Object(o.b)(e.inwardIssue):null,outwardIssue:e.outwardIssue?Object(o.b)(e.outwardIssue):null}}))},"./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return P})),s.d(t,"a",(function(){return D})),s.d(t,"c",(function(){return L})),s.d(t,"b",(function(){return M}))
;var n=s("./src/packages/platform/utils/constants/src/status-categories.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/date/transform-to-iso-string.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),l=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");function u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){p(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const m=(e,t)=>{const{fields:s}=e;return d(d({id:e.id,issueLink:Object(c.f)(t,e.key),issueTypeIconUrl:s.issuetype.iconUrl,issueTypeName:s.issuetype.name,issuePriorityUrl:s.priority&&s.priority.iconUrl||void 0,issuePriorityName:s.priority&&s.priority.name||void 0,issueKey:e.key,issueSummary:s.summary,statusCategory:Object(n.statusCategoryForId)(s.status.statusCategory.id),statusCategoryId:s.status.statusCategory.id,statusName:s.status.name,statusId:s.status.id},(e=>{if(null!=e){const{avatarUrl:t,displayName:s}=Object(l.c)(e);return{assigneeUrl:t,assigneeDisplayName:s}}return{assigneeUrl:null,assigneeDisplayName:null}})(s.assignee)),{},{isLoading:!1})}
;var b=s("./src/packages/issue/issue-view/src/common/service/issue/child-issue-transformer-new.js"),f=s("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js");const g=(e=[],t)=>null===e?[]:e.map((e=>((e,t)=>({id:e.id,issueLink:Object(c.f)(t,e.key),issueTypeIconUrl:e.fields.issuetype.iconUrl,issueTypeName:e.fields.issuetype.name,issuePriorityUrl:e.fields.priority&&e.fields.priority.iconUrl||void 0,issuePriorityName:e.fields.priority&&e.fields.priority.name||void 0,issueKey:e.key,issueSummary:e.fields.summary,statusCategory:Object(n.statusCategoryForId)(e.fields.status.statusCategory.id),statusCategoryId:e.fields.status.statusCategory.id,statusId:e.fields.status.id,statusName:e.fields.status.name,isLoading:!1,hasError:!1,assigneeUrl:e.fields.assignee?Object(l.c)(e.fields.assignee).avatarUrl:null,assigneeDisplayName:e.fields.assignee?Object(l.c)(e.fields.assignee).displayName:null,issueTimeTracking:e.fields.timetracking}))(e,t)));function h(e,t){
if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function y(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function O(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?y(Object(s),!0).forEach((function(t){j(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):y(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function j(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,
enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const v=e=>e?Object(a.a)(e):null,E=(e,t)=>e&&e[t],k=e=>e?{id:Object(i.j)(e.id),key:Object(i.l)(e.key),summary:e.fields.summary,issueTypeName:e.fields.issuetype?e.fields.issuetype.name:"",issueTypeIconUrl:e.fields.issuetype?e.fields.issuetype.iconUrl:""}:null,w=e=>({id:Number(e.id),level:null,aboveLevelId:e.aboveLevelId?Number(e.aboveLevelId):null,belowLevelId:e.belowLevelId?Number(e.belowLevelId):null}),S=e=>e?e.reduce(((e,t)=>O(O({},e),{},{[t.id]:w(t)})),{}):{},C=e=>e?{baseLevelId:Number(e.baseLevelId),levels:S(e.levels)}:null,I=e=>{if(e.project.avatarUrls){const t=e.project.avatarUrls.find((e=>"32x32"===e.key));return t?t.value:t}return e.project.avatarUrls},T=(e,t)=>{const s=(e=>e.reduce(((e,t)=>O(O({},e),{},{[t.key]:t})),{}))(e.issue.fields),a=(e=>t=>t?t.split(".").reduce(E,e):e)(s),i=a("subtasks.content"),r=a("parent-issue.content"),c=a("children-issues.content"),l=a("epic-issues.content"),u=a("portfolio-child-issues.content")
;let d=[];return c?d=Object(b.b)(c,t):l?d=Object(b.b)(l,t):u&&(d=((e=[],t)=>e?e.map((e=>m(e,t))):[])(u,t)),{project:{projectId:e.project.id,projectName:e.project.name,projectKey:e.project.key,projectType:e.project.projectTypeKey,isSimplified:e.project.simplified,avatarUrl:I(e),issueTypeHierarchy:Object(o.collapsedHierarchies)()?null:C(e.project.issueTypeHierarchy)},createdDate:v(a("created.content")),updatedDate:v(a("updated.content")),statuses:{[s.status.content.id]:{id:s.status.content.id,name:s.status.content.name,statusCategory:Object(n.statusCategoryForId)(s.status.content.statusCategory.id)}},issueLinks:s.issuelinks&&Object(f.b)(t,s.issuelinks.content),subtasks:g(i,t),parentIssue:k(r),childrenIssues:d}},P=e=>{
const{permissions:{ADMINISTER:t,ADMINISTER_PROJECTS:s,ASSIGN_ISSUES:n,EDIT_ISSUES:a,SCHEDULE_ISSUES:i,ADD_COMMENTS:r,DELETE_ALL_COMMENTS:o,DELETE_OWN_COMMENTS:c,EDIT_ALL_COMMENTS:l,EDIT_OWN_COMMENTS:u,CREATE_ISSUES:d,CREATE_SUBTASK:p,CLONE_ISSUE:m,DELETE_ISSUES:b,MOVE_ISSUES:f,MODIFY_REPORTER:g,CREATE_ATTACHMENTS:h,DELETE_ALL_ATTACHMENTS:y,DELETE_OWN_ATTACHMENTS:O,WORK_ON_ISSUES:j,ASSIGNABLE_USER:v,LINK_ISSUES:E,VIEW_VOTERS_AND_WATCHERS:k,MANAGE_WATCHERS:w,EDIT_ALL_WORKLOGS:S,EDIT_OWN_WORKLOGS:C,DELETE_ALL_WORKLOGS:I,DELETE_OWN_WORKLOGS:T,USER_PICKER:P,VIEW_DEV_TOOLS:_,SERVICEDESK_AGENT:x,RESOLVE_ISSUES:D}}=e;return{permissions:{canAddComments:r.havePermission,canAdministerJira:t.havePermission,canAdministerProject:s.havePermission,canAssignIssues:n.havePermission,canBeAssignedToIssues:v.havePermission,canCloneIssue:m.havePermission,canCreateAttachments:h.havePermission,canCreateChildren:d.havePermission,canCreateIssuesInClassicProjectEpic:d.havePermission,
canCreateSubtask:p.havePermission,canDeleteAllAttachments:y.havePermission,canDeleteOwnAttachments:O.havePermission,canDeleteAllComments:o.havePermission,canDeleteOwnComments:c.havePermission,canDeleteIssue:b.havePermission,canEditAllComments:l.havePermission,canEditOwnComments:u.havePermission,canEditIssues:a.havePermission,canLinkIssues:E.havePermission,canLogWork:j.havePermission,canManageWatchers:w.havePermission,canMoveIssue:f.havePermission,canModifyReporter:g.havePermission,canScheduleIssues:i.havePermission,canViewWatchers:k.havePermission,canViewVoters:k.havePermission,canEditAllWorklogs:S.havePermission,canEditOwnWorklogs:C.havePermission,canDeleteAllWorklogs:I.havePermission,canDeleteOwnWorklogs:T.havePermission,canBrowseUsers:P.havePermission,canViewDevTools:!(!_||!_.havePermission),canUseServiceDeskAgentFeatures:!(!x||!x.havePermission),canResolveIssues:D.havePermission}}},_=e=>{
const{content:t,renderedContent:s,configuration:n}=e,a=h(e,["content","renderedContent","configuration"]),i=void 0!==t||void 0!==s;return O(O(O(O({},i?{value:t}:null),i?{renderedValue:s}:null),n&&{configuration:n}),a)},x=(e,t)=>{const s=((e,t)=>{const s=e.issue.systemFields[`${t}Adf`],n=e.issue.customFields.textareaAdf.find((e=>e.key===t));return s||n||null})(e,t);let n;n=s&&s.value?{value:s.value}:{value:r.c};const a="string"==typeof n.value?JSON.parse(n.value):n.value;return Object(r.h)(a)},D=e=>{const t=new Set(e.issue.fields.filter((e=>"atlassian-wiki-renderer"===e.schema.renderer)).map((e=>e.key))),s=e.issue.customFields.textareaAdf.map((e=>e.key)).filter((e=>t.has(e))),n=[...["description","environment"].filter((e=>t.has(e)||"description"===e)),...s].map((t=>({key:t,value:x(e,t)})));return e.issue.fields.map((e=>{const t=n.find((t=>t.key===e.key&&null!==t.value));return t?{[t.key]:O(O({},_(e)),{},{adfValue:t.value})}:{[e.key]:_(e)}})).reduce(((e,t)=>Object.assign(e,t)))
},A=e=>e?e.reduce(((e,{id:t,name:s,items:n})=>O(O({},e),{},{[t]:{id:t,name:s,items:n}})),{}):{},L=(e,t)=>{const s=T(e,t),n={issue:O({id:e.issue.id,agile:e.issue.agile,fields:D(e),tabs:A(e.issue.tabs)},e.issue.viewScreenId?{viewScreenId:e.issue.viewScreenId}:null)};return O(O({},n),s)},M=({issues:e=[]}={})=>e},"./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js":function(e,t,s){"use strict";s.d(t,"q",(function(){return n})),s.d(t,"f",(function(){return r})),s.d(t,"j",(function(){return o})),s.d(t,"e",(function(){return c})),s.d(t,"o",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"p",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"i",(function(){return f})),s.d(t,"m",(function(){return g})),s.d(t,"n",(function(){return h})),s.d(t,"d",(function(){return y})),s.d(t,"b",(function(){return O})),s.d(t,"c",(function(){return j})),s.d(t,"h",(function(){return v})),s.d(t,"l",(function(){return k})),s.d(t,"k",(function(){return w}))
;const n=e=>e,a=/^([A-Z][A-Z0-9]+)-([0-9]*)$/i,i=e=>{if(e){const t=a.exec(e);if(t&&3===t.length)return t[1]}},r=(e,t)=>`${e}/browse/${t}`,o=(e,t)=>`${e}/browse/${t}`,c=(e,t)=>`${e}/rest/api/2/issue/${t}`,l=e=>`${e}/rest/api/2/search`,u=(e,t)=>`${e}/rest/api/2/issue/${t}?fields=issuelinks`,d=(e,t,s,n)=>`${e}/rest/api/2/issue/picker?currentIssueKey=${s}&showSubTasks=true&showSubTaskParent=true&query=${encodeURIComponent(n)}&currentJQL=${encodeURIComponent(t)}`,p="(resolution = Unresolved or statusCategory != Done) ORDER BY priority DESC, updated DESC",m=(e,t,s)=>{let n=`project in projectsWhereUserHasPermission("Link Issues") AND ${p}`;const a=i(s);return a&&(n=`project = "${a.toUpperCase()}" AND ${n}`),d(e,n,t,s)},b=(e,t,s)=>{let n="";const a=i(s);return a&&(n=`project = "${a.toUpperCase()}" ORDER BY priority DESC, updated DESC`),d(e,n,t,s)
},f=(e,t)=>`${e}/rest/api/2/issue/createmeta?projectKeys=${t}&expand=projects.issuetypes.fields`,g=e=>`${e}/rest/api/2/issueLink`,h=(e,t)=>`${e}/rest/remoteJiraIssueLink/1/remoteJira/${t}/createIssueLink`,y=e=>`${e}/rest/graphql/1/`,O=e=>`${e}/rest/api/2/mypreferences?key=jira.user.issue.changeboarding.lastinteracted`,j=e=>`${e}/rest/confluenceIssueLink/1/confluence/applink`,v=(e,t)=>`${e}/rest/issueLinkAppLink/1/appLink/info?type=com.atlassian.applinks.api.application.jira.JiraApplicationType&issueIdOrKey=${t}`,E=(e,t,s,n)=>`${e}/rest/remoteJiraIssueLink/1/remoteJira/picker?showSubTasks=true&showSubTaskParent=true&query=${encodeURIComponent(s)}&currentJQL=${encodeURIComponent(t)}&appId=${n}`,k=(e,t,s)=>{let n=p;const a=i(t);return a&&(n=`project = "${a.toUpperCase()}" AND ${n}`),E(e,n,t,s)},w=(e,t,s)=>{let n="";const a=i(t);return a&&(n=`project = "${a.toUpperCase()}" ORDER BY priority DESC, updated DESC`),E(e,n,t,s)}},
"./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/query-string/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-context-service/src/types.js");const r=()=>a.a.parse(window.location.search).view||"",o=()=>r().includes("planning"),c=e=>e?e===i.b:o()||(()=>"detail"===r())()},"./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),i=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),r=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),o=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),c=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js")
;const l=e=>e.projects[0]?{subtaskTypes:e.projects[0].issuetypes.filter((e=>e.subtask)),issueTypes:e.projects[0].issuetypes}:{subtaskTypes:[],issueTypes:[]},u=(e,t,s)=>((e,t)=>Object(i.a)(e,{perf:r.f,headersProcessor:t&&t(r.f.key)}).map(l).catch((e=>(Object(o.a)("issue.issue-base.content.subtasks.type.subtasks-types-epic","Failed to fetch subtask types.",e,new a.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),n.Observable.of({subtaskTypes:[],issueTypes:[]})))))(Object(c.i)(e,t),s)},"./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return m})),s.d(t,"a",(function(){return b})),s.d(t,"b",(function(){return g})),s.d(t,"d",(function(){return h}));var n=s("./node_modules/lodash/every.js"),a=s.n(n),i=s("./node_modules/lodash/has.js"),r=s.n(i),o=s("./node_modules/lodash/partial.js"),c=s.n(o),l=s("./src/packages/platform/utils/types/src/general.js");function u(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p=["accountId","displayName","avatarUrls","timeZone"],m=({accountId:e,displayName:t,avatarUrls:s,timeZone:n})=>({displayName:t,id:Object(l.a)(e),avatarUrl:s["48x48"],timeZone:n}),b=e=>{const{applicationRoles:t}=e;return t&&t.items&&t.items.map((e=>e.key))||[]},f=e=>{const t=e.find((e=>"48x48"===e.key));return t&&t.value||null},g=e=>{const{accountId:t,displayName:s,avatarUrl:n,avatarUrls:a,timeZone:i}=e;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?u(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):u(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:t,displayName:s,avatarUrl:n||f(a)},i?{timeZone:i}:{})},h=e=>{if(!e)throw new Error("User is null or undefined");if(!(e&&a()(p,c()(r.a,e))))throw new Error(`User object is not expected shape, keys present: ${Object.keys(e).toString()}`);return e}},"./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js":function(e,t,s){"use strict";var n=s("./node_modules/memoize-one/dist/memoize-one.esm.js");t.a=Object(n.a)((e=>t=>`${e}/people/${t}`))},"./src/packages/issue/issue-view/src/common/service/mentions/issue-user-team-mention-provider.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("./node_modules/query-string/index.js"),a=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/platform/services/mention-provider/src/services/user-mention-provider/index.js")
;function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l=e=>null==e||""===e?"":`${window.location.origin}/jira/people/team/${e}?ref=jira$&src=issue`,u=({accountId:e,teamId:t,name:s,avatarUrl:n,members:a,memberCount:r,includesYou:o})=>a?{id:Object(i.a)(t||""),name:s,accessLevel:"CONTAINER",userType:"TEAM",avatarUrl:n,context:{members:a.map((e=>(({accountId:e,name:t})=>({id:e,name:t}))(e))),memberCount:r||0,includesYou:o||!1,teamLink:l(t)}}:{name:s,mentionName:s,nickname:s,id:Object(i.a)(e||""),avatarUrl:n};class d extends r.a{constructor(e,t,s,a,i){super(e,t,s,i),this.teamHighlightEnabled=void 0,this.createTeamPath=void 0,this.mentionTypeaheadHighlightEnabled=()=>!0,
this.mentionTypeaheadCreateTeamPath=()=>this.createTeamPath,this.getQueryString=(e,t)=>Object(n.stringify)(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){c(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({query:e||"",issueKey:this.issueKey,maxResults:20},t)),this.getUrl=e=>`${this.baseUrl}/rest/internal/2/userteam/mention/search?${e}`,this.createTeamPath=a}search(e,t){const s=this.getQueryString(e,t),n=this.getUrl(s);return this.activeSearches.add(e||""),Object(a.a)(n).mergeMap((e=>e.map(u))).reduce(((e,t)=>[...e,t]),[]).map((t=>({query:e||"",mentions:t}))).toPromise()}}},"./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/service/mentions/issue-user-team-mention-provider.js");const o=Object(n.createSelector)(a.f,a.x,a.a,i.F,((e,t,s,n)=>new r.a(e,t,s,`${e}/jira/people/search#createTeam`,n)))},"./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js"),o=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),c=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),l=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),u=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js");const d=i.default.div(["display:flex;"]),p=Object(i.default)(c.a)(["width:8px;"]);t.a=()=>a.a.createElement(l.a,null,a.a.createElement(c.b,null),a.a.createElement(o.a,{paddingTop:0,paddingBottom:0},a.a.createElement(o.a,{paddingTop:32,paddingBottom:12},a.a.createElement(u.a,{fontSize:14,lineHeight:16,intrusion:300})),a.a.createElement(d,null,a.a.createElement(r.a,null),a.a.createElement(p,null),a.a.createElement(u.a,{fontSize:40,lineHeight:40,intrusion:0
}))))},"./src/packages/issue/issue-view/src/common/skeleton/avatar-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;t.a=n.default.div(["width:","px;height:","px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSI0MHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCA0MCA0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT4zMnB4IGNpcmNsZSBpbnNpZGUgNDBweCByZWN0PC90aXRsZT4gICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+ICAgIDxkZWZzPjwvZGVmcz4gICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+ICAgICAgICA8ZyBpZD0iMzJweC1jaXJjbGUtaW5zaWRlLTQwcHgtcmVjdCIgZmlsbD0iI0ZGRkZGRiI+ICAgICAgICAgICAgPHBhdGggZD0iTTAsMCBMNDAsMCBMNDAsNDAgTDAsNDAgTDAsMCBaIE0yMCw0IEMxMS4xNjM0NDQsNCA0LDExLjE2MzQ0NCA0LDIwIEM0LDI4LjgzNjU1NiAxMS4xNjM0NDQsMzYgMjAsMzYgQzI4LjgzNjU1NiwzNiAzNiwyOC44MzY1NTYgMzYsMjAgQzM2LDExLjE2MzQ0NCAyOC44MzY1NTYsNCAyMCw0IFoiIGlkPSJDb21iaW5lZC1TaGFwZSI+PC9wYXRoPiAgICAgICAgPC9nPiAgICA8L2c+PC9zdmc+);"],5*a.e,5*a.e)
},"./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");t.a=n.default.div(["position:relative;width:100%;border-top:","px solid ",";border-bottom:","px solid ",";"],(e=>e.paddingTop),a.a.N0,(e=>e.paddingBottom),a.a.N0)},"./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const i=Object(n.keyframes)(["0%{background-position:-300px 0;}100%{background-position:2000px 0;}"]),r=n.default.div(["background-color:",";background-image:none;"],a.a.N0)
;t.b=n.default.div(["animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:",";animation-timing-function:linear;background-color:",";background-image:linear-gradient( to right,"," 10%,"," 30%,"," 50% );background-repeat:no-repeat;position:absolute;left:0;right:0;top:0;bottom:0;"],i,a.a.N30,a.a.N30,a.a.N20,a.a.N30)},"./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");t.a=n.default.div(["width:100%;display:flex;position:relative;"])},"./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js":function(e,t,s){"use strict";var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;t.a=n.default.div(["position:relative;height:","px;border-right:","px solid ",";border-top:","px solid ",";border-bottom:","px solid ",";"],(e=>e.fontSize),(e=>e.intrusion),a.a.N0,(e=>(e.lineHeight-e.fontSize)/2),a.a.N0,(e=>(e.lineHeight-e.fontSize)/2),a.a.N0)},"./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/@atlaskit/activity-provider/dist/es2019/api/ActivityResource.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js");const r=Object(n.createSelector)(i.i,(e=>new a.a("/gateway/api/graphql",e)))},"./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/types/src/application.js"),i=s("./src/packages/platform/utils/types/src/edition.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const c=Object(n.createSelector)(o.F,(e=>e?Object(a.e)(e):null)),l=Object(n.createSelector)([r.c,c],((e,t)=>t?Object(i.f)(t,e):null))},"./src/packages/issue/issue-view/src/common/state/selectors/comments-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/memoize.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=i()(((e,t,s)=>({objectId:e,containerId:t,childObjectId:s})),((...e)=>e.join("_"))),d=Object(n.createSelector)(r.w,o.C,((e,{commentId:t})=>t||"NEW_OPTIMISTIC_COMMENT"),((e,t,s)=>u(e,t,s))),p=i()(((e,t,s)=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({objectId:String(e),containerId:String(t)},"string"==typeof s&&{childObjectId:s})),((e,t,s)=>`${String(e)}-${String(t)}-${String(s)}`)),m=(e,t)=>{
const{objectId:s,containerId:n,childObjectId:a}=d(e,{commentId:t});return p(s,n,a)}},"./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js":function(e,t,s){"use strict";s.d(t,"k",(function(){return d})),s.d(t,"a",(function(){return p})),s.d(t,"f",(function(){return m})),s.d(t,"A",(function(){return b})),s.d(t,"x",(function(){return f})),s.d(t,"w",(function(){return g})),s.d(t,"C",(function(){return h})),s.d(t,"b",(function(){return y})),s.d(t,"i",(function(){return O})),s.d(t,"z",(function(){return j})),s.d(t,"v",(function(){return v})),s.d(t,"B",(function(){return k})),s.d(t,"F",(function(){return w})),s.d(t,"j",(function(){return S})),s.d(t,"E",(function(){return C})),s.d(t,"p",(function(){return T})),s.d(t,"e",(function(){return _})),s.d(t,"r",(function(){return x})),s.d(t,"n",(function(){return D})),s.d(t,"t",(function(){return A})),s.d(t,"o",(function(){return L})),s.d(t,"s",(function(){return M})),s.d(t,"q",(function(){return R})),s.d(t,"D",(function(){
return N})),s.d(t,"l",(function(){return F})),s.d(t,"h",(function(){return U})),s.d(t,"g",(function(){return V})),s.d(t,"H",(function(){return K})),s.d(t,"y",(function(){return W})),s.d(t,"d",(function(){return B})),s.d(t,"G",(function(){return $})),s.d(t,"J",(function(){return G})),s.d(t,"c",(function(){return q})),s.d(t,"u",(function(){return z})),s.d(t,"m",(function(){return J})),s.d(t,"I",(function(){return X}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),i=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js"),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/platform/utils/types/src/license-state.js"),l=s("./src/packages/issue/issue-view/src/configurations.js"),u=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js")
;const d=e=>e.context,p=Object(n.createSelector)(d,(e=>e.atlassianAccountId)),m=Object(n.createSelector)(d,(e=>e.baseUrl)),b=Object(n.createSelector)(d,(e=>e.loginRedirectUrl)),f=Object(n.createSelector)(d,(e=>Object(o.l)(e.issueKey))),g=Object(n.createSelector)(d,(e=>e.issueId)),h=Object(n.createSelector)(f,(e=>Object(u.a)(e))),y=Object(n.createSelector)(d,(e=>void 0!==e.analyticsSource?new a.a(e.analyticsSource):void 0)),O=Object(n.createSelector)(d,(e=>e.cloudId||Object(o.c)(""))),j=(Object(n.createSelector)(d,(e=>e.isAnonymous)),
Object(n.createSelector)(d,(e=>e.locale))),v=Object(n.createSelector)(d,(e=>e.issueActions||[])),E=Object(n.createSelector)(d,(e=>e.contextItemCategories)),k=Object(n.createSelector)(E,(e=>e.primary)),w=Object(n.createSelector)(E,(e=>e.secondary)),S=Object(n.createSelector)(d,(e=>e.contentItemCategories.visible||[])),C=Object(n.createSelector)(d,(e=>e.contentItemCategories.request)),I=Object(n.createSelector)(k,w,((e,t)=>e.concat(t))),T=Object(n.createSelector)(S,((e,t)=>t),((e,t)=>e.map((e=>e.id)).includes(t))),P=Object(n.createSelector)(I,((e,t)=>t),((e,t)=>e.includes(t))),_=(Object(n.createSelector)(T,P,((e,t)=>e?"content":t?"context":"foundation")),
Object(n.createSelector)(d,(e=>e.applicationKey))),x=Object(n.createSelector)(y,(e=>!!e&&e.value===i.a.MOBILE_ISSUE)),D=Object(n.createSelector)(_,(e=>e===Object(l.l)().applicationKey||e===Object(l.o)().applicationKey)),A=Object(n.createSelector)(_,(e=>e===Object(l.m)().applicationKey)),L=Object(n.createSelector)(y,(e=>!!e&&e.value===i.a.BITBUCKET_ISSUE)),M=Object(n.createSelector)(_,(e=>e===Object(l.k)().applicationKey)),R=Object(n.createSelector)(d,(e=>!!e.ecosystemEnabled)),N=Object(n.createSelector)(d,(e=>e.rapidViewId)),F=Object(n.createSelector)(d,(e=>e.estimationStatistic||null)),U=Object(n.createSelector)(d,(e=>e.boardType)),V=Object(n.createSelector)(d,(e=>e.boardId)),K=Object(n.createSelector)(d,(e=>e.siteAdminStatus)),W=(Object(n.createSelector)(d,(e=>e.productCrossSellConfig)),
Object(n.createSelector)(d,(e=>e.licensedProducts))),B=Object(n.createSelector)(d,(e=>e.appPermissions)),H=Object(n.createSelector)(d,(e=>e.isModal)),$=Object(n.createSelector)(H,x,((e,t)=>!e&&!t)),G=Object(n.createSelector)(d,(e=>e.viewMode)),q=Object(n.createSelector)(d,(e=>e.appEditions)),z=Object(n.createSelector)(W,(e=>e&&!0===e["is.origo.jira.tempo-plugin"])),Y=Object(n.createSelector)(d,(e=>e.licenseStates)),Q=Object(n.createSelector)(Y,(e=>e&&e.software===c.a)),J=Object(n.createSelector)(W,Q,((e,t)=>e[r.a.JIRA_SOFTWARE]&&t)),Z=Object(n.createSelector)(Y,(e=>e&&e.serviceDesk===c.a)),X=Object(n.createSelector)(W,Z,((e,t)=>e&&e[r.a.JIRA_SERVICEDESK]&&t))},"./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js":function(e,t,s){"use strict";s.d(t,"s",(function(){return g})),s.d(t,"u",(function(){return y})),s.d(t,"e",(function(){return O})),s.d(t,"b",(function(){return j})),s.d(t,"q",(function(){return v})),s.d(t,"x",(function(){return E})),
s.d(t,"z",(function(){return k})),s.d(t,"y",(function(){return w})),s.d(t,"w",(function(){return S})),s.d(t,"a",(function(){return C})),s.d(t,"B",(function(){return I})),s.d(t,"p",(function(){return T})),s.d(t,"C",(function(){return P})),s.d(t,"m",(function(){return _})),s.d(t,"l",(function(){return x})),s.d(t,"d",(function(){return D})),s.d(t,"c",(function(){return A})),s.d(t,"E",(function(){return L})),s.d(t,"r",(function(){return M})),s.d(t,"o",(function(){return R})),s.d(t,"n",(function(){return N})),s.d(t,"h",(function(){return F})),s.d(t,"g",(function(){return U})),s.d(t,"i",(function(){return V})),s.d(t,"A",(function(){return K})),s.d(t,"D",(function(){return W})),s.d(t,"f",(function(){return B})),s.d(t,"F",(function(){return H})),s.d(t,"j",(function(){return $})),s.d(t,"k",(function(){return G})),s.d(t,"I",(function(){return z})),s.d(t,"J",(function(){return Y})),s.d(t,"H",(function(){return Q})),s.d(t,"G",(function(){return J})),s.d(t,"t",(function(){return X})),
s.d(t,"v",(function(){return ee}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/find.js"),i=s.n(a),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),c=s("./src/packages/issue/issue-view/src/configurations.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function b(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?m(Object(s),!0).forEach((function(t){f(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const g=e=>e.fields||{},h=(e,t)=>i()(t,(t=>(t.schema&&t.schema.custom)===e)),y=(e,t)=>{let s=t[e];const n=Object(c.n)();if(!s&&Object.keys(n).includes(e)){const a=n[e];s=h(a,t)}return s},O=e=>Object(n.createSelector)(g,(t=>h(e,t))),j=e=>Object(n.createSelector)(O(e),(e=>{const t=e?e.key.match(/customfield_(\d+)$/i):null;return t?+t[1]:null
})),v=e=>Object(n.createSelector)(g,(t=>y(e,t))),E=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes(o.l))),k=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes("subtasks"))),w=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes("portfolio-child-issues"))),S=Object(n.createSelector)(g,(e=>!!Object.keys(e).includes("children-issues"))),C=(Object(n.createSelector)(g,(e=>Object.keys(e).map((t=>y(t,e))).filter(Boolean))),Object(n.createSelector)(g,(e=>Object.keys(e)))),I=e=>!!e&&e.editable,T=e=>Object(n.createSelector)(v(e),(e=>e&&e.schema&&e.schema.configuration&&e.schema.configuration.reduce(((e,{key:t,value:s})=>b(b({},e),{},{[t]:s})),{}))),P=e=>Object(n.createSelector)(v(e),(e=>I(e))),_=e=>Object(n.createSelector)(v(e),(t=>t&&t.title?t.title:(r.h.safeWarnWithoutCustomerData("issue.field.selector",`${e} does not have a field title`),
""))),x=e=>Object(n.createSelector)(v(e),(e=>e&&e.key)),D=e=>Object(n.createSelector)(v(e),(e=>e&&e.autoCompleteUrl)),A=e=>Object(n.createSelector)(v(e),(e=>e?e.allowedValues:[])),L=e=>Object(n.createSelector)(v(e),(e=>!!e&&e.required)),M=e=>Object(n.createSelector)(v(e),(e=>e&&Object(d.b)(e))),R=e=>Object(n.createSelector)(v(e),(e=>e&&e.value)),N=e=>Object(n.createSelector)(v(e),(e=>e&&Object(p.a)(e))),F=e=>Object(n.createSelector)(v(e),(e=>e&&Object(u.a)(e))),U=e=>Object(n.createSelector)(v(e),(e=>e&&Object(u.b)(e))),V=e=>Object(n.createSelector)(v(e),(e=>e&&e.renderedValue)),K=e=>!!e&&void 0!==e.editingValue,W=e=>Object(n.createSelector)(v(e),(e=>K(e))),B=e=>Object(n.createSelector)(v(e),(e=>(e?e.fieldEditSessionId:null)||"")),H=e=>Object(n.createSelector)(v(e),(e=>!!e&&void 0!==e.pendingValue)),$=(e,t)=>Object(n.createSelector)(v(e),(e=>e&&(e.isInvalid?e.invalidMessage||t:null))),G=e=>Object(n.createSelector)(v(e),(e=>Boolean(e&&e.isInvalid))),q=e=>"com.atlassian.jira.plugin.system.customfieldtypes:textarea"===e||"environment"===e||"description"===e,z=e=>Object(n.createSelector)((t=>Object(l.p)(t,e)),l.s,M(e),(e=>Object(n.createSelector)(v(e),(e=>e&&e.schema&&e.schema.renderer)))(e),((t,s,n,a)=>{
const i="description"===e,r=q(n)&&"atlassian-wiki-renderer"===a;return i||r})),Y=Object(n.createSelector)(g,(e=>e),((e,t)=>Object.keys(e).filter((e=>z(e)(t))))),Q=Object(n.createSelector)(Y,(e=>e),((e,t)=>e.some((e=>W(e)(t))))),J=e=>Object(n.createSelector)(M(e),(e=>q(e))),Z=Object(n.createSelector)(g,(e=>e),((e,t)=>Object.keys(e).filter((e=>J(e)(t))))),X=Object(n.createSelector)(Z,(e=>e),((e,t)=>e.filter((e=>W(e)(t))))),ee=Object(n.createSelector)(v("fixVersions"),v("versions"),((e,t)=>{const s=[];return e&&s.push(e.key),t&&s.push(t.key),s}))},"./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"d",(function(){return d})),s.d(t,"b",(function(){return p})),s.d(t,"c",(function(){return m}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/ui/field-config/src/index.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const c=e=>Object.values(Object(a.Y)()).includes(e),l=e=>Object(n.createSelector)(Object(i.c)(e),(e=>!e||e.length>1)),u=e=>Object(n.createSelector)(o.f,Object(i.o)(e),((e,t)=>Boolean(e&&t&&t.rating))),d=e=>Object(n.createSelector)(Object(i.n)(e),(e=>Boolean(e&&(e.showField||e.hasEpicLinkFieldDependency)))),p=({fieldType:e,fieldId:t,state:s})=>{switch(e){case"com.atlassian.servicedesk:sd-request-feedback":return u(t)(s);case"com.atlassian.jpo:jpo-custom-field-parent":return d(t)(s);case"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":return l(t)(s)
;case"com.atlassian.servicedesk.approvals-plugin:sd-approvals":return(e=>Object(n.createSelector)(Object(i.n)(e),(e=>Boolean(e))))(t)(s);case"com.pyxis.greenhopper.jira:jsw-issue-color":return!1;default:return!0}},m=(e,t)=>{if(!Object(i.a)(t).includes(e))return!1;const s=Object(r.b)(Object(i.u)(e,Object(i.s)(t)));return!(void 0===s||!c(s))&&p({fieldType:s,fieldId:e,state:t})}},"./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a}));var n=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js");t.a=e=>void 0!==e.editingValue?e.editingValue:Object(n.a)(e);const a=e=>e.editingValue||Object(n.b)(e)},"./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"b",(function(){return i}));var n=s("./src/packages/issue/issue-view/src/configurations.js");const a=e=>(()=>{const e=Object(n.n)()
;return[...Object(n.e)().filter((e=>!n.f.includes(e))),...Object.keys(e).map((t=>e[t])),"com.atlassian.jira.plugin.system.customfieldtypes:flagged"]})().find((t=>t===e)),i=e=>{const t=e?e.schema:void 0;return t?a(t.custom)||t.system||t.type:void 0}},"./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return n})),t.a=e=>void 0!==e.pendingValue?e.pendingValue:e.value;const n=e=>e.pendingValue||e.adfValue||e.value},"./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return c})),s.d(t,"E",(function(){return l})),s.d(t,"H",(function(){return u})),s.d(t,"d",(function(){return d})),s.d(t,"e",(function(){return p})),s.d(t,"j",(function(){return m})),s.d(t,"C",(function(){return b})),s.d(t,"D",(function(){return f})),s.d(t,"F",(function(){return g})),s.d(t,"u",(function(){return h})),s.d(t,"y",(function(){return y})),
s.d(t,"x",(function(){return O})),s.d(t,"A",(function(){return j})),s.d(t,"z",(function(){return v})),s.d(t,"l",(function(){return E})),s.d(t,"m",(function(){return k})),s.d(t,"r",(function(){return w})),s.d(t,"s",(function(){return S})),s.d(t,"n",(function(){return C})),s.d(t,"w",(function(){return I})),s.d(t,"o",(function(){return T})),s.d(t,"p",(function(){return P})),s.d(t,"c",(function(){return _})),s.d(t,"i",(function(){return x})),s.d(t,"h",(function(){return D})),s.d(t,"k",(function(){return A})),s.d(t,"B",(function(){return L})),s.d(t,"G",(function(){return M})),s.d(t,"b",(function(){return R})),s.d(t,"a",(function(){return N})),s.d(t,"v",(function(){return F})),s.d(t,"g",(function(){return U})),s.d(t,"q",(function(){return V})),s.d(t,"t",(function(){return K}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/project-types.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const c=e=>e.entities,l=Object(n.createSelector)(c,(e=>e?e.project:null)),u=e=>e.ui,d=Object(n.createSelector)(c,(e=>e.issue)),p=Object(n.createSelector)(c,(e=>e.refreshedOn)),m=Object(n.createSelector)(u,(e=>e.flags)),b=Object(n.createSelector)(l,(e=>e&&e.projectId?e.projectId:null)),f=Object(n.createSelector)(l,(e=>e?e.projectKey:null)),g=Object(n.createSelector)(l,(e=>e&&e.projectType?e.projectType:null)),h=Object(n.createSelector)(l,(e=>!!e&&e.isSimplified)),y=Object(n.createSelector)(c,r.a,((e,t)=>t?e.users[t]:null)),O=Object(n.createSelector)(c,r.a,((e,t)=>{const s=t?e.users[t]:null;return s?s.avatarUrl:null
})),j=Object(n.createSelector)(c,(e=>e.parentIssue)),v=Object(n.createSelector)(y,(e=>e?e.timeZone:void 0)),E=Object(n.createSelector)(d,(e=>e&&Object(i.j)(e.id))),k=Object(n.createSelector)(h,(e=>!e)),w=Object(n.createSelector)(u,(e=>"LOADING"===e.loadingStage)),S=Object(n.createSelector)(u,(e=>"PREVIEW"===e.loadingStage)),C=Object(n.createSelector)(u,(e=>"COMPLETE"===e.loadingStage)),I=Object(n.createSelector)(u,(e=>e.loadingStage)),T=Object(n.createSelector)(u,(e=>!(!e.issueDeletion||!e.issueDeletion.isDeleteIssueModalOpen))),P=Object(n.createSelector)(u,(e=>!!e.issueDeletion&&e.issueDeletion.isDeletingIssue)),_=Object(n.createSelector)(u,(e=>!!e.issueDeletion&&e.issueDeletion.didIssueDeleteFail)),x=Object(n.createSelector)(u,(e=>e.error)),D=Object(n.createSelector)(u,(e=>e.errorMessage)),A=Object(n.createSelector)(c,(e=>t=>t?e.users[t]:void 0)),L=Object(n.createSelector)(c,(e=>e.parentLevelIssues)),M=()=>"jira",R=Object(n.createSelector)(g,a.i),N=Object(n.createSelector)(M,r.i,((e,t)=>t?`ari:cloud:${e}:${t}`:null)),F=Object(n.createSelector)(N,E,((e,t)=>e&&t?`${e}:issue/${t}`:null)),U=Object(n.createSelector)((e=>e.agile),(e=>e&&e.epic&&e.epic.key||null)),V=Object(n.createSelector)(o.s,(e=>(e=>({}.hasOwnProperty.call(e,"epic-issues")))(e))),K=Object(n.createSelector)(g,(e=>"service_desk"===e))
},"./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js");const a=e=>e.mediaContext,i=Object(n.createSelector)(a,(e=>e&&e.userAuth||null)),r=Object(n.createSelector)(a,(e=>e&&e.viewContext||null)),o=Object(n.createSelector)(a,(e=>e&&e.uploadContext||null))},"./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"h",(function(){return p})),s.d(t,"d",(function(){return m})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"e",(function(){return y})),s.d(t,"i",(function(){return O})),s.d(t,"g",(function(){return j})),s.d(t,"f",(function(){return v}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/mapValues.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/feature-flags.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const l=Object(n.createSelector)(c.f,(e=>e.applicationRoles)),u=Object(n.createSelector)(c.f,(e=>e.permissions)),d=new Set(["canUseServiceDeskAgentFeatures","canEditIssues","canTransitionIssues","canScheduleIssues","canMoveIssue","canAssignIssues","canBeAssignedToIssues","canDeleteIssue","canManageWatchers","canEditAllComments","canDeleteAllComments","canDeleteAllAttachments","canLogWork","canEditOwnWorklogs","canEditAllWorklogs","canDeleteOwnWorklogs","canDeleteAllWorklogs","canResolveIssues","canViewReadonlyWorkflow","canCloseIssues","canModifyReporter","canSetIssueSecurity"]),p=Object(n.createSelector)(l,o.d,c.F,u,o.I,((e,t,s,n,a)=>"service_desk"===s&&a?Object(r.isUseAppPermissionsFromTenantContextEnabled)()?((e,t)=>{const{canUseServiceDeskAgentFeatures:s}=t;return i()(t,((t,n)=>d.has(n)?t&&e&&s:t))})(t.hasServiceDeskAccess,n):((e,t)=>{const s=e&&e.includes("jira-servicedesk"),{canUseServiceDeskAgentFeatures:n}=t;return i()(t,((e,t)=>d.has(t)?e&&s&&n:e))
})(e||[],n):n)),m=Object(n.createSelector)(p,(e=>!!e.canBeAssignedToIssues)),b=Object(n.createSelector)(p,(e=>!!e.canAdministerProject)),f=Object(n.createSelector)(p,(e=>!!e.canAdministerJira)),g=Object(n.createSelector)(p,(e=>e.canViewWatchers)),h=Object(n.createSelector)(p,(e=>e.canManageWatchers)),y=Object(n.createSelector)(p,(e=>e.canModifyReporter)),O=Object(n.createSelector)(g,h,((e,t)=>({canViewWatchers:e,canManageWatchers:t}))),j=(Object(n.createSelector)(p,(e=>e.canBrowseUsers)),Object(n.createSelector)(p,(e=>e.canViewDevTools))),v=Object(n.createSelector)(p,(e=>e.canUseServiceDeskAgentFeatures))},"./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const o=e=>Object(n.createSelector)(i.a,(t=>t&&e?`${t}:comment/${e}`:null)),c=Object(n.createSelector)(r.h,a.i,((e,t)=>!(!e.canAddComments||!t)))},"./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return f})),s.d(t,"i",(function(){return g})),s.d(t,"c",(function(){return y})),s.d(t,"b",(function(){return O})),s.d(t,"l",(function(){return E})),s.d(t,"f",(function(){return T})),s.d(t,"j",(function(){return P})),s.d(t,"e",(function(){return _})),s.d(t,"d",(function(){return x})),s.d(t,"m",(function(){return L})),s.d(t,"a",(function(){return M})),s.d(t,"g",(function(){return N})),
s.d(t,"k",(function(){return F})),s.d(t,"n",(function(){return U}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isNumber.js"),i=s.n(a),r=s("./src/packages/project-settings/issue-type-hierarchies/src/index.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),l=s("./src/packages/issue/issue-view/src/selectors/children-issues-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js")
;const f=Object(n.createSelector)(m.f,(e=>e.jiraSettings.timeTrackingConfiguration)),g=Object(p.o)("timetracking"),h=Object(n.createSelector)(f,(e=>e.isTimeTrackingEnabled)),y=Object(n.createSelector)(h,p.a,((e,t)=>e&&t.includes("timetracking"))),O=Object(n.createSelector)(y,b.h,d.r,((e,t,s)=>e&&t.canLogWork&&!s)),j=Object(n.createSelector)(m.H,(e=>e.worklog)),v=Object(n.createSelector)(j,(e=>e.modal)),E=Object(n.createSelector)(j,(e=>e.loadingStage)),k=Object(n.createSelector)(Object(p.o)("subtasks"),Object(p.o)("children-issues"),c.f,c.b,o.collapsedHierarchies,((e,t,s,n,a)=>a?null!=t&&t.length&&Object(r.b)(n)?t:e:null!=t&&t.length&&0===s?t:e)),w=Object(n.createSelector)(l.a,u.b,c.f,c.b,o.collapsedHierarchies,((e,t,s,n,a)=>a?t||Boolean(null==e?void 0:e.length)&&Object(r.b)(n):t||Boolean(null==e?void 0:e.length)&&0===s)),S=(e,t)=>i()(e)||i()(t)?(e||0)+(t||0):e,C=(e,t)=>{var s;return Array.isArray(e)?null===(s=e.find((e=>e.key===t)))||void 0===s?void 0:s.value:e&&e[t]
},I=Object(n.createSelector)(k,m.m,((e,t)=>{if(t)return!0;if(!e||0===e.length)return!1;return e.map((e=>C(e.fields,"timetracking"))).filter(Boolean).length>0})),T=Object(n.createSelector)(w,I,((e,t)=>e&&t)),P=Object(n.createSelector)(g,k,((e,t)=>s=>t&&0!==t.length&&s?t.map((e=>C(e.fields,"timetracking"))).filter(Boolean).reduce(((e,t)=>({originalEstimateSeconds:S(e.originalEstimateSeconds,t.originalEstimateSeconds),timeSpentSeconds:S(e.timeSpentSeconds,t.timeSpentSeconds),remainingEstimateSeconds:S(e.remainingEstimateSeconds,t.remainingEstimateSeconds)
})),e):e)),_=Object(n.createSelector)(v,(e=>e.openModal)),x=Object(n.createSelector)(v,(e=>e.isSaving)),D=Object(n.createSelector)(v,(e=>e.activeWorklogId)),A=Object(n.createSelector)(m.f,(e=>e.worklog)),L=Object(n.createSelector)(A,(e=>e.worklogs)),M=Object(n.createSelector)(D,L,((e,t)=>e&&t[e]||null)),R=Object(n.createSelector)(A,(e=>e.sortedWorklogIds)),N=Object(n.createSelector)(L,R,((e,t)=>t.map((t=>e[t])))),F=Object(n.createSelector)(A,(e=>e.totalWorklogs)),U=Object(n.createSelector)(A,(e=>e.worklogsStartIndex||0))},"./src/packages/issue/issue-view/src/common/styles/issue-value.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return d}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const i=n.default.span(["color:",";"],a.a.N300),r=Object(n.css)(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),o=n.default.div(["",";"],r),c=e=>Object(n.css)(["","::-webkit-scrollbar{width:8px;background:transparent;}","::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:10px;}"],e,e),l=Object(n.css)(["font-size:1em;line-height:1.714;font-weight:normal;margin-top:1.143;margin-bottom:0;letter-spacing:-0.005em;overflow-y:auto;overflow-x:hidden;width:100%;height:auto;white-space:pre-line;"]),u=n.default.div(["",";"],l),d=n.default.div(["",";max-height:","ex;",";"],l,(e=>2.5*(e.maxRows?e.maxRows:2)),c("&"))},"./src/packages/issue/issue-view/src/common/util/date-time-formatter/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l}));var n=s("./node_modules/moment-timezone/index.js"),a=s.n(n);function i(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function r(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c=(e,t,s)=>{if(!t)return null;const n={day:"2-digit",month:"short",year:"numeric",hour:"numeric",minute:"numeric",hour12:!0},i=s?r(r({},n),{},{timeZone:s}):r({},n),o=a()(t).valueOf();return e.formatDate(o,i)},l=(e,t,s,n)=>{const i=a.a.tz(e,n);return i.isValid()&&e?{dateValue:i.format("YYYY-MM-DD"),timeValue:i.format("HH:mm"),zoneValue:i.format("ZZ")}:{dateValue:t,timeValue:s,
zoneValue:a()().tz(n).format("ZZ")}}},"./src/packages/issue/issue-view/src/common/util/dom-util/get-inner-height/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>{if(!e)return;const t=getComputedStyle(e),s=(parseFloat(t.paddingTop)||0)+(parseFloat(t.paddingBottom)||0);return e.clientHeight-s}},"./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t=!0)=>{if(!e||!e.parentElement)return null;let s=getComputedStyle(e);const n=t&&"absolute"===s.position,a=/(auto|scroll)/;if("fixed"===s.position)return document.body;for(let i=e.parentElement;i;i=i&&i.parentElement){s=getComputedStyle(i);if(!(n&&"static"===s.position)&&a.test(s.overflow+s.overflowY+s.overflowX))return i}return null}},"./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}))
;var n=s("./src/packages/platform/utils/types/src/general.js");const a=e=>Object(n.r)(e.split("-")[0])},"./src/packages/issue/issue-view/src/common/util/errors/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),a=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),i=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const r=(e,t,s,r)=>{s instanceof TypeError&&Object(i.c)(s)?((e,t,s)=>{Object(a.a)({error:s,attributes:{message:t},meta:{id:e,packageName:"jiraIssueView"}})})(e,t,s):r&&n.h.safeErrorWithoutCustomerData(e,t,r)}},"./src/packages/issue/issue-view/src/common/util/events/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"d",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"a",(function(){return c}))
;const n=e=>e&&e instanceof KeyboardEvent&&27===e.keyCode,a=e=>13===e.keyCode,i=e=>0===e.button,r=e=>i(e)&&!(e.metaKey||e.ctrlKey),o=e=>1===e.button,c=e=>i(e)&&(e.metaKey||e.ctrlKey)},"./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/flow.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js");t.a=(e=[],t)=>s=>a()(...e,Object(i.a)({FallbackComponent:t}))(s)},"./src/packages/issue/issue-view/src/common/util/get-element/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=()=>document.querySelector(".issue-app-modal-ak-dropdown-portal"),a=()=>document.querySelector(".issue-app-modal-editor-dropdown-portal")},"./src/packages/issue/issue-view/src/common/util/safe-component/index.js":function(t,s,n){"use strict";n.d(s,"a",(function(){return f}))
;var a=n("./node_modules/react/index.js"),i=n.n(a),r=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),c=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/node-env.js");const l="issue.error-boundary.";class u{constructor(t){this.logLocation=void 0,this.handleError=(e,t)=>o.h.safeErrorWithoutCustomerData(this.logLocation,"An uncaught error has occurred in a React component",new r.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{message:e.message,stack:e.stack,componentStack:t}})),this.callSafely=(t,s,...n)=>{try{return s&&s.apply(t,n)}catch(e){this.handleError(e)}return null},this.logLocation=`${l}${t}`}}const d=e=>!!e.prototype&&e.prototype.isReactComponent,p=(e,t)=>{const s=e,n=Object.getOwnPropertyDescriptor(s,"prototype");return Boolean(n&&n.value&&n.value[t])
},m=["componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","getSnapshotBeforeUpdate","componentDidUpdate"],b=(e,t,s)=>{var n,r;const f=s||(e=>e.displayName||e.name||"UnsafeComponent")(e),g=new u(s?`Fallback(${f})`:f);t&&((e,t)=>{const s=d(e)?e:e().type;if(!s)return;const n=[];if(m.forEach((e=>{p(s,e)&&n.push(e)})),n.length){const e="\t\t",s=`The fallback component provided for '${t}' defines the following unsupported lifecycles methods:\n${e}${n.join(`\n${e}`)}`;Object(c.a)()?console.warn(s):o.h.safeWarnWithoutCustomerData(`${l}${t}`,s)}})(t,f);let h=e;if(d(e)&&p(e,"componentWillUnmount")){class t extends e{componentWillUnmount(){g.callSafely(this,super.componentWillUnmount)}}t.displayName=f,h=t}const y={hadError:!1,isInternalRender:!1};return r=n=class extends a.Component{constructor(...e){super(...e),this.state=y}componentDidCatch(e,t){g.handleError(e,t.componentStack),this.setState({hadError:!0,isInternalRender:!0})}render(){if(this.state.hadError){
if(!t)return null;const e=b(t,null,f);return i.a.createElement(e,this.props)}return i.a.createElement(h,this.props)}},n.displayName=`${(()=>s?"Fallback":t?"SafeWithFallback":"Safe")()}(${f})`,n.getDerivedStateFromProps=(e,t)=>t.hadError&&!t.isInternalRender?y:{isInternalRender:!1},r},f=(e={})=>t=>b(t,e.FallbackComponent)},"./src/packages/issue/issue-view/src/common/util/scroll/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/scroll-into-view-if-needed/es/index.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const r=(e,t=Object.freeze({}))=>{e&&Object(n.default)(e,function(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({duration:300},t))},o=e=>{e&&r(e,{centerIfNeeded:!0})}},"./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js":function(e,t,s){"use strict";var n=s("./node_modules/lodash/isFinite.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js");t.a=e=>{const t=Object(i.a)(1,1)(e);return null!==t&&a()(t)}},"./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js":function(e,t,s){"use strict";t.a=(e,t)=>{const s=[{suffix:"w",seconds:e*t*60*60},{suffix:"d",seconds:60*t*60},{suffix:"h",seconds:3600},{suffix:"m",seconds:60}];return e=>{const t={secondsRemaining:e,
timeString:""};return s.reduce(((e,t)=>{if(t.seconds<=0)return e;const s=Math.floor(e.secondsRemaining/t.seconds);return{secondsRemaining:s>=1?e.secondsRemaining%t.seconds:e.secondsRemaining,timeString:s>=1?`${e.timeString} ${s}${t.suffix}`:e.timeString}}),t).timeString.trim()||"0m"}}},"./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js":function(e,t,s){"use strict";const n=/^(\d+(?:\.\d+)?)([wdhm])$/,a=e=>{const t=n.exec(e);return t?{quantity:parseFloat(t[1]),unit:t[2]}:null};t.a=(e,t)=>{const s=[{unit:"w",seconds:e*t*60*60},{unit:"d",seconds:60*t*60},{unit:"h",seconds:3600},{unit:"m",seconds:60}];return e=>{const t=e.split(" ").map(a);let n=0,i=0;for(let a=0;a<s.length&&n!==t.length;a+=1){const e=s[a],r=t[n];if(!r)return null;r.unit===e.unit&&(i+=r.quantity*e.seconds,n+=1)}return n<t.length?null:Math.floor(i)}}},"./src/packages/issue/issue-view/src/common/util/types/type-check/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){
return n}));const n=e=>e.length>0&&!Number.isNaN(Number(e))},"./src/packages/issue/issue-view/src/configurations.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"n",(function(){return o})),s.d(t,"f",(function(){return c})),s.d(t,"e",(function(){return u})),s.d(t,"i",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"d",(function(){return m})),s.d(t,"m",(function(){return b})),s.d(t,"l",(function(){return f})),s.d(t,"o",(function(){return g})),s.d(t,"b",(function(){return h})),s.d(t,"j",(function(){return y})),s.d(t,"k",(function(){return O})),s.d(t,"c",(function(){return j})),s.d(t,"h",(function(){return v}));var n=s("./src/packages/platform/utils/constants/src/application-keys.js"),a=s("./src/packages/issue/issue-view/src/feature-flags.js");const i="com.atlassian.jpo:jpo-custom-field-parent",r="flagActions",o=()=>{const e={epic:"com.pyxis.greenhopper.jira:gh-epic-link",sprint:"com.pyxis.greenhopper.jira:gh-sprint",
storyPointsField:"com.atlassian.jira.plugin.system.customfieldtypes:storypoint","com.atlassian.teams:rm-teams-custom-field-team":"com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent":"com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start":"com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end":"com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color":"com.pyxis.greenhopper.jira:jsw-issue-color","com.pyxis.greenhopper.jira:gh-epic-color":"com.pyxis.greenhopper.jira:gh-epic-color"};return Object(a.isEpicNameFieldTypeEnabled)()&&Object.assign(e,{"com.pyxis.greenhopper.jira:gh-epic-label":"com.pyxis.greenhopper.jira:gh-epic-label"}),e
},c=["number","string","datetime","option2","array"],l=["com.atlassian.servicedesk:sd-request-participants","com.atlassian.servicedesk:sd-customer-organizations","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language","com.atlassian.servicedesk:sd-request-feedback","com.atlassian.servicedesk.approvals-plugin:sd-approvals","com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list","com.atlassian.servicedesk:vp-origin","com.atlassian.jira.plugins.cmdb:cmdb-object-cftype","com.atlassian.jira.modules.servicemanagement.responders-entity:responders-entity-field-cftype"],u=()=>["com.atlassian.jira.plugin.system.customfieldtypes:labels","com.atlassian.jira.plugin.system.customfieldtypes:textfield","com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","com.atlassian.jira.plugin.system.customfieldtypes:url","com.atlassian.jira.plugin.system.customfieldtypes:float","com.pyxis.greenhopper.jira:jsw-story-points","com.atlassian.jira.plugin.system.customfieldtypes:select","com.atlassian.jira.plugin.system.customfieldtypes:multiselect","com.atlassian.jira.plugin.system.customfieldtypes:version","com.atlassian.jira.plugin.system.customfieldtypes:textarea","com.atlassian.jira.plugin.system.customfieldtypes:multiversion","com.atlassian.jira.plugin.system.customfieldtypes:datepicker","com.atlassian.jira.plugin.system.customfieldtypes:grouppicker","com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker","com.atlassian.jira.plugin.system.customfieldtypes:userpicker","com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons","com.atlassian.jira.plugin.system.customfieldtypes:datetime","com.atlassian.servicedesk.assets-plugin:assetfield","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype","com.atlassian.jira.plugin.system.customfieldtypes:people","com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","com.atlassian.jira.plugin.system.customfieldtypes:project","com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team","com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield","com.pyxis.greenhopper.jira:gh-epic-status",...Object(a.isMessageCustomFieldEnabled)()?["com.atlassian.jira.toolkit:viewmessage","com.atlassian.jira.toolkit:message"]:[],...c,...l],d={
software:"https://confluence.atlassian.com/jirasoftwarecloud/configure-field-layout-in-the-issue-view-961798059.html",business:"https://confluence.atlassian.com/jiracorecloud/configure-field-layout-in-the-issue-view-961798123.html",service_desk:"https://support.atlassian.com/jira-service-desk-cloud/docs/what-are-the-different-sections-in-the-issue-view/"},p=()=>({issueActions:[]}),m=()=>({applicationKey:n.a.CORE_ISSUE,issueActions:[],ecosystemEnabled:!0}),b=()=>({applicationKey:n.a.SOFTWARE_ISSUE,issueActions:[r],ecosystemEnabled:!0}),f=()=>({applicationKey:n.a.SIMPLE_SOFTWARE_BOARD,issueActions:[r,"cardCoverActions"],ecosystemEnabled:!0}),g=()=>({applicationKey:n.a.STANDARD_ROADMAP_ISSUE,issueActions:[r],ecosystemEnabled:!0}),h=()=>({applicationKey:n.a.BITBUCKET_ISSUE,issueActions:[]}),y=()=>({applicationKey:n.a.MOBILE_ISSUE,issueActions:[]}),O=()=>({applicationKey:n.a.SERVICE_DESK,issueActions:[],ecosystemEnabled:!0}),j=()=>({applicationKey:n.a.CONNECT_ISSUE,issueActions:[],
ecosystemEnabled:!0}),v=e=>{if(e)switch(e.projectType){case"software":return e.isSimplified?f():b();case"business":return m();case"service_desk":return O();default:return b()}return b()}},"./src/packages/issue/issue-view/src/drafts/draft-actions.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return n})),s.d(t,"i",(function(){return a})),s.d(t,"g",(function(){return i})),s.d(t,"e",(function(){return r})),s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"a",(function(){return d}));const n=(e,t,s)=>({type:"SAVE_DRAFT_REQUEST",payload:{fieldId:e,value:t,serverValue:s}}),a=(e,t)=>({type:"SAVE_DRAFT_SUCCESS",payload:{draftKey:e,value:t}}),i=e=>({type:"SAVE_DRAFT_FAILURE",payload:e}),r=(e,t,s,n)=>({type:"LOAD_DRAFT_REQUEST",payload:{fieldId:e,draftKey:t,draftHandler:s,serverValue:n}}),o=(e,t)=>({type:"LOAD_DRAFT_SUCCESS",payload:{fieldId:e,value:t}}),c=(e,t)=>({type:"LOAD_DRAFT_FAILURE",
payload:{fieldId:e,error:t}}),l=({fieldId:e,draftKey:t})=>({type:"DELETE_DRAFT_REQUEST",payload:{fieldId:e,draftKey:t}}),u=e=>({type:"DELETE_DRAFT_SUCCESS",payload:{fieldId:e}}),d=(e,t)=>({type:"DELETE_DRAFT_FAILURE",payload:{fieldId:e,error:t}})},"./src/packages/issue/issue-view/src/drafts/draft-utils.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return n})),s.d(t,"d",(function(){return a})),s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));const n=(e,t,s)=>`${String(e)}.${t}.${s}`,a=e=>e.split(".")[2],i=e=>`${e}-previous-hash`,r=e=>`comment_${e}`},"./src/packages/issue/issue-view/src/ecosystem/broadcast-connect-event.js":function(e,t,s){"use strict";var n=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-connect-host.js");t.a=(e,t,s)=>{Object(n.b)((n=>{n&&n.broadcastEvent(e,t,s)}))}},"./src/packages/issue/issue-view/src/ecosystem/ecosystem-connect-host.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a}))
;var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js");const a=e=>{Object(n.a)({name:"ac/create",wrmKeys:["wrc!com.atlassian.plugins.atlassian-connect-plugin:jira-atlassian-connect-resources-v5","wrc!com.atlassian.jira.jira-atlaskit-plugin:sidebar"]}).then((()=>e(window.connectHost)))};t.a=()=>window.connectHost},"./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js":function(e,t,s){"use strict";s.d(t,"h",(function(){return y})),s.d(t,"p",(function(){return O})),s.d(t,"n",(function(){return j})),s.d(t,"c",(function(){return v})),s.d(t,"o",(function(){return E})),s.d(t,"m",(function(){return T})),s.d(t,"i",(function(){return P})),s.d(t,"l",(function(){return _})),s.d(t,"b",(function(){return x})),s.d(t,"g",(function(){return D})),s.d(t,"k",(function(){return A})),s.d(t,"f",(function(){return M})),s.d(t,"d",(function(){return R})),s.d(t,"r",(function(){return N})),s.d(t,"q",(function(){return F})),s.d(t,"j",(function(){return U})),
s.d(t,"a",(function(){return V})),s.d(t,"e",(function(){return K}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/flatten.js"),i=s.n(a),r=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),o=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),c=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),p=s("./src/packages/issue/issue-view/src/feature-flags.js"),m=s("./src/packages/issue/issue-view/src/ecosystem/entities-selector.js"),b=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js");function f(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function g(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?f(Object(s),!0).forEach((function(t){h(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):f(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function h(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const y=Object(n.createSelector)(m.a,(e=>e.backgroundScripts||[])),O=Object(n.createSelector)(u.f,(e=>e.issueContentPanels||[])),j=Object(n.createSelector)(u.f,(e=>!!e.issueContentPanels&&e.issueContentPanels.includes("issue.content.panel.customised.flag"))),v=Object(n.createSelector)(d.b,(e=>e)),E=Object(n.createSelector)(u.f,(e=>e.ecosystem&&!!e.ecosystem.ecosystemOnDate&&Date.parse(e.createdDate)>e.ecosystem.ecosystemOnDate)),k=e=>Object.keys(e||{}).map((t=>Object.values(e?e[t]:{}))),w=Object(n.createSelector)(m.a,(e=>[].concat(...k(e.glances)))),S=Object(n.createSelector)(m.a,(e=>[].concat(...k(e.contentPanels)))),C=Object(n.createSelector)(m.a,(e=>[].concat(...k(e.activityPanels)))),I=e=>Object(n.createSelector)(l.q,e,((e,t)=>e&&t||[])),T=I(Object(n.createSelector)(w,(e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,icon:e.icon&&e.icon.url&&{url:e.icon.url},label:e.label,status:e.status,type:e.type,glanceType:"CONNECT_ENTITY_TYPE"
})))))),P=Object(n.createSelector)([b.d,T],((e,t)=>Object(p.isExperimentalEcosystemGlancesHiddenEnabled)()?[]:[...e,...t])),_=(e,t)=>Object(n.createSelector)(m.a,(s=>s&&s.glances&&s.glances[e]&&s.glances[e][t])),x=I(Object(n.createSelector)(S,(e=>e.map((e=>({appKey:e.appKey,moduleKey:e.moduleKey,name:e.name,tooltip:e.tooltip,iconUrl:e.icon&&e.icon.url,type:e.type,showByDefault:e.showByDefault})))))),D=Object(n.createSelector)([b.k,x],((e,t)=>[...e,...t])),A=Object(n.createSelector)([b.k,x],((e,t)=>[...e,...t])),L=(e,t)=>{if("FORGE_ENTITY_TYPE"===e.type){const s=e.name.toLowerCase();if("FORGE_ENTITY_TYPE"===t.type){const e=t.name.toLowerCase();return s<e?-1/0:s>e?1/0:0}return 1/0}return 1/0},M=I(Object(n.createSelector)(O,D,j,E,l.b,((e,t,s,n,a)=>{const l=t.map((t=>{if("FORGE_ENTITY_TYPE"===t.type){const s=t;if(!s.iconUrl)return s;const n=`${s.appKey}/${s.moduleKey}-`,i=e.filter((e=>Object(o.b)(e,n))).map((e=>{const t=Object(c.a)(e);return null==t&&Object(r.b)(a,{
error:Error(`Panel key doesn't match regexp: ${e}`)}),t&&g(g({},s),{},{dateAdded:t.added,panelInstanceId:t.id})})).filter(Boolean);return i.length>0&&i}if(!s&&!n)return t;return(e.includes(`${t.appKey}_${t.moduleKey}`)||e.includes(`${t.appKey}_${Object(c.b)(t.moduleKey,10)}`)||t.showByDefault)&&t}));return i()((e=>e.map((e=>[].concat(e))).sort(((e,t)=>((e,t)=>{if("FORGE_ENTITY_TYPE"===e.type){const s=e.dateAdded||1;return"FORGE_ENTITY_TYPE"===t.type?s-(t.dateAdded||1):s}return 1/0})(e[0],t[0]))))(l.filter(Boolean)))}))),R=(e,t)=>Object(n.createSelector)(m.a,(s=>s&&s.contentPanels&&s.contentPanels[e]&&s.contentPanels[e][t])),N=(e,t)=>Object(n.createSelector)(m.a,(s=>s&&s.selectedContentPanel&&(s.selectedContentPanel===`${e}_${t}`||s.selectedContentPanel===`${e}_${Object(c.b)(t,10)}`))),F=I(Object(n.createSelector)(m.a,(e=>e.operations||[]))),U=I(Object(n.createSelector)([b.f,F],((e,t)=>[...e,...t]))),V=Object(n.createSelector)(l.q,C,((e,t)=>e?t.map((e=>({name:e.name,appKey:e.appKey,
moduleKey:e.moduleKey,options:e.options,type:"CONNECT_ENTITY_TYPE"}))):[])),K=Object(n.createSelector)([b.g,V],((e,t)=>[...e,...t].sort(L)))},"./src/packages/issue/issue-view/src/ecosystem/entities-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js");const r=Object(n.createSelector)(a.f,(e=>e.ecosystem||{})),o=Object(n.createSelector)(a.f,(e=>e.forge||i.b))},"./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return j})),s.d(t,"f",(function(){return v})),s.d(t,"k",(function(){return E})),s.d(t,"j",(function(){return k})),s.d(t,"m",(function(){return C})),s.d(t,"n",(function(){return T})),s.d(t,"a",(function(){return _})),s.d(t,"b",(function(){
return D})),s.d(t,"c",(function(){return A})),s.d(t,"o",(function(){return L})),s.d(t,"h",(function(){return M})),s.d(t,"g",(function(){return R})),s.d(t,"i",(function(){return N})),s.d(t,"l",(function(){return F})),s.d(t,"e",(function(){return U}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/types/src/general.js"),i=s("./src/packages/forge/forge-ui/src/utils/conditions/index.js"),r=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),o=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),p=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),m=s("./src/packages/issue/issue-view/src/ecosystem/entities-selector.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const h=(e,t)=>e.filter((e=>Object(i.a)(e,t))),y=(e,t)=>e.name===t.name?0:e.name>t.name?1:-1,O=Object(n.createSelector)(d.h,c.w,c.x,p.g,u.C,c.C,u.F,((e,t,s,n,a,i,r)=>({issueId:t||null,issueKey:s,issueType:n,projectId:a,projectKey:i,projectType:r||null,canAddComments:e.canAddComments,canAdministerJira:e.canAdministerJira,canAdministerProjects:e.canAdministerProject,canAssignIssues:e.canAssignIssues,
canBeAssignedToIssues:e.canBeAssignedToIssues,canCloneIssues:e.canCloneIssue,canCreateAttachments:e.canCreateAttachments,canCreateChildren:e.canCreateChildren,canCreateSubtasks:e.canCreateSubtask,canDeleteAllAttachments:e.canDeleteAllAttachments,canDeleteAllComments:e.canDeleteAllComments,canDeleteAllWorklogs:e.canDeleteAllWorklogs,canDeleteIssues:e.canDeleteIssue,canDeleteOwnAttachments:e.canDeleteOwnAttachments,canDeleteOwnComments:e.canDeleteOwnComments,canDeleteOwnWorklogs:e.canDeleteOwnWorklogs,canEditAllComments:e.canEditAllComments,canEditAllWorklogs:e.canEditAllWorklogs,canEditIssues:e.canEditIssues,canEditOwnComments:e.canEditOwnComments,canEditOwnWorklogs:e.canEditOwnWorklogs,canLinkIssues:e.canLinkIssues,canLogWork:e.canLogWork,canManageWatchers:e.canManageWatchers,canModifyReporters:e.canModifyReporter,canMoveIssues:e.canMoveIssue,canScheduleIssues:e.canScheduleIssues,canUseServiceManagementAgentFeatures:e.canUseServiceDeskAgentFeatures,canBrowseUsers:e.canBrowseUsers,
canViewDevTools:e.canViewDevTools,canViewWatchers:e.canViewWatchers}))),j=Object(n.createSelector)(c.q,m.b,O,((e,t,s)=>e&&Array.isArray(t.glances)?h(t.glances,s).map((e=>{const{id:t,properties:{title:s,label:n,status:a}}=e;return{title:s,label:n,status:a,extension:e,glanceType:"FORGE_ENTITY_TYPE",moduleKey:t,appKey:t}})):[])),v=Object(n.createSelector)(c.q,m.b,O,((e,t,s)=>e&&Array.isArray(t.actions)?h(t.actions,s).map((e=>{const{id:t,properties:{title:s}}=e;return{id:t,title:s,extension:e,type:"FORGE_ENTITY_TYPE"}})):[])),E=Object(n.createSelector)(c.q,m.b,O,((e,t,s)=>e&&Array.isArray(t.panels)?h(t.panels,s).filter((e=>null!=e.properties.icon)).map((e=>{const{id:t,properties:{title:s,icon:n,allowMultiple:a}}=e,{appKey:i,moduleKey:o}=Object(r.d)(t);return{name:s,tooltip:s,iconUrl:n,extension:e,allowMultiple:!!a,showByDefault:!1,type:"FORGE_ENTITY_TYPE",moduleKey:o,appKey:i}
})).sort(y):[])),k=e=>Object(n.createSelector)(m.a,(t=>t&&t.selectedContentPanel===e)),w=Object(n.createSelector)(c.q,m.b,O,((e,t,s)=>e&&Array.isArray(t.customFields)?h(t.customFields,s):[])),S=Object(n.createSelector)(c.q,m.b,O,((e,t,s)=>e&&Array.isArray(t.customFieldTypes)?h(t.customFieldTypes,s):[])),C=Object(n.createSelector)(w,(e=>e.length>0)),I=Object(n.createSelector)(S,(e=>e.length>0)),T=Object(n.createSelector)(C,I,((e,t)=>e||t)),P=Object(n.createSelector)(w,S,((e,t)=>[...e,...t])),_=Object(n.createSelector)(c.q,m.b,((e,t)=>e&&t.activeAction||null)),x=e=>Object(n.createSelector)(Object(l.q)(e),(e=>e?e.schema.custom:"")),D=e=>Object(n.createSelector)(w,x(e),((e,t)=>e.find((e=>e.id===t))||null)),A=e=>Object(n.createSelector)(P,x(e),((e,t)=>e.find((e=>e.id===t))||null)),L=e=>Object(n.createSelector)(c.q,m.b,x(e),O,((e,t,s,n)=>{if(!e||!Array.isArray(t.customFields))return!1;const a=t.customFields.find((e=>e.id===s));return null!=a&&!Object(i.a)(a,n)
})),M=Object(n.createSelector)(c.x,c.w,p.g,c.C,u.C,((e,t,s,n,i)=>({issue:{key:e,id:t,type:s},project:{id:null!==i?Object(a.q)(i.toString()):i,key:n}}))),R=Object(n.createSelector)(c.q,m.b,O,((e,t,s)=>e&&Array.isArray(t.actions)?h(t.activities,s).map((e=>{const{id:t,properties:{title:s}}=e,{appKey:n,moduleKey:a}=Object(r.d)(t);return{name:s,extension:e,type:"FORGE_ENTITY_TYPE",moduleKey:a,appKey:n}})):[])),N=e=>Object(n.createSelector)(M,m.b,((t,s)=>f(f({},t),{},{isNewToIssue:s.panelsKeys.newPanels.includes(e)}))),F=e=>Object(n.createSelector)(E,(t=>{const{extensionId:s}=Object(o.a)(e)||{};return t.find((e=>s===e.extension.id))})),U=e=>Object(n.createSelector)(m.b,(t=>t.panelsKeys.collapsedPanels.includes(e)))},"./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return o})),s.d(t,"a",(function(){return c})),s.d(t,"b",(function(){return l}))
;var n=s("./node_modules/lodash/has.js"),a=s.n(n),i=s("./node_modules/lodash/isNil.js"),r=s.n(i);const o=e=>e&&a()(e,"schema.custom")&&!r()(e.schema.custom)&&e.schema.custom.includes("ari:cloud:ecosystem::extension"),c=e=>o(e)?{id:e.key,type:"forgeCustomField"}:null,l=e=>o(e)?"forgeCustomField":null},"./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return L})),s.d(t,"b",(function(){return M})),s.d(t,"a",(function(){return R})),s.d(t,"f",(function(){return U})),s.d(t,"e",(function(){return V})),s.d(t,"g",(function(){return K})),s.d(t,"d",(function(){return W}))
;var n=s("./node_modules/rxjs/Rx.js"),a=s("./src/packages/platform/utils/constants/src/project-types.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),r=s("./src/packages/platform/ui/flags/src/services/index.js"),o=s("./src/packages/issue/issue-scroll/src/services/types.js"),c=s("./src/packages/platform/utils/permalinks/src/index.js"),l=s("./src/packages/platform/utils/permalinks/src/constants.js"),u=s("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),d=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),p=s("./src/packages/issue/issue-view/src/common/messages/flags.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),b=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js"),f=s("./src/packages/platform/services/issue/src/source/issue-express/graphql-util.js"),g=s("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),h=s("./src/packages/issue/issue-view/src/feature-flags.js"),y=s("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js"),O=s("./src/packages/issue/issue-view/src/common/service/issue/gira/comments/index.js"),j=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js")
;const v="issue.comment.fetch.epic.graphql",E="-created",k=(e,t,s,n)=>m.a`query {
        issueComments(issueIdOrKey: "${e}", first: ${t}, offset: ${s}, orderBy: "${n}") {
            nodes {
                id
                author {
                  accountId
                  displayName
                  avatarUrls {
                    key
                    value
                  }
                  timeZone
                }
                updateAuthor {
                  accountId
                  displayName
                  avatarUrls {
                    key
                    value
                  }
                  timeZone
                }
                visibility {
                  type
                  value
                }
                created
                updated
                renderedBody
                jsdPublic
                bodyAdf
            }
            totalCount
        }
    }`,w=(e,t,s,n,a,i,r)=>Object(b.a)(Object(j.d)(e),((e,t,s,n,a,i)=>({method:"POST",body:JSON.stringify({query:k(e,t,s,n)}),perf:i,headersProcessor:a&&a(g.a.key)}))(t,s,n,E)).map(y.g).map((e=>Object(y.b)(e,a,i,r))),S=({startAt:e,maxResults:t,orderBy:s,commentId:n,commentAmount:a})=>{const i=null!=n?`, commentId: "${n}"`:""
;return`query issueViewInteractiveQuery($issueKey: String!) {\n       viewIssue(issueKey: $issueKey) {\n           comments (${`first: ${e}`}${""===i&&null!=t?`, maxResults: ${t}`:""}${""!==i&&null!=a?`, commentAmount: ${a}`:""}${null!=s?`, orderBy: "${s}"`:""}${i}) {\n               nodes {\n                   id\n                   author {\n                       accountId\n                       displayName\n                       avatarUrl\n                   }\n                   updateAuthor {\n                       accountId\n                       displayName\n                       avatarUrl\n                   }\n                   visibility {\n                       type\n                       value\n                   }\n                   created\n                   updated\n                   jsdPublic\n                   bodyAdf\n               }\n               startIndex\n               totalCount\n           }\n       }\n     }\n   `
},C=({issueKey:e,maxResults:t,startAt:s,orderBy:n,commentId:a,commentAmount:i})=>({method:"POST",body:JSON.stringify({query:S({maxResults:t,startAt:s,orderBy:n,commentId:a,commentAmount:i}),variables:{issueKey:e}})}),I={NEWEST_FIRST:"-created",OLDEST_FIRST:"created"},T=({baseUrl:e,issueKey:t,commentId:s,commentAmount:n})=>Object(b.a)(`${e}/rest/gira/1/`,C({issueKey:t,commentAmount:n,startAt:0,orderBy:Object(h.isActivitySortRevisionEnabled)()?E:void 0,commentId:s})).map(f.a).map((e=>Object(f.b)(v,e))).map((e=>Object(O.b)(e.viewIssue)));var P=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),_=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),x=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),D=s("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),A=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js");const L=(e,t,s,n,a)=>{const i=100;let r=0
;s>0&&(r=s+a.filter((e=>e.completedDate.epochMillis>n[n.length-1].timestamp)).length);const o=e+a.length-(n.length+r);return{numNextActivityItemsToLoad:o>i?i:o,numPrevActivityItemsToLoad:r>i?i:r}},M=(e,t,s,n,a)=>{const i=100,r=null!=s?s:0;let o=0;r>0&&(o=r+a.filter((e=>e.completedDate.epochMillis>Math.max(...n.map((e=>e.timestamp))))).length);const c=e+a.length-(n.length+o);return{numNextActivityItemsToLoad:c>i?i:c,numPrevActivityItemsToLoad:o>i?i:o}},R=(e,t,s)=>{let n=0;const a=100,i=e-(t+s);return s>0&&(n=s>a?a:s),{numNextCommentsToLoad:i>a?a:i,numPrevCommentsToLoad:n}},N="issue.comment.fetch.epic",F="Failed to fetch comments",U=(e,t)=>e.ofType("FETCH_LATEST_COMMENTS_REQUEST").switchMap((({type:e})=>{const s=t.getState(),a=Object(P.f)(s),r=Object(P.x)(s),o=Object(A.J)(s);return(o>10?10:o)>0?w(a,r,5,0,0,0,e).map((e=>Object(d.o)(e))).catch((e=>(Object(x.a)(N,F,e),i.h.safeWarnWithoutCustomerData(N,F),n.Observable.of(Object(d.n)())))):n.Observable.empty()
})),V=(e,t)=>e.ofType("FETCH_OLDER_COMMENTS_REQUEST","FETCH_NEWER_COMMENTS_REQUEST").switchMap((({type:e})=>{const s=t.getState(),a=Object(P.f)(s),r=Object(P.x)(s),o=Object(A.K)(s),c=Object(A.F)(s),l=Object(A.J)(s),u=Object(D.b)(s),{startAt:p,maxResults:m}=((e,t,s,n,a)=>{let i=0,r=0;if(Object(h.isActivitySortRevisionEnabled)()){if("FETCH_OLDER_COMMENTS_REQUEST"===e)return r=t+n,{maxResults:Math.min(s-r,100),startAt:r};r=Math.max(0,t-100),i=t-r}else{if("FETCH_OLDER_COMMENTS_REQUEST"===e)return r="NEWEST_FIRST"===a?t+n:Math.max(t-100,0),{maxResults:"NEWEST_FIRST"===a?Math.min(s-r,100):t-r,startAt:r};r="NEWEST_FIRST"===a?Math.max(0,t-100):t+n,i="NEWEST_FIRST"===a?t-r:Math.min(s-r,100)}return{maxResults:i,startAt:r}})(e,l,o,c,u);return(({baseUrl:e,issueKey:t,maxResults:s,startAt:n=0,loadedComments:a=0,commentsStartIndex:i=0,commentId:r,type:o,selectedSortOrder:c})=>Object(b.a)(`${e}/rest/gira/1/`,C({issueKey:t,maxResults:s,startAt:n,orderBy:Object(h.isActivitySortRevisionEnabled)()?E:I[c],
commentId:r})).map(f.a).map((e=>Object(f.b)(v,e))).map((e=>Object(h.isActivitySortRevisionEnabled)()?Object(O.c)(e.viewIssue,a,i,o,E):Object(O.d)(e.viewIssue,a,i,o,c))))({baseUrl:a,issueKey:r,maxResults:m,startAt:p,loadedComments:c,commentsStartIndex:l,type:e,selectedSortOrder:u}).map((e=>Object(d.q)(e))).catch((e=>(Object(x.a)(N,F,e),i.h.safeWarnWithoutCustomerData(N,F),n.Observable.of(Object(d.p)()))))})),K=(e,t)=>e.ofType("FETCH_SORTED_COMMENTS_REQUEST").switchMap((({payload:e})=>{const s=t.getState(),a=Object(P.f)(s),r=Object(P.x)(s),o=Object(D.b)(s);return void 0!==e?T({baseUrl:a,issueKey:r,commentAmount:Math.floor(5),commentId:e}).map((e=>Object(d.v)(e))).catch((e=>(Object(x.a)(N,F,e),i.h.safeWarnWithoutCustomerData(N,F),n.Observable.of(Object(d.t)())))):(({baseUrl:e,issueKey:t,maxResults:s,selectedSortOrder:n})=>Object(b.a)(`${e}/rest/gira/1/`,C({issueKey:t,maxResults:s,startAt:0,orderBy:Object(h.isActivitySortRevisionEnabled)()?E:I[n],commentId:void 0
})).map(f.a).map((e=>Object(f.b)(v,e))).map((e=>Object(h.isActivitySortRevisionEnabled)()?Object(O.c)(e.viewIssue,0,0,void 0,E):Object(O.d)(e.viewIssue,0,0,void 0,n))))({baseUrl:a,issueKey:r,maxResults:5,selectedSortOrder:o}).map((e=>Object(d.v)(e))).catch((e=>(Object(x.a)(N,F,e),i.h.safeWarnWithoutCustomerData(N,F),n.Observable.of(Object(d.t)()))))})),W=e=>(t,s)=>t.ofType("SCROLL_TO_ATTACHMENT_COMMENT").switchMap((()=>{const t=s.getState(),m=Object(P.f)(t),b=Object(P.x)(t),f=Object(_.F)(t)===a.g,g=e.getScrollTargetId(o.a.COMMENT);return null===g?n.Observable.of():T({baseUrl:m,issueKey:b,commentAmount:Math.floor(5),commentId:g}).flatMap((t=>(window.history.replaceState({},null,Object(c.c)(g,l.b.COMMENTS)),e.setScrollTarget(null),n.Observable.of(Object(d.v)(t),Object(u.c)(f?u.b:u.a),Object(d.F)(!1))))).catch((e=>{Object(x.a)(N,F,e),i.h.safeWarnWithoutCustomerData(N,F);const{showFlag:t}=Object(r.f)();return t({type:"error",title:[p.a.commentWorklogAttachmentFetchFailedTitle,{
field:"comment"}],description:p.a.commentWorklogAttachmentFetchFailedDescription,isAutoDismiss:!0}),n.Observable.of()}))}))},"./src/packages/issue/issue-view/src/feature-flags.js":function(e,t,s){"use strict";s.r(t),s.d(t,"isTemplatedBaseContextEnabled",(function(){return i})),s.d(t,"isGroundWorkMasterEnabled",(function(){return r})),s.d(t,"isLayoutFlowFixEnabled",(function(){return o})),s.d(t,"isGroupingPreEarlyAccessEnabled",(function(){return c})),s.d(t,"isInlineCloneEnabled",(function(){return l})),s.d(t,"isExperimentalEcosystemIframesHiddenEnabled",(function(){return u})),s.d(t,"isExperimentalEcosystemGlancesHiddenEnabled",(function(){return d})),s.d(t,"isSkip4xxReportingEnabled",(function(){return p})),s.d(t,"isConnectPanelsMarginBottomEnabled",(function(){return m})),s.d(t,"removeTimeZoneFromIssueUser",(function(){return b})),s.d(t,"isEpicNameFieldTypeEnabled",(function(){return f})),s.d(t,"isStopFetchPreviewEnabled",(function(){return g})),
s.d(t,"isReportingAttachmentViewEnabled",(function(){return h})),s.d(t,"isNewSkeletonEnabled",(function(){return y})),s.d(t,"isExtractedLabelsFieldEnabled",(function(){return O})),s.d(t,"isSortingIssuesUnderEpicEnabled",(function(){return j})),s.d(t,"isProjectContextIssueTypesOnLoadEnabled",(function(){return v})),s.d(t,"isIssueViewMigration1stAprilEnabled",(function(){return E})),s.d(t,"isIssueViewMigrationMidMarchEnabled",(function(){return k})),s.d(t,"isIssueViewMigratedStreamEnabled",(function(){return w})),s.d(t,"isIssueViewMigrationPostMigrationEnabled",(function(){return S})),s.d(t,"isStateRefactorInChildIssuesPanelEnabled",(function(){return C})),s.d(t,"isUseAppPermissionsFromTenantContextEnabled",(function(){return I})),s.d(t,"isEpicCardEnabled",(function(){return T})),s.d(t,"isItSafeLoggingEnabledToUseAppPermissionsFromTenantContext",(function(){return P})),s.d(t,"isShortcutMenuEnabled",(function(){return _})),s.d(t,"isProjectsDirectoryPrettyUrlEnabled",(function(){return x
})),s.d(t,"isSmartEpicRankingEnabled",(function(){return D})),s.d(t,"isSmartSprintRankingEnabled",(function(){return A})),s.d(t,"isNewCardExperience",(function(){return L})),s.d(t,"isFolderUploadsEnabled",(function(){return M})),s.d(t,"isCodeViewerEnabled",(function(){return R})),s.d(t,"isZipPreviewEnabled",(function(){return N})),s.d(t,"getClientPollingIntervalMs",(function(){return F})),s.d(t,"getClientPollingMaxAttempts",(function(){return U})),s.d(t,"getClientPollingBackoffFactor",(function(){return V})),s.d(t,"getClientPollingMaxIntervalMs",(function(){return K})),s.d(t,"getClientPollingMaxGlobalFailures",(function(){return W})),s.d(t,"isAllActivityEnabled",(function(){return B})),s.d(t,"isActivitySortRevisionEnabled",(function(){return H})),s.d(t,"isStickyCommentZIndexValueFixEnabled",(function(){return $})),s.d(t,"isDateTimeConsistencyMvpEnabled",(function(){return G})),s.d(t,"isFollowUpFixEcosystemDropdownFieldsNotClearingEnabled",(function(){return q})),
s.d(t,"isTeamsCustomFieldTypeEnabled",(function(){return z})),s.d(t,"isCmdbIntegrationFieldEnabled",(function(){return Y})),s.d(t,"getCrossJoinViaEpicTouchpointFlag",(function(){return Q})),s.d(t,"getCrossJoinViaEpicTouchpointMetricValue",(function(){return J})),s.d(t,"isInvitePeopleDrawerEnabled",(function(){return Z})),s.d(t,"isInviteFromAssignEnabled",(function(){return X})),s.d(t,"isJsmChangeVisibilityM2Enabled",(function(){return ee})),s.d(t,"isInlineSummaryFieldEnabled",(function(){return te})),s.d(t,"isDropzoneFeedbackEnabled",(function(){return se})),s.d(t,"isFixDownloadButtonAttachmentEnabled",(function(){return ne})),s.d(t,"isRemoveDataProviderFromEditorEnabled",(function(){return ae})),s.d(t,"isPinnedFieldsClickThroughBannerEnabled",(function(){return ie})),s.d(t,"isSaferLoadBridgeApiEnabled",(function(){return re})),s.d(t,"isConnectGlanceAutoresizeBugfixEnabled",(function(){return oe})),s.d(t,"isPolarisInsightsTabEnabled",(function(){return ce})),
s.d(t,"isRelatedIssuesPanelEnabled",(function(){return le})),s.d(t,"isSelectFieldPerformanceImprovementEnabled",(function(){return ue})),s.d(t,"isWebAndIssueLinkSummaryEnabled",(function(){return de})),s.d(t,"isOrderByLexoRankEnabled",(function(){return pe})),s.d(t,"collapsedHierarchies",(function(){return me})),s.d(t,"isRemoveDuplicateGiraEnabled",(function(){return be})),s.d(t,"isRemoveOldIssueAppPreloads",(function(){return fe})),s.d(t,"isBoardSearchFieldChangeboardingEnabled",(function(){return ge})),s.d(t,"isBacklogSearchFieldChangeboardingEnabled",(function(){return he})),s.d(t,"isNewAnalyticsComponent",(function(){return ye})),s.d(t,"getPerformanceTrackingConfiguration",(function(){return Oe})),s.d(t,"getValidTransactionsTrackingConfiguration",(function(){return je})),s.d(t,"getTTRSeverityTrackingConfiguration",(function(){return ve})),s.d(t,"getUnsupportedContentLevelsTrackingConfiguration",(function(){return Ee})),s.d(t,"isJsmLinkedAlertsEnabled",(function(){return ke})),
s.d(t,"isJsmRespondersEnabled",(function(){return we})),s.d(t,"getCodeInDevPanelExperimentCohort",(function(){return Se})),s.d(t,"isCodeInDevPanelExperimentEnabled",(function(){return Ce})),s.d(t,"getCodeInDevPanelExperimentMetricValue",(function(){return Ie})),s.d(t,"isStickyHeaderRefactoringEnabled",(function(){return Te})),s.d(t,"isConnectIssueModalErrorHandlerEnabled",(function(){return Pe})),s.d(t,"isCustomFieldTypesEnabled",(function(){return _e})),s.d(t,"isJsmTicketConfigInSPAEnabled",(function(){return xe})),s.d(t,"isItsmToursCheckAgentPermissionsEnabled",(function(){return De})),s.d(t,"isFixUnsavedCommentPlaceholderEnabled",(function(){return Ae})),s.d(t,"isFixTimeTrackingFormatEnabled",(function(){return Le})),s.d(t,"isFixParentLinkLabelEnabled",(function(){return Me})),s.d(t,"isMessageCustomFieldEnabled",(function(){return Re})),s.d(t,"isFindFieldEnabled",(function(){return Ne})),s.d(t,"isIssueBeanBuilder2ForSingleIssueCallsOptimizationEnabled",(function(){return Fe})),
s.d(t,"isJsmAddCustomersAndOrgSearchMissingEventsEnabled",(function(){return Ue})),s.d(t,"isJsmOrgsFieldSearchUriEncodeEnabled",(function(){return Ve})),s.d(t,"isCollapseNextGenIssueTypeHierarchyEnabled",(function(){return Ke})),s.d(t,"isFixPropagationEnabled",(function(){return We})),s.d(t,"groupApprovalsEnabled",(function(){return Be}));var n=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/jira-feature-flag-client.js");const i=()=>Object(n.c)("issue.details.templates.base-context",!1),r=()=>Object(n.b)("issue.details.ground.work.master",!1),o=()=>{Object(n.b)("issue.details.layout-flow-fix",!1)
},c=()=>Object(n.b)("issue.details.grouping.pre-early-access",!1),l=()=>Object(n.b)("issue.details.clone-modal",!1),u=()=>Object(n.b)("issue.details.experimental.hide-iframes-from-content-section-of-issue-view",!1),d=()=>Object(n.b)("issue.details.experimental.hide-ecosystem-glance-panels",!1),p=()=>Object(n.b)("isissue.details.skip-reporting-4xx",!1),m=()=>Object(n.b)("issue.details.add.margin.bottom.to.collapsed.panels",!1),b=()=>Object(n.b)("issue.details.timezone-refactoring",!1),f=()=>Object(n.b)("issue.details.epic-name-field-type",!1),g=()=>Object(n.b)("issue.details.stop-fetch-preview",!1),h=()=>Object(n.b)("issue.details.report-attachment-view",!1),y=()=>Object(n.b)("issue.details.new-skeleton",!1),O=()=>Object(n.b)("issue.details.extracted-field.labels",!1),j=()=>Object(n.b)("shpl-113-sort-issue-under-epic",!1),v=()=>Object(n.b)("issue.details.project-context-issue-types-on-load",!1),E=()=>Object(n.b)("issue.details.migration.1st-april",!1),k=()=>Object(n.b)("issue.details.migration.mid-march",!1),w=()=>Object(n.b)("issue.details.migration-migrated-stream",!1),S=()=>Object(n.b)("issue.details.migration.post-migration",!1),C=()=>Object(n.b)("issue.details.bento-8345.child-issues-panel.state-refactor",!1),I=()=>Object(n.b)("issue.details.jsd.app-permissions.from.tenant-context",!1),T=()=>Object(n.b)("issue.details.epic-card",!1),P=()=>Object(n.b)("issue.details.bitbucket.license.state.in.tenant.context",!1),_=()=>Object(n.b)("issue.details.shortcuts-dialog",!1),x=()=>Object(n.b)("endeavour.projects-directory.pretty-url",!1),D=()=>Object(n.b)("issue.details.smart-epic-ranking",!1),A=()=>Object(n.b)("issue.details.smart-sprint-ranking",!1),L=()=>Object(n.b)("issue.details.media-cards-new-experience",!1),M=()=>Object(n.b)("issue.details.media-picker-folder-upload",!1),R=()=>Object(n.b)("issue.details.media-viewer-code-viewer",!1),N=()=>Object(n.b)("issue.details.media-viewer-zip-previews",!1),F=()=>Object(n.c)("issue.details.media-client-polling-intervalms",void 0),U=()=>Object(n.c)("issue.details.media-client-polling-max-attempts",void 0),V=()=>Object(n.c)("issue.details.media-client-polling-backoff-factor",void 0),K=()=>Object(n.c)("issue.details.media-client-polling-max-intervalms",void 0),W=()=>Object(n.c)("issue.details.media-client-polling-max-global-failures",void 0),B=()=>Object(n.b)("issue.details.bento-8177-all-activity-feed",!1),H=()=>Object(n.b)("issue.details.bento-9478-activity-sort-order-revision",!1),$=()=>Object(n.b)("issue.details.bento-9452-sticky-add-comment-box-z-index-fix",!1),G=()=>Object(n.b)("issue.details.bento-8324-date-time-consistency",!1),q=()=>Object(n.b)("issue.details.bento-6200-followup-fix-for-ecosystem-dropdowns-not-clearing",!1),z=()=>Object(n.b)("jira.teams.enable-new-custom-field-types",!1),Y=()=>Object(n.b)("jsd-cmdb-integration-field",!1),Q=(e=!1,t)=>Object(a.a)().getVariantValue("growth.jsw-epic-touchpoint.cross-join",{
default:"not-enrolled",oneOf:["control","not-enrolled","experiment"],shouldTrackExposureEvent:e,exposureData:t}),J=()=>({"not-enrolled":0,control:1,experiment:2}[Q()]),Z=()=>"variation"===Object(a.a)().getVariantValue("confluence.frontend.invite.from.mention",{default:"not-enrolled",oneOf:["control","not-enrolled","variation"],shouldTrackExposureEvent:!1}),X=()=>"variation"===Object(a.a)().getVariantValue("invite.from.assign",{default:"not-enrolled",oneOf:["control","not-enrolled","variation"],shouldTrackExposureEvent:!1
}),ee=()=>Object(n.b)("jsm-changevisibility-m2",!1),te=()=>Object(n.b)("issue.details.inline-issue-cards-summary-extraction",!1),se=()=>Object(n.b)("issue.details.bento-9467-issueview-dropzone-feedback",!1),ne=()=>Object(n.b)("bento-8351-fix-download-attachment-card",!1),ae=()=>Object(n.b)("issue.details.bento-9139.remove-data-provider-from-editor",!1),ie=()=>Object(n.b)("issue.details.pinned-fields-click-through-banner",!1),re=()=>Object(n.b)("kirigami-safer-load-bridge-api",!1),oe=()=>Object(n.b)("issue.details-connect-glance-autoresize-bugfix",!1),ce=()=>Object(n.b)("polaris.insights-tab-in-bento",!1),le=()=>Object(n.b)("issue.details.enable-related-issues-panel-in-bento",!1),ue=()=>Object(n.b)("issue.details.enable-select-field-performance-improvement",!1),de=()=>Object(n.b)("issue-view-display-summary-on-web-and-issue-links",!1),pe=()=>Object(n.b)("issue-1953-return-subtasks-in-lexo-rank",!1),me=()=>Object(n.b)("collapse-nextgen-issuetype-hierarchy-fe-reads",!1),be=()=>Object(n.b)("jsw.classic.remove.duplicate.gira.call.issue.dialog",!1),fe=()=>Object(n.b)("jfp.perf.remove-old-issue-app-preloads",!1),ge=()=>Object(n.b)("jsw.nextgen.search-field.changeboarding-board",!1),he=()=>Object(n.b)("jsw.nextgen.search-field.changeboarding",!1),ye=()=>Object(n.b)("jfp.perf.new-analytics-component",!1),Oe=()=>Object(n.c)("issue.details.editor.performance-tracking",{}),je=()=>{
const e=Object(n.c)("issue.details.editor.valid-transactions-tracking",void 0);return"object"==typeof e&&Object.keys(e).length?e:void 0},ve=()=>Object(n.c)("issue.details.renderer.ttr-severity-tracking",{}),Ee=()=>Object(n.c)("issue.details.renderer.unsupported-content-levels-tracking",{}),ke=()=>Object(n.b)("jsm_showing_related_alerts_on_incident_5f6bg",!1),we=()=>Object(n.b)("jsm.incident.responders_xevre",!1),Se=()=>Object(n.e)("jira.growth-experiment-discover-dev-integrations","not-enrolled",["control","not-enrolled","experiment"]),Ce=()=>{const e=Se();return["control","experiment"].includes(e)},Ie=()=>({"not-enrolled":0,control:1,experiment:2
}[Se()]),Te=()=>Object(n.b)("issue.details.sticky-header-refactoring",!1),Pe=()=>Object(n.b)("smite.connect.issue.modal.handle.error",!1),_e=()=>Object(n.b)("forge_custom_field_types_qwxh8",!1),xe=()=>Object(n.b)("jsm-ticket-config-in-spa",!1),De=()=>Object(n.b)("jsm-itsm-tours-check-agent-permissions",!1),Ae=()=>Object(n.b)("issue.details.bento-5418-fix-unsaved-comment-placeholder",!1),Le=()=>Object(n.b)("issue.details.bento-9421-fix-time-tracking-format",!1),Me=()=>Object(n.b)("issue.details.bento-9455-fix-parent-link-field-label",!1),Re=()=>Object(n.b)("bento.gryffindor.message-custom-field.rich-text-support",!1),Ne=()=>Object(n.b)("issue-view.find-your-field",!1),Fe=()=>Object(n.b)("issue-3048-optimize-issue-bean-builder-2-for-single-issue-calls",!1),Ue=()=>Object(n.b)("jsm-add-customers-and-orgs-search-missing-events",!1),Ve=()=>Object(n.b)("jsm-add-orgs-field-search-uri-encode",!1),Ke=()=>Object(n.b)("collapse-nextgen-issuetype-hierarchy-fe-reads-y",!1),We=()=>Object(n.b)("jdw-3202-fix-propagation-on-modified-values",!1),Be=()=>Object(n.b)("jsd.reylo-426.team.approvals.master.switch",!1)
},"./src/packages/issue/issue-view/src/feedback-button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/platform/utils/app-base/src/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),o=s("./node_modules/react-intl/lib/index.es.js"),c=s("./src/packages/platform/controllers/unified-feedback/src/actions/types.js"),l=s("./src/packages/platform/controllers/unified-feedback/src/components/unified-feedback-api.js"),u=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),d=s("./node_modules/@atlaskit/icon/glyph/feedback.js"),p=s.n(d),m=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");class b extends n.Component{renderButton(){return a.a.createElement(u.a,{onClick:this.props.onClick,appearance:"subtle",iconBefore:a.a.createElement(p.a,{label:this.props.iconLabel})},this.props.children)}render(){
return a.a.createElement("div",null,this.props.tooltip?a.a.createElement(m.a,{content:this.props.tooltip,position:"top"},this.renderButton()):this.renderButton())}}b.displayName="BentoFeedbackTriggerButton",b.defaultProps={children:null,tooltip:null,iconLabel:"",onClick:null};class f extends n.Component{renderFeedbackButton(e){const t={collectorId:this.props.collectorId,feedbackGroupId:this.props.feedbackGroupId,feedbackType:c.a,optOut:!0};return a.a.createElement(l.a,null,((s,{openFeedbackDialog:n})=>a.a.createElement(o.c,{id:"software-issue.labs-feature-button-text",defaultMessage:"Give feedback"},(s=>this.props.isCompact?a.a.createElement(b,{iconLabel:String(s),tooltip:e,onClick:()=>n(t)}):a.a.createElement(b,{onClick:()=>n(t)},s)))))}render(){return a.a.createElement(o.c,{id:"software-backlog-issue.labs-feature-button-tooltip",defaultMessage:"Give feedback"},(e=>this.renderFeedbackButton(e)))}}f.displayName="Feedback",f.defaultProps={isCompact:!1};var g=f
;const h=e=>a.a.createElement(i.a,null,a.a.createElement(r.a,null,a.a.createElement(g,e)));h.displayName="FeedbackButton";t.a=h},"./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return n})),s.d(t,"b",(function(){return a})),s.d(t,"e",(function(){return i})),s.d(t,"d",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"g",(function(){return c})),s.d(t,"a",(function(){return l}));const n=(e,t)=>({type:"FIELD_INIT_OPTIONS",payload:{fieldId:e,fieldOptions:t}}),a=(e,t,s,n)=>({type:"FIELD_EDIT_BEGIN",payload:{analyticsEvent:n,fieldId:e,fieldOptions:t,fieldEditSessionId:s}}),i=(e,t,s)=>({type:"FIELD_EDIT_UPDATE",payload:{fieldId:e,value:t,fieldOptions:s}}),r=(e,t,s,n,a)=>({type:"FIELD_EDIT_CONFIRM",payload:{analyticsEvent:n,fieldId:e,fieldOptions:t,saveFieldData:s,analyticsAttributeIdRetriever:a}}),o=(e,t)=>({type:"FIELD_EDIT_CANCEL",payload:{fieldId:e,fieldOptions:t}}),c=(e,t,s)=>({
type:"FIELD_PASTE",payload:{fieldId:e,fieldOptions:t,pastedContent:s}}),l=(e,t)=>({type:"FIELD_ADD_ALLOWED_VALUES",payload:{fieldId:e,allowedValues:t}})},"./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){i(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function i(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"d",(function(){return r})),
s.d(t,"e",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"a",(function(){return p}));const r=(e,t,s,n,i,r,o=!1)=>({type:"FIELD_SAVE_REQUEST",payload:a({fieldId:e,value:t,fieldOptions:s,saveFieldData:n,analyticsEvent:i,shouldFetchViewContext:o},r&&{eventData:r})}),o=(e,t,s,n,a)=>({type:"FIELD_SAVE_SUCCESS",payload:{fieldId:e,fieldOptions:t,fieldValue:s,saveFieldResult:n},meta:a}),c=(e,t,s,n)=>({type:"FIELD_SAVE_FAILURE",payload:{fieldId:e,invalidMessage:t,error:s,fieldOptions:n}}),l=(e,t,s,n)=>({type:"FIELD_SAVE_SUCCESS_WITH_PASTED_CONTENT",payload:{fieldId:e,fieldOptions:t,value:s,pastedContent:n}}),u=(e,t,s)=>({type:"FIELD_UPDATED",payload:{fieldId:e,fieldValue:t,extraParams:s}}),d=(e,t)=>({type:"FIELD_CONFIRM_NEW_FIELD",payload:{fieldId:e,fieldValue:t}}),p=(e,t)=>({type:"FIELD_CONFIRM_FAILURE_NEW_FIELD",payload:{fieldId:e,fieldValue:t}})},
"./src/packages/issue/issue-view/src/issue-field/state/selectors/epic-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"b",(function(){return u}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/project-settings/issue-type-hierarchies/src/index.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/feature-flags.js"),c=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js");const l=Object(n.createSelector)(Object(i.n)("epic"),(e=>null!==e?e:void 0)),u=Object(n.createSelector)(r.q,c.f,c.b,o.collapsedHierarchies,((e,t,s,n)=>n?e||Object(a.c)(s):e||1===t))},"./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"d",(function(){return o})),
s.d(t,"b",(function(){return l})),s.d(t,"a",(function(){return u}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js");const r=e=>!!e&&e.length>0,o=e=>e?[{value:!0}]:null,c=Object(a.e)("com.atlassian.jira.plugin.system.customfieldtypes:flagged"),l=Object(n.createSelector)(c,(e=>!!e&&(e=>{if(e){const t=Object(i.a)(e);return r(t)}return!1})(e))),u=Object(n.createSelector)(c,(e=>e&&e.key))},"./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js":function(e,t,s){"use strict";s.d(t,"j",(function(){return g})),s.d(t,"k",(function(){return h})),s.d(t,"g",(function(){return j})),s.d(t,"h",(function(){return v})),s.d(t,"e",(function(){return w})),s.d(t,"i",(function(){return S})),s.d(t,"b",(function(){return I})),s.d(t,"c",(function(){return T})),s.d(t,"d",(function(){return P})),
s.d(t,"f",(function(){return _})),s.d(t,"a",(function(){return x}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/find.js"),i=s.n(a),r=s("./src/packages/project-settings/issue-type-hierarchies/src/index.js"),o=s("./src/packages/issue/project-context-service/src/utils.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),d=s("./src/packages/issue/issue-view/src/feature-flags.js"),p=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),m=s("./src/packages/issue/issue-view/src/selectors/project-selector.js");const b=Object(c.o)("hierarchy-level-below")||null,f=Object(n.createSelector)(b,(e=>e&&e.issueTypes||[])),g=Object(n.createSelector)(l.f,f,((e,t)=>{const s=e.issueTypes,n=t.map((e=>e.id))
;return s.filter((e=>-1!==n.indexOf(e.id)))})),h=Object(n.createSelector)(u.h,f,((e,t)=>e.canCreateChildren&&!!t.length)),y=Object(c.o)("hierarchy-level-above")||null,O=Object(n.createSelector)(y,(e=>e&&(e.name||null))),j=Object(n.createSelector)(y,(e=>e&&e.issueTypeIds.map(String)||[])),v=Object(n.createSelector)(y,(e=>e&&e.issueTypes.map((e=>e.name)).filter((e=>e))||[])),E=Object(n.createSelector)(j,(e=>e.length>0)),k=Object(c.o)("hierarchy-level-same-level")||null,w=Object(n.createSelector)(k,(e=>{if(!e)return!1;if(Object(d.collapsedHierarchies)())return Object(r.d)(e.level);return e.issueTypes[0].subtask
})),S=Object(n.createSelector)(k,(e=>e?e.issueTypeIds.map(String):[])),C=Object(n.createSelector)(k,(e=>e?e.id:null)),I=Object(n.createSelector)(k,(e=>e?Object(r.e)(e.level):null)),T=Object(n.createSelector)(I,(e=>null==e||Object(r.b)(e))),P=Object(n.createSelector)(m.b,m.c,C,((e,t,s)=>!!(e&&t&&s)&&(e===s||!!i()(t,(e=>e.id===s))))),_=Object(n.createSelector)(m.b,C,m.d,o.b),x=Object(n.createSelector)(O,p.c,E,((e,t,s)=>Boolean(e)&&t&&s))},"./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return j})),s.d(t,"d",(function(){return v})),s.d(t,"h",(function(){return E})),s.d(t,"b",(function(){return I})),s.d(t,"j",(function(){return A})),s.d(t,"i",(function(){return L})),s.d(t,"g",(function(){return M})),s.d(t,"a",(function(){return R})),s.d(t,"e",(function(){return N})),s.d(t,"f",(function(){return F}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isArray.js"),i=s.n(a),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./node_modules/lodash/isPlainObject.js"),l=s.n(c),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/get-pending-value.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),f=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),g=s("./src/packages/issue/issue-view/src/configurations.js"),h=s("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js"),y=s("./src/packages/issue/issue-view/src/feature-flags.js")
;const O=["devSummary","SLA_PANEL","KNOWLEDGE_BASE","ASSET_ONBOARDING"],j=()=>Object(y.isJsmLinkedAlertsEnabled)()?[...O,"LINKED_ALERTS"]:O,v=e=>o()(e)||i()(e)&&0===e.length||l()(e)&&0===Object.keys(e).length,E=(e,t)=>!!t&&!e,k=(e,t,s)=>!(!e||!v(Object(m.a)(e))||Object(d.B)(e))&&("assignee"!==e.key&&"com.atlassian.servicedesk:vp-origin"!==Object(p.b)(e)&&"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language"!==Object(p.b)(e)&&("timetracking"!==e.key||E(t,s))),w=(e,t)=>{if(j().includes(e.id))return{id:e.id,type:e.id};if("TAB"===e.type)return e;const s=Object(h.a)(t[e.id]);if(s)return s;const n=Object(d.u)(e.id,t),a=Object(p.b)(n);return n&&a?{id:n.key,type:a}:null},S=Object(n.createSelector)(b.H,(e=>e.contextItems)),C=Object(n.createSelector)(d.s,(e=>Object.keys(e).filter((t=>{const s=Object(p.b)(e[t]);return s&&Object(g.e)().includes(s)})))),I=Object(n.createSelector)(d.s,(e=>Object.keys(e).filter((t=>{const s=Object(p.b)(e[t]);return s&&g.f.includes(s)
})))),T=Object(n.createSelector)(d.s,u.B,u.F,C,u.l,((e,t,s,n,a)=>{if(!a)return null;return[...t,...n,...s].find((t=>{const s=Object(d.u)(t.id,e);return s&&s.key===a}))||null})),P=Object(n.createSelector)(u.B,T,((e,t)=>t&&!e.includes(t)?e.concat([t]):e)),_=Object(n.createSelector)(u.F,T,((e,t)=>t?e.filter((e=>e!==t)):e)),x=Object(n.createSelector)(C,T,((e,t)=>t?e.filter((e=>e!==t)):e)),D=Object(n.createSelector)(P,_,x,u.n,b.F,((e,t,s,n)=>[...e,...t,...n?[{id:"devSummary",type:"DEV_SUMMARY"}]:[]])),A=Object(n.createSelector)(d.s,D,_,f.b,f.c,((e,t,s,n,a)=>t.filter((t=>{const i=!!s.find((e=>e.id===t.id));if(j().includes(t.id)||"TAB"===t.type)return!i;if(Object(h.c)(e[t.id]))return!0;const r=Object(d.u)(t.id,e);return!!Object(d.A)(r)||!k(r,n,a)&&(r&&Object(p.b)(r)&&!(i&&v(Object(m.a)(r))))})).map((t=>w(t,e))).filter(Boolean))),L=Object(n.createSelector)(d.s,u.j,((e,t)=>t.filter((t=>{const s=Object(d.u)(t.id,e);return!(!s||!Object(p.b)(s))
})).map((t=>w(t,e))).filter(Boolean))),M=Object(n.createSelector)(d.s,u.E,((e,t)=>t&&t.filter((t=>{const s=Object(d.u)(t.id,e);return!(!s||!Object(p.b)(s))})).map((t=>w(t,e))).filter(Boolean))),R=Object(n.createSelector)(d.s,_,f.b,f.c,((e,t,s,n)=>t.filter((t=>{if(j().includes(t.id)||"TAB"===t.type)return!0;const a=Object(d.u)(t.id,e);return!Object(d.A)(a)&&(!k(a,s,n)&&(a&&Object(p.b)(a)&&v(Object(m.a)(a))))})).map((t=>w(t,e))).filter(Boolean))),N=Object(n.createSelector)(S,(e=>e.isShowMoreExpanded)),F=Object(n.createSelector)(R,(e=>e.length>0))},"./src/packages/issue/issue-view/src/issue-field/state/selectors/parent-issue-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.A,(e=>Boolean(e&&e.id)))},
"./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c})),s.d(t,"d",(function(){return l})),s.d(t,"c",(function(){return u})),s.d(t,"b",(function(){return d}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),i=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js");const r=Object(a.q)("security"),o=Object(n.createSelector)(r,(e=>e&&e.value||null)),c=Object(n.createSelector)(r,(e=>e&&e.allowedValues||[])),l=Object(n.createSelector)(o,c,((e,t)=>e||t&&t.length>0)),u=Object(n.createSelector)(Object(a.C)("security"),i.c,((e,t)=>e&&!t)),d=Object(n.createSelector)(o,c,u,((e,t,s)=>({hasSecurityLevel:null!=e,securityLevelAllowedValuesCount:t.length,hasSecurityLevelEditPermissions:s})))},"./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js":function(e,t,s){
"use strict";s.d(t,"b",(function(){return f}));var n=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),i=s("./src/packages/platform/services/issue/src/model/issue-custom-fields.js"),r=s("./src/packages/platform/services/issue/src/model/issue-managed-fields.js"),o=s("./src/packages/platform/services/issue/src/model/issue-system-fields.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d={[i.s]:"com.atlassian.jira.plugin.system.customfieldtypes:float",[i.w]:"com.pyxis.greenhopper.jira:jsw-story-points",[i.z]:"com.atlassian.jira.plugin.system.customfieldtypes:url",[i.x]:"com.atlassian.jira.plugin.system.customfieldtypes:textfield",[i.y]:"com.atlassian.jira.plugin.system.customfieldtypes:textarea",[i.m]:"com.atlassian.jira.plugin.system.customfieldtypes:labels",[i.c]:"com.atlassian.jira.plugin.system.customfieldtypes:datepicker",[i.d]:"com.atlassian.jira.plugin.system.customfieldtypes:datetime",[i.u]:"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons",[i.n]:"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes",[i.p]:"com.atlassian.jira.plugin.system.customfieldtypes:multiselect",[i.v]:"com.atlassian.jira.plugin.system.customfieldtypes:select",
[i.r]:"com.atlassian.jira.plugin.system.customfieldtypes:multiversion",[i.B]:"com.atlassian.jira.plugin.system.customfieldtypes:version",[i.l]:"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker",[i.o]:"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker",[i.A]:"com.atlassian.jira.plugin.system.customfieldtypes:userpicker",[i.q]:"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker",[i.k]:"string",[i.i]:"number",[i.f]:"datetime",[i.j]:"option2",[i.h]:"array",[i.b]:"com.pyxis.greenhopper.jira:jsw-issue-color",[i.e]:"com.pyxis.greenhopper.jira:gh-epic-color",[i.a]:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect",[i.t]:"com.atlassian.jira.plugin.system.customfieldtypes:project",[i.g]:"com.pyxis.greenhopper.jira:gh-epic-status"},p={[r.c]:"com.pyxis.greenhopper.jira:gh-epic-link",[r.d]:"com.pyxis.greenhopper.jira:gh-epic-label",[r.g]:"com.pyxis.greenhopper.jira:gh-sprint",
[r.h]:"com.atlassian.jira.plugin.system.customfieldtypes:storypoint",[r.i]:"com.atlassian.teams:rm-teams-custom-field-team",[r.f]:"com.atlassian.jpo:jpo-custom-field-parent",[r.b]:"com.atlassian.jpo:jpo-custom-field-baseline-start",[r.a]:"com.atlassian.jpo:jpo-custom-field-baseline-end",[i.b]:"com.pyxis.greenhopper.jira:jsw-issue-color",[r.e]:"com.atlassian.jira.plugin.system.customfieldtypes:flagged"},m=e=>({editable:e.editable,required:!1,autoCompleteUrl:void 0,allowedValues:[],schema:{system:e.systemType,custom:e.customType,type:e.type?e.type:"",renderer:e.renderer},title:e.title||e.key,renderedValue:e.value,value:e.value,adfValue:e.adfValue,key:e.key}),b=e=>{const t={};return e&&e.fields.forEach(((e,s)=>{try{switch(e.type){case o.a:case o.b:case o.e:case o.g:case o.i:case o.o:case o.q:case o.r:case o.t:case o.s:t[s]=m({key:s,systemType:s,customType:null,value:e.value,title:e.title,editable:!!e.editable});break;case o.A:t.timeoriginalestimate=m({key:"timeoriginalestimate",
systemType:"timeoriginalestimate",customType:null,title:e.title,editable:!!e.editable,value:e.value&&e.value.originalEstimateSeconds}),t[s]=m({key:s,systemType:s,customType:null,title:e.title,editable:!!e.editable,value:e.value});break;case o.f:t[s]=m({key:s,systemType:s,customType:null,title:e.title,value:void 0,renderedValue:void 0,adfValue:e.value,editable:!!e.editable,renderer:e.renderer});break;case o.h:t[s]=m({key:s,systemType:s,customType:null,title:e.title,value:"atlassian-wiki-renderer"===e.renderer?void 0:e.value,adfValue:"atlassian-wiki-renderer"===e.renderer?e.value:void 0,editable:!!e.editable,renderer:e.renderer});break;case o.x:case o.m:case o.u:t[s]=m({key:s,systemType:s,customType:null,value:e.value,editable:!!e.editable});break;case r.c:case r.g:case r.h:case r.i:case r.f:case r.b:case r.a:case r.e:t[s]=m({key:s,systemType:null,customType:p[e.type],value:e.value,title:e.title,editable:!!e.editable});break;case r.d:t[s]=m({key:s,systemType:null,customType:p[e.type],
value:e.value,title:e.title,editable:!!e.editable,renderer:e.renderer,type:"string"});break;case i.y:{const n="atlassian-wiki-renderer"===e.renderer?{adfValue:e.value}:{value:e.value};t[s]=m(l({key:s,systemType:null,customType:d[e.type],title:e.title,editable:!!e.editable,renderer:e.renderer},n));break}case i.a:t[s]=m({systemType:null,customType:d[e.type],key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.b:case i.e:case i.s:case i.w:case i.z:case i.x:case i.m:case i.c:case i.d:case i.u:case i.n:case i.p:case i.v:case i.r:case i.B:case i.l:case i.o:case i.A:case i.q:case i.g:t[s]=m({systemType:null,customType:d[e.type],key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.k:case i.i:case i.j:case i.h:case i.f:t[s]=m({systemType:null,customType:null,type:e.type,key:s,title:e.title,value:e.value,editable:!!e.editable});break;case i.t:t[s]=m({systemType:null,customType:d[e.type],type:e.type,title:e.title,key:s,editable:!!e.editable,value:e.value})
;break;case o.k:case o.d:case o.w:case o.n:t[s]=m({systemType:null,customType:null,key:s,title:e.title,value:e.value,editable:!1})}}catch(c){a.a.safeErrorWithoutCustomerData("issue.details.field.initial-data-transformer",`Failed to map field: ${e.type}`,new n.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:c}))}})),t},f=e=>{const t=Object.entries(b(e)).reduce(((e,[t,s])=>l(l({},e),{},{[t]:s.value})),{});return l(l({},e),{},{fields:t})};t.a=b},"./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return ie})),s.d(t,"a",(function(){return ae}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/rxjs/Rx.js"),r=s("./node_modules/lodash/identity.js"),o=s.n(r),c=s("./node_modules/lodash/isEqual.js"),l=s.n(c),u=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const p={context:{
primaryContextItems:[],secondaryContextItems:[]},content:{visibleContentItems:[],requestPanelContentItems:void 0}};var m=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),b=s("./node_modules/lodash/isNull.js"),f=s.n(b),g=s("./node_modules/lodash/negate.js"),h=s.n(g),y=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),O=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),j=s("./src/packages/issue/issue-view/src/feature-flags.js"),v=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),E=e=>"FORGE_ENTITY_TYPE"===e.glanceType?(e=>({type:"forgeGlance",key:`forgeGlance__${e.appKey}__${e.moduleKey}`,payload:e}))(e):(e=>({type:"ecosystemGlance",key:`ecosystemGlance__${e.appKey}__${e.moduleKey}`,payload:e}))(e),k=e=>{switch(e.type){case"com.pyxis.greenhopper.jira:gh-epic-status":case"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":case"assignee":case"reporter":
case"description":case"environment":case"duedate":case"priority":case"labels":case"components":case"com.pyxis.greenhopper.jira:gh-sprint":case"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":case"com.pyxis.greenhopper.jira:gh-epic-link":case"fixVersions":case"versions":case"timetracking":case"timeoriginalestimate":case"com.atlassian.jira.plugin.system.customfieldtypes:labels":case"com.atlassian.jira.plugin.system.customfieldtypes:textfield":case"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":case"com.atlassian.jira.plugin.system.customfieldtypes:url":case"com.atlassian.jira.plugin.system.customfieldtypes:float":case"com.pyxis.greenhopper.jira:jsw-story-points":case"com.atlassian.jira.plugin.system.customfieldtypes:select":case"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":case"com.atlassian.jira.plugin.system.customfieldtypes:version":case"com.atlassian.jira.plugin.system.customfieldtypes:textarea":
case"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":case"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":case"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":case"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":case"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":case"com.atlassian.jira.plugin.system.customfieldtypes:people":case"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":case"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":case"com.atlassian.jira.plugin.system.customfieldtypes:datetime":case"com.atlassian.jira.plugin.system.customfieldtypes:atlassian-team":case"com.atlassian.teams:rm-teams-custom-field-team":case"com.atlassian.jpo:jpo-custom-field-parent":case"com.atlassian.jpo:jpo-custom-field-baseline-start":case"com.atlassian.jpo:jpo-custom-field-baseline-end":case"com.pyxis.greenhopper.jira:jsw-issue-color":case"com.atlassian.servicedesk:vp-origin":
case"com.atlassian.servicedesk.approvals-plugin:sd-approvals":case"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":case"com.atlassian.servicedesk:sd-request-participants":case"com.atlassian.servicedesk:sd-customer-organizations":case"number":case"string":case"option2":case"array":case"datetime":case"com.atlassian.servicedesk.assets-plugin:assetfield":case"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype":case"com.atlassian.jira.plugin.system.customfieldtypes:servicedesk-approvers-list":case"com.atlassian.jira.plugins.cmdb:cmdb-object-cftype":case"com.atlassian.servicedesk:sd-request-feedback":case"user":case"group-list":case"array-string":case"com.atlassian.jira.plugin.system.customfieldtypes:readonlyfield":case"com.atlassian.jira.plugin.system.customfieldtypes:project":case"com.atlassian.jira.toolkit:viewmessage":case"com.atlassian.jira.toolkit:message":case"forgeCustomField":return{type:e.type,key:`${e.type}__${e.id}`,payload:{
fieldId:e.id}};case"TAB":return{type:e.type,key:`${e.type}__${e.id}`,payload:{tabId:e.id}};case"KNOWLEDGE_BASE":case"SLA_PANEL":case"devSummary":case"releases":case"ASSET_ONBOARDING":return{type:e.type,key:e.type,payload:{itemId:e.id}};default:return null}};const w=e=>({applicationRoles:Object(j.isUseAppPermissionsFromTenantContextEnabled)()?[]:Object(y.a)(e),permissions:Object(y.h)(e),glances:Object(O.i)(e),visibleContentItems:Object(v.i)(e),requestContentItems:Object(v.g)(e),visibleContextItems:Object(v.j)(e),conditionallyVisibleContextItems:Object(v.a)(e)}),S=h()(f.a);var C=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),I=s("./node_modules/lodash/partition.js"),T=s.n(I);function P(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?P(Object(s),!0).forEach((function(t){x(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):P(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function x(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const D=(e,t)=>{const{primaryContextItems:s,secondaryContextItems:n}=e.context,a=n.filter((e=>e.type===t));if(a.length){const i=((e,t)=>e.filter((e=>e.type!==t)))(n,t),r=[...s,...a];return _(_({},e),{},{context:{primaryContextItems:r,secondaryContextItems:i}})}return e};var A=s("./node_modules/lodash/get.js"),L=s.n(A),M=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),R=s("./src/packages/issue/issue-view/src/selectors/status-selector.js");function N(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function F(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?N(Object(s),!0).forEach((function(t){U(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):N(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function U(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const V=e=>"com.atlassian.servicedesk:sd-request-feedback"===e.type,K=e=>"com.atlassian.servicedesk:sd-request-feedback"!==e.type;var W=(e,t)=>((e,t)=>{const{primaryContextItems:s}=e.context,n=s.slice().filter(K),a=s.find(V);if("DONE"===Object(R.a)(t)&&a){const e=a&&L()(a,"payload.fieldId"),s=e&&Object(M.u)(e,Object(M.s)(t));L()(s,"value",!1)&&n.unshift(a)}
return F(F({},e),{},{context:F(F({},e.context),{},{primaryContextItems:n})})})(e,t);function B(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function H(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?B(Object(s),!0).forEach((function(t){$(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):B(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const G=new Set(["releases"]),q=e=>{
const{context:{primaryContextItems:t},content:s}=e,[n,a]=T()(s.visibleContentItems,(e=>G.has(e.type))),[i,r]=s.requestPanelContentItems?T()(s.requestPanelContentItems,(e=>G.has(e.type))):[];return H(H({},e),{},{content:H(H({},s),{},{visibleContentItems:a,requestPanelContentItems:r}),context:H(H({},e.context),{},{primaryContextItems:[...t,...i||[],...n]})})},z=e=>D(e,"ecosystemGlance"),Y=e=>"com.atlassian.jira.plugin.system.customfieldtypes:select"===e.type||"description"===e.type||"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"===e.type,Q=(e,t)=>e.map((e=>t.some((t=>t(e)))?H(H({},e),{},{hasGlobalSpotlightTarget:!0}):e)),J=e=>{const{content:t,context:s}=e,{visibleContentItems:n,requestPanelContentItems:a}=t,{primaryContextItems:i,secondaryContextItems:r}=s,o=[Y];return H(H({},e),{},{content:H(H({},t),{},{visibleContentItems:Q(n,o),requestPanelContentItems:a&&Q(a,o)}),context:H(H({},s),{},{primaryContextItems:Q(i,o),secondaryContextItems:Q(r,o)})})},Z=e=>e.map(q)
;const X=e=>{switch(Object(C.F)(e)){case"service_desk":return(e=>({layoutDescriptor$:t})=>({layoutDescriptor$:Z(t).map((t=>Object(C.u)(e)?W(t,e):t)).map(z).map(J)}))(e);case"business":case"software":default:return o.a}};const ee=Object(m.a)(w),te=(e,t)=>{const s=ee(e),n=w(t);return l()(s,n)};var se=({locationTransformer:e,store:t})=>{const s=i.Observable.create((e=>{let s=t.getState();return e.next(s),t.subscribe((()=>{const n=t.getState();s!==n&&(s=n,e.next(s))}))})).distinctUntilChanged(te);return{layoutDescriptor$:e({layoutDescriptor$:(({state$:e})=>{const t=e.map(X).distinctUntilChanged();return({layoutDescriptor$:e})=>({layoutDescriptor$:t.map((t=>t({layoutDescriptor$:e}))).share().switchMap((e=>e.layoutDescriptor$))})})({state$:s})({layoutDescriptor$:(({state$:e})=>({layoutDescriptor$:e.map(w).map((e=>{const t=e.glances;return{context:{primaryContextItems:e.visibleContextItems.map(k).concat(t.map(E)).filter(S),
secondaryContextItems:e.conditionallyVisibleContextItems.map(k).filter(S)},content:{visibleContentItems:e.visibleContentItems.map(k).filter(S),requestPanelContentItems:e.requestContentItems&&e.requestContentItems.map(k).filter(S)}}}))}))({state$:s}).layoutDescriptor$}).layoutDescriptor$}).layoutDescriptor$}};const{Provider:ne,Consumer:ae}=Object(n.createContext)({layoutDescriptor:p});class ie extends n.Component{constructor(e){super(e),this.state={layoutDescriptor:p},this.onError=e=>{d.h.safeErrorWithoutCustomerData("issue.layout-descriptor.provider","Failed to create layout descriptor",new u.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))},this.getLayoutDescriptorObservable=(()=>{const{store:e,locationTransformer:t}=this.props,{layoutDescriptor$:s}=se({store:e,locationTransformer:t}),n=s.share();return()=>n})(),this.constructorSubscription=void 0,this.componentDidMountSubscription=void 0;const t=this.getLayoutDescriptorObservable()
;this.constructorSubscription=t.filter(((e,t)=>0===t)).subscribe((e=>{this.state={layoutDescriptor:e}}),this.onError)}componentDidMount(){const e=this.getLayoutDescriptorObservable();this.componentDidMountSubscription=e.subscribe((e=>{l()(this.state.layoutDescriptor,e)||this.setState({layoutDescriptor:e})}),this.onError),this.constructorSubscription.unsubscribe()}componentWillUnmount(){this.componentDidMountSubscription.unsubscribe()}render(){const{children:e}=this.props,{layoutDescriptor:t}=this.state;return a.a.createElement(ne,{value:{layoutDescriptor:t}},e)}}ie.displayName="Provider",ie.displayName="LayoutDescriptorProvider",ie.defaultProps={locationTransformer:o.a}},"./src/packages/issue/issue-view/src/media-feature-flags.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/issue/issue-view/src/feature-flags.js");const a=()=>({newCardExperience:Object(n.isNewCardExperience)(),zipPreviews:Object(n.isZipPreviewEnabled)(),
folderUploads:Object(n.isFolderUploadsEnabled)(),codeViewer:Object(n.isCodeViewerEnabled)(),poll_intervalMs:Object(n.getClientPollingIntervalMs)(),poll_maxAttempts:Object(n.getClientPollingMaxAttempts)(),poll_backoffFactor:Object(n.getClientPollingBackoffFactor)(),poll_maxIntervalMs:Object(n.getClientPollingMaxIntervalMs)(),poll_maxGlobalFailures:Object(n.getClientPollingMaxGlobalFailures)()})},"./src/packages/issue/issue-view/src/model/change-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));const n="FIELD_CHANGE_REQUESTED",a="FIELD_CHANGED",i="FIELD_CHANGE_FAILED",r="ISSUE_TYPE_CHANGED",o="ISSUE_RELATIONSHIP_UPDATED",c="ISSUE_LINKS_CREATED",l="ISSUE_LINK_DELETED",u="CHILD_ISSUE_ADDED",d="ISSUE_CHILDREN_ORDER_CHANGED",p={[n]:n,[i]:i,[a]:a,[r]:r,[o]:o,[c]:c,[l]:l,[u]:u,[d]:d}},"./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o}))
;var n=s("./src/packages/issue/issue-view/src/feature-flags.js");function a(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?a(Object(s),!0).forEach((function(t){r(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):a(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const o={actions:[],glances:[],panels:[],activities:[],customFields:[],customFieldTypes:[],activeAction:null,panelsKeys:{newPanels:[],collapsedPanels:[]}};t.a=(e=o,t)=>{switch(t.type){case"FETCH_FORGE_SUCCESS":return i(i({},e),{},{
actions:t.payload.issueAction,glances:t.payload.issueGlance,panels:t.payload.issuePanel,activities:t.payload.issueActivity,customFields:t.payload.customField,customFieldTypes:Object(n.isCustomFieldTypesEnabled)()?t.payload.customFieldType:[],activeAction:null,panelsKeys:i(i({},e.panelsKeys),{},{newPanels:[]})});case"FORGE_ISSUE_ACTION_EXEC":return i(i({},e),{},{activeAction:{action:t.payload,isLoading:!0}});case"FORGE_ISSUE_ACTION_RENDERED":return i(i({},e),{},{activeAction:i(i({},e.activeAction),{},{isLoading:!1})});case"FORGE_ISSUE_ACTION_CLOSE":return i(i({},e),{},{activeAction:null});case"FORGE_ISSUE_PANEL_ADDED":return i(i({},e),{},{panelsKeys:i(i({},e.panelsKeys),{},{newPanels:[...e.panelsKeys.newPanels,t.payload]})});case"FORGE_NEW_ISSUE_PANEL_UNTRACK":{const s=t.payload,{panelsKeys:n}=e;return i(i({},e),{},{panelsKeys:i(i({},n),{},{newPanels:n.newPanels.filter((e=>e!==s))})})}case"FORGE_ISSUE_PANEL_REMOVED":{const s=t.payload;return i(i({},e),{},{panelsKeys:{
newPanels:e.panelsKeys.newPanels.filter((e=>e!==s)),collapsedPanels:e.panelsKeys.collapsedPanels.filter((e=>e!==s))}})}case"FORGE_ISSUE_PANEL_UPDATED":{const{panelKey:s,collapsed:n}=t.payload,a=n?Array.from(new Set([...e.panelsKeys.collapsedPanels,s])):e.panelsKeys.collapsedPanels.filter((e=>e!==s));return i(i({},e),{},{panelsKeys:i(i({},e.panelsKeys),{},{collapsedPanels:a})})}case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{var s;const n=(null===(s=t.payload.forgeIssueProperties)||void 0===s?void 0:s.collapsedPanels)||[];return i(i({},e),{},{panelsKeys:i(i({},e.panelsKeys),{},{collapsedPanels:Array.from(new Set([...e.panelsKeys.collapsedPanels,...n]))})})}default:return e}}},"./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.H,(e=>e.activityFeed)),r=Object(n.createSelector)(i,(e=>e.selectedActivityItem)),o=Object(n.createSelector)(i,(e=>e.selectedActivitySortOrder))},"./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return S}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/camelCase.js"),i=s.n(a),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),o=s("./src/packages/platform/utils/constants/src/board-types.js"),c=s("./src/packages/platform/utils/constants/src/project-types.js"),l=s("./src/packages/platform/utils/constants/src/status-categories.js"),u=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const f=Object(n.createSelector)(Object(p.q)("servicedesk-practices"),(e=>{if(e&&e.value&&e.value.length>0)return e.value[0]}))
;var g=s("./src/packages/issue/issue-view/src/selectors/status-selector.js");function h(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function y(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?h(Object(s),!0).forEach((function(t){O(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function O(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const j=e=>Object(u.i)(...c.f)(e),v=e=>Object(u.i)(...c.c)(e),E=e=>Object(u.i)(...o.a)(e),k=e=>Object(u.i)(...l.STATUS_CATEGORIES)(e),w=Object(n.createSelector)(Object(p.q)("assignee"),(e=>e&&e.value?e.value.accountId:null)),S=Object(n.createSelector)(d.b,m.l,m.C,m.F,m.u,b.f,g.a,d.h,d.g,m.C,d.w,w,f,((e,t,s,n,a,o,c,d,p,m,b,f,g)=>{const h={};return e&&(h.analyticsSource=e),"serviceDesk"===j(i()(n)).value&&g&&(h.itsmPractice=g),{containerType:Object(u.i)("project")("project"),containerId:m,objectType:Object(u.i)("issue")("issue"),objectId:new r.a(b),attributes:y(y({},h),{},{designVersion:Object(u.i)("v2-bento")("v2-bento"),projectId:s,issueId:t,projectConfig:v(a?"next-gen":"classic"),projectType:j(i()(n)),nextGenProject:Boolean(a),statusCategory:k(c),statusCategoryId:c?Object(l.categoryIdForStatusCategory)(c):null,issueTypeId:o,boardType:E(d),boardId:p,assigneeId:f?Object(u.i)(f)(f):f})}}))},
"./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const r=Object(n.createSelector)(i.H,(e=>e.assignIssueParentModal.isOpen)),o=Object(n.createSelector)(a.k,i.A,((e,t)=>[{id:e.issueId,key:e.issueKey,parentId:t&&t.id}]))},"./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/selectors/attachment-selector.js")
;const i=Object(n.createSelector)(a.a,(e=>e.picker)),r=Object(n.createSelector)(i,(e=>e.attachments||e.uploadedAttachments)),o=Object(n.createSelector)(i,(e=>e.isPopupOpen)),c=e=>Object(n.createSelector)(r,(t=>t[e]))},"./src/packages/issue/issue-view/src/selectors/attachment-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const r=Object(n.createSelector)(i.h,(e=>e.canCreateAttachments)),o=Object(n.createSelector)(a.H,(e=>e.attachments))},"./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return l})),s.d(t,"c",(function(){return v})),s.d(t,"h",(function(){return E})),s.d(t,"i",(function(){return k})),s.d(t,"b",(function(){return w})),
s.d(t,"g",(function(){return S})),s.d(t,"f",(function(){return C})),s.d(t,"e",(function(){return I})),s.d(t,"d",(function(){return T}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/configurations.js");const c=(e,t)=>`${e?e.replace(/\/?$/,"/"):"/"}browse/${t}`,l=(e,t)=>`${window.location.protocol}//${window.location.host}${c(e,t)}`,u=Object(i.q)("issuetype"),d=Object(i.q)("parent"),p=Object(i.q)("epic"),m=Object(i.q)(o.a),b=Object(n.createSelector)(p,a.f,((e,t)=>((e,t)=>e&&void 0!==t?{summary:e.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e&&e.value,t))),f=Object(n.createSelector)(m,a.f,((e,t)=>((e,t)=>e&&e.data?{
summary:e.data.summary,key:e.data.key,url:c(t,e.data.key),issueTypeName:e.data.issueTypeName||"",issueTypeIconUrl:e.data.issueTypeIconUrl||""}:null)(e&&e.value,t))),g=Object(n.createSelector)(d,a.f,((e,t)=>((e,t)=>e?{summary:e.fields.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""}:null)(e&&e.value,t))),h=Object(n.createSelector)(r.A,a.f,((e,t)=>((e,t)=>e?{summary:e.summary,key:e.key,url:c(t,e.key),issueTypeName:e.issueTypeName||"",issueTypeIconUrl:e.issueTypeIconUrl||""
}:null)(e,t))),y=Object(n.createSelector)(h,g,f,((e,t,s)=>e||t||s)),O=Object(n.createSelector)(b,h,((e,t)=>[e,t].filter((e=>e)))),j=Object(n.createSelector)(b,y,((e,t)=>[e,t].filter((e=>e)))),v=e=>e?O:j,E=Object(n.createSelector)(u,(e=>e&&e.value)),k=Object(n.createSelector)(a.f,a.x,c),w=Object(n.createSelector)(a.f,a.x,l),S=Object(n.createSelector)(E,(e=>e&&e.name)),C=Object(n.createSelector)(E,(e=>e&&e.id)),I=Object(n.createSelector)(E,(e=>e&&e.iconUrl)),T=Object(n.createSelector)(u,(e=>e&&Boolean(e.editable)))},"./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u})),s.d(t,"c",(function(){return d})),s.d(t,"b",(function(){return p}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./node_modules/lodash/isNil.js"),o=s.n(r),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const u=Object(n.createSelector)(l.f,(e=>e.cardCover)),d=Object(n.createSelector)(u,(e=>e&&e.isEnabled)),p=(Object(n.createSelector)(u,(e=>e&&(!o()(e.attachmentId)||!i()(e.availableAttachmentIds)))),Object(n.createSelector)(c.v,(e=>!!e&&e.includes("cardCoverActions"))))},"./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return b})),s.d(t,"d",(function(){return f})),s.d(t,"b",(function(){return g})),s.d(t,"a",(function(){return h}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),i=s("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),c=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");var l=s("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js"),u=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js")
;const d=Object(n.createSelector)(o.H,(e=>e.changeboarding)),p=["core-issue","full-issue","software-issue","software-backlog-issue"],m=[a.a.FULL_ISSUE,a.a.SERVICEDESK_QUEUES_ISSUE,a.a.SERVICEDESK_REPORTS_ISSUE],b=Object(n.createSelector)(r.b,u.a,o.u,((e,t,s)=>p.includes(null==e?void 0:e.value)&&!t&&!s)),f=Object(n.createSelector)(r.b,u.a,o.u,((e,t,s)=>m.includes(null==e?void 0:e.value)&&!t&&!s)),g=(Object(n.createSelector)(b,d,(e=>{const{firstActivationDateMs:t}=e.context;return(e=>null!=e&&e<15357276e5)(t)}),(()=>Object(i.a)()<7),l.a,u.a,((e,t,s,n,a,i)=>e&&t.isBannerVisible&&s&&n&&!a&&!i)),Object(n.createSelector)(d,(e=>e.isTourActive)),Object(n.createSelector)(d,(e=>e.isBannerDismissed))),h=Object(n.createSelector)(c.j,(e=>e.some((e=>"assignee"===e.id))))},"./src/packages/issue/issue-view/src/selectors/children-issues-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.f,(e=>e.childrenIssues))},"./src/packages/issue/issue-view/src/selectors/comment-selector.js":function(e,t,s){"use strict";s.d(t,"t",(function(){return y})),s.d(t,"K",(function(){return O})),s.d(t,"J",(function(){return j})),s.d(t,"F",(function(){return v})),s.d(t,"E",(function(){return E})),s.d(t,"v",(function(){return k})),s.d(t,"G",(function(){return C})),s.d(t,"a",(function(){return I})),s.d(t,"e",(function(){return L})),s.d(t,"q",(function(){return M})),s.d(t,"i",(function(){return R})),s.d(t,"l",(function(){return N})),s.d(t,"j",(function(){return F})),s.d(t,"f",(function(){return U})),s.d(t,"g",(function(){return V})),s.d(t,"r",(function(){return K})),s.d(t,"h",(function(){return W})),s.d(t,"H",(function(){return B})),s.d(t,"o",(function(){return H})),s.d(t,"p",(function(){return $})),s.d(t,"m",(function(){
return G})),s.d(t,"s",(function(){return q})),s.d(t,"k",(function(){return z})),s.d(t,"D",(function(){return Y})),s.d(t,"C",(function(){return Q})),s.d(t,"b",(function(){return J})),s.d(t,"c",(function(){return Z})),s.d(t,"d",(function(){return X})),s.d(t,"L",(function(){return ee})),s.d(t,"I",(function(){return te})),s.d(t,"B",(function(){return se})),s.d(t,"u",(function(){return ne})),s.d(t,"n",(function(){return ae})),s.d(t,"A",(function(){return ie})),s.d(t,"w",(function(){return re})),s.d(t,"y",(function(){return oe})),s.d(t,"x",(function(){return ce})),s.d(t,"z",(function(){return le}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/values.js"),i=s.n(a),r=s("./node_modules/date-fns--current/compare_asc/index.js"),o=s.n(r),c=s("./node_modules/date-fns--current/compare_desc/index.js"),l=s.n(c),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),m=s("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){g(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const h=Object(n.createSelector)(d.H,(e=>e.comments.pendingDeletedIds)),y=Object(n.createSelector)(d.f,(e=>e.comments)),O=Object(n.createSelector)(d.f,(e=>e.totalComments)),j=Object(n.createSelector)(d.f,(e=>e.commentsStartIndex)),v=Object(n.createSelector)(d.f,(e=>e.loadedComments)),E=Object(n.createSelector)(d.H,(e=>e.comments.isLoadingMoreComments)),k=Object(n.createSelector)(d.H,(e=>e.comments.hasScrolledPermalinkComment)),w=Object(n.createSelector)(d.H,(e=>e.comments.pendingSavedValues)),S=Object(n.createSelector)(d.H,(e=>e.comments.deleteModalCommentId)),C=Object(n.createSelector)(d.H,(e=>e.comments.loadingStage)),I=Object(n.createSelector)(y,w,((e,t)=>f(f({},e),t))),T=e=>Object(n.createSelector)(I,(t=>t[e])),P=e=>Object(n.createSelector)(T(e),u.a,((e,t)=>null!==t&&t===(e&&e.authorId))),_=(e,t)=>Object(n.createSelector)(T(e),d.k,((e,s)=>e&&e[t]?s(e[t]):null)),x=Object(n.createSelector)(d.H,(e=>e&&e.comments||null)),D=Object(n.createSelector)(x,(e=>e&&e.commentEditors||null)),A=e=>Object(n.createSelector)(D,(t=>t&&t[e]||null)),L=e=>_(e,"authorId"),M=e=>_(e,"updateAuthorId"),R=e=>Object(n.createSelector)(A(e),(e=>e&&e.editingValue||null)),N=e=>Object(n.createSelector)(A(e),(e=>e&&e.visibility||null)),F=e=>Object(n.createSelector)(R(e),T(e),((e,t)=>e||t&&t.bodyAdf||null)),U=e=>Object(n.createSelector)(T(e),(e=>e?e.bodyHtml:null)),V=e=>Object(n.createSelector)(T(e),(e=>e?e.createdDate:null)),K=e=>Object(n.createSelector)(T(e),(e=>e?e.updatedDate:null)),W=e=>Object(n.createSelector)(T(e),(e=>e?e.edited:null)),B=e=>Object(n.createSelector)(w,(t=>t[e])),H=e=>Object(n.createSelector)(B(e),(e=>!!e)),$=e=>Object(n.createSelector)(B(e),(e=>!(!e||!e.hasSaveFailed))),G=e=>Object(n.createSelector)(S,(t=>t===e)),q=e=>Object(n.createSelector)(T(e),(e=>e?e.visibility:null)),z=e=>Object(n.createSelector)(N(e),q(e),((e,t)=>e||t)),Y=e=>Object(n.createSelector)(u.s,(e=>Object(n.createSelector)(T(e),(e=>!!e&&e.isInternal)))(e),((e,t)=>e&&t)),Q=e=>Object(n.createSelector)(A(e),(e=>{
var t;return null===(t=null==e?void 0:e.isInternal)||void 0===t||t})),J=Object(n.createSelector)(p.h,(e=>e.canAddComments)),Z=e=>Object(n.createSelector)(p.h,P(e),((e,t)=>e.canDeleteAllComments||e.canDeleteOwnComments&&t)),X=e=>Object(n.createSelector)(p.h,P(e),((e,t)=>e.canEditAllComments||e.canEditOwnComments&&t)),ee=Object(n.createSelector)(I,h,((e,t)=>Object.keys(e).filter((e=>!t.includes(e))).map((t=>({id:t,createdDate:new Date(e[t].createdDate)}))).sort(((e,t)=>o()(e.createdDate,t.createdDate))).map((e=>e.id)))),te=Object(n.createSelector)(m.b,I,h,((e,t,s)=>Object.keys(t).filter((e=>!s.includes(e))).map((e=>({id:e,createdDate:new Date(t[e].createdDate)
}))).sort(((t,s)=>"OLDEST_FIRST"===e?o()(t.createdDate,s.createdDate):l()(t.createdDate,s.createdDate))).map((e=>e.id)))),se=e=>Object(n.createSelector)(A(e),(e=>!!e&&e.isEditing)),ne=Object(n.createSelector)(ee,(e=>e),((e,t)=>e.filter((e=>se(e)(t))))),ae=Object(n.createSelector)(y,(e=>e?Object.keys(e).filter((t=>"object"==typeof e[t])):[])),ie=Object(n.createSelector)(ae,(e=>e),((e,t)=>e.some((e=>se(e)(t))))),re=Object(n.createSelector)(d.H,(e=>e.comments.addCommentEditorExpand||!1)),oe=Object(n.createSelector)(re,D,((e,t)=>e||!!t&&i()(t).some((e=>e.isEditing)))),ce=Object(n.createSelector)(d.H,(e=>e.comments.isCommentAttachmentInProgress)),le=Object(n.createSelector)(d.u,d.F,((e,t)=>!e&&("business"===t||"software"===t)))},"./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return u}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),r=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const o=Object(n.createSelector)(a.f,(e=>e.confluenceAppLinks||[])),c=Object(n.createSelector)(o,(e=>e.length)),l=Object(n.createSelector)(o,(e=>e&&e.length>0)),u=Object(n.createSelector)(l,i.c,r.d,((e,t,s)=>e&&t&&s))},"./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"e",(function(){return l})),s.d(t,"f",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return b})),s.d(t,"h",(function(){return f})),s.d(t,"j",(function(){return g})),s.d(t,"g",(function(){return h})),s.d(t,"i",(function(){return y}))
;var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.f,(e=>e.confluencePages)),r=Object(n.createSelector)(i,(e=>e.createLinkedPage)),o=Object(n.createSelector)(r,(e=>e.errorMessage)),c=Object(n.createSelector)(r,(e=>e.isInvalid)),l=Object(n.createSelector)(r,(e=>e.isLoading)),u=Object(n.createSelector)(r,(e=>e.clickedCount>0)),d=Object(n.createSelector)(r,(e=>e.clickedCount)),p=Object(n.createSelector)(i,(e=>e&&e.linkedPages)),m=Object(n.createSelector)(i,(e=>e&&e.mentionedPages)),b=Object(n.createSelector)(i,(e=>!(!e||!e.isLinkingEnabled))),f=Object(n.createSelector)(p,(e=>e&&e.pages)),g=Object(n.createSelector)(m,(e=>e&&e.pages)),h=Object(n.createSelector)(p,(e=>e&&e.pageCount)),y=Object(n.createSelector)(m,(e=>e&&e.pageCount))},"./src/packages/issue/issue-view/src/selectors/context-panel-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),
s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.H,(e=>e.contextPanel)),r=Object(n.createSelector)(i,(e=>e&&e.isContextPanelOpen)),o=Object(n.createSelector)(i,(e=>e&&e.contextPanelItem))},"./src/packages/issue/issue-view/src/selectors/drafts/selectors.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.H,(e=>e.drafts)),r=e=>Object(n.createSelector)(i,(t=>!!t[e]))},"./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const i=Object(n.createSelector)(a.H,(e=>e.ecosystem&&e.ecosystem.glance))},"./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"e",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"d",(function(){return l}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const i=Object(n.createSelector)(a.h,(e=>e.canCloneIssue)),r=Object(n.createSelector)(a.h,(e=>e.canDeleteIssue)),o=Object(n.createSelector)(a.h,(e=>e.canMoveIssue)),c=Object(n.createSelector)(a.h,(e=>e.canEditIssues)),l=(Object(n.createSelector)(a.h,(e=>e.canAdministerJira||e.canAdministerProject)),Object(n.createSelector)(a.h,(e=>e.canAssignIssues)),Object(n.createSelector)(a.h,(e=>e.canLinkIssues)))},"./src/packages/issue/issue-view/src/selectors/issue-links-selector.js":function(e,t,s){
"use strict";s.d(t,"e",(function(){return f})),s.d(t,"k",(function(){return h})),s.d(t,"i",(function(){return y})),s.d(t,"g",(function(){return j})),s.d(t,"d",(function(){return v})),s.d(t,"b",(function(){return E})),s.d(t,"c",(function(){return w})),s.d(t,"f",(function(){return S})),s.d(t,"h",(function(){return C})),s.d(t,"j",(function(){return I})),s.d(t,"l",(function(){return T})),s.d(t,"a",(function(){return P}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./node_modules/lodash/pickBy.js"),o=s.n(r),c=s("./node_modules/lodash/toArray.js"),l=s.n(c),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");function d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function p(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?d(Object(s),!0).forEach((function(t){m(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function m(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const b=Object(n.createSelector)(u.f,(e=>e.issueLinks)),f=Object(n.createSelector)(b,(e=>!!e)),g=Object(n.createSelector)(b,(e=>e&&e.issueLinks)),h=e=>e.entities.remoteIssueLinks.remoteIssues,y=Object(n.createSelector)(g,(e=>e&&o()(e,(e=>e.isOptimistic)))),O=Object(n.createSelector)(b,(e=>e&&e.linkedIssues)),j=Object(n.createSelector)(b,(e=>e?e.linkedIssueKeys:[])),v=(Object(n.createSelector)(g,(e=>!i()(e))),
Object(n.createSelector)(g,h,((e,t)=>!i()(e)||!i()(t)))),E=Object(n.createSelector)(j,h,((e,t)=>e.length+t.length)),k=Object(n.createSelector)(g,O,((e,t)=>i()(e)?null:l()(e).filter((e=>!e.isDeleted)).map((e=>p(p({},e),{},{linkedIssue:t[e.linkedIssueKey]}))).reduce(((e,t)=>Object.assign(e,{[t.typeName]:[...e[t.typeName]||[],t]})),{}))),w=Object(n.createSelector)(k,h,((e,t)=>{if(null==e&&0===t.length)return null;const s=e=>({id:e.remoteIssueId,issueKey:e.issueKey,issueLink:e.issueLinkUrl,issueSummary:e.summary,issueTypeIconUrl:e.iconUrl});return t.reduce(((e,t)=>{const{issueDetails:n,relationship:a,id:i,issueKey:r,issueLinkUrl:o,remoteIssueLinkError:c,globalId:l,isSaved:u,isLoading:d,isOptimistic:m,hasError:b,isDeleted:f}=t;return null==a||f?e:p(p({},e),{},{[a]:[...e[a]||[],{id:i.toString(),direction:"OUTWARD",typeName:a,linkedIssueKey:r,linkedIssue:n||s(t),isRemote:!0,globalId:l,remoteServerHostname:new URL(o).hostname,remoteIssueLinkError:c,isSaved:u,isLoading:d,isOptimistic:m,
hasError:b}]})}),p({},e))})),S=e=>Object(n.createSelector)(g,(t=>t&&t[e]||null)),C=e=>Object(n.createSelector)(O,(t=>t&&t[e]||null)),I=Object(n.createSelector)(b,(e=>e&&e.quickAddClicked)),T=Object(n.createSelector)(I,(e=>!!e)),P=Object(n.createSelector)(b,(e=>e&&e.canCreateLinkedIssue))},"./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),r=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js");const o=Object(n.createSelector)(a.f,(e=>e.jiraSettings.issueLinkTypes)),c=Object(n.createSelector)(i.h,r.e,o,(({canLinkIssues:e},t,s)=>!!(e&&t&&s&&s.length)))},
"./src/packages/issue/issue-view/src/selectors/issue-remote-data-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.f,(e=>e.issueRemoteData)),r=Object(n.createSelector)(i,(e=>e.isLoadingComplete))},"./src/packages/issue/issue-view/src/selectors/issue-types-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return c})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/lodash/isEmpty.js"),i=s.n(a),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),o=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js")
;const c=Object(n.createSelector)(r.f,(e=>e.issueTypes)),l=["summary","issuetype","parent","project"],u=e=>!!Object.keys(e).find((t=>!(e=>l.find((t=>e===t)))(t)&&!e[t].hasDefaultValue&&e[t].required)),d=e=>i()(e.fields)||u(e.fields),p=Object(n.createSelector)(c,o.h,r.q,((e,t,s)=>{const n=s&&t&&t.id;return e.filter((e=>!e.subtask&&e.id!==n))})),m=Object(n.createSelector)(r.H,(e=>e.fetchIssueTypesStatus))},"./src/packages/issue/issue-view/src/selectors/project-selector.js":function(e,t,s){"use strict";s.d(t,"e",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"c",(function(){return d}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js")
;const i=Object(n.createSelector)(a.f,(e=>e.project)),r=Object(n.createSelector)(i,(e=>e?e.projectName:null)),o=Object(n.createSelector)(i,(e=>e?e.avatarUrl:null)),c=Object(n.createSelector)(i,(e=>e?e.issueTypeHierarchy:null)),l=Object(n.createSelector)(c,(e=>e?e.baseLevelId:null)),u=Object(n.createSelector)(c,(e=>e?e.levels:{})),d=Object(n.createSelector)(l,u,((e,t)=>{const s=[];if(!e||!t)return s;const n=t[e];if(!n)return s;let a=n.belowLevelId?t[n.belowLevelId]:void 0;for(;void 0!==a;)s.push(a),a=a.belowLevelId?t[a.belowLevelId]:void 0;return s}))},"./src/packages/issue/issue-view/src/selectors/share-as-comment-selector.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i})),s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js");const a=e=>e.shareAsComment,i=Object(n.createSelector)(a,(e=>e.value)),r=Object(n.createSelector)(a,(e=>e.timestamp))},"./src/packages/issue/issue-view/src/selectors/status-selector.js":function(e,t,s){"use strict"
;s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/platform/utils/constants/src/status-categories.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const r=Object(n.createSelector)(Object(i.o)("status"),(e=>e?Object(a.statusCategoryForId)(e.statusCategory.id):null))},"./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js");const i=Object(n.createSelector)(a.d,(e=>e.filter((e=>e.subtask)))),r=Object(n.createSelector)(i,(e=>e.length>=1)),o=Object(n.createSelector)(i,(e=>!!e.find(a.b)))},"./src/packages/issue/issue-view/src/selectors/subtasks-selector.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return u})),
s.d(t,"d",(function(){return d})),s.d(t,"b",(function(){return p})),s.d(t,"a",(function(){return f}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),o=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const c=Object(n.createSelector)((e=>e.validators),(e=>{const t=e.projectHasSubtaskValidators;return(e=>"LOADED"===e.status&&e.value)(t)||(e=>"LOADING"===e.status||"FAILED"===e.status)(t)}));var l=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js")
;const u=Object(n.createSelector)(o.h,(e=>!(!e||!e.subtask))),d=Object(n.createSelector)(i.f,(e=>e.subtasks)),p=Object(n.createSelector)(d,(e=>e.length>0)),m=Object(n.createSelector)(l.a,c,((e,t)=>e||t)),b=Object(n.createSelector)(i.f,(({jiraSettings:e})=>e.subtasksConfiguration.enabled)),f=Object(n.createSelector)(r.h,u,l.b,m,a.r,a.o,a.s,i.u,b,(({canCreateSubtask:e},t,s,n,a,i,r,o,c)=>!(!e||t||!s||!!n&&(a||i)||!(!r||!o)||!c)))},"./src/packages/issue/issue-view/src/selectors/tab-selector.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"c",(function(){return b})),s.d(t,"b",(function(){return f}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js"),r=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");function o(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u=Object(n.createSelector)(r.d,(e=>e&&e.tabs||{})),d=e=>Object(n.createSelector)(u,(t=>Boolean(Object.keys(t).find((s=>t[s].items.find((t=>t.id===e))))))),p=(e,t)=>t,m=(e,t)=>{if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){const s=t;return e.map((e=>e.id)).sort().join("")===s.map((e=>e.id)).sort().join("")}return!1},b=()=>{
const e=Object(a.a)(((e,t)=>c(c({},e),{},{items:t})),m);return Object(n.createSelector)((()=>Object(n.createSelector)(u,p,((e,t)=>e[t]||null)))(),(e=>e),((t,s)=>{if(!t)return null;const n=t.items.filter((({id:e})=>!!Object(i.c)(e,s)));return n.length>0?e(t,n):null}))},f=(e,t)=>{if(!t)return!1;return!!b()(e,t)}},"./src/packages/issue/issue-view/src/selectors/ui-config-selector.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const i=Object(n.createSelector)(a.H,(e=>e.uiConfig)),r=Object(n.createSelector)(i,(e=>Boolean(e&&e.newIssueViewLockedIn)))},"./src/packages/issue/issue-view/src/selectors/web-links-selector.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return o})),s.d(t,"d",(function(){return c})),s.d(t,"a",(function(){return l})),s.d(t,"e",(function(){return u})),s.d(t,"b",(function(){return d})),s.d(t,"c",(function(){
return p}));var n=s("./node_modules/reselect/lib/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const r=Object(n.createSelector)(a.f,(e=>e.webLinks)),o=Object(n.createSelector)(r,(e=>e.links.filter((e=>void 0===e.isDeleting||!0!==e.isDeleting)))),c=e=>Object(n.createSelector)(o,(t=>t.find((t=>t.id===e)))),l=Object(n.createSelector)(r,i.h,((e,t)=>!0===e.isLinkingEnabled&&t.canLinkIssues)),u=Object(n.createSelector)(r,(e=>e.linkCount)),d=Object(n.createSelector)(r,(e=>e.createClickCount)),p=Object(n.createSelector)(d,(e=>e>0))},"./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return i}));var n=s("./src/packages/platform/utils/fetch/src/utils/errors.js");const a=[400,403,401,404,409,412],i=e=>e>=400&&e<=499&&429!==e;t.a=e=>{if(e instanceof n.a)return!1
;return!(e instanceof n.b&&e.statusCode&&(e=>a.some((t=>t===e)))(e.statusCode))&&("TypeError"!==e.name&&"AbortError"!==e.name)}},"./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./src/packages/platform/utils/fetch/src/utils/errors.js");class a extends Error{constructor(e,t){if(e instanceof a)return e;super(e.message),this.endpoint=void 0,this.traceId=void 0,this.error=void 0,this.statusCode=void 0,this.error=e,this.message=e.message,e instanceof n.b&&(null!=e.traceId&&(this.traceId=e.traceId),this.statusCode=e.statusCode),this.endpoint=t}}},"./src/packages/issue/issue-view/src/utils/performance-analytics/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return i}));var n=s("./node_modules/@atlassian/browser-metrics/dist/es2019/factory/index.js");const a=n.a.custom({key:"issue-view-load",virtual:!0,timings:[{key:"preview",startMark:"metrics_init",
endMark:"ISSUE_PREVIEW_RENDERED"},{key:"startDataFetch",startMark:"ISSUE_START_FETCHING_DATA",endMark:"ISSUE_FETCHED_MARK"}]}),i=n.a.custom({key:"embedded-issue-view-load",until:a,include:[a]});n.a.pageLoad({key:"service-management.queues.issue"}),n.a.pageLoad({key:"service-management.reports.issue"})},"./src/packages/issue/issue-view/src/utils/prefetched-resources/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m})),s.d(t,"b",(function(){return b}))
;var n=s("./node_modules/react/index.js"),a=s("./node_modules/react-resource-router/build/esm/index.js"),i=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-user-auth/index.js"),r=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-upload-permissions/index.js"),o=s("./src/packages/routes/src/ui/spa/issue/resources/issue-media-read-permissions/index.js"),c=s("./src/packages/routes/src/ui/spa/issue/resources/issue-gira-data/index.js"),l=s("./src/packages/routes/src/ui/spa/issue/resources/issue-graphql-data/index.js"),u=s("./src/packages/routes/src/ui/spa/issue/resources/issue-forge-data/index.js"),d=s("./src/packages/issue/issue-view/src/utils/prefetched-resources/prefetched-resource-manager/index.js");let p;const m=()=>{const e=(()=>{var e;return p=null!==(e=p)&&void 0!==e?e:new d.a,p
})(),{data:t,promise:s}=Object(a.o)(i.a),{data:m,promise:b}=Object(a.o)(r.a),{data:f,promise:g}=Object(a.o)(o.a),{data:h,promise:y}=Object(a.o)(c.a),{data:O,promise:j}=Object(a.o)(l.a),{promise:v}=Object(a.o)(u.a);return Object(n.useMemo)((()=>{y&&j&&(e.setAllPromises({mediaUserAuthPromise:s,mediaUploadPermissionPromise:b,mediaReadPermissionPromise:g,issueGiraDataPromise:y,issueGraphqlDataPromise:j}),e.setAllData({mediaUserAuth:t,mediaUploadPermission:m,mediaReadPermission:f,issueGiraData:h,issueGraphqlData:O})),v&&e.setForgePromise(v)}),[v,h,y,O,j,f,g,m,b,t,s,e]),[e]},b=()=>{const e=[Object(a.o)(c.a),Object(a.o)(l.a)];return{loading:e.some((({loading:e})=>e)),error:e.map((({error:e})=>e)).find(Boolean)||null,promise:Promise.all(e.map((({promise:e})=>e))).then((()=>{}))}}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/prefetched-resource-manager/index.js":function(e,t,s){"use strict";t.a=class{constructor(){this.issueMediaUserAuth=null,
this.issueMediaReadPermission=null,this.issueMediaUploadPermission=null,this.issueGiraData=null,this.issueGraphqlData=null,this.issueForgeData=null,this.allData={},this.getGiraData=()=>this.allData.issueGiraData&&this.allData.issueGiraData.data,this.getGqlData=()=>this.allData.issueGraphqlData&&this.allData.issueGraphqlData.data,this.getMediaUser=()=>this.allData.mediaUserAuth,this.getMediaReadPermission=()=>this.allData.mediaReadPermission,this.getMediaUploadPermission=()=>this.allData.mediaUploadPermission,this.isAllDataReady=()=>!(!this.getGiraData()||!this.getGqlData()),this.containsInitialPromises=()=>!!(this.issueMediaUploadPermission&&this.issueMediaUserAuth&&this.issueMediaReadPermission&&this.issueGiraData&&this.issueGraphqlData)}setAllData(e){this.allData=e}setAllPromises(e){this.issueMediaUserAuth=e.mediaUserAuthPromise,this.issueMediaUploadPermission=e.mediaUploadPermissionPromise,this.issueMediaReadPermission=e.mediaReadPermissionPromise,
this.issueGiraData=e.issueGiraDataPromise,this.issueGraphqlData=e.issueGraphqlDataPromise}setForgePromise(e){this.issueForgeData=e}getAllPromises(){return[this.issueMediaUserAuth,this.issueMediaUploadPermission,this.issueMediaReadPermission,this.issueGiraData,this.issueGraphqlData]}clearAll(){this.allData={},this.issueMediaReadPermission=null,this.issueMediaUploadPermission=null,this.issueMediaUserAuth=null,this.issueGiraData=null,this.issueForgeData=null,this.issueGraphqlData=null}}},"./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("./node_modules/rxjs/Rx.js");const a=(e,t)=>e?n.Observable.fromPromise(e).catch(t):t()},"./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),o=s("./src/packages/assign-issue-parent-modal/src/async.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),l=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/feature-flags.js"),m=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),b=s("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js");function f(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a
}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const g=Object(r.f)((()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("vendor~f9ca8911"),s.e("async-assign-issue-parent-modal")]).then(s.bind(null,"./src/packages/assign-issue-parent-modal/src/index.js"))),{moduleId:"./src/packages/assign-issue-parent-modal/src/index.js"}),h=e=>{let{isOpen:t}=e,s=f(e,["isOpen"]);return a.a.createElement(c.f,null,t&&a.a.createElement(o.a,{packageName:"issue"},a.a.createElement(g,s)))};h.displayName="ModalWithTransition",t.a=Object(i.connect)((e=>{const t=Object(u.b)(e);return{isOpen:Object(b.b)(e),issues:Object(b.a)(e),issueParents:Object(d.B)(e),issueHierarchyLevel:Object(p.collapsedHierarchies)()?Object(m.b)(e):Object(m.f)(e),issueParentTypeIds:Object(m.g)(e),shouldHideUnassignOption:Object(m.e)(e),parentIssueTypeName:Object(m.h)(e)[0],
baseUrl:Object(u.f)(e),projectId:Object(d.C)(e),analyticsSource:`issue-view (${t?t.toString():"undefined"})`}}),(e=>({onClose:()=>{e(Object(l.d)())},onSubmit:(t,s,n,a)=>{e(Object(l.e)(t,n,a))}})))(h)},"./src/packages/issue/issue-view/src/views/banner/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react-redux/es/index.js"),a=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),i=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");var r=({renderTopBanner:e,applicationKey:t,isProjectSimplified:s})=>e?e(t,s):null;t.a=Object(n.connect)((e=>({applicationKey:Object(a.e)(e),isProjectSimplified:Object(i.u)(e)})),{})(r)},"./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),c=s("./node_modules/@atlaskit/icon/glyph/add.js"),l=s.n(c);class u extends n.Component{render(){const{label:e,onClick:t}=this.props;return a.a.createElement("div",null,a.a.createElement(o.a,{appearance:"subtle",spacing:"compact",iconBefore:a.a.createElement(l.a,{size:"small",label:e}),onClick:t}))}}u.displayName="SquareAddIconButton",u.defaultProps={onClick:r.a}},"./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return p})),s.d(t,"a",(function(){return m}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),c=s("./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js")
;const l=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["height:100%;display:flex;flex-direction:column;"]),{Provider:u,Consumer:d}=Object(n.createContext)(!1),p=({children:e,defaultIsCompact:t})=>{const[s,i]=Object(n.useState)(t),d=r()(i,50);return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(o.a,{setWidth:e=>{d(null!=e&&e<=600)}})),a.a.createElement(l,null,a.a.createElement(u,{value:s},e)))},m=d},"./src/packages/issue/issue-view/src/views/common/delete-button/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/icon/glyph/editor/close.js"),r=s.n(i),o=s("./src/packages/issue/issue-view/src/views/common/line-card-hidden-button/index.js");const c=e=>{const{show:t,onClick:s}=e;return a.a.createElement(o.a,{show:t,icon:a.a.createElement(r.a,null),onClick:s})};c.displayName="DeleteButton"},
"./src/packages/issue/issue-view/src/views/common/dropzone-overlay/assets/upload.svg":function(e,t,s){e.exports=s.p+"assets/upload.2b48c8308f51dfc6be4e460c86920fae.8.svg"},"./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=e=>e.displayName||e.name||"Component"},"./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return m}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/editing/index.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js");const d=Object(i.connect)((e=>({experience:"editIssue",application:Object(o.b)(e),edition:Object(o.a)(e),analyticsSource:Object(c.b)(e)})),{})(r.b),p=Object(i.connect)(((e,t)=>({field:t.fieldId,isEditing:Object(l.D)(t.fieldId)(e)})),{})(r.a),m=e=>t=>{const s=s=>a.a.createElement(p,{fieldId:e},a.a.createElement(t,s));return s.displayName=`WithEditExperienceTracker(${Object(u.a)(t)})`,s}},
"./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return h})),s.d(t,"c",(function(){return y})),s.d(t,"b",(function(){return O}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js"),c=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),l=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const d=e=>e.ui.viewMountStatus.hasIssueViewMounted;var p=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/common/index.js");const m="NEVER_TRACKING",b="requestDetailsPanel",f={description:"ALWAYS_TRACKING",
ecosystemGlance:m,forgeGlance:m,assignee:m,reporter:m,"com.pyxis.greenhopper.jira:gh-sprint":m,"com.atlassian.jira.plugin.system.customfieldtypes:storypoint":m,"com.pyxis.greenhopper.jira:gh-epic-link":m,fixVersions:m,versions:m,devSummary:m,releases:m,"com.atlassian.servicedesk.assets-plugin:assetfield":m,ASSET_ONBOARDING:m,"com.atlassian.jira.plugins.service-entity:service-entity-field-cftype":m,labels:[b],components:[b],duedate:[b],priority:[b],environment:[b],labels:[b],components:[b],"com.atlassian.servicedesk.approvals-plugin:sd-approvals":[b],KNOWLEDGE_BASE:[b],SLA_PANEL:[b],timeoriginalestimate:[b],timetracking:[b],"com.atlassian.jpo:jpo-custom-field-parent":[b],"com.atlassian.jpo:jpo-custom-field-baseline-start":[b],"com.atlassian.jpo:jpo-custom-field-baseline-end":[b],"com.atlassian.jira.plugin.system.customfieldtypes:labels":[b],"com.atlassian.jira.plugin.system.customfieldtypes:textfield":[b],"com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker":[b],
"com.atlassian.jira.plugin.system.customfieldtypes:url":[b],"com.atlassian.jira.plugin.system.customfieldtypes:float":[b],"com.pyxis.greenhopper.jira:jsw-story-points":[b],"com.atlassian.jira.plugin.system.customfieldtypes:select":[b],"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":[b],"com.atlassian.jira.plugin.system.customfieldtypes:textarea":[b],"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":[b],"com.atlassian.jira.plugin.system.customfieldtypes:version":[b],"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":[b],"com.atlassian.jira.plugin.system.customfieldtypes:grouppicker":[b],"com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker":[b],"com.atlassian.jira.plugin.system.customfieldtypes:userpicker":[b],"com.atlassian.jira.plugin.system.customfieldtypes:datetime":[b],"com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes":[b],"com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons":[b],
"com.atlassian.teams:rm-teams-custom-field-team":[b],number:[b],datetime:[b],string:[b],option2:[b],array:[b],"com.atlassian.servicedesk:vp-origin":[b],"com.atlassian.servicedesk:sd-request-participants":[b],"com.atlassian.servicedesk:sd-customer-organizations":[b],"com.atlassian.servicedesk:sd-request-feedback":[b],"com.pyxis.greenhopper.jira:jsw-issue-color":[b],"com.atlassian.jira.plugin.system.customfieldtypes:people":[b],"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language":[b],"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect":[b],"com.atlassian.jira.plugin.system.customfieldtypes:project":[b],"com.atlassian.jira.toolkit:viewmessage":[b],"com.atlassian.jira.toolkit:message":[b]};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const h=Object(i.connect)((e=>({
experience:"viewIssue",experienceId:Object(c.x)(e),application:Object(o.b)(e),edition:Object(o.a)(e),analyticsSource:Object(c.b)(e),isExperienceReady:Object(u.n)(e)&&d(e)})),{})(r.e),y=e=>t=>{const s=s=>a.a.createElement(r.d,{location:e},(({onExperienceSuccess:e})=>a.a.createElement(t,g({onExperienceSuccess:e},s))));return s.displayName=`WithViewExperienceTracker(${Object(p.a)(t)})`,s},O=e=>t=>{const s=({fieldType:s,ownProps:n})=>{const i=s&&(e=>{const t=f[e];return void 0===t?m:t})(s);if(null==s||"NEVER_TRACKING"===i)return a.a.createElement(t,n);const o=Array.isArray(i)?i:null,c=["field",s,...e?[e]:[]].join("-");return a.a.createElement(r.c,{location:c,parentProviders:o},a.a.createElement(t,n))};return s.displayName=`WithFieldViewExperienceTracker(${Object(p.a)(t)}`,Object(i.connect)(((e,t)=>({fieldType:Object(l.r)(t.fieldId)(e)})),null,(({fieldType:e},t,s)=>({fieldType:e,ownProps:s})))(s)}},"./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js":function(e,t,s){
"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/page/dist/es2019/Grid.js"),o=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js");const c={columns:10};t.a=({children:e,isCompact:t=!1,hasMultipleScrollingColumns:s})=>a.a.createElement(i.ThemeProvider,{theme:c},a.a.createElement(o.a,{isCompact:t,hasMultipleScrollingColumns:s},a.a.createElement(r.a,{spacing:"comfortable",layout:"fluid"},e)))},"./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const i=4*a.e,r=3*a.e,o=n.default.div(["> div{padding:0;margin:0;}",""],(({hasMultipleScrollingColumns:e,isCompact:t})=>e?"\n        height: 100%;\n        display: flex;\n        flex-direction: column;\n        \n        > div {\n            flex-wrap: nowrap;\n            height: 100%;\n            /* targets Grid element of @atlaskit/page, which has align-items: flex-start by default */\n            align-items: initial;\n        }\n        ":`\n            padding-left: ${t?0:a.e/2}px;\n            /* Targets <GridColumn> element */\n            > div > div {\n                margin: 0;\n                max-width: 100%;\n            }\n        `))},"./src/packages/issue/issue-view/src/views/common/line-card-hidden-button/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const c=r.default.div(["height:100%;margin-left:","px;transform:scale(",");margin-right:","px;"],o.e/4,(({show:e})=>e?1:0),-o.e),l=r.default.div(["display:inline-block;vertical-align:middle;margin-top:","px;width:","px;height:","px;margin-left:","px;"],o.e,4*o.e,3*o.e,o.e),u=e=>{const{show:t,onClick:s,icon:n}=e;return a.a.createElement(c,{show:t},a.a.createElement(l,null,a.a.createElement(i.a,{iconBefore:n,appearance:"subtle",onClick:s,spacing:"none"})))};u.displayName="LineCardHiddenButton"},"./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return m}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/icon/glyph/error.js"),o=s.n(r),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),l=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const u=i.default.div(["align-items:center;color:",";display:flex;margin-top:","px;"],(e=>e.colour),l.e/2),d=i.default.div(["margin-left:","px;"],l.e/2),p={default:null,success:null,error:c.a.R400};class m extends n.Component{render(){const{children:e,validationMessage:t,validationState:s}=this.props;return a.a.createElement("div",null,e,s&&t?a.a.createElement(u,{colour:p[s]},a.a.createElement(o.a,{label:`${s} icon`,role:"presentation"}),a.a.createElement(d,null,t)):null)}}m.displayName="SelectValidationWrapper",m.displayName="SelectValidationWrapper",m.defaultProps={children:null,validationState:"default",validationMessage:null}},
"./src/packages/issue/issue-view/src/views/common/skeleton/skeleton-view.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return Se}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),r=s("./node_modules/@atlaskit/page/dist/es2019/GridColumn.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),c=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthDetector.js"),l=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const u=Object(i.css)(["background-color:",";border-radius:0.1875rem;"],l.a.N20),d=i.default.div(["",";width:1rem;height:1rem;"],u),p=i.default.div(["",";width:1rem;height:1rem;border-radius:50%;flex-shrink:0;"],u),m=i.default.div(["flex-basis:100%;height:0.5rem;"]),b=i.default.div(["display:flex;margin-top:2rem;align-items:center;","{&:first-of-type{flex:0 0 6rem;}&:last-of-type{margin-left:0.5rem;flex:1 0 100%;}}","{width:1.5rem;height:1.5rem;}"," "," ",""],d,p,(e=>e.theme.isFullPage&&Object(i.css)(["","{flex:0 0 4rem;}",":last-of-type{flex:0 0 12.5rem;}"],m,d)),(e=>e.theme.isDualColumn&&Object(i.css)(["flex-wrap:wrap;",":last-of-type{flex:1;}"],d)),(e=>e.theme.isSingleColumn&&Object(i.css)(["",":last-of-type{flex-shrink:1;}","{flex:0 0 2.5rem;}"],d,m))),f=()=>a.a.createElement(b,null,a.a.createElement(d,null),a.a.createElement(m,null),a.a.createElement(p,null),a.a.createElement(d,null));f.displayName="UserField"
;const g=i.default.div(["display:flex;margin-top:2rem;","{&:first-of-type{flex:0 0 6rem;}}"," "," ",""],d,(e=>e.theme.isFullPage&&Object(i.css)(["","{flex:0 0 4rem;}",":last-of-type{flex:0 0 7rem;}"],m,d)),(e=>e.theme.isDualColumn&&Object(i.css)(["flex-wrap:wrap;",":last-of-type{flex:1 0 100%;}"],d)),(e=>e.theme.isSingleColumn&&Object(i.css)(["",":last-of-type{flex:0 1 7rem;}","{flex:0 0 2.5rem;}"],d,m))),h=()=>a.a.createElement(g,null,a.a.createElement(d,null),a.a.createElement(m,null),a.a.createElement(d,null));h.displayName="Field";var y=i.default.div.attrs({children:a.a.createElement(a.a.Fragment,null,a.a.createElement(f,null),a.a.createElement(f,null),a.a.createElement(h,null),a.a.createElement(h,null),a.a.createElement(h,null),a.a.createElement(h,null))})([""]);var O=i.default.div.attrs({children:a.a.createElement(d,null)})(["display:flex;margin-top:1rem;","{width:7rem;height:1.5rem;}"],d)
;const j=i.default.div(["flex:1;display:flex;flex-direction:column;align-items:stretch;margin:1.5rem 0 2rem;"]),v=i.default.div(["display:none;",""],(e=>e.theme.isSingle&&Object(i.css)(["display:flex;flex:1;justify-content:flex-end;","{margin-left:0.5rem;width:1.5rem;height:1.5rem;}"],d))),E=i.default.div(["display:flex;width:100%;align-items:center;& > ",":first-of-type{width:0.75rem;height:0.75rem;}& > ",":first-of-type + ","{margin-left:0.5rem;flex:0 0 6rem;height:0.625rem;}"],d,d,d),k=()=>a.a.createElement(E,null,a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(v,null,a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null)));k.displayName="Breadcrumbs";const w=i.default.div(["display:flex;margin-top:1rem;","{flex:",";height:1rem;}"],d,(e=>e.theme.isSingleColumn?"1":"0 0 16rem")),S=()=>a.a.createElement(w,null,a.a.createElement(d,null));S.displayName="Summary"
;const C=i.default.div(["display:flex;margin-top:1rem;","{width:2rem;height:2rem;}",":not(:first-of-type){margin-left:0.5rem;}",""],d,d,(e=>e.theme.isSingleColumn&&Object(i.css)(["",":last-of-type{display:none;}"],d))),I=()=>a.a.createElement(C,null,a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null));I.displayName="Actions";const T=i.default.div(["margin-top:1.5rem;display:flex;flex-direction:column;align-items:stretch;","{width:auto;height:0.625rem;}",":not(:first-of-type){margin-top:0.75rem;}",":first-of-type{width:8rem;}",":last-of-type{width:16rem;}"],d,d,d,d),P=()=>a.a.createElement(T,null,a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null));P.displayName="Description"
;const _=i.default.div(["display:flex;margin-top:3.5rem;flex-direction:column;align-items:flex-start;",":first-of-type{width:8rem;height:0.625rem;}",":last-of-type{margin-top:0.5rem;width:10rem;height:8rem;}"],d,d),x=()=>a.a.createElement(_,null,a.a.createElement(d,null),a.a.createElement(d,null));x.displayName="Attachments";const D=i.default.div(["margin-top:3.5rem;display:flex;flex-direction:column;align-items:stretch;& > ","{width:8rem;height:0.625rem;}"],d),A=i.default.div(["display:flex;margin-top:0.5rem;align-items:center;",":first-of-type{flex:0 0 3rem;height:0.625rem;}",":not(:first-of-type){margin-left:0.5rem;width:1.5rem;height:1.5rem;}"],d,d),L=()=>a.a.createElement(D,null,a.a.createElement(d,null),a.a.createElement(A,null,a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null)));L.displayName="Activity"
;const M=i.default.div(["display:flex;align-items:center;","{margin-left:0.5rem;height:0.625rem;}","{width:2rem;height:2rem;}"," + ","{flex:0 0 8rem;}",":last-of-type{flex:0 0 3rem;}"],d,p,p,d,d),R=()=>a.a.createElement(M,null,a.a.createElement(p,null),a.a.createElement(d,null),a.a.createElement(d,null));R.displayName="CommentAvatar";const N=i.default.div(["display:flex;margin-top:0.5rem;flex-direction:column;align-items:stretch;","{margin-left:2.5rem;width:auto;height:0.625rem;}",":not(:first-of-type){margin-top:0.75rem;}",":last-of-type{width:15rem;}"],d,d,d),F=()=>a.a.createElement(N,null,a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null));F.displayName="Comment";const U=i.default.div(["display:flex;margin-top:1.5rem;flex-direction:column;align-items:stretch;"]),V=()=>a.a.createElement(U,null,a.a.createElement(R,null),a.a.createElement(F,null));V.displayName="Comments"
;const K=i.default.div(["display:flex;margin-top:2.5rem;","{width:2rem;height:2rem;}","{margin-left:0.5rem;height:2rem;flex:1;width:auto;}"],p,d),W=()=>a.a.createElement(K,null,a.a.createElement(p,null),a.a.createElement(d,null));W.displayName="AddComment";const B=Object(i.default)(O)(["margin-top:1rem;",""],(e=>!e.theme.isSingleColumn&&Object(i.css)(["display:none;"]))),H=Object(i.default)(y)(["margin-top:2rem;",""],(e=>!e.theme.isSingleColumn&&Object(i.css)(["display:none;"]))),$=()=>a.a.createElement(j,null,a.a.createElement(k,null),a.a.createElement(S,null),a.a.createElement(I,null),a.a.createElement(B,null),a.a.createElement(P,null),a.a.createElement(x,null),a.a.createElement(H,null),a.a.createElement(L,null),a.a.createElement(V,null),a.a.createElement(W,null));$.displayName="Content";var G=$
;const q=i.default.div(["display:",";flex:0 1 40%;flex-direction:column;margin:1.5rem 0 2rem 3.5rem;"],(e=>e.theme.isSingleColumn?"none":"flex")),z=i.default.div(["display:flex;justify-content:flex-end;","{height:1.5rem;width:1.5rem;margin-left:0.5rem;}",""],d,(e=>e.theme.isFullPage&&Object(i.css)(["","{height:2rem;width:2rem;}"],d))),Y=()=>a.a.createElement(z,null,a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null),a.a.createElement(d,null));Y.displayName="Actions";const Q=()=>a.a.createElement(q,null,a.a.createElement(Y,null),a.a.createElement(O,null),a.a.createElement(y,null));Q.displayName="Context";var J=Q;var Z=i.default.div(["display:flex;margin:0 2rem;",""],(e=>e.theme.maxWidth&&Object(i.css)(["padding:0 calc((100% - ","px) / 2);padding:0 max(calc((100% - ","px) / 2),0px);"],e.theme.maxWidth,e.theme.maxWidth)))
;const X=Object(i.keyframes)(["from{transform:translate3d(-100%,0,0);}to{transform:translate3d(100vw,0,0);transform:translate3d(var(--issue-view-skeleton-width,100vw),0,0);}"]);var ee=i.default.div(["pointer-events:none;position:relative;overflow:hidden;max-height:calc(100vh - 56px);&::after{content:'';position:absolute;z-index:1;top:0;left:0;width:420px;height:100%;background-image:linear-gradient( 100deg,transparent 25%,rgba(255,255,255,0.58) 40%,rgba(255,255,255,0.58) 48%,transparent 63% );"," animation-name:",";animation-iteration-count:infinite;animation-timing-function:linear;"," "," ","}"],(e=>null!=e.theme.width&&Object(i.css)(["--issue-view-skeleton-width:","px;"],e.theme.width)),X,(e=>e.theme.isFullPage&&Object(i.css)(["animation-duration:1.2s;"])),(e=>e.theme.isDualColumn&&Object(i.css)(["animation-duration:1s;"])),(e=>e.theme.isSingleColumn&&Object(i.css)(["animation-duration:1s;"])));function te(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function se(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?te(Object(s),!0).forEach((function(t){ne(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):te(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ne(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ae=(e,t)=>{const s={width:e,maxWidth:t},n=void 0!==e&&void 0!==t?Math.min(e,t):e;return se(se({},s),{},void 0===n||n>768?{isFullPage:!0}:n>600?{isDualColumn:!0}:{isSingleColumn:!0})},ie=({issueMaxWidth:e})=>a.a.createElement(c.a,null,(t=>void 0!==t?a.a.createElement(i.ThemeProvider,{theme:ae(t,e)
},a.a.createElement(ee,null,a.a.createElement(Z,null,a.a.createElement(G,null),a.a.createElement(J,null)))):null));ie.displayName="Skeleton";var re=ie,oe=s("./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js"),ce=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),le=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),ue=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),de=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),pe=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),me=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),be=i.default.div(["position:relative;overflow:hidden;margin:0 -20px;border-left:20px solid ",";border-right:20px solid ",";"],l.a.N0,l.a.N0),fe=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js")
;const ge=()=>a.a.createElement(ce.a,{paddingTop:10,paddingBottom:10},a.a.createElement(fe.a,{fontSize:14,lineHeight:20,intrusion:60}),a.a.createElement(fe.a,{fontSize:14,lineHeight:20,intrusion:20}),a.a.createElement(fe.a,{fontSize:14,lineHeight:20,intrusion:180}));ge.displayName="Description";var he=ge,ye=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const Oe=e=>a.a.createElement(ce.a,{paddingTop:8,paddingBottom:8},a.a.createElement(fe.a,{fontSize:12,lineHeight:20,intrusion:e.labelIntrusion}),a.a.createElement(ce.a,{paddingTop:10,paddingBottom:10},a.a.createElement(fe.a,{fontSize:20,lineHeight:20,intrusion:e.fieldIntrusion})));Oe.displayName="Field";var je=Oe;const ve=()=>a.a.createElement(ce.a,{paddingTop:10,paddingBottom:10},a.a.createElement(fe.a,{fontSize:20,lineHeight:24,intrusion:20}),a.a.createElement(fe.a,{fontSize:20,lineHeight:24,intrusion:140}));ve.displayName="Summary";var Ee=ve
;const ke=i.default.div(["",""],(({issueMaxWidth:e})=>void 0!==e?`\n        ${Object(de.c)("padding-left",e)}\n        ${Object(de.c)("padding-right",e)}\n    `:""));class we extends n.Component{static renderFieldSkeletons(){return a.a.createElement(ce.a,{paddingTop:4,paddingBottom:16},a.a.createElement(je,{labelIntrusion:170,fieldIntrusion:20}),a.a.createElement(je,{labelIntrusion:120,fieldIntrusion:60}),a.a.createElement(je,{labelIntrusion:140,fieldIntrusion:40}))}static renderCompactSkeleton(){return a.a.createElement(r.a,null,a.a.createElement(be,null,a.a.createElement(Ee,null),we.renderFieldSkeletons(),a.a.createElement(he,null),a.a.createElement(oe.a,null)))}static renderFullSizeSkeleton(){return[a.a.createElement(r.a,{key:"maincontent",medium:6},a.a.createElement(be,null,a.a.createElement(Ee,null),a.a.createElement(he,null),a.a.createElement(oe.a,null))),a.a.createElement(r.a,{key:"secondarycontent",medium:4},a.a.createElement(be,null,we.renderFieldSkeletons()))]}render(){
const{isCompact:e,issueMaxWidth:t}=this.props;return a.a.createElement(ke,{issueMaxWidth:t},a.a.createElement(pe.a,{isCompact:e},a.a.createElement(ue.a,null,a.a.createElement(le.b,null),e?we.renderCompactSkeleton():we.renderFullSizeSkeleton())))}}we.displayName="SkeletonOld";const Se=Object(o.a)((()=>Object(ye.b)("issue.details.new-skeleton",!1)),re,we);t.b=Object(me.a)(Se)},"./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["position:relative;"])},"./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js");function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.a=e=>t=>a.a.createElement(i.a,null,(s=>a.a.createElement(e,r({},t,{isCompact:s}))))},"./src/packages/issue/issue-view/src/views/common/with-container-width/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),c=(s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthDetector.js"),s("./src/packages/issue/issue-view/src/views/common/style-wrappers/styled.js"));function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function u(e){return t=>{const[s,i]=Object(n.useState)(void 0),u=r()(i,50)
;return a.a.createElement(a.a.Fragment,null,a.a.createElement(c.a,null,a.a.createElement(o.a,{setWidth:u})),a.a.createElement(e,l({},t,{containerWidth:s})))}}},"./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/profilecard-next/src/async.js"),r=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js");t.a=e=>{const t=(e=>e&&(e.accountId||e.id||e.value))(e.userAccount);return t?a.a.createElement(i.a,{TenantContextSubscriber:r.b,accountId:t,analyticsData:e.analyticsData,position:e.position,actions:e.actions},e.children):e.children}},"./src/packages/issue/issue-view/src/views/connect-field.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react-intl/lib/index.es.js"),a=s("./node_modules/react-redux/es/index.js"),i=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),r=s("./node_modules/uuid/index.js"),o=s.n(r),c=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsEvents.js"),l=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsContext.js"),u=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),p=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),m=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),b=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),f=s("./src/packages/issue/issue-view/src/drafts/draft-actions.js"),g=s("./src/packages/issue/issue-view/src/feature-flags.js"),h=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),y=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js")
;function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){v(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const E=Object(n.h)({defaultFallbackInvalidMessage:{id:"issue.field.default-fallback-invalid-message",defaultMessage:"The value could not be saved"}}),k={transformFromStateValue:(e,t,s)=>e,transformToStateValue:e=>e,fallbackInvalidMessage:e=>e.formatMessage(E.defaultFallbackInvalidMessage),
additionalProps:(e,t)=>({}),additionalCallbacks:e=>({}),isOptimistic:!0,canContainMediaContent:!1,shouldSaveDraft:!1,saveField:({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n,fieldEditSessionId:a})=>{const i=a?`${e}/rest/api/2/issue/${t}?fieldEditSessionId=${a}`:`${e}/rest/api/2/issue/${t}`;return Object(u.e)(i,{body:JSON.stringify({fields:{[s]:n}})})},shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,fieldId:""},w=(e,t,s,n)=>({baseUrl:e,projectKey:t,issueKey:s,fieldId:n});t.a=(e=>(t,s)=>r=>{const u=(e=>({mapStateToProps:(t,s)=>{const n=e(t,s),a=j(j({},k),n),{fieldId:r,transformFromStateValue:o,transformToStateValue:c,fallbackInvalidMessage:l,additionalProps:u,additionalCallbacks:b,isOptimistic:f,canContainMediaContent:g,saveField:h,shouldDiscardChangeOnFailure:y,shouldSaveDraft:O,onSaveFailureFlagType:v,onSaveSuccessFlagType:E}=a,S={isRichTextField:Object(p.I)(r)(t),isOptimistic:f,canContainMediaContent:g,saveField:h,shouldDiscardChangeOnFailure:y,
shouldSaveDraft:O,onSaveFailureFlagType:v,onSaveSuccessFlagType:E},C=Object(i.a)(w),I=Object(i.a)(c),T=Object(i.a)(o);return(e,t)=>j({fieldId:r,fieldOptions:S,memoizedTransformToStateValue:I,additionalCallbacks:b,intl:t.intl,label:Object(p.m)(r)(e),isEditable:Object(p.C)(r)(e)&&"PREVIEW"!==Object(m.w)(e),isEditing:Object(p.D)(r)(e),fieldEditSessionId:Object(p.f)(r)(e),invalidMessage:Object(p.j)(r,l(t.intl))(e),customFieldConfig:Object(p.p)(r)(e),value:T(Object(p.h)(r)(e),C(Object(d.f)(e),Object(d.C)(e),Object(d.x)(e),r),t.intl),isWaiting:!f&&Object(p.F)(r)(e),isMobile:Object(d.r)(e)},u(e,t.intl))},mapDispatchToProps:e=>({initFieldOptions:({fieldId:t,fieldOptions:s})=>()=>e(Object(h.f)(t,s)),onEditRequest:({fieldId:t,fieldOptions:s})=>(...n)=>{if(Object(g.isShortcutMenuEnabled)()){const a=n.length?n[n.length-1]:void 0;e(Object(h.b)(t,s,o.a.v4(),a))}else e(Object(h.b)(t,s,o.a.v4()))},onChange:({fieldId:t,fieldOptions:s,memoizedTransformToStateValue:n})=>a=>e(Object(h.e)(t,n(a),s)),
onConfirm:({fieldId:t,fieldOptions:s,analyticsAttributeIdRetriever:n})=>(...a)=>{const i=a.length>1?a[0]:void 0,r=a.length?a[a.length-1]:void 0;return e(Object(h.d)(t,s,i,r,n))},onBlur:({fieldId:t,fieldOptions:s})=>()=>e(Object(h.c)(t,s)),onCancel:({fieldId:t,fieldOptions:s})=>()=>{e(Object(h.c)(t,s)),e(Object(f.b)({fieldId:t}))},onPaste:({fieldId:t,fieldOptions:s})=>n=>e(Object(h.g)(t,s,n)),getAdditionalCallbacks:({additionalCallbacks:t})=>t(e)}),mergeStateAndDispatchProps:(e,t)=>{const s=Object.keys(t).reduce(((s,n)=>(s[n]=t[n](e),s)),{}),n=t.getAdditionalCallbacks(e);return j(j(j({},e),s),n)}}))(t);return Object(b.a)([Object(c.a)({onConfirm:e=>e({action:"updated",isBoardSearchFieldChangeboardingEnabled:Object(g.isBoardSearchFieldChangeboardingEnabled)(),isBacklogSearchFieldChangeboardingEnabled:Object(g.isBacklogSearchFieldChangeboardingEnabled)()}),onEditRequest:{action:"updateStarted"}}),Object(l.a)({componentName:"issueFields",actionSubject:e
}),Object(a.connect)(u.mapStateToProps,u.mapDispatchToProps,u.mergeStateAndDispatchProps),n.i],s)(Object(y.b)()(r))})("issueFields")},"./src/packages/issue/issue-view/src/views/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={ASSIGNEE:{TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.assignee.time-to.render-initial-suggestions",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.assignee.time-to.reflect-input-results",TIME_TO_REFLECT_SELECTED:"jira.fe.issue.fields.assignee.time-to.reflect-selected",TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT:"jira.fe.issue.fields.assignee.time-to.assign-to-me-via-shortcut"},SUMMARY:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.summary.time-to.render-edit-view",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.summary.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.summary.time-to.render-read-view-on-cancel"},LABELS:{
TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.labels.time-to.render-initial-suggestions",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.labels.time-to.reflect-input-results",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.labels.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.labels.time-to.render-read-view-on-cancel",TIME_TO_REFLECT_SELECTED_EXISTING:"jira.fe.issue.fields.labels.time-to.reflect-selected-existing",TIME_TO_REFLECT_SELECTED_NEW:"jira.fe.issue.fields.labels.time-to.reflect-selected-new",TIME_TO_REFLECT_REMOVED_EXISTING:"jira.fe.issue.fields.labels.time-to.reflect-removed-existing"},STORY_POINTS:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.story-points.time-to.render-edit-view",TIME_TO_RENDER_READ_VIEW_ON_CONFIRM:"jira.fe.issue.field.story-points.time-to.render-read-view-on-confirm",TIME_TO_RENDER_READ_VIEW_ON_CANCEL:"jira.fe.issue.field.story-points.time-to.render-read-view-on-cancel"},ISSUE_LINKS:{
TIME_TO_REFLECT_SELECTED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.reflect-selected-issue",TIME_TO_REFLECT_REMOVED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.reflect-removed-issue",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.issue-links.time-to.reflect-input-results",TIME_TO_RENDER_LINKED_ISSUE:"jira.fe.issue.fields.issue-links.time-to.render-linked-issue",TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT:"jira.fe.issue.fields.issue-links.time-to.render-new-linked-issue-input"},SPRINT:{TIME_TO_REFLECT_SELECTED_SPRINT:"jira.fe.issue.fields.sprint.time-to.reflect-selected-sprint",TIME_TO_REFLECT_REMOVED_SPRINT:"jira.fe.issue.fields.sprint.time-to.reflect-removed-sprint",TIME_TO_REFLECT_INPUT_RESULT:"jira.fe.issue.fields.sprint.time-to.reflect-input-results",TIME_TO_RENDER_READ_VIEW:"jira.fe.issue.fields.sprint.time-to.render-read-view",TIME_TO_RENDER_INITIAL_SUGGESTIONS:"jira.fe.issue.fields.sprint.time-to.render-initial-suggestions"},PRIORITY:{
TIME_TO_RENDER_READ_VIEW:"jira.fe.issue.fields.priority.time-to.render-read-view",TIME_TO_RENDER_SUGGESTIONS:"jira.fe.issue.fields.priority.time-to.render-suggestions",TIME_TO_REFLECT_PRIORITY_UPDATE:"jira.fe.issue.fields.priority.time-to.reflect-priority-update"},COMMENTS:{TIME_TO_RENDER_NEW_COMMENT_EDITOR:"jira.fe.issue.fields.comments.time-to.render-new-comment-editor",TIME_TO_RENDER_SAVED_COMMENT:"jira.fe.issue.fields.comments.time-to.render-saved-comment"},DESCRIPTION:{TIME_TO_RENDER_EDIT_VIEW:"jira.fe.issue.field.description.time-to.render-edit-view",TIME_TO_SAVE_UPDATED_DESCRIPTION:"jira.fe.issue.field.description.time-to.save-updated-description",TIME_TO_SAVE_UNCHANGED_DESCRIPTION:"jira.fe.issue.field.description.time-to.save-unchanged-description"},EPIC_LINKS:{TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED:"jira.fe.issue.fields.epic-link.time-to.fetch-input-results.epic-picker-enabled",
TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_DISABLED:"jira.fe.issue.fields.epic-link.time-to.fetch-input-results.epic-picker-disabled"}}},"./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const n=(e,t)=>"string"==typeof e&&e.toLowerCase().includes(t),a=(e,t)=>{if(e.data&&!0===e.data.__isNew__)return!0;const s=t.trim().toLowerCase();return!!n(e.label,s)||!(!e.data||!e.data.filterValues)&&e.data.filterValues.some((e=>n(e,s)))}},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return oe}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/rxjs/Rx.js"),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/@atlaskit/form/dist/es2019/Messages.js"),u=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcut-scope.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/picker/base/messages.js"),m=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),f=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),g=s("./src/packages/issue/issue-view/src/feature-flags.js"),h=s("./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js"),y=Object(i.h)({empty:{
id:"issue.views.field.select.empty",defaultMessage:"No matches found"},failedFetch:{id:"issue.views.field.select.failed-fetch",defaultMessage:"Search failed."},reloadIssue:{id:"issue.views.field.select.reload-issue",defaultMessage:"Try reloading the issue."}}),O=s("./node_modules/uuid/index.js"),j=s.n(O),v=s("./node_modules/@atlaskit/select/dist/es2019/CreatableSelect.js"),E=s("./src/packages/platform/observability/analytics-legacy-gasv2-utils/src/hash-attribute.js"),k=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),w=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js"),S=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),C=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),I=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),T=s("./node_modules/lodash/flatMap.js"),P=s.n(T)
;const _=e=>P()(e.map((e=>(e=>void 0!==e.options)(e)&&e.options?e.options:e))),x=e=>null==e?[]:Array.isArray(e)?e:[e],D=(e,t=!1)=>Object(g.isSelectFieldPerformanceImprovementEnabled)()?t?e.toString():Object(E.b)(e.toString()).toString():t?e.toString():Object(E.a)(e.toString()).toString(),A=(e,t=!1)=>e.filter((e=>e.value)).map((({value:e})=>D(e,t))),L=e=>{const t=e.map((({id:e})=>e||null));return t.every((e=>null===e))?[]:t},M=e=>e.filter((e=>e.value)).map((({value:e})=>null!=e?`${e}`.length:0));function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const F="",U=Object(I.a)((e=>({label:e(F),isDisabled:!0,isAkSelectOption:!0}))),V=Object(I.a)((e=>({label:e(F),isDisabled:!0,isAkSelectOption:!0}))),K=Object(I.a)(((e,t,s,n)=>!0===e?[...t,s,n]:t));class W extends n.Component{constructor(...e){super(...e),this.formatCreateLabel=e=>{const{footer:t,formatCreateLabel:s}=this.props;return void 0===t?s?s(e):e:"function"==typeof t?t(e):t},this.getShouldShowFooter=()=>{const{footer:e,shouldShowFooter:t}=this.props;return!!e&&t},this.isOptionShownInDropdown=(e,t)=>{const{filterOption:s,noOptionsMessage:n,loadingMessage:a,value:i}=this.props;return s(e,t)&&e.label!==n(F)&&e.label!==a(F)&&!x(i).find((t=>t.value===e.value))},this.filterOptionWithFooterAndShowNoOptionsMessage=(e,t)=>{const{filterOption:s,options:n,isLoading:a,noOptionsMessage:i,loadingMessage:r}=this.props
;return e.label===i(F)?!0!==a&&!_(n).some((e=>this.isOptionShownInDropdown(e,t))):e.label===r(F)?!0===a&&!_(n).some((e=>this.isOptionShownInDropdown(e,t))):s(e,t)}}render(){const e=this.props,{footer:t,onFooterSelect:s,options:n,noOptionsMessage:i,loadingMessage:r,filterOption:o}=e,c=N(e,["footer","onFooterSelect","options","noOptionsMessage","loadingMessage","filterOption"]),l=this.getShouldShowFooter(),u=V(i),d=U(r),p=K(l,n,u,d);return a.a.createElement(v.a,R({},c,{options:p,formatCreateLabel:this.formatCreateLabel,isValidNewOption:this.getShouldShowFooter,onCreateOption:s,filterOption:!0===l?this.filterOptionWithFooterAndShowNoOptionsMessage:o,loadingMessage:r,noOptionsMessage:i,allowCreateWhileLoading:!0}))}}function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var s,n,a=function(e,t){
if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function $(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function G(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$(Object(s),!0).forEach((function(t){q(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0
}):e[t]=s,e}W.displayName="SelectWithFooter",W.defaultProps={shouldShowFooter:!0};const z={onChange:"valueChanged",onInputChange:"inputChanged",onMenuOpen:"menuOpened",onMenuClose:"menuClosed"},Y=Object(k.a)("select",z)(W),Q=Object(k.a)("select",z)(v.a),J={action:"fake-action"};class Z extends n.Component{constructor(e){super(e),this.getDefaultAnalyticsAttributes=e=>{const{fieldId:t,value:s,isLoading:n,optionValuesSafeForAnalytics:a}=this.props,i={queryLength:e.length,queryHash:""===e?e:Object(E.a)(e)},r=x(s);let o=((e,t)=>e.filter((e=>"string"==typeof e.value&&e.value.toLowerCase().includes((t||"").toLowerCase())||"string"==typeof e.label&&e.label.toLowerCase().includes((t||"").toLowerCase()))))(this.flatOptions,e);const c=o.length;Object(g.isSelectFieldPerformanceImprovementEnabled)()&&(o=o.slice(0,20));return G(G({fieldId:t,componentName:"select",packageName:"@atlaskit/select",options:A(o,a),optionsLength:c,optionsLengths:M(o),optionIds:L(o),selectedOptions:A(r,a),
selectedOptionsLengths:M(r),selectedOptionIds:L(r),sessionId:this.sessionId,truncationSize:20,isLoading:n},i),{},{optionValuesSafeForAnalytics:a},this.props.additionalAnalyticsProps)},this.getItemOrder=e=>{const t=[];return this.flatOptions.forEach(((s,n)=>{const a=s.filterValues||[];(s.value===e.value||a.includes(e.value))&&t.push(n)})),t.length>0?t[0]:-1},this.startSession=()=>{this.sessionId=j.a.v4(),this.sessionStartedAt=S.default.now(),this.fireTrackAnalyticsEvent(this.props.createAnalyticsEvent({action:"started"}),"started","optionSelectionSession")},this.endSession=()=>{if(this.sessionId){const e=this.sessionStartedAt?S.default.now()-this.sessionStartedAt:0;this.fireTrackAnalyticsEvent(this.props.createAnalyticsEvent({action:"ended"}),"ended","optionSelectionSession",G({elapsedTime:e},this.props.additionalAnalyticsProps))}this.sessionStartedAt=0,this.sessionId=void 0},this.flatOptions=[],this.sessionId=void 0,this.queryAtSetValue="",this.query="",this.sessionStartedAt=0,
this.isOpened=!1,this.fireOptionsLoadedEvent=e=>{e.update({action:"loaded",actionSubject:"options"}),this.fireAnalyticsEvent(e,this.query)},this.fireInputChangedEvent=(e,t,s)=>("set-value"===t.action&&(this.queryAtSetValue=this.query),this.query=e,s.update({action:"changed",actionSubject:"filter"}),this.fireAnalyticsEvent(s,this.query),this.sessionId),this.restartSession=()=>{this.endSession(),this.props.menuIsOpen&&(this.isOpened=!0,this.startSession())},this.fireOptionCreatedEvent=(e,t)=>{t.update({action:"created",actionSubject:"option"});const s=this.sessionId;this.restartSession(),this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOption:D(e.value,this.props.optionValuesSafeForAnalytics),sessionId:s})},this.fireOptionRemovedEvent=(e,t)=>{t.update({action:"removed",actionSubject:"option"}),this.fireAnalyticsEvent(t,this.query,{removedItem:e?D(e.value,this.props.optionValuesSafeForAnalytics):void 0})},this.fireOptionSelectedEvent=(e,t)=>{t.update({action:"changed",
actionSubject:"option"});const s=this.sessionId;this.restartSession(),Object(g.isSelectFieldPerformanceImprovementEnabled)()?this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOrder:this.getItemOrder(e),selectedOption:D(e.value,this.props.optionValuesSafeForAnalytics),selectedOptionLength:null!==e.value?`${e.value}`.length:0,sessionId:s}):this.fireAnalyticsEvent(t,this.queryAtSetValue,{selectedOrder:this.getItemOrder(e),selectedOption:D(e.value,this.props.optionValuesSafeForAnalytics),sessionId:s})},this.fireOpenChangedEvent=(e,t)=>{e.isOpen&&!this.isOpened&&this.startSession(),this.isOpened=e.isOpen,t.update({action:e.isOpen?"opened":"closed",actionSubject:"optionSelect",attributes:this.getDefaultAnalyticsAttributes(this.query)}),this.fireAnalyticsEvent(t,this.query)},this.onChange=(e,t,s)=>{const n=Array.isArray(e)?e[e.length-1]:e,a=this.sessionId;switch(t.action){case"create-option":null!==n&&this.fireOptionCreatedEvent(n,s);break;case"remove-value":case"pop-value":
case"deselect-option":this.fireOptionRemovedEvent(t.removedValue||t.option,s);break;case"select-option":null!==n&&this.fireOptionSelectedEvent(n,s)}this.props.onChange&&this.props.onChange(e,t,a)},this.onInputChange=(e,t,s)=>{const{onInputChange:n}=this.props;"input-change"!==t.action&&"set-value"!==t.action||this.fireInputChangedEvent(e,t,s),n(e,t,this.sessionId)},this.onMenuOpen=e=>{this.fireOpenChangedEvent({isOpen:!0},e);const{onMenuOpen:t}=this.props;t&&t(e)},this.onMenuClose=e=>{this.fireOpenChangedEvent({isOpen:!1},e);const{onMenuClose:t}=this.props;t&&t(e)},this.onFocus=e=>{this.props.onFocus(e,this.sessionId)},this.flatOptions=_(this.props.options),this.isOpened=e.menuIsOpen,this.isOpened&&(this.startSession(),this.fireInputChangedEvent("",J,this.props.createAnalyticsEvent({})))}componentDidUpdate(e){this.props.options!==e.options&&(this.flatOptions=_(this.props.options),this.fireOptionsLoadedEvent(this.props.createAnalyticsEvent()))}componentWillUnmount(){this.endSession()}
fireAnalyticsEvent(e,t,s={}){const n=G(G({},this.getDefaultAnalyticsAttributes(t)),s);Object(C.h)(e,n)}fireTrackAnalyticsEvent(e,t,s,n){const a=G(G({},this.getDefaultAnalyticsAttributes(this.query)),n);Object(C.f)(e,`${s} ${t}`,a)}render(){const e=this.props,{canCreateNewItem:t,createAnalyticsEvent:s}=e,n=H(e,["canCreateNewItem","createAnalyticsEvent"]),i=t?Q:Y;return a.a.createElement(i,B({},n,{onFocus:this.onFocus,onChange:this.onChange,onInputChange:this.onInputChange,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose}))}}Z.displayName="SelectWithAnalyticsView",Z.defaultProps={isLoading:!1,createAnalyticsEvent:c.a,optionValuesSafeForAnalytics:!1,onChange:c.a,onInputChange:c.a,onMenuOpen:c.a,onMenuClose:c.a};var X=Object(w.a)()(Z),ee=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js"),te=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js");function se(){
return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ne(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ae(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ie(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(s),!0).forEach((function(t){re(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ae(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function re(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const oe={hideSelectedOptions:!0,allowCreateWhileLoading:!0,filterOption:h.a},ce=e=>ie({label:e.content},e),le=(e,t)=>{const{label:s,filterValues:n}=e,a=ie({},ne(e,["label","filterValues"]));return"create-option"===t.action&&void 0===a.content&&(a.content=e.label),a};class ue extends n.Component{constructor(e){var t;super(e),this.onFocus=(e,t)=>{this.query$.next({query:"",sessionId:t,isImmediate:!0})},this.onChange=(e,t,s)=>{const{onChange:n,onChangeMulti:a,isMulti:i}=this.props;if(i){if(!a)return;this.query$.next({query:this.query||"",sessionId:s,isImmediate:!0});a(Array.isArray(e)?e.map((e=>le(e,t))):[],t)}else{if(!n||Array.isArray(e))return;n(e&&le(e,t),t)}
},this.onInputChange=(e,t,s)=>{if("input-change"!==t.action&&"set-value"!==t.action)return;let n=e;this.props.changeQueryValue&&(n=this.props.changeQueryValue(n)),this.query=n,"input-change"===t.action&&(this.setState({isLoading:!0}),this.query$.next({query:n,sessionId:s})),this.props.onInputChange&&this.props.onInputChange(n,t)},this.formatOptionLabel=(e,t)=>void 0!==this.props.formatOptionLabel?this.props.formatOptionLabel(e,t):e.iconUrl?a.a.createElement(ee.e,null,a.a.createElement(ee.d,null,a.a.createElement("img",{src:e.iconUrl,alt:"",width:2*m.e,height:2*m.e,role:"none"})),a.a.createElement(ee.c,null,e.label)):e.label,this.transformItems=e=>e&&e.length>0?e.map(ce):[],this.transformToOptions=e=>1!==e.length||e[0].heading?e.map((e=>{const t=this.transformItems(e.items);return void 0!==e.heading?{label:e.heading,options:t}:{options:t}})):this.transformItems(e[0].items),this.subscription=void 0,this.query$=void 0,this.query=null,
this.getFailedFetchMessage=()=>a.a.createElement(ee.b,null,a.a.createElement("span",null,this.props.intl.formatMessage(y.failedFetch)," ",a.a.createElement("a",{role:"button",href:window.location.href,onClick:()=>window.location.reload()},this.props.intl.formatMessage(y.reloadIssue)))),this.noOptionsMessageDefault=()=>this.props.intl.formatMessage(y.empty),this.loadingMessageDefault=()=>this.props.intl.formatMessage(p.a.loading),this.filterOption=e=>!!this.state.hasLastFetchFailed||this.props.filterOption&&this.props.filterOption(e,this.query||""),this.renderSelectField=()=>{
const e=this.props,{placeholder:t="",noOptionsMessage:s=this.noOptionsMessageDefault,loadingMessage:n=this.loadingMessageDefault,fieldId:i,onChangeMulti:r,invalidMessage:o,isOpen:c,hasAutocomplete:l,portalElement:u,intl:d,fetchSuggestions:p,additionalAnalyticsProps:m,debounceFetchSuggestionsTime:b,changeQueryValue:f,errorMessagePosition:g}=e,h=ne(e,["placeholder","noOptionsMessage","loadingMessage","fieldId","onChangeMulti","invalidMessage","isOpen","hasAutocomplete","portalElement","intl","fetchSuggestions","additionalAnalyticsProps","debounceFetchSuggestionsTime","changeQueryValue","errorMessagePosition"]),y=o?"error":void 0;return a.a.createElement(X,se({},oe,h,{filterOption:this.filterOption,key:i,fieldId:i,options:this.state.options,value:this.getSelectedValue(),styles:Object(te.a)(ee.f,ee.g,this.props.styles),additionalAnalyticsProps:m,isLoading:this.state.isLoading,isSearchable:l,menuIsOpen:c,menuPortalTarget:u,menuPlacement:"auto",placeholder:t,noOptionsMessage:s,
loadingMessage:n,validationState:y,formatOptionLabel:this.formatOptionLabel,onChange:this.onChange,onFocus:this.onFocus,onInputChange:this.onInputChange}))},this.renderErrorMessage=()=>{const{invalidMessage:e,fieldId:t,errorMessagePosition:s}=this.props;return e?a.a.createElement(ee.a,{key:`${t}-error-message`,errorMessagePosition:s},a.a.createElement(l.a,null,e)):null};const{onDataRequest:s,onDataLoaded:n,fetchSuggestions:i,debounceFetchSuggestionsTime:o,additionalAnalyticsProps:c}=this.props;if(this.query$=new r.Subject,this.subscription=this.query$.debounce((({isImmediate:e})=>e?r.Observable.empty():r.Observable.timer(o||0))).switchMap((({query:e,sessionId:t})=>{s&&s({isInitial:null===this.query}),this.setState({isLoading:!0});return i(e,t||void 0).then((e=>(this.setState({hasLastFetchFailed:!1}),e))).catch((e=>(b.h.safeErrorWithoutCustomerData("issue.select.transform-suggestions","Could not fetch or transform suggestions to display in select",new u.a({eventNameSuffix:"issue.error",
type:"js",app:"issue",event:e})),c&&b.h.safeErrorWithoutCustomerData("issue.select.fetch-transform-suggestions.details","Could not fetch or transform retrieved data",ie(ie({},c),{},{message:e.message})),Object(f.a)({meta:{id:"issueSelectFetchFailure",packageName:"jiraIssueView"},error:e,attributes:ie({},null!=c?c:{})}),this.setState({hasLastFetchFailed:!0}),[{items:[{content:this.getFailedFetchMessage(),value:"",isDisabled:!0}]}])))})).subscribe((e=>{this.setState({options:this.transformToOptions(e),isLoading:!1}),n&&n({isInitial:null===this.query})})),null!==(t=this.props.initialData)&&void 0!==t&&t.data){const{data:e,loading:t,error:s}=this.props.initialData;this.state={options:this.transformToOptions(e),isLoading:t,hasLastFetchFailed:s}}else this.state={options:[],isLoading:!0,hasLastFetchFailed:!1}}componentDidUpdate(e){var t,s;if(null!==(t=this.props.initialData)&&void 0!==t&&t.data&&null!==(s=e.initialData)&&void 0!==s&&s.data){
const{loading:t,error:s,data:n}=this.props.initialData;t===e.initialData.loading&&s===e.initialData.error||this.setState({options:this.transformToOptions(n),isLoading:t,hasLastFetchFailed:s})}}componentWillUnmount(){this.subscription.unsubscribe()}getSelectedValue(){const{value:e}=this.props;return e?Array.isArray(e)?e.map(ce):ce(e):null}render(){const{errorMessagePosition:e}=this.props,t=[this.renderSelectField()];return"top"===e?t.unshift(this.renderErrorMessage()):t.push(this.renderErrorMessage()),Object(g.isShortcutMenuEnabled)()?a.a.createElement(a.a.Fragment,null,t):a.a.createElement(d.b,null,a.a.createElement(a.a.Fragment,null,t))}}ue.displayName="SelectFieldView",ue.displayName="SelectFieldView",ue.defaultProps={isMulti:!1,canCreateNewItem:!1,value:null,placeholder:void 0,autoFocus:!1,debounceFetchSuggestionsTime:0,filterOption:oe.filterOption,errorMessagePosition:"top",optionValuesSafeForAnalytics:!1,onChangeMulti:c.a,onChange:c.a,onInputChange:c.a};t.a=Object(i.i)(ue)},
"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js":function(e,t,s){"use strict";s.d(t,"f",(function(){return u})),s.d(t,"g",(function(){return m})),s.d(t,"e",(function(){return b})),s.d(t,"b",(function(){return f})),s.d(t,"d",(function(){return g})),s.d(t,"c",(function(){return h})),s.d(t,"a",(function(){return y}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/picker/base/index.js"),r=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");function o(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function c(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?o(Object(s),!0).forEach((function(t){l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):o(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const u={multiValue:e=>c(c({},e),{},{backgroundColor:a.a.N20}),option:(e,t)=>c(c(c(c({},e),Object(i.b)(t)),{},{cursor:"pointer"},t.isFocused&&!t.isSelected?{backgroundColor:a.a.N20}:{}),{},{"&:hover":c(c({},t.isSelected?{}:{backgroundColor:a.a.N20}),t.isDisabled?{backgroundColor:"transparent",cursor:"not-allowed"}:{})}),menu:e=>c(c({},e),{},{zIndex:r.f.modal}),menuPortal:e=>c(c({},e),{},{transform:"translateZ(0)",zIndex:r.f.modal})},d=r.e/4+"px",p=r.e/2+"px",m={indicatorsContainer:e=>c(c({},e),{},{paddingRight:r.e/2+"px"}),loadingIndicator:e=>c(c({},e),{},{paddingLeft:d,
paddingRight:p}),clearIndicator:e=>c(c({},e),{},{paddingLeft:d,paddingRight:p}),dropdownIndicator:e=>c(c({},e),{},{display:"none"})},b=n.default.span(["display:flex;align-items:center;"]),f=Object(n.default)(b)(["justify-content:center;"]),g=n.default.span(["display:flex;padding-right:","px;"],r.e),h=n.default.span(["display:flex;"]),y=n.default.div(["",";&&& > div{min-height:auto;}"],(e=>"top"===e.errorMessagePosition?`margin-bottom: ${.75*r.e}px;`:""))},"./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js":function(e,t,s){"use strict";function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.d(t,"a",(function(){return i}));const i=(e,...t)=>{
const s=e||{};if(0===t.length)return s;const i=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach((function(t){a(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},s);return t.forEach((e=>{e&&Object.keys(e).forEach((t=>{const s=i[t],n=e[t];i[t]=s?(e,...t)=>n(s(e,...t),...t):n}))})),i}},"./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg":function(e,t,s){e.exports=s.p+"assets/default-avatar.b7f1021e538053b2b6f8108284f2ffc4.8.svg"},"./src/packages/issue/issue-view/src/views/field/user/assets/add.png":function(e,t,s){e.exports=s.p+"assets/add.cb4b04e861ca3b9ce2a2c8032dde1c45.8.png"},"./src/packages/issue/issue-view/src/views/issue-base/common/animations/classy-animator.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const r=s("./node_modules/styled-components/dist/styled-components.browser.esm.js").default.div(["position:absolute;right:0;top:0;width:","px;",";transition:",";overflow:hidden;opacity:",";visibility:",";"],(e=>e.show?e.width:0),(e=>null!=e.height?`height: ${e.height}px`:""),(e=>e.show?"width 0.5s cubic-bezier(0.15, 1, 0.3, 1)":"width 0.5s cubic-bezier(0.15, 1, 0.3, 1), opacity 0, 0.5s, visibility 0, 0.5s"),(e=>e.show?1:0),(e=>e.show?"visible":"hidden")),o=Object(n.forwardRef)(((e,t)=>a.a.createElement(r,i({innerRef:t},e),e.children)));t.a=o},"./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/confluence-pages-view.js":function(e,t,s){"use strict"
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-intl/lib/index.es.js"),r=s("./node_modules/react-redux/es/index.js"),o=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),c=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),l=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),u=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),d=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),p=s("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),m=s("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js"),b=s("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js"),f=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),g=s("./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js"),h=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),y=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),O=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/item-line-card/item-line-card-group-view.js"),j=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),v=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),E=s.n(v),k=s("./node_modules/@atlaskit/icon/glyph/warning.js"),w=s.n(k),S=s("./src/packages/issue/issue-view/src/views/common/delete-button/index.js")
;const C=o.default.div(["display:flex;align-items:center;"]),I=Object(o.default)(C)(["width:100%;height:100%;position:relative;"]),T=o.default.div(["margin-left:-2px;"]),P=o.default.div(["margin-left:-1px;"]),_=o.default.div(["padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],d.e/2),x=o.default.div(["padding-left:","px;overflow:hidden;"],d.e),D=o.default.div(["padding-left:","px;"],d.e);class A extends n.Component{constructor(...e){super(...e),this.onDeleteClick=e=>{const{onDeleteClick:t,globalId:s}=this.props;e.stopPropagation(),t(s)},this.authenticateApplink=e=>{const{error:t,repairLinkHref:s,onAuthenticateApplink:n}=this.props;"APPLINK_REQ_AUTH"===t&&s&&n&&n(s),e.stopPropagation()},this.openRepairApplink=e=>{const{repairLinkHref:t}=this.props;t&&window.open(t,"_blank"),e.stopPropagation()},this.openConfluenceLink=e=>{window.open(this.props.href,"_blank"),e.stopPropagation()},this.renderErrorIcon=()=>a.a.createElement(T,null,a.a.createElement(w.a,{
label:"",primaryColor:c.a.Y300})),this.renderPadlockIcon=()=>a.a.createElement(P,null,a.a.createElement(E.a,{label:"",primaryColor:c.a.B300})),this.renderErrorText=()=>a.a.createElement(_,null,a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.loading-error",defaultMessage:"We couldn't load this page."})),this.renderAuthRequiredText=()=>a.a.createElement(_,null,a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.auth-required",defaultMessage:"Authenticate with Confluence to see this page."})),this.renderMissingApplinkText=()=>a.a.createElement(_,null,a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.missing-applink",defaultMessage:"Confluence site not linked."}))}renderIcon(){const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderPadlockIcon():this.renderErrorIcon()}renderText(){const{error:e}=this.props
;return"APPLINK_REQ_AUTH"===e?this.renderAuthRequiredText():"APPLINK_MISSING"===e?this.renderMissingApplinkText():this.renderErrorText()}renderAuthorizationRepairLink(){return a.a.createElement(D,null,a.a.createElement(j.a,{appearance:"link",spacing:"none",onClick:this.authenticateApplink},a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.auth-repair-link",defaultMessage:"Authenticate"})))}renderApplinkRepairLink(){return a.a.createElement(D,null,a.a.createElement(j.a,{appearance:"link",spacing:"none",onClick:this.openRepairApplink},a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.applink-repair-link",defaultMessage:"Repair"})))}renderRepairLink(){const{error:e,href:t,repairLinkHref:s}=this.props;if(s){let s;"APPLINK_MISSING"===e?s=this.renderApplinkRepairLink():"APPLINK_REQ_AUTH"===e&&(s=this.renderAuthorizationRepairLink());const n=t?a.a.createElement(x,null,"\u2022"):null;return a.a.createElement(a.a.Fragment,null,s,n)}return null}
renderLink(){return a.a.createElement(D,null,a.a.createElement(j.a,{appearance:"link",spacing:"none",onClick:this.openConfluenceLink},a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card-error.open-link",defaultMessage:"Open in Confluence"})))}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return a.a.createElement(S.a,{show:e||t,onClick:this.onDeleteClick})}render(){return a.a.createElement(I,null,this.renderIcon(),this.renderText(),this.renderRepairLink(),this.renderLink(),this.renderDeleteButton())}}A.displayName="ConfluencePageLineCardError";var L=s("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),M=s("./node_modules/@atlaskit/icon-object/glyph/blog/16.js"),R=s.n(M),N=s("./node_modules/@atlaskit/icon-object/glyph/page/16.js"),F=s.n(N),U=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js")
;const V=o.default.div(["display:flex;align-items:center;"]),K=Object(o.default)(V)(["padding-left:","px;"],d.e),W=Object(o.default)(V)(["width:100%;height:100%;position:relative;"]),B=o.default.div(["height:","px;padding-right:2px;"],3.5*d.e),H=o.default.div([""," padding-left:","px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(e=>e.isFocused&&`color: ${c.a.B400};`),d.e);class $ extends n.Component{constructor(...e){super(...e),this.onDeleteClick=e=>{const{onDeleteClick:t,globalId:s}=this.props;e.stopPropagation(),t(s)}}renderPageIcon(){const e="blogpost"===this.props.pageType,t=e?a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card.blog-icon",defaultMessage:"Confluence blog post"}):a.a.createElement(i.c,{id:"issue.details.confluence-pages.line-card.page-icon",defaultMessage:"Confluence page"});return a.a.createElement(U.a,{content:t,position:"bottom"},e?a.a.createElement(R.a,{label:""}):a.a.createElement(F.a,{label:""}))}renderPageTitle(){
const{pageTitle:e,isFocused:t}=this.props;return a.a.createElement(H,{isFocused:t},e)}renderLastUpdateAvatar(){const{userDisplayName:e,userAvatarUrl:t}=this.props;return t?e?a.a.createElement(K,null,a.a.createElement(U.a,{content:e,position:"bottom"},a.a.createElement(B,null,a.a.createElement(L.a,{name:e,src:t,size:"small"})))):a.a.createElement(K,null,a.a.createElement(L.a,{src:t,size:"small"})):null}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return a.a.createElement(S.a,{show:e||t,onClick:this.onDeleteClick})}render(){return a.a.createElement(W,null,this.renderPageIcon(),this.renderPageTitle(),this.renderLastUpdateAvatar(),this.renderDeleteButton())}}$.displayName="ConfluencePageLineCard";var G=$;class q extends n.Component{constructor(...e){super(...e),this.state={modalOpen:!1,linkToDeleteId:null},this.onCancelDelete=()=>{this.setState({modalOpen:!1,linkToDeleteId:null})},this.onConfirmDelete=()=>{
const{onDeleteConfluencePageLink:e}=this.props,{linkToDeleteId:t}=this.state;null!=t&&e(t),this.setState({modalOpen:!1,linkToDeleteId:null})},this.onDeleteClick=e=>{this.setState({modalOpen:!0,linkToDeleteId:e})},this.handleErrorLineCardClick=e=>{e.link&&e.link.href&&window.open(e.link.href,"_blank")},this.handleLineCardClick=e=>{e.href&&window.open(e.href,"_blank")},this.handleClick=(e,t)=>{this.props.onClick&&this.props.onClick(e,t),e.error?this.handleErrorLineCardClick(e):this.handleLineCardClick(e)},this.renderErrorLineCard=(e,t,s)=>a.a.createElement(A,{globalId:e.link.globalId,error:e.error,href:e.link.href,repairLinkHref:e.repairLink?e.repairLink.href:null,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteClick:this.onDeleteClick,isHovering:t,isFocused:s}),this.renderLineCard=(e,t,s)=>a.a.createElement(G,{globalId:e.globalId,pageTitle:e.title,pageType:e.type,userDisplayName:e.lastUpdatedContext&&e.lastUpdatedContext.user.displayName,
userAvatarUrl:e.lastUpdatedContext&&e.lastUpdatedContext.user.avatarUrl,onDeleteClick:this.onDeleteClick,isHovering:t,isFocused:s})}render(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{items:this.props.pages,groupId:this.props.groupId,onClick:this.handleClick},((e,t,s,n)=>n.error?this.renderErrorLineCard(n,e,s):this.renderLineCard(n,e,s))),this.state.modalOpen&&a.a.createElement(y.a,{appearance:"danger",headerMessage:a.a.createElement(i.c,{id:"issue.details.confluence-pages.delete-confirmation-modal.title",defaultMessage:"Delete the Confluence page link?"}),contentMessage:a.a.createElement(i.c,{id:"issue.details.confluence-pages.delete-confirmation-modal.content",defaultMessage:"You can add the page later again if you need to."}),confirmActionText:a.a.createElement(i.c,{id:"issue.details.confluence-pages.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete"}),cancelActionText:a.a.createElement(i.c,{
id:"issue.details.confluence-pages.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel"}),onConfirm:this.onConfirmDelete,onCancel:this.onCancelDelete}))}}q.displayName="ConfluencePageLineCardGroup";var z=s("./node_modules/lodash/range.js"),Y=s.n(z),Q=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),J=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),Z=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js"),X=s("./src/packages/issue/issue-view/src/common/skeleton/text-line-mask-view.js");class ee extends n.Component{getItems(){return Y()(this.props.itemCount).map((e=>a.a.createElement(X.a,{key:e,fontSize:20,lineHeight:41,intrusion:0})))}render(){const{paddingTopInPixels:e,paddingBottomInPixels:t}=this.props;return a.a.createElement(Z.a,null,a.a.createElement(J.b,null),a.a.createElement(Q.a,{paddingTop:e,paddingBottom:t},this.getItems()))}}ee.displayName="ItemLineCardGroup",
ee.defaultProps={paddingTopInPixels:0,paddingBottomInPixels:0};var te=s("./node_modules/lodash/noop.js"),se=s.n(te),ne=s("./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js");const ae=Object(i.h)({label:{id:"issue.confluence-links-add-label",defaultMessage:"Link a Confluence Page"}}),ie=o.default.span(["margin-left:auto;"]);class re extends n.Component{render(){return a.a.createElement(ie,null,a.a.createElement(ne.a,{label:this.props.intl.formatMessage(ae.label),onClick:this.props.onClick}))}}re.displayName="AddButton",re.defaultProps={onClick:se.a};var oe=Object(i.i)(re),ce=s("./src/packages/platform/utils/types/src/general.js"),le=s("./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js"),ue=s("./node_modules/reselect/lib/index.js"),de=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const pe=Object(ue.createSelector)(de.H,h.h,h.j,((e,t=[],s=[])=>{
const n=e.recentlyVisitedConfluencePages||[],a=t.concat(s).map((e=>e.href));return n.filter((e=>!a.includes(e.href)))}));var me=s("./node_modules/lodash/isEmpty.js"),be=s.n(me),fe=s("./node_modules/lodash/trim.js"),ge=s.n(fe),he=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),ye=s("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),Oe=s("./src/packages/issue/issue-view/src/feature-flags.js"),je=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/icon/glyph/page.js")),ve=s.n(je),Ee=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/analytics-context/index.js"),ke=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/touchpoint-context/index.js"),we=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/messages.js"),Se=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/ui/common/better-together-button/index.js");const Ce=({intl:{formatMessage:e}})=>{const{isEligible:t,isInExperiment:s,touchpointFlow:n}=Object(ke.b)();return Object(Ee.c)(t&&"ACCESS_EXISTS"===n),t&&s&&"ACCESS_EXISTS"===n?a.a.createElement(U.a,{content:e(we.a.createNewPageButtonTooltip)},a.a.createElement(Ee.a,null),a.a.createElement(Se.a,{appearance:"subtle",flow:"post-expand",actionSubjectId:"createNewPageBtn",iconBefore:a.a.createElement(ve.a,{
label:"create new page"})},e(we.a.createNewPageButton))):null};Ce.displayName="CreatePageButton";var Ie=Ce;const Te="addconfluencelink.error.duplicate",Pe="addconfluencelink.error.page.forbidden",_e="addconfluencelink.error.issueId.invalid",xe="addconfluencelink.error.no.matching.app.link",De="addconfluencelink.error.pageid.notfound",Ae="addconfluencelink.error.page.unauthorized",Le="addconfluencelink.error.url.invalid",Me="addconfluencelink.error.url.required";var Re=Object(i.h)({fieldLabel:{id:"issue.views.confluence-pages.link.label",defaultMessage:"Search pages or paste in a link"},fieldPlaceholder:{id:"issue.views.confluence-pages.link.placeholder",defaultMessage:"Search pages or paste in a link"},genericErrorText:{id:"issue.views.confluence-pages.link.error.generic",defaultMessage:"We're having trouble. Check your connection and try again."},duplicateErrorText:{id:"issue.views.confluence-pages.link.error.duplicate",defaultMessage:"That page is already linked to this issue."},
forbiddenErrorText:{id:"issue.views.confluence-pages.link.error.forbidden",defaultMessage:"You don't have permission to link to Confluence pages."},issueIdErrorText:{id:"issue.views.confluence-pages.link.error.issue-id",defaultMessage:"We're having trouble. Check your connection and try again."},noMatchingApplinkErrorText:{id:"issue.views.confluence-pages.link.error.no-matching-app-link",defaultMessage:"You don't have an application link set up for that Confluence site."},pageIdNotFoundErrorText:{id:"issue.views.confluence-pages.link.error.page-id-not-found",defaultMessage:"We can't find that page. It might be deleted or restricted."},unauthorizedErrorText:{id:"issue.views.confluence-pages.link.error.unauthorized",defaultMessage:"You need to authorize this pages' Confluence site."},urlInvalidErrorText:{id:"issue.views.confluence-pages.link.error.url-invalid",defaultMessage:"That URL doesn't look right. Try entering it again."},urlRequiredErrorText:{
id:"issue.views.confluence-pages.link.error.url-required",defaultMessage:"That URL doesn't look right. Try entering it again."},linkButton:{id:"issue.views.confluence-pages.link.link-button",defaultMessage:"Link"},cancelButton:{id:"issue.views.confluence-pages.link.cancel-button",defaultMessage:"Cancel"}});const Ne={[Te]:Re.duplicateErrorText,[Pe]:Re.forbiddenErrorText,[_e]:Re.issueIdErrorText,[xe]:Re.noMatchingApplinkErrorText,[De]:Re.pageIdNotFoundErrorText,[Ae]:Re.unauthorizedErrorText,[Le]:Re.urlInvalidErrorText,[Me]:Re.urlRequiredErrorText}
;var Fe=e=>Ne[e]||Re.genericErrorText,Ue=s("./node_modules/keycode/index.js"),Ve=s.n(Ue),Ke=s("./node_modules/react-select/dist/base/dist/react-select-cac0a5ae.browser.esm.js"),We=s("./node_modules/@atlaskit/select/dist/es2019/CreatableSelect.js"),Be=s("./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js"),He=s("./node_modules/@atlaskit/icon/glyph/link-filled.js"),$e=s.n(He),Ge=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js");const qe=o.default.div(["display:flex;align-items:center;height:34px;"]),ze=o.default.div(["margin-right:","px;line-height:1;"],2*d.e),Ye=o.default.div(["display:flex;flex-direction:column;"]),Qe=o.default.div(["line-height:1.25em;font-size:14px;font-weight:500;"]);class Je extends n.PureComponent{render(){const{href:e,onSelect:t}=this.props;return a.a.createElement(qe,{onClick:()=>t&&t(e)},a.a.createElement(ze,null,a.a.createElement($e.a,{label:"",size:"medium",primaryColor:c.a.B200
})),a.a.createElement(Ye,null,a.a.createElement(Qe,null,a.a.createElement(Ge.a,null,e))))}}Je.displayName="LinkItem";var Ze=Je,Xe=s("./node_modules/@atlaskit/icon-object/glyph/blog/24.js"),et=s.n(Xe),tt=s("./node_modules/@atlaskit/icon-object/glyph/page/24.js"),st=s.n(tt);const nt=o.default.div(["display:flex;align-items:center;height:34px;"]),at=o.default.div(["margin-right:","px;line-height:1;"],2*d.e),it=o.default.div(["display:flex;flex-direction:column;"]),rt=o.default.div(["line-height:1.25em;font-size:14px;font-weight:500;"]),ot=o.default.div(["font-size:12px;color:",";"],c.a.N200);class ct extends n.PureComponent{render(){if(!this.props.page)return null;const{title:e,space:t,type:s,href:n}=this.props.page;return a.a.createElement(nt,{onClick:()=>this.props.onSelect&&this.props.onSelect(n)},a.a.createElement(at,null,"blogpost"===s?a.a.createElement(et.a,{label:""}):a.a.createElement(st.a,{label:""
})),a.a.createElement(it,null,a.a.createElement(rt,null,a.a.createElement(Ge.a,null,e)),a.a.createElement(ot,null,a.a.createElement(Ge.a,null,t))))}}ct.displayName="ConfluencePageItem";var lt=ct,ut=Object(i.h)({enterOrSelectConfluenceLink:{id:"issue.views.confluence-pages.link.selector.placeholder",defaultMessage:"Search pages or paste in a link"},noOptionsMessage:{id:"issue.views.confluence-pages.link.selector.noOptionsMessage",defaultMessage:"No recently visited pages"}});const dt=o.default.div(["height:46px;"]);function pt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function mt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(s),!0).forEach((function(t){bt(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function bt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ft(){return(ft=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const gt=e=>{const{innerProps:t,innerRef:s,getStyles:n,data:i}=e,r=n("option",e);return a.a.createElement(dt,{style:r},a.a.createElement("div",ft({},t,{ref:s}),i.page?a.a.createElement(lt,ft({key:`item_key-${i.page.href}`},i)):a.a.createElement(Ze,{href:Object(ce.i)(e.value)})))};gt.displayName="Option";class ht extends n.Component{constructor(...e){super(...e),this.state={isMenuOpen:!1,value:void 0},this.onKeyDown=e=>{switch(e.keyCode){
case Ve()("enter"):this.props.onEnter&&!this.state.isMenuOpen&&(this.props.onEnter(),e.stopPropagation())}},this.onMenuOpen=()=>{const{onMenuOpen:e}=this.props;e&&e(),this.setState({isMenuOpen:!0})},this.onMenuClose=()=>this.setState({isMenuOpen:!1}),this.handleChange=e=>{e&&e.page&&this.props.onSelect&&this.props.onSelect(),this.setState({value:e}),this.props.onChange(e?e.value:null)}}render(){const{value:e}=this.state,{options:t,intl:{formatMessage:s},link:n,isLoading:i,filterOption:r=Object(Ke.b)(),customComponents:o={}}=this.props;return a.a.createElement(Be.a,{validationState:this.props.validationState||"default",validationMessage:this.props.validationMessage},a.a.createElement(We.a,{isClearable:!0,isDisabled:i,filterOption:r,isLoading:i,onChange:this.handleChange,value:""!==n&&e?e:null,components:mt({Option:gt},o),options:t,placeholder:s(ut.enterOrSelectConfluenceLink),validationState:this.props.validationState||"default",getOptionLabel:e=>e.page?e.page.href:e.value,
maxMenuHeight:256,autoFocus:!0,menuPlacement:"auto",minMenuHeight:100,onKeyDown:this.onKeyDown,onMenuOpen:this.onMenuOpen,onMenuClose:this.onMenuClose,noOptionsMessage:()=>s(ut.noOptionsMessage)}))}}ht.displayName="LinkSelect",ht.defaultProps={isLoading:!1,link:void 0};var yt=e=>a.a.createElement(ht,e),Ot=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const jt=Object(Ot.a)(j.a,{target:"eplslgz0"})("margin-left:",d.e,"px !important;"),vt=o.default.div(["display:inline-flex;justify-content:flex-end;"]),Et=o.default.div(["margin-top:","px;display:flex;justify-content:space-between;"],d.e),kt=o.default.div([""]);class wt extends n.Component{constructor(e){super(e),this.onChildContainerRefSet=e=>{this.childContainer=e},this.onChange=e=>{const{isInvalid:t,onInvalidLinkModified:s}=this.props,n=ge()(e),a=be()(n);this.setState({isDisabled:a,link:n}),t&&s()},this.onSubmitClicked=()=>{this.onSubmit(),this.props.onSubmitClickAnalytics()},this.onCancelClicked=()=>{
this.closeAndReset(),this.props.onCancelClickAnalytics()},this.onEnterPressed=()=>{this.onSubmit(),this.props.onEnterKeyPressedAnalytics()},this.onEscPressed=()=>{this.closeAndReset(),this.props.onEscapeKeyPressedAnalytics()},this.onSelect=e=>{this.setState({link:e,isDisabled:!1}),this.props.onSelectAnalytics()},this.childContainer=void 0,this.initialState={link:"",isDisabled:!0,showList:!1},this.state=this.initialState}componentDidMount(){Object(ye.a)(this.childContainer),this.props.requestRecentlyViewedPages()}componentDidUpdate(e){this.props.createLinkClickedCount!==e.createLinkClickedCount&&Object(ye.a)(this.childContainer),this.props.linkedPagesCount>e.linkedPagesCount&&!this.props.isLoading&&e.isLoading&&this.resetAndFocus()}onSubmit(){const{isDisabled:e,link:t}=this.state,{isLoading:s,onSubmit:n}=this.props;e||s||n(t)}closeAndReset(){this.props.isLoading||(this.reset(),this.props.onCancel())}resetAndFocus(){this.reset()}reset(){this.setState(this.initialState)}render(){
const{intl:e,intl:{formatMessage:t},errorMessage:s,isInvalid:n,isLoading:i,recentlyViewedPages:r}=this.props,{link:o,isDisabled:c}=this.state,l=r.map((e=>({label:e.title,value:e.href,page:e}))),u=Object(Oe.getCrossJoinViaEpicTouchpointFlag)();return a.a.createElement("div",{ref:this.onChildContainerRefSet},a.a.createElement(he.a,{onEscape:this.onEscPressed},a.a.createElement(yt,{options:l,onChange:this.onChange,intl:e,validationMessage:n?t(Fe(s)):void 0,validationState:n?"error":"default",onSelect:this.props.onSelectAnalytics,onEnter:this.onEnterPressed,link:o,isLoading:i})),a.a.createElement(Et,null,a.a.createElement(kt,null,"not-enrolled"!==u&&a.a.createElement(Ie,{intl:e})),a.a.createElement(vt,null,a.a.createElement(jt,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:c,isLoading:i},t(Re.linkButton)),a.a.createElement(jt,{appearance:"subtle",onClick:this.onCancelClicked},t(Re.cancelButton)))))}}wt.displayName="ConfluencePageCreateLinkView"
;var St=Object(f.a)([i.i,Object(l.a)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked"}),Object(l.a)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(l.a)("confluencePagesCreateLinkView",{onSubmit:"onSubmit"}),Object(u.a)({onSubmitClickAnalytics:"linkConfluencePage",onCancelClickAnalytics:"cancelLinkConfluencePage",onEnterKeyPressedAnalytics:"linkConfluencePage",onEscapeKeyPressedAnalytics:"cancelLinkConfluencePage"}),Object(l.a)("recentlyVisitedPages",{onSelectAnalytics:"selected"}),Object(u.a)({onSelectAnalytics:"selectConfluencePage"}),Object(r.connect)((e=>({linkedPagesCount:Object(h.g)(e),errorMessage:Object(h.b)(e),isInvalid:Object(h.d)(e),isLoading:Object(h.e)(e),createLinkClickedCount:Object(h.a)(e),recentlyViewedPages:pe(e)})),(e=>({onInvalidLinkModified:()=>e(Object(m.b)()),onCancel:()=>e(Object(m.i)()),onSubmit:(t,s)=>e(Object(m.c)(Object(ce.i)(t),s)),
requestRecentlyViewedPages:()=>e(Object(le.b)())})))])(wt);const Ct=o.default.h3([""," margin:0;"],c.d.h200()),It=o.default.div(["margin:","px 0;padding-right:1px;"],d.e);class Tt extends n.Component{constructor(...e){super(...e),this.renderHeading=()=>{const{canLinkConfluencePage:e,onAddButtonClicked:t}=this.props;return a.a.createElement(b.c,null,a.a.createElement(b.e,null,a.a.createElement(i.c,{id:"issue.details.confluence-pages.heading",defaultMessage:"Confluence pages"})),a.a.createElement(b.d,null,e&&this.hasLinkedPages()&&a.a.createElement(oe,{onClick:t})))},this.renderLinkedPagesIfAny=()=>this.hasAnyLinkedPageLoaded()&&this.props.linkedPages?a.a.createElement(q,{groupId:"linked-confluence-pages",pages:this.props.linkedPages,onClick:this.props.onLinkedPageClicked,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteConfluencePageLink:this.props.onDeleteConfluencePageLink}):null,
this.renderMentionedPagesIfAny=()=>this.hasAnyMentionedPageLoaded()&&this.props.mentionedPages?a.a.createElement(q,{groupId:"mentioned-confluence-pages",pages:this.props.mentionedPages,onClick:this.props.onMentionedPageClicked,onAuthenticateApplink:this.props.onAuthenticateApplink,onDeleteConfluencePageLink:this.props.onDeleteConfluencePageLink}):null}shouldShowConfluencePages(){return this.props.isCreateLinkedPageOpened||this.hasLinkedPages()||this.hasMentionedPages()}hasLinkedPages(){return this.props.linkedPages&&this.props.linkedPages.length>0}hasMentionedPages(){return this.props.mentionedPages&&this.props.mentionedPages.length>0}hasAnyLinkedPageLoaded(){return this.props.linkedPages&&this.props.linkedPages.length>0}hasAnyMentionedPageLoaded(){return this.props.mentionedPages&&this.props.mentionedPages.length>0}renderLinkedPages(){return a.a.createElement(It,null,this.props.linkedPages?this.renderLinkedPagesIfAny():a.a.createElement(ee,{itemCount:this.props.linkedPagesCachedCount
}))}renderMentionedPages(){return a.a.createElement(It,null,a.a.createElement(Ct,null,a.a.createElement(i.c,{id:"issue.details.confluence-pages.mentioned-on",defaultMessage:"mentioned on"})),this.props.mentionedPages?this.renderMentionedPagesIfAny():a.a.createElement(ee,{itemCount:this.props.mentionedPagesCachedCount}))}renderCreateLinkedPage(){return this.props.isCreateLinkedPageOpened?a.a.createElement(St,null):null}renderConfluencePageFragment(){return a.a.createElement(a.a.Fragment,null,this.renderHeading(),this.hasLinkedPages()&&this.renderLinkedPages(),this.hasMentionedPages()&&this.renderMentionedPages(),this.renderCreateLinkedPage())}render(){return this.props.isConfluencePageLinksEnabled&&this.shouldShowConfluencePages()?this.renderConfluencePageFragment():null}}Tt.displayName="ConfluencePagesView",Tt.defaultProps={isConfluencePageLinksEnabled:!1,linkedPagesCachedCount:0,mentionedPagesCachedCount:0};t.a=Object(f.a)([Object(l.a)("ItemLineCardGroup",{
onMentionedPageClicked:"clicked",onLinkedPageClicked:"clicked"}),Object(u.a)({onMentionedPageClicked:"MentionedConfluencePage",onLinkedPageClicked:"LinkedConfluencePage"}),Object(l.a)("DeleteConfluencePage",{onDeleteConfluencePageLink:"clicked"}),Object(u.a)({onDeleteConfluencePageLink:e=>({name:"onDeleteConfluencePageLink",globalId:e})}),Object(r.connect)((e=>({isCreateLinkedPageOpened:Object(h.f)(e),linkedPages:Object(h.h)(e),linkedPagesCachedCount:Object(h.g)(e),mentionedPages:Object(h.j)(e),mentionedPagesCachedCount:Object(h.i)(e),isConfluencePageLinksEnabled:Object(h.c)(e),canLinkConfluencePage:Object(g.a)(e)})),(e=>({onAuthenticateApplink:t=>e(Object(p.a)(t)),onDeleteConfluencePageLink:t=>e(Object(m.f)(t)),onAddButtonClicked:()=>e(Object(m.h)())})))])(Tt)},"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n={meta:{id:"jiraCrossJoinViaEpicTouchpoint",
packageName:"issue",teamName:"cross-flow-growth"}}},"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/analytics-context/index.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return w})),s.d(t,"a",(function(){return S}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/growth/cross-flow-utils/src/services/index.js")),r=s("./src/packages/issue/issue-context-service/src/main.js"),o=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),c=s("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),l=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),u=s("./src/packages/issue/project-context-service/src/main.js"),d=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),p=s("./src/packages/issue/issue-view/src/feature-flags.js");function m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function b(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?m(Object(s),!0).forEach((function(t){f(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function f(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function g(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const h=(e,t)=>{const s=null==e?void 0:e.products[t];return s&&"ACTIVE"===s.state?s.edition:null},y=e=>{let{isLicenseInformationReady:t,licenseInformation:s,isSimplifiedProject:n,fetchXflowLicenseInformation:a}=e
;return b(b({},g(e,["isLicenseInformationReady","licenseInformation","isSimplifiedProject","fetchXflowLicenseInformation"])),{},{jswEdition:h(s,"jira-software.ondemand"),confluenceEdition:h(s,"confluence.ondemand")})};function O(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function j(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?O(Object(s),!0).forEach((function(t){v(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):O(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function E(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const k=Object(n.createContext)({hasConnectedPages:!1,routeName:"",touchpointFlow:null,licenseInformation:null,isSiteAdmin:!1,isLicenseInformationReady:!1,isSimplifiedProject:!1,fetchXflowLicenseInformation:async()=>{}});t.b=e=>{let{isEligible:t,children:s}=e,l=E(e,["isEligible","children"]);const{isSiteAdmin:p,baseUrl:m,cloudId:b}=Object(d.c)(),f=Object(r.g)(),g=Object(u.i)(f),h=Object(u.b)(g),[O,v]=Object(n.useState)({licenseInformation:null,isLicenseInformationReady:!1}),w=Object(n.useCallback)((async()=>{try{v({licenseInformation:await Object(i.a)(m,b),isLicenseInformationReady:!0})}catch{v({licenseInformation:null,isLicenseInformationReady:!0})}}),[m,b]),S=j(j(j({},l),O),{},{isSiteAdmin:p,
isSimplifiedProject:h,fetchXflowLicenseInformation:w});return a.a.createElement(k.Provider,{value:S},a.a.createElement(o.a,{sourceName:"crossJoinViaEpicTouchpoint",sourceType:c.f,attributes:y(S)},s))};const w=e=>{const t=Object(n.useContext)(k);Object(n.useEffect)((()=>{e&&(t.isLicenseInformationReady?Object(p.getCrossJoinViaEpicTouchpointFlag)(!0,j({growthInitiative:"cross-flow",projectConfig:t.isSimplifiedProject?"next-gen":"classic"},y(t))):t.fetchXflowLicenseInformation())}),[t,e])},S=()=>{const{isLicenseInformationReady:e}=Object(n.useContext)(k);return e?a.a.createElement(l.b,null):null}},"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/cross-join-context/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return y})),s.d(t,"b",(function(){return O}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js")),r=s("./src/packages/issue/issue-context-service/src/main.js"),o=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),c=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),l=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),u=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/constants.js"),d=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),p=s("./src/packages/platform/utils/fetch/src/utils/requests.js");var m=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/touchpoint-context/index.js");function b(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function f(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?b(Object(s),!0).forEach((function(t){g(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):b(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function g(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const h=Object(n.createContext)({collaborators:[],isFetchingCollaborators:!1,directJoinError:null,isAddingUserToConfluence:!1,addUserToConfluence:async()=>{},triggerPollingAfterBetterTogether:async()=>{}}),y=({children:e})=>{
const{cloudId:t}=Object(l.c)(),{createAnalyticsEvent:s}=Object(o.a)(),{touchpointFlow:b,hasConnectedPages:g,linkedPages:y,linkedPagesCount:O,mentionedPages:j,mentionedPagesCount:v,refreshIssueRemoteData:E,refreshCapability:k,setTouchpointFlow:w}=Object(m.b)(),S=Object(r.g)(),[C,I]=Object(n.useState)(!1),[T,P]=Object(n.useState)([]),[_,x]=Object(n.useState)(!1),[D,A]=Object(n.useState)(null),[L,M]=Object(n.useState)(!1),R=Object(n.useRef)(0),N=Object(n.useRef)(O),F=Object(n.useCallback)((async()=>{x(!0);try{const e=await(async e=>(await Object(p.b)(`/gateway/api/xflow/${e}/confluence/collaborators`)).map((e=>({key:e.id,name:e.name,src:e.avatarUrl}))))(t);P(e),x(!1),Object(c.b)(s({}),"fetchConfluenceCollaborators succeeded")}catch(e){x(!1),Object(c.b)(s({}),"fetchConfluenceCollaborators failed"),Object(i.a)(f(f({},u.a),{},{error:e}))}}),[t,s]),U=Object(n.useCallback)((async()=>{try{M(!0);const e=await(async e=>{const t=`ari:cloud:confluence::site/${e}`
;return(await Object(d.a)("/gateway/api/invitations/v1/access-requests/request",{method:"POST",body:JSON.stringify({resource:t}),credentials:"include"})).results[t]})(t);"ACCESS_GRANTED"===e||"ACCESS_EXISTS"===e?(Object(c.b)(s({}),"userDirectJoinConfluence succeeded"),I(!0)):(Object(c.b)(s({}),"userDirectJoinConfluence failed"),Object(i.a)(f(f({},u.a),{},{error:new Error(`access request returned unexpected response: ${e}`)})),M(!1),A("JOIN_CONFLUENCE"))}catch(e){Object(c.b)(s({}),"userDirectJoinConfluence failed"),Object(i.a)(f(f({},u.a),{},{error:e})),M(!1),A("JOIN_CONFLUENCE")}}),[t,s]),V=Object(n.useCallback)((async()=>{I(!0)}),[]);return Object(n.useEffect)((()=>{let e;const t=!!y&&y.length>0,n=!!j&&j.length>0,a=!!y&&y.length===N.current+1;return C&&(L&&(t||n)||a?(Object(c.b)(s({}),"userPollConfluencePages succeeded"),M(!1),I(!1),R.current=0,N.current+=1,w("ACCESS_EXISTS")):R.current<25?(R.current+=1,
e=setTimeout((()=>E(S)),2e3)):(Object(c.b)(s({}),"userPollConfluencePages failed"),Object(i.a)(f(f({},u.a),{},{error:new Error("Timeout polling for new linked pages")})),A("POLL_CONTENT"),R.current=0,M(!1),I(!1),k())),()=>clearTimeout(e)}),[L,s,S,y,O,j,v,k,E,C,w]),Object(n.useEffect)((()=>{("DIRECT_ACCESS"===b&&g||"REQUEST_ACCESS"===b)&&F()}),[F,g,b]),a.a.createElement(h.Provider,{value:{collaborators:T,isFetchingCollaborators:_,isAddingUserToConfluence:L,addUserToConfluence:U,directJoinError:D,triggerPollingAfterBetterTogether:V}},e)};y.displayName="CrossJoinProvider";const O=()=>Object(n.useContext)(h)},"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/touchpoint-context/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return R}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/lodash/noop.js"),o=s.n(r),c=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/react-resource-router/build/esm/index.js")),l=s("./src/packages/platform/utils/constants/src/spa-routes.js"),u=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),d=s("./src/packages/platform/utils/types/src/general.js"),p=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),m=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),b=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),f=s("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js"),g=s("./src/packages/issue/issue-view/src/actions/issue-remote-data-actions.js"),h=s("./src/packages/issue/issue-view/src/feature-flags.js"),y=s("./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js"),O=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),j=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/constants.js"),v=s("./src/packages/platform/utils/fetch/src/utils/requests.js")
;function E(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function k(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var w=async e=>{const t=`ari:cloud:confluence::site/${e}`,s=(await Object(v.b)(`/gateway/api/invitations/v1/access-requests/capabilities?resource=${t}`)).results[t];return s||(Object(u.a)(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?E(Object(s),!0).forEach((function(t){k(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):E(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({error:new Error("Could not find user join capability for Confluence product on cloud site, defaulting to FORBIDDEN")
},j.a)),"FORBIDDEN")},S=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/analytics-context/index.js"),C=s("./src/packages/issue/issue-context-service/src/main.js"),I=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),T=s("./src/packages/project-settings/issue-type-hierarchies/src/index.js"),P=s("./src/packages/issue/project-context-service/src/main.js");function _(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_(Object(s),!0).forEach((function(t){D(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const A=Object(n.createContext)({isEligible:!1,isInExperiment:!1,hasConnectedPages:!1,touchpointFlow:null,linkedPages:[],linkedPagesCount:0,mentionedPages:[],mentionedPagesCount:0,refreshIssueRemoteData:()=>{},createLinkClickedCount:0,onDismiss:o.a,hidden:!1,hide:o.a,refreshCapability:async()=>{},setTouchpointFlow:()=>{}}),L=[l.c.RAPIDBOARD_BACKLOG,l.c.RAPIDBOARD_BOARD,l.c.SOFTWARE_BACKLOG,l.c.SOFTWARE_BOARDS,l.c.SOFTWARE_ROADMAP,l.c.ISSUE],M=({linkedPages:e,linkedPagesCount:t,mentionedPages:s,mentionedPagesCount:i,refreshIssueRemoteData:r,createLinkClickedCount:o,confluenceAppLinksCount:l,onDismiss:f,children:g})=>{const[{route:{name:y}}]=Object(c.p)(),{isEpic:O}=(()=>{
const e=Object(C.g)(),t=Object(d.l)(e),s=Object(P.i)(t),n=Object(h.collapsedHierarchies)(),[a]=Object(I.d)(t),i=void 0!==(null==a?void 0:a["epic-issues"]),r=null==a?void 0:a["hierarchy-level-same-level"],o=Object(P.c)(s,null==r?void 0:r.id);return n?{isEpic:!(!i&&!Object(T.c)(null==r?void 0:r.level))}:{isEpic:!(!i&&1!==o)}})(),{createAnalyticsEvent:E}=Object(p.a)(),{cloudId:k,licensedProducts:_}=Object(b.c)(),[D,M]=Object(n.useState)(null),[R,N]=Object(n.useState)(!1),[F,U]=Object(n.useState)(null),[V,K]=Object(n.useState)(!1),[W,B]=Object(n.useState)(!1),H=Object(n.useMemo)((()=>Object(h.getCrossJoinViaEpicTouchpointFlag)()),[]),$=Object(n.useCallback)((async()=>{try{M(await w(k)),Object(m.b)(E({}),"fetchCapability succeeded")}catch(e){Object(m.b)(E({}),"fetchCapability failed"),Object(u.a)(x(x({},j.a),{},{error:e}))}}),[k,E]);Object(n.useEffect)((()=>{"not-enrolled"!==H&&N(_.confluence&&O&&L.includes(y)&&1===l)}),[l,H,O,_.confluence,y]),Object(n.useEffect)((()=>{o>0&&B(!1)}),[o]),
Object(n.useEffect)((()=>{R&&null===F&&(async()=>{U(await(async()=>{try{return await Object(v.b)("/wiki/rest/api/user/current"),!0}catch{return!1}})())})()}),[F,R]),Object(n.useEffect)((()=>{R&&null===D&&(!1===F||o>0)&&$()}),[F,o,R,$,D]),Object(n.useEffect)((()=>{K(R&&null!==D&&null!==F&&!("ACCESS_EXISTS"!==D&&F))}),[F,R,D]);const G=t>0||i>0;return a.a.createElement(A.Provider,{value:{touchpointFlow:D,hasConnectedPages:G,isEligible:V,isInExperiment:"experiment"===H,linkedPages:e,linkedPagesCount:t,mentionedPages:s,mentionedPagesCount:i,refreshIssueRemoteData:r,createLinkClickedCount:o,onDismiss:f,hidden:W,hide:()=>B(!0),refreshCapability:$,setTouchpointFlow:M}},a.a.createElement(S.b,{isEligible:V,hasConnectedPages:G,routeName:y,touchpointFlow:D},g))};M.displayName="TouchpointContextProvider";const R=()=>Object(n.useContext)(A);t.a=Object(i.connect)((e=>({linkedPages:Object(O.h)(e),linkedPagesCount:Object(O.g)(e),mentionedPages:Object(O.j)(e),mentionedPagesCount:Object(O.i)(e),
createLinkClickedCount:Object(O.a)(e),confluenceAppLinksCount:Object(y.b)(e)})),(e=>({refreshIssueRemoteData:t=>{e(Object(g.b)(Object(d.l)(t)))},onDismiss:()=>{e(Object(f.i)())}})))(M)},"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({bannerTitle:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.title",defaultMessage:"Confluence pages"},bannerTitleRequestDenied:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.title-request-denied",defaultMessage:"Confluence pages are not available"},bannerTitleError:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.title-error",defaultMessage:"You\u2019re almost there"},approvedMicrocopy:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.approved-microcopy",defaultMessage:"You\u2019re approved to join Confluence"},approvedTemplateMicrocopy:{
id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.approved-template-microcopy",defaultMessage:"Access approved"},productRequirementsTemplateHeader:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.product-requirements-template-header",defaultMessage:"Product requirements"},productRequirementsTemplateAltText:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.product-requirements-template-alt-text",defaultMessage:"Confluence template depicting the content of the Product requirements template. Includes project details table, project objective, success metrics, assumptions, milestones and more to help plan and discover project requirements"},bannerContentWithLinkedPages:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-with-linked-pages",defaultMessage:"Collaborate on documentation that your team has linked to this epic."},bannerContentWithNoLinkedPages:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-with-no-linked-pages",
defaultMessage:"Write documentation and link it to this epic."},bannerContentRequestAccess:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-request-access",defaultMessage:"Join your team to view, edit, and write documentation linked to this epic."},bannerContentWithError:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-error",defaultMessage:"Something went wrong while trying to join. Wait a few moments and try again."},bannerContentRequestPending:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-request-pending",defaultMessage:"Your request has been sent to the site admin."},bannerContentRequestDenied:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-request-denied",defaultMessage:"The site admin denied your request."},bannerContentRequestRevoked:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.content-request-revoked",defaultMessage:"The site admin denied you access."},requestAccessButton:{
id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.request-access-button",defaultMessage:"Request access"},createPageButton:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.create-page-button",defaultMessage:"Create page"},createNewPageButton:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.create-new-page-button",defaultMessage:"Create new page"},showLinkedPagesButton:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.show-linked-pages-button",defaultMessage:"Show linked pages"},productRequirementsButton:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.product-requirements-button",defaultMessage:"Write product requirements"},tryAgainButton:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.try-again-button",defaultMessage:"Try again"},joinButtonTooltip:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.join-button-tooltip",defaultMessage:"Gives you access to Confluence"},requestAccessButtonTooltip:{
id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.request-access-button-tooltip",defaultMessage:"Request access to Confluence"},confluenceButtonTooltip:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.confluence-button-tooltip",defaultMessage:"Opens in Confluence"},createNewPageButtonTooltip:{id:"issue.cross-join-via-epic-touchpoint.cross-join-banner.create-new-page-button-tooltip",defaultMessage:"Create a page in Confluence"}})},"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/ui/common/better-together-button/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/@atlassiansox/origin-tracing/dist/es2019/origin-tracer.js"),r=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/button--next/dist/es2019/button.js")),o=s("./src/packages/platform/utils/types/src/general.js"),c=s("./src/packages/issue/issue-context-service/src/main.js"),l=s("./src/packages/issue/fields/summary/src/services/index.js"),u=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),d=s("./src/packages/issue/project-context-service/src/main.js"),p=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),m=s("./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/controllers/cross-join-context/index.js");t.a=({flow:e,blueprintModuleCompleteKey:t,appearance:s,iconBefore:b,children:f,actionSubjectId:g,onClick:h,innerRef:y,onLingerStart:O,onLingerEnd:j})=>{
const{atlassianAccountId:v,cloudId:E}=Object(p.c)(),{triggerPollingAfterBetterTogether:k}=Object(m.b)(),w=Object(c.f)(),S=Object(c.g)(),C=Object(d.i)(S),I=Object(d.j)(C),T=Object(o.l)(S),[{value:P}]=Object(l.a)({issueKey:T}),_=Object(n.useMemo)((()=>new i.a({product:"jira"})),[]),x=Object(n.useMemo)((()=>{if(null===v||void 0===w||null===P||void 0===I)return;const s=Object(o.j)(w),n=new URLSearchParams({accountId:v,cloudId:E,flow:e,atlOrigin:_.encode(),sourceContext:"jira",sourceComponent:"cross-join-via-epic-touchpoint",projectKey:C,projectName:I});"request-access"!==e&&(n.append("issueId",s),void 0!==t?(n.append("blueprintModuleCompleteKey",t),n.append("pageName",`Product requirements - ${P}`)):(n.append("createBlank","true"),n.append("pageName",P)));const a=`/gpa-cross-flow/better-together.html?${n.toString()}`;if("join-product"===e||"request-access"===e){return`/login?${new URLSearchParams({"dest-url":a,application:"confluence","permission-violation":"true"}).toString()}`}return a
}),[v,t,E,e,P,_,C,I,w]),[D,A]=Object(n.useState)(!1);Object(n.useEffect)((()=>{let e;return"function"!=typeof O&&"function"!=typeof j||(e=D?setTimeout((()=>{"function"==typeof O&&O()}),200):setTimeout((()=>{"function"==typeof j&&j()}),250)),()=>{clearTimeout(e)}}),[D,O,j]);const L=Object(n.useCallback)((()=>A(!0)),[]),M=Object(n.useCallback)((()=>A(!1)),[]),R=Object(n.useCallback)(((t,s)=>{Object(u.h)(s,g,_.toAnalyticsAttributes({hasGeneratedId:!0})),null==h||h(),"join-product"!==e&&"post-expand"!==e||k()}),[g,e,h,_,k]);return a.a.createElement(r.a,{appearance:s,onClick:R,href:x,target:"_blank",rel:"noopener noreferrer",iconBefore:b,ref:y,onMouseEnter:L,onMouseLeave:M},f)}},"./src/packages/issue/issue-view/src/views/issue-base/context/approval/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return ee})),s.d(t,"b",(function(){return te}));var n=s("./node_modules/react-redux/es/index.js");s("./src/packages/issue/issue-view/src/common/constants/flags.js")
;var a=s("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),i=s("./node_modules/react/index.js"),r=s.n(i),o=s("./src/packages/platform/ui/flags/src/services/index.js"),c=s("./src/packages/issue/issue-context-service/src/main.js"),l=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),u=s("./src/packages/issue/issue-view-layout/src/services/main.js"),d=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),p=s("./src/packages/servicedesk/approval-panel/src/async.js"),m=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),b=s("./src/packages/issue/issue-view/src/common/util/get-element/index.js"),f=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js");const g=()=>Object(f.b)("jsd.reylo-426.team.approvals.master.switch",!1);var h=s("./node_modules/react-intl/lib/index.es.js"),y=Object(h.h)({removeApproverError:{
id:"issue-field-approval-panel.approval-glance.remove-approver-error",defaultMessage:"We couldn\u2019t remove the approver"},addApproverError:{id:"issue-field-approval-panel.approval-glance.add-approver-error",defaultMessage:"We couldn\u2019t add the approver"},saveSuccess:{id:"issue-field-approval-panel.approval-panel.save-success",defaultMessage:"We've saved your response."},saveError:{id:"issue-field-approval-panel.approval-panel.save-error",defaultMessage:"We couldn\u2019t save your approval response"}}),O=s("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"),j=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),v=s("./node_modules/lodash/every.js"),E=s.n(v),k=s("./node_modules/lodash/fp/get.js"),w=s.n(k),S=s("./node_modules/lodash/unionBy.js"),C=s.n(S),I=s("./src/packages/servicedesk/approval-panel/src/common/utils.js"),T=s("./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg"),P=s.n(T)
;function _(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function x(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_(Object(s),!0).forEach((function(t){D(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function D(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const A=(e,t,s)=>(e=>void 0===e)(w()(t,s))?e:w()(t,s),L=(e,t,s)=>t.filter((t=>s.some((s=>e(t)===e(s))))),M=(e,t,s)=>t.filter((t=>!s.some((s=>e(t)===e(s))))),R=e=>{if(void 0===e.accountId||void 0===e.displayName)return null;const{accountId:t,displayName:s}=e;return x(x({},e),{},{accountId:t,displayName:s
})},N=e=>Object(I.f)(e).flatMap((e=>"group"===e.type?[e]:[])),F=({key:e,accountId:t,displayName:s,avatarUrls:n})=>({approver:{accountId:t,key:e,displayName:s,isFromLinkedField:!0,avatarUrl:A(P.a,"24x24",n)}}),U=({approver:{key:e,accountId:t,displayName:s},approverDecision:n})=>({approver:{accountId:t,key:e,displayName:s},approverDecision:n}),V=(e,t)=>{const s=E()(t,(e=>e.approver.accountId));return((e,t)=>{const s=e.map((e=>e.approver.accountId));return t.map((e=>s.includes(e.approver.accountId)?{approverDecision:e.approverDecision,approver:x(x({},e.approver),{},{isFromLinkedField:!0})}:e))})(t,C()(e,t,(e=>s?e.approver.accountId:null)))},K=(e,t)=>{if(t&&t.value){const s=+t.value;if("number"===t.type)return s;if("percent"===t.type)return Math.ceil(e*(s/100))}return e},W=({name:e})=>({name:e,type:"group",meta:{memberCount:NaN,approvedCount:NaN},id:void 0}),B=(e,t)=>{const s=e||[];return[...L(w()("name"),s,t),...M(w()("name"),t,s).map(W)]
},H=(e,t,s,n)=>"multi_group_picker"!==e.configuration.approvers.type?((e,t,s,n)=>{const a=(t?e.approvers.filter((e=>"pending"!==e.approverDecision)):e.approvers).map(U),i=t&&!Array.isArray(t)?[t]:t,r=(null!=i?i:[]).map(F),o=V(a,r),c=w()(["configuration","condition"],e),l=K(o.length,c),u="com.atlassian.jira.plugin.system.customfieldtypes:userpicker"===n,{id:d,name:p,finalDecision:m,canAnswerApproval:b,decisions:f,approverPrincipals:g}=e;return{id:d,name:p,finalDecision:m,approvers:o,minApprovalsRequired:l,canAnswerApproval:b,linkedFieldName:s,isSingleUserPicker:u,decisions:(f||[]).map(U),approverPrincipals:g,configuration:e.configuration}})(e,(e=>null==e?[]:Array.isArray(e)?e.map(R).filter(Boolean):[e])(t),s,n):(({id:e,name:t,finalDecision:s,approvers:n,configuration:a,canAnswerApproval:i,decisions:r,approverPrincipals:o},c,l)=>({id:e,name:t,finalDecision:s,approvers:n.map(U),minApprovalsRequired:K(n.length,a.condition),canAnswerApproval:i,linkedFieldName:l,isSingleUserPicker:!1,
decisions:(r||[]).map(U),approverPrincipals:B(N(o),c),configuration:a}))(e,(e=>Array.isArray(e)?e.flatMap((e=>"string"==typeof e.name&&void 0===e.accountId?[{name:e.name}]:[])):[])(t),s);var $=({issueKey:e,approvalFieldId:t="servicedesk-approvals"})=>{var s;const[{value:n},{saveValue:a}]=Object(O.a)({fieldKey:t,issueKey:e,fieldType:"servicedesk-approvals",initialValue:null}),i=null==n?void 0:n.activeApproval,r=i?i.configuration:null,o=null!==(s=null==r?void 0:r.approvers.customFieldId)&&void 0!==s?s:"",[c]=Object(j.a)(e,o),{isEditable:l,title:u,autoCompleteUrl:d,schema:p}=c||{},{custom:m}=p||{},[{value:b},{saveValue:f}]=Object(O.a)({fieldKey:o,fieldType:o,issueKey:e,initialValue:null});return{approval:((e,t,s,n)=>e&&null!=n?H(e,t,s,n):null)(i,b,u,m),isEditable:l,saveApprovers:a,saveLinkedFieldValue:f,linkedFieldId:o,autoCompleteUrl:d}};function G(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function q(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?G(Object(s),!0).forEach((function(t){z(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):G(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function z(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Y=s("./src/packages/issue/project-context-service/src/main.js"),Q=s("./src/packages/platform/controllers/tenant-context/src/components/account-id/index.js");function J(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Z(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const X=(e,t)=>!!(e&&t&&e.approvers&&e.approvers.length)&&e.approvers.some((e=>e.approver.accountId===t&&(!e.approverDecision||"pending"===e.approverDecision)));const ee=Object(n.connect)(null,{renderApproverList:a.g,updateApprovalLinkedUserPickerField:(e,t)=>({type:"UPDATE_APPROVAL_LINKED_USER_PICKER_FIELD",payload:{linkedUserPickerFieldId:e,newApproverList:t}})})((e=>{const t=Object(m.a)(),{showFlag:s}=Object(o.f)(),n=Object(c.g)(),a=Object(b.a)()||document.body,[,{setIssueViewLayoutContextPanel:f}]=Object(u.a)(),h=e.payload&&e.payload.approvalFieldId||"servicedesk-approvals",O=Object(i.useCallback)((()=>{f(n,void 0)}),[n,f]),j=Object(i.useCallback)((()=>{s({type:"error",title:y.addApproverError})}),[s]),v=Object(i.useCallback)((()=>{s({type:"error",title:y.removeApproverError})}),[s]),{approval:E,linkedFieldId:k,saveLinkedFieldValue:w,autoCompleteUrl:S,isEditable:C}=$({issueKey:n,
approvalFieldId:h}),{createAnalyticsEvent:I}=Object(d.a)(),[T]=Object(l.b)({issueKey:n,fieldKey:"status"}),P=q(q({},e),{},{fieldId:k,fieldMetaKey:k,approvalFieldId:h,approval:E,baseUrl:t,issueKey:n,fieldAutoCompleteUrl:S,hasLinkedFieldEditPermissions:C,issueStatusId:T.id,portalElement:a,onRemoveApproverError:v,onAddApproverError:j,onHidePanel:O,renderApproverList:e.renderApproverList,onApproverListUpdated:g()?t=>{const s="multi_group_picker"===(null==E?void 0:E.configuration.approvers.type)?(e=>null==e?[]:(Array.isArray(e)?e:[e]).flatMap((e=>"group"===e.type&&"string"==typeof e.name?[{name:e.name}]:[])))(t):(e=>null==e?null:Array.isArray(e)?e.flatMap((e=>"group"===e.type?[]:[e])):e)(t);w(s,null,I({approverSourceFieldType:null==E?void 0:E.configuration.approvers.type})),e.updateApprovalLinkedUserPickerField(k,t)}:t=>{w(t,null,I({})),e.updateApprovalLinkedUserPickerField(k,t)}});return r.a.createElement(p.a,P)})),te=Object(n.connect)(null,{setRefreshIssue:a.g})((e=>{
const{setRefreshIssue:t}=e,s=Object(c.g)(),n=Object(c.f)(),a=Object(c.i)(),{showFlag:l}=Object(o.f)(),d=Object(Q.a)(),b=e.payload&&e.payload.approvalFieldId||"servicedesk-approvals",[,{setIssueViewLayoutContextPanel:f}]=Object(u.a)(),g=Object(i.useCallback)((()=>{t(),l({type:"success",title:y.saveSuccess})}),[l,t]),h=Object(i.useCallback)((()=>{l({type:"error",title:y.saveError})}),[l]),O=Object(Y.e)(a),{approval:j,isEditable:v}=$({issueKey:s,approvalFieldId:b}),E=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?J(Object(s),!0).forEach((function(t){Z(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):J(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({approval:j,baseUrl:Object(m.a)(),fieldId:b,isSimplified:(null==O?void 0:O.isSimplified)||!1,hasLinkedFieldEditPermissions:v,canCurrentUserApprove:X(j,d),onOpenPanel:(e,t)=>{f(s,{
key:"approval-panel",type:"approval-panel",title:t,payload:{approvalFieldId:e}})},issueId:n,onSaveApprovalAnswerSuccess:g,onSaveApprovalAnswerError:h,onZeroApprovalRequired:t},e);return r.a.createElement(p.b,E)}))},"./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c})),s.d(t,"c",(function(){return l}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const r=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js").c,o=n.default.div(["width:inherit;height:inherit;opacity:1;background-color:",";display:flex;flex-direction:column;position:fixed;overflow:hidden;",";"],a.a.N0,(({top:e})=>null!=e&&`top: ${e}px;`)),c=n.default.div(["display:flex;flex-direction:column;height:100%;padding-left:","px;"],r),l=n.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;height:30px;margin:","px ","px 0;"],i.e,i.e)},"./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/view.js":function(e,t,s){"use strict";(function(e){s.d(t,"a",(function(){return m}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),r=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),c=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),l=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-inner-height/index.js"),u=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js"),d=s("./src/packages/issue/issue-view/src/views/issue-base/common/animations/classy-animator.js"),p=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js");class m extends n.Component{constructor(t){super(t),this.state={styles:{panelWidth:0,headerWidth:0,contentWidth:0,contextWidth:0,panelTop:0,panelHeight:0}},this.refFixedPanel=void 0,this.refPanelPositioner=void 0,this.scrollContainerCached=null,
this.scrollContainerResizeObserver=e&&e.ResizeObserver?new window.ResizeObserver((()=>{requestAnimationFrame((()=>{this.updateSidePanelStyles()}))})):null,this.getMemoizedStyles=Object(i.a)(((e,t,s,n,a,i)=>({panelWidth:e,panelTop:t,panelHeight:s,headerWidth:n,contentWidth:a,contextWidth:i}))),this.currentPosition={panelWidth:void 0,headerWidth:void 0,contentWidth:void 0,contextWidth:void 0,panelTop:void 0,panelHeight:void 0},this.updateSidePanelStyles=()=>{if(!this.props||!this.props.isOpen)return;const{refs:e}=this.props,t=document.getElementById("jira-issue-header-actions"),s=e.refPanelColumnElement,n=s&&getComputedStyle(s),a=(e=>e.refVisibilityContainer?e.refVisibilityContainer.offsetWidth:void 0)(e),i=((e,t)=>{const s=e.refPanelColumnElement;if(s&&t)return s.offsetWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)})(e,n),r=((e,t)=>e?e.offsetWidth:t||0+p.d)(t,i),o=this.calculateSidePanelPosition(),c=((e,t)=>{const s=e.refSidePanelContainerElement
;return s&&s instanceof HTMLElement?s.offsetWidth+p.d-(t?parseFloat(t.paddingLeft):0):0})(e,n),l=o&&o.panelTop?o.panelTop:void 0,u=o&&o.panelHeight?o.panelHeight:void 0,d=this.getMemoizedStyles(c,l,u,r,i,a);d!==this.state.styles&&(this.setState({styles:d}),this.setSidePanelPosition(o))},this.getGlanceOffsetTop=e=>{if(!e)return;const t=e.getBoundingClientRect().top;let s=4;const n=document.getElementById("jira-issue-header-actions")||document.getElementById("jira-issue-header");if(n&&e.contains(n)){const e=this.props.refs.refLayoutContainer,a=e?e.getBoundingClientRect().top:0,i=n.getBoundingClientRect();s=(i&&i.bottom<0?a+i.height:i.bottom)+4-t}return s=Math.max(s,4),s},this.setSidePanelPosition=e=>{if(!e)return;const{panelTop:t,panelHeight:s}=e;this.currentPosition.panelTop!==t&&this.refFixedPanel.current&&(this.currentPosition.panelTop=t,this.refFixedPanel.current.style.top=null!=t?`${t}px`:""),
this.currentPosition.panelHeight!==s&&this.refPanelPositioner.current&&(this.currentPosition.panelHeight=s,this.refPanelPositioner.current.style.height=null!=s?`${s}px`:"")},this.calculateSidePanelPosition=()=>{const e=this.getScrollContainer(),t=Object(l.a)(e);if(null===e||null===t)return;const s=Math.min(window.innerHeight,t||0),n=this.getGlanceOffsetTop(e)||0,a=n+e.getBoundingClientRect().top,i=Math.max(s-a,s-n);return i<=0&&c.h.safeErrorWithoutCustomerData("issue.views.issue-base.context.side-panel",`panel height is <= 0: panelHeight='${i}`,new r.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),{panelTop:a,panelHeight:i<0?void 0:i}},this.updateSidePanelPosition=()=>{this.props.isOpen&&requestAnimationFrame((()=>{const e=this.calculateSidePanelPosition();this.setSidePanelPosition(e)}))},this.refPanelPositioner=Object(n.createRef)(),this.refFixedPanel=Object(n.createRef)()}componentDidMount(){this.updateSidePanelStyles(),this.attachSidePanelListeners(),
this.props&&this.props.refs&&this.scrollContainerResizeObserver&&(this.props.refs.refLayoutContainer&&this.scrollContainerResizeObserver.observe(this.props.refs.refLayoutContainer),this.props.refs.refPanelColumnElement&&this.scrollContainerResizeObserver.observe(this.props.refs.refPanelColumnElement))}componentDidUpdate(e){if(this.props.isOpen&&this.props.isOpen!==e.isOpen&&this.updateSidePanelStyles(),this.scrollContainerResizeObserver){const{refs:{refPanelColumnElement:t,refLayoutContainer:s}}=this.props,{refs:{refPanelColumnElement:n,refLayoutContainer:a}}=e;t&&this.scrollContainerResizeObserver.observe(t),s&&this.scrollContainerResizeObserver.observe(s),t===n&&s===a||(n&&this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.unobserve(n),a&&this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.unobserve(a),this.detachSidePanelListeners(),this.updateSidePanelPosition(),this.attachSidePanelListeners())}}componentWillUnmount(){
this.detachSidePanelListeners(),this.scrollContainerResizeObserver&&this.scrollContainerResizeObserver.disconnect()}getScrollContainer(){return this.props.refs.refSidePanelContainerElement?this.props.refs.refSidePanelContainerElement:(this.scrollContainerCached||(this.scrollContainerCached=Object(u.a)(this.refPanelPositioner.current,!1)),this.scrollContainerCached)}attachSidePanelListeners(){const e=this.getScrollContainer();e&&(e===document.body?document.addEventListener("scroll",this.updateSidePanelPosition):e.addEventListener("scroll",this.updateSidePanelPosition))}detachSidePanelListeners(){const e=this.getScrollContainer();e&&e.removeEventListener("scroll",this.updateSidePanelPosition)}render(){const{isOpen:e,children:t}=this.props,{styles:s}=this.state,n=s.panelWidth?s.panelWidth:(s.contextWidth||0)+o.e;return a.a.createElement(d.a,{ref:this.refPanelPositioner,width:n,show:e},a.a.createElement(p.a,{innerRef:this.refFixedPanel},a.a.createElement(p.b,null,t(s))))}}
m.displayName="SidePanel",m.displayName="SidePanel"}).call(this,s("./node_modules/webpack/buildin/global.js"))},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return ua}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./node_modules/lodash/noop.js"),o=s.n(r),c=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),l=s("./src/packages/issue/issue-context-service/src/types.js"),u=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),d=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),p=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),m=s("./node_modules/react-intl/lib/index.es.js"),b=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),f=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),g=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),h=s("./src/packages/issue/issue-view/src/feature-flags.js"),y=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),O=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/parent-issue-selector.js"),j=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js"),v=s("./node_modules/reselect/lib/index.js"),E=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),k=s("./src/packages/issue/issue-view/src/selectors/ui-config-selector.js")
;const w=[E.a.FULL_ISSUE,E.a.SERVICEDESK_QUEUES_ISSUE,E.a.SERVICEDESK_REPORTS_ISSUE],S=Object(v.createSelector)(u.b,d.u,k.a,((e,t,s)=>!!e&&(w.includes(e.value)&&!t)&&!s)),C=Object(v.createSelector)(S,(e=>e));var I=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const T=Object(v.createSelector)(u.v,(e=>e&&e.includes("flagActions"))),P=Object(v.createSelector)(I.c,T,((e,t)=>e&&t));var _=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),x=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),D=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js")
;const A=Object(v.createSelector)(u.t,k.a,((e,t)=>Boolean(e)&&!t)),L=Object(v.createSelector)(_.c,_.b,((e,t)=>e||t)),M=Object(v.createSelector)(d.u,L,((e,t)=>t&&e)),R=Object(v.createSelector)(d.i,u.r,((e,t)=>!e&&!t)),N=Object(v.createSelector)(D.c,D.b,x.b,d.m,((e,t,s,n)=>!e&&!t&&s&&n)),F=Object(v.createSelector)(D.c,d.m,((e,t)=>e&&t)),U=Object(v.createSelector)(d.t,j.c,((e,t)=>e||t)),V=Object(v.createSelector)(d.F,(e=>"service_desk"===e)),K=Object(v.createSelector)(d.u,V,j.c,A,k.a,((e,t,s,n,a)=>t?!e&&!a:n&&s));var W=s("./node_modules/query-string/index.js"),B=s.n(W),H=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js")),$=s("./src/packages/platform/ui/error-boundary/src/index.js"),G=s("./node_modules/@atlaskit/popup/dist/es2019/index.js"),q=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),z=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),Y=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),Q=s("./node_modules/@atlaskit/menu/dist/es2019/menu-section/popup-menu-group.js"),J=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),Z=s("./node_modules/@atlaskit/menu/dist/es2019/menu-section/section.js"),X=s("./node_modules/@atlaskit/theme/dist/es2019/index.js")
;const ee=J.default.div(["border-top:1px solid ",";"],X.a.N30),te=Object(J.default)(Z.a)(["[data-ds--menu--heading-item='true']{padding:0 12px;margin:7px 0;}"]),se=({dropdownGroupData:{items:e,name:t},isFirst:s,onClick:n})=>{const i=t&&t.length>0?t:void 0,r=a.a.createElement(Q.a,{minWidth:0},a.a.createElement(te,{title:i},e.map(((e,t)=>a.a.createElement("div",{key:t,onClick:n},e)))));return s?r:a.a.createElement(ee,null,r)};se.displayName="DropdownGroup";var ne=se,ae=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js"),ie=s("./node_modules/@atlaskit/icon/glyph/more.js"),re=s.n(ie),oe=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),ce=s("./src/packages/platform/controllers/intl/src/index.js"),le=Object(m.h)({actions:{id:"issue-meatball-menu.dropdown-trigger.actions",defaultMessage:"Actions"}});function ue(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function de(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(s),!0).forEach((function(t){pe(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ue(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pe(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function me(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}
const be=Object(J.keyframes)(["to{box-shadow:0 0 0 10px transparent;}"]),fe=(e,t)=>{const s=e(t),{buttonStyles:n}=s;return de(de({},me(s,["buttonStyles"])),{},{buttonStyles:de(de({},n),{},{borderRadius:"4px",animation:`${be} 1.45s 3 cubic-bezier(0.66, 0, 0, 1)`,animationDelay:"0.5s",boxShadow:`0 0 0 0 ${X.a.P300}`})})},ge=({isOpen:e,isDisabled:t,isLoading:s,hasPulse:n,onClick:i})=>{const{formatMessage:r}=Object(ce.c)(),o=r(le.actions);return a.a.createElement(oe.a,{content:o,position:"top"},a.a.createElement(ae.a,{testId:"issue-meatball-menu.ui.dropdown-trigger.button","aria-label":o,"aria-expanded":e,isDisabled:t,isLoading:s,appearance:"subtle",spacing:"default",iconBefore:a.a.createElement(re.a,{label:"",size:"medium"}),theme:n?fe:void 0,isSelected:e,onClick:i}))};ge.displayName="DropdownTrigger",ge.defaultProps={hasPulse:!1,isDisabled:!1};var he=ge
;const ye=J.default.div(["min-width:150px;max-height:95vh;padding:4px 0px;&&{[role='menuitem']{padding:8px 12px 7px;}[class*='GroupTitle']{padding:8px 12px;> div[class*='GroupTitleText']{padding:0;}}}"]),Oe=({meatballMenuData:e,hasPulse:t,isDisabled:s,isLoading:i})=>{const[r,o]=Object(n.useState)(!1),{createAnalyticsEvent:c}=Object(z.a)(),l=Object(n.useCallback)((()=>{o(!0);const e=c({action:"click",actionSubject:"dropdownItem"});Object(Y.h)(e,"issueActionsOpenChanged")}),[c]),u=Object(n.useCallback)((()=>{o(!1);const e=c({action:"click",actionSubject:"dropdownItem"});Object(Y.h)(e,"issueActionsOpenChanged")}),[c]);return a.a.createElement(G.a,{boundary:"clippingParents",isOpen:r,placement:"auto-end",trigger:e=>a.a.createElement("div",e,a.a.createElement(he,{isOpen:r,hasPulse:!0===t,isDisabled:s,isLoading:i,onClick:r?u:l})),onClose:u,content:()=>a.a.createElement(ye,null,e.filter((({items:e})=>e.length>0)).map(((e,t)=>a.a.createElement(ne,{key:e.key,dropdownGroupData:e,isFirst:0===t,
onClick:u})))),zIndex:q.f.modal})};Oe.displayName="MeatballMenu",Oe.defaultProps={hasPulse:!1,isDisabled:!1,isLoading:!1};var je=Oe,ve=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/add-to-issue-dropdown-group/main.js"),Ee=s("./src/packages/issue/issue-context-service/src/main.js"),ke=s("./src/packages/issue/project-context-service/src/main.js"),we=s("./src/packages/platform/controllers/tenant-context/src/components/is-admin/index.js"),Se=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),Ce=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),Ie=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const Te=Object(Ce.a)({name:"issue-view.issue-actions.find-field",initialState:{isOpen:!1},actions:{openFindFieldDialog:()=>({setState:e})=>{e({isOpen:!0})},closeFindFieldDialog:()=>({setState:e})=>{e({isOpen:!1})}}}),Pe=Object(Ie.a)(Te),_e=({label:e,itemKey:t,onClick:s})=>{
const[,{openFindFieldDialog:i}]=Pe(),r=Object(n.useCallback)((()=>{i(),null==s||s(t)}),[t,s,i]);return a.a.createElement(Se.a,{key:"findFieldDropdownItem",onClick:r},e)};_e.displayName="FindField";var xe=_e,De=Object(m.h)({findField:{id:"issue.adminActionDropdown.findField",defaultMessage:"Find your field"}});const Ae=(e,t)=>({name:"",key:"AdminActionsDropdownGroup",items:e.reduce(((e,{Component:s,label:n,key:i})=>(s&&e.push(a.a.createElement(s,{label:n,key:i,itemKey:i,onClick:t})),e)),[])}),Le=()=>{const e=Object(Ee.i)(),t=Object(ke.b)(e),{formatMessage:s}=Object(ce.c)(),a=Object(we.a)(),i=Object(n.useMemo)((()=>[...t?[]:[{Component:xe,label:s(De.findField),key:"findField"}]]),[s,t]);return a?i:[]};var Me=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),Re=s("./node_modules/react-async-component/commonjs/index.js"),Ne=s("./src/packages/platform/ui/modal/src/index.js");Object(Re.asyncComponent)({
resolve:()=>s.e("async-jira-clone-issue-dialog").then(s.bind(null,"./src/packages/issue/clone-issue-dialog/src/ui/main.js")),name:"AsyncCloneIssueDialog"});const Fe=({children:e,packageName:t})=>a.a.createElement(Ne.a,{id:"clone-issue-dialog",packageName:t},e);Fe.displayName="CloneIssueDialogBoundary";var Ue=s("./src/packages/issue/issue-view/src/actions/clone-modal-actions.js"),Ve=s("./node_modules/lodash/isEmpty.js"),Ke=s.n(Ve),We=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js");const Be=Object(We.q)("children-issues"),He=Object(v.createSelector)(Be,(e=>!!e&&!Ke()(e.value))),$e=Object(v.createSelector)(d.H,(e=>e.cloneModal)),Ge=Object(v.createSelector)($e,(e=>e.isOpen));var qe=s("./src/packages/issue/issue-view/src/selectors/confluence-pages-selector.js"),ze=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),Ye=s("./src/packages/issue/issue-view/src/selectors/web-links-selector.js")
;const Qe=Object(Me.f)((()=>s.e("async-clone-issue-dialog").then(s.bind(null,"./src/packages/issue/clone-issue-dialog/src/index.js"))),{moduleId:"./src/packages/issue/clone-issue-dialog/src/index.js"});var Je,Ze,Xe,et=Object(i.connect)((e=>{const t=Object(ze.d)(e),s=Object(Ye.f)(e).length>0,n=Object(qe.g)(e)>0;return{isOpen:Ge(e),shouldAskChildren:He(e),shouldAskSubtasks:Object(D.b)(e),shouldAskLinks:t||s||n,shouldShowReporterWarning:!Object(_.e)(e)}}),(e=>({hideModal:()=>e(Object(Ue.a)())})))((({isOpen:e,hideModal:t,shouldAskChildren:s,shouldAskSubtasks:n,shouldAskLinks:i,shouldShowReporterWarning:r})=>e?a.a.createElement(Fe,{packageName:"issue"},a.a.createElement(Qe,{shouldAskChildren:s,shouldAskSubtasks:n,shouldAskLinks:i,shouldShowReporterWarning:r,onClose:t
})):null)),tt=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),st=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),nt=s("./src/packages/platform/observability/analytics-web-react/src/components/view-tracker.js"),at=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),it=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),rt=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js"),ot=Object(m.h)({delete:{id:"issue.delete.confirm",defaultMessage:"Delete"},deleteHeading:{id:"issue.delete-heading",defaultMessage:"Delete {issueKey}?"},deleteWithSubtasksHeading:{id:"issue.delete-with-subtasks-heading",defaultMessage:"Delete {issueKey} and its subtasks?"},deleteWithChildrenHeading:{id:"issue.delete-with-children-heading",defaultMessage:"Delete {issueKey} and its child issues?"},cancel:{
id:"issue.delete.cancel",defaultMessage:"Cancel"},deleteWarning:{id:"issue.delete-warning",defaultMessage:"You're about to permanently delete this issue, its comments and attachments, and all of its data."},deleteWithSubtasksWarning:{id:"issue.delete-with-subtasks-warning",defaultMessage:"You're about to permanently delete this issue and all its subtasks, its comments and attachments, and all of its data. You should move any subtasks you don't want to delete to another parent issue."},deleteWithChildrenWarning:{id:"issue.delete-with-children-warning",defaultMessage:"You're about to permanently delete this issue and all its child issues, its comments and attachments, and all of its data. You should move any child issues you don't want to delete to another parent issue."},deleteRecommendation:{id:"issue.delete-recommendation",defaultMessage:"If you're not sure, you can resolve or close this issue instead."}});function ct(){return(ct=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}let lt=Object(tt.a)("issueDelete",st.a.MODAL)((Xe=Ze=class extends n.Component{constructor(...e){super(...e),this.onConfirmDeleteIssue=(e,t)=>{this.props.deleteConfirmAnalytics(t),this.props.triggerDeleteRequest(this.props.issueKey,t)},this.onCancel=(e,t)=>{this.props.deleteCancelAnalytics(t),this.props.triggerCloseDeleteIssueModal()},this.getChildConditionalDeleteHeading=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?ot.deleteWithChildrenHeading:ot.deleteWithSubtasksHeading:ot.deleteHeading,this.getChildConditionalDeleteWarning=()=>this.props.shouldShowChildSpecificCopy?this.props.isSimplifiedProject?ot.deleteWithChildrenWarning:ot.deleteWithSubtasksWarning:ot.deleteWarning}UNSAFE_componentWillReceiveProps(e){
!e.isDeletingIssue&&this.props.isDeletingIssue&&(e.didIssueDeleteFail?this.props.onIssueDeleteFailure({issueId:this.props.issueId,issueKey:this.props.issueKey}):(this.props.triggerCloseDeleteIssueModal(),this.props.onIssueDeleteSuccess({issueId:this.props.issueId,issueKey:this.props.issueKey}),this.props.onClose()))}render(){const{issueKey:e,isDeletingIssue:t,intl:{formatMessage:s}}=this.props;return this.props.isDeleteIssueModalOpen&&a.a.createElement(it.b,{headerMessage:a.a.createElement(m.c,ct({},this.getChildConditionalDeleteHeading(),{values:{issueKey:e}})),appearance:"danger",contentMessage:a.a.createElement("span",null,a.a.createElement("p",null,s(this.getChildConditionalDeleteWarning())),a.a.createElement("p",null,s(ot.deleteRecommendation))),confirmActionText:s(ot.delete),cancelActionText:s(ot.cancel),onConfirm:this.onConfirmDeleteIssue,onCancel:this.onCancel,externalId:"issue.action.delete-confirmation-dialog",isLoading:t,isConfirmDisabled:t,isCancelDisabled:t
},a.a.createElement(nt.a,null))}},Ze.displayName="DeleteIssueView",Ze.defaultProps={onIssueDeleteSuccess:o.a,onIssueDeleteFailure:o.a},Je=Xe))||Je;var ut=Object(p.a)([m.i,Object(i.connect)((e=>{let t;return t=Object(h.collapsedHierarchies)()?Object(d.u)(e)?Object(y.c)(e)&&He(e):Object(D.b)(e):Object(d.u)(e)?Object(y.d)(e)&&He(e):Object(D.b)(e),{issueId:Object(d.l)(e),issueKey:Object(u.x)(e),isDeletingIssue:Object(d.p)(e),isDeleteIssueModalOpen:Object(d.o)(e),didIssueDeleteFail:Object(d.c)(e),isSimplifiedProject:Object(d.u)(e),shouldShowChildSpecificCopy:t}}),(e=>({triggerCloseDeleteIssueModal:()=>{e(Object(rt.a)())},triggerDeleteRequest:(t,s)=>{e(Object(rt.c)(t,s))}}))),Object(at.a)({deleteCancelAnalytics:"deleteIssueCancel",deleteConfirmAnalytics:"deleteIssueDelete"
})])(lt),dt=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-action/index.js"),pt=s("./src/packages/forge/forge-ui-async/src/ui/issue-action/async.js"),mt=s("./src/packages/issue/issue-view/src/actions/forge-actions.js");const bt=J.default.div(["display:none;"]),ft=({activeAction:e,extensionData:t,onClose:s,onRendered:i,source:r})=>{const o=Object(n.useMemo)((()=>({source:r})),[r]);if(!e)return null;return a.a.createElement(dt.a,{attributes:o,shouldFireScreenEvent:!0},a.a.createElement(bt,{onKeyDown:e=>{"Escape"!==e.key&&"Esc"!==e.key||(e.nativeEvent.stopImmediatePropagation(),s())}},a.a.createElement(pt.a,{extension:e.action.extension,extensionData:t,analyticsAttributes:o,onClose:s,onInitialRender:i})))};ft.displayName="ForgeActionRendererView";const gt=Object(p.a)([Object(i.connect)((e=>({activeAction:Object(g.a)(e),extensionData:Object(g.h)(e),source:Object(u.b)(e)})),{onClose:mt.b,onRendered:mt.d})])(ft);var ht=s("./src/packages/issue-create/find-field/src/async.js")
;var yt=()=>{const[{isOpen:e},{closeFindFieldDialog:t}]=Pe(),s=Object(Ee.g)();return e?a.a.createElement(ht.a,{issueKey:s,operation:"VIEW",onCancel:t}):null},Ot=s("./src/packages/issue/jira-settings-service/src/main.js"),jt=s("./src/packages/issue/jira-settings-service/src/constants.js"),vt=Object(m.h)({findOutMore:{id:"issue.find-out-more",defaultMessage:"Find out more"}});const Et=({isServiceDeskProject:e})=>{const{formatMessage:t}=Object(ce.c)(),{createAnalyticsEvent:s}=Object(z.a)(),i=Object(n.useCallback)((()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(e,"findOutMore")}),[s]),r=e?"//support.atlassian.com/jira-service-desk-cloud/docs/changes-to-requests-in-the-new-issue-view/":"//confluence.atlassian.com/display/JIRACORECLOUD/The+new+Jira+issue+view";return a.a.createElement(Se.a,{onClick:i,href:r,target:"_blank",key:"find-out-more"},t(vt.findOutMore))};Et.displayName="FindOutMore";var kt=Et,wt=Object(i.connect)((e=>({
isServiceDeskProject:"service_desk"===Object(d.F)(e)})),{})(kt),St=Object(m.h)({newIssueView:{id:"issue.title-for-new-issue-actions",defaultMessage:"New Jira issue view"}}),Ct=s("./src/packages/common-legacy-do-not-add-anything-new/src/urls/old-issue-view-url.js"),It=Object(m.h)({seeOldView:{id:"issue.see-old-view",defaultMessage:"See the old view"}});const Tt=()=>{const{formatMessage:e}=Object(ce.c)(),{createAnalyticsEvent:t}=Object(z.a)(),s=Object(n.useCallback)((()=>{const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(e,"oldViewClickthrough")}),[t]);return a.a.createElement(Se.a,{onClick:s,href:Object(Ct.a)(),key:"old-view-clickthrough"},e(It.seeOldView))};Tt.displayName="OldViewClickthrough";var Pt=Tt,_t=Object(m.h)({turnOffNewIssueView:{id:"issue.turn-off-new-issue-view",defaultMessage:"Turn off new issue view"}});const xt=({baseUrl:e})=>{const{formatMessage:t}=Object(ce.c)(),{createAnalyticsEvent:s}=Object(z.a)(),i=Object(n.useCallback)((()=>{const e=s({
action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(e,"optOut")}),[s]),r=`${e}/secure/ViewPersonalSettings.jspa`;return a.a.createElement(Se.a,{onClick:i,href:r,target:"_blank",key:"opt-out"},t(_t.turnOffNewIssueView))};xt.displayName="OptOut";var Dt=xt,At=Object(i.connect)((e=>({baseUrl:Object(u.f)(e)})),{})(Dt),Lt=s("./src/packages/issue/opt-in-back/src/services/onboarding-tour/main.js"),Mt=Object(m.h)({startTour:{id:"issue.start-changeboarding-tour",defaultMessage:"Take a tour"}});const Rt=()=>{const{formatMessage:e}=Object(ce.c)(),{createAnalyticsEvent:t}=Object(z.a)(),[,{setTourIsActive:s}]=Object(Lt.a)(),i=Object(n.useCallback)((()=>{s();const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(e,"startChangeBoardingTour")}),[t,s]);return a.a.createElement(Se.a,{onClick:i,key:"start-tour","data-test-id":"issue.views.issue-base.foundation.issue-actions.issue-actions-dropdown-group.start-tour"},e(Mt.startTour))};Rt.displayName="StartTour"
;var Nt=Rt,Ft=Object(m.h)({turnOffForNow:{id:"issue.turn-off-issue-view-for-now",defaultMessage:"Turn off for now"}});const Ut=({baseUrl:e})=>{const{formatMessage:t}=Object(ce.c)(),{createAnalyticsEvent:s}=Object(z.a)(),i=Object(n.useCallback)((()=>{const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(e,"turnOffForNow")}),[s]),r=`${e}/secure/ViewPersonalSettings.jspa`;return a.a.createElement(Se.a,{onClick:i,href:r,target:"_blank",key:"turn-off-for-now"},t(Ft.turnOffForNow))};Ut.displayName="TurnOffForNow";var Vt=Ut,Kt=Object(i.connect)((e=>({baseUrl:Object(u.f)(e)})),{})(Vt);var Wt=(e,t,s,n,i,r)=>{const[o]=Object(Ot.b)(),c=void 0!==o&&o.newIssueViewTransitionLockingStatus===jt.a;return{name:Object(h.isIssueViewMigrationPostMigrationEnabled)()&&c?"":e(St.newIssueView),key:"IssueActionsDropdownGroup",items:(()=>c?[...t?[a.a.createElement(Nt,{key:"startTour"})]:[],...s?[a.a.createElement(wt,{key:"findOutMore"
})]:[],...!Object(h.isIssueViewMigrationPostMigrationEnabled)()&&r?[a.a.createElement(Pt,{key:"oldViewClickthrough"})]:[]]:[...t?[a.a.createElement(Nt,{key:"startTour"})]:[],...s?[a.a.createElement(wt,{key:"findOutMore"})]:[],...!Object(h.isIssueViewMigration1stAprilEnabled)()&&n?[a.a.createElement(Kt,{key:"turnOffForNow"})]:[],...!Object(h.isIssueViewMigration1stAprilEnabled)()&&i?[a.a.createElement(At,{key:"optOut"})]:[],...r?[a.a.createElement(Pt,{key:"oldViewClickthrough"})]:[]])()}},Bt=s("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js"),Ht=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),$t=s("./src/packages/issue/project-permissions-service/src/main.js"),Gt=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-configuration-href.js"),qt=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-configuration-dropdown-group/configure-issue/messages.js")
;const zt=()=>{const{formatMessage:e}=Object(ce.c)(),{createAnalyticsEvent:t}=Object(z.a)(),s=Object(n.useCallback)((()=>{const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(e,"configureIssue")}),[t]),i=Object(Ee.g)(),[r]=Object(Ht.b)({issueKey:i,fieldKey:"com.atlassian.servicedesk:vp-origin"}),o=Object(Ee.m)(),c=(null!=r||""===r)&&0===o,l=Object(Gt.a)(e),u=Object(Ee.i)(),d=Object(ke.k)(u),p=Object(ke.b)(u),m=Object($t.b)(u);return p&&m&&d?a.a.createElement(Se.a,{onClick:s,href:l,key:"configure"},e(qt.a.configure)):a.a.createElement(Se.a,{onClick:s,href:l,target:"_blank",isDisabled:c,key:"configure"},e(qt.a.configure))};zt.displayName="ConfigureIssueFF";var Yt=zt,Qt=Object(m.h)({switchToModal:{id:"issue.switch-to-modal",defaultMessage:"Open issues in dialog"}});const Jt=({viewModeOptions:e,emitEventToLegacyApp:t})=>{const{formatMessage:s}=Object(ce.c)(),{createAnalyticsEvent:i}=Object(z.a)(),r=Object(n.useCallback)((()=>{
!0===e.viewModeSwitchEnabled&&e.onSwitchToModal?e.onSwitchToModal():t("issue.details.view.switch-to-modal");const s=i({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(s,"switchToModal")}),[i,t,e]);return a.a.createElement(Se.a,{key:"switch-to-modal",onClick:r},s(Qt.switchToModal))};Jt.displayName="SwitchToModal",Jt.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var Zt=Jt,Xt=Object(m.h)({switchToSidebar:{id:"issue.switch-to-sidebar",defaultMessage:"Open issues in sidebar"}});const es=({viewModeOptions:e,emitEventToLegacyApp:t})=>{const{formatMessage:s}=Object(ce.c)(),{createAnalyticsEvent:i}=Object(z.a)(),r=Object(n.useCallback)((()=>{!0===e.viewModeSwitchEnabled&&e.onSwitchToSidebar?e.onSwitchToSidebar():t("issue.details.view.switch-to-sidebar");const s=i({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(s,"switchToSidebar")}),[i,t,e]);return a.a.createElement(Se.a,{key:"switch-to-sidebar",onClick:r},s(Xt.switchToSidebar))}
;es.displayName="SwitchToSidebar",es.defaultProps={viewModeOptions:{viewModeSwitchEnabled:!1}};var ts=es;const ss=e=>{const t=document.getElementById("ghx-issue-fragment");window.AJS&&window.AJS.$(t).trigger(e)};var ns=(e,t,s,n)=>{const i=n?n.valueOf():null,r=s&&i===E.a.SOFTWARE_ISSUE||e.viewModeSwitchEnabled,o=!0===r&&Object(Bt.b)(e.viewMode),c=!0===r&&!Object(Bt.b)(e.viewMode);return{name:"",key:"issueConfigurationDropdownGroup",items:[...o?[a.a.createElement(Zt,{key:"switchToModal",emitEventToLegacyApp:ss,viewModeOptions:e})]:[],...c?[a.a.createElement(ts,{key:"switchToSidebar",emitEventToLegacyApp:ss,viewModeOptions:e})]:[],...t?[a.a.createElement(Yt,{key:"configureClassic"})]:[]]}},as=s("./src/packages/shortcuts-dialog/src/controllers/shortcuts-service/main.js"),is=Object(m.h)({dotDialog:{id:"issue.dot-dialog",defaultMessage:"Actions Menu"}});const rs=J.default.code(["background:",";border-radius:3px;padding:2px 4px;"],"#F4F5F7"),os=()=>{
const{formatMessage:e}=Object(ce.c)(),{createAnalyticsEvent:t}=Object(z.a)(),[,{setShortcutsDialogVisibility:s}]=Object(as.b)(),i=Object(n.useCallback)((()=>{s(!0);const e=t({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(e,"dotDialog")}),[t,s]);return a.a.createElement(Se.a,{key:"dotDialog",onClick:i,elemAfter:a.a.createElement(rs,null,".")},e(is.dotDialog))};os.displayName="DotDialog";var cs=os;var ls=e=>({name:"",key:"IssueDotMenuDropdownGroup",items:[...e?[a.a.createElement(cs,{key:"dotDialog"})]:[]]}),us=Object(m.h)({exportDOC:{id:"issue.export-doc",defaultMessage:"Export Word"}});const ds=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(ce.c)(),{createAnalyticsEvent:i}=Object(z.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(e,"exportDoc")}),[i]),o=`${e}/si/jira.issueviews:issue-word/${t}/${t}.doc`;return a.a.createElement(Se.a,{key:"ExportDocIssueActionView",onClick:r,href:o,target:"_blank"
},s(us.exportDOC))};ds.displayName="ExportIssueDoc";var ps=ds,ms=Object(i.connect)((e=>({baseUrl:Object(u.f)(e),issueKey:Object(u.x)(e)})),{})(ps),bs=Object(m.h)({exportXML:{id:"issue.export-xml",defaultMessage:"Export XML"}});const fs=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(ce.c)(),{createAnalyticsEvent:i}=Object(z.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(e,"exportXml")}),[i]),o=`${e}/si/jira.issueviews:issue-xml/${t}/${t}.xml`;return a.a.createElement(Se.a,{key:"ExportXmlIssueActionView",onClick:r,href:o,target:"_blank"},s(bs.exportXML))};fs.displayName="ExportIssueXML";var gs=fs,hs=Object(i.connect)((e=>({baseUrl:Object(u.f)(e),issueKey:Object(u.x)(e)})),{})(gs),ys=Object(m.h)({print:{id:"issue.print",defaultMessage:"Print"}});const Os=({baseUrl:e,issueKey:t})=>{const{formatMessage:s}=Object(ce.c)(),{createAnalyticsEvent:i}=Object(z.a)(),r=Object(n.useCallback)((()=>{const e=i({action:"clicked",
actionSubject:"dropdownItem"});Object(Y.h)(e,"printIssue")}),[i]),o=`${e}/si/jira.issueviews:issue-html/${t}/${t}.html`;return a.a.createElement(Se.a,{key:"PrintIssueActionView",onClick:r,href:o,target:"_blank"},s(ys.print))};Os.displayName="PrintIssue";var js=Os,vs=Object(i.connect)((e=>({baseUrl:Object(u.f)(e),issueKey:Object(u.x)(e)})),{})(js);var Es={name:"",key:"issueExportDropdownGroup",items:[a.a.createElement(vs,{key:"printIssue"}),a.a.createElement(hs,{key:"exportIssueXML"}),a.a.createElement(ms,{key:"exportIssueDoc"})]},ks=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-manipulation-dropdown-group/main.js")
;const ws=({isLoading:e,isForgeLoading:t,shouldShowPulse:s,issueDeleteCallbacks:i,onClose:r,shouldShowActions:o,shouldShowConfiguration:l,isSoftwareProjectType:u,viewModeOptions:d,analyticsSource:p,intl:m,shouldShowStartTour:b,shouldShowFindOutMore:f,shouldShowTurnOffForNow:g,shouldShowOptOut:y,shouldShowOldViewClickthrough:O,ecosystemActions:j,hasParent:v})=>{const E=Object(ve.c)(j),k=Object(ks.c)(v),w=Le(),{createAnalyticsEvent:S}=Object(z.a)(),C=Object(n.useCallback)((e=>{const t=S({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(t,e)}),[S]);if(!o)return null;if(e)return a.a.createElement(je,{isDisabled:!0,meatballMenuData:[]});const{jql:I,filter:T}=B.a.parse(window.location.search),P=null!=I||null!=T,_=[Object(ve.a)(E,C),Object(ks.a)(k,C),...Object(h.isFindFieldEnabled)()?[Ae(w,C)]:[],...Object(h.isShortcutMenuEnabled)()?[ls(!P)]:[],Es,Wt(m.formatMessage,b,f,g,y,O),ns(d||{viewModeSwitchEnabled:!1},l,u,p)]
;return a.a.createElement($.b,null,a.a.createElement(H.a,null,a.a.createElement(c.a,{name:"BOARD_SIDEBAR"},a.a.createElement(je,{hasPulse:s,isLoading:t,meatballMenuData:_}),a.a.createElement(ut,{onIssueDeleteSuccess:i.onIssueDeleteSuccess,onIssueDeleteFailure:i.onIssueDeleteFailure,onClose:r}),a.a.createElement(gt,null),Object(h.isInlineCloneEnabled)()&&a.a.createElement(et,null),Object(h.isFindFieldEnabled)()&&a.a.createElement(yt,null))))};ws.displayName="IssueActionsMeatballMenu";var Ss=ws;const Cs=({isLoading:e,isForgeLoading:t,shouldShowPulse:s,canLogTime:i,shouldShowFlagAction:r,canLinkToParent:o,shouldShowConvertToSubtask:l,shouldShowConvertToIssue:u,canMoveIssue:d,canCloneIssue:p,canDeleteIssue:m,issueDeleteCallbacks:b,onClose:f,shouldShowActions:g,shouldShowConfiguration:y,isSoftwareProjectType:O,viewModeOptions:j,analyticsSource:v,intl:E,shouldShowStartTour:k,shouldShowFindOutMore:w,shouldShowTurnOffForNow:S,shouldShowOptOut:C,shouldShowOldViewClickthrough:I})=>{
const T=Le(),{createAnalyticsEvent:P}=Object(z.a)(),_=Object(n.useCallback)((e=>{const t=P({action:"clicked",actionSubject:"dropdownItem"});Object(Y.h)(t,e)}),[P]);if(!g)return null;if(e)return a.a.createElement(je,{isDisabled:!0,meatballMenuData:[]});const{jql:x,filter:D}=B.a.parse(window.location.search),A=null!=x||null!=D,L=[Object(ve.b)(r,i),Object(ks.b)(o,l,u,d,p,m),...Object(h.isFindFieldEnabled)()?[Ae(T,_)]:[],...Object(h.isShortcutMenuEnabled)()?[ls(!A)]:[],Es,Wt(E.formatMessage,k,w,S,C,I),ns(j||{viewModeSwitchEnabled:!1},y,O,v)];return a.a.createElement($.b,null,a.a.createElement(H.a,null,a.a.createElement(c.a,{name:"BOARD_SIDEBAR"},a.a.createElement(je,{hasPulse:s,isLoading:t,meatballMenuData:L}),a.a.createElement(ut,{onIssueDeleteSuccess:b.onIssueDeleteSuccess,onIssueDeleteFailure:b.onIssueDeleteFailure,onClose:f}),a.a.createElement(gt,null),Object(h.isInlineCloneEnabled)()&&a.a.createElement(et,null),Object(h.isFindFieldEnabled)()&&a.a.createElement(yt,null))))}
;Cs.displayName="IssueActionsMeatballMenu";var Is=Cs;const Ts=Object(m.i)(Object(i.connect)((e=>{var t;return{isLoading:!Object(d.n)(e),isForgeLoading:!(null===(t=Object(g.a)(e))||void 0===t||!t.isLoading),shouldShowPulse:Object(j.b)(e),canLogTime:Object(b.b)(e),shouldShowFlagAction:P(e),shouldShowConvertToSubtask:N(e),shouldShowConvertToIssue:F(e),canLinkToParent:Object(y.a)(e),canCloneIssue:Object(I.a)(e),canDeleteIssue:Object(I.b)(e),canMoveIssue:Object(I.e)(e),shouldShowActions:R(e),shouldShowStartTour:Object(j.d)(e),shouldShowFindOutMore:U(e),shouldShowTurnOffForNow:!Object(h.isIssueViewMigration1stAprilEnabled)()&&K(e),shouldShowOptOut:!Object(h.isIssueViewMigration1stAprilEnabled)()&&(e=>(Object(d.t)(e)||!Object(j.c)(e))&&A(e))(e),shouldShowOldViewClickthrough:C(e),shouldShowConfiguration:!!M(e)&&!!Object(d.F)(e),isSoftwareProjectType:"software"===Object(d.F)(e),analyticsSource:Object(u.b)(e)}}),{})(Is)),Ps=Object(m.i)(Object(i.connect)((e=>{var t;return{
ecosystemActions:Object(f.j)(e),isLoading:!Object(d.n)(e),isForgeLoading:!(null===(t=Object(g.a)(e))||void 0===t||!t.isLoading),shouldShowPulse:Object(j.b)(e),hasParent:Object(O.a)(e),shouldShowActions:R(e),shouldShowStartTour:Object(j.d)(e),shouldShowFindOutMore:U(e),shouldShowTurnOffForNow:!Object(h.isIssueViewMigration1stAprilEnabled)()&&K(e),shouldShowOptOut:!Object(h.isIssueViewMigration1stAprilEnabled)()&&(e=>(Object(d.t)(e)||!Object(j.c)(e))&&A(e))(e),shouldShowOldViewClickthrough:C(e),shouldShowConfiguration:!!M(e)&&!!Object(d.F)(e),isSoftwareProjectType:"software"===Object(d.F)(e),analyticsSource:Object(u.b)(e)}}),{})(Ss)),_s=e=>Object(h.isShortcutMenuEnabled)()?a.a.createElement(Ps,{viewModeOptions:e.viewModeOptions,issueDeleteCallbacks:e.issueDeleteCallbacks,onClose:e.onClose}):a.a.createElement(Ts,{viewModeOptions:e.viewModeOptions,issueDeleteCallbacks:e.issueDeleteCallbacks,onClose:e.onClose});_s.displayName="IssueActionsMenu"
;var xs=_s,Ds=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),As=s("./node_modules/@atlaskit/icon/glyph/cross.js"),Ls=s.n(As);const Ms=Object(m.h)({label:{id:"issue.label-for-modal-close-button",defaultMessage:"Close"}});class Rs extends n.PureComponent{render(){const e=this.props.intl.formatMessage(Ms.label),t=a.a.createElement(Ls.a,{label:"",size:"medium"});return a.a.createElement("div",null,a.a.createElement(oe.a,{content:e,position:"top"},a.a.createElement(Ds.a,{"aria-label":e,appearance:"subtle",spacing:"default",iconBefore:t,onClick:this.props.onClose})))}}Rs.displayName="ModalActionsCloseButton";var Ns=Object(m.i)(Rs),Fs=s("./src/packages/platform/utils/types/src/general.js"),Us=s("./src/packages/project-settings/issue-restrictions/async.js"),Vs=s("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js")
;const Ks=Object(We.q)("issuerestriction"),Ws=Object(v.createSelector)(Ks,(e=>e&&e.value&&e.value.issuerestrictions&&e.value.issuerestrictions.projectrole||[])),Bs=Object(v.createSelector)(Ks,(e=>e&&e.value&&e.value.shouldDisplay||!1));const Hs=s("./src/packages/project-settings/issue-restrictions/src/common/types.js").a,$s=Object(p.a)([Object(i.connect)((e=>({currentIssueRestriction:Ws(e),isIssueRestrictionDisplayForIssue:Bs(e),hasError:!!Object(d.i)(e),projectKey:Object(d.D)(e),issueKey:Object(u.x)(e),edition:Object(Vs.a)(e),isSubtask:Object(D.c)(e)})),{})])((({currentIssueRestriction:e,isIssueRestrictionDisplayForIssue:t,hasError:s,issueKey:n,projectKey:i,edition:r,isSubtask:o})=>!s&&t&&(!o||e.length>0)?a.a.createElement(Us.a,{entityKey:Object(Fs.l)(n),currentRestrictions:e,restrictionType:Hs,projectKeyOrId:Object(Fs.r)(i),edition:r,isSubtask:o}):null))
;var Gs=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),qs=s.n(Gs),zs=s("./node_modules/@atlaskit/icon/glyph/unlock.js"),Ys=s.n(zs),Qs=s("./src/packages/issue/fields/security-level/src/common/ui/styled.js");const Js=Object(J.default)(Qs.a)(["color:",";"],X.a.N30),Zs=e=>{const{initialValue:t}=e,s=t?qs.a:Ys.a;return a.a.createElement(Ds.a,{appearance:"subtle",spacing:"default",isDisabled:!0,iconBefore:a.a.createElement(Js,null,a.a.createElement(s,{label:""}))})};Zs.displayName="Loading";var Xs=s("./src/packages/platform/ui/error-boundary/src/main.js");const en=({children:e,fallback:t,packageName:s})=>a.a.createElement(Xs.a,{id:"issue-security-level-field",packageName:s,render:()=>t},a.a.createElement(Me.a,{fallback:t},e));en.displayName="IssueSecurityLevelFieldBoundary";var tn=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js"),sn=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js")
;const nn=Object(Me.f)((()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("vendor~f9ca8911"),s.e("async-issue-field-security-level")]).then(s.bind(null,"./src/packages/issue/fields/security-level/src/index.js"))),{moduleId:"./src/packages/issue/fields/security-level/src/index.js"}),an=Object(p.a)([Object(i.connect)((e=>({securityLevelItems:Object(sn.a)(e),isSecurityLevelEnabledForIssue:Object(sn.d)(e),isSecurityLevelEditable:Object(sn.c)(e),error:Object(d.i)(e),issueKey:Object(u.x)(e)})),(e=>({onSuccess:t=>e(Object(tn.g)("security",t))})))])((({securityLevelItems:e,isSecurityLevelEnabledForIssue:t,isSecurityLevelEditable:s,error:n,issueKey:i,onSuccess:r})=>{const[o]=Object(Ht.b)({issueKey:i,fieldKey:"security"});if(!n&&t){const t=a.a.createElement(Zs,{initialValue:o});return a.a.createElement(en,{packageName:"issue",fallback:t},a.a.createElement(nn,{issueKey:i,initialValue:o||null,allowedValues:e,isEditable:s,onSuccess:r}))}return null}))
;var rn=s("./src/packages/platform/controllers/tenant-context/src/components/account-id/index.js"),on=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),cn=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),ln=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-mobile-user-agent.js"),un=s("./src/packages/platform/ui/flags/src/services/index.js"),dn=s("./src/packages/platform/observability/product-analytics-web-client/src/main.js"),pn=s("./src/packages/growth/share-button/src/index.js"),mn=s("./src/packages/growth/share-button/src/constants.js"),bn=s("./src/packages/growth/share-button/src/feature-flags.js"),fn=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js");const gn=()=>a.a.createElement("svg",{width:"16",height:"16",viewBox:"4 4 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{
d:"M7.49805 14.0488C7.49805 14.9467 6.76457 15.6802 5.8667 15.6802C4.96883 15.6802 4.23535 14.9467 4.23535 14.0488C4.23535 13.151 4.96883 12.4175 5.8667 12.4175H7.49805V14.0488Z",fill:"#253858"}),a.a.createElement("path",{d:"M8.32031 14.0488C8.32031 13.151 9.05379 12.4175 9.95166 12.4175C10.8495 12.4175 11.583 13.151 11.583 14.0488V18.1335C11.583 19.0314 10.8495 19.7649 9.95166 19.7649C9.05379 19.7649 8.32031 19.0314 8.32031 18.1335V14.0488Z",fill:"#253858"}),a.a.createElement("path",{d:"M9.95166 7.49805C9.05379 7.49805 8.32031 6.76457 8.32031 5.8667C8.32031 4.96883 9.05379 4.23535 9.95166 4.23535C10.8495 4.23535 11.583 4.96883 11.583 5.8667V7.49805H9.95166Z",fill:"#253858"}),a.a.createElement("path",{d:"M9.95139 8.31982C10.8493 8.31982 11.5827 9.0533 11.5827 9.95117C11.5827 10.849 10.8493 11.5825 9.95139 11.5825H5.8667C4.96883 11.5825 4.23535 10.849 4.23535 9.95117C4.23535 9.0533 4.96883 8.31982 5.8667 8.31982H9.95139Z",fill:"#253858"}),a.a.createElement("path",{
d:"M16.5024 9.95117C16.5024 9.0533 17.2359 8.31982 18.1338 8.31982C19.0317 8.31982 19.7651 9.0533 19.7651 9.95117C19.7651 10.849 19.0317 11.5825 18.1338 11.5825H16.5024V9.95117Z",fill:"#253858"}),a.a.createElement("path",{d:"M15.6802 9.95139C15.6802 10.8493 14.9467 11.5827 14.0488 11.5827C13.151 11.5827 12.4175 10.8493 12.4175 9.95139V5.8667C12.4175 4.96883 13.151 4.23535 14.0488 4.23535C14.9467 4.23535 15.6802 4.96883 15.6802 5.8667V9.95139Z",fill:"#253858"}),a.a.createElement("path",{d:"M14.0488 16.502C14.9467 16.502 15.6802 17.2354 15.6802 18.1333C15.6802 19.0312 14.9467 19.7646 14.0488 19.7646C13.151 19.7646 12.4175 19.0312 12.4175 18.1333V16.502H14.0488Z",fill:"#253858"}),a.a.createElement("path",{d:"M14.0488 15.6802C13.151 15.6802 12.4175 14.9467 12.4175 14.0488C12.4175 13.151 13.151 12.4175 14.0488 12.4175H18.1335C19.0314 12.4175 19.7649 13.151 19.7649 14.0488C19.7649 14.9467 19.0314 15.6802 18.1335 15.6802H14.0488Z",fill:"#253858"}));gn.displayName="SlackIcon";var hn=gn
;const yn=Object(Me.e)((()=>s.e("async-share-to-slack").then(s.bind(null,"./node_modules/@atlassian/share-to-slack/dist/es2019/index.js"))),{ssr:!1,moduleId:"./node_modules/@atlassian/share-to-slack/dist/cjs/index.js"}),On=Object(J.default)(yn)(["margin:-16px -24px;"]),jn=Object(J.default)(on.a)(["width:100%;margin:0 auto;"]),vn=e=>a.a.createElement(Xs.a,{id:"async-share-to-slack",packageName:"share-to-slack"},a.a.createElement(Me.a,{fallback:a.a.createElement(jn,null)},a.a.createElement(On,e)));vn.displayName="ShareToSlack";const En=e=>{var t;const{summary:s,issueAri:i,issueUrl:r,resourceOwner:o,subProductId:c}=e,{showFlag:l}=Object(un.f)(),u=null===(t=Object(dn.a)())||void 0===t?void 0:t.analyticsClient,{locale:d}=Object(cn.f)(),p=Object(bn.d)(),m=[];if(d.toLowerCase().startsWith("en")||m.push("notEnglish"),Object(ln.a)()&&m.push("notDesktop"),u){const e=Object(bn.a)();let t=(null==e?void 0:e.value)||"not-enrolled";m.length&&(t="not-enrolled"),u.sendOperationalEvent({
action:"exposed",actionSubject:"feature",attributes:{flagKey:(null==e?void 0:e.flagKey)||"",value:(null==e?void 0:e.value)||"not-enrolled",cohort:t,ineligibilityReasons:m},source:mn.a.BENTO_ISSUE})}const b=Object(n.useMemo)((()=>p&&0===m.length?[{type:"Slack",Icon:hn,Content:({onClose:e})=>a.a.createElement(vn,{showFlag:l,product:"jira",channel:"productAnalytics",onClose:e})}]:[]),[m.length,p,l]);return a.a.createElement(pn.b,{integrationType:mn.a.BENTO_ISSUE,triggerButtonStyle:"icon-only",productId:o,subProductId:c,shareLink:r,shareTitle:s,shareContentType:"issue",objectAri:i,shareIntegrations:b,shouldAutoDismissFlag:!1})};En.displayName="ShareView";var kn=Object(p.a)([Object(i.connect)((e=>({issueAri:Object(d.v)(e),resourceOwner:Object(d.G)(),summary:Object(We.o)("summary")(e)||"",subProductId:Object(d.b)(e),issueUrl:Object(fn.b)(e)})),{})])(En);const wn=pn.a,Sn=J.default.div(["flex-shrink:0;"]),Cn=Object(p.a)([Object(i.connect)((e=>({isLoading:Object(d.r)(e),error:Object(d.i)(e)
})),{})])((({error:e=null,isLoading:t})=>{const s=Object(rn.a)();return!e&&s?a.a.createElement(Sn,null,t?a.a.createElement(wn,{triggerButtonStyle:"icon-only"}):a.a.createElement(kn,null)):null}));var In=s("./node_modules/@atlaskit/icon/glyph/like.js"),Tn=s.n(In);var Pn=s("./src/packages/issue/fields/voters/src/services/voters-list-service/context.js"),_n=s("./src/packages/platform/utils/constants/src/status-categories.js"),xn=Object(m.h)({addVoteDisabledTooltip:{id:"issue-field-voters.services.disable-resolved-issue-voting-service.add-vote-disabled-tooltip",defaultMessage:"You can't vote on resolved issues"},removeVoteDisabledTooltip:{id:"issue-field-voters.services.disable-resolved-issue-voting-service.remove-vote-disabled-tooltip",defaultMessage:"You can't change your vote on resolved issues"}});const Dn=()=>{const{formatMessage:e}=Object(ce.c)(),t=Object(Ee.g)(),[s]=Object(Ht.b)({issueKey:t,fieldKey:"status"
}),a=Object(n.useMemo)((()=>"DONE"===Object(_n.statusCategoryForId)(null==s?void 0:s.statusCategory.id)),[s]),i=Object(n.useMemo)((()=>a?{addVote:e(xn.addVoteDisabledTooltip),removeVote:e(xn.removeVoteDisabledTooltip)}:void 0),[e,a]);return{isDisabled:a,tooltips:i}};var An=s("./src/packages/issue/fields/voters/src/ui/vote-toggle/index.js"),Ln=s("./src/packages/issue/fields/voters/src/messages.js"),Mn=s("./src/packages/issue/fields/voters/src/ui/button/index.js");const Rn=J.default.div(["[data-role='droplistContent']{overflow:visible;}"]),Nn=J.default.div(["width:240px;min-height:121px;padding:4px 0 0;"]),Fn=J.default.div(["height:121px;display:flex;justify-content:center;align-items:center;"]),Un=Object(Me.f)((()=>s.e("async-voters-dropdown").then(s.bind(null,"./src/packages/issue/fields/voters/src/ui/dropdown-content/index.js"))),{moduleId:"./src/packages/issue/fields/voters/src/ui/dropdown-content/index.js"}),Vn=a.a.createElement(Fn,null,a.a.createElement(on.a,{size:"medium"
})),Kn=({setCloseDropdown:e,disableVotingProps:t})=>a.a.createElement(Xs.a,{id:"issue-voters-list",packageName:"issue",render:()=>Vn},a.a.createElement(Me.a,{fallback:Vn},a.a.createElement(Un,{setCloseDropdown:e,disableVotingProps:t})));Kn.displayName="LazyDropdownContent";const Wn=({disableVotingProps:e})=>{const{formatMessage:t}=Object(ce.c)(),s=t(Ln.a.voteOptionsTooltip),[i,r]=Object(n.useState)(!1),o=Object(n.useCallback)((()=>{r((e=>!e))}),[]),c=Object(n.useCallback)((()=>{r(!1)}),[]);return a.a.createElement(Rn,null,a.a.createElement(G.a,{boundary:"clippingParents",isOpen:i,placement:"auto-end",trigger:e=>a.a.createElement("div",e,a.a.createElement(Mn.a,{onClick:o,tooltip:s,isSelected:i})),onClose:c,content:()=>a.a.createElement(Nn,null,i&&a.a.createElement(Kn,{setCloseDropdown:c,disableVotingProps:e})),zIndex:q.f.modal}))};Wn.displayName="VoterDropdown";var Bn=Wn;const Hn=({disableVotingProps:e})=>{const t=Object(Ee.i)(),[s]=Object($t.d)(t)
;return s.canViewVoters?a.a.createElement(Bn,{disableVotingProps:e}):a.a.createElement(An.a,{disableVotingProps:e})};Hn.displayName="Voters";var $n=Hn;const Gn=()=>{const e=Dn();return a.a.createElement($n,{disableVotingProps:e})};Gn.displayName="IssueVoters";var qn=s("./src/packages/issue/issue-view/src/common/component/loading-component-wrapper/index.js");const zn=J.default.div(["display:flex;padding:4px 8px;"]),Yn=()=>Object(qn.a)(a.a.createElement(zn,null,a.a.createElement(Tn.a,{size:"medium",primaryColor:X.a.N30,label:""}))),Qn=({hasError:e,isIssueLoading:t})=>{const s=Object(Ee.g)(),n=Object(rn.a)(),[i]=Object(Ht.b)({issueKey:s,fieldKey:"votes"});return e||!n?null:t||!i?a.a.createElement(Yn,null):a.a.createElement(Xs.a,{id:"issue.details.vote-action"},a.a.createElement(Pn.a,{scope:s},a.a.createElement(Gn,null)))};Qn.displayName="VotersItem";const Jn=Object(i.connect)((e=>({hasError:!!Object(d.i)(e),isIssueLoading:Object(d.r)(e)
})),{})(Qn),Zn=Object(We.q)("watches"),Xn=Object(v.createSelector)(Zn,(e=>!!e));var ea=s("./node_modules/@atlaskit/icon/glyph/watch.js"),ta=s.n(ea);const sa=J.default.div(["display:flex;margin:4px 25px 4px 8px;"]),na=()=>Object(qn.a)(a.a.createElement("div",null,a.a.createElement(sa,null,a.a.createElement(ta.a,{label:"",size:"medium",primaryColor:X.a.N30})))),aa=({children:e,fallback:t,packageName:s})=>a.a.createElement(Xs.a,{id:"issue-watchers",packageName:s,render:()=>t},a.a.createElement(Me.a,{fallback:t},e));aa.displayName="IssueWatchersBoundary";const ia=Object(Me.f)((()=>s.e("async-issue-watchers").then(s.bind(null,"./src/packages/issue/issue-view/src/views/watchers/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/watchers/index.js"}),ra=({isWatchesPresent:e,isLoading:t,error:s})=>{const n=Object(rn.a)();return!s&&!!n?!e||t?a.a.createElement(na,null):a.a.createElement(aa,{packageName:"issue",fallback:a.a.createElement(na,null)},a.a.createElement(ia,null)):null}
;ra.displayName="WatchersItem";const oa=Object(i.connect)((e=>({isWatchesPresent:Xn(e),isLoading:Object(d.r)(e),error:Object(d.i)(e)})),{})(ra);var ca=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js");const la=({error:e=null,onClose:t=o.a,renderFeedback:s=(()=>null),shouldShowCloseButton:n=!1,issueDeleteCallbacks:i={},viewModeOptions:r={viewModeSwitchEnabled:!1},applicationKey:u})=>{const d=r&&r.viewMode===l.b&&!e;let p;if(s){const e=s(u,!0);null!=e&&(p=a.a.createElement(c.a,{name:"GIVE_FEEDBACK"},a.a.createElement(ca.a,null,e)))}return a.a.createElement(ca.b,null,a.a.createElement(ca.c,{maxResponsiveWidth:d?258:0},n?a.a.createElement(Ns,{onClose:t}):null,a.a.createElement(xs,{externalId:"issue.opsbar",issueDeleteCallbacks:i,viewModeOptions:r,onClose:t}),a.a.createElement(Cn,null),a.a.createElement(Jn,null),a.a.createElement(oa,null),a.a.createElement($s,null),a.a.createElement(an,null),p))};la.displayName="HeaderActionsView",
la.displayName="HeaderActionsView";const ua=Object(p.a)([Object(i.connect)((e=>({error:Object(d.i)(e),applicationKey:Object(u.e)(e)})),{})])(la)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return c})),s.d(t,"a",(function(){return l}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const i=2.5*a.e,r=n.default.div(["min-height:","px;margin-right:0;margin-left:auto;margin-bottom:","px;height:100%;align-items:center;max-width:100%;display:flex;justify-content:flex-end;padding-right:1px;"],4*a.e,a.e/4),o=n.default.div(["display:flex;flex-flow:row-reverse;"," [dir='rtl'] &{padding-right:","px;padding-left:","px;}"],(e=>e.maxResponsiveWidth?`flex: 1 0 auto; justify-content: space-between; max-width: ${e.maxResponsiveWidth}px;`:`flex-shrink: 0; > * { margin-left: ${a.e}px; &:last-child { margin-left: 0; } }`),2*a.e,i),c=Object(n.default)(o)(["user-select:none;"]),l=n.default.div(["flex-shrink:0;"])},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return yt}))
;var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/react-redux/es/index.js"),r=s("./src/packages/issue/issue-context-service/src/main.js"),o=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),u=s("./node_modules/react-resource-router/build/esm/index.js"),d=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),p=s("./node_modules/@atlaskit/icon/glyph/arrow-left-circle.js"),m=s.n(p),b=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),f=s("./src/packages/platform/controllers/intl/src/index.js"),g=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),h=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),y=s("./node_modules/react-intl/lib/index.es.js"),O=Object(y.h)({back:{
id:"issue.views.issue-base.foundation.back-button.back",defaultMessage:"Back"}}),j=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),v=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const E=j.default.div(["margin-right:","px;margin-left:-","px;"],1.5*v.e,1.5*v.e);var k=Object(n.memo)((({url:e})=>{const{formatMessage:t}=Object(f.c)(),{createAnalyticsEvent:s}=Object(g.a)(),i=Object(n.useCallback)((()=>{Object(h.h)(s({}),"button clicked","backFromIssueViewButton")}),[s]);return a.a.createElement(E,null,a.a.createElement(d.a,{href:e,appearance:"subtle",onClick:i,component:__SPA__?u.a:void 0,iconBefore:a.a.createElement(m.a,{label:"",size:"small",primaryColor:b.a.N300})},t(O.back)))
})),w=s("./node_modules/lodash/flow.js"),S=s.n(w),C=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),I=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),T=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),P=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),_=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),x=s("./src/packages/platform/observability/analytics-web-react/src/components/redux-analytics-data.js"),D=s("./src/packages/platform/ui/error-boundary/src/main.js"),A=s("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js"),L=s("./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js"),M=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),R=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),N=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),F=s("./src/packages/issue/issue-view/src/feature-flags.js"),U=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),V=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),K=s("./src/packages/issue/issue-view/src/selectors/project-selector.js"),W=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),B=s("./node_modules/lodash/isEqual.js"),H=s.n(B),$=s("./node_modules/lodash/noop.js"),G=s.n($),q=s("./node_modules/@atlaskit/breadcrumbs/dist/es2019/components/Breadcrumbs.js"),z=s("./node_modules/@atlaskit/breadcrumbs/dist/es2019/components/BreadcrumbsItem.js"),Y=s("./src/packages/platform/utils/types/src/general.js"),Q=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js"),J=s("./src/packages/issue/issue-view/src/selectors/assign-issue-parent-modal-selector.js"),Z=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js"),X=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),ee=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),te=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),se=s("./node_modules/@atlaskit/icon/glyph/edit-filled.js"),ne=s.n(se),ae=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),ie=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),re=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),oe=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),ce=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),le=Object(y.h)({
triggerTooltipAddEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-epic",defaultMessage:"{issueTypeName} - Add {target}"},triggerTooltipChangeEpic:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-epic",defaultMessage:"{issueTypeName} - Change {target}"},triggerTooltipAddParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-add-parent",defaultMessage:"{issueTypeName}Add parent"},triggerTooltipChangeParent:{id:"issue.details.issue-parent-switcher-trigger-tooltip-change-parent",defaultMessage:"{issueTypeName}Change parent"},dropdownEmpty:{id:"issue.details.issue-parent-switcher-dropdown-empty",defaultMessage:"No {target} has been created in this project. Create your first "},dropdownTitleEpic:{id:"issue.details.issue-parent-switcher-dropdown-title-epic",defaultMessage:"Recent {target}"},removeEpic:{id:"issue.details.issue-parent-switcher-remove-epic",defaultMessage:"Remove {target}"},viewEpics:{id:"issue.details.issue-parent-switcher-view-epics",
defaultMessage:"View all {target}"},dropdownTitle:{id:"issue.details.issue-parent-switcher-dropdown-title",defaultMessage:"Recent parents"},removeParent:{id:"issue.details.issue-parent-switcher-remove-parent",defaultMessage:"Remove parent"},viewParents:{id:"issue.details.issue-parent-switcher-view-parents",defaultMessage:"View all parents"}});const ue=j.default.div(["border-bottom:1px solid ",";"],b.a.N30),de=j.default.div(["display:flex;justify-content:center;align-items:center;min-width:","px;min-height:","px;overflow:hidden;"],21*v.e,23.375*v.e),pe=j.default.div(["width:","px;padding:","px;& button,& span{padding:0;margin:0;vertical-align:initial;}"],25*v.e,1.5*v.e);function me(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function be(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,
writable:!0}):e[t]=s,e}const fe=Object(ce.a)("dropdownItem",{onClick:"clicked"})(X.a);class ge extends n.Component{constructor(...e){super(...e),this.state={isOpen:Boolean(this.props.isOpen),isLoading:!this.props.issueParents.length},this.addEpicButtonRef=Object(n.createRef)(),this.focusTimeoutId=null,this.setFocusToAddEpicButtonOnModalClose=()=>{const e=this.addEpicButtonRef.current;e&&(this.focusTimeoutId=setTimeout((()=>e.focus())))},this.onOpenChange=({isOpen:e,event:t},s)=>{const{clickRef:n,onOpenChange:a,onToggle:i}=this.props,r=n&&n.current&&t&&n.current.button.contains(t.target);i(s),this.toggleMenu(e),a&&!r&&a(e)},this.onItemClick=(e,t={})=>(s,n)=>{const{projectId:a,issueTypes:i,issues:r,issueTypeName:o,onSelect:c,setIssueParent:l,onViewAllParentsClick:u,onClick:d}=this.props;switch(e){case"add parent":case"change parent":l(r,t.parentId);break;case"remove parent":l(r);break;case"open modal":u();break;case"create parent":{const e=String((i.find((({name:e})=>e===o))||{}).id)
;a&&e||oe.a.safeErrorWithoutCustomerData("issue-parent-switcher.create.issue.failure","Failed to create the first epic via global issue create",{projectId:a,issueTypeId:e}),((e,t)=>{window.WRM&&window.WRM.require(["wr!com.atlassian.jira.jira-quick-edit-plugin:quick-create-issue"],(()=>{window.JIRA.Forms.createCreateIssueForm({pid:e,issueType:t}).asDialog({id:"software-create-issue-dialog"}).show()}))})(a,e);break}}d(n.update({userAction:e})),c&&c(),!t.keepMenuOpen&&this.toggleMenu(!1)}}componentDidUpdate(e){const{issueParents:t,isOpen:s,isAssignIssueParentModalOpen:n}=this.props;s!==e.isOpen&&s!==this.state.isOpen&&this.toggleMenu(s),t!==e.issueParents&&this.state.isLoading&&this.setState({isLoading:!1}),e.isAssignIssueParentModalOpen&&!n&&this.setFocusToAddEpicButtonOnModalClose()}componentWillUnmount(){clearTimeout(this.focusTimeoutId)}getMessageContent(e,t,s=!0){
const{issueTypeName:n,issueHierarchyLevel:a,intl:{formatMessage:i}}=this.props,r="Epic"!==n?"":`${"Epic".toLowerCase()}${s?"s":""}`;return n&&0===a?i(e,{target:r}):i(t)}getTooltipContent(){const{isOrphan:e,issueTypeName:t,issueHierarchyLevel:s,intl:{formatMessage:n}}=this.props;if(t&&0===s){const s="Epic"!==t?t:"Epic".toLowerCase();return n(e?le.triggerTooltipAddEpic:le.triggerTooltipChangeEpic,{issueTypeName:t,target:s})}return n(e?le.triggerTooltipAddParent:le.triggerTooltipChangeParent,{issueTypeName:t?`${t} - `:""})}toggleMenu(e){const{issueParents:t,fetchIssueParents:s}=this.props;this.setState(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?me(Object(s),!0).forEach((function(t){be(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):me(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({isOpen:e},e&&!t.length?{isLoading:!0
}:{}),(()=>{e&&!t.length&&s()}))}renderTriggerButton(){const{isDisabled:e,isOpen:t,isOrphan:s,issueTypeName:n,issueTypeIconUrl:i,text:r}=this.props,o=this.getTooltipContent(),c=a.a.createElement(d.a,{ref:this.addEpicButtonRef,"aria-label":o,"aria-expanded":t,isDisabled:e,spacing:"compact",appearance:"subtle",iconBefore:!s&&i?a.a.createElement(re.a,{alt:n||"",url:i}):a.a.createElement(ne.a,{size:"small",label:""})},r);return s?c:a.a.createElement(ie.a,{position:"top",content:o,delay:0},c)}renderIssueParentItem(e){const{id:t,key:s,summary:n,issueType:{name:i,iconUrl:r}}=e,o=a.a.createElement(re.a,{alt:i||"",url:r});return a.a.createElement(fe,{key:s,elemBefore:o,onClick:this.onItemClick((this.props.isOrphan?"add":"change")+" parent",{parentId:t})},s," ",n)}renderDropdownItemGroup(e){return this.state.isLoading?a.a.createElement(de,null,a.a.createElement(ae.a,{size:"large"})):a.a.createElement(ee.a,{title:this.getMessageContent(le.dropdownTitleEpic,le.dropdownTitle)
},e.map((e=>this.renderIssueParentItem(e))))}renderDropdownMenu(){const{isOrphan:e,issueTypeName:t,issueHierarchyLevel:s,issueParents:n,issueKey:i,intl:{formatMessage:r}}=this.props,o=t&&"Epic"!==t?t:"Epic".toLowerCase(),c=(n||[]).filter((e=>e.key!==i)).slice(0,5);return 0!==s||this.state.isLoading||n.length?a.a.createElement(a.a.Fragment,null,(this.state.isLoading||c.length>0)&&a.a.createElement(ue,null,this.renderDropdownItemGroup(c)),a.a.createElement(ee.a,null,!e&&0===s&&a.a.createElement(fe,{onClick:this.onItemClick("remove parent")},this.getMessageContent(le.removeEpic,le.removeParent,!1)),a.a.createElement(fe,{onClick:this.onItemClick("open modal")},this.getMessageContent(le.viewEpics,le.viewParents)))):a.a.createElement(pe,null,r(le.dropdownEmpty,{target:o}),a.a.createElement(d.a,{appearance:"link",spacing:"compact",onClick:this.onItemClick("create parent",{keepMenuOpen:!0})},o),".")}render(){return a.a.createElement(te.a,{isOpen:this.state.isOpen,
trigger:this.renderTriggerButton(),onOpenChange:this.onOpenChange},this.renderDropdownMenu())}}ge.displayName="IssueParentSwitcher",ge.displayName="IssueParentSwitcher",ge.defaultProps={isDisabled:!1,isOrphan:!1,issueTypes:[],issues:[],issueParents:[],isOpen:!1,issueKey:"",issueTypeName:"",issueTypeIconUrl:"",issueHierarchyLevel:0,clickRef:null,projectId:null,fetchIssueParents:G.a,setIssueParent:G.a,text:"",onOpenChange:G.a,onSelect:G.a,onViewAllParentsClick:G.a};var he=Object(y.i)(ge),ye=Object(c.a)([Object(_.a)({onToggle:"toggled",onClick:"clicked"}),Object(i.connect)((e=>({projectId:Object(o.C)(e),issueTypes:Object(Z.d)(e),issues:Object(J.a)(e),issueParents:Object(o.B)(e),isAssignIssueParentModalOpen:Object(J.b)(e)})),(e=>({fetchIssueParents:()=>{e(Object(Q.b)())},setIssueParent:(t,s)=>{e(s?Object(Q.f)(t,s):Object(Q.i)(t))},onViewAllParentsClick:()=>{e(Object(Q.h)())}})))])(he);const Oe=e=>null===e?"":e.length>20?`${e.slice(0,20)}...`:e;var je=Object(y.h)({addParent:{
id:"issue.details.add-parent",defaultMessage:"Add {target}"},copy:{id:"issue.details.copy-to-clipboard",defaultMessage:"Copy link to issue"},rootProjectsLink:{id:"issue.details.root-projects-link",defaultMessage:"Projects"}}),ve=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const Ee=Object(ve.a)("div",{target:"e18k4ulk0"})({name:"sgt9w1",styles:"display:flex;flex-grow:0;overflow:visible;"}),ke=Object(ve.a)("span",{target:"e18k4ulk1"})("padding-right:",v.e,"px;display:flex;"),we=Object(ve.a)("span",{target:"e18k4ulk2"})("border-radius:",v.a,"px;overflow:hidden;"),Se=Object(ve.a)(d.a,{target:"e18k4ulk3"})("opacity:0;transition:opacity 0.2s ease,transform 0.2s ease;transform:translate(-8px,0);",Ee,":hover &{opacity:1;transform:translate(0,0);}&:focus{opacity:1;transform:translate(0,0);}"),Ce=Object(ve.a)("div",{target:"e18k4ulk4"
})("display:flex;margin-left:-",v.e/2,"px;",(e=>(e=>!0===e?"\n    & > div:last-child {\n        max-width: 200px;\n    }":"")(e.shouldTruncate))),Ie=Object(ve.a)("div",{target:"e18k4ulk5"})({name:"1id8hns",styles:"max-width:300px;"}),Te=Object(ve.a)("div",{target:"e18k4ulk6"})("color:",b.a.N100,";flex-shrink:0;padding:0 ",v.e,"px;text-align:center;width:",v.e,"px;"),Pe=Ee,_e=ke,xe=we,De=Se,Ae=Ce,Le=Ie,Me=Te;class Re extends n.Component{constructor(...e){super(...e),this.state={isOpen:!1},this.breadcrumbsItemRef=Object(n.createRef)(),this.onOpenChange=e=>{e!==this.state.isOpen&&this.setState({isOpen:e})},this.onClick=e=>{e.preventDefault(),this.setState((e=>({isOpen:!e.isOpen})))}}render(){const{issueTypeName:e,intl:{formatMessage:t}}=this.props,s=e&&"Epic"!==e?e:"Epic".toLowerCase();return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ae,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-add-parent"},a.a.createElement(ye,{clickRef:this.breadcrumbsItemRef,
isOpen:this.state.isOpen,isOrphan:!0,issueTypeName:e,onOpenChange:this.onOpenChange,text:Oe(t(je.addParent,{target:s}))}),e?a.a.createElement(Me,null,"/"):null))}}Re.displayName="BreadcrumbAddParent",Re.defaultProps={issueTypeName:"Epic"};var Ne=Object(y.i)(Re),Fe=s("./node_modules/@atlaskit/icon/glyph/copy.js"),Ue=s.n(Fe),Ve=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/field-copy-text/view.js"),Ke=s("./src/packages/issue/fields/summary/src/services/index.js"),We=s("./src/packages/issue/issue-view/src/common/component/permalink-button/button/view.js"),Be=s("./src/packages/issue/issue-view/src/common/component/permalink-button/permalink-provider/index.js"),He=s("./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js"),$e=s("./node_modules/reselect/lib/index.js");const Ge=Object($e.createSelector)(o.E,U.i,((e,t)=>{const s=e&&e.issueTypes||[];return t.length?s.filter((e=>t.includes(e.id))):s
})),qe=Object($e.createSelector)(o.H,(e=>!(!e.issueType||!e.issueType.shouldShowIssueTypeList)));var ze=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenu.js"),Ye=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),Qe=Object(y.h)({changeType:{id:"issue.details.change-issue-type",defaultMessage:"{issueType} - Change issue type"},changeTypeGroupName:{id:"issue.details.change-issue-type-groupname",defaultMessage:"Change Issue Type"}});const Je=({issueType:e,icon:t,onClick:s})=>{const{formatMessage:n}=Object(f.c)();return a.a.createElement(ie.a,{position:"top",content:n(Qe.changeType,{issueType:e}),delay:0},a.a.createElement(d.a,{"aria-label":n(Qe.changeType,{issueType:e}),spacing:"compact",appearance:"subtle",onClick:s,iconBefore:t}))};Je.displayName="TriggerButton";var Ze=Je;const Xe=({isOpen:e,icon:t,issueTypes:s,issueId:i,showIssueTypeList:o,loadIssueTypes:c,changeIssueType:l})=>{
const{formatMessage:u}=Object(f.c)(),{createAnalyticsEvent:d}=Object(g.a)(),p=Object(r.g)(),[m]=Object(Ye.b)({issueKey:p,fieldKey:"issuetype"}),b=Object(r.i)(),y=Object(n.useCallback)((e=>{null!==i&&(l(p,i,m,e,d({})),o(!1))}),[l,d,m,i,p,o]),O=Object(n.useCallback)((({isOpen:e})=>{o(e)}),[o]),j=Object(n.useCallback)(((t,s)=>{b&&(e||Object(h.h)(s.update({name:"changeIssueTypeDropdown"}),"button clicked","changeIssueTypeDropdownButton"),o(!e))}),[e,b,o]),v=Object(n.useMemo)((()=>{if(s&&0!==s.length){const e=s.filter((e=>e.id!==m.id)).filter((e=>((e,t)=>!e.subtask||t.subtask)(m,e))).map((e=>a.a.createElement(X.a,{key:e.id,elemBefore:a.a.createElement(re.a,{url:e.iconUrl,alt:e.name}),onClick:()=>y(e)},e.name)));return[a.a.createElement(X.a,{key:m.id,elemBefore:a.a.createElement(re.a,{url:m.iconUrl,alt:m.name}),onClick:()=>y(m)},m.name),...e]}return null}),[m,y,s]),E=Object(n.useRef)(!0);return Object(n.useEffect)((()=>{!E.current&&b?c(b):E.current=!1}),[b,e,c]),a.a.createElement(ze.a,{
trigger:a.a.createElement(Ze,{icon:t,issueType:m&&m.name?m.name:"",onClick:j}),appearance:"default",position:"bottom left",onOpenChange:O,isOpen:e,isTriggerNotTabbable:!0},a.a.createElement(ee.a,{title:u(Qe.changeTypeGroupName)},v))};Xe.displayName="ChangeIssueType";var et=Xe,tt=Object(i.connect)((e=>({issueTypes:Ge(e),issueId:Object(o.l)(e),isOpen:qe(e)})),(e=>({showIssueTypeList:t=>e(Object(He.d)(t)),loadIssueTypes:t=>e(Object(He.b)(t)),changeIssueType:(t,s,n,a,i)=>e(Object(He.g)(t,s,n,a,i))})))((e=>a.a.createElement(D.a,{id:"change-issue-type",packageName:"issue-view"},a.a.createElement(et,e)))),st=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),nt=Object(y.h)({uneditableIssueType:{id:"issue.details.uneditable-issue-type",defaultMessage:"{issueTypeName} - You cannot edit this issue type in this project."}}),at=Object(y.i)(Object(st.a)()((({intl:e,issueTypeIconUrl:t,issueTypeName:s})=>a.a.createElement(ie.a,{position:"top",
content:e.formatMessage(nt.uneditableIssueType,{issueTypeName:s}),truncate:!0,delay:0},a.a.createElement(d.a,{spacing:"compact",appearance:"subtle",iconBefore:a.a.createElement(re.a,{url:t}),isDisabled:!0})))));const it=({isSimplifiedProject:e=!1,isIssueTypeFieldEditable:t=!1,issueKey:s=Object(Y.l)(""),issueTypeName:n="",issueTypeIconUrl:i="",relativeIssueUrl:r="",fullIssueUrl:o="",onClick:c=G.a,onCopyClick:l=G.a})=>{const{formatMessage:u}=Object(f.c)(),d=u(je.copy),p=a.a.createElement(z.a,{key:"issueKeyBreadcrumbItem",href:r,onClick:c,text:s,target:"_blank"}),m=t?a.a.createElement(tt,{key:"issueTypeChanger",icon:a.a.createElement(re.a,{url:i,alt:n})}):a.a.createElement(at,{issueTypeName:n,issueTypeIconUrl:i}),[{value:b}]=Object(Ke.a)({issueKey:s}),g=b||"",h=e?a.a.createElement(ie.a,{content:`${s}: ${g}`,position:"top",delay:0},p):p;return a.a.createElement(Be.a,null,(e=>a.a.createElement(Ae,{onMouseLeave:e.hide,onMouseEnter:e.show,onFocus:e.show,onBlur:e.hide,
"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-current-issue-container"},m,h,(e=>e?a.a.createElement(We.a,{id:"BreadcrumbCurrentIssue",label:d,fullIssueUrl:o,onCopyClick:l,isVisible:e.isVisible}):a.a.createElement(Ve.a,{label:d,tooltipDelay:0,tooltipLabel:d,tooltipLabelPosition:"top",shouldFitContainer:!0,value:o,hideFieldText:!0,remountOnChange:!0,onCopyClick:l},a.a.createElement(De,{appearance:"subtle-link",iconBefore:a.a.createElement(Ue.a,{size:"small",label:d}),spacing:"compact"})))(e))))};it.displayName="BreadcrumbCurrentIssue";var rt=it;class ot extends n.Component{constructor(...e){super(...e),this.state={isHovered:!1},this.onHoveredChange=e=>()=>{this.setState({isHovered:e})}}renderBreadcrumbsItem(){const{isSimplifiedProject:e,parentIssue:t,issueHierarchyLevel:s,onClick:n}=this.props,{key:i,summary:r,url:o}=t;return a.a.createElement(ie.a,{content:`${i}: ${r}`,position:"top",delay:0},a.a.createElement(z.a,{href:o,onClick:n,text:e?Oe(0===s?r:i):i,
truncationWidth:e?void 0:300,hasSeparator:!0}))}render(){const{isSimplifiedProject:e,isDisabled:t,parentIssue:s,issueHierarchyLevel:n}=this.props,{key:i,issueTypeName:r,issueTypeIconUrl:o}=s,c=this.renderBreadcrumbsItem();return e?a.a.createElement(Ae,{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container",onMouseEnter:t?void 0:this.onHoveredChange(!0),onMouseLeave:t?void 0:this.onHoveredChange(!1),shouldTruncate:!0},a.a.createElement(ye,{isDisabled:t,issueKey:i,issueTypeName:r,issueTypeIconUrl:this.state.isHovered?"":o,issueHierarchyLevel:n,onSelect:this.onHoveredChange(!1)}),c):a.a.createElement("div",{"data-test-id":"issue.views.issue-base.foundation.breadcrumbs.breadcrumb-parent-issue-container"},c)}}ot.displayName="BreadcrumbParentIssue",ot.defaultProps={isSimplifiedProject:!1,isDisabled:!0,issueHierarchyLevel:0,onClick:G.a}
;var ct=({isSimplifiedProject:e=!1,shouldShowProjectLevelBreadcrumb:t=!1,projectName:s="",projectUrl:n="",projectAvatarUrl:i="",onClick:r=G.a})=>{const o=Boolean(t&&s&&n),c=a.a.createElement(re.a,{url:i,alt:s}),l=a.a.createElement(_e,null,a.a.createElement(xe,null,c)),u=a.a.createElement(z.a,{href:n,onClick:r,text:e?Oe(s):s,truncationWidth:0,iconBefore:l,hasSeparator:!0});return o&&a.a.createElement(Le,null,a.a.createElement(ie.a,{content:s,position:"top",delay:0},u))};class lt extends n.Component{constructor(...e){super(...e),this.onClick=e=>{this.props.onClick(e)},this.onProjectClick=e=>{if(e.ctrlKey||e.metaKey||e.shiftKey)return;e.preventDefault();const{projectUrl:t,onProjectClick:s}=this.props;t&&s(t,this.props.pushAction)},this.onParentClick=e=>t=>{if(t.ctrlKey||t.metaKey||t.shiftKey)return;t.preventDefault();const{onParentClick:s,issueKey:n}=this.props;s({childIssueKey:n,parentIssueKey:Object(Y.l)(e),onIssueKeyChange:this.props.onIssueKeyChange})},this.onRootBreadcrumbClick=e=>{
if(e.ctrlKey||e.metaKey||e.shiftKey)return;const{onRootBreadcrumbClick:t}=this.props;t()}}componentDidMount(){if(this.props.onExperienceSuccess(),!Object(F.isStopFetchPreviewEnabled)()&&this.props.parentIssues.length>0){const e=this.props.parentIssues.map((e=>e.key));this.props.prefetchParents(e)}}componentDidUpdate(e){if(!Object(F.isStopFetchPreviewEnabled)()){const t=this.props.parentIssues.map((e=>e.key)),s=e.parentIssues.map((e=>e.key));this.props.parentIssues.length>0&&!H()(s,t)&&this.props.prefetchParents(t)}}render(){
const{error:e,isSimplifiedProject:t,isLoadingComplete:s,shouldShowProjectLevelBreadcrumb:n,shouldShowRootProjectsBreadcrumb:i,projectName:r,projectUrl:o,projectAvatarUrl:c,parentIssues:l,isIssueTypeFieldEditable:u,issueKey:d,issueTypeName:p,issueTypeIconUrl:m,relativeIssueUrl:b,fullIssueUrl:f,onCopyClick:g,intl:{formatMessage:h},canLinkToParent:y,issueHierarchyLevel:O,parentLevelIssueTypeNames:j}=this.props,v=l.length>0,E=y&&null===e&&s,k=t&&0===O&&E,w=Object(F.isProjectsDirectoryPrettyUrlEnabled)()?"/jira/projects":"/secure/BrowseProjects.jspa";return a.a.createElement(Pe,null,a.a.createElement(q.a,{maxItems:5},i&&a.a.createElement(z.a,{href:w,text:h(je.rootProjectsLink),onClick:this.onRootBreadcrumbClick}),a.a.createElement(ct,{isSimplifiedProject:t,shouldShowProjectLevelBreadcrumb:n,projectName:r,projectUrl:o,projectAvatarUrl:c,onClick:this.onProjectClick}),v?l.map(((e,s)=>a.a.createElement(ot,{key:s,isSimplifiedProject:t,isDisabled:!E,parentIssue:e,issueHierarchyLevel:O,
onClick:this.onParentClick(e?e.key:"")}))):k&&a.a.createElement(Ne,{issueTypeName:j[0]}),a.a.createElement(rt,{isSimplifiedProject:t,isIssueTypeFieldEditable:u,issueKey:d,issueTypeName:p,issueTypeIconUrl:m,relativeIssueUrl:b,fullIssueUrl:f,onClick:this.onClick,onCopyClick:g})))}}function ut(){return(ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function dt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}lt.displayName="IssueBreadcrumbs",lt.displayName="IssueBreadcrumbs",lt.defaultProps={isSimplifiedProject:!1,isLoadingComplete:!1,
issueTypeName:"",issueTypeIconUrl:"",issueHierarchyLevel:0,shouldShowRootProjectsBreadcrumb:!1,error:null,parentIssues:[],onCopyClick:G.a,onExperienceSuccess:G.a};const pt=e=>{let{projectName:t,projectAvatarUrl:s}=e,n=dt(e,["projectName","projectAvatarUrl"]);const{push:i}=Object(u.q)(),o=Object(r.h)(),c=Object(r.g)(),l=Object(f.c)();return a.a.createElement(D.a,{id:"issue.issue-view.foundation.breadcrumbs"},a.a.createElement(lt,ut({pushAction:i,onIssueKeyChange:o,issueKey:c,projectName:t||"",projectAvatarUrl:s||"",intl:l},n)))};pt.displayName="IssueBreadcrumbsWithHooks";var mt=S()(Object(I.a)("breadcrumbs",T.a.SCREEN),Object(W.c)("breadcrumbs"),Object(P.a)("breadcrumbsItem",{onParentClick:"clicked",onClick:"clicked"}),Object(_.a)({onCopyClick:"copyUrlLink",onParentClick:"navigateToParentIssue",onClick:"navigateToCurrentIssue"}),Object(C.a)((e=>({onClick:()=>{e("full.issue.view")},onParentClick:()=>{e("parent-issue.view")},onProjectClick:()=>{e("project.view")},
onRootBreadcrumbClick:()=>{e("projects-list.view")}}))),Object(i.connect)((e=>{const t=Object(o.u)(e);return{error:Object(o.i)(e),isSimplifiedProject:t,isLoadingComplete:Object(o.n)(e),issueSummary:Object(N.o)("summary")(e)||"",relativeIssueUrl:Object(V.i)(e),fullIssueUrl:Object(V.b)(e),issueTypeName:Object(V.g)(e),issueTypeIconUrl:Object(V.e)(e),parentIssues:Object(V.c)(t)(e),projectName:Object(K.e)(e),projectUrl:Object(M.j)(Object(R.f)(e),Object(R.C)(e)),projectAvatarUrl:Object(K.a)(e),isIssueTypeFieldEditable:Object(V.d)(e),canLinkToParent:Object(U.a)(e),issueHierarchyLevel:Object(F.collapsedHierarchies)()?Object(U.b)(e):Object(U.f)(e),parentLevelIssueTypeNames:Object(U.h)(e)}}),(e=>({onParentClick:({childIssueKey:t,parentIssueKey:s,onIssueKeyChange:n})=>{n&&n({fromIssueKey:t,toIssueKey:s,meta:{location:"breadcrumbs"}}),__SPA__||e(Object(A.c)({fromIssueKey:t,toIssueKey:s}))},onProjectClick:(t,s)=>{e(Object(A.d)(t,s))},prefetchParents:t=>e(Object(L.a)({issueKeys:t}))
}))),Object(x.a)((e=>{const t=Object(R.b)(e);return{attributes:{issueHierarchyLevel:Object(F.collapsedHierarchies)()?Object(U.b)(e):Object(U.f)(e),analyticsSource:`issue-view (${t?t.toString():"undefined"})`}}})))(pt),bt=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/styled.js");const ft=Object(j.default)(bt.b)(["margin-left:0;"]),gt=j.default.div(["display:flex;align-items:center;flex-grow:1;overflow:visible;font-size:",";[dir='rtl'] &{padding-left:0;padding-right:","px;}"],(e=>e.isCompact?"12px":null),bt.d),ht=({error:e=null,isCompact:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n=!1})=>{const i=Object(r.b)();return null!==e?null:a.a.createElement(ft,null,a.a.createElement(gt,{isCompact:t},void 0!==i&&a.a.createElement(k,{url:i}),a.a.createElement(mt,{externalId:"issue",shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n})))};ht.displayName="HeaderBreadcrumbsView"
;const yt=Object(c.a)([Object(i.connect)((e=>({error:Object(o.i)(e)})),{}),l.a])(ht)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/noop.js"),r=s.n(i),o=s("./node_modules/@atlaskit/page/dist/es2019/GridColumn.js"),c=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),l=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),u=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),d=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js"),p=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js"),m=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const f=2.5*b.e,g=m.default.div(["min-height:","px;margin-right:-","px;margin-bottom:","px;display:flex;justify-content:space-between;height:100%;align-items:center;"],4*b.e,f,b.e/4);class h extends n.Component{render(){const{shouldShowCloseButton:e,onClose:t,renderFeedback:s,isCompact:n,viewModeOptions:i,issueDeleteCallbacks:r,shouldShowProjectLevelBreadcrumb:c,shouldShowRootProjectsBreadcrumb:u}=this.props;return a.a.createElement(l.a,{isCompact:n},a.a.createElement(o.a,{medium:10},a.a.createElement(g,null,a.a.createElement(p.a,{shouldShowProjectLevelBreadcrumb:c,shouldShowRootProjectsBreadcrumb:u,isCompact:n}),a.a.createElement(d.a,{renderFeedback:s,issueDeleteCallbacks:r,viewModeOptions:i,onClose:t,shouldShowCloseButton:e,isCompact:n}))))}}h.displayName="HeaderItemWithoutCompactMode",h.displayName="Header",h.defaultProps={issueDeleteCallbacks:{},shouldShowCloseButton:!1,shouldShowProjectLevelBreadcrumb:!1,shouldShowRootProjectsBreadcrumb:!1,renderFeedback:()=>null,
viewModeOptions:{viewModeSwitchEnabled:!1},onClose:r.a};t.a=Object(c.a)([u.a])(h)},"./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/add-to-issue-dropdown-group/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return me})),s.d(t,"a",(function(){return be})),s.d(t,"c",(function(){return fe}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/utils/constants/src/analytics-sources.js")),r=s("./src/packages/platform/controllers/intl/src/index.js"),o=s("./src/packages/issue/issue-context-service/src/main.js"),c=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),l=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),u=s("./src/packages/issue/project-context-service/src/main.js"),d=s("./src/packages/issue/project-permissions-service/src/main.js"),p=s("./src/packages/issue/jira-settings-service/src/main.js"),m=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-field-key-by-custom-type.js"),b=s("./node_modules/react-redux/es/index.js"),f=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),g=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),h=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),y=s("./src/packages/issue/issue-view/src/feature-flags.js"),O=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),j=s("./src/packages/platform/ui/error-boundary/src/main.js")
;function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class E extends n.Component{constructor(...e){super(...e),this.ecosystemModalLinkRef=void 0,this.setEcosystemModalLinkRef=e=>{this.ecosystemModalLinkRef=e},this.clickEcosystemModalLinkRef=()=>{var e,t;null===(e=(t=this.props).onClick)||void 0===e||e.call(t,this.props.itemKey),this.ecosystemModalLinkRef&&this.ecosystemModalLinkRef.click()},this.renderEcosystemModalLink=(e,t)=>a.a.createElement("a",{href:e,className:t,ref:this.setEcosystemModalLinkRef,display:"none"},"")}render(){const{id:e,linkText:t,tooltip:s,href:n,styleClass:i,setDropdownItemRef:r}=this.props;return a.a.createElement(O.a,{key:e,onClick:this.clickEcosystemModalLinkRef,title:s,innerRef:r},t,this.renderEcosystemModalLink(n,i))}}E.displayName="EcosystemWebItem",E.defaultProps={styleClass:null,tooltip:null}
;class k extends n.Component{constructor(...e){super(...e),this.ecosystemModalLinkRef=void 0,this.setEcosystemModalLinkRef=e=>{this.ecosystemModalLinkRef=e},this.clickEcosystemModalLinkRef=()=>this.ecosystemModalLinkRef&&this.ecosystemModalLinkRef.click(),this.renderEcosystemModalLink=(e,t)=>a.a.createElement("a",{href:e,className:t,ref:this.setEcosystemModalLinkRef,display:"none"},"")}render(){const{id:e,linkText:t,tooltip:s,href:n,styleClass:i}=this.props;return a.a.createElement(O.a,{key:e,onClick:this.clickEcosystemModalLinkRef,title:s},t,this.renderEcosystemModalLink(n,i))}}k.displayName="EcosystemWebItem",k.defaultProps={styleClass:null,tooltip:null}
;var w=s("./src/packages/forge/forge-ui-analytics/src/services/issue-action/index.js"),S=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-action/index.js"),C=s("./src/packages/forge/forge-ui/src/ui/extension-title/index.js"),I=s("./src/packages/issue/issue-view/src/actions/forge-actions.js"),T=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),P=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js");function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const D=e=>{let{onClick:t,execForgeAction:s,source:i,setDropdownItemRef:r,itemKey:o,label:c}=e,l=x(e,["onClick","execForgeAction","source","setDropdownItemRef","itemKey","label"]);const u=Object(n.useMemo)((()=>({source:i})),[i]),d=Object(n.useCallback)((()=>{Object(w.a)(i),s(l),null==t||t(o)}),[i,s,t,l,o]);return a.a.createElement(S.a,{attributes:u,shouldFireScreenEvent:!1},a.a.createElement(O.a,{key:l.id,onClick:d,innerRef:r},a.a.createElement(C.a,{extensionName:l.title,extensionEnvType:l.extension.environmentType})))};D.displayName="ForgeActionView";const A=Object(P.a)([Object(b.connect)((e=>({source:Object(T.b)(e)})),{execForgeAction:I.c})])(D);function L(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const M=e=>{let{onClick:t,source:s}=e,i=L(e,["onClick","source"]);const r=Object(n.useMemo)((()=>({source:s})),[s]),o=Object(n.useCallback)((()=>{Object(w.a)(s),t(i)}),[s,t,i]);return a.a.createElement(S.a,{attributes:r,shouldFireScreenEvent:!1},a.a.createElement(O.a,{key:i.id,onClick:o},a.a.createElement(C.a,{extensionName:i.title,extensionEnvType:i.extension.environmentType})))};M.displayName="ForgeActionViewOld";const R=Object(P.a)([Object(b.connect)((e=>({source:Object(T.b)(e)})),{onClick:I.c})])(M),N=e=>{if("FORGE_ENTITY_TYPE"===e.type){const t=e;return Object(y.isShortcutMenuEnabled)()?(e=>({component:t=>a.a.createElement(j.a,{packageName:"issue",id:"forge-items"},a.a.createElement(A,_({},e,t))),eventName:e.id,key:e.id,isAllowed:!0,label:e.title}))(t):(e=>({component:()=>a.a.createElement(R,e),eventName:e.id,key:e.id,isAllowed:!0}))(t)}
return Object(y.isShortcutMenuEnabled)()?(e=>({component:t=>a.a.createElement(j.a,{packageName:"issue",id:"connect-items"},a.a.createElement(E,v({href:e.url,linkText:e.name,styleClass:e.styleClass,id:e.name,tooltip:e.tooltip},t))),eventName:e.name,key:e.name,isAllowed:!0,label:e.name}))(e):(e=>({component:()=>a.a.createElement(k,{href:e.url,linkText:e.name,styleClass:e.styleClass,id:e.name,tooltip:e.tooltip}),eventName:e.name,key:e.name,isAllowed:!0}))(e)},F=({ecosystemActions:e})=>e.map(N).filter((e=>e.isAllowed)).reduce(((e,t)=>{if(t.component){const s=t,n=s.component,{key:a,label:i}=s;e.push({Component:n,label:i,key:a})}return e}),[]);class U extends n.Component{componentDidCatch(e,{componentStack:t}){h.h.safeErrorWithoutCustomerData("issue.error-boundary.issue-actions-meatball-menu.ecosystem-items","An uncaught error has occurred in issue actions meatball menu ecosystem items",new g.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{message:e.message,stack:e.stack,
componentStack:t}}))}render(){const{ecosystemActions:e}=this.props;return e.map(N).filter((e=>e.isAllowed)).reduce(((e,t)=>{if(t.component){const s=t,n=s.component,{key:i}=s;e.push(a.a.createElement(n,{key:i}))}return e}),[])}}U.displayName="EcosystemDropdownItems";var V=U,K=Object(b.connect)((e=>({ecosystemActions:Object(f.j)(e)})),{})(V),W=s("./node_modules/react-intl/lib/index.es.js"),B=s("./src/packages/issue/issue-view/src/common/constants/flags.js"),H=s("./src/packages/platform/utils/fetch/src/utils/as-text-stream.js");const $=(e,t,s)=>Object(H.a)((e=>`${e}/rest/greenhopper/1.0/xboard/issue/flag/flag.json`)(e),{method:"POST",body:JSON.stringify({flag:s,issueKeys:[t],commentVisibility:"",comment:""})}).toPromise();var G=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js"),q=s("./src/packages/issue/issue-view/src/views/connect-field.js");const z=Object(W.h)({addFlag:{id:"issue.flag.add",defaultMessage:"Add flag"},removeFlag:{
id:"issue.flag.remove",defaultMessage:"Remove flag"}}),Y=({onChange:e,onConfirm:t,onClick:s,itemKey:i,value:r,label:o,setDropdownItemRef:c})=>{const l=Object(n.useCallback)((()=>{e(!1),t(),null==s||s(i)}),[e,t,s,i]),u=Object(n.useCallback)((()=>{e(!0),t(),null==s||s(i)}),[e,t,s,i]);return r?a.a.createElement(O.a,{key:"removeFlag",onClick:l,innerRef:c},o):a.a.createElement(O.a,{key:"addFlag",onClick:u,innerRef:c},o)};Y.displayName="FlagIssueActionView";const Q=({baseUrl:e,issueKey:t,value:s})=>$(e,t,Object(G.c)(s));var J=Object(q.a)(((e,t)=>({fieldId:Object(G.a)(e),shouldDiscardChangeOnFailure:!0,transformFromStateValue:G.c,transformToStateValue:G.d,saveField:Q,additionalProps:()=>({label:t.label,setDropdownItemRef:t.setDropdownItemRef,onClick:t.onClick}),onSaveFailureFlagType:Object(G.b)(e)?B.A:B.z})))(Y);const Z=z.addFlag,X=z.removeFlag,ee=Object(W.h)({addFlag:{id:"issue.flag.add",defaultMessage:"Add flag"},removeFlag:{id:"issue.flag.remove",defaultMessage:"Remove flag"}})
;class te extends n.Component{constructor(...e){super(...e),this.removeFlag=()=>{this.props.onChange(!1),this.props.onConfirm(),this.props.onActionSelectedAnalytics("removeFlag")},this.addFlag=()=>{this.props.onChange(!0),this.props.onConfirm(),this.props.onActionSelectedAnalytics("addFlag")}}render(){return this.props.value?a.a.createElement(O.a,{key:"removeFlag",onClick:this.removeFlag},this.props.removeFlagMessage):a.a.createElement(O.a,{key:"addFlag",onClick:this.addFlag},this.props.addFlagMessage)}}te.displayName="FlagIssueActionView",te.displayName="FlagIssueActionView";const se=({baseUrl:e,issueKey:t,value:s})=>$(e,t,Object(G.c)(s));var ne=Object(q.a)(((e,t)=>({fieldId:Object(G.a)(e),shouldDiscardChangeOnFailure:!0,transformFromStateValue:G.c,transformToStateValue:G.d,saveField:se,additionalProps:(e,s)=>({onActionSelectedAnalytics:t.onActionSelectedAnalytics,addFlagMessage:s.formatMessage(ee.addFlag),removeFlagMessage:s.formatMessage(ee.removeFlag)}),
onSaveFailureFlagType:Object(G.b)(e)?B.A:B.z})))(te),ae=s("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),ie=s("./src/packages/issue/issue-view/src/common/messages/time.js"),re=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),oe=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js");const ce=({onLogTimeClick:e,onClick:t,label:s,setDropdownItemRef:i,itemKey:r})=>{const o=Object(n.useCallback)((()=>{e(),null==t||t(r)}),[e,t,r]);return a.a.createElement(O.a,{key:"LogTimeActionView",onClick:o,innerRef:i},s)};ce.displayName="LogWorkView";const le=({onLogTimeClick:e})=>{const{formatMessage:t}=Object(r.c)(),{createAnalyticsEvent:s}=Object(re.a)(),i=Object(n.useCallback)((()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(oe.h)(t,"logWork")}),[s,e]);return a.a.createElement(O.a,{key:"LogTimeActionView",onClick:i},t(ie.a.logWork))};le.displayName="LogWorkViewOld"
;const ue=Object(b.connect)(null,(e=>({onLogTimeClick:()=>{e(Object(ae.L)("ADD_MODAL",null))}})))(ce),de=Object(b.connect)(null,(e=>({onLogTimeClick:()=>{e(Object(ae.L)("ADD_MODAL",null))}})))(le),pe=ie.a.logWork,me=(e,t)=>({name:"",key:"AddToIssueDropdownGroup",items:[...t?[a.a.createElement(de,{key:"logWork"})]:[],...e?[a.a.createElement(ne,{key:"flagIssue"})]:[],a.a.createElement(K,{key:"ecosystemItems"})]}),be=(e,t)=>({name:"",key:"AddToIssueDropdownGroup",items:e.reduce(((e,{Component:s,label:n,key:i})=>(s&&e.push(a.a.createElement(s,{label:n,key:i,itemKey:i,onClick:t})),e)),[])}),fe=e=>{const{formatMessage:t}=Object(r.c)(),s=Object(o.a)(),a=Object(o.g)(),b=Object(o.i)(),{issueActions:f}=Object(u.d)(b),[g]=Object(d.d)(b),[h]=Object(c.a)(a,"timetracking"),[y]=Object(p.c)(),[O]=Object(c.c)(a),j=O&&Object(m.a)("com.atlassian.jira.plugin.system.customfieldtypes:flagged",O)||"",[v]=Object(l.b)({issueKey:a,fieldKey:j
}),E=Object(n.useMemo)((()=>g.canEditIssues&&!(null==f||!f.includes("flagActions"))),[g,f]),k=Object(n.useMemo)((()=>(null==s?void 0:s.value)!==i.a.MOBILE_ISSUE&&g.canLogWork&&!!h&&y.isTimeTrackingEnabled),[s,g,h,y]);return Object(n.useMemo)((()=>[...k?[{Component:ue,label:t(pe),key:"logWork"}]:[],...E?[{Component:J,label:t(v?X:Z),key:"flagIssue"}]:[],...F({ecosystemActions:e})]),[k,e,v,t,E])}},"./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-configuration-dropdown-group/configure-issue/messages.js":function(e,t,s){"use strict";var n=s("./node_modules/react-intl/lib/index.es.js");t.a=Object(n.h)({configure:{id:"issue.configure",defaultMessage:"Configure"},swiftBacklink:{id:"issue.swift-backlink-title",defaultMessage:"Back to {issueKey}"}})},"./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-manipulation-dropdown-group/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return fe})),s.d(t,"a",(function(){
return ge})),s.d(t,"c",(function(){return he}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./src/packages/platform/controllers/intl/src/index.js")),r=s("./src/packages/issue/issue-context-service/src/main.js"),o=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),c=s("./src/packages/issue/project-context-service/src/main.js"),l=s("./src/packages/issue/project-permissions-service/src/main.js"),u=s("./src/packages/issue/issue-view/src/feature-flags.js"),d=s("./node_modules/react-redux/es/index.js"),p=s("./src/packages/issue/issue-view/src/actions/clone-modal-actions.js"),m=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),b=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),f=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js"),g=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),h=s("./node_modules/react-intl/lib/index.es.js"),y=Object(h.h)({clone:{id:"issue.clone",
defaultMessage:"Clone"}});const O=({onCloneItemClick:e})=>{const{formatMessage:t}=Object(i.c)(),{createAnalyticsEvent:s}=Object(f.a)(),r=Object(n.useCallback)((()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(g.h)(t,"cloneIssue")}),[s,e]);return a.a.createElement(m.a,{key:"clone",onClick:r},t(y.clone))};O.displayName="CloneIssueOld";const j=({onCloneItemClick:e,onClick:t,label:s,setDropdownItemRef:i,itemKey:r})=>{const o=Object(n.useCallback)((()=>{e(),null==t||t(r||"")}),[e,t,r]);return a.a.createElement(m.a,{key:"clone",onClick:o,innerRef:i},s)};j.displayName="CloneIssue";var v=Object(b.a)(u.isShortcutMenuEnabled,j,O),E=Object(d.connect)(null,(e=>({onCloneItemClick:()=>{e(Object(p.b)())}})))(v);const k=y.clone
;var w=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),S=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),C=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),I=Object(h.h)({clone:{id:"issue.clone",defaultMessage:"Clone"}});const T=({baseUrl:e,issueId:t})=>{const{formatMessage:s}=Object(i.c)(),{createAnalyticsEvent:r}=Object(f.a)(),o=Object(n.useCallback)((()=>{const e=r({action:"clicked",actionSubject:"dropdownItem"});Object(g.h)(e,"cloneIssue")}),[r]),c=`${e||""}/secure/CloneIssueDetails!default.jspa?id=${t||""}`;return a.a.createElement(m.a,{key:"clone",href:c,onClick:o},s(I.clone))};T.displayName="CloneIssueOld";const P=({onClick:e,label:t,setDropdownItemRef:s,itemKey:i})=>{const o=Object(r.f)(),c=`${Object(C.a)()}/secure/CloneIssueDetails!default.jspa?id=${o||""}`,l=Object(n.useCallback)((()=>{null==e||e(i||""),window.location.assign(c)}),[e,i,c])
;return a.a.createElement(m.a,{key:"clone",onClick:l,innerRef:s},t)};P.displayName="CloneIssue";var _=Object(b.a)(u.isShortcutMenuEnabled,P,T),x=Object(d.connect)((e=>({baseUrl:Object(w.f)(e),issueId:Object(S.l)(e)})),{})(_),D=Object(h.h)({convertToIssue:{id:"issue.convert-to-issue",defaultMessage:"Convert to Issue"}});const A=({baseUrl:e,issueId:t})=>{const{formatMessage:s}=Object(i.c)(),{createAnalyticsEvent:r}=Object(f.a)(),o=Object(n.useCallback)((()=>{const e=r({action:"clicked",actionSubject:"dropdownItem"});Object(g.h)(e,"convertToIssue")}),[r]),c=`${e}/secure/ConvertSubTask.jspa?id=${t||""}`;return a.a.createElement(m.a,{key:"convert-to-issue",href:c,onClick:o},s(D.convertToIssue))};A.displayName="ConvertToIssueViewOld";const L=({onClick:e,label:t,setDropdownItemRef:s,itemKey:i})=>{const o=Object(r.f)(),c=`${Object(C.a)()}/secure/ConvertSubTask.jspa?id=${o||""}`,l=Object(n.useCallback)((()=>{null==e||e(i),window.location.assign(c)}),[e,i,c]);return a.a.createElement(m.a,{
key:"convert-to-issue",onClick:l,innerRef:s},t)};L.displayName="ConvertToIssue";var M=L;const R=Object(d.connect)((e=>({baseUrl:Object(w.f)(e),issueId:Object(S.l)(e)})),{})(A),N=D.convertToIssue;var F=Object(h.h)({convertToSubtask:{id:"issue.convert-to-subtask",defaultMessage:"Convert to Subtask"}});const U=({baseUrl:e,issueId:t})=>{const{formatMessage:s}=Object(i.c)(),{createAnalyticsEvent:r}=Object(f.a)(),o=Object(n.useCallback)((()=>{const e=r({action:"clicked",actionSubject:"dropdownItem"});Object(g.h)(e,"convertToSubtask")}),[r]),c=`${e}/secure/ConvertIssue.jspa?id=${t||""}`;return a.a.createElement(m.a,{key:"convert-to-subtask",href:c,onClick:o},s(F.convertToSubtask))};U.displayName="ConvertToSubtaskViewOld";const V=({onClick:e,label:t,setDropdownItemRef:s,itemKey:i})=>{const o=Object(r.f)(),c=`${Object(C.a)()}/secure/ConvertIssue.jspa?id=${o||""}`,l=Object(n.useCallback)((()=>{null==e||e(i),window.location.assign(c)}),[e,i,c]);return a.a.createElement(m.a,{
key:"convert-to-subtask",onClick:l,innerRef:s},t)};V.displayName="ConvertToSubtask";var K=V;const W=Object(d.connect)((e=>({baseUrl:Object(w.f)(e),issueId:Object(S.l)(e)})),{})(U),B=F.convertToSubtask;var H=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js"),$=Object(h.h)({delete:{id:"issue.delete",defaultMessage:"Delete"}});const G=({onDeleteIssueClick:e})=>{const{formatMessage:t}=Object(i.c)(),{createAnalyticsEvent:s}=Object(f.a)(),r=Object(n.useCallback)((()=>{e();const t=s({action:"clicked",actionSubject:"dropdownItem"});Object(g.h)(t,"deleteIssue")}),[s,e]);return a.a.createElement(m.a,{key:"delete",onClick:r},t($.delete))};G.displayName="DeleteIssueViewOld";const q=({onDeleteIssueClick:e,onClick:t,label:s,setDropdownItemRef:i,itemKey:r})=>{const o=Object(n.useCallback)((()=>{e(),null==t||t(r)}),[e,t,r]);return a.a.createElement(m.a,{key:"delete",onClick:o,innerRef:i},s)};q.displayName="DeleteIssue";var z=q;const Y=Object(d.connect)(null,(e=>({
onDeleteIssueClick:()=>{e(Object(H.e)())}})))(G);var Q=Object(d.connect)(null,(e=>({onDeleteIssueClick:()=>{e(Object(H.e)())}})))(z);const J=$.delete;var Z=s("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js"),X=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/parent-issue-selector.js"),ee=Object(h.h)({addToParentLevel:{id:"issue.add-to-parent-level",defaultMessage:"Add parent"},changeParentLevel:{id:"issue.change-parent-level",defaultMessage:"Change parent"}});const te=({onLinkToParentClick:e,hasParent:t})=>{const{formatMessage:s}=Object(i.c)(),{createAnalyticsEvent:r}=Object(f.a)(),o=Object(n.useCallback)((()=>{e();const t=r({action:"clicked",actionSubject:"dropdownItem"});Object(g.h)(t,"linkToParent")}),[r,e]);return a.a.createElement(m.a,{key:"link-to-parent",onClick:o},s(t?ee.changeParentLevel:ee.addToParentLevel))};te.displayName="LinkToParentViewOld"
;const se=({onLinkToParentClick:e,onClick:t,label:s,setDropdownItemRef:i,itemKey:r})=>{const o=Object(n.useCallback)((()=>{e(),null==t||t(r)}),[e,t,r]);return a.a.createElement(m.a,{key:"link-to-parent",onClick:o,innerRef:i},s)};se.displayName="LinkToParent";var ne=se;const ae=Object(d.connect)((e=>({hasParent:Object(X.a)(e)})),(e=>({onLinkToParentClick:()=>{e(Object(Z.h)())}})))(te);var ie=Object(d.connect)(null,(e=>({onLinkToParentClick:()=>{e(Object(Z.h)())}})))(ne);const re=ee.addToParentLevel,oe=ee.changeParentLevel;var ce=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),le=Object(h.h)({move:{id:"issue.move",defaultMessage:"Move"}});const ue=({isSubtask:e,baseUrl:t,issueId:s})=>{const{formatMessage:r}=Object(i.c)(),{createAnalyticsEvent:o}=Object(f.a)(),c=Object(n.useCallback)((()=>{const e=o({action:"clicked",actionSubject:"dropdownItem"});Object(g.h)(e,"moveIssue")
}),[o]),l=e?`${t}/secure/MoveSubTaskChooseOperation!default.jspa?id=${s||""}`:`${t}/secure/MoveIssue!default.jspa?id=${s||""}`;return a.a.createElement(m.a,{key:"move",href:l,onClick:c},r(le.move))};ue.displayName="MoveIssueViewOld";const de=({onClick:e,label:t,setDropdownItemRef:s,itemKey:i})=>{const c=Object(r.f)(),l=Object(r.g)(),u=Object(C.a)(),[d]=Object(o.b)({issueKey:l,fieldKey:"issuetype"}),p=(null==d?void 0:d.subtask)?`${u}/secure/MoveSubTaskChooseOperation!default.jspa?id=${c||""}`:`${u}/secure/MoveIssue!default.jspa?id=${c||""}`,b=Object(n.useCallback)((()=>{null==e||e(i),window.location.assign(p)}),[e,i,p]);return a.a.createElement(m.a,{key:"move",onClick:b,innerRef:s},t)};de.displayName="MoveIssue";var pe=de;const me=Object(d.connect)((e=>({baseUrl:Object(w.f)(e),issueId:Object(S.l)(e),isSubtask:Object(ce.c)(e)})),{})(ue),be=le.move,fe=(e,t,s,n,i,r)=>({name:"",key:"IssueManipulationDropdownGroup",items:[...e?[a.a.createElement(ae,{key:"linkToParent"
})]:[],...t?[a.a.createElement(W,{key:"convertToSubtask"})]:[],...s?[a.a.createElement(R,{key:"convertToIssue"})]:[],...n?[a.a.createElement(me,{key:"moveIssue"})]:[],...i?Object(u.isInlineCloneEnabled)()?[a.a.createElement(E,{key:"cloneIssue"})]:[a.a.createElement(x,{key:"cloneIssue"})]:[],...r?[a.a.createElement(Y,{key:"deleteIssue"})]:[]]}),ge=(e,t)=>({name:"",key:"IssueManipulationDropdownGroup",items:e.reduce(((e,{Component:s,label:n,key:i})=>(s&&e.push(a.a.createElement(s,{label:n,key:i,itemKey:i,onClick:t})),e)),[])}),he=e=>{const{formatMessage:t}=Object(i.c)(),s=Object(r.g)(),a=Object(r.i)(),[d]=Object(o.b)({issueKey:s,fieldKey:"hierarchy-level-above"}),[p]=Object(o.b)({issueKey:s,fieldKey:"issuetype"}),[m]=Object(o.b)({issueKey:s,fieldKey:"subtasks"}),b=Object(c.b)(a),f=Object(c.h)(a),g=null==p?void 0:p.subtask,[h]=Object(l.d)(a),y=Object(n.useMemo)((()=>{const e=!(null==d||!d.name),t=(null==d?void 0:d.issueTypeIds.length)>0;return e&&h.canEditIssues&&t
}),[d,h]),O=Object(n.useMemo)((()=>{const e=(null==m?void 0:m.length)>0,t=(f||[]).filter((e=>e.subtask)).length>0;return!g&&!e&&t&&!b}),[m,f,g,b]),j=Object(n.useMemo)((()=>g&&!b),[g,b]);return Object(n.useMemo)((()=>[...y?[{Component:ie,label:t(e?oe:re),key:"linkToParent"}]:[],...O?[{Component:K,label:t(B),key:"convertToSubtask"}]:[],...j?[{Component:M,label:t(N),key:"convertToIssue"}]:[],...h.canMoveIssue?[{Component:pe,label:t(be),key:"moveIssue"}]:[],...h.canCloneIssue&&Object(u.isInlineCloneEnabled)()?[{Component:E,label:t(k),key:"cloneIssue"}]:[],...h.canCloneIssue&&!Object(u.isInlineCloneEnabled)()?[{Component:x,label:t(k),key:"cloneIssue"}]:[],...h.canDeleteIssue?[{Component:Q,label:t(J),key:"deleteIssue"}]:[]]),[h,y,j,O,t,e])}},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-create-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-create-icon.b72a10e724bc55a4d580df6e4dc082f7.8.svg"},
"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-icon.42c8f6da75b54a565bcc0061425abdb6.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-create-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-create-icon.b72a10e724bc55a4d580df6e4dc082f7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg":function(e,t,s){e.exports=s.p+"assets/incident-icon.42c8f6da75b54a565bcc0061425abdb6.8.svg"},"./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-configuration-href.js":function(e,t,s){"use strict"
;var n=s("./src/packages/platform/utils/constants/src/project-types.js"),a=s("./src/packages/platform/utils/types/src/general.js"),i=s("./src/packages/issue/issue-context-service/src/main.js"),r=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),o=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),c=s("./src/packages/issue/project-context-service/src/main.js"),l=s("./src/packages/issue/project-permissions-service/src/main.js"),u=s("./src/packages/project-settings/common/src/urls.js"),d=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),p=s("./src/packages/issue/issue-view/src/configurations.js"),m=s("./src/packages/issue/issue-view/src/feature-flags.js"),b=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-configuration-dropdown-group/configure-issue/messages.js"),f=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-field-key-by-custom-type.js")
;t.a=e=>{const t=Object(d.a)(),s=Object(i.i)(),g=Object(c.k)(s),h=Object(i.g)(),y=Object(i.m)(),O=Object(c.b)(s),j=Object(l.b)(s),v=O&&j,[E]=Object(r.b)({issueKey:h,fieldKey:"issuetype"}),[k]=Object(o.c)(h);let w="issuetype";O||g!==n.g||null===k||(w=Object(f.a)("com.atlassian.servicedesk:vp-origin",k));const S=void 0!==w?w:"issuetype",[C]=Object(r.b)({issueKey:h,fieldKey:S});if(O&&v&&g){const{pathname:n,search:i}=window.location;return Object(u.a)(Object(a.b)(t),g,s,E.id,{url:`${n}${i}`,title:e(b.a.swiftBacklink,{issueKey:h})})}return!s||null==y||0===y||O?g?p.i[g]:p.i[n.h]:g===n.g?null==C||void 0===C.requestType||void 0===C.requestType.id?p.i[n.g]:Object(m.isJsmTicketConfigInSPAEnabled)()?`${t}/jira/servicedesk/projects/${s}/settings/request-types/request-type/${C.requestType.id}`:`${t}/servicedesk/admin/${s}/request-types/request-type/${C.requestType.id}`:y?`${t}/plugins/servlet/project-config/${s}/issuelayout?screenId=${y}`:g?p.i[g]:p.i[n.h]}},
"./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-field-key-by-custom-type.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=(e,t)=>Object.keys(t).find((s=>null!==t[s].schema.custom&&t[s].schema.custom===e))},"./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js":function(t,s,n){"use strict"
;var a=n("./node_modules/memoize-one/dist/memoize-one.esm.js"),i=n("./src/packages/platform/ui/field-config/src/index.js"),r=n("./src/packages/servicedesk/sla-panel/src/main.js"),o=n("./src/packages/issue/issue-view/src/feature-flags.js"),c=n("./node_modules/react/index.js"),l=n.n(c),u=n("./node_modules/react-intl/lib/index.es.js"),d=n("./node_modules/react-redux/es/index.js"),p=n("./node_modules/lodash/flow.js"),m=n.n(p),b=n("./node_modules/lodash/noop.js"),f=n.n(b),g=n("./src/packages/platform/observability/browser-metrics/src/index.js"),h=n("./src/packages/issue/fields/components/field-heading/src/styled.js"),y=n("./src/packages/issue/fields/components/field-pin/src/index.js"),O=n("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js"),j=n("./src/packages/issue/issue-view/src/common/messages/drafts.js"),v=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),E=n("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),k=n("./src/packages/issue/issue-view/src/selectors/drafts/selectors.js"),w=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),S=n("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),C=n("./src/packages/issue/issue-view/src/views/constants.js"),I=n("./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js"),T=n("./node_modules/styled-components/dist/styled-components.browser.esm.js"),P=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const _=T.default.div(["[class*='CompactWrapper']{","}"],(()=>`margin-bottom: ${2*P.e}${Object(o.isGroupingPreEarlyAccessEnabled)()?"px":""};`))
;var x=n("./src/packages/platform/utils/fetch/src/utils/requests.js"),D=n("./src/packages/issue/issue-view/src/actions/editor-actions.js"),A=n("./src/packages/issue/issue-view/src/common/constants/flags.js"),L=n("./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js"),M=n("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),R=n("./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js"),N=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),F=n("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),U=n("./src/packages/issue/issue-view/src/common/util/get-element/index.js"),V=n("./node_modules/reselect/lib/index.js"),K=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");const W=Object(V.createSelector)(N.w,K.C,((e,t)=>({objectId:e,containerId:t})))
;var B=n("./src/packages/issue/issue-view/src/selectors/tab-selector.js"),H=n("./src/packages/issue/issue-view/src/views/connect-field.js"),$=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/inline-edit/messages.js"),G=n("./src/packages/rich-content/src/common/adf-parsing-utils.js"),q=n("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js");const z=T.default.div([""," margin-bottom:","px;"],(e=>e.isEditing?"":"\n        & > div > div > div > div > div {\n            min-height: 32px !important;\n        }\n        & > div > div > div > div > div > div {\n            padding: 0 6px;\n        }\n    "),(e=>!0!==e.isGrouped?3*P.e:0)),Y=e=>l.a.createElement(z,{isEditing:e.isEditing,isGrouped:e.isGrouped,"data-testid":e["data-testid"]},l.a.createElement(q.a,e));Y.displayName="CompactInlineEditStateless";var Q=Y,J=n("./src/packages/issue/issue-view/src/common/component/renderer/index.js"),Z=Object(u.h)({nonEditablePlaceholderText:{
id:"issue.views.field.rich-text.nonEditablePlaceholderText",defaultMessage:"None"}}),X=n("./node_modules/react-loosely-lazy/lib/esm/index.js"),ee=n("./src/packages/issue/issue-view/src/common/component/editor/async.js");const te=T.default.div(["width:100%;"]),se=Object(X.f)((()=>n.e("async-editor-view").then(n.bind(null,"./src/packages/issue/issue-view/src/common/component/editor/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/common/component/editor/index.js"});class ne extends c.Component{render(){const e=l.a.createElement(ee.b,{mediaContext:this.props.mediaContext,defaultValue:this.props.value});return l.a.createElement(te,{"data-test-id":"issue.views.field.rich-text.editor-container"},l.a.createElement(ee.a,{packageName:"issue",fallback:e},l.a.createElement(se,{baseUrl:this.props.baseUrl,portalElement:this.props.portalElement,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,
mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,emojiProvider:this.props.emojiProvider,externalId:this.props.externalId,defaultValue:this.props.value,onCancel:this.props.onCancel,onBlur:this.props.onBlur,onSave:this.props.onSave,onChange:this.props.onChange,isDisabled:this.props.isDisabled,isInvalid:this.props.isInvalid,isExpanded:this.props.isExpanded,shouldFocus:this.props.shouldFocus,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste})))}}ne.displayName="RichTextFieldView",ne.displayName="RichTextFieldView",ne.defaultProps={isDisabled:!1,isInvalid:!1,isExpanded:!1,shouldFocus:!1,value:null,mediaContext:null,mentionEncoder:null,emojiProvider:null,onPaste:f.a};const ae=T.default.div(["width:100%;"]),ie=["isEditable","isEditing","externalId","noValueText","mediaContext","adfValue"];class re extends c.Component{constructor(...e){super(...e),this.onMouseDownEditView=()=>{
this.mouseDownSelection=window.getSelection().toString()},this.onEditRequested=()=>{const e=window.getSelection().toString(),t=e&&0!==e.length,s=this.mouseDownSelection&&0!==this.mouseDownSelection.length;t||s||this.props.onEditRequest()},this.getEditValue=()=>this.props.adfValue,this.getNonEditablePlaceholderText=()=>this.props.intl.formatMessage(Z.nonEditablePlaceholderText),this.mouseDownSelection=void 0}componentDidMount(){this.props.onExperienceSuccess()}shouldComponentUpdate(e){return!ie.every((t=>this.props[t]===e[t]))}renderContent(){return l.a.createElement(ae,null,l.a.createElement(J.a,{mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,contextIdentifier:this.props.contextIdentifier,adf:Object(G.i)(this.props.adfValue),placeholder:this.props.isEditable?this.props.noValueText:this.getNonEditablePlaceholderText()}))}renderReadView(){const{intl:e,isEditable:t,isMobile:s,fieldId:n}=this.props
;return l.a.createElement("div",{onMouseDown:this.onMouseDownEditView,role:"presentation","data-test-id":`issue.views.field.rich-text.${n}`},l.a.createElement(Q,{label:"",isLabelHidden:!0,readView:this.renderContent(),onEditRequested:this.onEditRequested,isEditing:!1,editButtonLabel:e.formatMessage($.a.editButtonLabel,{fieldName:""}),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:""}),cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{fieldName:""}),editView:t?l.a.createElement("div",null):null,onConfirm:f.a,onCancel:f.a,isFitContainerWidthReadView:!s}))}renderEditView(){return l.a.createElement(ne,{baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,portalElement:this.props.portalElement,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,contextIdentifier:this.props.contextIdentifier,activityProvider:this.props.activityProvider,externalId:this.props.externalId,isDisabled:void 0,isExpanded:!0,shouldFocus:!0,
value:this.getEditValue(),onCancel:this.props.onCancel,onChange:this.props.onChange,onBlur:this.props.onBlur,onSave:this.props.onConfirm,onSaveFailure:this.props.onSaveFailure,onChangeFailure:this.props.onChangeFailure,onPaste:this.props.onPaste})}render(){return this.props.isEditing?this.renderEditView():this.renderReadView()}}re.displayName="RichTextInlineEditView",re.displayName="RichTextInlineEditView",re.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,adfValue:void 0,contextIdentifier:void 0,onExperienceSuccess:f.a};var oe=Object(u.i)(re);const ce=Object(u.h)({noValueText:{id:"issue.placeholder-for-empty-issue-description-field",defaultMessage:"Add a description..."}});function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const ue=e=>{const{onEditRequest:t,onConfirm:s,isEditing:n}=e;Object(c.useEffect)((()=>{
n?Object(g.c)().markTimeToFinishTask({key:C.a.DESCRIPTION.TIME_TO_RENDER_EDIT_VIEW}):(Object(g.c)().markTimeToFeedback({key:C.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION}),Object(g.c)().markTimeToFeedback({key:C.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION}))}),[n]);const a=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({key:C.a.DESCRIPTION.TIME_TO_RENDER_EDIT_VIEW,cancelExisting:!0}),t()}),[t]),i=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({key:C.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION,cancelExisting:!0}),Object(g.c)().markStartOfInteraction({key:C.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION,cancelExisting:!0}),s()}),[s]);return l.a.createElement(oe,le({},e,{onEditRequest:a,onConfirm:i}))};ue.displayName="DescriptionField";var de=m()(Object(S.b)("description"),Object(H.a)((()=>({fieldId:"description",shouldSaveDraft:!0,isOptimistic:!0,saveField:({baseUrl:e,issueKey:t,value:s})=>((e,t,s)=>{
const n=`${e}/rest/internal/3/issue/${t}/description`,a=JSON.stringify(s);return Object(x.e)(n,{body:a})})(e,t,s),canContainMediaContent:!0,onSaveFailureFlagType:A.F,additionalProps:(e,t)=>{const s=Object(N.f)(e);return{baseUrl:s,portalElement:Object(B.a)("description")(e)?Object(U.b)()||document.body:void 0,adfValue:Object(v.g)("description")(e),htmlValue:Object(v.i)("description")(e),isInvalid:Object(v.k)("description")(e),invalidMessage:Object(v.j)("description")(e),mediaContext:Object(F.a)(e),mentionProvider:Object(L.a)(e),contextIdentifier:W(e),mentionEncoder:Object(M.a)(s),activityProvider:Object(R.a)(e),externalId:"issue.descriptionHtml",noValueText:t.formatMessage(ce.noValueText)}},additionalCallbacks:e=>({onExpandedFailure:()=>e(Object(D.b)()),onSaveFailure:()=>e(Object(D.c)()),onChangeFailure:()=>e(Object(D.a)())})}))))(ue);class pe extends c.Component{componentDidMount(){this.props.onExperienceSuccess()}componentDidUpdate(e){
const{isEditing:t,isWaiting:s,hasDraft:n}=this.props,a=!(e.isEditing||t||s||n),i=a&&e.hasDraft&&!e.isWaiting,r=a&&!e.hasDraft&&e.isWaiting;i?Object(g.c)().markTimeToFinishTask({key:C.a.DESCRIPTION.TIME_TO_SAVE_UPDATED_DESCRIPTION}):r&&Object(g.c)().markTimeToFinishTask({key:C.a.DESCRIPTION.TIME_TO_SAVE_UNCHANGED_DESCRIPTION})}render(){const{area:e,label:t,fieldId:s,hasDraft:n,isEditing:a,isWaiting:i,intl:r}=this.props,o="content"===e?O.c:h.e,c="content"===e?O.e:h.f,u=Object(I.a)(e);return l.a.createElement(_,null,l.a.createElement(o,null,l.a.createElement(O.b,null,l.a.createElement(c,null,t),!n||a||i?null:l.a.createElement(O.a,null,`\u2022 ${r.formatMessage(j.a.draftIndicator)}`),!0===u&&l.a.createElement(y.a,{fieldId:s,label:t}))),l.a.createElement(de,null))}}pe.displayName="Description",pe.defaultProps={area:"context",onExperienceSuccess:f.a},pe.displayName="Description"
;var me=m()(u.i,Object(w.c)("description-container"),Object(S.b)("description"),Object(E.a)(),Object(d.connect)((e=>({label:Object(v.m)("description")(e),hasDraft:Object(k.a)("description")(e),isEditing:Object(v.D)("description")(e),isWaiting:Object(v.F)("description")(e)})),{}),Object(E.a)())(pe),be=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),fe=n("./src/packages/issue/issue-view/src/common/styles/issue-value.js"),ge=n("./node_modules/@atlaskit/textarea/dist/es2019/text-area.js");const he=T.default.div(["",";"],Object(fe.f)("textarea")),ye=e=>{const t=(e=>e?e.split(/\r\n|\r|\n/).length:0)(e.value),s=e.scrollRows||t,n="content"===e.area?20:5,a=Math.min(n,Math.max(2,s));return l.a.createElement(he,null,l.a.createElement(ge.a,{value:e.value,onChange:t=>{e.onChange(t.target.value)},isInvalid:!!e.invalidMessage,invalidMessage:e.invalidMessage,shouldFitContainer:!0,autoFocus:!0,isLabelHidden:!0,label:"",minimumRows:a}))}
;ye.displayName="TextAreaField",ye.defaultProps={value:"",invalidMessage:null,scrollRows:null,area:"context"},ye.displayName="TextAreaField";var Oe=ye;const je=T.default.div(["[class*='CompactWrapper'] > *{margin-left:0;}[class*='ContentWrapper']{padding-left:0;padding-right:0;}"]),ve=Object(T.default)(je)(["[class*='CompactWrapper']{","}"],(()=>`margin-bottom: ${2*P.e}${Object(o.isGroupingPreEarlyAccessEnabled)()?"px":""};`));class Ee extends c.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e)},this.onConfirm=()=>{const{value:e}=this.props;this.props.onChange(Object(G.j)(e)),this.props.onConfirm()},this.readView=void 0}renderReadView(){const{value:e,noValueText:t,area:s}=this.props;return e&&0!==e.trim().length?"content"===s||"content-request"===s?l.a.createElement(fe.d,{innerRef:e=>{this.readView=e}},e&&Object(G.j)(e)):l.a.createElement(fe.c,{innerRef:e=>{this.readView=e},maxRows:5},e):l.a.createElement(fe.b,null,t)}renderEditView(){let e
;if(this.readView){const{scrollHeight:t}=this.readView,s=window.getComputedStyle(this.readView),n=Number.parseFloat(s.getPropertyValue("line-height"));e=Math.round(t/n)}return l.a.createElement(Oe,{value:this.props.value,onChange:this.onChange,invalidMessage:this.props.invalidMessage,scrollRows:e,area:this.props.area})}getField(){return l.a.createElement(be.a,{onEscape:this.props.onCancel},l.a.createElement(Q,{isLabelHidden:!0,label:this.props.label,readView:this.renderReadView(),editView:this.props.isEditable?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:this.props.isEditing,onConfirm:this.onConfirm,onCancel:this.props.onCancel,onEditRequested:this.props.onEditRequest,isFitContainerWidthReadView:!0,isConfirmOnBlurDisabled:this.props.isConfirmOnBlurDisabled,editButtonLabel:this.props.intl.formatMessage($.a.editButtonLabel,{fieldName:this.props.label}),confirmButtonLabel:this.props.intl.formatMessage($.a.confirmButtonLabel,{fieldName:this.props.label}),
cancelButtonLabel:this.props.intl.formatMessage($.a.cancelButtonLabel,{fieldName:this.props.label})}))}render(){const{area:e,fieldId:t,label:s}=this.props,n="context"===e?ve:je,a=Object(I.a)(e);return l.a.createElement(n,null,"content"===e?l.a.createElement(O.c,null,l.a.createElement(O.e,null,s)):l.a.createElement(h.e,null,l.a.createElement(h.f,null,s),!0===a&&l.a.createElement(y.a,{fieldId:t,label:s})),this.getField())}}Ee.displayName="TextAreaInlineEditView",Ee.displayName="TextAreaInlineEditView",Ee.defaultProps={isEditable:!1,isEditing:!1,isConfirmOnBlurDisabled:!1,value:"",label:"",noValueText:null,invalidMessage:null};var ke=Object(u.i)(Ee),we=Object(u.h)({noValue:{id:"issue.common.multi-line-text.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None"}}),Se=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(we.noValue),area:t.area})
})))(ke),Ce=n("./src/packages/platform/controllers/intl/src/index.js"),Ie=n("./src/packages/issue/issue-view/src/views/common/with-container-width/index.js");const Te=Object(u.h)({noValueText:{id:"issue.multiline-field.empty-placeholder",defaultMessage:"None"}});function Pe(){return(Pe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function _e(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const xe=e=>{
const{label:t,area:s,hasDraft:n,isEditing:a,containerWidth:i}=e,r=_e(e,["label","area","hasDraft","isEditing","containerWidth"]),o=Object(Ce.c)(),c=n&&!a,u="content"===s?O.c:h.e,d="content"===s?O.e:h.f,p=Object(I.a)(s);return l.a.createElement(_,null,l.a.createElement(u,null,l.a.createElement(O.b,null,l.a.createElement(d,null,t),!0===c?l.a.createElement(O.a,null,`\u2022 ${o.formatMessage(j.a.draftIndicator)}`):null,!0===p&&l.a.createElement(y.a,{fieldId:e.fieldId,label:t}))),l.a.createElement(oe,Pe({isEditing:a},r)))};xe.displayName="MultilineField";var De=Object(H.a)(((e,t)=>({fieldId:t.fieldId,shouldSaveDraft:!0,isOptimistic:!0,saveField:({baseUrl:e,issueKey:s,value:n})=>((e,t,s,n)=>{const a=`${e}/rest/api/3/issue/${t}`;return Object(x.e)(a,{body:JSON.stringify({fields:{[s]:n}})})})(e,s,t.fieldId,n),canContainMediaContent:!0,onSaveFailureFlagType:A.F,additionalProps:(e,s)=>{const n=Object(N.f)(e);return{baseUrl:n,
portalElement:Object(B.a)(t.fieldId)(e)?Object(U.b)()||document.body:void 0,adfValue:Object(v.g)(t.fieldId)(e),hasDraft:Object(k.a)(t.fieldId)(e),htmlValue:Object(v.i)(t.fieldId)(e),isInvalid:Object(v.k)(t.fieldId)(e),invalidMessage:Object(v.j)(t.fieldId)(e),mediaContext:Object(F.a)(e),mentionProvider:Object(L.a)(e),mentionEncoder:Object(M.a)(n),activityProvider:Object(R.a)(e),externalId:`issue.${t.fieldId}`,noValueText:s.formatMessage(Te.noValueText),area:t.area}},additionalCallbacks:e=>({onExpandedFailure:()=>e(Object(D.b)()),onSaveFailure:()=>e(Object(D.c)()),onChangeFailure:()=>e(Object(D.a)())})})))(Object(Ie.a)(xe));var Ae=Object(d.connect)(((e,t)=>({isRichTextField:Object(v.I)(t.fieldId)(e)})),{})((e=>{const{isRichTextField:t,fieldId:s,area:n="context"}=e;return t?l.a.createElement(De,{fieldId:s,area:n}):l.a.createElement(Se,{fieldId:s,area:n})
})),Le=n("./src/packages/issue/issue-view/src/views/issue-base/context/approval/index.js"),Me=n("./node_modules/lodash/memoize.js"),Re=n.n(Me),Ne=n("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsEvents.js"),Fe=n("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),Ue=n("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),Ve=n("./src/packages/platform/utils/fetch/src/utils/as-json.js"),Ke=n("./src/packages/issue/issue-context-service/src/main.js"),We=n("./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js"),Be=n("./src/packages/issue/project-permissions-service/src/main.js"),He=n("./src/packages/issue/smart-field-prefetch/src/context.js"),$e=n("./src/packages/platform/utils/constants/src/fetch-default-options-with-strict-mode.js");function Ge(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qe(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(s),!0).forEach((function(t){ze(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ge(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ze(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
var Ye=n("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),Qe=n("./node_modules/lodash/isNil.js"),Je=n.n(Qe),Ze=n("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),Xe=n("./node_modules/@atlaskit/form/dist/es2019/Messages.js"),et=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),tt=n("./src/packages/issue/fields/components/user-picker/src/main.js"),st=n("./src/packages/profilecard-next/src/common/constants.js"),nt=n("./src/packages/issue/issue-view/src/views/common/with-profilecard-next/index.js"),at=n("./src/packages/issue/issue-view/src/views/field/user/assets/add.png"),it=n.n(at),rt=n("./node_modules/@atlaskit/theme/dist/es2019/index.js"),ot=T.default.div(["padding-right:","px;padding-top:1px;& span[role='img']{background-color:"," !important;}"],P.e,rt.a.N30),ct=T.default.div(["align-items:center;display:flex;padding-top:1px;"]),lt=Object(u.h)({invitePeopleOption:{id:"issue.assignee.invite-people-option",
defaultMessage:"Add teammate to Jira"},invitePeopleOptionAdmin:{id:"issue.assignee.invite-people-option-admin",defaultMessage:"Invite teammate to Jira"}});function ut(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(s),!0).forEach((function(t){pt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ut(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class mt extends c.Component{constructor(...e){super(...e),this.shouldTrackAssigneeInteractions=()=>"assignee"===this.props.fieldId,
this.onChange=e=>{this.shouldTrackAssigneeInteractions()&&Object(g.c)().markStartOfInteraction({key:C.a.ASSIGNEE.TIME_TO_REFLECT_SELECTED,cancelExisting:!0}),this.props.onChange(e)},this.onDataRequest=e=>{!0!==e&&this.shouldTrackAssigneeInteractions()&&Object(g.c)().markStartOfInteraction({key:C.a.ASSIGNEE.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=(e=!0,t=0)=>{this.shouldTrackAssigneeInteractions()&&Object(g.c)().markTimeToFinishTask({key:e?C.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS:C.a.ASSIGNEE.TIME_TO_REFLECT_INPUT_RESULT,collectors:[e=>dt(dt({},e),{},{resultsLength:t})]})},this.onEditRequested=()=>{this.shouldTrackAssigneeInteractions()&&Object(g.c)().markStartOfInteraction({key:C.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()}}componentDidUpdate(e){if(this.shouldTrackAssigneeInteractions()){const{value:t,isEditing:s}=this.props;!1===e.isEditing&&!1===s&&e.value!==t&&Object(g.c)().markTimeToFinishTask({
key:C.a.ASSIGNEE.TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT});e.isEditing&&!s&&e.value!==t&&Object(g.c)().markTimeToFinishTask({key:C.a.ASSIGNEE.TIME_TO_REFLECT_SELECTED});!e.isEditing&&s&&setTimeout((()=>{Object(g.c)().markTimeToFeedback({key:C.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS})}),0)}}getActions(){const{fieldId:e}=this.props;return"reporter"===e?[st.c,st.b]:"assignee"===e?[st.c,st.a]:void 0}getInvitePeopleOption(){const{intl:e}=this.props,{isAdmin:t}=Object(et.f)();return{name:e.formatMessage(t?lt.invitePeopleOptionAdmin:lt.invitePeopleOption),avatarUrl:it.a}}renderReadView(){const{customReadView:e}=this.props;if(e)return e(this.props.value);const t=this.props.value||this.props.emptyOption||{avatarUrl:"",name:""};return l.a.createElement(nt.a,{userAccount:t,analyticsData:{trigger:this.props.fieldId},position:"left-start",actions:this.getActions()},l.a.createElement(ct,null,l.a.createElement(ot,null,l.a.createElement(Ze.a,{borderColor:"transparent",src:t.avatarUrl,size:"small"
})),t.name))}renderReadViewWithContentWrapper(){const e=this.props.fieldContentWrapper;return Je()(e)?this.renderReadView():l.a.createElement(e,null,this.renderReadView())}renderEditView(){const{portalElement:e,emptyOption:t,initialOptions:s,fetchSuggestions:n,fieldId:a,value:i,onCancel:r,onConfirm:o,enablePeopleInvite:c}=this.props,u={portalElement:e,emptyOption:t,initialOptions:s,fetchSuggestions:n,fieldId:a,value:i,onCancel:r,onSelection:o,width:"100%",onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded,onChange:this.onChange,enablePeopleInvite:c,invitePeopleOption:!0===c?this.getInvitePeopleOption():null};return l.a.createElement(tt.a,u)}getEditButtonLabel(){const{intl:e,label:t,value:s,emptyOption:n}=this.props;return null!=s&&s.name?e.formatMessage($.a.extendedEditButtonLabel,{inputFieldValue:s.name,fieldName:t}):null!=n&&n.name?e.formatMessage($.a.extendedEditButtonLabel,{inputFieldValue:n.name,fieldName:t}):e.formatMessage($.a.editButtonLabel,{fieldName:t})}
render(){const{intl:e,label:t,isEditing:s,isEditable:n,isMobile:a,invalidMessage:i,fieldId:r,titleView:o=this.props.label,showPinButton:c,onCancel:u,customReadView:d}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===c&&l.a.createElement(y.a,{fieldId:r,label:t})),l.a.createElement(h.g,{isEditing:s,"data-test-id":`issue.views.field.user.${r}`,fixedHeight:!d},null!=i?l.a.createElement(Xe.a,{key:`${r}-error-message`},i):null,l.a.createElement(be.a,{onEscape:u},l.a.createElement(q.a,{editView:n?this.renderEditView():null,readView:this.renderReadViewWithContentWrapper(),areActionButtonsHidden:!0,disableEditViewFieldBase:!0,shouldConfirmOnEnter:!0,isEditing:s,isInvalid:!!i,invalidMessage:i,isLabelHidden:!0,label:t,onCancel:f.a,onConfirm:f.a,onEditRequested:this.onEditRequested,onFocus:f.a,isFitContainerWidthReadView:!a,editButtonLabel:this.getEditButtonLabel(),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:t}),
cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{fieldName:t})}))))}}mt.displayName="UserInlineEditView",mt.displayName="UserInlineEditView",mt.defaultProps={isMobile:!1,label:"",initialOptions:[],emptyOption:null,invalidMessage:null,value:null};var bt=Object(u.i)(mt),ft=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js");const gt=(e,t,s,n,a,i)=>{if(null==e)return;const r="access",o="fieldPrefetchCache",c=e({action:r,actionSubject:o,actionSubjectId:n}),l={fieldSelectionSessionId:n,fieldFetchSessionId:i,prefetchSessionId:s,cacheHit:t,fieldId:a};Object(ft.b)(c,`${o} access`,n,l)},ht=(e,t,s,n,a)=>gt(e,!0,t,s,a,n),yt=(e,t,s,n)=>gt(e,!1,t,s,n);function Ot(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function jt(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(s),!0).forEach((function(t){vt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ot(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Et=(e,t,s,n,a)=>{const i=jt(jt({},a),{},{elapsedTimeMs:Ue.default.now()-s});n&&Object(ft.b)(n({action:e,actionSubject:t}),`${t} ${e}`,i)},kt=(e,t,s,n)=>{Et("succeeded",`${e}Suggestions`,t,s,n)},wt=(e,t,s,n)=>{Et("failed",`${e}Suggestions`,t,s,n)},St=e=>e?(e=>({avatarUrl:e.avatarUrls&&e.avatarUrls["48x48"],id:e.accountId,name:e.displayName}))(e):null,Ct=e=>e?(e=>({avatarUrls:{"48x48":e.avatarUrl},displayName:e.name,accountId:e.id}))(e):null;function It(){return(It=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Tt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Pt=Object(u.h)({assignToMe:{id:"issue.assignee.text-for-logged-in-user",defaultMessage:"Assign to me"},unassignedOption:{id:"issue.assignee.text-when-no-value-is-provided",defaultMessage:"Unassigned"}}),_t=e=>e&&e.accountId,xt=Object(a.a)((e=>({avatarUrl:"",name:e(Pt.unassignedOption)}))),Dt=Object(a.a)(((e,t)=>e?[{avatarUrl:e.avatarUrl,id:e.id,name:e.displayName,displayName:t(Pt.assignToMe)}]:[])),At=Object(a.a)(((e,t)=>e?[{avatarUrl:"",id:null,name:t(Pt.unassignedOption),displayName:t(Pt.unassignedOption)
}]:[])),Lt=Object(a.a)(((e,t,s,n)=>[...!Boolean(t&&e&&e.id===t.accountId)&&n?Dt(e,s):[],...t?At(e,s):[]])),Mt=(e,t)=>!!e&&t.toLowerCase().startsWith(e.toLowerCase()),Rt=Object(a.a)(((e,t)=>Object(a.a)((s=>{const n=Mt(s,t(Pt.assignToMe));return[...Mt(s,t(Pt.unassignedOption))?At(e,t):[],...n?Dt(e,t):[]]})))),Nt=Object(a.a)(((e,t,s,n)=>(i,r)=>{if(!e)return Promise.resolve([]);const o=((e,t)=>Object(a.a)((s=>{const n=Mt(s,t(Pt.assignToMe));return[...Mt(s,t(Pt.unassignedOption))?At(e,t):[],...n?Dt(e,t):[]]})))(t,s)(i),c=null!=r?`&sessionId=${r}`:"",l=Ue.default.now(),u=i.length;return Object(Ve.a)(`${e}${i}${c}`).then((e=>{kt("assignee",l,n,{sessionId:r,queryLength:u});const t=e.map(St).filter(Boolean);return[...o,...t]})).catch((e=>{throw wt("assignee",l,n,{sessionId:r}),e}))})),Ft=Re()(((e,t)=>(s,n)=>{if(!s&&null!=e){const{prefetchSessionId:a,prefetched:i,fieldValuePromise:r,sessionId:o}=e,{createAnalyticsEvent:c}=t;if(i&&null!==r&&null!==o){const e=t.getDefaultOptions(s)
;ht(c,a,n||"",o,"assignee");const i=Ue.default.now();return r.then((t=>{kt("assignee",i,c,{sessionId:n,isPrefetched:!0,queryLength:0});const s=t.map(St).filter(Boolean);return[...e,...s]})).catch((e=>{throw wt("assignee",i,c,{sessionId:n,isPrefetched:!0}),e}))}return yt(c,a,n||"","assignee"),t.fetchSuggestions(s,n)}return t.fetchSuggestions(s,n)}),((e,t)=>`${e&&e.prefetchSessionId||""}_${t.issueKey}`)),Ut=e=>{Object(o.isStopFetchPreviewEnabled)()?Object(c.useLayoutEffect)((()=>e.initFieldOptions()),[]):Object(c.useMemo)((()=>e.initFieldOptions()),[]);const t=Object(c.useRef)(null);Object(c.useEffect)((()=>{t.current&&e.isEditing&&Object(Ye.a)(t.current)}),[e.isEditing]);const[{value:s}]=Object(We.a)({issueKey:e.issueKey}),n=Object(Ke.i)(),[{canBeAssignedToIssues:a,canAssignIssues:i}]=Object(Be.d)(n),r=!!i,{formatMessage:u}=Object(Ce.c)(),d=Lt(e.loggedInUser,s,u,!!a),p=Object(c.useCallback)((()=>{const t=Object(He.a)(e.issueKey,"assignee");return l.a.createElement(t,{fieldId:"assignee"
},(t=>{const n=Ft(t,e),{createAnalyticsEvent:a,getDefaultOptions:i,initFieldOptions:o,intl:c,issueKey:p,loggedInUser:m}=e,b=Tt(e,["createAnalyticsEvent","getDefaultOptions","initFieldOptions","intl","issueKey","loggedInUser"]);return l.a.createElement(bt,It({},b,{fetchSuggestions:n,fieldId:"assignee",value:St(s),initialOptions:d,isEditable:r,emptyOption:xt(u)}))}))}),[u,d,r,e,s]);return l.a.createElement(Fe.a,{name:"EDIT_FIELD"},l.a.createElement("div",{ref:e=>{t.current=e}},p()))};Ut.displayName="AssigneeView",Ut.displayName="AssigneeView";const Vt=(e,t)=>`${e}/rest/api/3/user/assignable/search?issueKey=${t}&recommend=true&query=`,Kt=({baseUrl:e,issueKey:t,value:s,saveFieldData:n})=>((e,t,s,n)=>Object(x.e)(((e,t,s)=>s?`${e}/rest/api/3/issue/${t}/assignee?sessionId=${s}`:`${e}/rest/api/3/issue/${t}/assignee`)(e,t,n),qe(qe({},$e.a),{},{body:JSON.stringify({accountId:s})})))(e,t,null==s?null:s.accountId,n);var Wt=m()(Object(Ne.a)(),Object(S.b)("assignee"),Object(H.a)(((e,t)=>(e=>({
fieldId:"assignee",transformFromStateValue:St,transformToStateValue:Ct,saveField:Kt,additionalProps:(t,s)=>{const n=Object(K.y)(t);return{portalElement:Object(B.a)(e.fieldId)(t)?Object(U.a)()||document.body:void 0,fetchSuggestions:Nt(Vt(Object(N.f)(t),Object(N.x)(t)),n,s.formatMessage,e.createAnalyticsEvent),issueKey:Object(N.x)(t),getDefaultOptions:Rt(n,s.formatMessage),loggedInUser:n,showPinButton:Object(I.a)(e.area),analyticsAttributeIdRetriever:_t,enablePeopleInvite:!0}}}))(t))))(Ut),Bt=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),Ht=n("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),$t=n("./src/packages/issue/fields/cascading-select-custom-field/src/ui/main.js"),Gt=n("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js");function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const zt=e=>{const{issueKey:t,fieldKey:s,label:n}=e,[a]=Object(Bt.b)({issueKey:t,fieldKey:s}),[i]=Object(Ht.a)(t,s);return l.a.createElement($t.a,qt({},e,{allowedValues:i&&i.allowedValues||[],isEditable:i&&i.isEditable||!1,label:i&&i.title||n,initialValue:a}))};zt.displayName="CascadingSelectView";var Yt=Object(Gt.a)([Object(d.connect)(((e,{fieldId:t,area:s})=>({fieldKey:t,fieldType:"com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect",error:Object(K.i)(e),issueKey:Object(N.x)(e),isMobile:Object(N.r)(e),label:Object(v.m)(t)(e),areOptionsOnSameRow:"content"===s||"content-request"===s,showPinButton:Object(I.a)(s)
})),{})])(Object(w.b)()(zt)),Qt=n("./node_modules/lodash/isEmpty.js"),Jt=n.n(Qt),Zt=n("./node_modules/@atlaskit/tag/dist/es2019/tag/internal/simple/index.js"),Xt=n("./node_modules/@atlaskit/tag-group/dist/es2019/TagGroup/index.js"),es=n("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js"),ts=n("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),ss=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/html-view/check-for-href.js");const ns=T.default.div(["margin:-4px;width:100%;"]);class as extends c.Component{constructor(...e){super(...e),this.handleTagSelected=e=>{Object(ss.a)(e.target,e.currentTarget)&&(e.stopPropagation(),this.props.onClick&&this.props.onClick())},this.handleTagMouseDown=e=>{e.preventDefault(),Object(ss.a)(e.target,e.currentTarget)&&e.stopPropagation()},this.renderTag=e=>{const t=l.a.createElement(Zt.a,{appearance:this.props.tagAppearance,text:void 0!==e.content?e.content:e.label,color:e.color,
href:this.props.shouldHideLinks?void 0:e.href,elemBefore:e.elemBefore});return this.props.isUserTag?l.a.createElement(nt.a,{userAccount:e,analyticsData:{trigger:"user-tag"},position:"left-start"},t):t}}render(){const{value:e,noValueText:t}=this.props;return e&&!Jt()(e)?l.a.createElement(ns,null,l.a.createElement(Xt.a,null,e.map((e=>l.a.createElement(es.a,{content:void 0!==e.content&&e.content.length>20?e.content:"",key:null!=e.key?e.key:e.value},l.a.createElement("div",{onClick:this.handleTagSelected,onMouseDown:this.handleTagMouseDown,onKeyPress:this.handleTagSelected,key:null!=e.key?e.key:e.value,role:"presentation"},this.renderTag(e))))))):l.a.createElement(fe.b,null,t)}}as.displayName="TagView",as.defaultProps={isUserTag:!1,shouldHideLinks:!1,value:null,noValueText:null,tagAppearance:"default"};var is=Object(ts.a)("tagView",{onClick:"clicked"
})(as),rs=n("./node_modules/@atlaskit/select/dist/es2019/CheckboxSelect.js"),os=n("./src/packages/issue/issue-view/src/views/common/select-validation-wrapper/select-validation-wrapper.js");class cs extends c.Component{render(){const{invalidMessage:e,options:t,placeholder:s,onChange:n,value:a}=this.props;return l.a.createElement(os.a,{validationState:null!=e?"error":null,validationMessage:e},l.a.createElement(rs.a,{options:t,placeholder:s,onChange:n,value:a,tabSelectsValue:!1,autoFocus:!0}))}}cs.displayName="CheckboxFieldView",cs.displayName="CheckboxFieldView",cs.defaultProps={value:[],options:[],placeholder:null,invalidMessage:null};class ls extends c.Component{renderReadView(){return l.a.createElement(is,{value:this.props.value,noValueText:this.props.noValueText,tagAppearance:this.props.tagAppearance,shouldHideLinks:this.props.isMobile})}renderEditView(){return l.a.createElement(cs,{value:this.props.value,options:this.props.options,onChange:this.props.onChange,
placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage})}render(){const{intl:e,label:t,onCancel:s,isEditable:n,isEditing:a,onConfirm:i,onEditRequest:r,isMobile:o,fieldId:c,showPinButton:u}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,t),!0===u&&l.a.createElement(y.a,{fieldId:c,label:t})),l.a.createElement(h.g,{isEditing:a},l.a.createElement(be.a,{onEscape:s},l.a.createElement(q.a,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:a,onConfirm:i,onCancel:s,onEditRequested:r,isFitContainerWidthReadView:!o,editButtonLabel:e.formatMessage($.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{fieldName:t})}))))}}ls.displayName="CheckboxInlineEditView",ls.displayName="CheckboxInlineEditView",
ls.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,options:[],value:[],label:"",placeholder:null,noValueText:null,tagAppearance:"default",invalidMessage:null};var us=Object(u.i)(ls);const ds=Object(u.h)({noValue:{id:"issue.context-items.text-for-edit-view-when-no-value-is-provided",defaultMessage:"None"},version_no_value_placeholder:{id:"issue.version.text-no-value",defaultMessage:"Select version"}}),ps=e=>({label:e.value,value:e.id}),ms=e=>e?e.map(ps):[],bs=e=>e&&e.map((e=>({id:e.value,value:e.label}))),fs=Object(u.h)({placeholder:{id:"issue.checkbox-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),gs=Re()((e=>(e=>e&&e.map(ps)||[])(e)));var hs=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:ms,transformToStateValue:bs,additionalProps:(e,s)=>({options:gs(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(fs.placeholder,{fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:s.formatMessage(ds.noValue),
showPinButton:Object(I.a)(t.area)})})))(us),ys=n("./node_modules/react-async-component/commonjs/index.js"),Os=n("./src/packages/platform/ui/error-boundaries/src/ui/js-error-boundary/index.js");const js=Object(ys.asyncComponent)({resolve:()=>n.e("async-cmdb-object-inline-edit-view").then(n.bind(null,"./src/packages/issue/fields/cmdb-object/src/ui/main.js")).then((e=>e.CmdbObjectMain)),name:"AsyncIssueCmdbObjectField"}),vs=({children:e,packageName:t})=>l.a.createElement(Os.a,{fallback:"flag",id:"issue-cmdb-object-field",packageName:t},e);vs.displayName="IssueCmdbObjectFieldBoundary";const Es=e=>l.a.createElement(vs,{packageName:"issue-cmdb-object"},l.a.createElement(js,e));Es.displayName="AsyncIssueCmdbObjectFieldWithBoundary";var ks=n("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),ws=Object(H.a)(((e,{fieldId:t,area:s})=>({fieldId:t,additionalProps:e=>{var n,a;const i=Object(v.q)(t)(e)||{},r=Object(N.x)(e),o=Object(N.w)(e);return{area:s,issueKey:r,issueId:o,
projectKey:Object(ks.a)(r),cmdbFieldConfig:null===(n=i.configuration)||void 0===n?void 0:n.cmdbFieldConfig,wasInsightRequestSuccessful:null===(a=i.configuration)||void 0===a?void 0:a.wasInsightRequestSuccessful}}})))(Es),Ss=n("./src/packages/cache/src/services/components/index.js"),Cs=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),Is=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),Ts=n("./src/packages/platform/utils/constants/src/fetch-default-options.js");function Ps(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _s(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ps(Object(s),!0).forEach((function(t){xs(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ps(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xs(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ds=5e3,As="smarts.fields.ranking";var Ls=(e,t,s,n,a,i)=>!t||t.length<=1?Promise.resolve(t):((e,t,s,n,a,i)=>{let r;const o=new Promise((e=>{r=setTimeout((()=>{et.h.safeWarnWithoutCustomerData(As,"FRS has timeout after 5000ms"),wt(n,Ds,i,{sessionId:a}),e(t)}),s)})),c=e().then((e=>(r&&clearTimeout(r),e)));return Promise.race([o,c])})((()=>((e,t,s,n,a,i)=>{const r=t.map((e=>({[e.id]:e}))).reduce(((e,t)=>_s(_s({},e),t)),{}),{atlassianAccountId:o,cloudId:c,baseUrl:l}=Object(et.f)(),u=`${l}/gateway/api/fields/v2/recommendations/`,d=Ue.default.now();return Object(Ve.a)(u,_s(_s({},Ts.a),{},{method:"POST",body:JSON.stringify({context:{objectId:s,containerId:n,
principalId:o,product:"jira",tenantId:c,sessionId:a},fieldId:e,fieldObjects:t.map((({id:e,name:t})=>({id:e,value:t})))})})).then((({fieldObjects:t})=>(kt(e,d,i,{sessionId:a}),t.map((({id:e})=>r[e]))))).catch((s=>(wt(e,d,i,{sessionId:a}),et.h.safeErrorWithoutCustomerData(As,`error while ranking ${e} via FRS`,s),t)))})(e,t,s,n,a,i)),t,Ds,e,a,i),Ms=Object(u.h)({placeholder:{id:"issue.components.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select component"},createNewItem:{id:"issue.components.create-new-component-message",defaultMessage:"Create new component"},recent:{id:"issue.components.recent-items",defaultMessage:"Recent components"},all:{id:"issue.components.all-items",defaultMessage:"All components"}}),Rs=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/jql/helpers.js");function Ns(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Fs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ns(Object(s),!0).forEach((function(t){Us(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ns(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Us(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Vs=(e,{baseUrl:t,projectKey:s})=>e.map((e=>{const n=`project = ${Object(Rs.b)(s)} AND component = ${Object(Rs.b)(e.name)}`;return{href:Object(Rs.a)(t,n),content:e.name,value:e.id}})),Ks=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),Ws=(e=[],t=[],s,n)=>{const a=(e=>e.slice(-5).reverse())(((e,t,s)=>t.filter((e=>e.projectKey===s)).map((t=>{const n=e.find((e=>e.id===t.id));if(n){const e=Fs(Fs({},n),{},{projectKey:s})
;return Ss.a.update(`${t.id}`,e),Fs(Fs({},e),{},{fromCache:!0})}return Fs(Fs({},t),{},{fromCache:!0})})))(e,t,n));return[{heading:s.formatMessage(Ms.recent),items:a.map(Ks)},{heading:s.formatMessage(Ms.all),items:e.map(Ks)}]},Bs=e=>e.map((e=>({name:e.content,id:e.value,fromCache:e.fromCache||!1})));var Hs=n("./node_modules/@atlaskit/icon/glyph/add.js"),$s=n.n(Hs),Gs=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js");function qs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qs(Object(s),!0).forEach((function(t){Ys(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qs(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ys(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Qs=T.default.div(["display:flex;align-items:center;"]),Js=T.default.span(["margin-left:","px;flex-grow:1;"],P.e),Zs=T.default.div(["display:flex;align-items:center;color:",";padding:6px 12px;&:hover{background-color:",";}&:active{background-color:",";}"],rt.a.B400,rt.a.N20,rt.a.B75),Xs={option:(e,t)=>zs(zs(zs({},e),!0===t.data.__isNew__?zs(zs({},t.isFocused?{"> .issue-view__select-footer":{"background-color":rt.a.N20}}:{}),{},{position:"sticky",bottom:0,"background-color":`${rt.a.N0} !important`,"border-top":"2px solid rgba(9, 30, 66, 0.13)",padding:0,"padding-top":`${P.e}px`,"padding-bottom":0,overflow:"visible",":after":{content:'""',display:"block",position:"absolute",bottom:"-8px",left:0,width:"100%",height:"8px","background-color":rt.a.N0,"border-bottom-left-radius":P.e/2+"px",
"border-bottom-right-radius":P.e/2+"px"}}):{}),!0===t.data.isAkSelectOption?{"text-align":"center","padding-top":`${P.e}px`,"padding-bottom":2*P.e+"px"}:{})};var en=n("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js");class tn extends c.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{const{onChange:s,onConfirm:n}=this.props;s&&s(e,t),n()}}renderEditView(){const{fieldId:e,value:t,fetchSuggestions:s,additionalAnalyticsProps:n,placeholder:a,isEditing:i,isMulti:r,invalidMessage:o,hasAutocomplete:c,debounceFetchSuggestionsTime:u,allowEmptyValue:d,portalElement:p,canCreateNewItem:m,formatCreateLabel:b,styles:f,onChangeMulti:g,footer:h,onFooterSelect:y,shouldShowFooter:O,filterOption:j,formatOptionLabel:v,onDataRequest:E,onDataLoaded:k,components:w,componentsProps:S,initialData:C}=this.props;return l.a.createElement(en.a,{initialData:C,componentsProps:S,components:w,fieldId:e,value:t,fetchSuggestions:s,
additionalAnalyticsProps:n,placeholder:a,isOpen:i,invalidMessage:o,hasAutocomplete:c,debounceFetchSuggestionsTime:u,isClearable:d,portalElement:p,canCreateNewItem:m,formatCreateLabel:b,styles:f,autoFocus:!0,onChange:this.onChange,footer:h,onFooterSelect:y,shouldShowFooter:O,onChangeMulti:g,isMulti:r,filterOption:j,formatOptionLabel:v,onDataRequest:E,onDataLoaded:k,optionValuesSafeForAnalytics:this.props.optionValuesSafeForAnalytics})}renderReadView(){const e=this.props.fieldContentWrapper;return Je()(e)?this.props.renderReadView():l.a.createElement(e,null,this.props.renderReadView())}getEditButtonLabel(){const{value:e,label:t,intl:s,noValueText:n,isMulti:a}=this.props;return!0===a&&(null==e||!e.length)||!1===a&&!e?s.formatMessage($.a.extendedEditButtonLabel,{inputFieldValue:n,fieldName:t}):!1===a&&void 0!==(null==e?void 0:e.content)?s.formatMessage($.a.extendedEditButtonLabel,{inputFieldValue:e.content,fieldName:t}):s.formatMessage($.a.editButtonLabel,{fieldName:t})}render(){
const{intl:{formatMessage:e},label:t,fieldId:s,isEditable:n,isEditing:a,isMobile:i,isMulti:r,showPinButton:o,onCancel:c,onEditRequest:u,onConfirm:d,titleView:p=this.props.label}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,p),!0===o&&l.a.createElement(y.a,{fieldId:s,label:t})),l.a.createElement(h.g,{isEditing:a},l.a.createElement(be.a,{onEscape:c},l.a.createElement(q.a,{isLabelHidden:!0,label:t,readView:this.renderReadView(),editView:n?this.renderEditView():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!r,isEditing:a,onConfirm:d,onCancel:c,onEditRequested:u,isFitContainerWidthReadView:!i,editButtonLabel:this.getEditButtonLabel(),confirmButtonLabel:e($.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e($.a.cancelButtonLabel,{fieldName:t})}))))}}tn.displayName="SelectInlineEditView",tn.displayName="SelectInlineEditView",tn.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,isMulti:!1,hasAutocomplete:!1,label:"",
noValueText:null,allowEmptyValue:!1,debounceFetchSuggestionsTime:0,onChange:f.a};var sn=Object(u.i)(tn);function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function an(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const rn=e=>{const{validate:t,invalidMessage:s,value:n,onChange:a,tagAppearance:i,onDataRequest:r,onDataLoaded:o,customReadView:c}=e,u=an(e,["validate","invalidMessage","value","onChange","tagAppearance","onDataRequest","onDataLoaded","customReadView"]);return l.a.createElement(sn,nn({},u,{value:n,isMulti:!0,
onChangeMulti:a,invalidMessage:t(n)||s,renderReadView:()=>{const{value:t,noValueText:s,tagAppearance:n,isMobile:a,customReadView:i}=e;return i?i(t):l.a.createElement(is,{value:t,noValueText:s,tagAppearance:n,shouldHideLinks:a})},onDataRequest:r,onDataLoaded:o}))};rn.displayName="MultiSelectInlineEditView",rn.displayName="MultiSelectInlineEditView",rn.defaultProps={tagAppearance:"default",validate:()=>null,hasAutocomplete:!0,debounceFetchSuggestionsTime:300};var on=rn;function cn(){return(cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ln(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class un extends c.Component{constructor(...e){super(...e),this.state={data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then((e=>{this.setState({data:e,loading:!1})}))},this.fetchSuggestions=(e,t)=>this.props.fetchSuggestions(e,t).then((e=>(this.setState({data:e}),e)))}renderFooter(){const{intl:e}=this.props;return l.a.createElement(Zs,{className:"issue-view__select-footer"},l.a.createElement($s.a,{label:"",size:"small"}),l.a.createElement(Js,null,e.formatMessage(Ms.createNewItem)))}render(){const e=this.props,{shouldShowFooter:t,baseUrl:s,projectKey:n,intl:a}=e,i=ln(e,["shouldShowFooter","baseUrl","projectKey","intl"]),{data:r,loading:o,error:c}=this.state,u={data:r,loading:o,error:c};return l.a.createElement(on,cn({},i,{styles:Xs,
fetchSuggestions:this.fetchSuggestions,debounceFetchSuggestionsTime:300,initialData:u,shouldShowFooter:t,footer:this.renderFooter(),onFooterSelect:()=>Object(Gs.a)(`${s}/plugins/servlet/project-config/${n}/administer-components`,!1),allowEmptyValue:!0,optionValuesSafeForAnalytics:!0}))}}function dn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(s),!0).forEach((function(t){mn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
un.displayName="View";const bn=Object(a.a)(((e,t,s,n,a)=>((e,t,s,n,a)=>Ls("components",e,t,s,n,a))(e,t,s,n,a))),fn=Object(a.a)(((e,t,s,n,a,i)=>(r,o)=>{const c=bn(t,s,n,o,a);return Promise.all([c,Ss.a.getAll()]).then((([t,s])=>Ws(t,s,e,i)))}));var gn=Object(H.a)(((t,s)=>({fieldId:s.fieldId,transformFromStateValue:Vs,transformToStateValue:Bs,additionalProps:(e,t)=>({baseUrl:Object(N.f)(e),projectKey:Object(N.C)(e),fetchSuggestions:fn(t,Object(v.c)(s.fieldId)(e),Object(N.w)(e),Object(K.C)(e),s.createAnalyticsEvent,Object(N.C)(e)),placeholder:t.formatMessage(Ms.placeholder),noValueText:t.formatMessage(ds.noValue),shouldShowFooter:(Object(Is.c)(e)||Object(Is.b)(e))&&!Object(N.r)(e),showPinButton:Object(I.a)(s.area),getDataFromCache:()=>Ss.a.getAll().then((s=>Ws([],s,t,Object(N.C)(e))))}),saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a,fieldEditSessionId:i},r,o)=>{
const c=void 0!==i?`${t}/rest/api/2/issue/${s}?fieldEditSessionId=${i}`:`${t}/rest/api/2/issue/${s}`,l=Object(N.C)(r);return a.forEach((e=>{try{o.createAnalyticsEvent&&Object(ft.b)(o.createAnalyticsEvent({}),"componentPickerCache set",{isFromCache:e.fromCache}),e.id&&Ss.a.set(`${e.id}`,pn(pn({},e),{},{projectKey:l}))}catch(t){Cs.a.safeErrorWithoutCustomerData("issue-view.components.cache.set",t.message)}})),Object(x.e)(c,{body:JSON.stringify({fields:{[n]:a}})}).catch((t=>{throw a.forEach((t=>{try{o.createAnalyticsEvent&&Object(ft.b)(o.createAnalyticsEvent({}),"componentPickerCache removed"),t.id&&Ss.a.remove(`${t.id}`)}catch(e){Cs.a.safeErrorWithoutCustomerData("issue-view.components.cache.remove",e.message)}})),t}))})(...t,s)
})))(Object(u.i)(un)),hn=n("./src/packages/issue/issue-view/src/common/service/issue/customer-request-type-server.js"),yn=n("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),On=n("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js"),jn=Object(u.h)({placeholder:{id:"issue.customer-request-type.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Request Type"}});const vn=e=>({issueTypeId:e.issueType.toString(),content:e.name,value:e.id,iconUrl:e.iconUrl}),En=e=>e&&(e=>{if(e.errorMessage)return{hasError:!0};if(!e.requestType)return null;const{icon:t,issueTypeId:s,id:n,name:a}=e.requestType;return{issueTypeId:s,content:a,value:n,iconUrl:t._links.iconUrls["48x48"]}})(e),kn=e=>({requestType:{icon:{_links:{iconUrls:{"48x48":e.iconUrl||""}}},id:e.value,name:e.content,issueTypeId:e.issueTypeId}}),wn=e=>[{items:e.validRequestTypes.map(vn)}]
;var Sn=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js"),Cn=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-with-icon/index.js");function In(){return(In=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Tn=e=>()=>{const{value:t,noValueText:s}=e;if(t&&!Array.isArray(t)){const{iconUrl:e,content:s}=t;return void 0!==e?l.a.createElement(Cn.a,{iconUrl:e},s):s}return l.a.createElement(fe.b,null,s)},Pn=e=>l.a.createElement(sn,In({},e,{renderReadView:e.renderReadView||Tn(e),isMulti:!1}));Pn.displayName="SingleSelectInlineEditView",Pn.displayName="SingleSelectInlineEditView";var _n=Pn;const xn=T.default.div(["display:flex;align-items:center;"]),Dn=T.default.span(["margin-left:","px;"],P.e),An=T.default.div(["display:flex;padding-left:","px;padding-right:","px;"],.75*P.e,.75*P.e)
;function Ln(){return(Ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Mn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Rn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(s),!0).forEach((function(t){Nn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Nn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Fn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Un=e=>{if(null!=(null==e?void 0:e.iconUrl))return()=>l.a.createElement(xn,null,l.a.createElement(An,null,l.a.createElement(Sn.a,{url:e.iconUrl})),l.a.createElement(Dn,null,e.content))},Vn=e=>{const{issueTypeId:t}=e,s=Fn(e,["issueTypeId"]),{value:n}=e;if(!0===(null==n?void 0:n.hasError))return null;const a=null!=n&&n&&t!==n.issueTypeId?null:s.value,i=Rn(Rn({},s),{},{value:a});return l.a.createElement(_n,Ln({},i,{renderReadView:Un(a)}))};Vn.displayName="RequestTypeField";const Kn=(e,t)=>t?`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-types?query=`:null,Wn=Object(a.a)((e=>t=>e?Object(Ve.a)(`${e}${t}`).then(wn):Promise.resolve([]))),Bn=({baseUrl:e,value:t},s)=>{
const{requestType:n}=t,a=Object(N.w)(s);return Object(hn.a)(e,a,n.id)},Hn=e=>e&&e.requestType&&e.requestType.id;var $n=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:En,transformToStateValue:kn,saveField:Bn,additionalProps:(e,s)=>({fetchSuggestions:Wn(Kn(Object(N.f)(e),Object(N.w)(e))),isEditable:Object(On.c)(e),issueTypeId:Object(yn.f)(e),hasAutocomplete:!0,placeholder:s.formatMessage(jn.placeholder),noValueText:s.formatMessage(ds.noValue),debounceFetchSuggestionsTime:300,analyticsAttributeIdRetriever:Hn,showPinButton:Object(I.a)(t.area)})
})))(Vn),Gn=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),qn=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js"),zn=n("./node_modules/@atlaskit/inline-dialog/dist/es2019/InlineDialog/index.js"),Yn=n("./node_modules/@atlaskit/datetime-picker/dist/es2019/components/DatePicker.js"),Qn=n("./src/packages/common-legacy-do-not-add-anything-new/src/date/date-messages.js");class Jn extends c.Component{render(){const{autoFocus:e,isDisabled:t,value:s,intl:{formatMessage:n}}=this.props;return l.a.createElement(Yn.a,{autoFocus:e,isDisabled:t,value:s||void 0,onChange:this.props.onChange,placeholder:n(Qn.a.placeholderDate)})}}Jn.displayName="DateFieldView",Jn.defaultProps={isDisabled:!1,value:void 0,autoFocus:!1};var Zn=Object(u.i)(Jn);class Xn extends c.Component{renderEditView(){return l.a.createElement(Zn,{value:this.props.value,onChange:this.props.onChange,autoFocus:!0})}renderReadView(){
const{value:e,noValueText:t}=this.props;return e||l.a.createElement(fe.b,null,t)}render(){const{intl:e,isEditable:t,onCancel:s,label:n,value:a,isEditing:i,onConfirm:r,onEditRequest:o,isMobile:c,invalidMessage:u,fieldId:d,showPinButton:p}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,n),!0===p&&l.a.createElement(y.a,{fieldId:d,label:n})),l.a.createElement(h.g,{isEditing:i},l.a.createElement(be.a,{onEnter:r,onEscape:s},l.a.createElement(zn.a,{content:u,isOpen:!!u,placement:"top"},l.a.createElement(q.a,{isLabelHidden:!0,label:n,readView:this.renderReadView(),editView:t?this.renderEditView():null,value:a,isEditing:i,onCancel:s,onConfirm:r,onEditRequested:o,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!c,areActionButtonsHidden:!0,editButtonLabel:e.formatMessage($.a.editButtonLabel,{fieldName:n}),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:n}),cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{
fieldName:n})})))))}}Xn.displayName="DateInlineEditFieldView",Xn.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:"",noValueText:null,value:"",invalidMessage:null};var ea=Object(u.i)(Xn);const ta=e=>e?e.replace(/-/g,"/"):"",sa=e=>e?e.replace(/\//g,"-"):null;var na=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:ta,transformToStateValue:sa,additionalProps:(e,s)=>({noValueText:s.formatMessage(ds.noValue),showPinButton:Object(I.a)(t.area)})})))(ea),aa=(n("./node_modules/react-magnetic-di/lib/esm/index.js"),n("./src/packages/issue/fields/field-base/src/services/edit-field-service/main.js"));const ia=({issueKey:e,fieldKey:t,onSuccess:s})=>{var n;const[a]=Object(Ht.a)(e,t),i=null!==(n=null==a?void 0:a.schema.type)&&void 0!==n?n:"date",[{loading:r,value:o,error:c},{saveValue:l,resetError:u}]=Object(aa.a)({fieldKey:t,issueKey:e,fieldType:i,initialValue:null,onSuccess:s});return[{loading:r,value:o,error:c,fieldConfig:a},{saveValue:l,resetError:u}]}
;var ra=n("./src/packages/platform/utils/types/src/general.js"),oa=n("./src/packages/issue/fields/components/error-flag/src/main.js"),ca=n("./src/packages/issue/fields/components/inline-edit/src/main.js"),la=n("./node_modules/lodash/isNaN.js"),ua=n.n(la),da=n("./src/packages/compatibility/src/main.js"),pa=n("./src/packages/issue/format-date/src/common/utils.js"),ma=n("./src/packages/platform/controllers/tenant-context/src/components/locale/index.js");const ba=({autoFocus:e,isDisabled:t,isInvalid:s,value:n,onChange:a})=>{const i=Object(ma.a)(),r=Object(c.useCallback)((e=>{const t=Object(da.a)(null!=e?e:"");ua()(Date.parse(t))?null==a||a(null):null==a||a(t)}),[a]),o=Object(pa.a)(i);return l.a.createElement(Yn.a,{locale:o,autoFocus:e,defaultIsOpen:!0,isDisabled:t,isInvalid:s,value:n||"",onChange:r})};ba.displayName="DateFieldEditView";var fa=Object(u.h)({errorTitle:{id:"issue-field-date.error-title",defaultMessage:"We couldn't set the date"},errorMessage:{
id:"issue-field-date.error-message",defaultMessage:"Check your connection, then give it another try."}}),ga=n("./src/packages/issue/fields/date/src/ui/view/index.js");function ha(){return(ha=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ya(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Oa=e=>{var t
;let{fieldKey:s,issueKey:n,isEditing:a,onFormatDate:i,onCancel:r,onEdit:o,onEscape:u,onConfirm:d,onEnter:p,onUpdate:m,onError:b,readView:f,editView:g,noValueText:h}=e,y=ya(e,["fieldKey","issueKey","isEditing","onFormatDate","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","onError","readView","editView","noValueText"]);const[O,j]=Object(c.useState)(!1),v=Object(c.useCallback)((e=>{null==m||m(e),j(!1)}),[m]),[{value:E,error:k,fieldConfig:w},{saveValue:S,resetError:C}]=ia({issueKey:Object(ra.l)(n),fieldKey:s,onSuccess:v}),[I,T]=Object(c.useState)(E),P=null!==(t=null==w?void 0:w.isEditable)&&void 0!==t&&t;Object(c.useEffect)((()=>{k&&(j(!0),null==b||b(k)),O||T(E)}),[k,O,b,E]);const _=Object(c.useCallback)((e=>{I!==E?S(I,null,e):j(!1),Object(ft.h)(e)}),[S,I,E]),x=Object(c.useCallback)((e=>{C(),j(!1),T(E),Object(ft.h)(e)}),[C,E]),D=Object(c.useCallback)((e=>{x(e),null==r||r(e)}),[r,x]),A=Object(c.useCallback)((e=>{_(e),null==d||d(I,e)}),[d,_,I]),L=Object(c.useCallback)((e=>{
j(!0),Object(ft.h)(e),null==o||o(e)}),[o]),M=Object(c.useCallback)((e=>{x(e),null==u||u(e)}),[u,x]),R=Object(c.useCallback)((e=>{C(),T(e)}),[C,T]),N=Object(c.useCallback)((()=>void 0!==f?f:l.a.createElement(ga.a,{value:E,noValueText:h,onFormatDate:i})),[h,i,f,E]),F=Object(c.useCallback)((()=>void 0!==g?g:l.a.createElement(ba,{autoFocus:!0,value:I,onChange:R,isInvalid:!!k})),[g,k,R,I]);return l.a.createElement(l.a.Fragment,null,null!=k&&l.a.createElement(oa.a,{error:k,title:fa.errorTitle,description:fa.errorMessage}),l.a.createElement(ca.a,ha({areActionButtonsHidden:!0,actionSubject:"dateFieldInlineEdit",isEditable:P,isEditing:null!=a?a:O,readView:N(),editView:P?F():null,onCancel:D,onConfirm:A,onEdit:L,onEscape:M},y)))},ja=Object(T.default)(h.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),va=({fieldId:e,label:t,area:s,onError:n,onConfirm:a})=>{const{formatMessage:i}=Object(Ce.c)(),r=Object(Ke.g)(),o=Object(I.a)(s),[{value:u,fieldConfig:d}]=ia({issueKey:r,fieldKey:e
}),p=(null==d?void 0:d.title)||t,m=Object(c.useCallback)((()=>{null==n||n(u)}),[n,u]);return l.a.createElement(ja,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,p),!0===o&&l.a.createElement(y.a,{fieldId:e,label:p})),l.a.createElement(h.g,null,l.a.createElement(Oa,{isFitContainerWidthReadView:!0,issueKey:r,fieldKey:e,noValueText:i(ds.noValue),onConfirm:a,onError:m})))};va.displayName="Date";var Ea=Object(c.memo)(va);const ka=Object(d.connect)(null,((e,t)=>({onConfirm:s=>e(Object(qn.b)(t.fieldId,s)),onError:s=>e(Object(qn.a)(t.fieldId,s))})))(Ea);var wa=Object(Gn.a)(o.isDateTimeConsistencyMvpEnabled,ka,na),Sa=n("./src/packages/issue/issue-view/src/common/util/date-time-formatter/index.js"),Ca=n("./src/packages/issue/issue-view/src/common/component/date-time/view.js");class Ia extends c.Component{renderEditView(){return l.a.createElement(Ca.a,{value:this.props.value,onChange:this.props.onChange,timeZone:this.props.timeZone,parseValue:this.props.parseValue})}renderReadView(){
const{value:e,formatDateTime:t}=this.props;return e?t(e):l.a.createElement(fe.b,null,this.props.noValueText)}render(){const{intl:e,isEditable:t,onCancel:s,label:n,value:a,isEditing:i,invalidMessage:r,onConfirm:o,onEditRequest:c,isMobile:u,fieldId:d,showPinButton:p}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,n),!0===p&&l.a.createElement(y.a,{fieldId:d,label:n})),l.a.createElement(h.g,{isEditing:i},l.a.createElement(be.a,{onEscape:s},l.a.createElement(q.a,{isLabelHidden:!0,label:n,readView:this.renderReadView(),editView:t?this.renderEditView():null,value:a,isEditing:i,invalidMessage:r,isInvalid:!!r,onCancel:s,onConfirm:o,onEditRequested:c,disableEditViewFieldBase:!0,isFitContainerWidthReadView:!u,areActionButtonsHidden:!0,editButtonLabel:e.formatMessage($.a.editButtonLabel,{fieldName:n}),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:n}),cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{fieldName:n})
}))))}}Ia.displayName="DateTimeInlineEditFieldView",Ia.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,label:"",noValueText:null,value:null,invalidMessage:null,formatDateTime:e=>e,onConfirm:f.a,onCancel:f.a,onEditRequest:f.a};var Ta=Object(u.i)(Ia);const Pa=Object(a.a)(((e,t)=>s=>Object(Sa.a)(e,s,t)));var _a=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>{const n=Object(K.z)(e);return{noValueText:s.formatMessage(ds.noValue),formatDateTime:Pa(s,n),timeZone:n,parseValue:Sa.b,showPinButton:Object(I.a)(t.area)}}})))(Ta),xa=n("./src/packages/issue/fields/date-time-custom-field/src/services/use-date-time-field/index.js"),Da=n("./src/packages/issue/fields/date-time-custom-field/src/ui/main.js");const Aa=Object(T.default)(h.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),La=({fieldId:e,label:t,area:s,onUpdate:n})=>{const{formatMessage:a}=Object(Ce.c)(),i=Object(Ke.g)(),r=Object(I.a)(s),[{fieldConfig:o}]=Object(xa.a)({issueKey:i,fieldKey:e
}),c=(null==o?void 0:o.title)||t;return l.a.createElement(Aa,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,c),!0===r&&l.a.createElement(y.a,{fieldId:e,label:c})),l.a.createElement(h.g,null,l.a.createElement(Da.DateTimeField,{isFitContainerWidthReadView:!0,issueKey:i,fieldKey:e,noValueText:a(ds.noValue),onUpdate:n})))};La.displayName="DateTime";var Ma=Object(c.memo)(La);const Ra=Object(d.connect)(null,((e,t)=>({onUpdate:s=>e(Object(qn.g)(t.fieldId,s))})))(Ma)
;var Na=Object(Gn.a)(o.isDateTimeConsistencyMvpEnabled,Ra,_a),Fa=n("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),Ua=n("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),Va=n.n(Ua),Ka=n("./node_modules/@atlaskit/icon/glyph/shortcut.js"),Wa=n.n(Ka),Ba=n("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),Ha=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),$a=n("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/jira-bridge.js"),Ga=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/mount-animator.js"),qa=n("./src/packages/issue/issue-view-layout/src/services/main.js"),za=n("./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js"),Ya=n("./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js"),Qa=n("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js"),Ja=n("./src/packages/issue/issue-view/src/ecosystem/broadcast-connect-event.js"),Za=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),Xa=n("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js")
;const ei=T.default.div(["position:relative;overflow:hidden;display:flex;border-radius:3px;margin-left:-","px;height:","px;width:100%;transition:background-color 0.2s ease-in-out,border-color 0.2s ease-in-out;&:hover{background:",";cursor:pointer;}&:focus{box-shadow:0 0 0 2px ",";outline:0;background:",";}"],P.e,4*P.e,rt.a.N30,rt.a.B100,rt.a.N30),ti=T.default.div(["overflow:hidden;margin-top:","px;margin-bottom:","px;margin-left:","px;height:24px;width:24px;align-items:center;padding-left:","px;padding-right:","px;"],.5*P.e,.5*P.e,P.e,.25*P.e,.25*P.e),si=T.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1;line-height:","px;padding-left:","px;"],4*P.e,P.e),ni=T.default.div(["font-weight:600;display:inline;"]),ai=T.default.div(["color:",";display:flex;align-items:center;margin-right:","px;"],rt.a.N70,P.e),ii=T.default.div(["position:absolute;right:0;width:","px;height:","px;background-image:linear-gradient(90deg,rgba(255,255,255,0) 0%,"," 25%);"],7*P.e,4*P.e,rt.a.N20),ri=T.default.div(["position:absolute;right:0;margin:","px ","px;height:26px;width:26px;background:",";color:",";border-radius:50%;align-items:center;padding:2px 0 0 2px;"],P.e/4,P.e,rt.a.N30,rt.a.N60),oi=Object(T.keyframes)(["0%{right:-28px;}100%{right:0;}"]),ci=T.default.div(["position:absolute;animation:"," 0.15s ease-in-out;"],oi)
;var li=n("./node_modules/lodash/omitBy.js"),ui=n.n(li);function di(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?di(Object(s),!0).forEach((function(t){mi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):di(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function mi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const bi=e=>["click_through","open_panel"].find((t=>t===e))||"open_panel",fi=e=>{const t=ui()(e,(e=>null==e));return void 0===t.workMode?t:pi(pi({},t),{},{workMode:bi(t.workMode)})};function gi(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function hi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function yi(){return(yi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class Oi extends c.Component{constructor(...e){super(...e),this.state={isHovering:!1,update:void 0},this.onGlanceUpdate=(e,t,s)=>{s.addonKey===this.props.appKey&&s.moduleKey===this.props.moduleKey&&this.setState({update:fi(s.data)})},this.getGlanceIcon=()=>this.state.update&&this.state.update.icon?this.state.update.icon:this.props.icon,this.getGlanceWorkMode=()=>this.state.update&&this.state.update.workMode||this.props.workMode,this.eventHandlers={onMouseEnter:()=>this.setState({
isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})},this.handleOpenGlancePanel=()=>{const{appKey:e,moduleKey:t,status:s,onGlanceShowAnalytics:n,onOpenGlancePanel:a,onClickThroughGlancePanel:i}=this.props,r=this.getGlanceWorkMode();"open_panel"===r?(n(Object(Ya.d)(e,t,s)),a(e,t)):"click_through"===r&&i(e,t)},this.container=void 0,this.renderStatus=()=>{const e=this.state.update&&this.state.update.status?this.state.update.status:this.props.status;if(!e)return null;const{value:t,type:s}=e;if(t.label)switch(s){case"lozenge":return l.a.createElement(Ba.a,{appearance:t.type},t.label);case"icon":return this.props.glance?l.a.createElement(Sn.a,{url:Object(Qa.a)(this.props.glance.options.origin,t.label),alt:t.type,width:24,height:24}):null;case"badge":{const e=parseInt(t.label,10);return e>=0?l.a.createElement(Fa.a,{appearance:"default"},e):null}default:return null}return null},
this.renderContent=()=>{if(this.state.update&&this.state.update.content)return l.a.createElement(si,null,this.state.update.content);const{label:e,name:t}=this.props;return e.value===t?l.a.createElement(si,null,l.a.createElement(u.c,{id:"issue.ecosystem.context.rich-glance-label",defaultMessage:"Open {label}",values:{label:l.a.createElement(ni,null,e.value)}})):l.a.createElement(si,null,e.value)}}componentDidMount(){$a.a.addUpdateIssueGlanceListener(this.onGlanceUpdate)}componentWillUnmount(){$a.a.removeUpdateIssueGlanceListener(this.onGlanceUpdate)}render(){const{name:e,glance:t}=this.props,s=this.getGlanceIcon();return l.a.createElement(h.d,{"data-test-id":"issue.views.issue-base.context.ecosystem-glance-panel"},l.a.createElement(h.b,null,l.a.createElement(h.c,null,e)),l.a.createElement(h.g,null,l.a.createElement(be.a,{onEnter:this.handleOpenGlancePanel},l.a.createElement(ei,yi({onClick:this.handleOpenGlancePanel,tabIndex:"0"
},this.eventHandlers),s&&t&&l.a.createElement(ti,null,l.a.createElement(Sn.a,{url:Object(Qa.a)(t.options.origin,s.url),alt:s.alt,width:24,height:24})),this.renderContent(),l.a.createElement(ai,null,this.renderStatus()),this.state.isHovering&&l.a.createElement(Ga.a,{mountAnimation:ci},l.a.createElement(ii,null,l.a.createElement(ri,null,"click_through"===this.getGlanceWorkMode()?l.a.createElement(Wa.a,{size:"medium",label:""}):l.a.createElement(Va.a,{size:"medium",label:""}))))))))}}Oi.displayName="ConnectGlance",Oi.displayName="ConnectGlance",Oi.defaultProps={icon:null,openedGlance:null,status:null,workMode:"open_panel",onGlanceShowAnalytics:f.a};const ji=(e,t)=>{Object(Ja.a)("ISSUE_GLANCE_CONTENT_CLICKED",{addon_key:e,key:t})},vi=e=>{const t=Object(Ke.g)(),[,{setIssueViewLayoutGlance:s}]=Object(qa.a)();return l.a.createElement(Oi,yi({},e,{onOpenGlancePanel:(e,n)=>{s(t,{appKey:e,moduleKey:n}),Object(Ja.a)("ISSUE_GLANCE_OPENED",{addon_key:e,key:n})}}))}
;vi.displayName="ConnectGlanceWithIssueLayout";var Ei=Object(Gt.a)([Object(Ha.a)((e=>({onGlanceShowAnalytics:t=>e("show",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(s),!0).forEach((function(t){hi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):gi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t))}))),Object(d.connect)(((e,t)=>({openedGlance:Object(Xa.a)(e),glance:Object(Za.l)(t.appKey,t.moduleKey)(e),onClickThroughGlancePanel:ji})),(e=>({onOpenGlancePanel:(t,s)=>{e(Object(za.b)(t,s)),Object(Ja.a)("ISSUE_GLANCE_OPENED",{addon_key:t,key:s})}
})))])(vi),ki=n("./node_modules/redux/es/index.js"),wi=n("./node_modules/prop-types/index.js"),Si=n.n(wi),Ci=n("./src/packages/forge/forge-ui-analytics/src/services/custom-field/index.js"),Ii=n("./src/packages/forge/forge-ui-analytics/src/ui/custom-field-edit/index.js"),Ti=n("./src/packages/forge/forge-ui-async/src/ui/custom-field/async.js"),Pi=n("./src/packages/forge/forge-ui/src/ui/extension-title/index.js"),_i=n("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),xi=n("./src/packages/forge/forge-ui-analytics/src/common/ui/index.js"),Di=n("./src/packages/forge/forge-ui-analytics/src/services/custom-field-edit/index.js"),Ai=n("./src/packages/forge/forge-ui/src/services/custom-fields/index.js"),Li=n("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js");function Mi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ri(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(s),!0).forEach((function(t){Ni(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Mi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ni(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Fi=(e,t)=>{switch(t.type){case"FORGE_CUSTOM_FIELD_EDIT_INITIALIZATION":return Ri(Ri({},e),{},{isEditing:!0,isLoading:!0});case"FORGE_CUSTOM_FIELD_EDIT_RENDERED":return Ri(Ri({},e),{},{isLoading:!1});case"FORGE_CUSTOM_FIELD_EDIT_CANCEL":return Ri(Ri({},e),{},{isEditing:!1});case"FORGE_CUSTOM_FIELD_EDIT_SET_VALUE":return Ri(Ri({},e),{},{isEditing:!1,editValue:t.payload});case"FORGE_CUSTOM_FIELD_EDIT_FAILED":return Ri(Ri({},e),{},{
isEditing:!1,isLoading:!1});default:return e}};function Ui(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(s),!0).forEach((function(t){Ki(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ui(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ki(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Wi=({extensionData:e,extension:t,source:s,fieldId:n,value:a,viewComponent:i,onConfirm:r,onCancel:o})=>{const[{isEditing:u,isLoading:d,editValue:p},m]=Object(c.useReducer)(Fi,{isEditing:!1,isLoading:!1,editValue:a}),b=Object(c.useCallback)((e=>{r(),
m((e=>({type:"FORGE_CUSTOM_FIELD_EDIT_SET_VALUE",payload:e}))(e)),Object(Di.b)(s,{displayType:"modal"})}),[r,s]),f=Object(c.useCallback)((()=>{o(),m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_CANCEL"}))()),Object(Di.c)(s,{displayType:"modal"})}),[o,s]),g=Object(c.useCallback)((()=>{m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_RENDERED"}))())}),[]),h=Object(c.useCallback)((()=>{m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_FAILED"}))())}),[]),y=Object(c.useCallback)((()=>{Object(Di.d)(s,{displayType:"modal"}),m((()=>({type:"FORGE_CUSTOM_FIELD_EDIT_INITIALIZATION"}))())}),[s]),O=Object(c.useMemo)((()=>({source:s})),[s]),j=Object(Li.a)(),{issue:{key:v}}=e,{save:E}=Object(Ai.a)({baseUrl:j,issueKey:v,fieldId:n,source:null==s?void 0:s.toString()});return l.a.createElement(l.a.Fragment,null,i(y,p,d),u&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Ti.b,{extension:t,fieldId:n,extensionData:Vi(Vi({},e),{},{fieldValue:p}),onConfirm:b,onCancel:f,onRender:g,onError:h,onSave:E}),l.a.createElement(xi.a,{
attributes:O})))},Bi=n("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js");const Hi=T.default.div(["position:relative;width:100%;"]),$i=T.default.div(["opacity:",";"],(e=>e.isLoading?"0.7":"1.0")),Gi=T.default.div(["position:absolute;top:0;right:0;margin-right:","px;"],P.e/2);var qi=({children:e,isLoading:t})=>l.a.createElement(Hi,null,l.a.createElement($i,{isLoading:t},e),t&&l.a.createElement(Gi,null,l.a.createElement(Bi.a,{size:"small"})));const zi=e=>({content:e.name,value:e.name}),Yi=Object(a.a)((e=>t=>Object(Ve.a)(`${e}/rest/api/2/groups/picker?query=${t}`).then((e=>(e=>e&&e.groups?[{items:e.groups.map(zi)}]:[{items:[]}])(e)))));var Qi=Object(u.h)({placeholder:{id:"issue.forge.group.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select group"}});function Ji(){return(Ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
function Zi(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Xi=e=>{let{extension:t,type:s,value:n,customReadView:i,onChange:r,intl:{formatMessage:o}}=e,u=Zi(e,["extension","type","value","customReadView","onChange","intl"]);const d=Object(a.a)((e=>e?{name:String(e.value)}:null)),p=Object(a.a)((e=>e?{value:String(e.name),content:String(e.name)}:null)),m=Object(c.useCallback)((e=>r(d(e))),[d,r]),b=Object(c.useCallback)(Je()(i)?()=>null:()=>i(n),[i,n]),f=Je()(i)?void 0:b;return l.a.createElement(_n,Ji({},u,{renderReadView:f,value:p(n),placeholder:o(Qi.placeholder),noValueText:o(ds.noValue),onChange:m,hasAutocomplete:!0}))};Xi.displayName="View"
;var er=m()([u.i,Object(d.connect)(((e,{fieldId:t})=>({fetchSuggestions:Yi(Object(N.f)(e)),allowEmptyValue:!Object(v.E)(t)(e)})),{})])(Xi),tr=Object(u.h)({placeholder:{id:"issue.forge.groups.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select groups"}});function sr(){return(sr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function nr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ar=e=>{
let{extension:t,type:s,value:n,onChange:i,customReadView:r,intl:{formatMessage:o}}=e,u=nr(e,["extension","type","value","onChange","customReadView","intl"]);const d=Object(a.a)((e=>e?e.map((e=>({name:String(e.value)}))):[])),p=Object(a.a)((e=>e?e.map((e=>({value:String(e.name),content:String(e.name)}))):[])),m=Object(c.useCallback)((e=>i(d(e))),[d,i]),b=Object(c.useCallback)(Je()(r)?()=>null:e=>r(d(e)),[r]),f=Je()(r)?void 0:b;return l.a.createElement(on,sr({},u,{value:p(n),customReadView:f,placeholder:o(tr.placeholder),noValueText:o(ds.noValue),onChange:m}))};ar.displayName="View";var ir=m()([u.i,Object(d.connect)(((e,{fieldId:t})=>({fetchSuggestions:Yi(Object(N.f)(e)),allowEmptyValue:!Object(v.E)(t)(e)})),{})])(ar),rr=n("./src/packages/cache/src/services/labels/index.js"),or=Object(u.h)({label:{id:"issue.labels.label",defaultMessage:"Labels"},placeholder:{id:"issue.labels.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Label"},createNewItem:{
id:"issue.labels.create-new-item-message",defaultMessage:"New label"},recent:{id:"issue.labels.recent-items",defaultMessage:"Recent labels"},all:{id:"issue.labels.all-items",defaultMessage:"All labels"}});const cr=(e,{baseUrl:t,fieldId:s})=>e?e.map((e=>{const n=encodeURIComponent(`${(e=>{const t="customfield_";if(e.startsWith(t))return`cf[${e.substring(t.length,e.length)}]`;return e})(s)} = ${Object(Rs.b)(e)}`);return{content:e,value:e,href:`${t}/issues/?jql=${n}`}})):[],lr=e=>e.map((e=>e.value)),ur=e=>({content:e.label,value:e.label}),dr=(e,t=[],s)=>{const n=e.suggestions||[],a=(e=>e.slice(-5).reverse())(t);return[{heading:s(or.recent),items:a.map(ur)},{heading:s(or.all),items:n.map(ur)}]},pr=Re()(((e,t,s,n,a)=>(i,r)=>{if(null==e)return Promise.resolve([]);let o=`${e}${encodeURIComponent(i)}`;null!=r&&(o=`${o}&sessionId=${r}`),null!=s&&(o=`${o}&fieldEditSessionId=${s}`);const c=Ue.default.now(),l=i.length
;return Promise.all([Object(Ve.a)(o),rr.a.getAll()]).then((([e,s])=>("labels"===t&&kt("labels",c,n,{sessionId:r,queryLength:l}),dr(e,s,a)))).catch((e=>{throw"labels"===t&&wt("labels",c,n,{sessionId:r}),e}))}),((e,t)=>`${e}_${t}`)),mr=Re()(((e,t)=>(s,n)=>{if(!s&&null!=e){const{prefetched:s,fieldValuePromise:a,sessionId:i,prefetchSessionId:r}=e,{createAnalyticsEvent:o}=t;if(s&&null!==a&&null!==i){ht(o,r,n||"",i,"labels");const e=Ue.default.now();return Promise.all([a,rr.a.getAll()]).then((([s,a])=>(kt("labels",e,o,{sessionId:n,isPrefetched:!0,queryLength:0}),dr(s,a,t.formatMessage)))).catch((t=>{throw wt("labels",e,o,{sessionId:n,isPrefetched:!0}),t}))}yt(o,r,n||"","labels")}return t.fetchSuggestions(s,n)}),((e,t)=>`${e&&e.prefetchSessionId||""}_${t.issueKey}`)),br=e=>{if(e.length>55)return l.a.createElement(u.c,{id:"issue.labels-view.input-too-many-labels",defaultMessage:"Can't have more than {max} labels.",values:{max:55}})
;return e.map((e=>e.content.trim())).some((e=>e.includes(" ")||e.length>255))?l.a.createElement(u.c,{id:"issue.labels-view.input-label-is-invalid",defaultMessage:"Labels can't have spaces or be more than {max} characters.",values:{max:255}}):void 0};function fr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(s),!0).forEach((function(t){hr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function hr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function yr(){
return(yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Or(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class jr extends c.Component{constructor(...e){super(...e),this.state={data:[],loading:!1,error:!1},this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then((e=>{this.setState({data:e,loading:!1})}))},this.fetchSuggestions=e=>(t,s)=>e(t,s).then((e=>(this.setState({data:e}),e))),this.onEditRequest=()=>{Object(g.c)().cancel({key:C.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT},!0),
Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()},this.onConfirm=()=>{Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM}),this.props.onConfirm()},this.onCancel=()=>{Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),this.props.onCancel()},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_REFLECT_SELECTED_EXISTING}):"remove-value"===t.action?Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_REFLECT_REMOVED_EXISTING}):"create-option"===t.action&&Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_REFLECT_SELECTED_NEW})),this.props.onChange(e)},this.onDataRequest=({isInitial:e})=>{e||Object(g.c)().markStartOfInteraction({key:C.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e}={})=>{
e?Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS}):Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_REFLECT_INPUT_RESULT})}}componentDidMount(){this.props.initFieldOptions(),this.getDataFromCache()}componentDidUpdate(e){const{isEditing:t,value:s,fieldId:n}=this.props;if("labels"===n){const n=!e.isEditing&&t,a=e.isEditing&&!t;e.isEditing&&t&&(s.length>e.value.length?(Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_REFLECT_SELECTED_EXISTING}),Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_REFLECT_SELECTED_NEW})):s.length<e.value.length&&Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_REFLECT_REMOVED_EXISTING})),a&&(Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CANCEL}),e.value===s&&Object(g.c)().markTimeToFinishTask({key:C.a.LABELS.TIME_TO_RENDER_READ_VIEW_ON_CONFIRM})),n&&Object(g.c)().markTimeToFeedback({key:C.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS})}}
renderMultiSelectInlineEditView(e){const{initFieldOptions:t,issueKey:s,createAnalyticsEvent:n,formatMessage:a}=e,i=Or(e,["initFieldOptions","issueKey","createAnalyticsEvent","formatMessage"]),r="labels"===this.props.fieldId?{onEditRequest:this.onEditRequest,onConfirm:this.onConfirm,onCancel:this.onCancel,onChange:this.onChange,onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded}:{},{data:o,loading:c,error:u}=this.state,d={data:o,loading:c,error:u},p=this.fetchSuggestions(e.fetchSuggestions);return l.a.createElement(vr,yr({debounceFetchSuggestionsTime:400,initialData:d},i,{fetchSuggestions:p},r))}renderWithCachedValue(){const{issueKey:e}=this.props,t=Object(He.a)(e,"labels");return l.a.createElement(t,{fieldId:"labels"},(e=>{const t=mr(e,this.props),s=gr(gr({},this.props),{},{fetchSuggestions:t});return this.renderMultiSelectInlineEditView(s)}))}render(){return"labels"===this.props.fieldId?this.renderWithCachedValue():this.renderMultiSelectInlineEditView(this.props)}}
jr.displayName="LabelsView",jr.displayName="LabelsView";const vr=e=>{const t=Object(c.useCallback)(Re()(e.fetchSuggestions,(t=>`${t}_${e.fieldEditSessionId||""}`)),[e.fetchSuggestions,e.fieldEditSessionId,e.invalidMessage]);return l.a.createElement(on,yr({},e,{fetchSuggestions:t}))};vr.displayName="MemoizedLabels";var Er=jr,kr=Object(u.h)({placeholder:{id:"issue.forge.labels.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select label"},createNewItem:{id:"issue.forge.labels.create-new-item-message",defaultMessage:"{value} (New label)"}});function wr(){return(wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Sr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){
var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Cr=e=>{const t=e.map((e=>({value:String(e.value),content:e.content,href:e.href||""})));return br(t)||null},Ir=e=>{let{value:t,type:s,extension:n,baseUrl:a,projectKey:i,onChange:r,customReadView:o,fetchSuggestionsArgs:u}=e,d=Sr(e,["value","type","extension","baseUrl","projectKey","onChange","customReadView","fetchSuggestionsArgs"]);const{formatMessage:p}=Object(Ce.c)(),m=Object(c.useCallback)((e=>p(kr.createNewItem,{value:e})),[p]),b=Object(c.useCallback)((e=>{const t=lr(e.map((e=>({value:String(e.value),content:e.content,href:e.href||""}))));r(t)}),[r]),g=Object(c.useMemo)((()=>{const e={fieldId:d.fieldId,issueKey:d.issueKey,baseUrl:a,projectKey:i};return cr(t,e).map((e=>({value:String(e.value),content:e.content,href:e.href||""})))
}),[a,d.fieldId,d.issueKey,i,t]),h=Object(c.useCallback)(Je()(o)?()=>null:()=>o(t),[o]),y=Je()(o)?void 0:h,O=pr(u.fieldAutoCompleteUrl,u.fieldId,u.fieldEditSessionId,void 0,p);return l.a.createElement(Er,wr({},d,{formatMessage:p,fetchSuggestions:O,placeholder:p(kr.placeholder),noValueText:p(ds.noValue),customReadView:y,canCreateNewItem:!0,allowEmptyValue:!0,validate:Cr,formatCreateLabel:m,value:g,onChange:b,initFieldOptions:f.a}))};Ir.displayName="View";var Tr=Object(d.connect)(((e,{fieldId:t})=>({fetchSuggestionsArgs:{fieldAutoCompleteUrl:Object(v.d)(t)(e),fieldId:t,fieldEditSessionId:Object(v.f)(t)(e)},issueKey:Object(N.x)(e),baseUrl:Object(N.f)(e),projectKey:Object(N.C)(e)
})),{})(Ir),Pr=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-url.js"),_r=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/is-valid-email-address.js"),xr=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/prefix-url.js"),Dr=n("./node_modules/@atlaskit/field-text/FieldTextStateless.js");const Ar=(e,t)=>{const{type:s="text",value:n="",placeholder:a="",invalidMessage:i,onChange:r,compact:o=!1}=e;return l.a.createElement(Dr.a,{type:s,value:n,placeholder:a,onChange:r,isInvalid:!!i,invalidMessage:i,shouldFitContainer:!0,autoFocus:!0,isLabelHidden:!0,label:"",ref:t,compact:o})};Ar.displayName="SingleLineTextField",Ar.displayName="SingleLineTextField";var Lr=Object(c.forwardRef)(Ar);class Mr extends c.Component{constructor(e){super(e),this.onChange=e=>{const{type:t}=this.props;let s;"number"===t?""===e.target.value?s=null:(s=Number(e.target.value),this.setState({displayValue:e.target.value})):s=e.target.value,"url"===t&&this.setState({
showValidationMessage:!1,invalidMessage:e.target.validationMessage}),this.props.onChange(s)},this.onConfirm=()=>{this.state.invalidMessage?(this.setState({showValidationMessage:!0}),this.editFieldRef.current&&this.editFieldRef.current.focus()):this.props.onConfirm()},this.onCancel=()=>{"url"===this.props.type&&this.setState({showValidationMessage:!1,invalidMessage:null}),this.props.onCancel()},this.editFieldRef=Object(c.createRef)(),this.state={invalidMessage:null,showValidationMessage:!1,displayValue:null}}componentDidUpdate(e){"number"===this.props.type&&this.props.value!==e.value&&(this.state.displayValue=null)}renderReadView(){const{value:e,noValueText:t,type:s,customReadView:n,fieldId:a}=this.props;if(n)return n(e);if(null==e||""===e)return l.a.createElement(fe.b,null,t);const i=((e,t)=>{switch(e){case"number":return l.a.createElement(u.d,{value:t});case"text":return Object(_r.a)(t)?l.a.createElement("a",{href:`mailto:${t}`},t):Number(t)?t:Object(Pr.a)(t)?l.a.createElement("a",{
href:Object(xr.a)(t,"//"),target:"_blank"},t):t;case"url":return Object(_r.a)(t)?l.a.createElement("a",{href:`mailto:${t}`},t):l.a.createElement("a",{href:Object(xr.a)(t,"//"),target:"_blank"},t);default:return t}})(s,e),r=`issue.views.field.single-line-text-inline-edit.read-view.${a}`;return l.a.createElement(fe.a,{"data-test-id":r},i)}renderReadViewWithContentWrapper(){const e=this.props.fieldContentWrapper;return Je()(e)?this.renderReadView():l.a.createElement(e,null,this.renderReadView())}renderEditView(){const{value:e,placeholder:t}=this.props,s=null!=e?this.state.displayValue||e.toString():"";return l.a.createElement(Lr,{ref:this.editFieldRef,type:this.props.type,value:s,placeholder:t,onChange:this.onChange,invalidMessage:this.props.invalidMessage||(this.state.showValidationMessage?this.state.invalidMessage:null)})}render(){
const{intl:e,label:t,isEditable:s,isEditing:n,onEditRequest:a,isMobile:i,titleView:r=this.props.label,fieldId:o,showPinButton:c}=this.props,u=`issue.views.field.single-line-text-inline-edit.${o}`;return l.a.createElement(h.d,{"data-test-id":u},l.a.createElement(h.b,null,l.a.createElement(h.c,null,r),!0===c&&l.a.createElement(y.a,{fieldId:o,label:t})),l.a.createElement(h.g,{isEditing:n},l.a.createElement(be.a,{onEnter:this.onConfirm,onEscape:this.onCancel},l.a.createElement(q.a,{isLabelHidden:!0,label:t,readView:this.renderReadViewWithContentWrapper(),editView:s?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:n,onConfirm:this.onConfirm,onCancel:this.onCancel,onEditRequested:a,isFitContainerWidthReadView:!i,editButtonLabel:e.formatMessage($.a.editButtonLabel,{fieldName:t}),confirmButtonLabel:e.formatMessage($.a.confirmButtonLabel,{fieldName:t}),cancelButtonLabel:e.formatMessage($.a.cancelButtonLabel,{fieldName:t})}))))}}Mr.displayName="SingleLineTextInlineEditView",
Mr.displayName="SingleLineTextInlineEditView",Mr.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,value:null,noValueText:null,invalidMessage:null,type:"text",label:""};var Rr=Object(u.i)(Mr);const Nr=({properties:e})=>({fieldType:e.type,fieldCollection:e.collection});function Fr(){return(Fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ur(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Vr=e=>{switch(e){case"string":return"text";case"number":case"url":return e;default:return"text"}},Kr=e=>{
let{extension:t}=e,s=Ur(e,["extension"]);const{fieldType:n}=Nr(t);return l.a.createElement(Rr,Fr({},s,{noValueText:null,type:Vr(n)}))};Kr.displayName="View";var Wr=Kr;function Br(){return(Br=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Hr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const $r=e=>e.users?e.users.map(St):[],Gr=Object(a.a)((e=>t=>null===e?Promise.resolve([]):Object(Ve.a)(`${e}${t}`).then($r))),qr=Object(a.a)((e=>({avatarUrl:"",name:e.formatMessage(ds.noValue)}))),zr=e=>{
let{isFieldRequired:t,extension:s,type:n,value:a,isFieldInTab:i}=e,r=Hr(e,["isFieldRequired","extension","type","value","isFieldInTab"]);const o=i&&(Object(U.a)()||document.body)||void 0;return l.a.createElement(mt,Br({},r,{value:St(a),emptyOption:t?void 0:qr(r.intl),portalElement:o,onChange:e=>{r.onChange(Ct(e))}}))};zr.displayName="View";var Yr=m()([u.i,Object(d.connect)(((e,{fieldId:t})=>({isFieldInTab:Object(B.a)(t)(e),fetchSuggestions:Gr(Object(v.d)(t)(e)),isFieldRequired:Object(v.E)(t)(e)})),{})])(zr),Qr=Object(u.h)({placeholder:{id:"issue.multi-user.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select User"}});const Jr="24x24",Zr=Object(a.a)((e=>e&&e.map((e=>({displayName:e.content,accountId:e.accountId,id:Object(ra.a)(String(e.value)),avatarUrls:{[Jr]:String(e.avatarUrl)}}))))),Xr=Object(a.a)((e=>e?e.map((e=>({content:e.displayName,value:String(e.accountId),key:e.accountId,avatarUrl:e.avatarUrls&&e.avatarUrls["24x24"],accountId:e.accountId,
elemBefore:l.a.createElement(Ze.a,{size:"xsmall",src:e.avatarUrls&&e.avatarUrls["24x24"]})}))):[])),eo=Object(a.a)((e=>[{items:(e&&e.users||[]).map((e=>({content:e.displayName,value:String(e.accountId),accountId:e.accountId,avatarUrl:e.avatarUrls["24x24"]})))}]));function to(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function so(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?to(Object(s),!0).forEach((function(t){no(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):to(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function no(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const ao=Re()((e=>t=>e?Object(Ve.a)(`${e}${t}`).then(eo):Promise.resolve([]))),io=(Object(a.a)((e=>t=>e?Object(Ve.a)(`${e}${t}`).then(eo):Promise.resolve([]))),e=>l.a.createElement(Qs,null,e.avatarUrl&&l.a.createElement(Ze.a,{size:"small",src:e.avatarUrl}),l.a.createElement(Js,null,e.label)));io.displayName="formatOptionLabel";var ro=Object(H.a)(((e,t)=>so(so({fieldId:t.fieldId},{transformFromStateValue:Xr,transformToStateValue:Zr}),{},{additionalProps:(e,s)=>({fetchSuggestions:ao(Object(v.d)(t.fieldId)(e)),placeholder:s.formatMessage(Qr.placeholder),noValueText:s.formatMessage(ds.noValue),tagAppearance:"rounded",showDropdownOnClick:!1,isUserTag:!0,formatOptionLabel:io,showPinButton:Object(I.a)(t.area)})})))(on);function oo(){return(oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function co(e,t){if(null==e)return{};var s,n,a=function(e,t){
if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const lo=e=>l.a.createElement(Qs,null,Je()(e.avatarUrl)?null:l.a.createElement(Ze.a,{size:"small",src:e.avatarUrl}),l.a.createElement(Js,null,e.label));lo.displayName="formatOptionLabel";const uo=e=>{let{isFieldRequired:t,extension:s,type:n,value:a,onChange:i,customReadView:r,intl:{formatMessage:o},isFieldInTab:u}=e,d=co(e,["isFieldRequired","extension","type","value","onChange","customReadView","intl","isFieldInTab"]);const p=Object(c.useCallback)((e=>i(Zr(e))),[i]),m=Object(c.useCallback)(Je()(r)?()=>null:e=>r(Zr(e)),[r]),b=Je()(r)?void 0:m;return l.a.createElement(on,oo({},d,{value:Xr(a),customReadView:b,placeholder:o(Qr.placeholder),noValueText:o(ds.noValue),onChange:p,
tagAppearance:"rounded",formatOptionLabel:lo}))};uo.displayName="View";const po={none:{user:Yr,group:er,string:Wr,number:Wr},list:{string:Tr,group:ir,user:m()([u.i,Object(d.connect)(((e,{fieldId:t})=>({fetchSuggestions:ao(Object(v.d)(t)(e))})),{})])(uo)}};var mo=Object(a.a)(((e,t="none")=>{const s=po[t];return s?s[e]:null}));const bo=T.default.div(["width:100%;&:focus{outline:none;}"]),fo=e=>{switch(e.type){case"user":return"list"===e.collection?(e=>Je()(e)?null:e.map((e=>({accountId:Je()(e.accountId)?e.id:e.accountId}))))(e.value):(e=>Je()(e)?null:{accountId:Je()(e.accountId)?e.id:e.accountId})(e.value);case"group":return"list"===e.collection?(e=>null==e?null:e.map((e=>e.name)))(e.value):(e=>null==e?null:e.name)(e.value);case"string":case"number":default:return e.value}};function go(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t)
;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ho(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function yo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(s),!0).forEach((function(t){Oo(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ho(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Oo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const jo=(e,t,s,n="none",i)=>Object(a.a)((a=>l.a.createElement(bo,null,l.a.createElement(Ti.a,{extension:e,
extensionData:yo(yo({},t),{},{fieldValue:fo({type:s,collection:n,value:a})}),analyticsAttributes:i})))),vo=e=>{let{hasCustomFieldExtensions:t,isFilteredOut:s,extension:n,extensionData:i,fieldId:r,value:o,source:u}=e,d=go(e,["hasCustomFieldExtensions","isFilteredOut","extension","extensionData","fieldId","value","source"]);const p=Object(c.useMemo)((()=>({source:u})),[u]);if(!t||s)return null;if(!n)return Object(Ci.a)(u,{error:Error("Forge extension passed to ForgeCustomField component is null or undefined"),fieldId:r,extensionData:i}),null;const{fieldType:m,fieldCollection:b}=Nr(n),f=Object(a.a)(jo)(n,i,m,b,p),g=l.a.createElement(Pi.a,{extensionName:d.label,extensionEnvType:n.environmentType}),h=!Je()(n.properties.function),y=yo(yo({value:o,fieldId:r,extension:n,titleView:g},h?{customReadView:f}:null),d),O=m?mo(m,b):null;if(!O)return Object(Ci.a)(u,{error:Error("Forge extension passed to ForgeCustomField type is not supported"),fieldId:r,requestedType:m}),null;if(n.properties.edit){
const e=(e,t,s)=>{const n=({children:e})=>l.a.createElement(qi,{isLoading:s},e);n.propTypes={children:Si.a.node};const a=yo(yo({},y),{},{onEditRequest:e,value:t},h?{customReadView:e=>l.a.createElement(qi,{isLoading:s},f(e))}:{fieldContentWrapper:n});return l.a.createElement(O,a)};return l.a.createElement(Ii.a,{attributes:p},l.a.createElement(Wi,{fieldId:r,extension:n,source:u,extensionData:i,value:o,onConfirm:y.onConfirm,onCancel:y.onCancel,viewComponent:e}))}return l.a.createElement(O,y)};vo.displayName="ForgeCustomField";var Eo=Object(ki.compose)(Object(H.a)(((e,{fieldId:t,area:s})=>({fieldId:t,additionalProps:()=>({showPinButton:Object(I.a)(s)})}))),Object(d.connect)(((e,{fieldId:t})=>({hasCustomFieldExtensions:Object(o.isCustomFieldTypesEnabled)()?Object(_i.n)(e):Object(_i.m)(e),isFilteredOut:Object(_i.o)(t)(e),extension:Object(o.isCustomFieldTypesEnabled)()?Object(_i.c)(t)(e):Object(_i.b)(t)(e),extensionData:Object(_i.h)(e),source:Object(N.b)(e)
})),{}))(vo),ko=n("./src/packages/forge/forge-ui-analytics/src/services/issue-glance/index.js"),wo=n("./src/packages/forge/forge-ui-analytics/src/ui/issue-glance/index.js");function So(){return(So=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class Co extends c.Component{constructor(...e){super(...e),this.state={isHovering:!1},this.eventHandlers={onMouseEnter:()=>this.setState({isHovering:!0}),onMouseLeave:()=>this.setState({isHovering:!1}),onFocus:()=>this.setState({isHovering:!0}),onBlur:()=>this.setState({isHovering:!1})},this.onOpenGlancePanel=()=>{const{appKey:e,moduleKey:t,onOpenGlancePanel:s,source:n}=this.props;Object(ko.a)(n),s(e,t)}}renderStatus(){const{status:e={}}=this.props;switch(e.type){case"lozenge":return l.a.createElement(Ba.a,{appearance:e.value.type},e.value.label);case"badge":{const t=parseInt(e.value.label,10)
;return t>=0?l.a.createElement(Fa.a,{appearance:"default"},t):null}default:return null}}render(){const{title:e,label:t,extension:{environmentType:s},source:n}=this.props;return l.a.createElement(wo.a,{attributes:{source:n}},l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,l.a.createElement(Pi.a,{extensionName:e,extensionEnvType:s}))),l.a.createElement(h.g,null,l.a.createElement(be.a,{onEnter:this.onOpenGlancePanel},l.a.createElement(ei,So({onClick:this.onOpenGlancePanel,tabIndex:"0"},this.eventHandlers),l.a.createElement(si,null,t),l.a.createElement(ai,null,this.renderStatus()),this.state.isHovering&&l.a.createElement(Ga.a,{mountAnimation:ci},l.a.createElement(ii,null,l.a.createElement(ri,null,l.a.createElement(Va.a,{size:"medium",label:""})))))))))}}Co.displayName="ForgeGlance",Co.displayName="ForgeGlance";const Io=e=>{const t=Object(Ke.g)(),[,{setIssueViewLayoutGlance:s}]=Object(qa.a)();return l.a.createElement(Co,So({},e,{onOpenGlancePanel:(e,n)=>{
s(t,{appKey:e,moduleKey:n})}}))};Io.displayName="ForgeGlanceWithIssueLayout";var To=Object(Gt.a)([Object(d.connect)((e=>({source:Object(N.b)(e)})),{})])(Io),Po=n("./node_modules/uuid/index.js"),_o=n.n(Po),xo=n("./src/packages/cache/src/services/epics/index.js"),Do=n("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),Ao=n("./node_modules/lodash/omit.js"),Lo=n.n(Ao);const Mo=Object(ys.asyncComponent)({resolve:()=>n.e("async-issue-details-epic-card").then(n.bind(null,"./src/packages/issue/epic-card/src/ui/index.js")).then((e=>e.default)),name:"AsyncEpicCard"});var Ro=n("./node_modules/@atlaskit/icon/glyph/checkbox.js"),No=n.n(Ro),Fo=n("./node_modules/react-select/dist/chunk-80640036.browser.esm.js"),Uo=n("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js");const Vo=({onVisibilityChange:e})=>{const[t,s]=Object(c.useState)(!1),n=Object(c.useRef)(),a=Object(c.useRef)();return Object(c.useEffect)((()=>{e(t)}),[t,e]),
Object(c.useEffect)((()=>{(()=>{if(window.IntersectionObserver&&a.current){const e=e=>{e.forEach((e=>{e.target===a.current&&s(e.isIntersecting)}))},t={root:null,rootMargin:"0px",threshold:0};n.current=new IntersectionObserver(e,t).observe(a.current)}})();const e=a.current;return()=>{var t;null===(t=n.current)||void 0===t||t.unobserve(e)}}),[]),l.a.createElement("div",{ref:a})};Vo.displayName="Intersection";var Ko=Vo,Wo=Object(u.h)({checkboxLabel:{id:"issue.views.field.epic.checkbox.label",defaultMessage:"Show done epics"},doneEpicLabel:{id:"issue.views.field.epic.done.label",defaultMessage:"Done"}})
;const Bo=T.default.div(["min-width:","px;"],1.5*P.e),Ho=T.default.div(["display:flex;flex-direction:row;justify-content:flex-end;padding:","px ","px;border-bottom:2px solid ",";"],P.e,1.5*P.e,rt.a.N30),$o=T.default.label(["display:flex;flex-direction:row;align-items:center;color:'inherit';fill:",";"],(({isChecked:e})=>e?rt.a.N0:"inherit")),Go=T.default.div(["display:flex;flex-direction:row;align-items:center;color:",";font-size:12px;margin-top:","px;"],rt.a.N300,P.e/2),qo=T.default.span(["overflow:hidden;text-overflow:ellipsis;max-width:100%;"]),zo=e=>{var t,s,n,a;const i=Object(Ce.c)(),{createAnalyticsEvent:r}=Object(Uo.a)(),o=20===(null===(t=e.options[1])||void 0===t||null===(s=t.options)||void 0===s?void 0:s.length),u=null===(n=e.selectProps.componentsProps)||void 0===n?void 0:n.onChange,d=null===(a=e.selectProps.componentsProps)||void 0===a?void 0:a.isChecked,p=Object(c.useCallback)((e=>{if(e&&o){const e=r({});Object(ft.f)(e,"intersectionComponent viewed","epicLink")}
}),[r,o]),m=Object(c.useCallback)((e=>{if(u){u(e);const t=r({});Object(ft.f)(t,"doneEpics filtered","epicLink",{includeDone:!d})}}),[r,d,u]),b=i.formatMessage(Wo.checkboxLabel);return l.a.createElement(Fo.z.MenuList,e,l.a.createElement(Ho,{onClick:m},l.a.createElement($o,{isChecked:d},b,l.a.createElement(No.a,{label:b,secondaryColor:"inherit"}))),e.children,o&&l.a.createElement(Ko,{onVisibilityChange:p}))};zo.displayName="Menu";var Yo=zo,Qo=n("./node_modules/@atlaskit/icon/glyph/editor/done.js"),Jo=n.n(Qo),Zo=n("./src/packages/common-legacy-do-not-add-anything-new/src/styles/mixins.js");const Xo=T.default.span(["display:flex;flex-direction:column;margin:0 ","px;padding:","px 0;overflow:hidden;flex-grow:1;"],P.e,P.e/4),ec=T.default.span(["",";flex-grow:1;"],Zo.a),tc=T.default.span(["display:inline-block;color:",";font-size:12px;margin-top:","px;"],rt.a.N300,P.e/2);var sc=n("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js")
;const nc=(e,t)=>l.a.createElement(Go,null,null!=e.description?l.a.createElement(qo,null,e.description):null,!0===e.isDone?l.a.createElement(l.a.Fragment,null,l.a.createElement(Jo.a,{primaryColor:rt.a.G500}),l.a.createElement("span",null,t)):null);nc.displayName="renderOptionDescription";const ac=({option:e})=>{const{formatMessage:t}=Object(Ce.c)();return l.a.createElement(sc.e,null,null!=e.elemBefore?e.elemBefore:null,l.a.createElement(Xo,null,l.a.createElement(ec,null,e.label),nc(e,t(Wo.doneEpicLabel))))};ac.displayName="CustomOption";var ic=ac;function rc(){return(rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const oc=e=>l.a.createElement(Zt.a,{color:e,elemBefore:l.a.createElement(Bo,null),text:""});oc.displayName="getOptionColorElem";class cc extends c.Component{constructor(...e){super(...e),this.state={includeDoneEpics:!1,query:"",data:[],
loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.sessionId="default-session-id",this.getDataFromCache=()=>{var e,t;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t,!this.state.includeDoneEpics).then((e=>{this.setState({data:e,loading:!1})}))},this.renderReadView=()=>{const{value:e,noValueText:t,isMobile:s}=this.props;return Object(o.isEpicCardEnabled)()&&null!=e&&e.value?l.a.createElement(Mo,{issueKey:Object(ra.l)(e.value.toString()),epicName:e.content},l.a.createElement(is,{value:e?[e]:null,noValueText:t,shouldHideLinks:s})):l.a.createElement(is,{value:e?[e]:null,noValueText:t,shouldHideLinks:s})},this.fetchSuggestions=(e,t)=>(null!=t&&""!==t&&(this.sessionId=t),this.setState({query:e}),this.props.fetchSuggestions(e,!this.state.includeDoneEpics,this.sessionId).then((e=>(this.setState({data:e}),e)))),this.onChangeIncludeDone=async()=>{const{query:e,includeDoneEpics:t}=this.state;this.setState({includeDoneEpics:!t,loading:!0
},(()=>this.fetchSuggestions(e).then((e=>{this.setState({data:e,loading:!1,error:!1})})).catch((()=>{this.setState({data:[],loading:!1,error:!0})}))))},this.formatOptionLabel=(e,{context:t})=>"menu"===t?l.a.createElement(ic,{option:e}):e.label}render(){const{data:e,loading:t,error:s}=this.state,n={data:e,loading:t,error:s},a={MenuList:Yo},i={isChecked:this.state.includeDoneEpics,onChange:this.onChangeIncludeDone};return l.a.createElement(_n,rc({},Lo()(this.props,"getDataFromCache"),{debounceFetchSuggestionsTime:300,initialData:n,componentsProps:i,fetchSuggestions:this.fetchSuggestions,additionalAnalyticsProps:{isEpicLink:!0},components:a,renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0}))}}cc.displayName="EpicInlineEditView",cc.displayName="EpicInlineEditView";var lc=Object(u.h)({placeholder:{id:"issue.epic.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Epic"},recent:{id:"issue.epic.text-for-heading-in-recent-group",
defaultMessage:"Recent epics"},allEpics:{id:"issue.epic.text-for-heading-in-all-epics-group",defaultMessage:"All epics"}}),uc=n("./src/packages/issue/epic-color/src/common/constants.js");const dc=e=>{const t=e.color?e.color.key:uc.c[e.colorKey];return t?uc.b[t]:null},pc=(e,{baseUrl:t})=>e&&((e,t)=>({content:e.name,value:e.key,isDone:e.done,color:dc(e),href:`${t}/browse/${e.key}`,fromCache:e.fromCache}))(e,t),mc=(e,t)=>e.filter((e=>!(t&&e.done)&&e.key&&e.name&&e.color&&e.color.key)).slice(-5).reverse(),bc=(e,t=!1)=>{const s=uc.b[e.color.key];return{color:s,content:e.name,value:e.key,id:e.id,description:e.key,elemBefore:oc(s),filterValues:[e.name,e.key],isDone:e.done,fromCache:t}},fc=e=>{if(!e)return null;const t=Object.keys(uc.b),s=t.find((t=>uc.b[t]===e.color))||t[0];return{name:e.content,key:e.value,done:e.isDone,id:e.id,color:{key:s},fromCache:e.fromCache}},gc=(e,t,s)=>{const n=(null==e?void 0:e.values)||[],a=((e,t)=>t.map((t=>{const s=e.find((e=>e.key===t.key))
;return s?(xo.a.update(t.key,s),s):t})))(n,t);return[{heading:s.formatMessage(lc.recent),items:a.map((e=>bc(e,!0)))},{heading:s.formatMessage(lc.allEpics),items:n.map((e=>bc(e,!1)))}]},hc=Object(a.a)(((e,t,s)=>(n,a,i)=>{const r=_o()(),{markTimeToFinishTask:c}=Object(g.c)().markStartOfInteraction({key:C.a.EPIC_LINKS.TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED,concurrentId:r,cancelExisting:!0}),l=Object(o.isSmartEpicRankingEnabled)()?`${e}/rest/agile/1.0/epic/search?excludeDone=${a}&projectKey=${t}&maxResults=20&query=${n}&sessionId=${i}&shouldRank=true`:`${e}/rest/agile/1.0/epic/search?excludeDone=${a}&projectKey=${t}&maxResults=20&query=${n}`,u=Object(Ve.a)(l).then((e=>(c({}),e))).catch((e=>{throw Object(g.c)().cancel({key:C.a.EPIC_LINKS.TIME_TO_FETCH_INPUT_RESULTS_EPIC_PICKER_ENABLED,concurrentId:r},!0),e}));return Promise.all([u,xo.a.getAll()]).then((([e,t])=>{const n=mc(t,a);return gc(e,n,s)}))}));var yc=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:pc,
transformToStateValue:fc,additionalProps:(e,s)=>({fetchSuggestions:hc(Object(N.f)(e),Object(N.C)(e),s),placeholder:s.formatMessage(lc.placeholder),noValueText:s.formatMessage(ds.noValue),allowEmptyValue:!0,getDataFromCache:e=>xo.a.getAll().then((t=>mc(t,e))).then((e=>gc(void 0,e,s))),showPinButton:Object(I.a)(t.area)}),saveField:({baseUrl:e,issueKey:s,fieldMetaKey:n,value:a})=>(t.createAnalyticsEvent&&null!=a&&a.key&&(Object(ft.b)(t.createAnalyticsEvent({}),"epicPickerCache set",{isFromCache:a.fromCache}),xo.a.set(a.key,a)),Object(x.e)(Object(Do.e)(e,s),{body:JSON.stringify({fields:{[n]:a?a.key:null}})}).catch((e=>{throw t.createAnalyticsEvent&&null!=a&&a.key&&(Object(ft.b)(t.createAnalyticsEvent({}),"epicPickerCache removed"),(null==a?void 0:a.key)&&xo.a.remove(a.key)),e})))})))(cc),Oc=Object(u.h)({placeholder:{id:"issue.multi-group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select groups"}});const jc=e=>e&&zi(e),vc=e=>e&&{name:e.value
},Ec=e=>e?(e=>e.map((e=>jc(e))))(e):[],kc=e=>e?e.map((e=>vc(e))):[];var wc=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Ec,transformToStateValue:kc,additionalProps:(e,s)=>({fetchSuggestions:Yi(Object(N.f)(e)),placeholder:s.formatMessage(Oc.placeholder),noValueText:s.formatMessage(ds.noValue),showPinButton:Object(I.a)(t.area)})})))(on),Sc=Object(u.h)({placeholder:{id:"issue.group-picker.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select group"}}),Cc=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:jc,transformToStateValue:vc,additionalProps:(e,s)=>({fetchSuggestions:Yi(Object(N.f)(e)),placeholder:s.formatMessage(Sc.placeholder),noValueText:s.formatMessage(ds.noValue),allowEmptyValue:!Object(v.E)(t.fieldId)(e),hasAutocomplete:!0,showPinButton:Object(I.a)(t.area)})})))(_n),Ic=n("./src/packages/servicedesk/knowledge-glance/src/ui/kb-glance/main.js");var Tc=Object(Gt.a)([Object(d.connect)(((e,t)=>({itemId:t.itemId,
isVisible:Object(Is.f)(e),baseUrl:Object(N.f)(e),issueKey:Object(N.x)(e),locale:Object(N.z)(e),issueId:Object(N.w)(e),projectKey:Object(N.C)(e),isAdmin:"admin"===Object(N.H)(e),showPinButton:Object(I.a)(t.area)})),{})])((({isVisible:e=!0,onOpenPanel:t,baseUrl:s,issueKey:n,locale:a,issueId:i,projectKey:r,isAdmin:o,itemId:c,showPinButton:u})=>e&&l.a.createElement(Ic.a,{baseUrl:s,locale:a,issueKey:n,onOpenPanel:t,issueId:i,projectKey:r,isAdmin:o,itemId:c,showPinButton:u}))),Pc=n("./src/packages/servicedesk/knowledge-glance/src/ui/kb-glance-panel/main.js"),_c=n("./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js"),xc=n("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),Dc=n("./src/packages/issue/issue-view/src/selectors/context-panel-selector.js");function Ac(){return(Ac=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e
}).apply(this,arguments)}const Lc=e=>{const t=Object(Ke.g)(),[s]=Object(qa.b)(t);return l.a.createElement(Pc.a,Ac({},e,{isPanelOpen:void 0!==s}))};Lc.displayName="KbGlancePanelContainer";var Mc=Object(Gt.a)([Object(d.connect)((e=>({isEditorOpen:Object(xc.w)(e),isPanelOpen:Object(Dc.b)(e)})),{onShareAsComment:_c.b})])(Lc),Rc=n("./node_modules/lodash/get.js"),Nc=n.n(Rc),Fc=n("./node_modules/lodash/isEqual.js"),Uc=n.n(Fc),Vc=n("./src/packages/platform/utils/constants/src/analytics-sources.js");var Kc=n("./src/packages/platform/services/issue/src/model/issue-system-fields.js");var Wc=n("./src/packages/issue/fields/labels/src/ui/edit/main.js"),Bc=n("./src/packages/issue/fields/labels/src/ui/edit/utils.js"),Hc=Object(u.h)({errorTitle:{id:"issue-field-labels.error-title",defaultMessage:"We couldn't set the labels value"},errorMessage:{id:"issue-field-labels.error-message",defaultMessage:"Check your connection, then give it another try."},noValueText:{id:"issue-field-labels.no-value-text",
defaultMessage:"None"}});const $c=T.default.div(["padding:0;"]),Gc=T.default.div(["padding:0px;& > div > span:first-child{margin-left:0;}"]);var qc=n("./node_modules/@atlaskit/tag/dist/es2019/tag/internal/removable/index.js");const zc=(e,t)=>`/issues/?jql=${encodeURIComponent(`${(e=>{if(e.startsWith("customfield_"))return`cf[${e.substring("customfield_".length,e.length)}]`;return e})(e)} = ${Object(Rs.b)(t)}`)}`,Yc=e=>{const{fieldId:t,placeholder:s,value:n}=e;return Jt()(n)?l.a.createElement("span",null,s):l.a.createElement(Xt.a,null,n.map((e=>l.a.createElement(qc.a,{key:e,isRemovable:!1,text:e,href:zc(t,e)}))))};Yc.displayName="LabelsView";var Qc=Yc;function Jc(){return(Jc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Zc(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Xc=Object(c.memo)((e=>{const{fieldKey:t,issueKey:s,label:n,onCancel:a,onEdit:i,onEscape:r,onConfirm:o,onEnter:u,onUpdate:d,readView:p,editView:m,showPinButton:b,isEditing:f}=e,g=Zc(e,["fieldKey","issueKey","label","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","showPinButton","isEditing"]),h=Object(Ke.a)(),{formatMessage:y}=Object(Ce.c)(),[O,{addToCache:j,removeFromCache:v}]=(()=>{const{createAnalyticsEvent:e}=Object(Uo.a)(),[t,s]=Object(c.useState)([]),n=Object(c.useCallback)((t=>{t.forEach((async t=>{try{const s=await rr.a.get(t);Object(ft.b)(e({}),"labelPickerCache set",{isFromCache:Boolean(null==s?void 0:s.label)}),t&&rr.a.set(`${t}`,{label:t})}catch(w){
Cs.a.safeErrorWithoutCustomerData("issue-view.labels.cache.set",w.message)}}))}),[e]),a=Object(c.useCallback)((t=>{t.forEach((async t=>{try{const s=await rr.a.get(t);s&&(Object(ft.b)(e({}),"labelPickerCache removed"),s&&rr.a.remove(`${s.label}`))}catch(w){Cs.a.safeErrorWithoutCustomerData("issue-view.labels.cache.remove",w.message)}}))}),[e]);return Object(c.useEffect)((()=>{(async()=>{const e=(e=>e.map((({label:e})=>({label:e,value:e}))))((e=>e.slice(-5).reverse())(await rr.a.getAll()));s(e)})()}),[]),[t,{addToCache:n,removeFromCache:a}]})(),E=Object(c.useCallback)((e=>{null!==e&&j(e),d&&d(e)}),[j,d]),k=Object(c.useCallback)(((e,t)=>{null!==t&&v(t)}),[v]),[{error:w,fieldConfig:S,value:C},{resetError:I,saveValue:T}]=(e=>{const{fieldKey:t,issueKey:s,onSuccess:n,onFailure:a}=e,[i]=Object(Ht.a)(s,t),r=Nc()(i,"schema.type","array"),[{error:o,value:c},{resetError:l,saveValue:u}]=Object(aa.a)({fieldType:r,issueKey:s,onSuccess:n,onFailure:a,initialValue:null,fieldKey:t||Kc.p});return[{
error:o,value:c,fieldConfig:i},{resetError:l,saveValue:u}]})({fieldKey:t,onSuccess:E,onFailure:k,issueKey:Object(ra.l)(s)}),[P,_]=Object(c.useState)(f||!1),[x,D]=Object(c.useState)(C),A=Nc()(S,"autoCompleteUrl",""),L=Nc()(S,"isEditable",!1),M=h&&h.value===Vc.a.MOBILE_ISSUE;Object(c.useEffect)((()=>{w&&_(!0)}),[w]);const R=Object(c.useCallback)((e=>{Uc()(x,C)||T(x,null,e),_(!1),Object(ft.h)(e)}),[T,x,C]),N=Object(c.useCallback)((e=>{I(),_(!1),D(C),Object(ft.h)(e)}),[I,C]),F=Object(c.useCallback)((e=>{N(e),a&&a(e)}),[N,a]),U=Object(c.useCallback)((e=>{R(e),o&&o(e)}),[o,R]),V=Object(c.useCallback)((e=>{_(!0),Object(ft.h)(e),i&&i(e)}),[i]),K=Object(c.useCallback)((e=>{N(e),r&&r(e)}),[N,r]),W=Object(c.useCallback)((e=>{const t=e&&e.length>0?e.map((e=>e.value)):e;I(),D(t)}),[I,D]);return l.a.createElement(l.a.Fragment,null,w&&(()=>w?l.a.createElement(oa.a,{error:w,title:Hc.errorTitle,description:Hc.errorMessage}):null)(),l.a.createElement(ca.a,Jc({isEditable:L,isEditing:P,
isFitContainerWidthReadView:!M,label:n,readView:(()=>void 0!==p?p:l.a.createElement(Gc,null,l.a.createElement(Qc,{fieldId:t,placeholder:y(Hc.noValueText),value:C})))(),editView:L?(()=>void 0!==m?m:l.a.createElement($c,null,l.a.createElement(Wc.a,{autoFocus:!0,spacing:"compact",autoCompleteUrl:A,onChange:W,cachedOptions:O,value:Object(Bc.a)(x)})))():null,onCancel:F,onConfirm:U,onEdit:V,onEscape:K},g)))}));const el=Re()((e=>t=>`${t} (${e.formatMessage(or.createNewItem)})`)),tl=Object(u.i)(Object(H.a)(((e,t)=>{const s=el(t.intl),n=()=>rr.a.getAll().then((e=>dr({},e,t.intl.formatMessage))),a=Object(v.d)(t.fieldId),i=Object(v.f)(t.fieldId);return{fieldId:t.fieldId,transformFromStateValue:cr,transformToStateValue:lr,additionalProps:(e,r)=>({fetchSuggestions:pr(a(e),t.fieldId,i(e),t.createAnalyticsEvent,r.formatMessage),formatMessage:r.formatMessage,placeholder:r.formatMessage(or.placeholder),noValueText:r.formatMessage(ds.noValue),formatCreateLabel:s,canCreateNewItem:!0,allowEmptyValue:!0,
validate:br,issueKey:Object(N.x)(e),showPinButton:Object(I.a)(t.area),getDataFromCache:n}),saveField:(...e)=>(({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n,fieldEditSessionId:a},i,r)=>{const o=void 0!==a?`${e}/rest/api/2/issue/${t}?fieldEditSessionId=${a}`:`${e}/rest/api/2/issue/${t}`;return n.forEach((e=>{rr.a.get(e).then((t=>{r.createAnalyticsEvent&&Object(ft.b)(r.createAnalyticsEvent({}),"labelPickerCache set",{isFromCache:Boolean(null==t?void 0:t.label)}),e&&rr.a.set(`${e}`,(e=>({label:e}))(e))})).catch((e=>{Cs.a.safeErrorWithoutCustomerData("issue-view.labels.cache.set",e.message)}))})),Object(x.e)(o,{body:JSON.stringify({fields:{[s]:n}})}).catch((e=>{throw n.forEach((e=>{rr.a.get(e).then((e=>{null!=e&&e.label&&r.createAnalyticsEvent&&(Object(ft.b)(r.createAnalyticsEvent({}),"labelPickerCache removed"),e&&rr.a.remove(`${e.label}`))})).catch((e=>{Cs.a.safeErrorWithoutCustomerData("issue-view.labels.cache.remove",e.message)}))})),e}))})(...e,t)}}))(Er)),sl=e=>{
const{area:t,fieldId:s}=e,n=Object(Ke.g)(),{formatMessage:a}=Object(Ce.c)(),i=a(or.label),r=Object(I.a)(t);return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,i),!0===r&&l.a.createElement(y.a,{fieldId:s,label:i})),l.a.createElement(h.g,null,l.a.createElement(Xc,{fieldKey:s,issueKey:n,label:i,showPinButton:r})))};sl.displayName="ExtractedLabelsField";var nl=Object(Gn.a)(o.isExtractedLabelsFieldEnabled,sl,tl),al=n("./src/packages/servicedesk/incident-management/issue-view/linked-alerts/src/async.js"),il=e=>l.a.createElement(al.a,e),rl=n("./src/packages/issue/fields/message-custom-field/src/services/index.js");const ol=Object(X.d)((()=>n.e("async-lazy-jira-issue-field-message-view").then(n.bind(null,"./src/packages/issue/fields/message-custom-field/src/index.js")).then((e=>e.MessageFieldView))),{moduleId:"./src/packages/issue/fields/message-custom-field/src/index.js"
}),cl=T.default.div(["padding-top:","px;"],P.e/2),ll=T.default.div(["margin-bottom:","px;"],2*P.e),ul=({fieldId:e,area:t,label:s})=>{const n=Object(Ke.g)(),a=Object(I.a)(t),[{value:i,fieldConfig:r}]=Object(rl.a)({issueKey:n,fieldKey:e}),o="content"===t?O.c:h.e,c="content"===t?O.e:h.f,u=(null==r?void 0:r.title)||s;return l.a.createElement(Os.a,{id:"MessageCustomField",packageName:"jiraIssueView",fallback:"unmount",sendToPrivacyUnsafeSplunk:!0},l.a.createElement(ll,null,l.a.createElement(o,null,l.a.createElement(c,null,u),!0===a&&l.a.createElement(y.a,{fieldId:e,label:u})),l.a.createElement(cl,null,l.a.createElement(X.a,{fallback:null},l.a.createElement(ol,{value:i})))))};ul.displayName="View";var dl=Object(c.memo)(ul),pl=Object(u.h)({placeholder:{id:"issue.multi-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}});const ml=e=>({value:e.id,content:e.value}),bl=e=>e?e.map(ml):[],fl=e=>e&&e.map((e=>({id:e.value,value:e.content}))),gl=e=>e&&[{
items:e.map(ml)}]||[],hl=Object(a.a)((e=>()=>Promise.resolve(e).then(gl)));var yl=Object(H.a)(((e,t)=>{const s=Object(v.c)(t.fieldId);return{fieldId:t.fieldId,transformFromStateValue:bl,transformToStateValue:fl,additionalProps:(e,n)=>({fetchSuggestions:hl(s(e)),placeholder:n.formatMessage(pl.placeholder,{fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:n.formatMessage(ds.noValue),showPinButton:Object(I.a)(t.area)})}}))(on),Ol=n("./src/packages/issue/fields/number/src/ui/main.js"),jl=n("./src/packages/issue/fields/number/src/services/index.js");const vl=Object(T.default)(h.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),El=({fieldId:e,label:t,area:s})=>{const{formatMessage:n}=Object(Ce.c)(),a=Object(Ke.g)(),i=Object(I.a)(s),[{value:r,fieldConfig:o}]=Object(jl.a)({issueKey:a,fieldKey:e}),u=(null==o?void 0:o.title)||t,d=Object(c.useCallback)((()=>null===r||""===r?l.a.createElement(fe.b,null,n(ds.noValue)):r.toString()),[n,r])
;return l.a.createElement(vl,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,u),!0===i&&l.a.createElement(y.a,{fieldId:e,label:u})),l.a.createElement(h.g,null,l.a.createElement(Ol.default,{label:u,issueKey:a,fieldKey:e,noValueText:n(ds.noValue),readView:d(),isFitContainerWidthReadView:!0})))};El.displayName="View";var kl=Object(c.memo)(El),wl=n("./src/packages/issue/fields/number/src/ui/async.js");const Sl=Object(T.default)(h.g)(["& > div > div > div > div > div > div{width:100%;}"]),Cl=Object(X.f)((()=>n.e("async-issue-field-number").then(n.bind(null,"./src/packages/issue/fields/number/src/index.js"))),{moduleId:"./src/packages/issue/fields/number/src/index.js"}),Il=({issueKey:e,fieldId:t,label:s,noValueText:n,onUpdate:a,showPinButton:i})=>{const[{value:r}]=Object(jl.a)({issueKey:e,fieldKey:t}),{formatMessage:o}=Object(Ce.c)(),c=null===r||""===r?l.a.createElement(fe.b,null,n):l.a.createElement(Fa.a,null,r.toString())
;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,s),!0===i&&l.a.createElement(y.a,{fieldId:t,label:s})),l.a.createElement(Sl,null,l.a.createElement(wl.a,{packageName:"issue",fallback:c},l.a.createElement(Cl,{label:s,issueKey:e,fieldKey:t,readView:c,isFitContainerWidthReadView:!0,onUpdate:a,editButtonLabel:(()=>o($.a.extendedEditButtonLabel,{inputFieldValue:null!==r?r:n,fieldName:s}))()}))))};Il.displayName="NumberView";var Tl=Object(c.memo)(Il),Pl=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(N.x)(e),noValueText:s.formatMessage(ds.noValue),type:"number",showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(qn.g)(t.fieldId,s))})
})))(Tl),_l=n("./node_modules/lodash/debounce.js"),xl=n.n(_l),Dl=n("./node_modules/@atlaskit/icon/glyph/people-group.js"),Al=n.n(Dl),Ll=n("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),Ml=n("./src/packages/platform/observability/product-analytics-web-client/src/async.js");var Rl=Object(u.h)({placeholder:{id:"issue.organizations.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Organizations"},organizationIconLabel:{id:"issue.organizations.organization-icon-label",defaultMessage:"Organization icon"}});const Nl=e=>({value:e.id,content:e.name,elemBefore:l.a.createElement(Al.a,{label:""})}),Fl=e=>e?e.map(Nl):[],Ul=e=>e&&e.map((e=>({id:e.value,name:e.content}))),Vl=xl()((async e=>{(await Object(Ml.a)()).getInstance().sendTrackEvent(e)}),2e3,{leading:!0,trailing:!1}),Kl=Object(a.a)((e=>t=>{if(!e)return Promise.resolve([]);const s=Object(o.isJsmOrgsFieldSearchUriEncodeEnabled)()?`${e}${encodeURIComponent(t)}`:`${e}${t}`
;return Object(Ve.a)(s).then((e=>(Object(o.isJsmAddCustomersAndOrgSearchMissingEventsEnabled)()&&Vl((({isSearchStringEmpty:e})=>({source:"issueView",action:"succeeded",actionSubject:"jsmOrganizationsFieldSearch",attributes:{isSearchStringEmpty:e}}))({isSearchStringEmpty:""===t})),(e=>[{items:e.map(Nl)}])(e)))).catch((e=>{throw Object(o.isJsmAddCustomersAndOrgSearchMissingEventsEnabled)()&&Object(Ll.a)({meta:{id:"jsmOrganizationsFieldSearch",packageName:"jiraIssueView"},error:e,attributes:{isSearchStringEmpty:""===t}}),e}))})),Wl=({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>((e,t,s,n)=>Object(x.e)(Object(Do.e)(e,t),{body:JSON.stringify({fields:{[s]:n.map((e=>Number(e.id)))}})}))(e,t,s,n),Bl=e=>e&&Array.isArray(e)?e.map((e=>e.id)).join(","):e;var Hl=Object(H.a)(((e,t)=>{const s=Object(v.d)(t.fieldId);return{fieldId:t.fieldId,transformFromStateValue:Fl,transformToStateValue:Ul,saveField:Wl,additionalProps:(e,n)=>({tagAppearance:"rounded",
formatOptionLabel:e=>l.a.createElement(Qs,null,l.a.createElement(Al.a,{label:n.formatMessage(Rl.organizationIconLabel)}),l.a.createElement(Js,null,e.content)),fetchSuggestions:Kl(s(e)),placeholder:n.formatMessage(Rl.placeholder),noValueText:n.formatMessage(ds.noValue),analyticsAttributeIdRetriever:Bl,showPinButton:Object(I.a)(t.area)})}}))(on),$l=n("./src/packages/platform/utils/xsrf-token/src/index.js"),Gl=n("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),ql=n("./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js"),zl=n("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),Yl=n("./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js"),Ql=n("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js"),Jl=n("./src/packages/issue/issue-view/src/common/util/types/type-check/index.js")
;const Zl=e=>t=>Object(zl.a)(e.daysPerWeek,e.hoursPerDay)(t||0),Xl=e=>t=>{let s=t.trim();if(Object(Jl.a)(s)){const{defaultUnit:t}=e;s=`${s}${Object(ql.a)(t)}`}return s},eu=e=>t=>{const s=Xl(e)(t);return""===s||Object(Yl.a)(s)},tu=e=>t=>{const s=Xl(e)(t);return eu(e)(s)?Object(Ql.a)(e.daysPerWeek,e.hoursPerDay)(s):0};var su=n("./src/packages/time-tracking-formatter/src/main.js"),nu=Object(u.h)({errorTitle:{id:"issue-field-original-estimate.error-title",defaultMessage:"We couldn't set the original estimate value"},errorMessage:{id:"issue-field-original-estimate.error-message",defaultMessage:"Check your connection, then give it another try."}}),au=n("./node_modules/query-string/index.js");const iu=({issueKey:e,issueId:t,fieldId:s,timeTrackingValue:n,onSuccess:a,onFailure:i})=>{const[r]=Object(Ht.a)(e,s),o=(null==r?void 0:r.schema.system)||"",[{value:c,error:l},{saveValue:u,resetError:d}]=Object(aa.a)({fieldKey:s,issueKey:e,fieldType:o,initialValue:null,
saveField:(e,s,a,i)=>(async({issueId:e,newValue:t,baseUrl:s,timeTrackingValue:n})=>{const a=n&&null!=n.remainingEstimateSeconds;return Object(x.d)(`${s}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(au.stringify)({issueId:e,timetracking_originalestimate:null!==t?t/60+"m":null,timetracking_targetsubfield:a?"timetracking_originalestimate":void 0,fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object($l.a)()})})})({issueId:t,newValue:a,baseUrl:i,timeTrackingValue:n}),onSuccess:a,onFailure:i});return[{value:c,error:l,fieldConfig:r},{saveValue:u,resetError:d}]},ru=T.default.div(["width:","px;cursor:auto;"],8.5*P.e),ou=({isInvalidInput:e,invalidTimeFormatMessage:t,placeholder:s,value:n,onChange:a})=>l.a.createElement(ru,null,l.a.createElement(Lr,{compact:!0,type:"text",value:n,placeholder:s,onChange:a,invalidMessage:e?t:void 0}));ou.displayName="OriginalEstimateEdit"
;var cu=ou,lu=n("./src/packages/issue/fields/original-estimate/src/ui/view/main.js");function uu(){return(uu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function du(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var pu=Object(c.memo)((e=>{var t
;const{isMobile:s,config:n,editView:a,fieldId:i,issueId:r,issueKey:u,onUpdate:d,placeholder:p,readView:m,timeTrackingValue:b,invalidTimeFormatMessage:f,onCancel:g,onConfirm:h,onEdit:y,onEnter:O,onEscape:j}=e,v=du(e,["isMobile","config","editView","fieldId","issueId","issueKey","onUpdate","placeholder","readView","timeTrackingValue","invalidTimeFormatMessage","onCancel","onConfirm","onEdit","onEnter","onEscape"]),[{value:E,error:k,fieldConfig:w},{saveValue:S,resetError:C}]=iu({fieldId:i,issueId:r&&Object(ra.j)(r),issueKey:Object(ra.l)(u),onSuccess:d,timeTrackingValue:b}),[I,T]=Object(c.useState)(!1),[P,_]=Object(c.useState)(null),[x,D]=Object(c.useState)(""),[A,L]=Object(c.useState)(!1),M=Object(Ce.c)(),R=Object(c.useMemo)((()=>Object(o.isFixTimeTrackingFormatEnabled)()?Object(su.a)(P||0,{workingHoursPerDay:n.hoursPerDay,workingDaysPerWeek:n.daysPerWeek,timeFormat:n.format||"pretty",defaultUnit:n.defaultUnit},M):Zl(n)(P)),[n,M,P]);Object(c.useEffect)((()=>{D(R)}),[R]),
Object(c.useEffect)((()=>{_(E)}),[E]),Object(c.useEffect)((()=>{k&&T(!0)}),[k]);const N=null!==(t=null==w?void 0:w.isEditable)&&void 0!==t&&t,F=Object(c.useCallback)((e=>{if(x!==R)if(eu(n)(x)){const t=tu(n)(x);S(t,null,e),Object(ft.h)(e),L(!1),T(!1)}else L(!0),T(!0);else T(!1)}),[x,R,n,S]),U=Object(c.useCallback)((e=>{C(),L(!1),T(!1),D(R),_(E),Object(ft.h)(e)}),[E,C,R]),V=Object(c.useCallback)((e=>{U(e),null==g||g(e)}),[g,U]),K=Object(c.useCallback)((e=>{F(e),null==h||h(e)}),[F,h]),W=Object(c.useCallback)((e=>{T(!0),Object(ft.h)(e),null==y||y(e)}),[y]),B=Object(c.useCallback)((e=>{U(e),null==j||j(e)}),[j,U]),H=Object(c.useCallback)((e=>{F(e),null==O||O(e)}),[O,F]),$=Object(c.useCallback)((e=>{const{value:t}=e.target;L(!1),C(),D(t)}),[C,D]),G=Object(c.useCallback)((()=>l.a.createElement(lu.a,{value:R})),[R]),q=Object(c.useCallback)((()=>l.a.createElement(cu,{isInvalidInput:A,invalidTimeFormatMessage:f,placeholder:p,value:x,onChange:$})),[x,f,A,$,p])
;return l.a.createElement(l.a.Fragment,null,k&&(()=>k?l.a.createElement(oa.a,{error:k,title:nu.errorTitle,description:nu.errorMessage}):null)(),l.a.createElement(ca.a,uu({actionSubject:"originalEstimateInlineEdit",isEditable:N,isEditing:I,readView:G(),editView:N?q():null,onCancel:V,onConfirm:K,onEdit:W,onEscape:B,onEnter:H},v)))}));const mu=Object(T.default)(h.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),bu=({isEditable:e,isMobile:t,config:s,fieldId:n,invalidTimeFormatMessage:a,issueId:i,issueKey:r,label:o,placeholder:c,timeTrackingValue:u,showPinButton:d,onUpdate:p})=>l.a.createElement(mu,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===d&&l.a.createElement(y.a,{fieldId:n,label:o})),l.a.createElement(h.g,null,l.a.createElement(pu,{isEditable:e,isFitContainerWidthReadView:!0,isMobile:t,config:s,fieldId:n,invalidTimeFormatMessage:a,issueId:i,issueKey:r,label:o,placeholder:c,timeTrackingValue:u,onUpdate:p})));bu.displayName="OriginalEstimate"
;var fu=Object(c.memo)(bu);const gu=Object(u.h)({placeholder:{id:"issue.time-estimate.placeholder-for-the-field",defaultMessage:"2w 4d 6h 45m"}}),hu=l.a.createElement(u.c,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{format:l.a.createElement("b",null,"2w 4d 6h 45m")}});var yu=Object(H.a)(((e,t)=>({fieldId:t.fieldId,isOptimistic:!1,additionalProps:(e,s)=>({config:Object(Gl.h)(e),placeholder:s.formatMessage(gu.placeholder),issueKey:Object(N.x)(e),issueId:Object(N.w)(e),timeTrackingValue:Object(v.h)("timetracking")(e),isEditable:Object(v.C)(t.fieldId)(e)&&!!Object($l.a)(),showPinButton:Object(I.a)(t.area),invalidTimeFormatMessage:hu}),additionalCallbacks:e=>({onUpdate:s=>e(Object(qn.g)(t.fieldId,s))})
})))(fu),Ou=n("./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js"),ju=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/epic-selector.js"),vu=n("./node_modules/@atlaskit/select/dist/es2019/AsyncSelect.js"),Eu=Object(u.h)({menuHeader:{id:"issue.views.field.parent.edit.menuHeader",defaultMessage:"To set an epic as a parent, use the epic link instead."},noMatches:{id:"issue.views.field.parent.edit.noMatches",defaultMessage:"No Matches"},placeholder:{id:"issue.views.field.parent.edit.placeholder",defaultMessage:"Choose a parent to assign this issue to."}});const ku=T.default.img(["margin-right:","px;"],P.e),wu=T.default.div(["display:flex;flex-direction:row;overflow:hidden;"]),Su=T.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),Cu=T.default.div(["padding:","px ","px ","px;"],P.e,2*P.e,2*P.e),Iu=T.default.div(["color:",";"],rt.a.N90);function Tu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Pu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Tu(Object(s),!0).forEach((function(t){_u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Tu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const xu=e=>{const t=Object(Ce.c)();return l.a.createElement(Fo.z.MenuList,e,l.a.createElement(Cu,null,t.formatMessage(Eu.menuHeader)),e.children)};xu.displayName="MenuList";const Du=e=>{const t=e.data.data;if(t){const{issueType:s,summary:n,key:a}=t,{iconUrl:i}=s;return l.a.createElement(Fo.z.Option,e,l.a.createElement(wu,null,l.a.createElement(ku,{src:i
})," ",l.a.createElement(Su,null,a," ",n)))}return null},Au=e=>{const t=Object(Ce.c)(),{data:s}=e.data,n=s?s.label:l.a.createElement(Iu,null,t.formatMessage(Eu.placeholder));return l.a.createElement(Fo.z.SingleValue,e,n)};Au.displayName="SingleValue";class Lu extends c.Component{constructor(...e){super(...e),this.onChange=e=>{const{hasEpicLinkFieldDependency:t,showField:s}=this.props.value,n=null!=e?e.data:null,a=Pu(Pu({data:n,value:n?n.key:null},{hasEpicLinkFieldDependency:t}),{showField:s});this.props.onChange(a),this.props.onConfirm(a)},this.debouncedLoadOptions=xl()(((e,t)=>{this.props.loadOptions(e).then(t,(()=>{t([])}))}),300)}render(){const{value:e,portalElement:t,menuPlacement:s,intl:{formatMessage:n}}=this.props;return l.a.createElement(vu.a,{value:e,autoFocus:!0,defaultOptions:!0,components:{MenuList:xu,Option:Du,SingleValue:Au},menuPortalTarget:t,menuPlacement:s,onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==e.data,
noOptionsMessage:()=>n(Eu.noMatches),cacheOptions:!0})}}Lu.displayName="EditableParentLinkField";var Mu=Object(u.i)(Lu),Ru=Object(u.h)({label:{id:"issue.views.field.parent.label",defaultMessage:"Parent link"}}),Nu=Object(u.h)({epicLinkExists:{id:"issue.views.field.parent.epic-link-exists-message.epicLinkExists",defaultMessage:"Cannot use parent link when epic link is set."}});const Fu=T.default.div(["color:",";"],rt.a.N90),Uu=()=>{const{formatMessage:e}=Object(Ce.c)();return l.a.createElement(Fu,null,e(Nu.epicLinkExists))};Uu.displayName="EpicLinkExistsMessage";var Vu=Uu;const Ku=T.default.div(["display:flex;flex-direction:row;overflow:hidden;white-space:nowrap;"]),Wu=T.default.a(["margin-right:","px;cursor:pointer;"],P.e),Bu=T.default.div(["overflow:hidden;text-overflow:ellipsis;"]),Hu=T.default.img(["margin-right:","px;"],P.e),$u=e=>{const{showError:t,value:s,noValueText:n}=e;if(t)return l.a.createElement(Vu,null);if(s.data){const{key:e,summary:t,issueType:{iconUrl:n},url:a}=s.data
;return l.a.createElement(Ku,null,l.a.createElement(Hu,{src:n}),l.a.createElement(Wu,{href:a,target:"_blank"},e),l.a.createElement(Bu,null,t))}return l.a.createElement(fe.b,null,n)};$u.displayName="ParentViewField";var Gu=$u;class qu extends c.Component{constructor(...e){super(...e),this.shouldShowError=()=>{var e;return this.props.hasEpic&&(null===(e=this.props.value)||void 0===e?void 0:e.hasEpicLinkFieldDependency)}}renderEditableField(){const{onChange:e,onConfirm:t,fetchSuggestions:s,value:n,portalElement:a,menuPlacement:i}=this.props;return this.shouldShowError()?null:l.a.createElement("span",null,l.a.createElement(Mu,{value:n,loadOptions:s,portalElement:a,menuPlacement:i,onChange:e,onConfirm:t}))}render(){const{intl:{formatMessage:e},value:t,noValueText:s,isEditing:n,onConfirm:a,onCancel:i,onEditRequest:r,isMobile:c,isEditable:u,fieldId:d,showPinButton:p}=this.props,m=Object(o.isFixParentLinkLabelEnabled)()?this.props.label:e(Ru.label)
;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,m),!0===p&&l.a.createElement(y.a,{fieldId:d,label:m})),l.a.createElement(h.g,{isEditing:n},l.a.createElement(be.a,{onEscape:i},l.a.createElement(q.a,{isLabelHidden:!0,label:m,readView:l.a.createElement(Gu,{noValueText:s,value:t,showError:this.shouldShowError()}),editView:u?this.renderEditableField():null,disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:a,onCancel:i,onEditRequested:r,isFitContainerWidthReadView:!c}))))}}qu.displayName="ParentField";var zu=Object(u.i)(qu);const Yu={data:null,hasEpicLinkFieldDependency:!1,showField:!1},Qu=e=>e;function Ju(){return(Ju=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Zu(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Xu=Object(a.a)(((e,t,s,n)=>a=>s?Object(x.d)(`${e}/rest/jpo/1.0/parent/suggest`,{body:JSON.stringify({query:a,projectId:t,issueTypeId:s,maxResults:100})}).then((t=>((e,t,s={hasEpicLinkFieldDependency:!1,showField:!1})=>{if(!e||!e.issues||e.issues.length<=0)return[];const{projects:n}=e,a=e.issueTypes;return e.issues.map((e=>{const i=`${n.filter((t=>t.id===e.projectId))[0].key}-${e.issueKey}`,{iconUrl:r}=a.filter((t=>+t.id===e.issueTypeId))[0];return{data:{key:i,summary:e.issueSummary,value:i,label:`${i} ${e.issueSummary}`,issueType:{id:e.issueTypeId,iconUrl:`${t}${r}`},url:`${t}/browse/${i}`},hasEpicLinkFieldDependency:s.hasEpicLinkFieldDependency,showField:s.showField,value:i}}))})(t,e,n))):[])),ed=e=>{
let{epic:t,isVisible:s,intl:n}=e,a=Zu(e,["epic","isVisible","intl"]);if(!s)return null;const i=null!=t;return l.a.createElement(zu,Ju({hasEpic:i},a))};ed.displayName="ParentView";var td=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:(e,t)=>((e=Yu,t)=>((e,t)=>({hasEpicLinkFieldDependency:e.hasEpicLinkFieldDependency,showField:e.showField,value:e.data&&e.data.key?e.data.key:null,data:e.data?{key:e.data.key,value:e.data.key,summary:e.data.summary,url:`${t}/browse/${e.data.key}`,label:`${e.data.key} ${e.data.summary}`,issueType:e.data.issueType?{iconUrl:`${t}${e.data.issueType.iconUrl}`,id:e.data.issueType.id}:e.data.issueType}:null}))(e,t.baseUrl))(e,t),transformToStateValue:Qu,additionalProps:(e,s)=>({fetchSuggestions:Xu(Object(N.f)(e),Object(K.C)(e),Object(yn.f)(e),Object(v.n)(t.fieldId)(e)),noValueText:s.formatMessage(ds.noValue),epic:Object(ju.a)(e),isVisible:Object(Ou.d)(t.fieldId)(e),portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,
showPinButton:Object(I.a)(t.area)}),saveField:({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>Object(x.e)(Object(Do.e)(e,t),{body:JSON.stringify({fields:{[s]:n&&n.data?n.data.key:null}})})})))(ed);const sd="24x24",nd=e=>e.map((e=>({id:Object(ra.a)(e.id),accountId:Object(ra.a)(e.id),displayName:e.name,avatarUrls:{[sd]:e.avatarUrl}}))),ad=e=>Array.isArray(e)?e.reduce(((e,t)=>{const s=(e=>{if(!e||"object"!=typeof e||!e.accountId||!e.displayName)return null;let t="";return e.avatarUrls&&"object"==typeof e.avatarUrls&&(t=String(e.avatarUrls["24x24"])),{id:String(e.accountId),name:String(e.displayName),type:"user",fixed:!1,avatarUrl:t}})(t);return s?[...e,s]:e}),[]):[];var id=n("./src/packages/project-settings/people-field/src/index.js"),rd=Object(u.h)({placeholderMulti:{id:"issue.people.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Choose people"},placeholderSingle:{id:"issue.people.text-for-edit-view-when-no-value-is-provided-single-mode",defaultMessage:"Choose a person"},
singleValueValidationError:{id:"issue.people.single-value-validation-error",defaultMessage:"You can only add one person to this field"}});const od=Object(a.a)((e=>e.map((e=>({value:e.id,content:e.name,elemBefore:l.a.createElement(Ze.a,{size:"xsmall",src:e.avatarUrl})}))))),cd=e=>!e||!1!==e.isMulti;class ld extends c.Component{isValid(){const{configuration:e,value:t}=this.props;return!cd(e)&&t.length>1}renderReadView(){const{value:e,intl:t,isMobile:s}=this.props;return l.a.createElement(is,{value:od(e),noValueText:t.formatMessage(ds.noValue),tagAppearance:"rounded",shouldHideLinks:s,isUserTag:!0})}renderEditView(){const{onChange:e,value:t,baseUrl:s,intl:n,configuration:a}=this.props,i=cd(a)||t.length>1;return l.a.createElement(id.a,{baseUrl:s,isMulti:i,autoFocus:!0,isInvalid:this.isValid(),isInputDisabled:this.isValid(),invalidMessage:n.formatMessage(rd.singleValueValidationError),placeholder:n.formatMessage(i?rd.placeholderMulti:rd.placeholderSingle),isDisabled:!1,appearance:"compact",
onChange:e,value:t})}render(){const{label:e,isEditable:t,isEditing:s,isMobile:n,onConfirm:a,onCancel:i,onEditRequest:r,intl:o,value:c,configuration:u,fieldId:d,showPinButton:p}=this.props,m=!cd(u)&&c.length<=1;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,e),!0===p&&l.a.createElement(y.a,{fieldId:d,label:e})),l.a.createElement(h.g,{isEditing:s},l.a.createElement(be.a,{onEscape:i},l.a.createElement(q.a,{isLabelHidden:!0,label:e,readView:this.renderReadView(),editView:t?this.renderEditView():null,disableEditViewFieldBase:!0,isEditing:s,shouldConfirmOnEnter:m,isValid:!s||this.isValid(),onConfirm:a,onCancel:i,areActionButtonsHidden:m,onEditRequested:r,isFitContainerWidthReadView:!n,editButtonLabel:o.formatMessage($.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:o.formatMessage($.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:o.formatMessage($.a.cancelButtonLabel,{fieldName:e})}))))}}ld.displayName="People",ld.defaultProps={
isEditable:!1,isEditing:!1,isMobile:!1,label:""};var ud=Object(H.a)(((e,{fieldId:t,area:s})=>({fieldId:t,transformFromStateValue:ad,transformToStateValue:nd,additionalProps:e=>{const n=Object(v.q)(t)(e)||{};return{baseUrl:Object(ra.b)(Object(N.f)(e)),configuration:n.configuration||{},showPinButton:Object(I.a)(s)}}})))(Object(u.i)(ld));const dd=e=>({content:e.name,value:e.id,iconUrl:e.iconUrl}),pd=e=>e&&dd(e),md=e=>e&&{name:e.content,id:e.value,iconUrl:e.iconUrl},bd=e=>[{items:e.map(dd)}];function fd(){return(fd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const gd=Object(u.h)({placeholder:{id:"issue.priority.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select priority"}}),hd=Object(a.a)((e=>()=>Promise.resolve(e).then(bd))),yd=()=>{Object(g.c)().markTimeToFeedback({key:C.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS})},Od=()=>{
Object(g.c)().markTimeToFinishTask({key:C.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS})},jd=e=>{const{isEditing:t,value:s,onChange:n,onEditRequest:a,onConfirm:i,onCancel:r}=e,o=Object(c.useRef)(!1);Object(c.useEffect)((()=>{Object(g.c)().markTimeToFinishTask({key:C.a.PRIORITY.TIME_TO_REFLECT_PRIORITY_UPDATE})}),[s]),Object(c.useEffect)((()=>{t||Object(g.c)().markTimeToFinishTask({key:C.a.PRIORITY.TIME_TO_RENDER_READ_VIEW})}),[t]);const u=Object(c.useCallback)((e=>{o.current=!0,Object(g.c)().markStartOfInteraction({key:C.a.PRIORITY.TIME_TO_REFLECT_PRIORITY_UPDATE,cancelExisting:!0}),n(e)}),[n]),d=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({key:C.a.PRIORITY.TIME_TO_RENDER_SUGGESTIONS,cancelExisting:!0}),a()}),[a]),p=Object(c.useCallback)((()=>{o.current||Object(g.c)().markStartOfInteraction({key:C.a.PRIORITY.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),o.current=!1,i()}),[i]),m=Object(c.useCallback)((()=>{Object(g.c)().markStartOfInteraction({
key:C.a.PRIORITY.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),r()}),[r]);return l.a.createElement(_n,fd({},e,{onEditRequest:d,onConfirm:p,onCancel:m,onChange:u,onDataRequest:yd,onDataLoaded:Od,renderReadView:Un(s)}))};jd.displayName="PriorityView";var vd=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:pd,transformToStateValue:md,additionalProps:(e,s)=>({fetchSuggestions:hd(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(gd.placeholder),noValueText:s.formatMessage(ds.noValue),portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,showPinButton:Object(I.a)(t.area)})})))(jd);const Ed=({issueKey:e,fieldKey:t,onSuccess:s,onFailure:n})=>{const[a]=Object(Ht.a)(e,t),i=Nc()(a,"schema.type","com.atlassian.jira.plugin.system.customfieldtypes:project"),[{value:r,error:o},{saveValue:c,resetError:l}]=Object(aa.a)({fieldKey:t,issueKey:e,fieldType:i,initialValue:null,onSuccess:s,onFailure:n});return[{value:r,error:o,fieldConfig:a},{saveValue:c,resetError:l}]
};var kd=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js"),wd=n("./node_modules/@atlaskit/select/dist/es2019/Select.js"),Sd=n("./src/packages/issue/base-components/base-select/src/ui/format-option-label/index.js");const Cd=e=>{const[t,s]=Object(c.useState)(!1),{value:n,options:a,onChange:i,onFocus:r,onBlur:o,placeholder:u="",autoFocus:d,isInvalid:p}=e,m=Object(c.useCallback)((e=>{s(!0),r&&r(e)}),[r]),b=Object(c.useCallback)((e=>{s(!1),o&&o(e)}),[o]);return l.a.createElement(wd.a,{value:n,options:a,placeholder:u,onChange:i,onFocus:m,onBlur:b,autoFocus:d,formatOptionLabel:Sd.a,isClearable:!0,hideSelectedOptions:!0,menuIsOpen:t,spacing:"compact",validationState:!0===p?"error":null})};Cd.displayName="ProjectEditView";const Id=e=>({label:e.name,value:e.key,iconUrl:e.avatarUrls["48x48"]}),Td=e=>e.map(Id),Pd=({label:e,value:t,iconUrl:s})=>({key:t,name:e,avatarUrls:{"48x48":s}});var _d=Object(u.h)({placeholder:{
id:"issue-field-project.placeholder",defaultMessage:"Select project"},errorTitle:{id:"issue-field-project.error-title",defaultMessage:"We couldn't set the project value"},errorMessage:{id:"issue-field-project.error-message",defaultMessage:"Check your connection, then give it another try."}})
;const xd=T.default.div([""," & > div > div > div > div > div > div > div{",";",";}& > div > div > div > div > div > div{",";}"," & > div > div > div > div{width:100%;}"," & > div > div > div > div > div{width:100%;}"],"",(e=>e.isEditing?"":"padding: 0;"),(e=>e.isEditing?"":`height: ${4*P.e}px;`),(e=>e.isEditing?"":"min-height: 0;"),"",""),Dd=T.default.span(["color:",";"],rt.a.N200),Ad=T.default.div(["padding:0px;width:100%;height:","px;display:flex;align-items:center;padding-left:","px;padding-right:","px;"," max-width:","px;"],4*P.e,P.e,P.e,"",25*P.e),Ld=T.default.div(["padding-left:","px;padding-right:","px;"],.75*P.e,.75*P.e),Md=T.default.div(["margin-right:","px;display:flex;"],P.e),Rd=T.default.div(["& > a{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:inline-block;max-width:100%;}display:inline-flex;min-width:0;margin-right:","px;"],P.e),Nd=({value:e,baseUrl:t,noValueText:s})=>{if(null==e)return l.a.createElement(Ld,null,l.a.createElement(Dd,null,s||""))
;const n=e=>{e.stopPropagation()};return l.a.createElement(Ad,null,Boolean(e.avatarUrls["48x48"])&&l.a.createElement(Md,null,l.a.createElement(Ze.a,{appearance:"square",size:"xsmall",src:e.avatarUrls["48x48"],borderColor:"transparent"})),l.a.createElement(Rd,null,l.a.createElement("a",{onClick:n,onKeyPress:n,href:`${t}/projects/${e.key}`},e.name)))};function Fd(){return(Fd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ud(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}Nd.displayName="ProjectReadView"
;const Vd=Object(kd.a)("ProjectPicker",{onChange:"changed"})(ca.a);var Kd=Object(c.memo)((e=>{const{fieldKey:t,issueKey:s,onCancel:n,onEdit:a,onEscape:i,onConfirm:r,onEnter:o,readView:u,editView:d,noValueText:p}=e,m=Ud(e,["fieldKey","issueKey","onCancel","onEdit","onEscape","onConfirm","onEnter","readView","editView","noValueText"]),[b,f]=Object(c.useState)(!1),{formatMessage:g}=Object(Ce.c)(),h=Object(Li.a)(),[{value:y,error:O,fieldConfig:j},{saveValue:v}]=Ed({issueKey:Object(ra.l)(s),fieldKey:t}),E=(null==j?void 0:j.allowedValues)||[],[k,w]=Object(c.useState)(y),S=!!j&&j.isEditable;Object(c.useEffect)((()=>{O&&f(!0),b||w(y)}),[O,b,y]);const C=Object(c.useCallback)(((e,t)=>{e!==y&&v(e,null,t),f(!1),Object(ft.h)(t)}),[v,y]),I=Object(c.useCallback)((e=>{f(!1),Object(ft.h)(e)}),[]),T=Object(c.useCallback)((e=>{I(e),n&&n(e)}),[I,n]),P=Object(c.useCallback)((e=>{f(!0),Object(ft.h)(e),a&&a(e)}),[a]),_=Object(c.useCallback)((e=>{I(e),i&&i(e)}),[i,I]),x=Object(c.useCallback)(((e,t,s)=>{
w(e?Pd(e):e),C(e?Pd(e):e,s)}),[C]);return l.a.createElement(xd,{isEditing:b},O&&l.a.createElement(oa.a,{error:O,title:_d.errorTitle,description:_d.errorMessage}),l.a.createElement(Vd,Fd({actionSubject:"projectInlineEdit",isEditable:S,isEditing:b,readView:(()=>void 0!==u?u:l.a.createElement(Nd,{value:y,baseUrl:h,noValueText:p}))(),editView:S?(()=>void 0!==d?d:l.a.createElement(Cd,{value:null===k?null:Id(k),autoFocus:!0,options:Td(E),onChange:x,placeholder:g(_d.placeholder),isInvalid:!!O,errorMessage:g(_d.errorMessage)}))():null,onConfirm:T,onEdit:P,onEscape:_,areActionButtonsHidden:!0},m)))}));const Wd=Object(T.default)(h.d)([""," & > div > div > div > div > div > div > div > div{padding:0;}"],""),Bd=({fieldId:e,area:t,label:s})=>{const{formatMessage:n}=Object(Ce.c)(),a=Object(Ke.g)(),i=Object(I.a)(t),[{fieldConfig:r}]=Ed({issueKey:a,fieldKey:e}),o=(null==r?void 0:r.title)||s
;return l.a.createElement(Wd,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===i&&l.a.createElement(y.a,{fieldId:e,label:o})),l.a.createElement(h.g,null,l.a.createElement(Kd,{issueKey:a,fieldKey:e,noValueText:n(ds.noValue)})))};Bd.displayName="View";var Hd=Object(c.memo)(Bd),$d=n("./node_modules/@atlaskit/select/dist/es2019/RadioSelect.js");class Gd extends c.Component{render(){const{invalidMessage:e,options:t,placeholder:s,onChange:n,value:a,portalElement:i}=this.props;return l.a.createElement(os.a,{validationState:null!=e?"error":null,validationMessage:e},l.a.createElement($d.a,{menuPortalTarget:i,options:t,placeholder:s,onChange:n,value:a,tabSelectsValue:!1,autoFocus:!0}))}}Gd.displayName="RadioFieldView",Gd.displayName="RadioFieldView",Gd.defaultProps={value:null,options:[],placeholder:null,invalidMessage:null};class qd extends c.Component{constructor(...e){super(...e),this.emptyOption={label:this.props.intl.formatMessage(ds.noValue)}}getOptions(){
const{options:e,value:t}=this.props;return t?[this.emptyOption,...e]:e}renderReadView(){const{value:e,noValueText:t}=this.props;return e?e.label:l.a.createElement(fe.b,null,t)}renderEditView(){return this.props.isEditable?l.a.createElement(Gd,{portalElement:this.props.portalElement,value:this.props.value,options:this.getOptions(),onChange:this.props.onChange,placeholder:this.props.placeholder,invalidMessage:this.props.invalidMessage}):null}render(){const{label:e,onCancel:t,isEditing:s,onConfirm:n,onEditRequest:a,isMobile:i,fieldId:r,showPinButton:o,intl:c}=this.props;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,e),!0===o&&l.a.createElement(y.a,{fieldId:r,label:e})),l.a.createElement(h.g,{isEditing:s},l.a.createElement(be.a,{onEscape:t},l.a.createElement(q.a,{isLabelHidden:!0,label:e,readView:this.renderReadView(),editView:this.renderEditView(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:s,onConfirm:n,onCancel:t,
onEditRequested:a,isFitContainerWidthReadView:!i,editButtonLabel:c.formatMessage($.a.editButtonLabel,{fieldName:e}),confirmButtonLabel:c.formatMessage($.a.confirmButtonLabel,{fieldName:e}),cancelButtonLabel:c.formatMessage($.a.cancelButtonLabel,{fieldName:e})}))))}}qd.displayName="RadioInlineEditView",qd.displayName="RadioInlineEditView",qd.defaultProps={isEditable:!1,isEditing:!1,isMobile:!1,options:[],value:null,label:"",placeholder:null,noValueText:null,invalidMessage:null};var zd=Object(u.i)(qd);const Yd=e=>({label:e.value,value:e.id}),Qd=e=>e?Yd(e):null,Jd=e=>e&&void 0!==e.value?{id:e.value,value:e.label}:null,Zd=Object(u.h)({placeholder:{id:"issue.radio-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),Xd=Re()((e=>(e=>e&&e.map(Yd)||[])(e)));var ep=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Qd,transformToStateValue:Jd,additionalProps:(e,s)=>({portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,
options:Xd(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(Zd.placeholder,{fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:s.formatMessage(ds.noValue),showPinButton:Object(I.a)(t.area)})})))(zd);const tp=({issueKey:e,fieldKey:t})=>{const[s]=Object(Ht.a)(e,t),[n]=Object(Bt.b)({fieldKey:t,issueKey:e});return[{value:n,fieldConfig:s},{}]},sp=T.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]),np=({value:e})=>l.a.createElement(sp,null,e||"\xa0");np.displayName="ReadOnlyFieldView";var ap=({fieldKey:e,readView:t})=>{const s=Object(Ke.g)(),[{value:n}]=tp({issueKey:s,fieldKey:e});return null!=t&&"function"==typeof t?Object(c.createElement)(t,{value:n}):l.a.createElement(np,{value:n})};const ip=Object(T.default)(h.d)(["align-items:center;"]),rp=({fieldId:e,label:t,area:s})=>{const n=Object(Ke.g)(),{formatMessage:a}=Object(Ce.c)(),[{fieldConfig:i}]=tp({issueKey:n,fieldKey:e
}),r=(null==i?void 0:i.title)||t,{noValue:o}=ds,u=Object(c.useCallback)((({value:e})=>null==e?l.a.createElement(fe.b,null,a(o)):l.a.createElement(np,{value:e})),[a,o]),d=Object(I.a)(s);return l.a.createElement(ip,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,r),!0===d&&l.a.createElement(y.a,{fieldId:e,label:r})),l.a.createElement(h.g,null,l.a.createElement(ap,{fieldKey:e,readView:u})))};rp.displayName="ReadOnlyView";var op=rp;const cp=Object(a.a)((e=>({avatarUrl:"",name:e,id:null}))),lp=Object(a.a)((e=>[cp(e)]));var up=Object(a.a)(((e,t,s)=>async n=>{if(!e)return[];return[...!s&&((e,t)=>!!e&&!!t&&t.toLowerCase().startsWith(e.toLowerCase()))(n,t)?[cp(t)]:[],...(await Object(Ve.a)(`${e}${n}`)).map(St)]}));const dp=Object(u.h)({noReporter:{id:"issue.reporter.text-when-no-value-is-provided",defaultMessage:"Anonymous"}});var pp=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:St,transformToStateValue:Ct,additionalProps:(e,s)=>{
const n=Object(v.E)(t.fieldId)(e),a=s.formatMessage(dp.noReporter);return{portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,fetchSuggestions:up(Object(v.d)(t.fieldId)(e),a,n),emptyOption:n?void 0:cp(a),initialOptions:n?void 0:lp(a),fieldId:"reporter",showPinButton:Object(I.a)(t.area)}}})))(bt),mp=n("./node_modules/lodash/range.js"),bp=n.n(mp),fp=n("./node_modules/@atlaskit/icon/glyph/star.js"),gp=n.n(fp),hp=n("./node_modules/@atlaskit/icon/glyph/star-filled.js"),yp=n.n(hp);const Op=Object(v.e)("com.atlassian.servicedesk:sd-request-feedback-date"),jp=Object(V.createSelector)(Op,(e=>e&&e.renderedValue));var vp=n("./src/packages/servicedesk/request-details-panel/src/services/index.js")
;const Ep=T.default.div(["max-width:220px;padding-right:","px;margin-right:-","px;margin-bottom:","px;max-height:240px;overflow:auto;",";"],P.e,2*P.e,P.e,Object(fe.f)("&")),kp=T.default.div(["height:20px;color:#6c798f;",";"],(e=>!e.hasComment&&Object(T.css)(["margin:-","px 0;padding:10px 0;"],2*P.e)));var wp=Object(Gt.a)([Object(d.connect)((e=>({feedbackDate:jp(e)})),{})])((({feedbackDate:e})=>{const[t]=Object(vp.a)();return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement(Ep,null,t),e&&l.a.createElement(kp,{hasComment:!!t},e))}));P.e;const Sp=T.default.div(["margin-top:","px;cursor:pointer;"],.5*P.e);class Cp extends c.Component{constructor(...e){super(...e),this.state={shouldShowDetails:!1},this.onToggle=()=>this.setState({shouldShowDetails:!this.state.shouldShowDetails}),this.renderStar=e=>{const t=bp()(5).map((t=>t<e?l.a.createElement(yp.a,{label:"",key:t,primaryColor:rt.a.Y300}):l.a.createElement(gp.a,{label:"",key:t,primaryColor:rt.a.N60})))
;return l.a.createElement(l.a.Fragment,null,t)}}render(){const{fieldName:e,rating:t,isVisible:s,fieldId:n,showPinButton:a}=this.props;return s&&l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,e),!0===a&&l.a.createElement(y.a,{fieldId:n,label:e})),l.a.createElement(h.g,null,l.a.createElement(zn.a,{onClose:this.onToggle,content:l.a.createElement(wp,null),isOpen:this.state.shouldShowDetails},l.a.createElement(Sp,{onClick:this.onToggle},this.renderStar(t)))))}}Cp.displayName="RequestFeedback",Cp.defaultProps={isVisible:!0};const Ip=(e,t)=>{const s=Object(v.o)(t)(e);return s&&s.rating};var Tp=Object(Gt.a)([Object(d.connect)(((e,t)=>({fieldId:t.fieldId,rating:Ip(e,t.fieldId),fieldName:Object(v.m)(t.fieldId)(e),isVisible:Object(Ou.e)(t.fieldId)(e),showPinButton:Object(I.a)(t.area)})),{})])(Cp);var Pp=Object(u.h)({placeholder:{id:"issue.request-language.placeholder",defaultMessage:"Select Request language"},languageUnknown:{
id:"issue.request-language.languageUnknown",defaultMessage:"Language unknown"}});const _p=e=>({content:e.displayName,value:e.languageCode}),xp=Object(a.a)((e=>({displayName:e.formatMessage(Pp.languageUnknown),languageCode:""}))),Dp=(e,t,s)=>_p(e||xp(s)),Ap=e=>({displayName:e.content,languageCode:e.value.toString()});function Lp(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Mp=Object(a.a)(((e,t)=>()=>Promise.resolve(((e,t)=>[{items:[xp(t),...e].map(_p)}])(e,t)))),Rp=({baseUrl:e,value:t},s)=>{const{languageCode:n}=t;return(async(e,t,s)=>{if(!t)throw new Error("Issue ID not available")
;return Object(x.e)(((e,t)=>`${e}/rest/servicedesk/lingo-integration/1/request-language/${t}`)(e,t),{body:JSON.stringify({languageCode:s})})})(e,Object(N.w)(s),n)},Np=e=>e&&e.languageCode;var Fp=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Dp,transformToStateValue:Ap,saveField:Rp,additionalProps:(e,s)=>({fetchSuggestions:Mp(Object(v.c)(t.fieldId)(e),s),shouldHide:!Object(Ou.f)(t.fieldId)(e),hasAutocomplete:!0,placeholder:s.formatMessage(Pp.placeholder),analyticsAttributeIdRetriever:Np,showPinButton:Object(I.a)(t.area)})})))((e=>{const{shouldHide:t}=e,s=Lp(e,["shouldHide"]);return t?null:l.a.createElement(_n,s)})),Up=Object(u.h)({placeholder:{id:"issue.request-participants.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select the Request Participants"}});const Vp="24x24",Kp=e=>e?e.map((e=>({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrls["24x24"],elemBefore:l.a.createElement(Ze.a,{size:"xsmall",src:e.avatarUrls["24x24"]})
}))):[],Wp=e=>e&&e.map((e=>({displayName:e.content,id:Object(ra.a)(e.value),accountId:Object(ra.a)(e.value),avatarUrls:{[Vp]:e.avatarUrl}}))),Bp=e=>[{items:(e&&e.users||[]).map((e=>({content:e.displayName,value:e.accountId,avatarUrl:e.avatarUrl})))}],Hp=Object(a.a)((e=>t=>e?Object(Ve.a)(`${e}${t}`).then(Bp):Promise.resolve([]))),$p=e=>e&&Array.isArray(e)?e.map((e=>e.accountId)).join(","):e,Gp=e=>l.a.createElement(Qs,null,e.avatarUrl&&l.a.createElement(Ze.a,{size:"small",src:e.avatarUrl}),l.a.createElement(Js,null,e.content));Gp.displayName="formatOptionLabel";var qp=Object(H.a)(((e,t)=>{const s=Object(v.d)(t.fieldId);return{fieldId:t.fieldId,transformFromStateValue:Kp,transformToStateValue:Wp,additionalProps:(e,n)=>({fetchSuggestions:Hp(s(e)),placeholder:n.formatMessage(Up.placeholder),noValueText:n.formatMessage(ds.noValue),tagAppearance:"rounded",analyticsAttributeIdRetriever:$p,showPinButton:Object(I.a)(t.area),formatOptionLabel:Gp})}
}))(on),zp=n("./src/packages/platform/ui/error-boundary/src/main.js"),Yp=n("./src/packages/issue/issue-glance/src/main.js");function Qp(){return(Qp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Jp=e=>l.a.createElement(Yp.a,Qp({},e,{title:"Responders",onClickPayload:{},content:"Responders Glance"}));Jp.displayName="RespondersGlance";var Zp=Jp;const Xp=({isVisible:e=!0,onOpenPanel:t,itemId:s,showPinButton:n})=>l.a.createElement(zp.a,null,e&&l.a.createElement(Zp,{onOpenPanel:t,itemId:s,showPinButton:n}));Xp.displayName="RespondersGlanceContainer";var em=Object(d.connect)(((e,t)=>({itemId:t.itemId,isVisible:Object(Is.f)(e),showPinButton:Object(I.a)(t.area)})),{})(Xp);const tm=()=>{const e=Object(Ke.g)(),[t]=Object(Ht.c)(e),[s,n,a]=Object(c.useMemo)((()=>{if(null!=t){
const e=Object.keys(t).find((e=>"com.atlassian.jira.modules.servicemanagement.responders-entity:responders-entity-field-cftype"===t[e].schema.custom));if(null!=e){const s=t[e],{autoCompleteUrl:n,schema:{type:a}}=s;return[e,n||"",a]}}return["","","array"]}),[t]);return{respondersFieldIdKey:s,searchUrl:n,fieldType:a}},sm=()=>{const e=Object(Ke.g)(),{respondersFieldIdKey:t,fieldType:s}=tm(),[{value:n},{addValues:a,removeValues:i}]=Object(aa.a)({issueKey:e,fieldKey:t,fieldType:s,initialValue:null});return[n,{addResponders:a,removeResponders:i}]};var nm=n("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),am=n("./node_modules/@atlaskit/icon/glyph/editor/add.js"),im=n.n(am),rm=n("./node_modules/@atlaskit/user-picker/dist/es2019/components/UserPicker.js");var om=Object(u.h)({addResponders:{id:"responders.responders-glance-panel.add-responders.responder-picker.add-responders",defaultMessage:"Add people and teams"}}),cm=n("./node_modules/@atlaskit/theme/dist/es2019/constants.js")
;const lm=T.default.div(["display:flex;justify-content:flex-start;padding:","px;align-items:center;cursor:pointer;"],2*Object(cm.gridSize)());function um(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?um(Object(s),!0).forEach((function(t){pm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):um(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const mm=({onResponderSelected:e,onBlur:t})=>{const s=Object(c.useRef)({previousQuery:void 0
}).current,[n,a]=Object(c.useState)(!1),{formatMessage:i}=Object(Ce.c)(),[{data:r,loading:o},u,d]=(()=>{const[e,t]=Object(c.useState)([]),[s,n]=Object(c.useState)(void 0),[a,i]=Object(c.useState)(!1),{searchUrl:r}=tm(),[o]=sm(),l=Object(c.useRef)("");return[{data:e,error:s,loading:a},Object(c.useCallback)(((e="")=>{const s=`${r}?query=${e}`;return i(!0),l.current=e,n(void 0),Object(Ve.a)(s).then((({responders:s})=>{if(e===l.current)if(null!=o){let e=[];e=s.filter((e=>!o.find((t=>t.ari===e.ari)))),t(e)}else t(s)})).catch((t=>{e===l.current&&n(t)})).finally((()=>i(!1)))}),[o,r]),()=>t([])]})(),p=r.map((e=>dm(dm({},e),{},{id:e.ari}))),m=Object(c.useMemo)((()=>xl()((e=>{e!==s.previousQuery&&u(e),s.previousQuery=e}),300)),[u,s.previousQuery]);return l.a.createElement(l.a.Fragment,null,!n&&l.a.createElement(lm,{onClick:()=>a(!0)},l.a.createElement(im.a,{label:i(om.addResponders),primaryColor:"#0052CC"}),l.a.createElement(nm.a,{appearance:"link",spacing:"none"
},i(om.addResponders))),n&&l.a.createElement(rm.a,{fieldId:"jsm-responders",options:p,onChange:e,onInputChange:m,isMulti:!0,isLoading:o,onBlur:()=>{a(!1),d(),t()},autoFocus:!0}))},bm=({responders:e,onAddResponders:t})=>{const[s,n]=Object(c.useState)(null),{createAnalyticsEvent:a}=Object(Uo.a)();return l.a.createElement(mm,{onResponderSelected:e=>{null!=e&&Array.isArray(e)?n(e):null==e&&n(null)},onBlur:()=>{if(null!=s&&null!=t){const i=s.map((e=>({ari:e.ari,name:e.name,type:e.type,avatarUrl:e.avatarUrl}))),r=[...null!=e?e:[],...i];t(i,r,null,a({})),n(null)}}})};bm.displayName="AddResponders"
;var fm=n("./node_modules/lodash/partition.js"),gm=n.n(fm),hm=n("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),ym=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),Om=n("./node_modules/react-sweet-state/lib/esm/components/hook.js"),jm=n("./node_modules/lodash/reduce.js"),vm=n.n(jm),Em=n("./src/packages/servicedesk/incident-management/common/src/utils.js");const km={fetchResponderAlerts:(t,s,n,a)=>async({getState:i,setState:r})=>{const{isLoading:o}=i();if(!o&&t){r({data:void 0,error:void 0,isLoading:!0});try{const e=await Object(Ve.a)(`${Object(Em.a)(n,s)}/issue/${t}/incident/responder-alerts`);r({isLoading:!1,data:e&&e.data}),a&&Object(ft.b)(a,"fetchResponderAlerts succeeded")}catch(e){Object(Ll.b)({event:a,error:e,id:"fetchResponderAlerts",sendToPrivacyUnsafeSplunk:!0}),r({isLoading:!1,error:{value:e.message,type:"FETCH_RESPONDER_ALERTS_ERROR"}})}}},acknowledgeResponderAlert:(t,s,n,a)=>async({getState:i,setState:r})=>{
if(!Jt()(t))try{await Object(Ve.a)(`${Object(Em.a)(n,s)}/alerts/${t}/acknowledge`,{method:"POST"});const{data:e}=i();if(Jt()(e))return;r({data:vm()(e,((e,s)=>{const n=s;return s.id===t&&(n.ackedBy={userId:"optimisticUpdate",atlassianAccountId:"optimisticUpdate",displayName:null,avatarUrl:null}),null==e||e.push(s),e}),[])}),a&&Object(ft.b)(a,"acknowledgeResponderAlert succeeded")}catch(e){Object(Ll.b)({event:a,error:e,id:"acknowledgeResponderAlert",sendToPrivacyUnsafeSplunk:!0}),r({error:{value:e.message,type:"ACKNOWLEDGE_RESPONDER_ALERT_ERROR"}})}}},wm={data:void 0,error:void 0,isLoading:!1},Sm=Object(ym.a)({name:"responderAlerts",initialState:wm,actions:km}),Cm=Object(Om.a)(Sm)
;var Im=n("./node_modules/lodash/throttle.js"),Tm=n.n(Im),Pm=n("./node_modules/@atlaskit/avatar/dist/es2019/AvatarItem.js"),_m=n("./node_modules/@atlaskit/button--next/dist/es2019/button-group.js"),xm=n("./node_modules/@atlaskit/icon/glyph/check.js"),Dm=n.n(xm),Am=n("./node_modules/@atlaskit/icon/glyph/check-circle.js"),Lm=n.n(Am),Mm=n("./node_modules/@atlaskit/icon/glyph/cross-circle.js"),Rm=n.n(Mm),Nm=n("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),Fm=Object(u.h)({assignee:{id:"responders.responders-glance-panel.responder-list.responder-item.assignee",defaultMessage:"Assignee"},acknowledge:{id:"responders.responders-glance-panel.responder-list.responder-item.acknowledge",defaultMessage:"Acknowledge"},acknowledged:{id:"responders.responders-glance-panel.responder-list.responder-item.acknowledged",defaultMessage:"Acknowledged"},acknowledgeResponderAlert:{id:"responders.responders-glance-panel.responder-list.responder-item.acknowledge-responder-alert",
defaultMessage:"Acknowledge responder alert"},viewResponderAlert:{id:"responders.responders-glance-panel.responder-list.responder-item.view-responder-alert",defaultMessage:"View responder alert"},removeResponder:{id:"responders.responders-glance-panel.responder-list.responder-item.remove-responder",defaultMessage:"Remove responder"}});const Um=T.default.div(["display:flex;position:relative;background-color:",";margin:0 ","px;"],(({hovered:e})=>e?rt.a.N20:void 0),P.e),Vm=(cm.fontSizeSmall,rt.a.N200,
T.default.div(["padding-right:","px;"],(e=>null!==e.isAlertAcknowledged&&void 0!==e.isAlertAcknowledged?P.e:0))),Km=T.default.div(["position:absolute;left:","px;top:","px;"],3*P.e,(e=>3*P.e+(e.isAssignee?7:0))),Wm=T.default.div(["display:flex;align-items:center;justify-content:center;position:relative;border-radius:50%;height:","px;width:","px;background-color:",";"],2*P.e,2*P.e,rt.a.N0),Bm=T.default.div(["border-radius:50%;border:","px dashed ",";height:","px;width:","px;background-color:",";"],1,rt.a.N200,1.5*P.e-1,1.5*P.e-1,rt.a.N0),Hm=T.default.div(["display:",";align-items:center;justify-content:center;position:absolute;top:50%;right:","px;transform:translate(0,-50%);background-color:",";"],(({hovered:e})=>e?"flex":"none"),P.e,rt.a.N20),$m=e=>{const{formatMessage:t}=Object(Ce.c)(),{name:s,avatarUrl:n,isAssignee:a,ari:i,onRemoveResponder:r,responderAlert:o,onAcknowledgeAlert:u}=e,[d,p]=Object(c.useState)(!1),[m,b]=Object(c.useState)(!1),f=Tm()(b,50),g=Object(c.useCallback)((()=>{
p(!0)}),[]),h=Object(c.useCallback)((()=>{p(!1)}),[]),y=!Jt()(o),O=!Jt()(null==o?void 0:o.ackedBy),j=!(null==o||!o.canUserAck||O),v=Object(c.useCallback)(((e,t)=>{r(i,t),Object(ft.h)(t,"removeResponder")}),[i,r]),E=Object(c.useCallback)(((e,t)=>{o&&u(o,t),Object(ft.h)(t,"acknowledgeAlert")}),[o,u]);return l.a.createElement(Um,{hovered:d,onMouseEnter:g,onMouseLeave:h},l.a.createElement(Nm.a,{setWidth:e=>{f(e>360)}}),l.a.createElement(Pm.a,{avatar:l.a.createElement(Vm,{isAlertAcknowledged:O},l.a.createElement(Ze.a,{appearance:"circle",src:n,size:"small"})),primaryText:s,secondaryText:a?t(Fm.assignee):void 0}),y&&l.a.createElement(Km,null,l.a.createElement(Wm,{isAssignee:a},O?l.a.createElement(Lm.a,{label:t(Fm.acknowledged),primaryColor:"green",size:"small"}):l.a.createElement(Bm,null))),l.a.createElement(Hm,{hovered:d},l.a.createElement(_m.a,null,j&&l.a.createElement(es.a,{content:t(Fm.acknowledgeResponderAlert)},l.a.createElement(nm.a,{spacing:"compact",
iconBefore:l.a.createElement(Dm.a,{label:t(Fm.acknowledgeResponderAlert),size:"small"}),onClick:E},m&&t(Fm.acknowledge))),l.a.createElement(es.a,{content:t(Fm.viewResponderAlert)},l.a.createElement(nm.a,{spacing:"compact",iconBefore:l.a.createElement(Wa.a,{label:t(Fm.viewResponderAlert)})})),l.a.createElement(es.a,{content:t(Fm.removeResponder)},l.a.createElement(nm.a,{spacing:"compact",appearance:"subtle",iconBefore:l.a.createElement(Rm.a,{label:t(Fm.removeResponder)}),onClick:v})))))};$m.displayName="ResponderItem";var Gm=({responders:e,currentAssignee:t,onRemoveResponders:s})=>{const[{responderAlerts:n},{fetchResponderAlerts:a,acknowledgeResponderAlert:i}]=(()=>{const e=Object(Ke.f)(),[t,{fetchResponderAlerts:s,acknowledgeResponderAlert:n}]=Cm();return[{responderAlerts:t},{fetchResponderAlerts:Object(c.useCallback)(((t,n,a)=>s(e,t,n,a)),[s,e]),acknowledgeResponderAlert:Object(c.useCallback)(((e,t,s,a)=>n(e,t,s,a)),[n])}]
})(),{createAnalyticsEvent:r}=Object(Uo.a)(),{cloudId:o,baseUrl:u}=Object(hm.c)();Object(c.useEffect)((()=>{if(n.data)return;const e=r({});a(o,u,e)}),[u,o,r,a,n.data]);const d=Object(c.useCallback)(((t,n)=>{const[a,i]=gm()(e,(e=>e.ari===t));s(a,i,null,n)}),[e,s]),p=Object(c.useCallback)(((e,t)=>{i(e.id,o,u,t)}),[i,u,o]);return e.map((e=>{const s=!!t&&null!==t.accountId&&e.ari===`ari:cloud:identity::user/${t.accountId}`,a=((e,t,s)=>null==e?void 0:e.find((e=>{const{ownerId:n,ownerTeamId:a}=e;return null!==n&&t===`ari:cloud:identity::user/${n}`||t===`ari:cloud:opsgenie:${s}:team/${a}`})))(n.data,e.ari,o);return l.a.createElement($m,{key:e.ari,ari:e.ari,name:e.name,avatarUrl:e.avatarUrl,responderAlert:a,isAssignee:s,onRemoveResponder:d,onAcknowledgeAlert:p})}))};var qm=({isPanelOpen:e,responders:t,currentAssignee:s,onAddResponders:n,onRemoveResponders:a})=>e&&l.a.createElement(l.a.Fragment,null,null!=t&&l.a.createElement(Gm,{responders:t,currentAssignee:s,onRemoveResponders:a
}),l.a.createElement(bm,{responders:t,onAddResponders:n})),zm=()=>{const e=Object(Ke.g)(),[t]=Object(qa.b)(e),[{value:s}]=Object(We.a)({issueKey:e}),[n,{addResponders:a,removeResponders:i}]=sm();return l.a.createElement(zp.a,null,l.a.createElement(qm,{responders:n,isPanelOpen:void 0!==t,currentAssignee:s,onAddResponders:a,onRemoveResponders:i}))};const Ym=Object(ys.asyncComponent)({resolve:()=>n.e("async-services-entity-inline-edit-view").then(n.bind(null,"./src/packages/issue/fields/service-entity/src/ui/main.js")).then((e=>e.ServiceEntityMain)),name:"AsyncServiceEntityField"}),Qm=({children:e,packageName:t})=>l.a.createElement(Os.a,{id:"issue-service-entity-field",packageName:t,fallback:"flag"},e);Qm.displayName="IssueServiceEntityFieldBoundary";var Jm=n("./src/packages/servicedesk/insight-common/insight-shared-ui/src/common/types/index.js");const Zm=e=>{const{fieldId:t,area:s,onChange:n,onConfirm:a}=e,i=Object(Ke.i)();return l.a.createElement(Qm,{
packageName:"issue-service-entity-field"},l.a.createElement(Ym,{area:s,fieldId:Object(Jm.a)(t),projectKey:i,onChange:n,onConfirm:a}))};Zm.displayName="ServiceEntity";const Xm=Object(H.a)(((e,t)=>({area:t.area,fieldId:t.fieldId})))(Zm);var eb=Zm,tb=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(ds.noValue),type:"text",showPinButton:Object(I.a)(t.area)})})))(Rr);const sb=e=>({value:e.id,content:e.value,iconUrl:e.iconUrl}),nb=e=>e&&sb(e),ab=e=>e&&{id:e.value,value:e.content,iconUrl:e.iconUrl},ib=e=>e&&[{items:e.map(sb)}]||[],rb=Object(u.h)({placeholder:{id:"issue.single-select.text-for-dropdown-when-nothing-selected",defaultMessage:"Select {fieldName}"}}),ob=Re()((e=>()=>Promise.resolve(e).then(ib)));var cb=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:nb,transformToStateValue:ab,additionalProps:(e,s)=>({fetchSuggestions:ob(Object(v.c)(t.fieldId)(e)),placeholder:s.formatMessage(rb.placeholder,{
fieldName:Object(v.m)(t.fieldId)(e)}),noValueText:s.formatMessage(ds.noValue),allowEmptyValue:!0,hasAutocomplete:!0,portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,showPinButton:Object(I.a)(t.area)})})))(_n),lb=n("./src/packages/cache/src/services/sprints/index.js"),ub=n("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js");const db=e=>Object(V.createSelector)(Is.h,K.n,Object(v.C)(e),((e,t,s)=>e.canScheduleIssues&&t&&s)),pb=(e,t)=>`${e}/secure/GHGoToBoard.jspa?sprintId=${t}`;var mb=n("./src/packages/issue/issue-view/src/common/service/issue/issue-view-mode.js");const bb=({option:e})=>l.a.createElement(sc.e,null,null!=e.elemBefore?e.elemBefore:null,l.a.createElement(Xo,null,l.a.createElement(ec,null,e.label),null!=e.description?l.a.createElement(tc,null,e.description):null));bb.displayName="RichOptionView"
;const fb=T.default.div(["margin-left:","px;"],P.e),gb=T.default.span(["padding:","px;"],P.e/2),hb=T.default.div(["margin-top:","px;display:flex;justify-content:space-between;max-width:300px;"],P.e),yb=T.default.span(["font-weight:500;"]),Ob=`\n    margin-right: ${3*P.e}px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n`,jb=T.default.a(["",";"],Ob),vb=T.default.span(["",";"],Ob),Eb=T.default.div(["white-space:nowrap;"]);class kb extends c.Component{constructor(...e){super(...e),this.state={isDialogOpen:!1},this.handleButtonClick=e=>{this.setState({isDialogOpen:!this.state.isDialogOpen}),e.stopPropagation()},this.handleDialogClose=e=>{this.setState({isDialogOpen:e.isOpen})},this.handleDialogClick=e=>{e.stopPropagation()},this.handleDialogMouseDown=e=>{e.preventDefault(),e.stopPropagation()},
this.renderInlineDialogContent=()=>l.a.createElement("div",null,l.a.createElement(yb,null,this.props.closedSprintsLabel),this.props.closedSprints.map((e=>l.a.createElement(hb,{key:e.name},this.props.shouldHideLinks?l.a.createElement(vb,null,e.name):l.a.createElement(jb,{href:e.href},e.name),l.a.createElement(Eb,null,e.endDate)))))}render(){return l.a.createElement(fb,{onClick:this.handleDialogClick,onMouseDown:this.handleDialogMouseDown},l.a.createElement(zn.a,{content:this.renderInlineDialogContent(),isOpen:this.state.isDialogOpen,onClose:this.handleDialogClose,placement:"bottom"},l.a.createElement(nm.a,{onClick:this.handleButtonClick,spacing:"none",isSelected:this.state.isDialogOpen},l.a.createElement(gb,null,`+${this.props.closedSprints.length}`))))}}kb.displayName="ClosedSprintsView",kb.defaultProps={shouldHideLinks:!1,closedSprints:[],closedSprintsLabel:null}
;const wb=T.default.div(["display:flex;align-items:center;width:100%;"]),Sb=T.default.div(["white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"]);function Cb(){return(Cb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Ib(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}class Tb extends c.Component{constructor(...e){super(...e),this.state={data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.getDataFromCache=()=>{var e,t
;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t,this.props.intl).then((e=>{this.setState({data:e,loading:!1})}))},this.onSprintClick=e=>{const{rapidViewId:t,value:s,onSprintClicked:n}=this.props;void 0!==t&&s&&n(s.value),e.stopPropagation()},this.onEditRequest=()=>{Object(g.c)().cancel({key:C.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT},!0),Object(g.c)().markStartOfInteraction({key:C.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0}),this.props.onEditRequest()},this.onChange=(e,t)=>{t&&("select-option"===t.action?Object(g.c)().markStartOfInteraction({key:C.a.SPRINT.TIME_TO_REFLECT_SELECTED_SPRINT}):"clear"===t.action&&Object(g.c)().markStartOfInteraction({key:C.a.SPRINT.TIME_TO_REFLECT_REMOVED_SPRINT})),this.props.onChange(e)},this.onConfirm=()=>{Object(g.c)().markStartOfInteraction({key:C.a.SPRINT.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),this.props.onConfirm()},this.onCancel=()=>{Object(g.c)().markStartOfInteraction({
key:C.a.SPRINT.TIME_TO_RENDER_READ_VIEW,cancelExisting:!0}),this.props.onCancel()},this.onDataRequest=({isInitial:e})=>{e||Object(g.c)().markStartOfInteraction({key:C.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e}={})=>{e?Object(g.c)().markTimeToFinishTask({key:C.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS}):Object(g.c)().markTimeToFinishTask({key:C.a.SPRINT.TIME_TO_REFLECT_INPUT_RESULT})},this.renderSprintContent=()=>{const{baseUrl:e,rapidViewId:t,value:s}=this.props;return Object(mb.a)()&&"number"==typeof t&&t>0?s&&s.content:l.a.createElement("a",{href:null==t&&s?pb(e,s.value):void 0,onClick:this.onSprintClick},s&&s.content)},this.renderReadView=()=>{const{value:e,noValueText:t,closedSprints:s,closedSprintsLabel:n,isMobile:a}=this.props;return l.a.createElement(wb,null,l.a.createElement(Sb,null,e?this.renderSprintContent():l.a.createElement(fe.b,null,t)),s.length>0&&l.a.createElement(kb,{closedSprints:s,closedSprintsLabel:n,
shouldHideLinks:a}))},this.formatOptionLabel=(e,{context:t})=>"menu"===t?l.a.createElement(bb,{option:e}):e.label,this.fetchSuggestions=(e,t)=>this.props.fetchSuggestions(e,t).then((e=>(this.setState({data:e}),e)))}componentDidUpdate(e){const{isEditing:t,value:s}=this.props;!e.isEditing&&t&&Object(g.c)().markTimeToFeedback({key:C.a.SPRINT.TIME_TO_RENDER_INITIAL_SUGGESTIONS}),e.isEditing&&!t&&(e.value!==s?s?Object(g.c)().markTimeToFinishTask({key:C.a.SPRINT.TIME_TO_REFLECT_SELECTED_SPRINT}):Object(g.c)().markTimeToFinishTask({key:C.a.SPRINT.TIME_TO_REFLECT_REMOVED_SPRINT}):Object(g.c)().markTimeToFinishTask({key:C.a.SPRINT.TIME_TO_RENDER_READ_VIEW}))}render(){const e=this.props,{baseUrl:t,closedSprints:s,closedSprintsLabel:n,rapidViewId:a,onSprintClicked:i,intl:r,getDataFromCache:o}=e,c=Ib(e,["baseUrl","closedSprints","closedSprintsLabel","rapidViewId","onSprintClicked","intl","getDataFromCache"]),{data:u,loading:d,error:p}=this.state,m={data:u,loading:d,error:p}
;return l.a.createElement(_n,Cb({},c,{fetchSuggestions:this.fetchSuggestions,debounceFetchSuggestionsTime:300,initialData:m,onEditRequest:this.onEditRequest,onChange:this.onChange,onConfirm:this.onConfirm,onCancel:this.onCancel,onDataRequest:this.onDataRequest,onDataLoaded:this.onDataLoaded,renderReadView:this.renderReadView,formatOptionLabel:this.formatOptionLabel,hasAutocomplete:!0,optionValuesSafeForAnalytics:!0}))}}Tb.displayName="SprintInlineEditView",Tb.displayName="SprintInlineEditView",Tb.defaultProps={closedSprints:[],closedSprintsLabel:null};const Pb=e=>{let{rapidViewId:t}=e,s=Ib(e,["rapidViewId"]);const n=Object(Ke.j)();return l.a.createElement(Tb,Cb({},s,{rapidViewId:n}))};Pb.displayName="SprintInlineEditViewWithHooks",Pb.defaultProps={closedSprints:[],closedSprintsLabel:null};var _b=Pb,xb=Object(u.h)({placeholder:{id:"issue.sprint.text-for-edit-view-when-no-value-is-provided",defaultMessage:"Select Sprint"},activeSprints:{id:"issue.sprint.active-heading",
defaultMessage:"Active"},recentSprints:{id:"issue.sprint.recent-heading",defaultMessage:"Recent sprints"},futureSprints:{id:"issue.sprint.future-heading",defaultMessage:"Future"},closedSprintsLabel:{id:"issue.sprint.text-for-closed-sprints-inline-dialog",defaultMessage:"{count} completed {count, plural, one {sprint} other {sprints}}"}});const Db=e=>(e?e.find((e=>e.state&&"active"===e.state.toLowerCase())):null)||null;function Ab(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Lb(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ab(Object(s),!0).forEach((function(t){Mb(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ab(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e
}function Mb(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Rb=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),Nb=e=>{const t=Db(e),s=(e=>(e?e.find((e=>e.state&&"future"===e.state.toLowerCase())):null)||null)(e);return t&&Rb(t)||s&&Rb(s)},Fb=e=>t=>{if(!t)return e;const s={name:t.content,id:t.value,state:"active",fromCache:t.fromCache||!1};return e.concat(s)},Ub=e=>({content:e.name,value:e.id,description:e.boardName,id:e.id,fromCache:e.fromCache||!1}),Vb=(e,t=[],s)=>{const n=e.suggestions||[],a=e.allMatches||[],i=n.concat(a),r=i.filter((e=>"ACTIVE"===e.stateKey)).map(Ub),o=i.filter((e=>"FUTURE"===e.stateKey)).map(Ub),c=(e=>e.slice(-5).reverse())(((e,t)=>t.map((t=>{const s=e.find((e=>e.id===t.id));return s?(lb.a.update(`${t.id}`,s),Lb(Lb({},s),{},{fromCache:!0})):Lb(Lb({},t),{},{fromCache:!0})})))(i,t)).map(Ub);return[{heading:s.formatMessage(xb.recentSprints),items:c},{
heading:s.formatMessage(xb.activeSprints),items:r},{heading:s.formatMessage(xb.futureSprints),items:o}]},Kb=Object(a.a)(((e,t,s)=>({id:s.id,name:s.name,href:pb(t,s.id),endDate:e.formatDate(s.endDate,{day:"2-digit",month:"short",year:"numeric"})}))),Wb=(e,t)=>{const s=e.length;return s>0?t.formatMessage(xb.closedSprintsLabel,{count:s}):null},Bb=Object(a.a)(((e,t)=>(s,n)=>{let a=`${t}/rest/greenhopper/1.0/sprint/picker?query=${s}&maxResults=10&maxActiveSprints=5`;if(Object(o.isSmartSprintRankingEnabled)()){a=`url&sessionId=${""!==n&&null!=n?n:"default-session-id"}&shouldRank=true`}const i=Object(Ve.a)(a);return Promise.all([i,lb.a.getAll()]).then((([t,s])=>Vb(t,s,e)))})),Hb=Object(a.a)(((e,t,s)=>((e,t,s)=>e.map((e=>Kb(s,t,e))))(e,t,s))),$b=e=>lb.a.getAll().then((t=>Vb({},t,e)));var Gb=Object(H.a)(((t,s)=>{const n=(e=>Object(V.createSelector)(Object(v.q)(e),(e=>e&&e.value?e.value.filter((e=>"closed"===e.state||"CLOSED"===e.state)):[])))(s.fieldId)(t);return{fieldId:s.fieldId,
transformFromStateValue:Nb,transformToStateValue:Fb(n),additionalProps:(e,t)=>({fetchSuggestions:Bb(t,Object(N.f)(e)),closedSprints:Hb(n,Object(N.f)(e),t),closedSprintsLabel:Wb(n,t),placeholder:t.formatMessage(xb.placeholder),noValueText:t.formatMessage(ds.noValue),allowEmptyValue:!0,baseUrl:Object(N.f)(e),isEditable:db(s.fieldId)(e),showPinButton:Object(I.a)(s.area),getDataFromCache:$b}),additionalCallbacks:e=>({onSprintClicked:t=>e(Object(ub.e)(t))}),saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a},i,r)=>{const o=Db(a);return a.forEach((e=>{try{r.createAnalyticsEvent&&Object(ft.b)(r.createAnalyticsEvent({}),"sprintPickerCache set",{isFromCache:e.fromCache}),e.id&&lb.a.set(`${e.id}`,e)}catch(t){Cs.a.safeErrorWithoutCustomerData("issue-view.sprints.cache.set",t.message)}})),Object(x.e)(Object(Do.e)(t,s),{body:JSON.stringify({fields:{[n]:o?o.id:null}})}).catch((t=>{throw a.forEach((t=>{try{
r.createAnalyticsEvent&&Object(ft.b)(r.createAnalyticsEvent({}),"sprintPickerCache removed"),t.id&&lb.a.remove(`${t.id}`)}catch(e){Cs.a.safeErrorWithoutCustomerData("issue-view.sprints.cache.remove",e.message)}})),t}))})(...t,s)}}))(_b),qb=Object(u.h)({errorTitle:{id:"issue-field-classic-story-point.error-title",defaultMessage:"We couldn't set the story point value"},errorMessage:{id:"issue-field-classic-story-point.error-message",defaultMessage:"Check your connection, then give it another try."},negativeNumbersNotAllowed:{id:"issue-field-classic-story-point.negative-numbers-not-allowed",defaultMessage:"Time for some positivity. Story point estimates can't be negative."}});const zb=({issueKey:e,issueId:t,fieldKey:s,onSuccess:n})=>{const[a]=Object(Ht.a)(e,s),i=Nc()(a,"schema.type","number"),[{value:r,error:o},{saveValue:c,resetError:l}]=Object(aa.a)({fieldKey:s,issueKey:e,fieldType:i,initialValue:null,
saveField:(e,n,a,i)=>(async(e,t,s,n)=>null!==s&&s<0?Promise.reject(new Error(qb.negativeNumbersNotAllowed.id)):Object(x.d)(`${n}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(au.stringify)({[t]:s,issueId:e,skipScreenCheck:!0,atl_token:Object($l.a)(),singleFieldEdit:!0})}))(Object(ra.l)(t.toString()),s,a,i),onSuccess:n});return[{value:r,error:o,fieldConfig:a},{saveValue:c,resetError:l}]},Yb=T.default.div(["width:","px;cursor:auto;"],8.5*P.e);function Qb(){return(Qb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Jb(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e)
;for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Zb=Object(c.memo)((e=>{const{isInvalid:t=!1,type:s,defaultValue:n}=e,a=Jb(e,["isInvalid","type","defaultValue"]),i=null===n?"":n;return l.a.createElement(Yb,null,l.a.createElement(Dr.a,Qb({appearance:"subtle",autoFocus:!0,compact:!0,isLabelHidden:!0,isInvalid:t,shouldFitContainer:!0,type:s,value:i},a)))}));const Xb=T.default.div(["cursor:pointer;&:hover > span{color:",";background-color:",";}"],rt.a.N800,rt.a.N90);var ef=({isEditable:e,noValueText:t,value:s})=>{const n={min:-1*Number.MAX_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER};if(null===s)return l.a.createElement(fe.b,null,t);const a=l.a.createElement(Fa.a,n,s);return e?l.a.createElement(Xb,null,a):a};function tf(){return(tf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
function sf(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var nf=Object(c.memo)((e=>{const{fieldKey:t,issueKey:s,issueId:n,onCancel:a,onEdit:i,onEscape:r,onConfirm:o,onEnter:u,onUpdate:d,readView:p,editView:m,noValueText:b,label:f}=e,g=sf(e,["fieldKey","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText","label"]),[{value:h,error:y,fieldConfig:O},{saveValue:j,resetError:v}]=zb({issueKey:Object(ra.l)(s),issueId:n&&Object(ra.j)(n),fieldKey:t,onSuccess:d}),E=Nc()(O,"schema.type","number"),[k,w]=Object(c.useState)(!1),[S,C]=Object(c.useState)(h),I=!!O&&O.isEditable,{formatMessage:T}=Object(Ce.c)()
;Object(c.useEffect)((()=>{y&&w(!0)}),[y]);const P=Object(c.useCallback)((e=>{S!==h&&j(S,null,e),w(!1),Object(ft.h)(e)}),[j,S,h]),_=Object(c.useCallback)((e=>{v(),w(!1),C(h),Object(ft.h)(e)}),[v,h]),x=Object(c.useCallback)((e=>{_(e),a&&a(e)}),[a,_]),D=Object(c.useCallback)((e=>{P(e),o&&o(e)}),[o,P]),A=Object(c.useCallback)((e=>{w(!0),Object(ft.h)(e),i&&i(e)}),[i]),L=Object(c.useCallback)((e=>{_(e),r&&r(e)}),[r,_]),M=Object(c.useCallback)((e=>{P(e),u&&u(e)}),[u,P]),R=Object(c.useCallback)((e=>{v();const t=""===e.target.value?null:Number(e.target.value);C(t)}),[v,C]);return l.a.createElement(l.a.Fragment,null,y&&(()=>{if(!y)return null;const e=y.message===qb.negativeNumbersNotAllowed.id?qb.negativeNumbersNotAllowed:qb.errorMessage;return l.a.createElement(oa.a,{error:y,title:qb.errorTitle,description:e})})(),l.a.createElement(ca.a,tf({editButtonLabel:(()=>T($.a.extendedEditButtonLabel,{inputFieldValue:null!==h?h:b,fieldName:f}))(),actionSubject:"numberInlineEdit",isEditable:I,
isEditing:k,readView:(()=>void 0!==p?p:l.a.createElement(ef,{isEditable:I,value:h,noValueText:b}))(),editView:I?(()=>void 0!==m?m:l.a.createElement(Zb,{defaultValue:S,onChange:R,type:E,isInvalid:!!y}))():null,onCancel:x,onConfirm:D,onEdit:A,onEscape:L,onEnter:M},g)))}));const af=Object(T.default)(h.d)(["& > div > div > div > div > div > div > div{width:100%;}"]),rf=({issueKey:e,fieldId:t,showPinButton:s,issueId:n,label:a,noValueText:i,onUpdate:r})=>l.a.createElement(af,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,a),!0===s&&l.a.createElement(y.a,{fieldId:t,label:a})),l.a.createElement(h.g,null,l.a.createElement(nf,{label:a,issueKey:e,issueId:n,fieldKey:t,noValueText:i,isFitContainerWidthReadView:!0,onUpdate:r})));rf.displayName="View";var of=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(N.x)(e),issueId:Object(N.w)(e),noValueText:s.formatMessage(ds.noValue),
isEditable:Object(v.C)(t.fieldId)(e)&&"PREVIEW"!==Object(K.w)(e)&&!!Object($l.a)(),showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(qn.g)(t.fieldId,s))})})))(rf),cf=Object(u.h)({errorTitle:{id:"issue-field-team.error-title",defaultMessage:"We couldn't set the team value"},errorMessage:{id:"issue-field-team.error-message",defaultMessage:"Check your connection, then give it another try."}});const lf=({issueKey:e,fieldKey:t,onSuccess:s})=>{const[n]=Object(Ht.a)(e,t),a=Nc()(n,"schema.type","array"),[{value:i,error:r},{saveValue:o,resetError:c}]=Object(aa.a)({fieldKey:t,issueKey:e,fieldType:a,initialValue:null,onSuccess:s});return[{value:i,error:r,fieldConfig:n},{saveValue:o,resetError:c}]};var uf=n("./node_modules/@atlaskit/user-picker/dist/es2019/components/smart-user-picker/components/index.js");const df=e=>{const{fieldId:t,siteId:s,defaultValue:n,isMulti:a=!0,isClearable:i=!0,debounceTime:r=300,onChange:o,placeholder:c}=e;return l.a.createElement(uf.a,{
width:"100%",autoFocus:!0,appearance:"compact",debounceTime:r,fieldId:t,includeGroups:!1,includeTeams:!0,includeUsers:!1,isClearable:i,isMulti:a,productKey:"jira",siteId:s,value:n,onChange:o,placeholder:c})};df.displayName="TeamPickerEdit";var pf=df;const mf=T.default.div(["display:flex;font-size:","px;height:","em;line-height:",";max-width:100%;padding:0px;"],Object(cm.fontSize)(),2.5*Object(cm.gridSize)()/Object(cm.fontSize)(),2.5*Object(cm.gridSize)()/Object(cm.fontSize)()),bf=T.default.div(["padding:0px;"]);var ff=e=>{const{defaultValue:t,placeholder:s}=e;return Je()(t)?l.a.createElement(mf,null,s):l.a.createElement(bf,null,l.a.createElement(Xt.a,null,(e=>e.map((e=>l.a.createElement(qc.a,{appearance:"rounded",text:e.name,key:e.id,elemBefore:l.a.createElement(Ze.a,{appearance:"circle",size:"xsmall",src:e.avatarUrl})}))))(t)))};function gf(){return(gf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function hf(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var yf=e=>{var t,s;const{fieldKey:n,issueKey:a,issueId:i,onCancel:r,onEdit:o,onEscape:u,onConfirm:d,onEnter:p,onUpdate:m,readView:b,editView:f,noValueText:g="DEFAULT PLACEHOLDER MESSAGE",useTeamField:h=lf}=e,y=hf(e,["fieldKey","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","noValueText","useTeamField"]),O=Object(hm.c)().cloudId,[{value:j,error:v,fieldConfig:E},{saveValue:k,resetError:w}]=h({issueKey:Object(ra.l)(a),fieldKey:n,onSuccess:m
}),[S,C]=Object(c.useState)(!1),[I,T]=Object(c.useState)(j),P=null!==(t=null==E?void 0:E.isEditable)&&void 0!==t&&t,_=(null!==(s=Nc()(E,"schema.configuration"))&&void 0!==s?s:[]).reduce(((e,t)=>(e[t.key]=t.value,e)),{}),x="false"!==(null==_?void 0:_.isMulti);Object(c.useEffect)((()=>{v&&C(!0)}),[v]);const D=Object(c.useCallback)((e=>{Uc()(I,j)||k(I,null,e),C(!1),Object(ft.h)(e)}),[k,I,j]),A=Object(c.useCallback)((e=>{w(),C(!1),T(j),Object(ft.h)(e)}),[w,j]),L=Object(c.useCallback)((e=>{A(e),r&&r(e)}),[A,r]),M=Object(c.useCallback)((e=>{D(e),d&&d(e)}),[d,D]),R=Object(c.useCallback)((e=>{C(!0),Object(ft.h)(e),o&&o(e)}),[o]),N=Object(c.useCallback)((e=>{A(e),u&&u(e)}),[A,u]),F=Object(c.useCallback)((e=>{D(e),p&&p(e)}),[p,D]),U=Object(c.useCallback)((e=>{w(),T(Array.isArray(e)?e:[e])}),[w,T]);return l.a.createElement(l.a.Fragment,null,v&&(()=>v?l.a.createElement(oa.a,{error:v,title:cf.errorTitle,description:cf.errorMessage}):null)(),l.a.createElement(ca.a,gf({areActionButtonsHidden:!x,
shouldConfirmOnEnter:!x,actionSubject:"teamInlineEdit",isEditable:P,isEditing:S,readView:(()=>void 0!==b?b:l.a.createElement(ff,{defaultValue:I,placeholder:g}))(),editView:P?(()=>void 0!==f?f:l.a.createElement(pf,{defaultValue:I,fieldId:n,siteId:O,onChange:U,placeholder:g,isMulti:x}))():null,onCancel:L,onConfirm:M,onEdit:R,onEscape:N,onEnter:F},y)))};const Of=e=>{const{label:t,issueKey:s,fieldId:n,issueId:a,onUpdate:i,noValueText:r,showPinButton:o}=e;return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,t),!0===o&&l.a.createElement(y.a,{fieldId:n,label:t})),l.a.createElement(h.g,null,l.a.createElement(yf,{label:t,issueKey:s,issueId:a,fieldKey:n,onUpdate:i,noValueText:r,isFitContainerWidthReadView:!0})))};Of.displayName="View";var jf=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({issueKey:Object(N.x)(e),issueId:Object(N.w)(e),noValueText:s.formatMessage(ds.noValue),
isEditable:Object(v.C)(t.fieldId)(e)&&"PREVIEW"!==Object(K.w)(e)&&!!Object($l.a)(),showPinButton:Object(I.a)(t.area)}),additionalCallbacks:e=>({onUpdate:s=>e(Object(qn.g)(t.fieldId,s))})})))(Of),vf=n("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js");var Ef=Object(u.h)({menuHeader:{id:"issue.views.field.team.edit.menuHeader",defaultMessage:"Plan-specific teams can only be selected through a plan."},noMatches:{id:"issue.views.field.team.edit.noMatches",defaultMessage:"No Matches"},placeholder:{id:"issue.views.field.team.edit.placeholder",defaultMessage:"Choose a team to assign this issue to."},sharedTeam:{id:"issue.context-items.team.shared-team",defaultMessage:"Shared Team"},menuFooter:{id:"issue.context-items.team.edit.menuFooter",defaultMessage:"Showing 100 results. To display more results, please refine your search."}})
;const kf=T.default.img(["width:","px;height:","px;margin-right:","px;"],2*P.e,2*P.e,P.e),wf=T.default.div(["display:flex;flex-direction:row;overflow:hidden;align-items:center;justify-content:start;padding:0 ","px;"],P.e/2),Sf=T.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),Cf=T.default.div(["padding:","px ","px ","px;"],P.e,2*P.e,2*P.e),If=T.default.div(["padding:0 ","px ","px ","px;color:",";font-weight:bold;font-size:12px;"],2*P.e,P.e,2*P.e,rt.a.DN30),Tf=T.default.div(["color:",";font-size:12px;padding:","px ","px;"],rt.a.N90,P.e,2*P.e),Pf=e=>{const{formatMessage:t}=Object(Ce.c)(),{options:s}=e,n=s.length>0&&s[0].moreResultsAvailable?l.a.createElement(Tf,null,t(Ef.menuFooter)):null;return l.a.createElement(Fo.z.MenuList,e,l.a.createElement(Cf,null,t(Ef.menuHeader)),e.children,n)};Pf.displayName="MenuListComponent";var _f=Pf,xf=n("./src/packages/issue/issue-view/src/views/field/team/assets/default-avatar.svg"),Df=n.n(xf);var Af=e=>{const t=e.data;if(t){
const{avatarUrl:s}=t;return l.a.createElement(Fo.z.Option,e,l.a.createElement(wf,null,l.a.createElement(kf,{src:s||Df.a})," ",l.a.createElement(Sf,null,e.children)))}return null};const Lf=e=>{const{formatMessage:t}=Object(Ce.c)(),{data:s}=e,n=s?s.label:l.a.createElement(fe.b,null,t(Ef.placeholder));return l.a.createElement(Fo.z.SingleValue,e,n)};Lf.displayName="SingleValueComponent";var Mf=Lf;const Rf=e=>l.a.createElement(_f,e);Rf.displayName="MenuList";const Nf=e=>l.a.createElement(Mf,e);Nf.displayName="SingleValue";const Ff=e=>l.a.createElement(Af,e);Ff.displayName="Option";const Uf=()=>{const{formatMessage:e}=Object(Ce.c)();return l.a.createElement(If,null,e(Ef.sharedTeam))};Uf.displayName="GroupHeading";class Vf extends c.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e),this.props.onConfirm(e)},this.debouncedLoadOptions=xl()(((e,t)=>{this.props.loadOptions(e).then(t,(()=>{t([])}))}),300)}render(){
const{value:e,portalElement:t,menuPlacement:s,intl:{formatMessage:n}}=this.props;return l.a.createElement(vu.a,{value:e,autoFocus:!0,defaultOptions:!0,menuPortalTarget:t,menuPlacement:s,components:{MenuList:Rf,Option:Ff,SingleValue:Nf,GroupHeading:Uf},onChange:this.onChange,loadOptions:this.debouncedLoadOptions,defaultMenuIsOpen:!0,isClearable:null!==e,noOptionsMessage:()=>n(Ef.noMatches),placeholder:n(Ef.placeholder),cacheOptions:!0})}}Vf.displayName="EditableTeamField";var Kf=Object(u.i)(Vf),Wf=Object(u.h)({label:{id:"issue.views.field.team.label",defaultMessage:"Team"}}),Bf=n("./node_modules/@atlaskit/icon/glyph/share.js"),Hf=n.n(Bf)
;const $f=T.default.div(["display:flex;flex-direction:row;overflow:hidden;white-space:nowrap;align-items:center;justify-content:start;"]),Gf=T.default.div(["overflow:hidden;text-overflow:ellipsis;margin-right:","px;display:inline-block;"],P.e),qf=T.default.img(["vertical-align:middle;width:","px;height:","px;margin-right:","px;display:inline-block;"],3*P.e,3*P.e,P.e),zf=T.default.span(["width:","px;height:","px;color:",";"],2*P.e,2*P.e,rt.a.R500),Yf=e=>{const{value:t,noValueText:s}=e;if(t){const{label:e,isShared:s,avatarUrl:n}=t,a=s?l.a.createElement(zf,null,l.a.createElement(Hf.a,{label:"",size:"small"})):null;return l.a.createElement($f,null,l.a.createElement(qf,{src:n||Df.a}),l.a.createElement(Gf,null,e),a)}return l.a.createElement(fe.b,null,s)};Yf.displayName="TeamViewField";var Qf=Yf;class Jf extends c.Component{renderEditableField(){const{isEditable:e,isSubTask:t,fetchSuggestions:s,onChange:n,onConfirm:a,value:i,portalElement:r,menuPlacement:o}=this.props
;return e&&!t?l.a.createElement("span",null,l.a.createElement(Kf,{value:i,loadOptions:s,portalElement:r,menuPlacement:o,onChange:n,onConfirm:a})):null}render(){const{intl:{formatMessage:e},value:t,noValueText:s,isEditing:n,onConfirm:a,onCancel:i,onEditRequest:r,isMobile:o,fieldId:c,showPinButton:u}=this.props,d=e(Wf.label);return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,d),!0===u&&l.a.createElement(y.a,{fieldId:c,label:d})),l.a.createElement(h.g,{isEditing:n},l.a.createElement(be.a,{onEscape:i},l.a.createElement(q.a,{isLabelHidden:!0,label:d,readView:l.a.createElement(Qf,{noValueText:s,value:t}),editView:this.renderEditableField(),disableEditViewFieldBase:!0,areActionButtonsHidden:!0,isEditing:n,onConfirm:a,onCancel:i,onEditRequested:r,isFitContainerWidthReadView:!o}))))}}Jf.displayName="TeamField";var Zf=Object(u.i)(Jf);const Xf=(e,t)=>e?((e,t)=>({value:e.id,label:e.title,isShared:e.isShared,avatarUrl:e.avatarUrl?`${t}${e.avatarUrl}`:""
}))(e,t.baseUrl):null,eg=e=>e?(e=>({id:e.value,title:e.label,isShared:e.isShared,avatarUrl:e.avatarUrl?e.avatarUrl:""}))(e):null,tg=Object(a.a)((e=>t=>Object(x.d)(`${e}/rest/teams/1.0/teams/find`,{body:JSON.stringify({query:t,excludedIds:[],maxResults:100})}).then((t=>((e,t)=>[{options:e.teams.map((e=>({value:e.id,label:e.title,isShared:e.shareable,avatarUrl:e.avatarUrl?`${t}${e.avatarUrl}`:""}))),moreResultsAvailable:e.moreResultsAvailable}])(t,e))))),sg=({baseUrl:e,issueKey:t,fieldMetaKey:s,value:n})=>{const a=n&&n.id?n.id.toString():null;return Object(x.e)(Object(Do.e)(e,t),{body:JSON.stringify({fields:{[s]:a}})})};var ng=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:Xf,transformToStateValue:eg,additionalProps:(e,s)=>({fetchSuggestions:tg(Object(N.f)(e)),noValueText:s.formatMessage(ds.noValue),portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,isSubTask:Object(vf.c)(e),showPinButton:Object(I.a)(t.area)}),saveField:sg
})))(Zf),ag=n("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),ig=n("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),rg=n("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),og=n("./src/packages/issue/worklog/src/services/context/index.js"),cg=n("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),lg=n("./src/packages/issue/issue-view/src/selectors/status-selector.js"),ug=Object(u.h)({timeRemainingFieldLabel:{id:"issue.context.time-remaining-field.label",defaultMessage:"Time remaining"},includeSubtasksLabel:{id:"issue.time-tracking.include-subtasks",defaultMessage:"Include subtasks"},includeChildrenLabel:{id:"issue.time-tracking.include-children",defaultMessage:"Include child issues"},timeSpentRemainingLabel:{id:"issue.context.time-remaining-spent.label",
defaultMessage:"{timeSpent} logged, {timeRemaining} remaining- edit {fieldName}"},extendedTimeRemainingLabel:{id:"issue.context.extended-time-remaining-field.label",defaultMessage:"No time logged, {timeRemaining} remaining- edit {fieldName}"},extendedTimeSpentLabel:{id:"issue.context.extended-time-spent-field.label",defaultMessage:"{timeSpent} logged- edit {fieldName}"},noTimeLoggedLabel:{id:"issue.context.no-time-logged-field.label",defaultMessage:"No time logged- edit {fieldName}"}}),dg=n("./node_modules/@atlaskit/checkbox/dist/es2019/checkbox.js"),pg=Object(u.h)({errorTitle:{id:"issue-field-remaining-estimate.error-title",defaultMessage:"We couldn't set the remaining estimate value"},errorMessage:{id:"issue-field-remaining-estimate.error-message",defaultMessage:"Check your connection, then give it another try."}});const mg=({issueId:e,issueKey:t,onSuccess:s})=>{
const[n]=Object(Ht.a)(t,"timetracking"),a=(null==n?void 0:n.schema.type)||"timetracking",[{value:i,error:r},{saveValue:o,resetError:c}]=Object(aa.a)({fieldKey:"timetracking",issueKey:t,fieldType:a,initialValue:{originalEstimateSeconds:0,timeSpentSeconds:0,remainingEstimateSeconds:0},saveField:(t,s,n,a)=>(async({issueId:e,newValue:t,baseUrl:s})=>{const n=t.remainingEstimateSeconds;return Object(x.d)(`${s}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(au.stringify)({issueId:e,timetracking_remainingestimate:void 0!==n?n/60+"m":null,timetracking_targetsubfield:"timetracking_remainingestimate",fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object($l.a)()})})})({issueId:e,newValue:n,baseUrl:a}),onSuccess:s});return[{value:i,error:r,fieldConfig:n},{saveValue:o,resetError:c}]},bg=T.default.div(["width:","px;cursor:auto;"],8.5*P.e),fg=e=>{
const{defaultValue:t,placeholderMessage:s,onChange:n,isInvalidInput:a,invalidTimeFormatMessage:i}=e;return l.a.createElement(bg,null,l.a.createElement(Lr,{compact:!0,type:"text",value:t,placeholder:s,onChange:n,invalidMessage:a?i:void 0}))};fg.displayName="RemainingEstimateEdit";var gg=fg;const hg=T.default.div(["padding:0px;"]),yg=e=>{const{defaultValue:t}=e;return l.a.createElement(hg,null,l.a.createElement(Fa.a,null,t))};yg.displayName="RemainingEstimateView";var Og=yg;function jg(){return(jg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function vg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Eg(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?vg(Object(s),!0).forEach((function(t){kg(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):vg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function kg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function wg(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var Sg=e=>{
const{config:t,issueKey:s,issueId:n,onCancel:a,onEdit:i,onEscape:r,onConfirm:u,onEnter:d,onUpdate:p,readView:m,editView:b,placeholderMessage:f,invalidTimeFormatMessage:g,useRemainingEstimateField:h=mg}=e,y=wg(e,["config","issueKey","issueId","onCancel","onEdit","onEscape","onConfirm","onEnter","onUpdate","readView","editView","placeholderMessage","invalidTimeFormatMessage","useRemainingEstimateField"]),O=Object(Ke.i)(),[j]=Object(Be.d)(O),v=j.canLogWork,[{value:E,error:k},{saveValue:w,resetError:S}]=h({issueId:n,issueKey:Object(ra.l)(s),onSuccess:p}),C=E.remainingEstimateSeconds||0,[I,T]=Object(c.useState)(!1),[P,_]=Object(c.useState)(!1),x=Object(Ce.c)(),D=Object(c.useMemo)((()=>Object(o.isFixTimeTrackingFormatEnabled)()?Object(su.a)(C||0,{workingHoursPerDay:t.hoursPerDay,workingDaysPerWeek:t.daysPerWeek,timeFormat:t.format||"pretty",defaultUnit:t.defaultUnit},x):Zl(t)(C)),[t,x,C]),[A,L]=Object(c.useState)(D);Object(c.useEffect)((()=>{L(D)}),[D]),Object(c.useEffect)((()=>{k&&_(!0)
}),[k]);const M=Object(c.useCallback)((e=>{if(Uc()(A,D))_(!1);else if(eu(t)(A)){const s=Eg(Eg({},E),{},{remainingEstimateSeconds:tu(t)(A)||0});w(s,null,e),Object(ft.h)(e),T(!1),_(!1)}else T(!0),_(!0)}),[t,D,w,E,A]),R=Object(c.useCallback)((e=>{S(),T(!1),_(!1),L(D),Object(ft.h)(e)}),[D,S]),N=Object(c.useCallback)((e=>{R(e),a&&a(e)}),[R,a]),F=Object(c.useCallback)((e=>{M(e),u&&u(e)}),[u,M]),U=Object(c.useCallback)((e=>{_(!0),Object(ft.h)(e),i&&i(e)}),[i]),V=Object(c.useCallback)((e=>{R(e),r&&r(e)}),[R,r]),K=Object(c.useCallback)((e=>{M(e),d&&d(e)}),[d,M]),W=Object(c.useCallback)((e=>{T(!1),S(),L(e.target.value)}),[S,L]);return l.a.createElement(l.a.Fragment,null,k&&(()=>k?l.a.createElement(oa.a,{error:k,title:pg.errorTitle,description:pg.errorMessage}):null)(),l.a.createElement(ca.a,jg({actionSubject:"remainingEstimateInlineEdit",isEditable:v,isEditing:P,readView:(()=>void 0!==m?m:l.a.createElement(Og,{defaultValue:D}))(),editView:v?(()=>void 0!==b?b:l.a.createElement(gg,{defaultValue:A,
placeholderMessage:f,onChange:W,invalidTimeFormatMessage:g,isInvalidInput:I}))():null,onCancel:N,onConfirm:F,onEdit:U,onEscape:V,onEnter:K},y)))},Cg=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),Ig=n("./src/packages/issue/issue-view/src/common/component/logged-time/view.js");const Tg=e=>void 0===e,Pg=e=>{if(!e)return Object.seal({});const{remainingEstimateSeconds:t,timeSpentSeconds:s}=e;return ui()({loggedTime:s,remainingTime:t},Tg)},_g=Object(a.a)(((e,t,s,n)=>{const{timeSpentSeconds:a,remainingEstimateSeconds:i}=n,r=Zl(s)(a||0),o=Zl(s)(i||0),c=!!a,l=!!i;switch(!0){case c&&l:return e(ug.timeSpentRemainingLabel,{timeSpent:r,timeRemaining:o,fieldName:t});case l&&!c:return e(ug.extendedTimeRemainingLabel,{timeRemaining:o,fieldName:t});case c&&!l:return e(ug.extendedTimeSpentLabel,{timeSpent:r,fieldName:t});default:return e(ug.noTimeLoggedLabel,{fieldName:t})}
})),xg=T.default.div(["margin-bottom:","px;margin-left:-","px;padding-top:","px;& > label > span{color:",";}"],(e=>e.sideBySideMode?0:3*P.e),P.e/2,P.e/2,rt.a.N500);class Dg extends c.Component{renderReadView(){const{value:e,isDone:t,config:s}=this.props;return l.a.createElement(Ig.a,{value:Pg(e),estimatedTime:e.originalEstimateSeconds,isDone:t,config:s})}renderRemainingEstimateView(){const{config:e,fieldId:t,issueKey:s,issueId:n,showPinButton:a,invalidTimeFormatMessage:i,placeholderMessage:r,timeRemainingFieldLabel:o}=this.props;return n?l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,o),!0===a&&l.a.createElement(y.a,{fieldId:t,label:o})),l.a.createElement(h.g,null,l.a.createElement(Sg,{config:e,issueKey:s,issueId:n,value:"",placeholderMessage:r,invalidTimeFormatMessage:i,isFitContainerWidthReadView:!0}))):null}renderRollUpToggle(){const{rollupLabel:e,isRollingUpData:t,onToggleRollingUpData:s}=this.props;return l.a.createElement(xg,{sideBySideMode:!0
},l.a.createElement(dg.a,{isChecked:t,onChange:({target:{checked:e}},t)=>{s(e,t)},label:e,name:"include-subtasks-children-in-time-tracking-toggle-from-context"}),l.a.createElement(Cg.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromContext"}))}render(){const{isVisible:e,label:t,isEditable:s,isMobile:n,onEditRequest:a,confirmButtonLabel:i,cancelButtonLabel:r,fieldId:o,showPinButton:c,shouldDisplayRollUpDataControl:u,formatMessage:d,config:p,value:m}=this.props;if(!e)return this.renderRemainingEstimateView();const b=_g(d,t,p,m);return l.a.createElement(h.d,null,l.a.createElement(h.b,null,l.a.createElement(h.c,null,t),!0===c&&l.a.createElement(y.a,{fieldId:o,label:t})),l.a.createElement(h.g,{"data-testid":"issue.views.issue-base.context.time-tracking.value"},l.a.createElement(be.a,null,l.a.createElement(q.a,{label:t,readView:this.renderReadView(),editView:s?l.a.createElement("div",null):null,isEditing:!1,areActionButtonsHidden:!0,
disableEditViewFieldBase:!0,isFitContainerWidthReadView:!n,isLabelHidden:!0,onEditRequested:a,editButtonLabel:b,confirmButtonLabel:i,cancelButtonLabel:r}),u&&this.renderRollUpToggle())))}}Dg.displayName="TimeTrackingView",Dg.displayName="TimeTrackingView";var Ag=Dg;function Lg(){return(Lg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Mg(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Rg=Object(ag.a)({onToggleRollingUpData:"toggleRollingUpData"})(Object(ig.b)("worklog")(Ag)),Ng=e=>{
const{timeTrackingCalculationSelector:t,area:s,intl:n}=e,a=Mg(e,["timeTrackingCalculationSelector","area","intl"]),[i,{markRollingUpData:r,unmarkRollingUpData:o}]=Object(og.a)(),u=Object(c.useCallback)((e=>{e?r():o()}),[r,o]);return l.a.createElement(Rg,Lg({},a,{value:t(i),isRollingUpData:i,onToggleRollingUpData:u}))};Ng.displayName="WrappedTimeTrackingView";const Fg=l.a.createElement(u.c,{id:"issue.time-estimate.input-time-string-is-invalid",defaultMessage:"Your estimate must be in the format {format}.",values:{format:l.a.createElement("b",null,"2w 4d 6h 45m")}}),Ug=Object(d.connect)(((e,t)=>{const{intl:{formatMessage:s},area:n,fieldId:a}=t,i=Object(v.m)(t.fieldId)(e);return{formatMessage:s,fieldId:a,timeTrackingCalculationSelector:Object(Gl.j)(e),config:Object(Gl.h)(e),issueKey:Object(N.x)(e),issueId:Object(N.w)(e),isDone:"DONE"===Object(lg.a)(e),isEditable:Object(Gl.b)(e),isMobile:Object(N.r)(e),isVisible:Object(Gl.c)(e),label:i,editButtonLabel:s($.a.editButtonLabel,{fieldName:i}),
confirmButtonLabel:s($.a.confirmButtonLabel,{fieldName:i}),cancelButtonLabel:s($.a.cancelButtonLabel,{fieldName:i}),timeRemainingFieldLabel:s(ug.timeRemainingFieldLabel),rollupLabel:Object(K.m)(e)?s(ug.includeSubtasksLabel):s(ug.includeChildrenLabel),showPinButton:Object(I.a)(n),shouldDisplayRollUpDataControl:Object(Gl.f)(e),placeholderMessage:"2w 4d 6h 45m",invalidTimeFormatMessage:Fg}}),(e=>({onEditRequest:()=>{e(Object(cg.L)("ADD_MODAL",null))}})))(Ng);var Vg=e=>{const t=Object(Ce.c)();return l.a.createElement(zp.a,{id:"issue.issue-view.context.time-tracking-field"},l.a.createElement(rg.a,{id:"context.time-tracking-field",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},l.a.createElement(Ug,Lg({},e,{intl:t}))))},Kg=Object(H.a)(((e,t)=>({fieldId:t.fieldId,additionalProps:(e,s)=>({noValueText:s.formatMessage(ds.noValue),type:"url",showPinButton:Object(I.a)(t.area)})})))(Rr)
;const Wg=e=>e.users?e.users.map(St):[],Bg=Object(a.a)((e=>t=>e?Object(Ve.a)(`${e}${t}`).then(Wg):Promise.resolve([]))),Hg=Object(a.a)((e=>({avatarUrl:"",name:e.formatMessage(ds.noValue)})));var $g=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:St,transformToStateValue:Ct,additionalProps:(e,s)=>({portalElement:Object(B.a)(t.fieldId)(e)?Object(U.a)()||document.body:void 0,fetchSuggestions:Bg(Object(v.d)(t.fieldId)(e)),emptyOption:Object(v.E)(t.fieldId)(e)?void 0:Hg(s),showPinButton:Object(I.a)(t.area)})})))(bt),Gg=n("./src/packages/cache/src/services/versions/index.js"),qg=Object(u.h)({createNewItem:{id:"issue.fix-versions.create-new-component-message",defaultMessage:"Create new version"},recent:{id:"issue.fix-versions.create-new-component-message.recent",defaultMessage:"Recent versions"},releasedHeading:{id:"issue.fix-versions.released-message",defaultMessage:"Released"},unreleasedHeading:{id:"issue.fix-versions.unreleased-message",defaultMessage:"Unreleased"}})
;function zg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Yg(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zg(Object(s),!0).forEach((function(t){Qg(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Qg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Jg=e=>({content:e.name,value:e.id,fromCache:e.fromCache||!1}),Zg={versions:"affectedVersion",fixVersions:"fixVersion"},Xg=(e,{baseUrl:t,projectKey:s,fieldId:n})=>e.map((e=>{const a=`project = ${Object(Rs.b)(s)} AND ${(e=>Zg[e]||"fixVersion")(n)} = ${Object(Rs.b)(e.name)}`;return{
href:Object(Rs.a)(t,a),content:e.name,value:e.id}})),eh=e=>e?e.map(Jg):[],th=e=>e.map((e=>({name:e.content,id:e.value,fromCache:e.fromCache}))),sh=(e,t,s,n)=>{const a=e.filter((e=>!e.archived)),i=a.filter((e=>!e.released)).map(Jg),r=a.filter((e=>e.released)).map(Jg),o=(e=>e.slice(-5).reverse())(((e,t,s)=>t.filter((e=>e.projectId===s)).map((t=>{const n=e.find((e=>e.id===t.id));if(n){const e=Yg(Yg({},n),{},{projectId:s});return Gg.a.update(`${t.id}`,e),Yg(Yg({},e),{},{fromCache:!0})}return Yg(Yg({},t),{},{fromCache:!0})})))(e,t,n));return[{heading:s.formatMessage(qg.recent),items:o.map(Jg)},{heading:s.formatMessage(qg.unreleasedHeading),items:i},{heading:s.formatMessage(qg.releasedHeading),items:r}]};var nh=Object(u.h)({placeholder:{id:"issue.single-version-picker.text-for-dropdown-when-nothing-selected",defaultMessage:"Select version"}});const ah=e=>e&&{name:e.content,id:e.value},ih=e=>e&&{content:e.name,value:e.id
},rh=Object(a.a)(((e,t,s)=>()=>Promise.resolve(e).then((e=>sh(e,[],t,s)))));var oh=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:ih,transformToStateValue:ah,additionalProps:(e,s)=>({fetchSuggestions:rh(Object(v.c)(t.fieldId)(e),s,Object(K.C)(e)),placeholder:s.formatMessage(nh.placeholder),noValueText:s.formatMessage(ds.noValue),allowEmptyValue:!Object(v.E)(t.fieldId)(e),hasAutocomplete:!0,showPinButton:Object(I.a)(t.area)})})))(_n);const ch=Object(a.a)(((e,t,s)=>()=>Promise.resolve(e).then((e=>sh(e,[],t,s)))));var lh=Object(H.a)(((e,t)=>({fieldId:t.fieldId,transformFromStateValue:eh,transformToStateValue:th,additionalProps:(e,s)=>({fetchSuggestions:ch(Object(v.c)(t.fieldId)(e),s,Object(K.C)(e)),placeholder:s.formatMessage(ds.version_no_value_placeholder),noValueText:s.formatMessage(ds.noValue),showPinButton:Object(I.a)(t.area)})
})))(on),uh=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),dh=n("./src/packages/releases/versions/src/create-version-modal/index.js");function ph(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function mh(){return(mh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}class bh extends c.Component{constructor(...e){super(...e),this.state={isDialogOpen:!1,data:[],loading:!1,error:!1},this.componentDidMount=()=>{this.getDataFromCache()},this.getDataFromCache=()=>{var e,t
;null===(e=(t=this.props).getDataFromCache)||void 0===e||e.call(t).then((e=>{this.setState({data:e,loading:!1})}))},this.fetchSuggestions=(e,t)=>this.props.fetchSuggestions(e,t).then((e=>(this.setState({data:e}),e))),this.openDialog=()=>{this.setState({isDialogOpen:!0})},this.closeDialog=()=>{this.setState({isDialogOpen:!1})},this.onSuccess=e=>{const{onChange:t,value:s,onVersionCreated:n,versionFieldIds:a}=this.props;t([...s,{content:e.name,value:e.id}]),this.closeDialog(),n(e,a)}}renderSelect(e){const{canAdministerProject:t,canAdministerJira:s,createNewItemMessage:n}=this.props,a=t||s,{data:i,loading:r,error:o}=this.state,c={data:i,loading:r,error:o};return l.a.createElement(on,mh({},e,{styles:Xs,shouldShowFooter:a,footer:l.a.createElement(Zs,{className:"issue-view__select-footer"},l.a.createElement($s.a,{label:"",size:"small"}),l.a.createElement(Js,null,n)),onFooterSelect:this.openDialog,allowEmptyValue:!0,optionValuesSafeForAnalytics:!0,fetchSuggestions:this.fetchSuggestions,
debounceFetchSuggestionsTime:300,initialData:c}))}render(){const e=this.props,{baseUrl:t,projectId:s,createNewItemMessage:n,canAdministerProject:a,canAdministerJira:i,onVersionCreated:r,versionFieldIds:o}=e,c=ph(e,["baseUrl","projectId","createNewItemMessage","canAdministerProject","canAdministerJira","onVersionCreated","versionFieldIds"]),{isDialogOpen:u}=this.state;return l.a.createElement(l.a.Fragment,null,u&&l.a.createElement(dh.a,{baseUrl:t,projectId:s,onCancel:this.closeDialog,onError:this.closeDialog,onSuccess:this.onSuccess}),this.renderSelect(c))}}bh.displayName="FixVersionsView";function fh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gh(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fh(Object(s),!0).forEach((function(t){hh(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fh(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function hh(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const yh=Object(a.a)(((e,t,s,n,a,i)=>((e,t,s,n,a,i)=>Ls(e,t,s,n,a,i))(e,t,s,n,a,i))),Oh=Object(a.a)(((e,t,s,n,a,i)=>(r,o)=>{const c=yh(s,e,n,a,o,i);return Promise.all([c,Gg.a.getAll()]).then((async([e,s])=>sh(e,s,t,a)))}));var jh=Object(H.a)(((t,s)=>({fieldId:s.fieldId,transformFromStateValue:Xg,transformToStateValue:th,additionalProps:(e,t)=>({fetchSuggestions:Oh(Object(v.c)(s.fieldId)(e),t,s.fieldId,Object(N.w)(e),Object(K.C)(e),s.createAnalyticsEvent),canAdministerProject:Object(Is.c)(e),canAdministerJira:Object(Is.b)(e),createNewItemMessage:t.formatMessage(qg.createNewItem),baseUrl:Object(N.f)(e),projectId:Object(K.C)(e),isMobile:Object(N.r)(e),
placeholder:t.formatMessage(ds.version_no_value_placeholder),noValueText:t.formatMessage(ds.noValue),versionFieldIds:Object(v.v)(e),onTagClick:e=>Object(ft.h)(e,{name:s.fieldId}),showPinButton:Object(I.a)(s.area),getDataFromCache:()=>Gg.a.getAll().then((s=>sh([],s,t,Object(K.C)(e))))}),additionalCallbacks:e=>({onVersionCreated:(t,s)=>{s.forEach((s=>{e(Object(uh.a)(s,[t]))}))}}),saveField:(...t)=>(({baseUrl:t,issueKey:s,fieldMetaKey:n,value:a,fieldEditSessionId:i},r,o)=>{const c=void 0!==i?`${t}/rest/api/2/issue/${s}?fieldEditSessionId=${i}`:`${t}/rest/api/2/issue/${s}`,l=Object(K.C)(r);return a.forEach((e=>{try{o.createAnalyticsEvent&&Object(ft.b)(o.createAnalyticsEvent({}),"versionPickerCache set",{isFromCache:e.fromCache}),e.id&&Gg.a.set(`${e.id}`,gh(gh({},e),{},{projectId:l}))}catch(t){Cs.a.safeErrorWithoutCustomerData("issue-view.versions.cache.set",t.message)}})),Object(x.e)(c,{body:JSON.stringify({fields:{[n]:a}})}).catch((t=>{throw a.forEach((t=>{try{
o.createAnalyticsEvent&&Object(ft.b)(o.createAnalyticsEvent({}),"versionPickerCache removed"),t.id&&Gg.a.remove(`${t.id}`)}catch(e){Cs.a.safeErrorWithoutCustomerData("issue-view.versions.cache.remove",e.message)}})),t}))})(...t,s)})))(bh);const vh=({children:e,id:t,fallback:s=l.a.createElement(l.a.Fragment,null)})=>l.a.createElement(zp.a,{id:t,packageName:"issue",render:()=>s},l.a.createElement(X.a,{fallback:s},e));vh.displayName="Boundary";const Eh=Object(X.f)((()=>n.e("async-all-dev-panel").then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/all-dev-info-panel/all-dev-panel-view.js"}),kh=Object(X.f)((()=>n.e("async-releases-context-panel").then(n.bind(null,"./src/packages/development/releases-glance/src/view/deployment-release-panel/index.js"))),{moduleId:"./src/packages/development/releases-glance/src/view/deployment-release-panel/index.js"
}),wh=Object(X.f)((()=>n.e("async-assets-glance").then(n.bind(null,"./src/packages/platform/ui/asset-tracking/assets-glance/src/index.js"))),{moduleId:"./src/packages/platform/ui/asset-tracking/assets-glance/src/index.js"}),Sh=Object(X.f)((()=>n.e("async-assets-panel").then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/assets-panel/assets-panel-view.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/assets-panel/assets-panel-view.js"}),Ch=Object(X.f)((()=>n.e("async-assets-onboarding").then(n.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/context/assets-onboarding/assets-onboarding-view.js"))),{moduleId:"./src/packages/issue/issue-view/src/views/issue-base/context/assets-onboarding/assets-onboarding-view.js"}),Ih=e=>l.a.createElement(vh,{id:"all-dev-panel"},l.a.createElement(Eh,e));Ih.displayName="AllDevPanel";const Th=e=>l.a.createElement(vh,{id:"releases-context-panel"},l.a.createElement(kh,e))
;Th.displayName="ReleasesContextPanel";const Ph=e=>l.a.createElement(vh,{id:"assets-glance"},l.a.createElement(wh,e));Ph.displayName="AssetsGlance";const _h=e=>l.a.createElement(vh,{id:"assets-panel"},l.a.createElement(Sh,e));_h.displayName="AssetsPanel";const xh=e=>l.a.createElement(vh,{id:"assets-onboarding"},l.a.createElement(Ch,e));xh.displayName="AssetsOnboarding";s.a=Object(a.a)((()=>{const e=Object(i.Y)(),t={[e.ASSIGNEE_TYPE]:{item:Wt},[e.DUE_DATE_TYPE]:{item:wa},[e.PRIORITY_TYPE]:{item:vd},[e.REPORTER_TYPE]:{item:pp},[e.DESCRIPTION_TYPE]:{item:me},[e.LABELS_TYPE]:{item:nl},[e.COMPONENTS_TYPE]:{item:gn},[e.SPRINT_TYPE]:{item:Gb},[e.STORY_POINTS_TYPE]:{item:of},[e.TEAMS_PLATFORM_CF_TYPE]:{item:Object(o.isTeamsCustomFieldTypeEnabled)()?jf:()=>null},[e.EPIC_TYPE]:{item:yc},[e.FIX_VERSIONS_TYPE]:{item:jh},[e.AFFECTS_VERSIONS_TYPE]:{item:jh},[e.TIME_ESTIMATE_TYPE]:{item:yu},[e.TIME_TRACKING_TYPE]:{item:Vg},[e.ENVIRONMENT_TYPE]:{item:Ae},[e.DEV_SUMMARY_TYPE]:{item:Ih,panel:Th},
[e.APPROVALS_PANEL_TYPE]:{item:Le.b,panel:Le.a},[e.KNOWLEDGE_BASE_TYPE]:{item:Tc,panel:Mc},[e.SLA_PANEL_TYPE]:{item:r.a},[e.LINKED_ALERTS_TYPE]:{item:il},[e.ASSETS_CF_TYPE]:{item:_h,panel:Ph},[e.RESPONDERS_CF_TYPE]:{item:Object(o.isJsmRespondersEnabled)()?em:()=>null,panel:Object(o.isJsmRespondersEnabled)()?zm:()=>null},[e.COLOR_CF_TYPE]:{item:()=>null},[e.EPIC_COLOR_TYPE]:{item:()=>null},[e.RELEASES_TYPE]:{item:()=>null},[e.PARENT_CF_TYPE]:{item:td},[e.BASELINE_START_CF_TYPE]:{item:wa},[e.BASELINE_END_CF_TYPE]:{item:wa},[e.LABELS_CF_TYPE]:{item:nl},[e.TEXT_CF_TYPE]:{item:tb},[e.MULTI_USER_CF_TYPE]:{item:ro},[e.URL_CF_TYPE]:{item:Kg},[e.NUMBER_CF_TYPE]:{item:kl},[e.STORY_POINT_ESTIMATE_CF_TYPE]:{item:Pl},[e.SELECT_CF_TYPE]:{item:cb},[e.EPIC_STATUS_TYPE]:{item:cb},[e.MULTI_SELECT_CF_TYPE]:{item:yl},[e.ECOSYSTEM_GLANCE_TYPE]:{item:Ei},[e.FORGE_CUSTOM_FIELD_TYPE]:{item:Eo},[e.ISSUE_FIELD_USER_CF_TYPE]:{item:$g},[e.ISSUE_FIELD_GROUPS_CF_TYPE]:{item:wc},[e.ISSUE_FIELD_STRINGS_CF_TYPE]:{
item:nl},[e.FORGE_GLANCE_TYPE]:{item:To},[e.TEXT_AREA_CF_TYPE]:{item:Ae},[e.MULTI_VERSION_CF_TYPE]:{item:lh},[e.VERSION_CF_TYPE]:{item:oh},[e.DATE_CF_TYPE]:{item:wa},[e.GROUP_CF_TYPE]:{item:Cc},[e.MULTI_GROUP_CF_TYPE]:{item:wc},[e.USER_CF_TYPE]:{item:$g},[e.DATETIME_CF_TYPE]:{item:Na},[e.MULTI_CHECKBOXES_CF_TYPE]:{item:hs},[e.RADIO_BUTTONS_CF_TYPE]:{item:ep},[e.TEAM_CF_TYPE]:{item:ng},[e.ISSUE_FIELD_NUMBER_CF_TYPE]:{item:kl},[e.ISSUE_FIELD_DATETIME_CF_TYPE]:{item:Na},[e.ISSUE_FIELD_STRING_CF_TYPE]:{item:tb},[e.ISSUE_FIELD_SINGLE_SELECT_CF_TYPE]:{item:cb},[e.ISSUE_FIELD_MULTI_SELECT_CF_TYPE]:{item:yl},[e.REQUEST_TYPE_CF_TYPE]:{item:$n},[e.SERVICE_ENTITY_CF_TYPE]:{item:Object(o.isFixPropagationEnabled)()?Xm:eb},[e.REQUEST_PARTICIPANTS_CF_TYPE]:{item:qp},[e.ORGANIZATIONS_CF_TYPE]:{item:Hl},[e.REQUEST_FEEDBACK_CF_TYPE]:{item:Tp},[e.PEOPLE_CF_TYPE]:{item:ud},[e.REQUEST_LANGUAGE_CF_TYPE]:{item:Fp},[e.ASSET_ONBOARDING_TYPE]:{item:xh},[e.APPROVERS_LIST_CF_TYPE]:{item:ud},
[e.CASCADING_SELECT_CF_TYPE]:{item:Yt},[e.PROJECT_PICKER_CF_TYPE]:{item:Hd},[e.CMDB_OBJECT_CF_TYPE]:{item:Object(o.isCmdbIntegrationFieldEnabled)()?ws:()=>null},[e.READ_ONLY_CF_TYPE]:{item:op}};return Object(o.isMessageCustomFieldEnabled)()&&e.MESSAGE_VIEW_CF_TYPE&&e.MESSAGE_EDIT_CF_TYPE&&Object.assign(t,{[e.MESSAGE_VIEW_CF_TYPE]:{item:dl},[e.MESSAGE_EDIT_CF_TYPE]:{item:dl}}),Object(o.isEpicNameFieldTypeEnabled)()&&e.EPIC_NAME_TYPE&&Object.assign(t,{[e.EPIC_NAME_TYPE]:{item:tb}}),t}))},"./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js":function(e,t,s){"use strict";t.a=e=>"context"===e},"./src/packages/issue/issue-view/src/views/issue-details/app-provider/index.js":function(t,s,n){"use strict"
;var a=n("./node_modules/lodash/flow.js"),i=n.n(a),r=n("./src/packages/platform/services/issue/src/components/context/consumer.js"),o=n("./node_modules/react/index.js"),c=n.n(o),l=n("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js");function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
var d=n("./src/packages/issue/issue-view/src/common/metrics/context/index.js"),p=n("./src/packages/platform/utils/app-base/src/index.js"),m=n("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),b=n("./src/packages/common-legacy-do-not-add-anything-new/src/redux-disposable/index.js"),f=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),g=n("./src/packages/growth/cross-flow/src/services/index.js"),h=n("./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js"),y=n("./src/packages/issue/issue-context-service/src/main.js"),O=n("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),j=n("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),v=n("./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js"),E=n("./src/packages/issue/issue-scroll/src/services/main.js"),k=n("./src/packages/issue/issue-tabs/src/services/main.js"),w=n("./src/packages/issue/user-preferences-services/src/main.js"),S=n("./src/packages/issue/ecosystem-service/src/services/main.js"),C=n("./src/packages/issue/forge-service/src/services/main.js"),I=n("./src/packages/issue/issue-view-layout/src/services/main.js"),T=n("./src/packages/issue/workflow-transitions-services/src/main.js"),P=n("./src/packages/issue/workflow-transitions-services/src/context.js"),_=n("./src/packages/platform/utils/router/src/index.js"),x=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/dynamic-contextual-analytics-data.js"),D=n("./src/packages/issue/project-context-service/src/main.js"),A=n("./src/packages/issue/project-permissions-service/src/main.js"),L=n("./src/packages/platform/services/issue/src/service/index.js"),M=n("./src/packages/issue/jira-settings-service/src/main.js"),R=n("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),N=n("./src/packages/issue/worklog/src/services/store/index.js")
;const F=e=>({type:"SET_CONTEXT",payload:e});var U=n("./src/packages/issue/issue-view/src/actions/external-actions.js"),V=n("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),K=n("./src/packages/issue/issue-view/src/common/metrics/index.js"),W=n("./src/packages/issue/issue-view/src/feature-flags.js"),B=n("./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js"),H=n("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),$=n("./node_modules/react-sweet-state/lib/esm/store/create.js"),G=n("./node_modules/react-sweet-state/lib/esm/components/hook.js");const q=e=>!!(e&&e.savedAt>Date.now()-36e5),z=()=>({setState:e,getState:t})=>{const s=t();Object.entries(s).forEach((([t,s])=>{q(s)||e({[t]:void 0})}))},Y={setRecentIssue:(e,t)=>({setState:s,dispatch:n})=>{n(z()),s({[String(e)]:{issueState:t,savedAt:Date.now()}})},getRecentIssue:e=>({getState:t,dispatch:s})=>{s(z());const n=t()[e]
;return q(n)?null==n?void 0:n.issueState:void 0},getRecentIssuesCount:()=>({getState:e})=>{const t=e();return Object.values(t).filter(Boolean).length}},Q=Object($.a)({name:"recent-issues",initialState:{},actions:Y}),J=Object(G.a)(Q,{selector:null});var Z=n("./src/packages/issue/issue-view/src/utils/prefetched-resources/index.js"),X=n("./node_modules/react-redux/es/index.js");const ee=e=>({type:"FETCH_SCREENID_SUCCESS",payload:e&&e.data});var te=n("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js");var se=Object(X.connect)((e=>({isSimplifiedProject:Object(te.u)(e)})),{fetchScreenIdRequest:()=>({type:"FETCH_SCREENID_REQUEST"})})((e=>{const{fetchScreenIdRequest:t,isSimplifiedProject:s}=e;return Object(o.useEffect)((()=>{s||t()}),[t,s]),null
})),ne=n("./node_modules/lodash/join.js"),ae=n.n(ne),ie=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/safe-string.js"),re=n("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),oe=n("./src/packages/realtime/src/common/constants/events.js"),ce=n("./src/packages/realtime/src/index.js");var le=n("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),ue=n("./node_modules/reselect/lib/index.js"),de=n("./src/packages/realtime/src/common/utils/pubsub.utils.js");const pe=Object(ue.createSelector)(le.i,te.C,((e,t)=>[Object(de.a)(e,t)]));function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function be(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const fe=[oe.g,oe.b];var ge=Object(X.connect)((e=>({channels:pe(e),cloudId:Object(le.i)(e),projectId:Object(te.C)(e),issueId:Object(le.w)(e)})),{realtimeUpdateCurrentIssue:e=>({type:"REALTIME_UPDATE_CURRENT_ISSUE",payload:e})},((e,t)=>({channels:e.channels,events:fe,cloudId:e.cloudId,projectId:e.projectId,onJoin:(t,s)=>{Object(re.b)(s,"channel joined","Realtime",{cloudId:new ie.a(e.cloudId),projectId:e.projectId,issueId:new ie.a(e.issueId),channels:new ie.a(ae()(e.channels))})},onReceive:(s,n)=>{s&&s.payload.issueId===Number(e.issueId)&&(t.realtimeUpdateCurrentIssue({atlassianId:s.payload.atlassianId,updateType:s.type}),Object(re.b)(n,"event received","Realtime",{cloudId:new ie.a(e.cloudId),projectId:e.projectId,issueId:new ie.a(e.issueId),
eventType:new ie.a(s.type)}))},onLeave:(t,s)=>{Object(re.b)(s,"channel left","Realtime",{cloudId:new ie.a(e.cloudId),projectId:e.projectId,issueId:new ie.a(e.issueId),channels:new ie.a(ae()(e.channels))})}})))((e=>{let{cloudId:t,projectId:s}=e,n=be(e,["cloudId","projectId"]);return t&&s?c.a.createElement(ce.a,me({appId:"issue-view"},n)):null})),he=n("./node_modules/history/createBrowserHistory.js"),ye=n.n(he),Oe=n("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),je=n("./src/packages/platform/utils/constants/src/status-categories.js"),ve=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),Ee=n("./src/packages/platform/utils/types/src/general.js"),ke=n("./src/packages/issue/issue-fetch-services-common/src/common/utils/token-browser-utils.js");const we=e=>({type:"UPDATE_PREVIEW_REQUEST",payload:e});var Se=n("./src/packages/issue/issue-view/src/actions/issue-remote-data-actions.js");const Ce=()=>({type:"FETCH_LOGGED_IN_USER_REQUEST"
}),Ie=(e,t)=>({type:"FETCH_LOGGED_IN_USER_SUCCESS",payload:{user:e,applicationRoles:t}});var Te=n("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js");const Pe=e=>({type:"PREVIEW_DATA_FETCHED",payload:e});var _e=n("./src/packages/issue/issue-view/src/issue-field/state/transformers/initial-data-transformer.js"),xe=n("./src/packages/platform/utils/constants/src/fetch-default-options-with-strict-mode.js"),De=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),Ae=n("./src/packages/platform/utils/fetch/src/utils/as-json.js");function Le(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Me(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const Re="@atlassian.polaris.project.enabled",Ne=(e,t,s,n)=>"product_discovery"===s?Promise.resolve(!0):Object(Ae.a)(((e,t,s)=>null!=s?`${e}/rest/api/2/project/${t}/properties/${Re}?sessionId=${s}`:`${e}/rest/api/2/project/${t}/properties/${Re}`)(e,t,n),function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(s),!0).forEach((function(t){Me(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Le(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},xe.a)).then((e=>!(!e||!("key"in e)||e.key!==Re||!0!==e.value)||(De.a.safeWarnWithoutCustomerData("isPolarisProjectCheck","Request succeed but response is not expected",e),!1))).catch((e=>(404!==e.statusCode&&De.a.safeErrorWithoutCustomerData("isPolarisProjectCheck",`Request failed with code: ${e.statusCode}`,e),!1)))
;var Fe=n("./node_modules/redux/es/index.js"),Ue=n("./node_modules/redux-batched-actions/lib/index.js"),Ve=n("./node_modules/redux-observable/lib/es/index.js"),Ke=n("./node_modules/lodash/noop.js"),We=n.n(Ke),Be=n("./node_modules/rxjs/Rx.js"),He=n("./src/packages/platform/observability/analytics-web-react/src/utils/fire-track-event.js"),$e=n("./src/packages/rich-content/src/common/adf-parsing-utils.js"),Ge=n("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),qe=n("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js");const ze=e=>"string"==typeof e?""!==e.trim():!Object($e.g)(e);var Ye=e=>{const{comment:t}=e;return!!t&&("string"==typeof t?""!==t.trim():!Object($e.g)(t))},Qe=n("./node_modules/moment/moment.js"),Je=n.n(Qe);const Ze=e=>{const{accountId:t,displayName:s=null,avatarUrls:n=null}=e;return{accountId:t,displayName:s,avatarUrl:n&&n["48x48"]}},Xe=e=>{
const{id:t,author:s=null,updateAuthor:n=null,timeSpent:a,started:i,created:r,updated:o,comment:c=null}=e,l=o!==r;return{id:t,author:s&&Ze(s),timeSpent:a,started:Je()(i).valueOf(),updated:l?Je()(o).valueOf():null,updateAuthor:l&&n?Ze(n):null,comment:Object($e.h)(c)}},et=e=>e.map(Xe);var tt=n("./node_modules/lodash/omitBy.js"),st=n.n(tt),nt=n("./node_modules/query-string/index.js"),at=n("./src/packages/platform/utils/fetch/src/utils/requests.js");const it=(e,t)=>`${e}/rest/internal/3/issue/${t}/worklog`,rt=({startAt:e=0,orderBy:t,worklogId:s,maxResults:n,issueKey:a,worklogAmount:i})=>{const r=null!=s?`, worklogId: "${s}"`:""
;return`query {\n        viewIssue(issueKey: "${a}") {\n            worklogs (${`startAt: ${e}`}${""===r&&null!=n?`, maxResults: ${n}`:""}${null!=t?`, orderBy: "${t}"`:""}${r}${null!=i?`, worklogAmount: ${i}`:""}) {\n                nodes {\n                id\n                author {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                timeSpent\n                started\n                updated\n                created\n                updateAuthor {\n                    accountId\n                    displayName\n                    avatarUrl\n                }\n                comment\n            }\n            totalCount\n            startIndex\n            }\n        }\n    }`},ot=e=>!e;var ct=n("./src/packages/platform/utils/xsrf-token/src/index.js"),lt=n("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js");function ut(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(s),!0).forEach((function(t){pt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ut(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var mt=Object(Ve.combineEpics)(((e,t)=>e.ofType(lt.a).switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(Ee.l)(Object(le.x)(s)),i=Object(Ge.h)(s),r=Object(Ge.i)(s),o=Object(qe.a)(i.daysPerWeek,i.hoursPerDay),{payload:{values:c},meta:{analyticsEvent:l}}=e,{timeRemaining:u,workDescription:d}=c||{},p=!!ze(d)&&Object($e.d)(d)
;return Be.Observable.from(((e,t,s)=>{const{timeLogged:n,timeLoggedSeconds:a,workDescription:i,timeRemaining:r,timeRemainingSeconds:o,dateStarted:c}=s||{};let l=n,u=r;Object(W.isFixTimeTrackingFormatEnabled)()&&(l=(a||0)/60+"m",u&&(u=(o||0)/60+"m"));const d=st()({adjustEstimate:u?"new":"auto",newEstimate:u},ot),p=`${it(e,t)}?${Object(nt.stringify)(d)}`;return Object(at.d)(p,{body:JSON.stringify({timeSpent:l,comment:i,started:s.dateStarted?Je()(c).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):void 0})})})(n,a,c)).mergeMap((e=>{const t=Xe(e),s=Ye(t);Object(He.a)(l,{action:"added",actionSubjectId:t.id,attributes:{withComment:s}});const n=(r.timeSpentSeconds||0)+e.timeSpentSeconds,a=o(u),i=dt(dt({},r),{},{timeSpentSeconds:n},null!==a?{remainingEstimateSeconds:a}:{});return Be.Observable.of(Object(lt.o)(e.id,i,{shouldFetchViewContext:p}),Object(lt.F)(e.id))})).catch((e=>{const{timeLogged:t}=c,s={logTimeLength:t&&t.length,remainingTimeLength:u&&u.length}
;return ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.add-worklog",`Failed to save new worklog with input lengths: ${JSON.stringify(s)}`,e),Be.Observable.of(Object(lt.m)())}))}))),((e,t)=>e.ofType(lt.l).switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(te.l)(s),i=Object(Ge.h)(s),r=Object(qe.a)(i.daysPerWeek,i.hoursPerDay),{payload:{timeRemaining:o},meta:{analyticsEvent:c}}=e;let l=o;return Object(W.isFixTimeTrackingFormatEnabled)()&&(l=(r(o)||0)/60+"m"),Be.Observable.from(((e,t,s)=>Object(at.d)(`${e}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(nt.stringify)({issueId:t,timetracking_remainingestimate:s,timetracking_targetsubfield:"timetracking_remainingestimate",fieldsToForcePresent:"timetracking",singleFieldEdit:!0,skipScreenCheck:!0,atl_token:Object(ct.a)()})}))(n,a,l)).do((()=>{Object(He.a)(c,{action:"time-remaining-updated"})})).map((()=>Object(lt.P)(r(l)))).catch((e=>{
const t=l&&l.length;return ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.update-time-remaining",`Failed to update time remaining with input length: ${t}`,e),Be.Observable.of(Object(lt.N)())}))})))),bt=n("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),ft=(e,t,s,n,a)=>((e,t,s,n,a)=>Object(at.a)(`${it(e,t)}/${s}?adjustEstimate=${a?`new&newEstimate=${n}`:"leave"}`))(e,t,s,n,a);const gt=(e,t)=>e.ofType(lt.c).switchMap((()=>{const e=t.getState();if(Object(Ge.g)(e).length>0)return Be.Observable.empty();const s=Object(Ge.n)(e),n=Object(Ge.k)(e),a=Object(bt.b)(e);if(s>0)return"NEWEST_FIRST"===a?Be.Observable.of(Object(lt.x)()):Be.Observable.of(Object(lt.z)());return n>s?"NEWEST_FIRST"===a?Be.Observable.of(Object(lt.z)()):Be.Observable.of(Object(lt.x)()):Be.Observable.empty()})),ht=e=>(t,s)=>t.ofType(lt.b).switchMap((({payload:{worklogId:t,timeRemaining:n,isAdjustTimeRemainingChecked:a},meta:{analyticsEvent:i}})=>{
const r=s.getState(),o=Object(le.f)(r),c=Object(Ee.l)(Object(le.x)(r)),l=Object(Ge.m)(r)[t],u=l&&l.comment,d=null!==u&&Object($e.d)(u);return Be.Observable.from(ft(o,c,t,n,a)).map((()=>{const s=Object(Ge.m)(r)[t];return d&&e.refreshAttachments(Object(Ee.l)(c)),Object(lt.s)(t,((e,t,s)=>{const n=Object(Ge.h)(e),a=Object(qe.a)(n.daysPerWeek,n.hoursPerDay);return{timeSpentSecondsDelta:-(a(t.timeSpent)||0),newRemainingEstimateSeconds:a(s)}})(r,s,n))})).do((()=>Object(He.a)(i,{action:"deleted",actionSubjectId:t,attributes:{timeAdjusted:a}}))).catch((e=>(ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.delete-worklog",`Could not delete worklog '${t}'`,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(lt.q)()))))}));const yt=()=>({type:"FETCH_VIEW_CONTEXT_REQUEST"}),Ot=e=>({type:"FETCH_VIEW_CONTEXT_SUCCESS",payload:e}),jt=e=>({type:"FETCH_VIEW_CONTEXT_FAILURE",payload:{error:e}}),vt=()=>({type:"MARK_TOKEN_AS_OUTDATED"})
;var Et=n("./node_modules/lodash/isUndefined.js"),kt=n.n(Et);var wt=(e,t,s,n)=>Object(at.e)(((e,t,s,n)=>{let a=n.timeRemaining;Object(W.isFixTimeTrackingFormatEnabled)()&&a&&(a=(n.timeRemainingSeconds||0)/60+"m");const i=a?`?adjustEstimate=new&newEstimate=${a}`:"?adjustEstimate=leave";return`${it(e,t)}/${s}${i}`})(e,t,s,n),(e=>{let t=e.timeLogged;return Object(W.isFixTimeTrackingFormatEnabled)()&&(t=(e.timeLoggedSeconds||0)/60+"m"),{body:JSON.stringify(st()({timeSpent:t,started:e.dateStarted?Je()(e.dateStarted).format("YYYY-MM-DDTHH:mm:ss.SSSZZ"):void 0,comment:e.workDescription},kt.a))}})(n));function St(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ct(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?St(Object(s),!0).forEach((function(t){It(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):St(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function It(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Tt=(e,t)=>e.ofType(lt.d).switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(Ee.l)(Object(le.x)(s)),i=Object(Ge.m)(s),{payload:{worklogId:r,values:o},meta:{analyticsEvent:c}}=e;let l=!1;return ze(o.workDescription)&&(l=Object($e.e)(i[r].comment,o.workDescription),l&&t.dispatch(vt())),Be.Observable.from(((e,t,s,n)=>wt(e,t,s,n).then((e=>Xe(e))))(n,a,r,o)).do((e=>{const t=Ye(e);Object(He.a)(c,{action:"edited",actionSubjectId:r,attributes:{withComment:t}})})).mergeMap((e=>{const t=Ct(Ct({},i),{},{[r]:e}),n=Object(lt.w)(t,e.id,((e,t,s)=>{const n=Object(Ge.h)(e),a=Object(qe.a)(n.daysPerWeek,n.hoursPerDay),i=Object(Ge.m)(e)[t.id]
;if(!i)return ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.edit-worklog","Could not find existing worklog with matching ID when editing a worklog and calculating time tracking deltas."),{timeSpentSecondsDelta:0,newRemainingEstimateSeconds:a(s)};const r=a(i.timeSpent)||0;return{timeSpentSecondsDelta:(a(t.timeSpent)||0)-r,newRemainingEstimateSeconds:a(s)}})(s,e,o.timeRemaining),{shouldFetchViewContext:l});return e.started!==i[r].started?Be.Observable.of(n,Object(lt.F)(r)):Be.Observable.of(n)})).catch((e=>(ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.edit-worklog","Failed to save edited worklog:",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(lt.u)()))))})),Pt=n("./src/packages/platform/services/issue/src/source/issue-express/graphql-util.js"),_t=n("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js");var xt=({startAt:e,orderBy:t,baseUrl:s,issueKey:n,maxResults:a})=>Object(_t.a)(`${s}/rest/gira/1/`,{
method:"POST",body:JSON.stringify({query:rt({startAt:e,orderBy:t,maxResults:a,issueKey:n})})});function Dt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function At(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Dt(Object(s),!0).forEach((function(t){Lt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Dt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Lt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Mt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t)
;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Rt={NEWEST_FIRST:"-started",OLDEST_FIRST:"started"},Nt=e=>{const{totalCount:t,nodes:s,startIndex:n}=e.viewIssue.worklogs,a=s.map((e=>{let{updateAuthor:t=null,updated:s,comment:n,created:a}=e;const i=s!==a;return At(At({},Mt(e,["updateAuthor","updated","comment","created"])),{},{updated:i?s:null,updateAuthor:i&&t?t:null,comment:Object($e.a)(n)})})),i=a.reduce(((e,t)=>At(At({},e),{},{[t.id]:t})),{});return{sortedWorklogIds:a.map((e=>e.id)),totalWorklogs:t,worklogs:i,startIndex:n||0}};function Ft(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ut(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?Ft(Object(s),!0).forEach((function(t){Vt(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ft(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Vt(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Kt=(e,t,s,n,a,i,r)=>xt({baseUrl:e,issueKey:t,maxResults:s,orderBy:Rt[n],startAt:a}).map(Pt.a).map((e=>Object(Pt.b)("issue.worklogs.fetch.epic.gira",e))).map(Nt).map((e=>((e,t,s,n)=>{let a;return a=t===lt.e?Math.max("NEWEST_FIRST"===s?n-e.sortedWorklogIds.length:n,0):Math.max("NEWEST_FIRST"===s?n:n-e.sortedWorklogIds.length,0),Ut(Ut({},e),{},{startIndex:a})})(e,i,n,r)));const Wt=(e,t,s,n,a)=>{let i=0,r=0;return e===lt.f?(r="NEWEST_FIRST"===a?t+n:Math.max(t-100,0),{maxResults:"NEWEST_FIRST"===a?Math.min(s-r,100):t-r,startAt:r}):(r="NEWEST_FIRST"===a?Math.max(0,t-100):t+n,
i="NEWEST_FIRST"===a?t-r:Math.min(s-r,100),{maxResults:i,startAt:r})},Bt=(e,t)=>e.ofType(lt.f).switchMap((()=>{const e=t.getState(),s=Object(le.f)(e),n=Object(le.x)(e),a=Object(bt.b)(e),i=Object(Ge.n)(e),r=Object(Ge.k)(e),o=Object(Ge.g)(e).length,{maxResults:c,startAt:l}=Wt(lt.f,i,r,o,a);return Kt(s,n,c,a,l,lt.f,i).map((({worklogs:e,totalWorklogs:t,sortedWorklogIds:s,startIndex:n})=>Object(lt.A)({worklogs:e,totalWorklogs:t,startIndex:n,sortedWorklogIds:s,selectedSortOrder:a}))).catch((e=>(ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-more-sorted-worklogs","Could not fetch more sorted worklogs:",new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.of(Object(lt.B)()))))})),Ht=(e,t)=>e.ofType(lt.e).switchMap((()=>{const e=t.getState(),s=Object(le.f)(e),n=Object(le.x)(e),a=Object(bt.b)(e),i=Object(Ge.n)(e),r=Object(Ge.k)(e),o=Object(Ge.g)(e).length,{maxResults:c,startAt:l}=Wt(lt.e,i,r,o,a)
;return Kt(s,n,c,a,l,lt.e,i).map((({worklogs:e,totalWorklogs:t,sortedWorklogIds:s,startIndex:n})=>Object(lt.y)({worklogs:e,totalWorklogs:t,startIndex:n,sortedWorklogIds:s,selectedSortOrder:a}))).catch((e=>(ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-more-sorted-worklogs","Could not fetch more sorted worklogs:",new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.of(Object(lt.B)()))))}));var $t=n("./src/packages/platform/ui/flags/src/services/index.js"),Gt=n("./src/packages/issue/issue-actions/activity-feed/src/messages.js"),qt=n("./src/packages/issue/issue-scroll/src/services/types.js"),zt=n("./src/packages/platform/utils/permalinks/src/index.js"),Yt=n("./src/packages/platform/utils/permalinks/src/constants.js"),Qt=n("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),Jt=n("./src/packages/issue/issue-view/src/common/messages/flags.js")
;var Zt=({orderBy:e,baseUrl:t,issueKey:s,worklogAmount:n,worklogId:a})=>Object(_t.a)(`${t}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:rt({orderBy:e,worklogAmount:n,issueKey:s,worklogId:a})})});const Xt=(e,t)=>{const s=Object(le.f)(e),n=Object(Ee.l)(Object(le.x)(e)),a=Object(bt.b)(e);return((e,t,s,n,a)=>Zt({baseUrl:e,issueKey:t,worklogAmount:s,orderBy:Rt[n],worklogId:a}).map(Pt.a).map((e=>Object(Pt.b)("issue.worklogs.fetch.epic.gira",e))).map(Nt))(s,n,Math.floor(5),a,t)},es=(e,t)=>e.ofType(lt.i).switchMap((e=>{const s=t.getState(),{payload:n}=e;return Xt(s,n.worklogId).map((({totalWorklogs:e,worklogs:t,sortedWorklogIds:s,startIndex:n})=>Object(lt.H)(s,t,n||0,e))).catch((e=>(ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-worklog-by-id","Failed to load worklog list after adding new worklog",e),Be.Observable.of(Object(lt.G)()))))}))
;var ts=n("./src/packages/platform/observability/analytics-web-react/src/utils/fire-operational-event.js"),ss=(e,t,s,n,a)=>((e,t,s,n,a)=>Object(at.b)(`${it(e,t)}?startAt=${s}&reverseSortOrder=${a?"true":"false"}${n?`&maxResults=${n}`:""}`))(e,t,s,n,a).then((e=>(e=>({totalWorklogs:e.total,worklogs:et(e.worklogs)}))(e)));function ns(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function as(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ns(Object(s),!0).forEach((function(t){is(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ns(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function is(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,
writable:!0}):e[t]=s,e}const rs=(e,t,s,n,a)=>Be.Observable.from(ss(e,t,n,a,!0)).do((e=>Object(ts.a)(s,{attributes:{worklogItemCount:e.worklogs.length}}))).map((({totalWorklogs:e,worklogs:t})=>Object(lt.K)(t.map((e=>e.id)),t.reduce(((e,t)=>as(as({},e),{},{[t.id]:t})),{}),e))).catch((e=>(ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-worklogs","Could not fetch worklogs:",new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.of(Object(lt.I)())))),os=(e,t)=>e.ofType(lt.j).switchMap((({payload:{baseUrl:e,issueKey:s},meta:{analyticsEvent:n}})=>{const a=t.getState(),i=Object(Ge.g)(a).length;return rs(e,s,n,i,10)})),cs=e=>e.ofType(lt.k).switchMap((({payload:{baseUrl:e,issueKey:t},meta:{analyticsEvent:s}})=>rs(e,t,s,0,5)));var ls=({baseUrl:e,issueKey:t,maxResults:s,orderBy:n})=>Object(_t.a)(`${e}/rest/gira/1/`,{method:"POST",body:JSON.stringify({query:rt({maxResults:s,issueKey:t,orderBy:n})})})
;const us=(e,t)=>e.ofType(lt.g,lt.h).switchMap((()=>{const e=t.getState();return((e,t,s,n)=>ls({baseUrl:e,issueKey:t,maxResults:s,orderBy:Rt[n]}).map(Pt.a).map((e=>Object(Pt.b)("issue.worklogs.fetch.epic.gira",e))).map(Nt))(Object(le.f)(e),Object(le.x)(e),100,Object(bt.b)(e)).map((({worklogs:e,totalWorklogs:t,startIndex:s,sortedWorklogIds:n})=>Object(lt.E)({worklogs:e,totalWorklogs:t,startIndex:s,sortedWorklogIds:n}))).catch((e=>(ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-sorted-worklogs","Could not fetch sorted worklogs:",new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.of(Object(lt.B)()))))})),ds=(e,t)=>Object(Ve.combineEpics)(mt,os,cs,es,(e=>(t,s)=>t.ofType("SCROLL_TO_ATTACHMENT_WORKLOG").switchMap((()=>{const t=s.getState(),n=e.getScrollTargetId(qt.a.WORKLOG);return null===n?Be.Observable.of():Xt(t,n).flatMap((({totalWorklogs:t,worklogs:s,sortedWorklogIds:a,startIndex:i})=>{const r={key:"Worklog",type:"Worklog",
name:Gt.a.worklog.defaultMessage};return window.history.replaceState({},null,Object(zt.c)(n,Yt.b.WORKLOG)),e.setScrollTarget(null),Be.Observable.of(Object(lt.H)(a,s,i||0,t),Object(Qt.c)(r),Object(lt.M)(!1))})).catch((e=>{ve.h.safeErrorWithoutCustomerData("issue.activity.worklog.fetch-worklog-by-id","Failed to load worklog list after attempting worklog attachment fetch",e);const{showFlag:t}=Object($t.f)();return t({type:"error",title:[Jt.a.commentWorklogAttachmentFetchFailedTitle,{field:"worklog"}],description:Jt.a.commentWorklogAttachmentFetchFailedDescription,isAutoDismiss:!0}),Be.Observable.of(Object(lt.G)())}))})))(t),Tt,(e=>Object(Ve.combineEpics)(ht(e),gt))(e),us,Ht,Bt),ps=(e,t)=>ds(e,t);var ms=n("./node_modules/rxjs/operators.js"),bs=n("./node_modules/lodash/curry.js");const fs=({meta:{batch:e}={}})=>!0===e,gs=n.n(bs)()(((e,{type:t})=>e.includes(t)))
;var hs=(...e)=>t=>t.pipe(Object(ms.filter)((t=>fs(t)?t.payload.some(gs(e)):e.includes(t.type))),Object(ms.flatMap)((t=>fs(t)?Be.Observable.from(t.payload.filter(gs(e))):Be.Observable.of(t)))),ys=n("./node_modules/icepick/icepick.js"),Os=n("./src/packages/platform/utils/constants/src/issue-link-types.js"),js=n("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),vs=n("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),Es=n("./src/packages/issue/issue-view/src/selectors/comment-selector.js"),ks=n("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),ws=e=>/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i.test(e);function Ss(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cs(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?Ss(Object(s),!0).forEach((function(t){Is(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ss(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Is(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ts=Object(ve.i)("comment","description"),Ps=e=>{switch(e){case"AUTHENTICATION_ERROR":return"AUTHENTICATION";case"NOT_FOUND_OR_NO_PERMISSION_ERROR":return"PERMISSION";case"UNKNOWN_ERROR":case"CONNECTIVITY_ERROR":default:return"GENERIC"}
},_s=Object(ve.i)("AUTHENTICATION","PERMISSION","GENERIC"),xs=Object(ve.i)("assignee","labels","priority","components","fixVersions","versions","com.pyxis.greenhopper.jira:gh-sprint","duedate","com.pyxis.greenhopper.jira:gh-epic-link","reporter","com.atlassian.jira.plugin.system.customfieldtypes:storypoint","description","watches","summary","timeoriginalestimate","timetracking","com.atlassian.jira.plugin.system.customfieldtypes:labels","com.atlassian.jira.plugin.system.customfieldtypes:textfield","com.atlassian.jira.plugin.system.customfieldtypes:multiuserpicker","com.atlassian.jira.plugin.system.customfieldtypes:url","com.atlassian.jira.plugin.system.customfieldtypes:float","com.pyxis.greenhopper.jira:jsw-story-points","com.atlassian.jira.plugin.system.customfieldtypes:select","com.atlassian.jira.plugin.system.customfieldtypes:multiselect","com.atlassian.jira.plugin.system.customfieldtypes:version","com.atlassian.jira.plugin.system.customfieldtypes:textarea","com.atlassian.jira.plugin.system.customfieldtypes:multiversion","com.atlassian.jira.plugin.system.customfieldtypes:datepicker","com.atlassian.jira.plugin.system.customfieldtypes:grouppicker","com.atlassian.jira.plugin.system.customfieldtypes:multigrouppicker","com.atlassian.jira.plugin.system.customfieldtypes:userpicker","com.atlassian.jira.plugin.system.customfieldtypes:flagged","com.atlassian.jira.plugin.system.customfieldtypes:datetime","com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes","com.atlassian.jira.plugin.system.customfieldtypes:radiobuttons","com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color","com.atlassian.servicedesk:vp-origin","com.atlassian.servicedesk.assets-plugin:assetfield","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype","com.atlassian.servicedesk:sd-request-participants","com.atlassian.servicedesk:sd-customer-organizations","com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language","com.atlassian.jira.plugin.system.customfieldtypes:people","com.atlassian.jira.plugin.system.customfieldtypes:cascadingselect","com.atlassian.jira.plugin.system.customfieldtypes:project"),Ds=e=>t=>({
eventData:Object(H.a)(t),eventNameSuffix:e}),As=e=>e.startsWith("comment")?"comment":e,Ls=e=>(t,s)=>{const{payload:{fieldId:n}}=s,a=null!==n&&As(n);return{eventNameSuffix:e,eventData:{type:Ts(a)}}},Ms=e=>(t,s)=>{const{payload:{fieldId:n}}=s,a=null!=n?As(n):n;return{eventNameSuffix:e,eventData:{type:Ts(a)}}},Rs=e=>["updatedField","oldValId","newValId","oldValName","newValName"].filter((t=>e&&Object.hasOwnProperty.call(e,t))).reduce(((t,s)=>{const n=e&&e[s]?{[s]:e[s]}:{};return Cs(Cs({},t),n)}),{}),Ns=e=>({eventData:{commentCount:Object(Es.K)(e)}}),Fs=e=>{const t=(e=>e?JSON.stringify(e).length:0)(e.bodyAdf);return{isInternal:e.isInternal,charactersInCommentCount:t}};var Us={SAVE_LINKED_ISSUE_REQUEST:(e,t)=>Object(ys.merge)(Ds("issue-links.save.request"),((e,t)=>{
const{payload:{newIssueLinks:{issueLinkType:s,issueLinks:n}}}=t,a=(null!=n&&null!==n.linkedIssues&&void 0!==n.linkedIssues&&Object.keys(n.linkedIssues).length>0?Object.keys(n.linkedIssues).map((e=>n.linkedIssues[e].issueId)):[""])[0];return{eventData:{issueLinkTypeId:s.id,issueLinkTypeName:new ie.a(Object(Os.a)(s.label)),issueLinkLinkedIssueId:a}}})(0,t)),SAVE_REMOTE_LINKED_ISSUE_REQUEST:Ds("issue-links.save.request"),DELETE_LINKED_ISSUE_REQUEST:(e,t)=>Object(ys.merge)(Ds("issue-links.delete.request"),(e=>({eventData:{issueLinkTypeId:e.typeId,issueLinkTypeName:new ie.a(Object(Os.a)(e.typeName))}}))(Object(ks.f)(t.payload.linkedIssueId)(e))),SAVE_LINKED_ISSUE_SUCCESS:Ds("issue-links.save.success"),SAVE_LINKED_ISSUE_FAILURE:Ds("issue-links.save.failure"),SAVE_REMOTE_LINKED_ISSUE_SUCCESS:Ds("issue-links.save.success"),SAVE_REMOTE_LINKED_ISSUE_FAILURE:Ds("issue-links.save.failure"),SAVE_LINKED_ISSUE_RETRY:Ds("issue-links.save.retry"),
SAVE_REMOTE_LINKED_ISSUE_RETRY:Ds("issue-links.save.retry"),SAVE_LINKED_ISSUE_CANCEL:Ds("issue-links.save.cancel"),SHOW_DELETE_COMMENT_MODAL:Ds("comment.delete.linkclicked"),FETCH_OLDER_COMMENTS_REQUEST:Ds("comment.fetcholder.click"),FETCH_NEWER_COMMENTS_REQUEST:Ds("comment.fetchnewer.click"),EDIT_COMMENT_BEGIN:e=>Ds("comment.edit.linkclicked")(e),SAVE_COMMENT_SUCCESS:(e,t)=>Object(ys.merge)(Ds("comment.save.success")(e),{eventData:Cs(Cs({},Rs(t.payload)),{},{actionSubjectId:new ie.a(t.payload.comment.id),actionSubjectOptimisticId:new ie.a(t.payload.optimisticId)},Fs(t.payload.comment))}),DELETE_COMMENT_REQUEST:(e,t)=>Object(ys.merge)(Ds("comment.delete.modal.confirm")(e),{eventData:Cs(Cs({},Rs(t.payload)),{},{actionSubjectId:new ie.a(t.payload.id)})}),PASTED_INTO_COMMENT_FORM:(e,t)=>Object(ys.merge)(Ds("comment.paste")(e),{eventData:{isNewComment:"NEW_OPTIMISTIC_COMMENT"===t.payload.id,pastedContentLength:(t.payload.pastedContent||"").length,
containsEmailAddress:ws(t.payload.pastedContent)}}),FETCH_ISSUE_SUCCESS:e=>Object(ys.merge)(Ds("fetchissue.succeeded")(e),Ns(e)),REFRESH_ISSUE_SUCCESS:e=>Object(ys.merge)(Ds("refreshissue.succeeded")(e),Ns(e)),REFRESH_ISSUE_REQUEST:Ds("refreshissue.request"),FETCH_ISSUE_REQUEST:Ds("fetchissue.request"),LOAD_NEW_ISSUE:Ds("load-new-issue"),FETCH_ISSUE_FAILURE:(e,t)=>({eventNameSuffix:"fetchissue.failed",eventData:{error:_s(Ps(Object(te.i)(e))),statusCode:t.payload.statusCode,analyticsSource:Object(le.b)(e)}}),DELETE_DRAFT_REQUEST:Ls("issue.delete-draft.request"),DELETE_DRAFT_SUCCESS:Ls("issue.delete-draft.success"),DELETE_DRAFT_FAILURE:Ls("issue.delete-draft.failure"),DELETE_DRAFT_NEWER_CONTENT_FOUND:Ls("issue.delete-draft.replaced-by-new-content"),LOAD_DRAFT_SUCCESS:Ms("issue.load-draft.success"),LOAD_DRAFT_FAILURE:Ms("issue.load-draft.failure"),LOGIN_SUCCESSFUL:e=>({eventNameSuffix:"login.succeeded",eventData:{analyticsSource:Object(le.b)(e)}}),
FIELD_EDIT_BEGIN:(e,t)=>Object(ys.merge)(Ds("field.edit")(e),{eventData:{fieldType:xs(Object(js.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ie.a(t.payload.fieldEditSessionId),isReusableField:!0}}),FIELD_SAVE_REQUEST:(e,t)=>Object(ys.merge)(Ds("field.save")(e),{eventData:Cs(Cs({},Rs(t.payload.eventData||null)),{},{fieldType:xs(Object(js.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ie.a(Object(js.f)(t.payload.fieldId)(e)),isReusableField:!0,issueHierarchyLevel:Object(W.collapsedHierarchies)()?Object(vs.b)(e):Object(vs.f)(e)})}),FIELD_EDIT_CANCEL:(e,t)=>Object(ys.merge)(Ds("field.cancel")(e),{eventData:{fieldType:xs(Object(js.r)(t.payload.fieldId)(e)),fieldEditSessionId:new ie.a(Object(js.f)(t.payload.fieldId)(e)),isReusableField:!0}}),FIELD_PASTE:(e,t)=>Object(ys.merge)(Ds("field.paste")(e),{eventData:{fieldType:xs(Object(js.r)(t.payload.fieldId)(e)),isReusableField:!0,pastedContentLength:t.payload.pastedContent.length,containsEmailAddress:ws(t.payload.pastedContent)}})
},Vs=Object(ve.m)("issue");function Ks(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Ws(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Bs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(s),!0).forEach((function(t){Hs(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ws(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Hs(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const $s=({eventNameSuffix:e,eventData:t,analyticsEvent:s})=>{if(s)try{const e=((e,t)=>{const s=t.payload&&t.payload.action||"updated",{actionSubjectId:n,name:a,tags:i,containerType:r,containerId:o,objectType:c,objectId:l}=e;return{action:s,actionSubjectId:n,name:a,tags:i,containerType:r,containerId:o,objectType:c,objectId:l,attributes:Ks(e,["actionSubjectId","name","tags","containerType","containerId","objectType","objectId"])}})(t,s);Object(He.a)(s,e)}catch(a){De.a.safeErrorWithoutCustomerData("issue.instrumentation.trigger-analytics-action","Failed to send action track event",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:a}))}const n=(e=>{if(e&&e.attributes){const{attributes:t}=e,s=Ks(e,["attributes"]);return Bs(Bs({},t),s)}return e})(t);Vs(e,n)},Gs=Object.keys(Us);var qs=(e,t)=>e.pipe(hs(...Gs),Object(ms.map)((e=>((e,t)=>Us[t.type]&&Bs({
analyticsEvent:t.payload&&t.payload.analyticsEvent},Us[t.type](e,t)))(t.getState(),e))),Object(ms.filter)((e=>!!e)),Object(ms.tap)($s),Object(ms.ignoreElements)()),zs=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/page-visibility/index.js"),Ys=n("./src/packages/issue/issue-fetch-services/src/services/issue-media-upload-permissions/index.js"),Qs=n("./src/packages/issue/issue-view/src/utils/prefetched-resources/utils/fallback-on-error.js"),Js=n("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),Zs=n("./src/packages/issue/issue-view/src/common/util/errors/index.js");const Xs=e=>((e,t,s)=>e.delay(t.delay,s||void 0).take(t.take).concat(e.flatMap((e=>Be.Observable.throw(e)))))(e,{delay:5e3,take:3});var en=n("./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js"),tn=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,
collection:e.targetCollection,tokenIssueTimestamp:Date.now()-1e4});const sn=e=>Be.Observable.of(Object(en.b)(e)),nn=(e,t)=>Object(Ve.combineEpics)(((s,n)=>s.ofType("FETCH_UPLOAD_CONTEXT_REQUEST").switchMap((()=>{const s=n.getState();return((e,t,s)=>Object(Qs.a)(s,(()=>Object(Ys.b)(e,t))).map(tn).map(en.d).catch((e=>{if(403===e.statusCode)return sn(e);throw e})).retryWhen(Xs).catch(sn))(e(s),t(s))}))),((e,t)=>e.pipe(hs("FETCH_UPLOAD_CONTEXT_SUCCESS","CHECK_UPLOAD_CONTEXT"),Object(ms.switchMap)((()=>{const e=t.getState(),s=Object(Js.b)(e);if(null==s||!Object(zs.a)())return Be.Observable.empty();const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return Be.Observable.of(Object(en.c)()).delay(r)})))),(e=>e.ofType("FETCH_UPLOAD_CONTEXT_FAILURE").filter((({payload:e})=>403!==e.error.statusCode)).do((({payload:e})=>{const{error:t}=e;Object(Zs.a)("issue.media.fetch-upload-context-error","Error when fetching media upload context",t,new Oe.a({
eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:t.statusCode}}))})).ignoreElements()),(()=>Be.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap((()=>Object(zs.a)()?Be.Observable.of(Object(en.a)()):Be.Observable.empty())))),an=()=>({type:"FETCH_USER_AUTH_REQUEST"}),rn=e=>({type:"FETCH_USER_AUTH_SUCCESS",payload:e}),on=e=>`${e}/rest/internal/2/media/user/credentials`;var cn=n("./src/packages/issue/issue-view/src/utils/issue-view-fetch-error.js");const ln=e=>({clientId:e.id,token:e.token,tokenLifespanInMs:60*e.tokenDurationInMins*1e3,tokenIssueTimestamp:Date.now()-1e4}),un=e=>Be.Observable.of((e=>({type:"FETCH_USER_AUTH_FAILURE",payload:{statusCode:e}}))(e.statusCode)),dn=(e,t)=>Object(Qs.a)(t,(()=>(e=>Object(_t.a)(on(e)).catch((e=>{throw new cn.a(e,on("{baseUrl}"))})))(e))).map(ln).map(rn).catch((e=>{if(403===e.statusCode)return un(e);throw e})).retryWhen(Xs).catch(un)
;var pn=n("./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js"),mn=n("./src/packages/issue/media-provider/src/controllers/create-media-provider/utils.js");const bn=e=>Be.Observable.of(jt(e)),fn=(e,t,s,n,a)=>Object(Qs.a)(a,(()=>Object(pn.b)(e,t,s,n))).map(mn.a).map(Ot),gn=(e,t,s,n,a)=>fn(e,t,s,n,a).catch((e=>{if(403===e.statusCode)return bn(e);throw e})).retryWhen(Xs).catch(bn);var hn=(e,t,s,n)=>Object(Ve.combineEpics)(nn(e,t),((e,t,s,n)=>Object(Ve.combineEpics)(((a,i)=>a.ofType("FETCH_VIEW_CONTEXT_REQUEST").switchMap((()=>{const a=i.getState(),r=e(a),o=t(a),c=n.getMaxTokenLength();return s.refreshAttachments(Object(Ee.l)(o)),fn(r,o,c).retryWhen(Xs).catch((e=>Be.Observable.of(jt(e))))}))),((e,t)=>e.pipe(hs("FETCH_VIEW_CONTEXT_SUCCESS","CHECK_VIEW_CONTEXT"),Object(ms.switchMap)((()=>{const e=t.getState(),s=Object(Js.d)(e);if(null==s||!Object(zs.a)())return Be.Observable.empty()
;const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return Be.Observable.of(yt()).delay(r)})))),(e=>e.ofType("FETCH_VIEW_CONTEXT_FAILURE").do((({payload:e})=>{const{error:t}=e;Object(Zs.a)("issue.media.fetch-view-context-error","Error when fetching media view context",t,new Oe.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:t.statusCode}}))})).ignoreElements()),(()=>Be.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap((()=>Object(zs.a)()?Be.Observable.of((()=>({type:"CHECK_VIEW_CONTEXT"}))()):Be.Observable.empty())))))(e,t,s,n),(e=>Object(Ve.combineEpics)(((t,s)=>t.ofType("FETCH_USER_AUTH_REQUEST").switchMap((()=>{const t=s.getState(),n=e(t);return dn(n)}))),((e,t)=>e.pipe(hs("FETCH_USER_AUTH_SUCCESS","CHECK_USER_AUTH"),Object(ms.switchMap)((()=>{const e=t.getState(),s=Object(Js.c)(e);if(null==s||!Object(zs.a)())return Be.Observable.empty()
;const{tokenIssueTimestamp:n,tokenLifespanInMs:a}=s,i=n+a,r=Math.max(1,i-Date.now());return Be.Observable.of(an()).delay(r)})))),(e=>e.ofType("FETCH_USER_AUTH_FAILURE").filter((({payload:e})=>403!==e.statusCode)).do((({payload:e})=>{Object(Zs.a)("issue.media.fetch-user-auth-error","Error when fetching media user auth",e,new Oe.a({eventNameSuffix:"issue.error",type:"fetch",category:"media",app:"issue",event:{statusCode:e.statusCode}}))})).ignoreElements()),(()=>Be.Observable.fromEvent(window,"focus").startWith(null).debounceTime(1e3).switchMap((()=>Object(zs.a)()?Be.Observable.of((()=>({type:"CHECK_USER_AUTH"}))()):Be.Observable.empty())))))(e)),yn=n("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js"),On=n("./src/packages/issue/issue-view/src/drafts/draft-actions.js"),jn=n("./src/packages/issue/issue-view/src/drafts/draft-utils.js");let vn;const En=(e,t)=>{const{payload:{fieldId:s,draftKey:n}}=e;if(s)return((e,t)=>{
const s=Object(le.x)(e),n=Object(le.a)(e),a=Object(jn.c)(n,s,t),i=Object(jn.b)(a);return vn.remove(a),vn.remove(i),Be.Observable.of(Object(On.c)(t))})(t,s);const a=Object(jn.d)(n);return n?(e=>{const t=Object(jn.b)(e);return vn.remove(e),vn.remove(t),Be.Observable.of(Object(On.c)(e))})(a).catch((e=>(Object(Zs.a)("issue.draft.delete","Failed to delete a draft.",e),Be.Observable.of(Object(On.a)(a,e))))):Be.Observable.empty()};var kn=(e,t)=>(vn=Object(yn.b)("issue-drafts"),e.ofType("DELETE_DRAFT_REQUEST").mergeMap((e=>En(e,t.getState()))).catch((e=>(e=>Be.Observable.of(Object(On.a)(null,e)))(e))));let wn;var Sn=e=>(wn=Object(yn.b)("issue-drafts"),e.ofType("LOAD_DRAFT_REQUEST").mergeMap((e=>(e=>{const{payload:{fieldId:t,draftKey:s,draftHandler:n}}=e,a=Object(jn.d)(s),i=wn.get(s);if(i){if(Object(W.isFixUnsavedCommentPlaceholderEnabled)()&&Object($e.g)(i))return Be.Observable.empty();const e=n?Be.Observable.of(n(t,i)):Be.Observable.empty(),s=Be.Observable.of(Object(On.f)(a,i))
;return Be.Observable.concat(e,s).catch((e=>(Object(Zs.a)("issue.draft.fetch","Failed to fetch issue draft",e),Be.Observable.of(Object(On.d)(a,e)))))}return Be.Observable.empty()})(e))).catch((e=>(e=>Be.Observable.of(Object(On.d)(null,e)))(e))));let Cn;var In=(e,t)=>(Cn=Object(yn.b)("issue-drafts"),e.ofType("SAVE_DRAFT_REQUEST","DELETE_DRAFT_SUCCESS").throttleTime(1e3,Be.Scheduler.async,{leading:!0,trailing:!0}).switchMap((e=>"SAVE_DRAFT_REQUEST"===e.type?((e,t)=>{const{payload:{fieldId:s,value:n}}=e,a=Object(le.x)(t),i=Object(le.a)(t),r=Object(jn.c)(i,a,s);return Cn.set(r,n),Be.Observable.of(Object(On.i)(r,n))})(e,t.getState()):Be.Observable.empty())).catch((e=>(e=>(Object(Zs.a)("issue.save-draft","Failed to save draft",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(On.g)(e))))(e)))),Tn=n("./src/packages/issue/issue-view/src/actions/comment-actions.js")
;var Pn=(e,t)=>e.ofType("SELECT_ACTIVITY_SORT_ORDER","SELECT_ACTIVITY_ITEM").switchMap((({type:e})=>{const s=t.getState(),n=Object(bt.a)(s);if(Object(W.isActivitySortRevisionEnabled)()){const t="SELECT_ACTIVITY_SORT_ORDER"===e?["focusedWorklogId"]:["focusedCommentId","focusedWorklogId"];window.history.replaceState({},null,Object(ve.k)(t))}else window.history.replaceState({},null,Object(ve.k)(["focusedCommentId","focusedWorklogId"]));if(null===n)return Be.Observable.empty();if(!Object(W.isActivitySortRevisionEnabled)()&&("Comments"===n.type||"JSDComments"===n.type))return Be.Observable.of(Object(Tn.u)());if(Object(W.isActivitySortRevisionEnabled)()){if("SELECT_ACTIVITY_ITEM"===e&&("Comments"===n.type||"JSDComments"===n.type))return Be.Observable.of(Object(Tn.u)())}else if("Comments"===n.type||"JSDComments"===n.type)return Be.Observable.of(Object(Tn.u)());return"Worklog"===n.type?Be.Observable.of(Object(lt.C)()):Be.Observable.empty()}))
;const _n=e=>`\n    mutation {\n        setActivitySortOrder(orderBy: ${e}) {\n            success\n            errors {\n                message\n            }\n        }\n    }\n`,xn="issue.activity-feed.sort.save.gira",Dn=e=>{const{errors:t}=e.setActivitySortOrder;if(t&&t.length>0){const e={eventNameSuffix:"issue.error",type:"update",app:"issue",event:new Error(t[0].message)};De.a.safeErrorWithoutCustomerData(xn,"Error present in gira response when calling to update setActivitySortOrder",new Oe.a(e))}return e.setActivitySortOrder},An=(e,t)=>Object(_t.a)(`${e}/rest/gira/1/`,(e=>({method:"POST",body:JSON.stringify({query:_n(e)})}))(t)).map((e=>Object(Pt.b)(xn,e))).map(Dn);var Ln=(e,t)=>e.ofType("UPDATE_ACTIVITY_SORT_ORDER_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(le.f)(s);return An(n,e.payload).ignoreElements()})).catch((e=>(Object(Zs.a)("issue.activity-feed.sort.save.epic","Could not save sort order in jira issue view",e),
Be.Observable.empty()))),Mn=n("./src/packages/common-legacy-do-not-add-anything-new/src/authenticate-using-app-links/index.js"),Rn=n("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),Nn=(e,t)=>e.ofType("APPLINK_AUTHENTICATION_REQUEST").mergeMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=e.payload,{analyticsEvent:i}=e.meta,r=Object(Mn.a)(`${n}${a}`);return i&&Object(re.f)(i,"applink authenticate",{authStatus:"start"}),r?Be.Observable.fromPromise(r).map((()=>(i&&Object(re.f)(i,"applink authenticate",{authStatus:"success"}),Object(Rn.b)()))).catch((e=>(Object(Zs.a)("issue-applink-authentication-epic","Failed to authenticate with applinks",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.empty()))):Be.Observable.empty()})),Fn=n("./node_modules/lodash/get.js"),Un=n.n(Fn),Vn=n("./src/packages/issue/issue-view/src/actions/assign-issue-parent-modal-actions.js")
;var Kn=n("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js");const Wn=(e,t)=>`project=${e} AND issuetype in (${t.join(",")}) ORDER BY lastViewed DESC, updated DESC, priority DESC`,Bn=({issues:e})=>e.map((({id:e,key:t,fields:{summary:s,issuetype:n}})=>({id:Object(Ee.j)(e),key:Object(Ee.l)(t),summary:s,issueType:n})));function Hn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(s),!0).forEach((function(t){Gn(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hn(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Gn(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,
enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const qn=e=>e.reduce(((e,t)=>$n($n({},e),{},{[t.id]:t.parentId})),{});var zn=Object(Ve.combineEpics)(((e,t)=>e.ofType("FETCH_ISSUE_PARENTS_REQUEST").mergeMap((()=>{const e=t.getState();return((e,t,s)=>t?Object(_t.a)(Object(Kn.o)(e),{method:"POST",body:JSON.stringify({jql:Wn(t,s)})}).map(Bn):Be.Observable.of([]))(Object(le.f)(e),Object(te.C)(e),Object(vs.g)(e))})).map(Vn.c).catch((e=>(Object(Zs.a)("issue.fetch-parent.failure","",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Object(Vn.a)())))),((e,t)=>e.ofType("SET_PARENT_REQUEST","SET_PARENT_OPTIMISTIC").mergeMap((e=>{
const s=t.getState(),{payload:{issues:n}}=e,a="SET_PARENT_OPTIMISTIC"===e.type?e.payload.parentIssue&&e.payload.parentIssue.id:e.payload.parentId,i=Object(te.B)(s),r="SET_PARENT_OPTIMISTIC"===e.type?e.payload.parentIssue:i.find((e=>e.id===a)),o=n.filter((e=>e.parentId!==a&&e.id)).map((e=>Number(e.id))),c=qn(n.filter((e=>o.includes(Number(e.id)))));if(!o.length)return Be.Observable.empty();const l=Object(le.f)(s),u=Object(te.C)(s);return("SET_PARENT_OPTIMISTIC"===e.type?Be.Observable.fromPromise(e.payload.requestPromise):((e,t,s,n)=>t?Object(_t.a)(((e,t,s)=>`${e}/rest/internal/simplified/1.0/projects/${t}/issues/${s}/children`)(e,t,s),{method:"POST",body:JSON.stringify(n)}):Be.Observable.throw("Missing Project Id"))(l,u,e.payload.parentId,{issueIds:o})).flatMap((()=>r?Be.Observable.of(Object(Vn.g)(r,c)):Be.Observable.of(Object(Vn.j)(c)))).catch((e=>(Object(Zs.a)("issue.set-parent.failure","",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),
Be.Observable.empty())))}))),((e,t)=>e.ofType("UNSET_PARENT_REQUEST").mergeMap((e=>{const s=t.getState(),{payload:{issues:n}}=e,a=n.filter((e=>e.parentId&&e.id)).map((e=>Number(e.id))),i=qn(n.filter((e=>a.includes(Number(e.id)))));if(0===a.length)return Be.Observable.empty();return((e,t,s)=>t?Object(_t.a)(((e,t)=>`${e}/rest/internal/simplified/1.0/projects/${t}/issues/delete-parents`)(e,t),{method:"POST",body:JSON.stringify(s)}):Be.Observable.throw("Missing Project Id"))(Object(le.f)(s),Object(te.C)(s),{issueIds:a}).flatMap((()=>Be.Observable.of(Object(Vn.j)(i)))).catch((e=>(Object(Zs.a)("issue.unset-parent.failure","",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.empty())))}))),(e=>e.ofType("SET_PARENT_SUCCESS","UNSET_PARENT_SUCCESS").map((e=>((e,t=null)=>({type:"ISSUE_RELATIONSHIP_UPDATE_SUCCESS",payload:{oldParentIdsByIssueIds:e,parentIssueId:t}
}))(Un()(e,"payload.oldParentIdsByIssueIds",null),Un()(e,"payload.parentIssue.id",null)))))),Yn=n("./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js"),Qn=n("./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js");const Jn=(e,t,s,n)=>{const a=((e,t)=>`${e}/rest/api/2/attachment/upload/issue/${t}`)(t,s),i=(e=>({method:"POST",body:JSON.stringify({fileId:e.id})}))(e);return Object(_t.a)(a,i).map((t=>((e,t,s)=>({id:`${e.attachmentId}`,mediaApiFileId:t.id,createdDate:t.createdDate,author:s,mimetype:t.mimetype,filename:t.filename}))(t,e,n)))};var Zn=Object(Ve.combineEpics)(((e,t)=>e.ofType("ATTACHMENT_MEDIA_SERVICES_UPLOAD_END").mergeMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.x)(s),i=Object(le.a)(s),r=Object(Qn.b)(e.payload.id)(s);return Jn(r,n,a,i).retry(3).map(Yn.b).catch((e=>(Object(Zs.a)("issue.attachment.jira-create-error","Could not create attachment in Jira",e),Be.Observable.of(Object(Yn.a)(r,e.statusCode)))))
}))),(e=>e.ofType("ATTACHMENT_JIRA_CREATE_FAILURE").do((e=>{De.a.safeErrorWithoutCustomerData("issue.attachment.jira-create-error","Could not create attachment in Jira",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{statusCode:e.payload.statusCode}}))})).ignoreElements()),(e=>e.ofType("MEDIA_PICKER_ERROR","ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR").do((e=>{const{description:t,name:s,fileId:n}=e.payload;De.a.safeErrorWithoutCustomerData("issue.attachment.media-services-upload-error","Could not upload attachment to Media Services",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:{description:t,name:s,fileId:n}}))})).ignoreElements()));var Xn=Object(Ve.combineEpics)((e=>e.ofType("ATTACHMENT_MEDIA_SERVICES_UPLOAD_END").mapTo(vt())),(e=>e.ofType("ATTACHMENT_JIRA_CREATE_FAILURE").mapTo((()=>({type:"MARK_TOKEN_AS_UP_TO_DATE"
}))())),(e=>e.ofType("ATTACHMENT_JIRA_CREATE_SUCCESS").mapTo(yt()))),ea=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),ta=n("./src/packages/issue/issue-view/src/actions/card-cover-actions.js"),sa=n("./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js");const na=Kn.d,aa=(e,t)=>{const s=`[${t}]`;return ea.a`query {
            agile {
                board {
                    additionalBoardData(rapidViewId: ${e}) {
                        isMediaOnCardsEnabled
                    }
                    media(issueIds: ${s}) {
                        cardMedia {
                            issueId
                            attachmentId
                            availableAttachmentIds
                        }
                    }
                }
            }
    }`},ia=e=>(Object(Zs.a)("issue.card-cover.fetch",e.message,e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(ta.a)()));var ra=(e,t)=>e.pipe(hs("FETCH_ISSUE_SUCCESS","ATTACHMENT_JIRA_CREATE_SUCCESS"),Object(ms.filter)((()=>Object(sa.b)(t.getState()))),Object(ms.flatMap)((()=>(e=>{const t=Object(le.D)(e),s=Object(te.l)(e);return null==t||null==s?Be.Observable.empty():Object(_t.a)(na(Object(le.f)(e)),{method:"POST",body:JSON.stringify({query:aa(t,s)})})})(t.getState()).flatMap((e=>e.errors?ia(e):(e=>{const t=Un()(e,"data.agile.board.additionalBoardData.isMediaOnCardsEnabled",!1),s=Un()(e,"data.agile.board.media.cardMedia[0].attachmentId",null),n=Un()(e,"data.agile.board.media.cardMedia[0].availableAttachmentIds",[]);return Be.Observable.of(Object(ta.b)({isEnabled:t,attachmentId:s,availableAttachmentIds:n}))})(e))).catch((e=>ia(e))))));var oa=(e,t)=>e.ofType("CARD_COVER_UPDATE_REQUEST").flatMap((e=>((e,t)=>{
const s=Object(le.f)(e),n=Object(te.l)(e),{attachmentId:a}=t.payload;if(null==n)return Be.Observable.empty();const i={method:a?"PUT":"DELETE"};return Object(_t.a)(((e,t,s)=>{const n=`${e}/rest/greenhopper/1.0/xboard/work/media/${t}`;return s?`${n}?attachmentId=${s}`:n})(s,n,a),i)})(t.getState(),e).flatMap((()=>(()=>Be.Observable.of(Object(ta.e)()))())).catch((t=>((e,t)=>(ve.h.safeErrorWithoutCustomerData("issue.card-cover.update",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),Be.Observable.of(Object(ta.c)(t.payload.currentAttachmentId))))(t,e))))),ca=n("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),la=n("./src/packages/issue/issue-view/src/actions/change-issue-type-actions.js");const ua=e=>e.issueTypes,da=(e,t,s)=>((e,t,s)=>Object(_t.a)(`${e}/rest/internal/2/issue/${t}/changeissuetype`,{method:"post",body:JSON.stringify({targetIssueTypeId:s})}))(e,t,s).map((e=>e.changeSuccessful))
;var pa=n("./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js");const ma=(e,t,s,n)=>{const a=((e,t,s)=>({action:e,actionSubjectId:Object(ie.c)(t)(t),attributes:s}))(t,s,n);Object(He.a)(e,a)};var ba=Object(Ve.combineEpics)(((e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_REQUEST").switchMap((e=>{const s=Object(le.f)(t.getState()),{issueKey:n,targetType:a,issueId:i,analyticsEvent:r,currentType:o}=e.payload;return!o.subtask&&a.subtask?(ma(r,"updated","simpleChangeIssueTypeRedirect",{subTask:a.subtask}),Be.Observable.of(Object(la.f)(i,o,a))):da(s,n,a.id).map((e=>e?(ma(r,"updated","simpleChangeIssueTypeSuccess"),Object(la.h)(n,a.name)):(ma(r,"updated","simpleChangeIssueTypeRedirect",{subTask:a.subtask}),Object(la.f)(i,o,a)))).catch((e=>(ve.h.safeErrorWithoutCustomerData("change.issue.type.simplechange",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(la.e)(e)))))
}))),((e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS").switchMap((()=>Object(pa.c)(t.getState()).flatMap((e=>Be.Observable.of(Object(V.d)(e))))))),((e,t)=>e.ofType("SIMPLE_CHANGE_ISSUE_TYPE_NOT_ALLOWED").do((e=>{const s=Object(le.f)(t.getState()),{issueId:n,currentType:a,targetType:i}=e.payload;a.subtask&&i.subtask?Object(ca.a)(`${s}/secure/MoveSubTaskChooseOperation!default.jspa?id=${n}`,!1):!a.subtask&&i.subtask?Object(ca.a)(`${s}/secure/ConvertIssue.jspa?id=${n}`,!1):Object(ca.a)(`${s}/secure/MoveIssue!default.jspa?id=${n}`,!1)})).ignoreElements())),fa=n("./src/packages/issue/issue-view/src/common/service/issue/changeboarding-local-storage.js");const ga=e=>(De.a.safeErrorWithoutCustomerData("jira.user.issue.changeboarding.lastinteracted","Error saving last interacted changeboarding timestamp",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.empty());var ha=Object(Ve.combineEpics)((e=>e.ofType("CHANGEBOARDING_BANNER_SEEN").do((e=>{
Object(fa.c)(e.payload.currentSeenTimes+1),e.payload.firstSeenTimestamp||Object(fa.b)(Date.now())})).ignoreElements()),((e,t)=>e.ofType("CHANGEBOARDING_TOUR_BEGIN","CHANGEBOARDING_BANNER_DISMISS").mergeMap((e=>Be.Observable.of(e).mergeMap((()=>((e,t)=>{const s=Object(le.f)(e),n=Object(Kn.b)(s);return Object(at.e)(n,{body:`${t}`})})(t.getState(),e.payload))).catch(ga))).ignoreElements()),((e,t)=>e.ofType("OPT_OUT_REQUEST").switchMap((e=>{const s=`${Object(le.f)(t.getState())}/rest/greenhopper/1.0/profile/labs-panel/issue-details-popup`,{analyticsEvent:n}=e.payload;return Be.Observable.from(Object(at.e)(s,{body:JSON.stringify({isEnabled:!1})})).map((()=>(n&&Object(re.b)(n,"changeboarding optedOut"),window.location.reload()))).catch((e=>(De.a.safeErrorWithoutCustomerData("jira.issue.details.changeboarding.optout","Could not opt-out from new issue view",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.empty())))}))));function ya(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Oa(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(s),!0).forEach((function(t){ja(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ya(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ja(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const va=(e,t)=>Object.entries(e).reduce(((e,[s,{value:n,autoCompleteUrl:a,allowedValues:i,editable:r,required:o,schema:c,title:l,configuration:u}])=>({fieldValues:Oa(Oa({},e.fieldValues),{},{[s]:n}),fieldConfigs:Oa(Oa({},e.fieldConfigs),{},{[s]:{autoCompleteUrl:a,allowedValues:i,isEditable:!t&&r,isRequired:o,
schema:c,title:l,configuration:u}})})),{fieldValues:{},fieldConfigs:{}}),Ea=(e,t)=>{const s=[],n=[],a=e.map((e=>{const{fieldValues:a,fieldConfigs:i}=((e,t)=>e.reduce(((e,{key:s,value:n,autoCompleteUrl:a,allowedValues:i,editable:r,required:o,schema:c,title:l})=>({fieldValues:Oa(Oa({},e.fieldValues),{},{[s]:void 0!==n?n:null}),fieldConfigs:Oa(Oa({},e.fieldConfigs),{},{[s]:{autoCompleteUrl:a,allowedValues:i,isEditable:!t&&r,isRequired:o,schema:c,title:l}})})),{}))(e.fields,t);return s.push({[e.key]:a}),n.push({[e.key]:i}),{id:e.id,key:e.key}}));return{issuesFieldsValues:s,issueFieldsConfigurations:n,childrenKeyList:a}},ka=(e,t,s,n,a=!1)=>{
const{setIssue:i,mergeIssue:r,setIssues:o,mergeIssues:c}=t,{setIssueConfig:l,setIssuesConfig:u,mergeIssueConfig:d,mergeIssuesConfig:p}=s,{fieldValues:m,fieldConfigs:b}=va(e,a),f=m["children-issues"]||[],g=m["epic-issues"]||[],h=m["children-issues"],y=m["epic-issues"],{issuesFieldsValues:O,issueFieldsConfigurations:j,childrenKeyList:v}=Ea(f,a),{issuesFieldsValues:E,issueFieldsConfigurations:k,childrenKeyList:w}=Ea(g,a),S=Oa(Oa(Oa({},m),h&&{"children-issues":v}),y&&{"epic-issues":w});a?r(n,S):i(n,S),a?d(n,b):l(n,b),c(E),a?c(O):o(O),p(k),a?p(j):u(j)};var wa=(e,t)=>s=>s.ofType("CHILD_ISSUE_ADD_SUCCESS").switchMap((s=>{const{childIssue:n,fieldsData:a}=s.payload;if(!a)return Be.Observable.empty();const{fieldValues:i,fieldConfigs:r}=va(a,!1);return e.setIssue(n.issueKey,i),t.setIssueConfig(n.issueKey,r),Be.Observable.empty()}));const Sa=["ADD_COMMENT_FORM_CANCEL","EDIT_COMMENT_CANCEL","SAVE_COMMENT_SUCCESS","DELETE_COMMENT_SUCCESS"];var Ca=e=>e.ofType(...Sa).mergeMap((e=>(e=>{
if("ADD_COMMENT_FORM_CANCEL"===e.type||e.payload.isNewComment)return Be.Observable.of(Object(On.b)({fieldId:Object(jn.a)("NEW_OPTIMISTIC_COMMENT")}));const t=(e=>{const t=(e.id||e.optimisticId).toString();return-1!==t.indexOf("NEW_OPTIMISTIC_COMMENT")?"NEW_OPTIMISTIC_COMMENT":t})(e.payload),s=Object(jn.a)(t);return Be.Observable.of(Object(On.b)({fieldId:s}))})(e))).catch((e=>(e=>(De.a.safeErrorWithoutCustomerData("issue.comment-delete-draft",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.empty()))(e)));const Ia={method:"DELETE"},Ta=(e,t,s)=>{const n=Object(le.f)(e),a=Object(Ee.l)(Object(le.x)(e)),i=((e,t,s)=>`${e}/rest/api/2/issue/${t}/comment/${s}`)(n,a,t),{bodyAdf:r}=Object(Es.t)(e)[t],o=!!r&&Object($e.d)(r);return Object(_t.a)(i,Ia).map((()=>(o&&s.refreshAttachments(a),Object(Tn.h)(t)))).catch((e=>((e,t)=>(Object(Zs.a)("issue.comment.delete","Could not delete a comment",e),
Be.Observable.of(404===e.statusCode?Object(Tn.h)(t):Object(Tn.f)(t))))(e,t)))};var Pa=e=>(t,s)=>t.ofType("DELETE_COMMENT_REQUEST").mergeMap((t=>{const n=s.getState(),a=t.payload.id;return Ta(n,a,e)})),_a=n("./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js");const xa=(e,t,s)=>{const n=Object(le.a)(t),a=Object(le.x)(t);return Object(Es.n)(t).map((i=>{const r=Object(jn.a)(i),o=Object(jn.c)(n,a,r),c=Object(Es.f)(i)(t),l=null!=c?c:void 0;return Be.Observable.of(Object(On.e)(i,o,((e,t,s)=>e&&t===s.payload.id?Tn.l:null)(s,i,e),l))}))},Da=e=>(Object(Zs.a)("issue.comment-load-draft",e.message,e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.empty())
;var Aa=Object(Ve.combineEpics)(((e,t)=>e.ofType("EDIT_COMMENT_BEGIN").mergeMap((e=>Be.Observable.merge(...xa(e,t.getState(),!0)))).catch((e=>Da(e)))),((e,t)=>e.pipe(hs("FETCH_ISSUE_SUCCESS","REFRESH_ISSUE_SUCCESS","FETCH_MORE_COMMENTS_SUCCESS","FETCH_LATEST_COMMENTS_SUCCESS"),Object(ms.mergeMap)((e=>e.payload.comments?Be.Observable.merge(...xa(e,t.getState(),!1)):Be.Observable.empty())),Object(ms.catchError)((e=>Da(e))))));var La=e=>e.ofType("SAVE_COMMENT_SUCCESS").filter((e=>e.meta.shouldFetchViewContext)).mapTo(yt());var Ma=(e,t)=>e.ofType("EDIT_COMMENT_UPDATE").switchMap((e=>((e,t)=>{const{payload:{id:s,value:n}}=e,a=Object(Es.f)(s)(t);return Be.Observable.of(Object(On.h)(Object(jn.a)(s),n,a))})(e,t.getState()))).catch((e=>(e=>(Object(Zs.a)("issue.comment-save-draft",e.message,e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),
Be.Observable.empty()))(e))),Ra=n("./src/packages/platform/utils/fetch/src/utils/errors.js"),Na=n("./src/packages/issue/issue-view/src/common/service/issue/comment-transformer.js");function Fa(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ua(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(s),!0).forEach((function(t){Va(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fa(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Va(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ka=(e,t,s,n,a)=>{const i=((e,t)=>{const s=e.getState();if(Object(le.s)(s))return{properties:[{
key:"sd.public.comment",value:{internal:Object(Es.C)(t)(s)}}]};return{}})(e,t),r=((e,t)=>Object(Es.z)(e.getState())?{visibility:"public"===t.type?null:t}:{})(e,a);return{method:n?"POST":"PUT",body:JSON.stringify(Ua(Ua({body:s},i),r))}},Wa=t=>{if(t instanceof Ra.b&&t.message)try{const e=JSON.parse(t.message);return e.errorMessages?e.errorMessages.join("; "):void 0}catch(e){return void Object(Zs.a)("issue.save.comment","Failed to parse FetchError",e)}},Ba=(e,{id:t,bodyAdf:s,isNewComment:n,analyticsEvent:a,visibility:i},{shouldFetchViewContext:r})=>Object(_t.a)(((e,t,s)=>{const n=e.getState();return(({baseUrl:e,issueKey:t,id:s="",isNewComment:n=!1})=>`${e}/rest/api/3/issue/${t}/comment${n?"":`/${s}`}`)({baseUrl:Object(le.f)(n),issueKey:Object(le.x)(n),id:t,isNewComment:s})})(e,t,n),Ka(e,t,s,n,i)).map(Na.e).map(Na.a).map((e=>Object(Tn.C)(e,t,n,a,{shouldFetchViewContext:r}))).catch((e=>(Object(Zs.a)("issue.save.comment","Failed to save a comment",e),Be.Observable.of(Object(Tn.z)({
optimisticId:t,isServerValidationError:!!e&&400===e.statusCode,invalidMessage:Wa(e)})))));var Ha=Object(Ve.combineEpics)(((e,t)=>e.ofType("SAVE_COMMENT_RETRY").map((e=>{const s=t.getState(),{optimisticId:n,isNewComment:a}=e.payload;return Object(Tn.A)(Ua(Ua({},Object(Es.H)(n)(s)),{},{isNewComment:a}))}))),((e,t)=>e.ofType("SAVE_COMMENT_REQUEST").groupBy((e=>e.payload.comment.id)).mergeMap((e=>e.concatMap((e=>{const{id:s,bodyAdf:n,isNewComment:a,visibility:i}=e.payload.comment,{analyticsEvent:r}=e.payload;if(!n||Object($e.g)(n))return Be.Observable.empty();let o=!1;if(a)o=Object($e.d)(n);else{const e=Object(Es.t)(t.getState());o=Object($e.e)(e[s].bodyAdf,n)}return o&&t.dispatch(vt()),Ba(t,{id:s,bodyAdf:n,isNewComment:a,analyticsEvent:r,visibility:i},{shouldFetchViewContext:o}).mergeMap((e=>{if("SAVE_COMMENT_FAILURE"===e.type)return Be.Observable.of(e);if(a){
const s=t.getState(),n=Object(Es.K)(s),a=Object(Es.F)(s),i=Object(Es.J)(s),r=Object(bt.b)(s),{numPrevCommentsToLoad:o,numNextCommentsToLoad:c}=Object(_a.a)(n,a,i),l="NEWEST_FIRST"===r&&o>0||"OLDEST_FIRST"===r&&c>0;return(Object(W.isActivitySortRevisionEnabled)()?o>0:l)?Be.Observable.zip(Be.Observable.of(e),Be.Observable.of(Object(Tn.u)(e.payload.comment.id))).mergeMap((e=>Be.Observable.from(e))):Be.Observable.zip(Be.Observable.of(e)).mergeMap((e=>Be.Observable.from(e)))}return Be.Observable.zip(Be.Observable.of(e)).mergeMap((e=>Be.Observable.from(e)))}))})))))),$a=e=>e.ofType("ADD_COMMENT_FORM_EXPAND","EDIT_COMMENT_BEGIN","PASTED_INTO_COMMENT_FORM","SAVE_COMMENT_SUCCESS").groupBy((e=>{switch(e.type){case"ADD_COMMENT_FORM_EXPAND":return"NEW_OPTIMISTIC_COMMENT";case"EDIT_COMMENT_BEGIN":case"PASTED_INTO_COMMENT_FORM":return e.payload.id;case"SAVE_COMMENT_SUCCESS":return e.payload.optimisticId.startsWith("NEW_OPTIMISTIC_COMMENT")?"NEW_OPTIMISTIC_COMMENT":e.payload.optimisticId;default:
return null}})).map((e=>{const t=e.filter((({type:e})=>"ADD_COMMENT_FORM_EXPAND"===e||"EDIT_COMMENT_BEGIN"===e));return e.window(t).map((e=>{const t=e.filter((({type:e})=>"SAVE_COMMENT_SUCCESS"===e)),s=e.filter((({type:e})=>"PASTED_INTO_COMMENT_FORM"===e)).takeUntil(t).reduce(((e,t)=>[...e,t.payload.pastedContent]),[]);return t.withLatestFrom(s).mergeMap((([e,t])=>{const{comment:s}=e.payload;return 0===t.length?Be.Observable.empty():Be.Observable.of(Object(Tn.D)(s,t))}))})).mergeAll()})).mergeAll(),Ga=n("./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js");var qa=e=>Object(_t.a)(Object(Kn.c)(e)),za=(e,t)=>e.ofType("FETCH_CONFLUENCE_APP_LINKS_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(le.f)(e);return qa(s).map(Ga.c).catch((e=>(Object(Zs.a)("issue.fetch.confluence-app-links-epic","FETCH_CONFLUENCE_APP_LINKS_REQUEST: Failed to fetch confluence app links data",e,new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),
Be.Observable.of(Object(Ga.b)()))))})),Ya=n("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js");const Qa=e=>"blogpost"===e?"blogpost":"page",Ja=e=>{if(e.object.status.resolved){return{id:Object(Ee.e)(e.id),globalId:Object(Ee.t)(e.globalId),href:Object(Ee.i)(e.object.url),title:e.object.title,type:Qa(e.object.icon.title),lastUpdatedContext:{user:{displayName:Object(Ee.f)(e.object.status.icon.title),avatarUrl:Object(Ee.i)(e.object.status.icon.url16x16)}}}}return{id:Object(Ee.g)(e.id),error:e.object.status.icon.url16x16?"APPLINK_REQ_AUTH":"REMOTE_SERVER",link:{id:Object(Ee.g)(e.id),globalId:Object(Ee.t)(e.globalId),href:Object(Ee.i)(e.object.url)},repairLink:{href:Object(Ee.i)(e.object.status.icon.url16x16)}}};var Za=n("./src/packages/issue/issue-view/src/actions/fetch-recently-visited-confluence-pages-actions.js");const Xa=["blogpost","page"],ei=e=>!e.includes("http")&&window&&window.location?`${window.location.protocol}//${window.location.host}${e}`:e
;var ti=e=>((e,t)=>e.map((e=>e.filter((e=>Xa.includes(e.type))).map((e=>({id:Object(Ee.e)(e.id.toString()),globalId:Object(Ee.t)(""),href:Object(Ee.i)(ei(`${t}/wiki${e.url}`)),title:e.title,type:Qa(e.contentType),space:e.space}))))))((e=>Object(_t.a)((e=>`${e}/wiki/rest/recentlyviewed/1.0/recent?limit=20`)(e)))(e),e);const si="issue.fetch.confluence-pages-epic",ni="addconfluencelink.error.issueId.invalid";var ai=Object(Ve.combineEpics)(((e,t)=>e.ofType("CREATE_CONFLUENCE_PAGE_LINK_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.w)(s),{pageHref:i}=e.payload,{analyticsEvent:r}=e.meta;return a?Be.Observable.from((({baseUrl:e,issueId:t,pageHref:s})=>Object(at.d)(`${(e=>`${e}/rest/confluenceIssueLink/1/confluence`)(e)}${((e,t)=>`?issueId=${e}&pageUrl=${t}`)(t,s)}`,{body:JSON.stringify({})}).then(Ja))({baseUrl:n,pageHref:i,issueId:Object(Ee.j)(a.toString())})).do((e=>{Object(He.a)(r,{action:"created",actionSubjectId:e.id,attributes:{
createdWithError:!!Un()(e,"error"),needsAuthorization:!!Un()(e,"repairLink.href")}})})).map((e=>Object(Ya.d)(e))).catch((e=>(Object(Zs.a)(si,"CREATE_CONFLUENCE_PAGE_LINK_REQUEST",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(Ya.a)(e.message))))):(ve.h.safeErrorWithoutCustomerData(si,"CREATE_CONFLUENCE_PAGE_LINK_REQUEST",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(ni)})),Be.Observable.of(Object(Ya.a)(ni)))}))),((e,t)=>e.ofType("DELETE_CONFLUENCE_PAGE_LINK_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.x)(s),{globalId:i}=e.payload;return Be.Observable.fromPromise(((e,t,s)=>Object(at.a)(`${e}/rest/api/2/issue/${t}/remotelink?globalId=${encodeURIComponent(s)}`))(n,a,i)).map(Ya.g).catch((e=>(Object(Zs.a)(si,"DELETE_CONFLUENCE_PAGE_LINK_REQUEST: Failed to delete confluence page link",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),
Be.Observable.of(Object(Ya.e)()))))}))),((e,t)=>e.ofType("FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(le.f)(e);return ti(s).map(Za.c).catch((e=>{const t={eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e};return ve.h.safeErrorWithoutCustomerData("issue.fetch.confluence-recently-viewed-epic","FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_REQUEST: Failed to fetch recently viewed confluence pages",new Oe.a(t)),Be.Observable.of(Object(Za.a)())}))})))),ii=n("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js");var ri=(e,t)=>e.ofType("SET_CONTEXT").map((()=>Object(le.k)(t.getState()))).pairwise().mergeMap((([e,t])=>((e,t)=>e!==t?Be.Observable.of(Object(ii.c)({fromIssueKey:e,toIssueKey:t})):Be.Observable.empty())(e.issueKey,t.issueKey))),oi=n("./src/packages/issue/issue-view/src/actions/issue-links-actions.js");const ci={method:"DELETE"};var li=(e,t)=>e.ofType("DELETE_LINKED_ISSUE_REQUEST").mergeMap((e=>{
const s=t.getState(),n=Object(le.f)(s),a=e.payload.linkedIssueId,i=((e,t)=>`${e}/rest/api/2/issueLink/${t}`)(n,a),r=Object(ks.f)(a)(s),o=Object(ks.h)(r.linkedIssueKey)(s);return Object(_t.a)(i,ci).map((()=>Object(oi.f)(a,{issueId:o.id,direction:r.direction}))).catch((e=>(Object(Zs.a)("issue.issue-links.delete-issue-link-error","Error when removing issue link",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(oi.d)(a)))))})),ui=n("./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js");const di={method:"DELETE"},pi=(e,t,s)=>Object(_t.a)(((e,t,s)=>`${e}/rest/api/3/issue/${t}/remotelink?globalId=${encodeURIComponent(s)}`)(e,t,s),di),mi=(e,t)=>e.ofType("DELETE_REMOTE_LINKED_ISSUE_REQUEST").mergeMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.x)(s),{globalId:i,analyticsEvent:r}=e.payload;return pi(n,a,i).map((()=>(r&&Object(re.b)(r,"remoteLinkedIssue deleted"),
Object(ui.c)(i)))).catch((e=>(Object(re.b)(r,"remoteLinkedIssue deleteFailed"),Object(Zs.a)("issue.issue-links.delete-issue-link-error","remote",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(ui.a)(i)))))}));var bi=n("./node_modules/uuid/index.js"),fi=n.n(bi),gi=n("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),hi=n("./src/packages/forge/forge-ui/src/common/ui/flags/issue-panel/operation-action/limit-failed/index.js"),yi=n("./src/packages/forge/forge-ui/src/common/ui/flags/issue-panel/operation-action/generic-error/index.js"),Oi=n("./src/packages/forge/forge-ui/src/utils/connect/index.js"),ji=n("./src/packages/forge/forge-ui/src/utils/errors/index.js"),vi=n("./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js"),Ei=n("./src/packages/issue/issue-view/src/actions/forge-actions.js"),ki=n("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js")
;const wi=(e,t,s)=>`${e}/rest/api/2/issue/${t}/properties/${s}`;var Si=n("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),Ci=n("./node_modules/lodash/fp/pipe.js"),Ii=n.n(Ci),Ti=n("./node_modules/lodash/isBoolean.js"),Pi=n.n(Ti),_i=n("./node_modules/lodash/isNumber.js"),xi=n.n(_i),Di=n("./node_modules/lodash/isString.js"),Ai=n.n(Di);function Li(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mi(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Li(Object(s),!0).forEach((function(t){Ri(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Li(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ri(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ni=e=>t=>{if(404===t.statusCode)return e();throw t},Fi=(e,t,s="none")=>e.added===t&&("none"===s||e.id===s),Ui=(e,t,s)=>{const n=((e,t,s)=>`${e}/rest/api/2/issue/${t}/properties/${s}`)(e,t,s);return{get:()=>(e=>Object(at.b)(e).then((({value:e})=>(Array.isArray(e)?e:[]).map((({added:e,id:t,collapsed:s})=>({added:e,id:t,collapsed:s}))).filter((({added:e,id:t,collapsed:s})=>xi()(e)&&(null==t||Ai()(t))&&(null==s||Pi()(s)))))).catch(Ni((()=>[]))))(n),update:e=>((e,t)=>Object(at.e)(e,{body:JSON.stringify(t)}).then((()=>t)))(n,e),deleteEntry:()=>(e=>Object(at.a)(e).then((()=>[])).catch(Ni((()=>[]))))(n)}},Vi=Ii()([async(e,{issueKey:t,extensionId:s,added:n,id:a},i)=>{const{get:r,update:o}=Ui(e,t,s),c=await r();if(0===c.length)return[];const l=c.map((e=>Mi(Mi({},e),{},{collapsed:Fi(e,n,a)?i:e.collapsed})));return o(l).then((()=>l))
},Be.Observable.fromPromise]),Ki=Ii()([async(e,t,s,n,a,i)=>{const{get:r,update:o}=Ui(e,t,s),c=await r(),l={added:n,id:i,collapsed:!1};if(0===c.length)return o([l]).then((()=>[l]));if(a){if(c.length>=5)throw new ji.a("Multiple issue panel installation limit reached.");return o([...c,l]).then((()=>[...c,l]))}return[c[0]]},Be.Observable.fromPromise]),Wi=Ii()([async(e,t,s,n,a)=>{const{get:i,update:r,deleteEntry:o}=Ui(e,t,s),c=await i();if(0===c.length)return[];const l=c.filter((e=>!Fi(e,n,a)));return 0===l.length?o():r(l)},Be.Observable.fromPromise]);var Bi=n("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js");function Hi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?Hi(Object(s),!0).forEach((function(t){Gi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Hi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Gi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const qi="issue.ecosystem.ecosystem-content-panel-epic",zi=(e,t)=>({addonModuleKey:t,baseUrl:Object(le.f)(e),parentIssueKey:Object(le.x)(e)}),Yi=(e,t)=>{const s=Object(Bi.l)(t)(e);if(s)return s.name},Qi=(e,t,s)=>{const n=Object(ki.b)(s,10);return((e,t,s)=>{const n=wi(e,t,s);return Be.Observable.fromPromise(Object(at.e)(n,{body:JSON.stringify({added:s})}))})(e,t,n).map((()=>Object(vi.c)(n))).catch((e=>(De.a.safeErrorWithoutCustomerData(qi,`saveExtensionToIssue failed: ${e}`,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(vi.a)(e)))))}
;var Ji=Object(Ve.combineEpics)(((e,t)=>e.ofType("ADD_CONTENT_PANEL_REQUEST").flatMap((e=>{const{addonModuleKey:s,baseUrl:n,parentIssueKey:a}=zi(t.getState(),e.payload),i=t.getState(),r=Object(Si.p)(i),o=Object(Bi.k)(i),c=Object(Si.f)(i),l=Object(Si.n)(i),u=!Object(Si.o)(i),d=Object(le.b)(i);if(Object(Oi.a)(e.payload)){const t=o.find((t=>Object(Oi.e)(t.appKey,t.moduleKey)===e.payload)),i=t?t.name:void 0,r=!(null==t||!t.allowMultiple);return((e,t,s,n,a)=>{const i=Date.now(),r=fi.a.v4().substring(0,8);return Ki(e,t,s,i,n,r).mergeMap((e=>{const t=e[e.length-1],n=Object(Oi.f)(s,r,t.added),i=Be.Observable.of(Object(Ei.e)(n),Object(vi.c)(n));return Object(gi.h)(a),i}))})(n,a,s,r,d).catch((e=>{Object(gi.d)(d,{error:e});const{showFlag:t}=Object($t.f)();return e instanceof ji.a?t(Object(hi.a)(i)):t(Object(yi.a)(i)),Be.Observable.of(Object(vi.a)(e))}))}return!l&&u?Be.Observable.merge(...c.map((e=>`${e.appKey}_${e.moduleKey}`)).filter((e=>!r.includes(e))).map((e=>Qi(n,a,e)))):Qi(n,a,s)
}))),(e=>e.ofType("ADD_CONTENT_PANEL_SUCCESS").switchMap((e=>{const t=e.payload;return Be.Observable.of(Object(vi.d)(t))}))),((e,t)=>e.ofType("REMOVE_CONTENT_PANEL_REQUEST").flatMap((e=>{const{addonModuleKey:s,baseUrl:n,parentIssueKey:a}=zi(t.getState(),e.payload),i=Object(ki.b)(s,10),r=t.getState(),o=Object(Si.p)(r),c=Object(le.b)(r);if(Object(Oi.a)(s)){const t=Yi(r,e.payload);return((e,t,s,n)=>{const a=Object(ki.a)(s);if(null==a)return Object(gi.c)(n,{error:Error(`Panel key doesn't match regexp: ${s}`)}),Be.Observable.of(Object(vi.g)());const{extensionId:i}=a,{id:r}=a,o=a.added;return Wi(e,t,i,o,r).mergeMap((()=>(Object(gi.g)(n),Be.Observable.of(Object(vi.i)(s),Object(Ei.f)(s)))))})(n,a,s,c).catch((e=>{Object(gi.c)(c,{error:e});const{showFlag:s}=Object($t.f)();return s(Object(yi.a)(t)),Be.Observable.of(Object(vi.g)(e))}))}if(!o.includes(s)&&!o.includes(i)){const e=Object(Si.g)(r)
;return Be.Observable.merge(...e.map((e=>`${e.appKey}_${e.moduleKey}`)).filter((e=>e!==s)).map((e=>Qi(n,a,e))))}const l=o.includes(s)?s:i;return((e,t,s)=>{const n=wi(e,t,s);return Be.Observable.fromPromise(Object(at.a)(n))})(n,a,l).map((()=>Object(vi.i)(l))).catch((e=>(De.a.safeErrorWithoutCustomerData(qi,`removeExtensionFromIssue failed: ${e}`,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(vi.g)(e)))))}))),((e,t)=>e.ofType("ADD_CONTENT_PANEL_SUCCESS","CONTENT_PANELS_CUSTOMISED_REQUEST").flatMap((e=>{const{baseUrl:s,parentIssueKey:n}=zi(t.getState(),e.payload);return Object(Si.n)(t.getState())?Be.Observable.empty():((e,t)=>{const s=wi(e,t,"issue.content.panel.customised.flag");return Be.Observable.fromPromise(Object(at.e)(s,{body:JSON.stringify({createdOn:new Date})}))})(s,n).map((()=>Object(vi.f)())).catch((e=>(De.a.safeErrorWithoutCustomerData(qi,`saveIssueCustomised failed: ${e}`,new Oe.a({eventNameSuffix:"issue.error",type:"js",
app:"issue",event:e})),Be.Observable.empty())))}))),((e,t)=>e.ofType("FORGE_ISSUE_PANEL_UPDATE_REQUEST").flatMap((e=>{const s=Object(le.f)(t.getState()),n=Object(le.b)(t.getState()),{issueKey:a,panelKey:i,collapsed:r}=e.payload,o=Object(ki.a)(i);if(null==o)return Object(gi.e)(n,{error:Error(`Panel key doesn't match regexp: ${i}`)}),Be.Observable.empty();const c=$i($i({},o),{},{issueKey:a});return Vi(s,c,r).map((()=>(Object(gi.i)(n),Object(Ei.h)({panelKey:i,collapsed:r})))).catch((e=>{Object(gi.e)(n,{error:e});const s=t.getState(),a=Yi(s,i),{showFlag:r}=Object($t.f)();return r(Object(yi.a)(a)),Be.Observable.empty()}))})))),Zi=n("./src/packages/issue/issue-view/src/browser-metrics/browser-metrics-constants.js"),Xi=n("./src/packages/issue/issue-view/src/common/service/issue/ecosystem-extensions-transformer.js");var er=(e,t)=>e.ofType("REFRESH_ECOSYSTEM_REQUEST").switchMap((()=>{const e=t.getState();return((e,t,s)=>{const n=`${e}/rest/internal/2/issue/${t}/extension`
;return Object(_t.a)(n,{perf:Zi.b,headersProcessor:s&&s(Zi.b.key)}).map(Xi.b).catch((e=>(ve.h.safeErrorWithoutCustomerData("issue.fetch.ecosystem-extensions-fetch-server","fetchEcosystemExtensions: Failed to fetch extensions",new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.of({}))))})(Object(le.f)(e),Object(le.x)(e)).map(V.f).catch((e=>(ve.h.safeErrorWithoutCustomerData("issue.fetch.ecosystem-refresh-epic","REFRESH_ECOSYSTEM_REQUEST: Failed to refresh ecosystem data",new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.empty())))})),tr=e=>t=>t.ofType("FETCH_ISSUE_FAILURE").do((t=>e&&e(t.payload.error))).ignoreElements(),sr=n("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js");const nr="VALIDATION_ERROR";var ar=n("./src/packages/issue/issue-view/src/common/state/selectors/application-selector.js")
;const ir=["summary","description","assignee"],rr=({payload:e})=>ir.includes(e.fieldId),or=e=>Object(le.b)(e)||"unknown",cr=(...e)=>Object(sr.a)((({state:e,hasSuccess:t,fieldId:s,hasEdit:n,errorMessage:a,traceId:i})=>{const r={};return null!=a&&(r.errorMessage=a),null!=i&&(r.traceId=i),{experience:"editIssue",analyticsSource:or(e),application:Object(ar.b)(e),edition:Object(ar.a)(e),wasExperienceSuccesful:t,field:s,hasEdit:n,additionalAttributes:r}})(...e));var lr=Object(Ve.combineEpics)(((e,t)=>e.ofType("FIELD_EDIT_CANCEL").filter(rr).filter((({payload:e})=>{const s=t.getState();return!Object(js.F)(e.fieldId)(s)})).do((e=>{const s=t.getState(),{fieldId:n}=e.payload;return cr({state:s,hasSuccess:!0,fieldId:n,hasEdit:!1})})).ignoreElements()),((e,t)=>e.ofType("FIELD_UPDATED").filter(rr).do((e=>{const s=t.getState(),{fieldId:n}=e.payload;return cr({state:s,hasSuccess:!0,fieldId:n,hasEdit:!0})
})).ignoreElements()),((e,t)=>e.ofType("FIELD_SAVE_FAILURE").filter(rr).filter((({payload:e})=>!Object(Ra.c)(e.error))).do((e=>{const s=t.getState(),{fieldId:n,error:a}=e.payload,i=(e=>e instanceof Ra.a?nr:e instanceof Ra.b?e.statusCode>=400&&e.statusCode<500?nr:"SERVER_ERROR":"CONNECTIVITY_ERROR")(a);return cr({state:s,hasSuccess:"SERVER_ERROR"!==i,fieldId:n,hasEdit:!0,errorMessage:`${a.statusCode||i} - ${a.message}`,traceId:a.traceId})})).ignoreElements())),ur=n("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js");const dr="issue.issue-view.get-create-linked-issue-permission.epic";var pr=(e,t)=>e.ofType("FETCH_CREATE_LINKED_ISSUE_PERMISSION_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(te.F)(e);return Object(ur.a)(e)&&("business"===s||"service_desk"===s)?(e=>Object(_t.a)(`${e}/rest/api/3/permissions/project`,{method:"POST",body:JSON.stringify({permissions:["CREATE_ISSUES"]})}).retry(2).flatMap((e=>{if(e&&e.projects){const t=e.projects.length>0
;return Be.Observable.of(Object(oi.q)(t))}return De.a.safeErrorWithoutCustomerData(dr,"The permission endpoint does not return the expected data"),Be.Observable.of(Object(oi.q)(!1))})).catch((e=>(De.a.safeErrorWithoutCustomerData(dr,e),Be.Observable.of(Object(oi.q)(!1))))))(Object(le.f)(e)):Be.Observable.of(Object(oi.q)(!1))})),mr=n("./node_modules/lodash/uniq.js"),br=n.n(mr),fr=n("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const gr=["assignee","project"],hr="issue.issuelinks.fetch.linked.issues.epic",yr=({id:e,key:t,fields:s})=>({id:e,assigneeUrl:s.assignee&&Object(fr.c)(s.assignee).avatarUrl,assigneeDisplayName:s.assignee&&Object(fr.c)(s.assignee).displayName,projectType:s.project&&s.project.projectTypeKey,issueKey:t}),Or=(e,t)=>Object(pa.b)(e,t,gr).map((e=>e.map(yr).reduce(((e,t)=>Object.assign(e,{[t.issueKey]:t})),{})));var jr=Object(Ve.combineEpics)(((e,t)=>e.ofType("FETCH_LINKED_ISSUES_REQUEST").switchMap((()=>{
const e=t.getState(),s=Object(le.f)(e),n=Object(ks.g)(e);return Or(s,n).flatMap((e=>Be.Observable.of(Object(oi.k)(e)))).catch((e=>(Object(Zs.a)(hr,"Error while fetching linked issues",e,new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.of(Object(oi.j)(e)))))}))),((e,t)=>e.ofType("SAVE_LINKED_ISSUE_SUCCESS").switchMap((()=>{const e=t.getState(),s=Object(le.f)(e),n=Object(le.x)(e),a=Object(ks.i)(e),i=br()(Object.values(a).map((e=>e.linkedIssueKey))),r=Object.values(a).filter((e=>e.isSaved)).map((e=>e.id));return Be.Observable.zip(Object(pa.d)(s,n),Or(s,i),((e,t)=>Object(oi.i)(e,t,r,a))).catch((e=>(Object(Zs.a)(hr,"Error while fetching new issue links and their details",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(oi.h)(r,e)))))
})))),vr=n("./src/packages/forge/forge-ui-analytics/src/common/utils/get-error-type/index.js"),Er=n("./src/packages/forge/forge-ui-analytics/src/services/fetch-modules/index.js"),kr=n("./src/packages/forge/forge-ui/src/utils/can-fetch-forge/index.js"),wr=n("./src/packages/issue/issue-fetch-services/src/services/issue-forge-data/index.js");const Sr=async(e,t,s)=>s||Object(wr.a)(e,t),Cr=(e,t)=>Sr(Object(le.f)(e),Object(le.i)(e),t),Ir={FETCH_ISSUE_REQUEST:"fetch",REFRESH_ISSUE_REQUEST:"refresh",LOAD_NEW_ISSUE:"load-new",FETCH_FORGE_REQUEST:"fetch-forge"},Tr=Object.keys(Ir);var Pr=(e,t)=>(s,n)=>s.ofType(...Tr).switchMap((s=>{const a=Object(le.b)(n.getState());if(!Object(kr.a)())return Be.Observable.empty();let i,r,o=!1,c=!1;const l=Ir[s.type],u=null==e?void 0:e.issueForgeData,d=!!u,p=e=>{const t={actionType:l,isPrefetched:d};return d&&(t.isPrefetchedDataResolved=c,t.isPrefetchedDataValid=r),e&&(t.errorType=Object(vr.a)(e),t.error=e),t};return Object(Er.f)(a,p()),null==u||u.then((e=>{o=!0,
i=e})),Be.Observable.fromPromise(Promise.resolve().then((()=>(c=o,o&&(r=!!i),!d||!r&&c?Cr(n.getState()):Cr(n.getState(),u))))).map((e=>(Object(Er.e)(a,p()),t.setForge(e),Object(Ei.a)(e)))).catch((e=>(Object(Er.d)(a,p(e)),Be.Observable.empty())))})),_r=n("./src/packages/platform/services/issue/src/model/errors.js");const xr=(e,t,s,n,a,i,r)=>(o,c)=>o.ofType("UPDATE_PREVIEW_REQUEST").switchMap((o=>{if(o.payload){const l=o.payload;return e.getIssue$(l).flatMap((({error:e,issue:o})=>{if(e){const t=(e=>{if(e instanceof _r.a)return{error:"NOT_FOUND_OR_NO_PERMISSION_ERROR",errorMessage:e.message};const{statusCode:t,message:s,traceId:n}=e;return{error:t?"UNKNOWN_ERROR":"CONNECTIVITY_ERROR",statusCode:t,errorMessage:s,traceId:n}})(e);return ve.h.safeWarnWithoutCustomerData("issue.data.provider.epic",`UPDATE_PREVIEW_REQUEST: dataProvider issue data lookup failed ${t.error}`),Be.Observable.of((e=>({type:"ISSUE_PREVIEW_FAILURE",payload:e}))(t))}if(o){var u;ka(Object(_e.a)(o),t,s,l,!0),
n.setIssueViewLayout(l,o.issueSections);const e=null===(u=o.fields.get("project"))||void 0===u?void 0:u.value;return e&&i.mergeProjectProperty(Object(Te.a)(l),e),o.id&&r.mergeIssueContext({issueId:Object(Ee.j)(String(o.id))}),o.viewScreenId&&r.mergeIssueContext({viewScreenId:o.viewScreenId}),a.setUserPreferences(o.myPreferences),"COMPLETE"!==Object(te.w)(c.getState())?Be.Observable.of(Pe(o)):Be.Observable.empty()}return Be.Observable.empty()}))}return Be.Observable.empty()}));var Dr=(e,t,s,n,a,i,r)=>Object(Ve.combineEpics)(xr(e,t,s,n,a,i,r),(e=>t=>t.ofType("FETCH_ISSUE_REMOTE_DATA_REQUEST").switchMap((t=>{if(t.payload){const s=t.payload;return e.getIssueRemoteData$(s).flatMap((e=>Be.Observable.of(Object(Se.c)(e))))}return Be.Observable.of(Object(Se.a)())})))(e),(e=>(t,s)=>t.ofType("APPLINK_AUTHENTICATION_SUCCESS","SAVE_REMOTE_LINKED_ISSUE_SUCCESS").switchMap((()=>{const t=s.getState(),n=Object(le.x)(t)
;return n?e.getIssueRemoteData$(n).flatMap((e=>Be.Observable.of(Object(Se.c)(e)))):Be.Observable.empty()})))(e)),Ar=n("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js");const Lr=(e,t,s,n)=>{const a={action:t,actionSubjectId:Object(ie.c)(s)(s)};n?Object(He.b)(e,a):Object(He.a)(e,a)};var Mr=(t,s)=>t.ofType("DELETE_ISSUE_REQUEST").mergeMap((({payload:t})=>{const{issueKey:n,analyticsEvent:a}=t;return((e,t)=>{const s=((e,t)=>`${e}/rest/api/3/issue/${t}?deleteSubtasks=true`)(e,t);return Object(_t.a)(s,{method:"DELETE"})})(Object(le.f)(s.getState()),n).map((()=>(Lr(a,"deleted","issueDeleted"),Object(Ar.d)(n)))).catch((t=>(ve.h.safeErrorWithoutCustomerData("issue.delete.issue-delete-epic","Failed to delete issue",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),Lr(a,"deletedError","issueDeletedError",t),Be.Observable.of(Object(Ar.b)(n,(t=>{try{return JSON.parse(t.message).errorMessages[0]}catch(e){return"Failed to delete issue"}})(t))))))
})),Rr=n("./src/packages/issue/issue-view/src/browser-metrics/fetch-issue-network-times.js");const Nr=e=>t=>s=>{e.dispatch(((e,t)=>({type:"SAVE_SERVER_TIME",payload:{key:e,serverTime:t}}))(t,Number(s.get("atl-vtm-backend-time"))))};function Fr(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Ur(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Kr=(e,t)=>{let s="UNKNOWN_ERROR"
;if(401===e.statusCode?s="AUTHENTICATION_ERROR":403===e.statusCode||404===e.statusCode?s="NOT_FOUND_OR_NO_PERMISSION_ERROR":e.statusCode?t||(s="AUTHENTICATION_ERROR"):s="CONNECTIVITY_ERROR",e instanceof cn.a){const t=e,{endpoint:n,traceId:a,statusCode:i,message:r}=t;return{errorMessage:i?`${r}, endpoint: ${n}, status code: ${i}`:`${r}, endpoint: ${n}`,endpoint:n,traceId:a,statusCode:i,error:s}}if(e instanceof Ra.b){const t=e,{message:n,statusCode:a,traceId:i}=t;return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ur(Object(s),!0).forEach((function(t){Vr(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ur(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({error:s,statusCode:a,errorMessage:`${n}, status code: ${a}`},i?{traceId:i}:{})}return{error:s,statusCode:void 0}}
;var Wr=({fieldValueActions:e,fieldConfigActions:t,issueViewLayoutActions:s,ecosystemActions:n,userPreferenceActions:a,issueTabsActions:i,permissionActions:r,attachmentActions:o,projectContextActions:c,prefetchedResourceManager:l,jiraSettingsActions:u,issueContextActions:d})=>(p,m)=>p.ofType("FETCH_ISSUE_REQUEST","LOAD_NEW_ISSUE").switchMap((()=>{Object(Rr.a)();const p=m.getState(),b=Object(le.a)(p),f=Object(le.f)(p),g=d.getIssueKey(),h=d.getMaxTokenLength();return Object(pa.a)(p,l).filter((()=>d.getIssueKey()===g)).do((({issue:{fields:n,tabs:l,id:p,viewScreenId:m},myPreferences:b,permissions:h,attachments:y,jiraSettings:O,issueSections:j,project:v})=>{if(i.setIssueTabs(g,l),ka(n,e,t,g),s.setIssueViewLayout(g,j),a.setUserPreferences(b),h&&v&&r.setProjectPermissions(Object(Ee.r)(v.projectKey),h),void 0!==y&&(o.setTotalCount(g,y.totalCount),"number"==typeof y.deletableCount&&o.setDeletableCount(g,y.deletableCount),o.setVisibleAttachments(g,y.nodes)),O&&u.setJiraSettings(O),
v&&c.setProjectContext(Object(Ee.r)(v.projectKey),v),Object(W.isPolarisInsightsTabEnabled)()&&v){const{projectKey:e,projectType:t}=v;Ne(f,e,t).then((t=>c.mergeProjectProperty(Object(Ee.r)(e),{isPolarisProject:t})))}p&&d.mergeIssueContext({issueId:Object(Ee.j)(String(p))}),d.mergeIssueContext({viewScreenId:m})})).mergeMap((e=>{const{viewContext:t,uploadContext:s,userAuth:a}=e,i=Fr(e,["viewContext","uploadContext","userAuth"]),r=t?Be.Observable.of(Ot(t)):gn(f,g,h,Nr(m),null==l?void 0:l.issueMediaReadPermission);let o;return s?null!=s.error?o=Object(en.b)(new Error(s.error)):null!=s.clientId&&null!=s.serviceHost&&null!=s.token&&null!=s.tokenLifespanInMs&&null!=s.collection&&null!=s.tokenIssueTimestamp&&(o=Object(en.d)({clientId:s.clientId,serviceHost:s.serviceHost,token:s.token,tokenLifespanInMs:s.tokenLifespanInMs,collection:s.collection,tokenIssueTimestamp:s.tokenIssueTimestamp})):o=Object(en.c)(),r.map((e=>(n.setEcosystem(i.ecosystem),[e,o,a?rn(a):an(),Object(V.d)(i)])))
})).flatMap((e=>(Object(K.c)(),l&&l.clearAll(),Be.Observable.of(Object(Ue.batchActions)(e))))).catch((e=>{const t=Kr(e,b);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(Zs.a)("issue.fetch.issue-fetch-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.of(Object(V.b)(t))}))})),Br=n("./src/packages/platform/utils/constants/src/fetch-default-options.js"),Hr=n("./src/packages/platform/utils/fetch/src/utils.js");function $r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$r(Object(s),!0).forEach((function(t){qr(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qr(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zr=Gr(Gr({},Br.a),{},{method:"POST"}),Yr=(e,t,s)=>"OUTWARD"===e.direction?{type:{id:e.id},inwardIssue:{key:t},outwardIssue:{key:s}}:{type:{id:e.id},inwardIssue:{key:s},outwardIssue:{key:t}},Qr=e=>201===e.status?Promise.resolve(null):Promise.reject(new Hr.a(e.status,`Error server response: ${e.status}`)),Jr=(e,t,s,n)=>Be.Observable.fromPromise(((e,t)=>fetch(e,Gr(Gr({},zr),t)).then(Qr))(Object(Kn.m)(e),{body:JSON.stringify(Yr(t,s,n))})),Zr=(e,t,s,n,a)=>{const i=Object(le.f)(e),r=Object(le.x)(e);return Jr(i,n,r,s).map((()=>Object(oi.p)(t,a.update({action:"succeeded"
})))).catch((e=>(ve.h.safeErrorWithoutCustomerData("issue.issuelinks.save.linked.issues.epic","Error while adding linked issues",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(oi.m)(t,e,null==a?void 0:a.update({action:"failed"}))))))};var Xr=Object(Ve.combineEpics)(((e,t)=>e.ofType("SAVE_LINKED_ISSUE_RETRY").mergeMap((e=>{const s=t.getState(),{optimisticId:n,requestAnalyticsEvent:a}=e.payload,i=Object(ks.f)(n)(s),r=i&&i.linkedIssueKey,o=i&&{direction:i.direction,id:i.typeId};return Zr(s,n,r,o,a)}))),((e,t)=>e.ofType("SAVE_LINKED_ISSUE_REQUEST").mergeMap((e=>{const s=t.getState(),{optimisticId:n,linkedIssueKey:a,issueLinkType:i}=e.payload.newIssueLinks,{requestAnalyticsEvent:r}=e.payload;return Zr(s,n,a,i,r)})))),eo=n("./node_modules/lodash/identity.js"),to=n.n(eo),so=n("./node_modules/lodash/isEqual.js"),no=n.n(so);const ao=(e,t)=>{const s=document.getElementById("ghx-issue-fragment")
;window.AJS&&s?window.AJS.$(s).trigger(e,t):De.a.safeErrorWithoutCustomerData("issue.rapid-board","Could not find container to send event for rapid board",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}))},io="refresh-sprints-on-board",ro="hide";var oo=e=>ao(io,{sprintIds:[e]}),co=()=>ao(ro);const lo=({pathname:e,search:t})=>e+t,uo=(e,t,s,n)=>(a,i)=>{const r={},o=a.ofType("NAVIGATE_TO_NEW_ISSUE").pluck("payload").do((({toIssueKey:e})=>{n.mergeIssueContext({issueKey:Object(Ee.l)(e)})})).do((({toIssueKey:e})=>{const a=i.getState(),r=Object(le.b)(a),o=n.getIsLoadedWithPage(),c=s.getRecentIssuesCount(),l=s.getRecentIssue(e);Object(K.a)({analyticsSource:String(r),isLoadedWithPage:o,isRecentIssue:!!l,recentIssuesCount:c,isSPA:!0,store:i,dataProvider:t}),Object(K.g)()})).do((({fromIssueKey:t,toIssueKey:s})=>{if(e){r[lo(window.location)]=t;const n=((e,t,s)=>{const n=new RegExp(`${t}(?![\\d])`,"g"),a=e.match(n);return null===a||1!==a.length?null:e.replace(t,s)
})(lo(window.location),t,s);n&&(r[n]=s,e.push(n))}})),c=e?Be.Observable.create((t=>e.listen(((e,s)=>{t.next({location:e,action:s})})))).filter((({action:e})=>"POP"===e)).filter((()=>!n.getIsSpaEnabled())).map((({location:e})=>r[lo(e)])).filter(to.a).map((e=>({fromIssueKey:Object(le.x)(i.getState()),toIssueKey:e}))).filter((({fromIssueKey:e,toIssueKey:t})=>e!==t)):Be.Observable.empty();return Be.Observable.merge(o,c).distinctUntilChanged(((e,t)=>no()(e,t))).flatMap((({toIssueKey:e})=>{Object(Rr.a)();const t=s.getRecentIssue(e);return t?Be.Observable.of(Object(ii.b)(e,t)):Object(W.isStopFetchPreviewEnabled)()?Be.Observable.of(Object(ii.a)(e),Object(Se.b)(e)):Be.Observable.of(Object(ii.a)(e),we(e),Object(Se.b)(e))})).takeUntil(a.last().catch((()=>Be.Observable.of(!0)))).catch((e=>De.a.safeErrorWithoutCustomerData("issue.issue-navigation-epic","Unexpected error in issue-navigation-epic",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e}))))
},po=e=>e.ofType("NAVIGATE_TO_PROJECT").do((e=>{Object(ca.a)(e.payload.projectUrl,!1,e.payload.pushAction)})).ignoreElements(),mo=e=>e.ofType("NAVIGATE_TO_SPRINT").do((e=>{oo(e.payload.sprintId),co()})).ignoreElements();var bo=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/page-visiblity-stream/page-visibility-stream.js");const fo=["FORGE_ENTITY_TYPE","CONNECT_ENTITY_TYPE"];var go=n("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js");const ho=(e,t)=>{const s=t.getState(),{atlassianId:n}=e.payload,a=Object(te.y)(s),i=!!a&&n!==a.id,r=Object(bt.a)(s),o=fo.includes(null==r?void 0:r.type);return!(Object(Si.g)(s).length>0||o||!!Object(go.a)(s))&&i}
;var yo=Object(Ve.combineEpics)(((e,t)=>e.ofType("REALTIME_UPDATE_CURRENT_ISSUE").filter((()=>Object(zs.a)())).switchMap((e=>ho(e,t)?Be.Observable.of(Object(V.g)()):Be.Observable.empty()))),((e,t)=>e.ofType("REALTIME_UPDATE_CURRENT_ISSUE").bufferToggle(bo.a.filter((e=>!e)),(()=>bo.a.filter((e=>e)))).switchMap((e=>e.some((e=>ho(e,t)))?Be.Observable.of(Object(V.g)()):Be.Observable.empty()))));var Oo=({fieldValueActions:e,fieldConfigActions:t,issueViewLayoutActions:s,userPreferenceActions:n,attachmentActions:a,permissionActions:i,issueTabsActions:r,projectContextActions:o,issueContextActions:c})=>(l,u)=>l.ofType("REFRESH_ISSUE_REQUEST").switchMap((()=>{const l=u.getState(),d=Object(le.f)(l),p=Object(le.x)(l),m=c.getMaxTokenLength();return Be.Observable.zip(gn(d,p,m),Object(pa.a)(l).do((({issue:{fields:l,tabs:u,id:m,viewScreenId:b},myPreferences:f,attachments:g,permissions:h,issueSections:y,project:O})=>{if(r.setIssueTabs(p,u),ka(l,e,t,p),s.setIssueViewLayout(p,y),n.setUserPreferences(f),
h&&O&&i.setProjectPermissions(Object(Ee.r)(O.projectKey),h),g&&a.setTotalCount(p,g.totalCount),g&&"number"==typeof g.deletableCount&&a.setDeletableCount(p,g.deletableCount),g&&a.setVisibleAttachments(p,g.nodes),O&&o.setProjectContext(Object(Ee.r)(O.projectKey),O),Object(W.isPolarisInsightsTabEnabled)()&&O){const{projectKey:e,projectType:t}=O;Ne(d,e,t).then((e=>o.mergeProjectProperty(Object(Ee.r)(O.projectKey),{isPolarisProject:e})))}m&&c.mergeIssueContext({issueId:Object(Ee.j)(String(m))}),c.mergeIssueContext({viewScreenId:b})})).map(V.h)).mergeMap(Be.Observable.from).catch((e=>(ve.h.safeErrorWithoutCustomerData("issue.fetch.issue-refresh-epic","REFRESH_ISSUE_REQUEST: Failed to refresh issue data",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.empty())))}));const jo=(e,t)=>Object(_t.a)((e=>`${e}/rest/graphql/1/`)(e),(e=>({method:"POST",body:JSON.stringify({query:ea.a`query {
            issue(issueIdOrKey: "${e}", latestVersion: true, screen: "view") {
                id
                viewScreenId
            }
        }`})}))(t));var vo=(e,t)=>e.ofType("FETCH_SCREENID_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(le.a)(e),n=Object(le.f)(e),a=Object(le.x)(e);return jo(n,a).map(ee).catch((e=>{const t=((e,t)=>{let s="UNKNOWN_ERROR";return 401===e?s="AUTHENTICATION_ERROR":403===e||404===e?s="NOT_FOUND_OR_NO_PERMISSION_ERROR":e?t||(s="AUTHENTICATION_ERROR"):s="CONNECTIVITY_ERROR",{error:s,statusCode:e}})(e.statusCode,s);return"NOT_FOUND_OR_NO_PERMISSION_ERROR"===t.error||Object(Zs.a)("issue.fetch.issue-screenid-epic","FETCH_ISSUE_REQUEST: Failed to fetch issue data",e,new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.of((e=>({type:"FETCH_SCREENID_FAILURE",payload:e}))(t))}))})),Eo=n("./node_modules/lodash/size.js"),ko=n.n(Eo);const wo=e=>({type:"SET_ISSUE_TYPES",payload:e});var So=n("./src/packages/issue/issue-view/src/common/service/issue/subtask-types-server.js");function Co(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Io(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(s),!0).forEach((function(t){To(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Co(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function To(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Po=new Map;var _o=(e,t)=>e.ofType("SUBTASK_QUICK_ADD_CLICKED","ISSUE_IN_EPIC_QUICK_ADD_CLICKED","CHILD_ISSUE_QUICK_ADD_CLICKED","CHILD_ISSUE_PANEL_ADD_CLICKED").mergeMap((()=>{const e=t.getState(),s=Object(le.C)(e),n=Po.get(s)||{time:new Date};if(n&&n.data&&new Date-n.time<18e5)return Be.Observable.of(wo(n.data));Po.set(s,n);const a=Object(le.f)(e),i=Nr(t)
;return Be.Observable.concat(Be.Observable.of((()=>({type:"FETCHING_ISSUE_TYPES"}))()),Object(So.a)(a,s,i).mergeMap((e=>{const t=e&&e.issueTypes;return ko()(t)?(Po.set(s,Io(Io({},n),{},{data:t})),Be.Observable.of(wo(t))):(Po.delete(s),Be.Observable.of((()=>({type:"FETCH_ISSUE_TYPES_FAILED"}))()))})))})),xo=n("./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js");var Do=(e,t)=>Object(_t.a)(Object(Kn.h)(e,t)),Ao=(e,t)=>e.ofType("FETCH_JIRA_APP_LINKS_REQUEST","APPLINK_AUTHENTICATION_SUCCESS").switchMap((()=>{const e=t.getState(),s=Object(le.f)(e),n=Object(le.x)(e);return Do(s,n).map(xo.c).catch((e=>(Object(Zs.a)("issue.fetch.jira-app-links-epic","FETCH_JIRA_APP_LINKS_REQUEST: Failed to fetch jira app links data",e,new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.of(Object(xo.b)()))))})),Lo=n("./src/packages/issue/issue-view/src/actions/login-actions.js"),Mo=(e,t)=>e.ofType("LOGIN").switchMap((()=>{
const e=Object(le.A)(t.getState());if(e){const s=`${Object(le.f)(t.getState())}/login.jsp?os_destination=${encodeURIComponent(e)}`,n=window.open(s,"_blank");return Be.Observable.fromEvent(window,"message").filter((e=>e.origin===window.location.origin)).filter((e=>e.source===n)).filter((e=>e.data&&"log-in-successful"===e.data.status&&e.data.accountId)).do((e=>e.source.close())).mergeMap((e=>Be.Observable.of(Object(Lo.b)({accountId:e.data.accountId}),Object(V.c)())))}return Be.Observable.empty()}));const Ro=(e,{fieldId:t,commentId:s},n=!1)=>{const a=Object(js.t)(e).filter((e=>e!==t)),i=Object(Es.u)(e).filter((e=>e!==s)),r=!n&&Object(Es.w)(e);return a.length>0||i.length>0||r?((e,t,s)=>({type:"MULTILINE_FIELD_EDIT_BEGIN",payload:{multilineFieldIdsToClose:e,commentIdsToClose:t,shouldCloseAddCommentForm:s}}))(a,i,r):null};var No=Object(Ve.combineEpics)(((e,t)=>e.ofType("FIELD_EDIT_BEGIN").filter((e=>Object(js.G)(e.payload.fieldId)(t.getState()))).map((e=>Ro(t.getState(),{
fieldId:e.payload.fieldId}))).filter(Boolean)),((e,t)=>e.ofType("EDIT_COMMENT_BEGIN").map((e=>Ro(t.getState(),{commentId:e.payload.id}))).filter(Boolean)),((e,t)=>e.ofType("ADD_COMMENT_FORM_EXPAND").map((()=>Ro(t.getState(),{},!0))).filter(Boolean)));const Fo=(e,t)=>{const s="NEW_OPTIMISTIC_COMMENT",n=Object(le.a)(e),a=Object(le.x)(e),i=Object(jn.a)(s),r=Object(jn.c)(n,a,i);return Be.Observable.of(Object(On.e)(s,r,t?Tn.l:null))},Uo=e=>(De.a.safeErrorWithoutCustomerData("issue.new-comment-load-draft",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.empty());var Vo=Object(Ve.combineEpics)(((e,t)=>e.ofType("SET_CONTEXT").mergeMap((()=>Fo(t.getState(),!1))).catch((e=>Uo(e)))),((e,t)=>e.ofType("ADD_COMMENT_FORM_EXPAND").mergeMap((()=>Fo(t.getState(),!0))).catch((e=>Uo(e)))));const Ko=1e3,Wo=new Be.Subject;Wo.bufferTime(Ko,Ko,50).subscribe((e=>{Object(L.a)().loadIssues(br()(e))}));const Bo=new Be.Subject
;Bo.bufferTime(Ko,Ko,50).subscribe((e=>Object(L.a)().loadIssuesById(br()(e))));var Ho=e=>e.ofType("PREFETCH_ISSUES").do((e=>{const{issueKeys:t,issueIds:s}=e.payload;t.forEach((e=>Wo.next(e))),s.forEach((e=>Bo.next(e)))})).switchMap((()=>Be.Observable.empty())),$o=e=>(t,s)=>t.ofType("PROJECT_ISSUE_TYPES_REQUEST").mergeMap((t=>{const n=Object(le.f)(s.getState()),a=t.payload;return((e,t)=>{const s=`${e}/rest/api/3/project/${t}`;return Object(_t.a)(s).map(ua)})(n,a).do((t=>e.mergeProjectProperty(a,{issueTypes:t}))).map((e=>Object(la.c)(e))).catch((e=>(ve.h.safeErrorWithoutCustomerData("change.issue.type.fetchtypes",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Object(la.a)(e)))))}));const Go=Object(ve.i)("true","false");var qo=(e,t)=>e.ofType("FETCH_PROJECT_HAS_SUBTASK_VALIDATORS").switchMap((()=>{const e=t.getState()
;return((e,t)=>Object(_t.a)(((e,t)=>`${e}/rest/internal/2/project/${t}/hasValidatorsOnSubtasks`)(e,t)))(Object(le.f)(e),Object(le.C)(e)).do((e=>{Object(ve.l)("project-validators.projectHasSubtaskValidators.result",{result:Go(e)})})).map((e=>(e=>({type:"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_SUCCESS",payload:e}))(e))).catch((()=>Be.Observable.of((()=>({type:"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_FAILURE"}))())))}));var zo=(e,t)=>e.ofType("SET_CONTEXT").scan((({issueKey:e},t)=>({issueKey:t.payload.issueKey,loggedInAccountId:t.payload.atlassianAccountId,previousIssueKey:e})),{issueKey:null,previousIssueKey:null,loggedInAccountId:null}).filter((({loggedInAccountId:e})=>null!==e)).filter((({issueKey:e,previousIssueKey:t})=>e!==t)).map((({issueKey:e})=>e)).delay(3e3).switchMap((e=>{const s=t.getState(),n=`${Object(le.f)(s)}/rest/internal/2/issue/${e}/history`;return Object(_t.a)(n,{method:"POST"
}).catch((e=>((e=>404===e.statusCode)(e)||Object(Zs.a)("issue.recently-viewed-issue-epic","Client network error occurred when fetching user issue history",e,new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.empty()))).ignoreElements()}));function Yo(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(s),!0).forEach((function(t){Jo(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yo(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Jo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zo=e=>{
const{applicationType:t,applicationName:s,issueLinkUrl:n,relationship:a,summary:i,iconUrl:r,issueKey:o,createReciprocalLink:c}=e;return Qo({application:{name:s,type:t},relationship:a,object:{summary:i,icon:{url16x16:r},title:o,url:n},createReciprocalLink:c},"WITH_ISSUE_ID"===e.payloadType?{globalId:e.globalId}:{appLinkId:e.appLinkId})},Xo=Qo(Qo({},Br.a),{},{method:"POST"});function ec(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function tc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(s),!0).forEach((function(t){sc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ec(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function sc(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const nc=(e,t,s)=>((e,t,s)=>Object(_t.a)(Object(Kn.n)(e,t),Qo(Qo({},Xo),{},{body:JSON.stringify(Zo(s))})))(Object(le.f)(e),Object(le.x)(e),t).map((e=>{var n;return Object(ui.h)(t.id,e,s.update({action:"succeeded",isReciprocalLinkCreated:"CREATED"===(null===(n=e.reciprocalLink)||void 0===n?void 0:n.status)}))})).catch((e=>Be.Observable.of(Object(ui.e)(t.id,t.issueKey,e,s.update({action:"failed",isReciprocalLinkCreated:!1}))))),ac=(e,t)=>e.ofType("SAVE_REMOTE_LINKED_ISSUE_REQUEST").mergeMap((e=>{const s=t.getState(),{saveRemoteIssueLinkPayload:n,requestAnalyticsEvent:a}=e.payload;return nc(s,n,a)})),ic=(e,t)=>e.ofType("SAVE_REMOTE_LINKED_ISSUE_RETRY").mergeMap((e=>{const s=t.getState(),{optimisticId:n,requestAnalyticsEvent:a}=e.payload,i=((e,t)=>{const s=Object(ks.k)(e).find((e=>e.id===t))
;if(!s||void 0===s.applicationName||void 0===s.applicationType||void 0===s.iconUrl||void 0===s.relationship||void 0===s.summary)return;const n={id:s.id,applicationType:s.applicationType,applicationName:s.applicationName,issueLinkUrl:s.issueLinkUrl,relationship:s.relationship,summary:s.summary,iconUrl:s.iconUrl,issueKey:s.issueKey,createReciprocalLink:Boolean(s.createReciprocalLink)};if(void 0===s.globalId){if(void 0===s.appLinkId)return;return tc(tc({},n),{},{appLinkId:s.appLinkId,payloadType:"WITHOUT_ISSUE_ID"})}return tc(tc({},n),{},{globalId:s.globalId,remoteIssueId:s.remoteIssueId,payloadType:"WITH_ISSUE_ID"})})(s,n);return i?nc(s,i,a.update({withReciprocalLink:Boolean(i.createReciprocalLink)})):Be.Observable.empty()})),rc=e=>{switch(e){case"portal":return"portal";case"email":return"email";case"api":return"api";case"jira":return"jira";case"deployment":return"deployment";case"anonymousportal":return"anonymousportal";default:return"unknown"}},oc=e=>Be.Observable.of((e=>({
type:"REQUEST_PANEL_METADATA_FETCH_SUCCESS",payload:{channel:rc(e.channel),requestUrl:e.requestUrl,csatComment:e.csatComment}}))(e)),cc=e=>(ve.h.safeErrorWithoutCustomerData("issue.request-panel-metadata.fetch",JSON.stringify(e),new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:new Error(JSON.stringify(e))})),Be.Observable.of((()=>({type:"REQUEST_PANEL_METADATA_FETCH_FAILURE"}))()));var lc=(e,t)=>e.ofType("FETCH_REQUEST_PANEL_METADATA").flatMap((()=>(e=>Object(_t.a)(((e,t)=>`${e}/rest/servicedesk/1/servicedesk/request/${t}/request-panel-metadata`)(Object(le.f)(e),Object(le.x)(e))))(t.getState()).flatMap((e=>e.errors?cc(e):oc(e))).catch((e=>cc(e))))),uc=(e,t)=>e.ofType("SHARE_AS_COMMENT").switchMap((()=>{const e=t.getState();return Object(Es.w)(e)?Be.Observable.empty():Be.Observable.of(Object(Tn.c)(),Object(Tn.d)("NEW_OPTIMISTIC_COMMENT",!1))}));var dc=(e,t)=>e.ofType("FETCH_LOGGED_IN_USER_REQUEST").switchMap((()=>{const e=t.getState(),s=Object(le.a)(e)
;if(!s)return Be.Observable.empty();const n=((e,t)=>`${e}/rest/api/2/user?accountId=${encodeURIComponent(t)}${Object(W.isUseAppPermissionsFromTenantContextEnabled)()?"":"&expand=applicationRoles"}`)(Object(le.f)(e),s);return Object(_t.a)(n).map(fr.d).map((e=>{const t=Object(fr.c)(e),s=Object(fr.a)(e);return Ie(t,s)})).catch((e=>(Object(Zs.a)("issue.fetch.user-fetch-epic","FETCH_LOGGED_IN_USER_REQUEST: Failed to fetch logged in user details",e,new Oe.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),Be.Observable.of((()=>({type:"FETCH_LOGGED_IN_USER_FAILURE"}))()))))})),pc=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-meta.js");const mc="issue.fetch.user-fetch-timing-epic";var bc=()=>Object(W.isUseAppPermissionsFromTenantContextEnabled)()?()=>Be.Observable.empty():Object(W.isItSafeLoggingEnabledToUseAppPermissionsFromTenantContext)()?e=>e.ofType("FETCH_LOGGED_IN_USER_REQUEST").switchMap((()=>{
const e=["ajs-has-jira-software","ajs-has-jira-service-desk","ajs-has-jira-core"].filter((e=>null==Object(pc.a)(e)));return e.length&&ve.h.safeWarnWithoutCustomerData(mc,`Missing some product access meta tags: ${e.toString()}`),Be.Observable.empty()})):(()=>{let e=null,t=null;return(s,n)=>s.pipe(hs("FETCH_LOGGED_IN_USER_SUCCESS","FETCH_ISSUE_SUCCESS"),Object(ms.mergeMap)((s=>{switch(s.type){case"FETCH_LOGGED_IN_USER_SUCCESS":if(e&&!t){const t=n.getState();"service_desk"===Object(te.F)(t)&&ve.h.safeWarnWithoutCustomerData(mc,`Issue data loaded before user data loaded. By [${Date.now()-e}]ms`)}t=Date.now();break;case"FETCH_ISSUE_SUCCESS":e=Date.now()}return Be.Observable.empty()})))})(),fc=n("./src/packages/issue/issue-view/src/actions/web-links-actions.js"),gc=n("./src/packages/issue/issue-view/src/selectors/web-links-selector.js");const hc=(e,t,s)=>({object:{icon:{url16x16:s},title:e,url:t}
}),yc=({baseUrl:e,issueId:t,href:s,linkText:n,iconUrl:a})=>Object(at.d)(`${((e,t)=>`${e}/rest/api/3/issue/${t}/remotelink`)(e,t)}`,{body:JSON.stringify(hc(n,s,a))}).then((e=>((e,t,s,n)=>({id:Object(Ee.v)(e.id),href:t,linkText:s,iconUrl:n}))(e,s,n,a))),Oc="issue.fetch.web-links-epic",jc=(e,t,s)=>{const n=e.message;Object(Zs.a)(s,t,e,{errorReason:n})},vc=(e,t,s,n,a)=>{if(void 0===s||void 0===n){const e=void 0===s?"No issueId when creating weblink":"Broken weblink state when creating weblink";return ve.h.safeErrorWithoutCustomerData(Oc,a,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),Be.Observable.empty()}const{href:i,linkText:r,iconUrl:o}=n,c=null==o?"":o;return Be.Observable.from(yc({baseUrl:t,href:i,issueId:Object(Ee.j)(s.toString()),linkText:null==r?i:r,iconUrl:Object(Ee.i)(c)})).map((e=>Object(fc.e)(n.id,e))).catch((e=>(jc(e,`${a}: Failed to create web link`,Oc),Be.Observable.of(Object(fc.b)(n.id)))))
},Ec=(e,t)=>e.ofType("DELETE_WEB_LINK_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.x)(s),{id:i}=e.payload;return Be.Observable.fromPromise(((e,t,s)=>Object(at.a)(`${e}/rest/api/3/issue/${t}/remotelink/${s}`))(n,a,i)).map((()=>Object(fc.i)(i))).catch((e=>(jc(e,"DELETE_WEB_LINK_REQUEST: Failed to delete web link",Oc),Be.Observable.of(Object(fc.g)(i)))))})),kc=(e,t)=>e.ofType("CREATE_WEB_LINK_REQUEST").switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.w)(s),{optimisticId:i}=e.payload,r=Object(gc.d)(i)(s);return vc(0,n,a,r,"CREATE_WEB_LINK_REQUEST")})),wc=(e,t)=>e.ofType("CREATE_WEB_LINK_RETRY").switchMap((e=>{const s=t.getState(),n=Object(le.f)(s),a=Object(le.w)(s),{optimisticId:i}=e.payload,r=Object(gc.d)(i)(s);return vc(0,n,a,r,"CREATE_WEB_LINK_RETRY")}))
;var Sc=e=>e.ofType("state.EDIT_WORKLOG_SUCCESS","state.ADD_WORKLOG_SUCCESS").filter((e=>e.meta.shouldFetchViewContext)).mapTo(yt()),Cc=n("./src/packages/issue/issue-view/src/common/model/linked-issue-type.js"),Ic=n("./src/packages/issue/issue-view/src/model/change-type.js"),Tc=n("./node_modules/lodash/forEach.js"),Pc=n.n(Tc);const _c=["FIELD_SAVE_SUCCESS","SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS","ISSUE_RELATIONSHIP_UPDATE_SUCCESS","FIELD_SAVE_REQUEST","FIELD_SAVE_FAILURE","FIELD_UPDATED","FIELD_CONFIRM_NEW_FIELD","FIELD_CONFIRM_FAILURE_NEW_FIELD","FETCH_LINKED_ISSUES_DATA_SUCCESS","DELETE_LINKED_ISSUE_SUCCESS","CHILD_ISSUE_ADD_SUCCESS","ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS"];var xc=e=>(t,s)=>t.ofType(..._c).do((t=>{if(e)try{const n=Object(Ee.j)(String(Object(le.w)(s.getState())));switch(t.type){case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS":{const{payload:{fieldId:s,targetTypeName:a}}=t;e({issueId:n,type:Ic.a.ISSUE_TYPE_CHANGED,fieldId:s,meta:{typeName:a}});break}case"FIELD_UPDATED":
{const{payload:{fieldId:s,fieldValue:a}}=t;e({issueId:n,type:Ic.a.FIELD_CHANGED,fieldId:s,meta:{fieldId:s,fieldValue:a}});break}case"ISSUE_RELATIONSHIP_UPDATE_SUCCESS":{const{payload:{oldParentIdsByIssueIds:s,parentIssueId:a}}=t;e({issueId:n,type:Ic.a.ISSUE_RELATIONSHIP_UPDATED,meta:{newParentIssueId:a,oldParentIssueId:s[n]||null}});break}case"FETCH_LINKED_ISSUES_DATA_SUCCESS":{const s=((e,t)=>{const{payload:{optimisticLinks:s,issueLinks:n}}=t,a=[];return Pc()(s,(e=>{const t=n.linkedIssues[e.linkedIssueKey];t&&a.push({linkedIssueId:Object(Ee.j)(t.id),direction:e.direction})})),a})(0,t);s.length&&e({issueId:n,type:Ic.a.ISSUE_LINKS_CREATED,meta:{links:s}});break}case"DELETE_LINKED_ISSUE_SUCCESS":{const{meta:{issueId:s,direction:a}}=t;e({issueId:n,type:Ic.a.ISSUE_LINK_DELETED,meta:{linkedIssueId:s,direction:Object(Cc.b)(a)}});break}case"CHILD_ISSUE_ADD_SUCCESS":{const{issueKey:s,issueLink:a,issueSummary:i,issueTypeIconUrl:r,issueTypeName:o}=t.payload.childIssue;e({issueId:n,
type:Ic.a.CHILD_ISSUE_ADDED,meta:{childIssue:{id:Object(Ee.j)(t.payload.childIssue.id),issueKey:s,issueLink:a,issueSummary:i,issueTypeIconUrl:r||void 0,issueTypeName:o||void 0}}});break}case"ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS":e({issueId:n,type:Ic.a.ISSUE_CHILDREN_ORDER_CHANGED,meta:t.payload});break;case"FIELD_SAVE_REQUEST":{const{payload:{fieldId:s,value:a}}=t;e({issueId:n,type:Ic.a.FIELD_CHANGE_REQUESTED,meta:{fieldId:s,fieldValue:a}});break}case"FIELD_SAVE_FAILURE":{const{payload:{fieldId:s}}=t;e({issueId:n,type:Ic.a.FIELD_CHANGE_FAILED,meta:{fieldId:s}});break}case"FIELD_CONFIRM_NEW_FIELD":{const{payload:{fieldId:s,fieldValue:a}}=t;e({issueId:n,type:Ic.a.FIELD_CHANGE_REQUESTED,meta:{fieldId:s,fieldValue:a}});break}case"FIELD_CONFIRM_FAILURE_NEW_FIELD":{const{payload:{fieldId:s}}=t;e({issueId:n,type:Ic.a.FIELD_CHANGE_FAILED,meta:{fieldId:s}});break}}}catch(n){ve.h.safeErrorWithoutCustomerData("issue.issue-field.ops.change-notification","Failed to call onChange callback",new Oe.a({
eventNameSuffix:"issue.error",type:"js",app:"issue",event:n}))}})).ignoreElements();const Dc=e=>({type:"FIELD_LOAD_DRAFT_FAILURE",payload:e});var Ac=e=>e.ofType("FIELD_SAVE_SUCCESS").mergeMap((e=>(e=>{const{payload:{fieldId:t}}=e;return Be.Observable.of(Object(On.b)({fieldId:t}))})(e))).catch((e=>(e=>(Object(Zs.a)("issue.delete-draft-request","Could not send request to delete field draft from local storage",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of((e=>({type:"FIELD_DELETE_DRAFT_FAILURE",payload:e}))(e))))(e))),Lc=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js");var Mc=(e,t)=>e.ofType("FIELD_EDIT_BEGIN").mergeMap((e=>Be.Observable.merge(...((e,t)=>{const s=Object(js.J)(t);if(-1!==s.indexOf(e.payload.fieldId)){const n=Object(le.a)(t),a=Object(le.x)(t);return s.map((s=>{const i=Object(js.o)(s)(t),r=Object(jn.c)(n,a,s);return Be.Observable.of(Object(On.e)(s,r,s!==e.payload.fieldId?null:Lc.e,i))}))}
return[]})(e,t.getState())))).catch((e=>(e=>(Object(Zs.a)("issue.load-field-draft","Failed to send request to load field draft from local storage ",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of(Dc(e))))(e)));var Rc=e=>e.ofType("FIELD_INIT_OPTIONS","FIELD_EDIT_REQUEST_EXTERNAL").groupBy((e=>e.payload.fieldId)).mergeMap((e=>{const t=e.filter((e=>"FIELD_EDIT_REQUEST_EXTERNAL"===e.type)),s=e.filter((e=>"FIELD_INIT_OPTIONS"===e.type)),n=t.takeUntil(s).takeLast(1).merge(s.take(1)).pairwise(),a=t.withLatestFrom(s);return Be.Observable.merge(n,a).map((([e,t])=>{const{fieldId:s,fieldOptions:n}=t.payload;return Object(Lc.b)(s,n)}))})),Nc=n("./src/packages/issue/issue-view/src/common/constants/flags.js"),Fc=n("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js"),Uc=n("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js");function Vc(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Kc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Vc(Object(s),!0).forEach((function(t){Wc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Vc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Wc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Bc=(e,t)=>{const s=e.ofType("ASSIGN_TO_ME_EXTERNAL"),n=e.ofType("FIELD_INIT_OPTIONS").filter((e=>"assignee"===e.payload.fieldId));return s.filter((()=>{const e=t.getState();return Object(te.y)(e)&&Object(Fc.d)(e)})).withLatestFrom(n,((e,{payload:{fieldOptions:s}})=>{const n=t.getState(),a=Object(te.y)(n)
;return a?Object(Uc.d)("assignee",(({avatarUrl:e,displayName:t,id:s})=>({avatarUrls:{"48x48":e},displayName:t,accountId:s}))(a),Kc(Kc({},s),{},{onSaveSuccessFlagType:Nc.c})):null}))},Hc=Object(Ve.combineEpics)(Rc,Bc);var $c=(e,t)=>e.pipe(hs("FETCH_ISSUE_SUCCESS"),Object(ms.mergeMap)((e=>Be.Observable.merge(...((e,t)=>{const s=Object(le.a)(t),n=Object(le.x)(t);return Object(js.J)(t).map((e=>{const a=Object(js.h)(e)(t),i=Object(jn.c)(s,n,e);return Be.Observable.of(Object(On.e)(e,i,null,a))}))})(0,t.getState())))),Object(ms.catchError)((e=>(e=>(Object(Zs.a)("issue.load-field-draft","Failed to send request to load field draft from local storage ",e,{}),Be.Observable.of(Dc(e))))(e))));var Gc=e=>e.ofType("FIELD_SAVE_SUCCESS").filter((e=>e.payload.fieldOptions.canContainMediaContent&&e.meta.shouldFetchViewContext)).mapTo(yt());var qc=(e,t)=>e.ofType("FIELD_EDIT_UPDATE").mergeMap((e=>((e,t)=>{const{payload:{fieldId:s,fieldOptions:n,value:a}}=e
;if(!n||!n.shouldSaveDraft)return Be.Observable.empty();const i=Object(js.n)(s)(t);return Be.Observable.of(Object(On.h)(s,a,i))})(e,t.getState()))).catch((e=>(e=>(Object(Zs.a)("issue.save-draft","Could not send request to save field draft to local storage",e,new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),Be.Observable.of((e=>({type:"FIELD_SAVE_DRAFT_FAILURE",payload:e}))(e))))(e))),zc=n("./node_modules/lodash/pickBy.js"),Yc=n.n(zc),Qc=n("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js");function Jc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Zc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Xc=e=>e&&e.id,el=(e,t)=>Object(pa.c)(e,t).map(V.h),tl=(e,t,s,n,a,i,r)=>{
const o=Object(le.f)(e),c=Object(le.x)(e),l=Object(js.l)(t)(e),u=Object(js.r)(t)(e),d=Object(js.f)(t)(e),p=Object(js.q)(t)(e),m=Object(Qc.c)(p)?s:((e,t)=>{switch(e){case"option2":var s;return Object(W.isFollowUpFixEcosystemDropdownFieldsNotClearingEnabled)()?null!==(s=null==t?void 0:t.id)&&void 0!==s?s:null:null==t?void 0:t.id;case"array":return t.map((e=>e.id));default:return t}})(u,s);i.setFieldValue(c,t,m);return Be.Observable.fromPromise(n.saveField(function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Jc(Object(s),!0).forEach((function(t){Zc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Jc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({baseUrl:o,issueKey:c,fieldId:t,fieldMetaKey:l,value:m,saveFieldData:a},d?{fieldEditSessionId:d}:null),e)).flatMap((e=>[Object(Uc.e)(t,n,m,e,{issueKey:c,shouldFetchViewContext:r
}),Object(Uc.g)(t,m)]))},sl=e=>(t,s)=>t.ofType("FIELD_SAVE_REQUEST").groupBy((e=>e.payload.fieldId)).mergeMap((t=>t.switchMap((t=>{const n=s.getState(),a=Object(le.x)(n),{fieldId:i,value:r,fieldOptions:o,saveFieldData:c,shouldFetchViewContext:l}=t.payload,u=o.isOptimistic?tl(n,i,r,o,c,e,l):((e,t,s,n,a,i,r)=>tl(e,t,s,n,a,i,r).mergeMap((t=>el(e).mergeMap((e=>Be.Observable.of(e,t))))))(n,i,r,o,c,e,l),d=Object(js.o)(i)(n);return u.catch((t=>{const s=(e=>e instanceof Ra.a?e.errors&&e.errors.length>0?e.errors[0].error:e.message:null)(t);return e.setFieldValue(a,i,d),Be.Observable.of(Object(Uc.c)(i,s,t,o))}))})))),nl=["status","timeoriginalestimate"],al=(e,t,s)=>(n,a)=>n.ofType("FIELD_UPDATED").filter((e=>nl.includes(e.payload.fieldId))).switchMap((n=>((e,t,s,n,a)=>Object(pa.c)(e,t).do((t=>{const{fields:i}=t.issue,r=Object(le.x)(e);return ka(i,s,n,r),a.setTransitionInProgress(!1),t})).map(V.h))(a.getState(),(e=>{const{fieldId:t,extraParams:s}=e.payload;if("status"===t)return{
shouldRefreshComments:s&&s.viaDialog}})(n),e,t,s))),il=(e,t)=>e.ofType(Nc.J,"ZERO_APPROVAL_REQUIRED").switchMap((()=>el(t.getState())));var rl=(e,t,s)=>Object(Ve.combineEpics)((e=>(t,s)=>t.ofType("FIELD_EDIT_CONFIRM").map((t=>{const n=s.getState(),{fieldId:a,fieldOptions:i,saveFieldData:r,analyticsEvent:o,analyticsAttributeIdRetriever:c=Xc}=t.payload,l=Object(le.x)(n),u=Object(js.h)(a)(n),d=e.getFieldValue(l,a);if(no()(u,d))return Object(Lc.c)(a,i);let p=!1;if(i.isRichTextField&&i.canContainMediaContent){const e=Object(js.q)(a)(n),t=e&&e.adfValue;p=Object($e.e)(t,u),p&&s.dispatch(vt())}const m=Yc()({updatedField:a,oldValId:c(d),newValId:c(u)},(e=>null!=e));return Object(Uc.d)(a,u,i,r,o,m,p)})))(e),sl(e),al(e,t,s),il),ol=(e,t)=>e.ofType("FIELD_EDIT_BEGIN","FIELD_PASTE","FIELD_SAVE_SUCCESS").groupBy((e=>e.payload.fieldId)).map((e=>{const s=e.filter((({type:e})=>"FIELD_EDIT_BEGIN"===e));return e.window(s).map((e=>{
const s=e.filter((({type:e})=>"FIELD_SAVE_SUCCESS"===e)),n=e.filter((({type:e})=>"FIELD_PASTE"===e)).takeUntil(s).reduce(((e,t)=>[...e,t.payload.pastedContent]),[]);return s.withLatestFrom(n).mergeMap((([e,s])=>{const{fieldId:n,fieldOptions:a}=e.payload,i=Object(js.o)(n)(t.getState());return 0===s.length?Be.Observable.empty():Be.Observable.of(Object(Uc.f)(n,a,i,s))}))})).mergeAll()})).mergeAll();const cl=()=>[kn,In,Sn,qc,Ac,$c,Mc,Ca,Aa,Ma],ll=()=>[ri];let ul=ll;ul=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O)=>[ri,qs,Wr({fieldValueActions:a,fieldConfigActions:i,issueViewLayoutActions:r,ecosystemActions:c,userPreferenceActions:d,issueTabsActions:f,permissionActions:b,attachmentActions:l,prefetchedResourceManager:p,jiraSettingsActions:g,projectContextActions:h,issueContextActions:y}),Oo({fieldValueActions:a,fieldConfigActions:i,issueViewLayoutActions:r,userPreferenceActions:d,permissionActions:b,issueTabsActions:f,attachmentActions:l,projectContextActions:h,issueContextActions:y
}),Pr(p,o),er,Nn,dc,bc(),rl(a,i,O),Mo,Ha,Pa(l),_a.e,_a.f,_a.g,Pn,Object(_a.d)(m),uc,jr,zn,hn(le.f,le.x,l,y),Xn,La,Gc,li,Xr,pr,Zn,...cl(),xc(e),Vo,Ji,ra,oa,uo(n,s,u,y),po,mo,Dr(s,a,i,r,d,h,y),Mr,Hc,tr(t),$a,ol,qo,zo,ha,$o(h),ba,lc,Ao,za,ai,yo,ps(l,m),Sc,lr,No,_o,vo,Ec,kc,wc,Ho,mi,ac,ic,Ln,wa(a,i)];var dl=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O)=>Object(Ve.combineEpics)(...((e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O)=>ul(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O))(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O));function pl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ml(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pl(Object(s),!0).forEach((function(t){bl(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function bl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const fl={server:{}};var gl=(e=fl,t)=>{const{type:s,payload:n}=t;switch(s){case"SAVE_SERVER_TIME":return n.serverTime?ml(ml({},e),{},{server:ml(ml({},e.server),{},{[n.key]:n.serverTime})}):e;default:return e}};var hl=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_UPLOAD_CONTEXT_SUCCESS":return n;case"FETCH_UPLOAD_CONTEXT_FAILURE":return null;default:return e}};var yl=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_USER_AUTH_SUCCESS":return n;case"FETCH_USER_AUTH_FAILURE":return null;default:return e}};function Ol(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function jl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ol(Object(s),!0).forEach((function(t){vl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ol(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const El="FETCH_ERROR",kl={clientId:El,serviceHost:El,tokenLifespanInMs:0,tokenIssueTimestamp:0,token:null,areTokenPermissionsUpToDate:!1,collection:null};var wl=(e=null,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_VIEW_CONTEXT_FAILURE":return kl;case"FETCH_VIEW_CONTEXT_SUCCESS":return n;case"MARK_TOKEN_AS_OUTDATED":return jl(jl({},e),{},{areTokenPermissionsUpToDate:!1})
;case"MARK_TOKEN_AS_UP_TO_DATE":return jl(jl({},e),{},{areTokenPermissionsUpToDate:!0});default:return e}},Sl=n("./node_modules/lodash/mapValues.js"),Cl=n.n(Sl),Il=n("./src/packages/issue/issue-view/src/common/state/selectors/get-editing-value.js");function Tl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Pl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Tl(Object(s),!0).forEach((function(t){_l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Tl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function _l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const xl={},Dl=(e,t,s,n=[])=>{
const a=Pl(Pl({},e),{},{[t]:Pl(Pl({},e[t]),s)});return n.forEach((e=>{delete a[t][e]})),a};var Al=(e=xl,t)=>{switch(t.type){case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_SUCCESS":{const{fields:s}=t.payload.issue;return Cl()(s,(t=>Pl(Pl({},t),{},{editingValue:e[t.key]&&e[t.key].editingValue,pendingValue:e[t.key]&&e[t.key].pendingValue})))}case"PREVIEW_DATA_FETCHED":{const s=Object(_e.a)(t.payload);return Object(ys.merge)(e,s)}case"FIELD_EDIT_BEGIN":{const{fieldId:s,fieldOptions:{isRichTextField:n},fieldEditSessionId:a}=t.payload,i=n?Object(Il.b)(e[s]):Object(Il.a)(e[s]);return Dl(e,s,Pl({editingValue:i},a?{fieldEditSessionId:a}:null),["invalidMessage","isInvalid"])}case"MULTILINE_FIELD_EDIT_BEGIN":{const{multilineFieldIdsToClose:s}=t.payload;if(null!=s){const t=s.reduce(((t,s)=>Pl(Pl({},t),{},{[s]:Pl(Pl({},e[s]),{},{editingValue:void 0})})),{});return Pl(Pl({},e),t)}return e}case"FIELD_EDIT_UPDATE":{const{fieldId:s,value:n}=t.payload;return Dl(e,s,{editingValue:n
},["invalidMessage","isInvalid"])}case"FIELD_SAVE_REQUEST":{const{fieldId:s,value:n}=t.payload;return Dl(e,s,{pendingValue:n},["editingValue"])}case"FIELD_EDIT_CANCEL":{const{fieldId:s}=t.payload;return Dl(e,s,{},["editingValue","invalidMessage","isInvalid","fieldEditSessionId"])}case"FIELD_SAVE_SUCCESS":{const{fieldId:s,fieldOptions:n}=t.payload;if(!(s in e))return e;const{pendingValue:a}=e[s];let i=Dl(e,s,{},["pendingValue","fieldEditSessionId"]);return n.isOptimistic&&(i=n.isRichTextField?Dl(i,s,{adfValue:a}):Dl(i,s,{value:a})),i}case"FIELD_SAVE_FAILURE":{const{fieldId:s,invalidMessage:n,fieldOptions:a}=t.payload,{pendingValue:i}=e[s],r=a.shouldDiscardChangeOnFailure?["editingValue"]:[];return Dl(e,s,{editingValue:i,isInvalid:!0,invalidMessage:n},["pendingValue","fieldEditSessionId",...r])}case"FIELD_ADD_ALLOWED_VALUES":{const{allowedValues:s,fieldId:n}=t.payload,a=e[n]&&e[n].allowedValues||[];return Dl(e,n,{allowedValues:[...a,...s]})}case"state.UPDATE_TIME_REMAINING_SUCCESS":{
const{timeRemaining:s}=t.payload;return Pl(Pl({},e),{},{timetracking:Pl(Pl({},e.timetracking),{},{value:Pl(Pl({},e.timetracking.value),{},{remainingEstimateSeconds:s})})})}case"state.ADD_WORKLOG_SUCCESS":{const{timeTracking:s}=t.payload;return Dl(e,"timetracking",{value:s})}case"state.EDIT_WORKLOG_SUCCESS":case"state.DELETE_WORKLOG_SUCCESS":{const{timeSpentSecondsDelta:s,newRemainingEstimateSeconds:n}=t.payload.timeTrackingDeltas,a=e.timetracking.value,i=Pl(Pl({},a),{},{timeSpentSeconds:(a.timeSpentSeconds||0)+s});return null!==n&&(i.remainingEstimateSeconds=n),Dl(e,"timetracking",{value:i})}case"UPDATE_APPROVAL_LINKED_USER_PICKER_FIELD":{const{linkedUserPickerFieldId:s,newApproverList:n}=t.payload;return s&&e[s]?Dl(e,s,{value:n}):e}default:return e}};function Ll(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ml(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(s),!0).forEach((function(t){Rl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ll(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Rl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Nl={selectedActivityItem:null,selectedActivitySortOrder:"NEWEST_FIRST"};var Fl=(e=Nl,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":return Ml(Ml({},e),{},{selectedActivitySortOrder:t.payload.activitySortOrder});case"SELECT_INITIAL_ACTIVITY_ITEM":case"SELECT_ACTIVITY_ITEM":return Ml(Ml({},e),{},{selectedActivityItem:t.payload});case"SELECT_ACTIVITY_SORT_ORDER":return Ml(Ml({},e),{},{selectedActivitySortOrder:t.payload});case"FETCH_ISSUE_SUCCESS":return Ml(Ml({},e),{},{selectedActivitySortOrder:t.payload.activitySortOrder})
;default:return e}};function Ul(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vl(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Kl={epic:void 0};var Wl=(e=Kl,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ul(Object(s),!0).forEach((function(t){Vl(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ul(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t.payload.issue.agile);default:return e}};function Bl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Hl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bl(Object(s),!0).forEach((function(t){$l(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Gl={isOpen:!1};var ql=(e=Gl,t)=>{switch(t.type){case"SHOW_ASSIGN_ISSUE_PARENT_MODAL":return Hl(Hl({},e),{},{isOpen:!0});case"HIDE_ASSIGN_ISSUE_PARENT_MODAL":return Hl(Hl({},e),{},{isOpen:!1});default:return e}};function zl(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}
return s}function Yl(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zl(Object(s),!0).forEach((function(t){Ql(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zl(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ql(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Jl={isPopupOpen:!1,attachments:{},placeholderAttachmentCount:0},Zl=(e,{id:t,mediaApiFileId:s})=>{const n=[t,s],a=Object.keys(e.attachments).filter((e=>!n.includes(e))).reduce(((t,s)=>Yl(Yl({},t),{},{[s]:e.attachments[s]})),{});return Yl(Yl({},e),{},{attachments:a})};var Xl=(e=Jl,t)=>{switch(t.type){case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_BEGIN":{const s=t.payload;return Yl(Yl({},e),{},{attachments:Yl(Yl({},e.attachments),{},{[s.id]:s})})}case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_END":return e
;case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR":{const{fileId:s}=t.payload;if(null==s)return e;const n=Object.keys(e.attachments).filter((e=>e!==s)).reduce(((t,s)=>Yl(Yl({},t),{},{attachments:Yl(Yl({},t.attachments),{},{[s]:e.attachments[s]})})),{});return Yl(Yl({},e),{},{attachments:n})}case"ATTACHMENT_JIRA_CREATE_SUCCESS":return Zl(e,t.payload);case"ATTACHMENT_JIRA_CREATE_FAILURE":return Zl(e,t.payload.attachment);case"ATTACHMENT_PICKER_POPUP_OPEN_SUCCESS":return Yl(Yl({},e),{},{isPopupOpen:!0});case"ATTACHMENT_PICKER_POPUP_CLOSE_SUCCESS":return Yl(Yl({},e),{},{isPopupOpen:!1});case"ATTACHMENT_PANEL_DRAG_ENTER":return Yl(Yl({},e),{},{placeholderAttachmentCount:t.payload});case"ATTACHMENT_PANEL_DRAG_LEAVE":case"ATTACHMENT_PANEL_DROP":return Yl(Yl({},e),{},{placeholderAttachmentCount:0});default:return e}};function eu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function tu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(s),!0).forEach((function(t){su(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):eu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function su(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const nu={isBannerVisible:!1,isBannerDismissed:!1,isTourActive:!1};var au=(e=nu,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.myPreferences&&t.payload.myPreferences["jira.user.issue.changeboarding.lastinteracted"];return void 0!==s?tu(tu({},e),{},{isBannerVisible:null===s}):e}case"CHANGEBOARDING_BANNER_DISMISS":return tu(tu({},e),{},{isBannerVisible:!1,isBannerDismissed:!0})
;case"CHANGEBOARDING_TOUR_BEGIN":return tu(tu({},e),{},{isBannerVisible:!1,isTourActive:!0});case"CHANGEBOARDING_TOUR_END":return tu(tu({},e),{},{isTourActive:!1});default:return e}};function iu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ru(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?iu(Object(s),!0).forEach((function(t){ou(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):iu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ou(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const cu={subtaskQuickAddClickCount:0,issueInEpicQuickAddClickCount:0,childIssueQuickAddClickCount:0}
;var lu=(e=cu,t)=>{switch(t.type){case"SUBTASK_QUICK_ADD_CLICKED":return ru(ru({},e),{},{subtaskQuickAddClickCount:e.subtaskQuickAddClickCount+1});case"ISSUE_IN_EPIC_QUICK_ADD_CLICKED":return ru(ru({},e),{},{issueInEpicQuickAddClickCount:e.issueInEpicQuickAddClickCount+1});case"CHILD_ISSUE_QUICK_ADD_CLICKED":return ru(ru({},e),{},{childIssueQuickAddClickCount:e.childIssueQuickAddClickCount+1});default:return e}};const uu={isOpen:!1};var du=(e=uu,t)=>{const{type:s}=t;switch(s){case"SHOW_CLONE_MODAL":return{isOpen:!0};case"HIDE_CLONE_MODAL":return{isOpen:!1};default:return e}},pu=n("./src/packages/common-legacy-do-not-add-anything-new/src/icepick/unset-in.js");function mu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?mu(Object(s),!0).forEach((function(t){fu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function fu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const gu=Object(ys.freeze)({pendingSavedValues:{},pendingDeletedIds:[],deleteModalCommentId:null,isLoadingMoreComments:!1,commentEditors:{},isCommentAttachmentInProgress:!1,hasScrolledPermalinkComment:!1,loadingStage:"LOADING"});var hu=(e=gu,t)=>{const s=t=>Object(ys.updateIn)(e,["pendingDeletedIds"],(e=>e.filter((e=>e!==t))));switch(t.type){case"PREVIEW_DATA_FETCHED":return Object(ys.set)(e,"loadingStage","COMPLETE");case"SAVE_COMMENT_REQUEST":{const{isNewComment:s,id:n,createdDate:a,authorId:i,bodyHtml:r,bodyAdf:o,visibility:c}=t.payload.comment;let l=e;if(s){
const t=e.commentEditors.NEW_OPTIMISTIC_COMMENT;if(void 0!==t){const s=Object(pu.a)(e,["commentEditors","NEW_OPTIMISTIC_COMMENT"]);l=Object(ys.setIn)(s,["commentEditors",n],t)}}const u={id:n,createdDate:a,authorId:i,bodyHtml:r,bodyAdf:o,isInternal:Un()(l,["commentEditors",n,"isInternal"],!0),visibility:c};return l=s?Object(ys.setIn)(l,["loadingStage"],"SAVE_COMMENT_LOADING"):l,Object(ys.chain)(l).setIn(["pendingSavedValues",n],u).setIn(["commentEditors",n,"isEditing"],!1).value()}case"FETCH_OLDER_COMMENTS_REQUEST":case"FETCH_NEWER_COMMENTS_REQUEST":return Object(ys.set)(e,"isLoadingMoreComments",!0);case"FETCH_MORE_COMMENTS_SUCCESS":case"FETCH_MORE_COMMENTS_FAILURE":return Object(ys.set)(e,"isLoadingMoreComments",!1);case"SAVE_COMMENT_RETRY":{const{payload:s}=t,n=Object(pu.a)(e,["pendingSavedValues",s.optimisticId,"hasSaveFailed"])
;return(t=>!!Object(ys.getIn)(e,["commentEditors",t]))(s.optimisticId)?n:Object(ys.setIn)(n,["pendingSavedValues",s.optimisticId,"createdDate"],s.createdDate)}case"SAVE_COMMENT_EDIT":return Object(ys.setIn)(e,["commentEditors",t.payload.optimisticId,"isEditing"],!0);case"SAVE_COMMENT_SUCCESS":case"SAVE_COMMENT_CANCEL":return Object(pu.a)(Object(pu.a)(e,["commentEditors",t.payload.optimisticId]),["pendingSavedValues",t.payload.optimisticId]);case"FETCH_SORTED_COMMENTS_REQUEST":return Object(ys.set)(e,"loadingStage","LOADING");case"FETCH_SORTED_COMMENTS_SUCCESS":case"FETCH_LATEST_COMMENTS_SUCCESS":case"FETCH_ISSUE_SUCCESS":return Object(ys.set)(e,"loadingStage","COMPLETE");case"SAVE_COMMENT_FAILURE":return Object(ys.setIn)(e,["pendingSavedValues",t.payload.optimisticId,"hasSaveFailed"],!0);case"DELETE_COMMENT_REQUEST":{const{payload:s}=t;return Object(ys.chain)(e).updateIn(["pendingDeletedIds"],(e=>[...e,s.id])).set("deleteModalCommentId",null).value()}case"DELETE_COMMENT_SUCCESS":
return s(t.payload.id);case"DELETE_COMMENT_FAILURE":return s(t.payload);case"SHOW_DELETE_COMMENT_MODAL":return Object(ys.set)(e,"deleteModalCommentId",t.payload);case"DELETE_COMMENT_CANCEL":return Object(ys.set)(e,"deleteModalCommentId",null);case"EDIT_COMMENT_BEGIN":return Object(ys.setIn)(e,["commentEditors",t.payload.id],{isEditing:!0,isInternal:t.payload.isInternal});case"EDIT_COMMENT_UPDATE":return Object(ys.setIn)(e,["commentEditors",t.payload.id],{isEditing:!0,isInternal:Object(ys.getIn)(e,["commentEditors",t.payload.id,"isInternal"]),editingValue:t.payload.value,visibility:Object(ys.getIn)(e,["commentEditors",t.payload.id,"visibility"])});case"EDIT_COMMENT_VISIBILITY":return Object(ys.setIn)(e,["commentEditors",t.payload.id,"visibility"],t.payload.visibility);case"EDIT_COMMENT_COLLAPSE":case"EDIT_COMMENT_CANCEL":return Object(pu.a)(e,["commentEditors",t.payload.id]);case"ADD_COMMENT_FORM_CANCEL":case"ADD_COMMENT_FORM_COLLAPSE":{
const t=Object(ys.unset)(e,"addCommentEditorExpand");return Object(pu.a)(t,["commentEditors","NEW_OPTIMISTIC_COMMENT"])}case"ADD_COMMENT_FORM_EXPAND":return Object(ys.set)(e,"addCommentEditorExpand",!0);case"CHANGE_COMMENT_VISIBILITY":{const{id:s,isInternal:n}=t.payload;return Object(ys.setIn)(e,["commentEditors",s,"isInternal"],n)}case"SET_COMMENT_ATTACHMENT_IN_PROGRESS":return Object(ys.set)(e,"isCommentAttachmentInProgress",t.payload.isInProgress);case"SET_COMMENT_SCROLL_STATUS":return Object(ys.set)(e,"hasScrolledPermalinkComment",t.payload.status);case"MULTILINE_FIELD_EDIT_BEGIN":{const{commentIdsToClose:s,shouldCloseAddCommentForm:n}=t.payload;if(null!=s){const t=(n?s.concat("NEW_OPTIMISTIC_COMMENT"):s).reduce(((t,s)=>bu(bu({},t),{},{[s]:bu(bu({},e.commentEditors[s]),{},{editingValue:void 0,visibility:void 0,isEditing:!1})})),{});return bu(bu({},e),{},{commentEditors:bu(bu({},e.commentEditors),t),addCommentEditorExpand:!n&&e.addCommentEditorExpand})}return e}default:return e}}
;function yu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ou(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yu(Object(s),!0).forEach((function(t){ju(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ju(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vu={isShowMoreExpanded:!1};var Eu=(e=vu,t)=>{const{type:s}=t;switch(s){case"EXPAND_SHOW_MORE":return Ou(Ou({},e),{},{isShowMoreExpanded:!0});case"COLLAPSE_SHOW_MORE":return Ou(Ou({},e),{},{isShowMoreExpanded:!1});default:return e}};function ku(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ku(Object(s),!0).forEach((function(t){Su(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ku(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Su(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Cu={isContextPanelOpen:!1,contextPanelItem:void 0};var Iu=(e=Cu,t)=>{switch(t.type){case"CONTEXT_PANEL_SHOW":return wu(wu({},e),{},{isContextPanelOpen:!0,contextPanelItem:t.payload});case"CONTEXT_PANEL_HIDE":return wu(wu({},e),{},{isContextPanelOpen:!1});default:return e}
},Tu=n("./src/packages/platform/utils/types/src/edition.js"),Pu=n("./src/packages/platform/utils/types/src/license-state.js"),_u=n("./src/packages/issue/issue-view/src/configurations.js");function xu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Du(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xu(Object(s),!0).forEach((function(t){Au(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Au(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Lu={applicationKey:"",issueActions:[],contextItemCategories:{primary:[],secondary:[]},
contentItemCategories:{visible:[],request:void 0},atlassianAccountId:null,baseUrl:Object(Ee.b)(""),isAnonymous:!1,issueKey:Object(Ee.l)(""),isModal:!1,cloudId:null,locale:"en_US",maxTokenLength:0,ecosystemEnabled:null,isLoadedWithPage:null,rapidViewMap:null,estimationStatistic:null,licensedProducts:{},appEditions:{software:Tu.d,core:Tu.d,serviceDesk:Tu.d},appPermissions:{hasCoreAccess:!1,hasSoftwareAccess:!1,hasServiceDeskAccess:!1},licenseStates:{core:Pu.d,software:Pu.d,serviceDesk:Pu.d},siteAdminStatus:"unknown",productCrossSellConfig:"unknown",isLoading:!1,viewMode:null,firstActivationDateMs:null,viewScreenId:void 0},Mu=({itemId:e,type:t})=>({id:e,type:t}),Ru=({state:e,projectConfig:t,issueId:s,contextPrimary:n,contextSecondary:a,contentVisible:i,contentRequest:r})=>{const o=Object(_u.h)(t);return Du(Du({},e),{},{issueId:s,applicationKey:o.applicationKey,issueActions:o.issueActions,ecosystemEnabled:o.ecosystemEnabled,contentItemCategories:{visible:i,request:r},
contextItemCategories:{primary:n,secondary:a}})};var Nu=(e=Lu,t)=>{switch(t.type){case"SET_CONTEXT":{const{payload:s}=t;return Du(Du({},e),s)}case"LOAD_NEW_ISSUE":return Du(Du({},e),{},{issueKey:t.payload.issueKey});case"LOGIN_SUCCESSFUL":return Du(Du({},e),{},{atlassianAccountId:t.payload.accountId});case"PREVIEW_DATA_FETCHED":{const{payload:s}=t;if(s&&s.id&&s.fields.has("project")){const{contextPrimary:t,contextSecondary:n,content:a,contentRequest:i}=s.layout,{id:r}=s,o=s.fields.get("project").value,c=a?a.map(Mu):[],l=i&&i.map(Mu);return Ru({state:e,projectConfig:o,issueId:Object(Ee.j)(r),contextPrimary:t.map(Mu),contextSecondary:n.map(Mu),contentVisible:c,contentRequest:l})}return e}case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_SUCCESS":{const s=t.payload.project,n=t.payload.issue.id,{licensedProducts:a}=t.payload,{licenseStates:i}=t.payload;let r=e.contentItemCategories.visible,o=e.contentItemCategories.request,c=e.contextItemCategories.primary,l=e.contextItemCategories.secondary
;if(t.payload.issue.contextItemsCategories){const{primary:e,secondary:s}=t.payload.issue.contextItemsCategories;c=e||[],l=s||[]}t.payload.issue.contentItemsCategories&&(r=t.payload.issue.contentItemsCategories.visible||[],o=t.payload.issue.contentItemsCategories.request);return Du(Du({},Ru({state:e,projectConfig:s,issueId:n,contextPrimary:c,contextSecondary:l,contentVisible:r,contentRequest:o})),{},{licensedProducts:a,licenseStates:i})}default:return e}};function Fu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Uu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fu(Object(s),!0).forEach((function(t){Vu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fu(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Vu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ku={};var Wu=(e=Ku,t)=>{switch(t.type){case"LOAD_DRAFT_SUCCESS":return Uu(Uu({},e),{},{[t.payload.fieldId]:!0});case"SAVE_DRAFT_REQUEST":return Object(W.isFixUnsavedCommentPlaceholderEnabled)()&&Object($e.g)(t.payload.value)?Uu(Uu({},e),{},{[t.payload.fieldId]:!1}):Uu(Uu({},e),{},{[t.payload.fieldId]:!0});case"DELETE_DRAFT_SUCCESS":return Uu(Uu({},e),{},{[t.payload.fieldId]:!1});default:return e}},Bu=(e=null,t)=>{switch(t.type){case"ECOSYSTEM_SHOW_GLANCE":return t.payload;case"ECOSYSTEM_HIDE_GLANCE":return null;default:return e}},Hu=n("./node_modules/lodash/omit.js"),$u=n.n(Hu);function Gu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),
s.push.apply(s,n)}return s}function qu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gu(Object(s),!0).forEach((function(t){zu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Yu=qu(qu({canAddComments:!1,canAdministerJira:!1,canAdministerProject:!1,canAssignIssues:!1,canBeAssignedToIssues:!1,canCloneIssue:!1,canCreateAttachments:!1,canCreateChildren:!1,canCreateSubtask:!1,canDeleteAllAttachments:!1,canDeleteAllComments:!1,canDeleteIssue:!1,canDeleteOwnAttachments:!1,canDeleteOwnComments:!1,canEditAllComments:!1,canEditIssues:!1,canEditOwnComments:!1,canLinkIssues:!1,canManageWatchers:!1,canMoveIssue:!1,canModifyReporter:!1,canScheduleIssues:!1,
canViewWatchers:!1,canBrowseUsers:!1},{canDeleteAllWorklogs:!1,canDeleteOwnWorklogs:!1,canEditAllWorklogs:!1,canEditOwnWorklogs:!1,canLogWork:!1}),{},{canUseServiceDeskAgentFeatures:!1,canViewDevTools:!1});function Qu(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ju(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Qu(Object(s),!0).forEach((function(t){Zu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Qu(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Zu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Xu={isEnabled:!1,attachmentId:null,availableAttachmentIds:[]};function ed(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function td(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(s),!0).forEach((function(t){sd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ed(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function sd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const nd={};const ad=[];var id=n("./node_modules/lodash/filter.js"),rd=n.n(id),od=n("./node_modules/lodash/pick.js"),cd=n.n(od);function ld(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ud(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ld(Object(s),!0).forEach((function(t){dd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ld(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function dd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const pd={isLinkingEnabled:!0,createLinkedPage:{clickedCount:0,isLoading:!1,isInvalid:!1,errorMessage:""},linkedPages:{pages:[],pageCount:0},mentionedPages:{pages:[],pageCount:0}},md=["linkedPages","mentionedPages"];var bd=(e=pd,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s}=t.payload,n=cd()(s.confluencePages,md),a=ud(ud({},e),n);return ud(ud({},a),{},{isLinkingEnabled:!!s.isLinkingEnabled})}
case"PREVIEW_DATA_FETCHED":{const{remoteLinks:s}=t.payload;if(s&&s.confluencePages){const{linkedPages:t,mentionedPages:n}=s.confluencePages;return ud(ud({},e),{},{linkedPages:ud(ud({},e.linkedPages),{},{pageCount:t.pageCount}),mentionedPages:ud(ud({},e.mentionedPages),{},{pageCount:n.pageCount})})}return e}case"DELETE_CONFLUENCE_PAGE_LINK_REQUEST":{const{globalId:s}=t.payload,n=((e,t)=>md.reduce(((e,s)=>{const{pages:n}=e[s],a=rd()(n,(e=>(e.link?e.link.globalId:e.globalId)!==t));return ud(ud({},e),{},{[s]:{pageCount:a.length,pages:a}})}),cd()(e,md)))(e,s);return ud(ud({},e),n)}case"CREATE_CONFLUENCE_PAGE_LINK_REQUEST":return ud(ud({},e),{},{createLinkedPage:ud(ud({},e.createLinkedPage),{},{isLoading:!0})});case"CREATE_CONFLUENCE_PAGE_LINK_FAILED":{const{errorMessage:s}=t.payload;return ud(ud({},e),{},{createLinkedPage:ud(ud({},e.createLinkedPage),{},{errorMessage:s,isLoading:!1,isInvalid:!0})})}case"CREATE_CONFLUENCE_PAGE_LINK_MODIFIED":return ud(ud({},e),{},{
createLinkedPage:ud(ud({},e.createLinkedPage),{},{errorMessage:"",isInvalid:!1})});case"LINK_CONFLUENCE_PAGE_CLOSED":return ud(ud({},e),{},{createLinkedPage:pd.createLinkedPage});case"CREATE_CONFLUENCE_PAGE_LINK_SUCCESS":{const s=e.linkedPages.pages||[];return ud(ud({},e),{},{linkedPages:ud(ud({},e.linkedPages),{},{pages:[...s,t.payload.confluencePageLink],pageCount:e.linkedPages.pageCount+1}),createLinkedPage:ud(ud({},e.createLinkedPage),{},{isLoading:!1,isInvalid:!1,errorMessage:""})})}case"LINK_CONFLUENCE_PAGE_CLICKED":return ud(ud({},e),{},{createLinkedPage:ud(ud({},e.createLinkedPage),{},{clickedCount:e.createLinkedPage.clickedCount+1})});default:return e}};function fd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?fd(Object(s),!0).forEach((function(t){hd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function hd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const yd={activityPanels:{},canInstallAddons:!1,contentPanels:{},backgroundScripts:[],ecosystemOnDate:0,glances:{},operations:[]};var Od=n("./src/packages/issue/issue-view/src/reducers/entities/forge-reducer.js");function jd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jd(Object(s),!0).forEach((function(t){Ed(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ed(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const kd={createLinkedIncident:{clickedCount:0},createMajorIncident:{clickedCount:0}};const wd=[];var Sd=n("./src/packages/platform/services/issue/src/model/issue-system-fields.js"),Cd=n("./src/packages/issue/issue-view/src/common/service/issue/issue-links-transformer.js");function Id(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Td(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Id(Object(s),!0).forEach((function(t){Pd(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Id(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Pd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const _d={issueLinks:{},linkedIssues:{},linkedIssueKeys:[]};function xd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Dd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?xd(Object(s),!0).forEach((function(t){Ad(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ad(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ld={isLoadingComplete:!1};const Md=[];const Rd={status:"NOT_LOADED",remoteLinks:[]};function Nd(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Fd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ud(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fd(Object(s),!0).forEach((function(t){Vd(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Vd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Kd={isLoading:!1,hasError:!1,isSaved:!1,isDeleted:!1,isOptimistic:!1},Wd=(e,t)=>{var s,n,a,i,r,o,c;return{id:e.issueId.toString(),issueKey:e.issueKey.stringValue,issueSummary:e.summary.textValue,statusCategoryId:null===(s=e.status)||void 0===s?void 0:s.statusCategoryId,statusCategory:Object(je.statusCategoryForId)(null===(n=e.status)||void 0===n?void 0:n.statusCategoryId),issueLink:Object(Kn.q)(t),statusName:null===(a=e.status)||void 0===a?void 0:a.name,statusId:null===(i=e.status)||void 0===i?void 0:i.statusId,issuePriorityUrl:Object(Kn.q)(e.priority.iconUrl),issuePriorityName:e.priority.name,issueTypeIconUrl:Object(Kn.q)(e.issueType.iconUrl),
issueTypeName:e.issueType.name,assigneeDisplayName:null===(r=e.assignee)||void 0===r||null===(o=r.userValue)||void 0===o?void 0:o.displayName,assigneeUrl:null!==(c=e.assignee)&&void 0!==c&&c.userValue?Object(Kn.q)(e.assignee.userValue.avatarUrl):null}},Bd=e=>e.map((e=>{const{preview:t,details:s}=e,n=!s;let a={};return a=s?s.error?{issueDetails:null,remoteIssueLinkError:s}:{issueDetails:Wd(s.associatedIssue,t.href),remoteIssueLinkError:null}:{issueDetails:null,remoteIssueLinkError:null},Ud(Ud(Ud({id:t.id.toString(),globalId:void 0===t.globalId?void 0:Object(Ee.t)(t.globalId),applicationType:t.applicationType,applicationName:t.applicationName,issueLinkUrl:Object(Kn.q)(t.href),relationship:t.relationship,issueKey:Object(Ee.l)(t.title),remoteIssueId:Object(Ee.j)(t.issueId.toString())},a),Kd),{},{isLoading:n})})),Hd=e=>{let t={};if("WITH_ISSUE_ID"===e.payloadType){const{payloadType:s}=e;t=Nd(e,["payloadType"])}else{const{payloadType:s}=e;t=Ud(Ud({},Nd(e,["payloadType"])),{},{
remoteIssueId:Object(Ee.j)(`OPTIMISTIC_ISSUE_ID_${Date.now()}`)})}const s=Ud(Ud({},Kd),{},{isLoading:!0,isOptimistic:!0});return Ud(Ud({},t),{},{issueDetails:null,remoteIssueLinkError:null},s)};function $d(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$d(Object(s),!0).forEach((function(t){qd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$d(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zd={remoteIssueCount:0,remoteIssues:[]};function Yd(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Qd(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Yd(Object(s),!0).forEach((function(t){Jd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Yd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Jd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Zd={isLinkingEnabled:!0,linkCount:0,links:[],createClickCount:0};function Xd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ep(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Xd(Object(s),!0).forEach((function(t){tp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Xd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function tp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const sp={sortedWorklogIds:[],worklogs:{},totalWorklogs:0,worklogsStartIndex:0};function np(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function ap(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function ip(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ap(Object(s),!0).forEach((function(t){rp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ap(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function rp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const op=Object(ys.freeze)({users:{},applicationRoles:[],ecosystem:yd,forge:Od.b,issueLinks:_d,issueTypes:Md,issueContentPanels:wd,issueRemoteData:Ld,permissions:Yu,comments:nd,totalComments:0,commentsStartIndex:0,loadedComments:0,confluencePages:pd,webLinks:Zd,subtasks:[],cardCover:Xu,childrenIssues:{},parentIssue:null,parentLevelIssues:[],refreshedOn:0,
requestPanelMetadata:{channel:void 0,requestUrl:""},worklog:sp,confluenceAppLinks:ad,remoteIssueLinks:zd,jiraAppLinks:Rd,incidentManagement:kd,issue:null,jiraSettings:{subtasksConfiguration:{enabled:!0},issueLinkTypes:[],timeTrackingConfiguration:{isTimeTrackingEnabled:!1,daysPerWeek:0,hoursPerDay:0,defaultUnit:"minute"}}}),cp=(e,t=[])=>$u()(e,[...t,"forgeIssueProperties"]);var lp=(e,t)=>{const s=(e=>{if(e)return e;const t={};return Object.assign(t,{issueTypes:Md}),ip(ip({},op),t)})(e);let n=Object(ys.chain)(s).set("cardCover",((e=Xu,t)=>{switch(t.type){case"CARD_COVER_FETCH_SUCCESS":return t.payload.cardCover;case"CARD_COVER_UPDATE_REQUEST":case"CARD_COVER_UPDATE_FAILURE":return Ju(Ju({},e),{},{attachmentId:t.payload.attachmentId});default:return e}})(s.cardCover,t)).set("comments",((e=nd,t)=>{switch(t.type){case"SAVE_COMMENT_SUCCESS":{const{comment:s}=t.payload;return td(td({},e),{},{[s.id]:s})}case"DELETE_COMMENT_SUCCESS":{const s=td({},e);return delete s[t.payload.id],s}default:
return e}})(s.comments,t)).set("confluencePages",bd(s.confluencePages,t)).set("issueLinks",((e=_d,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":{const{fields:s}=t.payload,n=s.get(Sd.l);if(n){const{value:e}=n;return Object(Cd.b)(Object(Ee.b)(""),Object(Cd.a)(e))}return e}case"FETCH_LINKED_ISSUES_SUCCESS":return Object(ys.merge)(e,{linkedIssues:t.payload});case"FETCH_LINKED_ISSUES_DATA_SUCCESS":{const{linkedIssues:s,issueLinks:n,optimisticIds:a}=t.payload,i=Object(pu.a)(e,["issueLinks",a]);return Object(ys.chain)(i).merge({linkedIssues:s}).merge(n).value()}case"SAVE_LINKED_ISSUE_REQUEST":{const{newIssueLinks:s}=t.payload;return Object(ys.chain)(e).merge(s.issueLinks).setIn(["issueLinks",s.optimisticId,"isOptimistic"],!0).setIn(["issueLinks",s.optimisticId,"isLoading"],!0).setIn(["issueLinks",s.optimisticId,"hasError"],!1).setIn(["issueLinks",s.optimisticId,"isSaved"],!1).value()}case"SAVE_LINKED_ISSUE_FAILURE":
return Object(ys.chain)(e).setIn(["issueLinks",t.payload.optimisticId,"isLoading"],!1).setIn(["issueLinks",t.payload.optimisticId,"hasError"],!0).value();case"SAVE_LINKED_ISSUE_SUCCESS":return Object(ys.setIn)(e,["issueLinks",t.payload.optimisticId,"isSaved"],!0);case"FETCH_LINKED_ISSUES_DATA_FAILURE":{let s=e;return t.payload.optimisticIds.forEach((e=>{s=Object(ys.setIn)(s,["issueLinks",e,"isLoading"],!1)})),s}case"SAVE_LINKED_ISSUE_RETRY":return Object(ys.chain)(e).setIn(["issueLinks",t.payload.optimisticId,"isLoading"],!0).setIn(["issueLinks",t.payload.optimisticId,"hasError"],!1).value();case"DELETE_LINKED_ISSUE_REQUEST":{const s=Object(ys.setIn)(e,["issueLinks",t.payload.linkedIssueId,"isDeleted"],!0);return Object(pu.a)(s,["deleteModalLinkId"])}case"DELETE_LINKED_ISSUE_FAILURE":return Object(ys.setIn)(e,["issueLinks",t.payload,"isDeleted"],!1);case"DELETE_LINKED_ISSUE_SUCCESS":case"SAVE_LINKED_ISSUE_CANCEL":return Object(pu.a)(e,["issueLinks",t.payload])
;case"ADD_ISSUE_LINK_CLICKED":return Object(ys.setIn)(e,["quickAddClicked"],((e||{}).quickAddClicked||0)+1);case"ADD_ISSUE_LINK_CLOSED":return Object(ys.setIn)(e,["quickAddClicked"],0);case"SET_CREATE_LINKED_ISSUE_PERMISSION":return Object(ys.setIn)(e,["canCreateLinkedIssue"],t.payload.canCreateLinkedIssue);case"REFRESH_ISSUE_SUCCESS":if(t.payload.issueLinks){const s=t.payload.issueLinks;return Object(ys.setIn)(s,["canCreateLinkedIssue"],e.canCreateLinkedIssue)}return e;case"CREATE_LINKED_ISSUE_SUCCESS":{const{newIssueLinks:s}=t.payload;return Pc()(s.issueLinks,((e,t)=>{s.issueLinks[t]=Td(Td({},e),{},{isOptimistic:!1,isLoading:!0,hasError:!1,isSaved:!0})})),Object(ys.merge)(e,s)}default:return e}})(s.issueLinks,t)).set("ecosystem",((e=yd,t)=>{switch(t.type){case"CONTENT_PANEL_SELECTED":return gd(gd({},e),{},{selectedContentPanel:t.payload});case"CONTENT_PANEL_UNSELECT":return gd(gd({},e),{},{selectedContentPanel:void 0});case"REFRESH_ECOSYSTEM_SUCCESS":return gd({},t.payload)
;case"FETCH_ISSUE_SUCCESS":return gd({},t.payload.ecosystem);default:return e}})(s.ecosystem,t)).set("forge",Object(Od.a)(s.forge,t)).set("confluenceAppLinks",((e=ad,t)=>{switch(t.type){case"FETCH_CONFLUENCE_APP_LINKS_SUCCESS":return t.payload;default:return e}})(s.confluenceAppLinks,t)).set("issueContentPanels",((e=wd,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":return t.payload.issueContentPanels||e;case"ADD_CONTENT_PANEL_SUCCESS":return[...e,t.payload];case"REMOVE_CONTENT_PANEL_SUCCESS":{const{payload:s}=t;return e.filter((e=>e!==s))}case"CONTENT_PANELS_CUSTOMISED_SUCCESS":return e.includes("issue.content.panel.customised.flag")?e:[...e,"issue.content.panel.customised.flag"];default:return e}})(s.issueContentPanels,t)).set("issueTypes",((e=Md,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":return t.payload.issueTypes||e||Md;case"SET_ISSUE_TYPES":return t.payload.map((e=>{const{id:t,name:s,subtask:n,iconUrl:a,fields:i}=e;return{id:t,name:s,subtask:n,
iconUrl:a,fields:i}}));default:return t.type,e}})(s.issueTypes,t)).set("webLinks",((e=Zd,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s={}}=t.payload,{webLinks:n}=s,{linkCount:a=0,links:i=[]}=n||{};return Qd(Qd({},e),{},{isLinkingEnabled:!!s.isLinkingEnabled,linkCount:a,links:i})}case"SHOW_CREATE_WEB_LINK_FORM":return Qd(Qd({},e),{},{createClickCount:e.createClickCount+1});case"HIDE_CREATE_WEB_LINK_FORM":return Qd(Qd({},e),{},{createClickCount:Zd.createClickCount});case"DELETE_WEB_LINK_REQUEST":{const{id:s}=t.payload,n=e.links.map((e=>e.id===s?Qd(Qd({},e),{},{isDeleting:!0,deleteFailed:!1}):e));return Qd(Qd({},e),{},{links:n})}case"DELETE_OPTIMISTIC_WEB_LINK":case"DELETE_WEB_LINK_SUCCESS":{const{id:s}=t.payload;if(s&&e.links){const t=e.links.filter((e=>e.id!==s)),n=t.length;return Qd(Qd({},e),{},{linkCount:n,links:t})}return e}case"DELETE_WEB_LINK_FAILED":{const{id:s}=t.payload,n=e.links.map((e=>e.id===s?Qd(Qd({},e),{},{isDeleting:!1,deleteFailed:!0
}):e));return Qd(Qd({},e),{},{links:n})}case"CANCEL_FAILED_WEB_LINK_DELETION":{const{id:s}=t.payload,n=e.links.map((e=>e.id!==s?e:{id:e.id,href:e.href,linkText:e.linkText,iconUrl:e.iconUrl}));return Qd(Qd({},e),{},{links:n})}case"CREATE_WEB_LINK_REQUEST":{const{optimisticId:s,href:n,linkText:a,iconUrl:i}=t.payload;return Qd(Qd({},e),{},{linkCount:e.linkCount+1,links:[...e.links,{id:s,href:n,linkText:a,iconUrl:i,isCreating:!0,createFailed:!1}]})}case"CREATE_WEB_LINK_SUCCESS":{const{optimisticId:s,webLink:n}=t.payload,a=e.links.map((e=>e.id===s?n:e));return Qd(Qd({},e),{},{links:a})}case"CREATE_WEB_LINK_FAILED":{const{optimisticId:s}=t.payload,n=e.links.map((e=>e.id===s?Qd(Qd({},e),{},{isCreating:!1,createFailed:!0}):e));return Qd(Qd({},e),{},{links:n})}case"CREATE_WEB_LINK_RETRY":{const{optimisticId:s}=t.payload,n=e.links.map((e=>e.id===s?Qd(Qd({},e),{},{isCreating:!0,createFailed:!1}):e));return Qd(Qd({},e),{},{links:n})}default:return e}
})(s.webLinks,t)).set("incidentManagement",((e=kd,t)=>{switch(t.type){case"LINK_INCIDENT_CLICKED":return vd(vd({},e),{},{createLinkedIncident:vd(vd({},e.createLinkedIncident),{},{clickedCount:e.createLinkedIncident.clickedCount+1})});case"CREATE_MAJOR_INCIDENT_CLICKED":return vd(vd({},e),{},{createMajorIncident:vd(vd({},e.createMajorIncident),{},{clickedCount:e.createMajorIncident.clickedCount+1})});default:return e}})(s.incidentManagement,t)).value();return n=Object(ys.set)(n,"remoteIssueLinks",((e=zd,t)=>{switch(t.type){case"FETCH_ISSUE_SUCCESS":{const{remoteLinks:s={}}=t.payload,{remoteLinkedIssues:n=[]}=s,a=n.length;if(e.remoteIssueCount)return e;const i=Gd(Gd({},e),{},{remoteIssueCount:a,remoteIssues:Bd(n)});return Gd({},i)}case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":{const{remoteLinks:s={}}=t.payload,{remoteLinkedIssues:n=[]}=s,a=n.length,i=Gd(Gd({},e),{},{remoteIssueCount:a,remoteIssues:Bd(n)});return no()(i,e)?e:Gd({},i)}case"DELETE_REMOTE_LINKED_ISSUE_REQUEST":{
const{globalId:s}=t.payload;return Gd(Gd({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.globalId===s?Gd(Gd({},e),{},{isDeleted:!0}):e))})}case"DELETE_REMOTE_LINKED_ISSUE_SUCCESS":{const s=t.payload;return Gd(Gd({},e),{},{remoteIssues:e.remoteIssues.reduce(((e,t)=>(t.globalId!==s&&e.push(t),e)),[])})}case"DELETE_REMOTE_LINKED_ISSUE_FAILURE":{const s=t.payload;return Gd(Gd({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.globalId===s?Gd(Gd({},e),{},{isDeleted:!1}):e))})}case"SAVE_REMOTE_LINKED_ISSUE_REQUEST":{const{saveRemoteIssueLinkPayload:s}=t.payload;return Gd(Gd({},e),{},{remoteIssues:e.remoteIssues.concat(Hd(s))})}case"SAVE_REMOTE_LINKED_ISSUE_SUCCESS":{const{optimisticId:s,saveRemoteLinkResponse:{id:n,issueId:a,globalId:i}}=t.payload;return Gd(Gd({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.id===s?Gd(Gd({},e),{},{id:n.toString(),globalId:Object(Ee.t)(i),remoteIssueId:void 0!==a?Object(Ee.j)(a.toString()):e.remoteIssueId,isOptimistic:!1,isSaved:!0}):e))})}
case"SAVE_REMOTE_LINKED_ISSUE_FAILURE":{const{optimisticId:s,error:n}=t.payload;return 400===n.statusCode?Gd(Gd({},e),{},{remoteIssues:e.remoteIssues.filter((e=>e.id!==s))}):Gd(Gd({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.id===s?Gd(Gd({},e),{},{isLoading:!1,hasError:!0}):e))})}case"SAVE_REMOTE_LINKED_ISSUE_RETRY":{const{optimisticId:s}=t.payload;return Gd(Gd({},e),{},{remoteIssues:e.remoteIssues.map((e=>e.id===s?Gd(Gd({},e),{},{isLoading:!0,hasError:!1}):e))})}case"SAVE_REMOTE_LINKED_ISSUE_CANCEL":{const s=t.payload;return Gd(Gd({},e),{},{remoteIssues:e.remoteIssues.filter((e=>e.id!==s))})}default:return e}})(s.remoteIssueLinks,t)),n=Object(ys.set)(n,"jiraAppLinks",((e=Rd,t)=>{switch(t.type){case"FETCH_JIRA_APP_LINKS_SUCCESS":return{status:"LOADED",remoteLinks:t.payload.map((e=>({id:e.id,name:e.name,baseUrl:Object(Ee.b)(e.url),authUrl:Object(Ee.i)(e.authUrl),requireCredentials:e.requireCredentials})))};case"FETCH_JIRA_APP_LINKS_FAILED":return{status:"ERROR",
remoteLinks:e.remoteLinks};case"FETCH_JIRA_APP_LINKS_REQUEST":return{status:"LOADING",remoteLinks:e.remoteLinks};case"APPLINK_AUTHENTICATION_SUCCESS":return{status:"NOT_LOADED",remoteLinks:e.remoteLinks};default:return e}})(s.jiraAppLinks,t)),n=Object(ys.set)(n,"worklog",((e=sp,t)=>{switch(t.type){case"state.FETCH_WORKLOGS_BY_ID_SUCCESS":{const{sortedWorklogIds:s,worklogs:n,startIndex:a,totalWorklogs:i}=t.payload;return ep(ep({},e),{},{sortedWorklogIds:s,worklogs:n,worklogsStartIndex:a,totalWorklogs:i})}case"state.FETCH_WORKLOGS_BY_ID_FAILURE":return ep({},sp);case"state.EDIT_WORKLOG_SUCCESS":{const{worklogs:s}=t.payload;return ep(ep({},e),{},{worklogs:s})}case"state.FETCH_WORKLOGS_SUCCESS":{const{sortedWorklogIds:s,worklogs:n,totalWorklogs:a}=t.payload,{worklogsStartIndex:i}=e;return{sortedWorklogIds:s.slice().reverse().concat(e.sortedWorklogIds),worklogs:ep(ep({},e.worklogs),n),totalWorklogs:a,worklogsStartIndex:i}}case"FETCH_ISSUE_SUCCESS":{
const{payload:e}=t,{sortedWorklogIds:s,worklogs:n,totalWorklogs:a,worklogsStartIndex:i}=e;return{sortedWorklogIds:s,worklogs:n,totalWorklogs:a,worklogsStartIndex:i}}case"state.DELETE_WORKLOG_SUCCESS":{const{worklogId:s}=t.payload,{totalWorklogs:n,worklogsStartIndex:a}=e;return{sortedWorklogIds:e.sortedWorklogIds.filter((e=>e!==s)),worklogs:$u()(e.worklogs,s),totalWorklogs:n-1,worklogsStartIndex:a}}case"state.FETCH_SORTED_WORKLOGS_SUCCESS":{const{worklogs:e,totalWorklogs:s,startIndex:n,sortedWorklogIds:a}=t.payload;return{sortedWorklogIds:a,worklogs:e,totalWorklogs:s,worklogsStartIndex:n}}case"state.FETCH_NEWER_SORTED_WORKLOGS_SUCCESS":{const{worklogs:s,totalWorklogs:n,startIndex:a,sortedWorklogIds:i,selectedSortOrder:r}=t.payload,o="NEWEST_FIRST"===r?[...i,...e.sortedWorklogIds]:[...e.sortedWorklogIds,...i];return ep(ep({},e),{},{worklogs:ep(ep({},e.worklogs),s),sortedWorklogIds:o,totalWorklogs:n,worklogsStartIndex:a})}case"state.FETCH_OLDER_SORTED_WORKLOGS_SUCCESS":{
const{worklogs:s,totalWorklogs:n,startIndex:a,sortedWorklogIds:i,selectedSortOrder:r}=t.payload,o="NEWEST_FIRST"===r?[...e.sortedWorklogIds,...i]:[...i,...e.sortedWorklogIds];return ep(ep({},e),{},{worklogs:ep(ep({},e.worklogs),s),sortedWorklogIds:o,totalWorklogs:n,worklogsStartIndex:a})}default:return e}})(s.worklog,t)),n=Object(ys.set)(n,"issueRemoteData",((e=Ld,t)=>{switch(t.type){case"FETCH_ISSUE_REMOTE_DATA_SUCCESS":case"FETCH_ISSUE_REMOTE_DATA_FAILURE":return Dd(Dd({},e),{},{isLoadingComplete:!0});default:return e}})(s.issueRemoteData,t)),((e,t)=>{const{type:s,payload:n}=t;switch(s){case"FETCH_ISSUE_SUCCESS":{const t=Object(ys.merge)(e,cp(n,["issueContentPanels","issueTypes"]));return $u()(t,[["issue","fields"],["issue","contextItemsCategories"],["issue","contentItemsCategories"],"changeboardingLastInteracted","licensedProducts","licenseStates"])}case"FETCH_SCREENID_SUCCESS":case"FETCH_MORE_COMMENTS_SUCCESS":return Object(ys.merge)(e,n);case"FETCH_SORTED_COMMENTS_SUCCESS":{
const{comments:t,commentsStartIndex:s,loadedComments:a,totalComments:i}=n;let r=Object(ys.chain)(e).setIn(["comments"],t).setIn(["commentsStartIndex"],s).setIn(["loadedComments"],a).setIn(["totalComments"],i).value();return n.users&&(r=Object(ys.set)(r,"users",Object(ys.merge)(e.users,n.users))),r}case"FETCH_LATEST_COMMENTS_SUCCESS":{const{comments:t,commentsStartIndex:s,loadedComments:a,totalComments:i,users:r}=n;let o=Object(ys.chain)(e).setIn(["comments"],t).setIn(["commentsStartIndex"],s).setIn(["loadedComments"],a).setIn(["totalComments"],i).value();return r&&(o=Object(ys.set)(o,"users",Object(ys.merge)(e.users,r))),o}case"PREVIEW_DATA_FETCHED":{const{fields:t}=n;let s=e;const a=t&&t.get("project");if(a&&a.value&&(s=Object(ys.set)(s,"project",a.value)),n.comments){const{comments:{comments:e={},totalCount:t,startIndex:a}}=n;s=Object(ys.chain)(s).setIn(["comments"],e).setIn(["loadedComments"],Object.keys(e).length).setIn(["totalComments"],t).setIn(["commentsStartIndex"],a).value()}
return n.users&&(s=Object(ys.set)(s,"users",Object(ys.merge)(e.users,n.users))),s}case"REFRESH_ISSUE_SUCCESS":{const t=cp(n),s=Object.keys(t).reduce(((s,n)=>"users"===n?Object(ys.set)(s,"users",Object(ys.merge)(e.users,t.users)):"issueTypes"===n||"issueLinks"===n||"issueContentPanels"===n?s:Object(ys.set)(s,n,t[n])),e);return Object(ys.setIn)(s,["refreshedOn"],Date.now())}case"FETCH_LOGGED_IN_USER_SUCCESS":{const{user:t,applicationRoles:s}=n,a=t.id,i=ip({},e.users);return(Object(W.removeTimeZoneFromIssueUser)()?a&&t.id&&!i[t.id]:a)&&(i[t.id]=t),ip(ip({},e),{},{users:i},Object(W.isUseAppPermissionsFromTenantContextEnabled)()?void 0:{applicationRoles:s})}case"SAVE_COMMENT_SUCCESS":return n.isNewComment?Object(ys.chain)(e).setIn(["loadedComments"],e.loadedComments+1).setIn(["totalComments"],e.totalComments+1).value():e;case"DELETE_COMMENT_SUCCESS":return Object(ys.chain)(e).setIn(["loadedComments"],e.loadedComments-1).setIn(["totalComments"],e.totalComments-1).value()
;case"REQUEST_PANEL_METADATA_FETCH_SUCCESS":{const t=Object(pu.a)(e,["requestPanelMetadata"]);return Object(ys.setIn)(t,["requestPanelMetadata"],n)}case"PROJECT_ISSUE_TYPES_REQUEST_SUCCESS":return Object(ys.setIn)(e,["project","issueTypes"],n);case"FETCH_ISSUE_PARENTS_SUCCESS":return Object(ys.setIn)(e,["parentLevelIssues"],n);case"SET_PARENT_SUCCESS":{const s=t.payload.parentIssue,{issueType:n}=s,a=np(s,["issueType"]),{name:i,iconUrl:r}=n||{},o=ip(ip({},a),{},{issueTypeName:i||"",issueTypeIconUrl:r||""});return Object(ys.setIn)(e,["parentIssue"],o)}case"UNSET_PARENT_SUCCESS":return Object(ys.setIn)(e,["parentIssue"],null);case"CHILD_ISSUE_ADD_SUCCESS":{const{payload:{childIssue:s}}=t;s.isLoading=void 0;const n=JSON.parse(JSON.stringify(e.childrenIssues));return n.push(s),Object(ys.setIn)(e,["childrenIssues"],n)}case"SUBTASK_ADD_SUCCESS":{const{payload:{subtask:s}}=t,n=JSON.parse(JSON.stringify(e.subtasks));return n.push(s),Object(ys.setIn)(e,["subtasks"],n)}default:return e}})(n,t)}
;const up=e=>{const{traceId:t,errorMessage:s,endpoint:n,statusCode:a}=e,i={};return null!==t&&(i.traceId=t),null!==s&&(i.errorMessage=s),null!==n&&(i.endpoint=n),null!==a&&(i.statusCode=a),i};var dp=(e=null,t)=>{switch(t.type){case"FETCH_ISSUE_FAILURE":case"ISSUE_PREVIEW_FAILURE":return up(t.payload);default:return e}};var pp=(e=null,t)=>{switch(t.type){case"FETCH_ISSUE_FAILURE":case"ISSUE_PREVIEW_FAILURE":return t.payload.error;case"LOGIN_SUCCESSFUL":return null;default:return e}};var mp=(e="NONE",t)=>{switch(t.type){case"FETCHING_ISSUE_TYPES":return"PENDING";case"SET_ISSUE_TYPES":return"COMPLETE";case"FETCH_ISSUE_TYPES_FAILED":return"FAILED";default:return t.type,e}};const bp=e=>e.length>0?e[0].id+1:1,fp="CONTENT_LIMIT_EXCEEDED",gp=[];var hp=(e=gp,t)=>{switch(t.type){case"SAVE_COMMENT_FAILURE":return t.payload.invalidMessage&&t.payload.invalidMessage.includes(fp)?[{type:Nc.k,id:bp(e)},...e]:[{type:t.payload.isServerValidationError?Nc.j:Nc.i,id:bp(e)},...e]
;case"DELETE_COMMENT_FAILURE":return[{type:Nc.l,id:bp(e)},...e];case"ATTACHMENT_MEDIA_SERVICES_UPLOAD_ERROR":case"ATTACHMENT_JIRA_CREATE_FAILURE":return[{type:Nc.d,id:bp(e)},...e];case"EDITOR_CHANGE_FAILURE":case"EDITOR_EXPANDED_FAILURE":case"EDITOR_SAVE_FAILURE":return[{type:Nc.t,id:bp(e)},...e];case Nc.F:return[{type:Nc.F,id:bp(e)},...e];case"DELETE_LINKED_ISSUE_FAILURE":case"DELETE_REMOTE_LINKED_ISSUE_FAILURE":return[{type:Nc.p,id:bp(e)},...e];case"SAVE_REMOTE_LINKED_ISSUE_FAILURE":{const{error:s,remoteIssueKey:n}=t.payload;if(400===s.statusCode){const t=(e=>{try{const t=JSON.parse(e),s=Object.values(t.errors||{});return[...t.errorMessages||[],...s].join(" ")}catch{return e}})(s.message);return[{type:Nc.D,id:bp(e),titleI18nValues:{remoteIssueKey:n},descriptionI18nValues:{i18nServerErrorMessage:t}},...e]}return e}case"FIELD_SAVE_FAILURE":{const{fieldOptions:s}=t.payload,{onSaveFailureFlagType:n}=s;if(s.isRichTextField&&t.payload.invalidMessage){
if(t.payload.invalidMessage.includes(fp))return[{type:Nc.G,id:bp(e)},...e];if(t.payload.invalidMessage&&t.payload.invalidMessage.includes("is required"))return[{type:Nc.H,id:bp(e)},...e]}return n?[{type:n,id:bp(e)},...e]:e}case"FIELD_SAVE_SUCCESS":{const{onSaveSuccessFlagType:s}=t.payload.fieldOptions;return s?[{type:s,id:bp(e),descriptionI18nValues:{issueKey:t.meta&&t.meta.issueKey}},...e]:e}case"DISMISS_FLAG":return e.filter((e=>e.id!==t.payload));case"DELETE_ISSUE_FAILURE":return[{type:Nc.o,id:bp(e),titleI18nValues:{issueKey:t.payload.issueKey}},...e];case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_SUCCESS":return[{type:Nc.g,id:bp(e),titleI18nValues:{destType:t.payload.targetTypeName}},...e];case"SIMPLE_CHANGE_ISSUE_TYPE_REQUEST_FAILURE":return[{type:Nc.f,id:bp(e)},...e];case"TOGGLE_WATCHING_ERROR":return[{type:Nc.O,id:bp(e)},...e];case"FETCH_WATCHERS_ERROR":return[{type:Nc.y,id:bp(e)},...e];case"START_WATCHING_SUCCESS":return[{type:Nc.K,id:bp(e)},...e];case"STOP_WATCHING_SUCCESS":return[{
type:Nc.L,id:bp(e)},...e];case"REMOVE_WATCHER_ERROR":return[{type:Nc.E,id:bp(e)},...e];case"ADD_WATCHER_ERROR":return[{type:Nc.a,id:bp(e)},...e];case"state.ADD_WORKLOG_FAILURE":return[{type:Nc.b,id:bp(e)},...e];case"state.UPDATE_TIME_REMAINING_FAILURE":return[{type:Nc.N,id:bp(e)},...e];case"state.EDIT_WORKLOG_SUCCESS":return[{type:Nc.w,id:bp(e)},...e];case"state.EDIT_WORKLOG_FAILURE":return[{type:Nc.v,id:bp(e)},...e];case"state.DELETE_WORKLOG_SUCCESS":return[{type:Nc.s,id:bp(e)},...e];case"state.DELETE_WORKLOG_FAILURE":return[{type:Nc.r,id:bp(e)},...e];case"DELETE_CONFLUENCE_PAGE_LINK_FAILED":return[{type:Nc.n,id:bp(e)},...e];case"DELETE_WEB_LINK_FAILED":return[{type:Nc.q,id:bp(e)},...e];case Nc.I:return[{type:Nc.I,id:bp(e)},...e];case Nc.J:return[{type:Nc.J,id:bp(e)},...e];case"FETCH_JIRA_APP_LINKS_FAILED":return[{type:Nc.x,id:bp(e)},...e];default:return e}};function yp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Op(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yp(Object(s),!0).forEach((function(t){jp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vp={showCreateIncidentPanel:!1,showCreateMajorIncidentModal:!1};var Ep=(e=vp,t)=>{switch(t.type){case"LINK_INCIDENT_CLICKED":return Op(Op({},e),{},{showCreateIncidentPanel:!0});case"LINK_INCIDENT_PANEL_CLOSED":return Op(Op({},e),{},{showCreateIncidentPanel:!1});case"CREATE_MAJOR_INCIDENT_CLICKED":return Op(Op({},e),{},{showCreateMajorIncidentModal:!0});case"CREATE_MAJOR_INCIDENT_MODAL_CLOSED":
return Op(Op({},e),{},{showCreateMajorIncidentModal:!1});default:return e}};function kp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kp(Object(s),!0).forEach((function(t){Sp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Sp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Cp={isDeleteIssueModalOpen:!1,isDeletingIssue:!1,didIssueDeleteFail:!1,issueKey:null};var Ip=(e=Cp,t)=>{switch(t.type){case"OPEN_DELETE_ISSUE_MODAL":return wp(wp({},e),{},{isDeleteIssueModalOpen:!0})
;case"CLOSE_DELETE_ISSUE_MODAL":return wp(wp({},e),{},{isDeleteIssueModalOpen:!1});case"DELETE_ISSUE_REQUEST":return wp(wp({},e),{},{isDeletingIssue:!0,didIssueDeleteFail:!1,issueKey:t.payload.issueKey});case"DELETE_ISSUE_SUCCESS":return wp(wp({},e),{},{isDeletingIssue:!1,didIssueDeleteFail:!1,issueKey:t.payload});case"DELETE_ISSUE_FAILURE":return wp(wp({},e),{},{isDeletingIssue:!1,didIssueDeleteFail:!0,issueKey:t.payload.issueKey});default:return e}},Tp=(e="LOADING",t)=>{const{type:s}=t;switch(s){case"FETCH_ISSUE_SUCCESS":case"REFRESH_ISSUE_SUCCESS":case"FETCH_ISSUE_FAILURE":return"COMPLETE";case"PREVIEW_DATA_FETCHED":return"LOADING"===e?"PREVIEW":e;case"LOGIN_SUCCESSFUL":case"LOAD_NEW_ISSUE":return"LOADING";default:return e}};function Pp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _p(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Pp(Object(s),!0).forEach((function(t){xp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Pp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Dp={shouldShowIssueTypeList:!1};var Ap=(e=Dp,t)=>{const{type:s,payload:n}=t;switch(s){case"SHOW_ISSUE_TYPE_LIST":return _p(_p({},e),{},{shouldShowIssueTypeList:n});default:return e}};function Lp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?Lp(Object(s),!0).forEach((function(t){Rp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Lp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Rp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Np={projectHasSubtaskValidators:{status:"LOADING"}};var Fp=(e=Np,t)=>{switch(t.type){case"SET_CONTEXT":return e;case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS":return Mp(Mp({},e),{},{projectHasSubtaskValidators:{status:"LOADING"}});case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_SUCCESS":return Mp(Mp({},e),{},{projectHasSubtaskValidators:{status:"LOADED",value:t.payload}});case"FETCH_PROJECT_HAS_SUBTASK_VALIDATORS_FAILURE":return Mp(Mp({},e),{},{projectHasSubtaskValidators:{status:"FAILED"}});default:return e}},Up=(e=[],t)=>{const{type:s,payload:n}=t;switch(s){
case"FETCH_RECENTLY_VISITED_CONFLUENCE_PAGES_SUCCESS":return n;default:return e}};const Vp={timestamp:0,value:void 0};var Kp=(e=Vp,t)=>{switch(t.type){case"SHARE_AS_COMMENT":return{timestamp:Date.now(),value:t.payload.value};case"CLEAR_SHARED_AS_COMMENT_VALUES":return{timestamp:Date.now()};default:return e}};function Wp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Bp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wp(Object(s),!0).forEach((function(t){Hp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Hp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0
}):e[t]=s,e}const $p={newIssueViewLockedIn:!1};var Gp=(e=$p,t)=>{switch(t.type){case"PREVIEW_DATA_FETCHED":{const s=t.payload.meta&&t.payload.meta.newIssueViewLockedIn;return void 0!==s?Bp(Bp({},e),{},{newIssueViewLockedIn:s}):e}case"FETCH_ISSUE_SUCCESS":{const{newIssueViewLockedIn:s}=t.payload;return void 0!==s?Bp(Bp({},e),{},{newIssueViewLockedIn:s}):e}default:return e}};function qp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qp(Object(s),!0).forEach((function(t){Yp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yp(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Qp={hasIssueViewMounted:!1};var Jp=(e=Qp,t)=>{switch(t.type){case"ISSUE_VIEW_MOUNTED":return zp(zp({},e),{},{hasIssueViewMounted:!0});default:return t.type,e}};function Zp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Xp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Zp(Object(s),!0).forEach((function(t){em(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Zp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function em(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const tm={openModal:"NO_MODAL",
isSaving:!1,activeWorklogId:null};function sm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sm(Object(s),!0).forEach((function(t){am(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function am(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const im={hasScrolledPermalink:!1};var rm=Object(Fe.combineReducers)({loadingStage:(e="LOADING",t)=>{switch(t.type){case"state.FETCH_WORKLOGS_REQUEST_INITIAL":case"state.ADD_WORKLOG_SUCCESS":case"state.FETCH_SURROUNDING_WORKLOGS_BY_ID":
case"state.FETCH_SORTED_WORKLOGS_REQUEST":case"state.FETCH_SORTED_WORKLOGS_RETRY":return"LOADING";case"state.FETCH_NEWER_SORTED_WORKLOGS_REQUEST":return"LOADING_NEWER_WORKLOGS";case"state.FETCH_OLDER_SORTED_WORKLOGS_REQUEST":return"LOADING_OLDER_WORKLOGS";case"state.FETCH_WORKLOGS_SUCCESS":case"FETCH_ISSUE_SUCCESS":case"state.FETCH_WORKLOGS_BY_ID_SUCCESS":case"state.FETCH_SORTED_WORKLOGS_SUCCESS":case"state.FETCH_OLDER_SORTED_WORKLOGS_SUCCESS":case"state.FETCH_NEWER_SORTED_WORKLOGS_SUCCESS":return"COMPLETE";case"state.FETCH_WORKLOGS_FAILURE":case"state.FETCH_SORTED_WORKLOGS_FAILURE":return"LOADING"===e?"ERROR":"ERROR_ADDITIONAL";case"state.FETCH_WORKLOGS_BY_ID_FAILURE":return"ERROR";default:return e}},modal:(e=tm,t)=>{switch(t.type){case"state.OPEN_MODAL":return{openModal:t.payload.modalType,isSaving:!1,activeWorklogId:t.payload.worklogId};case"state.UPDATE_TIME_REMAINING_REQUEST":case"state.ADD_WORKLOG_REQUEST":case"state.EDIT_WORKLOG_REQUEST":case"state.DELETE_WORKLOG_REQUEST":
return Xp(Xp({},e),{},{isSaving:!0});case"state.UPDATE_TIME_REMAINING_FAILURE":case"state.ADD_WORKLOG_FAILURE":case"state.EDIT_WORKLOG_FAILURE":case"state.DELETE_WORKLOG_FAILURE":return Xp(Xp({},e),{},{isSaving:!1});case"state.CLOSE_MODAL":case"state.ADD_WORKLOG_SUCCESS":case"state.UPDATE_TIME_REMAINING_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":case"state.DELETE_WORKLOG_SUCCESS":return{openModal:"NO_MODAL",isSaving:!1,activeWorklogId:null};default:return e}},highlightedWorklogId:(e=null,t)=>{switch(t.type){case"state.ADD_WORKLOG_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":return t.payload.worklogId;case"state.DISPOSE_WORKLOG_APP":return null;case"state.OPEN_MODAL":default:return e}},permalinkStatus:(e=im,t)=>{switch(t.type){case"SET_WORKLOG_SCROLL_STATUS":return nm(nm({},e),{},{hasScrolledPermalink:t.payload.status});case"state.ADD_WORKLOG_SUCCESS":case"state.EDIT_WORKLOG_SUCCESS":return nm(nm({},e),{},{hasScrolledPermalink:!1});default:return e}}});function om(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function cm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?om(Object(s),!0).forEach((function(t){lm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):om(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function lm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const um={agile:void 0,context:void 0,entities:void 0,fields:void 0,mediaContext:{viewContext:null,uploadContext:null,userAuth:null},shareAsComment:void 0,timing:void 0,ui:void 0,validators:void 0},dm=()=>{const e={};return e.issueType=Ap,e},pm=(e,t)=>Object(Fe.combineReducers)({agile:Wl,context:Nu,entities:lp,fields:Al,
mediaContext:Object(Fe.combineReducers)({uploadContext:hl,userAuth:yl,viewContext:wl}),shareAsComment:Kp,timing:gl,ui:Object(Fe.combineReducers)(cm({attachments:Object(Fe.combineReducers)({picker:Xl}),activityFeed:Fl,assignIssueParentModal:ql,comments:hu,changeboarding:au,childPanel:lu,cloneModal:du,contextItems:Eu,contextPanel:Iu,drafts:Wu,ecosystem:Object(Fe.combineReducers)({glance:Bu}),error:pp,fetchIssueTypesStatus:mp,flags:hp,issueDeletion:Ip,loadingStage:Tp,recentlyVisitedConfluencePages:Up,uiConfig:Gp,viewMountStatus:Jp,worklog:rm,incidentManagement:Ep,errorMessage:dp},dm())),validators:Fp})(e,t);var mm=(e=um,t)=>{if("LOAD_NEW_ISSUE"===t.type){const s=pm({ui:{changeboarding:e.ui.changeboarding,uiConfig:e.ui.uiConfig}},F(Object(le.k)(e))),n=pm(s,t),a=Object(te.y)(e),i=Object(W.isUseAppPermissionsFromTenantContextEnabled)()?[]:Object(Fc.a)(e);return a?pm(n,Ie(a,i)):n}if("LOAD_RECENT_ISSUE"===t.type){const s=Object(le.k)(e),{issueState:n}=t.payload;return pm(cm(cm({},n),{},{
context:cm(cm(cm({},n.context),s),{},{issueId:n.context.issueId,contentItemCategories:n.context.contentItemCategories,contextItemCategories:n.context.contextItemCategories})}),Object(V.g)())}return pm(e,t)};const bm=()=>e=>t=>{try{e(t)}catch(s){throw ve.h.safeErrorWithoutCustomerData("issue.middleware.error-logger",`Unhandled error in ${t.type}`),s}};var fm=({initialState:e,onChange:t=We.a,onError:s=We.a,dataProvider:n,history:a,issueKey:i=Object(Ee.l)(""),fieldsValueActions:r,fieldsConfigActions:o,issueViewLayoutActions:c,forgeActions:l,ecosystemActions:u,attachmentActions:d,recentIssuesActions:p,prefetchedResourceManager:m,userPreferenceActions:f,issueScrollActions:g,permissionActions:h,issueTabsActions:y,jiraSettingsActions:O,projectContextActions:j,issueContextActions:v,workflowTransitionsActions:E})=>Object(Fe.createStore)(Object(Ue.enableBatching)(mm),e,Object(ve.a)({name:`issue-${i}`})(Object(Fe.applyMiddleware)(...((e,t,s,n,a,i,r,o,c,l,u,d,p,m,f,g,h,y,O,j)=>{
const v=Object(b.b)(dl(e,t,s,n,a,i,r,o,c,l,u,p,d,m,f,g,h,y,O,j)),E=Object(Ve.createEpicMiddleware)(v);return[bm,E]})(t,s,n,a,r,o,c,l,u,d,p,m,f,g,h,y,O,j,v,E)))),gm=n("./src/packages/issue/issue-view/src/common/service/issue/gira/index.js"),hm=n("./src/packages/issue/issue-view/src/common/service/issue/gira/media-context/index.js"),ym=n("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js");const Om=e=>({id:Number(e.id),name:e.name,subtask:e.subtask,iconUrl:e.iconUrl});function jm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jm(Object(s),!0).forEach((function(t){Em(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Em(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const km=({resourceManager:e,savePreferences:t,saveIssueTabs:s,saveProjectContext:n,storeFieldsWithContext:a,storeIssueLayoutData:i,storeEcosystemData:r,attachmentActions:o,permissionActions:c,jiraSettingsActions:l,store:u,issueData:d,baseUrl:p,issueContextActions:m,issueKey:b})=>{const f=e.getGiraData(),g=e.getGqlData();if(f&&f.viewIssue&&g){!Object(W.isStopFetchPreviewEnabled)()&&d&&u.dispatch(Pe(d));const{readToken:e,uploadToken:h,userToken:y}=f.mediaContext||{};if(e){const t=Object(hm.b)(e);u.dispatch(Ot(t))}else u.dispatch(yt());if(h)if(null!=h.clientId&&null!=h.endpointUrl&&null!=h.targetCollection&&null!=h.token&&null!=h.tokenDurationInMins){
const e=tn({clientId:h.clientId,endpointUrl:h.endpointUrl,targetCollection:h.targetCollection,token:h.token,tokenDurationInMins:h.tokenDurationInMins});u.dispatch(Object(en.d)(e))}else null!=h.error?u.dispatch(Object(en.b)(new Error(h.error))):u.dispatch(Object(en.b)({statusCode:500}));else u.dispatch(Object(en.c)());if(y){const e=Object(hm.c)(y);u.dispatch(rn(e))}const O=Object(ym.c)(g,p),j=vm(vm({},Object(gm.c)(f)),O);s(j.issue.tabs);const{project:v}=j;if(Object(W.isProjectContextIssueTypesOnLoadEnabled)()){if(v){const e=j.issueTypes.map(Om);n(Object(Ee.r)(v.projectKey),vm(vm({},v),{},{issueTypes:e}))}}else v&&n(Object(Ee.r)(v.projectKey),v);a(j.issue.fields),i(j.issueSections),t(j.myPreferences),r(j.ecosystem),u.dispatch(Object(V.d)(j)),j.attachments&&o.setVisibleAttachments(b,j.attachments.nodes),j.attachments&&o.setTotalCount(b,j.attachments.totalCount),j.attachments&&"number"==typeof j.attachments.deletableCount&&o.setDeletableCount(b,j.attachments.deletableCount),
j.permissions&&v&&c.setProjectPermissions(Object(Ee.r)(v.projectKey),j.permissions),j.jiraSettings&&l.setJiraSettings(j.jiraSettings),(e=>!!e)(j.issue.viewScreenId)&&m&&m.mergeIssueContext({viewScreenId:j.issue.viewScreenId})}};function wm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Sm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wm(Object(s),!0).forEach((function(t){Cm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Cm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Im=(e,t)=>{
const{baseUrl:s,cloudId:n,licensedProducts:a,locale:i,atlassianAccountId:r,productCrossSellConfig:o,siteAdminStatus:c,isAnonymous:l,appEditions:u,appPermissions:d,licenseStates:p,firstActivationDateMs:m}=t;return{analyticsSource:e.analyticsSource,appEditions:u,appPermissions:d,atlassianAccountId:r,baseUrl:s,backButtonUrl:e.backButtonUrl,boardId:e.boardId,boardType:e.boardType,cloudId:n,estimationStatistic:e.estimationStatistic,firstActivationDateMs:m,isAnonymous:l,isLoadedWithPage:e.isLoadedWithPage,isLoading:!1,isModal:e.isModal,isSpaEnabled:e.isSpaEnabled,issueKey:e.issueKey,licensedProducts:a,licenseStates:p,locale:i,loginRedirectUrl:e.loginRedirectUrl,maxTokenLength:Object(ke.a)(),onIssueKeyChange:e.onIssueKeyChange,productCrossSellConfig:o,rapidViewId:e.rapidViewId,rapidViewMap:e.rapidViewMap,siteAdminStatus:c,viewMode:e.viewMode}},Tm=e=>{var t;const s={analyticsSource:e.analyticsSource,backButtonUrl:e.backButtonUrl,boardId:e.boardId,boardType:e.boardType,
estimationStatistic:e.estimationStatistic,isLoadedWithPage:e.isLoadedWithPage,isLoading:!1,isModal:e.isModal,isSpaEnabled:e.isSpaEnabled,issueKey:e.issueKey,loginRedirectUrl:e.loginRedirectUrl,maxTokenLength:Object(ke.a)(),onIssueKeyChange:e.onIssueKeyChange,rapidViewId:e.rapidViewId,rapidViewMap:null===(t=e.rapidViewMap)||void 0===t?void 0:t.map((e=>e.map((e=>Object(Ee.l)(e))))),viewMode:e.viewMode};return Object(W.isStopFetchPreviewEnabled)()&&(e.issueId?s.issueId=e.issueId:ve.h.safeErrorWithoutCustomerData("issue.app-provider.issue-context","`issueId` was not passed as a prop",new Oe.a({eventNameSuffix:"issue.error",type:"js",app:"issue"}))),s},Pm=(e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y,O)=>{const j=a.getRecentIssue(e.issueKey),v=a.getRecentIssuesCount(),E={analyticsSource:e.analyticsSource,isLoadedWithPage:e.isLoadedWithPage||!1,isSPA:!e.isInitialRender,isRecentIssue:!!j,recentIssuesCount:v,dataProvider:s,store:n,route:b}
;if(Object(W.isReportingAttachmentViewEnabled)()&&(E.userPreferenceActions=o),Object(K.a)(E),n.dispatch(F(Im(e,t))),d.setIssueContext(Tm(e)),e.dispatchExternalActionRef&&e.dispatchExternalActionRef(l),j)n.dispatch(Object(V.g)());else if(Object(W.isStopFetchPreviewEnabled)())c&&km({resourceManager:c,savePreferences:e=>o.setUserPreferences(e),storeFieldsWithContext:t=>ka(t,i,r,e.issueKey),storeIssueLayoutData:t=>{f.setIssueViewLayout(e.issueKey,t)},storeEcosystemData:e=>{h.setEcosystem(e)},saveIssueTabs:t=>m.setIssueTabs(e.issueKey,t),saveProjectContext:(e,s)=>{if(O.setProjectContext(e,s),Object(W.isPolarisInsightsTabEnabled)()&&s){const{projectType:n}=s;Ne(t.baseUrl,e,n).then((t=>O.mergeProjectProperty(e,{isPolarisProject:t})))}},permissionActions:p,attachmentActions:u,jiraSettingsActions:y,store:n,baseUrl:t.baseUrl,issueContextActions:d,issueKey:e.issueKey}),c&&c.isAllDataReady()?(n.dispatch(Object(V.a)()),c.clearAll()):(Object(K.f)(),n.dispatch(Object(V.c)())),n.dispatch(Ce());else{
const a=s.getIssue(e.issueKey);if(c&&a&&(void 0!==a.id&&d.mergeIssueContext({issueId:Object(Ee.j)(String(a.id))}),km({resourceManager:c,savePreferences:e=>o.setUserPreferences(e),storeFieldsWithContext:t=>ka(t,i,r,e.issueKey),storeIssueLayoutData:t=>{f.setIssueViewLayout(e.issueKey,t)},storeEcosystemData:e=>{h.setEcosystem(e)},saveIssueTabs:t=>m.setIssueTabs(e.issueKey,t),saveProjectContext:(e,s)=>{if(O.setProjectContext(e,s),Object(W.isPolarisInsightsTabEnabled)()&&s){const{projectType:n}=s;Ne(t.baseUrl,e,n).then((t=>O.mergeProjectProperty(e,{isPolarisProject:t})))}},permissionActions:p,attachmentActions:u,jiraSettingsActions:y,store:n,issueData:a,baseUrl:t.baseUrl,issueContextActions:d,issueKey:e.issueKey})),(e=>!Object(te.n)(e.getState()))(n))if(a){var k;n.dispatch(Pe(a)),ka(Object(_e.a)(a),i,r,e.issueKey,!0),f.setIssueViewLayout(e.issueKey,a.issueSections),o.setUserPreferences(a.myPreferences);const t=null===(k=a.fields.get("project"))||void 0===k?void 0:k.value
;t&&O.setProjectContext(Object(Te.a)(e.issueKey),t)}else n.dispatch(we(e.issueKey));c&&c.isAllDataReady()&&a?(n.dispatch(Object(V.a)()),c.clearAll()):(Object(K.f)(),n.dispatch(Object(V.c)())),n.dispatch(Ce())}j||n.dispatch(Object(Se.b)(e.issueKey))};function _m(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function xm(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_m(Object(s),!0).forEach((function(t){Dm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_m(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Dm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Am(e,t){if(null==e)return{}
;var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Lm=Object(f.a)((()=>Object(W.isCodeInDevPanelExperimentEnabled)()),(({children:e})=>c.a.createElement(g.a,null,e)),(({children:e})=>e)),Mm=e=>{const{analyticsSource:t,backButtonUrl:s,boardId:n,boardType:a,dispatchExternalActionRef:i,estimationStatistic:r,isLoadedWithPage:l,isModal:u,issueKey:d,isSpaEnabled:f,locationTransformer:g,loginRedirectUrl:P,rapidViewId:$,rapidViewMap:G,viewMode:q,children:z}=e,Y=Object(R.c)(),Q=Object(L.a)(),X=Object(_.a)(),[,ee]=(()=>{const[,e]=J(),t=Object(o.useCallback)((t=>e.getRecentIssue(t)),[e]),s=Object(o.useCallback)(((t,s)=>e.setRecentIssue(t,s)),[e]),n=Object(o.useCallback)((()=>e.getRecentIssuesCount()),[e])
;return[null,Object(o.useMemo)((()=>({setRecentIssue:s,getRecentIssue:t,getRecentIssuesCount:n})),[t,s,n])]})(),[,te]=Object(O.b)(),[,ne]=Object(j.e)(),[ae]=Object(Z.a)(),[,ie]=Object(w.a)(),[,re]=Object(h.b)(),[,oe]=Object(E.b)(),[,ce]=Object(A.e)(),[,le]=Object(y.e)(),[,ue]=Object(I.a)(),[,de]=Object(C.a)(),[,pe]=Object(S.a)(),[,me]=Object(k.a)(),[,be]=Object(M.a)(),[,fe]=Object(D.f)(),[,he]=Object(T.a)(),Oe=Object(o.useMemo)((()=>((e,t,s,n,a,i,r,o,c,l,u,d,p,m,b,f,g,h,y)=>{const O=n.getRecentIssue(e.issueKey),j=O?Sm(Sm({},O),{},{context:Sm(Sm({},O.context),Im(e,t))}):void 0;return fm({attachmentActions:d,onChange:e.onChange,onError:e.onError,dataProvider:s,history:e.history||ye()(),initialState:j,issueKey:e.issueKey,fieldsValueActions:a,fieldsConfigActions:i,issueViewLayoutActions:r,forgeActions:o,ecosystemActions:c,prefetchedResourceManager:u,recentIssuesActions:n,userPreferenceActions:l,issueScrollActions:p,permissionActions:m,issueTabsActions:b,jiraSettingsActions:f,
projectContextActions:g,issueContextActions:h,workflowTransitionsActions:y})})(e,Y,Q,ee,ne,te,ue,de,pe,ie,ae,re,oe,ce,me,be,fe,le,he)),[]),je=Object(o.useCallback)((()=>{const e=Oe.getState(),t=Object(H.a)(e),{attributes:s}=t;return xm(xm({},Am(t,["attributes"])),s)}),[Oe]),ve=Object(o.useCallback)((e=>{const t=Object(U.d)(e);Oe.dispatch(t)}),[Oe]);Object(o.useMemo)((()=>{Pm(e,Y,Q,Oe,ee,ne,te,ie,ae,ve,re,le,ce,me,X,ue,0,pe,be,fe)}),[]),Object(o.useEffect)((()=>()=>{const e=Oe.getState();"COMPLETE"===e.ui.loadingStage&&ee.setRecentIssue(d,e)}),[d,ee,Oe]);const Ee=Object(o.useRef)(!0);return Object(o.useEffect)((()=>{Ee.current||(Oe.dispatch(F(Im(e,Y))),le.setIssueContext(Tm(e))),Object(W.isRemoveDuplicateGiraEnabled)()||(Ee.current=!1)}),[s,d,P,$,a,n,l,u,G,r,t,q]),Object(o.useEffect)((()=>{if(!Ee.current){ee.getRecentIssue(e.issueKey)&&Oe.dispatch(Object(V.g)())}Object(W.isRemoveDuplicateGiraEnabled)()&&(Ee.current=!1)}),[e.issueKey,ee,Oe]),Object(o.useEffect)((()=>()=>{
ae&&ae.clearAll(),!1!==f&&null!=f||setTimeout((()=>Oe.dispatch(b.a))),i&&i(null)}),[]),Object(K.g)(),c.a.createElement(v.a,null,c.a.createElement(N.a,{scope:d},c.a.createElement(Lm,null,c.a.createElement(p.a,{store:Oe,getAnalyticsAttributes:Object(W.isNewAnalyticsComponent)()?void 0:je},c.a.createElement(x.a,{getAttributes:je},c.a.createElement(ge,null),c.a.createElement(se,null),c.a.createElement(m.a,null,c.a.createElement(B.b,{store:Oe,locationTransformer:g},z)))))))};Mm.displayName="AppProvider";const Rm=e=>c.a.createElement(P.a,{scope:e.issueKey},c.a.createElement(Mm,e));Rm.displayName="ScopedAppProvider";var Nm=Rm;s.a=i()(r.a,(()=>e=>{var t,s;return s=t=class extends o.Component{constructor(...e){super(...e),this.MetricsContext=Object(d.b)(this.props.metrics)}render(){const{MetricsContext:t}=this;return c.a.createElement(t.Provider,{value:Object(d.a)(this.props.metrics)},c.a.createElement(e,this.props))}},t.displayName=`WithMetricsProvider(${e.displayName||e.name})`,s
})(),(function(e){return t=>c.a.createElement(l.a,null,(s=>c.a.createElement(e,u({},t,{isInitialRender:s.isInitialRender}))))}))(Nm)},"./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg":function(e,t,s){e.exports=s.p+"assets/auth-error.37d7a62ee1c48c2d5ae201ec8f798f18.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg":function(e,t,s){e.exports=s.p+"assets/permission-error.c932893e3cfcbf2f521d55c8596010e7.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg":function(e,t,s){e.exports=s.p+"assets/unknown-error.0ae7398ce07e7e3c1125e09977c8fd48.8.svg"},"./src/packages/issue/issue-view/src/views/issue-details/issue-app.js":function(e,t,s){"use strict";s.r(t);const n=e=>{try{window.performance.mark(e)}catch(t){}},a="jira.issue-view.issue-app.eval-start",i="jira.issue-view.issue-app.eval-end";n(a)
;var r=s("./node_modules/react/index.js"),o=s.n(r),c=s("./node_modules/lodash/noop.js"),l=s.n(c),u=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),d=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),p=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),m=s("./src/packages/growth/up-flow/persistent-upgrade-banner/src/async.js"),b=s("./src/packages/issue/issue-view/src/common/util/events/index.js");const f=[d.a.FULL_ISSUE,d.a.SERVICEDESK_QUEUES_ISSUE,d.a.SERVICEDESK_REPORTS_ISSUE]
;var g=s("./src/packages/issue/issue-view/src/views/assign-issue-parent-modal/index.js"),h=s("./src/packages/issue/issue-view/src/views/banner/index.js"),y=s("./node_modules/react-redux/es/index.js"),O=s("./src/packages/issue/opt-in-back/src/async.js"),j=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js"),v=s("./src/packages/issue/issue-view/src/selectors/changeboarding-selector.js");const E=({hasEditField:e,hasShowMoreLink:t})=>{const s={hasShowMoreLink:t,hasEditField:e};return o.a.createElement(O.c,s)};E.displayName="ChangeBoardingTour";var k=Object(y.connect)((e=>({hasEditField:Object(v.a)(e),hasShowMoreLink:Object(j.f)(e)
})),{})(E),w=s("./src/packages/issue/issue-view/src/views/common/compact-mode-provider/index.js"),S=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),C=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),I=s("./src/packages/platform/utils/types/src/general.js"),T=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),P=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),_=s("./src/packages/issue/issue-view/src/feedback-button/index.js"),x=s("./src/packages/platform/utils/constants/src/application-keys.js");const D={[x.a.SOFTWARE_ISSUE]:{feedbackGroupId:"jira-software-full-issueview",collectorId:"12f21050"},[x.a.CORE_ISSUE]:{feedbackGroupId:"jira-core-full-issueview",collectorId:"f7ac9eb0"},[x.a.SERVICE_DESK]:{feedbackGroupId:"jira-service-desk-full-issueview",collectorId:"3311e016"},[x.a.BITBUCKET_ISSUE]:{
feedbackGroupId:"bitbucket-jira-issueview",collectorId:"e7fdb917"}};function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const L=({applicationKey:e,baseUrl:t,locale:s,isCompact:n=!1})=>{if(null==e||!(e=>Boolean(D[e]))(e))return null;const a=D[e];return o.a.createElement(P.a,{name:"GIVE_FEEDBACK"},o.a.createElement(_.a,A({},a,{baseUrl:t,locale:s,isCompact:n})))};L.displayName="Feedback";var M=L;const R=Object(y.connect)((e=>({baseUrl:Object(I.b)(Object(T.f)(e)),locale:Object(T.z)(e),applicationKey:Object(T.e)(e)})),{})(M);const N=(e,t=!0)=>o.a.createElement(R,{isCompact:t});N.displayName="renderFeedback";s("./node_modules/react-magnetic-di/lib/esm/index.js")
;var F=s("./src/packages/platform/controllers/global/document-title/src/index.js"),U=s("./src/packages/issue/issue-context-service/src/main.js"),V=s("./src/packages/issue/fields/summary/src/services/index.js");const K=({location:e})=>{const t=Object(U.g)(),[{value:s}]=Object(V.a)({issueKey:t});return e!==d.a.FULL_ISSUE&&e!==d.a.SERVICEDESK_QUEUES_ISSUE&&e!==d.a.SERVICEDESK_REPORTS_ISSUE||null==s?null:o.a.createElement(F.a,{title:`[${t}] ${s}`})};K.displayName="ExtractedDocumentTitle"
;var W=K,B=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js"),H=s("./src/packages/issue/issue-view/src/views/issue-details/app-provider/index.js"),$=s("./src/packages/platform/ui/error-boundaries/src/ui/js-error-boundary/index.js"),G=s("./src/packages/platform/services/providers-project-context/src/index.js"),q=s("./src/packages/routes/src/ui/spa/servicedesk/practices/resources/index.js"),z=s("./src/packages/servicedesk/change-management-tour/src/async.js"),Y=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),Q=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),J=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{}
;var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const ee=e=>{let{isServiceDeskAgent:t,projectId:s}=e,n=X(e,["isServiceDeskAgent","projectId"]);const{data:a}=Object(q.b)();return null===s||!0!==a||!0!==t?null:o.a.createElement($.a,{id:"changeManagementTourIssue",packageName:"jiraServicedeskChangeManagementTourIssue",fallback:"flag"},o.a.createElement(G.a,null,(({data:e})=>e&&!0===e.isProjectAdmin?o.a.createElement(z.a,Z({projectId:Object(I.q)(s.toString())},n)):null)))};ee.displayName="ChangeManagementTour";var te=Object(y.connect)((e=>({fields:Object(Y.s)(e),projectId:Object(Q.C)(e),isServiceDeskAgent:Object(J.f)(e)})),{})(ee);var se=Object(y.connect)((e=>({fields:Object(Y.s)(e),
projectId:Object(I.q)(Object(Q.C)(e))})),{})((e=>{const{data:t}=Object(q.b)();return e.projectId?!0===t&&o.a.createElement(G.a,null,(({data:t})=>t&&!0===t.isProjectAdmin?o.a.createElement(z.a,e):null)):null})),ne=s("./src/packages/servicedesk/incident-management-tour/src/async.js");function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ie(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const re=e=>{let{isServiceDeskAgent:t,projectId:s}=e,n=ie(e,["isServiceDeskAgent","projectId"]);const{data:a}=Object(q.b)()
;return null===s||!0!==a||!0!==t?null:o.a.createElement($.a,{id:"incidentManagementTourIssues",packageName:"jiraServicedeskIncidentManagementTour",fallback:"flag"},o.a.createElement(G.a,null,(({data:e})=>e&&!0===e.isProjectAdmin?o.a.createElement(ne.a,ae({projectId:Object(I.q)(s.toString())},n)):null)))};re.displayName="IncidentManagementTour";var oe=Object(y.connect)((e=>({fields:Object(Y.s)(e),projectId:Object(Q.C)(e),isServiceDeskAgent:Object(J.f)(e)})),{})(re);var ce,le,ue,de=Object(y.connect)((e=>({fields:Object(Y.s)(e),projectId:Object(I.q)(Object(Q.C)(e))})),{})((e=>{const{data:t}=Object(q.b)();return e.projectId?!0===t&&o.a.createElement($.a,{id:"incidentManagementTourIssues",packageName:"jiraServicedeskIncidentManagementTour",fallback:"flag"},o.a.createElement(G.a,null,(({data:t})=>t&&!0===t.isProjectAdmin?o.a.createElement(ne.a,e):null))):null
})),pe=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),me=s("./src/packages/issue/issue-view/src/views/issue-details/issue-view.js"),be=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js"),fe=s("./src/packages/issue/issue-view/src/common/metrics/index.js"),ge=s("./src/packages/platform/observability/spa-performance-breakdown/src/utils/mark-product-start/index.js"),he=s("./src/packages/issue/issue-view/src/feature-flags.js");const ye=new Set([d.a.SOFTWARE_ISSUE,d.a.AGILITY_BACKLOG]),Oe=[d.a.FULL_ISSUE,d.a.SERVICEDESK_QUEUES_ISSUE,d.a.SERVICEDESK_REPORTS_ISSUE];let je=Object(u.b)("issue")((ue=le=class extends r.PureComponent{constructor(e){super(e),this.onEscape=e=>{Object(b.c)(e)&&(this.props.onClose(),e.preventDefault())},this.canCloseOnEsc=()=>ye.has(this.props.analyticsSource),this.getRenderFeedback=()=>{const{analyticsSource:e}=this.props;if(f.includes(e))return N},this.renderTopBanner=()=>{
const{analyticsSource:e}=this.props;return f.includes(e)?o.a.createElement(m.a,{isBannerEnabled:!0,isFullWidth:!0}):null},this.renderIssueView=()=>{const e=this.getIssueViewProps();return o.a.createElement(me.default,e)},this.renderChangeManagementTour=()=>Object(he.isItsmToursCheckAgentPermissionsEnabled)()?o.a.createElement(te,{currentIssueKey:this.props.issueKey}):o.a.createElement(se,{currentIssueKey:this.props.issueKey}),this.renderChangeboardingTour=()=>Oe.includes(this.props.analyticsSource)?o.a.createElement(k,null):null,this.renderIncidentManagementTour=()=>Object(he.isItsmToursCheckAgentPermissionsEnabled)()?o.a.createElement(oe,{currentIssueKey:this.props.issueKey}):o.a.createElement(de,{currentIssueKey:this.props.issueKey}),this.isMobile=()=>this.props.analyticsSource===d.a.MOBILE_ISSUE,this.isFullPage=e=>e===d.a.FULL_ISSUE,this.getIssueViewProps=()=>({renderFeedback:this.getRenderFeedback(),issueDeleteCallbacks:{onIssueDeleteSuccess:this.props.onIssueDeleteSuccess,
onIssueDeleteFailure:this.props.onIssueDeleteFailure},viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowCloseButton:this.props.shouldShowCloseButton,issueMaxWidth:this.props.issueMaxWidth,onError:this.props.onError});const{analyticsSource:t}=e;Object(fe.h)(this.isFullPage(t))}componentDidMount(){this.canCloseOnEsc()&&document.addEventListener("keydown",this.onEscape)}UNSAFE_componentWillReceiveProps(e){if(e.issueKey!==this.props.issueKey){const{analyticsSource:e}=this.props;Object(fe.h)(this.isFullPage(e))}}componentWillUnmount(){this.canCloseOnEsc()&&document.removeEventListener("keydown",this.onEscape)}renderHeader(){const{onClose:e,shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,onIssueDeleteSuccess:a,onIssueDeleteFailure:i,viewModeOptions:r}=this.props
;return this.isMobile()?o.a.createElement(be.a,{elementId:"jira-issue-header",customStyles:`padding-left: ${3*p.e}px; padding-right: ${3*p.e}px;`},o.a.createElement(B.a,{shouldShowCloseButton:t,shouldShowProjectLevelBreadcrumb:s,shouldShowRootProjectsBreadcrumb:n,issueDeleteCallbacks:{onIssueDeleteSuccess:a,onIssueDeleteFailure:i},onClose:e,renderFeedback:this.getRenderFeedback(),viewModeOptions:r})):null}render(){const{analyticsSource:e,backButtonUrl:t,dispatchExternalActionRef:s,ecosystemEnabled:n,estimationStatistic:a,history:i,isCompact:c,isLoadedWithPage:l,isSpaEnabled:u,issueActions:d,issueId:p,issueKey:m,locationTransformer:b,loginRedirectUrl:f,metrics:y,onChange:O,onError:j,onIssueKeyChange:v,rapidViewId:E,rapidViewMap:k,viewModeOptions:I,issueMaxWidth:T}=this.props,P={analyticsSource:e,backButtonUrl:t,dispatchExternalActionRef:s,ecosystemEnabled:n,estimationStatistic:a,history:i,isLoadedWithPage:l,isSpaEnabled:u,issueActions:d,issueId:p,issueKey:m,locationTransformer:b,
loginRedirectUrl:f,metrics:y,onChange:O,onError:j,onIssueKeyChange:v,rapidViewId:E,rapidViewMap:k,viewMode:I&&I.viewMode},_=this.isMobile()?r.Fragment:pe.a,x=this.isMobile()?r.Fragment:pe.b;return o.a.createElement(o.a.Fragment,null,"full-issue"===e&&o.a.createElement(ge.a,null),o.a.createElement(H.a,P,o.a.createElement(W,{location:e}),o.a.createElement(w.b,{defaultIsCompact:c},o.a.createElement(S.a,null,o.a.createElement(C.a,null,o.a.createElement(_,{issueMaxWidth:T},o.a.createElement(x,null,this.renderChangeboardingTour(),o.a.createElement(h.a,{renderTopBanner:this.renderTopBanner}),this.renderHeader())),o.a.createElement(g.a,null),this.renderIssueView(),this.renderChangeManagementTour(),this.renderIncidentManagementTour())))))}},le.defaultProps={isCompact:!1,isLoadedWithPage:!1,isSpaEnabled:!1,shouldShowRootProjectsBreadcrumb:!1,viewModeOptions:{viewModeSwitchEnabled:!1},onClose:l.a,onIssueDeleteSuccess:l.a,onIssueDeleteFailure:l.a},ce=ue))||ce;t.default=je;(()=>{n(i)})()},
"./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return a})),s.d(t,"c",(function(){return r})),s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return c}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js");const a=4*s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js").e,i=e=>`calc((100% - ${e}px) / 2)`,r=(e,t)=>`\n        ${e}: ${i(t)}; /* for browsers which do not support max(); negative padding is ignored by browsers */\n        ${e}: max(${i(t)}, 0px); /* for browsers which support max() */\n        \n        .msie-11 & { /* IE11 is the only browser which does not ignore negative padding */\n            ${e}: 0;\n        }\n    `,o=n.default.div(["flex-shrink:0;",""],(({issueMaxWidth:e})=>void 0!==e?`\n        ${r("padding-left",e)}\n        ${r("padding-right",e)}    \n        `:"")),c=n.default.div(["padding:0 ","px;"],a)},
"./src/packages/issue/issue-view/src/views/issue-details/issue-layout/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return l})),s.d(t,"d",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"g",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"h",(function(){return b})),s.d(t,"f",(function(){return f})),s.d(t,"e",(function(){return g}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js"),i=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/styled.js"),r=s("./src/packages/issue/issue-view/src/views/issue-details/issue-app.styled.js"),o=s("./src/packages/issue/issue-view/src/views/issue-details/issue-layout/utils.js")
;const c=1.5*a.e,l=n.default.div(["padding:0 ","px ","px;"," ",""],4*a.e,i.c,(({issueMaxWidth:e})=>void 0!==e?`padding-top: ${i.b}px;`:""),(({isLeftmost:e,isRightmost:t})=>e?`\n                padding-left: ${r.d}px;\n                `:t?`\n                padding-left: ${3*a.e}px\n                padding-right: ${r.d-1.5*a.e}px;\n                `:"")),u=n.default.div(["flex-grow:1;",";",""],(({scrollHidden:e})=>e?Object(n.css)(["overflow:hidden;","{border-right:","px solid transparent;}"],l,15):"\n        overflow-x: hidden; /* 2 value shorthand syntax is not supported in IE11 */\n        overflow-y: auto;\n   "),(({medium:e,isLeftmost:t,isRightmost:s,issueMaxWidth:n})=>{const a=e/10,i=s?c:t?-c:0,l=void 0!==n;return`\n            width: ${`${(100*a).toFixed(3)}%`};\n            width: ${`calc(${a} * min(${Object(o.a)()}px, 100%) + ${i}px)`};\n            ${t&&l?Object(r.c)("padding-left",n):""}\n            ${s&&l?Object(r.c)("padding-right",n):""}\n        `
})),d=n.default.div(["margin-top:","px;"],3*a.e),p=n.default.div(["position:relative;height:100%;"]),m=n.default.div(["display:flex;flex-wrap:wrap;flex-direction:row;align-items:flex-start;justify-content:space-between;align-content:stretch;margin-left:","px;margin-bottom:","px;padding-left:","px;"],-a.e,3*a.e,1.25*a.e),b=n.default.div(["visibility:",";"],(e=>e.show?"visible":"hidden")),f=n.default.div(["height:100%;",";"],(({scrollHidden:e})=>e?Object(n.css)(["overflow:hidden;border-right:","px solid transparent;"],15):"\n        overflow: auto;\n   ")),g=n.default.div(["",""],(({issueMaxWidth:e})=>void 0===e?`padding: 0 ${2.5*a.e}px;`:`padding: ${i.b}px ${4*a.e}px ${i.c}px;`))},"./src/packages/issue/issue-view/src/views/issue-details/issue-layout/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n=()=>1400},"./src/packages/issue/issue-view/src/views/issue-details/issue-view.js":function(e,t,s){"use strict";s.r(t),s.d(t,"Issue",(function(){return vR}))
;var n={};s.r(n),s.d(n,"setSortableIssueIds",(function(){return XO})),s.d(n,"setSortBy",(function(){return ej}))
;var a=s("./node_modules/react/index.js"),i=s.n(a),r=s("./node_modules/react-redux/es/index.js"),o=s("./node_modules/lodash/noop.js"),c=s.n(o),l=s("./node_modules/query-string/index.js"),u=s.n(l),d=s("./node_modules/@atlaskit/page/dist/es2019/GridColumn.js"),p=s("./node_modules/@atlaskit/smart-card/dist/es2019/index.js"),m=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/error.js"),b=s("./src/packages/platform/observability/analytics-web-react/src/components/view-tracker.js"),f=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/withAnalyticsEvents.js"),g=s("./src/packages/platform/observability/analytics-web-react/src/utils/fire-track-event.js"),h=s("./src/packages/platform/observability/analytics-web-react/src/components/redux-analytics-data.js"),y=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/jira-bridge.js"),O=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/logging/log.js"),j=s("./src/packages/shortcuts-dialog/src/ui/main.js")
;var v=s("./node_modules/react-intl/lib/index.es.js"),E=s("./src/packages/platform/observability/analytics-web-react/src/components/with-fire-ui-analytics.js"),k=s("./src/packages/platform/observability/analytics-web-react/src/components/decorators.js"),w=s("./src/packages/issue/worklog/src/services/context/index.js"),S=s("./src/packages/issue/issue-view/src/common/actions/worklog-actions.js"),C=s("./src/packages/issue/issue-view/src/common/service/mentions/get-mention-encoder.js"),I=s("./src/packages/issue/issue-view/src/common/service/mentions/mention-provider-selector.js"),T=s("./src/packages/issue/issue-view/src/common/state/selectors/context-selector.js"),P=s("./src/packages/issue/issue-view/src/common/state/selectors/issue-selector.js"),_=s("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),x=s("./src/packages/issue/issue-view/src/common/state/selectors/time-tracking-selector.js"),D=s("./src/packages/issue/issue-view/src/selectors/status-selector.js"),A=s("./src/packages/platform/observability/analytics-web-react/src/utils/events.js"),L=s("./src/packages/rich-content/src/common/adf-parsing-utils.js"),M=s("./src/packages/time-tracking-formatter/src/main.js"),R=s("./src/packages/platform/ui/error-boundary/src/main.js"),N=s("./src/packages/platform/observability/errors-handling/src/utils/reporting-error-boundary.js"),F=s("./src/packages/issue/issue-view/src/feature-flags.js"),U=s("./src/packages/issue/issue-view/src/common/util/time-string/is-time-string-valid/index.js"),V=e=>""===e.trim()||Object(U.a)(e),K=s("./src/packages/issue/issue-view/src/common/util/time-string/seconds-to-time-string/index.js"),W=s("./src/packages/issue/issue-view/src/common/util/time-string/time-string-to-seconds/index.js"),B=s("./src/packages/issue/issue-view/src/common/util/types/type-check/index.js"),H=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/enter-escape-handler/index.js"),$=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/modal-dialog/index.js"),G=s("./node_modules/@atlaskit/button--next/dist/es2019/button.js"),q=s("./node_modules/@atlaskit/spinner/dist/es2019/spinner.js"),z=Object(v.h)({
save:{id:"issue.log-time.modal.log-time-action.save",defaultMessage:"Save"},cancel:{id:"issue.log-time.modal.log-time-action.cancel",defaultMessage:"Cancel"}}),Y=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),Q=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js");const J=Y.default.div(["display:inline-flex;justify-content:flex-end;align-items:center;width:100%;>:not(:first-child){margin-left:","px;}"],Q.e/2),Z=Y.default.div(["> *{display:flex;}margin-right:","px;"],Q.e),X=()=>i.a.createElement(Z,null,i.a.createElement(q.a,{size:"small"}));X.displayName="renderSpinner";const ee=e=>{const{formState:t,onConfirm:s,onCancel:n,intl:a}=e;return i.a.createElement(J,null,"submitting"===t?X():null,i.a.createElement(G.a,{appearance:"primary",onClick:s,isDisabled:"invalid"===t||"submitting"===t},a.formatMessage(z.save)),i.a.createElement(G.a,{appearance:"subtle",onClick:n,isDisabled:"submitting"===t},a.formatMessage(z.cancel)))}
;ee.displayName="LogTimeModalFooter";var te=ee,se=Object(v.i)(te),ne=s("./node_modules/@atlaskit/form/dist/es2019/Field.js"),ae=s("./src/packages/issue/issue-view/src/common/util/date-time-formatter/index.js"),ie=s("./src/packages/issue/issue-view/src/common/component/date-time/view.js"),re=s("./node_modules/react-loosely-lazy/lib/esm/index.js"),oe=s("./src/packages/issue/issue-view/src/common/component/editor/async.js"),ce=Object(v.h)({label:{id:"issue.log-time.modal.work-description.label",defaultMessage:"Work description"}});const le=Object(re.f)((()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/common/component/editor/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/common/component/editor/index.js"});class ue extends a.Component{render(){const e=i.a.createElement(oe.b,{mediaContext:this.props.mediaContext,defaultValue:this.props.defaultValue});return i.a.createElement(ne.default,{name:"work-description",
label:this.props.intl.formatMessage(ce.label)},(()=>i.a.createElement(oe.a,{packageName:"issue",fallback:e},i.a.createElement(le,{isExpanded:!0,externalId:this.props.externalId,baseUrl:this.props.baseUrl,isDisabled:this.props.isDisabled,defaultValue:this.props.defaultValue,portalElement:this.props.portalElement,onChange:this.props.onChange,onChangeFailure:this.props.onChangeFailure,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider}))))}}ue.displayName="WorkDescription",ue.defaultProps={portalElement:void 0};var de=Object(v.i)(ue),pe=Object(v.h)({timeRemaining:{id:"issue.log-time.modal.time-remaining",defaultMessage:"Time remaining"},timeSpent:{id:"issue.log-time.modal.time-spent",defaultMessage:"Time spent"},dateStarted:{id:"issue.log-time.modal.date-started",defaultMessage:"Date started"}})
;const me=Y.default.div(["align-items:center;display:flex;flex-direction:row;>:not(:first-child){margin-left:","px;}"],Q.e),be=Y.default.div(["width:50%;"]),fe=Y.default.div(["width:100%;"]);var ge=s("./src/packages/issue/issue-view/src/common/messages/time.js");class he extends a.Component{constructor(...e){super(...e),this.state={shouldAppearInvalid:!this.props.isValid},this.onBlur=()=>{this.setState({shouldAppearInvalid:!this.props.isValid})}}UNSAFE_componentWillReceiveProps(e){!this.props.isValid&&e.isValid&&this.setState({shouldAppearInvalid:!1})}render(){return i.a.createElement("div",{onBlur:this.onBlur},this.props.children(this.state.shouldAppearInvalid))}}he.displayName="WithValidationOnBlur";var ye=s("./node_modules/@atlaskit/field-text/FieldTextStateless.js");class Oe extends a.Component{constructor(...e){super(...e),this.onChange=e=>{this.props.onChange(e.target.value)}}render(){return i.a.createElement(ye.a,{value:this.props.value,label:this.props.label,
placeholder:this.props.placeholder,isInvalid:this.props.isInvalid,invalidMessage:this.props.isInvalid?this.props.invalidMessage:void 0,disabled:this.props.isDisabled,required:this.props.isRequired,autoFocus:this.props.autoFocus,onChange:this.onChange,onBlur:this.props.onBlur,shouldFitContainer:!0})}}Oe.displayName="TimeLogTextField",Oe.defaultProps={isInvalid:!1,isRequired:!1,isDisabled:!1,autoFocus:!1,placeholder:void 0,invalidMessage:void 0,onBlur:c.a};var je=s("./node_modules/@atlaskit/tooltip/dist/es2019/Tooltip.js");const ve=Y.default.div(["padding:","px ","px;"],Q.e-2,Q.e-6),Ee=Y.default.div(["list-style:inside;margin-top:","px;padding-left:","px;padding-bottom:","px;"],Q.e,Q.e/2,Q.e/2);class ke extends a.Component{tooltipContentRender(){const{intl:e}=this.props;return i.a.createElement(ve,null,i.a.createElement("p",null,e.formatMessage(ge.a.exampleFormat,{formatExample:"2w 4d 6h 45m"})),i.a.createElement(Ee,null,i.a.createElement("li",null,e.formatMessage(ge.a.weeks,{w:"w"
})),i.a.createElement("li",null,e.formatMessage(ge.a.days,{d:"d"})),i.a.createElement("li",null,e.formatMessage(ge.a.hours,{h:"h"})),i.a.createElement("li",null,e.formatMessage(ge.a.minutes,{m:"m"}))))}render(){const{children:e,shouldRenderContent:t}=this.props;return i.a.createElement(je.a,{content:t?this.tooltipContentRender():null},e)}}ke.displayName="TimeTrackingTooltip";var we=ke;const Se=e=>{const{isValid:t,value:s,onChange:n,onBlur:a,isDisabled:r,intl:o}=e;return i.a.createElement(he,{isValid:t},(e=>i.a.createElement(we,{shouldRenderContent:t&&!r,intl:o},i.a.createElement(Oe,{value:s,isInvalid:e,invalidMessage:ge.b,onChange:n,onBlur:a,isDisabled:r,label:o.formatMessage(pe.timeSpent),placeholder:"2w 4d 6h 45m",autoFocus:!0}))))};Se.displayName="ValidatedLogTimeInput";var Ce=Se,Ie=({isValid:e,value:t,onChange:s,onBlur:n,isDisabled:a,intl:r})=>i.a.createElement(he,{isValid:e},(o=>i.a.createElement(ke,{shouldRenderContent:e&&!a,intl:r},i.a.createElement(Oe,{value:t,isInvalid:o,
invalidMessage:ge.b,onChange:s,onBlur:n,isDisabled:a,label:r.formatMessage(pe.timeRemaining),placeholder:"2w 4d 6h 45m"}))));class Te extends a.Component{constructor(...e){super(...e),this.onDateStartedChange=e=>{this.props.onDateStartedChange(e)}}render(){const{value:{timeLogged:e,timeRemaining:t,dateStarted:s,workDescription:n}}=this.props;return i.a.createElement(i.a.Fragment,null,i.a.createElement(me,null,i.a.createElement(be,null,i.a.createElement(Ce,{value:e,isDisabled:this.props.isDisabled,isValid:this.props.isTimeLoggedValid,onChange:this.props.onTimeLoggedChange,onBlur:this.props.onTimeLoggedBlur,intl:this.props.intl})," "),i.a.createElement(be,null,i.a.createElement(Ie,{value:t,isDisabled:this.props.isDisabled,isValid:this.props.isTimeRemainingValid,onChange:this.props.onTimeRemainingChange,onBlur:this.props.onTimeRemainingBlur,intl:this.props.intl}))),!this.props.isCollapsed&&i.a.createElement(i.a.Fragment,null,i.a.createElement(fe,null,i.a.createElement(ne.default,{
name:"date-started",label:this.props.intl.formatMessage(pe.dateStarted),isRequired:!0},(()=>i.a.createElement(ie.a,{value:s||null,timeZone:this.props.timeZone,parseValue:ae.b,onChange:this.onDateStartedChange,isDisabled:this.props.isDisabled})))),i.a.createElement(de,{defaultValue:n,isDisabled:this.props.isDisabled,portalElement:this.props.portalElement,onChange:this.props.onWorkDescriptionChange,onChangeFailure:this.props.onWorkDescriptionChangeFailure,externalId:this.props.externalId,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider})))}}Te.displayName="LogTimeModalForm",Te.defaultProps={portalElement:void 0};var Pe=Object(v.i)(Te),_e=(s("./node_modules/react-magnetic-di/lib/esm/index.js"),
s("./node_modules/@atlaskit/checkbox/dist/es2019/checkbox.js")),xe=s("./src/packages/platform/controllers/intl/src/index.js"),De=s("./src/packages/issue/fields/original-estimate/src/ui/view/main.js"),Ae=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics-component.js"),Le=s("./src/packages/issue/issue-view/src/common/component/logged-time/view.js"),Me=Object(v.h)({includeSubtasksLabel:{id:"issue.log-time-modal.include-subtasks",defaultMessage:"Include subtasks"},includeChildIssueLabel:{id:"issue.log-time-modal.include-child-issues",defaultMessage:"Include child issues"}}),Re=s("./node_modules/@atlaskit/theme/dist/es2019/index.js");const Ne=Y.default.p(["margin-top:","px;"],2*Q.e),Fe=Y.default.div(["margin-left:-","px;padding-top:","px;& > label > span{color:",";}"],Q.e/2,Q.e,Re.a.N500);var Ue=e=>{
const{config:t,value:s,isDone:n,estimatedTime:r,shouldDisplayRollUpDataControl:o,isRollingUpData:c,onToggleRollingUpData:l,isClassicProject:u}=e,d=Object(xe.c)(),{formatMessage:p}=d,m=Object(a.useCallback)((e=>{const{daysPerWeek:s,hoursPerDay:n}=t,a=Object(F.isFixTimeTrackingFormatEnabled)()?Object(M.a)(e,{workingHoursPerDay:t.hoursPerDay,workingDaysPerWeek:t.daysPerWeek,timeFormat:t.format||"pretty",defaultUnit:t.defaultUnit},d):Object(K.a)(s,n)(e),r=u?()=>i.a.createElement(v.c,{id:"issue.log-time.modal.original-estimate.with-rollup-subtasks",defaultMessage:"The original estimate for this issue and subtasks was {time}.",values:{time:i.a.createElement(De.a,{value:a})}}):()=>i.a.createElement(v.c,{id:"issue.log-time.modal.original-estimate.with-rollup-child-issues",defaultMessage:"The original estimate for this issue and child issues was {time}.",values:{time:i.a.createElement(De.a,{value:a})}});return i.a.createElement(Ne,null,c&&o?i.a.createElement(r,null):i.a.createElement(v.c,{
id:"issue.log-time.modal.original-estimate",defaultMessage:"The original estimate for this issue was {time}.",values:{time:i.a.createElement(De.a,{value:a})}}))}),[t,d,u,c,o]),b=Object(a.useCallback)((()=>i.a.createElement(Fe,null,i.a.createElement(_e.a,{isChecked:c,onChange:({target:{checked:e}},t)=>{l(e,t)},label:p(u?Me.includeSubtasksLabel:Me.includeChildIssueLabel),name:"roll-up-time-tracking-toggle-from-dialog"}),i.a.createElement(Ae.a,{action:"exposed",actionSubject:"feature",actionSubjectId:"toggleRollUpDataControlFromWorklogDialog"}))),[p,u,c,l]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Le.a,{config:t,value:s,estimatedTime:r,isDone:n,isCompact:!1}),o&&b(),"number"==typeof r?m(r):null)};class Ve extends a.Component{constructor(...e){super(...e),this.state={containerRef:void 0},this.setContainerRef=e=>{this.state.containerRef||this.setState({containerRef:e})},this.renderHeader=()=>i.a.createElement("h3",null,this.props.header),
this.renderFooter=()=>i.a.createElement(se,{formState:this.props.formState,onConfirm:this.props.onSubmit,onCancel:this.props.onCancel})}secondsToTimeString(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(K.a)(t,s)(e)}timeStringToSeconds(e){const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(W.a)(t,s)(e)}renderProgressTracker(){const{progressTrackerValue:e,progressTrackerValue:{loggedTime:t,remainingTime:s},estimatedTime:n,rolledUpEstimatedTime:a,config:r,isDone:o,shouldDisplayRollUpDataControl:c,isRollingUpData:l,onToggleRollingUpData:u,isClassicProject:d}=this.props;return void 0===t&&void 0===s&&void 0===n&&!1===c?null:i.a.createElement(Ue,{config:r,value:e,estimatedTime:l?a:n,isDone:o,shouldDisplayRollUpDataControl:c,isRollingUpData:l,onToggleRollingUpData:u,isClassicProject:d})}renderForm(){return i.a.createElement(Pe,{value:this.props.value,isCollapsed:this.props.isCollapsed,isDisabled:"submitting"===this.props.formState,
isTimeLoggedValid:this.props.isTimeLoggedValid,onTimeLoggedBlur:this.props.onTimeLoggedBlur,isTimeRemainingValid:this.props.isTimeRemainingValid,onTimeRemainingBlur:this.props.onTimeRemainingBlur,timeZone:this.props.timeZone,portalElement:this.state.containerRef,onTimeLoggedChange:this.props.onTimeLoggedChange,onTimeRemainingChange:this.props.onTimeRemainingChange,onDateStartedChange:this.props.onDateStartedChange,onWorkDescriptionChange:this.props.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionEncoder:this.props.mentionEncoder,mentionProvider:this.props.mentionProvider,activityProvider:this.props.activityProvider,externalId:this.props.externalId})}render(){return i.a.createElement($.a,{header:this.renderHeader,footer:this.renderFooter,isOpen:!0,width:"small",onDialogDismissed:this.props.onCancel},i.a.createElement(H.a,{onEscape:this.props.onCancel
},i.a.createElement("div",{ref:this.setContainerRef,"data-testid":"issue.issue-view.common.log-time-modal-dialog.contents"},this.renderProgressTracker(),this.renderForm())))}}Ve.displayName="LogTimeModal",Ve.defaultProps={isDone:!1,progressTrackerValue:{},estimatedTime:void 0};var Ke=s("./src/packages/issue/issue-view/src/common/component/log-time-modal/modal/utils/index.js");function We(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Be(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?We(Object(s),!0).forEach((function(t){He(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):We(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function He(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class $e extends a.Component{constructor(e){super(e),this.onTimeLoggedBlur=()=>{this.applyDefaultTimeFormat(this.state.value.timeLogged,this.onTimeLoggedChange)},this.onTimeRemainingBlur=()=>{this.applyDefaultTimeFormat(this.state.value.timeRemaining,this.onTimeRemainingChange)},this.onTimeLoggedChange=e=>{const t=V(e);if(this.setState((({value:s})=>({value:Be(Be({},s),{},{timeLogged:e}),hasUserInteracted:!0,isTimeLoggedValid:t}))),t&&this.props.initialValue.timeRemaining)if(Object(F.isFixTimeTrackingFormatEnabled)()){const t=this.timeStringToSeconds(this.props.initialValue.timeLogged)||0,s=this.timeStringToSeconds(e)||0,n=t+(this.props.initialValue.timeRemainingSeconds||0)-s,a=n>0?n:0,i=this.secondsToTimeString(a);this.setState((({value:e})=>({value:Be(Be({},e),{},{timeRemaining:i,timeRemainingSeconds:a,timeLoggedSeconds:s}),isTimeRemainingValid:!0})))}else{
const t=(this.timeStringToSeconds(e)||0)-(this.timeStringToSeconds(this.props.initialValue.timeLogged)||0),s=(this.timeStringToSeconds(this.props.initialValue.timeRemaining)||0)-t,n=this.secondsToTimeString(s);this.setState((({value:e})=>({value:Be(Be({},e),{},{timeRemaining:n}),isTimeRemainingValid:!0})))}},this.onTimeRemainingChange=e=>{if(Object(F.isFixTimeTrackingFormatEnabled)()){const t=this.timeStringToSeconds(e)||0;this.setState((({value:s})=>({value:Be(Be({},s),{},{timeRemaining:e,timeRemainingSeconds:t}),hasUserInteracted:!0,isTimeRemainingValid:V(e)})))}else this.setState((({value:t})=>({value:Be(Be({},t),{},{timeRemaining:e}),hasUserInteracted:!0,isTimeRemainingValid:V(e)})))},this.onDateStartedChange=e=>{this.setState((({value:t})=>({value:Be(Be({},t),{},{dateStarted:e}),defaultDateStarted:null,hasUserInteracted:!0})))},this.onWorkDescriptionChange=e=>{this.setState((({value:t})=>({value:Be(Be({},t),{},{workDescription:e}),hasUserInteracted:!0})))},this.onSubmit=(e,t)=>{
const{value:{workDescription:s}}=this.state,n="string"!=typeof this.state.value.workDescription?Object(L.i)(s):s,a=Be(Be({},this.getValue()),{},{workDescription:n});this.props.onSubmit(a,t)},this.applyDefaultTimeFormat=(e,t)=>{let s=e.trim();if(Object(B.a)(s)){const{defaultUnit:e}=this.props.config;s=`${s}${Object(Ke.a)(e)}`}s!==e&&t(s)},this.state={value:e.initialValue,defaultDateStarted:Date.now(),isTimeLoggedValid:!0,isTimeRemainingValid:!0,hasUserInteracted:!1}}getIsCollapsed(){return this.props.isCollapsible&&!this.state.value.timeLogged}getDateStarted(){const{defaultDateStarted:e,value:{dateStarted:t,timeLogged:s}}=this.state;if(!this.props.shouldUpdateDate||t)return t;if(!e)return null;const n=this.timeStringToSeconds(s)||0;try{return new Date(e-1e3*n).toISOString()}catch(a){return new Date(e).toISOString()}}getValue(){return Be(Be({},this.state.value),{},{dateStarted:this.getDateStarted()})}getFormState(){
return this.props.isWaiting?"submitting":this.state.hasUserInteracted&&this.props.validator(this.getValue())?"valid":"invalid"}getProgressTrackerValue(){const{value:{timeLogged:e,timeRemaining:t}}=this.state,{initialValue:s,isRollingUpData:n}=this.props,a=n?this.props.rolledUpTimeTracking:this.props.timeTracking,i=(this.timeStringToSeconds(e)||0)-(this.timeStringToSeconds(s.timeLogged)||0),r=i||a.loggedTime?(i||0)+(a.loggedTime||0):void 0,o=this.timeStringToSeconds(t),c=(o||0)-(this.timeStringToSeconds(s.timeRemaining)||0),l="number"==typeof o;let{remainingTime:u}=a;return l&&(u=n?(a.remainingTime||0)+c:o||0),{loggedTime:r,remainingTime:u}}secondsToTimeString(e){const{config:t,intl:s}=this.props,{daysPerWeek:n,hoursPerDay:a}=this.props.config;return Object(F.isFixTimeTrackingFormatEnabled)()?Object(M.a)(e,{workingHoursPerDay:t.hoursPerDay,workingDaysPerWeek:t.daysPerWeek,timeFormat:t.format||"pretty",defaultUnit:t.defaultUnit},s):Object(K.a)(n,a)(e)}timeStringToSeconds(e){
const{daysPerWeek:t,hoursPerDay:s}=this.props.config;return Object(W.a)(t,s)(e)}render(){return i.a.createElement(Ve,{value:this.getValue(),progressTrackerValue:this.getProgressTrackerValue(),estimatedTime:this.props.estimatedTime,rolledUpEstimatedTime:this.props.rolledUpEstimatedTime,config:this.props.config,header:this.props.header,formState:this.getFormState(),timeZone:this.props.timeZone,isCollapsed:this.getIsCollapsed(),isDone:this.props.isDone,isTimeLoggedValid:this.state.isTimeLoggedValid,isTimeRemainingValid:this.state.isTimeRemainingValid,onSubmit:this.onSubmit,onCancel:this.props.onCancel,onTimeLoggedChange:this.onTimeLoggedChange,onTimeLoggedBlur:this.onTimeLoggedBlur,onTimeRemainingChange:this.onTimeRemainingChange,onTimeRemainingBlur:this.onTimeRemainingBlur,onDateStartedChange:this.onDateStartedChange,onWorkDescriptionChange:this.onWorkDescriptionChange,onWorkDescriptionChangeFailure:this.props.onWorkDescriptionChangeFailure,baseUrl:this.props.baseUrl,
mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider,mentionEncoder:this.props.mentionEncoder,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject})}}$e.displayName="LogTimeModalWithValidation",$e.defaultProps={isCollapsible:!1,isDone:!1,isWaiting:!1,shouldUpdateDate:!1};const Ge=Object(E.a)({onSubmit:"clicked",onCancel:"clicked",onToggleRollingUpData:"toggleRollingUpData"})(Object(k.b)("worklogModal")(Object(v.i)($e)));var qe,ze=e=>i.a.createElement(R.a,{id:"issue.issue-view.common.worklog-dialog"},i.a.createElement(N.a,{id:"common.worklog-dialog",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},i.a.createElement(Ge,e))),Ye=Object(v.h)({title:{id:"issue.activity.worklog.add-modal.title",
defaultMessage:"Time tracking"}});const Qe=({timeLogged:e,timeRemaining:t,dateStarted:s})=>(!!e||!!t)&&(V(e)||"0"===e)&&V(t)&&!!s;let Je=Object(k.a)("addWorklog",A.a.MODAL)(qe=class extends a.Component{render(){const{timeTracking:e,rolledUpTimeTracking:t,timeTrackingConfiguration:s,intl:n}=this.props,{timeSpentSeconds:a,remainingEstimateSeconds:r,originalEstimateSeconds:o}=e,{daysPerWeek:l,hoursPerDay:u}=s;let d="";"number"==typeof r&&(d=Object(F.isFixTimeTrackingFormatEnabled)()?Object(M.a)(r,{workingHoursPerDay:s.hoursPerDay,workingDaysPerWeek:s.daysPerWeek,timeFormat:s.format||"pretty",defaultUnit:s.defaultUnit},n):Object(K.a)(l,u)(r));const p={timeLogged:"",timeRemaining:d,timeRemainingSeconds:r,workDescription:L.c,dateStarted:null},m={loggedTime:a,remainingTime:r};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ze,{initialValue:p,timeTracking:m,rolledUpTimeTracking:{loggedTime:t.timeSpentSeconds,remainingTime:t.remainingEstimateSeconds},estimatedTime:o,
rolledUpEstimatedTime:t.originalEstimateSeconds,config:s,header:n.formatMessage(Ye.title),timeZone:this.props.timeZone,isCollapsible:!0,isDone:this.props.isDone,isWaiting:this.props.isSaving,shouldUpdateDate:!0,validator:Qe,onSubmit:this.props.onSubmit,onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:c.a,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder||c.a,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,isClassicProject:this.props.isClassicProject}),i.a.createElement(b.a,null))}})||qe;function Ze(){return(Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e
}).apply(this,arguments)}function Xe(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const et=e=>{const{timeTrackingValue:t,rolledUpTimeTrackingValue:s}=e,n=Xe(e,["timeTrackingValue","rolledUpTimeTrackingValue"]),[r,{markRollingUpData:o,unmarkRollingUpData:c}]=Object(w.a)(),l=Object(a.useCallback)((e=>{e?o():c()}),[o,c]);return i.a.createElement(Je,Ze({},n,{timeTracking:t,rolledUpTimeTracking:s,isRollingUpData:r,onToggleRollingUpData:l}))};et.displayName="WrappedWorklogModal";const tt=Object(v.i)(Object(E.a)({onSubmit:"submitAddWorklog",onCancel:"cancelAddWorklog"})(Object(k.b)("worklog")(et)));var st=Object(r.connect)((e=>({timeTrackingConfiguration:Object(x.h)(e),
rolledUpTimeTrackingValue:Object(x.j)(e)(!0),timeTrackingValue:Object(x.i)(e),timeZone:Object(P.z)(e),isDone:"DONE"===Object(D.a)(e),isSaving:Object(x.d)(e),baseUrl:Object(T.f)(e),mediaContext:Object(_.a)(e),mentionEncoder:Object(C.a)(Object(T.f)(e)),mentionProvider:Object(I.a)(e),shouldDisplayRollUpDataControl:Object(x.f)(e),isClassicProject:Object(P.m)(e)})),(e=>({onSubmit:(t,s)=>{const{timeLogged:n,timeRemaining:a}=t||{};e(!n&&a?Object(S.O)(a,s):Object(S.n)(t,s))},onCancel:()=>{e(Object(S.p)())}})))(tt),nt=s("./node_modules/lodash/flow.js"),at=s.n(nt),it=s("./src/packages/issue/issue-view/src/activity/worklog/state/selectors.js"),rt=s("./node_modules/@atlaskit/icon/glyph/arrow-right.js"),ot=s.n(rt),ct=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/confirmation-modal/index.js"),lt=Object(v.h)({delete:{id:"issue.activity.worklog.delete-modal.delete",defaultMessage:"Delete"},deleteHeading:{id:"issue.activity.worklog.delete-modal.delete-heading",
defaultMessage:"Delete worklog entry?"},cancel:{id:"issue.activity.worklog.delete-modal.cancel",defaultMessage:"Cancel"},deleteWarning:{id:"issue.activity.worklog.delete-modal.delete-warning",defaultMessage:"Once you delete, it's gone for good."},adjustCheckboxLabel:{id:"issue.activity.worklog.delete-modal.adjust-checkbox-label",defaultMessage:"Adjust time remaining"},adjustCurrentLabel:{id:"issue.activity.worklog.delete-modal.adjust-current-label",defaultMessage:"Current"},adjustNewLabel:{id:"issue.activity.worklog.delete-modal.adjust-new-label",defaultMessage:"New time remaining"},adjustNewSubtext:{id:"issue.activity.worklog.delete-modal.adjust-new-subtext",defaultMessage:"By default, deleted time ({timeSpent}) is added to the time remaining."}})
;const ut=Y.default.div(["display:flex;margin-top:-","px;"],3*Q.e),dt=Y.default.div(["display:flex;flex-direction:column;align-items:center;max-width:","px;"],11*Q.e),pt=Y.default.div(["color:#6b778c;font-size:","px;font-weight:600;line-height:1.3333333333333333;padding:","px 0 ","px 0;"],3*Q.e/2,5*Q.e/2,Q.e/2),mt=Y.default.div(["text-align:center;padding:","px;"],1.25*Q.e),bt=Y.default.div(["margin:","px ","px ","px ","px;"],6*Q.e,2*Q.e,6*Q.e,Q.e),ft=Y.default.div(["margin:","px 0 ","px -","px;"],2*Q.e,2*Q.e,.5*Q.e),gt=Y.default.div(["width:50%;"]),ht=Y.default.div(["font-size:","px;margin-top:","px;color:",";"],1.25*Q.e,Q.e/2,Re.a.N90);var yt;let Ot=Object(k.a)("deleteWorklog",A.a.MODAL)(yt=class extends a.Component{constructor(...e){super(...e),this.secondsToTimeString=e=>{const{intl:t,timeTrackingConfig:s}=this.props;return Object(F.isFixTimeTrackingFormatEnabled)()?Object(M.a)(e,{workingHoursPerDay:s.hoursPerDay,workingDaysPerWeek:s.daysPerWeek,timeFormat:s.format||"pretty",
defaultUnit:s.defaultUnit},t):Object(K.a)(this.props.timeTrackingConfig.daysPerWeek,this.props.timeTrackingConfig.hoursPerDay)(e)},this.timeStringToSeconds=Object(W.a)(this.props.timeTrackingConfig.daysPerWeek,this.props.timeTrackingConfig.hoursPerDay),this.state={isAdjustTimeRemainingChecked:!0,timeRemaining:this.secondsToTimeString(this.props.timeRemainingSeconds+this.timeStringToSeconds(this.props.worklog.timeSpent))},this.onTimeRemainingChange=e=>this.setState({timeRemaining:e.target.value}),this.onCheckboxChange=()=>this.setState({isAdjustTimeRemainingChecked:!this.state.isAdjustTimeRemainingChecked}),this.onConfirm=(e,t)=>this.props.onConfirm(this.state.isAdjustTimeRemainingChecked?this.state.timeRemaining:this.secondsToTimeString(this.props.timeRemainingSeconds),this.state.isAdjustTimeRemainingChecked,t),this.originalTimeRemaining=this.secondsToTimeString(this.props.timeRemainingSeconds)}renderTimeRemainingInput(e){
const{isDeleting:t,intl:{formatMessage:s}}=this.props,{timeRemaining:n}=this.state;return i.a.createElement(he,{isValid:e},(e=>i.a.createElement(ye.a,{value:n,isInvalid:e,invalidMessage:e?ge.b:void 0,onChange:this.onTimeRemainingChange,label:s(lt.adjustNewLabel),placeholder:s(ge.a.timeInputPlaceholder),disabled:t,required:!0,shouldFitContainer:!0})))}renderContent(e){const{isDeleting:t,worklog:{timeSpent:s},intl:{formatMessage:n}}=this.props,{isAdjustTimeRemainingChecked:a}=this.state;return i.a.createElement(i.a.Fragment,null,i.a.createElement("p",null,n(lt.deleteWarning)),i.a.createElement(ft,null,i.a.createElement(_e.a,{isChecked:a,isDisabled:t,onChange:this.onCheckboxChange,label:n(lt.adjustCheckboxLabel),name:"adjust-checkbox"
})),a&&i.a.createElement(ut,null,i.a.createElement(dt,null,i.a.createElement(pt,null,n(lt.adjustCurrentLabel)),i.a.createElement(mt,null,this.originalTimeRemaining)),i.a.createElement(bt,null,i.a.createElement(ot.a,null)),i.a.createElement(gt,null,this.renderTimeRemainingInput(e),i.a.createElement(ht,null,n(lt.adjustNewSubtext,{timeSpent:s})))))}render(){const{isDeleting:e,onCancel:t,intl:{formatMessage:s}}=this.props,{timeRemaining:n,isAdjustTimeRemainingChecked:a}=this.state,r=Object(U.a)(n);return i.a.createElement(ct.b,{headerMessage:s(lt.deleteHeading),appearance:"danger",contentMessage:this.renderContent(r),confirmActionText:s(lt.delete),cancelActionText:s(lt.cancel),onConfirm:this.onConfirm,onCancel:t,isLoading:e,isConfirmDisabled:e||a&&!r,isCancelDisabled:e,externalId:"issue.activity.worklog.delete-modal"},i.a.createElement(b.a,null))}})||yt;function jt(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vt(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(s),!0).forEach((function(t){Et(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jt(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Et(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var kt,wt=at()(Object(k.b)("worklog"),Object(E.a)({onConfirm:"confirmDeleteWorklog",onCancel:"cancelDeleteWorklog"}),v.i,Object(r.connect)((e=>({isDeleting:Object(x.d)(e),worklog:Object(x.a)(e),timeTrackingConfig:Object(x.h)(e),timeRemainingSeconds:Object(it.c)(e)})),{dispatchDeleteWorklog:S.r,onCancel:S.p},((e,{dispatchDeleteWorklog:t,onCancel:s})=>vt(vt({},e),{},{onCancel:s,onConfirm:(s,n,a)=>{e.worklog&&t(e.worklog.id,s,n,a)}
}))))(Ot),St=Object(v.h)({title:{id:"issue.activity.worklog.edit-modal.title",defaultMessage:"Edit work log"}});const Ct=()=>({timeLogged:e,timeRemaining:t,dateStarted:s})=>(Object(U.a)(e)||"0"===e)&&V(t)&&!!s;let It=Object(k.a)("editWorklog",A.a.MODAL)(kt=class extends a.Component{constructor(...e){super(...e),this.onSubmit=(e,t)=>{const{worklog:s}=this.props;s&&this.props.onSubmit(s.id,e,t)}}render(){const{worklog:e,timeTracking:t,rolledUpTimeTracking:s,timeTrackingConfiguration:n,intl:a}=this.props;if(!e)return null;const{timeSpentSeconds:r,remainingEstimateSeconds:o,originalEstimateSeconds:l}=t,{daysPerWeek:u,hoursPerDay:d}=n;let p="";"number"==typeof o&&(p=Object(F.isFixTimeTrackingFormatEnabled)()?Object(M.a)(o,{workingHoursPerDay:n.hoursPerDay,workingDaysPerWeek:n.daysPerWeek,timeFormat:n.format||"pretty",defaultUnit:n.defaultUnit},a):Object(K.a)(u,d)(o));const m={timeLogged:e.timeSpent,timeRemaining:p,timeRemainingSeconds:o,dateStarted:new Date(e.started).toISOString(),
workDescription:e.comment||L.c},f={loggedTime:r,remainingTime:o};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ze,{initialValue:m,timeTracking:f,rolledUpTimeTracking:{loggedTime:s.timeSpentSeconds,remainingTime:s.remainingEstimateSeconds},estimatedTime:l,rolledUpEstimatedTime:s.originalEstimateSeconds,config:n,header:a.formatMessage(St.title),timeZone:this.props.timeZone,isCollapsible:!1,isDone:this.props.isDone,isWaiting:this.props.isSaving,shouldUpdateDate:!1,validator:Ct(),onSubmit:this.onSubmit,onCancel:this.props.onCancel,onWorkDescriptionChangeFailure:c.a,baseUrl:this.props.baseUrl,mediaContext:this.props.mediaContext,mentionProvider:this.props.mentionProvider||{},mentionEncoder:this.props.mentionEncoder||c.a,activityProvider:this.props.activityProvider,externalId:this.props.externalId,shouldDisplayRollUpDataControl:this.props.shouldDisplayRollUpDataControl,isRollingUpData:this.props.isRollingUpData,onToggleRollingUpData:this.props.onToggleRollingUpData,
isClassicProject:this.props.isClassicProject}),i.a.createElement(b.a,null))}})||kt;function Tt(){return(Tt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Pt(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const _t=e=>{const{timeTrackingValue:t,rolledUpTimeTrackingValue:s}=e,n=Pt(e,["timeTrackingValue","rolledUpTimeTrackingValue"]),[r,{markRollingUpData:o,unmarkRollingUpData:c}]=Object(w.a)(),l=Object(a.useCallback)((e=>{e?o():c()}),[o,c]);return i.a.createElement(It,Tt({},n,{timeTracking:t,rolledUpTimeTracking:s,isRollingUpData:r,
onToggleRollingUpData:l}))};_t.displayName="WrappedWorklogModal";const xt=Object(v.i)(Object(E.a)({onSubmit:"submitEditWorklog",onCancel:"cancelEditWorklog"})(Object(k.b)("worklog")(_t)));var Dt=Object(r.connect)((e=>({worklog:Object(x.a)(e),timeTrackingConfiguration:Object(x.h)(e),rolledUpTimeTrackingValue:Object(x.j)(e)(!0),timeTrackingValue:Object(x.i)(e),timeZone:Object(P.z)(e),isDone:"DONE"===Object(D.a)(e),isSaving:Object(x.d)(e),baseUrl:Object(T.f)(e),mediaContext:Object(_.a)(e),mentionEncoder:Object(C.a)(Object(T.f)(e)),mentionProvider:Object(I.a)(e),shouldDisplayRollUpDataControl:Object(x.f)(e),isClassicProject:Object(P.m)(e)})),(e=>({onSubmit:(t,s,n)=>{e(Object(S.v)(t,s,n))},onCancel:()=>{e(Object(S.p)())}
})))(xt),At=s("./src/packages/issue/issue-view/src/common/actions/issue-fetch-actions.js"),Lt=s("./node_modules/react-resource-router/build/esm/index.js"),Mt=s("./src/packages/platform/services/bento-transition-check/src/utils/index.js"),Rt=s("./src/packages/platform/services/bento-transition-check/src/components/index.js"),Nt=s("./src/packages/platform/controllers/spa-state/src/components/transition-state/index.js"),Ft=s("./src/packages/platform/controllers/spa-state/src/common/index.js");class Ut extends a.Component{constructor(...e){super(...e),this.hasErrored=!1,this.endOfCriticalPath=void 0,this.errorOnCriticalPath=void 0,this.hasSubmittedMetrics=!1,this.spaState=void 0}componentDidMount(){const{isPreview:e,isComplete:t,metrics:s,lastTransitionStartTime:n,isInitialRender:a}=this.props;this.hasErrored||((e||t)&&s.onPreviewRendered({isInitialRender:a,lastTransitionStartTime:n}),t&&(s.onInteractive({lastTransitionStartTime:n}),this.endOfCriticalPath&&this.endOfCriticalPath()))}
componentDidUpdate(e){const{error:t,metrics:s,isLoading:n,lastTransitionStartTime:a,issueKey:i,isInitialRender:r}=this.props;t&&(this.hasErrored=!0,this.errorOnCriticalPath&&this.errorOnCriticalPath()),this.resetSubmissionStateIfNewView(n,e,i),this.hasErrored||((this.isPreviewModeAfterBentoSpaTransition(e)||this.didBentoMoveOutOfLoadingState(e))&&s.onPreviewRendered({isInitialRender:r,lastTransitionStartTime:a}),(this.didJustMoveToComplete(e)||this.isFirstLoadOfRecentIssue(e))&&(s.onInteractive({lastTransitionStartTime:a}),this.endOfCriticalPath&&this.endOfCriticalPath()))}isFirstLoadOfRecentIssue(e){return this.props.issueKey!==e.issueKey&&this.props.isComplete}resetSubmissionStateIfNewView(e,t,s){(e&&!t.isLoading||s!==t.issueKey)&&(this.hasSubmittedMetrics=!1)}didBentoMoveOutOfLoadingState(e){const{isPreview:t,isComplete:s}=this.props;return e.isLoading&&(t||s)}isPreviewModeAfterBentoSpaTransition(e){const{isPreview:t,issueKey:s}=this.props;return e.issueKey!==s&&t}
didJustMoveToComplete(e){const{isComplete:t}=this.props;return t&&!e.isComplete}render(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ft.a,null,((e,{setAppReady:t,setAppErrorReady:s})=>(this.endOfCriticalPath=t,this.errorOnCriticalPath=s,this.spaState=e,null))))}}Ut.displayName="BentoMetrics";var Vt=Ut;function Kt(){return(Kt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Wt=e=>null!=e?e-performance.timing.navigationStart:e,Bt=e=>{const[{isTransitionCurrentlyAllowed:t}]=Object(Rt.b)(),[{isInitialRender:s,lastTransitionStartTime:n}]=Object(Nt.b)();return i.a.createElement(Lt.e,null,(({route:a})=>i.a.createElement(Vt,Kt({},e,{bentoTransitionCheck:t,isInitialRender:s,lastTransitionStartTime:Wt(n),hasBentoEnabledCheck:!!a&&Object(Mt.a)(a)}))))};Bt.displayName="BentoMetricsWithSpaTimingInfo"
;var Ht=Bt,$t=s("./src/packages/issue/issue-view/src/common/metrics/context/index.js");function Gt(){return(Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}
var qt=s("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),zt=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/hierarchy-level-selector.js"),Yt=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/security-level-selector.js"),Qt=s("./src/packages/issue/issue-view/src/selectors/analytics-payload-selector.js"),Jt=s("./src/packages/issue/issue-view/src/utils/is-valid-experience-error.js"),Zt=s("./node_modules/@atlaskit/motion/dist/es2019/entering/exiting-persistence.js"),Xt=s("./node_modules/@atlaskit/motion/dist/es2019/entering/slide-in.js"),es=s("./src/packages/issue/issue-view/src/views/common/dropzone-overlay/assets/upload.svg"),ts=s.n(es);const ss=Object(v.h)({upload:{id:"issue.attachment-dropzone-message",defaultMessage:"Drop file anywhere to upload to this issue"},uploadImage:{id:"issue.attachment-dropzone-message-image",defaultMessage:"Upload Attachment"}})
;var ns=s("./node_modules/@atlaskit/motion/dist/es2019/utils/accessibility.js");const as=Y.default.div(["display:flex;align-items:center;position:absolute;width:290px;height:64px;bottom:","px;z-index:101;background:#ffffff;box-shadow:0px 3px 5px rgba(9,30,66,0.2),0px 0px 1px rgba(9,30,66,0.31);border-radius:3px;right:0;left:0;margin-left:auto;margin-right:auto;",";"],8*Q.e,Object(ns.b)()),is=Y.default.div(["width:184px;font-size:16px;font-weight:500;line-height:20px;color:#172b4d;"]),rs=Y.default.img(["height:51px;padding:0 20px;"]),os=()=>{const{formatMessage:e}=Object(xe.c)();return i.a.createElement(Zt.a,{appear:!0},i.a.createElement(Xt.a,{enterFrom:"bottom",fade:"inout",duration:800},(t=>i.a.createElement(as,t,i.a.createElement(rs,{src:ts.a,alt:e(ss.uploadImage)}),i.a.createElement(is,null,e(ss.upload))))))};os.displayName="DropzoneOverlay"
;var cs=os,ls=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/index.js"),us=s("./src/packages/issue/issue-view/src/views/common/issue-page-grid/index.js"),ds=s("./src/packages/issue/issue-view/src/views/common/skeleton/skeleton-view.js"),ps=s("./src/packages/issue/issue-view/src/views/common/with-compact-mode/index.js"),ms=s("./node_modules/lodash/find.js"),bs=s.n(ms),fs=s("./src/packages/platform/observability/analytics-legacy-gasv2/src/with-analytics.js"),gs=s("./src/packages/platform/observability/analytics-web-react/src/utils/component-with-analytics.js"),hs=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/op-triggers/on-mount-and-update/index.js"),ys=s("./src/packages/platform/ui/flags/src/ui/subscriber/index.js")
;var Os=s("./src/packages/issue/issue-view/src/actions/issue-delete-actions.js"),js=s("./src/packages/issue/issue-view/src/common/util/safe-component/index.js"),vs=s("./node_modules/@atlaskit/icon/glyph/editor/error.js"),Es=s.n(vs),ks=s("./node_modules/@atlaskit/icon/glyph/editor/success.js"),ws=s.n(ks),Ss=s("./src/packages/issue/issue-view/src/common/constants/flags.js");const Cs=Y.default.span(["color:",";"],(e=>e.color)),Is=i.a.createElement(Cs,{size:"medium",color:Re.a.R300},i.a.createElement(Es.a,{label:""})),Ts=i.a.createElement(Cs,{size:"medium",color:Re.a.G300},i.a.createElement(ws.a,{label:""})),Ps={[Ss.i]:{messages:Object(v.h)({title:{id:"issue.generic-server-error-when-adding-comment-title",defaultMessage:"Comment could not be updated"},description:{id:"issue.generic-server-error-when-adding-comment-description",defaultMessage:"There was a connection problem and your comment was not successfully updated. Check your network before trying to update or add another comment."}}),
icon:Is,type:"error"},[Ss.j]:{messages:Object(v.h)({title:{id:"issue.server-validation-error-when-adding-comment-title",defaultMessage:"We couldn't save your comment"},description:{id:"issue.server-validation-error-when-adding-comment-description",defaultMessage:"It might be empty or have invalid formatting. If you copy-pasted, try removing the formatting and adding it directly in the editor."}}),icon:Is,type:"error"},[Ss.k]:{messages:Object(v.h)({title:{id:"issue.content-exceeded-error-when-adding-comment-title",defaultMessage:"We couldn't save your comment"},description:{id:"issue.content-exceeded-error-when-adding-comment-description",defaultMessage:"The comment is too long. Try reducing its length, splitting it, or attaching a file to the issue."}}),icon:Is,type:"error"},[Ss.l]:{messages:Object(v.h)({title:{id:"issue.server-error-when-deleting-comment-title",defaultMessage:"Comment could not be deleted"},description:{id:"issue.server-error-when-deleting-comment-description",
defaultMessage:"There was a connection problem and the comment was not successfully deleted. Try checking your network connection."}}),icon:Is,type:"error"},[Ss.t]:{messages:Object(v.h)({title:{id:"issue.error-when-retrieving-editor-value-title",defaultMessage:"The text editor failed"},description:{id:"issue.error-when-retrieving-editor-value-description",defaultMessage:"Retry your last action, or refresh the page."}}),icon:Is,type:"error"},[Ss.F]:{messages:Object(v.h)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-confirming-rich-text-field-value-description",defaultMessage:"It may contain formatting we don\u2019t recognize. Try removing the formatting before saving."}}),icon:Is,type:"error"},[Ss.G]:{messages:Object(v.h)({title:{id:"issue.error-when-confirming-rich-text-field-value-title",defaultMessage:"We couldn't save your content"},description:{
id:"issue.error-when-confirming-rich-text-field-value-description-maximum-length-exceeded",defaultMessage:"It's too long for the field. Try attaching a file or page to the issue, or adding part of the content as comments."}}),icon:Is,type:"error"},[Ss.H]:{messages:Object(v.h)({title:{id:"issue.error-when-saving-empty-required-rich-text-field-title",defaultMessage:"We couldn't save your content"},description:{id:"issue.error-when-saving-empty-required-rich-text-field",defaultMessage:"This field is required and cannot be empty."}}),icon:Is,type:"error"},[Ss.d]:{messages:Object(v.h)({title:{id:"issue.error-when-adding-attachment-title",defaultMessage:"We couldn't save your attachment"},description:{id:"issue.error-when-adding-attachment-description",defaultMessage:"Reload the issue then try adding it again."}}),icon:Is,type:"error"},[Ss.p]:{messages:Object(v.h)({title:{id:"issue.server-error-when-deleting-issue-link-title",defaultMessage:"We couldn't remove the issue link"},description:{
id:"issue.server-error-when-deleting-issue-link-description",defaultMessage:"Try reloading the page and removing the issue link again."}}),icon:Is,type:"error"},[Ss.e]:{messages:Object(v.h)({title:{id:"issue.server-error-when-deleting-attachment-title",defaultMessage:"Attachment could not be deleted"},description:{id:"issue.server-error-when-deleting-attachment-description",defaultMessage:"There was a connection problem and the attachment was not successfully deleted. Try checking your network connection."}}),icon:Is,type:"error"},[Ss.O]:{messages:Object(v.h)({title:{id:"issue.server-error-when-toggle-watch-title",defaultMessage:"We couldn't update your watch status"},description:{id:"issue.server-error-when-toggle-watch-description",defaultMessage:"Check your connection and try clicking watch again."}}),icon:Is,type:"error"},[Ss.y]:{messages:Object(v.h)({title:{id:"issue.error-when-fetching-watchers-title",defaultMessage:"We couldn't load the watchers list"},description:{
id:"issue.error-when-fetching-watchers-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error"},[Ss.K]:{messages:Object(v.h)({title:{id:"issue.start-watching-success-title",defaultMessage:"You're watching this issue"},description:{id:"issue.start-watching-success-description",defaultMessage:"We'll notify you when there's activity on it."}}),icon:Ts,type:"success"},[Ss.L]:{messages:Object(v.h)({title:{id:"issue.stop-watching-success-title",defaultMessage:"You stopped watching this issue"},description:{id:"issue.stop-watching-success-description",defaultMessage:"We won't notify you about activity on it."}}),icon:Ts,type:"success"},[Ss.E]:{messages:Object(v.h)({title:{id:"issue.error-when-removing-watcher-title",defaultMessage:"We couldn't remove that watcher"},description:{id:"issue.error-when-removing-watcher-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error"},[Ss.a]:{
messages:Object(v.h)({title:{id:"issue.error-when-adding-watcher-title",defaultMessage:"We couldn't add that watcher"},description:{id:"issue.error-when-adding-watcher-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error"},[Ss.M]:{messages:Object(v.h)({title:{id:"issue.error-when-reordering-subtask",defaultMessage:"We couldn't reorder those subtasks"},description:{id:"issue.error-when-reordering-subtask-description",defaultMessage:"Wait a few moments, then give it another try."}}),icon:Is,type:"error"},[Ss.z]:{messages:Object(v.h)({title:{id:"issue.server-error-when-add-flag-title",defaultMessage:"We couldn't flag this issue"},description:{id:"issue.server-error-when-add-flag-description",defaultMessage:"Check your connection and try adding the flag again."}}),icon:Is,type:"error"},[Ss.A]:{messages:Object(v.h)({title:{id:"issue.server-error-when-remove-flag-title",defaultMessage:"We couldn't remove the flag from this issue"},
description:{id:"issue.server-error-when-remove-flag-description",defaultMessage:"Check your connection and try removing the flag again."}}),icon:Is,type:"error"},[Ss.C]:{messages:Object(v.h)({title:{id:"issue.server-error-when-logging-work-title",defaultMessage:"We couldn't add your time spent"},description:{id:"issue.server-error-when-logging-work-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error"},[Ss.c]:{messages:Object(v.h)({title:{id:"issue.assign-to-me-flag-title",defaultMessage:"Successfully assigned to you"},description:{id:"issue.assign-to-me-flag-description",defaultMessage:"You're now the assignee for {issueKey}."}}),icon:Ts,type:"success",shouldAutoDismiss:!0},[Ss.m]:{messages:Object(v.h)({title:{id:"issue.error-when-creating-child-issue-title",defaultMessage:"We couldn't create the child issue"},description:{id:"issue.error-when-creating-child-issue-description",
defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error"},[Ss.B]:{messages:Object(v.h)({title:{id:"issue.error-when-linking-child-issue-title",defaultMessage:"We couldn't link the child issue"},description:{id:"issue.error-when-linking-child-issue-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again."}}),icon:Is,type:"error"},[Ss.g]:{messages:Object(v.h)({title:{id:"change.issue.type.success.title",defaultMessage:"Issue type changed to {destType}"},description:{id:"change.issue.type.success.description",defaultMessage:"Issue type changed"}}),icon:Ts,type:"success",shouldAutoDismiss:!1},[Ss.f]:{messages:Object(v.h)({title:{id:"change.issue.type.error.title",defaultMessage:"Error changing issue type"},description:{id:"change.issue.type.error.description",defaultMessage:"There was an error changing the issue type. Please try again."}}),icon:Is,type:"error",shouldAutoDismiss:!1},[Ss.o]:{
messages:Object(v.h)({title:{id:"issue.error-when-deleting-issue-title",defaultMessage:"We couldn't delete {issueKey}"},description:{id:"issue.error-when-deleting-issue-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error",actions:[{messages:Object(v.h)({content:{id:"issue.error-when-deleting-issue-call-to-action",defaultMessage:"Try again"}}),onClick:({closeFlag:e,retryIssueDelete:t,deleteFailureIssueKey:s})=>{t&&null!=s&&""!==s&&t(s),e()}}]},[Ss.w]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.edit-success-title",defaultMessage:"Work log entry updated"}}),icon:Ts,type:"success",shouldAutoDismiss:!0},[Ss.s]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.delete-success-title",defaultMessage:"Work log entry deleted"}}),icon:Ts,type:"success",shouldAutoDismiss:!0},[Ss.h]:{messages:Object(v.h)({title:{id:"issue.clickthrough-banner.flags.dismissed.title",defaultMessage:"Banner be gone!"},description:{
id:"issue.clickthrough-banner.flags.dismissed.description",defaultMessage:"You can still open the old view through the \u2022\u2022\u2022 menu on an issue."}}),icon:Ts,type:"success",shouldAutoDismiss:!0},[Ss.b]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.add-failure-title",defaultMessage:"We couldn't save your changes"},description:{id:"issue.activity.worklog.flags.add-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error"},[Ss.N]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.update-time-remaining-failure-title",defaultMessage:"We couldn't save your edit"},description:{id:"issue.activity.worklog.flags.update-time-remaining-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error"},[Ss.v]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.edit-failure-title",defaultMessage:"We couldn't save your edit"},description:{
id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error"},[Ss.r]:{messages:Object(v.h)({title:{id:"issue.activity.worklog.flags.delete-failure-title",defaultMessage:"We couldn't delete the work log entry"},description:{id:"issue.activity.worklog.flags.failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error"},[Ss.n]:{messages:Object(v.h)({title:{id:"issue.confluence-pages.delete-failure-title",defaultMessage:"We couldn\u2019t remove the page link"},description:{id:"issue.confluence-pages.delete-failure-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error"},[Ss.I]:{messages:Object(v.h)({title:{id:"issue.approval.action.save-error-title",defaultMessage:"We couldn\u2019t save your approval response"},description:{id:"issue.approval.action.save-error-description",
defaultMessage:"Give it a few seconds, then try again."}}),icon:Is,type:"error",shouldAutoDismiss:!0},[Ss.J]:{messages:Object(v.h)({title:{id:"issue.approval.action.save-success-title",defaultMessage:"We've saved your response."}}),icon:Ts,type:"success",shouldAutoDismiss:!0},[Ss.u]:{messages:Object(v.h)({title:{id:"issue.color.action.change-color-title",defaultMessage:"We couldn\u2019t change the epic color"},description:{id:"issue.color.action.change-color-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"success",shouldAutoDismiss:!0},[Ss.x]:{messages:Object(v.h)({title:{id:"issue.link.jira-app-link-fetch-error-title",defaultMessage:"We couldn\u2019t fetch remote Jira application links"},description:{id:"issue.link.jira-app-link-fetch-error-description",defaultMessage:"Check your connection, then give it another try."}}),icon:Is,type:"error",shouldAutoDismiss:!0},[Ss.D]:{messages:Object(v.h)({title:{
id:"issue.link.jira-remote-link-server-error-title",defaultMessage:"We couldn't link the issue to {remoteIssueKey}."},description:{id:"issue.link.jira-remote-link-server-error-description",defaultMessage:"Reason: {i18nServerErrorMessage}"}}),icon:Is,type:"error",shouldAutoDismiss:!0}};function _s(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function xs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?_s(Object(s),!0).forEach((function(t){Ds(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):_s(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ds(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
class As extends a.Component{constructor(...e){super(...e),this.onFlagDismissed=e=>{const{flags:t,onFlagDismissed:s,fireAnalyticsEvent:n}=this.props,a=bs()(t,{id:e});if(a){const e=Ps[a.type];e.onDismissed&&e.onDismissed({fireAnalyticsEvent:n})}s(e)}}render(){const{onFlagDismissed:e,flags:t,retryIssueDelete:s,fireAnalyticsEvent:n,deleteFailureIssueKey:a,FlagServiceSubscriber:r}=this.props;return i.a.createElement(r,null,(({showFlag:r})=>t.map((t=>{const o=Ps[t.type],c=t.titleI18nValues?[o.messages.title,t.titleI18nValues]:o.messages.title,l=t.descriptionI18nValues&&o.messages.description?[o.messages.description,t.descriptionI18nValues]:o.messages.description,u=(o.actions||[]).map((({messages:i,onClick:r})=>({content:i.content,onClick:()=>r({closeFlag:()=>e(t.id),retryIssueDelete:s,deleteFailureIssueKey:a,fireAnalyticsEvent:n})}))),d=xs(xs({title:c},l&&{description:l}),{},{type:o.type,actions:u,isAutoDismiss:o.shouldAutoDismiss});return i.a.createElement(hs.a,{key:t.id,args:[d],op:r})
}))))}}As.displayName="UnsafeFlags",As.displayName="Flags";var Ls=at()(Object(fs.a)((e=>({fireAnalyticsEvent:(t,s)=>e(t,s)}))),Object(gs.a)("deleteIssueRetry",{retryIssueDelete:"deleteIssueRetry"}),Object(r.connect)((e=>({flags:Object(P.j)(e),deleteFailureIssueKey:Object(T.x)(e),FlagServiceSubscriber:ys.a})),(e=>({onFlagDismissed:t=>e((e=>({type:"DISMISS_FLAG",payload:e}))(t)),retryIssueDelete:(t,s)=>{e(Object(Os.c)(t,s))}
}))),Object(js.a)())(As),Ms=s("./src/packages/issue/issue-view/src/actions/attachment-popup-actions.js"),Rs=s("./src/packages/issue/issue-view/src/selectors/attachment-picker-selector.js"),Ns=s("./node_modules/@atlaskit/media-picker/dist/es2019/index.js"),Fs=s("./src/packages/issue/attachments/issue-attachments-base/src/services/attachments-service/main.js"),Us=s("./src/packages/issue/issue-context-service/src/main.js"),Vs=s("./src/packages/issue/issue-view/src/actions/attachment-picker-actions.js"),Ks=s("./src/packages/issue/issue-view/src/common/media/upload-context/upload-context-actions.js");function Ws(){return(Ws=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Bs(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Hs(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bs(Object(s),!0).forEach((function(t){$s(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bs(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Gs(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var qs=e=>at()([Object(r.connect)((e=>({
uploadContext:Object(_.a)(e).uploadContext})),(e=>({onUploadStart:t=>e(Object(Vs.c)(t)),onUploadEnd:t=>e(Object(Vs.d)(t)),onUploadError:t=>e(Object(Vs.e)(t)),onGeneralError:t=>e(Object(Vs.f)(t)),requestUploadToken:()=>e(Object(Ks.c)())})))])((e=>t=>{const{onUploadStart:s,onUploadEnd:n,onUploadError:r,onGeneralError:o,uploadContext:c,eventHandlers:l,config:u,onDragEnter:d,onDragLeave:p,onDrop:m}=t,b=Gs(t,["onUploadStart","onUploadEnd","onUploadError","onGeneralError","uploadContext","eventHandlers","config","onDragEnter","onDragLeave","onDrop"]),f=Object(a.useRef)([]),g=Object(a.useCallback)((()=>{if(!c)return!1;const{tokenIssueTimestamp:e,tokenLifespanInMs:t}=c;return e+t>Date.now()}),[c]),h=Object(a.useCallback)((([e,t])=>{if(!c||!g())return void t();const{serviceHost:s,clientId:n,token:a}=c;e({clientId:n,token:a,baseUrl:s})}),[g,c]),y=Object(a.useCallback)((()=>{f.current.forEach(h),f.current=[]}),[h]),O={authProvider:()=>new Promise(((e,s)=>{g()?h([e,s]):(t.requestUploadToken(),
f.current=[...f.current,[e,s]])}))},j=Hs(Hs({uploadParams:{collection:null==c?void 0:c.collection}},u),{},{multiple:!0}),v=Object(Us.g)(),[,{addNewAttachments:E}]=Object(Fs.b)(),k=l?l["upload-error"]:e=>{const{error:t}=e;["upload_fail","object_create_fail"].includes(t.name)?r(t):o(t)},w=l?l["uploads-start"]:e=>{const{files:t}=e;t.forEach((e=>{s({id:`${e.id}`,createdDate:Date.now()})}));const n=t.map((e=>({filename:e.name,filesize:e.size,mimetype:e.type,mediaApiFileId:e.id,createdDate:Date.now()})));E(v,n)},S=l&&l["upload-end"]?l["upload-end"]:e=>{const{file:t}=e;n({id:`${t.id}`})},C=l&&l["upload-preview-update"];return Object(a.useEffect)((()=>{y()}),[y,c]),c?i.a.createElement(e,Ws({mediaClientConfig:O,config:j,onUploadsStart:w,onError:k,onEnd:S,onPreviewUpdate:C,onDragEnter:()=>{d()},onDragLeave:()=>{p()},onDrop:()=>{m()}},b)):null})(e));const zs=qs(Ns.a);var Ys=Object(r.connect)((e=>({isOpen:Object(Rs.a)(e)})),(e=>({onClose:()=>e(Object(Ms.a)())})))((e=>i.a.createElement(zs,{
isOpen:e.isOpen,onClose:e.onClose})));const Qs=e=>{const{eventHandlers:t}=e;return i.a.createElement(Ys,{eventHandlers:t})};Qs.displayName="PopupAttachmentPicker";var Js=Qs,Zs=s("./src/packages/issue/issue-view/src/actions/comment-actions.js"),Xs=s("./node_modules/lodash/reduce.js"),en=s.n(Xs),tn=s("./node_modules/lodash/set.js"),sn=s.n(tn),nn=s("./node_modules/lodash/some.js"),an=s.n(nn),rn=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/doc.js"),on=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/paragraph.js"),cn=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media-single.js"),ln=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media-group.js"),un=s("./node_modules/@atlaskit/adf-utils/dist/es2019/builders/nodes/media.js");const dn="issue.issue-base.content.attachment.picker.servicedesk";class pn extends a.Component{constructor(...e){super(...e),this.onUploadsStart=({files:e})=>{
this.props.setCommentAttachmentInProgress(!0),this.commentAttachments=e.map((e=>({file:e,isUploadFinished:!1})))},this.onUploadFinished=({file:e})=>{this.injectAttachmentsToCommentEditor(this.commentAttachments),this.markAttachmentAsUploadFinished(e.id)},this.onUploadError=({file:e})=>{O.a.safeErrorWithoutCustomerData(dn,"Failed to upload an attachment.",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),this.markAttachmentAsUploadFinished(e.id)},this.getAttachmentsDocNode=(e,t)=>{const s=this.separateImageAndNonImageAttachments(e),n=this.getMediaSingleNodes(s.images,t),a=s.nonImages.length>0?this.getMediaGroupNode(s.nonImages,t):null;return a?Object(rn.a)(a,...n,Object(on.a)()):Object(rn.a)(...n,Object(on.a)())},this.getMediaSingleNodes=(e,t)=>e.map((e=>this.getMediaSingleNode(e,t))),this.getMediaSingleNode=(e,t)=>{const s=this.getMediaNode(e,200,200,t);return Object(cn.a)({layout:"center"})(s)},
this.getMediaGroupNode=(e,t)=>Object(ln.a)(...e.map((e=>this.getMediaNode(e,null,null,t)))),this.getMediaNode=({file:e},t,s,n)=>Object(un.a)({id:e.id,collection:n,type:"file",name:e.name,size:e.size,width:t,height:s,__key:e.id,__fileName:e.name,__fileSize:e.size,__fileMimeType:e.type,__displayType:null}),this.markAttachmentAsUploadFinished=e=>{sn()(bs()(this.commentAttachments,(t=>t.file.id===e)),"isUploadFinished",!0),an()(this.commentAttachments,{isUploadFinished:!1})||(this.props.setCommentAttachmentInProgress(!1),this.commentAttachments=[])},this.commentAttachments=void 0,this.separateImageAndNonImageAttachments=e=>en()(e,((e,t)=>(this.isImageAttachment(t.file.type)?e.images.push(t):e.nonImages.push(t),e)),{images:[],nonImages:[]}),this.injectAttachmentsToCommentEditor=e=>{const{uploadContext:t}=this.props;if(!t)return void O.a.safeErrorWithoutCustomerData(dn,"Failed to upload attachments. Upload context not available.",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"
}));const s=this.getAttachmentsDocNode(e,t.collection);this.props.onEditCommentUpdate(s)},this.isImageAttachment=e=>!!e&&(e.indexOf("image/")>-1||e.indexOf("video/")>-1),this.eventHandlers={"uploads-start":this.onUploadsStart,"upload-end":this.onUploadFinished,"upload-error":this.onUploadError}}render(){const{render:e}=this.props;return e(this.eventHandlers)}}pn.displayName="EventHandlersProvider";var mn=at()([Object(r.connect)((e=>({uploadContext:Object(_.a)(e).uploadContext})),(e=>({onEditCommentUpdate:t=>{e(Object(Zs.d)("NEW_OPTIMISTIC_COMMENT",!0)),e(Object(Zs.l)("NEW_OPTIMISTIC_COMMENT",t))},setCommentAttachmentInProgress:t=>e(Object(Zs.E)(t))})))])(pn),bn=()=>i.a.createElement(mn,{render:e=>i.a.createElement(Js,{eventHandlers:e})}),fn=s("./node_modules/reselect/lib/index.js"),gn=s("./src/packages/issue/issue-view/src/common/state/selectors/field-selector.js"),hn=s("./src/packages/issue/issue-view/src/selectors/comment-selector.js")
;const yn=Object(fn.createSelector)(gn.H,hn.y,Rs.a,Object(gn.D)("timetracking"),x.e,((e,t,s,n,a)=>!(e||t||s||n||"EDIT_MODAL"===a)));var On=s("./src/packages/issue/issue-view/src/aui-modal-stack-index/index.js");function jn(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const vn=qs(Ns.b),En=e=>{let{isEnabled:t}=e,s=jn(e,["isEnabled"]);return i.a.createElement(On.a,null,(e=>t&&0===e?i.a.createElement(vn,s):null))};En.displayName="CommonClipboardMediaPicker";var kn=at()([Object(r.connect)((e=>({isEnabled:yn(e)})),{})])(En),wn=()=>i.a.createElement(mn,{render:e=>i.a.createElement(kn,{eventHandlers:e})});function Sn(e,t){if(null==e)return{};var s,n,a=function(e,t){
if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Cn=qs(Ns.c);var In=at()([Object(r.connect)((e=>({isEnabled:yn(e)})),{})])((e=>{const{isEnabled:t}=e,s=Sn(e,["isEnabled"]);return t?i.a.createElement(Cn,s):null}));class Tn extends a.Component{getConfig(){return{container:this.props.container}}render(){return i.a.createElement(mn,{render:e=>i.a.createElement(In,{config:this.getConfig(),onDragEnter:this.props.onDragEnter,onDragLeave:this.props.onDragLeave,onDrop:this.props.onDrop,eventHandlers:e})})}}Tn.displayName="ServiceDeskDropzonePicker";class Pn extends a.Component{getConfig(){return{container:this.props.container}}render(){return i.a.createElement(In,{config:this.getConfig(),onDragEnter:this.props.onDragEnter,
onDragLeave:this.props.onDragLeave,onDrop:this.props.onDrop})}}Pn.displayName="DropzoneMediaPicker";var _n=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/common/services/send-experience-analytics/index.js"),xn=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/index.js"),Dn=s("./src/packages/platform/utils/types/src/application.js"),An=s("./src/packages/platform/utils/types/src/edition.js");class Ln extends a.Component{constructor(e){super(e),this.state={noErrorsAfterTimeout:!1,caughtError:!1}}componentDidMount(){this.props.isReady&&setTimeout((()=>{this.setState({noErrorsAfterTimeout:!0})}),1e3)}shouldComponentUpdate(e,t){if(t.caughtError)return!0;if(!this.state.noErrorsAfterTimeout&&t.noErrorsAfterTimeout){const{experience:e,analyticsSource:t}=this.props,{application:s,edition:n}=this.getApplicationAndEdition();return Object(_n.a)({experience:e,wasExperienceSuccesful:!0,analyticsSource:t,application:s,edition:n}),!1}
return!(this.props.isReady||!e.isReady)&&(setTimeout((()=>{this.setState({noErrorsAfterTimeout:!0})}),1e3),!0)}componentDidCatch(e){const{experience:t,analyticsSource:s}=this.props,{application:n,edition:a}=this.getApplicationAndEdition();Object(_n.a)({experience:t,wasExperienceSuccesful:!1,analyticsSource:s,application:n,edition:a,additionalAttributes:{errorMessage:e.message||"unknown"}}),this.setState({caughtError:!0})}getApplicationAndEdition(){const{projectType:e}=this.props;if(null==e)return{application:null,edition:null};const t=Object(Dn.e)(e),s=xn.f&&Object(xn.f)(),n=s&&s.appEditions;return{application:t,edition:n?Object(An.f)(t,n):null}}render(){const{caughtError:e}=this.state;return e?null:this.props.children}}Ln.displayName="AddAttachmentFrontendSlaTracker"
;var Mn=s("./src/packages/issue/issue-view/src/common/ecosystem/ecosystem-analytics.js"),Rn=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-extensions-selector.js"),Nn=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/layout-items-selector.js");class Fn extends a.Component{constructor(...e){super(...e),this.fireAnalytics=()=>{const{glances:e,contentPanels:t,activityPanels:s,operations:n,ecosystemCustomFieldIds:a}=this.props;this.props.ecosystemLoadedAnalytics(e,t,s,n,a.length)}}componentDidMount(){this.fireAnalytics()}componentDidUpdate(){this.fireAnalytics()}render(){return null}}Fn.displayName="EcosystemAnalyticsView";var Un=at()(Object(fs.a)((e=>({ecosystemLoadedAnalytics:(t,s,n,a,i)=>e("addons-loaded",Object(Mn.f)(t,s,n,a,i))}))),Object(r.connect)((e=>({glances:Object(Rn.i)(e),contentPanels:Object(Rn.g)(e),activityPanels:Object(Rn.a)(e),operations:Object(Rn.j)(e),ecosystemCustomFieldIds:Object(Nn.b)(e)
})),{}),Object(js.a)())(Fn),Vn=s("./src/packages/issue/issue-view/src/ecosystem/ecosystem-connect-host.js"),Kn=s("./node_modules/@atlassian/connect-module-core/dist/es6/index.js"),Wn=s("./src/packages/common-legacy-do-not-add-anything-new/src/ecosystem/default-connect-iframe-provider.js"),Bn=s("./node_modules/@atlaskit/empty-state/dist/es2019/EmptyState/index.js"),Hn=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/assets/error.svg"),$n=s.n(Hn);const Gn=Object(v.h)({timeout:{id:"issue.content.ecosystem-panels.timeout",defaultMessage:"We're having trouble connecting to {appName}.\nTry contacting the developer for support."}}),qn=e=>`https://marketplace.atlassian.com/plugins/${e}/cloud/support?rel="noopener noreferrer"`;class zn extends a.Component{constructor(...e){super(...e),this.tertiaryAction=i.a.createElement(G.a,{appearance:"subtle-link",href:qn(this.props.appKey),target:"_blank"},this.props.appName)}render(){const{appName:e,intl:t}=this.props
;return i.a.createElement(Bn.a,{size:"narrow",imageUrl:$n.a,maxImageWidth:80,maxImageHeight:80,isLoading:!1,description:t.formatMessage(Gn.timeout,{appName:e}),tertiaryAction:this.tertiaryAction})}}zn.displayName="TimeoutView",zn.displayName="TimeoutView";var Yn=Object(v.i)(zn);const Qn=3*Q.e+"px",Jn=Y.default.div(["margin-top:",";"],Qn),Zn=e=>{const{options:t,appKey:s,moduleKey:n,appName:a,options:{url:r},refreshedOn:o}=e,c=new Wn.a,l=o?`connect-iFrame-${s}-${n}-${o}`:`connect-iFrame-${s}-${n}`;return i.a.createElement(Jn,null,i.a.createElement(Kn.a,{key:l,appKey:s,moduleKey:n,url:r,connectHost:Object(Vn.a)(),connectIframeProvider:c,options:c.convertConnectOptions(t),width:"100%",height:"100%",timeoutIndicator:()=>i.a.createElement(Yn,{appName:a,appKey:s})}))};Zn.displayName="EcosystemModuleBase",Zn.defaultProps={refreshedOn:0};const Xn=e=>i.a.createElement(Zn,e);Xn.displayName="EcosystemModuleBaseWithoutRefresh";const ea=Object(js.a)()(Xn)
;var ta=Object(qt.a)([Object(r.connect)((e=>({refreshedOn:Object(P.e)(e)})),{})])(Zn);const sa=Y.default.div(["display:none;"]);class na extends a.Component{constructor(...e){super(...e),this.state={connectHost:null}}componentDidMount(){Object(Vn.b)((e=>this.setState({connectHost:e})))}render(){const{connectHost:e}=this.state,{scripts:t}=this.props;return e?i.a.createElement(sa,null,t.map((({appKey:e,moduleKey:t,options:s,shouldReloadOnRefresh:n})=>{const a=n?ta:ea,r=`${e}-${t}`;return i.a.createElement(a,{key:r,appKey:e,moduleKey:t,options:s,appName:r})}))):null}}na.displayName="EcosystemBackgroundScriptsView";var aa=Object(qt.a)([Object(r.connect)((e=>({scripts:Object(Rn.h)(e)
})),{})])(na),ia=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-actions/index.js"),ra=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/button/index.js"),oa=s("./src/packages/issue/issue-view/src/actions/login-actions.js"),ca=s("./src/packages/issue/issue-view/src/views/issue-details/error/auth-error.svg"),la=s.n(ca);const ua=Y.default.div(["text-align:center;flex-direction:column;color:",";display:flex;justify-content:center;align-items:center;"],Re.a.N800),da=Y.default.h2(["font-size:20px;font-weight:bold;margin-top:","px;margin-bottom:","px;max-width:100%;"],1.5*Q.e,1.5*Q.e),pa=Y.default.p(["max-width:100%;"]),ma=e=>i.a.createElement(ua,null,e.image,i.a.createElement(da,null,e.header),i.a.createElement(pa,null,e.description),e.children);ma.displayName="ErrorDisplay",ma.defaultProps={description:void 0,children:null};var ba=ma;const fa=Object(v.h)({authErrorHeader:{id:"issue.text-for-header-in-authentication-error",
defaultMessage:"Log in to Jira to see this issue"},authBtn:{id:"issue.text-for-login-button-in-authentication-error",defaultMessage:"Log in"}}),ga=Y.default.img(["width:160px;margin-bottom:14px;"]),ha=e=>{const t=Object(xe.c)();return i.a.createElement(ba,{header:t.formatMessage(fa.authErrorHeader),image:i.a.createElement(ga,{src:la.a,alt:""})},i.a.createElement(ra.a,{externalId:"issue.login",appearance:"primary",onClick:e.login},t.formatMessage(fa.authBtn)))};ha.displayName="AuthenticationError";var ya=Object(r.connect)(null,(e=>({login:()=>e(Object(oa.a)())})))(ha),Oa=s("./src/packages/issue/issue-view/src/views/issue-details/error/permission-error.svg"),ja=s.n(Oa);const va=Object(v.h)({permissionErrorHeader:{id:"issue.text-for-header-in-permission-error",defaultMessage:"You don't have access to this issue"},permissionErrorDescription:{id:"issue.text-for-description-in-permission-error",
defaultMessage:"Make sure the issue exists in this project. If it does, ask a project admin for permission to see the project's issues."}}),Ea=Y.default.img(["height:100px;width:145px;"]),ka=()=>{const e=Object(xe.c)();return i.a.createElement(ba,{header:e.formatMessage(va.permissionErrorHeader),description:e.formatMessage(va.permissionErrorDescription),image:i.a.createElement(Ea,{src:ja.a,alt:""})})};ka.displayName="HoistedComponent";var wa=ka,Sa=s("./src/packages/issue/issue-view/src/views/issue-details/error/unknown-error.svg"),Ca=s.n(Sa);const Ia=Object(v.h)({unknownErrorHeader:{id:"issue.text-for-header-in-generic-error",defaultMessage:"We couldn't connect to that issue"},unknownErrorDescription:{id:"issue.text-for-description-in-generic-error",defaultMessage:"Make sure that this issue actually exists in that project. If it does, try again in a few minutes. If you still can't link to the issue, contact your Jira admin."}}),Ta=Y.default.img(["height:130px;width:120px;"]),Pa=()=>{
const e=Object(xe.c)();return i.a.createElement(ba,{header:e.formatMessage(Ia.unknownErrorHeader),description:e.formatMessage(Ia.unknownErrorDescription),image:i.a.createElement(Ta,{src:Ca.a,alt:""})})};Pa.displayName="HoistedComponent";var _a=Pa,xa=s("./node_modules/lodash/isEqual.js"),Da=s.n(xa),Aa=s("./src/packages/issue/issue-view/src/views/common/with-container-width/index.js"),La=s("./src/packages/forge/forge-ui/src/utils/connect/index.js"),Ma=s("./src/packages/issue/issue-view/src/actions/activity-feed-actions.js"),Ra=s("./src/packages/issue/issue-view/src/common/component/section-heading/section-heading-view.js");const Na="FORGE_ENTITY_TYPE",Fa="CONNECT_ENTITY_TYPE"
;var Ua=s("./src/packages/issue/issue-view/src/common/skeleton/activity-feed-view.js"),Va=s("./src/packages/issue/issue-view/src/selectors/activity-feed-selector.js"),Ka=s("./src/packages/platform/utils/permalinks/src/index.js"),Wa=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/fire-analytics.js"),Ba=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/mount-event-component.js"),Ha=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-context-wrapper.js"),$a=s("./src/packages/platform/observability/product-analytics-bridge/src/constants.js"),Ga=s("./src/packages/issue/project-context-service/src/main.js"),qa=s("./src/packages/issue/issue-actions/activity-feed/src/messages.js");function za(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}
function Ya(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?za(Object(s),!0).forEach((function(t){Qa(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):za(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Qa(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ja(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Za=Y.default.div(["align-self:flex-end;"]),Xa=Object(Y.default)(Ra.c)(["margin-top:","px;"],Q.e/2);Xa.displayName="ActivityItemHeading"
;const ei=Y.default.div(["display:flex;"]),ti=e=>(t,s)=>{const n=t(s),{buttonStyles:a}=n;return Ya(Ya({},Ja(n,["buttonStyles"])),{},{buttonStyles:Ya(Ya({},a),{},{padding:`0 ${Q.e/2}px 0 ${Q.e/2}px`,margin:`0 ${Q.e/2}px 0 ${Q.e/2}px`,backgroundColor:e?Re.a.N400:Re.a.N20,"&:hover":{backgroundColor:e?Re.a.N400:Re.a.N30},"&:active":{backgroundColor:e?Re.a.N400:Re.a.B50}})})};var si=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hooks/useAnalyticsEvents.js");const ni=Object(v.h)({tooltip:{id:"issue-activity-feed.activity-sorting-toggle.tooltip",defaultMessage:"Reverse sort direction"},newestFirstLabel:{id:"issue-activity-feed.activity-sorting-toggle.newest-first-label",defaultMessage:"Newest first"},oldestFirstLabel:{id:"issue-activity-feed.activity-sorting-toggle.oldest-first-label",defaultMessage:"Oldest first"}});var ai=s("./node_modules/@atlaskit/icon/cjs/index.js"),ii=s.n(ai);function ri(){return(ri=Object.assign||function(e){for(var t=1;t<arguments.length;t++){
var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const oi=e=>i.a.createElement("svg",ri({},e,{width:"24px",height:"24px",viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}),i.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.a.createElement("path",{d:"M6.8,4.3 C6.6,4.1 6.3,4 6,4 C5.7,4 5.4,4.1 5.2,4.3 L2.3,7.2 C1.9,7.6 1.9,8.3 2.3,8.7 C2.7,9.1 3.3,9.1 3.7,8.7 L5,7.4 L5,19.1 C5,19.6 5.4,20 6,20 C6.6,20 7,19.6 7,19.1 L7,7.4 L8.3,8.7 C8.7,9.1 9.3,9.1 9.7,8.7 C10.1,8.3 10.1,7.6 9.7,7.2 C9.04754611,6.54754611 8.5582057,6.0582057 8.23197876,5.73197876 C7.91376126,5.41376126 7.436435,4.936435 6.8,4.3 Z",id:"Path",fill:"currentColor",fillRule:"nonzero",transform:"translate(6.000000, 12.000000) rotate(180.000000) translate(-6.000000, -12.000000) "}),i.a.createElement("path",{
d:"M21,5 L13,5 C12.4,5 12,5.4 12,6 C12,6.6 12.4,7 13,7 L21,7 C21.6,7 22,6.6 22,6 C22,5.4 21.6,5 21,5 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"}),i.a.createElement("path",{d:"M13,13 L18,13 C18.6,13 19,12.6 19,12 C19,11.4 18.6,11 18,11 L13,11 C12.4,11 12,11.4 12,12 C12,12.6 12.4,13 13,13 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"}),i.a.createElement("path",{d:"M13,19 L16,19 C16.6,19 17,18.6 17,18 C17,17.4 16.6,17 16,17 L13,17 C12.4,17 12,17.4 12,18 C12,18.6 12.4,19 13,19 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"})));oi.displayName="ArrowDownGlyph";const ci=({label:e})=>i.a.createElement(ii.a,{size:"small",label:e,glyph:oi});function li(){return(li=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}ci.displayName="ArrowDownIcon";const ui=e=>i.a.createElement("svg",li({},e,{width:"24px",height:"24px",viewBox:"0 0 24 24",
version:"1.1",xmlns:"http://www.w3.org/2000/svg"}),i.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},i.a.createElement("path",{d:"M7.8,4.3 C7.6,4.1 7.3,4 7,4 C6.7,4 6.4,4.1 6.2,4.3 L3.3,7.2 C2.9,7.6 2.9,8.3 3.3,8.7 C3.7,9.1 4.3,9.1 4.7,8.7 L6,7.4 L6,19.1 C6,19.6 6.4,20 7,20 C7.6,20 8,19.6 8,19.1 L8,7.4 L9.3,8.7 C9.7,9.1 10.3,9.1 10.7,8.7 C11.1,8.3 11.1,7.6 10.7,7.2 C10.0475461,6.54754611 9.5582057,6.0582057 9.23197876,5.73197876 C8.91376126,5.41376126 8.436435,4.936435 7.8,4.3 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"}),i.a.createElement("path",{d:"M21,17 L13,17 C12.4,17 12,17.4 12,18 C12,18.6 12.4,19 13,19 L21,19 C21.6,19 22,18.6 22,18 C22,17.4 21.6,17 21,17 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"}),i.a.createElement("path",{d:"M13,13 L18,13 C18.6,13 19,12.6 19,12 C19,11.4 18.6,11 18,11 L13,11 C12.4,11 12,11.4 12,12 C12,12.6 12.4,13 13,13 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"}),i.a.createElement("path",{
d:"M13,7 L16,7 C16.6,7 17,6.6 17,6 C17,5.4 16.6,5 16,5 L13,5 C12.4,5 12,5.4 12,6 C12,6.6 12.4,7 13,7 Z",id:"Path",fill:"currentColor",fillRule:"nonzero"})));ui.displayName="ArrowUpGlyph";const di=({label:e})=>i.a.createElement(ii.a,{size:"small",label:e,glyph:ui});di.displayName="ArrowUpIcon";const pi=e=>{const{selectedSortOrder:t,onSelectSortOrder:s,isDisabled:n=!1}=e,{formatMessage:a}=Object(xe.c)(),{createAnalyticsEvent:r}=Object(si.a)(),o=(e=>[{key:"NEWEST_FIRST",type:"NEWEST_FIRST",name:e(ni.newestFirstLabel),icon:i.a.createElement(ci,{label:e(ni.newestFirstLabel)})},{key:"OLDEST_FIRST",type:"OLDEST_FIRST",name:e(ni.oldestFirstLabel),icon:i.a.createElement(di,{label:e(ni.newestFirstLabel)})}])(a).find((e=>e.type===t));if(!o)return xn.h.safeErrorWithoutCustomerData("issue.activity.activity-sorting.select-sort-order",`Failed to select a sort option with selected sort of ${t}`),null;return i.a.createElement(Ha.a,{sourceType:$a.f,sourceName:"activityFeedSort"},i.a.createElement(Ba.a,{
onMount:Wa.d}),i.a.createElement(je.a,{content:a(ni.tooltip),hideTooltipOnMouseDown:!0,position:"bottom"},i.a.createElement(G.a,{appearance:"subtle",isDisabled:n,onClick:()=>{const e=r({action:"clicked",actionSubject:"button"});"NEWEST_FIRST"===t&&s("OLDEST_FIRST",e,"sortOrderItemToggled"),"OLDEST_FIRST"===t&&s("NEWEST_FIRST",e,"sortOrderItemToggled")},iconAfter:o.icon,spacing:"compact"},o.name)))};pi.displayName="ActivitySortingToggle";var mi=pi,bi=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItem.js"),fi=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenu.js"),gi=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroup.js"),hi=s("./node_modules/@atlaskit/icon/glyph/arrow-down.js"),yi=s.n(hi),Oi=s("./node_modules/@atlaskit/icon/glyph/arrow-up.js"),ji=s.n(Oi),vi=s("./src/packages/platform/observability/product-analytics-bridge/src/utils/analytics-event-to-props.js");const Ei=Object(v.h)({
newestFirst:{id:"issue-activity-feed.common.newest-first",defaultMessage:"Newest first"},oldestFirst:{id:"issue-activity-feed.common.oldest-first",defaultMessage:"Oldest first"}}),ki=Object(v.h)({tooltip:{id:"issue-activity-feed.activity-sorting.tooltip",defaultMessage:"Sort by newest/oldest first"}}),wi=Object(vi.a)("dropdownItem",{onClick:"clicked"})(bi.a),Si={NEWEST_FIRST:i.a.createElement(yi.a,{size:"small",label:"newest-first"}),OLDEST_FIRST:i.a.createElement(ji.a,{size:"small",label:"oldest-first"})},Ci=e=>{const{selectedSortOrder:t,onSelectSortOrder:s,isDisabled:n=!1}=e,{formatMessage:a}=Object(xe.c)(),r=(e=>[{key:"NEWEST_FIRST",type:"NEWEST_FIRST",name:e(Ei.newestFirst)},{key:"OLDEST_FIRST",type:"OLDEST_FIRST",name:e(Ei.oldestFirst)}])(a),o=r.find((e=>e.type===t));return o?i.a.createElement(Ha.a,{sourceType:$a.b,sourceName:"activityFeedSort"},i.a.createElement(Ba.a,{onMount:Wa.d}),i.a.createElement(je.a,{content:a(ki.tooltip),hideTooltipOnMouseDown:!0,position:"top"
},i.a.createElement(fi.a,{trigger:o.name,triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",isDisabled:n,iconAfter:Si[o.type]},position:"bottom right"},i.a.createElement(gi.a,null,r.filter((e=>e.type!==t)).map((e=>i.a.createElement(wi,{key:e.key,onClick:(t,n)=>s(e.type,n,"sortOrderItemSelected"),elemAfter:Si[e.type],isCompact:!0},e.name))))))):(xn.h.safeErrorWithoutCustomerData("issue.activity.activity-sorting.select-sort-order",`Failed to select a sort option with selected sort of ${t}`),null)};Ci.displayName="ActivitySortingSelect";var Ii=Ci,Ti=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/DropdownMenuStateless.js"),Pi=s("./src/packages/forge/forge-ui-analytics/src/services/issue-activity/index.js"),_i=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-activity/index.js"),xi=s("./src/packages/forge/forge-ui/src/ui/extension-title/index.js");const Di=({item:e,component:t})=>{const s=t
;return i.a.createElement(s,null,i.a.createElement(xi.a,{extensionName:e.name,extensionEnvType:e.extension.environmentType}))};Di.displayName="ForgeIssueActivityTrigger";const Ai=({component:e,item:t,onClick:s,isSelected:n})=>{const r=e,o=Object(a.useCallback)(((e,t)=>{Object(Pi.a)(),s(e,t)}),[s]);return i.a.createElement(_i.a,{shouldFireScreenEvent:!1},i.a.createElement(r,{onClick:o,isSelected:!!n},i.a.createElement(xi.a,{extensionName:t.name,extensionEnvType:t.extension.environmentType})))};Ai.displayName="ForgeIssueActivityView";var Li=s("./src/packages/issue/issue-view/src/common/styles/issue-value.js");const Mi=Y.default.span(["max-width:","px;display:inline-block;line-height:normal;vertical-align:text-bottom;",";"],20*Q.e,Li.e);Mi.displayName="DropdownTrigger";const Ri=Object(Y.default)(bi.a)(["min-width:","px;"],16*Q.e);function Ni(){return(Ni=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Fi(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ui(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Fi(Object(s),!0).forEach((function(t){Vi(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Fi(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Vi(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ki(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t)
;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}Ri.displayName="DropdownItem";const Wi=({children:e,onClick:t})=>i.a.createElement(Hi,{onClick:t},e);Wi.displayName="DropdownItemComponent";const Bi=({items:e,selectedItem:t,onSelectActivityItem:s})=>{const[n,r]=Object(a.useState)(!1),o=Object(a.useMemo)((()=>"FORGE_ENTITY_TYPE"===t.type?i.a.createElement(Di,{item:t,component:Mi}):i.a.createElement(Mi,null,t.name)),[t]);return i.a.createElement(Ha.a,{sourceType:$a.b,sourceName:"activityFeed"},i.a.createElement(Ba.a,{onMount:Wa.d}),i.a.createElement(Ti.a,{isOpen:n,onOpenChange:({isOpen:e},t)=>{r(e),Object(Wa.h)(t,{isOpen:e})},trigger:o,triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",theme:(e,t)=>{const s=e(t),{buttonStyles:a}=s;return Ui(Ui({},Ki(s,["buttonStyles"])),{},{buttonStyles:Ui(Ui({},a),{},{
padding:`0 ${Q.e/2}px 0 ${Q.e/2}px`,margin:`0 ${Q.e/2}px 0 ${Q.e/2}px`,backgroundColor:n?Re.a.N400:Re.a.N20,"&:hover":{backgroundColor:n?Re.a.N400:Re.a.N30},"&:active":{backgroundColor:n?Re.a.N400:Re.a.B50}})})}},position:"bottom left"},i.a.createElement(gi.a,null,e.filter((e=>e.key!==t.key)).map((e=>{const t={key:e.key,onClick:(t,n)=>s(e,n,"dropdownItemSelected")};return"FORGE_ENTITY_TYPE"===e.type?i.a.createElement(Ai,Ni({},t,{component:Wi,item:e})):i.a.createElement(Wi,t,e.name)})))))};Bi.displayName="ActivityFeedDropdown";const Hi=Object(vi.a)("dropdownItem",{onClick:"clicked"})(Ri);var $i=s("./node_modules/@atlaskit/button--next/dist/es2019/custom-theme-button/custom-theme-button.js");function Gi(){return(Gi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const qi=({children:e,onClick:t,isSelected:s})=>i.a.createElement($i.a,{appearance:"subtle",
spacing:"compact",isSelected:s,theme:ti(s),onClick:t},e);qi.displayName="ButtonComponent";const zi=({items:e,selectedItem:t,onSelectActivityItem:s})=>i.a.createElement(Ha.a,{sourceType:$a.f,sourceName:"activityFeedButtons"},i.a.createElement(Ba.a,{onMount:e=>Object(Wa.e)(e)}),e.map((e=>{const n={key:e.key,isSelected:t.key===e.key,onClick:(t,n)=>s(e,n,"buttonItemSelected")};return"FORGE_ENTITY_TYPE"===e.type?i.a.createElement(Ai,Gi({},n,{component:qi,item:e})):i.a.createElement(qi,n,e.name)})));zi.displayName="ActivityFeedButtons";var Yi=s("./node_modules/@atlaskit/section-message/dist/es2019/section-message.js"),Qi=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),Ji=s("./src/packages/issue/issue-fetch-services/src/common/utils/client.js");var Zi=async e=>{const t=Object(Ji.a)(e),{data:s,errors:n}=await t.query({
query:'\n    query IssueActivitySortingPreferencesQuery {\n        myPreferences(keys: [\n            "user.activity.sorting.hide-intro-message"\n        ])\n    }\n',variables:{}});if(n)throw new Error(`Errors returned from FetchIssueActivitySortingPreferencesQuery result: ${n.map((e=>e.message)).join(", ")}`);if(!s)throw new Error("Unexpected empty data object received from FetchIssueActivitySortingPreferencesQuery result with no errors");return(e=>"true"===e.myPreferences["user.activity.sorting.hide-intro-message"])(s)};var Xi=async e=>{var t;const s=Object(Ji.a)(e),{data:n,errors:a}=await s.query({query:'\n    mutation SetIssueActivitySortingPreferencesMutation {\n        setMyPreference(input: {key: "user.activity.sorting.hide-intro-message", value: "true"}) {\n            success\n            errors {\n                message\n            }\n        }\n    }\n',variables:{}})
;if(a)throw new Error(`Errors returned from SetIssueActivitySortingPreferencesMutation result: ${a.map((e=>e.message)).join(", ")}`);if(!n)throw new Error("Unexpected empty data object received from SetIssueActivitySortingPreferencesMutation result with no errors");if((null===(t=n.setMyPreference.errors)||void 0===t?void 0:t.length)>0)throw new Error(`Errors returned from SetIssueActivitySortingPreferencesMutation setMyPreference result: ${n.setMyPreference.errors.map((e=>e.message)).join(", ")}`);return(e=>e.setMyPreference)(n)};var er=()=>{const e=Object(Qi.a)(),[t,s]=Object(a.useState)(!0),[n,i]=Object(a.useState)(!1);return{setPreference:Object(a.useCallback)((()=>(s(!0),Xi(e).catch((e=>{xn.h.safeErrorWithoutCustomerData("issue.activity-feed.activity-sorting.show-section-message","SET gira preference request failed",e)})))),[e]),fetchPreference:Object(a.useCallback)((()=>(i(!0),Zi(e).then(s).catch((e=>{
xn.h.safeErrorWithoutCustomerData("issue.activity-feed.activity-sorting.show-section-message","FETCH gira preference request failed",e)})).finally((()=>i(!1))))),[e]),shouldHideSectionMessage:t,fetchLoading:n}};const tr=Object(v.h)({title:{id:"issue-activity-feed.activity-sorting-section-message.title",defaultMessage:"View activity in your preferred order"},description:{id:"issue-activity-feed.activity-sorting-section-message.description",defaultMessage:"You can now sort an issue's activity (comments, history, work log) by oldest or newest first depending on what suits the task best."},dismiss:{id:"issue-activity-feed.activity-sorting-section-message.dismiss",defaultMessage:"OK"}}),sr=Y.default.div(["margin-top:","px;"],3*Q.e),nr=()=>{const{formatMessage:e}=Object(xe.c)(),{createAnalyticsEvent:t}=Object(si.a)(),{shouldHideSectionMessage:s,setPreference:n,fetchPreference:r,fetchLoading:o}=er();return Object(a.useEffect)((()=>{r()}),[r]),s||o?null:i.a.createElement(sr,{
"data-test-id":"issue-activity-feed.ui.activity-sorting-section-message.section-message-wrapper"},i.a.createElement(Yi.a,{appearance:"change",title:e(tr.title),actions:[{key:tr.dismiss.id,onClick:()=>{const e=t({action:"clicked",actionSubject:"button"});Object(Wa.h)(e,"activitySortingDismissSectionMessage"),n()},text:e(tr.dismiss)}]},i.a.createElement("p",null,e(tr.description))))};nr.displayName="ActivitySortingSectionMessage";var ar=nr,ir=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/component-with-condition.js"),rr=s("./src/packages/platform/utils/types/src/general.js"),or=s("./src/packages/platform/observability/browser-metrics/src/index.js"),cr=s("./node_modules/react-sweet-state/lib/esm/components/container.js"),lr=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/store.js"),ur=Object(cr.a)(lr.a,{displayName:"CommentVisibilitiesContainer"
}),dr=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/state/components/subscriber.js");function pr(){return(pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var mr=e=>t=>{const{baseUrl:s,issueKey:n,shouldFetchCommentVisibilities:a,createAnalyticsEvent:r}=t;return i.a.createElement(ur,{baseUrl:s,issueKey:n,createAnalyticsEvent:r,scope:n},i.a.createElement(dr.a,null,((s,{fetch:n})=>i.a.createElement(e,pr({},t,{fetchCommentVisibilities:a?n:void 0})))))
},br=s("./src/packages/issue/issue-view/src/epics/comment-fetch-epic.js"),fr=s("./src/packages/issue/issue-view/src/selectors/breadcrumbs-selector.js"),gr=s("./src/packages/issue/issue-view/src/actions/editor-actions.js"),hr=s("./src/packages/issue/issue-view/src/actions/share-as-comment-actions.js"),yr=s("./src/packages/issue/issue-view/src/common/state/selectors/activity-provider-selector.js"),Or=s("./src/packages/issue/issue-view/src/common/state/selectors/comments-selector.js"),jr=s("./src/packages/issue/issue-view/src/common/state/selectors/reactions-selector.js"),vr=s("./src/packages/issue/issue-view/src/drafts/draft-utils.js"),Er=s("./src/packages/issue/issue-view/src/selectors/drafts/selectors.js"),kr=s("./src/packages/issue/issue-view/src/selectors/issue-remote-data-selector.js"),wr=s("./src/packages/issue/issue-view/src/selectors/share-as-comment-selector.js");function Sr(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e)
;t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cr(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(s),!0).forEach((function(t){Ir(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sr(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ir(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Tr=Object(re.f)((()=>s.e("async-comment-item").then(s.bind(null,"./src/packages/issue/issue-actions/issue-comment-base/src/index.js"))),{moduleId:"./src/packages/issue/issue-actions/issue-comment-base/src/index.js"}),Pr=e=>i.a.createElement(re.a,{fallback:i.a.createElement(i.a.Fragment,null)},i.a.createElement(Tr,e));Pr.displayName="IssueComment";const _r=e=>i.a.createElement(R.a,{
id:"comment-item",packageName:"issue",render:()=>i.a.createElement(i.a.Fragment,null)},i.a.createElement(Pr,e));_r.displayName="CommentWithMonitoring";var xr=Object(qt.a)([v.i,Object(gs.a)("issueFields",{onEditSave:"updated",onDeleteConfirm:"deleted",onScrolledToPermalink:"scrolled"}),Object(E.a)({onCopyClick:"copyCommentUrl"}),Object(r.connect)(((e,{commentId:t})=>(e,{isHighlighted:s})=>Cr({bodyAdf:Object(hn.j)(t)(e),bodyHtml:Object(hn.f)(t)(e),hasDraft:Object(Er.a)(Object(vr.a)(t))(e),author:Object(hn.e)(t)(e),updateAuthor:Object(hn.q)(t)(e),createdDate:Object(hn.g)(t)(e),updatedDate:Object(hn.r)(t)(e),edited:Object(hn.h)(t)(e),isOptimistic:Object(hn.o)(t)(e),hasSaveFailed:Object(hn.p)(t)(e),canEdit:Object(hn.d)(t)(e),isEditing:Object(hn.B)(t)(e),canDelete:Object(hn.c)(t)(e),hasDeleteModal:Object(hn.m)(t)(e),visibility:Object(hn.s)(t)(e),visibilityEdited:Object(hn.k)(t)(e),isInternal:Object(hn.D)(t)(e),showReactions:Object(jr.b)(e),
timeZone:Object(F.removeTimeZoneFromIssueUser)()?void 0:Object(P.z)(e),shouldShowCommentVisibility:Object(hn.z)(e),shouldScrollAfterAsyncComponentsLoaded:s&&Object(kr.a)(e),hasScrolledPermalink:Object(hn.v)(e)},((e,t)=>({baseUrl:Object(T.f)(e),isReactionsFeatureActive:Object(jr.b)(e),issueAri:Object(P.v)(e),commentAri:Object(jr.a)(t)(e),projectType:Object(P.F)(e),mentionProvider:Object(I.a)(e),mediaContext:Object(_.a)(e),contextIdentifier:Object(Or.b)(e,t),sharedAtTimestamp:Object(wr.a)(e),sharedValue:Object(wr.b)(e),getEncodedMention:Object(C.a)(Object(T.f)(e)),activityProvider:Object(yr.a)(e)}))(e,t))),((e,{commentId:t})=>Cr({getOnEditClick:s=>e(Object(Zs.i)(t,s)),onEditCancel:()=>e(Object(Zs.j)(t)),onEditUpdate:s=>e(Object(Zs.l)(t,s)),onEditPaste:s=>e(Object(Zs.w)(t,s)),onBlur:()=>e(Object(Zs.k)(t)),getOnEditSave:(s,n)=>e(Object(Zs.A)(Cr({id:t},s),n)),onCommentVisibilityChange:s=>{e(Object(Zs.m)(t,s))},onDeleteClick:()=>e(Object(Zs.G)(t)),getOnDeleteConfirm:s=>e(Object(Zs.g)(t,s)),
onDeleteCancel:()=>e(Object(Zs.e)()),onSaveRetry:()=>e(Object(Zs.B)(t,(new Date).toISOString(),(e=>e.includes("NEW_OPTIMISTIC_COMMENT"))(t))),onSaveEdit:()=>e(Object(Zs.y)(t)),onSaveCancel:()=>e(Object(Zs.x)(t)),setScrollStatus:t=>e(Object(Zs.F)(t))},(e=>({onEditorExpandedFailure:()=>{e(Object(gr.b)())},onEditorSaveFailure:()=>{e(Object(gr.c)())},onEditorClearSharedValues:()=>{e(Object(hr.a)())}
}))(e))),((e,t,s)=>Cr(Cr(Cr({},e),t),s)))])(_r),Dr=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightTarget.js"),Ar=s("./src/packages/platform/services/refs-store/src/index.js"),Lr=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/comment-visibility/index.js"),Mr=s("./src/packages/issue/issue-view/src/common/model/comment-type.js"),Rr=s("./node_modules/lodash/throttle.js"),Nr=s.n(Rr),Fr=s("./node_modules/@atlaskit/avatar/dist/es2019/Avatar.js"),Ur=s("./node_modules/@atlaskit/lozenge/dist/es2019/Lozenge/index.js"),Vr=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),Kr=s("./src/packages/issue/issue-actions/issue-comment-base/src/ui/comment/content/styled.js"),Wr=s("./src/packages/issue/issue-view/src/common/util/scroll/index.js"),Br=s("./src/packages/issue/issue-view/src/views/constants.js"),Hr=s("./src/packages/issue/issue-view/src/activity/comment/servicedesk-comment-editor-container/index.js")
;const $r=Y.default.button(["text-align:left;color:grey;font:inherit;background:white;width:100%;height:40px;padding-left:","px;padding-right:","px;padding-top:","px;padding-bottom:","px;border:1px solid ",";border-radius:","px;box-sizing:border-box;"],2.5*Q.e,2.5*Q.e,1.5*Q.e,1.5*Q.e,Re.a.N40,Q.a),Gr=Y.default.div(["display:flex;justify-content:space-between;align-items:center;height:14px;padding-top:1px;letter-spacing:-0.005em;"]),qr=Y.default.span(["padding-top:","px;"],Q.e/2),zr=Y.default.div(["text-align:center;"]);class Yr extends a.Component{constructor(...e){super(...e),this.state={changed:!1},this.onClick=()=>{this.props.onExpanded(),this.setState({changed:!0})}}static getServiceDeskFallbackEditor(){return i.a.createElement(zr,null,i.a.createElement(q.a,{size:"medium"}))}getGeneralFallbackEditor(){return i.a.createElement($r,{onClick:this.onClick},i.a.createElement(Gr,null,this.props.placeholder,this.state.changed&&i.a.createElement(qr,null,i.a.createElement(q.a,{size:"small"
}))))}render(){return this.props.isServiceDesk?Yr.getServiceDeskFallbackEditor():this.getGeneralFallbackEditor()}}Yr.displayName="FallbackAddCommentEditor",Yr.defaultProps={placeholder:"",onExpanded:c.a};const Qr=Object(qt.a)([Object(r.connect)((e=>({isServiceDesk:Object(T.s)(e)})),{})])(Yr),Jr=({children:e,fallback:t,packageName:s})=>i.a.createElement(R.a,{id:"issue-add-comment-editor",packageName:s,render:()=>t},i.a.createElement(re.a,{fallback:t},e));Jr.displayName="IssueAddCommentEditorBoundary";const Zr=Object(v.h)({placeholder:{id:"issue.placeholder-for-empty-comment-editor",defaultMessage:"Add a comment\u2026"},draftPlaceholder:{id:"issue.draft-placeholder-for-empty-comment-editor",defaultMessage:"You have an unsaved comment"},commentShortcutHintHeading:{id:"issue.comment.shortcut-hint-pro-tip-text",defaultMessage:"Pro tip:"},commentShortcutHintMessage:{id:"issue.comment.shortcut-hint-message-with-pro-tip-text",defaultMessage:"{proTipText} press {shortcutKey} to comment"}})
;var Xr=s("./node_modules/@atlaskit/modal-dialog/dist/esm/styled/Content.js"),eo=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js")
;const to=Y.default.small(["color:",";display:block;margin-top:","px;white-space:nowrap;font-size:12px;line-height:1.33333333333333;"],Re.a.N200,Q.e),so=Object(Y.css)(["@supports (position:sticky) or (position:-webkit-sticky){position:sticky;z-index:",";transition:transform 0.3s cubic-bezier(0.86,0,0.07,1) 0.1s;transform:translate( 0,"," );bottom:-1px;"," background:white;padding-left:","px;margin-left:-","px;"," &{bottom:-2px;}","}"],(e=>Object(F.isStickyCommentZIndexValueFixEnabled)()?e.isKeylineVisible?e.shouldApplyTopSticky?eo.b+1:10:0:e.shouldApplyTopSticky?99:10),(e=>e.isHidden?("OLDEST_FIRST"===e.sortOrder?100:-100)+"px":"0"),(e=>e.shouldApplyTopSticky?"top: 0px;":""),Q.e,Q.e,Xr.c.toString(),(e=>e.isHidden?(()=>Object(Vr.c)()?"":"display: contents;")():"")),no=Object(Y.css)(["@supports (position:sticky) or (position:-webkit-sticky){box-shadow:",";margin-top:",";}"],(e=>"NEWEST_FIRST"===e.sortOrder&&e.shouldApplyTopSticky?`0 2px 0 0 ${Re.a.N30}, 0 -2px 0 0 ${Re.a.N30}`:`0 -2px 0 0 ${Re.a.N30}`),Qn),ao=Y.default.div(["",";"],(e=>e.shouldApplySticky&&so)),io=Y.default.div(["display:flex;padding-top:","px;padding-bottom:","px;background:white;"," margin-bottom:","px;margin-top:","px;"],2*Q.e,2*Q.e,(e=>e.isKeylineVisible&&e.shouldApplySticky?no:""),(e=>"NEWEST_FIRST"===e.sortOrder?-2*Q.e:0),(e=>"NEWEST_FIRST"===e.sortOrder?Q.e:0)),ro=Y.default.div(["margin-right:","px;margin-top:","px;"],1.5*Q.e,Q.e/4)
;function oo(){return(oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const co=["avatarUrl","hasDraft","isExpanded","isServiceDesk","isEditorFocused","isLoading"],lo=Object(re.f)((()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js"});class uo extends a.Component{constructor(...e){super(...e),this.state={isKeylineVisible:!1,shouldHide:!1},this.onSave=e=>{Object(or.c)().markStartOfInteraction({key:Br.a.COMMENTS.TIME_TO_RENDER_SAVED_COMMENT,cancelExisting:!0});Object(L.g)(e)||(this.props.onSave(e),this.props.onCancel())},this.setAddCommentContainerRef=e=>{this.addCommentContainer=e},this.setEditorContainerRef=e=>{this.editorContainer=e},
this.setContainerBottomRef=e=>{this.containerBottom=e},this.setContainerTopRef=e=>{this.containerTop=e},this.getScrollParent=e=>e&&"_issue-app-modal-dialog-wrapper"!==e.className?"auto"===window.getComputedStyle(e).overflowY||"scroll"===window.getComputedStyle(e).overflowY?e:this.getScrollParent(e.parentElement):null,this.setOverflowNode=()=>{this.overflowNode||(this.overflowNode=this.getScrollParent(this.containerBottom)),this.setSticky()},this.setSticky=()=>{const{containerTop:e,containerBottom:t}=this,{sortOrder:s}=this.props;if("OLDEST_FIRST"===s){if(this.overflowNode&&t){const e=this.overflowNode.getBoundingClientRect(),s=t.getBoundingClientRect(),n=Math.min(e.bottom,window.innerHeight),a=!this.props.isExpanded&&s.bottom>=n;a!==this.state.isKeylineVisible&&this.setState({isKeylineVisible:a})}}else if("NEWEST_FIRST"===s&&this.overflowNode&&e&&t){
const s=this.overflowNode.getBoundingClientRect(),n=e.getBoundingClientRect(),a=t.getBoundingClientRect(),i=Math.min(s.bottom,window.innerHeight),r=Math.min(s.top,window.innerHeight),o=!this.props.isExpanded&&n.top<=r,c=!this.props.isExpanded&&a.bottom>=i,l=o||c;l!==this.state.isKeylineVisible&&this.setState({isKeylineVisible:l})}},this.addCommentContainer=void 0,this.editorContainer=void 0,this.containerBottom=void 0,this.containerTop=void 0,this.editorEndOrStartElement=void 0,this.overflowNode=void 0,this.observer=void 0,this.onEditorExpandedWithAnalytics=()=>{Object(or.c)().markStartOfInteraction({key:Br.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),this.props.onEditorExpandedWithAnalytics()},this.onExpand=()=>{Object(or.c)().markStartOfInteraction({key:Br.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0}),this.props.onExpand()}}componentDidMount(){this.overflowNode=this.getScrollParent(this.containerBottom),
Object(Vr.e)()||(window.addEventListener("resize",this.setOverflowNode),this.overflowNode&&(this.overflowNode.addEventListener("scroll",Nr()(this.setSticky,100)),this.setSticky())),this.props.isExpanded&&this.scrollEditorIntoView(),this.setupStickyObserver(),this.props.isEditorFocused&&this.setupStickyHidingObserver()}shouldComponentUpdate(e,t){const s=!co.every((t=>this.props[t]===e[t])),n=!Object.entries(this.state).every((([e,s])=>s===t[e]));return s||n}componentDidUpdate(e){!e.isExpanded&&this.props.isExpanded&&(Object(or.c)().markTimeToFinishTask({key:Br.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR}),this.scrollEditorIntoView()),e.isEditorFocused!==this.props.isEditorFocused&&(this.props.isEditorFocused?this.setupStickyHidingObserver():this.removeStickyHidingObserver())}componentWillUnmount(){Object(Vr.e)()||(window.removeEventListener("resize",this.setOverflowNode),this.overflowNode&&this.overflowNode.removeEventListener("scroll",this.setSticky)),
this.observer&&this.containerBottom&&this.observer.unobserve(this.containerBottom),this.observer&&this.containerTop&&this.observer.unobserve(this.containerTop),this.observer&&this.editorEndOrStartElement&&this.observer.unobserve(this.editorEndOrStartElement)}setupStickyObserver(){if(window.IntersectionObserver&&this.containerBottom&&this.containerTop){const{containerTop:e,containerBottom:t}=this,s=e=>{e.forEach((e=>{const t=!this.props.isExpanded&&!e.isIntersecting;switch(e.target){case this.containerBottom:case this.containerTop:this.state.isKeylineVisible!==t&&this.setState({isKeylineVisible:t});break;case this.editorEndOrStartElement:{const t=!e.isIntersecting&&e.boundingClientRect.y>=0&&e.boundingClientRect.y>=e.rootBounds.y,s=!e.isIntersecting&&e.boundingClientRect.y<=e.rootBounds.y,n="OLDEST_FIRST"===this.props.sortOrder?t:s;this.state.shouldHide!==n&&this.setState({shouldHide:n});break}}}))},n={root:this.overflowNode,rootMargin:"0px",threshold:0}
;this.observer=new IntersectionObserver(s,n);const{observer:a}=this;a.observe(t),a.observe(e)}}setupStickyHidingObserver(){window.IntersectionObserver&&this.observer&&(()=>s.e("async-editor-view").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/comment/comment-add/add-comment-editor/index.js")))().then((()=>setTimeout((()=>{this.editorEndOrStartElement="OLDEST_FIRST"===this.props.sortOrder?document.getElementsByClassName("issue-editor-end")[0]:document.getElementsByClassName("issue-editor-start")[1],this.editorEndOrStartElement&&this.observer&&this.observer.observe(this.editorEndOrStartElement)}))))}removeStickyHidingObserver(){window.IntersectionObserver&&this.observer&&this.editorEndOrStartElement&&this.observer.unobserve(this.editorEndOrStartElement)}scrollEditorIntoView(){setTimeout((()=>{Object(Wr.b)(this.addCommentContainer,{scrollMode:"if-needed",behavior:"auto",block:"end"})}))}renderAddCommentEditor(){
const{hasDraft:e,newCommentDraft:t,isExpanded:s,intl:n,onEdit:a,onCancel:r,onPaste:o,onBlur:c,isServiceDesk:l,isLoading:u,editorSecondaryToolbarComponents:d}=this.props,p=e&&!Object(L.g)(t)?`\u2022 ${n.formatMessage(Zr.draftPlaceholder)}`:n.formatMessage(Zr.placeholder),m=i.a.createElement(Qr,{placeholder:p,onExpanded:this.onEditorExpandedWithAnalytics}),b=i.a.createElement(Jr,{packageName:"issue",fallback:m},i.a.createElement(lo,{externalId:"issue.comment.add-form",defaultValue:t,isExpanded:s,shouldFocus:!0,collapsedPlaceholder:Object(F.isFixUnsavedCommentPlaceholderEnabled)()?p:void 0,placeholder:Object(F.isFixUnsavedCommentPlaceholderEnabled)()?n.formatMessage(Zr.placeholder):p,onExpanded:this.onEditorExpandedWithAnalytics,onChange:a,onSave:this.onSave,onPaste:o,onBlur:c,onCancel:r,isLoading:u,secondaryToolbarComponents:d}));return l?i.a.createElement(Hr.a,{isExpanded:s,onExpanded:this.onExpand,commentId:"NEW_OPTIMISTIC_COMMENT"},b):b}render(){
const{isExpanded:e,isEditorFocused:t,avatarUrl:s,sortOrder:n,isCompact:a}=this.props,r=t&&this.state.shouldHide&&!e,o="OLDEST_FIRST"!==n&&!a,c=i.a.createElement(Ur.a,null,"M"),l=i.a.createElement("strong",null,i.a.createElement(v.c,Zr.commentShortcutHintHeading)),u=()=>!e&&i.a.createElement(to,null,i.a.createElement(v.c,oo({},Zr.commentShortcutHintMessage,{values:{shortcutKey:c,proTipText:l}})));return i.a.createElement("span",{ref:this.setAddCommentContainerRef},i.a.createElement("span",{ref:this.setContainerTopRef}),i.a.createElement(ao,{isHidden:r,isKeylineVisible:this.state.isKeylineVisible,shouldApplySticky:!e,shouldApplyTopSticky:o},i.a.createElement(io,{isKeylineVisible:this.state.isKeylineVisible,sortOrder:n,shouldApplySticky:!e,shouldApplyTopSticky:o},i.a.createElement(ro,null,i.a.createElement(Fr.a,{size:"medium",src:s})),i.a.createElement(Kr.a,{innerRef:this.setEditorContainerRef,"data-test-id":"issue.activity.comment"
},this.renderAddCommentEditor(),i.a.createElement(u,null)))),i.a.createElement("span",{ref:this.setContainerBottomRef}))}}function po(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function mo(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?po(Object(s),!0).forEach((function(t){bo(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):po(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function bo(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}uo.displayName="AddCommentForm",uo.displayName="AddCommentForm",uo.defaultProps={isServiceDesk:!1,isLoading:!1,hasDraft:!1,avatarUrl:void 0,newCommentDraft:null,onExpand:c.a,
onSave:c.a,onEdit:c.a,onPaste:c.a,onBlur:c.a,onCancel:c.a};var fo=Object(qt.a)([v.i,Object(gs.a)("issueFields",{onSave:"created",onEditorExpandedWithAnalytics:"commentExpanded"}),Object(r.connect)((e=>({authorId:Object(T.a)(e),avatarUrl:Object(P.x)(e),newCommentDraft:Object(hn.j)("NEW_OPTIMISTIC_COMMENT")(e),hasDraft:Object(Er.a)(Object(vr.a)("NEW_OPTIMISTIC_COMMENT"))(e),isExpanded:Object(hn.w)(e)||null!=Object(hn.i)("NEW_OPTIMISTIC_COMMENT")(e),isServiceDesk:Object(T.s)(e),isEditorFocused:Object(gn.H)(e)||Object(hn.A)(e),isLoading:Object(T.s)(e)&&Object(hn.x)(e),shouldShowCommentVisibilitySelect:Object(hn.z)(e),visibility:Object(hn.l)("NEW_OPTIMISTIC_COMMENT")(e)||Mr.a,sortOrder:Object(Va.b)(e)})),(e=>({onExpand:()=>e(Object(Zs.c)()),onEdit:t=>e(Object(Zs.l)("NEW_OPTIMISTIC_COMMENT",t)),onVisibilityChange:t=>e(Object(Zs.m)("NEW_OPTIMISTIC_COMMENT",t)),onPaste:t=>e(Object(Zs.w)("NEW_OPTIMISTIC_COMMENT",t)),onBlur:()=>e(Object(Zs.b)()),onCancel:()=>e(Object(Zs.a)()),
getOnSave:(t,s)=>e(Object(Zs.A)(mo({id:`NEW_OPTIMISTIC_COMMENT_${(new Date).getTime()}`,createdDate:(new Date).toISOString(),isNewComment:!0},t),s))})),((e,t,s)=>mo(mo(mo(mo({},s),e),t),{},{editorSecondaryToolbarComponents:e.shouldShowCommentVisibilitySelect?[i.a.createElement(Lr.a,{key:"commentVisibilitySelect",initialValue:e.visibility,onChange:t.onVisibilityChange})]:void 0,onSave:(s,n)=>{e.shouldShowCommentVisibilitySelect&&n.update({isCommentRestricted:"public"!==e.visibility.type}),t.getOnSave({authorId:e.authorId,bodyAdf:s,bodyHtml:void 0,richContent:void 0,visibility:e.visibility},n)},onEditorExpandedWithAnalytics:s=>{t.onExpand(),Object(Wa.b)(s,"addCommentEditor expanded",{hasDraft:e.hasDraft})}})))])(Object(ps.a)(uo)),go=s("./src/packages/issue/issue-view/src/activity/common/styles/index.js"),ho=s("./src/packages/issue/issue-view/src/activity/common/component/feed-skeleton/view.js");const yo=Y.default.div([""]);var Oo=e=>{
const{list:t,loadingStage:s,canAddComments:n,numPrevCommentsToLoad:r,numNextCommentsToLoad:o,selectedSortOrder:c}=e,[,{register:l}]=Object(Ar.b)(),u=Object(a.useCallback)((e=>{l("PERMALINK",e)}),[l]);if(Object(F.isActivitySortRevisionEnabled)()){const e=r>0;if("LOADING"===s||"SAVE_COMMENT_LOADING"===s&&e)return i.a.createElement(go.d,null,i.a.createElement(ho.a,null))}else{const e="NEWEST_FIRST"===c&&r>0||"OLDEST_FIRST"===c&&o>0;if("LOADING"===s||"SAVE_COMMENT_LOADING"===s&&e)return i.a.createElement(go.d,null,i.a.createElement(ho.a,null))}return i.a.createElement("span",null,i.a.createElement(Dr.a,{name:"PERMALINK"},i.a.createElement(yo,{innerRef:u})," "),n&&"NEWEST_FIRST"===c&&i.a.createElement(fo,null),t,n&&"OLDEST_FIRST"===c&&i.a.createElement(fo,null))},jo=s("./src/packages/issue/issue-view/src/activity/common/component/load-more-button/index.js");const vo="jira.fe.issue.activity.comments.time-to.render-load-more",Eo=Y.default.div(["margin:"," 0 ","px 0;"],Qn,1.5*Q.e)
;class ko extends a.Component{constructor(...e){super(...e),this.state={loadMoreButtonTypeClicked:void 0},this.onLoadOlderButtonClick=(e,t)=>{const{fetchMoreOlderComments:s}=this.props;Object(Wa.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_OLDER_BUTTON"}),Object(or.c)().cancel({key:vo},!0),Object(or.c)().markStartOfInteraction({key:vo}),this.setState({loadMoreButtonTypeClicked:"LOAD_OLDER_BUTTON"}),s()},this.onLoadNewerButtonClick=(e,t)=>{const{fetchMoreNewerComments:s}=this.props;Object(Wa.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_NEWER_BUTTON"}),Object(or.c)().cancel({key:vo},!0),Object(or.c)().markStartOfInteraction({key:vo}),this.setState({loadMoreButtonTypeClicked:"LOAD_NEWER_BUTTON"}),s()}}componentDidMount(){const{fetchCommentVisibilities:e}=this.props;e&&e()}UNSAFE_componentWillReceiveProps(e){e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&(0===e.startIndex?e.fetchMoreOlderComments():e.fetchMoreNewerComments()),
e.isLoadingMoreComments||this.setState({loadMoreButtonTypeClicked:void 0}),this.props.isLoadingMoreComments&&!e.isLoadingMoreComments&&setTimeout((()=>{Object(or.c)().markTimeToFinishTask({key:vo})}))}renderLoadOlderButton(e){const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadOlderButtonClick:n}=this,a="LOAD_OLDER_BUTTON"===s&&t;return i.a.createElement(jo.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},e<100?i.a.createElement(v.c,{id:"issue.comments-view-sorted-older-remaining-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 older comment} other {{numberToLoad} remaining older comments}}",values:{numberToLoad:e}}):i.a.createElement(v.c,{id:"issue.comments-view-sorted-older-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 older comment} other {{numberToLoad} older comments}}",values:{numberToLoad:e}}))}renderLoadNewerButton(e){
const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadNewerButtonClick:n}=this,a="LOAD_NEWER_BUTTON"===s&&t;return i.a.createElement(jo.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},e<100?i.a.createElement(v.c,{id:"issue.comments-view-sorted-newer-remaining-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 newer comment} other {{numberToLoad} remaining newer comments}}",values:{numberToLoad:e}}):i.a.createElement(v.c,{id:"issue.comments-view-sorted-newer-comments-text",defaultMessage:"View {numberToLoad, plural, one {1 newer comment} other {{numberToLoad} newer comments}}",values:{numberToLoad:e}}))}render(){const{commentIds:e,canAddComments:t,totalComments:s,loadedComments:n,fullIssueUrl:a,startIndex:r,loadingStage:o,selectedSortOrder:c}=this.props;if(!e.length&&!t)return null
;const{numPrevCommentsToLoad:l,numNextCommentsToLoad:u}=Object(br.a)(s,n,r),{hasPermalink:d,permalinkId:p}=Object(Ka.a)("Comments"),m=e.length?i.a.createElement(i.a.Fragment,null,"NEWEST_FIRST"===c&&this.renderLoadNewerButton(l),"OLDEST_FIRST"===c&&this.renderLoadOlderButton(l),i.a.createElement(Eo,{"data-test-id":"issue.activity.comments-list"},e.map((e=>i.a.createElement(xr,{key:e,commentId:e,fullIssueUrl:a,isHighlighted:d&&e===p})))),"NEWEST_FIRST"===c&&this.renderLoadOlderButton(u),"OLDEST_FIRST"===c&&this.renderLoadNewerButton(u)):null,b=e.length?i.a.createElement(i.a.Fragment,null,"NEWEST_FIRST"===c&&this.renderLoadNewerButton(l),"OLDEST_FIRST"===c&&this.renderLoadOlderButton(u),i.a.createElement(Eo,{"data-test-id":"issue.activity.comments-list"},e.map((e=>i.a.createElement(xr,{key:e,commentId:e,fullIssueUrl:a,isHighlighted:d&&e===p})))),"NEWEST_FIRST"===c&&this.renderLoadOlderButton(u),"OLDEST_FIRST"===c&&this.renderLoadNewerButton(l)):null;return i.a.createElement(Ha.a,{
sourceType:$a.f,sourceName:"commentsActivityFeed"},i.a.createElement(Oo,{loadingStage:o,canAddComments:t,list:Object(F.isActivitySortRevisionEnabled)()?b:m,numPrevCommentsToLoad:l,numNextCommentsToLoad:u,selectedSortOrder:c}))}}ko.displayName="Comments",ko.displayName="Comments",ko.defaultProps={canAddComments:!1};const wo=Object(r.connect)((e=>({commentIds:Object(hn.I)(e),canAddComments:Object(hn.b)(e),totalComments:Object(hn.K)(e),startIndex:Object(hn.J)(e),loadedComments:Object(hn.F)(e),isLoadingMoreComments:Object(hn.E)(e),baseUrl:Object(T.f)(e),issueKey:Object(T.x)(e),shouldFetchCommentVisibilities:Object(hn.z)(e),fullIssueUrl:Object(fr.b)(e),loadingStage:Object(hn.G)(e),selectedSortOrder:Object(Va.b)(e)})),(e=>({fetchMoreOlderComments:()=>{e(Object(Zs.s)())},fetchMoreNewerComments:()=>{e(Object(Zs.r)())}})))(mr(ko)),So=Object(k.b)("comment")(Object(f.a)()(wo));var Co=()=>i.a.createElement(R.a,{id:"issue.issue-view.activity.comments"
},i.a.createElement(So,null)),Io=s("./node_modules/lodash/get.js"),To=s.n(Io);const Po=Object(fn.createSelector)(Object(gn.q)("servicedesk-approvals"),(e=>e&&e.value&&e.value.completedApprovals||[])),_o=(e,t)=>(e.sort(((e,s)=>"OLDEST_FIRST"===t?e.timestamp-s.timestamp:s.timestamp-e.timestamp)),e),xo=Object(fn.createSelector)(hn.a,hn.I,Va.b,hn.K,hn.F,hn.J,Po,((e,t,s,n,a,i,r)=>{const o=[];Object.keys(e).filter((e=>t.includes(e))).forEach((t=>{const s=e[t],n={comment:s,timestamp:new Date(s.createdDate).getTime(),type:"COMMENT"};o.push(n)})),r&&r.forEach((e=>{const t={approval:e,timestamp:To()(e,"completedDate.epochMillis"),type:"APPROVAL"};o.push(t)})),Object(F.isActivitySortRevisionEnabled)()?o.sort(((e,t)=>e.timestamp-t.timestamp)):o.sort(((e,t)=>"OLDEST_FIRST"===s?e.timestamp-t.timestamp:t.timestamp-e.timestamp));let c=o.slice();const l=a+i;return i&&n>a&&c[c.length-1]&&"APPROVAL"===c[c.length-1].type&&(c=c.slice(0,c.map((e=>e.type)).lastIndexOf("COMMENT")+1)),
n>l&&c[0]&&"APPROVAL"===c[0].type?(c=c.slice(c.map((e=>e.type)).indexOf("COMMENT")),Object(F.isActivitySortRevisionEnabled)()?_o(c,s):c):Object(F.isActivitySortRevisionEnabled)()?_o(c,s):c}));var Do=s("./node_modules/@atlaskit/logo/dist/es2019/JiraServiceManagementLogo/Icon.js"),Ao=s("./src/packages/servicedesk/approval-decision/src/ui/index.js"),Lo=Object(v.h)({approvalDecisionIconLabel:{id:"issue-view.activity.servicedesk.comments.approval-decision.approval-decision-icon-label",defaultMessage:"Jira Service Management icon"}});const Mo=e=>{const{approval:t,intl:s}=e;if(!t)return null;const n=t.completedDate||t.createdDate||{},a=new Date(n.epochMillis).toJSON();return i.a.createElement(Ao.a,{icon:i.a.createElement(Do.a,{size:"small",label:s.formatMessage(Lo.approvalDecisionIconLabel)}),finalDecision:t.finalDecision,status:t.status,time:a,approvers:t.approvers,timeZone:Object(F.removeTimeZoneFromIssueUser)()?void 0:e.timeZone})};Mo.displayName="ServicedeskApprovalDecision"
;var Ro=Object(v.i)(Mo);const No="jira.fe.issue.activity.jsd-comments.time-to.render-load-more",Fo=Y.default.div(["margin:"," 0 ","px 0;"],Qn,1.5*Q.e);class Uo extends a.Component{constructor(...e){super(...e),this.state={loadMoreButtonTypeClicked:void 0},this.onLoadOlderButtonClick=(e,t)=>{const{fetchMoreOlderComments:s}=this.props;Object(Wa.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_OLDER_BUTTON"}),Object(or.c)().cancel({key:No},!0),Object(or.c)().markStartOfInteraction({key:No}),this.setState({loadMoreButtonTypeClicked:"LOAD_OLDER_BUTTON"}),s()},this.onLoadNewerButtonClick=(e,t)=>{const{fetchMoreNewerComments:s}=this.props;Object(Wa.h)(t,"loadMoreButtonClicked",{loadMoreButtonType:"LOAD_NEWER_BUTTON"}),Object(or.c)().cancel({key:No},!0),Object(or.c)().markStartOfInteraction({key:No}),this.setState({loadMoreButtonTypeClicked:"LOAD_NEWER_BUTTON"}),s()},this.renderJsdActivityItems=e=>{
const{timeZone:t,fullIssueUrl:s}=this.props,{hasPermalink:n,permalinkId:a}=Object(Ka.a)("Comments");return i.a.createElement(Fo,{"data-test-id":"issue.issue-view.activity.servicedesk.jsd-activity-items-list"},e.map((e=>{switch(e.type){case"COMMENT":return e.comment&&i.a.createElement(xr,{key:e.comment.id,commentId:e.comment.id,fullIssueUrl:s,isHighlighted:n&&e.comment.id===a});case"APPROVAL":return e.approval&&i.a.createElement(Ro,{key:e.approval.id,approval:e.approval,timeZone:Object(F.removeTimeZoneFromIssueUser)()?void 0:t});default:return null}})))}}UNSAFE_componentWillReceiveProps(e){e.loadedComments!==this.props.loadedComments&&0===e.loadedComments&&e.totalComments>0&&(0===e.startIndex?e.fetchMoreOlderComments():e.fetchMoreNewerComments()),e.isLoadingMoreComments||this.setState({loadMoreButtonTypeClicked:void 0}),this.props.isLoadingMoreComments&&!e.isLoadingMoreComments&&setTimeout((()=>{Object(or.c)().markTimeToFinishTask({key:No})}))}renderLoadMoreOlderButton(e){
const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadOlderButtonClick:n}=this,a="LOAD_OLDER_BUTTON"===s&&t;return i.a.createElement(jo.a,{onClick:n,numberToLoad:e,isDisabled:t,isLoading:a},i.a.createElement("div",{"data-test-id":"issue.issue-view.activity.servicedesk.comments-view.view-older-comments-button"},e<100?i.a.createElement(v.c,{id:"issue.comments-view-sorted-older-remaining-comments-text",defaultMessage:"View {numComments, plural, one {1 older comment} other {{numComments} remaining older comments}}",values:{numComments:e}}):i.a.createElement(v.c,{id:"issue.comments-view-older-comments-text",defaultMessage:"View {numComments, plural, one {1 older comment} other {{numComments} older comments}}",values:{numComments:e}})))}renderLoadMoreNewerButton(e){const{isLoadingMoreComments:t}=this.props,{loadMoreButtonTypeClicked:s}=this.state,{onLoadNewerButtonClick:n}=this,a="LOAD_NEWER_BUTTON"===s&&t;return i.a.createElement(jo.a,{onClick:n,
numberToLoad:e,isDisabled:t,isLoading:a},e<100?i.a.createElement(v.c,{id:"issue.comments-view-sorted-newer-remaining-comments-text",defaultMessage:"View {numComments, plural, one {1 newer comment} other {{numComments} remaining newer comments}}",values:{numComments:e}}):i.a.createElement(v.c,{id:"issue.comments-view-newer-comments-text",defaultMessage:"View {numComments, plural, one {1 newer comment} other {{numComments} newer comments}}",values:{numComments:e}}))}render(){const{canAddComments:e,jsdActivityItems:t,startIndex:s,totalComments:n,loadedComments:a,totalApprovalDecisionsItems:r,loadingStage:o,selectedSortOrder:c}=this.props;if(!t.length&&!e)return null
;const{numPrevActivityItemsToLoad:l,numNextActivityItemsToLoad:u}=Object(F.isActivitySortRevisionEnabled)()?Object(br.b)(n,a,s,t,r):Object(br.c)(n,a,s,t,r),d=t.length?i.a.createElement(i.a.Fragment,null,"NEWEST_FIRST"===c&&this.renderLoadMoreNewerButton(l),"OLDEST_FIRST"===c&&this.renderLoadMoreOlderButton(l),this.renderJsdActivityItems(t),"NEWEST_FIRST"===c&&this.renderLoadMoreOlderButton(u),"OLDEST_FIRST"===c&&this.renderLoadMoreNewerButton(u)):null,p=t.length?i.a.createElement(i.a.Fragment,null,"NEWEST_FIRST"===c&&this.renderLoadMoreNewerButton(l),"OLDEST_FIRST"===c&&this.renderLoadMoreOlderButton(u),this.renderJsdActivityItems(t),"NEWEST_FIRST"===c&&this.renderLoadMoreOlderButton(u),"OLDEST_FIRST"===c&&this.renderLoadMoreNewerButton(l)):null;return i.a.createElement(Ha.a,{sourceType:$a.f,sourceName:"jsdCommentsActivityFeed"},i.a.createElement(Oo,{loadingStage:o,canAddComments:e,list:Object(F.isActivitySortRevisionEnabled)()?p:d,numPrevCommentsToLoad:l,numNextCommentsToLoad:u,
selectedSortOrder:c}))}}Uo.displayName="ServicedeskComments",Uo.displayName="ServicedeskComments",Uo.defaultProps={canAddComments:!1};const Vo=Object(r.connect)((e=>({canAddComments:Object(hn.b)(e),totalComments:Object(hn.K)(e),startIndex:Object(hn.J)(e),loadedComments:Object(hn.F)(e),isLoadingMoreComments:Object(hn.E)(e),timeZone:Object(F.removeTimeZoneFromIssueUser)()?void 0:Object(P.z)(e),jsdActivityItems:xo(e),totalApprovalDecisionsItems:Po(e),fullIssueUrl:Object(fr.b)(e),loadingStage:Object(hn.G)(e),selectedSortOrder:Object(Va.b)(e)})),(e=>({fetchMoreOlderComments:()=>{e(Object(Zs.s)())},fetchMoreNewerComments:()=>{e(Object(Zs.r)())}})))(Uo),Ko=Object(k.b)("ServicedeskComments")(Vo);var Wo=()=>i.a.createElement(R.a,{id:"issue.issue-view.activity.servicedesk-comments"},i.a.createElement(Ko,null)),Bo=s("./src/packages/issue/issue-view/src/ecosystem/forge/forge-extensions-selector.js"),Ho=s("./src/packages/forge/forge-ui-async/src/ui/issue-activity/async.js")
;const $o=Y.default.div(["margin-top:",";"],Qn),Go=({source:e,extension:t,extensionData:s})=>{const n=Object(a.useMemo)((()=>({source:e})),[e]);return i.a.createElement(_i.a,{attributes:n,shouldFireScreenEvent:!0},i.a.createElement($o,null,i.a.createElement(Ho.a,{extension:t,extensionData:s,analyticsAttributes:n})))};Go.displayName="ForgeIssueActivity";var qo=Go;const zo=()=>Object(xn.b)("issue.details.timezone-refactoring",!1),Yo=e=>t=>s=>i.a.createElement(R.a,{id:e,packageName:"issue"},i.a.createElement(re.a,{fallback:i.a.createElement(go.d,null,i.a.createElement(ho.a,null))},i.a.createElement(t,s))),Qo=Yo("activity-feed-all-activity")(Object(re.f)((()=>s.e("async-activity-feed-item-all-activity").then(s.bind(null,"./src/packages/issue/issue-actions/issue-all-activity/src/index.js"))),{moduleId:"./src/packages/issue/issue-actions/issue-all-activity/src/index.js"}));Qo.displayName="AllActivity"
;const Jo=Yo("activity-feed-item-history")(Object(re.f)((()=>s.e("async-activity-feed-item-history").then(s.bind(null,"./src/packages/issue/issue-actions/issue-history/src/index.js"))),{moduleId:"./src/packages/issue/issue-actions/issue-history/src/index.js"}));Jo.displayName="History";const Zo=Yo("activity-feed-item-worklog")(Object(re.f)((()=>s.e("async-activity-feed-item-worklog").then(s.bind(null,"./src/packages/issue/issue-view/src/activity/worklog/index.js"))),{moduleId:"./src/packages/issue/issue-view/src/activity/worklog/index.js"}));Zo.displayName="Worklog";const Xo=Yo("activity-feed-item-polaris-insights")(Object(re.f)((()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("vendor~f9ca8911"),s.e("async-activity-feed-item-polaris-insights")]).then(s.bind(null,"./src/packages/polaris/insights/src/index.js"))),{moduleId:"./src/packages/polaris/insights/src/index.js"}));Xo.displayName="PolarisInsights"
;const ec=({selectedItem:e,baseUrl:t,issueKey:s,timeZone:n,selectedSortOrder:a,extensionData:r,source:o,mediaContext:c})=>{if(!e)return null;switch(e.type){case"AllActivity":return Object(F.isAllActivityEnabled)()?i.a.createElement(Qo,{sortOrder:a,timeZone:zo()?void 0:n,mediaContext:c}):null;case"JSDComments":return i.a.createElement(Wo,null);case"Comments":return i.a.createElement(Co,null);case"PolarisInsights":return i.a.createElement(Xo,{issueKey:Object(rr.l)(s)});case Fa:return i.a.createElement(ta,{appKey:e.appKey,moduleKey:e.moduleKey,options:e.options,appName:e.name});case"FORGE_ENTITY_TYPE":return i.a.createElement(qo,{key:e.extension.id,source:o,extensionData:r,extension:e.extension});case"History":return i.a.createElement(Jo,{baseUrl:Object(rr.b)(t),issueKey:Object(rr.l)(s),timeZone:n,sortOrder:a});case"Worklog":return i.a.createElement(Zo,{timeZone:n});default:return null}},tc=Object(qt.a)([Object(r.connect)((e=>({baseUrl:Object(T.f)(e),issueKey:Object(T.x)(e),
timeZone:zo()?void 0:Object(P.z)(e),extensionData:Object(Bo.h)(e),source:Object(T.b)(e)})),{})])(ec),sc=Object(r.connect)((e=>({baseUrl:Object(T.f)(e),issueKey:Object(T.x)(e),timeZone:zo()?void 0:Object(P.z)(e),extensionData:Object(Bo.h)(e),source:Object(T.b)(e),mediaContext:Object(_.a)(e)})),{})(ec);var nc=Object(ir.a)(F.isAllActivityEnabled,sc,tc);function ac(){return(ac=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ic(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function rc(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function oc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?rc(Object(s),!0).forEach((function(t){cc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function cc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const lc=["AllActivity","Comments","JSDComments","History","Worklog"];class uc extends a.Component{constructor(...e){super(...e),this.getAnalyticsData=e=>{switch(e.type){case Na:return{extensionId:e.extension.id};case Fa:return Object(Mn.a)(e.appKey,e.moduleKey);default:return{}}},
this.getEcosystemActivity=()=>this.props.ecosystemModules.map((e=>{switch(e.type){case Na:return oc({key:Object(La.e)(e.appKey,e.moduleKey)},e);case Fa:return oc({key:`${e.moduleKey}${e.appKey}`},e);default:return O.a.safeErrorWithoutCustomerData("issue.issue-actions.activity-feed","Tried to show ecosystem activity with other type than connect or forge"),null}})).filter(Boolean),this.getAllActivity=()=>{const{intl:e}=this.props;return Object(F.isAllActivityEnabled)()?[{key:"AllActivity",type:"AllActivity",name:e.formatMessage(qa.a.allActivity)}]:[]},this.getJSDCommentActivity=()=>{const{commentIds:e,canAddComments:t,intl:s}=this.props;return e.length||t?[{key:"JSDComments",type:"JSDComments",name:s.formatMessage(qa.a.comments)}]:[]},this.getCommentActivity=()=>{const{commentIds:e,canAddComments:t,intl:s}=this.props;return e.length||t?[{key:"Comments",type:"Comments",name:s.formatMessage(qa.a.comments)}]:[]},this.getHistoryActivity=()=>[{key:"History",type:"History",
name:this.props.intl.formatMessage(qa.a.history)}],this.getWorklogActivity=()=>this.props.shouldShowWorklog?[{key:"Worklog",type:"Worklog",name:this.props.intl.formatMessage(qa.a.worklog)}]:[],this.getPolarisInsights=()=>this.props.isPolarisProject?[{key:"PolarisInsights",type:"PolarisInsights",name:this.props.intl.formatMessage(qa.a.polarisData)}]:[],this.getActivityItems=()=>{const{isServiceDesk:e}=this.props;return[...this.getAllActivity(),...e?this.getJSDCommentActivity():this.getCommentActivity(),...this.getHistoryActivity(),...this.getWorklogActivity(),...this.getPolarisInsights(),...this.getEcosystemActivity()]},this.getSelectedItem=(e=[])=>{if(this.props.selectedItem)return this.props.selectedItem;const t=Object(Ka.b)();if(t){const{permalinkType:s}=t,n=e.find((e=>e.type===s));if(n)return this.props.onInitialSelectedActivityItem(n),n}const s=Object(F.isAllActivityEnabled)()?e[1]:e[0]
;return!Object(F.isStickyCommentZIndexValueFixEnabled)()&&this.props.onInitialSelectedActivityItem(s),s},this.selectActivityItem=(e,t,s)=>{const n=[s,this.getAnalyticsData(e)];Object(Wa.h)(t,...n),this.props.onSwitchSelectedActivityItem(e)},this.selectSortOrder=(e,t,s)=>{var n;Object(Wa.h)(t,s,{selectedSortOrder:e,selectedActivityFeed:null===(n=this.props.selectedItem)||void 0===n?void 0:n.key}),this.props.onSwitchSelectedActivitySortOrder(e)},this.renderChangeboardingMount=()=>{const{permalinkType:e}=Object(Ka.b)()||{};return"Comments"===e||"Worklog"===e?i.a.createElement(Ba.a,{onMount:t=>{Object(Wa.b)(t,"Comments"===e?"permalinkWithChangeboardingModalComments mounted":"permalinkWithChangeboardingModalWorklog mounted")}}):null},this.renderActivitySortDropdown=(e,t)=>{const{selectedSortOrder:s,setActivitySortRef:n}=this.props;if(!s)return null;const a=e.length>1?Za:Xa,r=!lc.includes(t.type);return i.a.createElement(a,{innerRef:n
},Object(F.isActivitySortRevisionEnabled)()?i.a.createElement(mi,{selectedSortOrder:s,onSelectSortOrder:this.selectSortOrder,isDisabled:r}):i.a.createElement(Ii,{selectedSortOrder:s,onSelectSortOrder:this.selectSortOrder,isDisabled:r}))},this.renderActvityHeadingRow=(e,t)=>{const{intl:{formatMessage:s},setActivityItemsRef:n,shouldDisplayDropdown:a}=this.props;return e.length>1?i.a.createElement(Xa,null,i.a.createElement(ei,{innerRef:n},i.a.createElement(Ra.b,null,s(qa.a.filterBy)),i.a.createElement(Ra.d,{leftAlign:!0},a?i.a.createElement(Bi,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem}):i.a.createElement(zi,{items:e,selectedItem:t,onSelectActivityItem:this.selectActivityItem}))),this.renderActivitySortDropdown(e,t)):this.renderActivitySortDropdown(e,t)}}componentDidMount(){if(Object(F.isStickyCommentZIndexValueFixEnabled)()){const e=this.getActivityItems(),t=this.getSelectedItem(e);this.props.onInitialSelectedActivityItem(t)}}render(){
const{permalinkType:e}=Object(Ka.b)()||{};if(("Worklog"===e||!this.props.commentIds.length)&&this.props.isPreview)return i.a.createElement(Ua.a,null);const t=this.getActivityItems(),s=this.getSelectedItem(t);if(!t.length||!s)return null;const{intl:{formatMessage:n}}=this.props;return i.a.createElement(Ha.a,{sourceType:$a.f,sourceName:"activityFeed"},this.renderChangeboardingMount(),i.a.createElement(Ra.c,{leftAlign:!0},i.a.createElement(Ra.e,{"data-test-id":"issue-activity-feed.heading"},t.length>1?n(qa.a.activity):s.name)),this.renderActvityHeadingRow(t,s),!Object(F.isStickyCommentZIndexValueFixEnabled)()&&i.a.createElement(ar,null),i.a.createElement(nc,{selectedItem:s,selectedSortOrder:this.props.selectedSortOrder}))}}uc.displayName="FeedDisplay",uc.defaultProps={isServiceDesk:!1,shouldDisplayDropdown:!1,canAddComments:!1,selectedItem:null,ecosystemModules:[]},uc.displayName="FeedDisplay";const dc=e=>{
const{projectKey:t}=e,s=ic(e,["projectKey"]),n=Object(Ga.a)(t),a=Object(F.isPolarisInsightsTabEnabled)()&&n;return i.a.createElement(uc,ac({},s,{isPolarisProject:a}))};dc.displayName="FeedDisplayWrapper";var pc=Object(qt.a)([v.i,Object(r.connect)((e=>({isPreview:Object(P.s)(e),isServiceDesk:Object(T.s)(e),shouldShowWorklog:Object(x.c)(e),canAddComments:Object(hn.b)(e),commentIds:Object(hn.L)(e),ecosystemModules:Object(Rn.e)(e),selectedItem:Object(Va.a)(e),selectedSortOrder:Object(Va.b)(e),projectKey:Object(T.C)(e)})),(e=>({onSwitchSelectedActivityItem:t=>{e(Object(Ma.d)(t))},onInitialSelectedActivityItem:t=>{e(Object(Ma.c)(t))},onSwitchSelectedActivitySortOrder:t=>{e(Object(Ma.e)(t)),e(Object(Ma.f)(t))}})))])(dc);class mc extends a.Component{constructor(...e){super(...e),this.state={shouldDisplayDropdown:!1},this.componentDidMount=()=>{this.setShouldDisplayDropdown()},this.componentDidUpdate=()=>{this.setShouldDisplayDropdown()},this.setActivityItemsRef=e=>{this.activityItemsRef=e},
this.setActivitySortRef=e=>{this.activitySortRef=e},this.setShouldDisplayDropdown=()=>{const{containerWidth:e}=this.props,t=this.updateAndGetTotalWidth();if(0!==e&&0!==t){const s=e<=t+15;this.state.shouldDisplayDropdown!==s&&this.setState({shouldDisplayDropdown:s})}},this.getActivityItemsRefWidth=()=>this.activityItemsRef?this.activityItemsRef.clientWidth:0,this.getActivitySortRefWidth=()=>this.activitySortRef?this.activitySortRef.clientWidth:0,this.updateAndGetTotalWidth=()=>{const e=this.getActivityItemsRefWidth()+this.getActivitySortRefWidth();return this.totalExpandedWidth<e&&(this.totalExpandedWidth=e),this.totalExpandedWidth},this.totalExpandedWidth=0,this.activityItemsRef=void 0,this.activitySortRef=void 0}render(){const{shouldDisplayDropdown:e}=this.state;return i.a.createElement(pc,{shouldDisplayDropdown:e,setActivityItemsRef:this.setActivityItemsRef,setActivitySortRef:this.setActivitySortRef})}}mc.displayName="ActivityFeed",mc.defaultProps={containerWidth:0}
;var bc=Object(qt.a)([Aa.a])(mc),fc=s("./src/packages/issue/issue-view-layout/src/services/main.js");const gc=["JsdSections","jsd"];var hc=s("./src/packages/issue/issue-view/src/views/connect-field.js"),yc=s("./src/packages/issue/epic-color/src/common/utils.js"),Oc=s("./src/packages/issue/issue-view/src/selectors/issue-types-selector.js");const jc=Object(fn.createSelector)(Object(gn.q)("issuetype"),(e=>e&&e.value.id)),vc=Object(fn.createSelector)(Object(gn.e)("com.pyxis.greenhopper.jira:jsw-issue-color"),Object(gn.e)("com.pyxis.greenhopper.jira:gh-epic-color"),((e,t)=>e&&e.key||t&&t.key)),Ec=Object(fn.createSelector)(Object(gn.e)("com.pyxis.greenhopper.jira:gh-epic-color"),Object(gn.e)("com.pyxis.greenhopper.jira:jsw-issue-color"),((e,t)=>e||t));Object(fn.createSelector)(jc,vc,Oc.d,((e,t,s)=>{if(!s)return!1;const n=s.find((t=>t.id===e));return!(!n||!n.fields)&&t in n.fields}))
;var kc=s("./src/packages/platform/utils/fetch/src/utils/requests.js"),wc=s("./src/packages/platform/utils/xsrf-token/src/index.js"),Sc=(e,t)=>Object(kc.d)(`${e.baseUrl}/secure/AjaxIssueAction.jspa?decorator=none`,{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Object(l.stringify)({[e.fieldId]:e.value,issueId:Object(P.l)(t),skipScreenCheck:!0,atl_token:Object(wc.a)(),singleFieldEdit:!0})}),Cc=s("./node_modules/memoize-one/dist/memoize-one.esm.js"),Ic=s("./node_modules/@atlaskit/color-picker/dist/es2019/index.js"),Tc=Object(v.h)({readOnlyLabel:{id:"issue.views.issue-base.foundation.read-only-label",defaultMessage:"Read-only Color, {color} selected"},label:{id:"issue.views.issue-base.foundation.label",defaultMessage:"Edit color"},purple:{id:"issue.views.issue-base.foundation.purple",defaultMessage:"purple"},darkPurple:{id:"issue.views.issue-base.foundation.dark-purple",defaultMessage:"dark purple"},blue:{id:"issue.views.issue-base.foundation.blue",defaultMessage:"blue"
},darkBlue:{id:"issue.views.issue-base.foundation.dark-blue",defaultMessage:"dark blue"},green:{id:"issue.views.issue-base.foundation.green",defaultMessage:"green"},darkGreen:{id:"issue.views.issue-base.foundation.dark-green",defaultMessage:"dark green"},teal:{id:"issue.views.issue-base.foundation.teal",defaultMessage:"teal"},darkTeal:{id:"issue.views.issue-base.foundation.dark-teal",defaultMessage:"dark teal"},yellow:{id:"issue.views.issue-base.foundation.yellow",defaultMessage:"yellow"},darkYellow:{id:"issue.views.issue-base.foundation.dark-yellow",defaultMessage:"dark yellow"},orange:{id:"issue.views.issue-base.foundation.orange",defaultMessage:"orange"},darkOrange:{id:"issue.views.issue-base.foundation.dark-orange",defaultMessage:"dark orange"},grey:{id:"issue.views.issue-base.foundation.grey",defaultMessage:"grey"},darkGrey:{id:"issue.views.issue-base.foundation.dark-grey",defaultMessage:"dark grey"}});s("./node_modules/focus-visible/dist/focus-visible.js")
;const Pc=Y.default.div(["margin-left:-2px;padding-top:","px;padding-right:","px;height:","px;button:focus{box-shadow:none;}"],Q.e,Q.e,4*Q.e),_c=Y.default.div(["position:absolute;top:1px;left:1px;width:","px;height:","px;border-radius:3px;background:",";"],3*Q.e,3*Q.e,(e=>e.selectedColor)),xc=Y.default.button(["display:inline-block;position:relative;width:","px;height:","px;border:2px solid transparent;box-sizing:border-box;border-radius:6px;border-color:transparent;background-color:transparent;padding:0;outline:none;transition:box-shadow 0.2s cubic-bezier(0.47,0.03,0.49,1.38);&:focus.focus-visible{border-color:",";}"],3.75*Q.e,3.75*Q.e,Re.a.B100);class Dc extends a.Component{constructor(...e){super(...e),this.onChange=e=>{const{onChange:t,onConfirm:s}=this.props;t(e),s()},this.generatePalette=Object(Cc.a)(((e,t)=>e.map((({value:e,label:s})=>({value:e,label:t.formatMessage(Tc[s])})))))}render(){const{value:e,intl:t,isEditable:s}=this.props,n=Object(yc.g)();return i.a.createElement(Pc,{
"data-test-id":"issue.views.issue-base.foundation.color.color-picker-wrapper"},s?i.a.createElement(Ic.c,{label:t.formatMessage(Tc.label),popperProps:{positionFixed:!0,modifiers:{offset:{offset:"-10 5"}}},cols:n.length/2,selectedColor:e,palette:this.generatePalette(n,t),onChange:this.onChange}):i.a.createElement(Ac,{intl:t,value:e,palette:this.generatePalette(n,t)}))}}Dc.displayName="UnsafeColorPicker",Dc.displayName="ColorPicker";const Ac=e=>{const t=e.palette.filter((t=>t.value===e.value))[0].label,s=e.intl.formatMessage(Tc.readOnlyLabel,{color:t});return i.a.createElement(xc,{"aria-label":s},i.a.createElement(_c,{selectedColor:e.value}))};function Lc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Mc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?Lc(Object(s),!0).forEach((function(t){Rc(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Lc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Rc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}Ac.displayName="ReadOnlyColorPicker";const Nc=(e,t)=>{const s=Object(gn.q)(t.fieldId)(e),n=!!s&&"com.pyxis.greenhopper.jira:gh-epic-color"===s.schema.custom;let a={shouldDiscardChangeOnFailure:!0,onSaveFailureFlagType:Ss.u};return n&&(a=Mc({saveField:Sc},a)),Mc(Mc({},a),{},{fieldId:t.fieldId,transformFromStateValue:e=>((e,t=!1)=>t?Object(yc.h)(Object(yc.e)(e)):Object(yc.h)(Object(yc.j)(e)))(e,n),transformToStateValue:e=>((e,t=!1)=>t?Object(yc.d)(Object(yc.f)(e)):Object(yc.i)(Object(yc.f)(e)))(e,n)})},Fc=Object(qt.a)([v.i,Object(hc.a)(((e,t)=>Nc(e,t)))])(Dc);var Uc=Object(qt.a)([Object(r.connect)((e=>({
field:Ec(e)})),{})])((e=>e.field?i.a.createElement(Fc,{fieldId:e.field.key}):null)),Vc=s("./node_modules/@atlaskit/analytics-next--current/dist/esm/UIAnalyticsEvent.js"),Kc=s("./node_modules/@atlaskit/inline-edit--current/dist/esm/InlineEditStateless.js"),Wc=s("./src/packages/platform/utils/constants/src/analytics-sources.js"),Bc=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/inline-edit/messages.js"),Hc=s("./src/packages/platform/utils/fetch/src/utils/errors.js"),$c=s("./src/packages/issue/fields/components/error-flag/src/main.js");function Gc(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function qc(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Gc(Object(s),!0).forEach((function(t){zc(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Gc(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function zc(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Yc={action:"confirmed",actionSubject:"inlineEdit",attributes:{componentName:"inlineEdit"}},Qc=qc(qc({},Yc),{},{action:"cancelled"}),Jc=()=>Object(xn.b)("issue.details.inline-issue-cards-summary-extraction",!1);var Zc=s("./src/packages/issue/fields/summary/src/services/index.js"),Xc=s("./node_modules/@atlaskit/icon/glyph/warning.js"),el=s.n(Xc),tl=s("./node_modules/@atlaskit/inline-dialog/dist/es2019/InlineDialog/index.js"),sl=s("./node_modules/@atlaskit/textfield/dist/es2019/text-field.js"),nl=s("./node_modules/@atlaskit/theme/dist/es2019/colors.js")
;const al=Y.default.div(["display:flex;flex:1 0 auto;justify-content:space-between;overflow:hidden;align-items:center;border-color:",";border-style:",";border-radius:",";border-width:",";"],(e=>e.isInvalid?Re.a.R400:null),(e=>e.isInvalid?"solid":"none"),(e=>e.isInvalid?"3px":null),(e=>e.isInvalid?"2px":null)),il=Object(a.memo)((({defaultValue:e,passedRef:t,onChange:s,isInvalid:n,invalidMessage:r})=>{const o=Object(a.useCallback)((e=>{s(e.target.value)}),[s]),[c,l]=Object(a.useState)(!1),u=Object(a.useCallback)((()=>{l(!0)}),[]),d=Object(a.useCallback)((()=>{l(!1)}),[]),p=n?i.a.createElement(el.a,{size:"medium",primaryColor:nl.yellow,label:""}):null;return i.a.createElement(i.a.Fragment,null,i.a.createElement(tl.a,{content:r,isOpen:c&&!!r,placement:"right"},i.a.createElement(al,{isInvalid:n},i.a.createElement(sl.a,{type:"text",value:null===e?"":e,onChange:o,label:"",ref:t,appearance:n?"none":"subtle",onBlur:d,onFocus:u,isCompact:!0,autoFocus:!0}),p)))}))
;var rl=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/text-area/index.js");const ol=Object(Y.css)(["@media screen and (-webkit-min-device-pixel-ratio:0){word-break:break-word;}@media screen and (-webkit-transition){word-break:break-word;}@-moz-document url-prefix(){overflow-wrap:anywhere;}"]),cl=Y.default.h1(["",";width:100%;margin:0;padding:0;color:",";",";"],Re.d.h700(),Re.a.heading,ol),ll=Object(a.memo)((({defaultValue:e,passedRef:t,onChange:s})=>i.a.createElement(cl,{innerRef:t,"data-test-id":"issue.views.issue-base.foundation.summary.heading.writeable"},i.a.createElement(rl.a,{shouldAutoFocus:!0,value:e,onChange:s}))));var ul=Object(v.h)({errorEmpty:{id:"issue-field-summary.error-empty",defaultMessage:"You must specify a summary of the issue."},errorTitle:{id:"issue-field-summary.error-title",defaultMessage:"We couldn't save the issue summary."},errorMessage:{id:"issue-field-summary.error-message",
defaultMessage:"Check your connection, then give it another try."},editButtonLabel:{id:"issue-field-summary.edit-button-label",defaultMessage:"Edit summary"},extendedEditButtonLabel:{id:"issue-field-summary.extended-edit-button-label",defaultMessage:"{inputFieldValue}- edit summary"}});const dl=Y.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),pl=Y.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:100%;"]),ml=({value:e})=>{const t=null===e?"":e.toString();return i.a.createElement(dl,null,i.a.createElement(je.a,{content:t,position:"bottom",hideTooltipOnMouseDown:!0},i.a.createElement(pl,null,t)))};ml.displayName="InlineSummaryRead";const bl=({value:e})=>{const t=null===e?"":e.toString();return i.a.createElement(cl,{"data-test-id":"issue.views.issue-base.foundation.summary.heading"},t)};bl.displayName="SummaryView";var fl=Object(a.memo)((e=>{var t
;const{onCancel:s,onEdit:n,onEscape:r,onConfirm:o,onEnter:c,onUpdate:l,readView:u,editView:d,issueKey:p,source:m,onFailure:b,onRenderSuccess:f,onEditFailure:g,appearance:h="INLINE"}=e,y=m&&m.value===Wc.a.MOBILE_ISSUE,[O,j]=Object(a.useState)(!1),[v,E]=Object(a.useState)(!1),{formatMessage:k}=Object(xe.c)(),w=v?k(ul.errorEmpty):void 0,S=Object(a.useRef)(),C=Object(a.useRef)(),[{value:I,error:T,fieldConfig:P},{saveValue:_,resetError:x}]=Object(Zc.a)({issueKey:Object(rr.l)(p),onSuccess:e=>{l&&l(e)},onFailure:e=>{e instanceof Hc.a||e instanceof TypeError||Object(Hc.c)(e)||(b&&b(e,C.current),O&&g&&g("summary",e.message))}}),D=null!==(t=null==P?void 0:P.title)&&void 0!==t?t:"",[A,L]=Object(a.useState)(I),M=!!P&&P.isEditable;Object(a.useEffect)((()=>{f&&f()}),[]),Object(a.useEffect)((()=>{C.current=I,T&&j(!0),O||L(I)}),[T,O,I]);const R=Object(a.useCallback)((e=>{A!==I?(_(A,null,e),j(!1)):j(!1),Object(Wa.h)(e)}),[_,A,I]),N=Object(a.useCallback)((e=>{x(),j(!1),L(I),Object(Wa.h)(e)
}),[x,I]),F=Object(a.useCallback)((e=>{document&&document.activeElement&&document.activeElement.blur(),E(!1),N(e),s&&s(e)}),[s,N]),U=Object(a.useCallback)((e=>{null!==A&&""!==A?(document&&document.activeElement&&document.activeElement.blur(),R(e),o&&o(e,A)):v||E(!0)}),[v,o,R,A]),V=Object(a.useCallback)((e=>{j(!0),Object(Wa.h)(e),n&&n(e)}),[n]),K=Object(a.useCallback)((e=>{x();const t=""===e?null:e.toString();null!==t&&E(!1),L(t)}),[x,L]),W=Object(a.useCallback)((e=>{N(e),r&&r(e)}),[r,N]),B=Object(a.useCallback)((e=>{R(e),c&&c(e)}),[c,R]),$=Object(a.useCallback)((()=>{const e=new Vc.a({payload:Yc});U(e)}),[U]),G=Object(a.useCallback)((e=>{e.preventDefault(),e.stopPropagation();const t=new Vc.a({payload:Qc});F(t)}),[F]),q=Object(a.useCallback)((()=>{if(!M)return;const e=Jc()&&"INLINE"===h?i.a.createElement(il,{passedRef:S,defaultValue:A,onChange:K,isInvalid:v,invalidMessage:w}):i.a.createElement(ll,{passedRef:S,defaultValue:A,onChange:K})
;return void 0!==d&&"function"==typeof d?Object(a.createElement)(d,{passedRef:S,defaultValue:A,onChange:K}):e}),[M,h,d,A,K,v,w]);if(S.current&&O&&v){const e=S.current,t=e instanceof HTMLElement?e.querySelector("textarea"):void 0,s="INLINE"===h?e:t,n=document?document.activeElement:null;s&&s!==n&&s.focus()}return i.a.createElement(H.a,{onEnter:$,onEscape:G},T&&i.a.createElement($c.a,{error:T,title:ul.errorTitle,description:ul.errorMessage}),i.a.createElement(Kc.a,{label:D,isLabelHidden:!0,defaultValue:A,readView:(()=>{const e=Jc()&&"INLINE"===h?i.a.createElement(ml,{value:I}):i.a.createElement(bl,{value:I});return void 0!==u&&"function"==typeof u?Object(a.createElement)(u,{value:I}):e})(),editView:q(),onCancel:F,onConfirm:U,onEditRequested:V,onEnter:B,onEscape:W,isFitContainerWidthReadView:!y,isEditable:M,isEditing:O,invalidMessage:w,isInvalid:v,editButtonLabel:(()=>null!==I?k(ul.extendedEditButtonLabel,{inputFieldValue:I}):k(ul.editButtonLabel))(),
confirmButtonLabel:k(Bc.a.confirmButtonLabel,{fieldName:D}),cancelButtonLabel:k(Bc.a.cancelButtonLabel,{fieldName:D}),disableEditViewFieldBase:Jc()&&"INLINE"===h}))}));var gl=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/editing/view/common/context/index.js"),hl=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/view/common/context/index.js"),yl=s("./src/packages/common-legacy-do-not-add-anything-new/src/experience-tracking/viewing/view/experience-tracker-consumer/tracker-base/view.js");function Ol(){return(Ol=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function jl(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){
var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const vl=e=>t=>{const{forField:s,issueKey:n,failureEventAttributes:r,allowList:o}=t,c=jl(t,["forField","issueKey","failureEventAttributes","allowList"]),l=Object(a.useContext)(hl.a),u=Object(a.useContext)(gl.a),d=u?u.onFailure:void 0;return null==l?i.a.createElement(e,Ol({issueKey:n,onEditFailure:d},c)):i.a.createElement(yl.a,{location:s,experienceContext:l,failureEventAttributes:null!=r?r:null,parentProvidersWhitelist:null!=o?o:null},(({onExperienceSuccess:t})=>i.a.createElement(e,Ol({onRenderSuccess:t,issueKey:n,onEditFailure:d},c))))};var El=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-save-actions.js");function kl(){return(kl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e
}).apply(this,arguments)}const wl=vl(fl),Sl=e=>{const t=Object(Us.g)(),s=Object(Us.a)();return i.a.createElement(wl,kl({forField:"summary",issueKey:t,source:s,appearance:"HEADER"},e))};Sl.displayName="ExtractedSummaryField";var Cl=Object(r.connect)(null,(e=>({onUpdate:t=>e(Object(El.g)("summary",t))})))(Sl);const Il=Y.default.div(["display:flex;flex:1 1 auto;min-width:0;width:100%;"]),Tl=Y.default.div(["display:flex;flex:1 1 auto;> div{display:flex;flex:1 1 auto;}"]);var Pl=()=>i.a.createElement(Il,null,i.a.createElement(Uc,null),i.a.createElement(Tl,{key:"SUMMARY"
},i.a.createElement(Cl,null))),_l=s("./src/packages/platform/utils/constants/src/status-categories.js"),xl=s("./src/packages/issue/fields/field-base/src/services/field-value-service/main.js"),Dl=s("./src/packages/issue/fields/resolution/src/services/main.js"),Al=s("./src/packages/issue/fields/resolution/src/main.js"),Ll=s("./src/packages/issue/workflow-transitions-services/src/main.js"),Ml=s("./src/packages/issue/issue-view/src/issue-field/state/actions/field-actions.js"),Rl=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/flagged-selector.js"),Nl=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/view-experience/index.js"),Fl=s("./src/packages/issue/issue-view/src/views/common/experience-tracking/edit-experience/index.js"),Ul=s("./src/packages/issue/fields/status/src/ui/status-view/actions/main.js");const Vl=e=>i.a.createElement(Ul.a,e);Vl.displayName="ActionsMenu";var Kl=Vl,Wl=s("./node_modules/@atlaskit/icon/glyph/flag-filled.js"),Bl=s.n(Wl)
;const Hl=25*Q.e,$l=Y.default.div(["margin-top:","px;display:inline-flex;vertical-align:baseline;margin-left:-","px;height:","px;"],Q.e/2,Q.e/4,3*Q.e),Gl=Y.default.span(["color:",";display:inline-block;overflow:hidden;line-height:","px;text-overflow:ellipsis;white-space:nowrap;max-width:","px;"],Re.a.N200,3*Q.e,Hl);class ql extends a.Component{constructor(...e){super(...e),this.state={hasOverflow:!1},this.altStatusLabel=null,this.renderAltStatus=()=>i.a.createElement(Gl,{innerRef:e=>{this.altStatusLabel=e}},this.props.name),this.renderAltStatusWithTooltip=()=>i.a.createElement(je.a,{content:this.props.name,position:"bottom"},this.renderAltStatus())}componentDidMount(){this.updateOverflow()}UNSAFE_componentWillReceiveProps(){this.setState({hasOverflow:!1})}componentDidUpdate(){this.updateOverflow()}updateOverflow(){if(!this.altStatusLabel)return!1;const e=this.altStatusLabel.clientWidth>=Hl;return e!==this.state.hasOverflow&&this.setState({hasOverflow:e}),e}render(){
return i.a.createElement($l,{onClick:this.props.onClick,"data-test-id":"issue.views.issue-base.foundation.status.alt-view"},this.props.icon,this.state.hasOverflow?this.renderAltStatusWithTooltip():this.renderAltStatus())}}ql.displayName="AltStatusField",ql.defaultProps={onClick:c.a};const zl=Object(v.h)({flagged:{id:"issue.status-field.flagged",defaultMessage:"Flagged"}}),Yl=({onClick:e})=>{const{formatMessage:t}=Object(xe.c)(),s=t(zl.flagged);return i.a.createElement(ql,{onClick:e,name:s,icon:i.a.createElement(Bl.a,{size:"medium",primaryColor:Re.a.R300,label:s})})};Yl.displayName="FlaggedField";var Ql=Object(fs.a)((e=>({onClick:()=>{e("click")}})))(Yl),Jl=s("./src/packages/issue/fields/status/src/ui/main.js");const Zl=Y.default.div([""]),Xl=e=>{const[,{register:t}]=Object(Ar.b)(),s=Object(a.useCallback)((e=>{t("status-spotlight",e)}),[t]);return i.a.createElement(Zl,{innerRef:s},i.a.createElement(Jl.a,e))};Xl.displayName="StatusWithRef";var eu=Xl;Q.e,Q.e,Q.e
;const tu=Y.default.div(["padding-bottom:","px;display:inline-flex;flex-wrap:nowrap;overflow:hidden;"],Q.e),su=Y.default.div(["display:flex;flex-wrap:wrap;padding-top:","px;padding-bottom:unset;& > *:not(:last-child){margin-right:","px;}"],1.5*Q.e,Q.e),nu=Y.default.div(["padding-right:unset;padding-bottom:","px;"],Q.e),au=({isEditable:e,isFlagged:t,onStatusChanged:s,onEditCancel:n})=>{const r=Object(Us.g)(),o=Object(Us.i)(),c=Object(Ga.k)(o),l=Object(a.useContext)(hl.a),[u]=Object(xl.b)({issueKey:r,fieldKey:"status"}),[{value:d,fieldConfig:p}]=Object(Dl.a)({issueKey:r}),m=null==d?void 0:d.name,b=Object(Ll.b)(),[,f]=Object(Ll.a)(),g=Object(a.useMemo)((()=>(e=>null==e?{name:"",id:"",statusCategory:{id:0,name:""}}:{name:e.name,id:e.id,statusCategory:{id:e.statusCategory.id,name:e.statusCategory.name}})(u)),[u]),[h]=Object(xl.b)({issueKey:r,fieldKey:"hierarchy-level-same-level"}),y=Object(F.collapsedHierarchies)()?null==h?void 0:h.level:Object(Ga.c)(o,null==h?void 0:h.id),O=(e,t,s,n)=>{
f.setTransitionInProgress(!0),Object(Wa.f)(n,"issueStatus updated",{oldValId:e.id,oldStatusCategoryId:e.statusCategory.id,oldStatusCategoryName:e.statusCategory.name,newValId:t.id,newStatusCategoryId:t.statusCategory.id,newStatusCategoryName:t.statusCategory.name,hasScreen:s.transition.hasScreen,isConditional:s.transition.isConditional,issueHierarchyLevel:y})};return Object(a.useEffect)((()=>{null==l||l.consumerCallbacks.onSuccess()}),[]),i.a.createElement(R.a,{onError:(e,t)=>{null==l||l.consumerCallbacks.onFailure("status",{errorMessage:t.message})}},i.a.createElement(su,null,i.a.createElement(nu,{"data-test-id":"issue.views.issue-base.foundation.status.status-field-wrapper"},i.a.createElement(eu,{issueKey:r,projectType:c,initialValue:g,isEditable:e,appearance:"button",onSubmit:O,onSuccess:s,onEditCancel:n,onFailure:()=>{f.setTransitionInProgress(!1)},preFetchTransitions:!0})),t&&i.a.createElement(tu,null,i.a.createElement(Ql,{externalId:"issue.status.flagged"
})),!b&&(null!=m||(null==p?void 0:p.isEditable)&&g.statusCategory.id===Object(_l.categoryIdForStatusCategory)("DONE"))&&i.a.createElement("div",{"data-test-id":"issue.views.issue-base.foundation.status.resolution"},i.a.createElement(Al.a,{issueKey:r})),!b&&i.a.createElement(tu,{"data-test-id":"issue.views.issue-base.foundation.status.actions-wrapper"},i.a.createElement(Kl,{initialStatusValue:g,onSubmit:O,onSuccess:s}))))};au.displayName="StatusView";const iu={canContainMediaContent:!1,isOptimistic:!1,isRichTextField:!1,shouldSaveDraft:!1,shouldDiscardChangeOnFailure:!1,onSaveFailureFlagType:null,onSaveSuccessFlagType:null,saveField:()=>Promise.resolve()};var ru=Object(qt.a)([Object(r.connect)((e=>({isFlagged:Object(Rl.b)(e),isEditable:Object(P.n)(e)})),(e=>({onStatusChanged:(t,s)=>{e(Object(El.e)("status",iu,t)),e(Object(El.g)("status",t,{viaDialog:s}))},onEditCancel:()=>{e(Object(Ml.c)("status",iu))}}))),Object(Nl.c)("status"),Object(Fl.b)("status")])(au)
;const ou=Y.default.div(["margin-bottom:","px;"],(()=>(()=>Object(xn.b)("issue.details.grouping.pre-early-access",!1))()?"0":2*Q.e));var cu=()=>i.a.createElement(ou,{"data-test-id":"issue.views.issue-base.context.status-and-approvals-wrapper.status-and-approval"},i.a.createElement(ru,{key:"STATUS"
})),lu=s("./src/packages/issue/issue-view-layout-templates/components/item-list/src/index.js"),uu=s("./node_modules/@atlassiansox/engagekit/dist/esm/spotlight/index.js"),du=s("./node_modules/@atlaskit/tabs/dist/es2019/components/TabItem.js"),pu=s("./node_modules/@atlaskit/tabs/dist/es2019/components/Tabs.js"),mu=s("./src/packages/issue/fields/field-base/src/services/field-config-service/main.js"),bu=s("./src/packages/issue/issue-tabs/src/services/main.js"),fu=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-background-view.js"),gu=s("./src/packages/issue/issue-view/src/common/state/selectors/get-field-type.js"),hu=s("./src/packages/platform/ui/field-config/src/index.js"),yu=s("./src/packages/global-pages/directories/common-directory-v2/src/utils/log-safe-error/index.js");var Ou=Object(v.h)({defaultTabName:{id:"issue-view-layout-templates-tab-view.default-tab-name",defaultMessage:"General"}})
;const ju=Y.default.div(["padding-top:","px;display:flex;flex-direction:column;width:100%;"],2*Q.e),vu=Y.default.div(["position:relative;margin-left:-","px;width:calc(100% + ","px);div[role='tablist']{flex-wrap:wrap;}"],Q.e,2*Q.e),Eu=Y.default.div(["position:relative;height:14px;"]),ku=Y.default.div(["position:relative;display:flex;width:","px;margin:10px ","px 9px ","px;"],10*Q.e,Q.e,Q.e),wu=Y.default.div(["overflow:hidden;text-overflow:ellipsis;"]),Su=Y.default.div(["visibility:hidden;position:absolute;z-index:-1;width:100%;"]),Cu="TemplatesTabViewOnboardingSpotlightTarget",Iu=e=>e.elementProps["aria-setsize"]>2?i.a.createElement(wu,null,i.a.createElement(je.a,{content:e.data.label,position:"bottom"},i.a.createElement(du.a,e))):i.a.createElement(wu,null,i.a.createElement(du.a,e));Iu.displayName="TooltipItem";const Tu=()=>i.a.createElement(ku,null,i.a.createElement(fu.b,null),i.a.createElement(Eu,null));Tu.displayName="SSRItem";const Pu=({tabsContent:e})=>{
const{createAnalyticsEvent:t}=Object(si.a)(),s=Object(Us.g)(),n=Object(Ga.i)(s),[r,o]=(e=>{const t=`tabs.state.${e}`,[s,n]=Object(a.useState)((()=>{try{var e;return null===(e=window.localStorage)||void 0===e?void 0:e.getItem(t)}catch(s){return}}));return Object(a.useEffect)((()=>{var e;n(null===(e=window.localStorage)||void 0===e?void 0:e.getItem(t))}),[t]),[s,e=>{try{var s;n(e),null===(s=window.localStorage)||void 0===s||s.setItem(t,e)}catch(a){Object(yu.a)(a,"issue.issue-view-layout-templates.components.tab-view","issue.templates.tab-view")}}]})(n),c=e.findIndex((e=>e&&e.id===r));return i.a.createElement(pu.a,{components:{Item:Iu},selected:c,onSelect:(s,n)=>{const a={totalTabCount:e.length,selectedTabPosition:n+1},i=t({action:"selected",actionSubject:"tab",actionSubjectId:"issueFieldTabs"});Object(Wa.h)(i,"issueFieldTabs",a),o(s.id)},tabs:e})};Pu.displayName="StaticTabs";const _u=({tabsContent:e})=>i.a.createElement(pu.a,{components:{Content:()=>null},tabs:e})
;_u.displayName="StaticTabsSpotlight";var xu=({items:e,area:t})=>{const s=Object(xe.c)(),n=e.filter((e=>"TabLayout"!==e.type)),r={label:s.formatMessage(Ou.defaultTabName),content:i.a.createElement(ju,null,i.a.createElement(lu.a,{items:n,area:t}))},o=e.filter((e=>"TabLayout"===e.type)),c=Object(Us.g)(),[{issueTabs:l}]=Object(bu.b)(c),[u]=Object(mu.c)(c),[d]=Object(xl.d)(c),p=Object(hu.Y)(),m=Object(a.useCallback)((e=>{if(!u||!u[e])return!1;const t=d&&(null===d[e]||void 0===d[e]);if(!u[e].isEditable&&t)return!1;const{custom:s,system:n,type:a}=u&&u[e].schema||{},i=null!==n?n:"",r=Object(gu.a)(s)||i||a;return void 0!==r&&Object.values(p).includes(r)}),[u,d,p]);if(0===Object.keys(l).length){const e=[r,{}];return i.a.createElement(pu.a,{components:{Item:Tu},tabs:e})}const b=o.map((({id:e})=>{const s=l[e];if(void 0!==s&&s.name&&s.items&&s.items.length>0){const e=s.items.filter((e=>m(e.id)));return e.length<1?null:{id:s.id,label:s.name,content:i.a.createElement(ju,null,i.a.createElement(lu.a,{
items:e,area:t}))}}return null})).filter((e=>null!==e)),f=n.length>0?[r,...b]:b;if(0===f.length)return null;if(1===f.length){const e=f[0];return e&&e.content}return i.a.createElement(vu,null,i.a.createElement(Su,null,i.a.createElement(Dr.a,{name:Cu},i.a.createElement(_u,{tabsContent:f}))),i.a.createElement(uu.a,{engagementId:Cu}),i.a.createElement(Ba.a,{onMount:e=>Object(Wa.b)(e,"TemplatesTabViewOnboarding mounted")}),i.a.createElement(Pu,{tabsContent:f}))};const Du=({items:e})=>e.find((({type:e})=>"TabLayout"===e))?i.a.createElement(xu,{items:e,area:"content"}):i.a.createElement(lu.a,{items:e,area:"content"});Du.displayName="ContentSectionView";const Au=()=>{const e=Object(Us.g)(),[{contentSection:t}]=Object(fc.d)(e);return i.a.createElement(Du,{items:t.items})};Au.displayName="ContentTemplate"
;var Lu=Au,Mu=s("./node_modules/lodash/uniqBy.js"),Ru=s.n(Mu),Nu=s("./src/packages/issue/fields/components/field-pin/src/utils.js"),Fu=s("./src/packages/issue/ecosystem-service/src/services/main.js"),Uu=s("./src/packages/issue/issue-view/src/ecosystem/forge/get-forge-custom-field.js"),Vu=s("./src/packages/issue/project-permissions-service/src/main.js"),Ku=s("./src/packages/issue/jira-settings-service/src/main.js"),Wu=s("./src/packages/forge/forge-ui/src/utils/conditions/index.js"),Bu=s("./src/packages/issue/forge-service/src/services/main.js"),Hu=s("./src/packages/issue/issue-view/src/configurations.js");function $u(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Gu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?$u(Object(s),!0).forEach((function(t){qu(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):$u(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function qu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const zu=(e,t)=>{const s=t[e],n=Object(Hu.n)();if(!s&&Object.keys(n).includes(e)){return((e,t)=>bs()(t,(t=>(t.schema&&t.schema.custom)===e)))(n[e],t)}return s},Yu=(e,t)=>e.filter((e=>Object(Wu.a)(e,t))),Qu=()=>{const[e]=Object(Bu.b)(),t=(()=>{const e=Object(Us.g)(),t=Object(Us.f)(),s=Object(Ga.i)(e),[n]=Object(Vu.d)(s),a=Object(Ga.k)(s),i=Object(Ga.g)(s),[r]=Object(xl.b)({issueKey:e,fieldKey:"issuetype"});return{issueId:t||null,issueKey:e,issueType:r&&r.name,projectId:i,projectKey:s,projectType:a||null,canAddComments:n.canAddComments,canAdministerJira:n.canAdministerJira,canAdministerProjects:n.canAdministerProject,canAssignIssues:n.canAssignIssues,
canBeAssignedToIssues:n.canBeAssignedToIssues,canCloneIssues:n.canCloneIssue,canCreateAttachments:n.canCreateAttachments,canCreateChildren:n.canCreateChildren,canCreateSubtasks:n.canCreateSubtask,canDeleteAllAttachments:n.canDeleteAllAttachments,canDeleteAllComments:n.canDeleteAllComments,canDeleteAllWorklogs:n.canDeleteAllWorklogs,canDeleteIssues:n.canDeleteIssue,canDeleteOwnAttachments:n.canDeleteOwnAttachments,canDeleteOwnComments:n.canDeleteOwnComments,canDeleteOwnWorklogs:n.canDeleteOwnWorklogs,canEditAllComments:n.canEditAllComments,canEditAllWorklogs:n.canEditAllWorklogs,canEditIssues:n.canEditIssues,canEditOwnComments:n.canEditOwnComments,canEditOwnWorklogs:n.canEditOwnWorklogs,canLinkIssues:n.canLinkIssues,canLogWork:n.canLogWork,canManageWatchers:n.canManageWatchers,canModifyReporters:n.canModifyReporter,canMoveIssues:n.canMoveIssue,canScheduleIssues:n.canScheduleIssues,canUseServiceManagementAgentFeatures:n.canUseServiceDeskAgentFeatures,canBrowseUsers:n.canBrowseUsers,
canViewDevTools:n.canViewDevTools,canViewWatchers:n.canViewWatchers}})();return Yu(e,t).map((e=>{const{id:t,properties:{title:s,label:n,status:a}}=e;return{id:t,type:"forgeGlance",payload:{label:n,title:s,status:a,extension:e,glanceType:"FORGE_ENTITY_TYPE",moduleKey:t,appKey:t}}}))};function Ju(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Zu(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ju(Object(s),!0).forEach((function(t){Xu(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ju(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Xu(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ed=()=>({
primaryItems:[],secondaryItems:[],ecosystemItems:[],forgeItems:[],pinnedFields:[]}),td=[{type:"PanelSectionItem",id:"devSummary"}],sd=(e=[])=>{const t=Object(Us.g)(),s=Object(Ga.i)(t),{ecosystemEnabled:n}=Object(Ga.d)(s),a=Object(Ga.e)(s),[i]=Object(Nu.e)(t),[r]=Object(Fu.b)(),[o]=Object(fc.d)(t),[c]=Object(xl.d)(t),[l]=Object(mu.c)(t),[u]=Object(Ku.c)(),[d]=Object(Vu.d)(s),p=Object(Us.a)(),m=Qu(),b=void 0!==a&&a.isSimplified,f=Object(Us.c)();if(!l)return ed();const g=(e=>Object.keys(e).reduce(((t,s)=>{const n=e[s];return[...t,...Object.keys(n).map((e=>n[e]))]}),[]).map((e=>({id:`ecosystemGlance__${e.appKey}__${e.moduleKey}`,type:"ecosystemGlance",payload:Gu(Gu({},e),{},{glanceType:"CONNECT_ENTITY_TYPE"})}))))(r),h=!0===n?m:[],y=u.isTimeTrackingEnabled&&void 0!==l.timetracking,O=(null==p?void 0:p.value)===Wc.a.MOBILE_ISSUE,j=y&&d.canLogWork&&!O,v=[...o.primaryContextSection.items,...o.secondaryContextSection.items,...b?td:[]],E=Ru()(v,"id").reduce(((t,s)=>{
if(i.includes(s.id))return Zu(Zu({},t),{},{pinnedFields:[...t.pinnedFields,s]});if(s.id===f)return Zu(Zu({},t),{},{primaryItems:[...t.primaryItems,s]});if(e.includes(s.id))return Zu(Zu({},t),{},{primaryItems:[...t.primaryItems,s]});if(Object(Uu.c)(l[s.id]))return Zu(Zu({},t),{},{primaryItems:[...t.primaryItems,s]});if(((e,t,s,n,a)=>{const i=zu(e,t),r=Object(gu.b)(i);return!Object(Nn.c)().includes(e)&&(!i||void 0===r||!(!Object(Nn.d)(s)||i.isEditable)&&"assignee"!==e&&"com.atlassian.servicedesk:vp-origin"!==r&&"com.atlassian.servicedesk.servicedesk-lingo-integration-plugin:sd-request-language"!==r&&("timetracking"!==e||Object(Nn.h)(n,a)))})(s.id,l,c[s.id],j,y))return t;const n=!!o.secondaryContextSection.items.find((e=>e.id===s.id));return Zu(Zu({},t),{},{primaryItems:n?t.primaryItems:[...t.primaryItems,s],secondaryItems:n?[...t.secondaryItems,s]:t.secondaryItems})}),ed());return E.primaryItems=(e=>{let t=!1;const s=["FieldSectionItem","PanelSectionItem"],n=["assignee","SLA_PANEL"]
;return e.map((e=>{const a=void 0!==e.type?e.type:"";return t||n.includes(e.id)||!s.includes(a)?e:(t=!0,Gu(Gu({},e),{},{globalRef:"PIN_FIELD"}))}))})([...E.primaryItems]),E.ecosystemItems=g,E.forgeItems=h,E};const nd=(e=[])=>{const t=sd(e),{pinnedFields:s,primaryItems:n,secondaryItems:i,forgeItems:r,ecosystemItems:o}=t,c=Object(Us.g)(),l=[...s,...n,...i],[u,d]=Object(a.useState)([]),[p,m]=Object(a.useState)([]),[b,f]=Object(a.useState)(s.length),[g,h]=Object(a.useState)(l.length),[y]=Object(xl.d)(c),O=()=>{const e=i.filter((e=>Object(Nn.d)(y[e.id]))),t=i.filter((e=>!Object(Nn.d)(y[e.id])));d(e),m(t)};Object(a.useEffect)((()=>{O()}),[]);b!==s.length&&(f(s.length),O());g!==l.length&&(h(l.length),O());return[{pinnedFields:s,visibleItems:[...n,...p,...r,...o],hiddenItems:u},O]}
;var ad=s("./src/packages/issue/fields/components/field-heading/src/styled.js"),id=s("./src/packages/issue/fields/components/field-pin/src/assets/pin-unfilled.js"),rd=s("./src/packages/issue/fields/components/field-pin/src/styled.js");const od=Y.default.div([""]),cd=Y.default.div(["display:flex;justify-content:space-between;background-color:",";margin-bottom:","px;padding:","px ","px ","px ","px;border:1px solid ",";border-radius:3px;&:hover ~ "," ","{visibility:visible;animation:"," 0.15s linear forwards;& ","{color:",";}}"],Re.a.P50,Q.e,Q.e,Q.e,Q.e,1.5*Q.e,Re.a.P75,od,rd.a,ad.h,rd.c,Re.a.N800),ld=Y.default.div([""," margin-top:","px;margin-bottom:","px;color:",";"],Re.d.h200,.5*Q.e,2*Q.e,Re.a.P500),ud=Y.default.div(["margin-bottom:","px;color:",";"],.5*Q.e,Re.a.P500),dd=Y.default.div(["flex-shrink:0;"]),pd=Object(Y.default)(id.a)(["vertical-align:text-bottom;"]);var md=s("./node_modules/@atlaskit/icon/glyph/editor/close.js"),bd=s.n(md);const fd=Object(v.h)({title:{
id:"issue-view-layout-templates-pinned-fields-banner.common.with-grouping.title",defaultMessage:"Your pinned fields"},description:{id:"issue-view-layout-templates-pinned-fields-banner.common.with-grouping.description",defaultMessage:"Click on the {pinnedIcon} next to a field label to start pinning."},dismissTooltip:{id:"issue-view-layout-templates-pinned-fields-banner.common.with-grouping.dismiss-tooltip",defaultMessage:"Hide message"}}),gd=Y.default.div(["display:flex;justify-content:space-between;background-color:",";margin:-8px -12px 12px;padding:8px 12px 16px;border-radius:3px;&:hover ~ div ","{visibility:visible;animation:"," 0.15s linear forwards;& ","{color:",";}}"],Re.a.P50,rd.a,ad.h,rd.c,Re.a.N800),hd=Y.default.div(["",";margin-top:6px;margin-bottom:16px;color:",";font-size:11px;"],Re.d.h300,Re.a.P500),yd=Y.default.div(["flex-shrink:0;color:",";height:","px;cursor:pointer;"],Re.a.P500,3*Q.e),Od=Y.default.div(["flex-shrink:0;color:",";"],Re.a.P500)
;var jd=s("./src/packages/issue/user-preferences-services/src/main.js"),vd=s("./node_modules/date-fns--next/differenceInDays/index.js"),Ed=s.n(vd);const kd=(e,t)=>{if(!(e=>null!=e&&!Number.isNaN(Number(e)))(e))return!1;const s=parseInt(null!==e&&e.toString(),10);return Ed()(new Date,s)>t};function wd(){return(wd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Sd=({children:e})=>{const[t,s]=(()=>{const[e,{setValue:t}]=Object(jd.b)("jira.user.issue.pinned-fields-banner.lastinteracted"),{createAnalyticsEvent:s}=Object(si.a)(),n=Object(a.useCallback)((()=>{const e=s({eventName:"pinnedFieldsBanner closed",action:"clicked",actionSubject:"button",actionSubjectId:"pinnedFieldsBanner"});Object(Wa.h)(e,"pinnedFieldsBannerDismissSectionMessage"),t("jira.user.issue.pinned-fields-banner.user_hidden_action")}),[s,t]),i=Object(a.useCallback)((()=>{const e=s({
eventName:"pinnedFieldsBanner viewed",action:"viewed",actionSubject:"banner",actionSubjectId:"pinnedFieldsBannerViewed"});Object(Wa.h)(e,"pinnedFieldsBannerDismissSectionMessage")}),[s]),r=!(kd(e,7)||"jira.user.issue.pinned-fields-banner.user_hidden_action"===e);return Object(a.useEffect)((()=>{null===e&&t(Date.now().toString()),r&&i()}),[]),[r,n]})();return t?e({onClick:s}):null},Cd=()=>{const{formatMessage:e}=Object(xe.c)(),t=e(fd.dismissTooltip);return i.a.createElement(Sd,null,(({onClick:s})=>i.a.createElement(cd,null,i.a.createElement("div",null,i.a.createElement(ld,null,e(fd.title)),i.a.createElement(ud,null,i.a.createElement(v.c,wd({},fd.description,{values:{pinnedIcon:i.a.createElement(pd,null)}})))),i.a.createElement(dd,null,i.a.createElement(je.a,{content:t},i.a.createElement(G.a,{spacing:"none",appearance:"subtle",onClick:s,iconBefore:i.a.createElement(bd.a,{label:t})}))))))};Cd.displayName="PinnedFieldsBanner";const Id=()=>{
const{formatMessage:e}=Object(xe.c)(),t=e(fd.dismissTooltip);return i.a.createElement(Sd,null,(({onClick:s})=>i.a.createElement(gd,null,i.a.createElement("div",null,i.a.createElement(hd,null,e(fd.title)),i.a.createElement(Od,null,i.a.createElement(v.c,wd({},fd.description,{values:{pinnedIcon:i.a.createElement(pd,null)}})))),i.a.createElement(yd,{onClick:s},i.a.createElement(je.a,{content:t},i.a.createElement(bd.a,{label:t}))))))};Id.displayName="PinnedFieldsBannerWithoutGrouping";var Td=Object(v.h)({header:{id:"issue.views.issue-base.context.context-items.pinned-fields-box.header",defaultMessage:"Your pinned fields"}})
;const Pd=Y.default.div(["margin:-8px -","px ","px;padding:","px ","px 0px;border-radius:3px;display:flex;flex-direction:column;background:",";&:empty{display:none;}&::before{",";content:'","';margin-top:","px;margin-bottom:","px;text-transform:uppercase;font-size:11px;}"],1.5*Q.e,1.5*Q.e,1.25*Q.e,1.5*Q.e,Re.a.N20,Re.d.h200(),(e=>e.header),Q.e/2,1.5*Q.e),_d=({children:e})=>{const t=Object(xe.c)(),{formatMessage:s}=t;return i.a.createElement(Pd,{header:s(Td.header),"data-test-id":"issue.views.issue-base.context.context-items.pinned-fields-box.pinned-items"},e)};_d.displayName="PinnedFieldsBox";var xd=_d;const Dd=()=>Object(xn.b)("issue.details.grouping.pre-early-access",!1),Ad=()=>Object(xn.b)("issue.details.pinned-fields-click-through-banner",!1)
;var Ld=s("./node_modules/@atlaskit/icon/glyph/chevron-down.js"),Md=s.n(Ld),Rd=s("./node_modules/@atlaskit/icon/glyph/chevron-up.js"),Nd=s.n(Rd),Fd=s("./node_modules/@atlaskit/icon/glyph/settings.js"),Ud=s.n(Fd),Vd=s("./node_modules/@atlaskit/button--current/dist/es2019/components/Button.js")
;const Kd=Q.a+1,Wd=Y.default.div(["box-sizing:border-box;margin-bottom:","px;"],Q.e),Bd=Object(Y.default)(Vd.a)(["display:none !important;margin-right:","px;padding:0 !important;svg{margin-bottom:-2px;}"],Q.e),Hd=Y.default.div(["min-width:24px;margin-bottom:-3px;"]),$d=Y.default.strong(["color:",";font-size:14px;padding-right:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:60%;font-weight:600;flex-shrink:0;"],Re.a.N800,Q.e/2),Gd=Y.default.span(["color:",";font-size:12px;padding-right:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],Re.a.N90,Q.e),qd=Y.default.div(["padding:","px ","px ","px ","px;box-sizing:border-box;","{color:",";}","{margin-bottom:","px;}> div > ",":last-child{margin-bottom:0;}",""],Q.e,1.5*Q.e,Q.e,12,ad.c,Re.a.N500,ad.d,1.5*Q.e,ad.d,(({isOpen:e})=>e?Object(Y.css)(["border:1px solid ",";border-top:0;border-bottom-right-radius:","px;border-bottom-left-radius:","px;"],Re.a.N40,Kd,Kd):Object(Y.css)(["display:none;"]))),zd={
Title:$d,SubTitle:Gd,Header:Object(Y.default)(qd)(["position:relative;display:flex;padding-top:11px;padding-bottom:11px;height:48px;border-radius:","px;border:1px solid ",";align-items:center;&:hover{background:",";cursor:pointer;","{display:block !important;}}&:focus{outline:0;}&:active{background-color:",";border-color:",";",",",",svg{color:"," !important;}}",""],Kd,Re.a.N40,Re.a.N20,Bd,Re.a.B50,Re.a.B300,Gd,$d,Re.a.B300,(({isOpen:e})=>e?Object(Y.css)(["border-bottom-right-radius:0;border-bottom-left-radius:0;"]):"")),HeaderRightAligned:Y.default.div(["margin-left:auto;display:flex;"]),Body:qd,Group:Wd},Yd=({Group:e=Wd,Header:t,children:s})=>i.a.createElement(e,null,i.a.createElement(t,null),s);Yd.displayName="BaseGroup";var Qd=Yd;function Jd(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Zd(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Jd(Object(s),!0).forEach((function(t){Xd(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Jd(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Xd(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ep=e=>{const{title:t,subTitle:s,children:n,isOpen:a,onHeaderClick:r,renderHeaderActions:o,components:c}=e,l=Zd(Zd({},zd),c),{Group:u,Title:d,SubTitle:p,Header:m,Body:b,HeaderRightAligned:f}=l;return i.a.createElement(Qd,{Header:()=>i.a.createElement(m,{isOpen:a,onClick:r,tabIndex:0},i.a.createElement(d,null,t),void 0!==s&&!a&&i.a.createElement(p,null,s),"function"==typeof o&&i.a.createElement(f,null,o())),Group:u},void 0!==n&&i.a.createElement(b,{isOpen:a},n))};ep.displayName="CollapsibleGroupFactory";var tp=ep
;var sp=Object(v.h)({arrowRight:{id:"issue-view-layout-group.arrow-right",defaultMessage:"Right Arrow"},arrowDown:{id:"issue-view-layout-group.arrow-down",defaultMessage:"Down Arrow"},configure:{id:"issue-view-layout-group.configure",defaultMessage:"Configure"}});const np=({children:e,title:t,subTitle:s,onChange:n,components:r,projectKey:o,id:c,onConfigButtonClick:l,initialOpened:u})=>{const{formatMessage:d}=Object(xe.c)(),[p,m]=((e,t,s)=>{const n=((e,t)=>`group.state.${e}.${t}`)(e,t),[i,r]=Object(a.useState)((()=>{try{const e=window.localStorage.getItem(n);if("true"===e)return!0;if("false"===e)return!1;throw Error("Invalid group state value")}catch(e){return s}}));return[i,e=>{try{r(e),window.localStorage.setItem(n,e)}catch(t){}}]})(o,c,!!u),{createAnalyticsEvent:b}=Object(si.a)(),f=e=>{e.preventDefault(),e.stopPropagation(),l&&l(e)};return i.a.createElement(tp,{title:t,subTitle:s,isOpen:p,onHeaderClick:()=>{m(!p);const e=p?"closed":"opened",s=b({
eventName:`bentoCollapsibleGroup ${e}`,action:"clicked",actionSubject:"button",actionSubjectId:"bentoCollapsibleGroup"});Object(Wa.h)(s,"bentoCollapsibleGroup",{groupTitle:t,groupState:e}),"function"==typeof n&&n(!p)},components:r,renderHeaderActions:()=>i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{content:d(sp.configure)},"function"==typeof l&&i.a.createElement(Bd,{spacing:"compact",appearance:"subtle",onClick:f},i.a.createElement(Ud.a,{label:d(sp.configure),size:"small",primaryColor:Re.a.N90}))),i.a.createElement(Hd,null,p?i.a.createElement(Nd.a,{label:d(sp.arrowDown),primaryColor:Re.a.N500}):i.a.createElement(Md.a,{label:d(sp.arrowRight),primaryColor:Re.a.N500})))},e)};np.displayName="CollapsibleGroup";var ap=np;const ip=Y.default.div(["margin-bottom:","px;"],Q.e),rp=e=>e.children.length?"svg"!==e.nodeName&&"SVG"!==e.nodeName&&Array.prototype.every.call(e.children,rp):""===e.innerHTML,op=({onChange:e,children:t,subTitle:s,groupId:n,title:r,initialOpened:o})=>{
const c=Object(Us.g)(),l=Object(Ga.i)(c),[u,d]=Object(a.useState)(!1),p=Object(a.useRef)(null);return Object(a.useEffect)((()=>{null!=p&&p.current&&(rp(p.current)?u&&d(!1):!u&&d(!0))}),[p,t,u]),i.a.createElement(ip,{hidden:!u},i.a.createElement(ap,{id:n,projectKey:l,title:r,onChange:e,subTitle:s,initialOpened:o},i.a.createElement("div",{ref:p},t)))};op.displayName="ContextGroup";var cp=op,lp=Object(v.h)({showLessText:{id:"issue-view-layout-templates-views.context.visible-hidden.expander.show-less-button.show-less-text",defaultMessage:"Show less"}});function up(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?up(Object(s),!0).forEach((function(t){pp(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):up(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const mp=({onCollapse:e})=>{const t=Object(xe.c)();return i.a.createElement($i.a,{appearance:"subtle",iconBefore:i.a.createElement(Nd.a,{label:"",primaryColor:Re.a.B400,size:"large"}),alt:t.formatMessage(lp.showLessText),shouldFitContainer:!0,onClick:(t,s)=>{e(),Object(Wa.h)(s,"showLess")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-less-button.container",testId:"issue-view-layout-templates-views.ui.context.visible-hidden.ui.expander.show-less-button.container",theme:(e,t)=>{const{buttonStyles:s,spinnerStyles:n}=e(t);return{buttonStyles:dp(dp({},s),{},{color:Re.a.B400,textAlign:"left",paddingLeft:"0px","& span":{margin:0}}),
spinnerStyles:n}}},t.formatMessage(lp.showLessText))};mp.displayName="ShowLessButton";var bp=mp,fp=Object(v.h)({showMoreFields:{id:"issue-view-layout-templates-views.context.visible-hidden.expander.show-more-button.show-more-fields",defaultMessage:"{fieldCount, plural, one {Show 1 more field} other {Show {fieldCount} more fields}}"},showMoreAltText:{id:"issue-view-layout-templates-views.context.visible-hidden.expander.show-more-button.show-more-alt-text",defaultMessage:"Show more"}});const gp=Y.default.small(["display:block;margin-top:","px;margin-bottom:","px;text-overflow:ellipsis;overflow:hidden;color:",";font-size:","px;line-height:",";"],-Q.e/2,Q.e/2,Re.a.N200,1.5*Q.e,Q.e/6);function hp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function yp(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?hp(Object(s),!0).forEach((function(t){Op(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):hp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Op(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const jp=({visibleSecondaryContextItemNameList:e,fieldCount:t,onExpand:s})=>{const n=Object(xe.c)(),a=e.join(", ");return i.a.createElement(je.a,{content:a},i.a.createElement($i.a,{appearance:"subtle",iconBefore:i.a.createElement(Md.a,{label:"",primaryColor:Re.a.B400,size:"large"}),alt:n.formatMessage(fp.showMoreAltText),shouldFitContainer:!0,onClick:(e,t)=>{s(),Object(Wa.h)(t,"showMore")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-more-button.container",
testId:"issue-view-layout-templates-views.ui.context.visible-hidden.ui.expander.show-more-button.container",theme:(e,t)=>{const{buttonStyles:s,spinnerStyles:n}=e(t);return{buttonStyles:yp(yp({},s),{},{color:Re.a.B400,textAlign:"left",paddingLeft:"0px",height:"inherit","& span":{margin:0,alignSelf:"start"}}),spinnerStyles:n}}},n.formatMessage(fp.showMoreFields,{fieldCount:t}),i.a.createElement(gp,null,a)))};jp.displayName="ShowMoreButton";var vp=jp;const Ep=Y.default.div(["margin-left:","px;margin-bottom:","px;"],-Q.e,1.5*Q.e);function kp(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const wp=e=>{
let{isShowMoreExpanded:t,onCollapse:s}=e,n=kp(e,["isShowMoreExpanded","onCollapse"]);return i.a.createElement(Ep,null,t?i.a.createElement(bp,{onCollapse:s}):i.a.createElement(vp,n))};wp.displayName="ContextItemsExpander";var Sp=wp,Cp=Object(v.h)({moreFieldsText:{id:"issue-view-layout-templates-views.context.visible-hidden.more-fields-text",defaultMessage:"More fields"},pinnedFieldsText:{id:"issue-view-layout-templates-views.context.visible-hidden.pinned-fields-text",defaultMessage:"Pinned fields"},detailsText:{id:"issue-view-layout-templates-views.context.visible-hidden.details-text",defaultMessage:"Details"}});const Ip=Y.default.div(["padding-top:","px;box-shadow:inset 0 2px 0 0 ",";margin-left:","px;"],Q.e,Re.a.N30,-Q.e),Tp="SHOW_MORE";var Pp=({items:e,onToggleExpanded:t})=>{const[s,n]=Object(a.useState)(!1),{formatMessage:r}=Object(xe.c)(),o=Object(Us.g)(),[c]=Object(mu.c)(o),{createAnalyticsEvent:l}=Object(si.a)(),u=Object(a.useCallback)((()=>{t(),n(!s)
}),[s,t]),d=Ad()?od:a.Fragment;if(Object(a.useEffect)((()=>{Dd()&&Object(Wa.f)(l({action:"success"}),"onboarding initialized","bentoCollapsibleGroup")}),[]),Dd()){const s=(e,t)=>c&&c[t.id]?0===e.length?`${c[t.id].title}`:`${e}, ${c[t.id].title}`:e,n=e.hiddenItems.reduce(s,""),a=e.visibleItems.reduce(s,""),o=e.pinnedFields.reduce(s,"");return i.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items"},Ad()&&0===e.pinnedFields.length&&i.a.createElement(Cd,null),i.a.createElement(d,null,i.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},e.pinnedFields.length>=1&&i.a.createElement(cp,{title:r(Cp.pinnedFieldsText),groupId:"pinned-context-items",subTitle:o,initialOpened:!0},i.a.createElement(lu.a,{items:e.pinnedFields,area:"context"})),i.a.createElement(cp,{title:r(Cp.detailsText),groupId:"details-group",subTitle:a,initialOpened:!0},i.a.createElement(lu.a,{items:e.visibleItems,area:"context"
}))),e.hiddenItems.length>=1&&i.a.createElement(Dr.a,{name:Tp},i.a.createElement("div",{"data-test-id":"issue-opt-in-back-modal.ui.onboarding.tour.secondary-items"},i.a.createElement(cp,{title:r(Cp.moreFieldsText),groupId:"secondary-context-items",onChange:t,subTitle:n,initialOpened:!1},i.a.createElement(lu.a,{items:e.hiddenItems,area:"context"}))))))}const p=e.hiddenItems.reduce(((e,t)=>c&&c[t.id]?e.concat(c[t.id].title):e),[]);return i.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items"},Ad()&&0===e.pinnedFields.length&&i.a.createElement(Id,null),i.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},i.a.createElement(xd,null,i.a.createElement(lu.a,{items:e.pinnedFields,area:"context"})),i.a.createElement(lu.a,{items:e.visibleItems,area:"context"})),s&&i.a.createElement(lu.a,{items:e.hiddenItems,area:"context"}),e.hiddenItems.length>=1&&i.a.createElement(Dr.a,{name:Tp},i.a.createElement(Sp,{
isShowMoreExpanded:s,fieldCount:e.hiddenItems.length,visibleSecondaryContextItemNameList:p,onExpand:u,onCollapse:u})),i.a.createElement(Ip,null))};const _p=["devSummary"];var xp=()=>{const[e,t]=nd(_p);return i.a.createElement(Pp,{items:e,onToggleExpanded:t})};const Dp=Y.default.div(["display:flex;flex:1 1 auto;min-width:0;width:100%;"]),Ap=Y.default.div(["display:flex;flex:1 1 auto;> div{display:flex;flex:1 1 auto;}"]);var Lp=()=>i.a.createElement(Dp,null,i.a.createElement(Ap,{key:"SUMMARY"},i.a.createElement(Cl,null))),Mp=s("./src/packages/issue/issue-view/src/views/issue-base/context/approval/index.js");const Rp=Y.default.div([""]),Np=Y.default.div(["margin-bottom:","px;"],(()=>(()=>Object(xn.b)("issue.details.grouping.pre-early-access",!1))()?"0":2*Q.e));var Fp=()=>{const[,{register:e}]=Object(Ar.b)(),t=Object(a.useCallback)((t=>{e("status-and-approval-spotlight",t)}),[e]);return i.a.createElement(Rp,{innerRef:t},i.a.createElement(Np,{
"data-test-id":"issue.views.issue-base.context.status-and-approvals-wrapper.status-and-approval"},i.a.createElement(ru,{key:"WRAPPED_STATUS"}),i.a.createElement(Mp.b,null)))},Up=s("./src/packages/servicedesk/request-details-panel/src/index.js"),Vp=s("./src/packages/issue/issue-view-layout-templates/utils/src/index.js");function Kp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wp(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Kp(Object(s),!0).forEach((function(t){Bp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Kp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Bp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,
writable:!0}):e[t]=s,e}const Hp=["com.atlassian.jira.plugin.system.customfieldtypes:select","description","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"];var $p=()=>{const e=Object(Us.g)(),[t]=Object(fc.d)(e);let s=t.requestPortalSection.items;const[n]=Object(mu.c)(e);s=((e,t)=>e.map((e=>{const{type:s,id:n}=Object(Vp.a)(t[e.id],e);return Hp.includes(s)?Wp(Wp({},e),{},{globalRef:`global-spotlight-target-${n}`}):e})))(t.requestPortalSection.items,n);const a=[{id:"JSM_REQUEST_PANEL",type:"CustomItem",item:i.a.createElement(Up.a,{requestPanelItems:s})},...t.contentSection.items];return i.a.createElement(Du,{items:a})},Gp=Object(v.h)({slaText:{id:"issue-view-layout-templates-servicedesk.context.sla-text",defaultMessage:"SLAs"}});function qp(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zp(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qp(Object(s),!0).forEach((function(t){Yp(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qp(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Yp(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Qp=["com.atlassian.jira.plugin.system.customfieldtypes:select","description","com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"],Jp=(e,t)=>e.map((e=>{const{type:s,id:n}=Object(Vp.a)(t[e.id],e);return Qp.includes(s)?zp(zp({},e),{},{globalRef:`global-spotlight-target-${n}`}):e})),Zp=["SLA_PANEL","ASSET_ONBOARDING"];var Xp=()=>{const[e,t]=nd(Zp),{formatMessage:s}=Object(xe.c)(),n=Object(Us.g)(),a=Object(Ga.i)(n),[r]=Object(xl.b)({issueKey:n,fieldKey:"status"
}),[o]=Object(mu.c)(n),[c]=Object(xl.d)(n),l=Object(Ga.e)(a),u=((e,t)=>({hiddenItems:Jp(e.hiddenItems,t),pinnedFields:Jp(e.pinnedFields,t),visibleItems:Jp(e.visibleItems,t)}))(((e,t,s,n,a)=>{if(!e)return t;const i=t.visibleItems.find((e=>{var t;const s=n[e.id];return"com.atlassian.servicedesk:sd-request-feedback"===(null==s||null===(t=s.schema)||void 0===t?void 0:t.custom)}));if(void 0===i)return t;const r=t.visibleItems.filter((e=>{var t;const s=n[e.id];return"com.atlassian.servicedesk:sd-request-feedback"!==(null==s||null===(t=s.schema)||void 0===t?void 0:t.custom)})),o=void 0!==a[i.id]&&null!==a[i.id];return s.statusCategory.id===Object(_l.categoryIdForStatusCategory)("DONE")&&o?zp(zp({},t),{},{visibleItems:[i,...r]}):zp(zp({},t),{},{visibleItems:r})})(void 0!==l&&l.isSimplified,e,r,o,c),o);let d;if(Dd()){const e=u.visibleItems.findIndex((e=>"SLA_PANEL"===e.id)),t=-1!==e&&u.visibleItems.splice(e,1);d=!!t&&i.a.createElement(cp,{title:s(Gp.slaText),groupId:"sla-group",initialOpened:!0
},i.a.createElement(lu.a,{items:t,area:"context"}))}return i.a.createElement(i.a.Fragment,null,d,i.a.createElement(Pp,{items:u,onToggleExpanded:t}))};const em=()=>{const e=Object(Us.g)(),[t]=Object(fc.e)(e);switch(t){case gc[0]:case gc[1]:return i.a.createElement(Lp,null);default:return i.a.createElement(Pl,null)}},tm=()=>{const e=Object(Us.g)(),[t]=Object(fc.e)(e);switch(t){case gc[0]:case gc[1]:return i.a.createElement(Fp,null);default:return i.a.createElement(cu,null)}},sm=()=>{const e=Object(Us.g)(),[t]=Object(fc.e)(e);switch(t){case gc[0]:case gc[1]:return i.a.createElement($p,null);default:return i.a.createElement(Lu,null)}},nm=()=>{const e=Object(Us.g)(),[t]=Object(fc.e)(e);switch(t){case gc[0]:case gc[1]:return i.a.createElement(Xp,null);default:return i.a.createElement(xp,null)}}
;var am=s("./src/packages/issue/issue-view/src/selectors/context-panel-selector.js"),im=s("./src/packages/issue/issue-view/src/selectors/ecosystem-glance-ui-selector.js"),rm=s("./node_modules/uuid/index.js"),om=s.n(rm),cm=s("./src/packages/routes/src/ui/spa/servicedesk/practices/resources/index.js"),lm=s("./src/packages/platform/controllers/tenant-context/src/components/cloud-id/index.js"),um=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-feature-flag-value.js");const dm=()=>Object(um.b)("related-issues-smart-suggestions",!1)
;var pm=s("./node_modules/lodash/isEmpty.js"),mm=s.n(pm),bm=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),fm=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),gm=s("./node_modules/lodash/memoize.js"),hm=s.n(gm),ym=s("./src/packages/common-legacy-do-not-add-anything-new/src/performance/index.js"),Om=s("./src/packages/platform/utils/fetch/src/utils/as-json.js"),jm=s("./node_modules/lodash/concat.js"),vm=s.n(jm),Em=s("./node_modules/lodash/uniq.js"),km=s.n(Em);const wm=/(https?:\/\/.+?\/servicedesk\/customer\/kb\/view\/[\d]+)/g,Sm=e=>{var t;let s=[];return null===(t=e.fields.comment)||void 0===t||t.comments.forEach((e=>{const t=e.body.match(wm);null!==t&&(s=vm()(s,t))})),km()(s)},Cm=e=>e.issues.map((e=>({id:e.id}))),Im=hm()(((e,t,s,n)=>{const a=ym.default.now(),i=`${t}/gateway/api/similarity/issue/project`;return Object(Om.a)(i,{body:JSON.stringify({context:{subProduct:"serviceDesk",product:"jira",sessionId:e.sessionId,containerId:e.projectId,
objectId:e.issueId,principalId:"context",tenantId:e.cloudId},filter:s,limit:15,estimatedTotalIssues:1e3}),headers:{"Content-Type":"application/json"},method:"POST"}).then((e=>(Object(Wa.b)(n({}),"fetchRelatedIssues succeeded",{elapsedTimeMilli:Math.floor(ym.default.now()-a),results:Cm(e),resultsSize:e.issues.length}),e))).catch((e=>{throw Object(Wa.b)(n({}),"fetchRelatedIssues failed",{elapsedTimeMilli:Math.floor(ym.default.now()-a),traceId:e.traceId,statusCode:e.statusCode}),e}))}),((e,t,s)=>`${e.issueId} - ${s.jql}`)),Tm=["summary","issuetype"],Pm=Im,_m={data:void 0,isLoading:!1,error:void 0,baseUrl:Object(rr.b)(""),issueId:Object(rr.j)(""),projectId:Object(rr.q)(""),projectKey:Object(rr.r)(""),cloudId:Object(rr.c)(""),status:"OPEN",requestTypeFieldId:""},xm=async(e,t,s,n)=>{const{projectId:a,issueId:i,cloudId:r,projectKey:o,baseUrl:c,requestTypeFieldId:l}=s,u={projectId:a,issueId:i,sessionId:t,cloudId:r},d=dm()?[...Tm,...mm()(l)?[]:[l],"comment","assignee"]:Tm,p={
jql:(e=>"OPEN"===e?"statusCategory != Done":"statusCategory = Done")(e),fields:d,projectKey:o,columnTypesAsJson:d},m=await Pm(u,c,p,n);return dm()?((e,t)=>e.issues.map(((e,s)=>{var n;return{id:e.id,issueKey:e.key,issueLink:e.self,issueTypeIconUrl:e.fields.issuetype.iconUrl,issueTypeName:e.fields.issuetype.name,issueSummary:e.fields.summary,assignee:e.fields.assignee,requestType:mm()(t)||null===(n=e.fields[t])||void 0===n?void 0:n.requestType,articles:Sm(e),position:s}})))(m,l):(e=>e.issues.map(((e,t)=>({id:e.id,issueKey:e.key,issueLink:e.self,issueTypeIconUrl:e.fields.issuetype.iconUrl,issueTypeName:e.fields.issuetype.name,issueSummary:e.fields.summary,position:t}))))(m)},Dm={fetchRelatedIssuesForIssue:(e,t)=>async({getState:s,setState:n})=>{const a=s();n({isLoading:!0,error:void 0});try{const{status:i}=a;let r,o;if(dm())[r,o]=await Promise.all([xm("OPEN",e,a,t),xm("RESOLVED",e,a,t)]),n({data:{OPEN:r,RESOLVED:o},isLoading:!1,error:void 0});else if("OPEN"===i){r=await xm("OPEN",e,a,t)
;const i=s();n({data:{OPEN:r,RESOLVED:void 0===i.data?[]:i.data.RESOLVED},isLoading:!1,error:void 0})}else if("RESOLVED"===i){o=await xm("RESOLVED",e,a,t);const i=s();n({data:{OPEN:void 0===i.data?[]:i.data.OPEN,RESOLVED:o},isLoading:!1,error:void 0})}}catch(r){var i;null===(i=Pm.cache)||void 0===i||i.clear(),n({isLoading:!1,error:r})}},setContext:()=>({setState:e},t)=>{e(t)},setIssueStatus:e=>({getState:t,setState:s})=>{const{status:n}=t();e!==n&&s({status:e})},setRequestTypeFieldId:e=>({getState:t,setState:s})=>{const{requestTypeFieldId:n}=t();e!==n&&s({requestTypeFieldId:e})}},Am=Object(bm.a)({name:"FetchRelatedIssuesForIssue",initialState:_m,actions:Dm}),Lm=Object(cr.a)(Am,{onInit:Dm.setContext}),Mm=Object(fm.a)(Am);var Rm=s("./src/packages/issue/issue-view/src/common/service/issue/customer-request-type-server.js");function Nm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Fm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Um=({issueKey:e})=>{const t=Object(Us.f)(),s=Object(Qi.a)(),[n]=Object(mu.c)(e),[i,r]=Object(a.useState)("");Object(a.useEffect)((()=>{if(null!=n){const e=Object.keys(n).find((e=>"com.atlassian.servicedesk:vp-origin"===n[e].schema.custom));null!=e&&r(e)}}),[n]);const[o,{setFieldValue:c}]=Object(xl.b)({issueKey:e,fieldKey:i});return[{value:o,fieldConfig:n,requestTypeFieldId:i},{saveValue:n=>{const a=n?+n.id:null,r=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Nm(Object(s),!0).forEach((function(t){Fm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Nm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},o)
;r.requestType=n,c(e,i,r),Object(Rm.a)(s,t,a)}}]};function Vm(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Km(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Vm(Object(s),!0).forEach((function(t){Wm(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Vm(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Wm(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Bm(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){
var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const Hm=e=>(t,s)=>{const n=t(s),{buttonStyles:a}=n;return Km(Km({},Bm(n,["buttonStyles"])),{},{buttonStyles:Km(Km({},a),{},{padding:`0 ${Q.e/2}px 0 ${Q.e/2}px`,margin:`0 ${Q.e/2}px 0 ${Q.e/2}px`,backgroundColor:e?Re.a.N400:Re.a.N20,"&:hover":{backgroundColor:e?Re.a.N400:Re.a.N30},"&:active":{backgroundColor:e?Re.a.N400:Re.a.B50}})})},$m=({children:e,onClick:t,isSelected:s})=>i.a.createElement($i.a,{appearance:"subtle",spacing:"compact",isSelected:s,theme:Hm(s),onClick:t},e);$m.displayName="ButtonComponent";const Gm=({items:e,selectedItem:t,onSelectIssueStatusItem:s})=>i.a.createElement(i.a.Fragment,null,e.map((e=>i.a.createElement($m,{key:e.key,isSelected:t.key===e.key,onClick:(t,n)=>s(e,n,"IssueStatusButton")},e.name))))
;var qm=s("./node_modules/@atlaskit/button--next/dist/es2019/button-group.js"),zm=s("./node_modules/@atlaskit/icon/glyph/more.js"),Ym=s.n(zm),Qm=s("./node_modules/@atlaskit/icon/glyph/premium.js"),Jm=s.n(Qm),Zm=s("./src/packages/platform/ui/feedback/feedback-dialog-base/src/model/types.js"),Xm=s("./src/packages/platform/controllers/unified-feedback/src/actions/types.js"),eb=s("./src/packages/platform/controllers/unified-feedback/src/components/unified-feedback-api.js"),tb=Object(v.h)({show:{id:"smart-related-issues-panel.header.expander.show",defaultMessage:"Show"},hide:{id:"smart-related-issues-panel.header.expander.hide",defaultMessage:"Hide"}});var sb=({isContentExpanded:e,onExpand:t,onCollapse:s})=>{const{formatMessage:n}=Object(xe.c)(),a=(e,s)=>{t(),Object(Wa.h)(s,"showRelatedIssues")},r=(e,t)=>{s(),Object(Wa.h)(t,"hideRelatedIssues")};return e?(()=>i.a.createElement(G.a,{"aria-label":n(tb.hide),appearance:"subtle-link",spacing:"default",iconBefore:i.a.createElement(Nd.a,{
label:"",size:"large"}),onClick:r}))():(()=>i.a.createElement(G.a,{"aria-label":n(tb.show),appearance:"subtle-link",spacing:"default",iconBefore:i.a.createElement(Md.a,{label:"",size:"large"}),onClick:a}))()},nb=Object(v.h)({feedback:{id:"smart-related-issues-panel.header.feedback",defaultMessage:"Give feedback"},hideSimilarRequests:{id:"smart-related-issues-panel.header.hide-similar-requests",defaultMessage:"Hide similar requests"},title:{id:"smart-related-issues-panel.header.title",defaultMessage:"Similar requests"}}),ab=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/mixins.js");const ib=Y.default.div(["display:flex;flex-direction:row;justify-content:space-between;"]),rb=Y.default.div(["margin-right:","px;"],1*Q.e),ob=Y.default.div(["display:flex;flex-direction:row;align-items:center;"]),cb=Object(Y.default)(Ra.c)(["",";",";margin:0;min-width:0;"],ab.a,Re.d.h400()),lb=({onExpand:e,onCollapse:t,isExpanded:s})=>{
const{formatMessage:n}=Object(xe.c)(),r=Object(Qi.a)(),o=Object(Us.i)(),c=Object(Vu.a)(o),[l,u]=Object(a.useState)(!1),d=({isOpen:e})=>{u(e)},p=`${r}/jira/servicedesk/projects/${o}/settings/itsm-features`,m={feedbackGroupId:"jira-servicedesk-related-issues",feedbackType:Xm.a,additionalFeedbackEntries:[{key:Zm.a.FEEDBACK_COLLECTOR_LOCATION,value:"jsm.issue-view"},{key:Zm.a.FEEDBACK_COLLECTOR_ID,value:"bento-similar-requests-panel"}]};return i.a.createElement(ib,null,i.a.createElement(ob,null,i.a.createElement(rb,null,i.a.createElement(Jm.a,{size:"medium",label:""})),i.a.createElement(cb,null,n(nb.title))),i.a.createElement(qm.a,null,(()=>i.a.createElement(eb.a,null,((e,{openFeedbackDialog:t})=>i.a.createElement(i.a.Fragment,null,c?(e=>i.a.createElement(fi.a,{onOpenChange:d,shouldFlip:!0,triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"default",isSelected:l,iconBefore:i.a.createElement(Ym.a,{label:"",size:"medium"})},boundariesElement:"scrollParent",
position:"bottom center"},i.a.createElement(gi.a,null,i.a.createElement(bi.a,{onClick:()=>e(m)},n(nb.feedback)),i.a.createElement(bi.a,{href:p},n(nb.hideSimilarRequests)))))(t):(e=>s?i.a.createElement(G.a,{appearance:"link",onClick:()=>e(m)},n(nb.feedback)):null)(t)))))(),i.a.createElement(sb,{isContentExpanded:s,onExpand:e,onCollapse:t})))};lb.displayName="PanelHeader";var ub=lb,db=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/item-line-card/item-line-card-group-view.js"),pb=s("./src/packages/issue/issue-view/src/common/util/events/index.js"),mb=s("./node_modules/@atlaskit/icon/glyph/error.js"),bb=s.n(mb),fb=Object(v.h)({errorMessage:{id:"smart-related-issues-panel.issue-line-card-group.error-feedback.error-message",defaultMessage:"We couldn't load any similar requests."},tryAgainLink:{id:"smart-related-issues-panel.issue-line-card-group.error-feedback.try-again-link",defaultMessage:"Try again?"}})
;const gb=Y.default.div(["margin-right:","px;"],Q.e),hb=Y.default.div(["display:flex;align-items:center;"]),yb=({onTryAgain:e,useIntl:t=xe.c})=>{const{formatMessage:s}=t();return i.a.createElement(hb,null,(()=>i.a.createElement(gb,null,i.a.createElement(bb.a,{label:"error",primaryColor:"#FF5630"})))(),s(fb.errorMessage),(()=>i.a.createElement(ra.a,{appearance:"link",onClick:e},s(fb.tryAgainLink)))())};yb.displayName="ErrorFeedback";var Ob=yb,jb=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/async-icon/index.js");const vb=Object(v.h)({issueTypeName:{id:"smart-related-issues-panel.issue-line-card-group.issue-line-card.issue-type-name",defaultMessage:"{issueTypeName}"}}),Eb=Object(Y.default)(G.a)(["&&{margin-top:4px;}"]),kb=({issueTypeIconUrl:e,issueTypeName:t,issueKey:s,issueSummary:n})=>{const{formatMessage:a}=Object(xe.c)(),r=a(vb.issueTypeName,{issueTypeName:t});return i.a.createElement(Eb,{appearance:"link",href:s,iconBefore:i.a.createElement(jb.a,{alt:r,url:e
})},s," ",n)};kb.displayName="IssueLineCard";var wb=kb,Sb=s("./node_modules/@atlaskit/icon/glyph/info.js"),Cb=s.n(Sb),Ib=Object(v.h)({errorMessage:{id:"smart-related-issues-panel.issue-line-card-group.no-issues-feedback.error-message",defaultMessage:"We couldn't find any similar requests."},searchLink:{id:"smart-related-issues-panel.issue-line-card-group.no-issues-feedback.search-link",defaultMessage:"Search instead?"}});const Tb=Y.default.div(["margin-right:","px;"],Q.e),Pb=Y.default.div(["display:flex;align-items:center;"]),_b=({useIntl:e=xe.c,useBaseUrl:t=Qi.a})=>{const{formatMessage:s}=e(),n=`${t()}/jira/servicedesk/projects/${Object(Us.i)()}/issues`;return i.a.createElement(Pb,null,(()=>i.a.createElement(Tb,null,i.a.createElement(Cb.a,{label:"info",primaryColor:"#0747A6"})))(),s(Ib.errorMessage),(()=>i.a.createElement(ra.a,{appearance:"link",target:"_blank",href:n},s(Ib.searchLink)))())};_b.displayName="NoIssuesFeedback";var xb=_b,Db=Object(v.h)({show:{
id:"smart-related-issues-panel.issue-line-card-group.show-more.show",defaultMessage:"Show more"}});const Ab=Y.default.div(["margin:","px 0px;"],Q.e);var Lb=({issuesLength:e,isShowMoreExpanded:t,onExpand:s})=>{const{formatMessage:n}=Object(xe.c)(),a=(t,n)=>{s(),Object(Wa.h)(n,"showMoreRelatedIssues",{issuesLength:e})};return t?null:(()=>i.a.createElement(Ab,null,i.a.createElement(ra.a,{appearance:"link",onClick:a},n(Db.show))))()},Mb=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/skeleton/index.js");const Rb=Y.default.div(["padding-left:","px;padding-right:","px;"],2*Q.e,2*Q.e),Nb=Y.default.div(["display:flex;flex-direction:row;justify-content:space-between;margin-bottom:","px;"],Q.e),Fb=()=>i.a.createElement(Rb,null,i.a.createElement(Nb,null,i.a.createElement(Mb.k,{height:"16px",width:"6%"}),i.a.createElement(Mb.k,{height:"16px",width:"90%"})),i.a.createElement(Nb,null,i.a.createElement(Mb.k,{height:"16px",width:"6%"}),i.a.createElement(Mb.k,{height:"16px",
width:"90%"})),i.a.createElement(Nb,null,i.a.createElement(Mb.k,{height:"16px",width:"6%"}),i.a.createElement(Mb.k,{height:"16px",width:"90%"})),i.a.createElement(Nb,null,i.a.createElement(Mb.k,{height:"16px",width:"6%"}),i.a.createElement(Mb.k,{height:"16px",width:"90%"})),i.a.createElement(Nb,null,i.a.createElement(Mb.k,{height:"16px",width:"6%"}),i.a.createElement(Mb.k,{height:"16px",width:"90%"})));Fb.displayName="LoadingSkeleton";var Ub=Fb;const Vb=Y.default.div(["display:flex;"]),Kb=Object(Y.default)(Vb)(["display:block;width:100%;max-height:","px;"," ul{box-shadow:none;}ul div{border-bottom:0px;}"],30*Q.e,(({isExpanded:e})=>e&&"\n        overflow-y: scroll;\n    ")),Wb=({sessionId:e})=>{const[t,s]=Object(a.useState)(!1),{createAnalyticsEvent:n}=Object(si.a)(),[{data:r,isLoading:o,error:c,status:l},{fetchRelatedIssuesForIssue:u}]=Mm();if(c)return i.a.createElement(Ob,{onTryAgain:()=>{u(e,n)}});if(o||!r)return i.a.createElement(Ub,null);const d=r[l]
;if(d&&0===d.length)return i.a.createElement(xb,null);const p=t?d:d.slice(0,5);return i.a.createElement(Vb,null,i.a.createElement(Kb,{isExpanded:t},i.a.createElement(db.a,{items:p,groupId:e,onClick:(e,t)=>{null!=e&&(Object(pb.e)(t)||Object(pb.a)(t)?Object(Wa.h)(n({}),"relatedIssue clicked",{newTabOpened:!0,position:e.position,relatedIssueId:e.id}):(Object(Wa.h)(n({}),"relatedIssue clicked",{newTabOpened:!1,position:e.position,relatedIssueId:e.id}),window.location.assign(e.issueKey)))}},((e,t,s,n)=>i.a.createElement(wb,n))),(()=>d.length>5&&i.a.createElement(Lb,{isShowMoreExpanded:t,onExpand:()=>s(!0),issuesLength:d.length}))()))};Wb.displayName="IssueLineCardGroup";var Bb=Wb,Hb=Object(v.h)({filterBy:{id:"smart-related-issues-panel.filter-by",defaultMessage:"Show:"},open:{id:"smart-related-issues-panel.open",defaultMessage:"Open"},resolved:{id:"smart-related-issues-panel.resolved",defaultMessage:"Resolved"}
}),$b=s("./node_modules/@atlassiansox/engagekit/dist/esm/coordination/useCoordination.js"),Gb=s("./node_modules/scroll-into-view-if-needed/es/index.js"),qb=s("./node_modules/@atlaskit/onboarding/dist/es2019/components/SpotlightManager.js"),zb=s("./node_modules/@atlaskit/popper/dist/es2019/Popper.js"),Yb=s("./node_modules/@atlaskit/popper/node_modules/react-popper/lib/esm/Manager.js"),Qb=s("./node_modules/@atlaskit/popper/node_modules/react-popper/lib/esm/Reference.js"),Jb=s("./src/packages/engagement/src/ui/coordination-client/index.js"),Zb=Object(v.h)({header:{id:"smart-related-issues-panel.onboarding.popper-content.header",defaultMessage:"Discover similar issues"},secondaryButton:{id:"smart-related-issues-panel.onboarding.popper-content.secondary-button",defaultMessage:"No thanks"},primaryButton:{id:"smart-related-issues-panel.onboarding.popper-content.primary-button",defaultMessage:"Try it now"}}),Xb=Object(v.h)({modalBody:{
id:"smart-related-issues-panel.onboarding.popper-content.spotlight-messages.modal-body",defaultMessage:"Save time triaging and finding related solutions directly from the request view."},adminModalBody:{id:"smart-related-issues-panel.onboarding.popper-content.spotlight-messages.admin-modal-body",defaultMessage:'Save time triaging and finding related solutions directly from the request view. You can disable this feature at any time in your <a href="{url}" target="_blank" tabindex="-1">project settings</a>.'}});const ef=Y.default.p(["margin:0px;a{&:hover{color:",";}&:active:{color:",";}&:visited,&:link{color:",";font-weight:bold;}}"],Re.a.P200,Re.a.B400,Re.a.N0);function tf(){return(tf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const sf=()=>{const{formatMessage:e}=Object(xe.c)();return i.a.createElement(ef,null,e(Xb.modalBody))}
;sf.displayName="ModalBodyMessage";const nf=({featuresPageUrl:e})=>i.a.createElement(ef,null,i.a.createElement(v.b,tf({},Xb.adminModalBody,{values:{url:e}})));nf.displayName="AdminModalBodyMessage";var af=s("./node_modules/@atlaskit/theme/dist/es2019/constants.js"),rf=s("./node_modules/@atlaskit/theme/dist/es2019/utils/math.js"),of=s("./node_modules/@atlaskit/theme/dist/es2019/typography.js");function cf(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function lf(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?cf(Object(s),!0).forEach((function(t){uf(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):cf(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function uf(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const df=Y.default.div(["margin:0px 4px;"]),pf=Y.default.div(["background:",";box-shadow:0 4px 8px -2px ",",0 0 1px ",";color:",";display:flex;flex-direction:column;padding:","px ","px;max-width:","px;border-radius:3px;"],"#6554C0","rgba(9, 30, 66, 0.25)","rgba(9, 30, 66, 0.31)","#FFFFFF",Object(rf.multiply)(af.gridSize,2),Object(rf.multiply)(af.gridSize,2.5),Object(rf.multiply)(af.gridSize,34)),mf=Y.default.div(["",";font-size:20px;font-style:inherit;font-weight:500;letter-spacing:-0.008em;line-height:1.2;margin-bottom:","px;margin-top:0px;color:",";"],of.h600,af.gridSize,"#FFFFFF"),bf=Y.default.div(["display:flex;justify-content:flex-end;align-items:center;padding-top:","px;"],af.gridSize),ff={default:{background:{default:{light:Re.a.P400,dark:Re.a.P400},hover:{light:Re.a.P200,dark:Re.a.P200},active:{light:Re.a.P500,dark:Re.a.P500},disabled:{light:Re.a.P400,dark:Re.a.P400},selected:{
light:Re.a.R500,dark:Re.a.R500},focus:{light:Re.a.P400,dark:Re.a.P400}},boxShadow:{focus:{light:`${Re.a.P100} 0 0 0 2px`,dark:`${Re.a.P100} 0 0 0 2px`}},color:{default:{light:Re.a.N0,dark:Re.a.N0},hover:{light:Re.a.N0,dark:Re.a.N0},active:{light:Re.a.N0,dark:Re.a.N0},disabled:{light:Re.a.N0,dark:Re.a.DN30},selected:{light:Re.a.N0,dark:Re.a.N0},focus:{light:Re.a.N0,dark:Re.a.N0}},outline:{focus:{light:"none",dark:"none"}}},subtle:{background:{default:{light:"none",dark:"none"},hover:{light:Re.a.P200,dark:Re.a.P200},active:{light:Re.a.P500,dark:Re.a.P500},disabled:{light:"none",dark:"none"},selected:{light:Re.a.N700,dark:Re.a.DN0},focusSelected:{light:Re.a.N700,dark:Re.a.DN0}},boxShadow:{focus:{light:`${Re.a.P100} 0 0 0 2px`,dark:`${Re.a.P100} 0 0 0 2px`}},color:{default:{light:Re.a.N0,dark:Re.a.N0},hover:{light:Re.a.N0,dark:Re.a.N0},active:{light:Re.a.N0,dark:Re.a.N0},disabled:{light:Re.a.N0,dark:Re.a.N0},selected:{light:Re.a.N0,dark:Re.a.N0},focus:{light:Re.a.N0,dark:Re.a.N0}},
outline:{focus:{light:"none",dark:"none"}}}},gf=()=>(e,t)=>{const{buttonStyles:s,spinnerStyles:n}=e(t),{appearance:a,state:i,mode:r}=t,o=ff[`${a||""}`];let c={};return o&&(c=Object.keys(o).reduce(((e,t)=>{const s=o[t];return s[i]&&(e[t]=s[i][r]),e}),{})),{buttonStyles:lf(lf({},s),c),spinnerStyles:n}},hf=({onPrimaryActionClick:e,onSecondaryActionClick:t})=>{const{formatMessage:s}=Object(xe.c)(),n=Object(Qi.a)(),a=Object(Us.i)(),r=Object(Vu.a)(a),o=`${n}/jira/servicedesk/projects/${a}/settings/itsm-features`;return i.a.createElement(pf,null,i.a.createElement(mf,null,s(Zb.header)),r?i.a.createElement(nf,{featuresPageUrl:o}):i.a.createElement(sf,null),i.a.createElement(bf,null,i.a.createElement(df,null,i.a.createElement($i.a,{theme:gf(),appearance:"subtle",onClick:t},s(Zb.secondaryButton))),i.a.createElement(df,null,i.a.createElement($i.a,{theme:gf(),onClick:e,autoFocus:!0},s(Zb.primaryButton)))))};hf.displayName="PopperContent";var yf=hf;function Of(e,t){var s=Object.keys(e)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function jf(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vf=Y.default.div(["",";background-color:white;border-radius:4px;box-shadow:0 0 0 1px ",",0 4px 11px ",";opacity:",";transition:opacity 200ms ease-in-out;z-index:",";"],(e=>e.styling),Re.a.N40A,Re.a.N40A,(({isReferenceHidden:e,active:t})=>e||!t?0:1),Q.f.layer),Ef=Y.default.div(["",";"],(e=>function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Of(Object(s),!0).forEach((function(t){jf(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Of(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e
}({},e.extraStyles))),kf=Re.a.P75,wf=Object(Y.keyframes)(["0%{opacity:0;}50%{opacity:1;}100%{opacity:0;}"]),Sf=Object(Y.css)(["animation:"," 3000ms "," infinite;"],wf,"cubic-bezier(0.55, 0.055, 0.675, 0.19)"),Cf=Object(Y.css)(["content:'';position:absolute;top:0;left:0;width:100%;height:100%;"]),If=Y.default.span(["display:block;> *{position:relative;&::before{"," border-radius:","px;box-shadow:",";opacity:",";transition:opacity 0.1s ease-in-out;pointer-events:none;}&::after{"," border-radius:","px;box-shadow:",";opacity:0;pointer-events:none;","}}"],Cf,Q.e/2,(({pulseColor:e=kf})=>`0 0 0 0px ${e}`),(e=>e.hasPulse?1:0),Cf,Q.e/2,(({pulseColor:e=kf,pulseShadowColor:t="rgba(101, 84, 192, 1)"})=>`0 0 0 0px ${e} , 0 0 ${Q.e}px ${t}`),(e=>e.isPulsing&&Sf)),Tf=({children:e,isExpanded:t,onPrimaryActionClick:s})=>{
const n=Object(lm.a)(),r=Object(a.useMemo)((()=>new Jb.a(n,"/gateway/api")),[n]),[o,c]=Object($b.a)(r,"related-issues-panel"),[l,u]=Object(a.useState)(!0),[d,p]=Object(a.useState)(!1),[m,b]=Object(a.useState)(!1),f=Object(a.useRef)(null),g=Object(a.useCallback)((()=>{u(!1),c&&c()}),[c]),h=()=>{g(),s()},y=l&&d&&o&&c&&!t;Object(a.useEffect)((()=>{y&&(Object(Gb.default)(f.current,{inline:"end",behavior:"smooth"}),setTimeout((()=>{b(!0)}),300))}),[d,l,y]),Object(a.useEffect)((()=>{u(!!o)}),[o]),Object(a.useEffect)((()=>{t&&(g(),u(!1),c&&c())}),[g,t,c]);return i.a.createElement(qb.d,null,i.a.createElement(Yb.a,null,i.a.createElement(Qb.a,null,(({ref:s})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(If,{isPulsing:o&&c&&l&&!t},i.a.createElement("div",{ref:s,onMouseEnter:()=>p(!0)},e)),i.a.createElement(Ef,{innerRef:f}),o&&c&&(()=>i.a.createElement(zb.a,{placement:"top-end"},(({ref:e,style:t,isReferenceHidden:s})=>i.a.createElement(vf,{innerRef:e,styling:t,isReferenceHidden:s,
active:y&&m},i.a.createElement(yf,{onPrimaryActionClick:h,onSecondaryActionClick:g})))))())))))};Tf.displayName="OnboardingController";const Pf=Y.default.div(["margin-top:","px;margin-bottom:","px;display:flex;flex-direction:column;border-radius:","px;border:1px solid #dfe1e6;background-color:",";padding:16px;",";"],Q.e,3*Q.e,Q.e/2,Re.a.N0,(({isExpanded:e,hasContentItems:t})=>e&&t&&"padding-bottom: 0")),_f=(Q.e,Y.default.div(["padding-top:","px;"],2*Q.e)),xf=(ab.a,Re.d.h400(),Y.default.div(["display:flex;margin-top:","px;"],Q.e)),Df=Y.default.div(["",";min-width:0;"],ab.a);var Af=s("./src/packages/issue/fields/assignee/src/services/use-assignee-field/index.js");const Lf=()=>{const e=Object(Us.g)(),[{value:t}]=Object(Af.a)({issueKey:e}),[s,n]=Object(a.useState)(void 0),[i,r]=Object(a.useState)(void 0),[o,c]=Object(a.useState)(!1),[l,u]=Object(a.useState)([]),[{data:d}]=Mm();return Object(a.useEffect)((()=>{if(d){const e=d.RESOLVED,t=d.OPEN,s=vm()(e,t);if(e.length>0){const t=(e=>{
const t=new Map;e.forEach((e=>{if(null===e.assignee||void 0===e.assignee)return;const s=t.get(e.assignee);void 0===s?t.set(e.assignee,1):t.set(e.assignee,s+1)}));let s,n=0;return t.forEach(((e,t)=>{e>n&&(s=t,n=e)})),s})(e);void 0!==t&&n(t)}const a=(e=>{const t=new Map;e.forEach((e=>{if(null===e.requestType||void 0===e.requestType)return;const s=t.get(e.requestType);void 0===s?t.set(e.requestType,1):t.set(e.requestType,s+1)}));let s,n=0;return t.forEach(((e,t)=>{e>n&&(s=t,n=e)})),s})(s);void 0!==a&&r(a),(e=>e.length>3)(t)&&c(!0);const i=(e=>{const t={};return e.forEach((e=>{null!==e.articles&&void 0!==e.articles&&e.articles.forEach((e=>{void 0===t[e]?t[e]=1:t[e]+=1}))})),Object.entries(t).sort((([,e],[,t])=>t-e)).map((([e])=>e)).slice(0,3)})(s);u(i)}}),[t,d,o,i]),[{suggestedAssignee:s,suggestIncident:o,suggestedRequestType:i,suggestedArticles:l}]};var Mf=Object(v.h)({show:{id:"smart-related-issues-panel.suggestions.header.expander.show",defaultMessage:"Show"},hide:{
id:"smart-related-issues-panel.suggestions.header.expander.hide",defaultMessage:"Hide"}});var Rf=({isContentExpanded:e,onExpand:t,onCollapse:s})=>{const{formatMessage:n}=Object(xe.c)(),a=(e,s)=>{t(),Object(Wa.h)(s,"showInsights")},r=(e,t)=>{s(),Object(Wa.h)(t,"hideInsights")};return e?(()=>i.a.createElement(G.a,{"aria-label":n(Mf.hide),appearance:"subtle-link",spacing:"default",iconBefore:i.a.createElement(Nd.a,{label:"",size:"large"}),onClick:r}))():(()=>i.a.createElement(G.a,{"aria-label":n(Mf.show),appearance:"subtle-link",spacing:"default",iconBefore:i.a.createElement(Md.a,{label:"",size:"large"}),onClick:a}))()},Nf=Object(v.h)({hideSimilarRequests:{id:"smart-related-issues-panel.suggestions.header.hide-similar-requests",defaultMessage:"Hide Insights"},title:{id:"smart-related-issues-panel.suggestions.header.title",defaultMessage:"Insights"}})
;const Ff=Y.default.div(["display:flex;flex-direction:row;justify-content:space-between;"]),Uf=Y.default.div(["margin-right:","px;"],1*Q.e),Vf=Y.default.div(["display:flex;flex-direction:row;align-items:center;"]),Kf=Object(Y.default)(Ra.c)(["",";",";margin:0;min-width:0;"],ab.a,Re.d.h400()),Wf=({onExpand:e,onCollapse:t,isExpanded:s})=>{const{formatMessage:n}=Object(xe.c)();return i.a.createElement(Ff,null,i.a.createElement(Vf,null,i.a.createElement(Uf,null,i.a.createElement(Jm.a,{size:"medium",label:""})),i.a.createElement(Kf,null,n(Nf.title))),i.a.createElement(qm.a,null,i.a.createElement(Rf,{isContentExpanded:s,onExpand:e,onCollapse:t})))};Wf.displayName="PanelHeader";var Bf=Object(v.h)({suggestedRequestTypeHeading:{id:"smart-related-issues-panel.suggestions.suggested-request-type-heading",defaultMessage:"Suggested Request Type"},suggestedRequestTypeDesc:{id:"smart-related-issues-panel.suggestions.suggested-request-type-desc",
defaultMessage:"'{requestType}' may be a more suitable request type for this emailed request."},suggestedAssigneeHeading:{id:"smart-related-issues-panel.suggestions.suggested-assignee-heading",defaultMessage:"Suggested Assignee"},suggestedAssigneeDesc:{id:"smart-related-issues-panel.suggestions.suggested-assignee-desc",defaultMessage:"{suggestedAssignee} has solved similar tickets in the past. They would make a good assignee."},subjectMatterExpertHeading:{id:"smart-related-issues-panel.suggestions.subject-matter-expert-heading",defaultMessage:"Need help resolving this issue?"},subjectMatterExpertDesc:{id:"smart-related-issues-panel.suggestions.subject-matter-expert-desc",defaultMessage:"{subjectMatterExpert} has solved similar tickets in the past. Perhaps reach out to them for assistance."},suggestedArticlesHeading:{id:"smart-related-issues-panel.suggestions.suggested-articles-heading",defaultMessage:"Suggested Articles"},suggestedIncidentHeading:{
id:"smart-related-issues-panel.suggestions.suggested-incident-heading",defaultMessage:"This might be an incident or a problem"},suggestedIncidentDesc:{id:"smart-related-issues-panel.suggestions.suggested-incident-desc",defaultMessage:"There are {numTickets} similar open tickets."}});const Hf=Y.default.div(["margin-top:","px;margin-bottom:","px;display:flex;flex-direction:column;border-radius:","px;border:1px solid #dfe1e6;background-color:",";padding:16px;",";"],Q.e,3*Q.e,Q.e/2,Re.a.N0,(({isExpanded:e,hasContentItems:t})=>e&&t&&"padding-bottom: 0")),$f=(Q.e,Q.e,ab.a,Re.d.h400(),Q.e,ab.a,()=>{var e,t;const{formatMessage:s}=Object(xe.c)(),n=Object(Us.g)(),[{value:r}]=Object(Af.a)({issueKey:n}),[{data:o}]=Mm(),[{suggestedRequestType:c,suggestedAssignee:l,suggestedArticles:u,suggestIncident:d}]=Lf(),[p,m]=Object(a.useState)(!1),[{value:b}]=Um({issueKey:n}),f="Emailed request"===(null==b||null===(e=b.requestType)||void 0===e?void 0:e.name)
;return i.a.createElement(i.a.Fragment,null,(!mm()(c)||!mm()(l)||!mm()(u)||!mm()(d))&&i.a.createElement(Hf,{isExpanded:p},i.a.createElement(Wf,{onExpand:()=>m(!0),onCollapse:()=>m(!1),isExpanded:p}),p&&i.a.createElement(i.a.Fragment,null,f&&c!==(null==b||null===(t=b.requestType)||void 0===t?void 0:t.name)&&!mm()(c)&&i.a.createElement(Yi.a,{appearance:"info",title:s(Bf.suggestedRequestTypeHeading)},i.a.createElement("p",null,s(Bf.suggestedRequestTypeDesc,{requestType:c.name}))),!mm()(l)&&!mm()(r)&&l.displayName!==r.displayName&&i.a.createElement(Yi.a,{appearance:"info",title:s(Bf.subjectMatterExpertHeading)},i.a.createElement("p",null,s(Bf.subjectMatterExpertDesc,{subjectMatterExpert:l.displayName}))),!mm()(l)&&null===r&&i.a.createElement(Yi.a,{appearance:"info",title:s(Bf.suggestedAssigneeHeading)},i.a.createElement("p",null,s(Bf.suggestedAssigneeDesc,{suggestedAssignee:l.displayName}))),!mm()(u)&&i.a.createElement(Yi.a,{appearance:"info",title:s(Bf.suggestedArticlesHeading)
},u.map((e=>i.a.createElement("p",{key:e},i.a.createElement("a",{href:e},e))))),d&&o&&i.a.createElement(Yi.a,{appearance:"warning",title:s(Bf.suggestedIncidentHeading)},i.a.createElement("p",null,s(Bf.suggestedIncidentDesc,{numTickets:o.OPEN.length}))))))});const Gf=({sessionId:e})=>{const{formatMessage:t}=Object(xe.c)(),{createAnalyticsEvent:s}=Object(si.a)(),[n,r]=Object(a.useState)(!1),o=Object(Us.g)(),[c]=Um({issueKey:o}),l={OPEN:{key:"OPEN",name:t(Hb.open)},RESOLVED:{key:"RESOLVED",name:t(Hb.resolved)}},u=[l.OPEN,l.RESOLVED],[{status:d,requestTypeFieldId:p},{setIssueStatus:m,fetchRelatedIssuesForIssue:b,setRequestTypeFieldId:f}]=Mm();Object(a.useEffect)((()=>{c&&f(c.requestTypeFieldId)}),[c,f]),Object(a.useEffect)((()=>{n&&b(e,s)}),[s,b,n,e,p]);const g=i.a.createElement(xf,null,i.a.createElement(Df,null,t(Hb.filterBy)),i.a.createElement(Gm,{items:u,selectedItem:l[d],onSelectIssueStatusItem:(t,n,a)=>{Object(Wa.h)(n,a,{selectedStatusFilter:t.key}),m(t.key),b(e,s)}}))
;return i.a.createElement(Ha.a,{attributes:{selectedStatusFilter:d}},i.a.createElement(Tf,{isExpanded:n,onPrimaryActionClick:()=>{Object(Wa.h)(s({action:"clicked",actionSubject:"button"}),"showRelatedIssues",{fromOnboarding:!0,selectedStatusFilter:d}),r(!0)}},i.a.createElement(Pf,{isExpanded:n},i.a.createElement(ub,{onExpand:()=>r(!0),onCollapse:()=>r(!1),isExpanded:n}),n&&i.a.createElement(i.a.Fragment,null,g,i.a.createElement(_f,null,i.a.createElement(Bb,{sessionId:e})),dm()&&i.a.createElement($f,{sessionId:e})))))};Gf.displayName="RelatedIssuesPanelView";var qf=Gf;const zf=e=>null!=e,Yf=e=>zf(e)&&""!==e;var Qf=()=>{const e=om.a.v4(),t=Object(Us.f)(),s=Object(Us.i)(),n=Object(rr.q)(Object(Ga.g)(s)||""),a=Object(lm.a)(),r=Object(Qi.a)(),o=Object(Us.g)(),{data:c}=Object(cm.b)(),[l]=Object(xl.b)({issueKey:o,fieldKey:"similar-issues"}),u=((e,t,s,n,a)=>{if(Yf(t)&&t!==Object(rr.q)("")&&zf(e)&&e!==Object(rr.j)("")&&Yf(a))return{issueId:e,projectId:t,projectKey:s,baseUrl:n,cloudId:a}
})(t,n,s,r,a);return((()=>Object(um.b)("related-issues-panel-for-itsm-projects",!1))()&&!0===c||l)&&void 0!==u?i.a.createElement(Lm,u,i.a.createElement(Ha.a,{sourceName:"RelatedIssuesPanel",attributes:{smartSessionId:e}},i.a.createElement(qf,{sessionId:e}))):null};const Jf=Y.default.div(["margin-top:","px;"],(e=>e.isCompactMode?2.5*Q.e:5*Q.e)),Zf=Y.default.div(["margin-top:",";"],(e=>e.isCompactMode?null:`${Q.e}px`)),Xf=Y.default.div(["margin-bottom:","px;"],(e=>e.isCompactMode||e.isPanelCollapsed?2*Q.e:5*Q.e));var eg=s("./src/packages/issue/issue-view/src/actions/ecosystem-content-panel-actions.js"),tg=s("./src/packages/issue/issue-view/src/common/ecosystem/module-key-helper.js"),sg=s("./src/packages/common-legacy-do-not-add-anything-new/src/storage/storage-provider.js");const ng=Object(sg.b)("issue-ecosystem"),ag="collapsed-panels",ig="issue.ecosystem.local-storage",rg=()=>{try{return ng.get(ag)||[]}catch(e){
return O.a.safeErrorWithoutCustomerData(ig,`getCollapsedPanels failed: ${e}`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),[]}},og=({children:e,isLoading:t=!1})=>i.a.createElement("span",null,i.a.createElement(fi.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:t?i.a.createElement(q.a,{size:"small"}):i.a.createElement(Ym.a,{size:"small",label:"meatball menu"})},position:"bottom right"},e));og.displayName="MeatBallMenu";const cg=Y.default.div(["display:flex;align-items:center;height:","px;cursor:",";"],4*Q.e,(e=>e.clickable?"pointer":void 0)),lg=Y.default.div(["align-items:center;display:flex;flex-flow:row-reverse wrap;& > * + *{margin-left:","px;}"],Q.e);function ug(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dg(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ug(Object(s),!0).forEach((function(t){pg(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ug(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pg(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const mg=Y.default.span(["color:",";margin-left:5px;display:",";",":hover &{display:inline;}"],Re.a.link,(e=>e.alwaysShow?void 0:"none"),cg),bg=Y.default.div(["max-height:",";overflow-y:",";overflow-x:hidden;",";transition:max-height 1s ease-out;"],(e=>e.isCollapsed?"0":"1500px"),(e=>e.isCollapsed?"hidden":"auto"),Object(Li.f)("&")),fg=Y.default.h1(["flex:1;",";",";color:",";"],Li.e,Re.d.h400(),Re.a.heading),gg=Object(v.h)({actions:{id:"issue.content.ecosystem-panels.meatballs.actions",defaultMessage:"Actions"},hide:{
id:"issue.content.ecosystem-panels.meatballs.hide",defaultMessage:"Hide {appName}"},collapse:{id:"issue.content.ecosystem-panels.collapse-content",defaultMessage:"hide"},expand:{id:"issue.content.ecosystem-panels.expand-content",defaultMessage:"show"}});class hg extends a.Component{constructor(e){super(e),this.setupConnectHost=e=>{e&&e.onIframeUnload((({extension:t})=>{e.destroy(t.id)}))},this.contentPanelContainer=void 0,this.handleRemoveContentPanel=()=>{const{appKey:e,moduleKey:t,removeContentPanel:s,onContentPanelRemoveAnalytics:n}=this.props;n(Object(Mn.b)(e,t)),s(`${e}_${t}`)},this.toggleCollapsedState=()=>{const{appKey:e,moduleKey:t,onToggleCollapsedStateAnalytics:s}=this.props,{isCollapsed:n}=this.state,a=Object(tg.b)(`${e}_${t}`,10);s(Object(Mn.g)(e,t,n?"expand":"collapse")),n?(e=>{const t=rg();try{ng.set(ag,t.filter((t=>t!==e)))}catch(s){O.a.safeErrorWithoutCustomerData(ig,`unsetCollapsedPanel failed: ${s}`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s
}))}})(a):(e=>{const t=rg();try{ng.set(ag,[...t,e])}catch(s){O.a.safeErrorWithoutCustomerData(ig,`setCollapsedPanel failed: ${s}`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}})(a),this.setState({isCollapsed:!n})},this.state={connectHost:window.connectHost,isCollapsed:rg().includes(Object(tg.b)(`${e.appKey}_${e.moduleKey}`,10))},this.setupConnectHost(this.state.connectHost)}componentDidMount(){this.state.connectHost||Object(Vn.b)((e=>{this.setupConnectHost(e),this.setState({connectHost:e})}))}componentDidUpdate(){this.props.isSelected&&(Object(Wr.a)(this.contentPanelContainer),this.props.unSelectContentPanel(`${this.props.appKey}_${this.props.moduleKey}`))}renderHidePanelOption(){const{intl:e}=this.props;return i.a.createElement(gi.a,{title:e.formatMessage(gg.actions)},i.a.createElement(bi.a,{onClick:this.handleRemoveContentPanel},e.formatMessage(gg.hide,{appName:this.props.name})))}renderMeatBallMenu(){
return i.a.createElement(og,null,this.renderHidePanelOption())}renderHeader(){const{showByDefault:e}=this.props.contentPanel;if(!e)return i.a.createElement(Ra.c,null,i.a.createElement(cg,null,i.a.createElement(fg,null,this.props.name)),i.a.createElement(lg,null,this.renderMeatBallMenu()));const{intl:t}=this.props,{isCollapsed:s}=this.state;return i.a.createElement(Ra.c,null,i.a.createElement(cg,{clickable:!0,onClick:this.toggleCollapsedState},i.a.createElement(fg,null,this.props.name),i.a.createElement(mg,{alwaysShow:s},s?t.formatMessage(gg.expand):t.formatMessage(gg.collapse))),e?null:i.a.createElement(lg,null,this.renderMeatBallMenu()))}render(){const{appKey:e,moduleKey:t}=this.props,{isCollapsed:s}=this.state,{options:n,options:{url:a,origin:r},showByDefault:o}=this.props.contentPanel,c=new Wn.a;return Object(F.isConnectPanelsMarginBottomEnabled)()?i.a.createElement("div",{ref:e=>{this.contentPanelContainer=e}},i.a.createElement(Xf,null,this.renderHeader(),i.a.createElement(bg,{
isCollapsed:s&&o},this.state.connectHost&&i.a.createElement(Kn.a,{key:`connect-iFrame-${r}-${this.props.refreshedOn}`,connectHost:this.state.connectHost,appKey:e,moduleKey:t,url:a,options:c.convertConnectOptions(n),connectIframeProvider:c,width:"100%",height:"100%",timeoutIndicator:()=>i.a.createElement(Yn,{appName:this.props.contentPanel.name,appKey:e})})))):i.a.createElement("div",{ref:e=>{this.contentPanelContainer=e}},this.renderHeader(),i.a.createElement(bg,{isCollapsed:s&&o},this.state.connectHost&&i.a.createElement(Kn.a,{key:`connect-iFrame-${r}-${this.props.refreshedOn}`,connectHost:this.state.connectHost,appKey:e,moduleKey:t,url:a,options:c.convertConnectOptions(n),connectIframeProvider:c,width:"100%",height:"100%",timeoutIndicator:()=>i.a.createElement(Yn,{appName:this.props.contentPanel.name,appKey:e})})))}}hg.displayName="ConnectContentPanel",hg.displayName="ContentPanel",hg.defaultProps={isSelected:!1,unSelectContentPanel:c.a,removeContentPanel:c.a,refreshedOn:0,
onContentPanelRemoveAnalytics:c.a};var yg=Object(qt.a)([v.i,Object(fs.a)((e=>({onContentPanelRemoveAnalytics:t=>e("remove",dg({},t)),onToggleCollapsedStateAnalytics:t=>e("toggleCollapsedState",dg({},t))}))),Object(r.connect)(((e,t)=>({contentPanel:Object(Rn.d)(t.appKey,t.moduleKey)(e),isSelected:Object(Rn.r)(t.appKey,t.moduleKey)(e),refreshedOn:Object(P.e)(e)})),(e=>({unSelectContentPanel:t=>e(Object(eg.e)(t)),removeContentPanel:t=>e(Object(eg.h)(t))})))])(hg),Og=s("./src/packages/forge/forge-ui-analytics/src/services/issue-panel/index.js"),jg=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-panel/index.js"),vg=s("./src/packages/forge/forge-ui-async/src/ui/issue-panel/async.js"),Eg=s("./src/packages/issue/issue-view/src/actions/forge-actions.js"),kg=Object(v.h)({title:{id:"issue.content.ecosystem.forge.panel.actions.title",defaultMessage:"Actions"},remove:{id:"issue.content.ecosystem.forge.panel.actions.remove",defaultMessage:"Remove"},collapse:{
id:"issue.content.ecosystem.forge.panel.actions.collapse",defaultMessage:"Collapse"},expand:{id:"issue.content.ecosystem.forge.panel.actions.expand",defaultMessage:"Expand"}});function wg(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function Sg(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Cg(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Sg(Object(s),!0).forEach((function(t){Ig(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Sg(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ig(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Tg=({actions:e})=>{const[t,s]=Object(a.useState)(!1),{formatMessage:n}=Object(xe.c)();if(0===e.length)return null;const r=e.map((e=>Cg(Cg({},e),{},{onClick:()=>(s(!0),e.onClick().finally((()=>{s(!1)})))})));return i.a.createElement(og,{isLoading:t},i.a.createElement(gi.a,{title:n(kg.title)},r.map((e=>i.a.createElement(bi.a,{onClick:e.onClick,key:e.key},e.text)))))};Tg.displayName="Actions";const Pg=({name:e,extension:{environmentType:t},actions:s})=>i.a.createElement(Ra.c,null,i.a.createElement(cg,null,i.a.createElement(Ra.e,null,i.a.createElement(xi.a,{extensionName:e,extensionEnvType:t}))),i.a.createElement(lg,null,i.a.createElement(Tg,{actions:s})))
;Pg.displayName="ForgeContentPanelHeader";const _g=e=>{let{extensionData:t,source:s,onContentPanelRemoveAnalytics:n,onRemove:r,appKey:o,moduleKey:c,name:l,isPanelCollapsed:u}=e,d=wg(e,["extensionData","source","onContentPanelRemoveAnalytics","onRemove","appKey","moduleKey","name","isPanelCollapsed"]);const{extension:p,panelKey:m,isJustAdded:b,isCompactMode:f,removeFromJustAdded:g,removeFromNewPanels:h,updatePanel:y}=d,O=Object(a.useRef)(null),{formatMessage:j}=Object(xe.c)();Object(a.useEffect)((()=>{b&&O&&O.current&&(Object(Wr.a)(O.current),g(m))}),[b,m,g]),Object(a.useEffect)((()=>{t.isNewToIssue&&h(m)}),[t.isNewToIssue,m,h]);const v=Object(a.useMemo)((()=>({source:s})),[s]),[E,k]=Object(a.useState)([]),w=Object(a.useMemo)((()=>({onClick:()=>(n(Object(Mn.b)(o,c)),Object(Og.l)(s),r(m),Promise.resolve()),text:j(kg.remove),key:"internal__remove-action"})),[o,j,c,n,r,m,s]),S=Object(a.useCallback)((e=>(Object(Og.k)(s,{collapsed:e}),e&&k([]),y({issueKey:t.issue.key,panelKey:m,collapsed:e
}),Promise.resolve())),[t.issue.key,m,s,y]),C=Object(a.useMemo)((()=>({onClick:()=>S(!1),text:j(kg.expand),key:"internal__expand-action"})),[j,S]),I=Object(a.useMemo)((()=>({onClick:()=>S(!0),text:j(kg.collapse),key:"internal__collapse-action"})),[j,S]),T=u?C:I,P=[...E.slice(0,5).map((e=>Cg(Cg({},e),{},{onClick:()=>(Object(Og.j)(s),e.onClick())}))),T,w];return i.a.createElement(jg.a,{attributes:v,shouldFireScreenEvent:t.isNewToIssue},i.a.createElement("div",{ref:O},i.a.createElement(Xf,{isCompactMode:f,isPanelCollapsed:u},i.a.createElement(Pg,{actions:P,extension:p,name:l}),!u&&i.a.createElement(vg.a,{extensionData:t,extension:p,localId:m,setCustomActions:k,analyticsAttributes:v}))))};_g.displayName="ForgeContentPanelView";var xg=Object(qt.a)([Object(fs.a)((e=>({onContentPanelRemoveAnalytics:t=>e("remove",Cg({},t))}))),Object(r.connect)(((e,t)=>({isJustAdded:Object(Bo.j)(t.panelKey)(e),extensionData:Object(Bo.i)(t.panelKey)(e),source:Object(T.b)(e),
isPanelCollapsed:Object(Bo.e)(t.panelKey)(e)})),(e=>({removeFromJustAdded:t=>{e(Object(eg.e)(t))},removeFromNewPanels:t=>{e(Object(Eg.i)(t))},onRemove:t=>{e(Object(eg.h)(t))},updatePanel:t=>{e(Object(Eg.g)(t))}})))])(_g),Dg=s("./src/packages/issue/attachments/issue-attachments-table/src/ui/error/assets/search.svg"),Ag=s.n(Dg),Lg=Object(v.h)({errorStateTitle:{id:"issue-attachments-table.error.error-state-title",defaultMessage:"We couldn't load your attachments"},errorStateDescription:{id:"issue-attachments-table.error.error-state-description",defaultMessage:"Check your network connection, then try reloading your attachments."},primaryButton:{id:"issue-attachments-table.error.primary-button",defaultMessage:"Reload Attachments"}});const Mg=Y.default.div(["& > div{margin:auto;}"]),Rg=({onClick:e,shouldHideImage:t})=>{const{formatMessage:s}=Object(xe.c)(),n=t?void 0:Ag.a,a=i.a.createElement(G.a,{appearance:"primary",onClick:()=>e()},s(Lg.primaryButton))
;return i.a.createElement(Mg,null,i.a.createElement(Bn.a,{imageUrl:n,header:s(Lg.errorStateTitle),description:s(Lg.errorStateDescription),primaryAction:a}))};Rg.displayName="AttachmentsError",Rg.defaultProps={shouldHideImage:!1};var Ng=Rg
;const Fg=Y.default.div(["width:100%;display:flex;position:relative;&&{min-height:initial;}"]),Ug=Object(Y.keyframes)(["0%{background-position:-300px 0;}100%{background-position:2000px 0;}"]),Vg=Y.default.div(["animation-duration:1s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:",";animation-timing-function:linear;background-color:",";background-image:linear-gradient( to right,"," 10%,"," 30%,"," 50% );background-repeat:no-repeat;position:absolute;left:0;right:0;top:0;bottom:0;"],Ug,Re.a.N30,Re.a.N30,Re.a.N20,Re.a.N30),Kg=Y.default.div(["min-height:","px;min-width:","px;width:",";border-top:","px solid ",";border-bottom:","px solid ",";border-right:","px solid ",";border-left:","px solid ",";"],(e=>e.height),(e=>e.minWidth),(e=>e.width),(e=>(e.lineHeight-e.height)/2),Re.a.N0,(e=>(e.lineHeight-e.height)/2),Re.a.N0,(e=>e.borderRight),Re.a.N0,(e=>e.borderLeft),Re.a.N0),Wg=Y.default.div(["position:relative;width:100%;border-top:","px solid ",";border-bottom:","px solid ",";"],(e=>e.paddingTop),Re.a.N0,(e=>e.paddingBottom),Re.a.N0),Bg=Y.default.div(["background:",";width:",";"],Re.a.N0,(e=>e.width))
;function Hg(){return(Hg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const $g=({nameTextWidthPercentage:e,dateAddedWidth:t})=>i.a.createElement(Fg,null,i.a.createElement(Kg,{height:24,minWidth:24,lineHeight:40,borderLeft:6}),i.a.createElement(Kg,{height:14,width:`${e}%`,lineHeight:40,borderLeft:8,borderRight:20}),i.a.createElement(Bg,{width:100-e+"%"}),i.a.createElement(Kg,{height:14,minWidth:50,lineHeight:40}),i.a.createElement(Kg,{height:14,minWidth:t,lineHeight:40,borderLeft:16}),i.a.createElement(Kg,{height:24,minWidth:24,lineHeight:40,borderLeft:170-t+62,borderRight:12}));$g.displayName="TableItem";const Gg=e=>{const{pageNumber:t,totalCount:s}=e,n=s-6*(t-1),a=Math.min(n,6),r=[{nameTextWidthPercentage:80,dateAddedWidth:170},{nameTextWidthPercentage:70,dateAddedWidth:150},{nameTextWidthPercentage:80,dateAddedWidth:160},{
nameTextWidthPercentage:60,dateAddedWidth:140},{nameTextWidthPercentage:70,dateAddedWidth:155},{nameTextWidthPercentage:80,dateAddedWidth:170}],o=s>6?55:23;return i.a.createElement(Fg,null,i.a.createElement(Vg,null),i.a.createElement(Wg,{paddingTop:0,paddingBottom:o},i.a.createElement(Fg,null,i.a.createElement(Kg,{height:14,minWidth:50,lineHeight:26}),i.a.createElement(Bg,{width:"100%"}),i.a.createElement(Kg,{height:14,minWidth:40,lineHeight:26,borderLeft:16}),i.a.createElement(Kg,{height:14,minWidth:100,lineHeight:26,borderLeft:26}),i.a.createElement(Kg,{height:0,minWidth:24,lineHeight:26,borderLeft:144})),i.a.createElement(Kg,{height:2,lineHeight:2}),i.a.createElement(Wg,{paddingTop:0,paddingBottom:0},Array.from({length:a}).map(((e,t)=>i.a.createElement($g,Hg({},r[t],{key:`table-item--${t}`}))))),i.a.createElement(Kg,{height:2,lineHeight:2})))};Gg.displayName="AttachmentsTableSkeleton",Gg.defaultProps={pageNumber:1,totalCount:6}
;var qg=Gg,zg=s("./node_modules/lodash/debounce.js"),Yg=s.n(zg),Qg=s("./node_modules/@atlaskit/media-card/dist/es2019/utils/lightCards/cardLoading.js"),Jg=s("./node_modules/@atlaskit/media-card/dist/es2019/root/card/cardLoader.js"),Zg=s("./node_modules/@atlaskit/media-filmstrip/dist/es2019/filmstripView/index.js"),Xg=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/with-props.js"),eh=s("./src/packages/platform/controllers/tenant-context/src/components/account-id/index.js"),th=Object(v.h)({confirmationHeader:{id:"issue-attachments-base.with-issue-attachments-delete.confirmation-header",defaultMessage:"Delete this attachment?"},confirmationContent:{id:"issue-attachments-base.with-issue-attachments-delete.confirmation-content",defaultMessage:"Once you delete, it's gone for good."}});function sh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable
}))),s.push.apply(s,n)}return s}function nh(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sh(Object(s),!0).forEach((function(t){ah(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sh(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ah(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ih(){return(ih=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var rh=(e,t="filmStripView")=>s=>{
const n=Object(Us.g)(),[{value:{attachments:r}},{deleteAttachment:o}]=Object(Fs.a)(n),[c,l]=Object(a.useState)(),{formatMessage:u}=Object(xe.c)(),d=Object(Us.i)(),[p]=Object(Vu.d)(d),{createAnalyticsEvent:m}=Object(si.a)(),b=Object(eh.a)(),f=Object(a.useCallback)((e=>{if(void 0!==c){e.stopPropagation();const s=m({action:"clicked",actionSubject:"button"});Object(Wa.h)(s,"deleteAttachmentConfirm",{view:t}),o(n,c),l()}}),[m,o,c,n]),g=Object(a.useCallback)((e=>{e.stopPropagation(),l()}),[]),h=Object(a.useMemo)((()=>(({attachments:e,canDeleteAllAttachments:t,canDeleteOwnAttachments:s,accountIdLoggedInUser:n})=>e.reduce(((e,a)=>nh(nh({},e),{},{[a.id]:"issue"===a.parentName&&(t||null!==n&&null!==a.author&&s&&a.author.accountId===n)})),{}))({attachments:r,canDeleteAllAttachments:p.canDeleteAllAttachments,canDeleteOwnAttachments:p.canDeleteOwnAttachments,accountIdLoggedInUser:b})),[b,r,p.canDeleteAllAttachments,p.canDeleteOwnAttachments])
;return i.a.createElement(i.a.Fragment,null,i.a.createElement(e,ih({},s,{onDeleteAttachment:l,canDeleteAttachmentMap:h})),void 0!==c&&i.a.createElement(ct.b,{appearance:"danger",headerMessage:u(th.confirmationHeader),contentMessage:u(th.confirmationContent),onConfirm:f,onCancel:g,externalId:"issue.attachment.card.delete"}))},oh=s("./src/packages/issue/media-provider/src/controllers/create-auth-provider/index.js"),ch=s("./src/packages/issue/media-provider/src/controllers/token-provider/index.js");function lh(){return(lh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function uh(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var dh=e=>Object(ch.a)((e=>t=>{const{tokenProvider:s}=t,n=uh(t,["tokenProvider"]),{mediaContext:a}=n;if(!a.viewContext)return null;const{clientId:r,serviceHost:o}=a.viewContext,c={authProvider:Object(oh.a)(s,r,o)};return i.a.createElement(e,lh({viewMediaClientConfig:c},n))})(e)),ph=s("./src/packages/issue/issue-view/src/actions/card-cover-actions.js");const mh=()=>({type:"SCROLL_TO_ATTACHMENT_COMMENT"}),bh=()=>({type:"SCROLL_TO_ATTACHMENT_WORKLOG"});var fh=s("./src/packages/issue/issue-view/src/media-feature-flags.js"),gh=s("./src/packages/issue/issue-view/src/selectors/card-cover-selectors.js"),hh=s("./node_modules/@atlaskit/icon/glyph/trash.js"),yh=s.n(hh),Oh=s("./src/packages/issue/attachments/issue-attachments-base/src/common/constants.js");const jh="listView"
;var vh=s("./node_modules/@atlaskit/icon/glyph/watch.js"),Eh=s.n(vh),kh=s("./src/packages/issue/issue-scroll/src/services/main.js"),wh=s("./src/packages/issue/issue-scroll/src/services/types.js"),Sh=Object(v.h)({goToComment:{id:"issue-attachments-base.goto-button.go-to-comment",defaultMessage:"Go to the comment with this attachment"},goToWorklog:{id:"issue-attachments-base.goto-button.go-to-worklog",defaultMessage:"Go to the work log entry with this attachment"},goToField:{id:"issue-attachments-base.goto-button.go-to-field",defaultMessage:"You can find this attachment in the {field} field"}});function Ch(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Ih(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ch(Object(s),!0).forEach((function(t){Th(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ch(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Th(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ph=(e,t)=>e!==Oh.a.customfield?e:t&&t.title||"custom field",_h=({attachmentParent:e,attachmentParentId:t,onScrollToComments:s,onScrollToWorklogs:n,attachmentView:r,issueKey:o,component:c})=>{const{formatMessage:l}=Object(xe.c)(),[,{setScrollTarget:u}]=Object(kh.a)(),[d]=Object(mu.a)(o,`customfield_${t}`),p=e!==Oh.a.comment&&e!==Oh.a.worklog,m=Object(a.useCallback)(((a,i)=>{a.stopPropagation(),a.preventDefault();const o=(e,s)=>{u({type:e,id:t}),s()};switch(e){case Oh.a.comment:o(wh.a.COMMENT,s),Object(Wa.h)(i,"gotoComment",{view:r});break;case Oh.a.worklog:o(wh.a.WORKLOG,n),Object(Wa.h)(i,"gotoWorklog",{view:r})}
}),[e,u,t,s,r,n]),b=Object(a.useCallback)((e=>{"Enter"===e.key&&e.stopPropagation()}),[]),f=Object(a.useMemo)((()=>{switch(e){case Oh.a.comment:return l(Sh.goToComment);case Oh.a.worklog:return l(Sh.goToWorklog);default:return l(Sh.goToField,{field:Ph(e,d)})}}),[e,d,l]),g=()=>p?{}:"listView"===r?{background:"#DFE1E6"}:{background:"#FFFFFF"};return i.a.createElement(je.a,{content:f,position:"top"},i.a.createElement($i.a,{appearance:"subtle",iconBefore:i.a.createElement(Eh.a,{label:f}),onClick:m,onKeyPress:b,theme:(e,t)=>{const{buttonStyles:s,spinnerStyles:n}=e(t);return Ih({buttonStyles:Ih(Ih({},s),{},{display:"flex",justifyContent:"center","&:hover":g(),paddingLeft:"filmStripView"===r?"0px":void 0,paddingRight:"filmStripView"===r?"0px":void 0,margin:"0"})},n)},isDisabled:p,component:c}))};_h.displayName="GoToButton",_h.defaultProps={component:"button"};var xh=_h;function Dh(){return(Dh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Ah="show-icon",Lh=e=>i.a.createElement("svg",Dh({},e,{viewBox:"0 0 24 24"}),i.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},i.a.createElement("path",{d:"M2 11v5h14v-5H2zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),i.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),i.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})));Lh.displayName="hideIcon";const Mh=e=>i.a.createElement("svg",Dh({},e,{viewBox:"0 0 24 24"}),i.a.createElement("g",{transform:"translate(3 3)",fill:"currentColor",fillRule:"evenodd"},i.a.createElement("path",{
d:"M2 11v5h14v-5H2zm0-1V9h14v1-8H2v8zM0 1.995C0 .893.893 0 1.995 0h14.01C17.107 0 18 .893 18 1.995v14.01A1.995 1.995 0 0 1 16.005 18H1.995A1.995 1.995 0 0 1 0 16.005V1.995z",fillRule:"nonzero"}),i.a.createElement("rect",{x:"3",y:"12",width:"8",height:"2",rx:"1"}),i.a.createElement("rect",{x:"13",y:"12",width:"2",height:"2",rx:"1"})));Mh.displayName="showIcon";const Rh=({icon:e,label:t})=>{const s=e===Ah?Mh:Lh;return i.a.createElement(je.a,{position:"top",content:t},i.a.createElement(ii.a,{glyph:s,label:t,size:"small"}))};Rh.displayName="CardCoverIcon";var Nh=Rh,Fh=Object(v.h)({delete:{id:"attachments.delete-attachment-from-attachment-panel",defaultMessage:"Delete"},goto:{id:"attachments.goto-attachment-from-attachment-panel",defaultMessage:"GoTo"},show:{id:"attachments.show-on-card",defaultMessage:"Show on card"},hide:{id:"attachments.hide-on-card",defaultMessage:"Hide on card"},confirmationHeader:{id:"attachments.confirm-delete-attachment-modal-header",
defaultMessage:"Delete this attachment?"},confirmationContent:{id:"attachments.confirm-delete-attachment-modal-text",defaultMessage:"Once you delete, it's gone for good."}});const Uh=(e,t,s,n,a,r,o,l,u)=>{const d=a.formatMessage(Fh.delete);return t===Oh.b?n?[{label:d,handler:()=>o(e),icon:i.a.createElement(yh.a,{label:d})}]:[]:[{label:a.formatMessage(Fh.goto),handler:c.a,icon:i.a.createElement(xh,{attachmentParent:t,attachmentParentId:s,attachmentView:"filmStripView",onScrollToComments:l,onScrollToWorklogs:u,issueKey:r,component:"div"})}]},Vh=(e,t,s,n,a)=>{const r=Number(e),o=s.formatMessage(Fh.hide),c=s.formatMessage(Fh.show);return t&&t.isEnabled&&t.availableAttachmentIds.includes(r)?r===t.attachmentId?[{label:o,handler:()=>{a(r)},icon:i.a.createElement(Nh,{icon:"hide-icon",label:o})}]:[{label:c,handler:()=>{n(t.attachmentId,r)},icon:i.a.createElement(Nh,{icon:Ah,label:c})}]:[]};function Kh(){return(Kh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Wh(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Bh(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Hh={width:156,height:125},$h=e=>i.a.createElement(Qg.a,{key:e,dimensions:Hh});$h.displayName="fakeCard";const Gh=e=>{
const[t,s]=Object(a.useState)(0),[n,r]=Object(a.useState)(0),[o,c]=Object(a.useState)([]),[l,u]=Object(a.useState)(!1),{cardCover:d,intl:p,isMobile:m,isPreview:b,mediaContext:f,onCardCoverHide:g,onCardCoverShow:h,onScrollToComments:y,onScrollToWorklogs:O,viewMediaClientConfig:j,onDeleteAttachment:v,canDeleteAttachmentMap:E}=e,k=Object(Us.g)(),[{value:{attachments:w,totalCount:S},meta:{startAt:C},error:I},{refreshAttachments:T}]=Object(Fs.a)(k),P=Object(a.useCallback)((({offset:e,offsets:t})=>{c(t),s(e)}),[]),_=Object(a.useCallback)(Yg()(T,300),[T]);Object(a.useEffect)((()=>{0===C&&s(0)}),[C]);const x=Object(a.useCallback)((({animate:e,offset:t})=>{const n=o.findIndex((e=>e.left>t))-1;u(e),r(n),s(t),_(k,{startAt:n})}),[o,_,k]),D=w||[],A=Object(a.useMemo)((()=>D.map((e=>({identifier:function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Wh(Object(s),!0).forEach((function(t){Bh(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Wh(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({mediaItemType:"file",id:e.mediaApiFileId},f.viewContext&&null!==f.viewContext.collection?{collectionName:f.viewContext.collection}:{}),selectable:!1,actions:((e,t,s,n,a,i,r,o,c,l,u,d)=>[...Uh(e,t,s,a,i,r,o,u,d),...Vh(e,n,i,c,l)])(e.id,e.parentName,e.parentId,d,E[e.id],p,k,v,h,g,y,O),isLazy:!m,isParentCommentJsdInternal:e.isParentCommentJsdInternal})))),[D,E,d,p,m,k,f.viewContext,g,h,v,y,O]),L=Object(a.useCallback)((e=>{const t={list:e.map((e=>e.identifier))},s=e.map(((e,s)=>{if(b||I)return $h(`card-${s}`);const n=e.isParentCommentJsdInternal;return i.a.createElement(Jg.a,Kh({key:e.identifier.id,mediaClientConfig:j,mediaViewerDataSource:t,useInlinePlayer:!1,dimensions:Hh,shouldOpenMediaViewer:!0,featureFlags:Object(fh.a)(),titleBoxBgColor:n?Re.a.Y75:void 0,
titleBoxIcon:n?"LockFilledIcon":void 0,shouldEnableDownloadButton:Object(F.isFixDownloadButtonAttachmentEnabled)()},e))})),n=S-s.length-C,a=Array.from({length:C}).map(((e,t)=>$h(`card-${t}`))),r=Array.from({length:n}).map(((e,t)=>$h(`card-${S-n+t}`)));return[...a,...s,...r]}),[C,I,b,S,j]),M=Object(a.useCallback)((()=>{T(k,{startAt:n})}),[n,k,T]);return I?i.a.createElement(Ng,{shouldHideImage:!0,onClick:M}):i.a.createElement("div",{"data-test-id":"issue.views.issue-base.content.attachment.filmstrip-panel"},i.a.createElement(Zg.a,{offset:t,animate:l,onSize:P,onScroll:x,mediaClientConfig:j,featureFlags:Object(fh.a)()},L(A)))};Gh.displayName="AttachmentFilmstrip";var qh=at()([rh,dh,v.i,Object(fs.a)((e=>({onCardCoverShow:()=>{e("card-cover-show.click")},onCardCoverHide:()=>{e("card-cover-hide.click")}}))),Object(Xg.a)({externalId:"issue.attachment.card"}),Object(r.connect)((e=>({mediaContext:Object(_.a)(e),isMobile:Object(T.r)(e),cardCover:Object(gh.c)(e)?Object(gh.a)(e):null,
isPreview:Object(P.s)(e)})),(e=>({onCardCoverShow:(t,s)=>{e(Object(ph.d)(t,s))},onCardCoverHide:t=>{e(Object(ph.d)(t))},onScrollToComments:()=>{e(mh())},onScrollToWorklogs:()=>{e(bh())}}))),Object(js.a)()])(Gh),zh=s("./src/packages/platform/ui/error-boundary/src/index.js"),Yh=s("./node_modules/@atlaskit/media-table/dist/es2019/component/mediaTable.js"),Qh=s("./node_modules/@atlaskit/width-detector/dist/es2019/WidthObserver/index.js"),Jh=s("./src/packages/accessibility/src/common/ui/screenreader-text/styled.js"),Zh=s("./src/packages/platform/controllers/tenant-context/src/components/locale/index.js"),Xh=s("./src/packages/issue/attachments/issue-attachments-table/src/ui/empty/assets/cloud.svg"),ey=s.n(Xh),ty=Object(v.h)({emptyStateTitle:{id:"issue-attachments-table.empty.empty-state-title",defaultMessage:"All your attachments in one place"},emptyStateDescription:{id:"issue-attachments-table.empty.empty-state-description",
defaultMessage:"Attachments can be added to paragraph fields, comments, and worklog entries. When you have attachments on this issue, you can view and download them here."}});const sy=()=>{const{formatMessage:e}=Object(xe.c)();return i.a.createElement(Bn.a,{imageUrl:ey.a,header:e(ty.emptyStateTitle),description:e(ty.emptyStateDescription)})};sy.displayName="NoAttachments";var ny=sy,ay=Object(v.h)({fileName:{id:"issue-attachments-table.file-name",defaultMessage:"Name"},size:{id:"issue-attachments-table.size",defaultMessage:"Size"},date:{id:"issue-attachments-table.date",defaultMessage:"Date added"},loadingAriaLabel:{id:"issue-attachments-table.loading-aria-label",defaultMessage:"loading attachments"},loadedAriaLabel:{id:"issue-attachments-table.loaded-aria-label",defaultMessage:"Attachments table loaded. Press tab to enter the table"},internalOnlyLabel:{id:"issue-attachments-table.internal-only-label",defaultMessage:"Internal only"}})
;const iy=Y.default.span(["white-space:nowrap;"]),ry=Y.default.div(["margin:0 -","px;min-width:calc(100% + ","px);."," &{opacity:0;}.",":hover &,.",":focus &,.",":focus-within &{opacity:1;}"],Q.e,2*Q.e,"jira-issue-view-attachments-table","jira-issue-view-attachments-table","jira-issue-view-attachments-table","jira-issue-view-attachments-table"),oy=Y.default.div(["display:flex;flex-direction:column;align-items:center;.","{background-color:",";&:hover{background-color:",";}button:hover{background:",";}}"],"media-table-row-highlighted",Re.a.Y50,Re.a.Y75,Re.a.Y100);var cy=s("./node_modules/moment/moment.js"),ly=s.n(cy),uy=s("./node_modules/@atlaskit/media-client/dist/es2019/utils/getMediaTypeFromMimeType.js"),dy=s("./node_modules/@atlaskit/media-ui/dist/es2019/humanReadableSize.js");const py="date",my="deleteOrGoto",by="download",fy="file",gy="size";var hy=Object(v.h)({delete:{id:"issue-attachments-table.delete-button.delete",defaultMessage:"Delete attachment"}});function yy(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Oy(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yy(Object(s),!0).forEach((function(t){jy(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yy(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jy(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const vy=({attachmentId:e,onDeleteAttachment:t})=>{const s=Object(xe.c)(),{createAnalyticsEvent:n}=Object(si.a)(),r=Object(a.useCallback)((s=>{s.stopPropagation();const a=n({action:"clicked",actionSubject:"button"});Object(Wa.h)(a,"deleteAttachment"),t(e)}),[e,n,t]),o=Object(a.useCallback)((e=>{
"Enter"===e.key&&e.stopPropagation()}),[]);return i.a.createElement($i.a,{appearance:"subtle",iconAfter:i.a.createElement(yh.a,{label:s.formatMessage(hy.delete)}),onClick:r,onKeyPress:o,theme:(e,t)=>{const{buttonStyles:s,spinnerStyles:n}=e(t);return Oy({buttonStyles:Oy(Oy({},s),{},{display:"flex",justifyContent:"center","&:hover":{background:"#DFE1E6"},margin:"0"})},n)}})};vy.displayName="DeleteButton";var Ey=vy,ky=s("./node_modules/@atlaskit/icon/glyph/lock-filled.js"),wy=s.n(ky);const Sy=Y.default.div(["display:flex;align-content:center;align-items:center;padding-right:4px;"]),Cy=()=>{const{formatMessage:e}=Object(xe.c)(),t=e(ay.internalOnlyLabel);return i.a.createElement(je.a,{content:t},i.a.createElement(Sy,null,i.a.createElement(wy.a,{primaryColor:Re.a.DN80A,label:t})))};Cy.displayName="InternalAttachmentIcon";var Iy=Cy,Ty=s("./node_modules/@atlaskit/media-ui/dist/es2019/media-type-icon.js"),Py=s("./node_modules/@atlaskit/media-ui/dist/es2019/truncateText.js")
;const _y=Y.default.div(["display:flex;align-content:center;align-items:center;"]),xy=Y.default.div(["min-width:0;width:100%;span:first-of-type{&::first-letter{text-transform:capitalize;}}"]),Dy=({mediaType:e,icon:t,text:s,startFixedChars:n,endFixedChars:a})=>i.a.createElement(_y,null,e&&i.a.createElement(Ty.b,{type:e}),t,i.a.createElement(xy,null,i.a.createElement(je.a,{content:s},i.a.createElement(Py.a,{text:s,startFixedChars:n,endFixedChars:a}))));Dy.displayName="NameCell";var Ay=Dy;function Ly(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function My(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ly(Object(s),!0).forEach((function(t){Ry(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ly(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Ry(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Ny=(e,t,s,{formatMessage:n})=>i.a.createElement("div",{"aria-label":`${e} ${s?`- ${n(ay.internalOnlyLabel)}`:""}`},i.a.createElement(iy,{"aria-hidden":!0},i.a.createElement(Ay,{text:e,mediaType:Object(uy.a)(null==t?"":t),startFixedChars:3,endFixedChars:4,icon:s?i.a.createElement(Iy,null):void 0})));Ny.displayName="createNameCell";const Fy=(e,t,s,n,a,r,o,c,l)=>t===Oh.b?n?i.a.createElement(ry,null,i.a.createElement(Ey,{attachmentId:e,onDeleteAttachment:a})):null:c?null:i.a.createElement(ry,null,i.a.createElement(xh,{attachmentParent:t,attachmentParentId:s,attachmentView:jh,onScrollToComments:r,onScrollToWorklogs:o,issueKey:l}));Fy.displayName="createDeleteOrGoToCell";const Uy=e=>void 0===e||e>=430,Vy=Object(Cc.a)(((e,t,s,n,a,i,r,o,c,l)=>{const u=Uy(t);return e.map((e=>({data:My(My({
file:Ny(e.filename,e.mimetype,e.isParentCommentJsdInternal,l),date:ly()(1e3*e.createdDate).locale(s).format("DD MMM YYYY h:mma")},u?{size:Object(dy.a)(e.filesize)}:{}),{},{deleteOrGoto:Fy(e.id,e.parentName,e.parentId,a[e.id],n,r,i,o,c)}),identifier:{mediaItemType:"file",id:e.mediaApiFileId},rowProps:{className:e.isParentCommentJsdInternal?"media-table-row-highlighted":""}})))})),Ky=e=>{
const{viewMediaClientConfig:t,onPreviewOpen:s=c.a,onPreviewClose:n=c.a,onDeleteAttachment:r,canDeleteAttachmentMap:o,onScrollToComments:l=c.a,onScrollToWorklogs:u=c.a,isInModal:d=!1}=e,p=Object(xe.c)(),{createAnalyticsEvent:m}=Object(si.a)(),b=Object(a.useRef)(!1),f=Object(Us.g)(),[{error:g,loading:h,meta:y,value:O},j]=Object(Fs.a)(f),{orderDirection:v,orderField:E,startAt:k}=y,{attachments:w,totalCount:S}=O,{refreshAttachments:C,setOrderDirection:I,setOrderField:T}=j,P=Object(Cc.a)(Yg()(C,50)),_=Object(a.useMemo)((()=>Math.ceil((k+1)/6)),[k]),[x,D]=Object(a.useState)(_),[A,L]=Object(a.useState)(void 0),M=Yg()(L,100),R=Object(a.useCallback)((()=>{C(f,{orderDirection:v,orderField:E,startAt:6*(_-1)})}),[f,v,E,_,C]),N=Object(a.useCallback)((e=>{b.current=!0,D(e),P(f,{orderDirection:v,orderField:E,startAt:6*(e-1)})}),[P,f,v,E]),F=Object(a.useCallback)(((e,t)=>{b.current=!0;const s=(e=>{switch(e){case gy:return Oh.e.FILESIZE;case fy:return Oh.e.FILENAME;default:return Oh.e.CREATED}
})(e),n=m({action:"sorted",actionSubject:"dynamicTable"});T(s),I(t),Object(Wa.h)(n,"issueAttachments",{key:e}),P(f,{orderDirection:t,orderField:s})}),[m,P,f,I,T]),U=Object(Zh.a)();if(g)return i.a.createElement(Ng,{shouldHideImage:e.shouldHideErrorImage,onClick:R});if(0===S)return i.a.createElement(ny,null);const V=Vy(w||[],A,U,r,o,u,l,d,f,p),K=((e,{formatMessage:t})=>({cells:[{key:fy,content:i.a.createElement(iy,null,t(ay.fileName)),isSortable:!0},...Uy(e)?[{key:gy,content:t(ay.size),isSortable:!0,inlineStyles:{width:"66px"}}]:[],{key:py,content:t(ay.date),isSortable:!0,inlineStyles:{width:"188px"}},{key:my,content:"",inlineStyles:{width:"36px"},width:10},{key:by,content:"",inlineStyles:{width:"48px"}}]}))(A,p),W=(e=>{switch(e){case Oh.e.FILESIZE:return gy;case Oh.e.FILENAME:return fy;case Oh.e.CREATED:return py;default:return}})(E);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Qh.a,{offscreen:!0,setWidth:e=>{M(e)}
}),h&&i.a.createElement(i.a.Fragment,null,b.current&&i.a.createElement(Jh.a,{"aria-live":"assertive"},p.formatMessage(ay.loadingAriaLabel)),i.a.createElement(qg,{pageNumber:x,totalCount:S})),!h&&i.a.createElement(i.a.Fragment,null,b.current&&i.a.createElement(Jh.a,{"aria-live":"assertive"},p.formatMessage(ay.loadedAriaLabel)),i.a.createElement(oy,null,i.a.createElement(Yh.a,{items:V,mediaClientConfig:t,columns:K,itemsPerPage:6,totalItems:S||0,pageNumber:_,onSetPage:N,onSort:F,sortKey:W,sortOrder:v,onPreviewOpen:s,onPreviewClose:n,rowProps:{className:"jira-issue-view-attachments-table"}}))))};Ky.defaultProps={shouldHideErrorImage:!1};var Wy=rh(Ky,jh);const By=Y.default.div(["padding:","px;min-width:","px;position:relative;table{width:100%;}"],Q.e/2,37*Q.e),Hy=({viewMediaClientConfig:e,onScrollToWorklogs:t,onScrollToComments:s})=>i.a.createElement(zh.b,{id:"issue.details.attachment.list-view"},i.a.createElement(By,null,i.a.createElement(Wy,{shouldHideErrorImage:!0,
viewMediaClientConfig:e,onScrollToWorklogs:t,onScrollToComments:s})));Hy.displayName="ListView";const $y=dh(Hy);var Gy=Object(r.connect)((e=>({issueKey:Object(T.x)(e),mediaContext:Object(_.a)(e)})),(e=>({onScrollToComments:()=>e(mh()),onScrollToWorklogs:()=>e(bh())})))($y);var qy=({attachmentError:e,refreshAttachments:t,isPreview:s,totalCount:n})=>{const[r]=Object(jd.b)("jira.user.issue.attachment.view"),o=Object(Us.g)(),c=Object(a.useCallback)((()=>{t(o)}),[o,t]);if(e)return i.a.createElement(Ng,{shouldHideImage:!0,onClick:c});switch(r){case"list-view":return s?i.a.createElement(qg,{totalCount:n}):i.a.createElement(Gy,null);case"strip-view":default:return i.a.createElement(qh,null)}},zy=Object(r.connect)((e=>({isPreview:Object(P.s)(e)
})),{})(qy),Yy=s("./src/packages/platform/observability/errors-handling/src/utils/fire-error-analytics.js"),Qy=s("./src/packages/platform/ui/flags/src/services/index.js"),Jy=s("./src/packages/issue/attachments/issue-attachments-base/src/services/index.js");const Zy=Object(fm.a)(Jy.a,{selector:e=>e.meta.isDeleteAllDialogOpen}),Xy={isDeleting:!1,didDelete:!1,error:void 0};var eO=Object(v.h)({heading:{id:"attachments.delete-all-dialog.heading",defaultMessage:"Delete attachments"},deleteDetailsMessage:{id:"attachments.delete-all-dialog.delete-details-message",defaultMessage:"You can't delete {nonDeletableCount} of these attachments. Either you don't have permission, or they're in issue fields and comments."},deletingAllAttachmentsMessage:{id:"attachments.delete-all-dialog.deleting-all-attachments",defaultMessage:"This action will permanently delete all {deletableCount} attachments in the attachments panel."},deletingAllAttachmentsMessageSingle:{
id:"attachments.delete-all-dialog.deleting-all-attachments-single",defaultMessage:"This action will permanently delete the 1 attachment in the attachments panel."},deletingSomeAttachmentsMessage:{id:"attachments.delete-all-dialog.deleting-some-attachments",defaultMessage:"This action will permanently delete all other attachments in the attachments panel."},cancelButton:{id:"attachments.delete-all-dialog.cancel-button-label",defaultMessage:"Cancel"},deleteButton:{id:"attachments.delete-all-dialog.delete-button-label",defaultMessage:"Delete"},deletingButton:{id:"attachments.delete-all-dialog.deleting-button-label",defaultMessage:"Deleting"},deleteAllFailedNotificationTitle:{id:"attachments.delete-all-dialog.delete-all-failed-notification-title",defaultMessage:"We couldn\u2019t delete all your attachments"},deleteAllFailedNotificationDescription:{id:"attachments.delete-all-dialog.delete-all-failed-notification-description",
defaultMessage:"We didn\u2019t finish deleting all your attachments for {issueKey}. Check your connection and then try again."}});const tO=Y.default.div(["background-color:",";display:flex;margin-bottom:","px;padding:","px;"],Re.a.Y50,2*Q.e,Q.e),sO=Y.default.div(["padding-left:","px;"],Q.e),{safeErrorWithoutCustomerData:nO}=O.a,aO=()=>{const e=Object(Us.g)(),{formatMessage:t}=Object(xe.c)(),{createAnalyticsEvent:s}=Object(si.a)(),[{value:{totalCount:n,deletableCount:r}},{refreshAttachments:o}]=Object(Fs.a)(e),[c,{setDeleteAllDialogOpen:l}]=Zy(),{showFlag:u}=Object(Qy.f)(),[{isDeleting:d,error:p},m]=(e=>{const[t,{setDeleteAllDialogOpen:s}]=Zy(),[,{refreshAttachments:n}]=Object(Fs.b)(),[i,r]=Object(a.useState)(Xy),o=Object(Qi.a)();return Object(a.useEffect)((()=>{t||r(Xy)}),[t]),[i,Object(a.useCallback)((async()=>{r({isDeleting:!0,didDelete:!1,error:void 0});try{await Object(kc.a)(((e,t)=>`${e}/rest/api/2/issue/${t}/attachments`)(o,e)),s(!1),n(e),r({isDeleting:!1,didDelete:!0,
error:void 0})}catch(t){r({isDeleting:!1,didDelete:!1,error:t})}}),[o,e,n,s])]})(e),b="number"==typeof r?r:0,f="number"==typeof n?n:0,g=b===f;Object(a.useEffect)((()=>{p&&(nO("issue.attachments.delete-all",p.message||p.toString()),Object(Yy.a)({error:p,meta:{id:"deleteAllDialog",packageName:"jiraIssueView",teamName:"bento"}}),u({type:"error",title:eO.deleteAllFailedNotificationTitle,description:[eO.deleteAllFailedNotificationDescription,{issueKey:e}],isAutoDismiss:!0}))}),[p,e,u]);const h=Object(a.useCallback)((()=>{const t=m(),n=s({action:"submitted",actionSubject:"form"});Object(Wa.h)(n,"deleteAllAttachmentsDialog",{deletableCount:b}),t&&o(e)}),[s,b,e,m,o]),y=Object(a.useCallback)((()=>{l(!1);const e=s({action:"closed",actionSubject:"modalDialog"});Object(Wa.h)(e,"deleteAllAttachmentsDialog",{deletableCount:b})}),[s,b,l]),O=Object(a.useCallback)((()=>g?1===b?t(eO.deletingAllAttachmentsMessageSingle):t(eO.deletingAllAttachmentsMessage,{deletableCount:b
}):t(eO.deletingSomeAttachmentsMessage)),[g,b,t]);return"number"==typeof f&&0!==b&&c?i.a.createElement($.f,null,i.a.createElement($.g,{actions:[{text:t(d?eO.deletingButton:eO.deleteButton),onClick:h,isDisabled:d},{text:t(eO.cancelButton),onClick:y}],heading:t(eO.heading),appearance:"danger",width:"small",onClose:y,shouldCloseOnOverlayClick:!0,isHeadingMultiline:!1,body:()=>i.a.createElement($.b,null,!g&&i.a.createElement(tO,null,i.a.createElement(el.a,{primaryColor:Re.a.Y500,label:""}),i.a.createElement(sO,null,t(eO.deleteDetailsMessage,{nonDeletableCount:f-b}))),i.a.createElement("p",null,O()))})):null};aO.displayName="Dialog";var iO=Object(a.memo)(aO),rO=s("./src/packages/issue/issue-view/src/selectors/attachment-selector.js"),oO=s("./src/packages/issue/issue-view/src/views/common/button/square-add-icon-button.js"),cO=Object(v.h)({title:{id:"attachments.heading.title",defaultMessage:"Attachments {totalCount}"},attachmentsMenuAriaLabel:{id:"attachments.heading.attachmentsMenuLabel",
defaultMessage:"Attachments Menu"},addAttachmentAriaLabel:{id:"attachments.heading.addAttachmentLabel",defaultMessage:"Add Attachment"}});const lO=Y.default.div(["margin-left:","px;"],.75*Q.e),uO=({canCreateAttachment:e,onClick:t})=>{const{createAnalyticsEvent:s}=Object(si.a)(),{formatMessage:n}=Object(xe.c)(),r=Object(a.useCallback)((()=>{t();const e=s({action:"clicked",actionSubject:"button"});Object(Wa.h)(e,"addAttachment")}),[s,t]);return e?i.a.createElement(lO,null,i.a.createElement(oO.a,{label:n(cO.addAttachmentAriaLabel),onClick:r})):null};uO.displayName="AddAttachments";var dO=Object(r.connect)((e=>({canCreateAttachment:!Object(T.s)(e)&&Object(rO.b)(e)})),(e=>({onClick:()=>e(Object(Ms.b)())})))(uO),pO=Object(v.h)({deleteAll:{id:"attachments.heading.delete-all",defaultMessage:"Delete all"}});const mO=()=>{const e=Object(Us.g)(),{formatMessage:t}=Object(xe.c)(),{createAnalyticsEvent:s}=Object(si.a)(),[{value:n}]=Object(Fs.a)(e),[,{setDeleteAllDialogOpen:a}]=Zy()
;if("number"!=typeof n.deletableCount||n.deletableCount<=0)return null;const{deletableCount:r}=n;return i.a.createElement(bi.a,{key:"delete-all-attachments",onClick:()=>{a(!0);const e=s({action:"clicked",actionSubject:"dropdownItem"});Object(Wa.h)(e,"deleteAllAttachmentsDialog",{deletableCount:r})}},t(pO.deleteAll))};mO.displayName="DeleteAllItem";var bO=mO,fO=s("./node_modules/@atlaskit/badge/dist/es2019/components/index.js"),gO=s("./node_modules/file-saver/FileSaver.js"),hO=s("./src/packages/issue/attachments/issue-attachments-base/src/services/messages.js"),yO=s("./src/packages/issue/attachments/issue-attachments-base/src/common/utils.js");const OO=Object(fm.a)(Jy.a,{selector:(e,t)=>((e,t)=>e.issueAttachments[t]||yO.c)(e,t).isDownloading});var jO=Object(v.h)({downloadAll:{id:"attachments.heading.download-all",defaultMessage:"Download all"},downloading:{id:"attachments.heading.downloading",defaultMessage:"Downloading attachments"}});const vO=Object(a.memo)((e=>{
const{issueId:t,issueKey:s}=e,{formatMessage:n}=Object(xe.c)(),{createAnalyticsEvent:r}=Object(si.a)();if(!t)return null;const[{value:{totalCount:o}}]=Object(Fs.a)(s),[c,l]=((e,t)=>{const s=`${t}_attachments.zip`,[n,{setIsDownloading:i}]=OO(t),r=`${Object(Qi.a)()}/secure/issueAttachments/${e}.zip`,{createAnalyticsEvent:o}=Object(si.a)(),{showFlag:c,dismissFlag:l}=Object(Qy.f)(),u=Object(a.useRef)();let d=Object(a.useCallback)((()=>{}),[]);const p=Object(a.useCallback)((()=>{u.current&&l(u.current)}),[l]),m=Object(a.useCallback)(((e,s)=>{let n=null,a=e.toString();e instanceof Hc.b&&(n=e.statusCode,a=e.message),i(t,!1),Object(Yy.a)({error:e,meta:{id:s,packageName:"jiraIssueAttachmentsBase",teamName:"bento"}}),xn.h.safeErrorWithoutCustomerData("issue.attachments.download-all",a);const r=500===n?hO.a.downloadFailedExceedFileSizeDescription:hO.a.downloadFailedDescription;u.current=c({type:"error",title:hO.a.downloadFailedTitle,description:[r,{issueKey:t}],actions:[{onClick:d,
content:hO.a.tryAgain}]})}),[t,d,i,c]),b=Object(a.useCallback)((async()=>{i(t,!0),Object(Wa.b)(o({}),"downloadAll requested"),c({type:"success",title:hO.a.downloadStartTitle,description:hO.a.downloadStartDescription,isAutoDismiss:!0}),fetch(r).then((e=>{if(!e.ok)throw new Hc.b(e.status,e.statusText);return Object(Wa.b)(o({}),"downloadAll started"),e.blob()})).then((e=>{try{Object(gO.saveAs)(e,s),i(t,!1),Object(Wa.b)(o({}),"downloadAll completed")}catch(n){m(n,"useDownloadAllService-save-file")}})).catch((e=>m(e,"useDownloadAllService-fetch")))}),[o,s,t,m,r,i,c]);return d=Object(a.useCallback)((()=>{b(),p()}),[b,p]),[n,b]})(t,s),u=Object(a.useCallback)((()=>{l();const e=r({action:"clicked",actionSubject:"dropdownItem"});Object(Wa.h)(e,"downloadAllAttachments",{totalMedia:o})}),[r,l,o]);return i.a.createElement(bi.a,{key:"download-all-attachments",onClick:u,elemAfter:i.a.createElement(fO.a,null,o),isDisabled:c},n(c?jO.downloading:jO.downloadAll))}));var EO=Object(r.connect)((e=>({
issueId:Object(T.w)(e),issueKey:Object(T.x)(e)})),{})(vO),kO=Object(v.h)({switchToListView:{id:"attachments.heading.switch-to-listView",defaultMessage:"Switch to list view"},switchToStripView:{id:"attachments.heading.switch-to-strip-view",defaultMessage:"Switch to strip view"}});var wO=Object(a.memo)((({refreshAttachments:e})=>{const t=Object(Us.g)(),{formatMessage:s}=Object(xe.c)(),[n,{setValue:r}]=Object(jd.b)("jira.user.issue.attachment.view"),{createAnalyticsEvent:o}=Object(si.a)(),c=Object(a.useCallback)((s=>()=>{r(s),e(t);const n=o({action:"clicked",actionSubject:"dropdownItem"});Object(Wa.h)(n,"switchAttachmentsView",{view:s})}),[o,t,e,r]);switch(n){case"list-view":return i.a.createElement(bi.a,{onClick:c("strip-view")},s(kO.switchToStripView));case"strip-view":default:return i.a.createElement(bi.a,{onClick:c("list-view")},s(kO.switchToListView))}}));var SO=({refreshAttachments:e,isPreview:t})=>{const{formatMessage:s}=Object(xe.c)()
;return i.a.createElement(i.a.Fragment,null,i.a.createElement(fi.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:i.a.createElement(Ym.a,{size:"small",label:s(cO.attachmentsMenuAriaLabel)}),isDisabled:t},position:"bottom right"},i.a.createElement(gi.a,null,i.a.createElement(wO,{refreshAttachments:e}),i.a.createElement(EO,null),i.a.createElement(bO,null))),i.a.createElement(Ba.a,{onMount:e=>Object(Wa.b)(e,"AttachmentListViewOnboarding mounted")}))},CO=Object(r.connect)((e=>({isPreview:Object(P.s)(e)})),{})(SO);var IO=({totalCount:e,refreshAttachments:t})=>{const{formatMessage:s}=Object(xe.c)();return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ra.e,null,s(cO.title,{totalCount:e>0?`(${e})`:""})),i.a.createElement(Ra.d,null,i.a.createElement(CO,{refreshAttachments:t}),i.a.createElement(dO,null)))};const TO=()=>{const e=Object(Us.g)(),[{error:t,value:{totalCount:s}},{refreshAttachments:n}]=Object(Fs.a)(e)
;return 0===s?null:i.a.createElement("div",{"data-test-id":"issue.views.issue-base.content.attachment.panel"},i.a.createElement(Ra.c,null,i.a.createElement(IO,{totalCount:s,refreshAttachments:n})),i.a.createElement(zy,{attachmentError:t,totalCount:s,refreshAttachments:n}),i.a.createElement(iO,null))};TO.displayName="Attachments";const PO=()=>i.a.createElement(R.a,{id:"issue.base.content.attachments-panel"},i.a.createElement(N.a,{id:"base.content.attachments-panel",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},i.a.createElement(TO,null)));PO.displayName="AttachmentsWithMonitoring";var _O=PO;const xO=()=>({type:"SUBTASK_QUICK_ADD_CLICKED"}),DO=()=>({type:"ISSUE_IN_EPIC_QUICK_ADD_CLICKED"}),AO=()=>({type:"CHILD_ISSUE_QUICK_ADD_CLICKED"}),LO=(e,t)=>({type:"CHILD_ISSUE_ADD_SUCCESS",payload:{childIssue:e,fieldsData:t}}),MO=()=>({type:"CHILD_ISSUE_PANEL_ADD_CLICKED"})
;var RO=s("./src/packages/issue/issue-view/src/actions/issue-navigation-actions.js"),NO=s("./src/packages/issue/issue-view/src/actions/prefetch-issues-actions.js");const FO=Object(fn.createSelector)(P.H,(e=>e.childPanel)),UO=Object(fn.createSelector)(FO,(e=>e.subtaskQuickAddClickCount)),VO=Object(fn.createSelector)(FO,(e=>e.issueInEpicQuickAddClickCount)),KO=Object(fn.createSelector)(FO,(e=>e.childIssueQuickAddClickCount));var WO=s("./src/packages/issue/issue-view/src/selectors/children-issues-selector.js");const BO="CHILD_ISSUE_ADDED",HO="ISSUE_CHILDREN_ORDER_CHANGED",$O={[BO]:BO,[HO]:HO};var GO=s("./src/packages/platform/utils/app-base/src/index.js"),qO=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/app-style/index.js"),zO=s("./src/packages/platform/ui/flags/src/ui/dispatcher/index.js"),YO=s("./src/packages/platform/utils/shallow-equal/src/index.js"),QO=s("./src/packages/platform/services/issue/src/components/context/consumer.js"),JO=Object(v.h)({
linkParentErrorTitle:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-title",defaultMessage:"We couldn't link the child issue"},linkParentErrorDescription:{id:"issue.views.common.child-issues-panel.flags.link-parent-error-description",defaultMessage:"The issue was created but the linking failed. Head over to your board and try again."},reorderErrorTitle:{id:"issue.views.common.child-issues-panel.flags.reorder-error-title",defaultMessage:"We couldn't reorder those issues"},reorderErrorDescription:{id:"issue.views.common.child-issues-panel.flags.reorder-error-description",defaultMessage:"Wait a few moments, then give it another try."}}),ZO=e=>{switch(e.type){case"state.entities.LINK_PARENT_FAILURE":return{type:"error",title:JO.linkParentErrorTitle,description:JO.linkParentErrorDescription};case"state.entities.REORDER_CHILDREN_FAILED":return{type:"error",title:JO.reorderErrorTitle,description:JO.reorderErrorDescription};default:return}};const XO=e=>({setState:t})=>{t({
sortableIssueIds:e})},ej=e=>({setState:t})=>{t({sortBy:e})},tj=Object(bm.a)({name:"child-issues",initialState:{sortableIssueIds:[],sortBy:null},actions:n}),sj=Object(fm.a)(tj,{selector:e=>e.sortableIssueIds}),nj=Object(fm.a)(tj,{selector:e=>e.sortBy}),aj=Object(cr.a)(tj),ij=()=>{const[e,{setSortableIssueIds:t}]=sj(),s=Object(a.useCallback)((e=>t(e)),[t]);return[e,Object(a.useMemo)((()=>({setSortableIssueIds:s})),[s])]},rj=()=>{const[e,{setSortBy:t}]=nj(),s=Object(a.useCallback)((e=>{t(e)}),[t]);return[e,Object(a.useMemo)((()=>({setSortBy:s})),[s])]};function oj(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function cj(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?oj(Object(s),!0).forEach((function(t){lj(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):oj(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function lj(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function uj(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const dj=["summary","issuetype","parent","project"],pj=e=>!!Object.keys(e).find((t=>!(e=>dj.find((t=>e===t)))(t)&&!e[t].hasDefaultValue&&e[t].required));var mj=s("./node_modules/redux-observable/lib/es/index.js")
;const bj=e=>e.context,fj=e=>e.entities,gj=e=>e.ui,hj=Object(fn.createSelector)(fj,(e=>e.issues||[])),yj=Object(fn.createSelector)(hj,(e=>e.filter((e=>"DONE"===e.statusCategory)))),Oj=Object(fn.createSelector)(hj,(e=>e.filter((e=>"DONE"!==e.statusCategory)))),jj=Object(fn.createSelector)(hj,(e=>e.filter((e=>"IN_PROGRESS"===e.statusCategory)))),vj=Object(fn.createSelector)(fj,(e=>e.issueHierarchyLevel)),Ej=e=>Object(fn.createSelector)(hj,(t=>bs()(t,(t=>t.id===e)))),kj=Object(fn.createSelector)(fj,(e=>e.issueTypes)),wj=Object(fn.createSelector)(kj,(e=>`issuetype in (${e.map((e=>e.id)).join(",")})`)),Sj=Object(fn.createSelector)(gj,(e=>e.addClickCount)),Cj=Object(fn.createSelector)(gj,(e=>e.childPanelView)),Ij=Object(fn.createSelector)(gj,(e=>e.childCreateSummary)),Tj=Object(fn.createSelector)(gj,kj,((e,t)=>e.selectedIssueType||t[0])),Pj=Object(fn.createSelector)(gj,(e=>e.hideDone)),_j=Object(fn.createSelector)(gj,(e=>e.fetchIssueTypesStatus)),xj=Object(fn.createSelector)(_j,(e=>"COMPLETE"===e)),Dj=Object(fn.createSelector)(bj,(e=>e.baseUrl)),Aj=(Object(fn.createSelector)(bj,(e=>e.locale)),
Object(fn.createSelector)(bj,(e=>e.childIssuesPanelType))),Lj=Object(fn.createSelector)(Aj,(e=>!!e&&"classicSubtasks"===e)),Mj=Object(fn.createSelector)(Aj,(e=>!!e&&"classicProjectEpicChildren"===e)),Rj=Object(fn.createSelector)(Aj,(e=>!!e&&"nextGenChildren"===e)),Nj=Object(fn.createSelector)(bj,(e=>e.supportsIssueCreation)),Fj=Object(fn.createSelector)(bj,xj,((e,t)=>e.requiresFullCreate||!t)),Uj=Object(fn.createSelector)(bj,(e=>e.parentKey)),Vj=Object(fn.createSelector)(bj,(e=>e.parentId)),Kj=Object(fn.createSelector)(bj,(e=>e.customFieldIdRank)),Wj=Object(fn.createSelector)(bj,(e=>e.epicLinkFieldKey)),Bj=Object(fn.createSelector)(bj,(e=>e.projectId)),Hj=Object(fn.createSelector)(bj,(e=>e.messages||{})),$j=Object(fn.createSelector)(Hj,(e=>e.title)),Gj=Object(fn.createSelector)(Hj,(e=>e.noValueText||null)),qj=Object(fn.createSelector)(bj,(e=>e.onNavigateToNewIssue)),zj=Object(fn.createSelector)(bj,(e=>e.onChange)),Yj=(Object(fn.createSelector)(bj,(e=>e.isIssueViewComplete)),
Object(fn.createSelector)(bj,(e=>null===e.user||""===e.user))),Qj=Object(fn.createSelector)(bj,(e=>e.projectType)),Jj=Object(fn.createSelector)(bj,(e=>e.application)),Zj=Object(fn.createSelector)(bj,(e=>e.edition)),Xj=e=>"nextGenChildren"===e||"classicProjectEpicChildren"===e,ev=Object(fn.createSelector)(Aj,Xj);var tv=(e,t)=>e.ofType("state.entities.LINK_CHILD_SUCCESS","state.entities.REORDER_CHILDREN_REQUEST","state.entities.REORDER_CHILDREN_FAILED","state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS").do((e=>{try{const s=t.getState(),n=zj(s),a=Aj(s);switch(e.type){case"state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS":n({type:$O.CHILD_ISSUE_ADDED,meta:{childIssue:e.payload.childIssue,fieldsData:e.payload.fieldsData}});break;case"state.entities.LINK_CHILD_SUCCESS":n({type:$O.CHILD_ISSUE_ADDED,meta:{childIssue:e.payload.linkedChild}});break;case"state.entities.REORDER_CHILDREN_REQUEST":{
const{currentOrder:t,newOrder:s,currentIndex:i,newIndex:r}=e.payload,{id:o}=t[i],c=o?[Object(rr.j)(o)]:[],l=r>i,u=Number((s[l?r-1:r+1]||{}).id);"nextGenChildren"===a&&n({type:$O.ISSUE_CHILDREN_ORDER_CHANGED,meta:{issueIds:c,rankId:u,isRankAfter:l}});break}case"state.entities.REORDER_CHILDREN_FAILED":{const{originalOrder:t,originalIndex:s,newIndex:i}=e.payload,{id:r}=t[s],o=r?[Object(rr.j)(r)]:[],c=s>i,l=Number((t[c?s-1:s+1]||{}).id);"nextGenChildren"===a&&l&&n({type:$O.ISSUE_CHILDREN_ORDER_CHANGED,meta:{issueIds:o,rankId:l,isRankAfter:c}});break}}}catch(s){xn.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.change-notification","Failed to call onChange callback",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}})).ignoreElements(),sv=s("./node_modules/rxjs/Rx.js");const nv=(e,t)=>({type:"state.entities.CREATE_CHILD_REQUEST",payload:{optimisticUiChildIssue:e},meta:{analyticsEvent:t}}),av=(e,t,s,n=!1)=>({
type:"state.entities.CREATE_CHILD_SUCCESS",payload:{optimisticId:e,createdChild:t,usedGlobalCreateDialog:n},meta:{analyticsEvent:s}}),iv=(e,t,s)=>({type:"state.entities.LINK_CHILD_SUCCESS",payload:{issueId:e,linkedChild:t},meta:{analyticsEvent:s}}),rv=e=>({type:"state.entities.LINKING_ISSUE_RETRY_FAILURE",payload:{issueId:e}}),ov=e=>({type:"state.entities.FETCH_SINGLE_CHILD_SUCCESS",payload:{childIssue:e}}),cv=()=>({type:"state.entities.FETCH_DETAILS_FOR_ISSUES_REQUEST"}),lv=(e,t,s,n)=>({type:"state.entities.REORDER_CHILDREN_FAILED",payload:{originalOrder:e,newOrder:t,originalIndex:s,newIndex:n}}),uv=e=>({type:"state.entities.REORDER_CHILDREN_SUCCESS",payload:{newOrder:e}});var dv=(e,t)=>e.ofType("state.entities.CHILD_CREATED_IN_FULL_DIALOG").mergeMap((({payload:e,meta:s})=>{const n=t.getState(),{optimisticId:a,createdChild:i}=e;if(!Rj(n))return sv.Observable.of(av(a,i,s.analyticsEvent,!0));const r=Dj(n),o=Bj(n),c=Vj(n)
;if(!o||!c)throw new Error("Attempted to link a child issue without a project or parent issue ID");return sv.Observable.from(((e,t,s,n)=>Object(kc.d)(`${e}/rest/internal/simplified/1.0/projects/${t}/issues/${s}/children`,{body:JSON.stringify({issueIds:[n]})}))(r,o,c,i.id)).map((()=>av(a,i,s.analyticsEvent,!0))).catch((e=>sv.Observable.of(((e,t)=>({type:"state.entities.LINK_PARENT_FAILURE",payload:{optimisticId:e,error:t}}))(a,e))))})),pv=(e,t)=>e.ofType("state.entities.CREATE_CHILD_FAILURE","state.entities.LINK_PARENT_FAILURE","state.entities.LINKING_ISSUE_FAILURE").do((({type:e,payload:{error:s}})=>{const n=t.getState(),a=Aj(n)||"unknown_child",i=Jj(n),r=Zj(n);"state.entities.CREATE_CHILD_FAILURE"===e&&"ValidationError"===s.name?Object(_n.a)({experience:"createIssue",wasExperienceSuccesful:!0,analyticsSource:a,application:i,edition:r}):"AbortError"===s.name||Object(Hc.c)(s)||Object(_n.a)({experience:"createIssue",wasExperienceSuccesful:!1,analyticsSource:a,application:i,edition:r,
additionalAttributes:{traceId:s.traceId,errorMessage:`${e} ${s.message}`}})})).switchMap((()=>sv.Observable.empty()));const mv=(e,t,s)=>Object(kc.e)(`${e}/rest/greenhopper/1.0/epics/${t}/add`,{body:JSON.stringify({ignoreEpics:!0,issueKeys:[s]})});var bv=(e,t,s)=>((e,t)=>Object(kc.d)(`${e}/rest/api/2/issue`,{body:JSON.stringify(t)}))(e,t).then((t=>({id:t.id,issueKey:t.key,issueLink:`${e}/browse/${t.key}`,issueSummary:s.issueSummary,issueTypeIconUrl:s.issueTypeIconUrl,issueTypeName:s.issueTypeName,assigneeUrl:s.assigneeUrl,assigneeDisplayName:s.assigneeDisplayName,isLoading:!1,errorType:void 0})));function fv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fv(Object(s),!0).forEach((function(t){hv(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function hv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var yv=(e,t)=>e.ofType("state.entities.CREATE_CHILD_REQUEST").mergeMap((({payload:e,meta:s})=>{const n=t.getState(),{optimisticUiChildIssue:a}=e;return((e,t,s)=>{const n=Dj(e),a=Bj(e),i=Vj(e),r=Lj(e),o=Rj(e),c=Mj(e),l=Tj(e);if(!a||!i)throw new Error("Attempted to create a new child issue without a project or parent issue ID");const u=r||o,{hasEpicLinkField:d}=l,p=c&&d,m=Wj(e),b={fields:gv(gv({project:{id:a},issuetype:{id:t.issueTypeId},summary:t.issueSummary},u?{parent:{id:i}}:{}),p&&m?{[m]:Uj(e)}:{})};return sv.Observable.from(bv(n,b,t)).mergeMap((e=>c&&!d?sv.Observable.from(mv(n,i,e.id)).map((()=>av(t.id,e,s))).catch((s=>sv.Observable.of(((e,t,s)=>({
type:"state.entities.LINKING_ISSUE_FAILURE",payload:{createdChild:e,optimisticId:t,error:s}}))(e,t.id,s)))):sv.Observable.of(av(t.id,e,s)))).catch((e=>sv.Observable.of(((e,t)=>({type:"state.entities.CREATE_CHILD_FAILURE",payload:{optimisticId:e,error:t}}))(t.id,e))))})(n,a,s.analyticsEvent)}));function Ov(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}var jv=(e,t)=>e.ofType("state.entities.CREATE_CHILD_RETRY").map((({payload:{optimisticId:e},meta:s})=>{const n=t.getState(),a=Ej(e)(n),{isLoading:i,hasError:r}=a,o=Ov(a,["isLoading","hasError"]);return nv(o,s.analyticsEvent)
})),vv=s("./src/packages/issue/issue-fetch-services/src/services/issue-graphql-data/index.js"),Ev=s("./src/packages/issue/issue-view/src/common/service/issue/child-issue-transformer-new.js"),kv=s("./src/packages/issue/issue-view/src/common/service/issue/issue-transformer.js"),wv=s("./src/packages/issue/issue-view/src/common/util/entry/get-project-key.js"),Sv=s("./src/packages/issue/issue-view/src/common/service/issue/issue-urls.js"),Cv=s("./src/packages/issue/issue-view/src/common/service/issue/user-transformer.js");const Iv=(e,t)=>{const s=e.get(t);return s?s.value:void 0};var Tv=(e,t,s)=>((e,t)=>e.getIssue$(t,!0).toPromise().then((({error:e,issue:t})=>e?Promise.reject(e):t?Promise.resolve(t):Promise.reject(new Error("Unexpected response from the dataprovider, expected an issue or an error but got neither")))))(e,s).then((e=>{const{id:s,key:n,fields:a}=e,i=Iv(a,"summary"),r=Iv(a,"issuetype"),o=Iv(a,"priority"),c=Iv(a,"status"),l=Iv(a,"assignee")||null;return{id:s?s.toString():"",
issueKey:n,issueLink:Object(Sv.f)(Object(rr.b)(t),Object(rr.l)(n)),issueSummary:i,issueTypeIconUrl:r&&r.iconUrl,issueTypeName:r&&r.name,issuePriorityUrl:o&&o.iconUrl,issuePriorityName:o&&o.name,statusName:c&&c.name,statusId:c&&c.id,statusCategory:c&&Object(_l.statusCategoryForId)(c.statusCategory.id),statusCategoryId:c&&c.statusCategory.id,assigneeUrl:l&&Object(Cv.c)(l).avatarUrl,assigneeDisplayName:l&&l.displayName,errorType:void 0,isLoading:!1}})),Pv=s("./src/packages/issue/issue-view/src/common/service/issue/issue-fetch-server.js"),_v=(e,t)=>((e,t)=>Object(Pv.b)(e,t,["assignee"]).toPromise())(e,t).then((e=>e.map((({id:e,fields:t})=>({id:e,assigneeUrl:t&&t.assignee&&Object(Cv.c)(t.assignee).avatarUrl,assigneeDisplayName:t&&t.assignee&&Object(Cv.c)(t.assignee).displayName}))))),xv=(e,t)=>e.ofType("state.entities.FETCH_DETAILS_FOR_ISSUES_REQUEST").switchMap((()=>{const e=t.getState(),s=Dj(e),n=hj(e).map((e=>e.issueKey)).filter((e=>void 0!==e))
;return sv.Observable.from(_v(s,n)).map((e=>(e=>({type:"state.entities.FETCH_DETAILS_FOR_ISSUES_SUCCESS",payload:{issues:e}}))(e))).catch((e=>(xn.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.fetch-details-for-issues","Failed to fetch details for issues",new m.a({eventNameSuffix:"issue.error",type:"fetch",app:"issue",event:e})),sv.Observable.empty())))}));const Dv=(e,t,s)=>{const n=Dj(t),a=Vj(t),i=Ej(e)(t);if(!a)throw new Error("Attempted to link a next-gen issue to a parent without issue ID ");return sv.Observable.from(((e,t,s)=>Object(kc.e)(`${e}/rest/api/3/issue/${s}`,{body:JSON.stringify({fields:{parent:{id:t}}})}))(n,a,e)).map((()=>iv(e,i,s))).catch((t=>(xn.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.add-existing-issue","Failed to link a next-gen issue to a parent",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),sv.Observable.of(rv(e)))))}
;var Av=Object(mj.combineEpics)(((e,t)=>e.ofType("state.entities.LINKING_ISSUE_RETRY").mergeMap((({payload:{issueId:e},meta:{analyticsEvent:s}})=>{const n=t.getState();switch(Aj(n)){case"classicProjectEpicChildren":{const t=Dj(n),a=Vj(n),i=Ej(e)(n);if(!a)throw new Error("Attempted to link a classic issue to an epic without a parent issue ID");return sv.Observable.from(mv(t,a,e)).map((()=>iv(e,i,s))).catch((t=>(xn.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.link-child-issue","Failed to link a classic issue to a parent",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:t})),sv.Observable.of(rv(e)))))}case"nextGenChildren":return Dv(e,n,s);default:return sv.Observable.empty()}}))),((e,t)=>e.ofType("state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST").mergeMap((({payload:{issueId:e},meta:{analyticsEvent:s}})=>{const n=t.getState();switch(Aj(n)){case"nextGenChildren":return Dv(e,n,s);default:return sv.Observable.empty()}})))),Lv=(e,t)=>{
const{id:s,key:n,fields:a}=e;return{id:s,issueKey:n,issueLink:Object(Sv.f)(Object(rr.b)(t),Object(rr.l)(n)),issueSummary:a.summary,issueTypeIconUrl:a.issuetype.iconUrl,issueTypeName:a.issuetype.name,issuePriorityUrl:a.priority&&a.priority.iconUrl||void 0,issuePriorityName:a.priority&&a.priority.name||void 0,statusCategory:Object(_l.statusCategoryForId)(a.status.statusCategory.id),statusCategoryId:a.status.statusCategory.id,statusName:a.status.name,statusId:a.status.id,assigneeUrl:a.assignee&&Object(Cv.c)(a.assignee).avatarUrl,assigneeDisplayName:a.assignee&&Object(Cv.c)(a.assignee).displayName,isLoading:!1,errorType:void 0}},Mv=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/graphql-tags.js"),Rv=s("./src/packages/platform/utils/fetch/src/utils/as-json-stream.js");const Nv=e=>Mv.a`query {
      issue(issueIdOrKey: "${e}", latestVersion: true, screen:"view", fields:"subtasks") {
        fields {
          key
          value
        }
      }
    }`,Fv=e=>{if(!e||!e.data||!e.data.issue)return[];const t=e.data.issue.fields.find((e=>"children-issues"===e.key));return t&&t.value?t.value.map((({id:e,key:t,self:s,fields:{assignee:n,issuetype:a,priority:i,summary:r,status:o}})=>({id:e,key:t,self:s,fields:{issueType:a,priority:i,status:o,summary:r,assignee:n}}))):[]};var Uv=(e,t)=>((e,t)=>Object(Rv.a)((e=>`${e}/rest/graphql/1/`)(e),{method:"POST",body:JSON.stringify({query:Nv(t)})}))(e,t).map(Fv),Vv=s("./src/packages/platform/utils/fetch/src/utils/as-text-stream.js");var Kv=(e,t,s,n)=>((e,t,s,n)=>Object(Vv.a)((e=>`${e}/rest/greenhopper/1.0/api/rank/after`)(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:s,rankAfterId:n})}))(e,t,s,n);var Wv=(e,t,s,n)=>((e,t,s,n)=>Object(Vv.a)((e=>`${e}/rest/greenhopper/1.0/api/rank/before`)(e),{method:"PUT",body:JSON.stringify({customFieldId:t,issueIds:s,rankBeforeId:n})}))(e,t,s,n);function Bv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Hv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Bv(Object(s),!0).forEach((function(t){$v(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Bv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function $v(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Gv=s("./src/packages/platform/utils/fetch/src/utils.js"),qv=(e,t)=>((e,t)=>Object(kc.b)(`${e}/rest/api/2/issue/${t}?fields=subtasks`))(e,t).then((e=>{const t=e&&e.fields;return t&&t.subtasks||[]}));function zv(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Yv(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zv(Object(s),!0).forEach((function(t){Qv(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zv(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Qv(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var Jv=(e,t)=>{const s=Dj(e),n=Vj(e);if(!n)throw new Error("Attempted to reorder subtasks without parentId");const{currentOrder:a,newOrder:i,currentIndex:r,newIndex:o}=t;return sv.Observable.from(((e,t,s,n)=>{const a=`${e}/secure/MoveSubtask.jspa?orderByRank=${Object(F.isOrderByLexoRankEnabled)().toString()}&id=${t}&currentSubTaskSequence=${s}&subTaskSequence=${n}&atl_token=${Object(wc.a)()||""}`
;return fetch(a).then((e=>e.ok?null:e.text().then((t=>{throw new Gv.a(e.status,t)}))))})(s,n,r,o)).switchMap((()=>qv(s,n))).flatMap(((e=[])=>{const t=e.map((({id:e})=>e)),n=i.map((({id:e})=>e));if(Da()(t,n))return sv.Observable.of(uv(i));if(Da()(t.slice().sort(),n.slice().sort())){const e=t.map((e=>i.find((t=>t.id===e))));return sv.Observable.of(uv(e))}const a=e.map((e=>{const{id:t}=e;return Yv(Yv({},i.find((e=>e.id===t))||{}),Lv(e,s))}));return sv.Observable.of(uv(a),cv())})).catch((e=>(xn.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.reorder-subtask","Failed to reorder subtasks",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),sv.Observable.of(lv(a,i,r,o)))))},Zv=(e,t)=>e.ofType("state.entities.REORDER_CHILDREN_REQUEST").mergeMap((e=>{const s=t.getState();switch(Aj(s)){case"classicSubtasks":return Jv(s,e.payload);case"nextGenChildren":return((e,t,s)=>{const n=Dj(e),a=Vj(e),i=Kj(e)
;if(!a)throw new Error("Attempted to reorder children without parentId");if(!i)throw new Error("Attempted to reorder children without customFieldId");const{currentOrder:r,newOrder:o,currentIndex:c,newIndex:l}=t,{analyticsEvent:u}=s,{id:d}=r[c],p=d?[+d]:[],b=l>c,f=Number((o[b?l-1:l+1]||{}).id);if(!f)throw new Error("Attempted to reorder children without rankId");return(b?Kv(n,i,p,f):Wv(n,i,p,f)).switchMap((()=>Uv(n,a))).flatMap(((e=[])=>{const t=e.map((({id:e})=>e)),s=o.map((({id:e})=>e));if(Object(Wa.f)(u,"issueRank updated",{numIssues:1,previousIssueIndex:c,currentIssueIndex:l,isRankAfter:b}),Da()(t,s))return sv.Observable.of(uv(o));if(Da()([...t].sort(),[...s].sort())){const e=t.map((e=>o.find((t=>t.id===e))));return sv.Observable.of(uv(e))}const a=e.map((e=>{const{id:t}=e;return Hv(Hv({},o.find((e=>e.id===t))||{}),Lv(e,n))}));return sv.Observable.of(uv(a),cv())
})).catch((e=>(xn.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.reorder-children","Failed to reorder children",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),sv.Observable.of(lv(r,o,c,l)))))})(s,e.payload,e.meta);default:return sv.Observable.empty()}}));const Xv=e=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK_SUCCESS",payload:{requiresFullCreate:e}}),eE=()=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK_FAILED"});var tE=s("./src/packages/issue/issue-view/src/common/util/errors/index.js"),sE=(e,t)=>t?sv.Observable.from(((e,t)=>Object(kc.b)(`${e}/rest/internal/2/project/${t}/hasValidatorsOnSubtasks`))(e,t)).map((e=>Xv(e))).catch((e=>(Object(tE.a)("issue.views.common.child-issues-panel.has-validators-on-subtasks","Failed to check if project has validators on subtasks",e,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),
sv.Observable.of(eE())))):sv.Observable.of(eE()),nE=(e,t)=>e.ofType("state.context.REQUIRES_FULL_CREATE_CHECK").switchMap((()=>{const e=t.getState();switch(Aj(e)){case"classicSubtasks":{const t=Dj(e),s=Bj(e);return Yj(e)?sv.Observable.of(Xv(!0)):sE(t,s)}default:return sv.Observable.empty()}})),aE=e=>Object(mj.combineEpics)(yv,(e=>(t,s)=>t.ofType("state.entities.CREATE_CHILD_SUCCESS").do((({payload:{createdChild:e,usedGlobalCreateDialog:t},meta:n})=>{const a=s.getState(),i=Lj(a),r={action:"created",actionSubjectId:e.id,attributes:{isInlineCreatedOnIssue:!0,isClassicSubtask:i}};Object(g.a)(n.analyticsEvent,r);const o=Aj(a)||"unknown_child",c=Jj(a),l=Zj(a);Object(_n.a)({experience:"createIssue",wasExperienceSuccesful:!0,analyticsSource:o,application:c,edition:l,additionalAttributes:{isCreated:!0,wasCreatedInline:!t}})})).switchMap((({payload:{createdChild:t}})=>{
const n=s.getState(),a=Dj(n),i=void 0!==t.issueKey&&null!==t.issueKey?Object(rr.l)(t.issueKey):void 0,r=void 0!==i?Object(wv.a)(i):void 0;if(!i||!r){const e="Issue or project key missing when handling create child success";return xn.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.create-child-success.missing-key",e,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:new Error(e)})),sv.Observable.empty()}return r?sv.Observable.from(Object(vv.a)(a,i,r)).map((({data:e})=>{const t=Object(kv.a)(e),s={id:e.issue.id,key:i,self:"",fields:Object.values(t)};return(e=>({type:"state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS",payload:e}))({childIssue:Object(Ev.a)(s,a),fieldsData:t})})).catch((e=>(xn.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.create-child-success.fetch-issue-graphql","Failed to fetch issue after a successful create",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),
sv.Observable.empty()))):sv.Observable.from(Tv(e,a,i)).map((e=>ov(e))).catch((e=>(xn.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.create-child-success.fetch-single-issue","Failed to fetch single issue after a successful create",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:e})),sv.Observable.empty())))})))(e),pv,jv,xv,dv,nE,Zv,tv,Av,(e=>(t,s)=>t.ofType("state.entities.LINK_CHILD_SUCCESS").do((({payload:{linkedChild:e},meta:t})=>{const n=s.getState(),a=Aj(n),i={action:"linked",actionSubjectId:e.id,attributes:{isInlineChildAdded:!0,panelType:a}};Object(g.a)(t.analyticsEvent,i)})).switchMap((({payload:{linkedChild:t}})=>{const n=s.getState(),a=Dj(n);return sv.Observable.from(Tv(e,a,t.issueKey)).map((e=>ov(e))).catch((e=>(xn.h.safeErrorWithoutCustomerData("issue.views.common.child-issues-panel.link-child-success.fetch-single-issue","Failed to fetch single issue after a successful child issue linking",new m.a({eventNameSuffix:"issue.error",
type:"js",app:"issue",event:e})),sv.Observable.empty())))})))(e)),iE=s("./src/packages/common-legacy-do-not-add-anything-new/src/tangerine/state/initiate.js"),rE=s("./node_modules/redux/es/index.js");function oE(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function cE(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?oE(Object(s),!0).forEach((function(t){lE(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):oE(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function lE(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const uE={baseUrl:Object(rr.b)(""),locale:"en_US",user:null,childIssuesPanelType:null,
supportsIssueCreation:!1,requiresFullCreate:!1,parentKey:null,customFieldIdRank:null,epicLinkFieldKey:null,parentId:null,projectId:null,messages:null,onNavigateToNewIssue:c.a,onChange:c.a,isIssueViewComplete:!1,projectType:null,application:null,edition:null};const dE="create",pE="linkIssue";function mE(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bE(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?mE(Object(s),!0).forEach((function(t){fE(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mE(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function fE(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const gE={issues:[],issueTypes:[],issueHierarchyLevel:void 0};const hE=()=>({type:"state.ui.SHOW_INLINE_CREATE"}),yE=()=>({type:"state.ui.HIDE_ADD_CHILD_ISSUE"}),OE=Object.freeze({InlineCreate:"InlineCreate",AddExistingIssue:"AddExistingIssue"}),jE=e=>({type:"state.ui.SET_CHILD_PANEL_VIEW",view:e}),vE=e=>({type:"state.ui.SET_CHILD_CREATE_SUMMARY",summary:e}),EE=e=>({type:"state.ui.SET_FETCH_ISSUE_TYPES_STATUS",payload:e});function kE(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function wE(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?kE(Object(s),!0).forEach((function(t){SE(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):kE(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}
return e}function SE(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const CE={addClickCount:0,hideDone:!1,selectedIssueType:null,childPanelView:OE.InlineCreate,childCreateSummary:"",fetchIssueTypesStatus:"NONE"};var IE=Object(rE.combineReducers)({context:(e=uE,t)=>{switch(t.type){case"state.context.SET_CONTEXT":return cE(cE({},e),t.payload);case"state.context.SET_ONCHANGE":return cE(cE({},e),{},{onChange:t.payload});case"state.context.REQUIRES_FULL_CREATE_CHECK_SUCCESS":return cE(cE({},e),t.payload);case"state.context.REQUIRES_FULL_CREATE_CHECK_FAILED":return cE(cE({},e),{},{requiresFullCreate:!0});case"state.context.SET_IS_ISSUE_VIEW_COMPLETE":return cE(cE({},e),{},{isIssueViewComplete:t.payload});default:return e}},ui:(e=CE,t)=>{switch(t.type){case"state.ui.SHOW_INLINE_CREATE":return wE(wE({},e),{},{addClickCount:e.addClickCount+1});case"state.ui.HIDE_ADD_CHILD_ISSUE":return wE(wE({},e),{},{addClickCount:0,
childPanelView:OE.InlineCreate,childCreateSummary:""});case"state.ui.SET_CHILD_PANEL_VIEW":return wE(wE({},e),{},{childPanelView:t.view});case"state.ui.SET_CHILD_CREATE_SUMMARY":return wE(wE({},e),{},{childCreateSummary:t.summary});case"state.ui.TOGGLE_HIDE_DONE":return wE(wE({},e),{},{hideDone:!e.hideDone});case"state.ui.SELECTED_ISSUE_TYPE_CHANGED":return wE(wE({},e),{},{selectedIssueType:t.payload});case"state.ui.SET_FETCH_ISSUE_TYPES_STATUS":return wE(wE({},e),{},{fetchIssueTypesStatus:t.payload});default:return e}},entities:(e=gE,t)=>{switch(t.type){case"state.entities.SET_ENTITIES":{const{issueTypes:s,issues:n,issueHierarchyLevel:a}=t.payload;return bE(bE({},e),{},{issues:n,issueTypes:s,issueHierarchyLevel:a})}case"state.entities.UPDATE_ISSUE":{if(Object(F.isStateRefactorInChildIssuesPanelEnabled)())return e;const s=t.payload,n=[...e.issues],a=n.findIndex((e=>e.id===s.id));return n[a]=s,bE(bE({},e),{},{issues:n})}case"state.entities.CREATE_CHILD_REQUEST":{
const s=bE(bE({},t.payload.optimisticUiChildIssue),{},{isLoading:!0,errorType:void 0});return bE(bE({},e),{},{issues:e.issues.filter((e=>e.id!==s.id)).concat(s)})}case"state.entities.CREATE_CHILD_SUCCESS":{const{optimisticId:s,createdChild:n}=t.payload;return bE(bE({},e),{},{issues:e.issues.filter((e=>e.id!==s)).concat(n)})}case"state.entities.FETCH_SINGLE_CHILD_SUCCESS":{const{childIssue:s}=t.payload;return bE(bE({},e),{},{issues:e.issues.map((e=>e.id===s.id?s:e))})}case"state.entities.FETCH_GRAPHQL_ISSUE_SUCCESS":{const{childIssue:s}=t.payload;return bE(bE({},e),{},{issues:e.issues.map((e=>e.id===s.id?s:e))})}case"state.entities.CREATE_CHILD_FAILURE":{const{optimisticId:s}=t.payload;return bE(bE({},e),{},{issues:e.issues.map((e=>e.id===s?bE(bE({},e),{},{errorType:dE,isLoading:!1}):e))})}case"state.entities.LINKING_ISSUE_FAILURE":{const{optimisticId:s,createdChild:n}=t.payload;return bE(bE({},e),{},{issues:e.issues.filter((e=>e.id!==s)).concat(bE(bE({},n),{},{errorType:pE,isLoading:!1
}))})}case"state.entities.CREATE_CHILD_RETRY":{const{optimisticId:s}=t.payload;return bE(bE({},e),{},{issues:e.issues.map((e=>e.id===s?bE(bE({},e),{},{errorType:void 0,isLoading:!0}):e))})}case"state.entities.LINKING_ISSUE_RETRY":{const{issueId:s}=t.payload;return bE(bE({},e),{},{issues:e.issues.map((e=>e.id===s?bE(bE({},e),{},{errorType:void 0,isLoading:!0}):e))})}case"state.entities.LINKING_ISSUE_RETRY_FAILURE":{const{issueId:s}=t.payload;return bE(bE({},e),{},{issues:e.issues.map((e=>e.id===s?bE(bE({},e),{},{errorType:pE,isLoading:!1}):e))})}case"state.entities.LINK_PARENT_FAILURE":case"state.entities.CANCEL_OPTIMISTIC_CHILD":{const{optimisticId:s}=t.payload;return bE(bE({},e),{},{issues:e.issues.filter((e=>e.id!==s))})}case"state.entities.FETCH_DETAILS_FOR_ISSUES_SUCCESS":{const{issues:s}=t.payload;return bE(bE({},e),{},{issues:e.issues.map((e=>bE(bE({},e),bs()(s,(t=>t.id===e.id)))))})}case"state.entities.REORDER_CHILDREN_REQUEST":case"state.entities.REORDER_CHILDREN_SUCCESS":{
const{newOrder:s}=t.payload;return bE(bE({},e),{},{issues:s})}case"state.entities.REORDER_CHILDREN_FAILED":{const{originalOrder:s}=t.payload;return bE(bE({},e),{},{issues:s})}case"state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST":{const s={id:t.payload.issueId,issueKey:t.payload.issueKey,issueSummary:t.payload.issueSummary,issueTypeIconUrl:t.payload.issueTypeIconUrl,assigneeUrl:null,assigneeDisplayName:null,isLoading:!0,errorType:void 0};return bE(bE({},e),{},{issues:e.issues.filter((e=>e.id!==s.id)).concat(s)})}default:return e}}})
;var TE=s("./node_modules/keycode/index.js"),PE=s.n(TE),_E=s("./node_modules/@atlaskit/select/dist/es2019/CreatableSelect.js"),xE=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/error-state/index.js"),DE=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/styled.js"),AE=s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),LE=s("./node_modules/debounce-promise/dist/index.js"),ME=s.n(LE),RE=s("./src/packages/common-legacy-do-not-add-anything-new/src/match-jira-url/index.js");const NE=({sections:e},t)=>{const s=e[0],n=e[1],a=s.issues,i=n?n.issues:[],r=Ru()([...a,...i],"key");return[{label:n?t.matchingIssues:t.recentIssues,options:r.map((e=>({issueId:Object(rr.j)(String(e.id)),value:e.key,issueKey:e.key,summary:e.summaryText,imageUrl:e.img})))}]};class FE extends a.Component{constructor(...e){super(...e),this.state={options:[],isLoading:!1,error:null},this.fetchData=e=>{
const{baseUrl:t,issueKey:s,projectId:n,jql:a,labels:i}=this.props,r=Object(RE.a)(e,window.location.host,t)||e;return this.setState({isLoading:!0,error:null}),Object(Om.a)(`${t}/rest/api/3/issue/picker?currentIssueKey=${s}&currentProjectId=${n}&showSubTasks=true&showSubTaskParent=true&currentJQL=${a}&query=${r}`).then((e=>(this.setState({options:NE(e,i),isLoading:!1}),e))).catch((e=>this.setState({isLoading:!1,options:[],error:e})))},this.debouncedFetchData=ME()(this.fetchData,300,{leading:!0})}componentDidMount(){this.fetchData(this.props.initialValue)}render(){const{children:e}=this.props,{options:t,isLoading:s,error:n}=this.state;return e({options:t,isLoading:s,error:n,loadOptions:this.debouncedFetchData})}}FE.displayName="IssueOptionService",FE.defaultProps={initialValue:""};var UE=s("./node_modules/@atlaskit/icon/glyph/add.js"),VE=s.n(UE),KE=s("./node_modules/react-select/dist/chunk-80640036.browser.esm.js")
;const WE=Y.default.div(["display:flex;align-items:center;"]),BE=Y.default.div(["margin-right:","px;width:","px;height:","px;"],Q.e,2*Q.e,2*Q.e),HE=Y.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1 1 100%;min-width:0;"]);function $E(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const GE=({imageUrl:e,children:t})=>i.a.createElement(WE,null,i.a.createElement(BE,null,i.a.createElement("img",{src:e,alt:""})),t);GE.displayName="IssueCard";const qE=({label:e})=>i.a.createElement(WE,null,i.a.createElement(VE.a,{label:"",size:"small",primaryColor:Re.a.B400}),i.a.createElement(G.a,{appearance:"link",isSelected:!1},e));qE.displayName="CreateIssueOption"
;const zE=({imageUrl:e,issueKey:t,summary:s})=>i.a.createElement(GE,{imageUrl:e},i.a.createElement(HE,null,t," ",s));zE.displayName="IssueOption";const YE=({imageUrl:e,issueKey:t,summary:s})=>i.a.createElement(GE,{imageUrl:e},i.a.createElement(HE,null,`${t} ${s}`));YE.displayName="SelectedValue";const QE=e=>{let{children:t}=e,s=$E(e,["children"]);return i.a.createElement(KE.z.SingleValue,s,i.a.createElement(YE,{imageUrl:s.data.imageUrl,issueKey:s.data.issueKey,summary:s.data.summary}))};QE.displayName="SingleValue";var JE=Object(v.h)({defaultPlaceholder:{id:"issue-picker.default-placeholder",defaultMessage:"Search by issue key or summary"},defaultRecentIssues:{id:"issue-picker.default-recent-issues",defaultMessage:"Recent Issues"},defaultMatchingIssues:{id:"issue-picker.default-matching-issues",defaultMessage:"Matching Issues"},defaultFailedLoadingIssues:{id:"issue-picker.default-failed-loading-issues",defaultMessage:"Failed to load issues"},createIssue:{id:"issue-picker.create-issue",
defaultMessage:"Create an issue for '{value}'"}});class ZE extends a.Component{constructor(...e){super(...e),this.onBlur=e=>{e("")},this.onChange=(e,{action:t},s)=>{switch(t){case"select-option":{const{issueId:t,issueKey:n,summary:a,imageUrl:i}=e;this.props.onChange&&this.props.onChange({issueId:t,issueKey:n,issueSummary:a,issueTypeIconUrl:i}),s("");break}case"clear":this.props.onClear&&this.props.onClear()}},this.onCreate=e=>{this.props.onCreate&&this.props.onCreate(e)},this.onInputChange=e=>(t,{action:s})=>{"input-change"===s&&e(t)},this.onSetSelectRef=e=>{this.akSelect=e},this.formatOptionLabel=(e,{context:t})=>{if(e.__isNew__){const t=this.props.intl.formatMessage(JE.createIssue,{value:e.value});return i.a.createElement(qE,{label:t})}return"menu"===t?i.a.createElement(zE,{imageUrl:e.imageUrl,issueKey:e.issueKey,summary:e.summary}):e.label},this.akSelect=void 0,this.filterOption=()=>!0,this.renderNoOptionsMessage=e=>{if(!e)return;const{intl:t}=this.props
;return i.a.createElement(xE.a,{description:t.formatMessage(JE.defaultFailedLoadingIssues),imageWidth:56,isSubtle:!0})}}focus(){this.akSelect.focus()}reset(){this.akSelect.select.select.select.clearValue(),this.akSelect.blur(),this.akSelect.focus()}render(){const{initialValue:e,issueKey:t,projectId:s,jql:n,intl:a}=this.props;return i.a.createElement(AE.b,null,(({tenantContext:{baseUrl:r}})=>i.a.createElement(FE,{labels:{recentIssues:a.formatMessage(JE.defaultRecentIssues),matchingIssues:a.formatMessage(JE.defaultMatchingIssues)},baseUrl:r,issueKey:t,projectId:s,jql:n,initialValue:e},(({loadOptions:t,options:s,isLoading:n,error:r})=>i.a.createElement(_E.a,{ref:this.onSetSelectRef,styles:DE.f,isLoading:n,formatOptionLabel:this.formatOptionLabel,options:s,defaultInputValue:e,autoFocus:!0,allowCreateWhileLoading:!0,defaultOptions:!0,onCreateOption:this.onCreate,placeholder:a.formatMessage(JE.defaultPlaceholder),components:{SingleValue:QE},onChange:(e,s)=>this.onChange(e,s,t),
onInputChange:this.onInputChange(t),onBlur:()=>this.onBlur(t),isClearable:!0,filterOption:this.filterOption,noOptionsMessage:()=>this.renderNoOptionsMessage(r),openMenuOnFocus:!0})))))}}ZE.displayName="IssuePicker",ZE.defaultProps={initialValue:""};var XE=ZE,ek=Object(v.h)({childLinkButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-link-button",defaultMessage:"Add"},childCancelButton:{id:"issue.views.common.child-issues-panel.add-existing-issue.child-cancel-button",defaultMessage:"Cancel"}});const tk=Object(Y.default)(G.a)(["margin-left:","px !important;"],Q.e),sk=Y.default.div(["margin-top:","px;display:flex;justify-content:flex-end;"],Q.e);class nk extends a.Component{constructor(...e){super(...e),this.state={selectedIssue:void 0,isDisabled:!0},this.onChildContainerRefSet=e=>{this.childContainer=e},this.onAdd=()=>{this.state.selectedIssue&&(this.props.onAdd(this.state.selectedIssue),this.resetPicker())},this.onChange=e=>{this.setState({selectedIssue:e,
isDisabled:!1})},this.onClear=()=>this.setState({selectedIssue:void 0,isDisabled:!0}),this.onCancelClicked=()=>{this.onClear(),this.props.onCancel()},this.onSetSelectRef=e=>{this.issuePicker=e},this.onKeyDown=e=>{e.keyCode===PE()("enter")&&(this.onAdd(),e.stopPropagation())},this.issuePicker=void 0,this.childContainer=void 0}async componentDidMount(){Object(Wr.a)(this.childContainer)}componentDidUpdate(e){this.props.addClickCount!==e.addClickCount&&(Object(Wr.a)(this.childContainer),this.focusPicker())}resetPicker(){this.issuePicker&&this.issuePicker.reset()}focusPicker(){this.issuePicker&&this.issuePicker.focus()}render(){const{initialValue:e,issueKey:t,projectId:s,jql:n,intl:a}=this.props;return t&&s?i.a.createElement(H.a,{onEscape:this.onCancelClicked},i.a.createElement("div",{onKeyDown:this.onKeyDown,ref:this.onChildContainerRefSet},i.a.createElement(XE,{ref:this.onSetSelectRef,initialValue:e,issueKey:t,projectId:s,jql:n,onChange:this.onChange,onClear:this.onClear,intl:a,
onCreate:this.props.onCreate}),i.a.createElement(sk,null,i.a.createElement(tk,{appearance:"primary",onClick:this.onAdd,isDisabled:this.state.isDisabled},a.formatMessage(ek.childLinkButton)),i.a.createElement(tk,{appearance:"subtle",onClick:this.onCancelClicked},a.formatMessage(ek.childCancelButton))))):null}}nk.displayName="AddExistingIssue",nk.defaultProps={initialValue:""};var ak=Object(qt.a)([v.i,Object(gs.a)("button",{onAdd:"clicked",onCancel:"clicked",onCreate:"clicked"}),Object(E.a)({onAdd:"addExistingChildIssueRequest",onCancel:"hideAddExistingChildIssue",onCreate:"switchToCreateChildIssue"}),Object(r.connect)((e=>({addClickCount:Sj(e),initialValue:Ij(e),issueKey:Uj(e),jql:wj(e),projectId:Bj(e)})),(e=>({onAdd:(t,s)=>e(((e,t)=>({type:"state.entities.ADD_EXISTING_CHILD_ISSUE_REQUEST",payload:e,meta:{analyticsEvent:t}}))(t,s)),onCancel:()=>e(yE()),onCreate:t=>{e(vE(t)),e(jE(OE.InlineCreate))}})))])(nk),ik=Object(v.h)({createChildLabel:{
id:"issue.views.common.child-issues-panel.heading.add-child.create-child-label",defaultMessage:"Create child"},createSubtaskLabel:{id:"issue.views.common.child-issues-panel.heading.add-child.create-subtask-label",defaultMessage:"Create subtask"}});const rk=Y.default.div(["margin-left:","px;"],.75*Q.e);class ok extends a.Component{render(){const{intl:{formatMessage:e},onClick:t,isClassicSubtaskPanel:s}=this.props,n=s?ik.createSubtaskLabel:ik.createChildLabel;return i.a.createElement(rk,null,i.a.createElement(oO.a,{onClick:t,label:e(n)}))}}ok.displayName="AddChild",ok.defaultProps={isClassicSubtaskPanel:!1};var ck=Object(qt.a)([v.i,Object(gs.a)("button",{onClick:"clicked"}),Object(E.a)({onClick:"showChildIssuesInlineCreate"}),Object(r.connect)((e=>({isClassicSubtaskPanel:Lj(e)})),((e,t)=>({onClick:(...s)=>{e(hE()),t.onClick(...s)}
})))])(ok),lk=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/group/DropdownItemGroupCheckbox.js"),uk=s("./node_modules/@atlaskit/dropdown-menu/dist/es2019/components/item/DropdownItemCheckbox.js"),dk=Object(v.h)({actions:{id:"issue.views.common.child-issues-panel.heading.meatballs.actions",defaultMessage:"Actions"},filter:{id:"issue.views.common.child-issues-panel.heading.meatballs.filter",defaultMessage:"Filter"},bulkEdit:{id:"issue.views.common.child-issues-panel.heading.meatballs.bulk-edit",defaultMessage:"Bulk edit"},hideDone:{id:"issue.views.common.child-issues-panel.heading.meatballs.hide-done",defaultMessage:"Hide done"},search:{id:"issue.views.common.child-issues-panel.heading.meatballs.search",defaultMessage:"View in search"},tooltip:{id:"issue.views.common.child-issues-panel.heading.meatballs.tooltip",defaultMessage:"Issue actions"}});const pk=Y.default.div([".childIssuesPanelMeatballButton{padding:0 ","px;}"],.75*Q.e);class mk extends a.Component{
constructor(...e){super(...e),this.onHideDoneClickedAnalytics=e=>{const{onHideDoneClicked:t,allIssues:s,incompleteIssues:n,hideDone:a}=this.props;t(s.length,n.length,!a,e)}}onBulkEditClickedAnalytics(e){return t=>{this.props.onBulkEditClicked(e,t)}}onViewInSearchClickedAnalytics(e){return t=>{this.props.onViewInSearchClicked(e,t)}}isHideDoneCheckboxVisible(){const{allIssues:e,incompleteIssues:t}=this.props;return!mm()(t)&&t.length!==e.length}generateBulkEditLink(e){return`${this.props.baseUrl}/secure/GHBulkChange.jspa?issueKeys=${encodeURIComponent(e)}`}generateSearchLink(e){const t=encodeURIComponent(`issueKey in (${e})`);return`${this.props.baseUrl}/issues/?jql=${t}`}renderHideDoneCheckbox(){const{intl:{formatMessage:e},hideDone:t}=this.props;return this.isHideDoneCheckboxVisible()?i.a.createElement(lk.a,{title:e(dk.filter),id:"child-issues-panel-checkbox-group"},i.a.createElement(uk.a,{id:"hideDone",key:"hideDone",onClick:this.onHideDoneClickedAnalytics,isSelected:t
},e(dk.hideDone))):null}renderActionLinks(){const{intl:{formatMessage:e},hideDone:t,allIssues:s,incompleteIssues:n}=this.props,a=t?n:s,r=a.length,o=a.map((e=>e.issueKey)).join(","),c=this.generateBulkEditLink(o),l=this.generateSearchLink(o),u=this.isHideDoneCheckboxVisible()?e(dk.actions):"";return i.a.createElement(gi.a,{title:u},i.a.createElement(bi.a,{onClick:this.onBulkEditClickedAnalytics(r),href:c},e(dk.bulkEdit)),i.a.createElement(bi.a,{onClick:this.onViewInSearchClickedAnalytics(r),href:l},e(dk.search)))}render(){return i.a.createElement(pk,null,i.a.createElement(fi.a,{triggerType:"button",triggerButtonProps:{appearance:"subtle",spacing:"compact",iconBefore:i.a.createElement(Ym.a,{size:"small",label:this.props.intl.formatMessage(dk.tooltip)})},position:"bottom right"},this.renderHideDoneCheckbox(),this.renderActionLinks()))}}mk.displayName="Meatballs",mk.defaultProps={hideDone:!1};var bk=Object(qt.a)([v.i,Object(gs.a)("item",{onBulkEditClicked:"clicked",
onViewInSearchClicked:"clicked",onHideDoneClicked:"clicked"}),Object(E.a)({onBulkEditClicked:e=>({name:"bulkEdit",issueCount:e}),onViewInSearchClicked:e=>({name:"viewInSearch",issueCount:e}),onHideDoneClicked:(e,t,s)=>({name:"toggleHideDone",totalIssues:e,incompleteIssues:t,hideDone:s})}),Object(r.connect)((e=>({baseUrl:Dj(e),parentKey:Uj(e),hideDone:Pj(e),allIssues:hj(e),incompleteIssues:Oj(e)})),{onHideDoneClicked:()=>({type:"state.ui.TOGGLE_HIDE_DONE"})})])(mk),fk=Object(v.h)({sortByLabel:{id:"issue.views.common.child-issues-panel.heading.sort-by.label",defaultMessage:"Order by {option}"},created:{id:"issue.views.common.child-issues-panel.heading.created.label",defaultMessage:"Created"},key:{id:"issue.views.common.child-issues-panel.heading.key.label",defaultMessage:"Key"},priority:{id:"issue.views.common.child-issues-panel.heading.priority.label",defaultMessage:"Priority"},status:{id:"issue.views.common.child-issues-panel.heading.status.label",defaultMessage:"Status"},assignee:{
id:"issue.views.common.child-issues-panel.heading.assignee.label",defaultMessage:"Assignee"},ranking:{id:"issue.views.common.child-issues-panel.heading.ranking.label",defaultMessage:"Rank"},defaultOptionLabel:{id:"issue.views.common.child-issues-panel.heading.default-option.label",defaultMessage:"{option} (default)"}});const gk=Y.default.span(["padding-right:","px;"],.75*Q.e),hk=Y.default.div(["min-width:","px;"],20*Q.e),yk=Y.default.div(["border-top:1px solid ",";padding:","px 0;span{color:",";}"],"#EBECF0",Q.e/2,"#0052CC"),Ok=Object(vi.a)("dropdownItem",{onClick:"clicked"})(bi.a),jk="ranking",vk=["created","key","priority","status","assignee"],Ek="defaultOptionLabel",kk=e=>{var t;const{sortedBy:s,onSelect:n}=e;let r=vk;const o=Object(Us.g)(),{formatMessage:c}=Object(xe.c)(),[l,u]=Object(a.useState)(!1),[d]=Object(mu.a)(o,"priority");(!d||!d.allowedValues||d.allowedValues.length<=1)&&(r=vk.filter((e=>"priority"!==e)));const p=Object(a.useMemo)((()=>{
const e=new Map,t=c(fk.ranking),s=c(fk.defaultOptionLabel,{option:t});return e.set(jk,t),e.set(Ek,s),r.forEach((t=>{e.set(t,c(fk[t]))})),e}),[r,c]),m=Object(a.useMemo)((()=>r.filter((e=>e!==s))),[r,s]);return i.a.createElement(Ti.a,{trigger:i.a.createElement(G.a,{appearance:"subtle",isSelected:l,iconAfter:i.a.createElement(Md.a,{label:""}),testId:"issue.views.common.child-issues-panel.heading.sort-by-menu.trigger-button"},i.a.createElement(gk,null,c(fk.sortByLabel,{option:null!==s&&s!==jk?null===(t=p.get(s))||void 0===t?void 0:t.toLowerCase():""}))),isOpen:l,onOpenChange:()=>{u(!l)}},i.a.createElement(hk,null,i.a.createElement(gi.a,null,m.map((e=>i.a.createElement(Ok,{key:e,"data-testId":`issue.views.common.child-issues-panel.heading.sort-by-menu.option-${e}`,onClick:(t,s)=>n(e,s)},p.get(e)))),s&&s!==jk&&i.a.createElement(yk,null,i.a.createElement(Ok,{key:jk,"data-testId":"issue.views.common.child-issues-panel.heading.sort-by-menu.default-option",onClick:(e,t)=>n(jk,t)},p.get(Ek))))))}
;kk.displayName="SortByMenu";const wk=({allIssueIds:e})=>{const[t,{setSortBy:s}]=rj(),[,{setSortableIssueIds:n}]=ij(),{createAnalyticsEvent:r}=Object(si.a)(),o=Object(a.useCallback)((t=>{Object(Wa.h)(r({action:"clicked",actionSubject:"dropdown"}),"childIssuesSortBy",{selection:t}),n(e),s(t)}),[e,r,s,n]);return i.a.createElement(kk,{sortedBy:t,onSelect:o})};wk.displayName="ConnectedComponent";var Sk=Object(r.connect)((e=>({allIssueIds:hj(e).map((e=>Object(rr.j)(e.id)))})),{})(wk),Ck=Object(v.h)({title:{id:"issue.views.common.child-issues-panel.heading.title.title",defaultMessage:"Child issues"}});class Ik extends a.Component{render(){const{intl:{formatMessage:e},title:t}=this.props;return i.a.createElement(Ra.e,null,e(t))}}Ik.displayName="Title",Ik.defaultProps={title:Ck.title};var Tk=Object(qt.a)([v.i,Object(r.connect)((e=>({title:$j(e)})),{})])(Ik);class Pk extends a.Component{render(){
const{Title:e,Meatballs:t,AddChild:s,SortByMenu:n,supportsIssueCreation:a,allIssues:r,onAddChildClick:o,sourceName:c,isSortingAvailable:l}=this.props;return i.a.createElement(Ra.c,null,i.a.createElement("label",{htmlFor:c},i.a.createElement(e,null)),i.a.createElement(Ra.d,null,l&&i.a.createElement(n,null),r.length>0?i.a.createElement(t,null):null,a&&0!==r.length?i.a.createElement(s,{onClick:o}):null))}}Pk.displayName="Heading",Pk.defaultProps={isSortingAvailable:!1,supportsIssueCreation:!1,allIssues:[]};var _k=Object(qt.a)([Object(r.connect)((e=>({Title:Tk,Meatballs:bk,AddChild:ck,SortByMenu:Sk,allIssues:hj(e),supportsIssueCreation:Nj(e),isSortingAvailable:Object(F.isSortingIssuesUnderEpicEnabled)()&&ev(e)
})),{})])(Pk),xk=s("./node_modules/@atlaskit/select/dist/es2019/Select.js"),Dk=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcut-scope.js"),Ak=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/index.js"),Lk=s("./src/packages/issue/issue-view/src/views/field/select/common/select-inline-edit/select-field/utils.js"),Mk=Object(v.h)({typesPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.child-types-select.types-placeholder",defaultMessage:"Issue type"}});Re.a.N50,Q.e,Q.e;const Rk=Y.default.div(["display:flex;align-items:center;"]),Nk=Y.default.span(["padding-left:","px;display:inline-block;"],Q.e);function Fk(){return(Fk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function Uk(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Vk(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Uk(Object(s),!0).forEach((function(t){Kk(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Uk(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Kk(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const Wk={singleValue:e=>Vk(Vk({},e),{},{position:"static",transform:"none"})},Bk=e=>e.name,Hk=e=>e.id,$k=e=>i.a.createElement(Rk,null,i.a.createElement(jb.a,{url:e.iconUrl,title:e.name}),i.a.createElement(Nk,null,e.name));$k.displayName="formatOptionLabel";class Gk extends a.Component{constructor(...e){super(...e),this.onChange=(e,t)=>{
"select-option"===t.action&&null!=e&&this.props.onChange(e)}}render(){const{intl:{formatMessage:e},issueTypes:t,selectedIssueType:s}=this.props;return Object(F.isShortcutMenuEnabled)()?i.a.createElement(xk.a,Fk({},Ak.b,{styles:Object(Lk.a)(DE.f,Wk),options:t,value:s,getOptionLabel:Bk,getOptionValue:Hk,formatOptionLabel:$k,onChange:this.onChange,placeholder:e(Mk.typesPlaceholder)})):i.a.createElement(Dk.b,null,i.a.createElement(xk.a,Fk({},Ak.b,{styles:Object(Lk.a)(DE.f,Wk),options:t,value:s,getOptionLabel:Bk,getOptionValue:Hk,formatOptionLabel:$k,onChange:this.onChange,placeholder:e(Mk.typesPlaceholder)})))}}Gk.displayName="ChildTypesSelect",Gk.defaultProps={issueTypes:[]};var qk=Object(qt.a)([v.i,Object(r.connect)((e=>({selectedIssueType:Tj(e),issueTypes:kj(e)})),(e=>({onChange:t=>e((e=>({type:"state.ui.SELECTED_ISSUE_TYPE_CHANGED",payload:e}))(t))
})))])(Gk),zk=s("./node_modules/lodash/trim.js"),Yk=s.n(zk),Qk=s("./src/packages/common-legacy-do-not-add-anything-new/src/bridge/index.js"),Jk=s("./node_modules/@atlaskit/icon/glyph/search.js"),Zk=s.n(Jk);const Xk=e=>{const{children:t,onClick:s}=e;return i.a.createElement(G.a,{appearance:"subtle-link",iconBefore:i.a.createElement(Zk.a,{label:""}),isSelected:!1,onClick:s},t)};Xk.displayName="AddExistingIssueButton",Xk.displayName="AddExistingIssueButton";var ew=Object(v.h)({summaryLabel:{id:"issue.views.common.child-issues-panel.inline-create.summary-label",defaultMessage:"Child summary"},summaryPlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.summary-placeholder",defaultMessage:"What needs to be done?"},summaryTooLong:{id:"issue.views.common.child-issues-panel.inline-create.summary-too-long",defaultMessage:"Summary must be less than 255 characters."},childCreateButton:{id:"issue.views.common.child-issues-panel.inline-create.child-create-button",
defaultMessage:"Create"},childCancelButton:{id:"issue.views.common.child-issues-panel.inline-create.child-cancel-button",defaultMessage:"Cancel"},addExistingIssuePlaceholder:{id:"issue.views.common.child-issues-panel.inline-create.add-existing-issue-placeholder",defaultMessage:"Choose an existing issue"}}),tw=s("./node_modules/@emotion/styled-base/dist/styled-base.browser.esm.js");const sw=Y.default.div(["display:flex;align-items:center;background-color:",";width:100%;"],Re.a.N10),nw=Y.default.div(["flex-grow:1;"]),aw=Object(tw.a)(G.a,{target:"e1o0mbwp0"})("margin-left:",Q.e,"px !important;"),iw=Y.default.div(["margin-top:","px;display:flex;justify-content:space-between;"],Q.e),rw=Y.default.div(["justify-content:flex-end;display:flex;"]);function ow(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function cw(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ow(Object(s),!0).forEach((function(t){lw(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ow(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function lw(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const uw=e=>Yk()(e).length>255,dw=e=>{const t=Yk()(e);return mm()(t)||uw(e)};class pw extends a.Component{constructor(e){super(e),this.onSubmitClicked=()=>{this.createChild(),this.props.onSubmitClickAnalytics()},this.onCancelClicked=()=>{this.closeAndReset(),this.props.onCancelClickAnalytics()},this.onEnterPressed=()=>{this.createChild(),this.props.onEnterKeyPressedAnalytics()},this.onEscPressed=()=>{this.closeAndReset(),this.props.onEscapeKeyPressedAnalytics()},this.onUpdateChildSummary=e=>{const t=e.target.value
;this.props.onChangeSummary(t)},this.onChildContainerRefSet=e=>{this.childContainer=e},this.onFieldContainerRefSet=e=>{this.fieldContainer=e},this.onAddExisting=()=>{this.props.onAddExistingIssue(),this.props.onAddExistingClickAnalytics()},this.childContainer=void 0,this.fieldContainer=void 0,this.createIssueFormFactory=void 0,this.createIssueFormFactory=null}async componentDidMount(){Object(Wr.a)(this.childContainer),this.fieldContainer&&this.fieldContainer.focus();const e="classicSubtasks"===this.props.childIssuesPanelType?"quick-edit/form/factory/create-subtask":"quick-edit/form/factory/create-issue";this.createIssueFormFactory=await Object(Qk.a)({name:e,wrmKeys:"wrc!com.atlassian.jira.jira-quick-edit-plugin:quick-form"})}componentDidUpdate(e){this.props.addClickCount!==e.addClickCount&&(Object(Wr.a)(this.childContainer),this.fieldContainer&&this.fieldContainer.focus())}createChild(){
const e=`OPTIMISTIC_CHILD_${Date.now()}`,{baseUrl:t,epicLinkFieldKey:s,selectedIssueType:n,projectId:a,parentIssueId:i,parentIssueKey:r,childIssuesPanelType:o,requiresFullCreate:c,summary:l}=this.props;if(!dw(l)&&n){const u={id:e,issueSummary:l,issueTypeId:`${n.id}`,issueTypeIconUrl:`${n.iconUrl}`,issueTypeName:`${n.name}`,assigneeUrl:null,assigneeDisplayName:null};if(n.hasRequiredField||c){const c="classicProjectEpicChildren"===o,u=this.createIssueFormFactory(cw({pid:a,issueType:n&&n.id,fields:cw({summary:l||""},c&&s?{[s]:r}:{}),customFieldsToPreserveOnFormRecreation:[...c&&s?[s]:[]]},"classicSubtasks"===o?{parentIssueId:i}:{}));u.bind("issueCreated",((n,a)=>{c&&a.createdIssueDetails.fields[s]!==r||this.props.onFullDialogCreate(e,Lv(a.createdIssueDetails,t)),this.resetAndFocus()})),u.asDialog({id:"classicSubtasks"===o?"create-subtask-dialog":"create-issue-dialog"}).show()}else this.props.onSubmit(u),this.resetAndFocus()}}closeAndReset(){this.reset(),this.props.onCancel()}
resetAndFocus(){this.reset(),this.fieldContainer&&this.fieldContainer.focus()}reset(){this.props.onChangeSummary("")}renderAddExistingIssueButton(){const{intl:{formatMessage:e}}=this.props;switch(this.props.childIssuesPanelType){case"nextGenChildren":return i.a.createElement(je.a,{content:e(ew.addExistingIssuePlaceholder)},i.a.createElement(Xk,{onClick:this.onAddExisting},e(ew.addExistingIssuePlaceholder)));case"portfolioChildren":case"classicProjectEpicChildren":case"classicSubtasks":default:return i.a.createElement("div",null)}}render(){const{intl:{formatMessage:e},issueTypes:t,ChildTypesSelect:s,summary:n,inputId:a}=this.props,r=uw(n)?e(ew.summaryTooLong):"";return i.a.createElement("div",{ref:this.onChildContainerRefSet},i.a.createElement(sw,null,t.length>1?i.a.createElement(s,null):null,i.a.createElement(nw,null,i.a.createElement(H.a,{onEnter:this.onEnterPressed,onEscape:this.onEscPressed},i.a.createElement(ye.a,{ref:this.onFieldContainerRefSet,
placeholder:e(ew.summaryPlaceholder),label:e(ew.summaryLabel),onChange:this.onUpdateChildSummary,value:n,isInvalid:uw(n),invalidMessage:r,isLabelHidden:!0,shouldFitContainer:!0,id:a})))),i.a.createElement(iw,null,this.renderAddExistingIssueButton(),i.a.createElement(rw,null,i.a.createElement(aw,{appearance:"primary",onClick:this.onSubmitClicked,isDisabled:dw(n)},e(ew.childCreateButton)),i.a.createElement(aw,{appearance:"subtle",onClick:this.onCancelClicked},e(ew.childCancelButton)))))}}pw.displayName="InlineCreate",pw.defaultProps={addClickCount:0,requiresFullCreate:!1,parentIssueKey:void 0,epicLinkFieldKey:null};var mw=Object(k.b)("issue")(pw),bw=Object(qt.a)([v.i,Object(gs.a)("button",{onSubmitClickAnalytics:"clicked",onCancelClickAnalytics:"clicked",onAddExistingClickAnalytics:"clicked"}),Object(gs.a)("keyboardShortcut",{onEnterKeyPressedAnalytics:"pressed",onEscapeKeyPressedAnalytics:"pressed"}),Object(gs.a)("childIssuePanelInlineCreate",{onSubmit:"onSubmit",
onFullDialogCreate:"onFullDialogCreate"}),Object(E.a)({onSubmitClickAnalytics:"createChildIssue",onCancelClickAnalytics:"hideChildIssueInlineCreate",onEnterKeyPressedAnalytics:"confirmChildIssueCreate",onEscapeKeyPressedAnalytics:"cancelChildIssueCreate",onAddExistingClickAnalytics:"addExistingChildClick"}),Object(r.connect)((e=>({ChildTypesSelect:qk,baseUrl:Dj(e),issues:hj(e),addClickCount:Sj(e),issueTypes:kj(e),selectedIssueType:Tj(e),projectId:Bj(e),parentIssueId:Vj(e),parentIssueKey:Uj(e),epicLinkFieldKey:Wj(e),childIssuesPanelType:Aj(e),requiresFullCreate:Fj(e),summary:Ij(e)})),{onCancel:yE,onAddExistingIssue:()=>jE(OE.AddExistingIssue),onChangeSummary:e=>vE(e),onSubmit:(e,t)=>nv(e,t),onFullDialogCreate:(e,t,s)=>((e,t,s)=>({type:"state.entities.CHILD_CREATED_IN_FULL_DIALOG",payload:{optimisticId:e,createdChild:t},meta:{analyticsEvent:s}}))(e,t,s)
})])(mw),fw=s("./node_modules/lodash/partition.js"),gw=s.n(fw),hw=s("./node_modules/@atlaskit/inline-message/dist/es2019/components/InlineMessage/index.js");const yw=Object(v.h)({retry:{id:"issue.issue-line-card-retry",defaultMessage:"Try again"},cancel:{id:"issue.issue-line-card-cancel",defaultMessage:"Cancel"}}),Ow=Y.default.h1([""," margin-bottom:","px;"],Re.d.h400(),2*Q.e),jw=Y.default.div(["margin-bottom:","px;"],2*Q.e),vw=Y.default.div(["display:flex;justify-content:flex-start;"]),Ew=Y.default.div(["margin-left:","px;"],Q.e),kw=(e,t,s,n,a)=>i.a.createElement(hw.a,{type:"warning",placement:"bottom-end"},i.a.createElement("div",null,i.a.createElement(Ow,null,t),i.a.createElement(jw,null,s),i.a.createElement(vw,null,i.a.createElement(G.a,{onClick:n},e.formatMessage(yw.retry)),i.a.createElement(Ew,null,i.a.createElement(G.a,{appearance:"subtle",onClick:a},e.formatMessage(yw.cancel))))));kw.displayName="renderInlineMessage"
;var ww=s("./node_modules/lodash/isNil.js"),Sw=s.n(ww),Cw=s("./node_modules/lodash/isUndefined.js"),Iw=s.n(Cw),Tw=s("./node_modules/@atlaskit/icon/glyph/list.js"),Pw=s.n(Tw),_w=s("./src/packages/platform/utils/constants/src/index.js"),xw=s("./src/packages/issue/fields/assignee/src/ui/popover/main.js"),Dw=s("./src/packages/issue/fields/number/src/services/index.js"),Aw=s("./src/packages/issue/fields/number/src/ui/view/main.js"),Lw=s("./src/packages/issue/fields/number/src/ui/async.js");const Mw=Y.default.div(["& > div > div{margin-left:0;}"]),Rw=Object(re.f)((()=>s.e("async-issue-field-number").then(s.bind(null,"./src/packages/issue/fields/number/src/index.js"))),{moduleId:"./src/packages/issue/fields/number/src/index.js"}),Nw=Object(a.memo)((({isHovering:e,isActive:t,isFocused:s,issueKey:n,estimateFieldId:r})=>{const[o,c]=Object(a.useState)(!1),[{value:l}]=Object(Dw.a)({issueKey:n,fieldKey:r
}),u=Object(a.useCallback)((()=>c(!0)),[]),d=Object(a.useCallback)((()=>c(!1)),[]),p=!(null==l)||o||!0===e||!0===s||!0===t,m=i.a.createElement(Aw.a,{isEditable:!0,value:l}),b=i.a.createElement(Mw,{role:"button",onClick:e=>e.preventDefault(),onFocus:e=>e.stopPropagation()},i.a.createElement(Lw.a,{packageName:"issue",fallback:m},i.a.createElement(Rw,{issueKey:n,fieldKey:r,onEdit:u,onConfirm:d,onEnter:d,onCancel:d,onEscape:d})));return Object(F.isInlineSummaryFieldEnabled)()||p?b:null})),Fw=Object(v.h)({issueTypeTitle:{id:"issue.view.common.issue-line-card.issue-type.title",defaultMessage:"Issue type: {issueTypeName}"},issuePriorityTitle:{id:"issue.view.common.issue-line-card.priority.title",defaultMessage:"Priority: {issuePriorityName}"},remoteIssueUneditableStatusTooltip:{id:"issue.view.common.issue-line-card.remote-link.status.uneditable.tooltip",defaultMessage:"Remote issue can't be transitioned here. Select to view the issue, then change the status."},remoteLinkDeleteLinkTooltip:{
id:"issue.view.common.issue-line-card.remote-link.delete-button.tooltip",defaultMessage:"Unlink remote issue"},issueLinkDeleteLinkTooltip:{id:"issue.view.common.issue-line-card.delete-button.tooltip",defaultMessage:"Unlink issue"}});var Uw=s("./src/packages/issue/issue-view/src/common/component/progress-tracker/index.js");const Vw=Y.default.div(["width:","px;position:relative;"],5*Q.e);var Kw=({issueTimeTracking:e,statusCategory:t})=>{const[s]=Object(Ku.c)(),{remainingEstimateSeconds:n,originalEstimateSeconds:a,timeSpentSeconds:r}=e,o={loggedTime:r,remainingTime:n},c=a,l=t===_w.a.DONE;return i.a.createElement(Vw,{"data-testid":"issue.views.common.issue-line-card.issue-line-card.mini-time-log-graph"},i.a.createElement(Uw.a,{value:o,estimatedTime:c,config:s,isDone:l,isCompact:!0,shouldHighlightOnHover:!0}))}
;const Ww=Y.default.div(["display:flex;align-items:center;"]),Bw=Object(Y.default)(Ww)(["width:","px;height:100%;margin-left:","px;margin-right:-","px;"],4*Q.e,Q.e/4,Q.e),Hw=Object(Y.default)(Ww)(["width:100%;height:100%;position:relative;"]),$w=Object(Y.default)(Ww)(["cursor:grab;"]),Gw=Object(Y.default)(Ww)(["cursor:not-allowed;&:hover{opacity:0.5;}"]),qw=Object(Y.default)(Ww)(["padding-left:","px;"],Q.e),zw=Y.default.div(["flex:1;margin-left:","px;min-width:0;cursor:text;"],1.25*Q.e),Yw=Object(Y.default)(Ww)(["padding-right:","px;"],Q.e/2),Qw=Y.default.a(["outline:none;margin-left:","px;color:",";font-weight:600;font-size:12px;text-decoration:",";white-space:nowrap;&:hover,&:active,&:visited,&:link{outline:none;color:",";text-decoration:",";}"],Q.e,(e=>e.isActive?Re.a.B400:Re.a.N90),(e=>e.isDone?"line-through":"none"),(e=>e.isActive?Re.a.B400:Re.a.N90),(e=>e.isDone?"line-through":"none")),Jw=Y.default.a(["outline:none;margin-left:","px;color:",";font-weight:500;font-size:12px;text-decoration:",";white-space:nowrap;"],Q.e,Re.a.B400,(e=>e.isDone?"line-through":"none")),Zw=Y.default.div(["",";padding-left:","px;flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(e=>e.isActive&&`color: ${Re.a.B400};`),Q.e),Xw=Y.default.div(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),eS=Y.default.div([""])
;function tS(){return(tS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const{DONE:sS,statusCategoryForId:nS}=_w.a;class aS extends a.Component{constructor(...e){super(...e),this.preventDefault=e=>e.preventDefault(),this.stopPropagation=e=>e.stopPropagation(),this.isActionVisible=()=>{const{isActive:e=!1,isHovering:t=!1,isFocused:s}=this.props;return!e&&(t||!0===s)},this.handleEditStatus=e=>{const{onEdit:t}=this.props;t&&t({statusId:e.id,statusName:e.name,statusCategory:nS(e.statusCategory.id),statusCategoryId:e.statusCategory.id})},this.handleErrorDialogClick=e=>{e.stopPropagation()},this.handleErrorDialogMouseDown=e=>{e.preventDefault(),e.stopPropagation()},this.handleLinkKeyClick=e=>{e.preventDefault();const{issueLink:t,push:s}=this.props;null!=t&&Object(pb.d)(e)?s(t):window.open(t,"_blank")}}shouldRenderKey(){return!!this.props.issueKey}
shouldShowRemoveAction(){const{isActive:e=!1,isHovering:t=!1,canRemove:s=!1,isFocused:n}=this.props;return s&&(e||t||n)}deleteButtonAction(e){e.stopPropagation();const{issueKey:t,globalId:s,onDelete:n}=this.props;null!=t&&n&&n(Object(rr.l)(t),s)}renderReadOnlyAssignee(){const{assigneeDisplayName:e,assigneeUrl:t,isDraggable:s}=this.props;return Sw()(t)?null:i.a.createElement(qw,null,i.a.createElement(je.a,{content:e||"",hideTooltipOnMouseDown:s,position:"bottom"},i.a.createElement(Fr.a,{name:e||"",src:t,size:"small"})))}renderExtractedAssignee(){const{issueKey:e}=this.props;return void 0===e?null:i.a.createElement(qw,{role:"button",onClick:this.preventDefault,onFocus:this.stopPropagation},i.a.createElement(xw.default,{issueKey:Object(rr.l)(e)}))}renderExtractedSummary(){const{issueKey:e,isSummaryFieldEditable:t,summary:s}=this.props;return void 0===e?null:t?i.a.createElement(zw,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.summary",
onClick:this.preventDefault,onFocus:this.stopPropagation},i.a.createElement(fl,{issueKey:Object(rr.l)(e),appearance:"INLINE"})):i.a.createElement(zw,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.summary"},i.a.createElement(ml,{value:s}))}renderStatus(){const{isInteractive:e,issueKey:t,statusCategory:s,statusCategoryId:n,statusId:a,statusName:r,projectType:o,isDraggable:c,isRemote:l,intl:u}=this.props;if(Iw()(t)||Iw()(s)||Iw()(r)||Iw()(a)||Iw()(n))return null;const d=!0===l&&!0!==e?u.formatMessage(Fw.remoteIssueUneditableStatusTooltip):null;return i.a.createElement(qw,{onClick:this.preventDefault,onFocus:this.stopPropagation},i.a.createElement(je.a,{content:d,hideTooltipOnMouseDown:c,position:"bottom"},i.a.createElement(Ha.a,{sourceName:"childIssuesPanel"},i.a.createElement(Jl.a,{isEditable:e,appearance:"lozenge",issueKey:Object(rr.l)(t),projectType:o,initialValue:{id:a,name:r,statusCategory:{id:n}},onSuccess:this.handleEditStatus}))))}
renderPriority(){const{intl:e,isDraggable:t,issuePriorityUrl:s,issuePriorityName:n}=this.props;if(Sw()(s))return null;const a=e.formatMessage(Fw.issuePriorityTitle,{issuePriorityName:n});return i.a.createElement(je.a,{content:n||"",hideTooltipOnMouseDown:t,position:"bottom"},i.a.createElement(Ww,null,i.a.createElement(jb.a,{alt:a,url:s,width:20,height:20})))}renderLoadingSpinner(){return this.props.isLoading?i.a.createElement(qw,null,i.a.createElement(q.a,{size:"small"})):null}renderError(){const{hasError:e=!1,errorInlineMessage:t}=this.props;return e||t?i.a.createElement(qw,{onClick:this.handleErrorDialogClick,onMouseDown:this.handleErrorDialogMouseDown},t):null}renderSummary(){const{isActive:e,issueSummary:t,isDraggable:s}=this.props;return i.a.createElement(Zw,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.summary",isActive:e},i.a.createElement(je.a,{content:t,hideTooltipOnMouseDown:s,position:"bottom"},i.a.createElement(Xw,null,t)))}renderKey(){
const e=void 0===this.props.remoteServerHostname?null:this.props.remoteServerHostname,t=Object(F.isInlineSummaryFieldEnabled)()?i.a.createElement(Jw,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.key",href:this.props.issueLink,isActive:this.props.isActive,isDone:this.props.statusCategory===sS,onClick:this.handleLinkKeyClick},this.props.issueKey):i.a.createElement(Qw,{"data-test-id":"issue.issue-view.views.common.issue-line-card.issue-line-card-view.key",href:this.props.issueLink,isActive:this.props.isActive,isDone:this.props.statusCategory===sS,onClick:this.handleLinkKeyClick},this.props.issueKey);return i.a.createElement(je.a,{content:e,hideTooltipOnMouseDown:this.props.isDraggable,position:"bottom"},t)}renderRemoveButton(){return i.a.createElement(G.a,{iconBefore:i.a.createElement(bd.a,{label:""}),onClick:e=>this.deleteButtonAction(e),tabIndex:-1,appearance:"subtle",spacing:"none"})}renderRemoveButtonContainer(){
const{onDelete:e,isLoading:t,hasError:s=!1,isRemote:n}=this.props;if(e===c.a||t||s)return null;const a=this.shouldShowRemoveAction()?this.props.intl.formatMessage(!0===n?Fw.remoteLinkDeleteLinkTooltip:Fw.issueLinkDeleteLinkTooltip):null;return i.a.createElement(je.a,{content:a,position:"bottom"},i.a.createElement(Bw,null,this.shouldShowRemoveAction()&&this.renderRemoveButton()))}renderType(){const{intl:e,isDraggable:t=!1,issueTypeIconUrl:s,issueTypeName:n,handleUserClickAnalytics:a,restrictedReorderingMessage:r}=this.props,o=e.formatMessage(Fw.issueTypeTitle,{issueTypeName:n}),c="string"==typeof r&&""!==r,l=!t&&c?Gw:$w,u=Sw()(n)?"":n;return i.a.createElement(je.a,{content:!t&&c?String(r):u,hideTooltipOnMouseDown:t,position:"bottom"},i.a.createElement(eS,{onClick:()=>{a&&a("typeIcon")}},(t||c)&&this.isActionVisible()?i.a.createElement(l,null,i.a.createElement(Pw.a,{label:o,size:"small"})):i.a.createElement(Ww,null,i.a.createElement(jb.a,{alt:o,url:s}))))}renderTypeOld(){
const{intl:e,isDraggable:t=!1,issueTypeIconUrl:s,issueTypeName:n,handleUserClickAnalytics:a}=this.props,r=e.formatMessage(Fw.issueTypeTitle,{issueTypeName:n});return i.a.createElement(je.a,{content:!Sw()(n)&&n,hideTooltipOnMouseDown:t,position:"bottom"},i.a.createElement(eS,{onClick:()=>{a&&a("typeIcon")}},t&&this.isActionVisible()?i.a.createElement($w,null,i.a.createElement(Pw.a,{label:r,size:"small"})):i.a.createElement(Ww,null,i.a.createElement(jb.a,{alt:r,url:s}))))}renderEstimate(){const{issueKey:e,estimateFieldId:t,isActive:s,isHovering:n,isFocused:a}=this.props;return Iw()(e)||Iw()(t)?null:i.a.createElement(Nw,{isActive:s,isHovering:n,isFocused:a,issueKey:Object(rr.l)(e),estimateFieldId:t})}renderMiniTimeLogGraph(){const{shouldDisplayWorklogGraph:e,issueTimeTracking:t,statusCategory:s}=this.props;return void 0===(null==t?void 0:t.timeSpentSeconds)||0===t.timeSpentSeconds||!1===Boolean(e)?null:i.a.createElement(Yw,null,i.a.createElement(Kw,{issueTimeTracking:t,statusCategory:s}))
}render(){return i.a.createElement(Hw,{isFocused:this.props.isFocused,isHovering:this.props.isHovering},Object(F.isSortingIssuesUnderEpicEnabled)()?this.renderType():this.renderTypeOld(),this.shouldRenderKey()&&this.renderKey(),this.props.shouldShowInteractiveSummary?this.renderExtractedSummary():this.renderSummary(),this.renderMiniTimeLogGraph(),this.renderPriority(),this.renderEstimate(),this.props.shouldShowInteractiveAssignee?this.renderExtractedAssignee():this.renderReadOnlyAssignee(),this.renderStatus(),this.renderLoadingSpinner(),this.renderError(),this.renderRemoveButtonContainer())}}aS.displayName="IssueLineCard",aS.defaultProps={isLoading:!1,isDraggable:!1,isHovering:!1,isActive:!1,isFocused:!1,isInteractive:!0,hasError:!1,shouldDisplayWorklogGraph:!1,canRemove:!0,restrictedReorderingMessage:"",onDelete:c.a,onEdit:c.a};const iS=e=>{const{push:t}=Object(Lt.q)(),s=Object(xe.c)(),{issueKey:n=""}=e,[a]=Object(xl.b)({issueKey:Object(rr.l)(n),fieldKey:"assignee"
}),r=void 0!==a,[{value:o,fieldConfig:c}]=Object(F.isInlineSummaryFieldEnabled)()?Object(Zc.a)({issueKey:Object(rr.l)(n)}):[{value:null,fieldConfig:null}],l=null!==o,u=(null==c?void 0:c.isEditable)||!1;return i.a.createElement(aS,tS({push:t,shouldShowInteractiveAssignee:r,shouldShowInteractiveSummary:l,isSummaryFieldEditable:u,summary:o,intl:s},e))};iS.displayName="IssueLineCardWithHooks";var rS=iS,oS=Object(v.h)({createChildErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-child-error-title",defaultMessage:"We couldn't create the child issue"},createSubtaskErrorTitle:{id:"issue.views.common.child-issues-panel.issues.create-subtask-error-title",defaultMessage:"We couldn't create the subtask"},createErrorBody:{id:"issue.views.common.child-issues-panel.issues.create-error-body",defaultMessage:"Check your connection, then give it another try"},linkIssueErrorTitle:{id:"issue.views.common.child-issues-panel.issues.link-issue-error-title",
defaultMessage:"We couldn't link the child issue"},linkIssueErrorBody:{id:"issue.views.common.child-issues-panel.issues.link-issue-error-body",defaultMessage:"Check your connection, then give it another try"},restrictedReorderingMessage:{id:"issue.views.common.child-issues-panel.issues.restricted-reordering-message",defaultMessage:"To order these issues manually, choose 'Order by rank'"}});const cS=Y.default.div(["margin-top:","px;margin-bottom:","px;padding-right:1px;"],Q.e,Q.e);function lS(){return(lS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function uS(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function dS(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?uS(Object(s),!0).forEach((function(t){pS(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):uS(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function pS(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class mS extends a.Component{constructor(...e){super(...e),this.onChildIssueClick=(e,t)=>{const s=e.issueKey;"string"==typeof s&&Object(pb.d)(t)?this.props.onNavigateToNewIssue({fromIssueKey:this.props.parentKey,toIssueKey:s}):"string"==typeof s&&(Object(pb.e)(t)||Object(pb.a)(t))&&window.open(e.issueLink,"_blank")},this.onOrderChange=(e,t,s,n,a)=>{this.props.onReorderChildren(this.props.allIssues,e,s,n,a)}}inlineErrorMessage(e,t){const{intl:s,onInlineErrorCreateRetry:n,onInlineErrorLinkingRetry:a,onInlineErrorCancel:i,isClassicSubtaskPanel:r}=this.props;switch(t){
case pE:return kw(s,s.formatMessage(oS.linkIssueErrorTitle),s.formatMessage(oS.linkIssueErrorBody),((t,s)=>a(e,s)),(()=>i(e)));case dE:default:{const t=r?oS.createSubtaskErrorTitle:oS.createChildErrorTitle;return kw(s,s.formatMessage(t),s.formatMessage(oS.createErrorBody),((t,s)=>n(e,s)),(()=>i(e)))}}}renderIssueLineCardGroup({groupId:e,issues:t,projectType:s,isReorderEnabled:n,isInteractive:a,onEditIssue:r,shouldDisplayWorklogGraph:o,restrictedReorderingMessage:c}){return i.a.createElement(db.a,{items:t,onOrderChange:this.onOrderChange,groupId:e,isReorderEnabled:n,isInteractive:a,onClick:this.onChildIssueClick},((e,t,l,u)=>i.a.createElement(rS,lS({isHovering:e,isActive:t,isFocused:l,isDraggable:n,isInteractive:a,projectType:s,onEdit:r&&(e=>r&&r(dS(dS({},u),e))),shouldDisplayWorklogGraph:o},Boolean(c)&&{restrictedReorderingMessage:c},u))))}render(){
const{allIssues:e,incompleteIssues:t,hideDone:s,isClassicSubtaskPanel:n,isNextGenChildrenPanel:a,projectType:r,onEditIssue:o,shouldDisplayWorklogGraph:c,intl:{formatMessage:l},restrictReordering:u=!1}=this.props,d=e.length>1,p=e.filter((e=>e.isLoading)).length>0,m=(a||n)&&!s&&d&&!p&&!u,b=(s?t:e).map((e=>e.errorType?dS(dS({},e),{},{errorInlineMessage:this.inlineErrorMessage(e.id,e.errorType)}):e)),f={"data-testid":"issue.issue-view.views.common.child-issues-panel.issues-container"},g=(a||n)&&d&&u&&{restrictedReorderingMessage:l(oS.restrictedReorderingMessage)};return i.a.createElement(cS,f,this.renderIssueLineCardGroup(dS({groupId:"child-issues-panel",issues:b,projectType:r,isReorderEnabled:m,onEditIssue:o,shouldDisplayWorklogGraph:c},g)))}}mS.displayName="Issues",mS.defaultProps={isClassicSubtaskPanel:!1,isNextGenChildrenPanel:!1,shouldDisplayWorklogGraph:!1,allIssues:[],incompleteIssues:[],projectType:null,restrictReordering:!1,onReorderChildren:c.a,onEditIssue:c.a}
;const bS=e=>[...e].sort(((e,t)=>void 0===e.created?1:void 0===t.created?-1:t.created-e.created)),fS=e=>[...e].sort(((e,t)=>{const[s="",n=0]=(e.issueKey||"").split("-"),[a="",i=0]=(t.issueKey||"").split("-");return s.localeCompare(a)||parseInt(n,10)-parseInt(i,10)})),gS={UNDEFINED:0,TODO:1,IN_PROGRESS:2,DONE:3},hS=e=>gS[null==e?"UNDEFINED":e]||0,yS=e=>[...e].sort(((e,t)=>hS(e.statusCategory)-hS(t.statusCategory)||(e.statusName||"").localeCompare(t.statusName||""))),OS=e=>[...e].sort(((e,t)=>""===e.assigneeDisplayName||null==e.assigneeDisplayName?1:""===t.assigneeDisplayName||null==t.assigneeDisplayName?-1:e.assigneeDisplayName.localeCompare(t.assigneeDisplayName))),jS=(e,t)=>{const s=e.indexOf(t);return s>=0?s:Number.MAX_SAFE_INTEGER};function vS(){return(vS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function ES(e,t){if(null==e)return{}
;var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const kS=e=>{let{allIssues:t,incompleteIssues:s,sortBy:n}=e,r=ES(e,["allIssues","incompleteIssues","sortBy"]);const o=Object(Us.g)(),[c]=Object(mu.a)(o,"priority"),l=(null==c?void 0:c.allowedValues)||[],u=Object(a.useMemo)((()=>l.map((e=>e.name))),[l]),[d]=ij(),[p,m]=Object(a.useMemo)((()=>gw()(t,(e=>d.includes(e.id)))),[t,d]),[b,f]=Object(a.useMemo)((()=>gw()(s,(e=>d.includes(e.id)))),[s,d]),g=Object(a.useMemo)((()=>{switch(n){case"created":return bS;case"key":return fS;case"status":return yS;case"assignee":return OS;case"priority":return e=>((e,t)=>[...e].sort(((e,s)=>jS(t,e.issuePriorityName)-jS(t,s.issuePriorityName))))(e,u);case"ranking":default:
return e=>e}}),[u,n]),h=Object(a.useMemo)((()=>g(p)),[p,g]),y=Object(a.useMemo)((()=>g(b)),[b,g]),O=null!==n&&"ranking"!==n;return i.a.createElement(mS,vS({},r,{allIssues:[...h,...m],incompleteIssues:[...y,...f],restrictReordering:O}))};kS.displayName="SortedIssues",kS.defaultProps={isClassicSubtaskPanel:!1,isNextGenChildrenPanel:!1,shouldDisplayWorklogGraph:!1,allIssues:[],incompleteIssues:[],projectType:null,onReorderChildren:c.a,onEditIssue:c.a};const wS=e=>{const{sortBy:t}=e,s=ES(e,["sortBy"]);return i.a.createElement(mS,s)};wS.displayName="OldIssuesWithAdjustedProps";const SS=Object(k.b)("issue")(wS),CS=Object(k.b)("issue")(kS);function IS(){return(IS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const TS=e=>{const[t]=rj();return i.a.createElement(CS,IS({},e,{sortBy:t}))};TS.displayName="ConnectedIssuesList"
;const PS=Object(ir.a)(F.isSortingIssuesUnderEpicEnabled,TS,SS);var _S=Object(qt.a)([v.i,Object(gs.a)("button",{onInlineErrorCancel:"clicked",onInlineErrorCreateRetry:"clicked"}),Object(gs.a)("inlineIssue",{onNavigateToNewIssue:"clicked",onReorderChildren:"dragged"}),Object(E.a)({onInlineErrorCancel:"cancelInlineErrorCreate",onInlineErrorCreateRetry:"retryInlineErrorCreate",onNavigateToNewIssue:"navigateToNewIssue",onReorderChildren:"reorderChildren"}),Object(r.connect)((e=>({allIssues:hj(e),sortBy:null,incompleteIssues:Oj(e),hideDone:Pj(e),parentKey:Uj(e),projectType:Qj(e),isClassicSubtaskPanel:Lj(e),isNextGenChildrenPanel:Rj(e),onNavigateToNewIssue:qj(e),shouldDisplayWorklogGraph:Lj(e)||Rj(e)&&0===vj(e)})),{onInlineErrorCancel:e=>({type:"state.entities.CANCEL_OPTIMISTIC_CHILD",payload:{optimisticId:e}}),onInlineErrorCreateRetry:(e,t)=>({type:"state.entities.CREATE_CHILD_RETRY",payload:{optimisticId:e},meta:{analyticsEvent:t}}),onInlineErrorLinkingRetry:(e,t)=>({
type:"state.entities.LINKING_ISSUE_RETRY",payload:{issueId:e},meta:{analyticsEvent:t}}),onReorderChildren:(e,t,s,n,a)=>({type:"state.entities.REORDER_CHILDREN_REQUEST",payload:{currentOrder:e,newOrder:t,currentIndex:s,newIndex:n},meta:{analyticsEvent:a}}),onEditIssue:e=>({type:"state.entities.UPDATE_ISSUE",payload:e})})])(PS),xS=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/progress-bar/index.js"),DS=Object(v.h)({completionPercentageText:{id:"issue.views.common.child-issues-panel.progress-summary.completion-percentage-text",defaultMessage:"{completionPercentage}% Done"},todoIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-issues-segment-tooltip-text",defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} issues"},todoSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.todo-subtasks-segment-tooltip-text",defaultMessage:"To Do: {todoIssueCount} of {totalIssueCount} subtasks"},
inProgressIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.in-progress-issues-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} issues"},inProgressSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.in-progress-subtasks-segment-tooltip-text",defaultMessage:"In Progress: {inProgressIssueCount} of {totalIssueCount} subtasks"},completedIssuesSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-issues-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} issues"},completedSubtasksSegmentTooltipText:{id:"issue.views.common.child-issues-panel.progress-summary.completed-subtasks-segment-tooltip-text",defaultMessage:"Done: {completedIssueCount} of {totalIssueCount} subtasks"}})
;const AS=Re.a.N30,LS=Re.a.B400,MS=Re.a.G300,RS=Y.default.div(["display:flex;align-items:center;"]),NS=Y.default.div(["flex-grow:1;"]),FS=Y.default.div(["margin-left:","px;margin-right:","px;flex-shrink:0;color:",";"],2*Q.e,.25*Q.e,Re.a.N200),US=Y.default.span(["display:inline-block;width:","px;text-align:right;"],3*Q.e);function VS(){return(VS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const KS={remainingTooltip:DS.todoSubtasksSegmentTooltipText,completedTooltip:DS.completedSubtasksSegmentTooltipText,inProgressTooltip:DS.inProgressSubtasksSegmentTooltipText},WS={remainingTooltip:DS.todoIssuesSegmentTooltipText,completedTooltip:DS.completedIssuesSegmentTooltipText,inProgressTooltip:DS.inProgressIssuesSegmentTooltipText};var BS=Object(qt.a)([v.i,Object(r.connect)((e=>({isClassicSubtaskPanel:Lj(e),totalIssueCount:hj(e).length,
inProgressIssueCount:jj(e).length,completedIssueCount:yj(e).length})),{})])((e=>{const{isClassicSubtaskPanel:t,intl:{formatMessage:s},totalIssueCount:n,inProgressIssueCount:a,completedIssueCount:r}=e,o=n-a-r,c=Math.floor(r/n*100),{remainingTooltip:l,completedTooltip:u,inProgressTooltip:d}=t?KS:WS;return i.a.createElement(RS,null,i.a.createElement(NS,null,i.a.createElement(xS.b,{sum:n,backgroundColor:AS,remainingTooltipContent:s(l,{todoIssueCount:o,totalIssueCount:n})},i.a.createElement(xS.a,{value:r,color:MS,tooltipContent:s(u,{completedIssueCount:r,totalIssueCount:n})}),i.a.createElement(xS.a,{value:a,color:LS,tooltipContent:s(d,{inProgressIssueCount:a,totalIssueCount:n})}))),i.a.createElement(FS,null,i.a.createElement(v.c,VS({},DS.completionPercentageText,{values:{completionPercentage:i.a.createElement(US,null,c)}}))))}));class HS extends a.Component{hasIssues(){const{allIssues:e}=this.props;return e.length>0}hasContent(){const{noValueText:e,addClickCount:t}=this.props
;return this.hasIssues()||t>0||!!e}renderEmptyValue(){const{noValueText:e,addClickCount:t,intl:{formatMessage:s}}=this.props;return this.hasIssues()||null===e||0!==t?null:i.a.createElement(Li.b,null,s(e))}renderIssues(){const{ProgressSummary:e,Issues:t,allIssues:s}=this.props,n=s.length>=2?i.a.createElement(e,null):null;return s.length>0?i.a.createElement(i.a.Fragment,null,n,i.a.createElement(t,null)):null}renderCreate(){const{InlineCreate:e,addClickCount:t,AddExistingIssue:s,childPanelView:n,sourceName:a}=this.props;if(t>0)switch(n){case OE.InlineCreate:return i.a.createElement(e,{inputId:a});case OE.AddExistingIssue:return i.a.createElement(s,null);default:return null}return null}render(){const{Heading:e,onAddChildClick:t,sourceName:s}=this.props;return this.hasContent()?i.a.createElement(i.a.Fragment,null,i.a.createElement(e,{onAddChildClick:t,sourceName:s}),this.renderEmptyValue(),this.renderIssues(),this.renderCreate()):null}}HS.displayName="ChildIssuesPanel",HS.defaultProps={
addClickCount:0,noValueText:null};var $S=Object(qt.a)([v.i,Object(r.connect)((e=>({Heading:_k,InlineCreate:bw,Issues:_S,ProgressSummary:BS,AddExistingIssue:ak,childPanelView:Cj(e),allIssues:hj(e),incompleteIssues:Oj(e),addClickCount:Sj(e),noValueText:Gj(e)})),{})])(HS);function GS(){return(GS=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function qS(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function zS(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?qS(Object(s),!0).forEach((function(t){YS(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):qS(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function YS(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class QS extends a.Component{constructor(e){super(e),this.store=void 0;const{issues:t,parentKey:s,childIssuesPanelType:n}=this.props;this.store=((e,t,s)=>Object(iE.a)({appName:`${t}-child-issues-panel-${s}`,rootReducer:IE,rootEpic:e}))(aE(this.props.dataProvider),s,n),this.dispatchContext(),this.store.dispatch((()=>({type:"state.context.REQUIRES_FULL_CREATE_CHECK"}))()),this.dispatchEntities(),"classicSubtasks"!==n&&t.length>0&&this.store.dispatch(cv());const{fetchIssueTypesStatus:a}=e;a&&this.store.dispatch(EE(a))}componentDidMount(){Object(F.isStopFetchPreviewEnabled)()||this.props.issues.length>0&&this.props.prefetchChildIssues(this.props.issues.map((e=>e.id)))}componentDidUpdate(e){if(Object(YO.a)(e,this.props))return
;const{issues:t,quickAddClickCount:s,fetchIssueTypesStatus:n,onChange:a}=this.props;if(s>e.quickAddClickCount&&this.store.dispatch(hE()),t.length&&this.dispatchEntities(),n!==e.fetchIssueTypesStatus&&(this.store.dispatch(EE(n||"NONE")),this.dispatchEntities()),!Object(F.isStopFetchPreviewEnabled)()){const s=t.map((e=>e.id)),n=e.issues.map((e=>e.id));Da()(s,n)||this.props.prefetchChildIssues(s)}e.onChange!==a&&this.store.dispatch((e=>({type:"state.context.SET_ONCHANGE",payload:e}))(a))}dispatchEntities(){const{issueTypes:e,issues:t,epicLinkFieldKey:s,issueHierarchyLevel:n}=this.props;this.store.dispatch((e=>({type:"state.entities.SET_ENTITIES",payload:e}))({issueTypes:e.map((e=>((e,t)=>{const{fields:s}=e,n=uj(e,["fields"]),a=!!s&&pj(s),i=!!s&&Object.keys(s).includes(t);return cj(cj({},n),{},{hasRequiredField:a,hasEpicLinkField:i})})(e,s))),issues:t,issueHierarchyLevel:n}))}dispatchContext(){
const{supportsIssueCreation:e,baseUrl:t,locale:s,user:n,parentKey:a,customFieldIdRank:i,epicLinkFieldKey:r,parentId:o,projectId:c,projectType:l,messages:u,onNavigateToNewIssue:d,onChange:p,childIssuesPanelType:m,isIssueViewComplete:b}=this.props;let f=null,g=null;if(null!==l){const{appEditions:e}=Object(xn.f)();f=Object(Dn.e)(l),g=Object(An.f)(f,e)}this.store.dispatch((e=>({type:"state.context.SET_CONTEXT",payload:e}))({baseUrl:t,locale:s,user:n,projectId:c,parentId:o,parentKey:a,customFieldIdRank:i,epicLinkFieldKey:r,supportsIssueCreation:e,messages:u,onNavigateToNewIssue:d,onChange:p,childIssuesPanelType:m,isIssueViewComplete:b,projectType:l,application:f,edition:g,requiresFullCreate:!1}))}render(){const{onAddChildClick:e,childIssuesPanelType:t,analyticsSource:s,issueHierarchyLevel:n}=this.props;return i.a.createElement(GO.a,{store:this.store},i.a.createElement(Ha.a,{sourceName:"childIssuesPanel",sourceType:$a.f,attributes:{childIssuesPanelType:t,issueHierarchyLevel:n-1,
analyticsSource:`issue-view (${s})`}},i.a.createElement(qO.a,null,i.a.createElement($S,{onAddChildClick:e,sourceName:"childIssuesPanel"}),i.a.createElement(zO.a,{mapper:ZO}))))}}QS.displayName="ChildIssuesPanel",QS.defaultProps={issues:[],issueTypes:[],isIssueViewComplete:!1};const JS=e=>{const{issues:t}=e,s=Object(a.useRef)(!0),[,{setSortableIssueIds:n}]=ij();return Object(a.useEffect)((()=>{!0===s.current&&(n(t.map((e=>Object(rr.j)(e.id)))),s.current=!1)})),i.a.createElement(QS,e)};JS.displayName="WrappedSortingChildIssuesPanel";const ZS=Object(ir.a)(F.isSortingIssuesUnderEpicEnabled,JS,QS),XS={nextGenChildren:"children-issues",classicProjectEpicChildren:"epic-issues",classicSubtasks:"subtasks",portfolioChildren:"portfolio-child-issues"},eC=e=>{const{childIssuesPanelType:t,issues:s}=e,n=(e=>{const t=Object(Us.g)(),[s]=Object(xl.b)({issueKey:t,fieldKey:e}),n=(s||[]).map((e=>({key:e.key,id:e.id}))),a=n.map((e=>e.key)),[i]=Object(xl.c)({issueKeys:a,fieldKey:"summary"
}),[r]=Object(xl.c)({issueKeys:a,fieldKey:"timetracking"}),[o]=Object(xl.c)({issueKeys:a,fieldKey:"assignee"}),[c]=Object(xl.c)({issueKeys:a,fieldKey:"priority"}),[l]=Object(xl.c)({issueKeys:a,fieldKey:"issuetype"}),[u]=Object(xl.c)({issueKeys:a,fieldKey:"status"}),[d]=Object(xl.c)({issueKeys:a,fieldKey:"created"}),[p]=Object(xl.c)({issueKeys:a,fieldKey:"updated"});return n.map(((e,t)=>{var s,n,a,m,b,f,g,h,y,O,j,v,E;return{assigneeDisplayName:null===(s=o[t])||void 0===s?void 0:s.displayName,assigneeUrl:null===(n=o[t])||void 0===n||null===(a=n.avatarUrls)||void 0===a?void 0:a["48x48"],created:d[t]&&new Date(d[t]),id:e.id,isLoading:!1,issueKey:e.key,issueLink:`/browse/${e.key}`,issuePriorityName:null===(m=c[t])||void 0===m?void 0:m.name,issuePriorityUrl:null===(b=c[t])||void 0===b?void 0:b.iconUrl,issueSummary:i[t],issueTimeTracking:r[t],issueTypeIconUrl:null===(f=l[t])||void 0===f?void 0:f.iconUrl,issueTypeName:null===(g=l[t])||void 0===g?void 0:g.name,
statusCategory:Object(_l.statusCategoryForId)(null===(h=u[t])||void 0===h||null===(y=h.statusCategory)||void 0===y?void 0:y.id),statusCategoryId:null===(O=u[t])||void 0===O||null===(j=O.statusCategory)||void 0===j?void 0:j.id,statusId:null===(v=u[t])||void 0===v?void 0:v.id,statusName:null===(E=u[t])||void 0===E?void 0:E.name,updated:p[t]&&new Date(p[t])}}))})(XS[t]),a=n.every((e=>Boolean(e.issueSummary)));let r=s;return n.length>0&&a&&Xj(t)&&(r=n.map(((e,t)=>zS(zS({},e),{},{estimateFieldId:s[t].estimateFieldId,estimateValue:s[t].estimateValue})))),i.a.createElement(JS,GS({},e,{issues:r}))};eC.displayName="WrappedStateRefactorChildIssuesPanel";const tC=Object(ir.a)(F.isStateRefactorInChildIssuesPanelEnabled,eC,ZS),sC=e=>{const{onNavigateToNewIssue:t}=e,s=Object(Us.h)(),n=Object(Us.g)(),r=Object(Us.i)(),o=Object(Ga.g)(r),c=Object(Ga.k)(r),l=Object(Qi.a)(),u=Object(eh.a)(),d=Object(Zh.a)(),p=Object(a.useCallback)((e=>{t(e),null==s||s(e)}),[s,t]);return i.a.createElement(tC,GS({},e,{
onNavigateToNewIssue:p,parentKey:n||Object(rr.l)(""),projectId:Object(rr.q)(o||""),projectType:c||null,baseUrl:l,user:u,locale:d}))};sC.displayName="ChildIssuesPanelWithHooks";const nC=e=>{const{childIssuesPanelType:t}=e,s=Object(Us.g)();return i.a.createElement(R.a,{id:"issue.issue-view.common.child-issues-panel"},i.a.createElement(N.a,{id:"common.child-issues-panel",packageName:"jiraIssueView",sendToPrivacyUnsafeSplunk:!0},i.a.createElement(aj,{scope:`${s}-${t}`},i.a.createElement(sC,e))))};nC.displayName="DecoratedComponent";var aC=Object(QO.a)(nC);var iC=Object(v.h)({title:{id:"issue.children-issues.title",defaultMessage:"Child issues"}});function rC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function oC(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?rC(Object(s),!0).forEach((function(t){cC(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):rC(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function cC(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function lC(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function uC(){return(uC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const dC=e=>{
const t=e.onChange,s=Object(Us.g)(),[n,{setFieldValue:r}]=Object(xl.b)({issueKey:s,fieldKey:"children-issues"}),o=Object(a.useCallback)((e=>{switch(e.type){case $O.CHILD_ISSUE_ADDED:r(s,"children-issues",n.concat({id:e.meta.childIssue.id,key:e.meta.childIssue.issueKey}))}t(e)}),[n,s,t,r]);return i.a.createElement(aC,uC({},e,{onChange:o}))};dC.displayName="ConnectedComponent";var pC=Object(r.connect)((e=>({childIssuesPanelType:"nextGenChildren",parentId:Object(T.w)(e),customFieldIdRank:Object(gn.b)("com.pyxis.greenhopper.jira:gh-lexo-rank")(e),issueTypes:Object(zt.j)(e),issues:Object(WO.a)(e),supportsIssueCreation:Object(zt.k)(e),quickAddClickCount:KO(e),isIssueViewComplete:Object(P.n)(e),messages:iC,fetchIssueTypesStatus:Object(Oc.a)(e),issueHierarchyLevel:Object(F.collapsedHierarchies)()?Object(zt.b)(e):Object(zt.f)(e),analyticsSource:Object(T.b)(e)})),(e=>({onChange:t=>{switch(t.type){case $O.CHILD_ISSUE_ADDED:e(LO(t.meta.childIssue,t.meta.fieldsData));break
;case $O.ISSUE_CHILDREN_ORDER_CHANGED:e((({issueIds:e,rankId:t,isRankAfter:s})=>({type:"ISSUE_CHILDREN_ORDER_CHANGE_SUCCESS",payload:{issueIds:e,rankId:t,isRankAfter:s}}))(t.meta))}},onAddChildClick:()=>e(MO()),prefetchChildIssues:t=>e(Object(NO.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(RO.c)({fromIssueKey:t,toIssueKey:s}))}})),((e,t)=>{const{onNavigateToNewIssueDispatchProp:s}=t,n=lC(t,["onNavigateToNewIssueDispatchProp"]);return oC(oC(oC({},e),n),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t})}})}))(dC),mC=s("./src/packages/issue/issue-view/src/views/issue-base/content/confluence-pages/confluence-pages-view.js"),bC=s("./node_modules/react-async-component/commonjs/index.js"),fC=Object(bC.asyncComponent)({
resolve:()=>s.e("async-cross-join-via-epic-touchpoint").then(s.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/content/cross-join-via-epic-touchpoint/index.js")),name:"AsyncCrossJoinViaEpicTouchpoint"}),gC=s("./src/packages/issue/issue-view/src/common/state/selectors/permissions-selector.js");const hC=Object(fn.createSelector)(Oc.c,(e=>!!e.find(Oc.b))),yC=Object(fn.createSelector)(gC.h,hC,T.r,T.o,(({canCreateIssuesInClassicProjectEpic:e},t,s,n)=>e&&!(!!t&&(s||n))));var OC=Object(v.h)({title:{id:"issue.epic-issues-title",defaultMessage:"Issues in this epic"}});function jC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vC(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jC(Object(s),!0).forEach((function(t){EC(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jC(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function EC(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function kC(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function wC(){return(wC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const SC=e=>{const t=e.onChange,s=Object(Us.g)(),[n,{setFieldValue:r}]=Object(xl.b)({
issueKey:s,fieldKey:"epic-issues"}),o=Object(a.useCallback)((e=>{switch(e.type){case $O.CHILD_ISSUE_ADDED:r(s,"epic-issues",n.concat({id:e.meta.childIssue.id,key:e.meta.childIssue.issueKey}))}t(e)}),[n,s,t,r]);return i.a.createElement(aC,wC({},e,{onChange:o}))};SC.displayName="ConnectedComponent";var CC=Object(r.connect)((e=>({childIssuesPanelType:"classicProjectEpicChildren",parentId:Object(T.w)(e),epicLinkFieldKey:Object(P.g)(e),issueTypes:Object(Oc.c)(e),issues:Object(WO.a)(e),messages:OC,quickAddClickCount:VO(e),supportsIssueCreation:yC(e),isIssueViewComplete:Object(P.n)(e),fetchIssueTypesStatus:Object(Oc.a)(e)})),(e=>({onChange:t=>{switch(t.type){case $O.CHILD_ISSUE_ADDED:e(LO(t.meta.childIssue,t.meta.fieldsData))}},onAddChildClick:()=>e(MO()),prefetchChildIssues:t=>e(Object(NO.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(RO.c)({fromIssueKey:t,toIssueKey:s}))}})),((e,t)=>{
const{onNavigateToNewIssueDispatchProp:s}=t,n=kC(t,["onNavigateToNewIssueDispatchProp"]);return vC(vC(vC({},e),n),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({fromIssueKey:e,toIssueKey:t})}})
}))(SC),IC=s("./src/packages/platform/utils/constants/src/project-types.js"),TC=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/with-link-actions/index.js"),PC=s("./src/packages/issue/issue-view/src/actions/applink-authentication-actions.js"),_C=s("./src/packages/issue/issue-view/src/actions/issue-links-actions.js"),xC=s("./src/packages/issue/issue-view/src/actions/remote-issue-links-actions.js"),DC=s("./src/packages/issue/issue-view/src/selectors/issue-links-selector.js"),AC=s("./src/packages/issue/issue-view/src/selectors/issue-links-type-selector.js"),LC=s("./src/packages/common-legacy-do-not-add-anything-new/src/navigation/iframe-redirect/index.js"),MC=s("./src/packages/issue/issue-view/src/actions/fetch-jira-app-links-actions.js"),RC=s("./src/packages/issue/issue-view/src/selectors/issue-actions-permissions-selector.js");const NC=Object(fn.createSelector)(P.f,(e=>e.jiraAppLinks||{status:"NOT_LOADED",remoteLinks:[]
})),FC=Object(fn.createSelector)(NC,(e=>e.status)),UC=Object(fn.createSelector)(DC.e,RC.d,((e,t)=>e&&t)),VC=Object(fn.createSelector)(NC,(e=>e.remoteLinks)),KC=/^(([A-Z][A-Z0-9]+)-([0-9]+))($|\?.*)/,WC=()=>""!==window.location.port?Object(rr.b)(`${window.location.protocol}//${window.location.hostname}:${window.location.port}`):Object(rr.b)(`${window.location.protocol}//${window.location.hostname}`);var BC=(e,t)=>{let s=e;if(void 0===s||void 0===t)return t||"";if(s.endsWith("/")||(s+="/"),s+="browse/",0!==t.indexOf(s))return t;const n=t.slice(s.length).match(KC);return null===n?t:n[1]||""};const HC=e=>{const{selectItems:t,selectedItem:s,onChange:n}=e;return i.a.createElement(xk.a,{options:t,defaultValue:s,styles:DE.f,onChange:n})};HC.displayName="IssueLinkTypeSelect",HC.defaultProps={selectedItem:null};const $C=Object(v.h)({remoteLinkAuthText:{id:"issues.issue-links.jira-app-link-option.auth-required",defaultMessage:"Authenticate to search"}
}),GC=Y.default.span(["margin-right:10px;"]),qC=({value:e,intl:t,onAuthenticateAppLink:s})=>e.fullObject.requireCredentials?i.a.createElement(je.a,{content:e.fullObject.baseUrl,position:"bottom"},i.a.createElement("p",null,i.a.createElement(GC,null,e.label),i.a.createElement(G.a,{spacing:"none",appearance:"link",onClick:(t,n)=>((t,n)=>{t.preventDefault(),void 0!==s&&(s(e.fullObject.authUrl,n),n&&Object(Wa.h)(n,"JiraApplinkSelectAuthentication",{appLinkId:e.fullObject.id}))})(t,n),iconBefore:i.a.createElement(wy.a,{size:"small",label:""})},i.a.createElement("span",null,t.formatMessage($C.remoteLinkAuthText))))):i.a.createElement(je.a,{content:e.fullObject.baseUrl,position:"bottom"},i.a.createElement(GC,null,e.label));qC.displayName="JiraAppLinkOption";var zC=qC;const YC=Object(f.a)({onMenuOpen:{action:"opened",component:"select"},onMenuClose:{action:"closed",component:"select"}})(xk.a);function QC(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function JC(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?QC(Object(s),!0).forEach((function(t){ZC(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):QC(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ZC(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const XC=JC(JC({},DE.f),{},{menu:(e,t)=>JC(JC({},DE.f.menu?DE.f.menu(e,t):{}),{},{minWidth:t.selectProps.containerWidth||"auto"}),option:(...e)=>JC(JC({},DE.f.option?DE.f.option(...e):{}),{},{overflow:"initial"})});class eI extends a.Component{handleClick(e,t,s){e.preventDefault(),
void 0!==this.props.onAuthenticateAppLink&&(this.props.onAuthenticateAppLink(t.fullObject.authUrl,s),s&&Object(Wa.h)(s,"JiraApplinkSelectAuthentication",{appLinkId:t.fullObject.id}))}formatOptionLabel(e){return i.a.createElement(zC,{value:e,intl:this.props.intl,onAuthenticateAppLink:this.props.onAuthenticateAppLink})}getNumAppLinksRequiringAuth(){return this.props.selectItems.filter((e=>e.fullObject.requireCredentials)).length}sendMenuAnalytics(e,t){e&&Object(Wa.h)(e,`issueView.JiraAppLinksSelect ${t}`,"JiraAppLinksSelect",{numAppLinks:this.props.selectItems.length-1,numAppLinksRequiringAuth:this.getNumAppLinksRequiringAuth()})}onChange(e,t){this.props.onChange(e),t&&Object(Wa.h)(t,"issueView.JiraAppLinksSelect changed","JiraAppLinksSelect",{appLinkId:e.fullObject.id})}render(){const{selectItems:e,defaultValue:t,containerWidth:s}=this.props;return i.a.createElement(R.a,null,i.a.createElement(N.a,{packageName:"jiraIssueView",id:"JiraAppLinksSelect"},i.a.createElement(YC,{options:e,
defaultValue:t,onChange:(e,t,s)=>this.onChange(e,s),formatOptionLabel:e=>this.formatOptionLabel(e),isOptionDisabled:e=>e.fullObject.requireCredentials,styles:XC,onMenuOpen:e=>this.sendMenuAnalytics(e,"opened"),onMenuClose:e=>this.sendMenuAnalytics(e,"closed"),containerWidth:s}),i.a.createElement(Ba.a,{onMount:t=>{t&&Object(Wa.h)(t,"issueView.JiraAppLinksSelect mounted","JiraAppLinksSelect",{numAppLinks:e.length-1,numAppLinksRequiringAuth:this.getNumAppLinksRequiringAuth()})}})))}}eI.displayName="JiraAppLinksSelect";const tI=Object(v.i)(eI);var sI=at()([Object(r.connect)((()=>({})),(e=>({onAuthenticateAppLink:(t,s)=>e(Object(PC.a)(t,s))})))])(tI);const nI="local",aI="Local",iI={label:aI,value:nI,fullObject:{id:nI,name:aI,baseUrl:WC(),authUrl:Object(rr.i)(""),requireCredentials:!1}}
;var rI=s("./node_modules/lodash/keys.js"),oI=s.n(rI),cI=s("./src/packages/platform/utils/constants/src/issue-link-types.js"),lI=s("./src/packages/platform/observability/analytics-web-react/src/utils/fire-ui-event.js"),uI=Object(v.h)({createLinkedIssueButtonLabel:{id:"issue.linked-issue-create.button-label",defaultMessage:"Create linked issue"},createLinkedIssueDialogTitle:{id:"issue.linked-issue-create.dialog-title",defaultMessage:"Create linked issue"}});function dI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function pI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const mI=(e,t)=>{let s={};const n=bs()(To()(e,["fields","issuelinks"]),(e=>To()(e.outwardIssue||e.inwardIssue,"id")===t));if(void 0!==n){const e=(e=>e.outwardIssue?"INWARD":"OUTWARD")(n);s={
issueLink:{id:n.id,direction:e,linkType:{id:To()(n,["type","id"],""),label:"INWARD"===e?To()(n,["type","inward"],""):To()(n,["type","outward"],"")}}}}return function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?dI(Object(s),!0).forEach((function(t){pI(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):dI(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({id:Object(rr.j)(e.id),key:Object(rr.l)(e.key),summary:To()(e,["fields","summary"],""),issueTypeIconUrl:To()(e,["fields","issuetype","iconUrl"],"")},s)};const bI="issue.views.issue-base-content.issue-links.add.create-linked-issue-button.view";class fI extends a.Component{constructor(...e){super(...e),this.showCreateLinkedIssueDialog=async()=>{const{baseUrl:e,sourceIssueId:t,sourceIssueKey:s,onLinkedIssueCreated:n}=this.props;this.showLoadingIndicator();try{
const a=await Object(Qk.a)({name:"wrm/require"});await new Promise((e=>{a("wr!com.atlassian.jira.jira-quick-edit-plugin:create-linked-issue",e)}));(await Object(Qk.a)({name:"quick-edit/create-linked-issue/create-linked-issue-dialog"})).show({sourceIssueId:t,sourceIssueKey:s}).getQuickForm().bind("issueCreated",((s,{createdIssueDetails:a})=>{n(((e,t,s)=>{const n=mI(e,t);if(void 0===n.issueLink)return{issueLinks:{},linkedIssues:{}};const{issueLink:a}=n;return{issueLinks:{[`${a.id}`]:{id:a.id,linkedIssueKey:n.key,direction:a.direction,typeName:a.linkType.label,typeId:a.linkType.id}},linkedIssues:{[`${n.key}`]:{id:n.id,issueKey:n.key,issueLink:Object(Sv.f)(s,n.key),issueSummary:n.summary,issueTypeIconUrl:n.issueTypeIconUrl}}}})(a,t,e))}))}catch(a){this.hideLoadingIndicator(),O.a.safeErrorWithoutCustomerData(bI,a)}},this.onCreateLinkedIssueClick=(e,t)=>{Object(lI.a)(t,{name:"createLinkedIssue"}),this.showCreateLinkedIssueDialog()},this.showLoadingIndicator=async()=>{try{
(await Object(Qk.a)({name:"quick-edit/util/loading-indicator",wrmKeys:"wrc!com.atlassian.jira.jira-quick-edit-plugin:loading-indicator"})).showLoadingIndicator()}catch(e){O.a.safeErrorWithoutCustomerData(bI,e)}},this.hideLoadingIndicator=async()=>{try{(await Object(Qk.a)({name:"quick-edit/util/loading-indicator",wrmKeys:"wrc!com.atlassian.jira.jira-quick-edit-plugin:loading-indicator"})).hideLoadingIndicator()}catch(e){O.a.safeErrorWithoutCustomerData(bI,e)}}}render(){const{intl:{formatMessage:e}}=this.props;return i.a.createElement(G.a,{spacing:"compact",onClick:this.onCreateLinkedIssueClick,appearance:"link",iconBefore:i.a.createElement(VE.a,{size:"small",label:e(uI.createLinkedIssueButtonLabel)})},e(uI.createLinkedIssueButtonLabel))}}fI.displayName="CreateLinkedIssueButton";const gI="created";var hI=Object(qt.a)([v.i,Object(gs.a)("createLinkedIssueButton",{onLinkedIssueCreated:gI}),Object(r.connect)((e=>({baseUrl:Object(T.f)(e),sourceIssueKey:Object(T.x)(e),
sourceIssueId:Object(rr.j)(String(Object(T.w)(e)))})),(e=>({onLinkedIssueCreated:(t,s)=>{e(Object(_C.c)(t)),e(Object(_C.b)()),(({issueLinks:e,linkedIssues:t},s)=>{const n=oI()(e)[0];if(void 0!==n){const a=e[n],i=t[a.linkedIssueKey],r={action:gI,actionSubjectId:i.id,attributes:{linkTypeName:Object(cI.a)(a.typeName),linkTypeId:a.typeId,issueLinkId:n}};Object(g.a)(s,r)}})(t,s)}})))])(fI),yI=s("./node_modules/@atlaskit/icon/glyph/editor/info.js"),OI=s.n(yI),jI=Object(v.h)({createReciprocalLinkCheckboxLabel:{id:"issue.create-reciprocal-link.checkbox-label",defaultMessage:"Create reciprocal link"},createReciprocalLinkCheckboxTooltip:{id:"issue.create-reciprocal-link.checkbox-tooltip",defaultMessage:"Jira will create a link from the issue on the remote Jira instance back to this issue"}});const vI=Y.default.div(["flex-grow:1;display:flex;"]),EI=({isChecked:e,onChange:t,onShow:s})=>{const{formatMessage:n}=Object(xe.c)();return i.a.createElement(vI,null,i.a.createElement(_e.a,{isChecked:e,
onChange:t,label:n(jI.createReciprocalLinkCheckboxLabel),name:"create-reciprocal-link"}),i.a.createElement(je.a,{content:n(jI.createReciprocalLinkCheckboxTooltip),onShow:s,position:"bottom"},i.a.createElement(OI.a,{size:"medium",label:""})))};EI.displayName="CreateReciprocalLink";const kI=/^([A-Z][A-Z0-9]+)-([0-9]+)$/i,wI=(e,t)=>({sections:s=[]}={})=>{const{baseUrl:n=Object(rr.b)(""),id:i}=t||{};return s.map((e=>e.issues)).filter((e=>!!e)).reduce(((t,s)=>t.concat(s.map((t=>({content:`${t.key} ${t.summaryText}`,value:t.key,id:t.id?t.id.toString():"",elemBefore:Object(a.createElement)("img",{src:`${n}${t.img}`,width:16,height:16}),fullObject:t,filterValues:[e],iconUrl:`${n}${t.img}`,appLinkId:i}))))),[]).reduce(((e,t)=>e.findIndex((e=>e.value===t.value))<0?[...e,t]:e),[])},SI=(e,t,s,n)=>(e=>{if(e){const t=kI.exec(e);return!(!t||3!==t.length)}return!1})(s)?((e,t,s,n)=>{const a=void 0===n?Object(Sv.a)(e,t,s):Object(Sv.k)(e,s,n.id);return Object(Rv.a)(a)
})(e,t,Object(rr.l)(s),n).map(wI(s,n)).catch((()=>sv.Observable.of([]))):sv.Observable.of([]);var CI=s("./src/packages/issue/issue-view/src/views/field/select/common/custom-format/filter-option/index.js"),II=Object(v.h)({searchPlaceholder:{id:"issue.issue-links-search-placeholder",defaultMessage:"Search for issues"},openIssues:{id:"issue.issue-links-search-open-issues",defaultMessage:"Open Issues"},exactKey:{id:"issue.issue-links-exact-key",defaultMessage:"Exact key"},selfLinkInvalidIssue:{id:"issue.issue-link-invalid-self-link",defaultMessage:"You cannot link an issue to itself"},singleInvalidIssue:{id:"issue.issue-link-invalid-single",defaultMessage:"We can't find an issue with the key"},multipleInvalidIssues:{id:"issue.issue-link-invalid-plural",defaultMessage:"We can't find issues with the keys"},noHistoryResults:{id:"issue.issue-link-no-history-results",defaultMessage:"Type to search for an issue summary or key"}});class TI extends a.Component{constructor(...e){super(...e),
this.getErrorMessage=(e,t,s)=>s.includes(e)?`${t.formatMessage(II.selfLinkInvalidIssue)} (${e})`:1===s.length?`${t.formatMessage(II.singleInvalidIssue)} ${s[0]}`:s.length>1?`${t.formatMessage(II.multipleInvalidIssues)} ${s.join(", ")}`:void 0,this.fetchSuggestions=e=>{const{baseUrl:t,remoteAppLink:s,issueKey:n,intl:a}=this.props,i=a.formatMessage(II.openIssues),r=a.formatMessage(II.noHistoryResults);return((e,t,s,n)=>{const a=void 0===n?Object(Sv.p)(e,t,s):Object(Sv.l)(e,s,n.id);return Object(Rv.a)(a).map(wI(s,n))})(t,n,e,s).map((e=>e.length?[{heading:i,items:e}]:[{items:[{content:r,isDisabled:!0,value:""}]}])).toPromise()},this.onChange=(e,t)=>{null!=t&&null!=t.action&&("select-option"===t.action?Object(or.c)().markStartOfInteraction({key:Br.a.ISSUE_LINKS.TIME_TO_REFLECT_SELECTED_ISSUE,cancelExisting:!0}):"remove-value"===t.action&&Object(or.c)().markStartOfInteraction({key:Br.a.ISSUE_LINKS.TIME_TO_REFLECT_REMOVED_ISSUE,cancelExisting:!0})),this.props.onChange(e)},
this.onDataRequest=({isInitial:e})=>{e||Object(or.c)().markStartOfInteraction({key:Br.a.ISSUE_LINKS.TIME_TO_REFLECT_INPUT_RESULT,cancelExisting:!0})},this.onDataLoaded=({isInitial:e})=>{e||Object(or.c)().markTimeToFinishTask({key:Br.a.ISSUE_LINKS.TIME_TO_REFLECT_INPUT_RESULT})},this.stripQueryValueToIssueKey=e=>{const{remoteAppLink:t}=this.props,s=void 0===t?WC():t.baseUrl;return BC(s,e)},this.filterIssueOptions=(e,t)=>this.filterIssueSuggestionByAppLink(e)&&Object(CI.a)(e,t),this.filterIssueSuggestionByAppLink=e=>{if(Boolean(e.data&&e.data.fullObject)){var t,s;return(null===(t=e.data)||void 0===t?void 0:t.appLinkId)===(null===(s=this.props.remoteAppLink)||void 0===s?void 0:s.id)}return!0}}componentDidUpdate(e){const t=this.props.value.length,s=e.value.length;s<t?Object(or.c)().markTimeToFinishTask({key:Br.a.ISSUE_LINKS.TIME_TO_REFLECT_SELECTED_ISSUE}):s>t&&Object(or.c)().markTimeToFinishTask({key:Br.a.ISSUE_LINKS.TIME_TO_REFLECT_REMOVED_ISSUE})}render(){
const{value:e,issueKey:t,intl:s,invalidSelections:n,remoteAppLink:a}=this.props,r={isRemote:void 0!==a};return i.a.createElement(Ak.a,{fieldId:"issue-link-search",classNamePrefix:"issue-links-search",value:e,fetchSuggestions:this.fetchSuggestions,onChangeMulti:this.onChange,canCreateNewItem:!0,formatCreateLabel:e=>`${e} (${s.formatMessage(II.exactKey)})`,placeholder:s.formatMessage(II.searchPlaceholder),invalidMessage:this.getErrorMessage(t,s,n),changeQueryValue:this.stripQueryValueToIssueKey,isMulti:!0,autoFocus:!0,errorMessagePosition:"bottom",onDataLoaded:this.onDataLoaded,onDataRequest:this.onDataRequest,inputId:"issue-link-search",additionalAnalyticsProps:r,filterOption:this.filterIssueOptions})}}TI.displayName="IssueSearchSelect";var PI=Object(v.i)(TI)
;const _I=Y.default.div(["display:flex;flex-direction:",";justify-content:space-around;align-content:stretch;> *{margin-top:","px;}>:not(:last-child){margin-right:",";}"],(({isCompact:e})=>e?"column":"row"),Q.e,(({isCompact:e})=>e?"0":`${Q.e}px`)),xI=Y.default.div(["flex:1;flex-basis:auto;"]),DI=Y.default.div(["margin-top:","px;display:flex;flex-wrap:wrap;justify-content:flex-end;margin-left:auto;"],Q.e),AI=Y.default.div(["flex-grow:1;margin-left:-","px;"],1.5*Q.e),LI=Y.default.div(["max-width:",";width:",";min-width:","px;"],(({isCompact:e})=>e?"none":25*Q.e+"px"),(({isCompact:e})=>e?"100%":"27%"),17*Q.e);function MI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function RI(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?MI(Object(s),!0).forEach((function(t){NI(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):MI(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function NI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const FI=(e,t,s,n)=>({issueLinks:{[e]:{id:e,linkedIssueKey:s.key,direction:t.direction,typeName:t.label,typeId:t.id}},linkedIssues:{[`${s.key}`]:{id:s.key,issueKey:s.key,issueId:null!==s.id&&void 0!==s.id?s.id.toString():null,issueLink:Object(Sv.f)(n,s.key),issueSummary:s.summaryText?s.summaryText:"",issueTypeIconUrl:s.img?s.img:""}}}),UI=(e,t)=>Object(rr.t)(`appId=${e}&issueId=${t}`);function VI(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function KI(e){for(var t=1;t<arguments.length;t++){
var s=null!=arguments[t]?arguments[t]:{};t%2?VI(Object(s),!0).forEach((function(t){WI(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):VI(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function WI(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const BI={newIssueLinks:[],isDisabled:!0,invalidSelections:[]};class HI extends a.Component{constructor(e){super(e),this.getInitialState=()=>KI({issueLinkType:this.transformIssueLinkTypesForSelect()[0],jiraAppLink:iI,createReciprocalLink:!0},BI),this.isLocalJira=e=>e.value===iI.value,this.getRemoteAppLink=()=>{const{jiraAppLink:e}=this.state;return this.isLocalJira(e)?void 0:e.fullObject},this.onIssueLinkTypeChange=e=>this.setState({issueLinkType:e}),this.onJiraAppLinkChange=e=>this.setState(KI({jiraAppLink:e,createReciprocalLink:!this.isLocalJira(e)},BI)),
this.onIssueSearchChangeWithUserInput=e=>{let t=!1;const s=[],n=this.state.jiraAppLink.fullObject.baseUrl,a=this.updateInvalidSelections(e),i=e.map((e=>{const i=BC(n,e.value),r=KI(KI({},e),{},{content:i,value:i});return r.fullObject||a&&a.includes(r.value)||(t=!0,s.push((()=>this.query$.next({queryIssueKey:r.content,remoteAppLink:this.getRemoteAppLink()})))),KI(KI({},r),{},{tag:{elemBefore:r.elemBefore}})})),r=!(!t&&mm()(a)&&!mm()(i));this.setState({newIssueLinks:i,isDisabled:r,invalidSelections:a}),s.map((e=>e()))},this.onIssueSearchChange=e=>{this.onIssueSearchChangeWithUserInput(e)},this.onCreateReciprocalLinkChange=(e,t)=>{const s=!this.state.createReciprocalLink;this.setState({createReciprocalLink:s}),Object(Wa.h)(t,"createReciprocalLink",{isChecked:s})},this.onShowReciprocalLinkTooltip=e=>{Object(Wa.h)(e,"createReciprocalLink")},this.onSave=(e,t)=>{
const{issueLinkType:s,newIssueLinks:n,jiraAppLink:a,createReciprocalLink:i}=this.state,{issueLinks:r}=this.props,o=this.isLocalJira(a);Object(Wa.h)(t,"addLinkedIssueButton",{isRemote:!o,newLinkedIssueIds:n.map((e=>e.id))}),s&&n&&n.length>0&&(Object(or.c)().markStartOfInteraction({key:Br.a.ISSUE_LINKS.TIME_TO_RENDER_LINKED_ISSUE}),o?this.saveLocalIssueLink(s,n,r):this.saveRemoteIssueLink(s,n,a,r,i))},this.saveLocalIssueLink=(e,t,s)=>{const{createAnalyticsEvent:n}=this.props,a=e.fullObject&&e.fullObject.label,i=(s&&s[a]||[]).filter((e=>!e.isRemote)).map((e=>e.linkedIssueKey));t.map((e=>e.fullObject?e:KI(KI({},e),{},{fullObject:{key:e.value}}))).filter((e=>!i.includes(e.fullObject.key))).forEach(((t,s)=>{const a=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${s}`;this.props.onAdd({optimisticId:a,linkedIssueKey:t.fullObject.key,issueLinkType:e.fullObject,issueLinks:FI(a,e.fullObject,t.fullObject,this.props.baseUrl)},n({action:"succeeded"}))})),this.props.onClose()},
this.saveRemoteIssueLink=(e,t,s,n,a)=>{const{createAnalyticsEvent:i}=this.props,r=n?Object.keys(n).reduce(((e,t)=>[...e,...n[t]]),[]).filter((e=>e.isRemote)).map((e=>e.globalId)):[];t.filter((e=>e.fullObject)).map(((t,n)=>((e,t,s,n,a)=>{const i=`OPTIMISTIC_LINKED_ISSUE_${Date.now()}_${e}`,{fullObject:{id:r,key:o,summaryText:c},iconUrl:l}=t,{id:u,name:d,baseUrl:p}=s,m={id:i,applicationType:"com.atlassian.jira",applicationName:d,issueLinkUrl:Object(Sv.f)(p,o),relationship:n.label,summary:c,iconUrl:Object(Sv.q)(l),issueKey:o,createReciprocalLink:a};if(!r)return RI(RI({},m),{},{appLinkId:u,payloadType:"WITHOUT_ISSUE_ID"});const b=Object(rr.j)(r.toString());return RI(RI({},m),{},{globalId:UI(u,b),remoteIssueId:b,payloadType:"WITH_ISSUE_ID"})})(n,t,s.fullObject,e,a))).filter((e=>!e.globalId||!r.includes(e.globalId))).forEach((e=>{this.props.onAddRemote(e,i({action:"succeeded",isRemote:!0,withReciprocalLink:Boolean(e.createReciprocalLink)}))})),this.props.onClose()},
this.updateInvalidSelections=e=>{const t=e?e.map((e=>e.value)):[];return this.state.invalidSelections.filter((e=>t.includes(e)))},this.handleUpdate=({issue:e,results:t})=>{const s=t.map((e=>KI(KI({},e),{},{tag:{elemBefore:e.elemBefore}})))[0];s?this.setState((t=>{const n=t.newIssueLinks.map((e=>e.value.toLowerCase()===s.value.toLowerCase()?s:e)),a=t.invalidSelections.filter((t=>t!==e));return{newIssueLinks:n,isDisabled:a.length>0,invalidSelections:a}})):this.setState((t=>({newIssueLinks:t.newIssueLinks.slice(),isDisabled:!0,invalidSelections:t.invalidSelections.concat(e)})))},this.transformIssueLinkTypesForSelect=()=>this.props.issueLinkTypes.map((e=>({label:e.label,value:e.id+e.direction,fullObject:e}))),this.transformJiraAppLinksForSelect=()=>{const e=this.props.jiraAppLinks.map((e=>({label:`${e.name}`,value:e.id,fullObject:e})));return[iI,...e]},this.subscription=void 0,this.query$=void 0,this.addLinkContainer=void 0,this.renderLoading=()=>i.a.createElement(q.a,null),
this.state=this.getInitialState(),this.query$=new sv.Subject,this.subscription=this.query$.flatMap((({queryIssueKey:t,remoteAppLink:s})=>SI(e.baseUrl,e.issueKey,t,s).map((e=>({issue:t,results:e}))))).subscribe(this.handleUpdate)}componentDidMount(){this.addLinkContainer&&Object(Wr.a)(this.addLinkContainer),!this.props.canLinkRemoteIssues||"NOT_LOADED"!==this.props.jiraAppLinksFetchStatus&&"ERROR"!==this.props.jiraAppLinksFetchStatus||this.props.fetchJiraAppLinks()}componentDidUpdate(e){e.quickAddClickedCount!==this.props.quickAddClickedCount&&Object(Wr.a)(this.addLinkContainer)}componentWillUnmount(){this.subscription.unsubscribe()}renderFullAddForm(){
const e=this.transformIssueLinkTypesForSelect(),t=this.transformJiraAppLinksForSelect(),{baseUrl:s,issueKey:n,containerWidth:a,onClose:r,canCreateLinkedIssue:o,canLinkRemoteIssues:c}=this.props,{issueLinkType:l,newIssueLinks:u,isDisabled:d,invalidSelections:p}=this.state,m=a&&a<=480,b=t.length>1,f=this.isLocalJira(this.state.jiraAppLink)&&o;return i.a.createElement("div",{ref:e=>{this.addLinkContainer=e}},i.a.createElement(_I,{isCompact:m},Object(F.isShortcutMenuEnabled)()&&i.a.createElement(i.a.Fragment,null,c&&b&&i.a.createElement(LI,{isCompact:m},i.a.createElement(sI,{selectItems:t,defaultValue:iI,onChange:this.onJiraAppLinkChange,containerWidth:a})),i.a.createElement(LI,{isCompact:m},i.a.createElement(HC,{selectItems:e,selectedItem:l,onChange:this.onIssueLinkTypeChange}))),!Object(F.isShortcutMenuEnabled)()&&i.a.createElement(i.a.Fragment,null,c&&b&&i.a.createElement(Dk.b,null,i.a.createElement(LI,{isCompact:m},i.a.createElement(sI,{selectItems:t,defaultValue:iI,
onChange:this.onJiraAppLinkChange,containerWidth:a}))),i.a.createElement(Dk.b,null,i.a.createElement(LI,{isCompact:m},i.a.createElement(HC,{selectItems:e,selectedItem:l,onChange:this.onIssueLinkTypeChange})))),i.a.createElement(xI,null,i.a.createElement(PI,{value:u,baseUrl:s,issueKey:n,onChange:this.onIssueSearchChange,invalidSelections:p,remoteAppLink:this.getRemoteAppLink()}))),i.a.createElement(DI,null,!this.isLocalJira(this.state.jiraAppLink)&&i.a.createElement(EI,{isChecked:this.state.createReciprocalLink,onChange:this.onCreateReciprocalLinkChange,onShow:this.onShowReciprocalLinkTooltip}),f&&i.a.createElement(AI,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.create-linked-issue"},i.a.createElement(hI,null)),i.a.createElement(qm.a,null,i.a.createElement("div",{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.add.issue-links-add-view.link-button"},i.a.createElement(G.a,{appearance:"primary",onClick:this.onSave,
isDisabled:d},i.a.createElement(v.c,{id:"issue.issue-links-add-button-label",defaultMessage:"Link"}))),i.a.createElement(G.a,{appearance:"subtle",onClick:r},i.a.createElement(v.c,{id:"issue.issue-links-cancel-button-label",defaultMessage:"Cancel"})))))}render(){return!this.props.canLinkRemoteIssues||"LOADING"!==this.props.jiraAppLinksFetchStatus&&"NOT_LOADED"!==this.props.jiraAppLinksFetchStatus?this.renderFullAddForm():this.renderLoading()}}HI.displayName="AddIssueLinkView",HI.displayName="AddIssueLinkView",HI.defaultProps={issueLinks:null,quickAddClickedCount:0,containerWidth:null,onAdd:c.a,onAddRemote:c.a,onClose:c.a};var $I=Object(qt.a)([Object(f.a)({onAdd:{action:"added"},onAddRemote:{action:"added",isRemote:!0}}),Object(r.connect)((e=>({quickAddClickedCount:Object(DC.j)(e),canCreateLinkedIssue:Object(DC.a)(e),canLinkRemoteIssues:UC(e),jiraAppLinksFetchStatus:FC(e),jiraAppLinks:VC(e)})),(e=>({onAdd:(t,s,n)=>e(Object(_C.n)(t,s,n)),onAddRemote:(t,s,n)=>e(Object(xC.f)(t,s,n.update({
withReciprocalLink:Boolean(t.createReciprocalLink)}))),fetchJiraAppLinks:()=>e(Object(MC.a)())}))),Aa.a])(HI),GI=Object(v.h)({label:{id:"issue.issue-links-add-label",defaultMessage:"Link an issue"}});const qI=Y.default.span(["margin-left:auto;"]);class zI extends a.Component{render(){return i.a.createElement(qI,null,i.a.createElement(oO.a,{label:this.props.intl.formatMessage(GI.label),onClick:this.props.onClick}))}}zI.displayName="AddIssueLinkButton",zI.defaultProps={onClick:c.a};var YI=Object(v.i)(zI),QI=s("./node_modules/@atlaskit/icon/glyph/shortcut.js"),JI=s.n(QI),ZI=s("./src/packages/project-settings/common/src/i18n/formatted-react-message.js"),XI=s("./src/packages/issue/issue-view/src/views/common/line-card-hidden-button/index.js");const eT=Object(v.h)({issueTypeTitle:{id:"issues.issue-links.remote-issue-link-error.issue-type.title",defaultMessage:"Issue type: {issueTypeName}"},remoteLinkAuthSummary:{id:"issues.issue-links.remote-issue-link-error.auth-required.summary",
defaultMessage:"{tagStart}Authenticate{tagEnd} to see additional information"},remoteLinkGeneralError:{id:"issues.issue-links.remote-issue-link-error.general-error",defaultMessage:"Failed to load remote issue"},remoteLinkMissingApplink:{id:"issues.issue-links.remote-issue-link-error.missing-applink",defaultMessage:"Failed to load remote issue because remote site is not linked"},remoteLinkAuthTooltip:{id:"issues.issue-links.remote-issue-link-error.auth-required.tooltip",defaultMessage:"Authenticate to {remoteServerHostname}"},remoteLinkOpenLinkTooltip:{id:"issues.issue-links.remote-issue-link-error.link-button.tooltip",defaultMessage:"Open link in a new tab"},remoteLinkDeleteLinkTooltip:{id:"issues.issue-links.remote-issue-link-error.delete-button.tooltip",defaultMessage:"Unlink remote issue"}
}),tT=Y.default.div(["display:flex;align-items:center;"]),sT=Object(Y.default)(tT)(["width:100%;height:100%;position:relative;"]),nT=Y.default.span(["outline:none;margin-left:","px;color:",";font-weight:600;font-size:12px;white-space:nowrap;&:hover,&:active,&:visited,&:link{outline:none;color:",";}"],Q.e/2,Re.a.N90,Re.a.N90),aT=Y.default.div(["margin-left:-","px;"],Q.e/2),iT=Y.default.div(["padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex-grow:1;color:",";"],Q.e,(e=>"red"===e.color?Re.a.R400:"inherit")),rT=Y.default.div(["overflow:hidden;text-overflow:ellipsis;display:block;"]),oT=Y.default.span(["color:",";text-decoration:underline;"],Re.a.B400),cT=(Re.a.N20,Q.e,Q.e,Q.e,Q.e,Y.default.div(["width:","px;height:","px;padding:","px;box-sizing:border-box;"],3*Q.e,3*Q.e,Q.e/2)),lT="{tagStart}",uT="{tagEnd}";class dT extends a.Component{constructor(...e){super(...e),this.renderErrorIcon=()=>i.a.createElement(aT,null,i.a.createElement(bb.a,{
label:"Issue link loading error",primaryColor:Re.a.R300})),this.renderIcon=()=>{const{error:e}=this.props;return"APPLINK_REQ_AUTH"===e?this.renderIssueTypeIcon():this.renderErrorIcon()},this.authLinkWithAnalytics=e=>i.a.createElement(oT,{onClick:()=>{this.props.handleUserClickAnalytics("errorCard.authenticationLink")}},e.children),this.renderAuthRequiredText=()=>{const{intl:e,remoteServerHostname:t}=this.props;return i.a.createElement(iT,null,i.a.createElement(je.a,{content:e.formatMessage(eT.remoteLinkAuthTooltip,{remoteServerHostname:t}),position:"bottom"},i.a.createElement(rT,null,i.a.createElement(wy.a,{label:"",size:"small",primaryColor:Re.a.B400}),i.a.createElement(ZI.a,{message:e.formatMessage(eT.remoteLinkAuthSummary,{tagStart:lT,tagEnd:uT}),openingTag:lT,closingTag:uT,Component:this.authLinkWithAnalytics}))))},this.openIssueLink=e=>{void 0!==this.props.issueLink&&window.open(this.props.issueLink,"_blank"),this.props.handleUserClickAnalytics("errorCard.linkIcon"),
e.stopPropagation()},this.handleDelete=e=>{const{issueKey:t,globalId:s,onDelete:n}=this.props;null!=t&&null!=s&&n&&n(Object(rr.l)(t),s),e.stopPropagation()}}renderIssueTypeIcon(){const{intl:e,issueTypeIconUrl:t,issueTypeName:s}=this.props,n=Sw()(s)?s:e.formatMessage(eT.issueTypeTitle,{issueTypeName:s});return i.a.createElement(je.a,{content:s||"",position:"bottom"},i.a.createElement(tT,null,i.a.createElement(jb.a,{alt:n,url:t})))}renderKey(){return i.a.createElement(nT,{onClick:()=>this.props.handleUserClickAnalytics("errorCard.issueKey")},this.props.issueKey)}renderText(){const{error:e}=this.props;switch(e){case"APPLINK_REQ_AUTH":return this.renderAuthRequiredText();case"APPLINK_MISSING":return i.a.createElement(iT,{color:"red"},this.props.intl.formatMessage(eT.remoteLinkMissingApplink));default:return i.a.createElement(iT,{color:"red"},this.props.intl.formatMessage(eT.remoteLinkGeneralError))}}renderLinkButton(){
const{isHovering:e,isFocused:t,intl:s}=this.props,n=i.a.createElement(je.a,{content:s.formatMessage(eT.remoteLinkOpenLinkTooltip),position:"bottom"},i.a.createElement(cT,null,i.a.createElement(JI.a,{label:"Open remote issue",size:"small"})));return i.a.createElement(XI.a,{show:e||t,icon:n,onClick:this.openIssueLink})}renderDeleteButton(){const{canRemove:e,onDelete:t,isHovering:s,isFocused:n,intl:a}=this.props;return e&&t?i.a.createElement(XI.a,{show:s||n,icon:i.a.createElement(je.a,{content:a.formatMessage(eT.remoteLinkDeleteLinkTooltip),position:"bottom"},i.a.createElement(bd.a,{label:"Remove issue link"})),onClick:this.handleDelete}):null}render(){return i.a.createElement(sT,null,this.renderIcon(),this.renderKey(),this.renderText(),this.renderLinkButton(),this.renderDeleteButton())}}dT.displayName="RemoteIssueLinkLineCardError";var pT=Object(v.i)(dT);function mT(){return(mT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const bT=({isHovering:e,isActive:t,isFocused:s,issue:n,groupId:r,isInteractive:o,onDelete:c,canAddIssueLinks:l,projectType:u})=>{const d=Object(a.useCallback)((()=>({projectType:u,groupId:r,linkedIssueId:n.id,isRemote:n.isRemote||!1,hasError:n.hasError||!1,errorType:n.errorType||"",remoteIssueLinkError:n.remoteIssueLinkError&&n.remoteIssueLinkError.error?n.remoteIssueLinkError.error:"NONE"})),[u,r,n]),{createAnalyticsEvent:p}=Object(si.a)(),m=Object(a.useCallback)((e=>{const t=p({action:"clicked",actionSubject:"issueView.IssueLinkLineCard"}),s=d();Object(Wa.h)(t,e,s)}),[p,d]);return i.a.createElement(N.a,{id:"IssueLinkLineCard",packageName:"jiraIssueView",attributes:d()},(()=>{const a=(e,t)=>c&&c(r,e,t);if(n.remoteIssueLinkError)return i.a.createElement(pT,{issueTypeIconUrl:n.issueTypeIconUrl,issueTypeName:n.issueTypeName,issueKey:n.issueKey,
remoteServerHostname:n.remoteServerHostname,globalId:n.globalId,isHovering:e,isFocused:s,issueLink:n.issueLink,error:n.remoteIssueLinkError.error,handleUserClickAnalytics:m,canRemove:l,onDelete:c&&a});const d=o&&!n.remoteServerHostname;return i.a.createElement(rS,mT({isHovering:e,isActive:t,isFocused:s,isInteractive:d,onDelete:c&&a,canRemove:l,projectType:u,handleUserClickAnalytics:m},n))})(),(()=>i.a.createElement(Ba.a,{onMount:e=>Object(Wa.b)(e,"issueView.IssueLinkLineCard loaded","IssueLinkLineCard",d())}))())};bT.displayName="IssueLinkLineCard";var fT=Object(v.h)({removeIssueLinkHeader:{id:"issues.confirm-delete-issuelink-modal-header",defaultMessage:"Remove the link to {issueKey}?"},removeIssueLinkContent:{id:"issues.confirm-delete-issuelink-modal-text",defaultMessage:"You can add it again later if you need to."},removeIssueLinkButton:{id:"issues.conirm-delete-issue-link-confirm-btn-text",defaultMessage:"Remove"},issueLinkFailureHeader:{id:"issue.issue-links-failure-header",
defaultMessage:"We couldn't link the issue"},issueLinkFailureContent:{id:"issue.issue-links-failure-content",defaultMessage:"Wait a few moments, then give it another try."}});const gT=Y.default.h3(["",";margin:0;"],Re.d.h200()),hT=Y.default.div(["margin:","px 0;padding-right:1px;"],Q.e),yT=Y.default.div(["margin:","px 0;padding-right:1px;"],Q.e),OT=Y.default.label(["display:flex;align-items:center;justify-content:space-between;"]);function jT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function vT(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?jT(Object(s),!0).forEach((function(t){ET(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):jT(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ET(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const kT=(e={})=>e?Object.keys(e).reduce(((t,s)=>e[s].length+t),0):0,wT=Object(k.a)("removeLinkedIssue",A.a.MODAL)(ct.b);class ST extends a.Component{constructor(...e){super(...e),this.state={hasDeleteModal:!1,groupId:null,issueKey:null,globalId:void 0},this.onIssueClickNew=({id:e,issueKey:t,issueLink:s,remoteIssueLinkError:n,projectType:a=null,isRemote:i}={},r)=>{if(t){const{onIssueLinkClicked:t,linkActions:c,onAuthenticateApplink:l}=this.props,u="APPLINK_REQ_AUTH"===(null==n?void 0:n.error);if(t&&t(e,a,kT(this.props.issueLinks)),Object(pb.d)(r))if(u){var o;const e=null==n||null===(o=n.repairLink)||void 0===o?void 0:o.href;e&&l&&l(Object(rr.i)(e))}else s&&Object(LC.a)(s,r.metaKey,c.push);(Object(pb.e)(r)||Object(pb.a)(r))&&!u&&s&&window.open(s,"_blank")
;const{createAnalyticsEvent:d}=this.props,p=d({action:"clicked",actionSubject:"card"});Object(Wa.h)(p,"issueLinkedCard",{clickedIssueId:e,linkedIssuesCount:kT(this.props.issueLinks),issueNeedsAuthentication:u,isRemote:i})}},this.onIssueClick=({id:e,issueKey:t,issueLink:s,projectType:n=null}={},a)=>{if(t){const{onIssueLinkClicked:t,linkActions:i}=this.props;t&&t(e,n,kT(this.props.issueLinks)),Object(pb.d)(a)&&s&&Object(LC.a)(s,a.metaKey,i.push)}},this.getLinkByGroupAndIssueKey=(e,t,s)=>(this.props.issueLinks&&e&&this.props.issueLinks[e]||[]).find((e=>e.linkedIssueKey===t&&e.globalId===s)),this.renderIssueLinkInlineMessage=(e,t)=>{const{intl:s,retryLinkedIssue:n,cancelLinkedIssue:a,createAnalyticsEvent:i}=this.props;return kw(s,s.formatMessage(fT.issueLinkFailureHeader),s.formatMessage(fT.issueLinkFailureContent),((s,a)=>n(e,t,i({action:"succeeded",isRemote:t}),a.update({isRemote:t}))),(()=>a(e,t)))}}componentDidMount(){
const{issueLinks:e,onIssueLinkRendered:t,hasLinks:s,onMountCreatePermissionFetching:n}=this.props;if(s&&t(kT(e)),n(),!Object(F.isStopFetchPreviewEnabled)()&&this.props.issueLinks){const e=this.flattenedIssueLinks().map((e=>e.linkedIssueKey));this.props.prefetchLinkedIssues(e)}}componentDidUpdate(e){const{displayAddIssueLinks:t}=this.props,s=!e.displayAddIssueLinks&&t,n=e.displayAddIssueLinks&&!t;if(s&&Object(or.c)().markTimeToFinishTask({key:Br.a.ISSUE_LINKS.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT}),n&&Object(or.c)().markTimeToFinishTask({key:Br.a.ISSUE_LINKS.TIME_TO_RENDER_LINKED_ISSUE}),!Object(F.isStopFetchPreviewEnabled)()&&this.props.issueLinks&&!Da()(e.issueLinks,this.props.issueLinks)){const e=this.flattenedIssueLinks().map((e=>e.linkedIssueKey));this.props.prefetchLinkedIssues(e)}}onDeleteConfirm(e,t,s){const n=this.getLinkByGroupAndIssueKey(e,t,s);if(n){const e=n.id;this.props.deleteLinkedIssue({linkId:e,globalId:s})
;const t=this.flattenedIssueLinks().findIndex((t=>t.id===e&&t.globalId===s));this.props.onRemoveIssueLinkInitiated(t)}this.modalClosedStateChanges()}onDeleteCancel(){this.modalClosedStateChanges()}onDeleteAction(e,t,s){this.setState({groupId:e,issueKey:t,globalId:s,hasDeleteModal:!0});const{createAnalyticsEvent:n}=this.props,a=this.getLinkByGroupAndIssueKey(e,t,s),i=n({action:"clicked",actionSubject:"button"});Object(Wa.h)(i,"linkedIssueCardDeleteButton",{issueLinkToDeleteId:To()(a,["linkedIssue","id"]),isRemote:!mm()(s)})}getRemovalConfirmationText(e){const{intl:{formatMessage:t}}=this.props;return{confirmationHeader:t(fT.removeIssueLinkHeader,{issueKey:e}),confirmationContent:t(fT.removeIssueLinkContent)}}modalClosedStateChanges(){this.setState({groupId:null,issueKey:null,hasDeleteModal:!1,globalId:void 0})}flattenedIssueLinks(){const{issueLinks:e}=this.props;return e?Object.keys(e).reduce(((t,s)=>[...t,...e[s]]),[]):[]}renderDeleteConfirmationModal(){
const{intl:{formatMessage:e}}=this.props,{groupId:t,issueKey:s,globalId:n}=this.state,a=this.getRemovalConfirmationText(s),{confirmationHeader:r,confirmationContent:o}=a;return i.a.createElement("div",null,i.a.createElement(wT,{appearance:"warning",headerMessage:r,contentMessage:o,onConfirm:()=>this.onDeleteConfirm(t,s,n),onCancel:()=>this.onDeleteCancel(),externalId:"issue.issueLinks.delete",confirmActionText:e(fT.removeIssueLinkButton)}),i.a.createElement(b.a,null))}renderLineCardGroup(e,t){const{projectType:s}=this.props;return i.a.createElement(db.a,{items:e,groupId:t,isInteractive:this.props.isIssueViewComplete,onClick:this.onIssueClickNew},((e,n,a,r)=>i.a.createElement(bT,{isHovering:e,isActive:n,isFocused:a,issue:r,groupId:t,isInteractive:this.props.isIssueViewComplete,onDelete:(e,t,s)=>this.onDeleteAction(e,Object(rr.l)(t),s),canAddIssueLinks:this.props.canAddIssueLinks,projectType:s})))}renderGroup(e,t){const s=t.map((e=>vT(vT({},e.linkedIssue),{},{
projectType:e.linkedIssue.projectType||null,isLoading:e.isLoading||!1,hasError:e.hasError,errorInlineMessage:e.hasError?this.renderIssueLinkInlineMessage(e.id,!!e.isRemote):void 0,id:e.globalId||e.linkedIssue.id,isRemote:e.isRemote,globalId:e.isRemote?e.globalId:void 0,remoteServerHostname:e.isRemote?e.remoteServerHostname:void 0,remoteIssueLinkError:e.isRemote?e.remoteIssueLinkError:void 0})));return i.a.createElement(hT,{key:e},i.a.createElement(gT,{"data-test-id":"issue.issue-view.views.issue-base.content.issue-links.issue-links-view.relationship-heading"},e),this.renderLineCardGroup(s,e))}renderHeading(){const{hasLinks:e,canAddIssueLinks:t,onIssueLinkAddClick:s}=this.props;return i.a.createElement(Ra.c,null,i.a.createElement(OT,{htmlFor:"issue-link-search"},i.a.createElement(Ra.e,null,i.a.createElement(v.c,{id:"issue.issue-links-heading",defaultMessage:"Linked issues"}))),i.a.createElement(Ra.d,null,t&&e&&i.a.createElement(YI,{onClick:s})))}renderExistingLinks(){
const{issueLinks:e}=this.props;return i.a.createElement("div",null,e&&Object.keys(e).sort().map((t=>this.renderGroup(t,e[t]))))}renderAddIssueLink(){const{issueLinkTypes:e,baseUrl:t,issueKey:s,onIssueLinkAddClosed:n,issueLinks:a}=this.props;return i.a.createElement(yT,null,i.a.createElement("div",null,i.a.createElement($I,{issueLinkTypes:e,baseUrl:t,issueKey:s,onClose:n,issueLinks:a})))}render(){const{issueLinks:e,hasLinks:t,displayAddIssueLinks:s}=this.props,n=t&&!mm()(e),a=this.state.hasDeleteModal;return i.a.createElement(R.a,null,n||s?this.renderHeading():null,n?this.renderExistingLinks():null,s?this.renderAddIssueLink():null,a?this.renderDeleteConfirmationModal():null)}}ST.displayName="IssueLinksView",ST.displayName="IssueLinksView",ST.defaultProps={issueLinks:null,issueLinkTypes:[],isIssueViewComplete:!1,onIssueLinkClicked:c.a,onIssueLinkRendered:c.a,onIssueLinkAddClick:c.a,onIssueLinkAddClosed:c.a};var CT=Object(qt.a)([v.i,Object(f.a)({deleteLinkedIssue:{action:"deleted"},
onAuthenticateApplink:{action:"authenticate"}}),Object(k.b)("linkedIssue"),Object(fs.a)((e=>({onIssueLinkClicked:(t,s,n)=>e("linked-issue-clicked",{targetIssueId:t,targetProjectType:Object(xn.i)(...IC.e)(s),linkedIssuesCount:n}),onIssueLinkRendered:t=>e("linked-issue-render",{linkedIssuesCount:t}),onRemoveIssueLinkInitiated:t=>e("linked-issue-removed",{indexOfDeletedLink:t})}))),TC.a,Object(r.connect)((e=>({canAddIssueLinks:Object(AC.a)(e),hasLinks:Object(DC.d)(e),issueLinks:Object(DC.c)(e),issueLinkTypes:Object(AC.b)(e),baseUrl:Object(T.f)(e),issueKey:Object(T.x)(e),externalId:"issue.issue-links",displayAddIssueLinks:Object(DC.l)(e),projectType:Object(P.F)(e),isIssueViewComplete:Object(P.n)(e)})),(e=>({onAuthenticateApplink:(t,s)=>e(Object(PC.a)(t,s)),deleteLinkedIssue:({linkId:t,globalId:s},n)=>{e(void 0!==s?Object(xC.b)(s,n):Object(_C.e)(t,n))},cancelLinkedIssue:(t,s)=>{e(s?Object(xC.d)(t):Object(_C.l)(t))},retryLinkedIssue:(t,s,n,a)=>{e(s?Object(xC.g)(t,n,a):Object(_C.o)(t,n,a))},
onIssueLinkAddClick:()=>e(Object(_C.a)()),onIssueLinkAddClosed:()=>e(Object(_C.b)()),onMountCreatePermissionFetching:()=>e(Object(_C.g)()),prefetchLinkedIssues:t=>e(Object(NO.a)({issueKeys:t}))})))])(ST),IT=s("./src/packages/servicedesk/incident-management/issue-view/linked-alerts/src/async.js");var TT=()=>{const e=Object(Us.g)(),t=Object(Ga.i)(e),s="service_desk"===Object(Ga.k)(t);return Object(F.isJsmLinkedAlertsEnabled)()&&s?i.a.createElement(i.a.Fragment,null,i.a.createElement(IT.c,null),i.a.createElement(IT.b,null)):null};const PT=()=>({type:"LINK_INCIDENT_CLICKED"}),_T=()=>({type:"CREATE_MAJOR_INCIDENT_CLICKED"}),xT=Object(fn.createSelector)(P.f,(e=>e.incidentManagement)),DT=Object(fn.createSelector)(xT,(e=>e.createMajorIncident)),AT=(Object(fn.createSelector)(DT,(e=>e.clickedCount)),
Object(fn.createSelector)(P.H,(e=>e.incidentManagement))),LT=Object(fn.createSelector)(AT,(e=>e.showCreateMajorIncidentModal)),MT=Object(fn.createSelector)(P.f,(e=>e.incidentManagement)),RT=Object(fn.createSelector)(MT,(e=>e.createLinkedIncident)),NT=(Object(fn.createSelector)(RT,(e=>e.errorMessage)),Object(fn.createSelector)(RT,(e=>e.isInvalid)),Object(fn.createSelector)(RT,(e=>e.isLoading)),Object(fn.createSelector)(RT,(e=>e.clickedCount))),FT=Object(fn.createSelector)(P.H,(e=>e.incidentManagement)),UT=Object(fn.createSelector)(FT,(e=>e.showCreateIncidentPanel)),VT=Object(gn.e)("com.atlassian.jira.plugins.service-entity:service-entity-field-cftype"),KT=Object(fn.createSelector)(VT,(e=>e&&e.renderedValue));var WT=s("./src/packages/servicedesk/incident-management/issue-view/link-incident/src/async.js");const BT=Object(qt.a)([Object(r.connect)((e=>({issueSummary:Object(gn.g)("summary")(e),issueDescription:Object(gn.g)("description")(e),impactedServices:KT(e),issueKey:Object(T.x)(e),
issueId:Object(T.w)(e),projectKey:Object(T.C)(e),projectId:Object(P.C)(e),isCreateVisible:UT(e),isCreateMajorIncidentModalVisible:LT(e),createLinkedIncidentCount:NT(e)})),(e=>({onCreateLinkedIncidentClick:()=>e(PT()),onCloseLinkedIncidentPanelClick:()=>e((()=>({type:"LINK_INCIDENT_PANEL_CLOSED"}))()),onCloseCreateMajorIncidentModal:()=>e((()=>({type:"CREATE_MAJOR_INCIDENT_MODAL_CLOSED"}))())})))])((({issueSummary:e,issueDescription:t,impactedServices:s,issueKey:n,useFieldValue:a=xl.b,issueId:r,isCreateVisible:o,isCreateMajorIncidentModalVisible:c,createLinkedIncidentCount:l,onCreateLinkedIncidentClick:u,onCloseLinkedIncidentPanelClick:d,onCloseCreateMajorIncidentModal:p,projectId:m,projectKey:b})=>{const[f]=a({issueKey:n,fieldKey:"servicedesk-incident-linking"}),g=(e=>e?e.map((e=>e.name)):null)(s);return f&&void 0!==r?i.a.createElement(WT.a,{issueSummary:e,issueDescription:t,impactedServiceNames:g,issueKey:n,issueId:r,projectId:m,projectKey:b,isCreateVisible:o,
isCreateMajorIncidentModalVisible:c,createLinkedIncidentCount:l,onCreateLinkedIncidentClick:u,onCloseLinkedIncidentPanelClick:d,onCloseCreateMajorIncidentModal:p}):null}));var HT=Object(v.h)({title:{id:"issue.portfolio-child-issues.title",defaultMessage:"Child issues"},noValueText:{id:"issue.placeholder-for-empty-child-issues-field",defaultMessage:"There are no child issues."}}),$T=Object(qt.a)([Object(r.connect)((e=>({childIssuesPanelType:"portfolioChildren",baseUrl:Object(T.f)(e),locale:Object(T.z)(e),user:Object(T.a)(e),projectId:Object(P.C)(e),projectType:Object(P.F)(e),parentKey:Object(T.x)(e),parentId:Object(T.w)(e),issues:Object(WO.a)(e),isIssueViewComplete:Object(P.n)(e),messages:HT})),(e=>({onNavigateToNewIssue:({fromIssueKey:t,toIssueKey:s})=>e(Object(RO.c)({fromIssueKey:t,toIssueKey:s})),onChange:t=>{switch(t.type){case $O.CHILD_ISSUE_ADDED:e(LO(t.meta.childIssue))}},prefetchChildIssues:t=>e(Object(NO.a)({issueIds:t}))
})))])(aC),GT=s("./src/packages/issue/issue-view/src/selectors/subtask-types-selector.js"),qT=s("./src/packages/issue/issue-view/src/selectors/subtasks-selector.js"),zT=Object(v.h)({title:{id:"issue.subtasks-heading",defaultMessage:"Subtasks"},createSubtaskErrorHeader:{id:"issue.subtask-error-header",defaultMessage:"We couldn't create the subtask"},createSubtaskErrorContent:{id:"issue.subtask-error-content",defaultMessage:"Wait a few moments, then give it another try."}});function YT(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function QT(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?YT(Object(s),!0).forEach((function(t){JT(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):YT(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function JT(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function ZT(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function XT(){return(XT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const eP=e=>{const t=e.onChange,s=Object(Us.g)(),[n,{setFieldValue:r}]=Object(xl.b)({issueKey:s,fieldKey:"subtasks"}),o=Object(a.useCallback)((e=>{switch(e.type){case $O.CHILD_ISSUE_ADDED:r(s,"subtasks",n.concat({
id:e.meta.childIssue.id,key:e.meta.childIssue.issueKey}))}t(e)}),[n,s,t,r]);return i.a.createElement(aC,XT({},e,{onChange:o}))};eP.displayName="ConnectedComponent";var tP=Object(r.connect)((e=>({childIssuesPanelType:"classicSubtasks",parentId:Object(T.w)(e),issueTypes:Object(GT.c)(e),issues:Object(qT.d)(e),messages:zT,supportsIssueCreation:Object(qT.a)(e),quickAddClickCount:UO(e),isIssueViewComplete:Object(P.n)(e),fetchIssueTypesStatus:Object(Oc.a)(e)})),(e=>({onChange:t=>{switch(t.type){case $O.CHILD_ISSUE_ADDED:e((e=>({type:"SUBTASK_ADD_SUCCESS",payload:{subtask:e}}))(t.meta.childIssue))}},onAddChildClick:()=>e(MO()),prefetchChildIssues:t=>e(Object(NO.a)({issueIds:t})),onNavigateToNewIssueDispatchProp:({fromIssueKey:t,toIssueKey:s})=>{__SPA__||e(Object(RO.c)({fromIssueKey:t,toIssueKey:s}))}})),((e,t)=>{const{onNavigateToNewIssueDispatchProp:s}=t,n=ZT(t,["onNavigateToNewIssueDispatchProp"]);return QT(QT(QT({},e),n),{},{onNavigateToNewIssue:({fromIssueKey:e,toIssueKey:t})=>{s&&s({
fromIssueKey:e,toIssueKey:t})}})}))(eP),sP=s("./src/packages/issue/issue-view/src/actions/web-links-actions.js"),nP=s("./src/packages/issue/issue-view/src/selectors/web-links-selector.js");const aP=Object(v.h)({headerMessage:{id:"issue.details.web-links.delete-confirmation-modal.title",defaultMessage:"Delete the web link?"},contentMessage:{id:"issue.details.web-links.delete-confirmation-modal.content",defaultMessage:"You can add the link later again if you need to."},confirmActionText:{id:"issue.details.web-links.delete-confirmation-modal.confirmation-text",defaultMessage:"Delete"},cancelActionText:{id:"issue.details.web-links.delete-confirmation-modal.cancellation-text",defaultMessage:"Cancel"}});const iP=({intl:e,onDelete:t,onCancel:s})=>i.a.createElement(ct.b,{appearance:"danger",headerMessage:e.formatMessage(aP.headerMessage),contentMessage:e.formatMessage(aP.contentMessage),confirmActionText:e.formatMessage(aP.confirmActionText),
cancelActionText:e.formatMessage(aP.cancelActionText),onConfirm:t,onCancel:s});iP.displayName="DeleteModal";var rP=Object(v.i)(iP),oP=s("./node_modules/shortid/index.js"),cP=s("./node_modules/@atlaskit/icon/glyph/world.js"),lP=s.n(cP),uP=s("./src/packages/platform/ui/flags/src/services/types.js"),dP=s("./src/packages/issue/issue-view/src/views/common/delete-button/index.js"),pP=Object(v.h)({createErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-heading",defaultMessage:"We couldn't create the web link"},deleteErrorHeading:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.delete-error-heading",defaultMessage:"We couldn't delete the web link"},errorBody:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.create-error-body",defaultMessage:"Wait a few moments, then give it another try."},retryAction:{
id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.retry-action",defaultMessage:"Try again"},cancelAction:{id:"issue-view.views.common.web-link-line-card-group.line-card.error-message.cancel-action",defaultMessage:"Cancel"}});const mP=e=>e.stopPropagation(),bP=({errorHeading:e,errorBody:t,onRetry:s,onCancel:n,intl:a})=>i.a.createElement("div",{onClick:mP,onKeyPress:mP},kw(a,a.formatMessage(e),a.formatMessage(t),s,n));bP.displayName="ErrorMessage";var fP=at()([Object(gs.a)("webLinks",{onRetry:"retry"}),Object(r.connect)(null,((e,{webLink:t})=>({onCreateWebLinkRetry:()=>{e(Object(sP.d)(t.id))},onCreateWebLinkCancel:()=>{e(Object(sP.f)(t.id))},onDeleteWebLinkRetry:()=>{e(Object(sP.h)(t.id))},onDeleteWebLinkCancel:()=>{e(Object(sP.a)(t.id))}})),((e,t,s)=>({intl:s.intl,errorHeading:!0===s.webLink.createFailed?pP.createErrorHeading:pP.deleteErrorHeading,errorBody:pP.errorBody,onRetry:(e,n,a)=>{!0===s.webLink.createFailed?(t.onCreateWebLinkRetry(),Object(lI.a)(a,{
name:"createRetry"})):(t.onDeleteWebLinkRetry(),Object(lI.a)(a,{name:"deleteRetry"}))},onCancel:!0===s.webLink.createFailed?t.onCreateWebLinkCancel:t.onDeleteWebLinkCancel}))),v.i])(bP)
;const gP=Y.default.div(["display:flex;align-items:center;"]),hP=Object(Y.default)(gP)(["width:100%;height:100%;position:relative;"]),yP=Y.default.div(["flex:1;overflow:hidden;align-items:center;"]),OP=Y.default.div(["flex-grow:1;overflow:hidden;align-items:left;"]),jP=Y.default.div(["flex-shrink:0;max-width:80%;overflow:hidden;align-items:left;"]),vP=Y.default.div(["flex-grow:1;overflow:hidden;align-items:left;"]),EP=Y.default.div([""," padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;"],(e=>e.isFocused&&`color: ${Re.a.B400};`),Q.e),kP=Y.default.div([""," padding-left:","px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:",";"],(e=>e.isFocused&&`color: ${Re.a.B400};`),Q.e,Re.a.N200),wP=Y.default.div(["display:inline-flex;flex-shrink:0;margin-left:","px;margin-right:","px;"],Q.e/4,Q.e/4),SP=e=>!(!e.createFailed&&!e.deleteFailed);class CP extends a.Component{constructor(...e){super(...e),this.state={validIconUrl:!1},this.onDeleteClick=e=>{
const{onDelete:t,webLink:{id:s}}=this.props;e.stopPropagation(),t(s)}}componentDidMount(){const{iconUrl:e}=this.props.webLink;if(this.props.webLink.deleteFailed){const{onDeleteWebLinkRetry:e,onDeleteWebLinkCancel:t}=this.props;this.showErrorFlag(pP.deleteErrorHeading,e,t)}if(null!=e){const t=new Image;t.onload=()=>this.setState({validIconUrl:!0}),t.onerror=()=>this.setState({validIconUrl:!1}),t.src=e}}componentDidUpdate(e){if(!e.webLink.createFailed&&this.props.webLink.createFailed){const{onCreateWebLinkRetry:e,onCreateWebLinkCancel:t}=this.props;this.showErrorFlag(pP.createErrorHeading,e,t)}}showErrorFlag(e,t,s){const{showFlag:n,dismissFlag:a}=this.props,i=Object(uP.b)(Object(oP.generate)());n(((e,t,s,n)=>({id:e,title:t,description:pP.errorBody,type:"warning",isAutoDismiss:!0,actions:[{content:pP.retryAction,onClick:s},{content:pP.cancelAction,onClick:n}]}))(i,e,(()=>{a({id:i,command:"DISMISS"}),t()}),(()=>{a({id:i,command:"DISMISS"}),s()})))}shouldRenderDeleteButton(){
const{webLink:e,canDelete:t}=this.props;return t&&!(e.isCreating||SP(e))}renderLinkIcon(){const{webLink:{iconUrl:e,linkText:t=""}}=this.props;return this.state.validIconUrl?i.a.createElement(Fr.a,{src:e,size:"small",appearance:"square"}):i.a.createElement(wP,null,i.a.createElement(lP.a,{label:t}))}renderLinkTextOld(){const{webLink:e,isFocused:t}=this.props,{linkText:s,href:n}=e;return i.a.createElement(yP,null,i.a.createElement(je.a,{content:n,truncate:!0,position:"bottom"},i.a.createElement(EP,{isFocused:t},s||n)))}renderLinkText(){const{webLink:{linkText:e,href:t,summary:s},isFocused:n}=this.props,a=null==s?OP:jP,r=e===t?`${t}`:`${t} - ${String(e)}`;return i.a.createElement(a,null,i.a.createElement(je.a,{content:r,position:"bottom"},i.a.createElement(EP,{isFocused:n},e||t)))}renderLinkSummary(){const{webLink:{summary:e,href:t},isFocused:s}=this.props,n=`${t} - ${String(e)}`;return null==e||""===e?null:i.a.createElement(vP,null,i.a.createElement(je.a,{content:n,position:"bottom"
},i.a.createElement(kP,{isFocused:s},e||t)))}renderDeleteButton(){const{isHovering:e,isFocused:t}=this.props;return i.a.createElement(dP.a,{show:e||t,onClick:this.onDeleteClick})}render(){const{webLink:e}=this.props;return Object(F.isWebAndIssueLinkSummaryEnabled)()?i.a.createElement(hP,null,this.renderLinkIcon(),this.renderLinkText(),this.renderLinkSummary(),this.shouldRenderDeleteButton()&&this.renderDeleteButton(),SP(e)&&i.a.createElement(fP,{webLink:e})):i.a.createElement(hP,null,this.renderLinkIcon(),this.renderLinkTextOld(),this.shouldRenderDeleteButton()&&this.renderDeleteButton(),SP(e)&&i.a.createElement(fP,{webLink:e}))}}CP.displayName="WebLinkLineCard";var IP=CP;function TP(){return(TP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const PP=e=>i.a.createElement(ys.a,null,(({showFlag:t,dismissFlag:s})=>i.a.createElement(IP,TP({showFlag:t,
dismissFlag:s},e))));PP.displayName="WithFlagSubscriber";var _P=at()([Object(gs.a)("webLinks",{onCreateWebLinkRetry:"retry",onDeleteWebLinkRetry:"retry"}),Object(r.connect)(null,((e,{webLink:t})=>({onCreateWebLinkRetry:s=>{e(Object(sP.d)(t.id)),Object(lI.a)(s,{name:"createRetry"})},onCreateWebLinkCancel:()=>{e(Object(sP.f)(t.id))},onDeleteWebLinkRetry:s=>{e(Object(sP.h)(t.id)),Object(lI.a)(s,{name:"deleteRetry"})},onDeleteWebLinkCancel:()=>{e(Object(sP.a)(t.id))}})))])(PP);const xP=Y.default.div(["div[class*='item-line-card-view__Card']:focus{border-bottom-color:",";}"],Re.a.N30),DP=e=>{const[t,s]=Object(a.useState)(!1),[n,r]=Object(a.useState)(null),o=e=>{s(!0),r(e)},c=()=>{s(!1),r(null)},l=c,{canDelete:u}=e;return i.a.createElement(xP,null,i.a.createElement(Ba.a,{onMount:t=>Object(Wa.b)(t,"webLinkLineCardGroup rendered",{linkCount:e.links.length})}),i.a.createElement(db.a,{items:e.links,groupId:"web-links",onClick:(t,s)=>{e.onClick&&e.onClick(t,s),
s&&s.currentTarget&&s.currentTarget.blur(),(e=>{e.href&&window.open(e.href,"_blank")})(t)}},((e,t,s,n)=>(({link:e,isHovering:t,isFocused:s})=>i.a.createElement(_P,{webLink:e,isHovering:t,isFocused:s,onDelete:o,canDelete:u}))({link:n,isHovering:e,isFocused:s}))),t?i.a.createElement(rP,{onDelete:()=>{n&&e.onDelete(n),c()},onCancel:l}):null)};DP.displayName="WebLinkLineCardGroup";var AP=DP,LP=Object(qt.a)([Object(gs.a)("webLinkCard",{onClick:"clicked",onDelete:"deleted"}),Object(E.a)({onClick:"visitWebLink",onDelete:"deleteWebLink"}),Object(r.connect)(null,(e=>({onDelete:t=>e(Object(sP.h)(t))})))])(AP);const MP=Object(v.h)({label:{id:"issue.web-links-add-label",defaultMessage:"Link to a web page"}}),RP=Y.default.span(["margin-left:auto;"]),NP=({onClick:e})=>{const t=Object(xe.c)();return i.a.createElement(RP,null,i.a.createElement(oO.a,{label:t.formatMessage(MP.label),onClick:e}))};NP.displayName="AddButton";var FP=NP,UP=s("./node_modules/url-parse/index.js"),VP=s.n(UP)
;const KP="null",WP=e=>{const t=e.trim();return/^(((https?):)?\/\/)[^\s/$.?#].[^\s]*$/i.test(t)},BP=Y.default.span(["color:",";font-weight:600;font-size:","px;"],Re.a.N300,1.5*Q.e),HP=Y.default.div(["flex:auto;"]);function $P(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const GP=e=>{let{headingText:t}=e,s=$P(e,["headingText"]);return i.a.createElement(HP,null,i.a.createElement(BP,null,t),i.a.createElement(sl.a,s))};GP.displayName="InlineField";var qP=Object(v.h)({url:{id:"issue.views.web-links.addLink.label.url",defaultMessage:"URL"},linkText:{id:"issue.views.web-links.addLink.label.linkText",defaultMessage:"Link text"},linkTextPlaceholder:{
id:"issue.views.web-links.addLink.label.linkTextPlaceholder",defaultMessage:"Add a description..."},invalidUrlMessage:{id:"issue.views.web-links.addLink.label.invalidUrlMessage",defaultMessage:"Enter a valid URL starting with http:// or https://"},errorIconLabel:{id:"issue.views.web-links.addLink.label.errorIcon",defaultMessage:"Error icon"}});const zP=Y.default.div(["margin-top:","px;display:flex;"],2*Q.e),YP=Y.default.div(["margin-right:","px;flex:1;"],Q.e),QP=Y.default.div(["margin-left:","px;flex:1;"],Q.e),JP=Y.default.div(["align-items:center;color:",";display:flex;margin-top:","px;"],(e=>e.colour),Q.e/2),ZP=Y.default.div(["margin-left:","px;"],Q.e/2);class XP extends a.Component{constructor(...e){super(...e),this.state={isHrefFocused:!0}}render(){const{href:e,linkText:t,onHrefChange:s,intl:n,onLinkTextChange:a,isHrefValid:r}=this.props;return i.a.createElement(zP,null,i.a.createElement(YP,null,i.a.createElement(GP,{value:e,headingText:n.formatMessage(qP.url),autoFocus:!0,
placeholder:"https://www.example.com",onChange:s,onBlur:()=>{this.setState({isHrefFocused:!1})},onFocus:()=>this.setState({isHrefFocused:!0}),isInvalid:!r}),!r&&!this.state.isHrefFocused&&i.a.createElement(JP,{colour:Re.a.R400},i.a.createElement(bb.a,{label:n.formatMessage(qP.errorIconLabel),role:"presentation"}),i.a.createElement(ZP,null,n.formatMessage(qP.invalidUrlMessage)))),i.a.createElement(QP,null,i.a.createElement(GP,{value:t,headingText:n.formatMessage(qP.linkText),autoFocus:!1,placeholder:n.formatMessage(qP.linkTextPlaceholder),onChange:a})))}}XP.displayName="InlineFields";var e_=Object(v.i)(XP),t_=Object(v.h)({linkButton:{id:"issue.views.web-links.link.link-button",defaultMessage:"Link"},cancelButton:{id:"issue.views.web-links.link.cancel-button",defaultMessage:"Cancel"}});Re.a.N10;const s_=Object(Y.default)(G.a)(["margin-left:","px !important;"],Q.e),n_=Y.default.div(["margin-top:","px;display:flex;justify-content:flex-end;"],Q.e),a_={href:"",linkText:"",isDisabled:!0,
isHrefValid:!0};class i_ extends a.Component{constructor(...e){super(...e),this.state=a_,this.onChildContainerRefSet=e=>{this.childContainer=e},this.onHrefChange=e=>{const t=e.target.value;this.updateDisabledState(t),this.setState({href:t,isHrefValid:WP(t)})},this.onLinkTextChange=e=>{const t=e.target.value.slice(0,255);t!==this.state.linkText&&(this.updateDisabledState(this.state.href),this.setState({linkText:t}))},this.onSubmit=()=>{const{href:e,linkText:t}=this.state,s=e.trim(),n=(e=>{const{origin:t}=new VP.a(e.trim(),KP),s=t===KP?"":`${t}/favicon.ico`;return Object(rr.i)(s)})(s);this.props.onSubmit(s,mm()(t.trim())?s:t.trim(),n)},this.childContainer=void 0,this.closeAndReset=()=>{this.resetState(),this.props.onCancel()}}componentDidMount(){Object(Wr.a)(this.childContainer),this.updateDisabledState(this.state.href)}componentDidUpdate(e){this.props.createLinkClickedCount!==e.createLinkClickedCount&&(Object(Wr.a)(this.childContainer),this.focusOnInput()),
this.props.linkedPagesCount>e.linkedPagesCount&&(this.resetState(),this.focusOnInput())}focusOnInput(){if(null!==this.childContainer){const e=this.childContainer.querySelector("input");null!==e&&e.focus()}}updateDisabledState(e){const t=mm()(e)||!WP(e);this.setState({isDisabled:t})}resetState(){this.setState(a_)}render(){const{intl:{formatMessage:e}}=this.props,{href:t,linkText:s,isDisabled:n,isHrefValid:a}=this.state,r=n?null:this.onSubmit;return i.a.createElement("div",{ref:this.onChildContainerRefSet},i.a.createElement(H.a,{onEscape:this.closeAndReset,onEnter:r},i.a.createElement(e_,{href:t,linkText:s,isHrefValid:a,onHrefChange:this.onHrefChange,onLinkTextChange:this.onLinkTextChange})),i.a.createElement(n_,null,i.a.createElement(s_,{appearance:"primary",onClick:this.onSubmit,isDisabled:n},e(t_.linkButton)),i.a.createElement(s_,{appearance:"subtle",onClick:this.closeAndReset},e(t_.cancelButton))))}}i_.displayName="WebLinkCreateLinkView"
;var r_=Object(qt.a)([v.i,Object(gs.a)("button",{onSubmit:"clicked",onCancel:"clicked"}),Object(E.a)({onSubmit:"webLinkSubmit",onCancel:"webLinkCancel"}),Object(r.connect)((e=>({linkedPagesCount:Object(nP.e)(e),createLinkClickedCount:Object(nP.b)(e)})),(e=>({onCancel:()=>e(Object(sP.j)()),onSubmit:(t,s,n)=>e(Object(sP.c)(Object(rr.i)(t),s,n))})))])(i_);const o_=Object(v.h)({heading:{id:"issue.details.web-links.heading",defaultMessage:"Web links"}});const c_=Y.default.div(["margin:","px 0;padding-right:1px;"],Q.e);class l_ extends a.Component{renderHeading(){const{intl:e,isCreateWebLinkOpened:t,onAddButtonClicked:s,links:n,canAddWebLinks:a}=this.props,r=Boolean(n&&n.length);return t||r?i.a.createElement(Ra.c,null,i.a.createElement(Ra.e,null,e.formatMessage(o_.heading)),i.a.createElement(Ra.d,null,a&&i.a.createElement(FP,{onClick:s}))):null}renderLineCards(){const{links:e,canAddWebLinks:t}=this.props;return e&&e.length?i.a.createElement(c_,null,i.a.createElement(LP,{links:e,canDelete:t
})):null}renderCreateLinkView(){return this.props.isCreateWebLinkOpened?i.a.createElement(r_,null):null}render(){return i.a.createElement(i.a.Fragment,null,this.renderHeading(),this.renderLineCards(),this.renderCreateLinkView())}}l_.displayName="WebLinksView";var u_=Object(qt.a)([v.i,Object(E.a)({onAddButtonClicked:"addWebLink"}),Object(r.connect)((e=>({isCreateWebLinkOpened:Object(nP.c)(e),links:Object(nP.f)(e),canAddWebLinks:Object(nP.a)(e)})),(e=>({onAddButtonClicked:()=>e(Object(sP.k)())})))])(l_);class d_ extends a.Component{maybeWrapInSectionWrapper(e){const{isCompactMode:t}=this.props;return e?i.a.createElement(Jf,{isCompactMode:t},e):e}renderEcosystemContentPanels(){const{contentPanels:e,isCompactMode:t}=this.props;if(Object(F.isExperimentalEcosystemIframesHiddenEnabled)())return i.a.createElement(i.a.Fragment,null);const s=e.map((e=>{if("FORGE_ENTITY_TYPE"===e.type){const{name:s,appKey:n,moduleKey:a,dateAdded:r,panelInstanceId:o,extension:c}=e,l=Object(La.g)(n,a,o,r)
;return i.a.createElement(xg,{key:l,panelKey:l,name:s,appKey:n,moduleKey:a,extension:c,isCompactMode:t,externalId:"issue.ecosystem.content-panel.forge"})}return i.a.createElement(yg,{key:e.name,name:e.name,appKey:e.appKey,moduleKey:e.moduleKey,externalId:"issue.ecosystem.content-panel"})}));return i.a.createElement(i.a.Fragment,null,s)}render(){const{isComplete:e,isCompactMode:t,issueKey:s,isEpic:n,hasIssueLinks:a,hasSubtasks:r,hasChildrenIssues:o,hasPortfolioChildIssues:c}=this.props,l=a?i.a.createElement(CT,null):null,u=r?i.a.createElement(tP,{key:s}):null,d=o?i.a.createElement(pC,{key:s}):null,p=c?i.a.createElement($T,{key:s}):null,m=n?i.a.createElement(CC,{key:s}):null,b=e?i.a.createElement(_O,null):null,f=Object(F.getCrossJoinViaEpicTouchpointFlag)();return i.a.createElement(Zf,{isCompactMode:t
},i.a.createElement(sm,null),this.maybeWrapInSectionWrapper(b),this.maybeWrapInSectionWrapper(m),this.maybeWrapInSectionWrapper(d),this.maybeWrapInSectionWrapper(p),this.maybeWrapInSectionWrapper(u),this.maybeWrapInSectionWrapper(i.a.createElement(BT,null)),this.maybeWrapInSectionWrapper(l),this.maybeWrapInSectionWrapper(Object(F.isRelatedIssuesPanelEnabled)()?i.a.createElement(Qf,null):null),this.maybeWrapInSectionWrapper("not-enrolled"!==f?i.a.createElement(fC,null):i.a.createElement(mC.a,null)),this.maybeWrapInSectionWrapper(i.a.createElement(u_,null)),this.maybeWrapInSectionWrapper(this.renderEcosystemContentPanels()),this.maybeWrapInSectionWrapper(i.a.createElement(TT,null)))}}d_.displayName="ContentItems",d_.displayName="ContentItems",d_.defaultProps={isComplete:!1,isCompactMode:!1,isEpic:!1,hasIssueLinks:!1,hasSubtasks:!1,hasPortfolioChildIssues:!1,hasChildrenIssues:!1,contentPanels:[]};var p_=Object(qt.a)([Object(r.connect)((e=>({issueKey:Object(T.x)(e),
contentPanels:Object(Rn.f)(e),isComplete:Object(P.n)(e),isEpic:Object(P.q)(e),hasIssueLinks:Object(gn.x)(e),hasSubtasks:Object(gn.z)(e),hasPortfolioChildIssues:Object(gn.y)(e),hasChildrenIssues:Object(gn.w)(e)})),{})])(d_),m_=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/get-tenant-context/index.js");var b_=s("./src/packages/issue/issue-view/src/layout-descriptor/view/context/view.js");const f_="HIDDEN",g_="VISIBLE";var h_=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/animations/slide-down-on-mount.js"),y_=s("./src/packages/issue/issue-view/src/selectors/tab-selector.js"),O_=s("./src/packages/issue/issue-view/src/common/state/selectors/field-visibility-selector.js");const j_=e=>Object(fn.createSelector)(gn.s,(e=>e),((t,s)=>e.filter((e=>{const t=e.type,{payload:n}=e;return!!n&&("TAB"===e.type?Object(y_.b)(s,n.tabId):void 0!==n.itemId?Object(O_.b)({fieldType:t,fieldId:n.itemId,state:s}):!(!Object(O_.a)(t)||void 0===n.fieldId)&&Object(O_.b)({
fieldType:t,fieldId:n.fieldId,state:s}))}))));var v_=s("./src/packages/servicedesk/common/src/global-spotlight-target/index.js"),E_=s("./src/packages/issue/issue-view/src/views/issue-base/get-layout-item-map.js"),k_=s("./node_modules/@atlaskit/icon/glyph/folder.js"),w_=s.n(k_);const S_="FIELD";var C_=s("./src/packages/issue/issue-view/src/views/issue-base/utils/get-show-pin-button.js"),I_=s("./src/packages/issue/issue-glance/src/main.js"),T_=Object(qt.a)()(I_.a);function P_(){return(P_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function __(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const x_=(e,t)=>e.items.reduce(((e,s)=>{switch(s.type){case S_:return[...e,Object(gn.m)(s.id)(t)];default:return xn.h.safeErrorWithoutCustomerData("issue.views.issue-base.context.tab-glance",`Unknown tab item '${JSON.stringify(s)}'`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e}}),[]).join(", "),D_=()=>i.a.createElement(w_.a,{primaryColor:Re.a.N500,label:""});D_.displayName="TabIcon";const A_=Object(Cc.a)((e=>({tabItems:e}))),L_=e=>{if(void 0!==e.shouldHideTab)return null;const{tabId:t,area:s}=e,n=__(e,["tabId","area"]);return i.a.createElement(T_,P_({itemId:t},n))};L_.displayName="TabGlance";var M_=Object(r.connect)((()=>{const e=Object(y_.c)();return(t,s)=>{const n=e(t,s.tabId);if(n){return{title:n.name,content:x_(n,t),onClickPayload:A_(n.items),Icon:D_,showPinButton:Object(C_.a)(s.area)}}return{shouldHideTab:!0}}}),{})(L_);function R_(){return(R_=Object.assign||function(e){
for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var N_=({item:e,onOpenPanel:t})=>{const{createAnalyticsEvent:s}=Object(si.a)(),{key:n,type:r,payload:o,hasGlobalSpotlightTarget:c}=e,l=Object(a.useCallback)((e=>{Object(Wa.h)(s({}),"contextPanel viewed","issueContextPanel",{contextPanelKey:n,contextPanelType:r});const a=e&&e.title?e.title:r;t({payload:e,title:a,type:r,key:n})}),[n,r,s,t]);if("TAB"===r)return o&&"string"==typeof o.tabId&&o.tabId?i.a.createElement(M_,{createAnalyticsEvent:s,tabId:o.tabId,onOpenPanel:l,area:"context"}):(O.a.safeErrorWithoutCustomerData("context.context-item.view","Could not find payload for Tab Item when trying to render TabGlance",new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),null);const u=Object(E_.a)()[r],d=u&&u.item;if(!d)return O.a.safeErrorWithoutCustomerData("issue",`Could not find a matching component for "${r}"`,new m.a({
eventNameSuffix:"issue.error",type:"js",app:"issue"})),null;const p=i.a.createElement(d,R_({},o,{onOpenPanel:l,area:"context",createAnalyticsEvent:s}));if(!0===c&&void 0!==(null==o?void 0:o.fieldId)){const e=`global-spotlight-target-${o.fieldId}`;return i.a.createElement(v_.a,{id:e,key:e},p)}return p};function F_(){return(F_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}var U_=Object(r.connect)(null,{onOpenPanel:e=>(e=>({type:"CONTEXT_PANEL_SHOW",payload:e}))(e)})((e=>{const t=Object(Us.g)(),[,{setIssueViewLayoutContextPanel:s}]=Object(fc.a)();return i.a.createElement(R.a,{id:"context-item",packageName:"issue-view"},i.a.createElement(N_,F_({},e,{onOpenPanel:e=>{s(t,e)}})))})),V_=s("./src/packages/development/summary-legacy/src/dev-panel/messages.js");function K_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function W_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?K_(Object(s),!0).forEach((function(t){B_(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):K_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function B_(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const H_=(e,t,s)=>e.reduce(((e,n)=>{const{payload:a}=n;if("TAB"===n.type&&a&&a.tabId){const s=t[a.tabId];s&&e.push(s.name)}return a&&a.fieldId&&s[a.fieldId]?e.push(s[a.fieldId].title):a&&"devSummary"===a.itemId&&e.push(V_.a.label),e}),[]),$_=e=>(null==e?void 0:e.fieldId)||(null==e?void 0:e.itemId)||(null==e?void 0:e.tabId),G_=e=>{
const{pinnedFields:t,visibleSecondaryContextItems:s,layoutDescriptor:n}=e,{primaryContextItems:a,secondaryContextItems:i}=n.context,r=new Set(t),o=a.filter((({payload:e})=>!r.has($_(e)))),c=i.filter((({payload:e})=>!r.has($_(e)))),l=s.filter((({payload:e})=>!r.has($_(e))));return{layoutDescriptor:W_(W_({},n),{},{context:{secondaryContextItems:c,primaryContextItems:o}}),visibleSecondaryContextItems:l}};var q_=Object(v.h)({showLessText:{id:"issue.views.issue-base.context.context-items.expander.show-less-button.show-less-text",defaultMessage:"Show less"}});function z_(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Y_(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?z_(Object(s),!0).forEach((function(t){Q_(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):z_(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Q_(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const J_=({onCollapse:e})=>{const t=Object(xe.c)();return i.a.createElement($i.a,{appearance:"subtle",iconBefore:i.a.createElement(Nd.a,{label:"",primaryColor:Re.a.B400,size:"large"}),alt:t.formatMessage(q_.showLessText),shouldFitContainer:!0,onClick:(t,s)=>{e(),Object(Wa.h)(s,"showLess")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-less-button.container",testId:"issue.views.issue-base.context.context-items.expander.show-less-button.container",theme:(e,t)=>{const{buttonStyles:s,spinnerStyles:n}=e(t);return{buttonStyles:Y_(Y_({},s),{},{color:Re.a.B400,textAlign:"left",paddingLeft:"0px","& span":{margin:0}}),spinnerStyles:n}}
},i.a.createElement(v.c,q_.showLessText))};J_.displayName="ShowLessButton";var Z_=J_,X_=Object(v.h)({showMorePlural:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-plural",defaultMessage:"Show {fieldCount} more fields"},showMoreNotPlural:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-not-plural",defaultMessage:"Show {fieldCount} more field"},showMoreAnd:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-and",defaultMessage:"and"},showMoreAltText:{id:"issue.views.issue-base.context.context-items.expander.show-more-button.show-more-alt-text",defaultMessage:"Show more"}});const ex=Y.default.small(["display:block;margin-top:","px;margin-bottom:","px;text-overflow:ellipsis;overflow:hidden;color:",";font-size:","px;line-height:",";"],-Q.e/2,Q.e/2,Re.a.N300,1.5*Q.e,Q.e/6);function tx(){return(tx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function sx(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nx(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sx(Object(s),!0).forEach((function(t){ax(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sx(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function ax(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const ix=({visibleSecondaryContextItemNameList:e,fieldCount:t,onExpand:s})=>{const n=Object(xe.c)(),a=t>1?X_.showMorePlural:X_.showMoreNotPlural,r=((e,t)=>{if(!e||e.length<=0)return""
;if(1===e.length)return e[0];const s=e.slice(-1)[0];return`${e.slice(0,-1).join(", ")} ${t} ${s}`})(e.map((e=>"object"==typeof e&&null!=e?n.formatMessage(e):e)),n.formatMessage(X_.showMoreAnd));return i.a.createElement(je.a,{content:r},i.a.createElement($i.a,{appearance:"subtle",iconBefore:i.a.createElement(Md.a,{label:"",primaryColor:Re.a.B400,size:"large"}),alt:n.formatMessage(X_.showMoreAltText),shouldFitContainer:!0,onClick:(e,t)=>{s(),Object(Wa.h)(t,"showMore")},"data-test-id":"issue.views.issue-base.context.context-items.expander.show-more-button.container",testId:"issue.views.issue-base.context.context-items.expander.show-more-button.container",theme:(e,t)=>{const{buttonStyles:s,spinnerStyles:n}=e(t);return{buttonStyles:nx(nx({},s),{},{color:Re.a.B400,textAlign:"left",paddingLeft:"0px",height:"inherit","& span":{margin:0,alignSelf:"start"}}),spinnerStyles:n}}},i.a.createElement(v.c,tx({},a,{values:{fieldCount:t}})),i.a.createElement(ex,null,r)))};ix.displayName="ShowMoreButton"
;var rx=ix;const ox=Y.default.div(["margin-left:","px;margin-bottom:","px;"],-Q.e,1.5*Q.e);function cx(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const lx=e=>{let{isShowMoreExpanded:t,onCollapse:s}=e,n=cx(e,["isShowMoreExpanded","onCollapse"]);return i.a.createElement("div",null,i.a.createElement(ox,null,t?i.a.createElement(Z_,{onCollapse:s}):i.a.createElement(rx,n)))};lx.displayName="ContextItemsExpander";var ux=lx,dx=Object(qt.a)([Object(r.connect)(((e,t)=>({visibleSecondaryContextItemNameList:H_(t.visibleSecondaryContextItems,Object(y_.d)(e),Object(gn.s)(e))})),{})])(ux)
;const px=e=>"SLA_PANEL"!==e.type&&!!$_(e.payload),mx=Y.default.div([""]),bx=({primaryContextItems:e,contextItemsMap:t})=>{let s=!1;const[,{register:n}]=Object(Ar.b)(),r=Object(a.useCallback)((e=>{n("PIN_FIELD",e)}),[n]),o=e=>{const s=t[e];return void 0!==s?i.a.createElement(U_,{item:s,key:e}):null},c=e.map((e=>!s&&px(e)&&"assignee"!==e.type?(s=!0,i.a.createElement(mx,{innerRef:r,key:e.key},o(e.key))):o(e.key)));return i.a.createElement(i.a.Fragment,null,c)};bx.displayName="PrimaryItems";var fx=bx;const gx=Y.default.div(["display:flex;flex-direction:column;padding-bottom:0;"]),hx=Y.default.div(["margin-top:0px;padding-bottom:0;"]),yx=Y.default.div(["padding-top:","px;box-shadow:inset 0 2px 0 0 ",";margin-left:","px;"],Q.e,Re.a.N30,-Q.e);function Ox(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function jx(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Ox(Object(s),!0).forEach((function(t){vx(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Ox(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function vx(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Ex extends a.Component{constructor(...e){super(...e),this.state=jx(jx({},G_(this.props)),{},{contextItemsMap:{}}),this.onExpand=()=>{this.props.onSecondaryContextItemsVisibilityToggle(!0),this.onUpdateLayoutDescriptor()},this.onCollapse=()=>{this.props.onSecondaryContextItemsVisibilityToggle(!1),this.onUpdateLayoutDescriptor()}}static getDerivedStateFromProps(e){const{primaryContextItems:t,secondaryContextItems:s}=e.layoutDescriptor.context,n={};return t.concat(s).forEach((e=>{n[e.key]=e})),{contextItemsMap:n}}
componentDidMount(){this.onRender(),this.onUpdateLayoutDescriptor()}componentDidUpdate(e,t){this.shouldUpdateItemVisibility(e,t)&&this.onUpdateLayoutDescriptor()}onUpdateLayoutDescriptor(){const e=G_(this.props);this.setState(e),this.onRender()}onRender(){const{primaryContextItems:e,secondaryContextItems:t}=this.props.layoutDescriptor.context,s=e.concat(t);this.props.onRendered(s)}shouldUpdateItemVisibility(e,t){const s=this.props.secondaryContextItemVisibility===g_,n=e.layoutDescriptor.context.primaryContextItems,a=this.props.layoutDescriptor.context.primaryContextItems,i=e.pinnedFields,r=this.props.pinnedFields,o=!Da()(t.contextItemsMap,this.state.contextItemsMap),c=!s&&n.length<a.length,l=!Da()(i,r),u=!s&&n.length===a.length&&!Da()(n,a),d=e.layoutDescriptor.context.secondaryContextItems,p=this.props.layoutDescriptor.context.secondaryContextItems,m=!Da()(e.visibleSecondaryContextItems,this.props.visibleSecondaryContextItems)&&Da()(d,p);return o||c||u||m||l}renderContextItem(e){
const t=this.state.contextItemsMap[e];return void 0!==t?i.a.createElement(U_,{item:t,key:e}):null}renderPrimaryItems(){const{primaryContextItems:e}=this.state.layoutDescriptor.context;return Object(F.isPinnedFieldsClickThroughBannerEnabled)()?i.a.createElement(i.a.Fragment,null,this.renderPinnedItems(),i.a.createElement(gx,{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},i.a.createElement(fx,{primaryContextItems:e,contextItemsMap:this.state.contextItemsMap}))):i.a.createElement(gx,{"data-test-id":"issue.views.issue-base.context.context-items.primary-items"},this.renderPinnedItems(),i.a.createElement(fx,{primaryContextItems:e,contextItemsMap:this.state.contextItemsMap}))}renderSecondaryItems(){const{secondaryContextItems:e}=this.state.layoutDescriptor.context,t=e.map((e=>this.renderContextItem(e.key)));return i.a.createElement(h_.a,null,i.a.createElement(hx,null,t))}renderPinnedItems(){
const{secondaryContextItems:e,primaryContextItems:t}=this.props.layoutDescriptor.context,{pinnedFields:s}=this.props,n=[...e,...t].reduce(((e,t)=>e.set($_(t.payload),t)),new Map),a=s.reduce(((e,t)=>{const s=n.get(t);return s&&e.push(this.renderContextItem(s.key)),e}),[]);return Object(F.isPinnedFieldsClickThroughBannerEnabled)()&&0===a.length?i.a.createElement(Id,null):i.a.createElement(xd,null,a)}render(){const e=this.props.secondaryContextItemVisibility!==f_,t=this.state.visibleSecondaryContextItems,s=t.length;return i.a.createElement("div",{"data-test-id":"issue.views.issue-base.context.context-items"},this.renderPrimaryItems(),e?this.renderSecondaryItems():null,i.a.createElement(Dr.a,{name:"SHOW_MORE"},i.a.createElement("div",null,s>0&&i.a.createElement(dx,{isShowMoreExpanded:e,onExpand:this.onExpand,onCollapse:this.onCollapse,visibleSecondaryContextItems:t,fieldCount:s}))),i.a.createElement(yx,null),i.a.createElement(Ba.a,{onMount:e=>Object(Wa.b)(e,"PinnedFieldOnboarding mounted")
}))}}Ex.displayName="ContextItems",Ex.displayName="ContextItems",Ex.defaultProps={forgeExtensions:[],pinnedFields:[],onRendered:c.a};var kx=Object(qt.a)([Object(r.connect)(((e,t)=>({visibleSecondaryContextItems:j_(t.layoutDescriptor.context.secondaryContextItems)(e),source:Object(T.b)(e),issueKey:Object(Nu.d)(e)})),{})])(Object(Nu.f)(Ex));var wx=({layoutDescriptor:e,isProjectAdmin:t})=>{const{createAnalyticsEvent:s}=Object(si.a)(),{primaryContextItems:n,secondaryContextItems:i}=e.context,r=[...n,...i].filter((e=>"TAB"===e.type)).length>0;return Object(a.useEffect)((()=>{if(r){const e=t?"bentoTabsProjectAdminChangeboarding":"bentoTabsChangeboarding";Object(Wa.f)(s({}),`${e} viewed`,e)}}),[]),null};function Sx(){return(Sx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const Cx=e=>{const{isCompletedLoading:t,isProjectAdmin:s,hasJsd:n}=e,a=!n
;return i.a.createElement(b_.a,null,(({layoutDescriptor:n})=>i.a.createElement(i.a.Fragment,null,i.a.createElement(kx,Sx({layoutDescriptor:n},e)),t&&a&&i.a.createElement(wx,{layoutDescriptor:n,isProjectAdmin:s}))))};Cx.displayName="ContextItemsWithLayoutDescriptor";var Ix=Object(qt.a)([Object(fs.a)((e=>({onRendered:t=>{const s=t.filter((e=>"ecosystemGlance"===e.type)).map((e=>e.payload));s.length>0&&e("ecosystem.glances",Object(Mn.e)(s))}}))),Object(r.connect)((e=>{const t=Object(T.y)(e)||{};return{secondaryContextItemVisibility:Object(Nn.e)(e)?g_:f_,isProjectAdmin:Object(gC.c)(e),isCompletedLoading:Object(P.n)(e),hasJsd:!!t[m_.a.JIRA_SERVICEDESK]}}),(e=>({onSecondaryContextItemsVisibilityToggle:t=>e(t?(()=>({type:"EXPAND_SHOW_MORE"}))():(()=>({type:"COLLAPSE_SHOW_MORE"}))())
})))])(Cx),Tx=s("./node_modules/@atlaskit/icon/glyph/arrow-left.js"),Px=s.n(Tx),_x=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/view.js"),xx=s("./src/packages/issue/issue-view/src/views/issue-base/context/side-panel/styled.js"),Dx=s("./src/packages/platform/observability/analytics-web-react/src/components/analytics-data.js");const Ax="issue.views.issue-base.context.tab-panel";var Lx=(e,t)=>{const s=Object(E_.a)();return e.reduce(((e,n)=>{switch(n.type){case S_:{const a=Object(gu.b)(Object(gn.u)(n.id,t));if(!a||!Object.keys(s).includes(a))return xn.h.safeErrorWithoutCustomerData(Ax,`Could not find a matching component for field '${a||"(unknown type)"}' with id '${n.id}'`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e;const r=s[a].item,o=i.a.createElement(r,{key:n.id,fieldId:n.id,area:"tab-panel"});return e.push({fieldType:a,component:o}),e}default:
return xn.h.safeErrorWithoutCustomerData(Ax,`Unknown tab item '${JSON.stringify(n)}'`,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue"})),e}}),[])};const Mx=Y.default.div(["flex-shrink:0;background:",";outline:0;min-height:40px;"],Re.a.N0),Rx=Y.default.div(["display:flex;align-items:center;position:relative;box-sizing:border-box;box-shadow:inset 0 ","px 0 0 ",";margin-left:","px;padding-left:","px;"," &:hover{cursor:pointer;}&:focus{box-shadow:inset 0 0 0 ","px ",";outline:0;}"],-2,Re.a.N30,-eo.c,eo.c,(({maxWidth:e})=>`max-width: ${e}px;`),2,Re.a.B100),Nx=Y.default.div(["height:100%;display:inline-block;width:100%;",""],(({maxWidth:e})=>`max-width: ${e}px;`)),Fx=Y.default.button(["display:flex;height:28px;width:28px;border:none;border-radius:50%;background:",";color:",";align-items:center;padding-left:2px;margin-left:","px;&:hover{cursor:pointer;}"],Re.a.N30,Re.a.N60,Q.e/2);var Ux=Object(v.h)({emptyStateHeader:{id:"issue.context.tab-panel.empty-state.header",
defaultMessage:"No fields to show"},emptyStateMessage:{id:"issue.context.tab-panel.empty-state.message",defaultMessage:"If you expect to see fields here, ask your Jira admin to check permissions and field configuration."},emptyStateMessageAdmin:{id:"issue.context.tab-panel.empty-state.message.admin",defaultMessage:"If you expect to see fields here, check your permission and field configuration settings."}});const Vx=Y.default.div(["padding:","px ","px ","px ","px;overflow:auto;height:100%;"],2*Q.e,Q.e,Q.e,1.25*Q.e);function Kx(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Wx(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Kx(Object(s),!0).forEach((function(t){Bx(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Kx(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function Bx(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class Hx extends a.Component{componentDidMount(){const{renderedItems:e,tabItems:t}=this.props,s=new Set(e.map((e=>e.fieldType))),n=t.map((e=>e.id)).filter((e=>!s.has(e)));this.props.onComponentMounted({renderedFieldsCount:s.size,unrenderedFieldsCount:n.length,unrenderedFieldTypes:n.join(",")})}render(){const{renderedItems:e,isProjectAdmin:t,contentWidth:s,intl:{formatMessage:n}}=this.props;return e.every((e=>null==e.component))?i.a.createElement(xE.a,{size:"narrow",isSubtle:!0,header:n(Ux.emptyStateHeader),description:n(t?Ux.emptyStateMessageAdmin:Ux.emptyStateMessage)}):i.a.createElement(Vx,null,i.a.createElement(Nx,{maxWidth:s},e.map((e=>e.component))))}}
Hx.displayName="TabPanel";var $x=Object(qt.a)([v.i,Object(gs.a)("fieldTab",{onComponentMounted:"rendered"}),Object(r.connect)(((e,t)=>({onComponentMounted:(e,s)=>{Object(lI.a)(s,{name:t.panelKey,attributes:Wx({contextPanelType:t.type},e)})}})),{})])(Hx),Gx=Object(qt.a)([Object(Dx.a)({attributes:{contextPanelType:"TAB"}}),Object(r.connect)(((e,{type:t,panelKey:s,payload:{tabItems:n}})=>({renderedItems:Lx(n,Object(gn.s)(e)),tabItems:n,type:t,panelKey:s,isProjectAdmin:Object(gC.c)(e)})),{})])($x);const qx=e=>{const{refs:t,layoutItemEntryMap:s}=e,n=Object(Us.g)(),[r]=Object(fc.b)(n),[,{setIssueViewLayoutContextPanel:o}]=Object(fc.a)(),c=void 0!==r,l=Object(a.useCallback)((()=>{o(n,void 0)}),[n,o]);let u=null;if(r){const e=s[r.type];u="TAB"===r.type?Gx:e&&e.panel}return i.a.createElement(_x.a,{refs:t,isOpen:c},(e=>i.a.createElement(i.a.Fragment,null,i.a.createElement(Mx,{"data-test-id":"issue.views.issue-base.context.context-panel.back"},i.a.createElement(Rx,{maxWidth:e.headerWidth,
onClick:l,tabIndex:"0"},i.a.createElement(Fx,null,i.a.createElement(Px.a,{size:"medium",label:"Return"})),i.a.createElement(xx.c,null,r&&r.title))),u&&r?i.a.createElement(u,{contentWidth:e.contentWidth,type:r.type,panelKey:r.key,payload:r.payload}):null)))};qx.displayName="ContextPanel",qx.displayName="ContextPanel";var zx=qx,Yx=at()(Object(r.connect)((e=>({isOpen:Object(am.b)(e),panel:Object(am.a)(e),layoutItemEntryMap:Object(E_.a)()})),{onHidePanel:()=>({type:"CONTEXT_PANEL_HIDE"})}),Object(js.a)())(zx),Qx=s("./src/packages/issue/issue-view/src/actions/ecosystem-glance-actions.js");const Jx=Y.default.div(["",";width:100%;height:100%;overflow:auto;position:relative;padding:","px;"],(({panelWidth:e})=>`min-width: ${e}px;`),Q.e);function Zx(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function Xx(e,t,s){
return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const eD=(e,t)=>{const s=e.appKey!==t.appKey,n=e.moduleKey!==t.moduleKey,a=e.statusCategory!==t.statusCategory,i=e.refreshedOn!==t.refreshedOn,r=e.styles!==t.styles;return!(s||n||a||r||i)},tD=Object(a.memo)((({refreshedOn:e=0,onGlanceHideAnalytics:t=c.a,appKey:s,moduleKey:n,glance:r,styles:o,statusCategory:l})=>{if(!r)return null;const[u,d]=Object(a.useState)(window.connectHost),p=Object(Us.g)(),[,{setIssueViewLayoutGlance:m}]=Object(fc.a)(),{options:{origin:b}}=r;Object(a.useEffect)((()=>{u||(xn.h.safeInfoWithoutCustomerData("issue.ecosystem.glance.panel","Delayed initialization of ecosystem glance panel"),Object(Vn.b)((e=>d(e))))}),[u]);const f=Object(Wn.b)({isAutoresizeBugfixEnabled:Object(F.isConnectGlanceAutoresizeBugfixEnabled)()});return i.a.createElement(i.a.Fragment,null,i.a.createElement(Mx,null,i.a.createElement(Rx,{maxWidth:o.headerWidth,onClick:()=>{
t(Object(Mn.d)(s,n,r.status)),m(p,void 0)},tabIndex:"0"},i.a.createElement(Fx,null,i.a.createElement(Px.a,{size:"medium",label:"Return"})),i.a.createElement(xx.c,null,r.name))),u&&i.a.createElement(Jx,{panelWidth:o.contentWidth},i.a.createElement(Nx,{maxWidth:o.contentWidth},i.a.createElement(Kn.a,{key:`connect-iFrame-${b}-${l}-${e}`,connectHost:u,appKey:s,moduleKey:n,url:r.options.url,options:f.convertConnectOptions(r.options),height:"100%",width:"100%",connectIframeProvider:f,timeoutIndicator:()=>i.a.createElement(Yn,{appName:r.name,appKey:s})}))))}),eD);var sD=Object(qt.a)([Object(fs.a)((e=>({onGlanceHideAnalytics:t=>e("hide",function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?Zx(Object(s),!0).forEach((function(t){Xx(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Zx(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({},t))
}))),Object(r.connect)(((e,t)=>({glance:Object(Rn.l)(t.appKey,t.moduleKey)(e),statusCategory:Object(D.a)(e),refreshedOn:Object(P.e)(e)})),(e=>({onHideGlance:()=>{e(Object(Qx.a)()),e(Object(At.e)())}})))])(tD),nD=s("./src/packages/forge/forge-ui-analytics/src/ui/issue-glance/index.js"),aD=s("./src/packages/forge/forge-ui-async/src/ui/issue-glance/async.js");const iD=({glance:e,extensionData:t,styles:s,source:n,isOpen:r})=>{const[o,c]=Object(a.useState)(!1),l=Object(Us.g)(),[,{setIssueViewLayoutGlance:u}]=Object(fc.a)(),d=Object(a.useCallback)((()=>{u(l,void 0)}),[l,u]);return Object(a.useEffect)((()=>{r&&!o&&c(!0)}),[r,o]),i.a.createElement(nD.a,{attributes:{source:n},shouldFireScreenEvent:r},i.a.createElement(Mx,{onClick:void 0,tabIndex:void 0},i.a.createElement(Rx,{maxWidth:s.headerWidth,onClick:d,tabIndex:"0"},i.a.createElement(Fx,null,i.a.createElement(Px.a,{size:"medium",label:"Return"})),i.a.createElement(xx.c,null,e.title))),i.a.createElement(Jx,{panelWidth:s.contentWidth
},i.a.createElement(Nx,{maxWidth:s.contentWidth},o&&i.a.createElement(aD.a,{extensionData:t,extension:e.extension,analyticsAttributes:{source:n}}))))};iD.displayName="ForgeGlancePanel",iD.displayName="ForgeGlancePanel";var rD=Object(qt.a)([Object(r.connect)((e=>({extensionData:Object(Bo.h)(e),source:Object(T.b)(e)})),{onHideForgeGlance:Qx.a})])(iD);class oD extends a.Component{renderGlance(e,t){const{glance:s}=this.props;switch(s.glanceType){case"CONNECT_ENTITY_TYPE":return i.a.createElement(sD,{panelWidth:e.panelWidth,styles:e,appKey:s.appKey,moduleKey:s.moduleKey,key:`issue.ecosystem.glance.panel_${s.appKey}_${s.moduleKey}`});case"FORGE_ENTITY_TYPE":return i.a.createElement(rD,{panelWidth:e.panelWidth,styles:e,key:`issue.forge.glance.panel_${s.appKey}_${s.moduleKey}`,glance:s,isOpen:t});default:return null}}render(){const{openedGlance:e,glance:t,refs:s}=this.props,n=!!e&&e.appKey===t.appKey&&e.moduleKey===t.moduleKey;return i.a.createElement(_x.a,{refs:s,isOpen:n
},(e=>this.renderGlance(e,n)))}}oD.displayName="GlanceAnimatedPanel",oD.defaultProps={openedGlance:null};var cD=Object(fs.a)((e=>({onMount:t=>e("mounted",t)})))(oD),lD=Object(v.h)({move:{id:"issue.move",defaultMessage:"Move"},clone:{id:"issue.clone",defaultMessage:"Clone"},delete:{id:"issue.delete",defaultMessage:"Delete"},print:{id:"issue.print",defaultMessage:"Print"},exportXML:{id:"issue.export-xml",defaultMessage:"Export XML"},exportDOC:{id:"issue.export-doc",defaultMessage:"Export Word"},switchToModal:{id:"issue.switch-to-modal",defaultMessage:"Open issues in dialog"},switchToSidebar:{id:"issue.switch-to-sidebar",defaultMessage:"Open issues in sidebar"},newIssueView:{id:"issue.title-for-new-issue-actions",defaultMessage:"New Jira issue view"},swiftLink:{id:"issue.swift-link",defaultMessage:"Configure"},swiftBacklink:{id:"issue.swift-backlink-title",defaultMessage:"Back to {issueKey}"},startTour:{id:"issue.start-guided-tour",defaultMessage:"Show me the highlights"},findOutMore:{
id:"issue.find-out-more",defaultMessage:"Find out more"},seeOldView:{id:"issue.see-old-view",defaultMessage:"See the old view"},turnOffNewIssueView:{id:"issue.turn-off-new-issue-view",defaultMessage:"Turn off new issue view"},turnOffForNow:{id:"issue.turn-off-issue-view-for-now",defaultMessage:"Turn off for now"},triggerButtonLabel:{id:"issue.label-for-issue-actions-button",defaultMessage:"Actions"},configure:{id:"issue.configure",defaultMessage:"Configure"},addToParentLevel:{id:"issue.add-to-parent-level",defaultMessage:"Add parent"},changeParentLevel:{id:"issue.change-parent-level",defaultMessage:"Change parent"},convertToSubtask:{id:"issue.convert-to-subtask",defaultMessage:"Convert to Subtask"},convertToIssue:{id:"issue.convert-to-issue",defaultMessage:"Convert to Issue"}
}),uD=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-field-key-by-custom-type.js"),dD=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/utils/get-configuration-href.js"),pD=Object(v.h)({configureTooltipAdmin:{id:"issue.details.configuration-button.configure-fields.tooltip-admin",defaultMessage:"Configure fields"},configureTooltipEndUser:{id:"issue.details.configuration-button.configure-fields.tooltip-end-user",defaultMessage:"Contact your admin to change the field order & layout"},configureTooltipAdminNoRequestType:{id:"issue.details.configuration-button.configure-fields.tooltip-admin-no-request-type",defaultMessage:"You can\u2019t configure the layout of an issue while it doesn\u2019t have a request type."}})
;var mD=Y.default.div(["margin:","px ","px 0 0;display:block;min-width:0;max-width:50%;[type='button']{padding:0;font-size:12px;span{margin:0;text-overflow:unset;}span[class*='Icon__IconWrapper']{width:16px;}}",""],Q.e/2,1.5*Q.e,(()=>Object(F.isGroupingPreEarlyAccessEnabled)()?"\n        margin-right: 0;\n        a { margin-right: 0; }\n    ":""));const bD=Object(a.memo)((e=>{const{intl:{formatMessage:t}}=e,s=((e,t)=>{switch(e){case"show":return{tooltipText:t(pD.configureTooltipAdmin),isDisabled:!1};case"disabled_permission":return{tooltipText:t(pD.configureTooltipEndUser),isDisabled:!0};case"disabled_no_request_type":return{tooltipText:t(pD.configureTooltipAdminNoRequestType),isDisabled:!0};case"disabled_no_screen_id":return{tooltipText:"",isDisabled:!0};case"hide":default:return{isHidden:!0}}})((()=>{const e=Object(Us.i)(),t=Object(Vu.c)(e),s=Object(Vu.b)(e),n=Object(Ga.k)(e),a=!Object(Ga.b)(e),i=Object(Us.g)(),r=Object(Us.m)(),[o]=Object(mu.c)(i);let c="issuetype"
;a&&n===IC.g&&null!==o&&(c=Object(uD.a)("com.atlassian.servicedesk:vp-origin",o));const l=void 0!==c?c:"issuetype",[u]=Object(xl.b)({issueKey:i,fieldKey:l}),[d]=Object(xl.b)({issueKey:i,fieldKey:"issuetype"});if(!s)return"disabled_permission";switch(n){case IC.g:if(!t)return"disabled_permission";if(a&&(null===c||null==u||void 0===u.requestType||void 0===u.requestType.id)||!a&&(!d||!d.id))return"disabled_no_request_type"}return null!=r&&0!==r||!a?"show":"disabled_no_screen_id"})(),t);if(s.isHidden)return null;const{tooltipText:n,isDisabled:a}=s,r=t(lD.configure),o=Object(dD.a)(t);return i.a.createElement(mD,null,i.a.createElement(je.a,{position:"mouse",mousePosition:"left",content:n},i.a.createElement(G.a,{isDisabled:a,appearance:"subtle-link",iconBefore:i.a.createElement(Ud.a,{label:""}),href:o,target:"_blank",rel:"noopener noreferrer",onClick:(e,t)=>Object(Wa.h)(t,"configureButton")},r)))}))
;var fD=Object(qt.a)([v.i])(bD),gD=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/index.js"),hD=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/header/header-breadcrumbs/index.js");var yD=({issueKey:e})=>{const[t]=Object(xl.b)({issueKey:e,fieldKey:"created"});return[{value:t}]},OD=s("./src/packages/issue/fields/components/timestamp/src/index.js"),jD=s("./src/packages/platform/services/user/src/main.js");const vD=Y.default.div(["display:flex;margin-top:","px;"],Q.e/2),ED=Y.default.small(["color:",";padding-top:","px;white-space:nowrap;margin-top:0;font-size:","px;line-height:",";"],Re.a.N200,Q.e/4,1.5*Q.e,Q.e/6),kD={whenDisplaySettingSwitchable:Object(Y.css)([":hover{color:",";}"],Re.a.N500)},wD=e=>{const[{data:t}]=Object(jD.b)(),s=t?t.timeZone:void 0,{text:n,date:a}=e;return null==a?null:i.a.createElement(vD,null,i.a.createElement(ED,null,n,"\xa0",i.a.createElement(OD.a,{value:a,timeZone:s,extraStyles:kD,tooltipPosition:"right"})))}
;wD.displayName="MetaDate";var SD=wD,CD=Object(v.h)({createdLabel:{id:"created-date.read.created-label",defaultMessage:"Created"}});const ID=({date:e})=>{const{formatMessage:t}=Object(xe.c)();return null!==e&&""!==e?i.a.createElement(zh.b,null,i.a.createElement(SD,{date:e,text:t(CD.createdLabel)})):null},TD=({issueKey:e})=>{const[{value:t}]=yD({issueKey:e});return i.a.createElement(ID,{date:t})};TD.displayName="CreatedDateField";var PD=TD;var _D=({issueKey:e})=>{const[t]=Object(xl.b)({issueKey:e,fieldKey:"resolutiondate"});return[{value:t}]},xD=Object(v.h)({resolvedLabel:{id:"resolved-date.read.resolved-label",defaultMessage:"Resolved"}});const DD=({date:e})=>{const{formatMessage:t}=Object(xe.c)();return null!==e&&""!==e?i.a.createElement(zh.b,null,i.a.createElement(SD,{date:e,text:t(xD.resolvedLabel)})):null},AD=({issueKey:e})=>{const[{value:t}]=_D({issueKey:e});return i.a.createElement(DD,{date:t})};AD.displayName="ResolvedDateField";var LD=AD;var MD=({issueKey:e})=>{
const[t]=Object(xl.b)({issueKey:e,fieldKey:"updated"});return[{value:t}]},RD=Object(v.h)({updatedLabel:{id:"updated-date.read.updated-label",defaultMessage:"Updated"}});const ND=({date:e})=>{const{formatMessage:t}=Object(xe.c)();return null!==e&&""!==e?i.a.createElement(zh.b,null,i.a.createElement(SD,{date:e,text:t(RD.updatedLabel)})):null},FD=({issueKey:e})=>{const[{value:t}]=MD({issueKey:e});return i.a.createElement(ND,{date:t})};FD.displayName="UpdatedDateField";var UD=FD;const VD=Y.default.div(["margin-top:","px;margin-right:","px;flex:1;",""],Q.e/2,2*Q.e,(()=>Object(F.isGroupingPreEarlyAccessEnabled)()?"padding-left: 10px;":""));var KD=()=>{const e=Object(Us.g)();return i.a.createElement(VD,null,i.a.createElement(PD,{issueKey:e}),i.a.createElement(UD,{issueKey:e}),i.a.createElement(LD,{issueKey:e}))},WD=s("./src/packages/issue/issue-view/src/actions/confluence-pages-actions.js"),BD=s("./src/packages/issue/issue-view/src/actions/fetch-confluence-app-links-actions.js")
;function HD(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $D(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?HD(Object(s),!0).forEach((function(t){GD(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):HD(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function GD(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var qD=({fieldKey:e,propName:t,isEnabled:s=(()=>!0),FieldValueSubscriber:n=xl.a})=>a=>r=>{if(!s())return i.a.createElement(a,r);const{issueKey:o}=r;return i.a.createElement(n,{issueKey:o,fieldKey:e},(e=>{const s=$D($D({},r),{},{[t]:e});return i.a.createElement(a,s)}))
},zD=s("./src/packages/issue/issue-view/src/selectors/confluence-app-links-selector.js");const YD=Object(fn.createSelector)(qT.a,yC,zt.k,P.q,rO.b,AC.a,T.s,zD.a,nP.a,RC.c,((e,t,s,n,a,i,r,o,c,l)=>{const u=t&&!s&&n;return{canCreateAttachment:a,shouldShowCreateSubtaskButton:e&&!s&&!u,shouldShowIssueInEpicButton:u,supportsChildCreation:s,canCreateIssueLink:i,isServiceDesk:r,canLinkConfluencePage:o,canAddWebLinks:c,canEditIssues:l}}));var QD=s("./src/packages/servicedesk/incident-management/issue-view/linked-alerts/src/services/main.js"),JD=s("./src/packages/servicedesk/common/src/itsm-practices/constants.js"),ZD=s("./src/packages/wrm/src/wrm-module-loader/index.js"),XD=s("./src/packages/wrm/src/common-modules/calendar-locale-module.js"),eA=s("./src/packages/issue/issue-view/src/common/skeleton/container-mask-view.js"),tA=s("./src/packages/issue/issue-view/src/common/skeleton/skeleton-container-view.js")
;const sA=Y.default.div(["display:flex;flex-direction:row;width:100%;"]),nA=Object(Y.default)(fu.a)(["flex-grow:1;"]),aA=Object(Y.default)(fu.a)(["width:8px;"]),iA=Y.default.div(["width:32px;height:32px;background-image:url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjAgMCAzMiAzMiIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4gICAgICAgIDx0aXRsZT4zMngzMl9yb3VuZGVkZWRnZTwvdGl0bGU+ICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPiAgICA8ZGVmcz48L2RlZnM+ICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPiAgICAgICAgPGcgaWQ9IjMyeDMyX3JvdW5kZWRlZGdlIiBmaWxsPSIjRkZGRkZGIj4gICAgICAgICAgICA8cGF0aCBkPSJNMywwIEMxLjM0MzE0NTc1LDMuMDQzNTkxODhlLTE2IC0yLjAyOTA2MTI1ZS0xNiwxLjM0MzE0NTc1IDAsMyBMMCwwIEwzLDAgWiBNMjksMCBMMzIsMCBMMzIsMyBDMzIsMS4zNDMxNDU3NSAzMC42NTY4NTQyLC0zLjA0MzU5MTg4ZS0xNiAyOSwwIFogTTMyLDI5IEwzMiwzMiBMMjksMzIgQzMwLjY1Njg1NDIsMzIgMzIsMzAuNjU2ODU0MiAzMiwyOSBaIE0zLDMyIEwwLDMyIEwwLDI5IEMyLjAyOTA2MTI1ZS0xNiwzMC42NTY4NTQyIDEuMzQzMTQ1NzUsMzIgMywzMiBaIiBpZD0iQ29tYmluZWQtU2hhcGUiPjwvcGF0aD4gICAgICAgIDwvZz4gICAgPC9nPjwvc3ZnPg==);"])
;var rA=()=>i.a.createElement(tA.a,null,i.a.createElement(fu.b,null),i.a.createElement(eA.a,{paddingTop:4,paddingBottom:9},i.a.createElement(sA,null,i.a.createElement(iA,null),i.a.createElement(aA,null),i.a.createElement(iA,null),i.a.createElement(aA,null),i.a.createElement(iA,null),i.a.createElement(nA,null)))),oA=s("./node_modules/lodash/differenceBy.js"),cA=s.n(oA),lA=s("./node_modules/@atlaskit/icon/glyph/addon.js"),uA=s.n(lA),dA=s("./src/packages/common-legacy-do-not-add-anything-new/src/analytics-v2-wrapped-components/dropdown-item.js"),pA=s("./src/packages/issue/issue-view/src/ecosystem/broadcast-connect-event.js");function mA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function bA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?mA(Object(s),!0).forEach((function(t){fA(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):mA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function fA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const gA=3*Q.e,hA=Y.default.span(["padding:","px;"],Q.e/2),yA=Y.default.div(["display:inline-flex;"]),OA=Y.default.span(["color:",";"],Re.a.B400),jA=Object(v.h)({quickAddAddonLabel:{id:"issue.quickadd.addon",defaultMessage:"Add app"},addMore:{id:"issue.quickadd.addon.add.more",defaultMessage:"Add apps"}}),vA=e=>!!e.tooltip&&!!e.iconUrl;class EA extends a.Component{constructor(...e){super(...e),this.getExtensionsToShowIconsFor=()=>this.props.availableAddons.filter(vA).slice(0,3),this.getExtensionsToShowInDropdown=()=>cA()(this.props.availableAddons,this.getExtensionsToShowIconsFor(),"moduleKey"),this.transformExtension=e=>{const t=i.a.createElement(dA.b,{
key:e.moduleKey,elemBefore:EA.getIcon(e),onClick:this.itemSelected(e)},e.name);return e.tooltip?i.a.createElement(je.a,{content:e.tooltip,key:e.moduleKey},t):t},this.createDropdownItems=e=>i.a.createElement(gi.a,null,e.map(this.transformExtension),this.props.canInstallAddons&&i.a.createElement(dA.b,{key:jA.addMore.id,elemBefore:i.a.createElement(OA,null,i.a.createElement(VE.a,{label:this.props.intl.formatMessage(jA.addMore)})),onClick:this.props.onAddExtensionsClick,href:`${this.props.baseUrl}/plugins/servlet/upm/marketplace/featured`,target:"_new"},i.a.createElement(OA,null,this.props.intl.formatMessage(jA.addMore)))),this.itemSelected=e=>()=>{const t=Object(tg.b)(e.moduleKey,10),s="FORGE_ENTITY_TYPE"===e.type;let n=s?Object(La.e)(e.appKey,e.moduleKey):Object(La.c)(e.appKey,e.moduleKey);if(s){const t=`${n}-`,s=this.props.contentPanelsInIssue.find((e=>Object(La.b)(e,t)));null!=s&&!1===e.allowMultiple&&(n=s)}
e.showByDefault||this.props.contentPanelsInIssue.includes(`${e.appKey}_${t}`)||this.props.contentPanelsInIssue.includes(n)?(this.props.onContentPanelFocusAnalytics(Object(Mn.b)(e.appKey,e.moduleKey)),this.props.onSelectContentPanel(n),this.sendQuickAddClickedEvent(!1,e.appKey,e.moduleKey,s)):(this.props.onContentPanelAddAnalytics(Object(Mn.b)(e.appKey,e.moduleKey)),this.props.onAddExtension(n),this.sendQuickAddClickedEvent(!0,e.appKey,e.moduleKey,s))},this.sendQuickAddClickedEvent=(e,t,s,n)=>{this.props.onQuickAddClick("ISSUE_QUICK_ADD_CLICKED",{addon_key:t,key:s},{isNewToIssue:e.toString()}),n&&Object(Og.m)(this.props.source,{isNewToIssue:e})},this.transformExtensionToQuickIcon=(e,t)=>this.props.createItemView({id:`${e.appKey}_${e.moduleKey}`,label:e.tooltip||e.name,icon:EA.getIcon(e),onClick:this.itemSelected(e),itemIndex:this.props.startIndex+t}),this.renderVisibleExtensionIcons=()=>this.getExtensionsToShowIconsFor().map(((e,t)=>this.transformExtensionToQuickIcon(e,t))),
this.renderDropdownExtensions=()=>{const{intl:e,canInstallAddons:t}=this.props,s=this.getExtensionsToShowInDropdown();return s.length>0||t?i.a.createElement(fi.a,{key:"ecosystem-actions-dropdown",boundariesElement:"scrollParent",triggerType:"button",triggerButtonProps:{spacing:"none",theme:(e,t)=>{const s=e(t);return bA(bA({},s),{},{buttonStyles:bA(bA({},s.buttonStyles),{},{margin:0})})},iconBefore:i.a.createElement(hA,null,i.a.createElement(Ym.a,{size:"medium",label:""})),"aria-label":e.formatMessage(jA.quickAddAddonLabel)}},this.createDropdownItems(s)):null}}static getIcon(e){return e.iconUrl?i.a.createElement(jb.a,{title:e.name,url:e.iconUrl,width:gA,height:gA,fallback:()=>this.getFallbackIcon({name:e.name})}):this.getFallbackIcon({name:e.name})}componentDidMount(){const{availableAddons:e,contentPanelsInIssue:t,onContentPanelListLoadedAnalytics:s}=this.props;e.length>0&&s(Object(Mn.c)(e,t))}render(){const e=this.renderVisibleExtensionIcons(),t=this.renderDropdownExtensions()
;return i.a.createElement(yA,null,[...e,t])}}EA.displayName="UnsafeAddonsQuickAdd",EA.defaultProps={canInstallAddons:!1,availableAddons:[],contentPanelsInIssue:[],onContentPanelListLoadedAnalytics:c.a,onContentPanelAddAnalytics:c.a,onContentPanelFocusAnalytics:c.a,onAddExtensionsClick:c.a,onQuickAddClick:c.a,onAddWebLinkClick:c.a},EA.getFallbackIcon=e=>i.a.createElement(uA.a,{size:"medium",label:e.name});const kA=(e,t,s)=>{Object(pA.a)(e,t,s)};var wA=at()(Object(fs.a)((e=>({onContentPanelListLoadedAnalytics:t=>e("load",bA({},t)),onContentPanelAddAnalytics:t=>e("add",bA({},t)),onContentPanelFocusAnalytics:t=>e("focus",bA({},t))}))),Object(E.a)({onAddExtensionsClick:"quickAddDropdownMenuItem",onAddWebLinkClick:"quickAddWebLink"}),Object(r.connect)((e=>({availableAddons:Object(Rn.k)(e),contentPanelsInIssue:Object(Rn.p)(e),baseUrl:Object(T.f)(e),canInstallAddons:Object(Rn.c)(e),source:Object(T.b)(e),onQuickAddClick:kA})),(e=>({onAddWebLinkClick:()=>e(Object(sP.k)())
}))),Object(js.a)())(Object(v.i)(EA)),SA=s("./node_modules/@atlaskit/icon/glyph/link.js"),CA=s.n(SA);const IA=Y.default.span(["margin-right:","px;"],Q.e),TA=Y.default.span(["padding:","px;margin-left:","px;margin-right:","px;"],(e=>e.compactMode?Q.e/2:0),(e=>e.compactMode?0:-4),(e=>e.compactMode?0:-2)),PA=Y.default.span(["display:flex;margin-right:","px;"],Q.e),_A=Y.default.span(["padding:","px;"],Q.e/2);var xA=Object(a.memo)((e=>{const{id:t,icon:s,label:n,onClick:r,testId:o}=e.item,c=Object(a.useCallback)(((e,s)=>{Object(Wa.h)(s,"createLink",{actionItemId:t,name:"linkDropdownListItem"}),r&&r()}),[t,r]);return i.a.createElement(dA.b,{id:t,elemBefore:s,onClick:c,"data-test-id":o},n)}));function DA(){return(DA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const AA=e=>{
const[t,s]=Object(a.useState)(!1),{position:n,actions:r,tooltip:o,triggerButtonProps:c}=e,l=i.a.createElement($i.a,DA({spacing:"none","aria-label":o,"aria-expanded":t},c,{testId:"issue.views.issue-base.foundation.quick-add.link-button.ui.link-dropdown-button"})),u=void 0!==o?i.a.createElement(je.a,{content:o,position:"bottom",hideTooltipOnClick:!0},l):l;return i.a.createElement(fi.a,{key:"web-link-actions-dropdown",position:n,trigger:u,onOpenChange:({isOpen:e},t)=>{s(e),Object(Wa.h)(t,"moreLinksDropdownToggled",{isOpen:e,name:"linkDropdownListButton"})}},i.a.createElement(gi.a,null,r.map((e=>i.a.createElement(xA,{key:e.id,item:e})))))};AA.displayName="DropdownListButton";var LA=AA;function MA(){return(MA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function RA(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{}
;var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function NA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function FA(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?NA(Object(s),!0).forEach((function(t){UA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):NA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function UA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const VA=({compactMode:e,actions:t,tooltipLabel:s})=>{if(e){const e={iconBefore:i.a.createElement(_A,null,i.a.createElement(CA.a,{size:"medium",label:""}))};return i.a.createElement(LA,{actions:t,triggerButtonProps:e,tooltip:s})}const[{id:n,onClick:a,label:r,tooltip:o,testId:c},...l]=t,u=i.a.createElement(TA,{compactMode:e},i.a.createElement(CA.a,{size:"medium",label:""})),d=(e,t)=>{Object(Wa.h)(t,"AddLink",{name:"AddLinkButton"}),a()};return 0===l.length?i.a.createElement(je.a,{content:o,position:"bottom",key:n},i.a.createElement(G.a,{"aria-label":o,spacing:"default",iconBefore:u,onClick:d,testId:c},r)):i.a.createElement(i.a.Fragment,null,i.a.createElement(je.a,{content:o,position:"bottom",key:n},i.a.createElement($i.a,{"aria-label":o,spacing:"default",iconBefore:u,onClick:d,testId:c,theme:(e,t)=>{const s=e(t);return FA(FA({},s),{},{buttonStyles:FA(FA({},s.buttonStyles),{},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:`2px solid ${Re.a.N40}`,margin:0})})}
},r)),i.a.createElement(LA,{actions:l,position:"bottom right",tooltip:s,triggerButtonProps:{iconBefore:i.a.createElement(_A,null,i.a.createElement(Md.a,{size:"medium",label:""})),theme:(e,t)=>{const s=e(t);return FA(FA({},s),{},{buttonStyles:FA(FA({},s.buttonStyles),{},{borderTopLeftRadius:0,borderBottomLeftRadius:0,margin:0})})}}}))},KA=e=>{let{actions:t}=e,s=RA(e,["actions"]);return 0===t.length?null:i.a.createElement(PA,null,i.a.createElement(VA,MA({actions:t},s)))};KA.displayName="LinkButtonWithWrapper";var WA=KA;function BA(){return(BA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function HA(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $A(e){
for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?HA(Object(s),!0).forEach((function(t){GA(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):HA(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function GA(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class qA extends a.Component{render(){const{id:e,icon:t,onClick:s,extraAttributes:n,label:a,compactMode:r,testId:o,hasGlobalSpotlightTarget:c}=this.props,l=i.a.createElement($i.a,{"aria-label":a,spacing:r?"none":"default",iconBefore:i.a.createElement(TA,{compactMode:r},t),onClick:s,theme:(e,t)=>{const s=e(t);return $A($A({},s),{},{buttonStyles:$A($A({},s.buttonStyles),{},{margin:0})})}},!r&&a),u=i.a.createElement(v_.a,{id:`global-spotlight-target-${e}`},l);return i.a.createElement(IA,BA({},n,{"data-test-id":o}),c?u:l)}}
qA.displayName="View",qA.defaultProps={hasGlobalSpotlightTarget:!1,extraAttributes:{},label:"",compactMode:!0,testId:void 0};var zA=s("./node_modules/@atlaskit/icon/glyph/calendar.js"),YA=s.n(zA),QA=Object(v.h)({label:{id:"issue.foundation.quick-add.quick-add-items.schedule-change-button.label",defaultMessage:"Schedule change"},tooltip:{id:"issue.foundation.quick-add.quick-add-items.schedule-change-button.tooltip",defaultMessage:"Schedule change"}});const JA=({createItemView:e,onClick:t})=>{const s=Object(xe.c)();return e({id:"schedule-change",label:s.formatMessage(QA.label),tooltip:s.formatMessage(QA.tooltip),icon:i.a.createElement(YA.a,{size:"medium",label:""}),itemIndex:4,shouldRender:!0,onClick:t,testId:"",hasGlobalSpotlightTarget:!0})};var ZA=s("./src/packages/servicedesk/change-management/schedule-change-modal/src/async.js");const XA=({isOpen:e,onClose:t})=>{const s=Object(Us.g)();return i.a.createElement(ZA.a,{issueKey:s,isOpen:e,onClose:t})};XA.displayName="ScheduleChangeModal"
;const eL=Object(re.e)((()=>s.e("async-issue-view-schedule-change-spotlight").then(s.bind(null,"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/schedule-change-button/schedule-change-spotlight/view.js")).then((e=>e.ScheduleChangeSpotlight))),{ssr:!1,moduleId:"./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/schedule-change-button/schedule-change-spotlight/view.js"}),tL=()=>i.a.createElement(re.a,{fallback:null},i.a.createElement(eL,null));tL.displayName="ScheduleChangeSpotlight";const sL=({createItemView:e})=>{const[t,s]=Object(a.useState)(!1),n=Object(a.useCallback)((()=>{s(!0)}),[]),r=Object(a.useCallback)((()=>{s(!1)}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(JA,{createItemView:e,onClick:n}),i.a.createElement(tL,null),i.a.createElement(XA,{isOpen:t,onClose:r}))}
;var nL=s("./node_modules/@atlaskit/icon/glyph/attachment.js"),aL=s.n(nL),iL=s("./node_modules/@atlaskit/icon/glyph/child-issues.js"),rL=s.n(iL),oL=s("./node_modules/@atlaskit/icon/glyph/issues.js"),cL=s.n(oL),lL=s("./node_modules/@atlaskit/icon/glyph/notification-direct.js"),uL=s.n(lL),dL=s("./node_modules/@atlaskit/icon/glyph/page.js"),pL=s.n(dL),mL=s("./node_modules/@atlaskit/icon/glyph/subtask.js"),bL=s.n(mL),fL=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-create-icon.svg"),gL=s.n(fL),hL=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items/assets/incident-icon.svg"),yL=s.n(hL),OL=Object(v.h)({addAttachmentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-label",defaultMessage:"Add attachment"},createSubtaskTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-label",defaultMessage:"Create subtask"},addIssueLinkTooltip:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-label",defaultMessage:"Link issue"},createChildTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-label",defaultMessage:"Add a child issue"},linkConfluencePageTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-label",defaultMessage:"Link a Confluence page"},createIssueInEpicTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-label",defaultMessage:"Create issue in epic"},addAttachmentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-button-label",defaultMessage:"Attach"},createSubtaskLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-button-label",defaultMessage:"Create subtask"},addIssueLinkLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-button-label",defaultMessage:"Link issue"},createChildLabel:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-button-label",defaultMessage:"Add a child issue"},linkConfluencePageLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-button-label",defaultMessage:"Link Confluence page"},createIssueInEpicLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-button-label",defaultMessage:"Create issue in epic"},linkAlertsLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-alerts-label",defaultMessage:"Link alerts"},linkAlertsTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-alerts-tooltip",defaultMessage:"Link alerts"},linkIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-label",defaultMessage:"Link major incident"},linkIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-tooltip",defaultMessage:"Link major incident"},createIncidentLabel:{
id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-label",defaultMessage:"Create major incident"},createIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-tooltip",defaultMessage:"Create major incident"},addWebLinkLabel:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-label",defaultMessage:"Add web link"},addWebLinkTooltip:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-tooltip",defaultMessage:"Link web pages and more"},linkDropdownButtonLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-label",defaultMessage:"Link web pages and more"},linkDropdownButtonCompactLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-compact-label",defaultMessage:"Link issues, web pages, and more"}})
;const jL=Y.default.div(["margin-bottom:","px;padding:","px 0;display:inline-flex;"],Q.e/2,Q.e/2),vL=Y.default.img(["height:","px;width:","px;"],3*Q.e,3*Q.e),EL=e=>!!e&&e.alertLinking.enabled;var kL=e=>{const{formatMessage:t,canCreateAttachment:s,shouldShowCreateSubtaskButton:n,shouldShowIssueInEpicButton:a,canCreateIssueLink:r,onAddAttachmentClick:o,onCreateSubtaskClick:c,onCreateIssueInEpicClick:l,onChildCreateClick:u,supportsChildCreation:d,isServiceDesk:p,canLinkConfluencePage:m,onLinkConfluencePageClick:b,onCreateMajorIncidentClick:f,incidentLinking:g,incidentEscalate:h,incidentManagement:y,onLinkIncidentClick:O,onLinkAlertsClick:j,canAddWebLinks:v,onAddWebLinkClick:E,onAddIssueLinkClick:k}=e,w=[{id:"attachment",tooltip:t(OL.addAttachmentTooltip),label:t(OL.addAttachmentLabel),icon:i.a.createElement(aL.a,{size:"medium",label:""}),onClick:o,itemIndex:0,shouldRender:!p&&s,testId:""},{id:"create-subtask",tooltip:t(OL.createSubtaskTooltip),label:t(OL.createSubtaskLabel),
icon:i.a.createElement(bL.a,{size:"medium",label:""}),onClick:c,itemIndex:1,shouldRender:n,testId:""},{id:"create-issue-in-epic",tooltip:t(OL.createIssueInEpicTooltip),label:t(OL.createIssueInEpicLabel),icon:i.a.createElement(rL.a,{size:"medium",label:""}),onClick:l,itemIndex:1,shouldRender:a,testId:""},{id:"create-child",tooltip:t(OL.createChildTooltip),label:t(OL.createChildLabel),icon:i.a.createElement(rL.a,{size:"medium",label:""}),onClick:u,itemIndex:1,shouldRender:d,testId:""},{id:"create-incident",tooltip:t(OL.createIncidentTooltip),label:t(OL.createIncidentLabel),icon:i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae.d,{eventName:"escalateMajorIncidentButton viewed",componentName:"BentoQuickAddItems"}),i.a.createElement(vL,{src:gL.a})),onClick:f,itemIndex:3,shouldRender:!!h,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.create-incident",hasGlobalSpotlightTarget:!0}],S=[{id:"issue-links",tooltip:t(OL.addIssueLinkTooltip),
label:t(OL.addIssueLinkLabel),icon:i.a.createElement(cL.a,{size:"medium",label:""}),onClick:k,itemIndex:2,shouldRender:r,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-issue"},{id:"link-confluence-page",tooltip:t(OL.linkConfluencePageTooltip),label:t(OL.linkConfluencePageLabel),icon:i.a.createElement(pL.a,{size:"medium",label:""}),onClick:b,itemIndex:3,shouldRender:m,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-page"},{id:"link-incident",tooltip:t(OL.linkIncidentTooltip),label:t(OL.linkIncidentLabel),icon:i.a.createElement(vL,{src:yL.a}),onClick:O,itemIndex:3,shouldRender:!!g,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-incident"},{id:"link-alerts",tooltip:t(OL.linkAlertsTooltip),label:t(OL.linkAlertsLabel),icon:i.a.createElement(uL.a,{size:"medium",label:""}),onClick:j||(()=>{}),itemIndex:3,shouldRender:EL(y),
testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-alerts"},{id:"add-web-link",tooltip:t(OL.addWebLinkTooltip),label:t(OL.addWebLinkLabel),icon:i.a.createElement(lP.a,{size:"medium",label:""}),onClick:E,itemIndex:3,shouldRender:v,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-web"}];return{issueActions:w.filter((e=>e.shouldRender)),linkingActions:S.filter((e=>e.shouldRender))}};function wL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function SL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wL(Object(s),!0).forEach((function(t){CL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wL(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function CL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const IL=()=>i.a.createElement(rA,null);IL.displayName="renderSkeleton";const TL=e=>{var t;const[s,n]=Object(a.useState)(!1),{formatMessage:r}=Object(xe.c)(),{fetchConfluenceAppLinks:o,triggerButtonClickAnalytics:c,onSelectContentPanel:l,onAddExtension:u,issueKey:d,containerWidth:p,locale:m}=e,b=Object(a.useRef)(0),f=Object(a.useRef)(null),g=Object(a.useCallback)((()=>f.current?f.current.clientWidth:0),[]),h=Object(a.useCallback)((()=>(b.current<g()&&(b.current=g()),b.current)),[g]),y=Object(a.useCallback)((()=>{const e=!p||p<=h();s!==e&&n(e)}),[p,h,s]),[,{openLinkAlertsModal:O}]=Object(F.isJsmLinkedAlertsEnabled)()?Object(QD.e)():[void 0,{}];Object(a.useMemo)((()=>{y()}),[y]),Object(a.useEffect)((()=>{o()}),[o,d]),Object(a.useEffect)((()=>{y()}),[p,y]);const j=Object(a.useCallback)((e=>{
f.current=e,y()}),[y]),v=Object(a.useCallback)(((e,t,s)=>()=>{s(),c(e,t,4)}),[c]),E=Object(a.useCallback)((e=>{const{id:t,tooltip:n,label:a,icon:r,onClick:o,itemIndex:c,testId:l,hasGlobalSpotlightTarget:u}=e;return i.a.createElement(je.a,{content:n,position:"bottom",key:t},i.a.createElement(qA,{key:t,id:t,icon:r,onClick:v(t,c,o),label:a,compactMode:s,testId:l,hasGlobalSpotlightTarget:u}))}),[v,s]),k=Object(Ga.i)(d),[{canEditIssues:w}]=Object(Vu.d)(k),[S]=(({issueKey:e})=>Object(xl.b)({issueKey:e,fieldKey:"servicedesk-practices"}))({issueKey:d}),C=!!Object(F.isJsmChangeVisibilityM2Enabled)()&&(w&&null!==(t=null==S?void 0:S.some((e=>e===JD.a)))&&void 0!==t&&t),I=Object(a.useCallback)((()=>{const{issueActions:t,linkingActions:n}=kL(SL(SL({},e),{},{formatMessage:r,onLinkAlertsClick:O})),a=t.map(E),o=s?OL.linkDropdownButtonCompactLabel:OL.linkDropdownButtonLabel,d=r(o),p=i.a.createElement(WA,{key:"quick-add-web-link-button",compactMode:s,actions:n,tooltipLabel:d
}),m=[C&&i.a.createElement(sL,{key:"schedule-change",createItemView:E})].filter(Boolean),b=i.a.createElement(wA,{key:"quick-add-content-panel",externalId:"issue.ecosystem.quick-add-content-panel",onSelectContentPanel:e=>{l(e),c("select_contentpanel",3,4)},onAddExtension:e=>{u(e),c("add_contentpanel",3,4)},createItemView:E,startIndex:a.length});return[...a,p,...m,b]}),[E,r,u,O,l,e,C,s,c]);if(e.isPreview)return IL();const T=I();return i.a.createElement(R.a,{id:"jira.issuebase.quickadditems"},i.a.createElement(Dr.a,{name:"QUICK_ADDS"},T.length?i.a.createElement(ZD.a,{modules:[Object(XD.a)(m)]},(()=>i.a.createElement(jL,{innerRef:j},T))):i.a.createElement("div",null)))};function PL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function _L(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?PL(Object(s),!0).forEach((function(t){xL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):PL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function xL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}TL.displayName="QuickAddItems",TL.defaultProps={canCreateIssueLink:!1,canCreateAttachment:!1,canLinkConfluencePage:!1,canAddWebLinks:!1,triggerButtonClickAnalytics:c.a};const DL=e=>({onAddAttachmentClick:()=>{e(Object(Ms.b)())},onCreateSubtaskClick:()=>{e(xO())},onCreateIssueInEpicClick:()=>{e(DO())},onAddIssueLinkClick:()=>{Object(or.c)().markStartOfInteraction({key:Br.a.ISSUE_LINKS.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT,cancelExisting:!0}),e(Object(_C.a)())},onChildCreateClick:()=>{e(AO())},onLinkConfluencePageClick:()=>{e(Object(WD.h)())},onLinkIncidentClick:()=>{e(PT())},onCreateMajorIncidentClick:()=>{
e(_T())},onAddWebLinkClick:()=>{e(Object(sP.k)())}});var AL=at()(qD({fieldKey:"servicedesk-incident-linking",propName:"incidentEscalate"}),qD({fieldKey:"servicedesk-incident-linking",propName:"incidentLinking"}),qD({fieldKey:"servicedesk-incident-management",propName:"incidentManagement",isEnabled:()=>Object(F.isJsmLinkedAlertsEnabled)()}),Object(r.connect)((e=>_L(_L({},YD(e)),{},{isPreview:Object(P.s)(e),locale:Object(T.z)(e),projectType:Object(P.F)(e),issueKey:Object(T.x)(e)})),(e=>_L(_L({},DL(e)),{},{onAddExtension:t=>{e(Object(eg.b)(t))},onSelectContentPanel:t=>{e(Object(eg.d)(t))},fetchConfluenceAppLinks:()=>{e(Object(BD.a)())}}))),Object(fs.a)((e=>({triggerButtonClickAnalytics:(t,s,n)=>e(`${t}.click`,{index:s,actions:n})
}))),Aa.a)(TL),LL=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-create-icon.svg"),ML=s.n(LL),RL=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/quick-add/quick-add-items-old/assets/incident-icon.svg"),NL=s.n(RL),FL=Object(v.h)({addAttachmentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-label",defaultMessage:"Add attachment"},createSubtaskTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-label",defaultMessage:"Create subtask"},addIssueLinkTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-label",defaultMessage:"Link issue"},createChildTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-label",defaultMessage:"Add a child issue"},linkConfluencePageTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-label",defaultMessage:"Link a Confluence page"
},createIssueInEpicTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-label",defaultMessage:"Create issue in epic"},addAttachmentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-attachment-button-label",defaultMessage:"Attach"},createSubtaskLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-subtask-button-label",defaultMessage:"Create subtask"},addIssueLinkLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.add-issue-link-button-label",defaultMessage:"Link issue"},createChildLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-child-button-label",defaultMessage:"Add a child issue"},linkConfluencePageLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-confluence-page-button-label",defaultMessage:"Link Confluence page"},createIssueInEpicLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-issue-in-epic-button-label",
defaultMessage:"Create issue in epic"},linkAlertsLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-alerts-label",defaultMessage:"Link alerts"},linkAlertsTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-alerts-tooltip",defaultMessage:"Link alerts"},linkIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-label",defaultMessage:"Link major incident"},linkIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.link-incident-tooltip",defaultMessage:"Link major incident"},createIncidentLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-label",defaultMessage:"Create major incident"},createIncidentTooltip:{id:"issue.issue-base.foundation.quick-add.quick-add-items.create-incident-tooltip",defaultMessage:"Create major incident"},addWebLinkLabel:{id:"issue.foundation.quick-add.quick-add-items.add-web-link-label",defaultMessage:"Add web link"},addWebLinkTooltip:{
id:"issue.foundation.quick-add.quick-add-items.add-web-link-tooltip",defaultMessage:"Link web pages and more"},linkDropdownButtonLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-label",defaultMessage:"Link web pages and more"},linkDropdownButtonCompactLabel:{id:"issue.issue-base.foundation.quick-add.quick-add-items.web-link-dropdown-compact-label",defaultMessage:"Link issues, web pages, and more"}});const UL=Y.default.div(["margin-bottom:","px;padding:","px 0;display:inline-flex;"],Q.e/2,Q.e/2),VL=Y.default.img(["height:","px;width:","px;"],3*Q.e,3*Q.e);class KL extends a.Component{constructor(...e){super(...e),this.state={shouldUseCompactButtons:!1},this.componentDidMount=()=>{this.props.fetchConfluenceAppLinks(),this.setShouldUseCompactButtons()},this.componentDidUpdate=()=>{this.setShouldUseCompactButtons()},this.setQuickAddRef=e=>{this.quickAddRef=e},this.setShouldUseCompactButtons=()=>{
const e=!this.props.containerWidth||this.props.containerWidth<=this.updateAndGetQuickAddExpandedWidth();this.state.shouldUseCompactButtons!==e&&this.setState({shouldUseCompactButtons:e})},this.getQuickAddRefClientWidth=()=>this.quickAddRef?this.quickAddRef.clientWidth:0,this.updateAndGetQuickAddExpandedWidth=()=>(this.quickAddExpandedWidth<this.getQuickAddRefClientWidth()&&(this.quickAddExpandedWidth=this.getQuickAddRefClientWidth()),this.quickAddExpandedWidth),this.quickAddExpandedWidth=0,this.quickAddRef=void 0,this.sendAnalyticsEventFunc=(e,t,s)=>()=>{s(),this.props.triggerButtonClickAnalytics(e,t,4)},this.createItemView=e=>{const{id:t,tooltip:s,label:n,icon:a,onClick:r,itemIndex:o,testId:c,hasGlobalSpotlightTarget:l}=e;return i.a.createElement(je.a,{content:s,position:"bottom",key:t},i.a.createElement(qA,{key:t,id:t,icon:a,onClick:this.sendAnalyticsEventFunc(t,o,r),label:n,compactMode:this.state.shouldUseCompactButtons,testId:c,hasGlobalSpotlightTarget:l}))},
this.renderSkeleton=()=>i.a.createElement(rA,null),this.onAddIssueLinkClick=()=>{Object(or.c)().markStartOfInteraction({key:Br.a.ISSUE_LINKS.TIME_TO_RENDER_NEW_LINKED_ISSUE_INPUT,cancelExisting:!0}),this.props.onAddIssueLinkClick()},this.getQuickAddActionData=e=>{var t;const{intl:s,canCreateAttachment:n,shouldShowCreateSubtaskButton:a,shouldShowIssueInEpicButton:r,canCreateIssueLink:o,onAddAttachmentClick:c,onCreateSubtaskClick:l,onCreateIssueInEpicClick:u,onChildCreateClick:d,supportsChildCreation:p,isServiceDesk:m,canLinkConfluencePage:b,onLinkConfluencePageClick:f,onCreateMajorIncidentClick:g,incidentLinking:h,incidentEscalate:y,incidentManagement:O,onLinkIncidentClick:j,canAddWebLinks:v,onAddWebLinkClick:E,canEditIssues:k,practices:w}=this.props,S=[{id:"attachment",tooltip:s.formatMessage(FL.addAttachmentTooltip),label:s.formatMessage(FL.addAttachmentLabel),icon:i.a.createElement(aL.a,{size:"medium",label:""}),onClick:c,itemIndex:0,shouldRender:!m&&n,testId:""},{
id:"create-subtask",tooltip:s.formatMessage(FL.createSubtaskTooltip),label:s.formatMessage(FL.createSubtaskLabel),icon:i.a.createElement(bL.a,{size:"medium",label:""}),onClick:l,itemIndex:1,shouldRender:a,testId:""},{id:"create-issue-in-epic",tooltip:s.formatMessage(FL.createIssueInEpicTooltip),label:s.formatMessage(FL.createIssueInEpicLabel),icon:i.a.createElement(rL.a,{size:"medium",label:""}),onClick:u,itemIndex:1,shouldRender:r,testId:""},{id:"create-child",tooltip:s.formatMessage(FL.createChildTooltip),label:s.formatMessage(FL.createChildLabel),icon:i.a.createElement(rL.a,{size:"medium",label:""}),onClick:d,itemIndex:1,shouldRender:p,testId:""},{id:"create-incident",tooltip:s.formatMessage(FL.createIncidentTooltip),label:s.formatMessage(FL.createIncidentLabel),icon:i.a.createElement(i.a.Fragment,null,i.a.createElement(Ae.d,{eventName:"escalateMajorIncidentButton viewed",componentName:"BentoQuickAddItems"}),i.a.createElement(VL,{src:ML.a})),onClick:g,itemIndex:3,shouldRender:!!y,
testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.create-incident",hasGlobalSpotlightTarget:!0}].filter((e=>e.shouldRender)).map(this.createItemView),C=[{id:"issue-links",tooltip:s.formatMessage(FL.addIssueLinkTooltip),label:s.formatMessage(FL.addIssueLinkLabel),icon:i.a.createElement(cL.a,{size:"medium",label:""}),onClick:this.onAddIssueLinkClick,itemIndex:2,shouldRender:o,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-issue"},{id:"link-confluence-page",tooltip:s.formatMessage(FL.linkConfluencePageTooltip),label:s.formatMessage(FL.linkConfluencePageLabel),icon:i.a.createElement(pL.a,{size:"medium",label:""}),onClick:f,itemIndex:3,shouldRender:b,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-page"},{id:"link-incident",tooltip:s.formatMessage(FL.linkIncidentTooltip),label:s.formatMessage(FL.linkIncidentLabel),icon:i.a.createElement(VL,{src:NL.a}),onClick:j,itemIndex:3,shouldRender:!!h,
testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-incident"},{id:"link-alerts",tooltip:s.formatMessage(FL.linkAlertsTooltip),label:s.formatMessage(FL.linkAlertsLabel),icon:i.a.createElement(uL.a,{size:"medium",label:""}),onClick:e||(()=>{}),itemIndex:3,shouldRender:EL(O),testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-alerts"},{id:"add-web-link",tooltip:s.formatMessage(FL.addWebLinkTooltip),label:s.formatMessage(FL.addWebLinkLabel),icon:i.a.createElement(lP.a,{size:"medium",label:""}),onClick:E,itemIndex:3,shouldRender:v,testId:"issue.issue-view.views.issue-base.foundation.quick-add.quick-add-item.link-web"}].filter((e=>e.shouldRender)),{shouldUseCompactButtons:I}=this.state,T=I?FL.linkDropdownButtonCompactLabel:FL.linkDropdownButtonLabel,P=s.formatMessage(T),_=i.a.createElement(WA,{key:"quick-add-web-link-button",compactMode:I,actions:C,tooltipLabel:P
}),x=[!!Object(F.isJsmChangeVisibilityM2Enabled)()&&(k&&null!==(t=null==w?void 0:w.some((e=>e===JD.a)))&&void 0!==t&&t)&&i.a.createElement(sL,{key:"schedule-change",createItemView:this.createItemView})].filter(Boolean),D=i.a.createElement(wA,{key:"quick-add-content-panel",externalId:"issue.ecosystem.quick-add-content-panel",onSelectContentPanel:e=>{this.props.onSelectContentPanel(e),this.props.triggerButtonClickAnalytics("select_contentpanel",3,4)},onAddExtension:e=>{this.props.onAddExtension(e),this.props.triggerButtonClickAnalytics("add_contentpanel",3,4)},createItemView:this.createItemView,startIndex:S.length});return[...S,_,...x,D]}}render(){if(this.props.isPreview)return this.renderSkeleton();const{locale:e}=this.props,t=this.getQuickAddActionData();return Object(F.isJsmLinkedAlertsEnabled)()?i.a.createElement(Dr.a,{name:"QUICK_ADDS"},t.length?i.a.createElement(ZD.a,{modules:[Object(XD.a)(e)]},(()=>i.a.createElement(QD.b,null,((e,{openLinkAlertsModal:t})=>i.a.createElement(UL,{
innerRef:this.setQuickAddRef},this.getQuickAddActionData(t)))))):i.a.createElement("div",null)):i.a.createElement(Dr.a,{name:"QUICK_ADDS"},t.length?i.a.createElement(ZD.a,{modules:[Object(XD.a)(e)]},(()=>i.a.createElement(UL,{innerRef:this.setQuickAddRef},t))):i.a.createElement("div",null))}}KL.displayName="UnsafeQuickAddItems",KL.displayName="QuickAddItems",KL.defaultProps={canCreateIssueLink:!1,canCreateSubtask:!1,canCreateAttachment:!1,canLinkConfluencePage:!1,canAddWebLinks:!1,canEditIssues:!1,triggerButtonClickAnalytics:c.a};const WL=Object(v.i)(Object(js.a)()(KL));var BL=at()(qD({fieldKey:"servicedesk-incident-linking",propName:"incidentEscalate"}),qD({fieldKey:"servicedesk-incident-linking",propName:"incidentLinking"}),qD({fieldKey:"servicedesk-practices",propName:"practices"}),qD({fieldKey:"servicedesk-incident-management",propName:"incidentManagement",isEnabled:()=>Object(F.isJsmLinkedAlertsEnabled)()}),Object(r.connect)((e=>{
const t=Object(qT.a)(e),s=yC(e),n=Object(zt.k)(e),a=Object(P.q)(e),i=s&&!n&&a,r=t&&!n&&!i;return{locale:Object(T.z)(e),canCreateAttachment:Object(rO.b)(e),canEditIssues:Object(RC.c)(e),shouldShowCreateSubtaskButton:r,shouldShowIssueInEpicButton:i,supportsChildCreation:n,canCreateIssueLink:Object(AC.a)(e),isPreview:Object(P.s)(e),isServiceDesk:Object(T.s)(e),canLinkConfluencePage:Object(zD.a)(e),canAddWebLinks:Object(nP.a)(e),projectType:Object(P.F)(e),issueKey:Object(T.x)(e)}}),(e=>({fetchConfluenceAppLinks:()=>e(Object(BD.a)()),onAddAttachmentClick:()=>e(Object(Ms.b)()),onCreateSubtaskClick:()=>e(xO()),onCreateIssueInEpicClick:()=>e(DO()),onAddIssueLinkClick:()=>e(Object(_C.a)()),onChildCreateClick:()=>e(AO()),onLinkConfluencePageClick:()=>e(Object(WD.h)()),onLinkIncidentClick:()=>e(PT()),onCreateMajorIncidentClick:()=>e(_T()),onAddWebLinkClick:()=>e(Object(sP.k)()),onAddExtension:t=>e(Object(eg.b)(t)),onSelectContentPanel:t=>e(Object(eg.d)(t))}))),Object(fs.a)((e=>({
triggerButtonClickAnalytics:(t,s,n)=>e(`${t}.click`,{index:s,actions:n})}))),Aa.a)(WL),HL=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js"),$L=s("./src/packages/issue/issue-view/src/views/issue-details/issue-layout/styled.js");function GL(){return(GL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function qL(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function zL(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){
return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function YL(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?zL(Object(s),!0).forEach((function(t){QL(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):zL(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function QL(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const JL="QUICK_ADD_ITEMS",ZL="CONTEXT_ITEMS",XL="issue.context-items",eM="META_CONTAINER",tM="CONTENT_ITEMS",sM="ACTIVITY_FEED",nM="issue.activity-feed",aM="issue.glance-panel",iM="CONFIGURE_FIELDS";class rM extends a.Component{constructor(e){super(e),this.setSidePanelContainer=e=>{e&&this.setState((t=>({refs:YL(YL({},t.refs),{},{refSidePanelContainerElement:this.props.isMobile&&this.props.isCompact?document.body:e})})))},
this.setLayoutContainer=e=>{e&&this.setState((t=>({refs:YL(YL({},t.refs),{},{refLayoutContainer:e})})))},this.setPanelColumn=e=>{e&&this.setState((t=>({refs:YL(YL({},t.refs),{},{refPanelColumnElement:e})})))},this.setVisibilityContainer=e=>{e&&this.setState((t=>({refs:YL(YL({},t.refs),{},{refVisibilityContainer:e}),contextWidth:e.offsetWidth})))},this.getPassedDownRefs=()=>this.state.refs,this.shouldRenderHeaderFF=()=>this.props.shouldRenderHeader,this.renderContextItems=()=>i.a.createElement($L.a,{key:ZL},i.a.createElement(Ix,{externalId:XL})),this.renderFullSizeLayoutSideContent=()=>i.a.createElement($L.h,{innerRef:this.setVisibilityContainer,show:this.props.arePanelsClosed,key:"sideContentWrapper"},i.a.createElement(tm,null),Object(F.isTemplatedBaseContextEnabled)()?i.a.createElement(nm,{key:ZL,externalId:XL}):i.a.createElement(Ix,{forgeExtensions:this.props.forgeExtensions,key:ZL,externalId:XL}),i.a.createElement($L.b,{
"data-test-id":"issue.views.issue-details.issue-layout.footnote"},i.a.createElement(KD,{key:eM}),i.a.createElement(fD,{key:iM}))),this.renderCompactHeader=()=>this.shouldRenderHeaderFF()?i.a.createElement(HL.a,{key:"SPLIT_HEADER",elementId:"jira-issue-header"},i.a.createElement(gD.a,{shouldShowCloseButton:this.props.shouldShowCloseButton,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowRootProjectsBreadcrumb,issueDeleteCallbacks:this.props.issueDeleteCallbacks,renderFeedback:this.props.renderFeedback,viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose})):null,this.renderHeaderBreadcrumbs=()=>this.shouldRenderHeaderFF()?i.a.createElement(HL.a,{elementId:"jira-issue-header"},i.a.createElement(hD.a,{shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowRootProjectsBreadcrumb,isCompact:this.props.isCompact})):null,
this.renderHeaderActions=()=>this.shouldRenderHeaderFF()?i.a.createElement(HL.a,{elementId:"jira-issue-header-actions",customStyles:"margin-right: -7px"},i.a.createElement(ia.a,{renderFeedback:this.props.renderFeedback,issueDeleteCallbacks:this.props.issueDeleteCallbacks,viewModeOptions:this.props.viewModeOptions,onClose:this.props.onClose,shouldShowCloseButton:this.props.shouldShowCloseButton})):null,this.renderFullSizeLayout=()=>{const e=$L.d,t=$L.c;return i.a.createElement(us.a,{hasMultipleScrollingColumns:!0},i.a.createElement(e,{issueMaxWidth:this.props.issueMaxWidth,medium:6,isLeftmost:!0},i.a.createElement(t,{isLeftmost:!0,issueMaxWidth:this.props.issueMaxWidth,"data-test-id":"issue.views.issue-details.issue-layout.left-most-column"},this.renderHeaderBreadcrumbs(),i.a.createElement(em,null),Object(F.isShortcutMenuEnabled)()?i.a.createElement(AL,{key:JL,externalId:"issue.quick-add"}):i.a.createElement(BL,{key:JL,externalId:"issue.quick-add"}),i.a.createElement(p_,{key:tM,
isCompactMode:!1}),i.a.createElement(bc,{key:sM,externalId:nM}))),i.a.createElement(e,{medium:4,issueMaxWidth:this.props.issueMaxWidth,isRightmost:!0,scrollHidden:!this.props.arePanelsClosed,innerRef:this.setSidePanelContainer},i.a.createElement(t,{isRightmost:!0,innerRef:this.setPanelColumn,issueMaxWidth:this.props.issueMaxWidth,"data-test-id":"issue.views.issue-details.issue-layout.right-most-column"},this.renderHeaderActions(),this.renderFullSizeLayoutSideContent())))},this.renderCompactLayoutItems=()=>[i.a.createElement(em,{key:"FOUNDATION_CONTENT"}),i.a.createElement(AL,{key:JL,externalId:"issue.quick-add"}),i.a.createElement(tm,{key:"FOUNDATION_CONTEXT"}),i.a.createElement(p_,{key:tM,isCompactMode:!0}),Object(F.isTemplatedBaseContextEnabled)()?i.a.createElement($L.a,{key:ZL},i.a.createElement(nm,{externalId:XL})):this.renderContextItems(),i.a.createElement($L.b,{"data-test-id":"issue.views.issue-details.issue-layout.footnote",key:"FOOTNOTE_WRAPPER_KEY"},i.a.createElement(KD,{
key:eM}),i.a.createElement(fD,{key:iM})),i.a.createElement(bc,{key:sM,externalId:nM})],this.renderCompactLayout=()=>i.a.createElement($L.f,{scrollHidden:!this.props.arePanelsClosed,innerRef:this.setSidePanelContainer},i.a.createElement($L.e,{issueMaxWidth:this.props.issueMaxWidth,innerRef:this.setPanelColumn},this.renderCompactHeader(),i.a.createElement($L.h,{innerRef:this.setVisibilityContainer,show:this.props.arePanelsClosed,key:"sideContentWrapper"},i.a.createElement(us.a,{isCompact:!0},i.a.createElement(d.a,null,this.renderCompactLayoutItems()))))),this.state={contextWidth:0,refs:{refVisibilityContainer:null,refSidePanelContainerElement:null,refPanelColumnElement:null,refLayoutContainer:null}}}shouldComponentUpdate(e,t){return this.didPropsChange(e)||this.didStateChange(t)}didStateChange(e){const t=this.state,{refs:s}=t,n=qL(t,["refs"]),{refs:a}=e,i=qL(e,["refs"]);return(!this.props.arePanelsClosed||!Da()(n,i))&&!Da()(this.state,e)}didPropsChange(e){return!Da()(this.props,e)}
renderConnectGlancePanels(){return this.props.glances.map((e=>i.a.createElement(cD,{key:`connectGlanceAnimatedPanel-${e.appKey}__${e.moduleKey}`,glance:e,openedGlance:this.props.openedGlance,externalId:aM,glanceType:"CONNECT_ENTITY_TYPE",refs:this.getPassedDownRefs(),isCompact:this.props.isCompact})))}renderGlancePanels(){return this.props.glances.map((e=>i.a.createElement(cD,{key:`connectGlanceAnimatedPanel-${e.appKey}__${e.moduleKey}`,glance:e,openedGlance:this.props.openedGlance,externalId:aM,refs:this.getPassedDownRefs(),isCompact:this.props.isCompact})))}renderContextPanel(){return i.a.createElement(Yx,{key:"context-panel",refs:this.getPassedDownRefs(),isCompact:this.props.isCompact})}render(){const e=this.props.isCompact?this.renderCompactLayout():this.renderFullSizeLayout();return i.a.createElement($L.g,{innerRef:this.setLayoutContainer,"data-test-id":"issue.views.issue-details.issue-layout.issue-layout"},e,this.renderGlancePanels(),this.renderContextPanel())}}
rM.displayName="IssueLayout",rM.displayName="IssueLayout",rM.defaultProps={isCompact:!1,shouldRenderHeader:!1,openedGlance:null,forgeExtensions:[],glances:[]};const oM=e=>{const t=Object(Us.g)(),[s]=Object(fc.b)(t),[n]=Object(fc.c)(t);return i.a.createElement(rM,GL({},e,{arePanelsClosed:void 0===s&&void 0===n,openedGlance:n}))};oM.displayName="IssueLayoutWithIssueLayoutState";var cM=Object(r.connect)((e=>({glances:Object(Rn.i)(e),openedGlance:Object(im.a)(e),arePanelsClosed:!Object(im.a)(e)&&!Object(am.b)(e),shouldRenderHeader:Object(T.G)(e),isMobile:Object(T.r)(e)})),{})(oM)
;const lM=Y.default.div(["height:100%;",";"],(({isDropzoneFeedbackEnabled:e})=>e?"position: relative":"")),uM=Y.default.div(["position:absolute;height:100%;box-sizing:border-box;width:100%;",""],(({attachmentHover:e})=>e?"\n                    border: 2px dashed #2684FF\n                    background: #deebff;\n                    mix-blend-mode: normal;\n                    opacity: 0.54;\n                    z-index: 100;\n                ":"border: 2px dashed transparent"));var dM=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/keyboard-shortcuts/shortcuts/index.js"),pM=s("./src/packages/shortcuts-dialog/src/controllers/shortcuts-service/main.js"),mM=s("./src/packages/issue/issue-view/src/actions/external-actions.js");const bM=Object(v.h)({nextIssue:{id:"issue.shortcuts.navigatingIssues.nextIssue",defaultMessage:"Next issue"},previousIssue:{id:"issue.shortcuts.navigatingIssues.previousIssue",defaultMessage:"Previous issue"},nextActivity:{
id:"issue.shortcuts.navigatingIssues.nextActivity",defaultMessage:"Next activity"},previousActivity:{id:"issue.shortcuts.navigatingIssues.previousActivity",defaultMessage:"Previous activity"},editAssignee:{id:"issue.shortcuts.editAssignee",defaultMessage:"Edit assignee"},commentOnIssue:{id:"issue.shortcuts.commentOnIssue",defaultMessage:"Comment on issue"},editLabels:{id:"issue.shortcuts.editLabels",defaultMessage:"Edit labels"},assignToMe:{id:"issue.shorctus.assignToMe",defaultMessage:"Assign to me"},openShortcutDialog:{id:"issue.shorctus.openShortcutDialog",defaultMessage:"Open shortcut dialog"}});function fM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function gM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?fM(Object(s),!0).forEach((function(t){hM(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):fM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function hM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var yM=e=>Object(a.useMemo)((()=>({a:{callback:()=>{Object(or.c)().markStartOfInteraction({key:Br.a.ASSIGNEE.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0,collectors:[e=>gM(gM({},e),{},{viaShortcut:1})]});const t=Object(mM.d)(Object(mM.c)("assignee"));e(t,"assignIssue","a")},label:i.a.createElement(v.c,bM.editAssignee),priority:999},i:{callback:()=>{Object(or.c)().markStartOfInteraction({key:Br.a.ASSIGNEE.TIME_TO_ASSIGN_TO_ME_VIA_SHORTCUT,cancelExisting:!0});const t=Object(mM.d)(Object(mM.b)());e(t,"assignToMe","i")},label:i.a.createElement(v.c,bM.assignToMe),priority:999},l:{callback:()=>{Object(or.c)().markStartOfInteraction({
key:Br.a.LABELS.TIME_TO_RENDER_INITIAL_SUGGESTIONS,cancelExisting:!0});const t=Object(mM.d)(Object(mM.c)("labels"));e(t,"editLabels","l")},label:i.a.createElement(v.c,bM.editLabels),priority:999},m:{callback:()=>{Object(or.c)().markStartOfInteraction({key:Br.a.COMMENTS.TIME_TO_RENDER_NEW_COMMENT_EDITOR,cancelExisting:!0});const t=Object(mM.d)(Object(mM.a)());e(t,"commentIssue","m")},label:i.a.createElement(v.c,bM.commentOnIssue),priority:999}})),[e]);var OM=e=>Object(a.useMemo)((()=>Object(F.isShortcutMenuEnabled)()?{".":{callback:()=>{e("triggerShortcutDialogOpen",".")},label:i.a.createElement(v.c,bM.openShortcutDialog),priority:999}}:{}),[e]);const jM=(e,t)=>{const s=e.find((e=>e.length));return s&&(s[t]||s[s.length-1])},vM=(e,t)=>{const s=e.find((e=>e.includes(t)))||[],n=s.indexOf(t);return[s,n]},EM=(e,t)=>{const s=e.findIndex((e=>e.includes(t)));return[s,e[s].indexOf(t)]};var kM=e=>{const t=Object(Us.g)(),s=Object(Us.k)();return Object(a.useMemo)((()=>s?{j:{callback:()=>{
e(((e,t)=>{if(!e)return t;const[s,n]=vM(e,t);return s[n+1]||t})(s,t))},label:i.a.createElement(v.c,bM.nextIssue),priority:999},k:{callback:()=>{e(((e,t)=>{if(!e)return t;const[s,n]=vM(e,t);return s[n-1]||t})(s,t))},label:i.a.createElement(v.c,bM.previousIssue),priority:999},n:{callback:()=>{e(((e,t)=>{if(!e)return t;const[s,n]=EM(e,t),a=e.slice(s+1);return jM(a,n)||t})(s,t))},label:i.a.createElement(v.c,bM.nextActivity),priority:999},p:{callback:()=>{e(((e,t)=>{if(!e)return t;const[s,n]=EM(e,t),a=e.slice(0,s).reverse();return jM(a,n)||t})(s,t))},label:i.a.createElement(v.c,bM.previousActivity),priority:999}}:{}),[t,e,s])};function wM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function SM(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?wM(Object(s),!0).forEach((function(t){CM(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):wM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function CM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const IM=e=>{const{dispatch:t}=e,s=Object(Us.g)(),{createAnalyticsEvent:n}=Object(si.a)(),[,{setShortcutsDialogVisibility:r}]=Object(pM.b)(),o=Object(a.useCallback)(((e,s,a)=>{setTimeout((()=>t(e)),0),Object(Wa.h)(n({}),"keyboardShortcut pressed",`${s}KeyboardShortcut`,{key:a})}),[n,t]),c=Object(a.useCallback)(((e,t)=>{requestAnimationFrame((()=>r(!0))),Object(Wa.h)(n({}),"keyboardShortcut pressed",`${e}KeyboardShortcut`,{key:t}),Object(Wa.h)(n({}),"keyboardShortcut pressed","dotDialogKeyboardShortcut",{key:t})}),[n,r]),l=Object(a.useCallback)((e=>{e!==s&&t(Object(RO.c)({fromIssueKey:s,toIssueKey:e}))
}),[t,s]),u=yM(o),d=OM(c),p=kM(l),m=Object(a.useMemo)((()=>SM(SM(SM({},u),p),d)),[p,u,d]);return i.a.createElement(dM.a,{keyMap:m})};IM.displayName="KeyboardShortcutsView";var TM=Object(a.memo)(IM),PM=Object(r.connect)(null,(e=>({dispatch:e})))((e=>i.a.createElement(R.a,{id:"keyboard-shortcuts",packageName:"issue-view"},i.a.createElement(TM,e)))),_M=s("./src/packages/issue/issue-view/src/issue-field/state/selectors/parent-issue-selector.js"),xM=s("./src/packages/issue/fields/status/src/services/use-status-service/main.js"),DM=s("./src/packages/issue/fields/status/src/services/status-transitions-service/main.js"),AM=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/add-to-issue-dropdown-group/main.js"),LM=s("./src/packages/issue/issue-view/src/views/issue-base/foundation/issue-actions/issue-manipulation-dropdown-group/main.js"),MM=Object(v.h)({issueActionsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.issue-actions-section-label",
defaultMessage:"Issue Actions"},issueWorkflowsSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.issue-workflows-section-label",defaultMessage:"Workflow"},issueAdminSectionLabel:{id:"issue.issue-view.issue-details.register-shortcuts.issue-admin-section-label",defaultMessage:"Admin"},issueActionComment:{id:"issue.issue-view.issue-details.register-shortcuts.issue-action-comment",defaultMessage:"Comment"},issueActionAssignToMe:{id:"issue.issue-base.foundation.quick-add.quick-add-items.issue-action-assign-to-me",defaultMessage:"Assign to me"},issueFieldAssignee:{id:"issue.issue-base.foundation.quick-add.quick-add-items.issue-field-assignee",defaultMessage:"assignee"}});const RM=Y.default.div(["display:flex;align-items:center;justify-content:space-between;color:",";cursor:default;font-size:","px;font-weight:500;margin-bottom:","px;padding:","px ","px 0;text-transform:uppercase;"],"#6B778C",.75*Q.d,Q.e,2*Q.e,1.5*Q.e)
;var NM=s("./src/packages/common-legacy-do-not-add-anything-new/src/components/transition-screen-legacy-dialog/index.js"),FM=Object(v.h)({successMessage:{id:"issue-field-base.services.field-flags-service.success-message",defaultMessage:"Successfully updated {fieldName}"},errorMessage:{id:"issue-field-base.services.field-flags-service.error-message",defaultMessage:"We couldn't update {fieldName}"}});const UM="EDIT_FIELD_FLAG",VM=(e,t,s)=>e.filter((e=>e.to.id!==(null==t?void 0:t.id))).map((e=>({onClick:()=>s(e),label:e.name,key:String(e.id)}))),KM=({issueKey:e,baseUrl:t,formatMessage:s,createAnalyticsEvent:n,onChangeWorkflow:i,onAddComment:r})=>{const o=Object(Ga.i)(e),[c]=Object(Vu.d)(o),[{data:l}]=Object(jD.b)(),{onSuccess:u,onFailure:d}=(()=>{const{showFlag:e}=Object(Qy.f)();return{onSuccess:Object(a.useCallback)((t=>{e({key:Object(uP.b)(UM),type:"success",title:[FM.successMessage,{fieldName:t}]})}),[e]),onFailure:Object(a.useCallback)((t=>{e({key:Object(uP.b)(UM),type:"error",
title:[FM.errorMessage,{fieldName:t}]})}),[e])}})(),p=s(MM.issueFieldAssignee),[{value:m,fieldConfig:b},{saveValue:f}]=Object(Af.a)({issueKey:e,onSuccess:Object(a.useCallback)((()=>u(p)),[p,u]),onFailure:Object(a.useCallback)((()=>d(p)),[p,d])}),g=Object(a.useCallback)((()=>{const e=n({});f(l,null,e)}),[l,f,n]),h=Object(a.useCallback)((async s=>{s.hasScreen?new NM.a({baseUrl:t,transitionId:s.id,issueKey:e}).onDialogSuccess((()=>{i(s,!0)})).show():(await Object(kc.d)(`/rest/api/2/issue/${e}/transitions`,{body:JSON.stringify({transition:s})}),i(s,!1))}),[t,e,i]);return{onAssignToMeLinkClick:!(null==b||!b.isEditable||!c.canBeAssignedToIssues||(null==m?void 0:m.accountId)===(null==l?void 0:l.accountId))?g:void 0,onAddCommentLinkClick:c.canAddComments?r:void 0,onWorkflowSelected:h}},WM=e=>{const{label:t,issueKey:s}=e;return i.a.createElement(RM,null,i.a.createElement("span",null,t),i.a.createElement("span",null,s))};WM.displayName="ShortcutsGroupHeader"
;var BM=({canCreateAttachment:e,shouldShowCreateSubtaskButton:t,shouldShowIssueInEpicButton:s,canCreateIssueLink:n,canEditIssues:r,onAddAttachmentClick:o,onCreateSubtaskClick:c,onCreateIssueInEpicClick:l,onChildCreateClick:u,supportsChildCreation:d,isServiceDesk:p,canLinkConfluencePage:m,onLinkConfluencePageClick:b,onCreateMajorIncidentClick:f,onLinkIncidentClick:g,canAddWebLinks:h,onAddWebLinkClick:y,onAddIssueLinkClick:O,onChangeWorkflow:j,onAddComment:v,ecosystemActions:E,hasParent:k})=>{const{formatMessage:w}=Object(xe.c)(),S=Object(Qi.a)(),C=Object(Us.f)(),I=Object(Us.g)(),{createAnalyticsEvent:T}=Object(si.a)(),[P]=Object(xl.b)({fieldKey:"servicedesk-incident-linking",issueKey:I}),[_]=Object(xl.b)({fieldKey:"servicedesk-incident-linking",issueKey:I}),[x]=Object(F.isJsmLinkedAlertsEnabled)()?Object(xl.b)({fieldKey:"servicedesk-incident-management",issueKey:I
}):[void 0],D=!!I&&!!C,[{isShortcutsDialogVisible:A},{registerShortcuts:L,setShortcutsLoading:M,setAdminLabel:R}]=Object(pM.a)(),{onAssignToMeLinkClick:N,onAddCommentLinkClick:U,onWorkflowSelected:V}=KM({issueKey:I,baseUrl:S,formatMessage:w,createAnalyticsEvent:T,onChangeWorkflow:j,onAddComment:v}),[,{openLinkAlertsModal:K}]=Object(F.isJsmLinkedAlertsEnabled)()?Object(QD.e)():[void 0,{}],W=Object(AM.c)(E),B=Object(LM.c)(k),[{value:H}]=Object(xM.a)({issueKey:I}),$=Object(a.useCallback)((async()=>{const a=(e=>Object.keys(e).map((t=>e[t])).flat().map((({id:e,label:t,onClick:s})=>({label:t,onClick:s,key:e}))))(kL({formatMessage:w,canCreateAttachment:e,canEditIssues:r,shouldShowCreateSubtaskButton:t,shouldShowIssueInEpicButton:s,canCreateIssueLink:n,onAddAttachmentClick:o,onCreateSubtaskClick:c,onCreateIssueInEpicClick:l,onChildCreateClick:u,supportsChildCreation:d,isServiceDesk:p,canLinkConfluencePage:m,onLinkConfluencePageClick:b,onCreateMajorIncidentClick:f,incidentLinking:_,
incidentEscalate:P,incidentManagement:x,onLinkIncidentClick:g,onLinkAlertsClick:K,canAddWebLinks:h,onAddWebLinkClick:y,onAddIssueLinkClick:O})),j=(({onAddCommentLinkClick:e,onAssignToMeLinkClick:t,formatMessage:s})=>[...t?[{key:"assign-to-me",label:s(MM.issueActionAssignToMe),onClick:t}]:[],...e?[{key:"add-comment",label:s(MM.issueActionComment),onClick:e}]:[]])({onAddCommentLinkClick:U,onAssignToMeLinkClick:N,formatMessage:w}),v={key:"issue.actions",label:i.a.createElement(WM,{label:w(MM.issueActionsSectionLabel),issueKey:I}),isLoaded:!0,weight:2,options:[...a,...j,...W,...B]},E=await Object(DM.a)(I),k={key:"issue.workflows",label:i.a.createElement(WM,{label:w(MM.issueWorkflowsSectionLabel),issueKey:I}),isLoaded:!0,weight:3,options:VM(E.transitions,H,V)},S=i.a.createElement(WM,{label:w(MM.issueAdminSectionLabel),issueKey:I});L([v,k]),R(S)}),[w,e,r,t,s,n,o,c,l,u,d,p,m,b,f,_,P,x,B,g,K,h,y,O,U,N,I,W,H,V,L,R]);return Object(a.useEffect)((()=>{D&&A&&(M(!0),$())}),[D,A,$,M]),null}
;function HM(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function $M(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?HM(Object(s),!0).forEach((function(t){GM(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):HM(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function GM(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const qM=e=>i.a.createElement(R.a,{id:"issue-register-shortcuts-dialog",packageName:"issue"},i.a.createElement(BM,e));qM.displayName="RegisterShortcutsDialog";var zM=Object(r.connect)((e=>$M($M({},YD(e)),{},{ecosystemActions:Object(Rn.j)(e),hasParent:Object(_M.a)(e)})),(e=>$M($M({},DL(e)),{},{
onChangeWorkflow:(t,s)=>{e(Object(El.e)("status",iu,t.to)),e(Object(El.g)("status",t.to,{viaDialog:s}))},onAddComment:()=>{e(Object(Ma.d)(Ma.a)),e(Object(Zs.c)())}})))(qM),YM=s("./node_modules/@atlaskit/analytics-next--next/dist/es2019/hocs/withAnalyticsEvents.js"),QM=s("./node_modules/lodash/toString.js"),JM=s.n(QM),ZM=s("./src/packages/issue/smart-field-prefetch/src/context.js");const XM=hm()(((e,t,s)=>Object(Om.a)(((e,t,s="")=>`${t}/rest/api/3/user/assignable/search?issueKey=${e}&recommend=true&query=&sessionId=${s}`)(e,t,s)))),eR=hm()(((e,t,s,n,a)=>{const i=`${e.baseUrl}/gateway/api/fields/v2/prefetch`;return Object(Om.a)(i,{body:JSON.stringify({context:{product:"jira",sessionId:n,containerId:e.projectId,objectId:e.issueId,principalId:e.accountIdloggedInUser,tenantId:e.cloudId,additionalContext:{properties:t,type:"issue",customPropertyMappings:s}},prefetchFields:a}),headers:{"Content-Type":"application/json"},method:"POST"})
}),(e=>+e.issueId)),tR=hm()(((e,t,s,n)=>Object(Om.a)(((e,t,s="",n)=>`${t}/rest/api/1.0/labels/${n}/suggest?query=&sessionId=${s}`)(0,t,s,n))));function sR(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function nR(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?sR(Object(s),!0).forEach((function(t){aR(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):sR(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function aR(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const iR=e=>null!=e,rR=e=>iR(e)&&""!==e;function oR(){return(oR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]
;for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}const cR={assignee:XM,labels:tR},lR=Object(a.memo)((e=>{const t=(e=>{if(rR(e.projectId)&&iR(e.issueId)&&e.issueId!==Object(rr.j)("")&&rR(e.cloudId)&&rR(e.issueKey)&&iR(e.fields))return nR(nR({},e),{},{issueId:e.issueId,projectId:e.projectId})})(e);if(void 0===t)return null;const[s,n]=Object(ZM.b)(t.issueKey)(),{issueId:i,cloudId:r,projectId:o,accountIdloggedInUser:c,fields:l,baseUrl:u,issueKey:d,customFieldMappings:p,createAnalyticsEvent:m}=t,b={issueId:i,cloudId:r,projectId:o,accountIdloggedInUser:c,baseUrl:u};return Object(a.useEffect)((()=>{if(s&&Object.values(s).filter((e=>e)).length>0)return;const e=Object.keys(cR||{}),t=e.filter((e=>!!l[e]&&l[e].editable));if(!((e,t,s)=>!(e.length<t.length&&(s&&O.a.safeInfoWithoutCustomerData("smart-field-prefetch.index","Prefetch request skipped for non-editable fields.",s({action:"skipped",actionSubject:"prefetch"}).update({
prefetchableFields:t,permissiableFields:e})),0===e.length)))(t,e,m))return;const a=om.a.v4();eR(b,l,p,a,t).then((({prefetchFields:e=[]})=>{((e,t,s,n)=>{if(null==e)return;const a=e({action:"requested",actionSubject:"prefetchFields",actionSubjectId:n}),i={prefetchSessionId:n,requestedFields:t,positiveFields:s};Object(Wa.c)(a,"prefetchFields requested",n,i)})(m,t,e,a),t.forEach((t=>{if(e.includes(t)){const e=om.a.v4(),s=cR[t](d,u,e,i);n.setField(t,a,!0,e,s),((e,t,s,n)=>{if(null==e)return;const a="prefetched",i=e({action:a,actionSubject:"field"}),r={fieldFetchSessionId:n,prefetchSessionId:s,fieldId:t};Object(Wa.c)(i,`field ${a}`,r)})(m,t,a,e)}else n.setField(t,a,!1,null,null)}))})).catch((e=>{O.a.safeErrorWithoutCustomerData("smart-field-prefetch.index","error while calling frs prefetch",e)}))}),[u,b,l,d,p,n,m,i,s]),null}),((e,t)=>JM()(e.issueId)===JM()(t.issueId)&&JM()(e.projectId)===JM()(t.projectId))),uR=e=>{
const t=Object(lm.a)(),s=Object(Us.i)(),n=Object(Ga.g)(s),a=Object(Us.g)(),r=Object(Qi.a)(),o=Object(eh.a)();return i.a.createElement(lR,oR({},e,{cloudId:t,projectId:n,issueKey:a,baseUrl:r,accountIdloggedInUser:o}))};uR.displayName="SmartFieldPrefetchApp";var dR=uR;function pR(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function mR(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?pR(Object(s),!0).forEach((function(t){bR(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):pR(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function bR(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}
const fR=["epic","sprint","storyPointsField","com.atlassian.teams:rm-teams-custom-field-team","com.atlassian.jpo:jpo-custom-field-parent","com.atlassian.jpo:jpo-custom-field-baseline-start","com.atlassian.jpo:jpo-custom-field-baseline-end","com.pyxis.greenhopper.jira:jsw-issue-color","com.pyxis.greenhopper.jira:jsw-story-points"],gR=e=>e?fR.map((t=>{const s=Object(gn.q)(t)(e);return s?{[t]:s.key}:{}})).reduce(((e,t)=>mR(mR({},e),t)),{}):{};var hR=Object(YM.a)()(Object(r.connect)(((e,t)=>({fields:Object(gn.s)(e),issueId:Object(T.w)(e),customFieldMappings:gR(e),createAnalyticsEvent:t.createAnalyticsEvent})),{})(dR));function yR(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function OR(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?yR(Object(s),!0).forEach((function(t){jR(e,t,s[t])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):yR(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function jR(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class vR extends a.Component{constructor(...e){super(...e),this.state={isIssueContainerReady:!1,attachmentHover:!1},this.setIssueBodyContainerRef=e=>{e&&(this.issueBodyContainerRef=e,this.setState({isIssueContainerReady:!0}))},this.setAttachmentHover=e=>{this.setState({attachmentHover:e})},this.setAttachmentHoverFalse=()=>{this.setState({attachmentHover:!1})},this.setAttachmentHoverTrue=()=>{this.setState({attachmentHover:!0})},this.hasErrored=!1,this.issueBodyContainerRef=void 0,this.renderError=(e,t)=>{const{isComplete:s}=this.props,n=OR({},t);switch(e){case"AUTHENTICATION_ERROR":return s?i.a.createElement(ls.c,{location:"auth-error"
},i.a.createElement(ya,null)):i.a.createElement(ya,null);case"NOT_FOUND_OR_NO_PERMISSION_ERROR":return s?i.a.createElement(ls.c,{location:"not-found-or-no-permission-error"},i.a.createElement(wa,null)):i.a.createElement(wa,null);case"CONNECTIVITY_ERROR":return i.a.createElement(_a,null);case"UNKNOWN_ERROR":default:{const e=null==t?void 0:t.statusCode,a=!Object(F.isSkip4xxReportingEnabled)()||!e||!Object(Jt.b)(e);return s&&a?i.a.createElement(ls.a,{location:"unknown-error",failureEventAttributes:n},i.a.createElement(_a,null)):i.a.createElement(_a,null)}}},this.renderAttachmentPickers=()=>{const{isServiceDesk:e,isComplete:t,projectType:s}=this.props;return t?i.a.createElement(Ln,{experience:"renderAttachmentPickers",analyticsSource:e?"issue-view-jsd":"issue-view-non-jsd",projectType:s,isReady:this.state.isIssueContainerReady&&!!this.issueBodyContainerRef
},e?i.a.createElement(i.a.Fragment,null,i.a.createElement(bn,null),i.a.createElement(wn,null),this.state.isIssueContainerReady&&this.issueBodyContainerRef&&i.a.createElement(Tn,{container:this.issueBodyContainerRef,onDragEnter:this.setAttachmentHoverTrue,onDragLeave:this.setAttachmentHoverFalse,onDrop:this.setAttachmentHoverFalse})):i.a.createElement("div",null,i.a.createElement(Js,null),i.a.createElement(kn,null),this.state.isIssueContainerReady&&this.issueBodyContainerRef&&i.a.createElement(Pn,{container:this.issueBodyContainerRef,onDragEnter:this.setAttachmentHoverTrue,onDragLeave:this.setAttachmentHoverFalse,onDrop:this.setAttachmentHoverFalse}))):null}}componentDidMount(){const{onRefresh:e,onMount:t}=this.props;t(),y.a.addRefreshIssueListener(e),this.props.isComplete&&this.props.onLoadedIssueView(),this.handleOnError()}shouldComponentUpdate(e){const{error:t,isLoading:s}=this.props,n=s&&e.isLoading;return e.error!==t||!n}componentDidUpdate(e){const{error:t}=this.props
;null!=t&&(this.hasErrored=!0),this.hasErrored||this.isCompleteStateForFirstTime(e)&&this.props.onLoadedIssueView()}componentWillUnmount(){y.a.removeRefreshIssueListener(this.props.onRefresh)}handleOnError(){const{onError:e,error:t}=this.props;null!=t&&(O.a.safeInfoWithoutCustomerData("issue.viewed.handleOnError","There was an error during issue initialization.",{hasOnError:null!=e}),null!=e&&Object(F.isConnectIssueModalErrorHandlerEnabled)()&&e(t))}isCompleteStateForFirstTime(e){const{isComplete:t}=this.props;return t&&!e.isComplete}renderWorklogModal(){switch(this.props.worklogModal){case"ADD_MODAL":return i.a.createElement(st,null);case"EDIT_MODAL":return i.a.createElement(Dt,null);case"DELETE_MODAL":return i.a.createElement(wt,null);case"NO_MODAL":default:return null}}renderMainContent(){const{error:e,errorMessage:t,isLoading:s,isCompact:n,issueMaxWidth:a,shouldShowCloseButton:r,onClose:o}=this.props;return null!=e?i.a.createElement(us.a,{isCompact:n},i.a.createElement(d.a,{
medium:10},r&&i.a.createElement(ia.a,{viewModeOptions:this.props.viewModeOptions,shouldShowCloseButton:!0,onClose:o}),this.renderError(e,t))):s?i.a.createElement(ds.b,{issueMaxWidth:a}):i.a.createElement(lM,{innerRef:this.setIssueBodyContainerRef,isDropzoneFeedbackEnabled:Object(F.isDropzoneFeedbackEnabled)()},Object(F.isDropzoneFeedbackEnabled)()&&i.a.createElement(uM,{attachmentHover:this.state.attachmentHover}),Object(F.isDropzoneFeedbackEnabled)()&&this.state.attachmentHover&&i.a.createElement(cs,null),i.a.createElement(cM,{renderFeedback:this.props.renderFeedback,issueDeleteCallbacks:this.props.issueDeleteCallbacks,viewModeOptions:this.props.viewModeOptions,isStickyHeaderOffset:this.props.isStickyHeaderOffset,onClose:o,isCompact:n,issueMaxWidth:a,shouldShowProjectLevelBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowRootProjectsBreadcrumb:this.props.shouldShowProjectLevelBreadcrumb,shouldShowCloseButton:r
}),this.renderWorklogModal(),this.renderAttachmentPickers(),i.a.createElement(Un,{externalId:"issue.ecosystem"}),this.props.isComplete&&i.a.createElement(aa,null),i.a.createElement(hR,null))}render(){const{jql:e,filter:t}=u.a.parse(window.location.search),s=null!=e||null!=t;return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ht,{isLoading:this.props.isLoading,isPreview:this.props.isPreview,isComplete:this.props.isComplete,error:this.props.error,metrics:this.props.metrics,issueKey:this.props.issueKey}),this.props.isComplete?i.a.createElement(b.a,null):null,i.a.createElement(Ls,{externalId:"issue.flags"}),i.a.createElement(PM,null),i.a.createElement(p.f,null,this.renderMainContent()),Object(F.isShortcutMenuEnabled)()&&!s&&i.a.createElement(i.a.Fragment,null,i.a.createElement(j.a,null),i.a.createElement(zM,null)))}}vR.displayName="Issue",vR.displayName="Issue",vR.defaultProps={projectType:null,onLoadedIssueView:c.a,onMount:c.a};t.default=Object(qt.a)([Object(f.a)({
onLoadedIssueView:{action:"mounted"}}),Object(r.connect)((e=>({isLoading:Object(P.r)(e),isPreview:Object(P.s)(e),isComplete:Object(P.n)(e),error:Object(P.i)(e),errorMessage:Object(P.h)(e),issueKey:Object(T.x)(e),isServiceDesk:Object(T.s)(e),projectType:Object(P.F)(e),worklogModal:Object(x.e)(e)})),(e=>({onRefresh:()=>e(Object(At.g)()),onMount:()=>{e((()=>({type:"ISSUE_VIEW_MOUNTED"}))())},onLoadedIssueView:e=>{const t={action:"viewed",attributes:{isBoardSearchFieldChangeboardingEnabled:Object(F.isBoardSearchFieldChangeboardingEnabled)(),isBacklogSearchFieldChangeboardingEnabled:Object(F.isBacklogSearchFieldChangeboardingEnabled)()}};try{Object(g.a)(e,t)}catch(s){O.a.safeErrorWithoutCustomerData("issue.viewed",s,new m.a({eventNameSuffix:"issue.error",type:"js",app:"issue",event:s}))}}}))),ps.a,(()=>e=>{var t,s;return s=t=class extends a.Component{constructor(...e){super(...e),this.MetricsContext=Object($t.c)()}render(){const{MetricsContext:t}=this
;return i.a.createElement(t.Consumer,null,(t=>i.a.createElement(e,Gt({},this.props,{metrics:t}))))}},t.displayName=`WithMetricsConsumer(${e.displayName||e.name})`,s})(),Object(h.a)((e=>{const t=Object(Qt.a)(e),s=Object(Yt.b)(e),n=OR(OR(OR({},t.attributes),s),{},{issueHierarchyLevel:Object(F.collapsedHierarchies)()?Object(zt.b)(e):Object(zt.f)(e)});return OR(OR({},t),{},{attributes:n})}))])(vR)},"./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./node_modules/lodash/throttle.js"),r=s.n(i),o=s("./src/packages/common-legacy-do-not-add-anything-new/src/util/browser.js"),c=s("./src/packages/issue/issue-view/src/common/util/dom-util/get-scroll-parent/index.js"),l=s("./src/packages/issue/issue-view/src/feature-flags.js"),u=s("./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js")
;class d extends n.Component{constructor(e){super(e),this.state={shouldShowKeyline:!1},this.getScrollContainer=()=>(this.scrollContainer||(this.scrollContainer=Object(c.a)(this.innerEl.current)),this.scrollContainer),this.calculateShouldShowKeyline=r()((()=>{const e=this.getScrollContainer(),t=this.innerEl.current;if(!e||!t)return;const s=e.getBoundingClientRect(),n=t.getBoundingClientRect(),a=Math.max(s.top,0),i=e.scrollTop>0&&n.top<=a;i!==this.state.shouldShowKeyline&&this.setState({shouldShowKeyline:i})}),100),this.scrollContainer=null,this.innerEl=void 0,this.innerEl=Object(n.createRef)()}componentDidMount(){if(!Object(o.e)())if(Object(l.isStickyHeaderRefactoringEnabled)())window.requestAnimationFrame((()=>{const e=this.getScrollContainer();e&&e.addEventListener("scroll",this.calculateShouldShowKeyline),this.calculateShouldShowKeyline()}));else{const e=this.getScrollContainer();e&&e.addEventListener("scroll",this.calculateShouldShowKeyline),this.calculateShouldShowKeyline()}}
componentWillUnmount(){if(!Object(o.e)()){const e=this.getScrollContainer();e&&e.removeEventListener("scroll",this.calculateShouldShowKeyline)}}render(){return a.a.createElement(u.a,{topOffset:0,id:this.props.elementId,showKeyline:this.state.shouldShowKeyline,innerRef:this.innerEl,customStyles:this.props.customStyles},this.props.children)}}d.displayName="WithShouldShowKeyline"},"./src/packages/issue/issue-view/src/views/issue-details/sticky-header-container/styled.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"a",(function(){return c}));var n=s("./node_modules/styled-components/dist/styled-components.browser.esm.js"),a=s("./node_modules/@atlaskit/theme/dist/es2019/index.js"),i=s("./src/packages/common-legacy-do-not-add-anything-new/src/styles/index.js")
;const r=i.e,o=i.f.card-1,c=n.default.div(["@supports (position:sticky) or (position:-webkit-sticky){position:sticky;background:white;z-index:",";padding-left:","px;margin-left:-","px;padding-top:","px;top:","px;",";",";}"],o,r,r,1,(e=>e.topOffset+-1),(e=>e.showKeyline?`box-shadow: 0 2px ${a.a.N30}`:""),(e=>e.customStyles||""))},"./src/packages/issue/jira-settings-service/src/constants.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));const n="LOCK_IN_NEW_ISSUE_VIEW"},"./src/packages/issue/jira-settings-service/src/main.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return b}));var n={};s.r(n),s.d(n,"setJiraSettings",(function(){return o}));var a=s("./node_modules/react/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const o=e=>({setState:t})=>{t(e)},c=Object(i.a)({name:"jiraSettings",initialState:{
newIssueViewTransitionSettings:{newIssueViewTransitionLockingStatus:"DEFAULT_TO_NEW_ISSUE_VIEW",shouldDelayChangeboarding:!1},issueLinkTypes:[],subtasksConfiguration:{enabled:!0},timeTrackingConfiguration:{isTimeTrackingEnabled:!1,daysPerWeek:0,hoursPerDay:0,defaultUnit:"minute"}},actions:n}),l=Object(r.a)(c,{selector:e=>e.timeTrackingConfiguration}),u=Object(r.a)(c,{selector:e=>e.newIssueViewTransitionSettings||void 0}),d=(Object(r.a)(c,{selector:e=>e.subtasksConfiguration}),Object(r.a)(c,{selector:e=>e.issueLinkTypes}),Object(r.a)(c,{selector:null})),p=()=>{const[e]=l();return[e]},m=()=>{const[e]=u();return[e]},b=()=>{const[,{setJiraSettings:e}]=d();return[null,Object(a.useMemo)((()=>({setJiraSettings:e})),[e])]}},"./src/packages/issue/media-provider/src/controllers/create-auth-provider/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return n})),s.d(t,"b",(function(){return a}));const n=(e,t,s)=>async n=>({clientId:t,token:await e(n?n.collectionName:void 0),baseUrl:s
}),a=e=>()=>Promise.resolve(e)},"./src/packages/issue/media-provider/src/controllers/create-media-provider/utils.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));const n=e=>e.length>0?e[0].token:null,a=e=>({clientId:e.clientId,serviceHost:e.endpointUrl,token:n(e.tokensWithFiles),areTokenPermissionsUpToDate:!0,tokenLifespanInMs:1e3*e.tokenLifespanInSeconds,collection:void 0!==e.collection&&""!==e.collection?e.collection:null,tokenIssueTimestamp:Date.now()-1e4})},"./src/packages/issue/media-provider/src/controllers/token-provider/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n);class i{constructor(){this.status=void 0,this.promise=void 0,this.resolvePromise=void 0,this.rejectPromise=void 0,this.reset()}get(){return this.promise}resolve(e){this.resetIfSettled(),this.resolvePromise(e),this.status="resolved"}reject(){this.resetIfSettled(),this.rejectPromise(),this.status="rejected"}resetIfSettled(){
"pending"!==this.status&&this.reset()}reset(){this.promise=new Promise(((e,t)=>{this.resolvePromise=e,this.rejectPromise=t})),this.status="pending"}}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}t.a=e=>{var t,s;return s=t=class extends n.Component{constructor(e){super(e),this.viewTokenPromiseProvider=void 0,this.updateViewTokenPromise=e=>{const{viewContext:t}=e;t&&t.areTokenPermissionsUpToDate&&t.token?this.viewTokenPromiseProvider.resolve(t.token):this.viewTokenPromiseProvider.resetIfSettled()},this.tokenProvider=async e=>{if(!e)return this.viewTokenPromiseProvider.get();const{uploadContext:t}=this.props.mediaContext;if(t)return t.token;throw new Error("Upload token not available")},this.viewTokenPromiseProvider=new i,this.updateViewTokenPromise(e.mediaContext)}UNSAFE_componentWillReceiveProps(e){
this.updateViewTokenPromise(e.mediaContext)}render(){return a.a.createElement(e,r({tokenProvider:this.tokenProvider},this.props))}},t.displayName=`WithTokenProvider(${String(null!=e.displayName?e.displayName:e.name)})`,s}},"./src/packages/issue/media-provider/src/controllers/with-media-provider/index.js":function(e,t,s){"use strict";var n=s("./node_modules/react/index.js"),a=s.n(n),i=s("./src/packages/issue/issue-fetch-services/src/services/issue-media-read-permissions/index.js"),r=s("./src/packages/issue/media-provider/src/controllers/create-auth-provider/index.js"),o=s("./src/packages/issue/media-provider/src/controllers/create-media-provider/utils.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{}
;t%2?c(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var d=s("./src/packages/issue/media-provider/src/controllers/token-provider/index.js");function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],
t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}const b=e=>{var t,s;return s=t=class extends n.Component{constructor(...e){super(...e),this.setDropzoneRef=e=>{this.dropzoneRef=e},this.resolve=void 0,this.mediaProviderPromise=new Promise((e=>{this.resolve=e})),this.resolved=!1,this.dropzoneRef=null}componentDidMount(){this.resolveMediaProviderPromise()}componentDidUpdate(){this.resolveMediaProviderPromise()}resolveMediaProviderPromise(){const{mediaContext:e,tokenProvider:t,baseUrl:s}=this.props;if(!this.resolved&&this.dropzoneRef&&e.viewContext){this.resolved=!0;const n=((e,t,s)=>{const{viewContext:n,uploadContext:a,userAuth:c}=e;if(!n)throw new TypeError("mediaContext.viewContext was null. Check that the server response has been processed.");let u={viewMediaClientConfig:{authProvider:Object(r.a)(t,n.clientId,n.serviceHost)}};return a&&(u=l(l({},u),{},{uploadParams:{collection:a.collection},uploadMediaClientConfig:{
authProvider:Object(r.a)(t,a.clientId,a.serviceHost),userAuthProvider:c?Object(r.b)(l(l({},c),{},{baseUrl:a.serviceHost})):void 0,getAuthFromContext:async e=>{const t=await Object(i.b)(s,e,65536).map(o.a).toPromise();return{baseUrl:t.serviceHost,clientId:t.clientId,token:t.token||""}}}})),u})(e,t,s);this.resolve(n)}}render(){const t=this.props,{mediaContext:s,tokenProvider:n}=t,i=m(t,["mediaContext","tokenProvider"]);return a.a.createElement("div",{ref:this.setDropzoneRef},a.a.createElement(e,p({mediaProvider:this.mediaProviderPromise},i)))}},t.displayName=`WithMediaProvider(${String(null!=e.displayName?e.displayName:e.name)})`,s};t.a=e=>Object(d.a)(b(e))},"./src/packages/issue/opt-in-back/src/async.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"c",(function(){return i})),s.d(t,"a",(function(){return r}));var n=s("./node_modules/react-async-component/commonjs/index.js");const a=Object(n.asyncComponent)({
resolve:()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("vendor~f9ca8911"),s.e("async-issue-details-opt-in-back-modal")]).then(s.bind(null,"./src/packages/issue/opt-in-back/src/ui/opt-in-modal/index.js")).then((e=>e.default)),name:"AsyncOptInBackModal"}),i=Object(n.asyncComponent)({resolve:()=>Promise.all([s.e("vendor~748942c6"),s.e("vendor~31ecd969"),s.e("vendor~f9ca8911"),s.e("async-issue-details-opt-in-back-onboarding")]).then(s.bind(null,"./src/packages/issue/opt-in-back/src/ui/onboarding/index.js")).then((e=>e.default)),name:"AsyncOptInBackOnboarding"}),r=Object(n.asyncComponent)({resolve:()=>s.e("async-issue-details-opt-back-in-banner").then(s.bind(null,"./src/packages/issue/opt-in-back/src/ui/opt-back-in-banner/index.js")).then((e=>e.default)),name:"AsyncOptBackInBanner"})},"./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return u})),s.d(t,"a",(function(){return d}));var n={};s.r(n),
s.d(n,"setTourIsActive",(function(){return o})),s.d(n,"setTourIsInactive",(function(){return c}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/container.js");const o=()=>({setState:e})=>{e({isTourActive:!0})},c=()=>({setState:e})=>{e({isTourActive:!1})},l=Object(a.a)({name:"new-issue-view-onboarding",initialState:{isTourActive:!1},actions:n}),u=Object(i.a)(l,{selector:e=>e}),d=Object(r.a)(l)},"./src/packages/issue/opt-in-back/src/services/onboarding-tour/main.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/opt-in-back/src/services/onboarding-tour/context.js");const i=()=>{const[{isTourActive:e},{setTourIsActive:t,setTourIsInactive:s}]=Object(a.b)();return[{isTourActive:e},Object(n.useMemo)((()=>({setTourIsActive:t,setTourIsInactive:s})),[t,s])]}},
"./src/packages/issue/project-context-service/src/main.js":function(e,t,s){"use strict";s.d(t,"i",(function(){return E})),s.d(t,"f",(function(){return k})),s.d(t,"k",(function(){return w})),s.d(t,"e",(function(){return S})),s.d(t,"a",(function(){return C})),s.d(t,"b",(function(){return I})),s.d(t,"g",(function(){return T})),s.d(t,"c",(function(){return P})),s.d(t,"d",(function(){return _})),s.d(t,"j",(function(){return x})),s.d(t,"h",(function(){return D}));var n={};s.r(n),s.d(n,"setProjectContext",(function(){return d})),s.d(n,"mergeProjectProperty",(function(){return p}));var a=s("./node_modules/react/index.js"),i=s("./src/packages/platform/utils/types/src/general.js"),r=(s("./src/packages/platform/utils/types/src/application.js"),s("./src/packages/platform/utils/types/src/edition.js"),s("./src/packages/platform/controllers/tenant-context/src/components/tenant-context/index.js"),
s("./node_modules/react-sweet-state/lib/esm/store/create.js")),o=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function c(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function l(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?c(Object(s),!0).forEach((function(t){u(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function u(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const d=(e,t)=>({setState:s})=>{s({[e]:t})},p=(e,t)=>({setState:s,getState:n})=>{const a=l(l({},n()[e]),t);s({[e]:a})},m=Object(r.a)({name:"project-context",initialState:{},
actions:n}),b=Object(o.a)(m,{selector:null}),f=(e,{projectKey:t})=>e[t],g=Object(o.a)(m,{selector:f}),h=Object(o.a)(m,{selector:(e,{projectKey:t})=>{const s=f(e,{projectKey:t});return null==s?void 0:s.projectType}}),y=Object(o.a)(m,{selector:(e,{projectKey:t})=>{const s=f(e,{projectKey:t});return null==s?void 0:s.issueTypeHierarchy}}),O=Object(o.a)(m,{selector:(e,{projectKey:t})=>{const s=f(e,{projectKey:t});return null==s?void 0:s.projectName}}),j=Object(o.a)(m,{selector:(e,{projectKey:t})=>{const s=f(e,{projectKey:t});return null==s?void 0:s.issueTypes}});var v=s("./src/packages/issue/project-context-service/src/utils.js");const E=e=>Object(i.r)(e.split("-")[0]),k=()=>{const[,{setProjectContext:e,mergeProjectProperty:t}]=b();return[null,Object(a.useMemo)((()=>({setProjectContext:e,mergeProjectProperty:t})),[e,t])]},w=e=>{const[t]=h({projectKey:e});return t},S=e=>{const[t]=g({projectKey:e});return t},C=e=>{const[t]=g({projectKey:e})
;return"product_discovery"===(null==t?void 0:t.projectType)||!0===(null==t?void 0:t.isPolarisProject)},I=e=>{const[t]=g({projectKey:e});return(null==t?void 0:t.isSimplified)||!1},T=e=>{const[t]=g({projectKey:e});return null==t?void 0:t.projectId},P=(e,t=null)=>{const[s]=y({projectKey:e}),n=null==s?void 0:s.levels,i=null==s?void 0:s.baseLevelId;return Object(a.useMemo)((()=>Object(v.b)(i,t,n)),[i,t,n])},_=e=>{const t=w(e),s=I(e);return Object(v.a)({isSimplified:s,projectType:t})},x=e=>{const[t]=O({projectKey:e});return t},D=e=>{const[t]=j({projectKey:e});return t}},"./src/packages/issue/project-context-service/src/utils.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return a})),s.d(t,"a",(function(){return o}));var n=s("./src/packages/platform/utils/constants/src/application-keys.js");const a=(e=null,t=null,s={})=>{if(null==t||null==e||void 0===s[t]||void 0===s[e])return null;if(t===e)return 0;let n=0,a=s[t].aboveLevelId,i=s[t].belowLevelId;for(;null!==a||null!==i;){if(n+=1,
a===e)return-n;if(i===e)return n;if(a=null!==a&&s[a]?s[a].aboveLevelId:null,i=null!==i&&s[i]?s[i].belowLevelId:null,a===t||i===t)return null}return null},i="flagActions",r=()=>({applicationKey:n.a.SOFTWARE_ISSUE,issueActions:[i],ecosystemEnabled:!0}),o=e=>{if(e)switch(e.projectType){case"software":return e.isSimplified?(()=>({applicationKey:n.a.SIMPLE_SOFTWARE_BOARD,issueActions:[i,"cardCoverActions"],ecosystemEnabled:!0}))():r();case"business":return(()=>({applicationKey:n.a.CORE_ISSUE,issueActions:[],ecosystemEnabled:!0}))();case"service_desk":return(()=>({applicationKey:n.a.SERVICE_DESK,issueActions:[],ecosystemEnabled:!0}))();default:return r()}return r()}},"./src/packages/issue/project-permissions-service/src/context.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return l})),s.d(t,"c",(function(){return u}));var n={};s.r(n),s.d(n,"setProjectPermissions",(function(){return r}))
;var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");const r=(e,t)=>({setState:s})=>{s({[e]:t})},o={canAddComments:!1,canAdministerJira:!1,canAdministerProject:!1,canAssignIssues:!1,canBeAssignedToIssues:!1,canCloneIssue:!1,canCreateAttachments:!1,canCreateChildren:!1,canCreateSubtask:!1,canDeleteAllAttachments:!1,canDeleteAllComments:!1,canDeleteAllWorklogs:!1,canDeleteIssue:!1,canDeleteOwnAttachments:!1,canDeleteOwnComments:!1,canDeleteOwnWorklogs:!1,canEditAllComments:!1,canEditAllWorklogs:!1,canEditIssues:!1,canEditOwnComments:!1,canEditOwnWorklogs:!1,canLinkIssues:!1,canLogWork:!1,canManageWatchers:!1,canMoveIssue:!1,canModifyReporter:!1,canScheduleIssues:!1,canUseServiceDeskAgentFeatures:!1,canBrowseUsers:!1,canViewDevTools:!1,canViewWatchers:!1,canViewVoters:!1,canCreateIssuesInClassicProjectEpic:!1,canResolveIssues:!1},c=Object(a.a)({name:"project-permissions",initialState:{},actions:n
}),l=Object(i.a)(c,{selector:(e,{projectKey:t})=>e[t]||o}),u=Object(i.a)(c,{selector:null})},"./src/packages/issue/project-permissions-service/src/main.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return i})),s.d(t,"a",(function(){return r})),s.d(t,"b",(function(){return o})),s.d(t,"c",(function(){return c})),s.d(t,"e",(function(){return l}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/project-permissions-service/src/context.js");const i=e=>{const[t,{setProjectPermissions:s}]=Object(a.b)({projectKey:e});return[t,Object(n.useMemo)((()=>({setProjectPermissions:s})),[s])]},r=e=>{const[t]=Object(a.b)({projectKey:e});return t.canAdministerProject},o=e=>{const t=r(e),s=(e=>{const[t]=Object(a.b)({projectKey:e});return t.canAdministerJira})(e);return t||s},c=e=>{const[t]=Object(a.b)({projectKey:e});return t.canUseServiceDeskAgentFeatures},l=()=>{const[,{setProjectPermissions:e}]=Object(a.c)();return[null,Object(n.useMemo)((()=>({setProjectPermissions:e})),[e])]
}},"./src/packages/issue/smart-field-prefetch/src/context.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return f})),s.d(t,"a",(function(){return g}));var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/subscriber.js");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const c={assignee:null,labels:null},l={setField:(e,t,s,n,a)=>({setState:i})=>{i({[e]:{prefetchSessionId:t,prefetched:s,fieldValuePromise:a,sessionId:n}})}},u={},d=e=>(u[e]||(u[e]=(e=>Object(n.a)({name:`smart-issue-prefetch-${e}`,initialState:c,actions:l}))(e)),
u[e]),p={},m=(e,{fieldId:t}={})=>e[t],b={},f=e=>(b[e]||(b[e]=Object(a.a)(d(e))),b[e]),g=(e,t)=>{if(void 0!==p[e]&&null!==p[e]){if(void 0!==p[e][t]&&null!==p[e][t])return p[e][t]}else p[e]=function(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){o(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({labels:null,assignee:null},p[e]);return p[e][t]=Object(i.a)(d(e),{selector:m}),p[e][t]}},"./src/packages/issue/user-preferences-services/src/main.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return O})),s.d(t,"a",(function(){return j}))
;var n=s("./node_modules/react/index.js"),a=s("./src/packages/platform/controllers/tenant-context/src/components/base-url/index.js"),i=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),r=s("./node_modules/react-sweet-state/lib/esm/components/hook.js");function o(e,t){if(null==e)return{};var s,n,a=function(e,t){if(null==e)return{};var s,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||(a[s]=e[s]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)s=i[n],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(a[s]=e[s])}return a}function c(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function l(e,t){
var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function u(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?l(Object(s),!0).forEach((function(t){d(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):l(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function d(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const p={setUserPreferenceValue:(e,t)=>({setState:s,getState:n})=>{s({preferences:u(u({},n().preferences),{},{[e]:t})})},deleteUserPreferenceValue:e=>({setState:t,getState:s})=>{const n=s().preferences,{[e]:a}=n;t({preferences:o(n,[e].map(c))})},setUserPreferences:e=>({setState:t})=>{t({preferences:e})},
getUserPreferenceValue:e=>({getState:t})=>{const{preferences:s}=t();return s[e]}},m=Object(i.a)({name:"user-preferences",initialState:{preferences:{}},actions:p}),b=Object(r.a)(m,{selector:(e,t)=>e.preferences[t]}),f=Object(r.a)(m,{selector:null});var g=s("./src/packages/platform/utils/fetch/src/utils/requests.js");const h=async(e,t,s)=>Object(g.e)(`${e}/rest/api/2/mypreferences?key=${t}`,{body:s}),y=async(e,t)=>Object(g.a)(`${e}/rest/api/2/mypreferences?key=${t}`),O=e=>{const t=Object(a.a)(),[s,{setUserPreferenceValue:i,deleteUserPreferenceValue:r}]=b(e);return[s,{setValue:Object(n.useCallback)((s=>(i(e,s),h(t,e,s))),[t,i,e]),deleteValue:Object(n.useCallback)((()=>(r(e),y(t,e))),[t,r,e])}]},j=()=>{const e=Object(a.a)(),[,t]=f();return[null,Object(n.useMemo)((()=>({setUserPreferenceValue:(s,n)=>{t.setUserPreferenceValue(s,n),h(e,s,n)},setUserPreferences:e=>{e&&0!==Object.keys(e).length&&t.setUserPreferences(e)},deleteUserPreferenceValue:s=>{t.deleteUserPreferenceValue(s),y(e,s)},
getUserPreferenceValue:t.getUserPreferenceValue})),[t,e])]}},"./src/packages/issue/workflow-transitions-services/src/context.js":function(e,t,s){"use strict";s.d(t,"d",(function(){return d})),s.d(t,"c",(function(){return p})),s.d(t,"b",(function(){return m})),s.d(t,"a",(function(){return b}));var n=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),a=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/container.js");function r(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,n)}return s}function o(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?r(Object(s),!0).forEach((function(t){c(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):r(Object(s)).forEach((function(t){
Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}const l={setState:(e={})=>({setState:t,getState:s})=>{t(o(o({},s()),e))},setTransitionInProgress:e=>({setState:t,getState:s})=>{t({ui:o(o({},s().ui),{},{transitionInProgress:e})})}},u=Object(n.a)({name:"workflow-transitions",initialState:{data:null,loading:!1,error:null,ui:{transitionInProgress:!1}},actions:l}),d=Object(a.a)(u,{selector:e=>e}),p=Object(a.a)(u,{selector:e=>e.ui.transitionInProgress}),m=Object(a.a)(u,{selector:null}),b=Object(i.a)(u)},"./src/packages/issue/workflow-transitions-services/src/main.js":function(e,t,s){"use strict";s.d(t,"c",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return o}));var n=s("./node_modules/react/index.js"),a=s("./src/packages/issue/workflow-transitions-services/src/context.js");const i=()=>{
const[e,{setState:t}]=Object(a.d)();return[e,t]},r=()=>{const[e]=Object(a.c)();return e},o=()=>{const[,e]=Object(a.b)();return[null,Object(n.useMemo)((()=>({setState:t=>{e.setState(t)},setTransitionInProgress:t=>{e.setTransitionInProgress(t)}})),[e])]}},"./src/packages/issue/worklog/src/services/context/index.js":function(e,t,s){"use strict";s.d(t,"a",(function(){return i}));var n=s("./node_modules/react-sweet-state/lib/esm/components/hook.js"),a=s("./src/packages/issue/worklog/src/services/store/index.js");const i=Object(n.a)(a.b,{selector:e=>e.isRollingUp})},"./src/packages/issue/worklog/src/services/store/index.js":function(e,t,s){"use strict";s.d(t,"b",(function(){return c})),s.d(t,"a",(function(){return l}));var n={};s.r(n),s.d(n,"markRollingUpData",(function(){return r})),s.d(n,"unmarkRollingUpData",(function(){return o}));var a=s("./node_modules/react-sweet-state/lib/esm/store/create.js"),i=s("./node_modules/react-sweet-state/lib/esm/components/container.js")
;const r=()=>({setState:e})=>{e({isRollingUp:!0})},o=()=>({setState:e})=>{e({isRollingUp:!1})},c=Object(a.a)({name:"worklog-time-tracking",initialState:{isRollingUp:!0},actions:n}),l=Object(i.a)(c)}}]);try{window.__jsEvalStop("async-issue-app~issue.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-issue-app~issue.a36b0893d274169d6583.8.js.map